MSXHeroes.asm1 fname "MSXLegends.rom"2 org $40003MSXHeroes:58 dw "AB",init,0,0,0,0,0,0,"ASCII16X"912memInit: 13 phase $c0001416initMem: 17 call whereAmI 18 ld (romSlot),a19 ld hl,$000020 call findRam 21 ld (page0ram),a22 ld hl,$400023 call findRam 24 ld (page1ram),a25 ld hl,$800026 call findRam 27 ld (page2ram),a28 29 30 and $0331 add a,a32 add a,a33 ld b,a34 ld a,(page1ram)35 and $0336 or b37 add a,a38 add a,a39 ld b,a40 ld a,(page0ram)41 and $0342 or b43 ld b,a44 call $13845 and $c046 or b47 ld b,a48 ld (slot.ram),a49 50 and $f351 ld c,a52 ld a,(romSlot)53 and $0354 add a,a55 add a,a56 or c57 ld (slot.page1rom),a58 59 ld a,b60 and $cf61 ld c,a62 ld a,(romSlot)63 and $0364 add a,a65 add a,a66 add a,a67 add a,a68 or c69 ld (slot.page2rom),a70 71 ld a,b72 and $c373 ld c,a74 ld a,(romSlot)75 and $0376 ld b,a77 add a,a78 add a,a79 or b80 add a,a81 add a,a82 or c83 ld (slot.page12rom),a84 88 94 ld a,(page2ram)95 ld h,$80 96 call $2497 105 ld a,(romSlot)106 ld h,$80107 call $24108 109 ld a,(page1ram)110 ld h,$40111 call $24112 113 ld a,(romSlot)114 ld h,$40115 call $24116 117 ld b,3118 ld de,.enaRam119 ld hl,$3ffd120 push hl121.ramOn: 122 push bc123 push de124 push hl125 ld a,(de)126 ld e,a127 ld a,(page0ram)128 call $14129 pop hl130 pop de131 pop bc132 inc de133 inc hl134 djnz .ramOn135 ld a,(page0ram)136 push af137 pop iy138 pop ix139 ld (tempStack),sp140 jp $1c142.done: 143 ld sp,(tempStack)144 ret146.enaRam: 147 jp .done149searchSlot: db 0150searchAddress: dw 0151tempStack: dw 0152page0ram: db 0153page1ram: db 0154page2ram: db 0155romSlot: db 0156159whereAmI: 160 call $138161 rrca162 rrca163 and $03164 ld c,a165 ld b,0166 ld hl,$fcc1167 add hl,bc168 or (hl)169 ld c,a170 inc hl171 inc hl172 inc hl173 inc hl174 ld a,(hl)175 and $0c176 or c177 ret178182findRam: 183 ld bc,4 *256+ 0184 ld (searchAddress),hl185 ld hl,$fcc1186.primary.loop: 187 push bc188 push hl189 ld a,(hl)190 bit 7,a191 jr nz,.secondary192 ld a,c193 call .check194.primary.next: 195 pop hl196 pop bc197 ld a,(searchSlot)198 ret c199 inc hl200 inc c201 djnz .primary.loop202 ld a,-1 203 ld (searchSlot),a204 ret206.secondary: 207 and $80208 or c209 ld b,4210.sec.loop: 211 push bc212 call .check213 pop bc214 jr c,.primary.next215 add a,4216 djnz .sec.loop217 jr .primary.next219.check: 220 ld (searchSlot),a221 call .read222 ld b,a223 cpl224 ld c,a225 call .write226 call .read227 cp c228 jr nz,.noram229 cpl230 call .write231 call .read232 cp b233 jr nz,.noram234 ld a,(searchSlot)235 scf236 ret237.noram: 238 ld a,(searchSlot)239 or a240 ret242.read: 243 push bc244 push hl245 ld a,(searchSlot)246 ld hl,(searchAddress)247 call $0c248 pop hl249 pop bc250 ret252.write: 253 push bc254 push hl255 ld e,a256 ld a,(searchSlot)257 ld hl,(searchAddress)258 call $14259 pop hl260 pop bc261 ret263initMem.length: equ $-initMem264 dephase265269270init:271 ld a,13 272 ld ($f3e9),a 273 ld ($f3ea),a 274 ld ($f3eb),a 276 ld a,13 277 di278 out ($99),a279 ld a,16+128280 out ($99),a281 xor a282 out ($9a),a283 ei284 out ($9a),a286 ld a,5 287 call $5f289 ld a,($180) 290 ld (TurboOn?),a292EXTROM: equ 0015fh293REDCLK: equ 001f5h295 ld c,$7 296 ld ix,REDCLK297 call EXTROM 298 ld (DayOfMonthEenheden),a300 ld c,$8 301 ld ix,REDCLK302 call EXTROM 303 ld (DayOfMonthTientallen),a305 ld c,$9 306 ld ix,REDCLK307 call EXTROM 308 ld (MonthEenheden),a310 ld c,$a 311 ld ix,REDCLK312 call EXTROM 313 ld (MonthTientallen),a315 ld c,$b 316 ld ix,REDCLK317 call EXTROM 318 ld (YearEenheden),a320 ld c,$c 321 ld ix,REDCLK322 call EXTROM 323 ld (YearTientallen),a325329333 ld a,($2d) 334 ld (ComputerID),a352call PopulateControlsTEST353358 halt359 halt360 halt361 halt362 halt363 halt364 halt365call PopulateControlsTEST366 halt367 halt368 halt369 halt370 halt371 halt372 halt373 halt374 halt375 halt376 ld a,(Controls)377 bit 6,a378 ret nz402403 ld hl,$F3DF404 ld de,VDP_0405 ld bc,8406 ldir408 ld hl,$FFE7409 ld de,VDP_8410 ld bc,30411 ldir412413 ld sp,$ff00414416 ld a,(VDP_8+1) 417 and %1111 1101 418 or %1000 0000 419 ld (VDP_8+1),a420 di421 out ($99),a422 ld a,9+128423 ei424 out ($99),a426427 ld a,(vdp_8)428 or 32 430 ld (vdp_8),a431 di432 out ($99),a433 ld a,8+128434 ei435 out ($99),a437 xor a438 ld (vdp_8+15),a439 di440 out ($99),a441 ld a,23+128442 ei443 out ($99),a445 di446 im 1447 ld bc,initMem.length448 ld de,initMem449 ld hl,memInit450 ldir451 call initMem453 xor a 454 ld (memblocks.1),a455 ld ($6000),a456 inc a457 ld (memblocks.2),a458 ld ($7000),a460461 ld hl,tempisr462 ld de,$38463 ld bc,6464 ldir466467 ld a,(vdp_0+1)468 or 2 469 ld (vdp_0+1),a470 di471 out ($99),a472 ld a,1+128473 ei474 out ($99),a475477 ld hl,engine478 ld de,engaddr479 ld bc,enlength 480 ldir482 ld hl,enginepage3 483 ld de,enginepage3addr 484 ld bc,enginepage3length 485 ldir487if MusicOn?488 call VGMRePlay489endif493 jp InitiateGame510PopulateControlsTEST:511 ld a,15 512 di513 out ($a0),a514 ld a,$8f515 out ($a1),a516 ld a,14 517 out ($a0),a518 ei519 in a,($a2)520 cpl521 and $3f 522 ld c,a524 ld de,$04F0525 526 in a,($aa)527 and e528 or 6529 out ($aa),a530 in a,($a9)531 cpl532 and $20 533 rlca 534 or c535 ld c,a 536 537 in a,($aa) 538 and e539 or d540 out ($aa),a541 in a,($a9)542 cpl543 and d 544 ld b,a545 in a,($aa)546 and e547 or 8548 out ($aa),a549 in a,($a9)550 cpl 551 and $F1 552 rlca 553 or b 554 rla 555 rla 556 rla 557 ld b,a558 rla 559 rla 560 rla 561 and d 562 or b 563 or c 564 565 ld b,a566 ld hl,Controls567 ld a,(hl)568 xor b569 and b570 ld (NewPrContr),a571 ld (hl),b572 ret591 592tempisr: 593 push af594 in a,($99) 595 pop af596 ei 597 ret599602enginepage3:603 enginepage3.asm1phase $c0003StartAtTitleScreen?: equ 14StartOfTurnMessageOn?: equ 15MusicOn?: equ 16Music50PercentSpeed?: equ 08Promo?: equ 09OptionsAvailable?: equ 010CollectionOptionAvailable?: equ 011UnlimitedBuildsPerTurn?: equ 012DisplayNumbers1to6?: equ 014ShowNewlyBoughtBuildingFadingIn?: db 115DiskMenuClicked?: db 016BackToMainMenu?: db 018AmountOfFramesWaitUntilPlayNextSfx: equ 6019WaitFramesUntilPlayNextSfx: db 121StopSong: equ 25523WorldSong: equ 15 24SongVictory: equ 125SongDefeat: equ 226SongDewA: equ 327SongDewB: equ 428SongGloomyA: equ 529SongGloomyB: equ 630SongHaze: equ 731SongTitle: equ 832SongSolitude: equ 933SongSquareA: equ 1034SongSquareB: equ 1135SongWarzoneA: equ 1236SongWarzoneB: equ 1337SongWarzoneC: equ 1439InitiateGame:40 ld hl,CHMOUS41 call ExecuteLoaderRoutine 4347 ld a,348 ld (DisplayStartOfTurnMessage?),a49 ld a,150 ld (whichplayernowplaying?),a 51 xor a52 ld (CampaignFinished?),a5455 ld hl,pl1hero1y56 ld (plxcurrentheroAddress),hl57 ld (CurrentCursorSpriteCharacter),hl58 call SpriteInitialize 60 ld a,261 ld (PlayerThatGetsAttacked),a62 ld hl,pl2hero1y6364 ld (HeroThatGetsAttacked),hl 65 ld a,16669 call LoadSamplesAndPlaySong07073 call LoadAmountOfCampaignsFinished75 if StartAtTitleScreen?76 call TitleScreen77 endif78 StartGame:7982 call LoadWorldMapAndObjectLayerMap 8486 ld hl,FindAndSetCastles 87 call ExecuteLoaderRoutine88 ld hl,PlaceHeroesInCastles 89 call ExecuteLoaderRoutine90 ld hl,ConvertMonstersObjectLayer 91 call ExecuteLoaderRoutine92 ld hl,ShuffleCastleMageGuildSpells 93 call ExecuteLoaderRoutine94 xor a95 ld (framecounter),a97 ld a,WorldSong98 ld (ChangeSong?),a100 call SetCampaignHeroesCastlesResources102 call LoadSaveData116121126133 .WhenExitingCombat:134 call CenterMousePointer135 call SetScreenOff136 call LoadWorldTiles 137 call SetMapPalette138 call SetBattleScreenBlock139 call LoadAllObjectsInVram 140 call SetScreenOff141 call LoadHud 144148 call SetInterruptHandler 149 call SetAllSpriteCoordinatesInPage2 150 call SetAllHeroPosesInVram 151 call InitiatePlayerTurn 152 call ClearMapPage0AndMapPage1153 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady154 call DoCopy156158162169172176185186 jp LevelEngine188189FadeOutMusic:190 ld a,StopSong191 ld (ChangeSong?),a192 ld b,20193 .waitloop:194 ei195 halt196 djnz .waitloop197 ret199LoadAmountOfCampaignsFinished:200 di 201 ld a,(slot.page12rom) 202 out ($a8),a204 ld a,SaveDataBlock11-$100205 ld ($6100),a 207 ld a,($4000)208 ld (AmountOfCampaignsFinished),a209 ret211SetCampaignHeroesCastlesResources:212 ld a,(CampaignMode?)213 or a214 ret z216 ld a,(slot.page12rom) 217 out ($a8),a 218 ld a,CampaignInfoblock219 call block12 220 ld a,TitleScreenCodeblock 221 call block34 222 jp DoSetCampaignHeroesCastlesResources225LoadSaveData?: db 0226LoadSaveData:227 ld a,(LoadSaveData?)228 or a229 ret z230 xor a231 ld (LoadSaveData?),a233 ld a,(SaveGameSelected) 234 cp 255235 ret z237 ld a,(slot.page12rom) 238 out ($a8),a240 di 242 ld a,(SaveGameSelected) 243 add a,a244 add a,a 246 ld ($6100),a 248 ld hl,$4000249 ld de,StartSaveGameData250 ld bc,EndSaveGameData-StartSaveGameData251 ldir253 ld a,(SaveGameSelected) 254 add a,a255 add a,a 256 inc a 258 ld ($6100),a 260 ld a,(slot.page1rom) 261 out ($a8),a263 ld hl,$4000264 ld de,$8000265 ld bc,$4000266 ldir270 ei271 ret276SaveGameToFlash:277 di 279 ld a,(slot.page12rom) 280 out ($a8),a282 ld a,(SaveGameSelected) 283 add a,a284 add a,a 285 ld ($7100),a 287290 291 ld a,(SaveGameSelected) 292 add a,a293 add a,a 294 ld ($7100),a 296 297 ld hl,$8000298 call SectorErase 300 call CheckEraseDone302 303 ld hl,StartSaveGameData304 ld de,$8000305 ld bc,EndSaveGameData-StartSaveGameData306 call FlashWrite308 309 ld a,(SaveGameSelected) 310 add a,a311 add a,a 312 inc a 313 ld ($6100),a 315 ld a,(slot.page1rom) 316 out ($a8),a318 ld a,2 319 out ($fe),a 321 call WriteObjectLayerFirstAndSecond4KB322 call WriteObjectLayerFourth4KB324 325 ld a,(SaveGameSelected) 326 add a,a327 add a,a 328 inc a 329 ld ($7100),a 331 ld a,(slot.page2rom) 332 out ($a8),a334 ld a,2 335 out ($fd),a 337 call WriteObjectLayerThird4KB339341 ld a,(slot.page12rom) 342 out ($a8),a344 ld a,ExtraRoutinesCodeBlock 345 call block12 346 ret348CheckEraseDone:349 ld hl,8000H 350 ld a,0FFH 351 Erase_Wait:352 cp (hl) 353 ret z 354 jr Erase_Wait 356SectorErase: 357 ld a,$aa358 ld ($4aaa),a360 ld a,$55361 ld ($4555),a363 ld a,$80364 ld ($4aaa),a366 ld a,$aa367 ld ($4aaa),a369 ld a,$55370 ld ($4555),a372 ld a,$30373 ld (hl),a374 ret376WriteObjectLayerFirstAndSecond4KB: 377 ld hl,$8000 378 ld de,$4000 379 ld bc,$2000 380 jr FlashWrite382WriteObjectLayerThird4KB: 383 ld hl,$6000 384 ld de,$a000 385 ld bc,$1000 387 .loop:388 ld a,$AA 389 ld ($8AAA),a390 ld a,$55391 ld ($8555),a392 ld a,$A0 393 ld ($8AAA),a397 ld a,(hl)398 ld (de),a400 .CheckIfWritten:401 ld a,(de)402 cp (hl)403 jr nz,.CheckIfWritten406 inc hl407 inc de408 dec bc410 ld a,b411 or c412 jr nz,.loop413 ret428WriteObjectLayerFourth4KB: 429 ld hl,$b000 430 ld de,$7000 431 ld bc,$1000 432 jr FlashWrite434FlashWrite: 435 ld a,$AA 436 ld ($4AAA),a437 ld a,$55438 ld ($4555),a439 ld a,$A0 440 ld ($4AAA),a442 ld a,(hl)443 ld (de),a445 .CheckIfWritten:446 ld a,(de)447 cp (hl)448 jr nz,.CheckIfWritten451 inc hl452 inc de453 dec bc455 ld a,b456 or c457 jr nz,FlashWrite458 ret464CurrentSongBeingPlayed: db 0465LoadSamplesAndPlaySong0:466 ld a,(RePlayer_playing)467 and a468 ret nz470 ld a,0471 ld (CurrentSongBeingPlayed),a472 call RePlayer_Stop473 ld bc,0 474 ld a,usas2repBlock 475 ld hl,$8000+1476 call RePlayer_Play 477 call RePlayer_Tick 478 ret480SoundData: equ $8000481VGMRePlay:482 ld a,(slot.page12rom) 483 out ($a8),a484 ei485 486 ld a,FormatOPL4_ID487 call RePlayer_Detect 488 call RePlayerSFX_Initialize489 ld a,MusicOn? 490 and A491 ret z492 ld bc,0 493 ld a,usas2repBlock 494 ld hl,$8000+1495 call RePlayer_Play 496 call RePlayer_Tick497 call RePlayer_Stop498 ret500Main_Loop:501 halt502 call RePlayer_Tick503 jp Main_Loop 505RePlayer.asm14 MoonSound.asm16MoonSound_FM_BASE: equ 0C4H7MoonSound_STATUS: equ MoonSound_FM_BASE8MoonSound_FM1_ADDRESS: equ MoonSound_FM_BASE9MoonSound_FM1_DATA: equ MoonSound_FM_BASE + 110MoonSound_FM2_ADDRESS: equ MoonSound_FM_BASE + 211MoonSound_FM2_DATA: equ MoonSound_FM_BASE + 312MoonSound_WAVE_BASE: equ 07EH13MoonSound_WAVE_ADDRESS: equ MoonSound_WAVE_BASE14MoonSound_WAVE_DATA: equ MoonSound_WAVE_BASE + 11617MoonSound_Detect:18 call MoonSound_ReadStatusRegister 19 call MoonSound_ReadStatusRegister20 and a21 ret nz22 ld de,0503H23 call MoonSound_WriteFM2Register 24 ld a,02H25 call MoonSound_ReadWaveRegister 26 and 11100000B27 xor 00100000B28 ret nz29 ld de,0210H30 call MoonSound_WriteWaveRegister 31 scf32 ret34MoonSound_JumpTable:35 jp MoonSound_Process36 jp MoonSound_Mute37 jp MoonSound_Restore3942MoonSound_Process:43MoonSound_Process_Loop:44 ld a,(hl)45 inc hl46 add a,a47 jr nc,MoonSound_Process_FM48 jp p,MoonSound_WriteWave4950 cp ($c1 << 1) and ($ff)51 jp c,MoonSound_Call52 jp z,MoonSound_Return5354 cp ($c3 << 1) and ($ff)55 jp c,MoonSound_Jump56 jp z,MoonSound_WaitLoad5758 sub ($c4 << 1) and ($ff)59 jr z,MoonSound_WriteMemory60 rrca61 ret62MoonSound_Process_FM:63 jp p,MoonSound_WriteFM164 jp MoonSound_WriteFM26668MoonSound_WriteFM1:69 xor 80H - 270 ld c,MoonSound_FM1_DATA71 jp MoonSound_WriteBlock7375MoonSound_WriteFM2:76 xor 100H - 277 ld c,MoonSound_FM2_DATA78 jp MoonSound_WriteBlock8082MoonSound_WriteWave:83 xor 80H - 284 ld c,MoonSound_WAVE_DATA85 jp MoonSound_WriteBlock8788MoonSound_WaitLoad:89 in a,(MoonSound_STATUS)90 and 00000010B91 jr nz,MoonSound_WaitLoad92 jp MoonSound_Process_Loop9495MoonSound_WriteMemory:96 ld c,(hl)97 inc hl98 ld b,(hl)99 inc hl100 call MoonSound_WriteWaveMemory101 jp MoonSound_Process_Loop103106MoonSound_WriteBlock:107 ld e,a108 ld d,0109 ld iy,MoonSound_WriteBlock_Unrolled110 add iy,de111 sla e112 add iy,de113 jp (iy)114MoonSound_WriteBlock_Unrolled:115116 dec c | outi | inc c | outi117 dec c | outi | inc c | outi118 dec c | outi | inc c | outi119 dec c | outi | inc c | outi120 dec c | outi | inc c | outi121 dec c | outi | inc c | outi122 dec c | outi | inc c | outi123 dec c | outi | inc c | outi124 dec c | outi | inc c | outi125 dec c | outi | inc c | outi126 dec c | outi | inc c | outi127 dec c | outi | inc c | outi128 dec c | outi | inc c | outi129 dec c | outi | inc c | outi130 dec c | outi | inc c | outi131 dec c | outi | inc c | outi133 dec c | outi | inc c | outi134 dec c | outi | inc c | outi135 dec c | outi | inc c | outi136 dec c | outi | inc c | outi137 dec c | outi | inc c | outi138 dec c | outi | inc c | outi139 dec c | outi | inc c | outi140 dec c | outi | inc c | outi141 dec c | outi | inc c | outi142 dec c | outi | inc c | outi143 dec c | outi | inc c | outi144 dec c | outi | inc c | outi145 dec c | outi | inc c | outi146 dec c | outi | inc c | outi147 dec c | outi | inc c | outi148 dec c | outi | inc c | outi150 dec c | outi | inc c | outi151 dec c | outi | inc c | outi152 dec c | outi | inc c | outi153 dec c | outi | inc c | outi154 dec c | outi | inc c | outi155 dec c | outi | inc c | outi156 dec c | outi | inc c | outi157 dec c | outi | inc c | outi158 dec c | outi | inc c | outi159 dec c | outi | inc c | outi160 dec c | outi | inc c | outi161 dec c | outi | inc c | outi162 dec c | outi | inc c | outi163 dec c | outi | inc c | outi164 dec c | outi | inc c | outi165 dec c | outi | inc c | outi167 dec c | outi | inc c | outi168 dec c | outi | inc c | outi169 dec c | outi | inc c | outi170 dec c | outi | inc c | outi171 dec c | outi | inc c | outi172 dec c | outi | inc c | outi173 dec c | outi | inc c | outi174 dec c | outi | inc c | outi175 dec c | outi | inc c | outi176 dec c | outi | inc c | outi177 dec c | outi | inc c | outi178 dec c | outi | inc c | outi179 dec c | outi | inc c | outi180 dec c | outi | inc c | outi181 dec c | outi | inc c | outi182 dec c | outi | inc c | outi183184 jp MoonSound_Process_Loop186187MoonSound_Jump:188189 ld e,(hl)190 inc hl191 ld d,(hl)192 inc hl193 ld a,(RePlayer_currentBank)194 add a,(hl)195 inc hl196 add hl,de197 ld (RePlayer_currentBank),a198199 ld (7000H),a200 jp MoonSound_Process_Loop202204MoonSound_Call:205206 ld e,(hl)207 inc hl208 ld d,(hl)209 inc hl210 ld b,(hl)211 inc hl212 ld a,(RePlayer_currentBank)213214 ld (ix + 0),l215 ld (ix + 1),h216 ld (ix + 2),a217 inc ix218 inc ix219 inc ix220 add hl,de221 add a,b222 ld (RePlayer_currentBank),a223224 ld (7000H),a225 jp MoonSound_Process_Loop227229MoonSound_Return:230232 dec ix233 dec ix234 dec ix235 ld l,(ix + 0)236 ld h,(ix + 1)237 ld a,(ix + 2)238 ld (RePlayer_currentBank),a239240 ld (7000H),a241 jp MoonSound_Process_Loop243MoonSound_Mute:244 ld a,0BDH245 call MoonSound_ReadFM1Register246 and 11100000B247 ld e,a248 ld d,0BDH249 call MoonSound_WriteFM1Register250 ld b,9251MoonSound_MuteFM1_Loop:252 ld a,0B9H253 sub b254 ld d,a255 call MoonSound_ReadFM1Register256 and 11011111B257 ld e,a258 call MoonSound_WriteFM1Register259 djnz MoonSound_MuteFM1_Loop260 ld b,9261MoonSound_MuteFM2_Loop:262 ld a,0B9H263 sub b264 ld d,a265 call MoonSound_ReadFM2Register266 and 11011111B267 ld e,a268 call MoonSound_WriteFM2Register269 djnz MoonSound_MuteFM2_Loop270 ld b,24271MoonSound_MuteWave_Loop:272 ld a,80H273 sub b274 ld d,a275 call MoonSound_ReadWaveRegister276 and 00111111B277 or 01000000B278 ld e,a279 call MoonSound_WriteWaveRegister280 djnz MoonSound_MuteWave_Loop281 ret283MoonSound_Restore:284 ret286288MoonSound_WriteFM1Register:289 ld a,d290 out (MoonSound_FM1_ADDRESS),a291 nop 292 ld a,e293 out (MoonSound_FM1_DATA),a294 ret296298MoonSound_ReadFM1Register:299 out (MoonSound_FM1_ADDRESS),a300 nop 301 nop302 in a,(MoonSound_FM1_DATA)303 ret305307MoonSound_WriteFM2Register:308 ld a,d309 out (MoonSound_FM2_ADDRESS),a310 nop 311 ld a,e312 out (MoonSound_FM2_DATA),a313 ret315317MoonSound_ReadFM2Register:318 out (MoonSound_FM2_ADDRESS),a319 nop 320 nop321 in a,(MoonSound_FM2_DATA)322 ret324326MoonSound_WriteWaveRegister:327 ld a,d328 out (MoonSound_WAVE_ADDRESS),a329 cp (ix) 330 ld a,e331 out (MoonSound_WAVE_DATA),a332 ret334336MoonSound_ReadWaveRegister:337 out (MoonSound_WAVE_ADDRESS),a338 cp (ix) 339 nop340 in a,(MoonSound_WAVE_DATA)341 ret343344MoonSound_ReadStatusRegister:345 in a,(MoonSound_STATUS)346 ret348350MoonSound_WriteWaveMemory:351 ld a,06H352 out (MoonSound_WAVE_ADDRESS),a353 dec bc354 inc b355 inc c356 ld a,b357 ld b,c358 ld c,MoonSound_WAVE_DATA359MoonSound_WriteMemory_Loop:360 otir361 dec a362 jr nz,MoonSound_WriteMemory_Loop363 ret364RePlayer.asm5 RePlayerSFX.asm14RePlayerSFX_CHANNEL_COUNT: equ 16RePlayerSFX_Initialize:7 ld de,48 ld ix,RePlayerSFX_channels9 ld b,RePlayerSFX_CHANNEL_COUNT10RePlayerSFX_Initialize_Loop:11 ld (ix + 0),SFX_nop and 0FFH12 ld (ix + 1),SFX_nop >> 813 ld (ix + 2),usas2sfx1repBlock14 ld (ix + 3),115 add ix,de16 djnz RePlayerSFX_Initialize_Loop17 ret1923RePlayerSFX_PlayCh1: 24 ld a,AmountOfFramesWaitUntilPlayNextSfx25 ld (WaitFramesUntilPlayNextSfx),a27 ld iy,RePlayerSFX_channels28 di29 ld (iy + 0),c30 ld (iy + 1),b31 ld (iy + 2),usas2sfx1repBlock32 ei33 ld (iy + 3),134 ret36RePlayerSFX_PlayCh1_MouseAction: 37 ld a,(WaitFramesUntilPlayNextSfx)38 dec a39 ret nz41 ld iy,RePlayerSFX_channels42 di43 ld (iy + 0),c44 ld (iy + 1),b45 ld (iy + 2),usas2sfx1repBlock46 ei47 ld (iy + 3),148 ret51RePlayerSFX_Tick:52 ld a,(WaitFramesUntilPlayNextSfx)53 dec a54 jr z,.go55 ld (WaitFramesUntilPlayNextSfx),a56 .go:59 ld a,(RePlayer_currentBank)60 push af61 ld ix,RePlayerSFX_channels62 ld b,RePlayerSFX_CHANNEL_COUNT63RePlayerSFX_Tick_Loop:64 dec (ix + 3)65 jr nz,RePlayerSFX_Tick_Next66 push bc67 ld l,(ix + 0)68 ld h,(ix + 1)69 ld a,(ix + 2)70 ld (RePlayer_currentBank),a7172 ld (7000H),a73 call RePlayer_Process74 ld (ix + 3),a75 ld a,(RePlayer_currentBank)76 ld (ix + 0),l77 ld (ix + 1),h78 ld (ix + 2),a79 pop bc80RePlayerSFX_Tick_Next:81 inc ix82 inc ix83 inc ix84 inc ix85 djnz RePlayerSFX_Tick_Loop86 pop af87 ld (RePlayer_currentBank),a8889 ld (7000H),a90 ret92RePlayerSFX_channels:93 ds RePlayerSFX_CHANNEL_COUNT * 496NormalSfx: equ 097SofterSfx: equ 3198SoftestSfx: equ 62100101SFX_nop: equ 8001H + 4 * 0102SFX_MouseClick: equ 8001H + 4 * (1 + SoftestSfx)103SFX_MouseOver: equ 8001H + 4 * (2 + SoftestSfx)104SFX_HeroWalk: equ 8001H + 4 * (3 + SoftestSfx - 1)105SFX_ChestFound: equ 8001H + 4 * 5 | SFX_LearningStone: equ 8001H + 4 * 5 | SFX_ScrollFound: equ 8001H + 4 * 5 | SFX_TradeMenu: equ 8001H + 4 * 5 | SFX_SpireOfWisdom: equ 8001H + 4 * 5106SFX_BuildingBeingBuilt: equ 8001H + 4 * 5107SFX_HeroOverviewMenu: equ 8001H + 4 * 65110SFX_CollectItem: equ 8001H + 4 * 66112114SFX_StartOfTurn: equ 8001H + 4 * 65116SFX_Levelup: equ 8001H + 4 * 65117SFX_GuardTowerReward: equ 8001H + 4 * 65118SFX_GuardTowerEncountered: equ 8001H + 4 * 65120122SFX_ShowEnemyStats: equ 8001H + 4 * 66124126SFX_Purchase: equ 8001H + 4 * 66128SFX_MonsterDied: equ 8001H + 4 * 7129SFX_Punch: equ 8001H + 4 * 8 130SFX_Kick: equ 8001H + 4 * 9 | SFX_enemyhit: equ 8001H + 4 * 9131SFX_10: equ 8001H + 4 * 10132SFX_Shoot: equ 8001H + 4 * 11133SFX_Cure: equ 8001H + 4 * 11134SFX_Haste: equ 8001H + 4 * 12135SFX_EarthBound: equ 8001H + 4 * 13136SFX_EarthShock: equ 8001H + 4 * 13137SFX_MagicArrow: equ 8001H + 4 * 14138SFX_Sunstrike: equ 8001H + 4 * 15139SFX_IceBolt: equ 8001H + 4 * 16140SFX_Implosion: equ 8001H + 4 * 17141SFX_Slow: equ 8001H + 4 * 18142SFX_FrostRing: equ 8001H + 4 * 19143SFX_Shieldbreaker: equ 8001H + 4 * 20144SFX_Curse: equ 8001H + 4 * 21145SFX_PlateArmor: equ 8001H + 4 * 22146SFX_InnerBeast: equ 8001H + 4 * 23147SFX_Teleport: equ 8001H + 4 * 24148SFX_Frenzy: equ 8001H + 4 * 25149SFX_Resurrect: equ 8001H + 4 * 26150SFX_SpellBubble: equ 8001H + 4 * 27151SFX_Hypnosis: equ 8001H + 4 * 29152SFX_ClawBack: equ 8001H + 4 * 28153SFX_BlindingFog: equ 8001H + 4 * 30154SFX_InsufficientFunds: equ 8001H + 4 * 31 | SFX_WaterWell: equ 8001H + 4 * 31 | SFX_ShowEnemyHeroStats: equ 8001H + 4 * 31 | RePlayer.asm7RePlayer_STACK_CAPACITY: equ 1288FormatOPL4_ID: equ 11012RePlayer_Detect:13 call RePlayer_Detect_Format14 jp c,RePlayer_SetJumpTable15 jp RePlayer_ClearJumpTable1719RePlayer_Detect_Format:2022 cp FormatOPL4_ID23 jp z,FormatOPL4_Detect2426 and a27 ret29FormatOPL4_Detect:30 call MoonSound_Detect31 ld hl,MoonSound_JumpTable32 ret3436RePlayer_SetJumpTable:37 ld de,RePlayer_Process38 ld bc,3 * 339 ldir40 ret4243RePlayer_ClearJumpTable:44 ld hl,RePlayer_Process45 ld de,RePlayer_Process + 146 ld bc,3 * 3 - 147 ld (hl),0C9H 48 ldir49 ret5153RePlayer_Play:54 add hl,bc55 add hl,bc56 add hl,bc57 add hl,bc58 ld b,a59 xor a60 ld (RePlayer_playing),a61 ld a,b62 ld ix,RePlayer_stack6364 ld (ix + 0),l65 ld (ix + 1),h66 ld (ix + 2),a67 inc ix68 inc ix69 inc ix70 ld a,171 ld (ix),a72 ld (RePlayer_stackPointer),ix73 ld (RePlayer_playing),a74 ret76RePlayer_Stop:77 xor a78 ld (RePlayer_playing),a79 call RePlayer_Mute80 ret82RePlayer_Resume:83 call RePlayer_Restore84 ld a,185 ld (RePlayer_playing),a86 ret8894RePlayer_Tick:95 ld a,(slot.page12rom) 96 out ($a8),a98 call RePlayerSFX_Tick100 ld a,(ChangeSong?)101 or a102 jr nz,.ChangeSong103 .DontChangeSong:105 ld a,(RePlayer_playing)106 and a107 ret z108 ld ix,(RePlayer_stackPointer)109 dec (ix)110 ret nz111 ld a,(RePlayer_currentBank)112 push af113114 dec ix115 dec ix116 dec ix117 ld l,(ix + 0)118 ld h,(ix + 1)119 ld a,(ix + 2)120 ld (RePlayer_currentBank),a121122 ld (7000H),a123 call RePlayer_Process124 ld b,a125 ld a,(RePlayer_currentBank)126127 ld (ix + 0),l128 ld (ix + 1),h129 ld (ix + 2),a130 inc ix131 inc ix132 inc ix133 ld (ix),b134 ld (RePlayer_stackPointer),ix135 pop af136 ld (RePlayer_currentBank),a137138 ld (7000H),a139 ret141 .ChangeSong:142 ld hl,CurrentSongBeingPlayed143 cp (hl)144 jr z,.DontChangeSong146 or a147 jp m,.StopSong149 150 cp WorldSong151 jr nz,.EndCheckRandomizeWorldSong153 ld a,r154 cp 22155 ld b,SongDewA156 jr c,.WorldSongFound157 cp 44158 ld b,SongDewB159 jr c,.WorldSongFound160 cp 66161 ld b,SongGloomyA162 jr c,.WorldSongFound163 cp 88164 ld b,SongGloomyB165 jr c,.WorldSongFound166 cp 110167 ld b,SongHaze168 jr c,.WorldSongFound169170 ld b,SongSolitude171172 .WorldSongFound:173 ld a,b175 .EndCheckRandomizeWorldSong:176 178 ld (CurrentSongBeingPlayed),a179 ld c,a180 ld b,0181 push bc182 call RePlayer_Stop183 pop bc 185 ld a,usas2repBlock 186 ld hl,$8000+1187 call RePlayer_Play 189 xor a190 ld (ChangeSong?),a191 ret193 .StopSong:194 call RePlayer_Stop195 xor a196 ld (ChangeSong?),a197 ret198 201215232240252264RePlayer_playing:265 db 0266RePlayer_stackPointer:267 dw RePlayer_stack268RePlayer_stack:269 ds RePlayer_STACK_CAPACITY * 3 + 1270RePlayer_Process:271 db 0C9H, 0, 0272RePlayer_Mute:273 db 0C9H, 0, 0274RePlayer_Restore:275 db 0C9H, 0, 0276enginepage3.asm508ShortestPathTileHandlerQueue:509 ds 2*169,0511 ds 12,255 512ShortestPathBuffer: 513 ds 11 * 12,255515 ds 12,255 517CheckNormalRouteShortestPath:518519 di520522 ld a,(ix+HeroY) 523 ld (movementpath+0),a 524 ld a,(ix+HeroX) 525 ld (movementpath+1),a 526 xor a527 ld (movementpath+2),a 528 ld (movementpath+3),a 530 ld a,(ix+HeroY) 531 cp 6532 jp c,CheckReverseRoute533534 cp 128-6535 jp nc,CheckReverseRoute536 ld a,(ix+HeroX) 537 cp 6538 jp c,CheckReverseRoute539540 cp 128-6541 jp nc,CheckReverseRoute543 544 ld a,(mouseclickx) 545 sub a,(ix+HeroX) 546 jp p,.EndCheckNegativeX547 neg548 .EndCheckNegativeX:549 cp 6550 jp nc,CheckReverseRoute552 ld a,(mouseclicky) 553 sub a,(ix+HeroY) 554 jp p,.EndCheckNegativeY555 neg556 .EndCheckNegativeY:557 cp 6558 jp nc,CheckReverseRoute560 561 call setspritecharacter.SetMappositionMousePointsTo562 ld a,(hl)564 cp 16565 jr c,.noobstacle566 cp 24567 jp c,CheckReverseRoute 568 cp UnwalkableTerrainPieces 569 jp nc,CheckReverseRoute 570 .noobstacle:572 574 ld a,(ix+HeroY) 575 sub a,5-1 576 ld h,0577 ld l,a578 ld de,(maplenght)579 call MultiplyHlWithDE 580 ld de,mapdata581 add hl,de582 584 ld a,(ix+HeroX) 585 sub a,5586 ld e,a587 ld d,0588 add hl,de589 592 593 ld a,11 594 ld de,ShortestPathBuffer595 .CopyColumn:596 ld b,11 597 .CopyRow:598 ex af,af'599 ld a,(hl)601 cp 16602 jr c,.noobstacle2603 cp 24604 jr c,.obstacle2 605 cp UnwalkableTerrainPieces 606 jr c,.noobstacle2 607 608 .obstacle2:609 ld a,200610 jp .ForeGroundFound 611 612 .noobstacle2:613 xor a615618 .ForeGroundFound:619 ld (de),a620 ex af,af'621 inc hl622 inc de623 djnz .CopyRow624 ld bc,128-11 625 add hl,bc626 inc de 627 dec a628 jp nz,.CopyColumn629 630 635 ld hl,ShortestPathBuffer+5+(5*12) 636 ld (hl),64 637 ld (ShortestPathTileHandlerQueue),hl 638 ld a,1 639 ld (.SelfModifyingCodeDistanceNumber),a640 ld b,1 641 ld c,0 643 ld ix,ShortestPathTileHandlerQueue 644 ld iy,ShortestPathTileHandlerQueue 646 .HandleTileLoop:647 call .HandleTile648 inc ix649 inc ix650 ld l,(ix)651 ld h,(ix+1) 652 djnz .HandleTileLoop654 ld a,(.SelfModifyingCodeDistanceNumber)655 inc a 656 ld (.SelfModifyingCodeDistanceNumber),a657 ld a,c658 or a659 ld b,a660 ld c,0661 jp nz,.HandleTileLoop663 .End:664 xor a665 ld (ShortestPathBuffer+5+(5*12)),a 666 667 ld ix,(plxcurrentheroAddress)669 670 ld a,(mouseclickx) 671 ld h,0672 ld l,a673 ld a,(ix+HeroX) 674 sub a,5675 ld d,0676 ld e,a677 or a678 sbc hl,de 679 push hl681 ld a,(mouseclicky) 682 ld h,0683 ld l,a684 ld a,(ix+HeroY) 685 sub a,5686 ld d,0687 ld e,a688 or a689 sbc hl,de 690 ld de,12 691 call MultiplyHlWithDE 692 pop de693 add hl,de694 ld de,ShortestPathBuffer695 add hl,de 696 ld a,(hl) 697 or a698701 jp z,CheckReverseRoute702 jp m,CheckReverseRoute706 add a,a 707 ld d,0708 ld e,a709 ld ix,movementpath710 add ix,de711 712 ld (ix+2),0 713 ld (ix+3),0 715 .NextStepLoop:716 ex af,af'717 call .FindDirectionForThisStep718 ex af,af'719 ld (ix),b 720 ld (ix+1),c 721 dec ix722 dec ix 723 sub a,2724 jp nz,.NextStepLoop725 ret727 .FindDirectionForThisStep:728 ld a,(hl) 729 dec a 731 ld b,+0 732 ld c,+1 733 dec hl 734 cp (hl) 735 ret z737738 ld c,-1 739 inc hl740 inc hl 741 cp (hl) 742 ret z744745 dec b746 ld c,+0 747 ld de,11748 add hl,de 749 cp (hl) 750 ret z752 ld b,+1 754 ld de,-24755 add hl,de 756 cp (hl) 757 ret z759761 inc c762 dec hl 763 cp (hl) 764 ret z766767 ld c,-1 768 inc hl769 inc hl 770 cp (hl) 771 ret z773 ld b,-1 775 ld de,24776 add hl,de 777 cp (hl) 778 ret z780781 ld c,+1 782 dec hl783 dec hl 786 ret788 .HandleTile:789 790 ld de,-13791 add hl,de 792 ld a,(hl)793 or a794 call z,.MarkTileAndPutInQueue795 796 inc hl 797 ld a,(hl)798 or a799 call z,.MarkTileAndPutInQueue801 inc hl 802 ld a,(hl)803 or a804 call z,.MarkTileAndPutInQueue806 ld de,10807 add hl,de 808 ld a,(hl)809 or a810 call z,.MarkTileAndPutInQueue812 inc hl 813 inc hl 814 ld a,(hl)815 or a816 call z,.MarkTileAndPutInQueue818 add hl,de 819 ld a,(hl)820 or a821 call z,.MarkTileAndPutInQueue823 inc hl 824 ld a,(hl)825 or a826 call z,.MarkTileAndPutInQueue828 inc hl 829 ld a,(hl)830 or a831 ret nz833 .MarkTileAndPutInQueue:834 inc iy835 inc iy 836 ld (iy),l837 ld (iy+1),h 838 .SelfModifyingCodeDistanceNumber: equ $+1839 ld (hl),255840 inc c 841 ret848TitleScreen:849 ld a,(slot.page12rom) 850 out ($a8),a 851 ld a,TitleScreenCodeblock 852 call block34 853 jp HandleTitleScreenCode855ExecuteLoaderRoutine:856 ld a,(slot.page1rom) 857 out ($a8),a 858 ld a,Loaderblock 859 call block12 860 jp (hl)862CenterMousePointer:863 ld a,106864 ld (spat+0),a865 ld (spat+4),a866 ld (spat+8),a867 ld a,104868 ld (spat+1),a869 ld (spat+5),a870 ld (spat+9),a871 ret873CopyRamToVram: 874 ld (AddressToWriteFrom),bc875 ld (NXAndNY),de877 ld a,(activepage) 878 or a879 jp nz,CopyRamToVramCorrectedCastleOverview.SetAddress2880 ld de,$8000881 add hl,de 882 jp CopyRamToVramCorrectedCastleOverview.SetAddress2884CopyRamToVramCorrectedWithoutActivePageSetting:885 ex af,af' 887 in a,($a8) 888 push af889 ld a,(memblocks.1)890 push af891 ld a,(memblocks.2)892 push af894 ld a,(slot.page12rom) 895 out ($a8),a 896 ex af,af'897 call block1234 899 ld (AddressToWriteFrom),hl900 ld (NXAndNY),bc901 ld (AddressToWriteTo),de902 call CopyRamToVramCorrectedCastleOverview.AddressesSet904 pop af905 call block34906 pop af907 call block12908 pop af909 out ($a8),a 910 ret912AreWeWritingToVram?: db 0913CopyRamToVramCorrectedCastleOverview:914 ex af,af' 916 in a,($a8) 917 push af918 ld a,(memblocks.1)919 push af920 ld a,(memblocks.2)921 push af923 ld a,(slot.page12rom) 924 out ($a8),a 925 ex af,af'926 call block1234 928 call .go 930 pop af931 call block34932 pop af933 call block12934 pop af935 out ($a8),a 936 ret938 .go:939 ld (AddressToWriteFrom),hl940 ld (NXAndNY),bc942 ld a,(activepage) 943 or a944 ld hl,$0000945 jr nz,.SetAddress 946 ld hl,$8000947 .SetAddress:948 add hl,de949 .SetAddress2:950 ld (AddressToWriteTo),hl951 .AddressesSet:952 ld c,$98 953 ld de,128 955 .loop:956 call .WriteOneLine957 ld a,(NXAndNY+1)958 dec a959 ld (NXAndNY+1),a960 jp nz,.loop961 ret963 .WriteOneLine:964 ld hl,(AddressToWriteTo) 965 add hl,de 966 ld (AddressToWriteTo),hl968 ld a,1969 ld (AreWeWritingToVram?),a971 xor a 974 call SetVdp_Write 976 ld hl,(AddressToWriteFrom) 977 add hl,de 978 ld (AddressToWriteFrom),hl979 ld a,(NXAndNY)980983 ld b,a984 otir986 xor a987 ld (AreWeWritingToVram?),a989 ret991996CopyRamToVramPage3ForBattleEngine:997999 in a,($a8) 1000 push af1001 ld a,(memblocks.1)1002 push af1003 ld a,(memblocks.2)1004 push af1005 ld a,(slot.page12rom) 1006 out ($a8),a 1008 ld a,(BlockToReadFrom)1010 call block1234 1012 call .go 1014 pop af1015 call block341016 pop af1017 call block121018 pop af1019 out ($a8),a 1020 ret1022 .go:1023 ld c,$98 1024 ld de,128 1026 .loop:1027 call .WriteOneLine1028 ld a,(NXAndNY+1)1029 dec a1030 ld (NXAndNY+1),a1031 jp nz,.loop1032 ret1034 .WriteOneLine:1035 ld a,11036 ld hl,(AddressToWriteTo) 1037 add hl,de 1038 ld (AddressToWriteTo),hl1039 di1040 call SetVdp_WriteWithoutDisablingOrEnablingInt 1042 ld hl,(AddressToWriteFrom) 1043 add hl,de 1044 ld (AddressToWriteFrom),hl1045 ld a,(NXAndNY)1046 ld b,a1047 otir1048 ei1049 ret105210591064106610681070BattleTextPointer: dw 2551071BattleRound: db 2551072SetBattleText?: db 255 1073BattleText8: db 255 | dw 255 | db 255 ,"           ",255 1074BattleText7: db 255 | dw 255 | db 255 ,"           ",255 1075BattleText6: db 255 | dw 255 | db 255 ,"           ",255 1076BattleText5: db 255 | dw 255 | db 255 ,"           ",255 1077BattleText4: db 255 | dw 255 | db 255 ,"           ",255 1078BattleText3: db 255 | dw 255 | db 255 ,"           ",255 1079BattleText2: db 255 | dw 255 | db 255 ,"           ",255 1080BattleText1: db 255 | dw 255 | db 255 ,"           ",255 1081BattleTextQ: db 255 | dw 255 | db 255 ,"           ",255 1084RemoveDeadMonstersNeutralMonster?: ds 11085AddressOfMonsterAmountHerocollidedWithOnMap: ds 21087FightGuardTowerMonster?: ds 11088GuardTowerMonsterLevel: ds 11089MonsterHerocollidedWithOnMap: ds 11090XAddressOfMonsterHerocollidedWithOnMap: ds 11091MonsterHerocollidedWithOnMapAmount: ds 11093MonsterMovementPathPointer: db 01094MonsterMovementAmountOfSteps: db 01095MonsterMovementPath: ds LenghtMonsterMovementPathTable1096LenghtMonsterMovementPathTable: equ 501098ShowExplosionSprite?: db 01099ExplosionSpriteStep: ds 11101LeftOrRightPlayerLostEntireArmy?: ds 111021104MonsterThatIsRetaliating: ds 21105MonsterThatIsBeingAttacked: ds 21106MonsterThatIsBeingAttackedX: ds 11107MonsterThatIsBeingAttackedNX: ds 11108MonsterThatIsBeingAttackedY: ds 11109MonsterThatIsBeingAttackedNY: ds 11111AEOSpellDamage: ds 21112MonsterThatWasDamagedPreviousCheck: ds 21113CursorXWhereSpellWasCast: ds 11114CursorYWhereSpellWasCast: ds 11116SpellAnimationStep: ds 11117SpellAnimationSpeed: ds 21118SpellAnimationGfxBlock: ds 11120ActiveMonsterAttackingDirection: ds 11121IsCursorOnATile?: db 11122WasCursorOnATilePreviousFrame?: db 11123IsCursorOnATileThisFrame?: db 11124Wait1FrameBeforeWePutGridTile?: db 01125SpellExplanationDisplayed?: db 01126SpellSelected?: db 0 1127CastSpell?: db 0 1128SpellBookButtonPressed?: db 01129SelectedElementInSpellBook: db 0 1130LeftPlayerAlreadyCastSpellThisRound?: ds 11131RightPlayerAlreadyCastSpellThisRound?: ds 11132WaitButtonPressed?: db 01133AutoCombatButtonPressed?: db 01134DefendButtonPressed?: db 01135RetreatButtonPressed?: db 01136SurrenderButtonPressed?: db 01137ShootProjectile?: db 01138IsThereAnyEnemyRightNextToActiveMonster?: db 01139MayRangedAttackBeRetaliated?: ds 11140SetMonsterInBattleFieldGrid?: db 11141LenghtBattleField: equ 281142HeightBattleField: equ 091143MovementLenghtMonsters: equ 81144RepairAmountAboveMonster?: db 11145AmountMonsterBeforeBeingAttacked: ds 21147BufferCursorSpriteChar: ds 21148BufferCursorSpriteCol: ds 21150ListOfMonstersToPut:1151 1152ListOfMonstersToPutMonster1: db 001 | dw 100 | db 012 + (01*08), 056 + (00*16) + 161153ListOfMonstersToPutMonster2: db 002 | dw 500 | db 012 + (00*08), 056 + (01*16) + 161154ListOfMonstersToPutMonster3: db 003 | dw 600 | db 012 + (00*08), 056 + (03*16) + 161155ListOfMonstersToPutMonster4: db 004 | dw 700 | db 012 + (01*08), 056 + (04*16) + 161156ListOfMonstersToPutMonster5: db 005 | dw 800 | db 012 + (01*08), 056 + (06*16) + 161157ListOfMonstersToPutMonster6: db 006 | dw 900 | db 012 + (00*08), 056 + (07*16) + 161159ListOfMonstersToPutMonster7: db 001 | dw 001 | db 012 + (27*08), 056 + (00*16) + 161160ListOfMonstersToPutMonster8: db 000 | dw 000 | db 012 + (26*08), 056 + (01*16) + 161161ListOfMonstersToPutMonster9: db 007 | dw 610 | db 012 + (26*08), 056 + (03*16) + 161162ListOfMonstersToPutMonster10: db 007 | dw 001 | db 012 + (27*08), 056 + (04*16) + 161163ListOfMonstersToPutMonster11: db 007 | dw 810 | db 012 + (25*08), 056 + (06*16) + 161164ListOfMonstersToPutMonster12: db 007 | dw 910 | db 012 + (26*08), 056 + (07*16) + 161166 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 2551167BattleFieldGrid: 1168 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001169 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551170 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001171 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551172 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001173 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551174 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 1175 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,25511761177EndBattleFieldGrid:1178 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 2551180BlockToReadFrom: ds 11181AddressToWriteTo: ds 21182AddressToWriteFrom: ds 21183NXAndNY: ds 21185RepairARowOf12PixelsFromBottomOfPage2ToPage3:1186 db 0,0,188+16,21187 db 0,0,172+16,31188 db 0,1,12,01189 db 0,0,$d0 1191TransparantImageBattle:1192 db 000,000,000,31193 db 100,000,100,2551194 db 000,000,000,01195 db 0,%0000 0000,$981197TransparantImageBattleRecoverySprite:1198 db 000,000,000,31199 db 100,000,100,2551200 db 000,000,000,01201 db 0,%0000 0000,$981202 1203EraseMonster:1204 db 000,000,000,21205 db 000,000,000,2551206 db 000,000,000,01207 db 0,%0000 0000,$d01209PutMonsterAmountOnBattleField:1210 db 240,000,249,2551211 db 000,000,000,2551212 db 000,000,007,0001213 db 0,%0000 0000,$981215ClearMonsterAmountOnBattleField:1216 db 240,000,249,2551217 db 000,000,000,2551218 db 000,000,007,0001219 db 0,%0000 0000,$d01221SmoothCornerPutMonsterAmount:1222 db 240,000,249,0001223 db 001,000,249,0001224 db 001,000,007,0001225 db 0,%0000 0000,$901227MonstersSortedOnSpeed:1228 dw Monster1 1229 dw Monster2 1230 dw Monster3 1231 dw Monster4 1232 dw Monster5 1233 dw Monster6 1234 dw Monster7 1235 dw Monster8 1236 dw Monster9 1237 dw Monster10 1238 dw Monster11 1239 .LastMonster:1240 dw Monster12 1242OrderOfMonstersFromHighToLow:1243 dw Monster0 1244 dw Monster1 1245 dw Monster2 1246 dw Monster3 1247 dw Monster4 1248 dw Monster5 1249 dw Monster6 1250 dw Monster7 1251 dw Monster8 1252 dw Monster9 1253 dw Monster10 1254 dw Monster11 1255 dw Monster12 1256 dw Monster13 1258BrokenArrow?: ds 1 1260NeutralEnemyDied?: db 01261SwitchToNextMonster?: db 01262MoVeMonster?: db 01263MonsterMovingRight?: db 01264MonsterAttackingRight?: db 01265MonsterAnimationSpeed: db 01266MonsterAnimationStep: db 01267AttackMonster?: db 01268HandleRetaliation?: db 01269MonsterDied?: db 01270MoveMonsterToY: ds 11271MoveMonsterToX: ds 112721273CurrentActiveMonster: db 11274TotalAmountOfMonstersOnBattleField: equ 1 + 12 1276CasualtiesOverviewCopy:1277 db 020,000,212+16,0001278 db 068,000,144,0001279 db 132,000,022,0001280 db 000,000,$d0 1282MonsterY: equ 01283MonsterX: equ MonsterY+11284MonsterYPrevious: equ MonsterX+11285MonsterXPrevious: equ MonsterYPrevious+11286MonsterSYSX: equ MonsterXPrevious+11287MonsterBlock: equ MonsterSYSX+21288MonsterNY: equ MonsterBlock+11289MonsterNX: equ MonsterNY+11290MonsterNumber: equ MonsterNX+11291MonsterNYPrevious: equ MonsterNumber+11292MonsterNXPrevious: equ MonsterNYPrevious+11293MonsterAmount: equ MonsterNXPrevious+11294MonsterHP: equ MonsterAmount+21295MonsterStatus: equ MonsterHP+11296MonsterStatusEffect1: equ MonsterStatus+11297MonsterStatusEffect2: equ MonsterStatusEffect1+11298MonsterStatusEffect3: equ MonsterStatusEffect2+11299MonsterStatusEffect4: equ MonsterStatusEffect3+11300MonsterStatusEffect5: equ MonsterStatusEffect4+11301LenghtMonsterTable: equ Monster1-Monster01303AmountOfStatusEffects: equ 51304MonsterStatusEnabled: equ 01305MonsterStatusWaiting: equ 11306MonsterStatusDefending: equ 21307MonsterStatusTurnEnded: equ 313111312Monster0:1313.y: db 070 + (00*16) - 641314.x: db 0241315.yprevious: db 070 + (00*16) - 641316.xprevious: db 0241317.SYSXinROM: dw $4000 + (017*128) + (000/2) - 1281318.RomBlock: db BattleFieldObjectsBlock1319.ny: db 20 + 11320.nx: db 161321.Number: db 0001322.nyprevious: db 20 + 11323.nxprevious: db 161324.amount: dw 101325.hp: db 101326.status: db 0 1327.statusEffect1: db 0 1328.statusEffect2: db 0 1329.statusEffect3: db 0 1330.statusEffect4: db 0 1331.statusEffect5: db 0 1334Monster1:1335.y: ds 11336.x: ds 11337.yprevious: ds 11338.xprevious: ds 11339.SYSXinROM: ds 21340.RomBlock: ds 11341.ny: ds 11342.nx: ds 11343.Number: ds 11344.nyprevious: ds 11345.nxprevious: ds 11346.amount: ds 21347.hp: ds 11348.status: db 0 1349.statusEffect1: db 0 1350.statusEffect2: db 0 1351.statusEffect3: db 0 1352.statusEffect4: db 0 1353.statusEffect5: db 0 1366Monster2:1367.y: ds 11368.x: ds 11369.yprevious: ds 11370.xprevious: ds 11371.SYSXinROM: ds 21372.RomBlock: ds 11373.ny: ds 11374.nx: ds 11375.Number: ds 11376.nyprevious: ds 11377.nxprevious: ds 11378.amount: ds 21379.hp: ds 11380.status: db 0 1381.statusEffect1: db 0 1382.statusEffect2: db 0 1383.statusEffect3: db 0 1384.statusEffect4: db 0 1385.statusEffect5: db 0 1387Monster3:1388.y: db 056 + (03*16) - 16 - 81389.x: db 012 + (04*08)1390.yprevious: db 056 + (03*16) - 16 - 81391.xprevious: db 012 + (04*08)1392.SYSXinROM: dw 0001393.RomBlock: db 0001394.ny: db 16 + 81395.nx: db 161396.Number: db 003 1397.nyprevious: db 16 + 81398.nxprevious: db 161399.amount: dw 6771400.hp: db 101401.status: db 0 1402.statusEffect1: db 0 1403.statusEffect2: db 0 1404.statusEffect3: db 0 1405.statusEffect4: db 0 1406.statusEffect5: db 0 1408Monster4:1409.y: db 056 + (00*16) - 321410.x: db 012 + (11*08)1411.yprevious: db 056 + (00*16) - 321412.xprevious: db 012 + (11*08)1413.SYSXinROM: dw 0001414.RomBlock: db 0001415.ny: db 321416.nx: db 161417.Number: db 004 1418.nyprevious: db 321419.nxprevious: db 161420.amount: dw 8231421.hp: db 101422.status: db 0 1423.statusEffect1: db 0 1424.statusEffect2: db 0 1425.statusEffect3: db 0 1426.statusEffect4: db 0 1427.statusEffect5: db 0 1429Monster5:1430.y: db 056 + (08*16) - 16 - 41431.x: db 012 + (01*08)1432.yprevious: db 056 + (08*16) - 16 - 41433.xprevious: db 012 + (01*08)1434.SYSXinROM: dw 0001435.RomBlock: db 0001436.ny: db 16 + 41437.nx: db 161438.Number: db 005 1439.nyprevious: db 16 + 41440.nxprevious: db 161441.amount: dw 9991442.hp: db 101443.status: db 0 1444.statusEffect1: db 0 1445.statusEffect2: db 0 1446.statusEffect3: db 0 1447.statusEffect4: db 0 1448.statusEffect5: db 0 1450Monster6:1451.y: db 056 + (01*16) - 64 - 41452.x: db 012 + (20*08)1453.yprevious: db 056 + (01*16) - 64 - 41454.xprevious: db 012 + (20*08)1455.SYSXinROM: dw 0001456.RomBlock: db 0001457.ny: db 64 + 41458.nx: db 641459.Number: db 006 1460.nyprevious: db 64 + 41461.nxprevious: db 641462.amount: dw 471463.hp: db 011464.status: db 0 1465.statusEffect1: db 0 1466.statusEffect2: db 0 1467.statusEffect3: db 0 1468.statusEffect4: db 0 1469.statusEffect5: db 0 14711473Monster7:1474.y: db 056 + (03*16) - 64 - 41475.x: db 012 + (10*08)1476.yprevious: db 056 + (0*16) - 64 - 41477.xprevious: db 012 + (10*08)1478.SYSXinROM: dw 0001479.RomBlock: db 0001480.ny: db 64 + 41481.nx: db 561482.Number: db 002 1483.nyprevious: db 64 + 41484.nxprevious: db 561485.amount: dw 21486.hp: db 101487.status: db 0 1488.statusEffect1: db 0 1489.statusEffect2: db 0 1490.statusEffect3: db 0 1491.statusEffect4: db 0 1492.statusEffect5: db 0 1494Monster8:1495.y: db 056 + (02*16) - 32 1496.x: db 012 + (17*08) 1497.yprevious: db 056 + (02*16) - 32 1498.xprevious: db 012 + (17*08) 1499.SYSXinROM: dw 0001500.RomBlock: db 0001501.ny: db 321502.nx: db 161503.Number: db 007 1504.nyprevious: db 321505.nxprevious: db 161506.amount: dw 9801507.hp: db 101508.status: db 0 1509.statusEffect1: db 0 1510.statusEffect2: db 0 1511.statusEffect3: db 0 1512.statusEffect4: db 0 1513.statusEffect5: db 0 1515Monster9:1516.y: db 056 + (06*16) - 321517.x: db 012 + (27*08)1518.yprevious: db 056 + (06*16) - 321519.xprevious: db 012 + (27*08)1520.SYSXinROM: dw 0001521.RomBlock: db 0001522.ny: db 321523.nx: db 161524.Number: db 004 1525.nyprevious: db 321526.nxprevious: db 161527.amount: dw 5551528.hp: db 101529.status: db 0 1530.statusEffect1: db 0 1531.statusEffect2: db 0 1532.statusEffect3: db 0 1533.statusEffect4: db 0 1534.statusEffect5: db 0 1536Monster10:1537.y: db 056 + (07*16) - 16 - 81538.x: db 012 + (22*08)1539.yprevious: db 056 + (07*16) - 16 - 81540.xprevious: db 012 + (22*08)1541.SYSXinROM: dw 0001542.RomBlock: db 0001543.ny: db 16 + 81544.nx: db 161545.Number: db 003 1546.nyprevious: db 16 + 81547.nxprevious: db 161548.amount: dw 3331549.hp: db 101550.status: db 0 1551.statusEffect1: db 0 1552.statusEffect2: db 0 1553.statusEffect3: db 0 1554.statusEffect4: db 0 1555.statusEffect5: db 0 1557Monster11:1558.y: db 056 + (08*16) - 16 - 41559.x: db 012 + (21*08)1560.yprevious: db 056 + (08*16) - 16 - 41561.xprevious: db 012 + (21*08)1562.SYSXinROM: dw 0001563.RomBlock: db 0001564.ny: db 16 + 41565.nx: db 161566.Number: db 005 1567.nyprevious: db 16 + 41568.nxprevious: db 161569.amount: dw 8231570.hp: db 101571.status: db 0 1572.statusEffect1: db 0 1573.statusEffect2: db 0 1574.statusEffect3: db 0 1575.statusEffect4: db 0 1576.statusEffect5: db 0 1578Monster12:1579.y: db 056 + (07*16) - 16 - 41580.x: db 012 + (10*08)1581.yprevious: db 056 + (07*16) - 16 - 41582.xprevious: db 012 + (10*08)1583.SYSXinROM: dw 0001584.RomBlock: db 0001585.ny: db 16 + 41586.nx: db 161587.Number: db 005 1588.nyprevious: db 16 + 41589.nxprevious: db 161590.amount: dw 9001591.hp: db 101592.status: db 0 1593.statusEffect1: db 0 1594.statusEffect2: db 0 1595.statusEffect3: db 0 1596.statusEffect4: db 0 1597.statusEffect5: db 0 15991601Monster13:1602.y: db 0401603.x: db 1401604.yprevious: db 1001605.xprevious: db 1401606.SYSXinROM: dw 0001607.RomBlock: db 0001608.ny: db 641609.nx: db 561610.Number: db 0011611.nyprevious: db 641612.nxprevious: db 561613.amount: dw 101614.hp: db 101615.status: db 0 1616.statusEffect1: db 0 1617.statusEffect2: db 0 1618.statusEffect3: db 0 1619.statusEffect4: db 0 1620.statusEffect5: db 0 1622Monster14:1623.y: db 0401624.x: db 2001625.yprevious: db 1001626.xprevious: db 2001627.SYSXinROM: dw 0001628.RomBlock: db 0001629.ny: db 641630.nx: db 401631.Number: db 0011632.nyprevious: db 641633.nxprevious: db 401634.amount: dw 101635.hp: db 101636.status: db 0 1637.statusEffect1: db 0 1638.statusEffect2: db 0 1639.statusEffect3: db 0 1640.statusEffect4: db 0 1641.statusEffect5: db 0 1643ClearMapPage0AndMapPage1:1644 ld hl,mappage01645 ld (hl),101646 ld de,mappage0+11647 ld bc,TilesPerColumn*TilesPerRow * 2 - 11648 ldir1649 ret16511656CopyPage0To1:1657 db 0,0,0,01658 db 0,0,0,11659 db 0,1,0,11660 db 0,0,$d0 1661CopyPage1To0:1662 db 0,0,0,11663 db 0,0,0,01664 db 0,1,212,01665 db 0,0,$d0 1667CopyPage0To1PlayingField:1668 db 0,0,0,01669 db 0,0,0,11670 db 0,1,212,01671 db 0,0,$d0 16741675TextNumber: 1676db "31456",2551678HeroOverViewFirstWindowButtonOffSX: equ 0001679HeroOverViewFirstWindowButtonOffSY: equ 1221680HeroOverViewFirstWindowButtonMouseOverSX: equ 0001681HeroOverViewFirstWindowButtonMouseOverSY: equ 1331682HeroOverViewFirstWindowButtonMouseClickedSX: equ 0001683HeroOverViewFirstWindowButtonMouseClickedSY: equ 1441685HeroOverViewFirstWindowButton1DX: equ HeroOverViewFirstWindowchoicesDX + 0081686HeroOverViewFirstWindowButton1DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (0 * 14)1687HeroOverViewFirstWindowButton2DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (1 * 14)1688HeroOverViewFirstWindowButton3DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (2 * 14)1689HeroOverViewFirstWindowButton4DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (3 * 14)1690HeroOverViewFirstWindowButton5DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (4 * 14)1691HeroOverViewFirstWindowButton6DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (5 * 14) 1693ButtonTableLenght: equ 91694HeroOverviewWindowButton_de: equ 01695HeroOverviewWindowButtonStatus: equ 21696HeroOverviewWindowButtonYtop: equ 31697HeroOverviewWindowButtonYbottom: equ 41698HeroOverviewWindowButtonXleft: equ 51699HeroOverviewWindowButtonXright: equ 61700TextAddress: equ 71701Buttonnynx: equ 71702HeroOverviewWindowAmountOfButtons:equ -11704HeroOverviewFirstWindowButtonTableAmountOfButtons: db 51705HeroOverviewFirstWindowButtonTable: 1706 dw $0000 + (HeroOverViewFirstWindowButton1DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton1DY,HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton11707 dw $0000 + (HeroOverViewFirstWindowButton2DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton21708 dw $0000 + (HeroOverViewFirstWindowButton3DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton31709 dw $0000 + (HeroOverViewFirstWindowButton4DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton41710 dw $0000 + (HeroOverViewFirstWindowButton5DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton6DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton51712HeroOverViewSkillsButtonOffSX: equ 0961713HeroOverViewSkillsButtonOffSY: equ 139-11714HeroOverViewSkillsButtonMouseOverSX: equ 0961715HeroOverViewSkillsButtonMouseOverSY: equ 150-11716HeroOverViewSkillsButtonMouseClickedSX: equ 0961717HeroOverViewSkillsButtonMouseClickedSY: equ 161-11719HeroOverViewSkillsButton1DX: equ HeroOverViewSkillsWindowDX + 0081720HeroOverViewSkillsButton1DY: equ HeroOverViewSkillsWindowDY + 025 + (0 * 14)1721HeroOverViewSkillsButton2DY: equ HeroOverViewSkillsWindowDY + 025 + (1 * 14)1722HeroOverViewSkillsButton3DY: equ HeroOverViewSkillsWindowDY + 025 + (2 * 14)1723HeroOverViewSkillsButton4DY: equ HeroOverViewSkillsWindowDY + 025 + (3 * 14)1724HeroOverViewSkillsButton5DY: equ HeroOverViewSkillsWindowDY + 025 + (4 * 14)1725HeroOverViewSkillsButton6DY: equ HeroOverViewSkillsWindowDY + 025 + (5 * 14) 1726HeroOverViewSkillsButton7DY: equ HeroOverViewSkillsWindowDY + 025 + (6 * 14) 1727HeroOverViewSkillsButton8DY: equ HeroOverViewSkillsWindowDY + 025 + (7 * 14) 1728HeroOverViewSkillsButtonNX: equ 1341730HeroOverviewSkillsButtonTableAmountOfButtons: db 61731HeroOverviewSkillsButtonTable: 1732 dw $0000 + (HeroOverViewSkillsButton1DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton1DY,HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton11733 dw $0000 + (HeroOverViewSkillsButton2DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton21734 dw $0000 + (HeroOverViewSkillsButton3DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton31735 dw $0000 + (HeroOverViewSkillsButton4DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton41736 dw $0000 + (HeroOverViewSkillsButton5DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton51737 dw $0000 + (HeroOverViewSkillsButton6DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton7DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton61741HeroOverViewSpellBookButton1OffSX: equ 1921742HeroOverViewSpellBookButton1OffSY: equ 0001743HeroOverViewSpellBookButton1MouseOverSX: equ 2021744HeroOverViewSpellBookButton1MouseOverSY: equ 0001745HeroOverViewSpellBookButton1MouseClickedSX: equ 2121746HeroOverViewSpellBookButton1MouseClickedSY: equ 0001748HeroOverViewSpellBookButton2OffSX: equ 1921749HeroOverViewSpellBookButton2OffSY: equ 0351750HeroOverViewSpellBookButton2MouseOverSX: equ 2021751HeroOverViewSpellBookButton2MouseOverSY: equ 0351752HeroOverViewSpellBookButton2MouseClickedSX: equ 2121753HeroOverViewSpellBookButton2MouseClickedSY: equ 0351755HeroOverViewSpellBookButton3OffSX: equ 1921756HeroOverViewSpellBookButton3OffSY: equ 0641757HeroOverViewSpellBookButton3MouseOverSX: equ 2021758HeroOverViewSpellBookButton3MouseOverSY: equ 0641759HeroOverViewSpellBookButton3MouseClickedSX: equ 2121760HeroOverViewSpellBookButton3MouseClickedSY: equ 0641762HeroOverViewSpellBookButton4OffSX: equ 1921763HeroOverViewSpellBookButton4OffSY: equ 0871764HeroOverViewSpellBookButton4MouseOverSX: equ 2021765HeroOverViewSpellBookButton4MouseOverSY: equ 0871766HeroOverViewSpellBookButton4MouseClickedSX: equ 2121767HeroOverViewSpellBookButton4MouseClickedSY: equ 0871770HeroOverViewSpellBookButton1DX: equ HeroOverViewSpellBookWindowDX + 0161771HeroOverViewSpellBookButton1DY: equ HeroOverViewSpellBookWindowDY + 0241772HeroOverViewSpellBookButton2DX: equ HeroOverViewSpellBookWindowDX + 0141773HeroOverViewSpellBookButton2DY: equ HeroOverViewSpellBookWindowDY + 0581774HeroOverViewSpellBookButton3DX: equ HeroOverViewSpellBookWindowDX + 0121775HeroOverViewSpellBookButton3DY: equ HeroOverViewSpellBookWindowDY + 0861776HeroOverViewSpellBookButton4DX: equ HeroOverViewSpellBookWindowDX + 0101777HeroOverViewSpellBookButton4DY: equ HeroOverViewSpellBookWindowDY + 1081778HeroOverViewSpellBookButton5DX: equ HeroOverViewSpellBookWindowDX + 0081779HeroOverViewSpellBookButton5DY: equ HeroOverViewSpellBookWindowDY + 143 1782HeroOverviewSpellBookButtonTableAmountOfButtons: db 31783HeroOverviewSpellBookButtonTable_Earth: 1785 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1786 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1787 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1789HeroOverviewSpellBookButtonTableAmountOfButtons_Fire: db 31790HeroOverviewSpellBookButtonTable_Fire: 1791 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)17921793 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1794 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1796HeroOverviewSpellBookButtonTableAmountOfButtons_Air: db 31797HeroOverviewSpellBookButtonTable_Air: 1798 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1799 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)18001801 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1803HeroOverviewSpellBookButtonTableAmountOfButtons_Water: db 31804HeroOverviewSpellBookButtonTable_Water: 1805 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1806 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1807 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)18081810HeroOverviewSpellBookButtonTable_Earth_Activated: 1811 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1812HeroOverviewSpellBookButtonTable_Fire_Activated: 1813 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1814HeroOverviewSpellBookButtonTable_Air_Activated: 1815 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1816HeroOverviewSpellBookButtonTable_Water_Activated: 1817 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1819ButtonTableSpellBookSYSX_Earth_Activated:1820 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1281821 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1281822 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1281824ButtonTableSpellBookSYSX_Fire_Activated:1825 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1281826 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1281827 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1281829ButtonTableSpellBookSYSX_Air_Activated:1830 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1281831 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1281832 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1281834ButtonTableSpellBookSYSX_Water_Activated:1835 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1281836 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1281837 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1281839BattleSpellBookButtonTableAmountOfButtons_Water: db 41840BattleSpellBookButtonTable: 1841 dw $0000 + (BattleSpellBookButton1DY*128) + (BattleSpellBookButton1DX/2) | db %1000 0011, BattleSpellBookButton1DY,BattleSpellBookButton2DY,BattleSpellBookButton1DX,BattleSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1842 dw $0000 + (BattleSpellBookButton2DY*128) + (BattleSpellBookButton2DX/2) | db %1000 0011, BattleSpellBookButton2DY,BattleSpellBookButton3DY,BattleSpellBookButton2DX,BattleSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1843 dw $0000 + (BattleSpellBookButton3DY*128) + (BattleSpellBookButton3DX/2) | db %1000 0011, BattleSpellBookButton3DY,BattleSpellBookButton4DY,BattleSpellBookButton3DX,BattleSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1844 dw $0000 + (BattleSpellBookButton4DY*128) + (BattleSpellBookButton4DX/2) | db %1000 0011, BattleSpellBookButton4DY,BattleSpellBookButton5DY,BattleSpellBookButton4DX,BattleSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1846BattleSpellBookButton1DX: equ SpellBookX + 0161847BattleSpellBookButton1DY: equ SpellBookY + 0241848BattleSpellBookButton2DX: equ SpellBookX + 0141849BattleSpellBookButton2DY: equ SpellBookY + 0581850BattleSpellBookButton3DX: equ SpellBookX + 0121851BattleSpellBookButton3DY: equ SpellBookY + 0861852BattleSpellBookButton4DX: equ SpellBookX + 0101853BattleSpellBookButton4DY: equ SpellBookY + 1081854BattleSpellBookButton5DX: equ SpellBookX + 0081855BattleSpellBookButton5DY: equ SpellBookY + 143 1859HeroOverViewSpellIconButton1DX: equ HeroOverViewSpellBookWindowDX + 0401860HeroOverViewSpellIconButton1DY: equ HeroOverViewSpellBookWindowDY + 0501862HeroOverViewSpellIconButton2DX: equ HeroOverViewSpellBookWindowDX + 0701863HeroOverViewSpellIconButton2DY: equ HeroOverViewSpellBookWindowDY + 0541865HeroOverViewSpellIconButton3DX: equ HeroOverViewSpellBookWindowDX + 0381866HeroOverViewSpellIconButton3DY: equ HeroOverViewSpellBookWindowDY + 0951868HeroOverViewSpellIconButton4DX: equ HeroOverViewSpellBookWindowDX + 0681869HeroOverViewSpellIconButton4DY: equ HeroOverViewSpellBookWindowDY + 0991871HeroOverViewSpellIconButton5DX: equ HeroOverViewSpellBookWindowDX + 1081872HeroOverViewSpellIconButton5DY: equ HeroOverViewSpellBookWindowDY + 0541874HeroOverViewSpellIconButton6DX: equ HeroOverViewSpellBookWindowDX + 1381875HeroOverViewSpellIconButton6DY: equ HeroOverViewSpellBookWindowDY + 0501877HeroOverViewSpellIconButton7DX: equ HeroOverViewSpellBookWindowDX + 1101878HeroOverViewSpellIconButton7DY: equ HeroOverViewSpellBookWindowDY + 0991880HeroOverViewSpellIconButton8DX: equ HeroOverViewSpellBookWindowDX + 1401881HeroOverViewSpellIconButton8DY: equ HeroOverViewSpellBookWindowDY + 09518841886HeroOverViewArmyIconButton1OffSX: equ 1561887HeroOverViewArmyIconButton1OffSY: equ 0211888HeroOverViewArmyIconButton1MouseOverSX: equ 1741889HeroOverViewArmyIconButton1MouseOverSY: equ 0211890HeroOverViewArmyIconButtonMouseClickedSX: equ 1921891HeroOverViewArmyIconButtonMouseClickedSY: equ 0211893HeroOverViewArmyIconButton2OffSX: equ 1561894HeroOverViewArmyIconButton2OffSY: equ 0211895HeroOverViewArmyIconButton2MouseOverSX: equ 1741896HeroOverViewArmyIconButton2MouseOverSY: equ 0211898HeroOverViewArmyIconButton3OffSX: equ 1561899HeroOverViewArmyIconButton3OffSY: equ 0211900HeroOverViewArmyIconButton3MouseOverSX: equ 1741901HeroOverViewArmyIconButton3MouseOverSY: equ 0211903HeroOverViewArmyIconButton4OffSX: equ 1561904HeroOverViewArmyIconButton4OffSY: equ 0211905HeroOverViewArmyIconButton4MouseOverSX: equ 1741906HeroOverViewArmyIconButton4MouseOverSY: equ 0211908HeroOverViewArmyIconButton5OffSX: equ 1561909HeroOverViewArmyIconButton5OffSY: equ 0211910HeroOverViewArmyIconButton5MouseOverSX: equ 1741911HeroOverViewArmyIconButton5MouseOverSY: equ 0211913HeroOverViewArmyIconButton6OffSX: equ 1561914HeroOverViewArmyIconButton6OffSY: equ 0211915HeroOverViewArmyIconButton6MouseOverSX: equ 1741916HeroOverViewArmyIconButton6MouseOverSY: equ 0211918HeroOverViewArmyIconButton1DX: equ HeroOverViewArmyWindowDX + 0301919HeroOverViewArmyIconButton1DY: equ HeroOverViewArmyWindowDY + 0271921HeroOverViewArmyIconButton2DX: equ HeroOverViewArmyWindowDX + 0501922HeroOverViewArmyIconButton2DY: equ HeroOverViewArmyWindowDY + 0271924HeroOverViewArmyIconButton3DX: equ HeroOverViewArmyWindowDX + 0701925HeroOverViewArmyIconButton3DY: equ HeroOverViewArmyWindowDY + 0271927HeroOverViewArmyIconButton4DX: equ HeroOverViewArmyWindowDX + 0901928HeroOverViewArmyIconButton4DY: equ HeroOverViewArmyWindowDY + 0271930HeroOverViewArmyIconButton5DX: equ HeroOverViewArmyWindowDX + 1101931HeroOverViewArmyIconButton5DY: equ HeroOverViewArmyWindowDY + 0271933HeroOverViewArmyIconButton6DX: equ HeroOverViewArmyWindowDX + 1301934HeroOverViewArmyIconButton6DY: equ HeroOverViewArmyWindowDY + 0271936HeroOverviewArmyIconButtonTableLenghtPerIcon: equ HeroOverviewArmyIconButtonTable.endlenght-HeroOverviewArmyIconButtonTable1937HeroOverviewArmyIconButtonTableAmountOfButtons: db 61938HeroOverviewArmyIconButtonTable: 1939 dw $0000 + (HeroOverViewArmyIconButton1DY*128) + (HeroOverViewArmyIconButton1DX/2) | db %1000 0011, HeroOverViewArmyIconButton1DY,HeroOverViewArmyIconButton1DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton1DX,HeroOverViewArmyIconButton1DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1940 .endlenght:1941 dw $0000 + (HeroOverViewArmyIconButton2DY*128) + (HeroOverViewArmyIconButton2DX/2) | db %1000 0011, HeroOverViewArmyIconButton2DY,HeroOverViewArmyIconButton2DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton2DX,HeroOverViewArmyIconButton2DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1942 dw $0000 + (HeroOverViewArmyIconButton3DY*128) + (HeroOverViewArmyIconButton3DX/2) | db %1000 0011, HeroOverViewArmyIconButton3DY,HeroOverViewArmyIconButton3DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton3DX,HeroOverViewArmyIconButton3DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1943 dw $0000 + (HeroOverViewArmyIconButton4DY*128) + (HeroOverViewArmyIconButton4DX/2) | db %1000 0011, HeroOverViewArmyIconButton4DY,HeroOverViewArmyIconButton4DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton4DX,HeroOverViewArmyIconButton4DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1944 dw $0000 + (HeroOverViewArmyIconButton5DY*128) + (HeroOverViewArmyIconButton5DX/2) | db %1000 0011, HeroOverViewArmyIconButton5DY,HeroOverViewArmyIconButton5DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton5DX,HeroOverViewArmyIconButton5DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1945 dw $0000 + (HeroOverViewArmyIconButton6DY*128) + (HeroOverViewArmyIconButton6DX/2) | db %1000 0011, HeroOverViewArmyIconButton6DY,HeroOverViewArmyIconButton6DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton6DX,HeroOverViewArmyIconButton6DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1947ButtonTableArmyIconsSYSX:1948 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281949 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281950 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281952 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281953 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281954 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281956 dw $4000 + (HeroOverViewArmyIconButton3OffSY*128) + (HeroOverViewArmyIconButton3OffSX/2) - 1281957 dw $4000 + (HeroOverViewArmyIconButton3MouseOverSY*128) + (HeroOverViewArmyIconButton3MouseOverSX/2) - 1281958 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281960 dw $4000 + (HeroOverViewArmyIconButton4OffSY*128) + (HeroOverViewArmyIconButton4OffSX/2) - 1281961 dw $4000 + (HeroOverViewArmyIconButton4MouseOverSY*128) + (HeroOverViewArmyIconButton4MouseOverSX/2) - 1281962 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281964 dw $4000 + (HeroOverViewArmyIconButton5OffSY*128) + (HeroOverViewArmyIconButton5OffSX/2) - 1281965 dw $4000 + (HeroOverViewArmyIconButton5MouseOverSY*128) + (HeroOverViewArmyIconButton5MouseOverSX/2) - 1281966 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281968 dw $4000 + (HeroOverViewArmyIconButton6OffSY*128) + (HeroOverViewArmyIconButton6OffSX/2) - 1281969 dw $4000 + (HeroOverViewArmyIconButton6MouseOverSY*128) + (HeroOverViewArmyIconButton6MouseOverSX/2) - 1281970 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 12819741976CastleButtonsDY: equ 179 1977CopyCastleButton:1978 db 012,0,212,11979 db 008,0,CastleButtonsDY,2551980 db 040,0,031,01981 db 0,%0000 0000,$981982 1983CastleOverviewWindowButton1Ytop: equ CastleButtonsDY1984CastleOverviewWindowButton1YBottom: equ CastleButtonsDY + 311985CastleOverviewWindowButton1XLeft: equ 0081986CastleOverviewWindowButton1XRight: equ CastleOverviewWindowButton1XLeft + 401988CastleOverviewWindowButton2Ytop: equ CastleButtonsDY1989CastleOverviewWindowButton2YBottom: equ CastleButtonsDY + 311990CastleOverviewWindowButton2XLeft: equ 0481991CastleOverviewWindowButton2XRight: equ CastleOverviewWindowButton2XLeft + 401993CastleOverviewWindowButton3Ytop: equ CastleButtonsDY1994CastleOverviewWindowButton3YBottom: equ CastleButtonsDY + 311995CastleOverviewWindowButton3XLeft: equ 0881996CastleOverviewWindowButton3XRight: equ CastleOverviewWindowButton3XLeft + 401998CastleOverviewWindowButton4Ytop: equ CastleButtonsDY1999CastleOverviewWindowButton4YBottom: equ CastleButtonsDY + 312000CastleOverviewWindowButton4XLeft: equ 1282001CastleOverviewWindowButton4XRight: equ CastleOverviewWindowButton4XLeft + 402003CastleOverviewWindowButton5Ytop: equ CastleButtonsDY2004CastleOverviewWindowButton5YBottom: equ CastleButtonsDY + 312005CastleOverviewWindowButton5XLeft: equ 1682006CastleOverviewWindowButton5XRight: equ CastleOverviewWindowButton5XLeft + 402008CastleOverviewWindowButton6Ytop: equ CastleButtonsDY2009CastleOverviewWindowButton6YBottom: equ CastleButtonsDY + 312010CastleOverviewWindowButton6XLeft: equ 2082011CastleOverviewWindowButton6XRight: equ CastleOverviewWindowButton6XLeft + 402014CastleOverviewWindowButtonStatus: equ 02015CastleOverviewWindowButton_dx: equ 12016CastleOverviewWindowButton_SYSX_Ontouched: equ 22017CastleOverviewWindowButton_SYSX_MovedOver: equ 42018CastleOverviewWindowButton_SYSX_Clicked: equ 62019CastleOverviewWindowButtonYtop: equ 82020CastleOverviewWindowButtonYbottom: equ 92021CastleOverviewWindowButtonXleft: equ 102022CastleOverviewWindowButtonXright: equ 112025CastleOverviewButtonTableLenghtPerButton: equ CastleOverviewButtonTable.endlenght-CastleOverviewButtonTable2026CastleOverviewButtonTableAmountOfButtons: db 62027CastleOverviewButtonTable: 2028 db %1100 0011 | db CastleOverviewWindowButton1XLeft | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (031*128) + (000/2) - 128 | dw $4000 + (062*128) + (000/2) - 128 | db CastleOverviewWindowButton1Ytop,CastleOverviewWindowButton1YBottom,CastleOverviewWindowButton1XLeft,CastleOverviewWindowButton1XRight2029 .endlenght:2030 db %1010 0011 | db CastleOverviewWindowButton2XLeft | dw $4000 + (000*128) + (040/2) - 128 | dw $4000 + (031*128) + (040/2) - 128 | dw $4000 + (062*128) + (040/2) - 128 | db CastleOverviewWindowButton2Ytop,CastleOverviewWindowButton2YBottom,CastleOverviewWindowButton2XLeft,CastleOverviewWindowButton2XRight2031 db %1001 0011 | db CastleOverviewWindowButton3XLeft | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (031*128) + (080/2) - 128 | dw $4000 + (062*128) + (080/2) - 128 | db CastleOverviewWindowButton3Ytop,CastleOverviewWindowButton3YBottom,CastleOverviewWindowButton3XLeft,CastleOverviewWindowButton3XRight2032 db %1100 0011 | db CastleOverviewWindowButton4XLeft | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (031*128) + (120/2) - 128 | dw $4000 + (062*128) + (120/2) - 128 | db CastleOverviewWindowButton4Ytop,CastleOverviewWindowButton4YBottom,CastleOverviewWindowButton4XLeft,CastleOverviewWindowButton4XRight2033 db %1100 0011 | db CastleOverviewWindowButton5XLeft | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (031*128) + (160/2) - 128 | dw $4000 + (062*128) + (160/2) - 128 | db CastleOverviewWindowButton5Ytop,CastleOverviewWindowButton5YBottom,CastleOverviewWindowButton5XLeft,CastleOverviewWindowButton5XRight2034 db %1100 0011 | db CastleOverviewWindowButton6XLeft | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (031*128) + (200/2) - 128 | dw $4000 + (062*128) + (200/2) - 128 | db CastleOverviewWindowButton6Ytop,CastleOverviewWindowButton6YBottom,CastleOverviewWindowButton6XLeft,CastleOverviewWindowButton6XRight20362038SingleBuildButton1Ytop: equ 1682039SingleBuildButton1YBottom: equ SingleBuildButton1Ytop + 0092040SingleBuildButton1XLeft: equ 1802041SingleBuildButton1XRight: equ SingleBuildButton1XLeft+0722043SingleBuildButtonTableAmountOfButtons: db 12044SingleBuildButtonTable: 2045 db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 128 | db SingleBuildButton1Ytop,SingleBuildButton1YBottom,SingleBuildButton1XLeft,SingleBuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 20482049WhichBuildingWasClicked?: ds 12050SetTextBuilding: db 12051PutWhichBuildText: ds 22053CopyBuildButton:2054 db 000,0,212,12055 db 004,0,042,2552056 db 050,0,038,02057 db 0,%0000 0000,$982059CopyBuildButtonImage:2060 db 050,0,212,12061 db 004,0,042,2552062 db 050,0,033,02063 db 0,%0000 0000,$982064 2065BuildButton1Ytop: equ 0422066BuildButton1YBottom: equ BuildButton1Ytop + 0382067BuildButton1XLeft: equ 0042068BuildButton1XRight: equ BuildButton1XLeft+502070BuildButton2Ytop: equ 0422071BuildButton2YBottom: equ BuildButton2Ytop + 0382072BuildButton2XLeft: equ 0642073BuildButton2XRight: equ BuildButton2XLeft+502075BuildButton3Ytop: equ 0422076BuildButton3YBottom: equ BuildButton3Ytop + 0382077BuildButton3XLeft: equ 1242078BuildButton3XRight: equ BuildButton3XLeft+502080BuildButton4Ytop: equ 0922081BuildButton4YBottom: equ BuildButton4Ytop + 0382082BuildButton4XLeft: equ 0042083BuildButton4XRight: equ BuildButton4XLeft+502085BuildButton5Ytop: equ 0922086BuildButton5YBottom: equ BuildButton5Ytop + 0382087BuildButton5XLeft: equ 0642088BuildButton5XRight: equ BuildButton5XLeft+502090BuildButton6Ytop: equ 0922091BuildButton6YBottom: equ BuildButton6Ytop + 0382092BuildButton6XLeft: equ 1242093BuildButton6XRight: equ BuildButton6XLeft+502095BuildButton7Ytop: equ 1422096BuildButton7YBottom: equ BuildButton7Ytop + 0382097BuildButton7XLeft: equ 0042098BuildButton7XRight: equ BuildButton7XLeft+502100BuildButton8Ytop: equ 1422101BuildButton8YBottom: equ BuildButton8Ytop + 0382102BuildButton8XLeft: equ 0642103BuildButton8XRight: equ BuildButton8XLeft+502105BuildButton9Ytop: equ 1422106BuildButton9YBottom: equ BuildButton9Ytop + 0382107BuildButton9XLeft: equ 1242108BuildButton9XRight: equ BuildButton9XLeft+502111BuildButtonStatus: equ 02112BuildButton_SYSX_Ontouched: equ 12113BuildButton_SYSX_MovedOver: equ 32114BuildButton_SYSX_Clicked: equ 52115BuildButtonYtop: equ 72116BuildButtonYbottom: equ 82117BuildButtonXleft: equ 92118BuildButtonXright: equ 102119BuildButtonImage_SYSX: equ 112121BuildButtonTableLenghtPerButton: equ BuildButtonTable.endlenght-BuildButtonTable2122BuildButtonTableAmountOfButtons: db 92123BuildButtonTable: 2124 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton1Ytop,BuildButton1YBottom,BuildButton1XLeft,BuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 2125 .endlenght:2126 db %1010 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton2Ytop,BuildButton2YBottom,BuildButton2XLeft,BuildButton2XRight | dw $4000 + (076*128) + (050/2) - 128 | 2127 db %1001 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton3Ytop,BuildButton3YBottom,BuildButton3XLeft,BuildButton3XRight | dw $4000 + (076*128) + (100/2) - 128 | 2128 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton4Ytop,BuildButton4YBottom,BuildButton4XLeft,BuildButton4XRight | dw $4000 + (076*128) + (150/2) - 128 | 2129 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton5Ytop,BuildButton5YBottom,BuildButton5XLeft,BuildButton5XRight | dw $4000 + (076*128) + (200/2) - 128 | 2130 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton6Ytop,BuildButton6YBottom,BuildButton6XLeft,BuildButton6XRight | dw $4000 + (114*128) + (000/2) - 128 | 2131 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton7Ytop,BuildButton7YBottom,BuildButton7XLeft,BuildButton7XRight | dw $4000 + (114*128) + (050/2) - 128 | 2132 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton8Ytop,BuildButton8YBottom,BuildButton8XLeft,BuildButton8XRight | dw $4000 + (114*128) + (100/2) - 128 | 2133 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton9Ytop,BuildButton9YBottom,BuildButton9XLeft,BuildButton9XRight | dw $4000 + (114*128) + (150/2) - 128 | 21352148SelectedCastleRecruitLevelUnit: ds 12149SelectedCastleRecruitUnitWindow: ds 12150SelectedCastleRecruitLevelUnitAmountAvailable: dw 0002151SelectedCastleRecruitLevelUnitRecruitAmount: dw 0002152SelectedCastleRecruitLevelUnitTotalGoldCost: dw 0002153SelectedCastleRecruitLevelUnitTotalCostGems: ds 22154SelectedCastleRecruitLevelUnitTotalCostRubies: ds 221552156RecruitButton1Ytop: equ 0642157RecruitButton1YBottom: equ RecruitButton1Ytop + 0092158RecruitButton1XLeft: equ 0062159RecruitButton1XRight: equ RecruitButton1XLeft+0762161RecruitButton2Ytop: equ 0642162RecruitButton2YBottom: equ RecruitButton2Ytop + 0092163RecruitButton2XLeft: equ 0902164RecruitButton2XRight: equ RecruitButton2XLeft+0762166RecruitButton3Ytop: equ 0642167RecruitButton3YBottom: equ RecruitButton3Ytop + 0092168RecruitButton3XLeft: equ 1742169RecruitButton3XRight: equ RecruitButton3XLeft+0762171RecruitButton4Ytop: equ 1202172RecruitButton4YBottom: equ RecruitButton4Ytop + 0092173RecruitButton4XLeft: equ 0062174RecruitButton4XRight: equ RecruitButton4XLeft + 0762176RecruitButton5Ytop: equ 1202177RecruitButton5YBottom: equ RecruitButton5Ytop + 0092178RecruitButton5XLeft: equ 0902179RecruitButton5XRight: equ RecruitButton5XLeft+0762181RecruitButton6Ytop: equ 1202182RecruitButton6YBottom: equ RecruitButton6Ytop + 0092183RecruitButton6XLeft: equ 1742184RecruitButton6XRight: equ RecruitButton6XLeft+0762188RecruitButtonStatus: equ 02189RecruitButton_SYSX_Ontouched: equ 12190RecruitButton_SYSX_MovedOver: equ 32191RecruitButton_SYSX_Clicked: equ 52192RecruitButtonYtop: equ 72193RecruitButtonYbottom: equ 82194RecruitButtonXleft: equ 92195RecruitButtonXright: equ 102196RecruitButton_DYDX: equ 112198RecruitButtonTableLenghtPerButton: equ RecruitButtonTable.endlenght-RecruitButtonTable2199RecruitButtonTableAmountOfButtons: db 92200RecruitButtonTable: 2201 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton1Ytop,RecruitButton1YBottom,RecruitButton1XLeft,RecruitButton1XRight | dw $0000 + (RecruitButton1Ytop*128) + (RecruitButton1XLeft/2) - 128 2202 .endlenght:2203 db %1010 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton2Ytop,RecruitButton2YBottom,RecruitButton2XLeft,RecruitButton2XRight | dw $0000 + (RecruitButton2Ytop*128) + (RecruitButton2XLeft/2) - 128 2204 db %1001 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton3Ytop,RecruitButton3YBottom,RecruitButton3XLeft,RecruitButton3XRight | dw $0000 + (RecruitButton3Ytop*128) + (RecruitButton3XLeft/2) - 1282205 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton4Ytop,RecruitButton4YBottom,RecruitButton4XLeft,RecruitButton4XRight | dw $0000 + (RecruitButton4Ytop*128) + (RecruitButton4XLeft/2) - 128 2206 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton5Ytop,RecruitButton5YBottom,RecruitButton5XLeft,RecruitButton5XRight | dw $0000 + (RecruitButton5Ytop*128) + (RecruitButton5XLeft/2) - 128 2207 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton6Ytop,RecruitButton6YBottom,RecruitButton6XLeft,RecruitButton6XRight | dw $0000 + (RecruitButton6Ytop*128) + (RecruitButton6XLeft/2) - 128 22092214RecruitButtonMAXYtop: equ 0922215RecruitButtonMAXYBottom: equ RecruitButtonMAXYtop + 0182216RecruitButtonMAXXLeft: equ 1142217RecruitButtonMAXXRight: equ RecruitButtonMAXXLeft + 0262219RecruitButtonBUYYtop: equ 0722220RecruitButtonBUYYBottom: equ RecruitButtonBUYYtop + 0182221RecruitButtonBUYXLeft: equ 1142222RecruitButtonBUYXRight: equ RecruitButtonBUYXLeft + 0262224RecruitButtonPLUSYtop: equ 0842225RecruitButtonPLUSYBottom: equ RecruitButtonPLUSYtop + 0142226RecruitButtonPLUSXLeft: equ 0962227RecruitButtonPLUSXRight: equ RecruitButtonPLUSXLeft + 0142229RecruitButtonMINUSYtop: equ 0842230RecruitButtonMINUSYBottom: equ RecruitButtonMINUSYtop + 0142231RecruitButtonMINUSXLeft: equ 1442232RecruitButtonMINUSXRight: equ RecruitButtonMINUSXLeft + 0142234AmountOfButtons: equ -122352245RecruitButtonMAXBUYTableLenghtPerButton: equ RecruitButtonMAXBUYTable.endlenght-RecruitButtonMAXBUYTable2246RecruitButtonMAXBUYTableAmountOfButtons: db 42247RecruitButtonMAXBUYTable: 2248 db %1100 0011 | dw $4000 + (027*128) + (152/2) - 128 | dw $4000 + (027*128) + (178/2) - 128 | dw $4000 + (027*128) + (204/2) - 128 | db RecruitButtonMAXYtop,RecruitButtonMAXYBottom,RecruitButtonMAXXLeft,RecruitButtonMAXXRight | dw $0000 + (RecruitButtonMAXYtop*128) + (RecruitButtonMAXXLeft/2) - 128 2249 .endlenght:2250 db %1100 0011 | dw $4000 + (045*128) + (162/2) - 128 | dw $4000 + (045*128) + (188/2) - 128 | dw $4000 + (045*128) + (214/2) - 128 | db RecruitButtonBUYYtop,RecruitButtonBUYYBottom,RecruitButtonBUYXLeft,RecruitButtonBUYXRight | dw $0000 + (RecruitButtonBUYYtop*128) + (RecruitButtonBUYXLeft/2) - 128 2251 db %1100 0011 | dw $4000 + (072*128) + (222/2) - 128 | dw $4000 + (086*128) + (222/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonPLUSYtop,RecruitButtonPLUSYBottom,RecruitButtonPLUSXLeft,RecruitButtonPLUSXRight | dw $0000 + (RecruitButtonPLUSYtop*128) + (RecruitButtonPLUSXLeft/2) - 128 2252 db %1100 0011 | dw $4000 + (072*128) + (236/2) - 128 | dw $4000 + (086*128) + (236/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonMINUSYtop,RecruitButtonMINUSYBottom,RecruitButtonMINUSXLeft,RecruitButtonMINUSXRight | dw $0000 + (RecruitButtonMINUSYtop*128) + (RecruitButtonMINUSXLeft/2) - 128 22542256GenericButtonGfxBlock: equ -22257GenericButtonAmountOfButtons: equ -12258GenericButtonStatus: equ 02259GenericButton_SYSX_Ontouched: equ 12260GenericButton_SYSX_MovedOver: equ 32261GenericButton_SYSX_Clicked: equ 52262GenericButtonYtop: equ 72263GenericButtonYbottom: equ 82264GenericButtonXleft: equ 92265GenericButtonXright: equ 102266GenericButton_DYDX: equ 112267GenericButton_NYNX: equ 132269ButtonGfxBlockCopy: ds 12271GenericButtonTableLenghtPerButton: equ GenericButtonTable.endlenght-GenericButtonTable2272GenericButtonTableGfxBlock: ds 12273GenericButtonTableAmountOfButtons: ds 12274GenericButtonTable: 2275 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2276 .endlenght:2277 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2278 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2279 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2280 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2281 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2282 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2283 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2284 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2285 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2286 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2287 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2288 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2289 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2290 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2292 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2293 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2294 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2295 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2296 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2297 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2298 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2299 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2300 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2301 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2302 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2303 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2304 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 23072309GenericButtonTable2GfxBlock: ds 12310GenericButtonTable2AmountOfButtons: ds 12311GenericButtonTable2: 2312 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2313 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2314 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2315 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2316 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2317 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2319 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2320 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2321 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2322 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2323 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2324 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 23262328GenericButtonTable3GfxBlock: db Hero20x11PortraitsBlock2329GenericButtonTable3AmountOfButtons: db 122330GenericButtonTable3: 2332 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (000/2) - 128 | dw $4000 + ((128+25+76)*128) + (020/2) - 128 | dw $4000 + ((128+25+76)*128) + (040/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 2333 db %1100 0011 | dw $4000 + (018*128) + (000/2) - 128 | dw $4000 + (018*128) + (020/2) - 128 | dw $4000 + (018*128) + (040/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 2334 db %1100 0011 | dw $4000 + (018*128) + (060/2) - 128 | dw $4000 + (018*128) + (080/2) - 128 | dw $4000 + (018*128) + (100/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1282335 db %1100 0011 | dw $4000 + (139*128) + (096/2) - 128 | dw $4000 + (139*128) + (116/2) - 128 | dw $4000 + (139*128) + (136/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1282336 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (060/2) - 128 | dw $4000 + ((128+25+76)*128) + (080/2) - 128 | dw $4000 + ((128+25+76)*128) + (100/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1282337 2338 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (120/2) - 128 | dw $4000 + ((128+25+76)*128) + (140/2) - 128 | dw $4000 + ((128+25+76)*128) + (160/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1282339 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1282340 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1282341 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1282342 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (180/2) - 128 | dw $4000 + ((128+25+76)*128) + (200/2) - 128 | dw $4000 + ((128+25+76)*128) + (220/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1282343 2344 db %1100 0011 | dw $4000 + (048*128) + (240/2) - 128 | dw $4000 + (064*128) + (240/2) - 128 | dw $4000 + (080*128) + (240/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1282345 2346 db %1100 0011 | dw $4000 + (000*128) + (240/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1282348 2349.Button1Ytop: equ 0552350.Button1YBottom: equ .Button1Ytop + 0112351.Button1XLeft: equ 2062352.Button1XRight: equ .Button1XLeft + 0202354.Button2Ytop: equ 0662355.Button2YBottom: equ .Button2Ytop + 0112356.Button2XLeft: equ 2062357.Button2XRight: equ .Button2XLeft + 0202359.Button3Ytop: equ 0772360.Button3YBottom: equ .Button3Ytop + 0112361.Button3XLeft: equ 2062362.Button3XRight: equ .Button3XLeft + 0202364.Button4Ytop: equ 0882365.Button4YBottom: equ .Button4Ytop + 0112366.Button4XLeft: equ 2062367.Button4XRight: equ .Button4XLeft + 0202369.Button5Ytop: equ 0992370.Button5YBottom: equ .Button5Ytop + 0112371.Button5XLeft: equ 2062372.Button5XRight: equ .Button5XLeft + 0202374 2375.Button6Ytop: equ 0552376.Button6YBottom: equ .Button6Ytop + 0112377.Button6XLeft: equ 2302378.Button6XRight: equ .Button6XLeft + 0202380.Button7Ytop: equ 0662381.Button7YBottom: equ .Button7Ytop + 0112382.Button7XLeft: equ 2302383.Button7XRight: equ .Button7XLeft + 0202385.Button8Ytop: equ 0772386.Button8YBottom: equ .Button8Ytop + 0112387.Button8XLeft: equ 2302388.Button8XRight: equ .Button8XLeft + 0202390.Button9Ytop: equ 0882391.Button9YBottom: equ .Button9Ytop + 0112392.Button9XLeft: equ 2302393.Button9XRight: equ .Button9XLeft + 0202395.Button10Ytop: equ 0992396.Button10YBottom: equ .Button10Ytop + 0112397.Button10XLeft: equ 2302398.Button10XRight: equ .Button10XLeft + 0202400 2401.Button11Ytop: equ 1102402.Button11YBottom: equ .Button11Ytop + 0162403.Button11XLeft: equ 2082404.Button11XRight: equ .Button11XLeft + 0162406 2407.Button12Ytop: equ 1102408.Button12YBottom: equ .Button12Ytop + 0162409.Button12XLeft: equ 2322410.Button12XRight: equ .Button12XLeft + 01624212424MarketPlaceResourceNeeded: ds 12425MarketPlaceResourceToTrade: ds 12427CopyCastleButton2:2428 db 000,0,212,12429 db 100,0,100,2552430 db 020,0,030,02431 db 0,%0000 0000,$982438HeroOverViewInventoryIconButton1OffSX: equ 1462439HeroOverViewInventoryIconButton1OffSY: equ 0002440HeroOverViewInventoryIconButton1MouseOverSX: equ 1462441HeroOverViewInventoryIconButton1MouseOverSY: equ 0202442HeroOverViewInventoryIconButtonMouseClickedSX: equ 2202443HeroOverViewInventoryIconButtonMouseClickedSY: equ 2362445HeroOverViewInventoryIconButton2OffSX: equ 1462446HeroOverViewInventoryIconButton2OffSY: equ 0402447HeroOverViewInventoryIconButton2MouseOverSX: equ 1462448HeroOverViewInventoryIconButton2MouseOverSY: equ 0602450HeroOverViewInventoryIconButton3OffSX: equ 1462451HeroOverViewInventoryIconButton3OffSY: equ 0802452HeroOverViewInventoryIconButton3MouseOverSX: equ 1462453HeroOverViewInventoryIconButton3MouseOverSY: equ 1002455HeroOverViewInventoryIconButton4OffSX: equ 0002456HeroOverViewInventoryIconButton4OffSY: equ 1562457HeroOverViewInventoryIconButton4MouseOverSX: equ 0002458HeroOverViewInventoryIconButton4MouseOverSY: equ 1762460HeroOverViewInventoryIconButton5OffSX: equ 1462461HeroOverViewInventoryIconButton5OffSY: equ 0002462HeroOverViewInventoryIconButton5MouseOverSX: equ 1462463HeroOverViewInventoryIconButton5MouseOverSY: equ 0202465HeroOverViewInventoryIconButton6OffSX: equ 1462466HeroOverViewInventoryIconButton6OffSY: equ 0002467HeroOverViewInventoryIconButton6MouseOverSX: equ 1462468HeroOverViewInventoryIconButton6MouseOverSY: equ 0202470HeroOverViewInventoryIconButton7OffSX: equ 1462471HeroOverViewInventoryIconButton7OffSY: equ 0002472HeroOverViewInventoryIconButton7MouseOverSX: equ 1462473HeroOverViewInventoryIconButton7MouseOverSY: equ 0202475HeroOverViewInventoryIconButton8OffSX: equ 1462476HeroOverViewInventoryIconButton8OffSY: equ 0002477HeroOverViewInventoryIconButton8MouseOverSX: equ 1462478HeroOverViewInventoryIconButton8MouseOverSY: equ 0202480HeroOverViewInventoryIconButton9OffSX: equ 0202481HeroOverViewInventoryIconButton9OffSY: equ 0282482HeroOverViewInventoryIconButton9MouseOverSX: equ 0202483HeroOverViewInventoryIconButton9MouseOverSY: equ 02824842485HeroOverViewInventoryIconButton10OffSX: equ 0002486HeroOverViewInventoryIconButton10OffSY: equ 1562487HeroOverViewInventoryIconButton10MouseOverSX: equ 0002488HeroOverViewInventoryIconButton10MouseOverSY: equ 1762490HeroOverViewInventoryIconButton11OffSX: equ 1462491HeroOverViewInventoryIconButton11OffSY: equ 0002492HeroOverViewInventoryIconButton11MouseOverSX: equ 1462493HeroOverViewInventoryIconButton11MouseOverSY: equ 0202495HeroOverViewInventoryIconButton12OffSX: equ 1462496HeroOverViewInventoryIconButton12OffSY: equ 0002497HeroOverViewInventoryIconButton12MouseOverSX: equ 1462498HeroOverViewInventoryIconButton12MouseOverSY: equ 0202500HeroOverViewInventoryIconButton13OffSX: equ 1462501HeroOverViewInventoryIconButton13OffSY: equ 0002502HeroOverViewInventoryIconButton13MouseOverSX: equ 1462503HeroOverViewInventoryIconButton13MouseOverSY: equ 0202505HeroOverViewInventoryIconButton14OffSX: equ 1462506HeroOverViewInventoryIconButton14OffSY: equ 0002507HeroOverViewInventoryIconButton14MouseOverSX: equ 1462508HeroOverViewInventoryIconButton14MouseOverSY: equ 0202510HeroOverViewInventoryIconButton15OffSX: equ 0202511HeroOverViewInventoryIconButton15OffSY: equ 0282512HeroOverViewInventoryIconButton15MouseOverSX: equ 0202513HeroOverViewInventoryIconButton15MouseOverSY: equ 0282517ButtonTableInventoryIconsSYSX:2518 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282519 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282520 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282522 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282523 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282524 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282526 dw $4000 + (HeroOverViewInventoryIconButton3OffSY*128) + (HeroOverViewInventoryIconButton3OffSX/2) - 1282527 dw $4000 + (HeroOverViewInventoryIconButton3MouseOverSY*128) + (HeroOverViewInventoryIconButton3MouseOverSX/2) - 1282528 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282530 dw $4000 + (HeroOverViewInventoryIconButton4OffSY*128) + (HeroOverViewInventoryIconButton4OffSX/2) - 1282531 dw $4000 + (HeroOverViewInventoryIconButton4MouseOverSY*128) + (HeroOverViewInventoryIconButton4MouseOverSX/2) - 1282532 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282534 dw $4000 + (HeroOverViewInventoryIconButton5OffSY*128) + (HeroOverViewInventoryIconButton5OffSX/2) - 1282535 dw $4000 + (HeroOverViewInventoryIconButton5MouseOverSY*128) + (HeroOverViewInventoryIconButton5MouseOverSX/2) - 1282536 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282538 dw $4000 + (HeroOverViewInventoryIconButton6OffSY*128) + (HeroOverViewInventoryIconButton6OffSX/2) - 1282539 dw $4000 + (HeroOverViewInventoryIconButton6MouseOverSY*128) + (HeroOverViewInventoryIconButton6MouseOverSX/2) - 1282540 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282542 dw $4000 + (HeroOverViewInventoryIconButton7OffSY*128) + (HeroOverViewInventoryIconButton7OffSX/2) - 1282543 dw $4000 + (HeroOverViewInventoryIconButton7MouseOverSY*128) + (HeroOverViewInventoryIconButton7MouseOverSX/2) - 1282544 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282546 dw $4000 + (HeroOverViewInventoryIconButton8OffSY*128) + (HeroOverViewInventoryIconButton8OffSX/2) - 1282547 dw $4000 + (HeroOverViewInventoryIconButton8MouseOverSY*128) + (HeroOverViewInventoryIconButton8MouseOverSX/2) - 1282548 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282550 dw $4000 + (HeroOverViewInventoryIconButton9OffSY*128) + (HeroOverViewInventoryIconButton9OffSX/2) - 1282551 dw $4000 + (HeroOverViewInventoryIconButton9MouseOverSY*128) + (HeroOverViewInventoryIconButton9MouseOverSX/2) - 1282552 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 12825532554 dw $4000 + (HeroOverViewInventoryIconButton10OffSY*128) + (HeroOverViewInventoryIconButton10OffSX/2) - 1282555 dw $4000 + (HeroOverViewInventoryIconButton10MouseOverSY*128) + (HeroOverViewInventoryIconButton10MouseOverSX/2) - 1282556 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282558 dw $4000 + (HeroOverViewInventoryIconButton11OffSY*128) + (HeroOverViewInventoryIconButton11OffSX/2) - 1282559 dw $4000 + (HeroOverViewInventoryIconButton11MouseOverSY*128) + (HeroOverViewInventoryIconButton11MouseOverSX/2) - 1282560 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282562 dw $4000 + (HeroOverViewInventoryIconButton12OffSY*128) + (HeroOverViewInventoryIconButton12OffSX/2) - 1282563 dw $4000 + (HeroOverViewInventoryIconButton12MouseOverSY*128) + (HeroOverViewInventoryIconButton12MouseOverSX/2) - 1282564 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282566 dw $4000 + (HeroOverViewInventoryIconButton13OffSY*128) + (HeroOverViewInventoryIconButton13OffSX/2) - 1282567 dw $4000 + (HeroOverViewInventoryIconButton13MouseOverSY*128) + (HeroOverViewInventoryIconButton13MouseOverSX/2) - 1282568 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282570 dw $4000 + (HeroOverViewInventoryIconButton14OffSY*128) + (HeroOverViewInventoryIconButton14OffSX/2) - 1282571 dw $4000 + (HeroOverViewInventoryIconButton14MouseOverSY*128) + (HeroOverViewInventoryIconButton14MouseOverSX/2) - 1282572 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282574 dw $4000 + (HeroOverViewInventoryIconButton15OffSY*128) + (HeroOverViewInventoryIconButton15OffSX/2) - 1282575 dw $4000 + (HeroOverViewInventoryIconButton15MouseOverSY*128) + (HeroOverViewInventoryIconButton15MouseOverSX/2) - 1282576 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282579HeroOverViewInventoryIconButton1DX: equ HeroOverViewInventoryWindowDX + 0202580HeroOverViewInventoryIconButton1DY: equ HeroOverViewInventoryWindowDY + 0282582HeroOverViewInventoryIconButton2DX: equ HeroOverViewInventoryWindowDX + 0642583HeroOverViewInventoryIconButton2DY: equ HeroOverViewInventoryWindowDY + 0282585HeroOverViewInventoryIconButton3DX: equ HeroOverViewInventoryWindowDX + 1082586HeroOverViewInventoryIconButton3DY: equ HeroOverViewInventoryWindowDY + 0282588HeroOverViewInventoryIconButton4DX: equ HeroOverViewInventoryWindowDX + 0202589HeroOverViewInventoryIconButton4DY: equ HeroOverViewInventoryWindowDY + 0532591HeroOverViewInventoryIconButton5DX: equ HeroOverViewInventoryWindowDX + 0642592HeroOverViewInventoryIconButton5DY: equ HeroOverViewInventoryWindowDY + 0532594HeroOverViewInventoryIconButton6DX: equ HeroOverViewInventoryWindowDX + 1082595HeroOverViewInventoryIconButton6DY: equ HeroOverViewInventoryWindowDY + 0532597HeroOverViewInventoryIconButton7DX: equ HeroOverViewInventoryWindowDX + 0202598HeroOverViewInventoryIconButton7DY: equ HeroOverViewInventoryWindowDY + 0782600HeroOverViewInventoryIconButton8DX: equ HeroOverViewInventoryWindowDX + 0642601HeroOverViewInventoryIconButton8DY: equ HeroOverViewInventoryWindowDY + 0782603HeroOverViewInventoryIconButton9DX: equ HeroOverViewInventoryWindowDX + 1082604HeroOverViewInventoryIconButton9DY: equ HeroOverViewInventoryWindowDY + 07826052606HeroOverViewInventoryIconButton10DX: equ HeroOverViewInventoryWindowDX + 0082607HeroOverViewInventoryIconButton10DY: equ HeroOverViewInventoryWindowDY + 1012609HeroOverViewInventoryIconButton11DX: equ HeroOverViewInventoryWindowDX + 0302610HeroOverViewInventoryIconButton11DY: equ HeroOverViewInventoryWindowDY + 1012612HeroOverViewInventoryIconButton12DX: equ HeroOverViewInventoryWindowDX + 0522613HeroOverViewInventoryIconButton12DY: equ HeroOverViewInventoryWindowDY + 1012615HeroOverViewInventoryIconButton13DX: equ HeroOverViewInventoryWindowDX + 0742616HeroOverViewInventoryIconButton13DY: equ HeroOverViewInventoryWindowDY + 1012618HeroOverViewInventoryIconButton14DX: equ HeroOverViewInventoryWindowDX + 0962619HeroOverViewInventoryIconButton14DY: equ HeroOverViewInventoryWindowDY + 1012621HeroOverViewInventoryIconButton15DX: equ HeroOverViewInventoryWindowDX + 1182622HeroOverViewInventoryIconButton15DY: equ HeroOverViewInventoryWindowDY + 1012624HeroOverviewInventoryIconButtonTableLenghtPerIcon: equ HeroOverviewInventoryIconButtonTable.endlenght-HeroOverviewInventoryIconButtonTable2625HeroOverviewInventoryIconButtonTableAmountOfButtons: db 9 + 62626HeroOverviewInventoryIconButtonTable: 2627 dw $0000 + (HeroOverViewInventoryIconButton1DY*128) + (HeroOverViewInventoryIconButton1DX/2) | db %1000 0011, HeroOverViewInventoryIconButton1DY,HeroOverViewInventoryIconButton1DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton1DX,HeroOverViewInventoryIconButton1DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2628 .endlenght:2629 dw $0000 + (HeroOverViewInventoryIconButton2DY*128) + (HeroOverViewInventoryIconButton2DX/2) | db %1000 0011, HeroOverViewInventoryIconButton2DY,HeroOverViewInventoryIconButton2DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton2DX,HeroOverViewInventoryIconButton2DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2630 dw $0000 + (HeroOverViewInventoryIconButton3DY*128) + (HeroOverViewInventoryIconButton3DX/2) | db %1000 0011, HeroOverViewInventoryIconButton3DY,HeroOverViewInventoryIconButton3DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton3DX,HeroOverViewInventoryIconButton3DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2631 dw $0000 + (HeroOverViewInventoryIconButton4DY*128) + (HeroOverViewInventoryIconButton4DX/2) | db %1000 0011, HeroOverViewInventoryIconButton4DY,HeroOverViewInventoryIconButton4DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton4DX,HeroOverViewInventoryIconButton4DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2632 dw $0000 + (HeroOverViewInventoryIconButton5DY*128) + (HeroOverViewInventoryIconButton5DX/2) | db %1000 0011, HeroOverViewInventoryIconButton5DY,HeroOverViewInventoryIconButton5DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton5DX,HeroOverViewInventoryIconButton5DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2633 dw $0000 + (HeroOverViewInventoryIconButton6DY*128) + (HeroOverViewInventoryIconButton6DX/2) | db %1000 0011, HeroOverViewInventoryIconButton6DY,HeroOverViewInventoryIconButton6DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton6DX,HeroOverViewInventoryIconButton6DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2634 dw $0000 + (HeroOverViewInventoryIconButton7DY*128) + (HeroOverViewInventoryIconButton7DX/2) | db %1000 0011, HeroOverViewInventoryIconButton7DY,HeroOverViewInventoryIconButton7DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton7DX,HeroOverViewInventoryIconButton7DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2635 dw $0000 + (HeroOverViewInventoryIconButton8DY*128) + (HeroOverViewInventoryIconButton8DX/2) | db %1000 0011, HeroOverViewInventoryIconButton8DY,HeroOverViewInventoryIconButton8DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton8DX,HeroOverViewInventoryIconButton8DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2636 dw $0000 + (HeroOverViewInventoryIconButton9DY*128) + (HeroOverViewInventoryIconButton9DX/2) | db %1000 0011, HeroOverViewInventoryIconButton9DY,HeroOverViewInventoryIconButton9DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton9DX,HeroOverViewInventoryIconButton9DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2638 dw $0000 + (HeroOverViewInventoryIconButton10DY*128) + (HeroOverViewInventoryIconButton10DX/2) | db %1000 0011, HeroOverViewInventoryIconButton10DY,HeroOverViewInventoryIconButton10DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton10DX,HeroOverViewInventoryIconButton10DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2639 dw $0000 + (HeroOverViewInventoryIconButton11DY*128) + (HeroOverViewInventoryIconButton11DX/2) | db %1000 0011, HeroOverViewInventoryIconButton11DY,HeroOverViewInventoryIconButton11DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton11DX,HeroOverViewInventoryIconButton11DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2640 dw $0000 + (HeroOverViewInventoryIconButton12DY*128) + (HeroOverViewInventoryIconButton12DX/2) | db %1000 0011, HeroOverViewInventoryIconButton12DY,HeroOverViewInventoryIconButton12DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton12DX,HeroOverViewInventoryIconButton12DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2641 dw $0000 + (HeroOverViewInventoryIconButton13DY*128) + (HeroOverViewInventoryIconButton13DX/2) | db %1000 0011, HeroOverViewInventoryIconButton13DY,HeroOverViewInventoryIconButton13DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton13DX,HeroOverViewInventoryIconButton13DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2642 dw $0000 + (HeroOverViewInventoryIconButton14DY*128) + (HeroOverViewInventoryIconButton14DX/2) | db %1000 0011, HeroOverViewInventoryIconButton14DY,HeroOverViewInventoryIconButton14DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton14DX,HeroOverViewInventoryIconButton14DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2643 dw $0000 + (HeroOverViewInventoryIconButton15DY*128) + (HeroOverViewInventoryIconButton15DX/2) | db %1000 0011, HeroOverViewInventoryIconButton15DY,HeroOverViewInventoryIconButton15DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton15DX,HeroOverViewInventoryIconButton15DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2652HeroOverviewSpellIconButtonTableAmountOfButtons: db 82653HeroOverviewSpellIconButtonTable_Earth: 2654 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2655 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2656 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2657 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2659 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2660 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2661 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2662 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2664db 8 2665HeroOverviewSpellIconButtonTable_Fire: 2666 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2667 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2668 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2669 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2671 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2672 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2673 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2674 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2677db 8 2678HeroOverviewSpellIconButtonTable_Air: 2679 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2680 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2681 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2682 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2684 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2685 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2686 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2687 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2689db 8 2690HeroOverviewSpellIconButtonTable_Water: 2691 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2692 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2693 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2694 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2696 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2697 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2698 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2699 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2701db 8 2702BattleSpellIconButtons: 2703 dw $0000 + (BattleSpellIconButton1DY*128) + (BattleSpellIconButton1DX/2) | db %1000 0011, BattleSpellIconButton1DY,BattleSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton1DX,BattleSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2704 dw $0000 + (BattleSpellIconButton2DY*128) + (BattleSpellIconButton2DX/2) | db %1000 0011, BattleSpellIconButton2DY,BattleSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton2DX,BattleSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2705 dw $0000 + (BattleSpellIconButton3DY*128) + (BattleSpellIconButton3DX/2) | db %1000 0011, BattleSpellIconButton3DY,BattleSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton3DX,BattleSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2706 dw $0000 + (BattleSpellIconButton4DY*128) + (BattleSpellIconButton4DX/2) | db %1000 0011, BattleSpellIconButton4DY,BattleSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton4DX,BattleSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2708 dw $0000 + (BattleSpellIconButton5DY*128) + (BattleSpellIconButton5DX/2) | db %1000 0011, BattleSpellIconButton5DY,BattleSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton5DX,BattleSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2709 dw $0000 + (BattleSpellIconButton6DY*128) + (BattleSpellIconButton6DX/2) | db %1000 0011, BattleSpellIconButton6DY,BattleSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton6DX,BattleSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2710 dw $0000 + (BattleSpellIconButton7DY*128) + (BattleSpellIconButton7DX/2) | db %1000 0011, BattleSpellIconButton7DY,BattleSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton7DX,BattleSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2711 dw $0000 + (BattleSpellIconButton8DY*128) + (BattleSpellIconButton8DX/2) | db %1000 0011, BattleSpellIconButton8DY,BattleSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton8DX,BattleSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2713BattleSpellIconButton1DX: equ SpellBookX + 0402714BattleSpellIconButton1DY: equ SpellBookY + 0502715BattleSpellIconButton2DX: equ SpellBookX + 0702716BattleSpellIconButton2DY: equ SpellBookY + 0542717BattleSpellIconButton3DX: equ SpellBookX + 0382718BattleSpellIconButton3DY: equ SpellBookY + 0952719BattleSpellIconButton4DX: equ SpellBookX + 0682720BattleSpellIconButton4DY: equ SpellBookY + 0992721BattleSpellIconButton5DX: equ SpellBookX + 1082722BattleSpellIconButton5DY: equ SpellBookY + 0542723BattleSpellIconButton6DX: equ SpellBookX + 1382724BattleSpellIconButton6DY: equ SpellBookY + 0502725BattleSpellIconButton7DX: equ SpellBookX + 1102726BattleSpellIconButton7DY: equ SpellBookY + 0992727BattleSpellIconButton8DX: equ SpellBookX + 1402728BattleSpellIconButton8DY: equ SpellBookY + 0952732ButtonTableSpellIconsEarthSYSX:2733 dw $4000 + (HeroOverViewSpellIconButton1OffSY*128) + (HeroOverViewSpellIconButton1OffSX/2) - 1282734 dw $4000 + (HeroOverViewSpellIconButton1MouseOverSY*128) + (HeroOverViewSpellIconButton1MouseOverSX/2) - 1282735 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282737 dw $4000 + (HeroOverViewSpellIconButton2OffSY*128) + (HeroOverViewSpellIconButton2OffSX/2) - 1282738 dw $4000 + (HeroOverViewSpellIconButton2MouseOverSY*128) + (HeroOverViewSpellIconButton2MouseOverSX/2) - 1282739 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282741 dw $4000 + (HeroOverViewSpellIconButton3OffSY*128) + (HeroOverViewSpellIconButton3OffSX/2) - 1282742 dw $4000 + (HeroOverViewSpellIconButton3MouseOverSY*128) + (HeroOverViewSpellIconButton3MouseOverSX/2) - 1282743 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282745 dw $4000 + (HeroOverViewSpellIconButton4OffSY*128) + (HeroOverViewSpellIconButton4OffSX/2) - 1282746 dw $4000 + (HeroOverViewSpellIconButton4MouseOverSY*128) + (HeroOverViewSpellIconButton4MouseOverSX/2) - 1282747 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282749 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282750 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282751 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282753 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282754 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282755 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282757 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282758 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282759 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282761 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282762 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282763 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282765ButtonTableSpellIconsFireSYSX:2766 dw $4000 + (HeroOverViewSpellIconButton5OffSY*128) + (HeroOverViewSpellIconButton5OffSX/2) - 1282767 dw $4000 + (HeroOverViewSpellIconButton5MouseOverSY*128) + (HeroOverViewSpellIconButton5MouseOverSX/2) - 1282768 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282770 dw $4000 + (HeroOverViewSpellIconButton6OffSY*128) + (HeroOverViewSpellIconButton6OffSX/2) - 1282771 dw $4000 + (HeroOverViewSpellIconButton6MouseOverSY*128) + (HeroOverViewSpellIconButton6MouseOverSX/2) - 1282772 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282774 dw $4000 + (HeroOverViewSpellIconButton7OffSY*128) + (HeroOverViewSpellIconButton7OffSX/2) - 1282775 dw $4000 + (HeroOverViewSpellIconButton7MouseOverSY*128) + (HeroOverViewSpellIconButton7MouseOverSX/2) - 1282776 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282778 dw $4000 + (HeroOverViewSpellIconButton8OffSY*128) + (HeroOverViewSpellIconButton8OffSX/2) - 1282779 dw $4000 + (HeroOverViewSpellIconButton8MouseOverSY*128) + (HeroOverViewSpellIconButton8MouseOverSX/2) - 1282780 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282782 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282783 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282784 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282786 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282787 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282788 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282790 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282791 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282792 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282794 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282795 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282796 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282798ButtonTableSpellIconsAirSYSX:2799 dw $4000 + (HeroOverViewSpellIconButton9OffSY*128) + (HeroOverViewSpellIconButton9OffSX/2) - 1282800 dw $4000 + (HeroOverViewSpellIconButton9MouseOverSY*128) + (HeroOverViewSpellIconButton9MouseOverSX/2) - 1282801 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282803 dw $4000 + (HeroOverViewSpellIconButton10OffSY*128) + (HeroOverViewSpellIconButton10OffSX/2) - 1282804 dw $4000 + (HeroOverViewSpellIconButton10MouseOverSY*128) + (HeroOverViewSpellIconButton10MouseOverSX/2) - 1282805 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282807 dw $4000 + (HeroOverViewSpellIconButton11OffSY*128) + (HeroOverViewSpellIconButton11OffSX/2) - 1282808 dw $4000 + (HeroOverViewSpellIconButton11MouseOverSY*128) + (HeroOverViewSpellIconButton11MouseOverSX/2) - 1282809 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282811 dw $4000 + (HeroOverViewSpellIconButton12OffSY*128) + (HeroOverViewSpellIconButton12OffSX/2) - 1282812 dw $4000 + (HeroOverViewSpellIconButton12MouseOverSY*128) + (HeroOverViewSpellIconButton12MouseOverSX/2) - 1282813 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282815 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282816 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282817 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282819 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282820 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282821 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282823 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282824 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282825 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282827 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282828 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282829 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282831ButtonTableSpellIconsWaterSYSX:2832 dw $4000 + (HeroOverViewSpellIconButton13OffSY*128) + (HeroOverViewSpellIconButton13OffSX/2) - 1282833 dw $4000 + (HeroOverViewSpellIconButton13MouseOverSY*128) + (HeroOverViewSpellIconButton13MouseOverSX/2) - 1282834 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282836 dw $4000 + (HeroOverViewSpellIconButton14OffSY*128) + (HeroOverViewSpellIconButton14OffSX/2) - 1282837 dw $4000 + (HeroOverViewSpellIconButton14MouseOverSY*128) + (HeroOverViewSpellIconButton14MouseOverSX/2) - 1282838 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282840 dw $4000 + (HeroOverViewSpellIconButton15OffSY*128) + (HeroOverViewSpellIconButton15OffSX/2) - 1282841 dw $4000 + (HeroOverViewSpellIconButton15MouseOverSY*128) + (HeroOverViewSpellIconButton15MouseOverSX/2) - 1282842 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282844 dw $4000 + (HeroOverViewSpellIconButton16OffSY*128) + (HeroOverViewSpellIconButton16OffSX/2) - 1282845 dw $4000 + (HeroOverViewSpellIconButton16MouseOverSY*128) + (HeroOverViewSpellIconButton16MouseOverSX/2) - 1282846 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282848 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282849 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282850 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282852 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282853 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282854 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282856 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282857 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282858 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282860 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282861 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282862 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282865HeroOverViewSpellIconButton1OffSX: equ 2242866HeroOverViewSpellIconButton1OffSY: equ 0002867HeroOverViewSpellIconButton1MouseOverSX: equ 2402868HeroOverViewSpellIconButton1MouseOverSY: equ 0002869HeroOverViewSpellIconButtonMouseClickedSX: equ 1922870HeroOverViewSpellIconButtonMouseClickedSY: equ 1502872HeroOverViewSpellIconButton2OffSX: equ 2242873HeroOverViewSpellIconButton2OffSY: equ 0162874HeroOverViewSpellIconButton2MouseOverSX: equ 2402875HeroOverViewSpellIconButton2MouseOverSY: equ 0162877HeroOverViewSpellIconButton3OffSX: equ 2242878HeroOverViewSpellIconButton3OffSY: equ 0322879HeroOverViewSpellIconButton3MouseOverSX: equ 2402880HeroOverViewSpellIconButton3MouseOverSY: equ 0322882HeroOverViewSpellIconButton4OffSX: equ 2242883HeroOverViewSpellIconButton4OffSY: equ 0482884HeroOverViewSpellIconButton4MouseOverSX: equ 2402885HeroOverViewSpellIconButton4MouseOverSY: equ 0482887HeroOverViewSpellIconButton5OffSX: equ 2242888HeroOverViewSpellIconButton5OffSY: equ 0642889HeroOverViewSpellIconButton5MouseOverSX: equ 2402890HeroOverViewSpellIconButton5MouseOverSY: equ 0642892HeroOverViewSpellIconButton6OffSX: equ 2242893HeroOverViewSpellIconButton6OffSY: equ 0802894HeroOverViewSpellIconButton6MouseOverSX: equ 2402895HeroOverViewSpellIconButton6MouseOverSY: equ 0802897HeroOverViewSpellIconButton7OffSX: equ 2242898HeroOverViewSpellIconButton7OffSY: equ 0962899HeroOverViewSpellIconButton7MouseOverSX: equ 2402900HeroOverViewSpellIconButton7MouseOverSY: equ 0962902HeroOverViewSpellIconButton8OffSX: equ 2242903HeroOverViewSpellIconButton8OffSY: equ 1122904HeroOverViewSpellIconButton8MouseOverSX: equ 2402905HeroOverViewSpellIconButton8MouseOverSY: equ 1122907HeroOverViewSpellIconButton9OffSX: equ 2242908HeroOverViewSpellIconButton9OffSY: equ 1282909HeroOverViewSpellIconButton9MouseOverSX: equ 2402910HeroOverViewSpellIconButton9MouseOverSY: equ 1282912HeroOverViewSpellIconButton10OffSX: equ 2242913HeroOverViewSpellIconButton10OffSY: equ 1442914HeroOverViewSpellIconButton10MouseOverSX: equ 2402915HeroOverViewSpellIconButton10MouseOverSY: equ 1442917HeroOverViewSpellIconButton11OffSX: equ 2242918HeroOverViewSpellIconButton11OffSY: equ 1602919HeroOverViewSpellIconButton11MouseOverSX: equ 2402920HeroOverViewSpellIconButton11MouseOverSY: equ 1602922HeroOverViewSpellIconButton12OffSX: equ 2242923HeroOverViewSpellIconButton12OffSY: equ 1762924HeroOverViewSpellIconButton12MouseOverSX: equ 2402925HeroOverViewSpellIconButton12MouseOverSY: equ 1762929HeroOverViewSpellIconButton13OffSX: equ 0002930HeroOverViewSpellIconButton13OffSY: equ 1842931HeroOverViewSpellIconButton13MouseOverSX: equ 0162932HeroOverViewSpellIconButton13MouseOverSY: equ 1842934HeroOverViewSpellIconButton14OffSX: equ 0322935HeroOverViewSpellIconButton14OffSY: equ 1842936HeroOverViewSpellIconButton14MouseOverSX: equ 0482937HeroOverViewSpellIconButton14MouseOverSY: equ 1842939HeroOverViewSpellIconButton15OffSX: equ 0642940HeroOverViewSpellIconButton15OffSY: equ 1842941HeroOverViewSpellIconButton15MouseOverSX: equ 0802942HeroOverViewSpellIconButton15MouseOverSY: equ 1842944HeroOverViewSpellIconButton16OffSX: equ 0962945HeroOverViewSpellIconButton16OffSY: equ 1842946HeroOverViewSpellIconButton16MouseOverSX: equ 1122947HeroOverViewSpellIconButton16MouseOverSY: equ 1842951HeroOverViewSpellIconButton17OffSX: equ 1282952HeroOverViewSpellIconButton17OffSY: equ 1842953HeroOverViewSpellIconButton17MouseOverSX: equ 1442954HeroOverViewSpellIconButton17MouseOverSY: equ 1842956HeroOverViewSpellIconButton18OffSX: equ 1602957HeroOverViewSpellIconButton18OffSY: equ 1842958HeroOverViewSpellIconButton18MouseOverSX: equ 1762959HeroOverViewSpellIconButton18MouseOverSY: equ 1842961HeroOverViewSpellIconButton19OffSX: equ 1922962HeroOverViewSpellIconButton19OffSY: equ 1842963HeroOverViewSpellIconButton19MouseOverSX: equ 2082964HeroOverViewSpellIconButton19MouseOverSY: equ 1842966HeroOverViewSpellIconButton20OffSX: equ 1922967HeroOverViewSpellIconButton20OffSY: equ 1682968HeroOverViewSpellIconButton20MouseOverSX: equ 2082969HeroOverViewSpellIconButton20MouseOverSY: equ 1682972ButtonTableSpellBookSYSX_Earth:29732977 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282978 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282979 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1282981 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282982 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282983 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282985 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282986 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282987 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282989ButtonTableSpellBookSYSX_Fire:2990 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282991 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282992 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 12829942998 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282999 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1283000 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1283002 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1283003 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1283004 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1283006ButtonTableSpellBookSYSX_Air:3007 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1283008 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1283009 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1283011 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1283012 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1283013 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 12830153019 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1283020 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1283021 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1283023ButtonTableSpellBookSYSX_Water:3024 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1283025 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1283026 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1283028 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1283029 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1283030 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1283032 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1283033 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1283034 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1283036 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1283037 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1283038 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1283040ActivatedSkillsButton: ds 230413043SetSkillsDescription?: db 13044MenuOptionSelected?: db 03045MenuOptionSelected?Backup: db 2553046MenuOptionSelected?BackupLastFrame: db 2553048PreviousButtonClicked: ds 13049PreviousButtonClickedIX: ds 23050AreWeInTavern1OrRecruit2?: ds 13052PreviousButton2Clicked: ds 13053PreviousButton2ClickedIX: ds 23056LenghtTextSkillsDescription: equ EndFirstLine-TextSkillsWindowButton13057TextSkillsWindowButton1: 3058 db "                                 ",2553059EndFirstLine:3060 db "                                 ",2543061 db "                                 ",2543062 db "                                 ",2553063TextSkillsWindowButton2: 3064 db "                                 ",255 3065 db "                                 ",2543066 db "                                 ",2543067 db "                                 ",2553068TextSkillsWindowButton3: 3069 db "                                 ",255 3070 db "                                 ",2543071 db "                                 ",2543072 db "                                 ",2553073TextSkillsWindowButton4: 3074 db "                                 ",255 3075 db "                                 ",2543076 db "                                 ",2543077 db "                                 ",2553078TextSkillsWindowButton5: 3079 db "                                 ",255 3080 db "                                 ",2543081 db "                                 ",2543082 db "                                 ",2553083TextSkillsWindowButton6: 3084 db "                                 ",255 3085 db "                                 ",2543086 db "                                 ",2543087 db "                                 ",2553089ButtonOff: equ 03090ButtonMouseOver: equ 23091ButtonOMouseClicked: equ 43092ButtonTableSYSX:3093 dw $4000 + (HeroOverViewFirstWindowButtonOffSY*128) + (HeroOverViewFirstWindowButtonOffSX/2) - 1283094 dw $4000 + (HeroOverViewFirstWindowButtonMouseOverSY*128) + (HeroOverViewFirstWindowButtonMouseOverSX/2) - 1283095 dw $4000 + (HeroOverViewFirstWindowButtonMouseClickedSY*128) + (HeroOverViewFirstWindowButtonMouseClickedSX/2) - 1283097ButtonTableSkillsSYSX:3098 dw $4000 + (HeroOverViewSkillsButtonOffSY*128) + (HeroOverViewSkillsButtonOffSX/2) - 1283099 dw $4000 + (HeroOverViewSkillsButtonMouseOverSY*128) + (HeroOverViewSkillsButtonMouseOverSX/2) - 1283100 dw $4000 + (HeroOverViewSkillsButtonMouseClickedSY*128) + (HeroOverViewSkillsButtonMouseClickedSX/2) - 1283102BCStored: ds 23103TextAddresspointer: ds 23104TextPointer: ds 23105TextDX: ds 13107PutLetter:3108 db 000,000,212,000 3109 db 010,000,010,001 3110 db 005,000,005,000 3111 db 000,000,$98 3113EnterHeroOverviewMenu:3114 ld a,13115 ld (GameStatus),a 3117 ld a,(slot.page12rom) 3118 out ($a8),a 3120 ld a,HeroOverviewCodeBlock 3121 call block12 3123 xor a3124 ld (MenuOptionSelected?),a3125 ld a,2553126 ld (MenuOptionSelected?Backup),a 3127 ld (MenuOptionSelected?BackupLastFrame),a3129 xor a3130 ld (SetHeroOverViewMenu?),a3133 call HeroOverviewCode31343140 xor a3141 ld (GameStatus),a 3143 ld hl,CursorBoots3144 ld (CurrentCursorSpriteCharacter),hl3146 call ClearMapPage0AndMapPage1 3148 ld a,(slot.page1rom) 3149 out ($a8),a 3151 xor a3152 ld (vblankintflag),a3153 3154 ld (putmovementstars?),a3155 ld (mouseclickx),a 3156 ld (mouseclicky),a 3165 ld a,%0001 00003166 ld (ControlsOnInterrupt),a3167 ret3169SetSpatInCastle:3170 ld hl,SpatInCastle3171 ld de,spat + (3*4)3172 ld bc,13*43173 ldir3174 ret3176SetSpatInGame:3177 ld hl,SpatInGame3178 ld de,spat + (3*4)3179 ld bc,13*43180 ldir3181 ret3183ChangeSong?: db 03184ReloadAllObjectsInVram?: db 0 3185SetNewBuilding?: db 0 3186EnterCastle:3187 ld a,StopSong3188 ld (ChangeSong?),a3190 ld a,23191 ld (GameStatus),a 3193 in a,($a8) 3194 push af 3195 ld a,(memblocks.1)3196 push af3198 ld a,(slot.page12rom) 3199 out ($a8),a 3201 ld a,CastleOverviewCodeBlock 3202 call block1234 3204 call SetSpatInCastle3206 call CastleOverviewCode32073213 ld a,StopSong3214 ld (ChangeSong?),a3215 halt 3217 call SetSpatInGame3219 pop af3220 call block12 3221 pop af3222 out ($a8),a 3224 xor a3225 ld (GameStatus),a 3226 ld (vblankintflag),a3227 3228 ld (putmovementstars?),a3229 ld (mouseclickx),a 3230 ld (mouseclicky),a 3231 ld (framecounter),a32323233 ld (movehero?),a 32343240 ld a,%0001 00003241 ld (ControlsOnInterrupt),a3243 call SetTempisr 3245 ld a,(mappointery)3246 ld b,a3247 ld a,(mappointerx)3248 ld c,a3249 push bc 3250 3251 call SetScreenOff3253 ld a,(ReloadAllObjectsInVram?) 3254 or a3255 call nz,LoadAllObjectsInVram 3256 xor a3257 ld (ReloadAllObjectsInVram?),a 3259 ld hl,InGamePalette3260 call SetPalette3261 call LoadHud 3262 call SetInterruptHandler 3263 call SetAllSpriteCoordinatesInPage2 3264 call SetAllHeroPosesInVram 3265 call InitiatePlayerTurn 3266 call ClearMapPage0AndMapPage13267 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady3268 call DoCopy32693270 call CenterMousePointer3272 ld hl,03273 ld (CurrentCursorSpriteCharacter),hl3275 pop bc 3276 ld a,b3277 ld (mappointery),a3278 ld a,c3279 ld (mappointerx),a3281 ld a,WorldSong3282 ld (ChangeSong?),a3284 jp LevelEngine3286SwapAndSetPage:3287 ld a,(activepage) 3288 xor 1 3289 ld (activepage),a 3290 jp SetPageSpecial 3292SwapButDontSetPage:3293 ld a,(activepage) 3294 xor 1 3295 ld (activepage),a 3296 ret3298EnterCombat:3299 ld a,StopSong3300 ld (ChangeSong?),a3302 ld a,33303 ld (GameStatus),a 3305 in a,($a8) 3306 push af 3307 ld a,(memblocks.1)3308 push af3310 ld a,(slot.page12rom) 3311 out ($a8),a 3313 ld a,BattleCodeBlock 3314 call block1234 3316 call SetSpatInCastle3317 call InitiateBattle3318 halt 3319 call SetSpatInGame3321 pop af3322 call block12 3323 pop af3324 out ($a8),a 3326 xor a3327 ld (GameStatus),a 3328 ld (vblankintflag),a3329 3330 ld (putmovementstars?),a3331 ld (mouseclickx),a 3332 ld (mouseclicky),a 3333 ld (framecounter),a3334 ld (movehero?),a 3335 ld (WhichHudButtonClicked?),a3336 ld (MenuOptionSelected?),a3338 xor a 3339 di3340 out ($99),a3341 ld a,23+1283342 ei3343 out ($99),a3345 call SetTempisr 3347 ld a,WorldSong3348 ld (ChangeSong?),a3350 jp StartGame.WhenExitingCombat3352SetAllSpriteCoordinatesInPage2:3353 ld hl,0*128+(000/2) - 128 3354 ld (pl1hero1y+HeroDYDX),hl3355 ld hl,0*128+(016/2) - 128 3356 ld (pl1hero2y+HeroDYDX),hl3357 ld hl,0*128+(032/2) - 128 3358 ld (pl1hero3y+HeroDYDX),hl3359 ld hl,0*128+(048/2) - 128 3360 ld (pl1hero4y+HeroDYDX),hl3361 ld hl,0*128+(064/2) - 128 3362 ld (pl1hero5y+HeroDYDX),hl3363 ld hl,0*128+(080/2) - 128 3364 ld (pl1hero6y+HeroDYDX),hl3365 ld hl,0*128+(096/2) - 128 3366 ld (pl1hero7y+HeroDYDX),hl3367 ld hl,0*128+(112/2) - 128 3368 ld (pl1hero8y+HeroDYDX),hl3369 3370 ld hl,0*128+(128/2) - 128 3371 ld (pl2hero1y+HeroDYDX),hl3372 ld hl,0*128+(144/2) - 128 3373 ld (pl2hero2y+HeroDYDX),hl3374 ld hl,0*128+(160/2) - 128 3375 ld (pl2hero3y+HeroDYDX),hl3376 ld hl,0*128+(176/2) - 128 3377 ld (pl2hero4y+HeroDYDX),hl3378 ld hl,0*128+(192/2) - 128 3379 ld (pl2hero5y+HeroDYDX),hl3380 ld hl,0*128+(208/2) - 128 3381 ld (pl2hero6y+HeroDYDX),hl3382 ld hl,0*128+(224/2) - 128 3383 ld (pl2hero7y+HeroDYDX),hl3384 ld hl,0*128+(240/2) - 128 3385 ld (pl2hero8y+HeroDYDX),hl3386 3387 ld hl,32*128+(000/2) - 128 3388 ld (pl3hero1y+HeroDYDX),hl3389 ld hl,32*128+(016/2) - 128 3390 ld (pl3hero2y+HeroDYDX),hl3391 ld hl,32*128+(032/2) - 128 3392 ld (pl3hero3y+HeroDYDX),hl3393 ld hl,32*128+(048/2) - 128 3394 ld (pl3hero4y+HeroDYDX),hl3395 ld hl,32*128+(064/2) - 128 3396 ld (pl3hero5y+HeroDYDX),hl3397 ld hl,32*128+(080/2) - 128 3398 ld (pl3hero6y+HeroDYDX),hl3399 ld hl,32*128+(096/2) - 128 3400 ld (pl3hero7y+HeroDYDX),hl3401 ld hl,32*128+(112/2) - 128 3402 ld (pl3hero8y+HeroDYDX),hl3403 3404 ld hl,32*128+(128/2) - 128 3405 ld (pl4hero1y+HeroDYDX),hl3406 ld hl,32*128+(144/2) - 128 3407 ld (pl4hero2y+HeroDYDX),hl3408 ld hl,32*128+(160/2) - 128 3409 ld (pl4hero3y+HeroDYDX),hl3410 ld hl,32*128+(176/2) - 128 3411 ld (pl4hero4y+HeroDYDX),hl3412 ld hl,32*128+(192/2) - 128 3413 ld (pl4hero5y+HeroDYDX),hl3414 ld hl,32*128+(208/2) - 128 3415 ld (pl4hero6y+HeroDYDX),hl3416 ld hl,32*128+(224/2) - 128 3417 ld (pl4hero7y+HeroDYDX),hl3418 ld hl,32*128+(240/2) - 128 3419 ld (pl4hero8y+HeroDYDX),hl3420 ret3422LoadAllObjectsInVram: 3423 ld hl,$4000 + (000*128) + (000/2) - 1283424 ld (AddressToWriteFrom),hl3425 ld de,$0000 + (064*128) + (000/2) - 128 3426 ld (AddressToWriteTo),de 3427 ld bc,$0000 + (192*256) + (256/2)3428 ld (NXAndNY),bc3429 ld a,World1ObjectsBlock 3430 ld (BlockToReadFrom),a3431 jp CopyRamToVramPage3ForBattleEngine 3433SetMapPalette:3434 ld a,(ix+7) 3435 ld (InGamePalette),a3436 ld a,(ix+8) 3437 ld (InGamePalette+1),a3438 ld a,(ix+9) 3439 ld (InGamePalette+2),a3440 ld a,(ix+10) 3441 ld (InGamePalette+3),a3443 ld hl,InGamePalette3444 jp SetPalette 3446SetBattleScreenBlock:3447 ld a,(ix+11) 3448 ld (BattleGraphicsBlock),a3449 ret3451CastleOverviewPalette:34523453 incbin"..\grapx\CastleOverview\CastleOverview.pl"34543456LoadHud:3457 ld a,13458 ld (activepage),a 3460 ld hl,$4000 + (000*128) + (000/2) - 1283461 ld de,$0000 + (000*128) + (000/2) - 1283462 ld bc,$0000 + (212*256) + (256/2)3463 ld a,HudNewBlock 3464 call CopyRamToVramCorrectedCastleOverview 34663469 ld hl,LoadMiniMap 3470 call ExecuteLoaderRoutine3472 call RepairDecorationEdgesHud3474 ld hl,SetCastlesInMiniMap 3475 call ExecuteLoaderRoutine3477 ld hl,CopyPage0To13478 call docopy3480 ld hl,CopyMovementArrows1 3481 call docopy3482 ld hl,CopyMovementArrows2 3483 call docopy3484 ld hl,CopyMovementBlackArrows1 3485 call docopy3486 ld hl,CopyMovementBlackArrows2 3487 call docopy34893497 ret3499CopyMovementArrows1:3500 db 10,0,13,03501 db 96,0,222,03502 db 160,0,10,03503 db 0,0,$d03505CopyMovementArrows2:3506 db 10,0,23,03507 db 96,0,246,03508 db 160,0,10,03509 db 0,0,$d03511CopyMovementBlackArrows1:3512 db 10,0,33,03513 db 96,0,222,13514 db 160,0,10,03515 db 0,0,$d03517CopyMovementBlackArrows2:3518 db 10,0,43,03519 db 96,0,246,13520 db 160,0,10,03521 db 0,0,$d03524RepairDecorationEdgesHud: 3525 ld hl,$4000 + (005*128) + (202/2) - 1283526 ld de,256*005 + 202 3527 ld bc,$0000 + (005*256) + (050/2)3528 ld a,HudNewBlock 3529 exx3530 ex af,af'3531 ld hl,CopyTransparantImageEXX3532 call EnterSpecificRoutineInCastleOverviewCode3534 ld hl,$4000 + (050*128) + (202/2) - 1283535 ld de,256*050 + 202 3536 ld bc,$0000 + (003*256) + (050/2)3537 ld a,HudNewBlock 3538 exx3539 ex af,af'3540 ld hl,CopyTransparantImageEXX3541 jp EnterSpecificRoutineInCastleOverviewCode3543LoadWorldTiles:3544 ld ix,(WorldPointer)3545 3546 ld a,(slot.page1rom) 3547 out ($a8),a 3548 ld a,Loaderblock 3549 call block12 3551 ld hl,$4000 + (000*128) + (000/2) - 1283552 ld (AddressToWriteFrom),hl3553 ld de,$8000 + (000*128) + (000/2) - 128 3554 ld (AddressToWriteTo),de 3555 ld bc,$0000 + (000*256) + (256/2)3556 ld (NXAndNY),bc3557 ld a,(ix+6) 3558 ld (BlockToReadFrom),a3559 jp CopyRamToVramPage3ForBattleEngine 3563LoadWorldMapAndObjectLayerMap:3564 ld ix,(WorldPointer)3565 3566 ld a,(slot.page1rom) 3567 out ($a8),a 3568 ld a,Loaderblock 3569 call block12 3571 ld l,(ix+4) 3572 ld h,(ix+5) 3573 push hl3574 ld a,(ix+3) 3575 push af3576 ld a,(ix+0) 3577 ld l,(ix+1) 3578 ld h,(ix+2)3579 35803581 call block12 3583 ld a,1 3584 out ($fe),a 3585 3586 ld de,$80003587 call Depack35893590 pop af3591 call block12 3593 ld a,2 3594 out ($fe),a 3596 pop hl3597 ld de,$80003598 call Depack3599 ret3601CopyTilePiece:3602 db 0,0,0,33603 db XMiniMap,0,YMiniMap,03604 db 1,0,1,03605 db 0,%0000 0000,$983606 3607InGamePalette:3608 incbin"..\grapx\tilesheets\PaletteGentleCave.pl"36093616SetInterruptHandler:3617 di3618 ld hl,InterruptHandler 3619 ld ($38+1),hl 3620 ld a,$c3 3621 ld ($38),a3622 3623 ld a,(VDP_0) 3624 and %1110 111136253626 ld (VDP_0),a 3627 out ($99),a3628 ld a,1283629 ei3630 out ($99),a3631 ret3633 3634SetTempisr: 36353636 di3637 ld hl,.tempisr3638 ld de,$383639 ld bc,63640 ldir3641 ei3642 ret3644.tempisr:3645 push af3646 in a,($99) 3647 pop af3648 ei 3649 ret3651sprcoladdr: equ $74003652sprattaddr: equ $76003653sprcharaddr: equ $78003654SpriteInitialize:3655 ld a,(vdp_0+1)3656 or 2 3657 di3658 out ($99),a3659 ld a,1+1283660 ei3661 out ($99),a3663 ld a,%1110 11113664 ld (vdp_0+5),a3665 di36663667 out ($99),a 3668 ld a,5+1283669 out ($99),a36703671 ld a,%0000 0000 3672 ld (vdp_8+3),a3673 out ($99),a3674 ld a,11+1283675 out ($99),a3676 36773678 ld a,%0000 11113679 ld (vdp_0+6),a36803681 out ($99),a 3682 ld a,6+1283683 ei3684 out ($99),a3685 ret3687SetPage: 3688 di3689 out ($99),a3690 ld a,2+1283691 ei3692 out ($99),a3693 ret36983706370837143720372537283741block12High:3742 di3743 ld (memblocks.1),a3744 ld ($6100),a3745 ei3746 ret374837553766block12: 3767 di3768 ld (memblocks.1),a3769 ld ($6000),a3770 ei3771 ret3773block34: 3774 di3775 ld (memblocks.2),a3776 ld ($7000),a3777 ei3778 ret3780block1234: 3781 di3782 ld (memblocks.1),a3783 ld ($6000),a3784 inc a3785 ld (memblocks.2),a3786 ld ($7000),a3787 ei3788 ret3790TinyCopyWhichFunctionsAsWaitVDPReady:3791 db 0,0,0,03792 db 0,0,0,03793 db 1,0,1,03794 db 0,%0000 0000,$983796BuildingFadeIn:3797 db 0,0,0,13798 db 0,0,0,23799 db 1,0,1,03800 db 0,%0000 0000,$983802DoCopy:3803 ld a,323804 di3805 out ($99),a3806 ld a,17+1283807 ei3808 out ($99),a3809 ld c,$9b3810.vdpready:3811 ld a,23812 di3813 out ($99),a3814 ld a,15+1283815 out ($99),a3816 in a,($99)3817 rra3818 ld a,03819 out ($99),a3820 ld a,15+1283821 ei3822 out ($99),a3823 jr c,.vdpready38253829 dw $a3ed,$a3ed,$a3ed,$a3ed3830 dw $a3ed,$a3ed,$a3ed,$a3ed3831 dw $a3ed,$a3ed,$a3ed,$a3ed3832 dw $a3ed,$a3ed,$a3ed3833 ret3835currentpage: ds 13836sprcoltableaddress: ds 23837spratttableaddress: ds 23838sprchatableaddress: ds 23839invissprcoltableaddress: ds 23840invisspratttableaddress: ds 23841invissprchatableaddress: ds 23843SetPalette:3844 xor a3845 di3846 out ($99),a3847 ld a,16+1283848 out ($99),a3849 ld bc,$209A3850 otir3851 ei3852 ret38543857SetVdp_Read: rlc h3858 rla3859 rlc h3860 rla3861 srl h3862 srl h3863 di3864 out ($99),a 3865 ld a,14+1283866 out ($99),a3867 ld a,l 3869 out ($99),a3870 ld a,h 3871 ei 3872 out ($99),a3873 ret3874 38753878SetVdp_Write: 38793880 rlc h3881 rla3882 rlc h3883 rla3884 srl h3885 srl h3886 di3887 out ($99),a 3888 ld a,14+1283889 out ($99),a38903892 ld a,l 3894 out ($99),a3895 ld a,h 3896 or 64 3897 ei3898 out ($99),a 3899 ret39013904SetVdp_WriteWithoutDisablingOrEnablingInt: 39053906 rlc h3907 rla3908 rlc h3909 rla3910 srl h3911 srl h3912 out ($99),a 3913 ld a,14+1283914 out ($99),a39153917 ld a,l 3919 out ($99),a3920 ld a,h 3921 or 64 3922 out ($99),a 3923 ret3925Depack: 3926 inc hl 3927 inc hl 3928 inc hl3929 inc hl3931 ld a,1283932 3933 exx3934 ld de,13935 exx3936 3937.depack_loop:3938 call .getbits3939 jr c,.output_compressed 3940 ldi 3942 jr .depack_loop3943 39443945.output_compressed:3946 ld c,(hl) 3947 inc hl 3949.output_match:3950 ld b,03951 bit 7,c3952 jr z,.output_match1 3954 call .getbits3955 call .rlbgetbits3956 call .rlbgetbits3957 call .rlbgetbits3959 jr c,.output_match1 3960 res 7,c 3961.output_match1:3962 inc bc3963 39643966 exx 3967 ld h,d3968 ld l,e 3969 ld b,e 39713972.get_gamma_value_size:3973 exx3974 call .getbits3975 exx3976 jr nc,.get_gamma_value_size_end 3977 inc b 3978 jr .get_gamma_value_size 3980.get_gamma_value_bits:3981 exx3982 call .getbits3983 exx3984 3985 adc hl,hl 3986.get_gamma_value_size_end:3987 djnz .get_gamma_value_bits 3989.get_gamma_value_end:3990 inc hl 3991 exx 3992 3993 ret c39943996 push hl 3998 exx3999 push hl 4000 exx4002 ld h,d4003 ld l,e 4004 sbc hl,bc 4006 pop bc 4008 ldir 4010 pop hl 4012 jr .depack_loop4014.rlbgetbits:4015 rl b4016.getbits:4017 add a,a4018 ret nz4019 ld a,(hl)4020 inc hl4021 rla4022 ret 40244025freezecontrols?: db 040264031PopulateControls:4032 ld a,(freezecontrols?)4033 or a4034 jp nz,.freezecontrols40364038 4039 ld a,15 4040 di4041 out ($a0),a4042 ld a,$8f4043 out ($a1),a4044 ld a,14 4045 out ($a0),a4046 ei4047 in a,($a2)4048 cpl4049 and $3f 4050 ld c,a4052 ld de,$04F04053 4054 in a,($aa)4055 and e4056 or 64057 out ($aa),a4058 in a,($a9)4059 cpl4060 and $20 4061 rlca 4062 or c4063 ld c,a 4064 4065 in a,($aa) 4066 and e4067 or d4068 out ($aa),a4069 in a,($a9)4070 cpl4071 and d 4072 ld b,a4073 in a,($aa)4074 and e4075 or 84076 out ($aa),a4077 in a,($a9)4078 cpl 4079 and $F1 4080 rlca 4081 or b 4082 rla 4083 rla 4084 rla 4085 ld b,a4086 rla 4087 rla 4088 rla 4089 and d 4090 or b 4091 or c 4092 4093 ld b,a4094 ld hl,Controls4095 ld a,(hl)4096 xor b4097 and b4098 ld (NewPrContr),a4099 ld (hl),b41014105 ret4107.freezecontrols:4108 xor a4109 ld (Controls),a4110 ld (NewPrContr),a4111 ret4113PopulateControlsOnInterrupt: 4114 ld a,15 4116 out ($a0),a4117 ld a,$8f4118 out ($a1),a4119 ld a,14 4120 out ($a0),a41214122 in a,($a2)4123 cpl4124 and $3f 4125 ld c,a4127 ld de,$04F04128 4129 in a,($aa)4130 and e4131 or 64132 out ($aa),a4133 in a,($a9)4134 cpl4135 and $20 4136 rlca 4137 or c4138 ld c,a 4139 4140 in a,($aa) 4141 and e4142 or d4143 out ($aa),a4144 in a,($a9)4145 cpl4146 and d 4147 ld b,a4148 in a,($aa)4149 and e4150 or 84151 out ($aa),a4152 in a,($a9)4153 cpl 4154 and $F1 4155 rlca 4156 or b 4157 rla 4158 rla 4159 rla 4160 ld b,a4161 rla 4162 rla 4163 rla 4164 and d 4165 or b 4166 or c 4167 4168 ld b,a4169 ld hl,ControlsOnInterrupt4170 ld a,(hl)4171 xor b4172 and b4173 ld (NewPrControlsOnInterrupt),a4174 ld (hl),b4176 ld a,(keys+6)4177 bit 1,a 4178 ret nz4180 ld a,(ControlsOnInterrupt)4181 and %1111 00004182 ld (ControlsOnInterrupt),a4183 ret4185SetScreenOff:4186 ld a,(vdp_0+1) 4187 and %1011 11114188 jr SetScreenon.go4190SetScreenon:4191 ld a,(vdp_0+1) 4192 or %0100 00004193 .go:4194 ld (vdp_0+1),a4195 di4196 out ($99),a4197 ld a,1+1284198 ei4199 out ($99),a4200 ret4202outix384:4203 call outix2564204 jp outix1284205outix352:4206 call outix2564207 jp outix964208outix320:4209 call outix2564210 jp outix644211outix288:4212 call outix2564213 jp outix324214outix256: 4215 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4216outix250: 4217 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4218outix224:4219 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4220outix208: 4221 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4222outix192: 4223 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi4224outix176: 4225 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4226outix160:4227 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4228outix144: 4229 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4230outix128: 4231 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4232outix112:4233 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4234outix96: 4235 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4236outix80: 4237 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi4238outix64: 4239 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4240outix48:4241 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4242outix32: 4243 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4244outix16: 4245 outi outi outi outi outi outi outi outi4246outix8: 4247 outi outi outi outi outi outi outi outi 4248 ret 4257Scroll: 4258 ld iy,(plxcurrentheroAddress)4259 ld b,6 4260 .CheckEmptyOpenSlotLoop:4261 ld a,(iy+HeroInventory+9) 4262 cp 454263 jr z,.EmptySlotFound4264 inc iy4265 djnz .CheckEmptyOpenSlotLoop4266 ret4267 .EmptySlotFound: 4268 ld a,34269 ld (ScrollFound?),a 4270 xor a4271 ld (movehero?),a4272 ld (hl),a 4273 inc hl4274 ld a,(hl) 4275 ld (hl),0 4276 sub 192-46 4277 ld (iy+HeroInventory+9),a4278 cp 464279 jp z,.Level1Scroll4280 cp 474281 jp z,.Level2Scroll4282 cp 484283 jp z,.Level3Scroll4285 .Level4Scroll:4286 call .AddSpellSchoolToSpellLevel 4287 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4288 ret z 4289 ld c,a 4291 4292 ld a,65 4293 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4294 ret z 4295 ld a,61 4296 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4297 ret z 4298 ld a,49 4299 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4300 ret z 4301 ld a,53 4302 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4303 ret z 4304 ld a,57 4305 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4306 ret z 4307 ld a,c 4308 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4310 .Level3Scroll:4311 call .AddSpellSchoolToSpellLevel 4312 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4313 ret z 4314 ld c,a 4316 4317 ld a,52 4318 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4319 ret z 4320 ld a,64 4321 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4322 ret z 4323 ld a,60 4324 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4325 ret z 4326 ld a,48 4327 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4328 ret z 4329 ld a,56 4330 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4331 ret z 4332 ld a,c 4333 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4335 .Level2Scroll:4336 call .AddSpellSchoolToSpellLevel 4337 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4338 ret z 4339 ld c,a 4341 4342 ld a,59 4343 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4344 ret z 4345 ld a,63 4346 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4347 ret z 4348 ld a,55 4349 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4350 ret z 4351 ld a,51 4352 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4353 ret z 4354 ld a,47 4355 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4356 ret z 4357 ld a,c 4358 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4360 .Level1Scroll:4361 call .AddSpellSchoolToSpellLevel 4362 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4363 ret z 4364 ld c,a 4366 4367 ld a,62 4368 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4369 ret z 4370 ld a,58 4371 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4372 ret z 4373 ld a,54 4374 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4375 ret z 4376 ld a,50 4377 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4378 ret z 4379 ld a,46 4380 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4381 ret z 4382 ld a,c 4383 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4385 .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell: 4386 ld (iy+HeroInventory+9),a4387 ld (SpellScrollInventoryNumber),a 4389 ld b,0 4390 cp (ix+HeroInventory+9)4391 call z,.ScrollFound4392 cp (ix+HeroInventory+10)4393 call z,.ScrollFound4394 cp (ix+HeroInventory+11)4395 call z,.ScrollFound4396 cp (ix+HeroInventory+12)4397 call z,.ScrollFound4398 cp (ix+HeroInventory+13)4399 call z,.ScrollFound4400 cp (ix+HeroInventory+14)4401 call z,.ScrollFound4403 dec b 4404 ret nz4405 4406 4407 cp 46 4408 jr z,.CheckEarthLevel14409 cp 47 4410 jr z,.CheckEarthLevel24411 cp 48 4412 jr z,.CheckEarthLevel34413 cp 49 4414 jr z,.CheckEarthLevel44416 cp 50 4417 jr z,.CheckFireLevel14418 cp 51 4419 jr z,.CheckFireLevel24420 cp 52 4421 jr z,.CheckFireLevel34422 cp 53 4423 jr z,.CheckFireLevel44425 cp 54 4426 jr z,.CheckAirLevel14427 cp 55 4428 jr z,.CheckAirLevel24429 cp 56 4430 jr z,.CheckAirLevel34431 cp 57 4432 jr z,.CheckAirLevel44434 cp 58 4435 jr z,.CheckWaterLevel14436 cp 59 4437 jr z,.CheckWaterLevel24438 cp 60 4439 jr z,.CheckWaterLevel34440 cp 61 4441 jr z,.CheckWaterLevel44443 cp 62 4444 jr z,.CheckAllSchoolsLevel14445 cp 63 4446 jr z,.CheckAllSchoolsLevel24447 cp 64 4448 jr z,.CheckAllSchoolsLevel34449 cp 65 4450 jr z,.CheckAllSchoolsLevel44452 .CheckEarthLevel1:4453 bit 0,(ix+HeroEarthSpells) 4454 ret4455 .CheckEarthLevel2:4456 bit 1,(ix+HeroEarthSpells) 4457 ret4458 .CheckEarthLevel3:4459 bit 2,(ix+HeroEarthSpells) 4460 ret4461 .CheckEarthLevel4:4462 bit 3,(ix+HeroEarthSpells) 4463 ret4465 .CheckFireLevel1:4466 bit 0,(ix+HeroFireSpells) 4467 ret4468 .CheckFireLevel2:4469 bit 1,(ix+HeroFireSpells) 4470 ret4471 .CheckFireLevel3:4472 bit 2,(ix+HeroFireSpells) 4473 ret4474 .CheckFireLevel4:4475 bit 3,(ix+HeroFireSpells) 4476 ret4478 .CheckAirLevel1:4479 bit 0,(ix+HeroAirSpells) 4480 ret4481 .CheckAirLevel2:4482 bit 1,(ix+HeroAirSpells) 4483 ret4484 .CheckAirLevel3:4485 bit 2,(ix+HeroAirSpells) 4486 ret4487 .CheckAirLevel4:4488 bit 3,(ix+HeroAirSpells) 4489 ret4491 .CheckWaterLevel1:4492 bit 0,(ix+HeroWaterSpells) 4493 ret4494 .CheckWaterLevel2:4495 bit 1,(ix+HeroWaterSpells) 4496 ret4497 .CheckWaterLevel3:4498 bit 2,(ix+HeroWaterSpells) 4499 ret4500 .CheckWaterLevel4:4501 bit 3,(ix+HeroWaterSpells) 4502 ret4504 .CheckAllSchoolsLevel1:4505 bit 0,(ix+HeroAllSchoolsSpells) 4506 ret4507 .CheckAllSchoolsLevel2:4508 bit 1,(ix+HeroAllSchoolsSpells) 4509 ret4510 .CheckAllSchoolsLevel3:4511 bit 2,(ix+HeroAllSchoolsSpells) 4512 ret4513 .CheckAllSchoolsLevel4:4514 bit 3,(ix+HeroAllSchoolsSpells) 4515 ret4517 .ScrollFound:4518 inc b 4519 ret4521 .AddSpellSchoolToSpellLevel: 4522 ld ix,(plxcurrentheroAddress)4523 ld d,04524 ld e,(ix+HeroMove)4525 ld hl,(Date)4526 add hl,de4527 push hl4528 pop bc4529 ld de,5 4530 call DivideBCbyDE 4531 ld a,l 4532 add a,a4533 add a,a 4534 add a,(iy+HeroInventory+9) 4535 ret4542ListOfUnlockedMonstersLevel1:4543 db 160 4544 db 130 4545 db 167 4546 db 170 4547 db 145 4548 db 147 4549 db 148 4550 db 163 4551 db 166 4552 db 164 4553 db 177 4554 db 182 4555 db 188 4556 db 191 4557 db 000 4558ListOfUnlockedMonstersLevel2:4559 db 161 4560 db 129 4561 db 131 4562 db 136 4563 db 171 4565 db 139 4566 db 144 4567 db 146 4568 db 150 4569 db 153 4570 db 154 4571 db 165 4572 db 173 4573 db 175 4574 db 178 4575 db 180 4576 db 185 4577 db 186 4578 db 190 4579 db 187 4580 db 000 4581ListOfUnlockedMonstersLevel3:4582 db 162 4583 db 128 4584 db 134 4585 db 169 4586 db 141 4587 db 142 4588 db 149 4589 db 151 4590 db 152 4591 db 168 4592 db 143 4593 db 174 4594 db 179 4595 db 181 4596 db 183 4597 db 184 4598 db 156 4599 db 189 4600 db 000 4601ListOfUnlockedMonstersLevel4:46024604 db 132 4605 db 172 4606 db 140 4607 db 135 4608 db 138 4609 db 176 4610 db 159 4611 db 155 4612 db 000 4613ListOfUnlockedMonstersLevel5:46144616 db 133 4617 db 158 4618 db 157 4619 db 137 4620 db 000 4621 db 000 4622ListOfUnlockedMonstersLevel6:4623 db 255 4624 db 000 4626MonsterLevel1Pointer: dw ListOfUnlockedMonstersLevel14627MonsterLevel2Pointer: dw ListOfUnlockedMonstersLevel24628MonsterLevel3Pointer: dw ListOfUnlockedMonstersLevel34629MonsterLevel4Pointer: dw ListOfUnlockedMonstersLevel44630MonsterLevel5Pointer: dw ListOfUnlockedMonstersLevel54631MonsterLevel6Pointer: dw ListOfUnlockedMonstersLevel64633TotalAmountOfUnlockedTowns: db 17 4635ListOfUnlockedHeroes:4636DragonSlayer4HeroesAmount: equ CastlevaniaHeroes-DragonSlayer4Heroes4637DragonSlayer4Heroes:46384639db 04 4640db 06 4641db 08 4642db 10 4643db 26 4644db 39 4645db 41 4647CastlevaniaHeroesAmount: equ SDSnatcherHeroes-CastlevaniaHeroes4648CastlevaniaHeroes:46494650db 28 4651db 30 4652db 32 4654SDSnatcherHeroesAmount: equ UsasHeroes-SDSnatcherHeroes4655SDSnatcherHeroes:46564657db 21 4658db 22 4659db 23 4660db 57 4661db 58 4662db 59 4663db 60 4665UsasHeroesAmount: equ GoemonHeroes-UsasHeroes4666UsasHeroes:46674668db 19 4669db 47 4671GoemonHeroesAmount: equ Ys3Heroes-GoemonHeroes4672GoemonHeroes: 4674db 02 4675db 15 4677Ys3HeroesAmount: equ PsychoWorldHeroes-Ys3Heroes4678Ys3Heroes:46794680db 01 4682PsychoWorldHeroesAmount: equ KingKongHeroes-PsychoWorldHeroes4683PsychoWorldHeroes:46844685db 13 4687KingKongHeroesAmount: equ ContraGroupAHeroes-KingKongHeroes4688KingKongHeroes:46894690db 20 4692ContraGroupAHeroesAmount: equ ContraGroupBHeroes-ContraGroupAHeroes4693ContraGroupAHeroes:46944695db 25 4697ContraGroupBHeroesAmount: equ GolvelliusHeroes-ContraGroupBHeroes4698ContraGroupBHeroes:46994700db 72 4702GolvelliusHeroesAmount: equ HeroesWithoutCastle-GolvelliusHeroes4703GolvelliusHeroes:47044705db 24 4706db 43 4708HeroesWithoutCastle:47094710db 03 4711db 05 4712db 17 47144715db 07 4716db 09 4717db 18 4718db 27 4719db 29 4720db 31 4721db 33 4722db 35 4723db 37 47254726db 12 4727db 16 4728db 14 47304731db 11 47334734db 34 47364737db 36 4738db 38 47404741db 40 47434744db 42 47464747db 44 47494750db 45 47524753db 46 47554756db 48 4757db 49 47594760db 50 4761db 52 47634764db 51 4765db 53 4766db 55 47684769db 54 4770db 56 47724773db 61 47754776db 62 47784779db 63 47814782db 64 47844785db 65 47874788db 66 47904791db 67 47934794db 68 4795db 69 4796db 70 4797db 71 47994800db 73 48024803db 74 4804db 75 48064807db 76 4809EndListHeroes:4810db 00 481248194820YieArKungFuHeroesAmount: equ 14821YieArKungFuHeroes:4822BubbleBobbleGroupAHeroesAmount: equ 14823BubbleBobbleGroupAHeroes:4824BubbleBobbleGroupBHeroesAmount: equ 14825BubbleBobbleGroupBHeroes:4826AkanbeDragonGroupAHeroesAmount: equ 14827AkanbeDragonGroupAHeroes:4828AkanbeDragonGroupBHeroesAmount: equ 14829AkanbeDragonGroupBHeroes:4830ChukaTaisenHeroesAmount: equ 14831ChukaTaisenHeroes:48334839db 255 4842HeroInfoName: equ 04843HeroInfoClass: equ HeroInfoName+184844HeroInfoSpriteBlock: equ HeroInfoClass+134845HeroInfoSYSX: equ HeroInfoSpriteBlock+1 4846HeroInfoPortrait10x18SYSX: equ HeroInfoSYSX+24847HeroButton20x11SYSX: equ HeroInfoPortrait10x18SYSX+24848HeroInfoPortrait16x30SYSX: equ HeroButton20x11SYSX+24849HeroInfoSkill: equ HeroInfoPortrait16x30SYSX+24850HeroInfoNumber: equ HeroInfoSkill+14852SkillInLevelUpSlot1: db 14853SkillInLevelUpSlot2: db 14854PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?: ds 14855PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?: ds 14857 4861heroAddressesLenght: equ HeroAddressesGoemon1 - HeroAddressesAdol 4862HeroAddressesAdol: db "Adol",255,"             ","Knight      ",255,AdolSpriteBlock| dw HeroSYSXAdol,HeroPortrait10x18SYSXAdol,HeroButton20x11SYSXAdol,HeroPortrait16x30SYSXAdol | db 01 | db 001 |4863HeroAddressesGoemon1: db "Goemon",255,"           ","Barbarian   ",255,Goemon1SpriteBlock| dw HeroSYSXGoemon1,HeroPortrait10x18SYSXGoemon1,HeroButton20x11SYSXGoemon1,HeroPortrait16x30SYSXGoemon1 | db 04 | db 002 |4864HeroAddressesPixy: db "Faerie Pixie",255,"     ","Shieldbearer",255,PixySpriteBlock| dw HeroSYSXPixy,HeroPortrait10x18SYSXPixy,HeroButton20x11SYSXPixy,HeroPortrait16x30SYSXPixy | db 07 | db 003 |4865HeroAddressesDrasle1: db "Royas Worzen",255,"     ","Overlord    ",255,Drasle1SpriteBlock| dw HeroSYSXDrasle1,HeroPortrait10x18SYSXDrasle1,HeroButton20x11SYSXDrasle1,HeroPortrait16x30SYSXDrasle1 | db 10 | db 004 |4866HeroAddressesLatok: db "Latok",255,"            ","Alchemist   ",255,LatokSpriteBlock| dw HeroSYSXLatok,HeroPortrait10x18SYSXLatok,HeroButton20x11SYSXLatok,HeroPortrait16x30SYSXLatok | db 13 | db 005 |4867HeroAddressesDrasle2: db "Lyll Worzen",255,"      ","Sage        ",255,Drasle2SpriteBlock| dw HeroSYSXDrasle2,HeroPortrait10x18SYSXDrasle2,HeroButton20x11SYSXDrasle2,HeroPortrait16x30SYSXDrasle2 | db 16 | db 006 |4868HeroAddressesSnake1: db "Snake",255,"            ","Ranger      ",255,Snake1SpriteBlock| dw HeroSYSXSnake1,HeroPortrait10x18SYSXSnake1,HeroButton20x11SYSXSnake1,HeroPortrait16x30SYSXSnake1 | db 19 | db 007 |4869HeroAddressesDrasle3: db "Maia Worzen",255,"      ","Wizzard     ",255,Drasle3SpriteBlock| dw HeroSYSXDrasle3,HeroPortrait10x18SYSXDrasle3,HeroButton20x11SYSXDrasle3,HeroPortrait16x30SYSXDrasle3 | db 22 | db 008 |4871HeroAddressesSnake2: db "Solid Snake",255,"      ","Battle Mage ",255,Snake2SpriteBlock| dw HeroSYSXSnake2,HeroPortrait10x18SYSXSnake2,HeroButton20x11SYSXSnake2,HeroPortrait16x30SYSXSnake2 | db 25 | db 009 |4872HeroAddressesDrasle4: db "Xemn Worzen",255,"      ","Scholar     ",255,Drasle4SpriteBlock| dw HeroSYSXDrasle4,HeroPortrait10x18SYSXDrasle4,HeroButton20x11SYSXDrasle4,HeroPortrait16x30SYSXDrasle4 | db 28 | db 010 |4873HeroAddressesAshguine: db "Ashguine",255,"         ","Necromancer ",255,AshguineSpriteBlock| dw HeroSYSXAshguine,HeroPortrait10x18SYSXAshguine,HeroButton20x11SYSXAshguine,HeroPortrait16x30SYSXAshguine | db 31 | db 011 |4874HeroAddressesUndeadline1: db "Leon",255,"             ","Knight      ",255,Undeadline1SpriteBlock| dw HeroSYSXUndeadline1,HeroPortrait10x18SYSXUndeadline1,HeroButton20x11SYSXUndeadline1,HeroPortrait16x30SYSXUndeadline1 | db 01 | db 012 |4875HeroAddressesPsychoWorld: db "Lucia",255,"            ","Barbarian   ",255,PsychoWorldSpriteBlock| dw HeroSYSXPsychoWorld,HeroPortrait10x18SYSXPsychoWorld,HeroButton20x11SYSXPsychoWorld,HeroPortrait16x30SYSXPsychoWorld | db 04 | db 013 |4876HeroAddressesUndeadline2: db "Ruika",255,"            ","Shieldbearer",255,Undeadline2SpriteBlock| dw HeroSYSXUndeadline2,HeroPortrait10x18SYSXUndeadline2,HeroButton20x11SYSXUndeadline2,HeroPortrait16x30SYSXUndeadline2 | db 07 | db 014 |4877HeroAddressesGoemon2: db "Ebisumaru",255,"        ","Overlord    ",255,Goemon2SpriteBlock| dw HeroSYSXGoemon2,HeroPortrait10x18SYSXGoemon2,HeroButton20x11SYSXGoemon2,HeroPortrait16x30SYSXGoemon2 | db 10 | db 015 |4878HeroAddressesUndeadline3: db "Dino",255,"             ","Alchemist   ",255,Undeadline3SpriteBlock| dw HeroSYSXUndeadline3,HeroPortrait10x18SYSXUndeadline3,HeroButton20x11SYSXUndeadline3,HeroPortrait16x30SYSXUndeadline3 | db 13 | db 016 |4880HeroAddressesFray: db "Fray",255,"             ","Sage        ",255,FraySpriteBlock| dw HeroSYSXFray,HeroPortrait10x18SYSXFray,HeroButton20x11SYSXFray,HeroPortrait16x30SYSXFray | db 16 | db 017 |4881HeroAddressesBlackColor: db "Black color",255,"      ","Ranger      ",255,BlackColorSpriteBlock| dw HeroSYSXBlackColor,HeroPortrait10x18SYSXBlackColor,HeroButton20x11SYSXBlackColor,HeroPortrait16x30SYSXBlackColor | db 19 | db 018 |4882HeroAddressesWit: db "Wit",255,"              ","Wizzard     ",255,WitSpriteBlock| dw HeroSYSXWit,HeroPortrait10x18SYSXWit,HeroButton20x11SYSXWit,HeroPortrait16x30SYSXWit | db 22 | db 019 |4883HeroAddressesMitchell: db "Dr. Hank Mitchell",255, "Battle Mage ",255,MitchellSpriteBlock| dw HeroSYSXMitchell,HeroPortrait10x18SYSXMitchell,HeroButton20x11SYSXMitchell,HeroPortrait16x30SYSXMitchell | db 25 | db 020 |4884HeroAddressesJanJackGibson: db "Jan Jack Gibson",255,"  ","Scholar     ",255,JanJackGibsonSpriteBlock| dw HeroSYSXJanJackGibson,HeroPortrait10x18SYSXJanJackGibson,HeroButton20x11SYSXJanJackGibson,HeroPortrait16x30SYSXJanJackGibson | db 28 | db 021 |4885HeroAddressesGillianSeed: db "Gillian Seed",255,"     ","Necromancer ",255,GillianSeedSpriteBlock| dw HeroSYSXGillianSeed,HeroPortrait10x18SYSXGillianSeed,HeroButton20x11SYSXGillianSeed,HeroPortrait16x30SYSXGillianSeed | db 31 | db 022 |4886HeroAddressesSnatcher: db "Snatcher",255,"         ","Knight      ",255,SnatcherSpriteBlock| dw HeroSYSXSnatcher,HeroPortrait10x18SYSXSnatcher,HeroButton20x11SYSXSnatcher,HeroPortrait16x30SYSXSnatcher | db 01 | db 023 |4887HeroAddressesGolvellius: db "Kelesis",255,"          ","Barbarian   ",255,GolvelliusSpriteBlock| dw HeroSYSXGolvellius,HeroPortrait10x18SYSXGolvellius,HeroButton20x11SYSXGolvellius,HeroPortrait16x30SYSXGolvellius | db 04 | db 024 |4889HeroAddressesBillRizer: db "Bill Rizer",255,"       ","Shieldbearer",255,BillRizerSpriteBlock| dw HeroSYSXBillRizer,HeroPortrait10x18SYSXBillRizer,HeroButton20x11SYSXBillRizer,HeroPortrait16x30SYSXBillRizer | db 07 | db 025 |4890HeroAddressesPochi: db "Pochi Worzen",255,"     ","Overlord    ",255,PochiSpriteBlock| dw HeroSYSXPochi,HeroPortrait10x18SYSXPochi,HeroButton20x11SYSXPochi,HeroPortrait16x30SYSXPochi | db 10 | db 026 |4891HeroAddressesGreyFox: db "Grey Fox",255,"         ","Alchemist   ",255,GreyFoxSpriteBlock| dw HeroSYSXGreyFox,HeroPortrait10x18SYSXGreyFox,HeroButton20x11SYSXGreyFox,HeroPortrait16x30SYSXGreyFox | db 13 | db 027 |4892HeroAddressesTrevorBelmont: db "Trevor Belmont",255,"   ","Sage        ",255,TrevorBelmontSpriteBlock| dw HeroSYSXTrevorBelmont,HeroPortrait10x18SYSXTrevorBelmont,HeroButton20x11SYSXTrevorBelmont,HeroPortrait16x30SYSXTrevorBelmont | db 16 | db 028 |4893HeroAddressesBigBoss: db "Big Boss",255,"         ","Ranger      ",255,BigBossSpriteBlock| dw HeroSYSXBigBoss,HeroPortrait10x18SYSXBigBoss,HeroButton20x11SYSXBigBoss,HeroPortrait16x30SYSXBigBoss | db 19 | db 029 |4894HeroAddressesSimonBelmont: db "Simon Belmont",255,"    ","Wizzard     ",255,SimonBelmontSpriteBlock | dw HeroSYSXSimonBelmont,HeroPortrait10x18SYSXSimonBelmont,HeroButton20x11SYSXSimonBelmont,HeroPortrait16x30SYSXSimonBelmont | db 22 | db 030 |4895HeroAddressesDrPettrovich: db "Doctor Pettrovich",255, "Battle Mage ",255,DrPettrovichSpriteBlock | dw HeroSYSXDrPettrovich,HeroPortrait10x18SYSXDrPettrovich,HeroButton20x11SYSXDrPettrovich,HeroPortrait16x30SYSXDrPettrovich | db 25 | db 031 |4896HeroAddressesRichterBelmont: db "Richter Belmont",255,"  ","Necromancer ",255,RichterBelmontSpriteBlock| dw HeroSYSXRichterBelmont,HeroPortrait10x18SYSXRichterBelmont,HeroButton20x11SYSXRichterBelmont,HeroPortrait16x30SYSXRichterBelmont | db 31 | db 032 |4898HeroAddressesUltraBox: db "Ultrabox",255,"         ","Scholar     ",255,UltraboxSpriteBlock| dw HeroSYSXUltrabox,HeroPortrait10x18SYSXUltrabox,HeroButton20x11SYSXUltrabox,HeroPortrait16x30SYSXUltrabox | db 28 | db 033 |4899HeroAddressesLoganSerios: db "Logan Serios",255,"     ","Knight      ",255,LoganSeriosSpriteBlock| dw HeroSYSXLoganSerios,HeroPortrait10x18SYSXLoganSerios,HeroButton20x11SYSXLoganSerios,HeroPortrait16x30SYSXLoganSerios | db 01 | db 034 |4900HeroAddressesHollyWhite: db "Holly White",255,"      ","Barbarian   ",255,HollyWhiteSpriteBlock| dw HeroSYSXHollyWhite,HeroPortrait10x18SYSXHollyWhite,HeroButton20x11SYSXHollyWhite,HeroPortrait16x30SYSXHollyWhite | db 04 | db 035 |4901HeroAddressesMercies: db "Mercies ",255,"         ","Shieldbearer",255,MerciesSpriteBlock| dw HeroSYSXMercies,HeroPortrait10x18SYSXMercies,HeroButton20x11SYSXMercies,HeroPortrait16x30SYSXMercies | db 07 | db 036 |4902HeroAddressesNatashaRomanenko:db "Nastasha",255,"         ","Overlord    ",255,NatashaRomanenkoSpriteBlock | dw HeroSYSXNatashaRomanenko,HeroPortrait10x18SYSXNatashaRomanenko,HeroButton20x11SYSXNatashaRomanenko,HeroPortrait16x30SYSXNatashaRomanenko | db 10 | db 037 |4903HeroAddressesRuth: db "Ruth ",255,"            ","Alchemist   ",255,RuthSpriteBlock| dw HeroSYSXRuth,HeroPortrait10x18SYSXRuth,HeroButton20x11SYSXRuth,HeroPortrait16x30SYSXRuth | db 13 | db 038 |4904HeroAddressesGeera: db "Geera Worzen",255,"     ","Sage        ",255,GeeraSpriteBlock| dw HeroSYSXGeera,HeroPortrait10x18SYSXGeera,HeroButton20x11SYSXGeera,HeroPortrait16x30SYSXGeera | db 16 | db 039 |4905HeroAddressesYoungNoble: db "Young Noble",255,"      ","Ranger      ",255,YoungNobleSpriteBlock| dw HeroSYSXYoungNoble,HeroPortrait10x18SYSXYoungNoble,HeroButton20x11SYSXYoungNoble,HeroPortrait16x30SYSXYoungNoble | db 19 | db 040 |4907HeroAddressesDawel: db "Dawel Worzen",255,"     ","Wizzard     ",255,DawelSpriteBlock| dw HeroSYSXDawel,HeroPortrait10x18SYSXDawel,HeroButton20x11SYSXDawel,HeroPortrait16x30SYSXDawel | db 22 | db 041 |4908HeroAddressesPocky: db "Pocky",255,"            ","Battle Mage ",255,PockySpriteBlock| dw HeroSYSXPocky,HeroPortrait10x18SYSXPocky,HeroButton20x11SYSXPocky,HeroPortrait16x30SYSXPocky | db 25 | db 042 |4909HeroAddressesKelesisTheCook: db "Kelesis The Cook",255," ","Scholar     ",255,KelesisTheCookSpriteBlock| dw HeroSYSXKelesisTheCook,HeroPortrait10x18SYSXKelesisTheCook,HeroButton20x11SYSXKelesisTheCook,HeroPortrait16x30SYSXKelesisTheCook | db 28 | db 043 |4910HeroAddressesLolo: db "Lolo",255,"             ","Necromancer ",255,LoloSpriteBlock| dw HeroSYSXLolo,HeroPortrait10x18SYSXLolo,HeroButton20x11SYSXLolo,HeroPortrait16x30SYSXLolo | db 31 | db 044 |4911HeroAddressesPippols: db "Pippols",255,"          ","Knight      ",255,PippolsSpriteBlock| dw HeroSYSXPippols,HeroPortrait10x18SYSXPippols,HeroButton20x11SYSXPippols,HeroPortrait16x30SYSXPippols | db 01 | db 045 |4912HeroAddressesRandar: db "Randar",255,"           ","Barbarian   ",255,RandarSpriteBlock| dw HeroSYSXRandar,HeroPortrait10x18SYSXRandar,HeroButton20x11SYSXRandar,HeroPortrait16x30SYSXRandar | db 04 | db 046 |4913HeroAddressesCles: db "Cles",255,"             ","Shieldbearer",255,ClesSpriteBlock| dw HeroSYSXCles,HeroPortrait10x18SYSXCles,HeroButton20x11SYSXCles,HeroPortrait16x30SYSXCles | db 07 | db 047 |4914HeroAddressesLuice: db "Luice",255,"            ","Overlord    ",255,LuiceSpriteBlock| dw HeroSYSXLuice,HeroPortrait10x18SYSXLuice,HeroButton20x11SYSXLuice,HeroPortrait16x30SYSXLuice | db 10 | db 048 |4916HeroAddressesDick: db "Dick",255,"             ","Alchemist   ",255,DickSpriteBlock| dw HeroSYSXDick,HeroPortrait10x18SYSXDick,HeroButton20x11SYSXDick,HeroPortrait16x30SYSXDick | db 13 | db 049 |4917HeroAddressesAphrodite: db "Aphrodite",255,"        ","Sage        ",255,AphroditeSpriteBlock| dw HeroSYSXAphrodite,HeroPortrait10x18SYSXAphrodite,HeroButton20x11SYSXAphrodite,HeroPortrait16x30SYSXAphrodite | db 16 | db 050 |4918HeroAddressesTienRen: db "Tien Ren",255,"         ","Ranger      ",255,TienRenSpriteBlock| dw HeroSYSXTienRen,HeroPortrait10x18SYSXTienRen,HeroButton20x11SYSXTienRen,HeroPortrait16x30SYSXTienRen | db 19 | db 051 |4919HeroAddressesPopolon: db "Popolon",255,"          ","Wizzard     ",255,PopolonSpriteBlock| dw HeroSYSXPopolon,HeroPortrait10x18SYSXPopolon,HeroButton20x11SYSXPopolon,HeroPortrait16x30SYSXPopolon | db 22 | db 052 |4920HeroAddressesHoMei: db "Ho Mei",255,"           ","Battle Mage ",255,HoMeiSpriteBlock| dw HeroSYSXHoMei,HeroPortrait10x18SYSXHoMei,HeroButton20x11SYSXHoMei,HeroPortrait16x30SYSXHoMei | db 25 | db 053 |4921HeroAddressesPriestessKi: db "Priestess Ki",255,"     ","Scholar     ",255,PriestessKiSpriteBlock| dw HeroSYSXPriestessKi,HeroPortrait10x18SYSXPriestessKi,HeroButton20x11SYSXPriestessKi,HeroPortrait16x30SYSXPriestessKi | db 28 | db 054 |4922HeroAddressesMeiHong: db "Mei Hong",255,"         ","Necromancer ",255,MeiHongSpriteBlock| dw HeroSYSXMeiHong,HeroPortrait10x18SYSXMeiHong,HeroButton20x11SYSXMeiHong,HeroPortrait16x30SYSXMeiHong | db 31 | db 055 |4923HeroAddressesPrinceGilgamesh: db "Prince Gilgamesh",255," ","Knight      ",255,PrinceGilgameshSpriteBlock| dw HeroSYSXPrinceGilgamesh,HeroPortrait10x18SYSXPrinceGilgamesh,HeroButton20x11SYSXPrinceGilgamesh,HeroPortrait16x30SYSXPrinceGilgamesh | db 01 | db 056 |4925HeroAddressesRandomHajile: db "Random Hajile",255,"    ","Barbarian   ",255,RandomHajileSpriteBlock| dw HeroSYSXRandomHajile,HeroPortrait10x18SYSXRandomHajile,HeroButton20x11SYSXRandomHajile,HeroPortrait16x30SYSXRandomHajile | db 04 | db 057 |4926HeroAddressesBensonCunningham:db "Benson Cunningham",255, "Shieldbearer",255,BensonCunninghamSpriteBlock| dw HeroSYSXBensonCunningham,HeroPortrait10x18SYSXBensonCunningham,HeroButton20x11SYSXBensonCunningham,HeroPortrait16x30SYSXBensonCunningham | db 07 | db 058 |4927HeroAddressesJamieSeed: db "Jamie Seed",255,"       ","Overlord    ",255,JamieSeedSpriteBlock| dw HeroSYSXJamieSeed,HeroPortrait10x18SYSXJamieSeed,HeroButton20x11SYSXJamieSeed,HeroPortrait16x30SYSXJamieSeed | db 10 | db 059 |4928HeroAddressesArmoredSnatcher: db "Armored Snatcher",255," ","Alchemist   ",255,ArmoredSnatcherSpriteBlock| dw HeroSYSXArmoredSnatcher,HeroPortrait10x18SYSXArmoredSnatcher,HeroButton20x11SYSXArmoredSnatcher,HeroPortrait16x30SYSXArmoredSnatcher | db 13 | db 060 |4929HeroAddressesDruid: db "Druid",255,"            ","Sage        ",255,DruidSpriteBlock| dw HeroSYSXDruid,HeroPortrait10x18SYSXDruid,HeroButton20x11SYSXDruid,HeroPortrait16x30SYSXDruid | db 16 | db 061 |4930HeroAddressesJeddaChef: db "Jedda Chef",255,"       ","Ranger      ",255,JeddaChefSpriteBlock| dw HeroSYSXJeddaChef,HeroPortrait10x18SYSXJeddaChef,HeroButton20x11SYSXJeddaChef,HeroPortrait16x30SYSXJeddaChef | db 19 | db 062 |4931HeroAddressesMomotaru: db "Momotaru",255,"         ","Wizzard     ",255,MomotaruSpriteBlock| dw HeroSYSXMomotaru,HeroPortrait10x18SYSXMomotaru,HeroButton20x11SYSXMomotaru,HeroPortrait16x30SYSXMomotaru | db 22 | db 063 |4932HeroAddressesLuka: db "Luka",255,"             ","Battle Mage ",255,LukaSpriteBlock| dw HeroSYSXLuka,HeroPortrait10x18SYSXLuka,HeroButton20x11SYSXLuka,HeroPortrait16x30SYSXLuka | db 25 | db 064 |4934HeroAddressesHeiwaAndButako: db "Heiwa and Butako",255," ","Scholar     ",255,HeiwaAndButakoSpriteBlock| dw HeroSYSXHeiwaAndButako,HeroPortrait10x18SYSXHeiwaAndButako,HeroButton20x11SYSXHeiwaAndButako,HeroPortrait16x30SYSXHeiwaAndButako | db 28 | db 065 |4935HeroAddressesAce: db "Ace",255,"              ","Necromancer ",255,AceSpriteBlock| dw HeroSYSXAce,HeroPortrait10x18SYSXAce,HeroButton20x11SYSXAce,HeroPortrait16x30SYSXAce | db 31 | db 066 |4936HeroAddressesSpaceExplorer01: db "Space Explorer 01",255, "Knight      ",255,SpaceExplorer01SpriteBlock| dw HeroSYSXSpaceExplorer01,HeroPortrait10x18SYSXSpaceExplorer01,HeroButton20x11SYSXSpaceExplorer01,HeroPortrait16x30SYSXSpaceExplorer01 | db 01 | db 067 |4937HeroAddressesFern: db "Feru",255,"             ","Barbarian   ",255,FernSpriteBlock| dw HeroSYSXFern,HeroPortrait10x18SYSXFern,HeroButton20x11SYSXFern,HeroPortrait16x30SYSXFern | db 04 | db 068 |4938HeroAddressesHorn: db "Horn",255,"             ","Shieldbearer",255,HornSpriteBlock| dw HeroSYSXHorn,HeroPortrait10x18SYSXHorn,HeroButton20x11SYSXHorn,HeroPortrait16x30SYSXHorn | db 07 | db 069 |4939HeroAddressesPixie: db "Pixie",255,"            ","Overlord    ",255,PixieSpriteBlock| dw HeroSYSXPixie,HeroPortrait10x18SYSXPixie,HeroButton20x11SYSXPixie,HeroPortrait16x30SYSXPixie | db 10 | db 070 |4940HeroAddressesFreyaJerbain: db "Freya Jerbain",255,"    ","Alchemist   ",255,FreyaJerbainSpriteBlock| dw HeroSYSXFreyaJerbain,HeroPortrait10x18SYSXFreyaJerbain,HeroButton20x11SYSXFreyaJerbain,HeroPortrait16x30SYSXFreyaJerbain | db 13 | db 071 |4941HeroAddressesLanceBean: db "Lance Bean",255,"       ","Sage        ",255,LanceBeanSpriteBlock| dw HeroSYSXLanceBean,HeroPortrait10x18SYSXLanceBean,HeroButton20x11SYSXLanceBean,HeroPortrait16x30SYSXLanceBean | db 16 | db 072 |4943HeroAddressesThiharis: db "Thiharis",255,"         ","Ranger      ",255,ThiharisSpriteBlock| dw HeroSYSXThiharis,HeroPortrait10x18SYSXThiharis,HeroButton20x11SYSXThiharis,HeroPortrait16x30SYSXThiharis | db 19 | db 073 |4944HeroAddressesPampas: db "Pampas",255,"           ","Wizzard     ",255,PampasSpriteBlock| dw HeroSYSXPampas,HeroPortrait10x18SYSXPampas,HeroButton20x11SYSXPampas,HeroPortrait16x30SYSXPampas | db 22 | db 074 |4945HeroAddressesSelene: db "Selene",255,"           ","Battle Mage ",255,SeleneSpriteBlock| dw HeroSYSXSelene,HeroPortrait10x18SYSXSelene,HeroButton20x11SYSXSelene,HeroPortrait16x30SYSXSelene | db 25 | db 075 |4946HeroAddressesSkooter: db "Skooter",255,"          ","Scholar     ",255,SkooterSpriteBlock| dw HeroSYSXSkooter,HeroPortrait10x18SYSXSkooter,HeroButton20x11SYSXSkooter,HeroPortrait16x30SYSXSkooter | db 28 | db 076 |4948HeroSYSXAdol: equ $4000+(000*128)+((64+000)/2)-128 4949HeroSYSXGoemon1: equ $4000+(000*128)+((64+128)/2)-128 4950HeroSYSXPixy: equ $4000+(032*128)+((64+000)/2)-128 4951HeroSYSXDrasle1: equ $4000+(032*128)+((64+128)/2)-128 4952HeroSYSXLatok: equ $4000+(064*128)+((64+000)/2)-128 4953HeroSYSXDrasle2: equ $4000+(064*128)+((64+128)/2)-128 4954HeroSYSXSnake1: equ $4000+(096*128)+((64+000)/2)-128 4955HeroSYSXDrasle3: equ $4000+(096*128)+((64+128)/2)-128 4956HeroSYSXSnake2: equ $4000+(000*128)+((64+000)/2)-128 4957HeroSYSXDrasle4: equ $4000+(000*128)+((64+128)/2)-128 4958HeroSYSXAshguine: equ $4000+(032*128)+((64+000)/2)-128 4959HeroSYSXUndeadline1: equ $4000+(032*128)+((64+128)/2)-128 4960HeroSYSXPsychoWorld: equ $4000+(064*128)+((64+000)/2)-128 4961HeroSYSXUndeadline2: equ $4000+(064*128)+((64+128)/2)-128 4962HeroSYSXGoemon2: equ $4000+(096*128)+((64+000)/2)-128 4963HeroSYSXUndeadline3: equ $4000+(096*128)+((64+128)/2)-128 4965HeroSYSXFray: equ $4000+(000*128)+((64+000)/2)-128 4966HeroSYSXBlackColor: equ $4000+(000*128)+((64+128)/2)-128 4967HeroSYSXWit: equ $4000+(032*128)+((64+000)/2)-128 4968HeroSYSXMitchell: equ $4000+(032*128)+((64+128)/2)-128 4969HeroSYSXJanJackGibson:equ $4000+(064*128)+((64+000)/2)-128 4970HeroSYSXGillianSeed: equ $4000+(064*128)+((64+128)/2)-128 4971HeroSYSXSnatcher: equ $4000+(096*128)+((64+000)/2)-128 4972HeroSYSXGolvellius: equ $4000+(096*128)+((64+128)/2)-128 4973HeroSYSXBillRizer: equ $4000+(000*128)+((64+000)/2)-128 4974HeroSYSXPochi: equ $4000+(000*128)+((64+128)/2)-128 4975HeroSYSXGreyFox: equ $4000+(032*128)+((64+000)/2)-128 4976HeroSYSXTrevorBelmont:equ $4000+(032*128)+((64+128)/2)-128 4977HeroSYSXBigBoss: equ $4000+(064*128)+((64+000)/2)-128 4978HeroSYSXSimonBelmont: equ $4000+(064*128)+((64+128)/2)-128 4979HeroSYSXDrPettrovich: equ $4000+(096*128)+((64+000)/2)-128 4980HeroSYSXRichterBelmont:equ $4000+(096*128)+((64+128)/2)-128 4982HeroSYSXUltrabox: equ $4000+(000*128)+((64+000)/2)-128 4983HeroSYSXLoganSerios: equ $4000+(000*128)+((64+128)/2)-128 4984HeroSYSXHollyWhite: equ $4000+(032*128)+((64+000)/2)-128 4985HeroSYSXMercies: equ $4000+(032*128)+((64+128)/2)-128 4986HeroSYSXNatashaRomanenko: equ $4000+(064*128)+((64+000)/2)-128 4987HeroSYSXRuth: equ $4000+(064*128)+((64+128)/2)-128 4988HeroSYSXGeera: equ $4000+(096*128)+((64+000)/2)-128 4989HeroSYSXYoungNoble: equ $4000+(096*128)+((64+128)/2)-128 4990HeroSYSXDawel: equ $4000+(000*128)+((64+000)/2)-128 4991HeroSYSXPocky: equ $4000+(000*128)+((64+128)/2)-128 4992HeroSYSXKelesisTheCook: equ $4000+(032*128)+((64+000)/2)-128 4993HeroSYSXLolo: equ $4000+(032*128)+((64+128)/2)-128 4994HeroSYSXPippols: equ $4000+(064*128)+((64+000)/2)-128 4995HeroSYSXRandar: equ $4000+(064*128)+((64+128)/2)-128 4996HeroSYSXCles: equ $4000+(096*128)+((64+000)/2)-128 4997HeroSYSXLuice: equ $4000+(096*128)+((64+128)/2)-128 4999HeroSYSXDick: equ $4000+(000*128)+((64+000)/2)-128 5000HeroSYSXAphrodite: equ $4000+(000*128)+((64+128)/2)-128 5001HeroSYSXTienRen: equ $4000+(032*128)+((64+000)/2)-128 5002HeroSYSXPopolon: equ $4000+(032*128)+((64+128)/2)-128 5003HeroSYSXHoMei: equ $4000+(064*128)+((64+000)/2)-128 5004HeroSYSXPriestessKi: equ $4000+(064*128)+((64+128)/2)-128 5005HeroSYSXMeiHong: equ $4000+(096*128)+((64+000)/2)-128 5006HeroSYSXPrinceGilgamesh: equ $4000+(096*128)+((64+128)/2)-128 5007HeroSYSXRandomHajile: equ $4000+(000*128)+((64+000)/2)-128 5008HeroSYSXBensonCunningham: equ $4000+(000*128)+((64+128)/2)-128 5009HeroSYSXJamieSeed: equ $4000+(032*128)+((64+000)/2)-128 5010HeroSYSXArmoredSnatcher: equ $4000+(032*128)+((64+128)/2)-128 5011HeroSYSXDruid: equ $4000+(064*128)+((64+000)/2)-128 5012HeroSYSXMomotaru: equ $4000+(064*128)+((64+128)/2)-128 5013HeroSYSXLuka: equ $4000+(096*128)+((64+000)/2)-128 5014HeroSYSXHeiwaAndButako: equ $4000+(096*128)+((64+128)/2)-128 5016HeroSYSXAce: equ $4000+(000*128)+((64+000)/2)-128 5017HeroSYSXSpaceExplorer01: equ $4000+(000*128)+((64+128)/2)-128 5018HeroSYSXFern: equ $4000+(032*128)+((64+000)/2)-128 5019HeroSYSXHorn: equ $4000+(032*128)+((64+128)/2)-128 5020HeroSYSXPixie: equ $4000+(064*128)+((64+000)/2)-128 5021HeroSYSXFreyaJerbain: equ $4000+(064*128)+((64+128)/2)-128 5022HeroSYSXLanceBean: equ $4000+(096*128)+((64+000)/2)-128 5023HeroSYSXThiharis: equ $4000+(096*128)+((64+128)/2)-128 5024HeroSYSXPampas: equ $4000+(000*128)+((64+000)/2)-128 5025HeroSYSXSelene: equ $4000+(000*128)+((64+128)/2)-128 5026HeroSYSXSkooter: equ $4000+(032*128)+((64+000)/2)-128 5027HeroSYSXJeddaChef: equ $4000+(032*128)+((64+128)/2)-128 5033505350725091510251155116HeroPortrait16x30SYSXAdol: equ $8000+(000*128)+(000/2)-128 5117HeroPortrait16x30SYSXGoemon1: equ $8000+(000*128)+(016/2)-128 5118HeroPortrait16x30SYSXPixy: equ $8000+(000*128)+(032/2)-128 5119HeroPortrait16x30SYSXDrasle1: equ $8000+(000*128)+(048/2)-128 5120HeroPortrait16x30SYSXLatok: equ $8000+(000*128)+(064/2)-128 5121HeroPortrait16x30SYSXDrasle2: equ $8000+(000*128)+(080/2)-128 5122HeroPortrait16x30SYSXSnake1: equ $8000+(000*128)+(096/2)-128 5123HeroPortrait16x30SYSXDrasle3: equ $8000+(000*128)+(112/2)-128 5124HeroPortrait16x30SYSXSnake2: equ $8000+(000*128)+(128/2)-128 5125HeroPortrait16x30SYSXDrasle4: equ $8000+(000*128)+(144/2)-128 5126HeroPortrait16x30SYSXAshguine: equ $8000+(000*128)+(160/2)-128 5127HeroPortrait16x30SYSXUndeadline1: equ $8000+(000*128)+(176/2)-128 5128HeroPortrait16x30SYSXPsychoWorld: equ $8000+(000*128)+(192/2)-128 5129HeroPortrait16x30SYSXUndeadline2: equ $8000+(000*128)+(208/2)-128 5130HeroPortrait16x30SYSXGoemon2: equ $8000+(000*128)+(224/2)-128 5131HeroPortrait16x30SYSXUndeadline3: equ $8000+(000*128)+(240/2)-128 5133HeroPortrait16x30SYSXFray: equ $8000+(030*128)+(000/2)-128 5134HeroPortrait16x30SYSXBlackColor: equ $8000+(030*128)+(016/2)-128 5135HeroPortrait16x30SYSXWit: equ $8000+(030*128)+(032/2)-128 5136HeroPortrait16x30SYSXMitchell: equ $8000+(030*128)+(048/2)-128 5137HeroPortrait16x30SYSXJanJackGibson:equ $8000+(030*128)+(064/2)-128 5138HeroPortrait16x30SYSXGillianSeed: equ $8000+(030*128)+(080/2)-128 5139HeroPortrait16x30SYSXSnatcher: equ $8000+(030*128)+(096/2)-128 5140HeroPortrait16x30SYSXGolvellius: equ $8000+(030*128)+(112/2)-128 5141HeroPortrait16x30SYSXBillRizer: equ $8000+(030*128)+(128/2)-128 5142HeroPortrait16x30SYSXPochi: equ $8000+(030*128)+(144/2)-128 5143HeroPortrait16x30SYSXGreyFox: equ $8000+(030*128)+(160/2)-128 5144HeroPortrait16x30SYSXTrevorBelmont:equ $8000+(030*128)+(176/2)-128 5145HeroPortrait16x30SYSXBigBoss: equ $8000+(030*128)+(192/2)-128 5146HeroPortrait16x30SYSXSimonBelmont: equ $8000+(030*128)+(208/2)-128 5147HeroPortrait16x30SYSXDrPettrovich: equ $8000+(030*128)+(224/2)-128 5148HeroPortrait16x30SYSXRichterBelmont:equ $8000+(030*128)+(240/2)-128 5150HeroPortrait16x30SYSXUltrabox: equ $8000+(060*128)+(000/2)-128 5151HeroPortrait16x30SYSXLoganSerios: equ $8000+(060*128)+(016/2)-128 5152HeroPortrait16x30SYSXHollyWhite: equ $8000+(060*128)+(032/2)-128 5153HeroPortrait16x30SYSXMercies: equ $8000+(060*128)+(048/2)-128 5154HeroPortrait16x30SYSXNatashaRomanenko:equ $8000+(060*128)+(064/2)-128 5155HeroPortrait16x30SYSXRuth: equ $8000+(060*128)+(080/2)-128 5156HeroPortrait16x30SYSXGeera: equ $8000+(060*128)+(096/2)-128 5157HeroPortrait16x30SYSXyoungNoble: equ $8000+(060*128)+(112/2)-128 5158HeroPortrait16x30SYSXDawel: equ $8000+(060*128)+(128/2)-128 5159HeroPortrait16x30SYSXPocky: equ $8000+(060*128)+(144/2)-128 5160HeroPortrait16x30SYSXKelesisTheCook:equ $8000+(060*128)+(160/2)-128 5161HeroPortrait16x30SYSXLolo: equ $8000+(060*128)+(176/2)-128 5162HeroPortrait16x30SYSXPippols: equ $8000+(060*128)+(192/2)-128 5163HeroPortrait16x30SYSXRandar: equ $8000+(060*128)+(208/2)-128 5164HeroPortrait16x30SYSXCles: equ $8000+(060*128)+(224/2)-128 5165HeroPortrait16x30SYSXLuice: equ $8000+(060*128)+(240/2)-128 5167HeroPortrait16x30SYSXDick: equ $8000+(090*128)+(000/2)-128 5168HeroPortrait16x30SYSXAphrodite: equ $8000+(090*128)+(016/2)-128 5169HeroPortrait16x30SYSXTienRen: equ $8000+(090*128)+(032/2)-128 5170HeroPortrait16x30SYSXPopolon: equ $8000+(090*128)+(048/2)-128 5171HeroPortrait16x30SYSXHoMei: equ $8000+(090*128)+(064/2)-128 5172HeroPortrait16x30SYSXPriestessKi: equ $8000+(090*128)+(080/2)-128 5173HeroPortrait16x30SYSXMeiHong: equ $8000+(090*128)+(096/2)-128 5174HeroPortrait16x30SYSXPrinceGilgamesh: equ $8000+(090*128)+(112/2)-128 5175HeroPortrait16x30SYSXRandomHajile: equ $8000+(090*128)+(128/2)-128 5176HeroPortrait16x30SYSXBensonCunningham: equ $8000+(090*128)+(144/2)-128 5177HeroPortrait16x30SYSXJamieSeed: equ $8000+(090*128)+(160/2)-128 5178HeroPortrait16x30SYSXArmoredSnatcher: equ $8000+(090*128)+(176/2)-128 5179HeroPortrait16x30SYSXDruid: equ $8000+(090*128)+(192/2)-128 5181HeroPortrait16x30SYSXMomotaru: equ $8000+(090*128)+(208/2)-128 5182HeroPortrait16x30SYSXLuka: equ $8000+(090*128)+(224/2)-128 5183HeroPortrait16x30SYSXHeiwaAndButako: equ $8000+(090*128)+(240/2)-128 5184HeroPortrait16x30SYSXAce: equ $8000+(120*128)+(000/2)-128 5185HeroPortrait16x30SYSXSpaceExplorer01: equ $8000+(120*128)+(016/2)-128 5186HeroPortrait16x30SYSXFern: equ $8000+(120*128)+(032/2)-128 5187HeroPortrait16x30SYSXHorn: equ $8000+(120*128)+(048/2)-128 5188HeroPortrait16x30SYSXPixie: equ $8000+(120*128)+(064/2)-128 5189HeroPortrait16x30SYSXFreyaJerbain: equ $8000+(120*128)+(080/2)-128 5190HeroPortrait16x30SYSXLanceBean: equ $8000+(120*128)+(096/2)-128 5191HeroPortrait16x30SYSXThiharis: equ $8000+(120*128)+(112/2)-128 5192HeroPortrait16x30SYSXPampas: equ $8000+(120*128)+(128/2)-128 5193HeroPortrait16x30SYSXSelene: equ $8000+(120*128)+(144/2)-128 5194HeroPortrait16x30SYSXSkooter: equ $8000+(120*128)+(160/2)-128 5195HeroPortrait16x30SYSXJeddaChef: equ $8000+(120*128)+(176/2)-128 5197Difficulty: ds 1 5198ScenarioPage: ds 15199SaveGameSelected: ds 1 5200LitScenarioButtonInWhichPage?: ds 15201AmountOfMapsVisibleInCurrentPage: ds 15202PlayerWhoLostAHeroInBattle?: ds 15203PlayerLostHeroInBattle?: db 05205AmountOfCampaignsFinished: db 05207AmountOfMapsUnlocked: 5208if promo?5209db 35210else5211db 305212endif5213QuickTipsNumber: db StartOfGameQuickTips-25215ds 400 5220endenginepage3:5221dephase5222enginepage3length: Equ $-enginepage35224variables: org $c000+enginepage3length5225slot: 52265236.ram: rb 15237.page1rom: rb 15238.page2rom: rb 15239.page12rom: rb 15241memblocks:5242.1: rb 15243.2: rb 15245Replayer_Currentbank: equ $-1524752505253VDP_0: rb 85254VDP_8: rb 305256DayOfMonthEenheden: rb 15257DayOfMonthTientallen: rb 15258MonthEenheden: rb 15259MonthTientallen: rb 15260YearEenheden: rb 1 5261YearTientallen: rb 1 5262ComputerID: rb 1 5264TurboOn?: rb 1 5266engaddr: equ $03e5267loader.address: equ $80005268enginepage3addr: equ $c0005270sx: equ 05271sy: equ 25272spage: equ 35273dx: equ 45274dy: equ 65275dpage: equ 7 5276nx: equ 85277ny: equ 105278clr: equ 125279copydirection: equ 135280copytype: equ 145282framecounter: rb 15284Controls: rb 15285NewPrContr: rb 15286oldControls: rb 15288ControlsOnInterrupt: rb 15289NewPrControlsOnInterrupt: rb 15291BattleGraphicsBlock: rb 15293endenginepage3variables: equ $+enginepage3length5294org variables5296MSXHeroes.asm 605608engine:609phase engaddr610 engine.asm1LevelEngine:312 call HandleAIWorldMap13 call CheckBackToMainMenu 14 call DisplayDiskMenu 15 call DisplayHeroLevelUp 16 call DisplayScrollFound 17 call DisplayChestFound 18 call DisplayLearningStone 19 call DisplaySpireOfWisdom 20 call DisplayGuardTowerReward 21 call DisplayStartOfTurnMessage 22 call DisplayEnemyStatsRightClick 23 call DisplayEnemyHeroStatsRightClick 24 call CheckEnterTradeMenuBetween2FriendlyHeroes25 call GoCheckEnterHeroOverviewMenu 27 call PopulateControls 28 call PopulateKeyMatrix 29 call scrollscreen 30 call MiniMapSquareIconInteraction31 call movehero 32 call SetHeroPoseInVram 33 call buildupscreen 34 call MoveMiniMapSquareIcon36 call CheckEnterCastle 38 ld ix,(plxcurrentheroAddress)39 ld a,(ix+HeroStatus)40 cp 25541 jr z,.EndHeroChecks 42 call SetHeroMaxMovementPoints 43 call CheckHeroLevelUp 44 call CheckHeroCollidesWithEnemyHero 45 call CheckHeroPicksUpItem46 call AnimateHeroes 47 call CheckEnterCombat48 .EndHeroChecks:49 call CheckHeroCollidesWithMonster 5153 call putbottomobjects54 call putbottomcastles55 call putbottomheroes 56 call puttopobjects57 call puttopheroes 58 call puttopcastles59 call putmovementstars61 call HandleHud 62 call CheckPlayerEliminated 6470 ld a,(framecounter)71 inc a72 ld (framecounter),a74 ld a,(PreviousVblankIntFlag)75 ld b,a77 ld hl,vblankintflag 78 ld a,(hl)79 ld (PreviousVblankIntFlag),a81 ld a,b 82 ld hl,vblankintflag 83 .checkflag:84 cp (hl)85 jr nc,.checkflag86 ld (hl),08889 ld a,(framecounter)90 cp 291 call z,SetScreenOn9397105 106109112 jp LevelEngine120138145152164168174 178 183185188194 202207228vblankintflag2: ds 1229PreviousVblankIntFlag: db 1230page1bank: ds 1231page2bank: ds 1232vblank:233 push bc234 push de235 push hl236 push ix237 push iy238 exx239 ex af,af'240 push af241 push bc242 push de243 push hl247255 256 ld a,(LockMiniMapOn?)257 or a258 jr z,.EndCheckSlowdown259264 ld a,(ControlsOnInterrupt)265 and %0000 1111266 jr z,.EndCheckSlowdown268 ld a,(vblankintflag2)269 inc a 270 ld (vblankintflag2),a 271 and 15272 jr nz,.skip273 .EndCheckSlowdown:274 276 call PopulateControlsOnInterrupt 277 call PopulateKeyMatrix 278 call MovePointer 279 call MiniMapSquareIconInteractionOnInterrupt280 .skip:282285 ld a,(memblocks.1) 286 push af287 ld a,(memblocks.2) 288 push af289 in a,($a8) 290 push af 292 if Music50PercentSpeed?293 ld a,(vblankintflag)294 bit 0,a295 call z,RePlayer_Tick 296 else297 call RePlayer_Tick 298 endif300 ld a,(slot.page1rom) 301 out ($a8),a303 ld a,1 304 out ($fe),a 306311 call checktriggermapscreen 313318 call checktriggerhud 320 ld a,2 321 out ($fe),a 323 ld a,(AreWeWritingToVram?)324 or a325 call z,setspritecharacter 327 ld a,(page1bank) 328 out ($fe),a 330 pop af331 out ($a8),a 332 pop af333 ld ($7000),a 334 pop af335 ld ($6000),a 336 337 ld a,(AreWeWritingToVram?)338 or a339 call z,putsprite 341 ld a,(vblankintflag)342 inc a 343 ld (vblankintflag),a 345 pop hl 346 pop de 347 pop bc 348 pop af 349 ex af,af' 350 exx351 pop iy 352 pop ix 353 pop hl 354 pop de 355 pop bc 356 pop af 357 ei358 ret360CurrentLineIntHeight: ds 1361CastleInterruptHandler:362 push af363 364 ld a,1 365 out ($99),a366 ld a,15+128367 out ($99),a368 in a,($99) 369 rrca370 jp c,LineintCastleScreen 371 372 xor a 373 out ($99),a374 ld a,15+128375 out ($99),a376 in a,($99) 377 rlca378 jp c,VblankCastleScreen379 380 pop af 381 ei382 ret384VblankCastleScreen:385 push hl386 push bc388 ld a,(CurrentLineIntHeight)389 cp FirstLineintHeightCastleMagicGuild390 jr z,.SkipSettingPaletteOnVblank392 ld hl,InGamePalette393 call SetPaletteOnInterrupt394 .SkipSettingPaletteOnVblank:396 pop bc397 pop hl398 jp vblank400LineintFlag: ds 1401LineintCastleScreen:402 push hl403 push bc405 ld a,(LineintFlag)406 inc a407 ld (LineintFlag),a409 ld a,(AreWeInTavern1OrRecruit2?)410 dec a411 ld a,(CurrentLineIntHeight)412 jr nz,.EndCheckTavern413 cp FirstLineintHeightCastleTavern414 jp z,.FirstLineIntCastleTavernScreen415 cp SecondLineintHeightCastleTavern416 jp z,.SecondLineIntCastleTavernScreen417 .EndCheckTavern:419 cp FirstLineintHeightCastleRecruit420 jr z,.FirstLineIntCastleRecruitScreen421 cp SecondLineintHeightCastleRecruit422 jr z,.SecondLineIntCastleRecruitScreen424 cp FirstLineintHeightCastleMagicGuild425 jr z,.FirstLineIntCastleMagicGuildScreen426 cp SecondLineintHeightCastleMagicGuild427 jr z,.SecondLineIntCastleMagicGuildScreen429 cp FirstLineintHeightCastleMarket430 jp z,.LineIntCastlemarketScreen431 cp SecondLineintHeightCastleMarket432 jp z,.LineIntCastlemarketScreen433 cp ThirdLineintHeightCastleMarket434 jp z,.LineIntCastlemarketScreen436 ld hl,CastleOverviewPalette437 call SetPaletteOnInterrupt439 pop bc440 pop hl442 pop af 443 ei444 ret 446 .SecondLineIntCastleRecruitScreen:447 ld a,2 448 out ($99),a449 ld a,15+128 450 out ($99),a451 452.Waitline: 453 in a,($99) 454 and %0010 0000 455 jr z,.Waitline456 457 ld hl,InGamePalette458 call SetPaletteOnInterrupt460 ld a,FirstLineintHeightCastleRecruit461 ld (CurrentLineIntHeight),a462 out ($99),a463 ld a,19+128 464 out ($99),a 466 pop bc467 pop hl469 pop af 470 ei471 ret 473 .FirstLineIntCastleRecruitScreen:474 ld hl,CastleOverviewPalette475 call SetPaletteOnInterrupt477 ld a,SecondLineintHeightCastleRecruit478 ld (CurrentLineIntHeight),a479 out ($99),a480 ld a,19+128 481 out ($99),a 483 pop bc484 pop hl486 pop af 487 ei488 ret 490 .FirstLineIntCastleMagicGuildScreen:491 ld hl,InGamePalette492 call SetPaletteOnInterrupt494 ld a,SecondLineintHeightCastleMagicGuild495 ld (CurrentLineIntHeight),a496 out ($99),a497 ld a,19+128 498 out ($99),a 500 pop bc501 pop hl503 pop af 504 ei505 ret 507 .SecondLineIntCastleMagicGuildScreen:508 ld hl,CastleOverviewPalette509 call SetPaletteOnInterrupt511 ld a,FirstLineintHeightCastleMagicGuild512 ld (CurrentLineIntHeight),a513 out ($99),a514 ld a,19+128 515 out ($99),a 517 pop bc518 pop hl520 pop af 521 ei522 ret 524 .LineIntCastlemarketScreen:525 ld hl,CastleOverviewPalette526 call SetPaletteOnInterrupt528 pop bc529 pop hl531 pop af 532 ei533 ret 535 .FirstLineIntCastleTavernScreen:536 ld hl,CastleOverviewPalette537 call SetPaletteOnInterrupt539 ld a,SecondLineintHeightCastleTavern540 ld (CurrentLineIntHeight),a541 out ($99),a542 ld a,19+128 543 out ($99),a 545 pop bc546 pop hl548 pop af 549 ei550 ret 552 .SecondLineIntCastleTavernScreen:553 ld hl,InGamePalette554 call SetPaletteOnInterrupt556 ld a,FirstLineintHeightCastleTavern557 ld (CurrentLineIntHeight),a558 out ($99),a559 ld a,19+128 560 out ($99),a 562 pop bc563 pop hl565 pop af 566 ei567 ret 569SetPaletteOnInterrupt:570 xor a571 out ($99),a572 ld a,16+128573 out ($99),a574 ld c,$9a575 outi | outi | outi | outi | outi | outi | outi | outi576 outi | outi | outi | outi | outi | outi | outi | outi577 outi | outi | outi | outi | outi | outi | outi | outi578 outi | outi | outi | outi | outi | outi | outi | outi579 ret581vblankintflag: db 0582583InterruptHandler:584 push af586 xor a 587 out ($99),a588 ld a,15+128589 out ($99),a590 in a,($99) 591 rlca592 jp c,vblank 593 594 pop af 595 ei596 ret598CheckBackToMainMenu:599 ld a,(BackToMainMenu?)600 or a601 ret z602 xor a603 ld (BackToMainMenu?),a605 jp InitiateGame607DisplayDiskMenu:608 ld a,(DiskMenuClicked?)609 dec a610 ret m611 ld (DiskMenuClicked?),a612 jp nz,DisableScrollScreen614 ld a,1615 ld (GameStatus),a 616 call ClearMapPage0AndMapPage1 618 ld hl,DisplayDiskMenuCOde619 call EnterSpecificRoutineInExtraRoutines621 ld a,3 622 ld (SetHeroArmyAndStatusInHud?),a623 ret625HandleAIWorldMap:626 call checkcurrentplayerhuman 627 ret nz628 629 ld hl,EndTurn630 jp EnterSpecificRoutineInCastleOverviewCode 631 ret633CheckPlayerEliminated:634 ld hl,CheckIfAPlayerGotEliminated635 jp EnterSpecificRoutineInExtraRoutines636 637EnterCombat?: db 0638CheckEnterCombat:639 ld a,(EnterCombat?)640 dec a641 ret m642 ld (EnterCombat?),a643 pop af 644 jp EnterCombat645 646AnimateHeroes:647 ld a,(movehero?)648 or a 649 ret nz651 ld a,(framecounter)652 and 3653 ret nz654 ld ix,(plxcurrentheroAddress) 655 ld e,(ix+HeroSpecificInfo+0) 656 ld d,(ix+HeroSpecificInfo+1)657 push de658 pop ix 659 ld a,(ix+HeroinfoSYSX+0) 660 xor 8661 ld (ix+HeroinfoSYSX+0),a 662 ret664DivideBCbyDE:665670Div16:671 ld hl,0672 ld a,b673 ld b,8674Div16_Loop1:675 rla676 adc hl,hl677 sbc hl,de678 jr nc,Div16_NoAdd1679 add hl,de680Div16_NoAdd1:681 djnz Div16_Loop1682 rla683 cpl684 ld b,a685 ld a,c686 ld c,b687 ld b,8688Div16_Loop2:689 rla690 adc hl,hl691 sbc hl,de692 jr nc,Div16_NoAdd2693 add hl,de694Div16_NoAdd2:695 djnz Div16_Loop2696 rla697 cpl698 ld b,c699 ld c,a700 ret702MultiplyHlWithDE:703 push hl704 pop bc705710Mult16:711 ld a,b712 ld b,16713Mult16_Loop:714 add hl,hl715 sla c716 rla717 jr nc,Mult16_NoAdd718 add hl,de719Mult16_NoAdd:720 djnz Mult16_Loop721 ret723EnemyHeroThatPointerIsOn: ds 2724DisplayEnemyHeroStatsRightClick?: db 0725DisplayEnemyHeroStatsRightClick:726 ld a,(DisplayEnemyHeroStatsRightClick?)727 dec a728 ret m729 ld (DisplayEnemyHeroStatsRightClick?),a730 jp nz,DisableScrollScreen 732 call ClearMapPage0AndMapPage1 734 ld a,1735 ld (GameStatus),a 737 ld hl,DisplayEnemyHeroStatsWindowCode738 jp EnterSpecificRoutineHeroOverviewCode740DisplayEnemyStatsRightClick?: db 0741DisplayEnemyStatsRightClick:742 ld a,(DisplayEnemyStatsRightClick?)743 dec a744 ret m745 ld (DisplayEnemyStatsRightClick?),a746 jp nz,DisableScrollScreen 748 call ClearMapPage0AndMapPage1 749 ld hl,ShowEnemyStats750 ld a,(MonsterHerocollidedWithOnMap)751 cp 128752 jp nc,EnterSpecificRoutineInBattleCode754 ld hl,ShowItemStats755 jp EnterSpecificRoutineInExtraRoutines757758MiniMapSquareIconInteraction:759 ld a,(SetMiniMap?)760 dec a761 ret m762 ld (SetMiniMap?),a764 ld a,(spat+1) 765 sub 200766 ret c 767 ld b,a768 add a,a 769 add a,b 770 cp 117771 jr c,.EndCheckOverFlowX772 ld a,116773 .EndCheckOverFlowX:774 ld (mappointerx),a776 ld a,(spat+0) 777 sub 9778 jr nc,.notcarry779 xor a780 .notcarry:781 ld b,a782 add a,a 783 add a,b 784 cp 117785 jr c,.EndCheckOverFlowY786 ld a,116787 .EndCheckOverFlowY:788 ld (mappointery),a789 ret791SetMiniMap?: db 0792LockMiniMapOn?: db 0 793MiniMapSquareIconInteractionOnInterrupt:794 ld a,(GameStatus) 795 or a796 ret nz797802 ld a,(ControlsOnInterrupt)803 bit 4,a 804 jr z,.LockOff805 806 ld a,(spat+0) 807 cp 48808 jr c,.endCheckWithinYRange809 ld a,(LockMiniMapOn?)810 or a811 ret z813 ld a,48814 ld (spat+0),a 815 ld (spat+4),a 816 ld (spat+8),a 817 .endCheckWithinYRange:819 ld a,(spat+1) 820 cp 200821 jr nc,.endCheckWithinXRange822 ld a,(LockMiniMapOn?)823 or a824 ret z826 ld a,200827 ld (spat+1),a 828 ld (spat+5),a 829 ld (spat+9),a 830 .endCheckWithinXRange:832 ld a,1833 ld (LockMiniMapOn?),a834 ld (SetMiniMap?),a835 ret837 .LockOff:838 xor a839 ld (LockMiniMapOn?),a840 ret842846MoveMiniMapSquareIcon:847 ld a,(mappointery)848 ld e,a849 ld c,3850 call Div8851 add a,004852 ld (spat+60),a 854 ld a,(mappointerx)855 ld e,a856 ld c,3857 call Div8858 add a,196859 ld (spat+61),a 860 ret862867Div8:868 xor a869 ld b,8870Div8_Loop:871 rl e872 rla873 sub c874 jr nc,Div8_NoAdd875 add a,c876Div8_NoAdd:877 djnz Div8_Loop878 ld b,a879 ld a,e880 rla881 cpl882 ret884Backdrop:885 ld a,r886 .in:887 di888 out ($99),a889 ld a,7+128890 ei891 out ($99),a 892 ret896WhichHudButtonClicked?: db 0897checktriggerhud:898 ld a,(GameStatus) 899 or a900 ret nz902910 ld ix,GenericButtonTable3911 call CheckButtonInteractionControlsOnInt912 call CheckIfHeroButtonShouldRemainLit913 ret915918924925CheckButtonInteractionControlsOnInt:926 ld hl,ControlsOnInterrupt927 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeControlsOnOffInterrupt),hl928 ld hl,NewPrControlsOnInterrupt929 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeNewPrControlsOnOffInterrupt),hl930 jr CheckButtonMouseInteractionGenericButtonsInEngine932CheckButtonInteractionControlsNotOnInt:933 ld hl,Controls934 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeControlsOnOffInterrupt),hl935 ld hl,NewPrContr936 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeNewPrControlsOnOffInterrupt),hl937939 call CheckButtonMouseInteractionGenericButtonsInEngine940 ld a,0941 ld (WhichHudButtonClicked?),a 942 ret944CheckButtonMouseInteractionGenericButtonsInEngine:945 ld b,(ix+GenericButtonAmountOfButtons)946 ld de,GenericButtonTableLenghtPerButton948 .loop:949 call .check950 add ix,de951 djnz .loop952 ret953 954 .check:955 bit 7,(ix+GenericButtonStatus) 956 ret z 957 958 ld a,(spat+0) 959 cp (ix+GenericButtonYtop)960 jr c,.NotOverButton961 cp (ix+GenericButtonYbottom)962 jr nc,.NotOverButton963 ld a,(spat+1) 965 add a,06966 967 cp (ix+GenericButtonXleft)968 jr c,.NotOverButton969 cp (ix+GenericButtonXright)970 jr nc,.NotOverButton971 973978.SelfModifyingCodeControlsOnOffInterrupt: equ $+1979 ld a,(ControlsOnInterrupt)980 bit 4,a 981 jr nz,.MouseOverButtonAndSpacePressed982 bit 4,(ix+GenericButtonStatus) 983 jr nz,.MenuOptionSelected 984 .MouseHoverOverButton:986 987 bit 5,(ix+GenericButtonStatus) 988 ld (ix+GenericButtonStatus),%1010 0011989 ret nz991 push iy992 push bc993 ld bc,SFX_MouseOver994 call RePlayerSFX_PlayCh1_MouseAction995 pop bc996 pop iy997 ret999 .MouseOverButtonAndSpacePressed:1000 bit 4,(ix+GenericButtonStatus) 1001 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit1002.SelfModifyingCodeNewPrControlsOnOffInterrupt: equ $+11003 ld a,(NewPrControlsOnInterrupt)1004 bit 4,a 1005 jr z,.MouseHoverOverButton1007 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:1008 ld (ix+GenericButtonStatus),%1001 00111010 push iy1011 push bc1012 ld bc,SFX_MouseClick1013 call RePlayerSFX_PlayCh1_MouseAction1014 pop bc1015 pop iy1016 ret1017 1018 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:1019 ld (ix+GenericButtonStatus),%1001 00111020 ret1022 .NotOverButton:1023 bit 4,(ix+GenericButtonStatus) 1024 jr nz,.buttonIsStillLit1025 bit 5,(ix+GenericButtonStatus) 1026 ret z1027 .buttonIsStillLit:1028 ld (ix+GenericButtonStatus),%1100 00111029 ret1031 .MenuOptionSelected:1032 pop af 1033 ld (ix+GenericButtonStatus),%1010 00111034 scf 1035 1036 ld a,b1037 ld (WhichHudButtonClicked?),a 1038 ret1049SetTotalManaHero:10501055 ld de,ItemIntelligencePointsTable1056 ld hl,SetAdditionalStatFromInventoryItemsInHL 1057 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1058 .SetAdditionalStatFromInventoryItemsInHLDone:1059 ld e,(ix+HeroStatKnowledge)1060 ld d,01061 add hl,de 1063 add hl,hl 1064 push hl1065 pop de1066 add hl,hl 1067 add hl,hl 1068 add hl,de 1069 ld (ix+HeroTotalMana+0),l1070 ld (ix+HeroTotalMana+1),h1071 1072 ld a,022 1073 cp (ix+HeroSkills+0)1074 jr z,.HeroHasBasicIntelligence1075 cp (ix+HeroSkills+1)1076 jr z,.HeroHasBasicIntelligence1077 cp (ix+HeroSkills+2)1078 jr z,.HeroHasBasicIntelligence1079 cp (ix+HeroSkills+3)1080 jr z,.HeroHasBasicIntelligence1081 cp (ix+HeroSkills+4)1082 jr z,.HeroHasBasicIntelligence1083 cp (ix+HeroSkills+5)1084 jr z,.HeroHasBasicIntelligence1086 ld a,023 1087 cp (ix+HeroSkills+0)1088 jr z,.HeroHasAdvancedIntelligence1089 cp (ix+HeroSkills+1)1090 jr z,.HeroHasAdvancedIntelligence1091 cp (ix+HeroSkills+2)1092 jr z,.HeroHasAdvancedIntelligence1093 cp (ix+HeroSkills+3)1094 jr z,.HeroHasAdvancedIntelligence1095 cp (ix+HeroSkills+4)1096 jr z,.HeroHasAdvancedIntelligence1097 cp (ix+HeroSkills+5)1098 jr z,.HeroHasAdvancedIntelligence1100 ld a,024 1101 cp (ix+HeroSkills+0)1102 jr z,.HeroHasExpertIntelligence1103 cp (ix+HeroSkills+1)1104 jr z,.HeroHasExpertIntelligence1105 cp (ix+HeroSkills+2)1106 jr z,.HeroHasExpertIntelligence1107 cp (ix+HeroSkills+3)1108 jr z,.HeroHasExpertIntelligence1109 cp (ix+HeroSkills+4)1110 jr z,.HeroHasExpertIntelligence1111 cp (ix+HeroSkills+5)1112 jr z,.HeroHasExpertIntelligence1113 ret1115 1116 .HeroHasBasicIntelligence:1117 ld c,(ix+HeroTotalMana+0)1118 ld b,(ix+HeroTotalMana+1)1119 ld de,41120 call DivideBCbyDE 1121 ld l,(ix+HeroTotalMana+0)1122 ld h,(ix+HeroTotalMana+1)1123 add hl,bc1124 ld (ix+HeroTotalMana+0),l1125 ld (ix+HeroTotalMana+1),h1126 ret1128 1129 .HeroHasAdvancedIntelligence:1130 ld c,(ix+HeroTotalMana+0)1131 ld b,(ix+HeroTotalMana+1)1132 ld de,21133 call DivideBCbyDE 1134 ld l,(ix+HeroTotalMana+0)1135 ld h,(ix+HeroTotalMana+1)1136 add hl,bc1137 ld (ix+HeroTotalMana+0),l1138 ld (ix+HeroTotalMana+1),h1139 ret1141 1142 .HeroHasExpertIntelligence:1143 ld l,(ix+HeroTotalMana+0)1144 ld h,(ix+HeroTotalMana+1)1145 add hl,hl 1146 ld (ix+HeroTotalMana+0),l1147 ld (ix+HeroTotalMana+1),h1148 ret1150SetHeroMaxMovementPoints:1151 ld ix,(plxcurrentheroAddress)1152 .IxAlreadySet:1153 ld b,0 1154 call .CheckMovementSpeedBonusForLogistics1155 ld c,0 1156 call .CheckMovementSpeedBonusForPlanesWalkers1157 ld d,0 1158 call .CheckMovementSpeedBonusForGripfast1160 ld a,201161 add a,b1162 add a,c1163 add a,d1164 ld (ix+HeroTotalMove),a1165 ret1167 .CheckMovementSpeedBonusForPlanesWalkers:1168 ld a,(ix+HeroInventory+4) 1169 cp 022 1170 ret nz1171 ld c,3 1172 ret1174 .CheckMovementSpeedBonusForGripfast:1175 ld a,(ix+HeroInventory+5) 1176 cp 025 1177 ret nz1178 ld d,2 1179 ret1181 .CheckMovementSpeedBonusForLogistics:1182 ld a,(ix+HeroSkills+0)1183 call .CheckSkil1184 ld a,(ix+HeroSkills+1)1185 call .CheckSkil1186 ld a,(ix+HeroSkills+2)1187 call .CheckSkil1188 ld a,(ix+HeroSkills+3)1189 call .CheckSkil1190 ld a,(ix+HeroSkills+4)1191 call .CheckSkil1192 ld a,(ix+HeroSkills+5)1193 call .CheckSkil1194 ret1196 .CheckSkil:1197 cp 19 1198 jr z,.BasicLogisticsFound1199 cp 20 1200 jr z,.AdvancedLogisticsFound1201 cp 21 1202 jr z,.ExpertLogisticsFound1203 ret1205 .BasicLogisticsFound:1206 ld b,2 1207 ret1208 .AdvancedLogisticsFound:1209 ld b,4 1210 ret1211 .ExpertLogisticsFound:1212 ld b,6 1213 ret1215SetText: 1216 ld a,2121217 ld (PutLetter+sy),a 1218 ld a,(GameStatus) 1219 cp 31220 jr nz,.GoSetText1221 ld a,2501222 ld (PutLetter+sy),a 1223 .GoSetText:1224 1226 ld a,61227 ld (PutLetter+ny),a 1229 ld a,b1230 ld (PutLetter+dx),a 1231 ld (TextDX),a1232 ld a,c1233 ld (PutLetter+dy),a 1234 ld (TextAddresspointer),hl 12351241 ld a,(activepage) 1242.SelfModifyingCodeSetTextInCurrentPage: equ $+11243 xor 1 1244 ld (PutLetter+dPage),a 1246 ld de,-11247 ld (TextPointer),de 1248 .NextLetter:1249 ld de,(TextPointer)1250 inc de1251 ld (TextPointer),de 1253 ld hl,(TextAddresspointer)12551257 add hl,de1259 ld a,(hl) 1260 cp 255 1261 ret z1262 cp 254 1263 jp z,.NextLine1264 cp TextSpace 1265 jp z,.Space1266 cp TextPercentageSymbol 1267 jp z,.TextPercentageSymbol1268 cp TextPlusSymbol 1269 jp z,.TextPlusSymbol1270 cp TextMinusSymbol 1271 jp z,.TextMinusSymbol1272 cp TextApostrofeSymbol 1273 jp z,.TextApostrofeSymbol1274 cp TextColonSymbol 1275 jp z,.TextColonSymbol1276 cp TextSlashSymbol 1277 jp z,.TextSlashSymbol1278 cp TextQuestionMarkSymbol 1279 jp z,.TextQuestionMarkSymbol1280 cp TextCommaSymbol 1281 jp z,.TextCommaSymbol1282 cp TextDotSymbol 1283 jp z,.TextDotSymbol1284 cp TextOpeningParenthesisSymbol 1285 jp z,.TextOpeningParenthesisSymbol1286 cp TextClosingParenthesisSymbol 1287 jp z,.TextClosingParenthesisSymbol1289 cp TextNumber0+101290 jr c,.Number1292 sub $411293 ld hl,.TextCoordinateTable 1294 add a,a 1295 ld d,01296 ld e,a1298 add hl,de1299 1300 .GoPutLetter:1301 ld a,(hl) 1302 ld (PutLetter+sx),a 1303 inc hl1304 ld a,(hl) 1305 ld (PutLetter+nx),a 1307 ld hl,PutLetter1308 call DoCopy1310 ld hl,PutLetter+nx 1311 ld a,(PutLetter+dx) 1312 add a,(hl) 1313 inc a 1314 ld (PutLetter+dx),a 1315 1316 jp .NextLetter1318 .Number:1319 sub TextNumber0 1320 add a,a 1321 ld d,01322 ld e,a 1324 ld hl,.TextNumberSymbolsSXNX1325 add hl,de1326 jr .GoPutLetter1327 1328 .TextPercentageSymbol:1329 ld hl,.TextPercentageSymbolSXNX 1330 jr .GoPutLetter1332 .TextPlusSymbol:1333 ld hl,.TextPlusSymbolSXNX 1334 jr .GoPutLetter1336 .TextMinusSymbol:1337 ld hl,.TextMinusSymbolSXNX 1338 jr .GoPutLetter1340 .TextApostrofeSymbol:1341 ld hl,.TextApostrofeSymbolSXNX 1342 jr .GoPutLetter1344 .TextColonSymbol:1345 ld hl,.TextColonSymbolSXNX 1346 jr .GoPutLetter1348 .TextSlashSymbol:1349 ld hl,.TextSlashSymbolSXNX 1350 jr .GoPutLetter1352 .TextQuestionMarkSymbol:1353 ld hl,.TextQuestionMarkSymbolSXNX 1354 jr .GoPutLetter1356 .TextCommaSymbol:1357 ld hl,.TextCommaSymbolSXNX 1358 jr .GoPutLetter1360 .TextDotSymbol:1361 ld hl,.TextDotSymbolSXNX 1362 jr .GoPutLetter1364 .TextOpeningParenthesisSymbol:1365 ld hl,.TextOpeningParenthesisSymbolSXNX 1366 jr .GoPutLetter1368 .TextClosingParenthesisSymbol:1369 ld hl,.TextClosingParenthesisSymbolSXNX 1370 jr .GoPutLetter1372 .Space:1373 ld a,(PutLetter+dx) 1374 add a,51375 ld (PutLetter+dx),a 1376 jp .NextLetter1378 .NextLine:1379 ld a,(PutLetter+dy) 1380 add a,71381 ld (PutLetter+dy),a 1382 ld a,(TextDX)1383 ld (PutLetter+dx),a 1384 jp .NextLetter13861387.TextNumberSymbolsSXNX: db 171,4, 175,2, 177,4, 181,3, 184,3, 187,3, 191,3, 195,4, 199,3, 203,3, 158,4 1388.TextSlashSymbolSXNX: db 158+49,4 1389.TextPercentageSymbolSXNX: db 162+49,4 1390.TextPlusSymbolSXNX: db 166+49,5 1391.TextMinusSymbolSXNX: db 169+49,5 1392.TextApostrofeSymbolSXNX: db 053,1 1393.TextColonSymbolSXNX: db 008,1 1394.TextQuestionMarkSymbolSXNX: db 223,3 1395.TextCommaSymbolSXNX: db 226,2 1396.TextDotSymbolSXNX: db 207,1 1397.TextOpeningParenthesisSymbolSXNX: db 133,2 1398.TextClosingParenthesisSymbolSXNX: db 134,2 14001401.TextCoordinateTable: db 084,3, 087,3, 090,3, 093,3, 096,3, 099,3, 102,4, 107,3, 110,3, 113,3, 116,4, 120,3, 123,5, 129,4, 133,3, 136,3, 139,3, 142,3, 145,3, 148,3, 151,3, 154,3, 157,5, 162,3, 165,3, 168,314021403ds 121404.TextCoordinateTableSmall: db 000,4, 004,3, 007,3, 010,3, 013,3, 016,2, 019,3, 022,3, 025,1, 026,2, 028,3, 032,1, 033,5, 038,3, 042,3, 046,3, 050,3, 054,2, 057,3, 060,2, 062,3, 065,3, 068,5, 073,3, 076,3, 080,41406SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0:14071408 ld de,10001409 call CompareHLwithDE1410 jr c,.NumberIsSmallerThan10001411 1413 add hl,de1414 ld de,100001415 call CompareHLwithDE1416 jr c,.NumberIsSmallerThan100001417 1419 add hl,de1420 push bc1421 push iy1422 call SetNumber16BitCastle.ConvertToDecimal16bit1423 ld iy,TextNumber1424 ld (iy+2),"k"1425 ld (iy+3),2551426 pop iy1427 pop bc1428 ld hl,TextNumber1429 jp SetText1431 .NumberIsSmallerThan10000:1432 add hl,de1433 push bc1434 push iy1435 call SetNumber16BitCastle.ConvertToDecimal16bit1437 ld iy,TextNumber1438 ld a,(iy+1)1439 ld (iy+2),a1440 ld (iy+1),"."1441 ld (iy+3),"k"1442 ld (iy+4),2551444 pop iy1445 pop bc1447 ld hl,TextNumber1448 jp SetText1450 .NumberIsSmallerThan1000:1451 add hl,de1452 1453SetNumber16BitCastleSkipIfAmountIs0:1454 ld a,h1455 cp l1456 ret z1458SetNumber16BitCastle: 1459 push bc1460 push iy1461 call .ConvertToDecimal16bit1462 pop iy1463 pop bc1465 ld hl,TextNumber1466 jp SetText1468 .ConvertToDecimal16bit:1469 ld iy,TextNumber1470 ld e,0 1472 .Check10000Folds:1473 ld d,$30 1475 .Loop10000Fold:1476 or a1477 ld bc,100001478 sbc hl,bc 1479 jr c,.Set10000Fold1480 inc d1481 jr .Loop10000Fold1483 .Set10000Fold:1484 ld a,d1485 cp $301486 jr z,.EndSet10000Fold 1487 ld e,1 1488 ld (iy),d 1489 inc iy1490 .EndSet10000Fold:1492 add hl,bc1494 .Check1000Folds:1495 ld d,$30 1497 .Loop1000Fold:1498 or a1499 ld bc,10001500 sbc hl,bc 1501 jr c,.Set1000Fold1502 inc d1503 jr .Loop1000Fold1505 .Set1000Fold:1506 bit 0,e1507 jr nz,.DoSet1000Fold 1508 ld a,d1509 cp $301510 jr z,.EndSet1000Fold 1511 ld e,1 1512 .DoSet1000Fold:1513 ld (iy),d 1514 inc iy1515 .EndSet1000Fold:1517 add hl,bc1519 .Check100Folds:1520 ld d,$30 1522 .Loop100Fold:1523 or a1524 ld bc,1001525 sbc hl,bc 1526 jr c,.Set100Fold1527 inc d1528 jr .Loop100Fold1530 .Set100Fold:1531 bit 0,e1532 jr nz,.DoSet100Fold 1533 ld a,d1534 cp $301535 jr nz,.DoSet100Fold 1537 ld a,(PutLetter+dx) 1538 add a,41539 ld (PutLetter+dx),a 1542 jr .EndSet100Fold 1544 .DoSet100Fold:1545 ld e,1 1546 ld (iy),d 1547 inc iy1548 .EndSet100Fold:1550 add hl,bc1552 .Check10Folds:1553 ld d,$30 1555 .Loop10Fold:1556 or a1557 ld bc,101558 sbc hl,bc 1559 jr c,.Set10Fold1560 inc d1561 jr .Loop10Fold1563 .Set10Fold:1564 bit 0,e1565 jr nz,.DoSet10Fold1566 ld a,d1567 cp $301568 jr nz,.DoSet10Fold 1570 ld a,(PutLetter+dx) 1571 add a,31572 ld (PutLetter+dx),a 1574 jr .EndSet10Fold 1576 .DoSet10Fold:1577 ld e,1 1578 ld (iy),d 1579 inc iy1580 .EndSet10Fold:1582 .Check1Fold:1583 ld bc,10 + $301584 add hl,bc1585 15861587 ld (iy),l 1588 ld (iy+1),255 1589 ret1599HeroXPTable:1600 dw 01000 1601 dw 02000 1602 dw 03200 1603 dw 04600 1604 dw 06200 1605 dw 08000 1606 dw 10000 1607 dw 12200 1608 dw 14700 1609 dw 17500 1610 dw 20600 1611 dw 24320 1612 dw 28784 1613 dw 34140 1614 dw 40567 1615 dw 48279 1616 dw 57533 1617 dw 65535 1619CheckHeroLevelUp:1620 ld a,(HeroLevelUp?) 1621 or a1622 ret nz1623 1624 ld ix,(plxcurrentheroAddress)1625 ld a,(ix+HeroLevel) 1626 cp 181627 ret z1629 add a,a1630 ld d,01631 ld e,a1632 ld hl,HeroXPTable-21633 add hl,de1634 ld e,(hl)1635 inc hl1636 ld d,(hl) 1637 1638 ld l,(ix+HeroXp+0) 1639 ld h,(ix+HeroXp+1)1640 or a1641 sbc hl,de1642 ret c1644 inc (ix+HeroLevel) 1645 ld a,31646 ld (HeroLevelUp?),a 1647 ret1649UpdateHUd:1650 ld hl,UpdateHudCode1651 jp EnterSpecificRoutineInCastleOverviewCode1653HeroLevelUp?: db 01654DisplayHeroLevelUp:1655 ld a,(HeroLevelUp?)1656 dec a1657 ret m1658 ld (HeroLevelUp?),a1659 jp nz,DisableScrollScreen1661 ld a,11662 ld (GameStatus),a 1663 call ClearMapPage0AndMapPage1 1665 ld bc,SFX_Levelup1666 call RePlayerSFX_PlayCh1 1667 1668 ld hl,HeroLevelUpCode1669 jp EnterSpecificRoutineInCastleOverviewCode1671DisplayGuardTowerReward?: db 01672GuardTowerReward: ds 21673DisplayGuardTowerReward:1674 ld a,(DisplayGuardTowerReward?)1675 dec a1676 ret m1677 ld (DisplayGuardTowerReward?),a1678 jp nz,DisableScrollScreen1680 ld a,11681 ld (GameStatus),a 1682 call ClearMapPage0AndMapPage1 1684 ld hl,DisplayGuardTowerRewardCOde16851686 call EnterSpecificRoutineInExtraRoutines1687 jp UpdateHUd1689DisplaySpireOfWisdom?: db 01690DisplaySpireOfWisdom:1691 ld a,(DisplaySpireOfWisdom?)1692 dec a1693 ret m1694 ld (DisplaySpireOfWisdom?),a1695 jp nz,DisableScrollScreen1697 ld a,11698 ld (GameStatus),a 1699 call ClearMapPage0AndMapPage1 1701 ld bc,SFX_SpireOfWisdom1702 call RePlayerSFX_PlayCh1 1704 ld hl,DisplaySpireOfWisdomCOde1705 call EnterSpecificRoutineInExtraRoutines1706 jp UpdateHUd1708DisplayLearningStone?: db 01709DisplayLearningStone:1710 ld a,(DisplayLearningStone?)1711 dec a1712 ret m1713 ld (DisplayLearningStone?),a1714 jp nz,DisableScrollScreen1716 ld a,11717 ld (GameStatus),a 1718 call ClearMapPage0AndMapPage1 1720 ld bc,SFX_LearningStone1721 call RePlayerSFX_PlayCh11722 1723 ld hl,DisplayLearningStoneCOde1724 jp EnterSpecificRoutineInCastleOverviewCode1725 1726ChestFound?: db 01727BigChest?: ds 11728DisplayChestFound:1729 ld a,(ChestFound?)1730 dec a1731 ret m1732 ld (ChestFound?),a1733 jp nz,DisableScrollScreen1735 ld a,11736 ld (GameStatus),a 1737 call ClearMapPage0AndMapPage1 1739 ld bc,SFX_ChestFound1740 call RePlayerSFX_PlayCh1 1742 ld hl,DisplayChestCode1743 jp EnterSpecificRoutineInCastleOverviewCode1745ScrollFound?: db 01746SpellScrollInventoryNumber: ds 1 1747DisplayScrollFound:1748 ld a,(ScrollFound?)1749 dec a1750 ret m1751 ld (ScrollFound?),a1752 jp nz,DisableScrollScreen1754 ld a,11755 ld (GameStatus),a 1756 call ClearMapPage0AndMapPage1 1758 ld hl,DisplayScrollCode1759 jp EnterSpecificRoutineInCastleOverviewCode1761CastleCodeSetAdditionalStatFromInventoryItemsInHL:1762 jp EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1764DisplayStartOfTurnMessage?: db 31765DisplayQuickTips?: db 11766DisplayStartOfTurnMessage:1767 if StartOfTurnMessageOn?1768 else1769 ret1770 endif1772 ld a,(DisplayStartOfTurnMessage?)1773 dec a1774 ret m1775 ld (DisplayStartOfTurnMessage?),a1776 ret nz1778 ld a,11779 ld (GameStatus),a 1780 call ClearMapPage0AndMapPage1 1782 ld hl,DisplayStartOfTurnMessageCode1783 call EnterSpecificRoutineInCastleOverviewCode1785 ld a,(DisplayQuickTips?)1786 or a1787 ret z1789 ld a,11790 ld (GameStatus),a 1792 ld hl,DisplayQuickTipsCode1793 jp EnterSpecificRoutineInCastleOverviewCode1795DisableScrollScreen:1796 ld a,11797 ld (DisableScrollScreen?),a1798 ret1799EnableScrollScreen:1800 xor a1801 ld (DisableScrollScreen?),a1802 ld (freezecontrols?),a18031804 ld (MenuOptionSelected?),a1805 ret1807HandleHud: 1808 ld hl,HudCode1809 jp EnterSpecificRoutineInCastleOverviewCode1811EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters:1812 ld (.SelfModifyingCodeRoutine),hl1814 ld a,(memblocks.1) 1815 push af1816 ld a,(memblocks.2) 1817 push af1818 in a,($a8) 1819 push af 1821 ld a,(slot.page12rom) 1822 out ($a8),a1824 ld a,CastleOverviewCodeBlock 1825 call block1234 1827 .SelfModifyingCodeRoutine: equ $+11828 call $ffff1830 pop af1831 out ($a8),a 1832 pop af1833 call block34 1834 pop af1835 call block12 1836 ret1838EnterSpecificRoutineHeroOverviewCode:1839 ld (.SelfModifyingCodeRoutine),hl1841 ld a,(memblocks.1) 1842 push af1843 ld a,(memblocks.2) 1844 push af1845 in a,($a8) 1846 push af 1848 ld a,(slot.page12rom) 1849 out ($a8),a1851 ld a,HeroOverviewCodeBlock 1852 call block1234 1854 .SelfModifyingCodeRoutine: equ $+11855 call $ffff1857 pop af1858 out ($a8),a 1859 pop af1860 call block34 1861 pop af1862 call block12 1864 xor a1865 ld (vblankintflag),a1866 ld (GameStatus),a 1867 ld hl,01868 ld (CurrentCursorSpriteCharacter),hl1869 jp EnableScrollScreen1871EnterSpecificRoutineInExtraRoutines:1872 ld (.SelfModifyingCodeRoutine),hl1874 ld a,(memblocks.1) 1875 push af1876 ld a,(memblocks.2) 1877 push af1878 in a,($a8) 1879 push af 1881 ld a,(slot.page12rom) 1882 out ($a8),a1884 ld a,ExtraRoutinesCodeBlock 1885 call block12 1887 .SelfModifyingCodeRoutine: equ $+11888 call $ffff1890 pop af1891 out ($a8),a 1892 pop af1893 call block34 1894 pop af1895 call block12 1897 xor a1898 ld (vblankintflag),a1899 ld (GameStatus),a 1900 ld hl,01901 ld (CurrentCursorSpriteCharacter),hl1902 jp EnableScrollScreen1904EnterSpecificRoutineInCastleOverviewCode:1905 ld (.SelfModifyingCodeRoutine),hl1907 ld a,(memblocks.1) 1908 push af1909 ld a,(memblocks.2) 1910 push af1911 in a,($a8) 1912 push af 1914 ld a,(slot.page12rom) 1915 out ($a8),a1917 ld a,CastleOverviewCodeBlock 1918 call block1234 1920 .SelfModifyingCodeRoutine: equ $+11921 call $ffff1923 pop af1924 out ($a8),a 1925 pop af1926 call block34 1927 pop af1928 call block12 1930 xor a1931 ld (vblankintflag),a1932 ld (GameStatus),a 1933 ld hl,01934 ld (CurrentCursorSpriteCharacter),hl1935 jp EnableScrollScreen1937EnterSpecificRoutineInBattleCode:1938 ld (.SelfModifyingCodeRoutine),hl1940 ld a,(memblocks.1) 1941 push af1942 ld a,(memblocks.2) 1943 push af1944 in a,($a8) 1945 push af 1947 ld a,(slot.page12rom) 1948 out ($a8),a1950 ld a,BattleCodeBlock 1951 call block12 1953 .SelfModifyingCodeRoutine: equ $+11954 call $ffff1956 pop af1957 out ($a8),a 1958 pop af1959 call block34 1960 pop af1961 call block12 1963 xor a1964 ld (vblankintflag),a1965 ld (GameStatus),a 1966 ld hl,01967 ld (CurrentCursorSpriteCharacter),hl1968 jp EnableScrollScreen1970HeroWeTradeWith: ds 21971HeroCollidesWithFriendlyHero?: ds 11972CheckEnterTradeMenuBetween2FriendlyHeroes:19731980 ld a,(HeroCollidesWithFriendlyHero?)1981 dec a1982 ret m1983 ld (HeroCollidesWithFriendlyHero?),a1984 jp nz,DisableScrollScreen198519871988 ld a,11989 ld (GameStatus),a 1991 ld hl,TradeMenuCode1992 call EnterSpecificRoutineInCastleOverviewCode1994 xor a1995 ld (vblankintflag),a1996 ld (putmovementstars?),a 1997 ld (mouseclickx),a 1998 ld (mouseclicky),a 1999 ld (framecounter),a2000 ld (movehero?),a 2001 call ClearMapPage0AndMapPage1 2002 ld hl,CursorBoots2003 ld (CurrentCursorSpriteCharacter),hl2004 ret2009CheckHeroCollidesWithFriendlyHero: 2010 ld ix,(plxcurrentheroAddress)2011 20122013 ld a,(whichplayernowplaying?) | cp 1 | ld iy,pl1hero1y | jp z,.CheckHeroTouchesFriendlyHero2014 ld a,(whichplayernowplaying?) | cp 2 | ld iy,pl2hero1y | jp z,.CheckHeroTouchesFriendlyHero2015 ld a,(whichplayernowplaying?) | cp 3 | ld iy,pl3hero1y | jp z,.CheckHeroTouchesFriendlyHero2016 ld a,(whichplayernowplaying?) | cp 4 | ld iy,pl4hero1y | jp z,.CheckHeroTouchesFriendlyHero2017 ret2019 .CheckHeroTouchesFriendlyHero: 2020 ld b,amountofheroesperplayer2021 .checkpointerFriendlyloop:2022 push ix2023 pop hl2024 push iy2025 pop de2026 call CompareHLwithDE2027 jr z,.endcheck12029 ld a,(iy+HeroStatus) 2030 cp 255 2031 jr z,.endcheck1 2032 cp 254 2033 jr z,.endcheck12035 ld a,(ix+HeroY)2036 cp (iy+HeroY)2037 jr nz,.endcheck12039 ld a,(ix+HeroX)2040 cp (iy+HeroX)2041 jr z,.HeroTouchesFriendlyHero2042 .endcheck1:2043 ld de,lenghtherotable2044 add iy,de2045 djnz .checkpointerFriendlyloop2046 ret2048 .HeroTouchesFriendlyHero:2049 ld (HeroWeTradeWith),iy 2050 scf2051 ret2053SetMappositionHero: 2054 ld ix,(plxcurrentheroAddress)2056 2057 ld a,(ix+HeroY)2058 inc a 2061 ld de,(maplenght)2062 ld h,02063 ld l,a2064 call MultiplyHlWithDE 2069 ld bc,mapdata 2070 add hl,bc2071 ld c,(ix+HeroX)2072 ld b,02073 add hl,bc 20782085 ret2087CheckHeroCollidesWithGuardTower:2088 ld a,2 2089 ld (page1bank),a2090 out ($fe),a 2092 ld a,(RemoveDeadMonstersNeutralMonster?)2093 or a2094 jp nz,CheckHeroCollidesWithMonster.RemoveDeadMonstersNeutralMonster2096 ld ix,(plxcurrentheroAddress)2097 ld a,(ix+HeroStatus)2098 cp 2552099 ret z2101 Call SetMappositionHero 2103 ld a,(hl)2104 cp 762105 ret nz2107 inc hl 2108 ld a,(hl)2109 ld (MonsterHerocollidedWithOnMapAmount),a2110 or a2111 ret z2113 inc hl 2114 ld a,(hl)2115 sub 1912116 ld (GuardTowerMonsterLevel),a2117 dec hl2118 xor a2119 ld (movehero?),a2120 ld (FightGuardTowerMonster?),a2122 push hl2123 ld a,12124 ld (GameStatus),a 2125 call ClearMapPage0AndMapPage1 2126 ld hl,DisplayGuardTowerCOde2127 call EnterSpecificRoutineInBattleCode2128 pop hl2130 ld a,(FightGuardTowerMonster?)2131 or a2132 ret z2133 2134 dec hl2135 xor a 2136 jp CheckHeroCollidesWithMonster.NormalMonster2138CheckHeroCollidesWithMonster:2139 ld a,2 2140 ld (page1bank),a2141 out ($fe),a 2143 ld a,(RemoveDeadMonstersNeutralMonster?)2144 or a2145 jr nz,.RemoveDeadMonstersNeutralMonster2147 ld ix,(plxcurrentheroAddress)2148 ld a,(ix+HeroStatus)2149 cp 2552150 ret z2152 Call SetMappositionHero 2154 ld a,(hl)2155 cp 1922156 ret nc 2157 cp 76 2158 jr z,.CheckIfGuardTowerJustDied2159 cp 1282160 ret c 2162 .NormalMonster:2163 ld (MonsterHerocollidedWithOnMap),a2164 ld a,l2165 ld (XAddressOfMonsterHerocollidedWithOnMap),a2167 ld a,(NeutralEnemyDied?)2168 or a2169 jr nz,.ThisEnemyJustDied2171 inc hl2172 ld (AddressOfMonsterAmountHerocollidedWithOnMap),hl2173 ld a,(hl)2174 ld (MonsterHerocollidedWithOnMapAmount),a2176 ld hl,02177 ld (HeroThatGetsAttacked),hl 2178 jp EnterCombat2180 .RemoveDeadMonstersNeutralMonster:2181 ld hl,(AddressOfMonsterAmountHerocollidedWithOnMap)2182 ld (hl),a 2183 xor a2184 ld (RemoveDeadMonstersNeutralMonster?),a 2185 ret2187 .ThisEnemyJustDied:2188 .CheckIfGuardTowerJustDied:2189 ld a,(NeutralEnemyDied?)2190 or a2191 ret z2193 xor a2194 ld (NeutralEnemyDied?),a2196 inc hl 2197 ld (hl),a 2198 dec hl2200 ld a,(hl)2201 cp 762202 jr z,.GuardTowerDied2203 ld (hl),0 2205 or a2206 sbc hl,de 2207 ld a,(hl)2209 cp 1922210 ret c2211 ld (hl),0 2212 ret2214 .GuardTowerDied: 2215 inc hl2216 inc hl2218 ld d,02219 ld a,(hl) 2220 sub 191 2221 ld e,a2222 ld (hl),0 2223 inc hl2224 ld a,(hl) 2225 ld (hl),0 2227 sub 191 2228 ld h,02229 ld l,a2230 call MultiplyHlWithDE 2231 ld de,2502232 call MultiplyHlWithDE 2233 ld (GuardTowerReward),hl22352244225222602267 ld a,52268 ld (DisplayGuardTowerReward?),a2269 ret2271SetResourcesCurrentPlayerinIX:2272 ld a,(whichplayernowplaying?)2273 .PlayerAlreadySetInA:2274 ld ix,ResourcesPlayer12275 cp 12276 ret z2277 ld ix,ResourcesPlayer22278 cp 22279 ret z2280 ld ix,ResourcesPlayer32281 cp 32282 ret z2283 ld ix,ResourcesPlayer422842286 ret2288CheckHeroPicksUpItem:2289 Call SetMappositionHero 2291 ld a,2 2292 ld (page1bank),a2293 out ($fe),a 2295 ld a,(hl)2296 or a2297 ret z2298 cp 1282299 ret nc 2301 2302 push af2303 call SetResourcesCurrentPlayerinIX 2304 ld a,32305 ld (SetResources?),a2306 ld (ChangeManaAndMovement?),a 2307 pop af2309 cp 652310 jp z,.TreasureChestBig2311 cp 662312 jp z,.TreasureChestSmall2313 cp 672314 jp z,.Wood2315 cp 682316 jp z,.Ore2317 cp 692318 jp z,.Gems2319 cp 702320 jp z,.Rubies2321 cp 712322 jp z,.Gold2323 cp 722324 jp z,.WaterWell2325 cp 732326 jp z,.LearningStone2327 cp 742328 jp z,.SpireOfWisdom2329 cp 752330 jp z,Scroll2331 cp 76 2332 ret z 2334.InventoryItems:2335 2336 sub 832337 ld c,a2338 ld ix,(plxcurrentheroAddress)2340 .CheckAll9SlotsLoop:2341 sub 52342 jr c,.AppropriateInvventorySlotFound2343 inc ix 2344 jr .CheckAll9SlotsLoop2346 .SetItemInExtraSlots:2347 ld ix,(plxcurrentheroAddress)2348 ld b,6 2350 .loop:2351 ld a,(ix+HeroInventory+9)2352 cp 045 2353 jr z,.SetItem2354 inc ix2355 djnz .loop2356 ret2357 2358 .SetItem:2359 ld (ix+HeroInventory+9),c2360 jr .EndInventoryPickupRoutineAndUpdateHud2362 .AppropriateInvventorySlotFound:2363 ld a,(ix+HeroInventory+0)2364 cp 45 2365 jp nz,.SetItemInExtraSlots 2366 ld (ix+HeroInventory+0),c2367 .EndInventoryPickupRoutineAndUpdateHud:2368 xor a2369 ld (movehero?),a2370 ld (hl),a 2371 ld a,32372 ld (SetHeroArmyAndStatusInHud?),a2373 call SetHeroMaxMovementPoints2375 call .SfxResourcePickedUp2377 jp SetTotalManaHero239524092416.WaterWell:2417 ld ix,(plxcurrentheroAddress)2418 ld a,(ix+HeroTotalMove)2419 cp (ix+HeroMove)2420 ld (ix+HeroMove),a2421 ret z2422 xor a2423 ld (movehero?),a 2425 ld e,(ix+HeroSpecificInfo+0) 2426 ld d,(ix+HeroSpecificInfo+1)2427 push de2428 pop ix 2429 2430 ld a,(ix+HeroinfoSYSX+0) 2431 and %0100 1000 2432 or a,128 + (096 / 2) 2433 xor 82434 ld (ix+HeroinfoSYSX+0),a 2436 ld bc,SFX_WaterWell2437 jp RePlayerSFX_PlayCh1 2439.SpireOfWisdom:2440 call .CheckSpireOfWisdomAlreadyVisited2441 ret nz2443 xor a2444 ld (movehero?),a2445 ld a,32446 ld (DisplaySpireOfWisdom?),a2447 ret2449.CheckSpireOfWisdomAlreadyVisited:2450 ld ix,(plxcurrentheroAddress)2452 inc hl2453 ld a,(hl) 2454 sub 1922455 jr z,.SpireOfWisdom12456 dec a2457 jr z,.SpireOfWisdom22458 dec a2459 jr z,.SpireOfWisdom32460 dec a2461 jr z,.SpireOfWisdom42462 dec a2463 jr z,.SpireOfWisdom524642466 2467 .SpireOfWisdom6:2468 bit 4,(ix+HeroAirSpells)2469 ret nz2470 set 4,(ix+HeroAirSpells)2471 ret2472 .SpireOfWisdom5:2473 bit 5,(ix+HeroAirSpells)2474 ret nz2475 set 5,(ix+HeroAirSpells)2476 ret2477 .SpireOfWisdom4:2478 bit 6,(ix+HeroAirSpells)2479 ret nz2480 set 6,(ix+HeroAirSpells)2481 ret2482 .SpireOfWisdom3:2483 bit 7,(ix+HeroAirSpells)2484 ret nz2485 set 7,(ix+HeroAirSpells)2486 ret2487 .SpireOfWisdom2:2488 bit 4,(ix+HeroFireSpells)2489 ret nz2490 set 4,(ix+HeroFireSpells)2491 ret2492 .SpireOfWisdom1:2493 bit 5,(ix+HeroFireSpells)2494 ret nz2495 set 5,(ix+HeroFireSpells)2496 ret2498.LearningStone:2499 call .CheckLearningStoneAlreadyVisited2500 ret nz2502 xor a2503 ld (movehero?),a2504 ld a,32505 ld (DisplayLearningStone?),a2506 ret2508.CheckLearningStoneAlreadyVisited:2509 ld ix,(plxcurrentheroAddress)2511 inc hl2512 ld a,(hl) 2513 sub 1922514 jr z,.LearningStone12515 dec a2516 jr z,.LearningStone22517 dec a2518 jr z,.LearningStone32519 dec a2520 jr z,.LearningStone42521 dec a2522 jr z,.LearningStone525232525 2526 .LearningStone6:2527 bit 6,(ix+HeroFireSpells)2528 ret nz2529 set 6,(ix+HeroFireSpells)2530 ret2531 .LearningStone5:2532 bit 7,(ix+HeroFireSpells)2533 ret nz2534 set 7,(ix+HeroFireSpells)2535 ret2536 .LearningStone4:2537 bit 4,(ix+HeroEarthSpells)2538 ret nz2539 set 4,(ix+HeroEarthSpells)2540 ret2541 .LearningStone3:2542 bit 5,(ix+HeroEarthSpells)2543 ret nz2544 set 5,(ix+HeroEarthSpells)2545 ret2546 .LearningStone2:2547 bit 6,(ix+HeroEarthSpells)2548 ret nz2549 set 6,(ix+HeroEarthSpells)2550 ret2551 .LearningStone1:2552 bit 7,(ix+HeroEarthSpells)2553 ret nz2554 set 7,(ix+HeroEarthSpells)2555 ret2557.TreasureChestSmall:2558 xor a2559 ld (movehero?),a2560 ld (hl),a 2561 ld a,32562 ld (ChestFound?),a2563 ld a,02564 ld (BigChest?),a2565 ret2567.TreasureChestBig:2568 xor a2569 ld (movehero?),a2570 ld (hl),a 2571 ld a,32572 ld (ChestFound?),a2573 ld a,12574 ld (BigChest?),a2575 ret2577.SfxResourcePickedUp:2578 ld bc,SFX_CollectItem2579 jp RePlayerSFX_PlayCh1 2581.Gold:2582 xor a2583 ld (movehero?),a2584 ld (hl),a 2585 ld de,5002586 ld l,(ix+0) 2587 ld h,(ix+1)2588 add hl,de2589 ld (ix+0),l2590 ld (ix+1),h 2591 jr .SfxResourcePickedUp2593.Wood:2594 xor a2595 ld (movehero?),a2596 ld (hl),a 2597 ld de,52598 ld l,(ix+2) 2599 ld h,(ix+3)2600 add hl,de2601 ld (ix+2),l2602 ld (ix+3),h 2603 jr .SfxResourcePickedUp2605.Ore:2606 xor a2607 ld (movehero?),a2608 ld (hl),a 2609 ld de,52610 ld l,(ix+4) 2611 ld h,(ix+5)2612 add hl,de2613 ld (ix+4),l2614 ld (ix+5),h 2615 jr .SfxResourcePickedUp2617.Gems:2618 xor a2619 ld (movehero?),a2620 ld (hl),a 2621 ld de,52622 ld l,(ix+6) 2623 ld h,(ix+7)2624 add hl,de2625 ld (ix+6),l2626 ld (ix+7),h 2627 jr .SfxResourcePickedUp2629.Rubies:2630 xor a2631 ld (movehero?),a2632 ld (hl),a 2633 ld de,52634 ld l,(ix+8) 2635 ld h,(ix+9)2636 add hl,de2637 ld (ix+8),l2638 ld (ix+9),h 2639 jr .SfxResourcePickedUp2641NXAndNY10x18HeroPortraits: equ 018*256 + (010/2) 2642NXAndNY14x9HeroPortraits: equ 009*256 + (014/2) 2643DYDXHeroWindow10x18InHud: equ 132*128 + (204/2) - 128 2644DYDXFirstHeroWindow14x9InHud: equ 067*128 + (208/2) - 128 2645DYDXSecondHeroWindow14x9InHud: equ 078*128 + (208/2) - 128 2646DYDXThirdHeroWindow14x9InHud: equ 089*128 + (208/2) - 128 2649SetResources?: db 32650SetHeroArmyAndStatusInHud?: db 32652CheckEnterCastle:2653 ld a,(PlayerLostHeroInBattle?)2654 or a2655 ret nz2657 ld a,(EnterCastle?)2658 or a2659 ret z2660 xor a2661 ld (EnterCastle?),a2662 pop af 2663 ld iy,(WhichCastleIsPointerPointingAt?)2664 jp EnterCastle2666CheckHeroEntersCastle:2667 ld ix,(plxcurrentheroAddress)2668 ld iy,Castle12669 call .GoCheck2670 ld iy,Castle22671 call .GoCheck2672 ld iy,Castle32673 call .GoCheck2674 ld iy,Castle42675 call .GoCheck2676 ret2678 .GoCheck:2679 ld a,(iy+CastleY) 2680 dec a2681 cp (ix+Heroy)2682 ret nz2683 ld a,(iy+CastleX)2684 inc a2685 inc a2686 cp (ix+Herox)2687 ret nz2689 ld a,(whichplayernowplaying?) 2690 cp (iy+CastlePlayer)2691 jr nz,.TakeOverCastle 2693 ld a,(PlayerLostHeroInBattle?)2694 or a2695 ret nz2697 ld a,(ix+HeroStatus) 2698 cp 0022699 ret z 2700 cp 2542701 ret z 2703 2704 ld (ix+HeroStatus),002 2705 2706 pop af 2707 pop af 2709 2710 ld e,(ix+HeroSpecificInfo+0) 2711 ld d,(ix+HeroSpecificInfo+1)2712 push de2713 pop ix 2714 2715 ld a,(ix+HeroinfoSYSX+0) 2716 and %0100 1000 2717 or a,128 + (064 / 2) 2718 xor 82719 ld (ix+HeroinfoSYSX+0),a2721 jp EnterCastle2722 2723.TakeOverCastle: 2724 push af2725 ld a,(iy+CastlePlayer)2726 ld (PlayerWhoLostAHeroInBattle?),a2727 inc a2728 jr z,.NeutralCastleFound 2729 ld a,32730 ld (PlayerLostHeroInBattle?),a2731 .NeutralCastleFound:2732 pop af2733 2734 ld (iy+CastlePlayer),a2735 pop af 2736 ret2737 2738 2739CheckHeroCollidesWithEnemyHero:2740 ld ix,(plxcurrentheroAddress)2741 27422743 ld de,lenghtherotable2744 ld hl,lenghtherotable*(amountofheroesperplayer-1)2745 ld a,(whichplayernowplaying?) | cp 1 | ld a,1 | ld bc,pl1hero8y | ld iy,pl1hero1y | call nz,.CheckHeroTouchesEnemyHero2746 ld a,(whichplayernowplaying?) | cp 2 | ld a,2 | ld bc,pl2hero8y | ld iy,pl2hero1y | call nz,.CheckHeroTouchesEnemyHero2747 ld a,(whichplayernowplaying?) | cp 3 | ld a,3 | ld bc,pl3hero8y | ld iy,pl3hero1y | call nz,.CheckHeroTouchesEnemyHero2748 ld a,(whichplayernowplaying?) | cp 4 | ld a,4 | ld bc,pl4hero8y | ld iy,pl4hero1y | call nz,.CheckHeroTouchesEnemyHero2749 ret2751 .CheckHeroTouchesEnemyHero: 2752 ld (PlayerThatGetsAttacked),a2753 ld (LastHeroForPlayerThatGetsAttacked),bc2754 ld b,amountofheroesperplayer2755 .checkpointerenemyloop:2756 ld a,(iy+HeroStatus) 2757 inc a 2758 jp z,.endcheck1 2760 ld a,(ix+HeroY)2761 cp (iy+HeroY)2762 jp nz,.endcheck12764 ld a,(ix+HeroX)2765 cp (iy+HeroX)2766 jp z,.HeroTouchesEnemyHero2767 .endcheck1:2768 add iy,de2769 or a2770 sbc hl,de 2771 djnz .checkpointerenemyloop2772 ret2774 .HeroTouchesEnemyHero:2775 ld (HeroThatGetsAttacked),iy 2776 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl2777 pop af2778 pop af 2779 jp EnterCombat2781LastHeroForPlayerThatGetsAttacked: ds 22782PlayerThatGetsAttacked: ds 12783HeroThatGetsAttacked: ds 227842785AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked: ds 22787CheckIfHeroButtonShouldRemainLit: 2788 ld a,(currentherowindowclicked)2789 2790 cp 12791 ld ix,ButtonHeroWindow1 2792 ld hl,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2793 jr z,.checkherobutton2795 cp 22796 ld ix,ButtonHeroWindow2 2797 ld hl,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2798 jr z,.checkherobutton2800 cp 32801 ld ix,ButtonHeroWindow3 2802 ld hl,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2803 ret nz2804 2805 .checkherobutton: 2806 ld a,(ix+ButtonLit?) 2807 or a2808 ret z 2810 bit 4,(hl) 2811 ret nz2812 2813 ld (hl),%1010 0011 2814 ret2816CompareHLwithDE:2817 or a2818 sbc hl,de2819 ret2821ButtonLit?: equ 0 2822ButtonHeroWindow1: db 02823ButtonHeroWindow2: db 02824ButtonHeroWindow3: db 02825ButtonCastleWindow1: db 02826ButtonCastleWindow2: db 02827ButtonCastleWindow3: db 02829CastleWindownY: equ 102830CastleWindownX: equ 202831HerowindowNY: equ 102832HerowindowNX: equ 142834centrescreenforthisCastle:2835 ld a,TilesPerColumn2836 ld b,a2837 ld a,(mapheight)2838 sub a,b2839 ld b,a2841 ld a,TilesPerRow2842 ld c,a2843 ld a,(maplenght)2844 sub a,c2845 ld c,a2846 2847 ld a,(ix+CastleY) 2848 sub a,TilesPerColumn/2 - 12849 jp nc,.notoutofscreentop2850 xor a2851.notoutofscreentop: 2852 ld (mappointery),a2854 cp b2855 jp c,.notoutofscreenbottom2856 ld a,b2857 ld (mappointery),a2858.notoutofscreenbottom: 2859 2860 ld a,(ix+CastleX) 2861 sub a,TilesPerRow/22862 jp nc,.notoutofscreenleft2863 xor a2864.notoutofscreenleft: 2865 ld (mappointerx),a2867 cp c2868 jp c,.notoutofscreenright2869 ld a,c2870 ld (mappointerx),a2871.notoutofscreenright: 2872 ret2874ActivateFirstActiveHeroForCurrentPlayer:2875 xor a2876 ld (herowindowpointer),a 2877 ld (CastleWindowPointer),a 2878 ld (currentherowindowclicked),a 2880 call SetHero1ForCurrentPlayerInIX2881 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime28832884 ld (plxcurrentheroAddress),ix 2885 call FirstHeroWindowClicked 2886 xor a2887 ld (SetHeroOverViewMenu?),a2889 InitiatePlayerTurn:2890 ld a,2 2891 ld (ButtonHeroWindow1+ButtonLit?),a2892 ld (ButtonHeroWindow2+ButtonLit?),a2893 ld (ButtonHeroWindow3+ButtonLit?),a2895 ld (ButtonCastleWindow1+ButtonLit?),a2896 ld (ButtonCastleWindow2+ButtonLit?),a2897 ld (ButtonCastleWindow3+ButtonLit?),a28992903 ld ix,(plxcurrentheroAddress)2904 call centrescreenforthishero.GoCenter2905 ld a,(ix+HeroStatus) 2906 cp 254 2907 jr z,ActivateFirstActiveHeroForCurrentPlayer2908 cp 255 2909 call z,CenterScreenOnPlayersCastleAndNoActiveHero2910 2911 2912 2913 ld a,3 2914 ld (SetHeroesInWindows?),a 2915 ld (SetCastlesInWindows?),a 2916 ld (SetHeroArmyAndStatusInHud?),a2917 ld (SetResources?),a2918 ld a,42919 ld (ChangeManaAndMovement?),a 2921 call CheckIfCurrentPlayerIsDisabled 2922 ret nc2923 call SetNextPlayersTurn 2924 jp ActivateFirstActiveHeroForCurrentPlayer2926CheckIfCurrentPlayerIsDisabled: 2927 ld a,(whichplayernowplaying?) 2928 ld ix,Castle1 | cp (ix+CastlePlayer) | ret z2929 ld ix,Castle2 | cp (ix+CastlePlayer) | ret z2930 ld ix,Castle3 | cp (ix+CastlePlayer) | ret z2931 ld ix,Castle4 | cp (ix+CastlePlayer) | ret z2933 call SetHero1ForCurrentPlayerInIX 2935 ld b,72936 .loop:2937 ld a,(ix+HeroStatus)2938 cp 1 2939 ret z2940 ld de,lenghtherotable2941 add ix,de2942 djnz .loop2944 scf 2945 ret2947 2948SetNextPlayersTurn:2949 ld a,(amountofplayers) 2950 ld b,a2951 ld a,(whichplayernowplaying?)2952 cp b2953 jp nz,.endchecklastplayer2954 xor a2955 .endchecklastplayer: 2956 inc a2957 ld (whichplayernowplaying?),a2958 ret2960CenterScreenOnPlayersCastleAndNoActiveHero:2961 ld a,0 2962 ld (ButtonHeroWindow1+ButtonLit?),a2963CenterScreenOnPlayersCastle: 2964 call SetCastleUsingCastleWindowPointerInIX2965 jp centrescreenforthisCastle2967SetCastleUsingCastleWindowPointerInIX:2968 ld a,(CastleWindowPointer) 2969 ld c,a 2970 ld a,(whichplayernowplaying?)2971 ld b,AmountOfCastles2972 ld ix,Castle12973 ld de,LenghtCastleTable2974 .SearchLoop:2975 cp (ix+CastlePlayer)2976 jp z,.CastleFound2977 add ix,de2978 djnz .SearchLoop2979 2980 pop af2981 ret2983 .CastleFound:2984 dec c2985 ret m2986 add ix,de2987 djnz .SearchLoop2988 2989 pop af2990 ret2992 .SearchNextCastle: 2993 add ix,de2994 cp (ix+CastlePlayer)2995 ret z 2996 djnz .SearchNextCastle2997 2998 pop af2999 ret 3002ThirdHeroWindowClicked:3003 call SetHero1ForCurrentPlayerInIX3004 call SetHeroForWindow3DeterminedByHeroWindowPointerInIX3005 3006 ld a,(ix+HeroStatus) 3007 cp 255 3008 ret z 3010 ld a,33011 ld (currentherowindowclicked),a 3012 jp centrescreenforthishero3014SecondHeroWindowClicked:3015 call SetHero1ForCurrentPlayerInIX3016 call SetHeroForWindow2DeterminedByHeroWindowPointerInIX3017 3018 ld a,(ix+HeroStatus) 3019 cp 255 3020 ret z 3022 ld a,23023 ld (currentherowindowclicked),a 3024 jp centrescreenforthishero3026FirstHeroWindowClicked: 3027 call SetHero1ForCurrentPlayerInIX3028 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX3029 3030 ld a,(ix+HeroStatus) 3031 cp 255 3032 ret z 3034 ld a,13035 ld (currentherowindowclicked),a 3036 jp centrescreenforthishero3038CenterScreenForCurrentHero:3039 ld ix,(plxcurrentheroAddress)3040 jp centrescreenforthishero.GoCenter3041 3042centrescreenforthishero:3043 ld a,2 3044 ld (ButtonHeroWindow1+ButtonLit?),a3045 ld (ButtonHeroWindow2+ButtonLit?),a3046 ld (ButtonHeroWindow3+ButtonLit?),a3047 ld a,33048 ld (SetHeroArmyAndStatusInHud?),a3050 ld hl,(plxcurrentheroAddress)3051 push hl3052 ld (plxcurrentheroAddress),ix3054 ld a,(mappointery)3055 ld b,a3056 ld a,(mappointerx)3057 ld c,a3058 push bc3060 call .GoCenter3062 pop bc3063 3064 ld hl,(plxcurrentheroAddress)3065 pop de3066 xor a3067 sbc hl,de3068 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3070 ld a,(mappointery)3071 ld h,a3072 ld a,(mappointerx)3073 ld l,a3074 xor a3075 sbc hl,bc3076 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3078 ld a,23079 ld (SetHeroOverViewMenu?),a 3080 xor a3081 ld (freezecontrols?),a3082 ret3084 .AnotherHeroIsSelectedOrMappointerIsDifferent:3085 xor a3086 ld (putmovementstars?),a3087 ld (mouseclickx),a 3088 ld (mouseclicky),a 3089 ld (movementpathpointer),a3090 ld (movehero?),a3091 ret30933094.GoCenter:3096 ld a,TilesPerColumn3097 ld b,a3098 ld a,(mapheight)3099 sub a,b3100 ld b,a3102 ld a,TilesPerRow3103 ld c,a3104 ld a,(maplenght)3105 sub a,c3106 ld c,a3107 3108 ld a,(ix+HeroY) 3109 sub a,TilesPerColumn/2 - 13110 jp nc,.notoutofscreentop3111 xor a3112.notoutofscreentop: 3113 ld (mappointery),a3115 cp b3116 jp c,.notoutofscreenbottom3117 ld a,b3118 ld (mappointery),a3119.notoutofscreenbottom: 3120 3121 ld a,(ix+HeroX) 3122 sub a,TilesPerRow/23123 jp nc,.notoutofscreenleft3124 xor a3125.notoutofscreenleft: 3126 ld (mappointerx),a3128 cp c3129 jp c,.notoutofscreenright3130 ld a,c3131 ld (mappointerx),a3132.notoutofscreenright: 3133 ret3135CheckHeroArrowUp:3136 ld a,(herowindowpointer)3137 sub a,13138 ret c3139 ld (herowindowpointer),a3141 call SetHero1ForCurrentPlayerInIX3142 call SetHeroUsingHeroWindowPointer3143 call FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime3145 ld a,33146 ld (SetHeroesInWindows?),a 3147 ld (ChangeManaAndMovement?),a3149 ld a,2 3150 ld (ButtonHeroWindow1+ButtonLit?),a3151 ld (ButtonHeroWindow2+ButtonLit?),a3152 ld (ButtonHeroWindow3+ButtonLit?),a3154 ld a,(currentherowindowclicked)3155 inc a3156 ld (currentherowindowclicked),a3157 ret3159CheckCastleArrowUp:3160 ld a,(CastleWindowPointer)3161 sub a,13162 ret c3163 ld (CastleWindowPointer),a3165 ld a,33166 ld (SetCastlesInWindows?),a 3167 3168 ld a,2 3169 ld (ButtonCastleWindow1+ButtonLit?),a3170 ld (ButtonCastleWindow2+ButtonLit?),a3171 ld (ButtonCastleWindow3+ButtonLit?),a 3172 ret3174CheckHeroArrowDown:3175 3189 ld a,(herowindowpointer)3190 add a,13191 cp 63192 ret nc3193 ld (herowindowpointer),a3195 call SetHero1ForCurrentPlayerInIX3196 call SetHeroUsingHeroWindowPointer3197 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime3199 ld a,33200 ld (SetHeroesInWindows?),a 3201 ld (ChangeManaAndMovement?),a3203 ld a,2 3204 ld (ButtonHeroWindow1+ButtonLit?),a3205 ld (ButtonHeroWindow2+ButtonLit?),a3206 ld (ButtonHeroWindow3+ButtonLit?),a3208 ld a,(currentherowindowclicked)3209 dec a3210 ld (currentherowindowclicked),a3211 ret3213CheckCastleArrowDown:3214 ld a,(CastleWindowPointer)3215 add a,13216 cp 43217 ret nc3218 ld (CastleWindowPointer),a3220 ld a,33221 ld (SetCastlesInWindows?),a 3222 3223 ld a,2 3224 ld (ButtonCastleWindow1+ButtonLit?),a3225 ld (ButtonCastleWindow2+ButtonLit?),a3226 ld (ButtonCastleWindow3+ButtonLit?),a 3227 ret3229movehero:3230 ld a,(movehero?)3231 or a 3232 jp z,CheckHeroEntersCastle 3233 call .GoMove3234 call CheckHeroCollidesWithGuardTower 3235 jp CenterScreenForCurrentHero3237 .GoMove:3238 ld a,(movementpathpointer)3239 add a,23240 ld (movementpathpointer),a3241 3242 ld e,a3243 ld d,03244 ld hl,movementpath3245 add hl,de3246 3247 ld b,(hl) 3248 inc hl3249 ld c,(hl) 3250 ld a,b3251 or c3252 jp nz,.domovehero3253 3254 .endmovement:3255 xor a3256 ld (movehero?),a 3257 ret3258 3259 .domovehero:3260 ld ix,(plxcurrentheroAddress)32613262 3263 ld a,(ix+HeroMove)3264 sub a,1 3265 jr c,.endmovement3266 ld (ix+HeroMove),a32683277 ld a,33278 ld (ChangeManaAndMovement?),a3280 ld a,(ix+HeroY)3281 add a,b 3282 ld (ix+HeroY),a3283 ld a,(ix+Herox)3284 add a,c 3285 ld (ix+HeroX),a3287 push ix3288 push bc3289 call CheckHeroCollidesWithFriendlyHero 3290 pop bc3291 pop ix3292 jp nc,.animate 3294 3295 ld a,(ix+HeroY)3296 sub a,b 3297 ld (ix+HeroY),a3298 ld a,(ix+Herox)3299 sub a,c 3300 ld (ix+HeroX),a3302 ld a,33303 ld (HeroCollidesWithFriendlyHero?),a3304 ld a,13305 ld (ChangeManaAndMovement?),a 3306 jp .endmovement3307 3308 .animate:3309 push bc3310 ld bc,SFX_HeroWalk3311 call RePlayerSFX_PlayCh1 3312 pop bc3314 ld (ix+HeroStatus),001 3315 ld e,(ix+HeroSpecificInfo+0) 3316 ld d,(ix+HeroSpecificInfo+1)3317 push de3318 pop ix 3320 3321 ld a,c3322 or a 3323 jp m,.HeroMovesLeft3324 dec a3325 jr z,.HereMovesRight3326 ld a,b 3327 or a 3328 jp m,.HeroMovesUp3329 dec a3330 ret nz3331 3332 .HeroMovesDown:33333334 ld a,(ix+HeroinfoSYSX+0) 3335 and %0100 1000 3336 or a,128 + (064 / 2) 3337 xor 833383339 ld (ix+HeroinfoSYSX+0),a3340 ret3341 3342 .HeroMovesUp:33433344 ld a,(ix+HeroinfoSYSX+0) 3345 and %0100 1000 3346 or a,128 + (096 / 2) 3347 xor 833483349 ld (ix+HeroinfoSYSX+0),a 3350 ret3352 .HereMovesRight:33533354 ld a,(ix+HeroinfoSYSX+0) 3355 and %0100 1000 3356 or a,128 + (000 / 2) 3357 xor 833583359 ld (ix+HeroinfoSYSX+0),a 3360 ret3361 3362 .HeroMovesLeft:33633364 ld a,(ix+HeroinfoSYSX+0) 3365 and %0100 1000 3366 or a,128 + (032 / 2) 3367 xor 833683369 ld (ix+HeroinfoSYSX+0),a 3370 ret3372SetAllHeroPosesInVram: 3373 ld a,(slot.page1rom) 3374 out ($a8),a 3376 ld ix,pl1hero1y | call SetHeroPoseInVram.go3377 ld ix,pl1hero2y | call SetHeroPoseInVram.go3378 ld ix,pl1hero3y | call SetHeroPoseInVram.go3379 ld ix,pl1hero4y | call SetHeroPoseInVram.go3380 ld ix,pl1hero5y | call SetHeroPoseInVram.go3381 ld ix,pl1hero6y | call SetHeroPoseInVram.go3382 ld ix,pl1hero7y | call SetHeroPoseInVram.go3383 ld ix,pl1hero8y | call SetHeroPoseInVram.go3385 ld ix,pl2hero1y | call SetHeroPoseInVram.go3386 ld ix,pl2hero2y | call SetHeroPoseInVram.go3387 ld ix,pl2hero3y | call SetHeroPoseInVram.go3388 ld ix,pl2hero4y | call SetHeroPoseInVram.go3389 ld ix,pl2hero5y | call SetHeroPoseInVram.go3390 ld ix,pl2hero6y | call SetHeroPoseInVram.go3391 ld ix,pl2hero7y | call SetHeroPoseInVram.go3392 ld ix,pl2hero8y | call SetHeroPoseInVram.go3394 ld ix,pl3hero1y | call SetHeroPoseInVram.go3395 ld ix,pl3hero2y | call SetHeroPoseInVram.go3396 ld ix,pl3hero3y | call SetHeroPoseInVram.go3397 ld ix,pl3hero4y | call SetHeroPoseInVram.go3398 ld ix,pl3hero5y | call SetHeroPoseInVram.go3399 ld ix,pl3hero6y | call SetHeroPoseInVram.go3400 ld ix,pl3hero7y | call SetHeroPoseInVram.go3401 ld ix,pl3hero8y | call SetHeroPoseInVram.go3403 ld ix,pl4hero1y | call SetHeroPoseInVram.go3404 ld ix,pl4hero2y | call SetHeroPoseInVram.go3405 ld ix,pl4hero3y | call SetHeroPoseInVram.go3406 ld ix,pl4hero4y | call SetHeroPoseInVram.go 3407 ld ix,pl4hero5y | call SetHeroPoseInVram.go 3408 ld ix,pl4hero6y | call SetHeroPoseInVram.go 3409 ld ix,pl4hero7y | call SetHeroPoseInVram.go3410 ld ix,pl4hero8y | call SetHeroPoseInVram.go3411 ret3412 3413NXAndNY16x32HeroSprites: equ 032*256 + (016/2) 3414SetHeroPoseInVram:3415 ld a,(slot.page1rom) 3416 out ($a8),a 3418 ld ix,(plxcurrentheroAddress)3419 .go:34203423 push ix3424 ld c,(ix+HeroSpecificInfo+0) 3425 ld b,(ix+HeroSpecificInfo+1)3426 push bc3427 pop ix3428 ld c,(ix+HeroinfoSYSX+0) 3429 ld b,(ix+HeroinfoSYSX+1) 3430 pop ix3432 ld l,(ix+HeroDYDX+0)3433 ld h,(ix+HeroDYDX+1) 3434 ld de,NXAndNY16x32HeroSprites 34383439 ld (AddressToWriteFrom),bc3440 ld (NXAndNY),de3441 ld (AddressToWriteTo),hl3443 3444 ld e,(ix+HeroSpecificInfo+0) 3445 ld d,(ix+HeroSpecificInfo+1)3446 push de3447 pop ix3449 ld a,(ix+HeroInfoSpriteBlock) 3451 call block12 3454 ld c,$98 3455 ld de,128 3456 di3458 .loop:3459 call .WriteOneLine3460 ld a,(NXAndNY+1)3461 dec a3462 ld (NXAndNY+1),a3463 jp nz,.loop3464 ei3465 ret3467 .WriteOneLine:34683469 ld a,1 3470 ld hl,(AddressToWriteTo) 3471 add hl,de 3472 ld (AddressToWriteTo),hl3473 call SetVdp_WriteWithoutDisablingOrEnablingInt 3475 ld hl,(AddressToWriteFrom) 3476 add hl,de 3477 ld (AddressToWriteFrom),hl3478 ld a,(NXAndNY)3479 ld b,a3480 otir3481 ret3483RemainingMovementPointsHero: db 63484putmovementstars:3485 ld a,(putmovementstars?)3486 or a3487 ret z3489 ld a,(movementpath+0) 3490 inc a3491 ld (ystar),a3492 ld a,(movementpath+1) 3493 ld (xstar),a3495 ld hl,movementpath+23496 3497 ld ix,(plxcurrentheroAddress)3498 ld a,(ix+HeroMove)3499 inc a3500 ld (RemainingMovementPointsHero),a3501 xor a3502 ld (putstar+sPage),a3503 3504 .loop:3505 ld b,(hl) 3506 ld a,(ystar)3507 add a,b3508 ld (ystar),a3509 inc hl3510 ld c,(hl) 3511 ld a,(xstar)3512 add a,c3513 ld (xstar),a3515 ld a,c3516 or b3517 ret z3519 call FindArrowDirection3520 ld (putstar+sx),a3521 3523 ld a,(RemainingMovementPointsHero)3524 dec a3525 ld (RemainingMovementPointsHero),a3526 jr nz,.EndCheckOutOfMovementPoints3527 ld a,13528 ld (putstar+sPage),a3529 .EndCheckOutOfMovementPoints:3531 push hl3532 call doputstar3533 pop hl3534 inc hl3535 jp .loop3537doputstar:3538 ld a,(activepage) 3539 or a3540 ld hl,mappage13541 jp z,.mirrorpageset3542 ld hl,mappage03543.mirrorpageset:3545 ld a,(mappointerx)3546 ld b,a3547 ld a,(xstar) 3548 sub a,b3549 ret c 3550 cp TilesPerRow3551 ret nc 3553 ld d,03554 ld e,a 3555 3556 add a,a 3557 add a,a 3558 add a,a 3559 add a,a 3562 add a,buildupscreenXoffset+3 3563 3564 ld (putstar+dx),a3566 ld a,(mappointery)3567 ld b,a3568 ld a,(ystar) 3569 sub a,b3570 ret c 3571 cp TilesPerColumn3572 ret nc 3573 ld b,a 3574 add a,a 3575 add a,a 3576 add a,a 3577 add a,a 3580 add a,buildupscreenYoffset+4 3582 ld (putstar+dy),a35843587 add hl,de3588 3589 3590 3593 push hl3594 ld de,TilesPerRow3595 ld h,03596 ld l,b3597 call MultiplyHlWithDE 3598 pop de3599 add hl,de36023612 ld a,(hl)3613 ld (hl),255361436163617 cp amountoftransparantpieces3618 jp c,.behindtree3619 cp 2543620 jp nc,.behindheroorcastle3622 ld a,2223623 ld (putstar+sy),a3624 ld hl,putstar3625 jp docopy3626.behindtree:3627.behindheroorcastle:3628 ld a,2463629 ld (putstar+sy),a3630 ld hl,putstar3631 jp docopy36323634putstar:3635 db 0,0,212,03636 db 255,0,255,03637 db 10,0,10,03638 db 0,%0000 0000,$98 3640FindArrowDirection:3641 3642 bit 7,c3643 jp nz,.ArrowLeft3644 bit 0,c3645 jp nz,.ArrowRight3646 bit 7,b3647 jp nz,.ArrowUpConfirmed3649 .ArrowDownConfirmed:3650 call .CheckNextStep 3651 bit 7,c3652 ld a,13*10 + 86 3653 ret nz3654 bit 0,c3655 ld a,12*10 + 86 3656 ret nz3657 ld a,5*10 + 863658 ret3660 .ArrowUpConfirmed:3661 call .CheckNextStep 3662 bit 7,c3663 ld a,15*10 + 86 3664 ret nz3665 bit 0,c3666 ld a,10*10 + 86 3667 ret nz3668 ld a,1*10 + 863669 ret3671 .ArrowRight:3672 bit 7,b3673 jp nz,.ArrowRightUpConfirmed3674 bit 0,b3675 jp z,.ArrowRightConfirmed3677 .ArrowRightDownConfirmed:3678 call .CheckNextStep 3679 ld a,c3680 or b3681 ld a,4*10 + 863682 ret z3683 bit 0,b3684 ld a,03*10 + 86 3685 ret z3686 bit 0,c3687 ld a,05*10 + 86 3688 ret z3689 ld a,4*10 + 863690 ret3692 .ArrowRightUpConfirmed:3693 call .CheckNextStep 3694 ld a,c3695 or b3696 ld a,2*10 + 863697 ret z3698 bit 7,b3699 ld a,03*10 + 86 3700 ret z3701 bit 0,c3702 ld a,01*10 + 86 3703 ret z3704 ld a,2*10 + 863705 ret3706 3707 .ArrowRightConfirmed:3708 call .CheckNextStep 3709 bit 7,b3710 ld a,09*10 + 86 3711 ret nz3712 bit 0,b3713 ld a,11*10 + 86 3714 ret nz3715 ld a,3*10 + 863716 ret3718 .ArrowLeft:3719 bit 7,b3720 jp nz,.ArrowLeftUpConfirmed3721 bit 0,b3722 jp z,.ArrowLeftConfirmed3724 .ArrowLeftDownConfirmed:3725 call .CheckNextStep 3726 ld a,c3727 or b3728 ld a,6*10 + 863729 ret z3730 bit 0,b3731 ld a,07*10 + 86 3732 ret z3733 bit 7,c3734 ld a,05*10 + 86 3735 ret z3736 ld a,6*10 + 863737 ret3739 .ArrowLeftUpConfirmed:3740 call .CheckNextStep 3741 ld a,c3742 or b3743 ld a,8*10 + 863744 ret z3745 bit 7,b3746 ld a,07*10 + 86 3747 ret z3748 bit 7,c3749 ld a,01*10 + 86 3750 ret z3751 ld a,8*10 + 863752 ret3754 .ArrowLeftConfirmed:3755 call .CheckNextStep 3756 bit 7,b3757 ld a,16*10 + 86 3758 ret nz3759 bit 0,b3760 ld a,14*10 + 86 3761 ret nz3762 ld a,7*10 + 863763 ret3765 .CheckNextStep:3766 inc hl3767 ld b,(hl) 3768 inc hl3769 ld c,(hl) 3770 dec hl3771 dec hl3772 ret3774EnterCastle?: db 03775CheckEnterHeroCastle:3776 ld hl,(CurrentCursorSpriteCharacter)3777 ld de,CursorEnterCastle3778 call CompareHLwithDE3779 ret nz 3781 ld a,13782 ld (EnterCastle?),a3783 pop af 3784 ret3786SetHeroOverViewMenu?: db 03787CheckEnterHeroOverviewMenu: 3788 ld hl,(CurrentCursorSpriteCharacter)3789 ld de,CursorHand3790 call CompareHLwithDE3791 ret nz 3793 ld ix,(plxcurrentheroAddress)3794 ld a,(ix+HeroStatus)3795 cp 2553796 ret z 3798 ld a,13799 ld (SetHeroOverViewMenu?),a3800 pop af 3801 ret3803GoCheckEnterHeroOverviewMenu:3804 ld a,(SetHeroOverViewMenu?)3805 dec a3806 ret m3807 ld (SetHeroOverViewMenu?),a3808 jp nz,DisableScrollScreen 3809 jp EnterHeroOverviewMenu 381138163822checktriggermapscreen:3823 ld a,(GameStatus) 3824 or a3825 ret nz38273831 ld a,(spat+1) 3832 cp SX_Hud 3833 ret nc 38353840 ld a,(NewPrControlsOnInterrupt)3841 bit 4,a 3842 ret z3844 call checkcurrentplayerhuman 3845 ret z 3847 ld a,(movehero?)3848 or a3849 jr z,.EndCheckStopHeroMovement 3850 xor a3851 ld (movehero?),a 3852 ret3853 .EndCheckStopHeroMovement:3855 call CheckEnterHeroOverviewMenu3856 call CheckEnterHeroCastle3858 .initputstars: 3859 ld ix,(plxcurrentheroAddress)3860 ld a,(ix+HeroStatus) 3861 or a3862 ret m 3864 ld a,13865 ld (putmovementstars?),a3867 3868 ld a,(mouseclickx) 3869 ld d,a3870 ld a,(mouseclicky) 3871 ld e,a3873 3874 ld a,(spat+1) 3877 sub a,63879 and %1111 00003880 srl a 3881 srl a 3882 srl a 3883 srl a 3884 ld b,a 3885 ld a,(mappointerx)3886 add a,b3887 ld (mouseclickx),a 3888 ld c,a3890 ld a,(spat) 3891 sub a,18 3892 jp nc,.notcarry23893 xor a3894 .notcarry2:3895 and %1111 00003896 srl a 3897 srl a 3898 srl a 3899 srl a 3900 ld b,a 3901 ld a,(mappointery)3902 add a,b3903 ld (mouseclicky),a 3904 3905 3906 cp e3907 jp nz,CheckNormalRouteShortestPath3908 ld a,c3909 cp d3910 jp nz,CheckNormalRouteShortestPath3912 3913 xor a3914 ld (putmovementstars?),a3915 ld (movementpathpointer),a3916 ld (mouseclickx),a 3917 ld (mouseclicky),a 3918 ld a,13919 ld (movehero?),a3920 ret 3922CheckNormalRoute:3923 ld a,(ix+HeroY) 3924 ld (movementpath+0),a 3925 ld (heroymirror),a3926 ld a,(ix+HeroX) 3927 ld (movementpath+1),a 3928 ld (heroxmirror),a3930 ld hl,movementpath+2 3932 .loop:39333934 call GetTileNrAtHeroMirrorYX3935 cp 163936 jr c,.noobstacle3937 cp 243938 jr c,.obstacle3939 cp UnwalkableTerrainPieces 3940 jr c,.noobstacle3941.obstacle:3942 dec hl3943 dec hl3944 ld c,03945 ld d,03946 jr .EndSetVerticalMovement3948.noobstacle:39493950 3951 ld a,(mouseclickx)3952 ld e,a3953 ld a,(heroxmirror)3954 cp e3955 ld c,0 3956 jp z,.EndSetHorizontalMovement3957 ld c,1 3958 jp c,.EndSetHorizontalMovement3959 ld c,-1 3960 .EndSetHorizontalMovement:3962 ld a,(mouseclicky)3963 ld e,a3964 ld a,(heroymirror)3965 cp e3966 ld d,0 3967 jp z,.EndSetVerticalMovement3968 ld d,1 3969 jp c,.EndSetVerticalMovement3970 ld d,-1 3971 .EndSetVerticalMovement:3973 ld (hl),d 3974 inc hl3975 ld (hl),c 3976 inc hl3978 ld a,c3979 or d3980 ret z39823986 ld a,(heroxmirror)3987 add a,c3988 ld (heroxmirror),a3989 ld a,(heroymirror)3990 add a,d3991 ld (heroymirror),a3992 jp .loop3994InvertReverseRoute:3995 ld a,(ix+HeroY) 3996 ld (movementpath+0),a 3997 ld a,(ix+HeroX) 3998 ld (movementpath+1),a 4000 ld de,movementpath+2 4002 dec hl 4003 dec hl 4004 dec hl 4005 dec hl 4007 call .loop4008 dec de4009 dec de4010 xor a4011 ld (de),a 4012 inc de 4013 ld (de),a 4014 ret4016 .loop:4017 ld a,(hl) 4018 cp 1284019 ret z4020 neg4021 ld (de),a 4022 4023 inc hl 4024 inc de 4026 ld a,(hl) 4027 neg4028 ld (de),a 4030 dec hl 4031 dec hl 4032 dec hl 4033 inc de 4034 jr .loop4036CheckReverseRoute:4037 ld a,(mouseclicky)4038 ld (movementpathReverse+0),a 4039 ld (heroymirror),a4040 ld a,(mouseclickx)4041 ld (movementpathReverse+1),a 4042 ld (heroxmirror),a4043 ld hl,movementpathReverse+2 4045 .loop:40464047 call GetTileNrAtHeroMirrorYX4048 cp 164049 jr c,.noobstacle4050 cp 244051 jp c,CheckNormalRoute4052 cp UnwalkableTerrainPieces 4053 jp nc,CheckNormalRoute4054 .noobstacle:40554056 4057 ld a,(ix+HeroX) 4058 ld e,a4059 ld a,(heroxmirror)4060 cp e4061 ld c,0 4062 jp z,.EndSetHorizontalMovement4063 ld c,1 4064 jp c,.EndSetHorizontalMovement4065 ld c,-1 4066 .EndSetHorizontalMovement:4068 ld a,(ix+HeroY) 4069 ld e,a4070 ld a,(heroymirror)4071 cp e4072 ld d,0 4073 jp z,.EndSetVerticalMovement4074 ld d,1 4075 jp c,.EndSetVerticalMovement4076 ld d,-1 4077 .EndSetVerticalMovement:4079 ld (hl),d 4080 inc hl4081 ld (hl),c 4082 inc hl4084 ld a,c4085 or d4086 jp z,InvertReverseRoute4088 ld a,(heroxmirror)4089 add a,c4090 ld (heroxmirror),a4091 ld a,(heroymirror)4092 add a,d4093 ld (heroymirror),a4094 jp .loop4096GetTileNrAtHeroMirrorYX:4097 push hl4098 4100 ld a,(heroymirror)4101 inc a4102 ld l,a4103 ld h,04104 ld de,(maplenght)4105 call MultiplyHlWithDE 4106 ld de,mapdata4107 add hl,de4108 4110 ld a,(heroxmirror)4111 ld e,a4112 ld d,04113 add hl,de4114 4116 ld a,(hl) 4117 pop hl4118 ret41204127puttopcastles:4128 ld hl,Castle14129 call .doputcastletop4130 ld hl,Castle24131 call .doputcastletop4132 ld hl,Castle34133 call .doputcastletop4134 ld hl,Castle441354137.doputcastletop:4138 xor a4139 ld (putcastle+sx),a4140 ld a,(hl) 4141 or a4142 ret z 4143 sub a,34144 ld (TempVariableCastleY),a4145 inc hl4146 ld a,(hl) 4147 inc a4148 ld (TempVariableCastleX),a4149 call putbottomcastles.puttwopieces4151 ld a,(putcastle+sx)4152 add a,164153 ld (putcastle+sx),a4154 ld a,(TempVariableCastleY)4155 inc a4156 ld (TempVariableCastleY),a4157 ld a,(TempVariableCastleX)4158 sub a,24159 ld (TempVariableCastleX),a4160 call putbottomcastles.putthreepieces4161ret4162 ld a,(putcastle+sx)4163 add a,164164 ld (putcastle+sx),a4165 ld a,(TempVariableCastleY)4166 inc a4167 ld (TempVariableCastleY),a4168 ld a,(TempVariableCastleX)4169 sub a,24170 ld (TempVariableCastleX),a4171 call putbottomcastles.PutOnePiece4172 ld a,(putcastle+sx)4173 add a,164174 ld (putcastle+sx),a4175 ld a,(TempVariableCastleX)4176 add a,24177 ld (TempVariableCastleX),a4178 call putbottomcastles.PutOnePiece4179 ret4181putbottomcastles:4182 ld hl,Castle14183 call .doputcastle4184 ld hl,Castle24185 call .doputcastle4186 ld hl,Castle34187 call .doputcastle4188 ld hl,Castle441894191.doputcastle:4192 ld a,(hl) 4193 or a4194 ret z 4195 dec a4196 ld (TempVariableCastleY),a4197 inc hl4198 ld a,(hl) 4199 ld (TempVariableCastleX),a4201 ld a,0804202 ld (putcastle+sx),a4203 call .PutOnePiece4204 4205 ld a,(TempVariableCastleX)4206 add a,24207 ld (TempVariableCastleX),a4208 ld a,0964209 ld (putcastle+sx),a4210 call .PutOnePiece4211 4212 ld a,(TempVariableCastleX)4213 sub a,24214 ld (TempVariableCastleX),a4215 4216 ld a,1124217 ld (putcastle+sx),a4218 ld a,(TempVariableCastleY)4219 inc a4220 ld (TempVariableCastleY),a4222.putthreepieces:4223 call .PutOnePiece4224 ld a,(putcastle+sx)4225 add a,164226 ld (putcastle+sx),a4227 ld a,(TempVariableCastleX)4228 inc a4229 ld (TempVariableCastleX),a4230.puttwopieces:4231 call .PutOnePiece4232 ld a,(putcastle+sx)4233 add a,164234 ld (putcastle+sx),a4235 ld a,(TempVariableCastleX)4236 inc a4237 ld (TempVariableCastleX),a4238.PutOnePiece:4239 ld a,(activepage) 4240 or a4241 ld hl,mappage14242 jp z,.mirrorpageset4243 ld hl,mappage04244.mirrorpageset:4246 ld a,(mappointerx)4247 ld b,a4248 ld a,(TempVariableCastleX)4249 sub a,b4250 ret c4251 cp TilesPerRow4252 ret nc4254 ld d,04255 ld e,a 4256 4257 add a,a 4258 add a,a 4259 add a,a 4260 add a,a 4262 add a,buildupscreenXoffset 4264 ld (putcastle+dx),a4266 ld a,(mappointery)4267 ld b,a4268 ld a,(TempVariableCastleY) 4269 sub a,b4270 ret c 4271 cp TilesPerColumn4272 ret nc 4274 ld b,a 4275 add a,a 4276 add a,a 4277 add a,a 4278 add a,a 4280 add a,buildupscreenYoffset 4282 ld (putcastle+dy),a42844287 add hl,de4288 4289 4290 4292 push hl4293 ld de,TilesPerRow4294 ld h,04295 ld l,b4296 call MultiplyHlWithDE 4297 pop de4298 add hl,de430143064312 ld (hl),25543134315 ld hl,putcastle4316 jp docopy4318putbottomheroes:4319 ld hl,doputheros.WaterTileFoundBottomHero4320 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4322 ld a,(activepage) 4323 or a4324 ld hl,mappage14325 jr z,.mirrorpageset4326 ld hl,mappage04327.mirrorpageset:4328 ld (doputheros.SelfModifyingCodeSetPointerInMapToHero),hl4330 ld a,164331 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4332 ld a,14333 ld (doputheros.SelfModifyingCodeAddYToHero),a4334 jp doputheros4336puttopheroes:4337 ld hl,doputheros.WaterTileFoundTopHero4338 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4339 4340 xor a4341 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4342 ld (doputheros.SelfModifyingCodeAddYToHero),a4344doputheros: 4345 ld hl,256*00 + 000 | ld ix,pl1hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4346 ld hl,256*00 + 016 | ld ix,pl1hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4347 ld hl,256*00 + 032 | ld ix,pl1hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4348 ld hl,256*00 + 048 | ld ix,pl1hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4349 ld hl,256*00 + 064 | ld ix,pl1hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4350 ld hl,256*00 + 080 | ld ix,pl1hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4351 ld hl,256*00 + 096 | ld ix,pl1hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4352 ld hl,256*00 + 112 | ld ix,pl1hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4354 ld hl,256*00 + 128 | ld ix,pl2hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4355 ld hl,256*00 + 144 | ld ix,pl2hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4356 ld hl,256*00 + 160 | ld ix,pl2hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4357 ld hl,256*00 + 176 | ld ix,pl2hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4358 ld hl,256*00 + 192 | ld ix,pl2hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4359 ld hl,256*00 + 208 | ld ix,pl2hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4360 ld hl,256*00 + 224 | ld ix,pl2hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4361 ld hl,256*00 + 240 | ld ix,pl2hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4363 ld hl,256*32 + 000 | ld ix,pl3hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4364 ld hl,256*32 + 016 | ld ix,pl3hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4365 ld hl,256*32 + 032 | ld ix,pl3hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4366 ld hl,256*32 + 048 | ld ix,pl3hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4367 ld hl,256*32 + 064 | ld ix,pl3hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4368 ld hl,256*32 + 080 | ld ix,pl3hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4369 ld hl,256*32 + 096 | ld ix,pl3hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4370 ld hl,256*32 + 112 | ld ix,pl3hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4372 ld hl,256*32 + 128 | ld ix,pl4hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4373 ld hl,256*32 + 144 | ld ix,pl4hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4374 ld hl,256*32 + 160 | ld ix,pl4hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4375 ld hl,256*32 + 176 | ld ix,pl4hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4376 ld hl,256*32 + 192 | ld ix,pl4hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4377 ld hl,256*32 + 208 | ld ix,pl4hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4378 ld hl,256*32 + 224 | ld ix,pl4hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4379 ld hl,256*32 + 240 | ld ix,pl4hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4380 ret43814390.doputhero:4391 ld a,(mappointery) 4392 ld b,a4393 ld a,(ix+HeroY) 4394 .SelfModifyingCodeAddYToHero: equ $+14395 add a,0004396 sub a,b4397 ret c 4398 cp TilesPerColumn4399 ret nc 4400 ld c,a 4402 ld a,(mappointerx) 4403 ld b,a4404 ld a,(ix+HeroX) 4405 sub a,b4406 ret c 4407 cp TilesPerRow4408 ret nc 4410 ld d,04411 ld e,a 4412 4413 add a,a 4414 add a,a 4415 add a,a 4416 add a,a 4417 add a,buildupscreenXoffset 4418 ld (putherotopbottom+dx),a 4420 ld a,c 4421 add a,a 4422 add a,a 4423 add a,a 4424 add a,a 4425 add a,buildupscreenYoffset 4426 ld (putherotopbottom+dy),a 4428 ld a,l 4429 ld (putherotopbottom+sx),a 4431 ld a,h 4432 .SelfModifyingCodeAddYToSYHero: equ $+14433 add a,0004434 ld (putherotopbottom+sy),a 4435 4436 .SelfModifyingCodeSetPointerInMapToHero: equ $+14437 ld hl,00004438 add hl,de 4439 4441 push hl4442 ld de,TilesPerRow4443 ld h,04444 ld l,c4445 call MultiplyHlWithDE 4446 pop de4447 add hl,de4448 4449 4451 44524462 ld a,(hl) 4463 cp 254 4464 call z,.behindheroandtree 4465 ld (hl),255 4466 cp amountoftransparantpieces 4467 jp nc,.notbehindtree 4468 ld (hl),254 4469 cp non_see_throughpieces 4470 ret c 4472.FirstWaterpiece: equ 584473 cp .FirstWaterpiece 4474 .SelfmodifyingCodeWaterTileJumpAddress: equ $+14475 jp nc,$ffff4477 4478 ld d,a 4479 ld hl,putherotopbottom4480 call docopy 44824487 4488 ld a,d 4489 add a,a 4490 ld e,a4491 ld d,04492 ld hl,mirrortransparentpieces-324493 add hl,de 4494 .WaterTileEntry:4495 ld a,(hl)4496 ld (putbackgroundoverhero+sy),a4497 inc hl 4498 ld a,(hl)4499 ld (putbackgroundoverhero+sx),a4500 4501 ld a,(putherotopbottom+dy)4502 ld (putbackgroundoverhero+dy),a4503 ld a,(putherotopbottom+dx)4504 ld (putbackgroundoverhero+dx),a4505 ld hl,putbackgroundoverhero4506 jp docopy 4508 .WaterTileFoundTopHero:4509 4510 ld hl,putherotopbottom4511 jp docopy 4513 .WaterTileFoundBottomHero:4514 ld hl,putherotopbottom4515 call docopy 4516 ld hl,.WaterTile4517 jr .WaterTileEntry4519 .WaterTile: db 080,2404521 .notbehindtree:4522 ld hl,putherotopbottom4523 jp docopy 4525 .behindheroandtree: 4527 push hl4528 ld a,(putherotopbottom+dx)4530 sub a,buildupscreenXoffset 4532 srl a 4533 srl a 4534 srl a 4535 srl a 4536 ld b,a 4542 ld a,(putherotopbottom+dy)4544 sub a,buildupscreenYoffset 4546 srl a 4547 srl a 4548 srl a 4549 srl a 4550 ld c,a 45524554 ld hl,mapdata4555 ld de,(mappointerx)4556 ld a,e4557 add a,b4558 ld e,a4559 add hl,de4560 4561 4562 4563 ld a,(mappointery)4564 add a,c45664567 push hl4568 ld de,(maplenght)4569 ld h,04570 ld l,a4571 call MultiplyHlWithDE 4572 pop de4573 add hl,de457445784587 ld a,(hl) 4589 pop hl4590 ret4592SetHero1ForCurrentPlayerInIX: 4593 ld a,(whichplayernowplaying?)4594 dec a4595 ld ix,pl1hero1y4596 ret z4597 dec a4598 ld ix,pl2hero1y4599 ret z4600 dec a4601 ld ix,pl3hero1y4602 ret z4603 ld ix,pl4hero1y4604 ret4606SetHeroUsingHeroWindowPointer: 4607 ld de,lenghtherotable4609 ld a,(herowindowpointer)4610 or a4611 ret z4612 ld b,a4613 .loop:4614 add ix,de4615 djnz .loop 4616 ret4618FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime:4619 ld a,(ix+HeroStatus) 4620 cp 2544621 ret nz4622 ld de,-lenghtherotable4623 add ix,de4624 ld a,(herowindowpointer)4625 sub a,14626 jp c,CheckHeroArrowDown4627 ld (herowindowpointer),a4628 jp FindHeroThatIsNotInCastle 4630FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime:4631 ld a,(ix+HeroStatus) 4632 cp 2544633 ret nz4634 ld de,lenghtherotable4635 add ix,de4636 ld a,(herowindowpointer)4637 add a,14638 cp 84639 ret nc4640 ld (herowindowpointer),a4641 jp FindHeroThatIsNotInCastle4642 4643FindHeroThatIsNotInCastle:4644 ld a,(ix+HeroStatus) 4645 cp 2544646 ret nz4647 add ix,de4648 jp FindHeroThatIsNotInCastle 4650SetHeroForWindow1DeterminedByHeroWindowPointerInIX:4651 call SetHeroUsingHeroWindowPointer 4652 jp FindHeroThatIsNotInCastle4653 4654SetHeroForWindow2DeterminedByHeroWindowPointerInIX:4655 call SetHeroUsingHeroWindowPointer 4656 call FindHeroThatIsNotInCastle4657 add ix,de4658 jp FindHeroThatIsNotInCastle4660SetHeroForWindow3DeterminedByHeroWindowPointerInIX:4661 call SetHeroUsingHeroWindowPointer 4662 call FindHeroThatIsNotInCastle4663 add ix,de4664 call FindHeroThatIsNotInCastle4665 add ix,de4666 jp FindHeroThatIsNotInCastle4668ChangeManaAndMovement?: db 34669herowindowpointer: db 0 4670SetHeroesInWindows?: db 3 4671CastleWindowPointer: db 0 4672SetCastlesInWindows?: db 34674checkcurrentplayerhuman: 4676 ld a,(whichplayernowplaying?)4677 ld hl,player1human?4678 ld b,44679.loop:4680 dec a4681 jp z,.playerfound4682 inc hl4683 djnz .loop4684.playerfound:4685 or (hl) 4691 ret46924694MOUSIDBuffer: ds 1 4695MSEPRTBuffer: ds 1 4697MOUSID: ds 1 4698MSEPRT: ds 1 47004701MovePointer: 4702 ld a,(GameStatus) 4703 cp 44704 jr z,.EndCheckFreezePointer4705 call checkcurrentplayerhuman 4706 ret z4707 .EndCheckFreezePointer:4709 ld a,(MOUSID)4710 or a4711 jp z,ReadOutKeyboardAndMovePointer4712 471347184724RDPADL:4725 LD DE,(MSEPRT)4726 LD A,15 4727 CALL RD_PSG4728 AND %1000 1111 4729 OR E 4730 LD E,A47324733 ld a,(GameStatus) 4734 cp 24735 ld h,240 4736 ld l,000 4737 jr nc,.XBorderSet4738 ld h,xcoorspriteright 4739 ld l,xcoordinateStartPlayfield 4740 .XBorderSet:47424743 LD B,40 4744 LD C,20 4745 CALL RPDL.24746 CALL RPDL.04747 LD c,A 47494750 jp m,.MoveLeft47514752 .MoveRight:4753 ld a,(spat+1)4754 add a,c4755 jr c,.SetRightBorder4756 cp h 4757 jr c,.SetxRight4758 .SetRightBorder:4759 ld a,h 4760 .SetxRight:4761 ld (spat+1),a4762 ld (spat+5),a4763 ld (spat+9),a4764 jp .EndMoveLeft 476547674768 .MoveLeft:4769 ld a,(spat+1)4770 add a,c4771 jr nc,.SetLeftBorder4772 cp l4773 jr nc,.SetXLeft 4774 .SetLeftBorder:4775 ld a,l 4776 .SetXLeft:4777 ld (spat+1),a4778 ld (spat+5),a4779 ld (spat+9),a4780 .EndMoveLeft:478147834784 ld a,(GameStatus) 4785 cp 34786 ld h,016 4787 ld l,218 4788 jr z,.YBorderSet4790 cp 24791 ld h,000 4792 ld l,1964793 jr nc,.YBorderSet4795 ld h,ycoordinateStartPlayfield4796 ld l,ycoorspritebottom4797 .YBorderSet:47994800 LD B,40 4801 LD C,20 4802 CALL RPDL.14803 CALL RPDL.04804 LD c,A 48064807 jp m,.MoveUp48084809 .MoveDown:4810 ld a,(spat+0)4811 add a,c4812 jr c,.SetDownBorder4813 cp l4814 jr c,.SetYDown4815 .SetDownBorder:4816 ld a,l 4817 .SetYDown:4818 cp 2164819 jr z,.Y216Found4820 ld (spat+0),a4821 ld (spat+4),a4822 ld (spat+8),a4823 jp .EndMoveUp 482448264827 .MoveUp:4828 ld a,(spat+0)4829 add a,c4830 jr nc,.SetUpBorder4831 cp h4832 jr nc,.SetYUp 4833 .SetUpBorder:4834 ld a,h 4835 .SetYUp:4837 cp 2164838 jp nz,.EndCheck2164839 .Y216Found:4840 ld a,2154841 .EndCheck216:4843 ld (spat+0),a4844 ld (spat+4),a4845 ld (spat+8),a4846 .EndMoveUp:48474849 EI 4850 RET 4851 4852RPDL.0: RLCA 4853 RLCA 4854 RLCA 4855 RLCA 4856 LD D,A4857 CALL RPDL.14858 OR D4859 NEG 4860 RET 4861 4862RPDL.1: LD B,74863 LD C,64864RPDL.2: LD A,154865 CALL WR_PSG4866 LD A,(MSEPRT)4867 AND $304868 XOR E4869 LD E,A4870DLYCAL: CALL DLY_M24871 LD A,144872 CALL RD_PSG4873 AND $0F4874 RET 4875 48764878DLY_M2: DJNZ DLY_M24879 RET 48804888 4889RD_PSG: DI 4890 OUT ($A0),A4891 NOP 4892 NOP 4893 IN A,($A2)4894 EI 4895 RET 4896WR_PSG: DI 4897 OUT ($A0),A4898 LD A,E4899 OUT ($A1),A4900 EI 4901 RET 4919movecursory: 4920 ex af,af'4921 ld a,(GameStatus) 4923 ld e,016 4924 cp 34925 ld d,212-16 + 6 +16 4926 jr z,.XBorderSet4928 ld e,0004929 cp 24930 ld d,212-164931 jr nc,.XBorderSet4932 ld d,ycoorspritebottom4933 ld e,ycoordinateStartPlayfield4934 .XBorderSet:4935 ex af,af'4938 ld hl,spat+0 4939 or a 4940 jp m,.up4941 .down:4942 add a,(hl)4943 jp c,.outofscreenbottom4944 cp d4945 jp c,.sety4946 .outofscreenbottom:4947 ld a,d4948 jp .sety4949 .up:4950 add a,(hl)4952 ret nc4954 cp e 4956 jp nc,.sety4957 ld a,e4958 .sety:4959 ld (hl),a4960 ret4962movecursorx:4963 ex af,af'4964 ld a,(GameStatus) 4965 cp 24966 ld d,256-164967 ld e,0004968 jr nc,.XBorderSet4969 ld d,xcoorspriteright4970 ld e,xcoordinateStartPlayfield4971 .XBorderSet:4972 ex af,af'4973 4974 ld hl,spat+1 4975 or a 4976 jp m,.left4977 .right:4978 add a,(hl)4979 jp c,.outofscreenright4980 cp d 4981 jp c,.setx4982 .outofscreenright:4983 ld a,d 4984 jp .setx4985 .left:4986 add a,(hl)4987 ret nc4988 4989 cp e 4991 jp nc,.setx4992 ld a,e 4993 .setx:4994 ld (hl),a4995 ret4997PopulateKeyMatrix:4998 in a,($aa)4999 and %111100005000 ld d,a5001 ld c,$a95002 ld b,115003 ld hl,keys + 115004.Loop: ld a,d5005 or b5006 out ($aa),a5007 ind5008 jp nz,.Loop5009 ld a,d5010 out ($aa),a5011 ind5012 ret5013 50145016keys: equ $fbe55017ReadOutKeyboardAndMovePointer:50185023 ld a,(ControlsOnInterrupt)5024 ld bc,0 50265027.right:5028 bit 3,a 5029 jp z,.down5030 inc b5031.down:5032 bit 1,a 5033 jp z,.up5034 inc c5035.up:5036 bit 0,a 5037 jp z,.left5038 dec c5039.left:5040 bit 2,a 5041 jp z,.end5042 dec b5043.end:5045 ld a,(keys+6)5046 bit 0,a 5047 jp nz,.endcheckshift5048 ld a,b5049 add a,a5050 ld b,a5051 ld a,c5052 add a,a5053 ld c,a5054.endcheckshift:5056 ld a,b5057 add a,a5058 call movecursorx 5059 ld a,c5060 add a,a5061 call movecursory 5063 ld a,(spat+0)5064 cp 2165065 jp nz,.EndCheck216 5066 ld a,2155067 ld (spat+0),a5068 .EndCheck216:5069 ld (spat+4),a5070 ld (spat+8),a5071 ld a,(spat+1)5072 ld (spat+5),a5073 ld (spat+9),a5074 ret5076ycoordinateStartPlayfield: equ 045077xcoordinateStartPlayfield: equ 065078ycoorspritebottom: equ 1805079xcoorspriteright: equ 2395081GameStatus: db 0 5082SX_Hud: equ 196 5083spritecharacter: db 255 5084setspritecharacter: 5085 ld a,(GameStatus) 5086 or a5087 jr z,.Ingame5088 dec a5089 jr z,.HeroOverview5090 dec a5091 jr z,.CastleOverview5092 dec a5093 jr z,.Battle5095 .Battle:5096 ld a,(slot.page12rom) 5097 out ($a8),a5098 ld a,BattleCodeBlock5099 ld ($6000),a 5100 ld a,BattleCodePage2Block5101 ld ($7000),a 5103 ld a,(ShowExplosionSprite?) 5104 or a5105 call nz,HandleExplosionSprite5106 ld a,(ShootProjectile?)5107 or a5108 call nz,HandleProjectileSprite5110 5111 ld a,(LeftOrRightPlayerLostEntireArmy?)5112 or a5113 jr z,.SelfModifyingCodeSpriteCharacterBattle-15114 ld hl,CursorHand5115 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl5116 ld hl,SpriteColCursorSprites5117 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5118 5119 .SelfModifyingCodeSpriteCharacterBattle: Equ $+15120 ld hl,CursorHand5121 jp .setcharacter5123 .CastleOverview:5124 ld hl,SpriteColPoiterInCastleSprite5125 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5126 ld hl,CursorPointerIncastle5127 jp .setcharacter5129 .HeroOverview:5130 ld hl,CursorHand5131 jp .setcharacter5133 .Ingame:5134 ld hl,SpriteColCursorSprites5135 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5136 ld a,(LockMiniMapOn?)5137 or a5138 ld hl,CursorHand5139 jp nz,.setcharacter51405145 ld a,(ControlsOnInterrupt)5146 bit 2,a 5147 jr z,.EndCheckShowScrollArrowLeft5148 ld a,(spat+1) 5149 cp xcoordinateStartPlayfield5150 jp z,.ShowScrollArrowLeft 5151 .EndCheckShowScrollArrowLeft:51535158 ld a,(ControlsOnInterrupt)5159 bit 3,a 5160 jr z,.EndCheckShowScrollArrowRight5161 ld a,(spat+1) 5162 cp xcoorspriteright5163 jp z,.ShowScrollArrowRight 5164 .EndCheckShowScrollArrowRight:51665171 ld a,(ControlsOnInterrupt)5172 bit 0,a 5173 jr z,.EndCheckShowScrollArrowTop5174 ld a,(spat) 5175 cp ycoordinateStartPlayfield51775178 jp z,.ShowScrollArrowTop 5179 .EndCheckShowScrollArrowTop:51815186 ld a,(ControlsOnInterrupt)5187 bit 1,a 5188 jr z,.EndCheckShowScrollArrowBottom5189 ld a,(spat) 5190 cp ycoorspritebottom 5191 jp z,.ShowScrollArrowBottom 5192 .EndCheckShowScrollArrowBottom:51945198 ld a,(spat+1) 5199 cp SX_Hud 5200 jp nc,.MousepointInHud 520352065207 ld a,(spat+1) 5208 add a,addxtomouseDiagonalPointer 5209 and %1111 00005210 srl a 5211 srl a 5212 srl a 5213 srl a 5214 ld l,a5215 ld a,(mappointerx)5216 add a,l5217 ld l,a5218 ld (mouseposx),a5220 ld a,(spat) 5222 add a,addytomouseDiagonalPointer 5224 jp c,.notcarry25225 xor a5226.notcarry2:5227 and %1111 00005228 srl a 5229 srl a 5230 srl a 5231 srl a 5232 ld h,a5233 ld a,(mappointery)5234 add a,h5235 ld h,a5236 ld (mouseposy),a52375239 ld de,lenghtherotable5240 ld a,(whichplayernowplaying?) | cp 1 | ld ix,pl1hero1y | call .checkpointeronhero 5241 ld a,(whichplayernowplaying?) | cp 2 | ld ix,pl2hero1y | call .checkpointeronhero 5242 ld a,(whichplayernowplaying?) | cp 3 | ld ix,pl3hero1y | call .checkpointeronhero 5243 ld a,(whichplayernowplaying?) | cp 4 | ld ix,pl4hero1y | call .checkpointeronhero 5244 .EndCheckPointerOnHero:5246 call .CheckPointerOnCastle 5247 call .checkpointeroncreature 5249 ld ix,(plxcurrentheroAddress)5250 ld a,(ix+HeroStatus)5251 cp 2555252 ld hl,CursorHand5253 jp z,.setcharacter 5255 call .checkpointeritem 5256 jp .shoe 5259 .CheckPointerOnCastle:5260 call .SetMappositionMousePointsTo 5262 ld a,(hl) 5263 cp 2545264 jr z,.PointerOnCentreOfCastle5266 sbc hl,de5267 ld a,(hl) 5268 cp 2545269 ret nz5271 .PointerOnEntranceOfCastle: 5272 call .SetCastleEntranceMousePointsToInIX5273 call .CheckFriendlyCastle5274 jr z,.FriendlyCastleShowCursorWalkingBoots5276 .EnemyCastle:5277 pop af 5279 ld ix,(plxcurrentheroAddress)5280 ld a,(ix+HeroStatus)5281 cp 2555282 ld hl,CursorHand5283 jp z,.setcharacter 5285 ld hl,CursorSwords5286 jp .setcharacter5288 .FriendlyCastleShowCursorWalkingBoots:5289 pop af 5291 ld ix,(plxcurrentheroAddress)5292 ld a,(ix+HeroStatus)5293 cp 2555294 ld hl,CursorHand5295 jp z,.setcharacter 5297 ld hl,CursorWalkingBoots5298 jp .setcharacter5299 5300 .PointerOnCentreOfCastle: 5301 call .SetCastleCentreMousePointsToInIX5302 call .CheckFriendlyCastle5303 ret nz 5305 .FriendlyCastle:5306 ld (WhichCastleIsPointerPointingAt?),ix5307 pop af 5308 ld hl,CursorEnterCastle5309 jp .setcharacter5311 .CheckFriendlyCastle:5312 ld a,(whichplayernowplaying?)5313 cp (ix+CastlePlayer)5314 ret5316 .SetCastleCentreMousePointsToInIX:5317 ld ix,Castle1 | call .check | ret z5318 ld ix,Castle2 | call .check | ret z5319 ld ix,Castle3 | call .check | ret z5320 ld ix,Castle45321 ret5322 .check:5323 ld a,(mouseposx) 5324 dec a5325 cp (ix+CastleX)5326 ret nz5327 ld a,(mouseposy) 5328 inc a5329 cp (ix+CastleY)5330 ret5332 .SetCastleEntranceMousePointsToInIX:5333 ld ix,Castle1 | call .check2 | ret z5334 ld ix,Castle2 | call .check2 | ret z5335 ld ix,Castle3 | call .check2 | ret z5336 ld ix,Castle45337 ret5338 .check2:5339 ld a,(mouseposx) 5340 dec a5341 dec a5342 cp (ix+CastleX)5343 ret nz5344 ld a,(mouseposy) 5345 inc a5346 dec a5347 cp (ix+CastleY)5348 ret5350 .checkpointeritem:5351 call .SetMappositionMousePointsTo 5352 ld a,(hl)5353 cp 1285354 ret nc 5356 cp 64 5357 ret z53595360 or a5361 ret z5363 pop af 53655370 ld a,(NewPrControlsOnInterrupt)5371 bit 5,a 5372 jr nz,.TrigBPressed5374 ld hl,CursorWalkingBoots5375 jp .setcharacter5377 .checkpointeroncreature:5378 call .SetMappositionMousePointsTo 5380 ld a,(hl)5381 cp 1925382 ret nc 5385 cp 1285386 ret c 5388 pop af 53905395 ld a,(NewPrControlsOnInterrupt)5396 bit 5,a 5397 jr nz,.TrigBPressed5399 ld ix,(plxcurrentheroAddress)5400 ld a,(ix+HeroStatus)5401 cp 2555402 ld hl,CursorHand5403 jp z,.setcharacter 5405 ld hl,CursorSwords5406 jp .setcharacter5408 .TrigBPressed:5409 ld a,35410 ld (DisplayEnemyStatsRightClick?),a5412 ld a,(hl) 5413 ld (MonsterHerocollidedWithOnMap),a5414 ld a,l5415 ld (XAddressOfMonsterHerocollidedWithOnMap),a5416 inc hl 5417 ld a,(hl) 5418 ld (MonsterHerocollidedWithOnMapAmount),a5419 ret5421 .SetMappositionMousePointsTo: 542454295433 ld a,(mouseposy) 54355437 ld de,(maplenght)5438 ld h,05439 ld l,a5440 call MultiplyHlWithDE 5441 ld bc,mapdata 5443 add hl,bc54445446 .SetX:5447 ld a,(mouseposx)5448 ld c,a5449 ld b,05450 add hl,bc5451 ret5453.checkpointeronhero: 5454 jp z,.checkpointerfriend5455 jp .checkpointerenemy5457 5458 .checkpointerenemy:5459 ld b,amountofheroesperplayer5460 .checkpointerenemyloop:5461 5462 ld a,h 5464 dec a5466 cp (ix+HeroY) 5467 jp nz,.endcheck15468 ld a,l 5469 cp (ix+HeroX) 5470 jp nz,.endcheck15471 ld a,(ix+HeroStatus) 5472 or a5473 jp p,.pointeronenemyhero5474 5475 .endcheck1:5476 add ix,de 5477 djnz .checkpointerenemyloop5478 ret5480 .pointeronenemyhero:5481 pop af 54835488 ld a,(NewPrControlsOnInterrupt)5489 bit 5,a 5490 jr nz,.TrigBPressedEnemyHero5492 ld ix,(plxcurrentheroAddress)5493 ld a,(ix+HeroStatus)5494 cp 2555495 ld hl,CursorHand5496 jp z,.setcharacter 5498 ld hl,CursorSwords5499 jp .setcharacter5500 5502 .TrigBPressedEnemyHero:5503 ld a,35504 ld (DisplayEnemyHeroStatsRightClick?),a5505 ld (EnemyHeroThatPointerIsOn),ix5506 ret5509 .checkpointerfriend: 5510 ld b,amountofheroesperplayer5511 .CheckPointerFriendlyHeroLoop:5512 ld a,h 5514 dec a5516 cp (ix+HeroY) 5517 jp nz,.endcheck25518 ld a,l 5519 cp (ix+HeroX) 5520 jp nz,.endcheck25521 ld a,(ix+HeroStatus) 5522 or a5523 jp p,.PointerIsOnFriendlyHero5524 .endcheck2:5525 add ix,de 5526 djnz .CheckPointerFriendlyHeroLoop5527 ret5529 .PointerIsOnFriendlyHero:5530 pop af 5532 ld hl,(plxcurrentheroAddress)5533 push ix 5534 pop bc5535 xor a5536 sbc hl,bc5537 ld hl,CursorHand5538 jp z,.setcharacter5539 ld hl,CursorSwitchingArrows5540 jp .setcharacter5542.MousepointInHud: 5543 ld hl,CursorHand5544 jp .setcharacter5546.shoe:5547 ld hl,CursorBoots5548 jp .setcharacter5549 5550.ShowScrollArrowBottom:5551 ld hl,CursorArrowDown5552 jp .setcharacter5554.ShowScrollArrowTop:5555 ld hl,CursorArrowUp5556 jp .setcharacter5558.ShowScrollArrowRight:55595564 ld a,(ControlsOnInterrupt)5565 bit 0,a 5566 jr z,.EndCheckShowScrollArrowTopAndRight5567 ld a,(spat) 5568 cp ycoordinateStartPlayfield5569 jp z,.ShowScrollArrowTopAndRight 5570 .EndCheckShowScrollArrowTopAndRight:55725577 ld a,(ControlsOnInterrupt)5578 bit 1,a 5579 jr z,.EndCheckShowScrollArrowBottomAndRight5580 ld a,(spat) 5581 cp ycoorspritebottom5582 jp z,.ShowScrollArrowBottomAndRight5583 .EndCheckShowScrollArrowBottomAndRight:5585.right:5586 ld hl,CursorArrowRight5587 jp .setcharacter5589.ShowScrollArrowTopAndRight:5590 ld hl,CursorArrowRightUp5591 jp .setcharacter5593.ShowScrollArrowBottomAndRight:5594 ld hl,CursorArrowRightDown5595 jp .setcharacter5597.ShowScrollArrowLeft:55985603 ld a,(ControlsOnInterrupt)5604 bit 0,a 5605 jr z,.EndCheckShowScrollArrowTopAndLeft5606 ld a,(spat) 5607 cp ycoordinateStartPlayfield5608 jp z,.ShowScrollArrowTopAndLeft 5609 .EndCheckShowScrollArrowTopAndLeft:56125617 ld a,(ControlsOnInterrupt)5618 bit 1,a 5619 jr z,.EndCheckShowScrollArrowBottomAndLeft5620 ld a,(spat) 5621 cp ycoorspritebottom 5622 jp z,.ShowScrollArrowBottomAndLeft 5623 .EndCheckShowScrollArrowBottomAndLeft:5625.left:5626 ld hl,CursorArrowLeft5627 jp .setcharacter5629.ShowScrollArrowTopAndLeft:5630 ld hl,CursorArrowLeftUp 5631 jp .setcharacter5633.ShowScrollArrowBottomAndLeft:5634 ld hl,CursorArrowDownLeft5635 jp .setcharacter5637.setcharacter: 5638 ld de,(CurrentCursorSpriteCharacter)5639 call CompareHLwithDE 5640 ret z5641 add hl,de5642 ld (CurrentCursorSpriteCharacter),hl5643 .CastleEntry:5644 56455646 xor a 5647 ld hl,sprcharaddr 5648 call SetVdp_Write5650 ld hl,(CurrentCursorSpriteCharacter)5651 5652 ld c,$985653 call outix96 56565658 xor a 5659 ld hl,sprcoladdr 5660 call SetVdp_Write5661 ld c,$985663 .SelfModifyingCodeSpriteColors: equ $+15664 ld hl,SpriteColCursorSprites5665 56665668 5669 call outix48 56725674 xor a 5675 ld hl,sprcharaddr+(3*32) 5676 call SetVdp_Write5678 ld hl,SpriteCharMapSprites5679 ld c,$985680 call outix208 5681 call outix208 5683 xor a 5684 ld hl,sprcoladdr+(3*16) 5685 call SetVdp_Write5686 ld c,$985688 ld hl,SpriteColMapSprites5689 call outix208 5690 ret5693CurrentCursorSpriteCharacter: dw CursorHand5695CursorArrowUp: equ SpriteCharCursorSprites + (00 * 32*3)5696CursorArrowRightUp: equ SpriteCharCursorSprites + (01 * 32*3)5697CursorArrowRight: equ SpriteCharCursorSprites + (02 * 32*3)5698CursorArrowRightDown: equ SpriteCharCursorSprites + (03 * 32*3)5699CursorArrowDown: equ SpriteCharCursorSprites + (04 * 32*3)5700CursorArrowDownLeft: equ SpriteCharCursorSprites + (05 * 32*3)5701CursorArrowLeft: equ SpriteCharCursorSprites + (06 * 32*3)5702CursorArrowLeftUp: equ SpriteCharCursorSprites + (07 * 32*3)5703CursorSwitchingArrows: equ SpriteCharCursorSprites + (08 * 32*3)5704CursorBoots: equ SpriteCharCursorHandDiagonal 5705CursorWalkingBoots: equ SpriteCharCursorSprites + (10 * 32*3)5706CursorHand: equ SpriteCharCursorSprites + (11 * 32*3)5707CursorSwords: equ SpriteCharCursorSprites + (12 * 32*3)5708CursorEnterCastle: equ SpriteCharCursorSprites + (13 * 32*3)5709CursorProhibitionSign: equ SpriteProhibitionSignChar5710CursorBowAndArrow: equ SpriteBowAndArrowChar5711CursorBrokenArrow: equ SpriteBowAndArrowChar + (01 * 32*3)5712CursorPointerIncastle: equ SpritePoiterInCastleChar5714CursorBootsOld: equ SpriteCharCursorSprites + (09 * 32*3)5717CursorSwordLeftUp: equ SpriteCharSword8DirectionsSprites + (00 * 32*3)5718CursorSwordLeftDown: equ SpriteCharSword8DirectionsSprites + (01 * 32*3)5719CursorSwordRightUp: equ SpriteCharSword8DirectionsSprites + (02 * 32*3)5720CursorSwordRightDown: equ SpriteCharSword8DirectionsSprites + (03 * 32*3)5721CursorSwordRight: equ SpriteCharSword8DirectionsSprites + (04 * 32*3)5722CursorSwordLeft: equ SpriteCharSword8DirectionsSprites + (05 * 32*3)5723CursorSwordUp: equ SpriteCharSword8DirectionsSprites + (06 * 32*3)5724CursorSwordDown: equ SpriteCharSword8DirectionsSprites + (07 * 32*3)5726colorlightgreen: equ 015727colormidgreen: equ 025728colorblue: equ 045729colorlightbrown: equ 055730colormiddlebrown: equ 065731colordarkbrown: equ 075732colordarkred: equ 085733colorred: equ 095734colorsnowishwhite: equ 105735colorpink: equ 115736colorwhite: equ 125737colorblack: equ 135738colordarklightgrey: equ 145739colordarkDarkgrey: equ 155742SpriteCharCursorHandDiagonal:5743 incbin "../sprites/sprconv FOR SINGLE SPRITES/HandPointerDiagonal.spr",0,32*3 * 15746SpriteCharCursorSprites:5747 incbin "../sprites/sprconv FOR SINGLE SPRITES/CursorSprites.spr",0,32*3 * 145748SpriteProhibitionSignChar:5749 ../sprites/ProhibitionSign.tgs.gen16 db %000000007 db %000000118 db %000011009 db %0001000010 db %0010001111 db %0010010012 db %0100100113 db %0100101014 db %0100110015 db %0100100016 db %0010000117 db %0010001118 db %0001000019 db %0000110020 db %0000001121 db %0000000022 db %0000000023 db %1100000024 db %0011000025 db %0000100026 db %1100010027 db %1000010028 db %0001001029 db %0011001030 db %0101001031 db %1001001032 db %0010010033 db %1100010034 db %0000100035 db %0011000036 db %1100000037 db %000000003943 db %0000000044 db %0000000045 db %0000001046 db %0000111147 db %0001110048 db %0001100049 db %0011000050 db %0011000051 db %0011000152 db %0011001153 db %0001111054 db %0001110055 db %0000110056 db %0000000057 db %0000000058 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %1110000063 db %0011000064 db %0011100065 db %0110110066 db %1100110067 db %1000110068 db %0000110069 db %0000100070 db %0001100071 db %0011000072 db %0000000073 db %0000000074 db %000000007678 db %0000000079 db %0000000080 db %0000000181 db %0000000082 db %0000000083 db %0000000084 db %0000000085 db %0000000186 db %0000001087 db %0000010088 db %0000000089 db %0000000090 db %0000001191 db %0000001192 db %0000000093 db %0000000094 db %0000000095 db %0000000096 db %1100000097 db %0001000098 db %0000100099 db %01000000100 db %10000000101 db %00000000102 db %00000000103 db %00000000104 db %00010000105 db %00100000106 db %11000000107 db %11000000108 db %00000000109 db %00000000111engine.asm5750SpriteProhibitionSignColor:5751 ../sprites/ProhibitionSign.tcs.gen12 db $003 db $0D4 db $0D5 db $006 db $0D7 db $0D8 db $0D9 db $0D10 db $0D11 db $0D12 db $0D13 db $0D14 db $0D15 db $0D16 db $0D17 db $0020 db $0021 db $0022 db $0A23 db $0924 db $0925 db $0926 db $0927 db $0928 db $0929 db $0930 db $0931 db $0932 db $0933 db $0034 db $0035 db $0038 db $0039 db $0040 db $0B41 db $0842 db $0843 db $0B44 db $0B45 db $0B46 db $0B47 db $0B48 db $0A49 db $0B50 db $0B51 db $0852 db $0053 db $0054engine.asm5752SpriteCharSword8DirectionsSprites:5753 ../sprites/Swords8Directions.tgs.gen16 db %000000007 db %011110008 db %011111009 db %0111001010 db %0100000111 db %0010000012 db %0001000013 db %0000100014 db %0000010015 db %0000001016 db %0000000117 db %0000000018 db %0000001119 db %0000001120 db %0000000121 db %0000000022 db %0000000023 db %0000000024 db %0000000025 db %0000000026 db %0000000027 db %1000000028 db %0100010029 db %0010111030 db %0001001031 db %0011101032 db %1111110033 db %1110110034 db %1111011035 db %0011001136 db %1100101037 db %000001003944 db %0000000045 db %0000000046 db %0011100047 db %0011110048 db %0011001049 db %0001100150 db %0000110051 db %0000011052 db %0000001153 db %0000000154 db %0000000055 db %0000000056 db %0000000057 db %0000000158 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %0000000063 db %0000000064 db %0000000065 db %0000000066 db %1000000067 db %0100010068 db %0110010069 db %1111010070 db %1110100071 db %0101000072 db %0010100073 db %1100110074 db %0000010075 db %000000007782 db %0000000083 db %0111100084 db %0111110085 db %0111111086 db %0111111187 db %0011111188 db %0001111189 db %0000111190 db %0000011191 db %0000001192 db %0000000193 db %0000000094 db %0000001195 db %0000001096 db %0000000197 db %0000000098 db %0000000099 db %00000000100 db %00000000101 db %00000000102 db %00000000103 db %10000000104 db %11000100105 db %11101010106 db %11110010107 db %11111010108 db %11110100109 db %11101100110 db %11010010111 db %00110001112 db %11001010113 db %00000100115120 db %00000000121 db %00000001122 db %00000011123 db %00000011124 db %00000000125 db %00000001126 db %00000010127 db %00000100128 db %00001000129 db %00010000130 db %00100000131 db %01000001132 db %01110010133 db %01111100134 db %01111000135 db %00000000136 db %00000100137 db %11001010138 db %00110011139 db %11110110140 db %11101100141 db %11111100142 db %00111010143 db %00010010144 db %00101110145 db %01000100146 db %10000000147 db %00000000148 db %00000000149 db %00000000150 db %00000000151 db %00000000153158 db %00000000159 db %00000000160 db %00000001161 db %00000000162 db %00000000163 db %00000000164 db %00000001165 db %00000011166 db %00000110167 db %00001100168 db %00011001169 db %00110010170 db %00111100171 db %00111000172 db %00000000173 db %00000000174 db %00000000175 db %00000100176 db %11001100177 db %00101000178 db %01010000179 db %11101000180 db %11110100181 db %01100100182 db %01000100183 db %10000000184 db %00000000185 db %00000000186 db %00000000187 db %00000000188 db %00000000189 db %00000000191196 db %00000000197 db %00000001198 db %00000010199 db %00000011200 db %00000000201 db %00000001202 db %00000011203 db %00000111204 db %00001111205 db %00011111206 db %00111111207 db %01111111208 db %01111110209 db %01111100210 db %01111000211 db %00000000212 db %00000100213 db %11001010214 db %00110001215 db %11010010216 db %11101100217 db %11110100218 db %11111010219 db %11110010220 db %11101010221 db %11000100222 db %10000000223 db %00000000224 db %00000000225 db %00000000226 db %00000000227 db %00000000229234 db %00000000235 db %00000000236 db %00000000237 db %00000000238 db %00000000239 db %00000001240 db %00100010241 db %01110100242 db %01001000243 db %01011100244 db %00111111245 db %00110111246 db %01101111247 db %11001100248 db %01010011249 db %00100000250 db %00000000251 db %00011110252 db %00111110253 db %01001110254 db %10000010255 db %00000100256 db %00001000257 db %00010000258 db %00100000259 db %01000000260 db %10000000261 db %00000000262 db %11000000263 db %11000000264 db %10000000265 db %00000000267272 db %00000000273 db %00000000274 db %00000000275 db %00000000276 db %00000000277 db %00000000278 db %00000001279 db %00100010280 db %00100110281 db %00101111282 db %00010111283 db %00001010284 db %00010100285 db %00110011286 db %00100000287 db %00000000288 db %00000000289 db %00000000290 db %00011100291 db %00111100292 db %01001100293 db %10011000294 db %00110000295 db %01100000296 db %11000000297 db %10000000298 db %00000000299 db %00000000300 db %00000000301 db %10000000302 db %00000000303 db %00000000305310 db %00000000311 db %00000000312 db %00000000313 db %00000000314 db %00000000315 db %00000001316 db %00100011317 db %01010111318 db %01001111319 db %01011111320 db %00101111321 db %00110111322 db %01001011323 db %10001100324 db %01010011325 db %00100000326 db %00000000327 db %00011110328 db %00111110329 db %01111110330 db %11111110331 db %11111100332 db %11111000333 db %11110000334 db %11100000335 db %11000000336 db %10000000337 db %00000000338 db %11000000339 db %01000000340 db %10000000341 db %00000000343348 db %00100000349 db %01010011350 db %11001100351 db %01101111352 db %00110111353 db %00111111354 db %01011100355 db %01001000356 db %01110100357 db %00100010358 db %00000001359 db %00000000360 db %00000000361 db %00000000362 db %00000000363 db %00000000364 db %00000000365 db %10000000366 db %11000000367 db %11000000368 db %00000000369 db %10000000370 db %01000000371 db %00100000372 db %00010000373 db %00001000374 db %00000100375 db %10000010376 db %01001110377 db %00111110378 db %00011110379 db %00000000381386 db %00000000387 db %00100000388 db %00110011389 db %00010100390 db %00001010391 db %00010111392 db %00101111393 db %00100110394 db %00100010395 db %00000001396 db %00000000397 db %00000000398 db %00000000399 db %00000000400 db %00000000401 db %00000000402 db %00000000403 db %00000000404 db %10000000405 db %00000000406 db %00000000407 db %00000000408 db %10000000409 db %11000000410 db %01100000411 db %00110000412 db %10011000413 db %01001100414 db %00111100415 db %00011100416 db %00000000417 db %00000000419424 db %00100000425 db %01010011426 db %10001100427 db %01001011428 db %00110111429 db %00101111430 db %01011111431 db %01001111432 db %01010111433 db %00100011434 db %00000001435 db %00000000436 db %00000000437 db %00000000438 db %00000000439 db %00000000440 db %00000000441 db %10000000442 db %01000000443 db %11000000444 db %00000000445 db %10000000446 db %11000000447 db %11100000448 db %11110000449 db %11111000450 db %11111100451 db %11111110452 db %01111110453 db %00111110454 db %00011110455 db %00000000457462 db %00000000463 db %00001110464 db %00011110465 db %00110100466 db %00101000467 db %11111111468 db %01011000469 db %10011000470 db %10011111471 db %11111111472 db %00101000473 db %00110100474 db %00011110475 db %00001110476 db %00000000477 db %00000000478 db %00000000479 db %00000000480 db %00000000481 db %00000000482 db %00000000483 db %11111110484 db %00000001485 db %00000000486 db %11111111487 db %11111110488 db %00000000489 db %00000000490 db %00000000491 db %00000000492 db %00000000493 db %00000000495500 db %00000000501 db %00000000502 db %00000100503 db %00001000504 db %00010000505 db %00010000506 db %10110000507 db %11110111508 db %11110111509 db %00010000510 db %00010000511 db %00001000512 db %00000100513 db %00000000514 db %00000000515 db %00000000516 db %00000000517 db %00000000518 db %00000000519 db %00000000520 db %00000000521 db %00000000522 db %00000000523 db %11111111524 db %11111110525 db %00000000526 db %00000000527 db %00000000528 db %00000000529 db %00000000530 db %00000000531 db %00000000533538 db %00000000539 db %00001110540 db %00011010541 db %00110100542 db %00101000543 db %11101111544 db %00001111545 db %00001111546 db %00001111547 db %11101111548 db %00101000549 db %00110100550 db %00011010551 db %00001110552 db %00000000553 db %00000000554 db %00000000555 db %00000000556 db %00000000557 db %00000000558 db %00000000559 db %11111110560 db %11111111561 db %11111111562 db %11111111563 db %11111110564 db %00000000565 db %00000000566 db %00000000567 db %00000000568 db %00000000569 db %00000000571576 db %00000000577 db %00000000578 db %00000000579 db %00000000580 db %00000000581 db %00000000582 db %01111111583 db %10000000584 db %00000000585 db %11111111586 db %01111111587 db %00000000588 db %00000000589 db %00000000590 db %00000000591 db %00000000592 db %00000000593 db %00000000594 db %01110000595 db %01111000596 db %00101100597 db %00010100598 db %11111111599 db %00011001600 db %00011001601 db %11111010602 db %11111111603 db %00010100604 db %00101100605 db %01111000606 db %01110000607 db %00000000609614 db %00000000615 db %00000000616 db %00000000617 db %00000000618 db %00000000619 db %00000000620 db %00000000621 db %00000000622 db %11111111623 db %01111111624 db %00000000625 db %00000000626 db %00000000627 db %00000000628 db %00000000629 db %00000000630 db %00000000631 db %00000000632 db %00000000633 db %00100000634 db %00010000635 db %00001000636 db %00001000637 db %00001111638 db %11101111639 db %11101101640 db %00001000641 db %00001000642 db %00010000643 db %00100000644 db %00000000645 db %00000000647652 db %00000000653 db %00000000654 db %00000000655 db %00000000656 db %00000000657 db %00000000658 db %01111111659 db %11111111660 db %11111111661 db %11111111662 db %01111111663 db %00000000664 db %00000000665 db %00000000666 db %00000000667 db %00000000668 db %00000000669 db %00000000670 db %01110000671 db %01011000672 db %00101100673 db %00010100674 db %11110111675 db %11110000676 db %11110000677 db %11110000678 db %11110111679 db %00010100680 db %00101100681 db %01011000682 db %01110000683 db %00000000685690 db %00000010691 db %00000100692 db %00000100693 db %00000100694 db %00000100695 db %00000100696 db %00000100697 db %00000100698 db %00000100699 db %01100100700 db %01110100701 db %01101111702 db %00110111703 db %00011100704 db %00000110705 db %00000101706 db %10000000707 db %11000000708 db %11000000709 db %11000000710 db %11000000711 db %11000000712 db %11000000713 db %11000000714 db %11000000715 db %11001100716 db %11011100717 db %11101100718 db %11011000719 db %01110000720 db %01000000721 db %11000000723728 db %00000001729 db %00000001730 db %00000001731 db %00000001732 db %00000001733 db %00000001734 db %00000001735 db %00000001736 db %00000001737 db %00000001738 db %00100001739 db %00010000740 db %00001111741 db %00000011742 db %00000001743 db %00000011744 db %00000000745 db %10000000746 db %10000000747 db %10000000748 db %10000000749 db %10000000750 db %10000000751 db %10000000752 db %10000000753 db %10000000754 db %10001000755 db %00010000756 db %11100000757 db %10000000758 db %10000000759 db %10000000761766 db %00000011767 db %00000111768 db %00000111769 db %00000111770 db %00000111771 db %00000111772 db %00000111773 db %00000111774 db %00000111775 db %01100111776 db %01010111777 db %01101111778 db %00110000779 db %00011100780 db %00000100781 db %00000100782 db %10000000783 db %11000000784 db %11000000785 db %11000000786 db %11000000787 db %11000000788 db %11000000789 db %11000000790 db %11000000791 db %11001100792 db %11010100793 db %11101100794 db %00011000795 db %01110000796 db %01000000797 db %01000000799804 db %00000111805 db %00000100806 db %00011100807 db %00110111808 db %01101111809 db %01110100810 db %01100100811 db %00000100812 db %00000100813 db %00000100814 db %00000100815 db %00000100816 db %00000100817 db %00000100818 db %00000100819 db %00000010820 db %01000000821 db %11000000822 db %01110000823 db %11011000824 db %11101100825 db %11011100826 db %11001100827 db %11000000828 db %11000000829 db %11000000830 db %11000000831 db %11000000832 db %11000000833 db %11000000834 db %11000000835 db %10000000837842 db %00000011843 db %00000011844 db %00000011845 db %00001111846 db %00010000847 db %00100001848 db %00000001849 db %00000001850 db %00000001851 db %00000001852 db %00000001853 db %00000001854 db %00000001855 db %00000001856 db %00000001857 db %00000001858 db %10000000859 db %00000000860 db %10000000861 db %11100000862 db %00010000863 db %10001000864 db %10000000865 db %10000000866 db %10000000867 db %10000000868 db %10000000869 db %10000000870 db %10000000871 db %10000000872 db %10000000873 db %00000000875880 db %00000100881 db %00000100882 db %00011100883 db %00110000884 db %01101111885 db %01010111886 db %01100111887 db %00000111888 db %00000111889 db %00000111890 db %00000111891 db %00000111892 db %00000111893 db %00000111894 db %00000111895 db %00000011896 db %01000000897 db %01000000898 db %01110000899 db %00011000900 db %11101100901 db %11010100902 db %11001100903 db %11000000904 db %11000000905 db %11000000906 db %11000000907 db %11000000908 db %11000000909 db %11000000910 db %11000000911 db %10000000912engine.asm5754SpriteBowAndArrowChar:5755 incbin "../sprites/sprconv FOR SINGLE SPRITES/BowAndArrow.spr",0,32*3 * 025756SpritePoiterInCastleChar:5757 incbin "../sprites/sprconv FOR SINGLE SPRITES/PointerInCastle.spr",0,32*3 * 015759SpriteColPoiterInCastleSprite:5760 ds 16,colorlightbrown| ds 16,colormiddlebrown+64 | ds 16,colorwhite+645761SpriteColCursorSprites:5762 ds 16,colorlightgreen| ds 16,colormidgreen+64 | ds 16,colorwhite+645764SpriteCharMapSprites:5765 ../sprites/MapCornerLeftTop.tgs.gen12 db 873 db 924 db 2085 db 966 db 647 db 648 db 1289 db 12810 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 19219 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 25235 db 24036 db 16037 db 19238 db 12839 db 12840 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5766 ../sprites/MapCornerRightTop.tgs.gen12 db 33 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 23419 db 5820 db 1121 db 422 db 223 db 224 db 125 db 126 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 6351 db 1552 db 753 db 354 db 155 db 156 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5767 ../sprites/MapCornerLeftBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 12811 db 12812 db 6413 db 12814 db 3215 db 22416 db 24817 db 25418 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 12845 db 6446 db 19247 db 4848 db 17249 db 16350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 19266engine.asm5768 ../sprites/MapCornerRightBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 127 db 128 db 229 db 130 db 431 db 732 db 3133 db 12734 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 161 db 262 db 363 db 1264 db 5365 db 19766engine.asm5769 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5770 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5771 ../sprites/MiniMapSquareIcon.tgs.gen15sprite0tgs:6 db %000000017 db %000000018 db %000000019 db %0000000110 db %0000000111 db %0000000112 db %0000000113 db %0000000114 db %0000000115 db %0000000016 db %0000000017 db %0000000018 db %0000000019 db %0000000020 db %0000000021 db %0000000022 db %1111111123 db %0000000124 db %0000000125 db %0000000126 db %0000000127 db %0000000128 db %0000000129 db %0000000130 db %1111111131 db %0000000032 db %0000000033 db %0000000034 db %0000000035 db %0000000036 db %0000000037 db %0000000039engine.asm5772SpriteColMapSprites:5773 ../sprites/MapCornerLeftTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7924 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5774 ../sprites/MapCornerRightTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7824 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5775 ../sprites/MapCornerLeftBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5776 ../sprites/MapCornerRightBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5777 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5778 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5779 ../sprites/MiniMapSquareIcon.tcs.gen1 db colorwhite2 db colorwhite3 db colorwhite4 db colorwhite5 db colorwhite6 db colorwhite7 db colorwhite8 db colorwhite9 db colorwhite10 db colorwhite11 db colorwhite12 db colorwhite13 db colorwhite14 db colorwhite15 db colorwhite16 db colorwhiteengine.asm5780 5781putsprite:5782 xor a 5783 ld hl,sprattaddr 5784 call SetVdp_Write5785 ld hl,spat 5786 ld c,$985787 call outix128 5788 ret5790spat: 5791 db 100,100,00,0 ,100,100,04,0 ,100,100,08,0 ,004,006,12,05792 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05793 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05794 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05796 db 230,230,64,0 ,230,230,68,0 ,230,230,72,0 ,230,230,76,05797 db 230,230,80,0 ,230,230,84,0 ,230,230,88,0 ,230,230,92,05798 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05799 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05801SpatInCastle: 5802 db 230,230,00,05803 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05804 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05805 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05807SpatInGame: 5808 db 004,006,12,05809 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05810 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05811 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05813DisableScrollScreen?: db 05814scrollscreen: 5815 ld a,(DisableScrollScreen?)5816 or a5817 ret nz5819 call checkcurrentplayerhuman 5820 ret z 58225827 ld a,(Controls)5828 ld d,a 5829 ld bc,0 58315835 ld a,(keys+6)5836 bit 1,a 5837 jp nz,.EndCheckCTRL5838 5839 ld a,(Controls) 5840 and %1111 00005841 ld (Controls),a5843 bit 2,d 5844 jr z,.EndCheckCTRLAndLeft 5845 dec b5846 .EndCheckCTRLAndLeft:5848 bit 3,d 5849 jr z,.EndCheckCTRLAndRight5850 inc b5851 .EndCheckCTRLAndRight:5853 bit 0,d 5854 jr z,.EndCheckCTRLAndUp5855 dec c5856 .EndCheckCTRLAndUp:5858 bit 1,d 5859 jr z,.endcheck5860 inc c5861 jp .endcheck5862 .EndCheckCTRL:5864 .left: 5865 ld a,(spat+1) 5866 cp xcoordinateStartPlayfield5867 jr nz,.right5868 bit 2,d 5869 jr z,.right5870 dec b5872 .right: 5873 cp xcoorspriteright5874 jr nz,.up5875 bit 3,d 5876 jr z,.up5877 inc b5879 .up: 5880 ld a,(spat) 5881 cp ycoordinateStartPlayfield58825883 jr nz,.down5884 bit 0,d 5885 jr z,.down5886 dec c5888 .down: 5889 cp ycoorspritebottom5890 jr nz,.endcheck5891 bit 1,d 5892 jr z,.endcheck5893 inc c5894 .endcheck:5896 ld a,(maplenght) 5897 sub a,TilesPerRow-1 5898 ld d,a5899 ld a,(mapheight)5900 sub a,TilesPerColumn-15901 ld e,a5903 call .ScrollMap5904 ld a,(keys+6)5905 bit 0,a 5906 ret nz5908 .ScrollMap:5909 ld a,(mappointerx)5910 add a,b 5911 cp d 5912 jp nc,.endmovex5913 ld (mappointerx),a5914 .endmovex:5916 ld a,(mappointery)5917 add a,c 5918 cp e 5919 ret nc5920 ld (mappointery),a 5921 ret 5923SetPageSpecial: 5924 ld a,0*32+315925 jr z,.setpage5926 ld a,1*32+315927 .setpage: 5928 di5929 out ($99),a5930 ld a,2+1285931 ei5932 out ($99),a5933 ret5935buildupscreenYoffset: equ 55936buildupscreenXoffset: equ 65937TilesPerColumn: equ 1259385939TilesPerRow: equ 1259405941mapdata: equ $80005943maplenght: dw 1285944mapheight: db 1285946mappage0:5947 ds TilesPerColumn*TilesPerRow,2555948mappage1:5949 ds TilesPerColumn*TilesPerRow,2555951putbottomobjects:5952 Call SetMapposition 5954 ld a,(activepage)5955 or a5956 ld de,mappage1 5957 jr z,.mirrorpageset5958 ld de,mappage0 5959 .mirrorpageset:5961 ld a,buildupscreenYoffset 5962 ld (Copy16x16Tile+dy),a5964 ld bc,TilesPerColumn*256 + 16 5965 .loop:5966 push bc5967 ld a,buildupscreenXoffset 5968 ld (Copy16x16Tile+dx),a 5969 call PutRowBottomObjects 5971 ld a,(Copy16x16Tile+dy) 5972 add a,c5973 ld (Copy16x16Tile+dy),a 5975 ld bc,128 - 12 5976 add hl,bc 5978 pop bc5979 djnz .loop5980 ret5981 ret5983PutRowBottomObjects:5984 ld b,TilesPerRow 5985 .loop:5986 call PutBottomObjectFromObjectLayer 5987 inc hl 5988 inc de 5990 ld a,(Copy16x16Tile+dx)5991 add a,c5992 ld (Copy16x16Tile+dx),a5994 djnz .loop5995 ret5997PutBottomObjectFromObjectLayer: 5998 ld a,2 5999 ld (page1bank),a6000 out ($fe),a 6002 ld a,2 6003 ld (Copy16x16Tile+sPage),a6004 ld a,$98 6005 ld (Copy16x16Tile+copytype),a6007 ld a,(hl)6008 or a6009 ret z6010 cp 1926011 ret nc 6013 ld a,2556014 ld (de),a 6015 ld a,(hl)6016 jp PutTile.go6018PutTopObjects:6019 Call SetMapposition 6021 ld a,(activepage)6022 or a6023 ld de,mappage1 6024 jr z,.mirrorpageset6025 ld de,mappage0 6026 .mirrorpageset:6028 ld a,buildupscreenYoffset 6029 ld (Copy16x16Tile+dy),a6031 ld bc,TilesPerColumn*256 + 16 6032 .loop:6033 push bc6034 ld a,buildupscreenXoffset 6035 ld (Copy16x16Tile+dx),a 6036 call PutRowTopObjects 6038 ld a,(Copy16x16Tile+dy) 6039 add a,c6040 ld (Copy16x16Tile+dy),a 6042 ld bc,128 - 12 6043 add hl,bc 6045 pop bc6046 djnz .loop6047 ret6049PutRowTopObjects:6050 ld b,TilesPerRow 6051 .loop:6052 call PutTopObjectFromObjectLayer 6053 inc hl 6054 inc de 6056 ld a,(Copy16x16Tile+dx)6057 add a,c6058 ld (Copy16x16Tile+dx),a6060 djnz .loop6061 ret6063PutTopObjectFromObjectLayer: 6064 ld a,2 6065 ld (page1bank),a6066 out ($fe),a 6068 ld a,2 6069 ld (Copy16x16Tile+sPage),a6070 ld a,$98 6071 ld (Copy16x16Tile+copytype),a6073 ld a,(hl)6075 if DisplayNumbers1to6?6076 cp 1926077 else6078 cp 192+6 6079 endif 6080 ret c 6082 ld a,2556083 ld (de),a 6084 ld a,(hl)6085 jp PutTile.go6087SetMapposition: 6088 ld a,(mappointery) 6091 ld de,(maplenght)6092 ld h,06093 ld l,a6094 call MultiplyHlWithDE 6098 ld de,mapdata 6099 add hl,de6100 ld de,(mappointerx)6101 add hl,de 610461076115 ret6117buildupscreen:6118 Call SetMapposition 6120 ld a,(activepage) 6121 ld (Copy16x16Tile+dpage),a 6122 ld (putherotopbottom+dpage),a6123 ld (putcastle+dpage),a6124 ld (putbackgroundoverhero+dpage),a6125 ld (putstar+dpage),a61266128 ld (putlettre+dpage),a6129 xor 1 6130 ld (activepage),a 6131 ld de,mappage1 6132 jr z,.mirrorpageset6133 ld de,mappage0 6134 .mirrorpageset:6135 call SetPageSpecial 6137 ex de,hl 6138 ld a,buildupscreenYoffset 6139 ld (Copy16x16Tile+dy),a6141 ld bc,TilesPerColumn*256 + 16 6142 .loop:6143 push bc6144 ld a,buildupscreenXoffset 6145 ld (Copy16x16Tile+dx),a 6146 call putrow 6148 ld a,(Copy16x16Tile+dy) 6149 add a,c6150 ld (Copy16x16Tile+dy),a 6152 ld bc,128 - 12 6153 ex de,hl6154 add hl,bc 6155 ex de,hl6157 pop bc6158 djnz .loop6159 ret6161putrow: 6162 ld b,TilesPerRow 6163.loop:6164 call PutTile 6166 inc hl6167 inc de6169 ld a,(Copy16x16Tile+dx)6170 add a,c6171 ld (Copy16x16Tile+dx),a6173 djnz .loop6174 ret6176PutTile: 6177 ld a,1 6178 ld (page1bank),a6179 out ($fe),a 6181 ld a,3 6182 ld (Copy16x16Tile+sPage),a6183 ld a,$d0 6184 ld (Copy16x16Tile+copytype),a6186 ld a,(de) 6187 cp (hl) 6188 ret z 6189 ld (hl),a6191 .go:6192 exx 6193 ld e,a 6194 add a,a 6195 add a,a 6196 add a,a 6197 add a,a 6198 ld (Copy16x16Tile+sx),a6199 6201 6202 ld a,e6203 ld d,-16204.setsy:6205 sub a,166206 inc d6207 jp nc,.setsy6208 ld a,d6209 add a,a 6210 add a,a 6211 add a,a 6212 add a,a 6213 ld (Copy16x16Tile+sy),a6214 6216 ld hl,Copy16x16Tile6217 call docopy6218 exx6219 ret6221Copy16x16Tile:6222 db 255,000,255,0036223 db 255,000,255,0006224 db 016,000,016,0006225 db 000,000,$d0 6227BackupImagePage0Ready?: db 0 6228FreeToUseFastCopy0: 6229 db 000,000,000,000 6230 db 000,000,000,000 6231 db 000,000,000,000 6232 db 000,%0000 0000,$D0 6234BackupImagePage1Ready?: db 0 6235FreeToUseFastCopy1: 6236 db 000,000,000,000 6237 db 000,000,000,000 6238 db 000,000,000,000 6239 db 000,%0000 0000,$D0 624162476253ScreenOff:6254 ld a,(VDP_0+1) 6255 and %1011 11116256 di6257 out ($99),a6258 ld a,1+1286259 ei6260 out ($99),a6261 ret6263ScreenOn:6264 ld a,(VDP_0+1) 6265 or %0100 00006266 di6267 out ($99),a6268 ld a,1+1286269 ei6270 out ($99),a6271 ret6273activepage: db 06274mappointerx: dw 06275mappointery: db 06276heroymirror: ds 16277heroxmirror: ds 16279non_see_throughpieces: equ 16 6280amountoftransparantpieces: equ 64 6281UnwalkableTerrainPieces: equ 149 6283mirrortransparentpieces: 6285 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 048,128, 080,144, 048,160, 080,128, 064,176, 064,192, 064,224, 064,2406286 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 064,128, 064,144, 064,160, 080,160, 080,176, 080,192, 048,224, 048,2406287 db 080,000, 080,016, 080,032, 080,048, 080,064, 080,080, 080,096, 080,1126289putbackgroundoverhero:6290 db 16,0,64,36291 db 255,0,255,06292 db 16,0,16,06293 db 0,%0000 0000,$98 62946296putherotopbottom:6297 db 224,0,0,26298 db 96,0,96,06299 db 16,0,16,06300 db 0,%0000 0000,$98 6302putcastle:6303 db 255,0,208,36304 db 255,0,255,06305 db 16,0,16,06306 db 0,%0000 0000,$98 63076309putlettre:6310 db 0,0,212,16311 db 40,0,40,06312 db 16,0,5,06313 db 0,%0000 0000,$98 63156321mouseposy: ds 16322mouseposx: ds 16323mouseclicky: ds 16324mouseclickx: ds 16325addxtomouse: equ 86326addxtomouseDiagonalPointer: equ -663276328addytomouse: equ 46329addytomouseDiagonalPointer: equ -26331HeroTotalManaBeforeLevelingUp: ds 16332amountofheroesperplayer: equ 86333lenghtherotable: equ pl1hero2y-pl1hero1y6335HeroY: equ 06336HeroX: equ 16337HeroXp: equ 26338HeroMove: equ 46339HeroTotalMove: equ 56340HeroMana: equ 66341HeroTotalMana: equ 86342HeroManarec: equ 106343HeroStatus: equ 11 6344HeroUnits: equ 12 6345HeroStatAttack: equ 306346HeroStatDefense: equ 316347HeroStatKnowledge: equ 326348HeroStatSpellDamage: equ 336349HeroSkills: equ 346350HeroLevel: equ 406351HeroEarthSpells: equ 416352HeroFireSpells: equ 426353HeroAirSpells: equ 436354HeroWaterSpells: equ 446355HeroAllSchoolsSpells: equ 456356HeroInventory: equ 46 6357HeroSpecificInfo: equ 616358HeroDYDX: equ 63 6359lenghtinventorytable: equ 9 + 663606361EmptyHeroRecruitedAtTavern:6362.heroy: ds 16363.herox: ds 16364.heroxp: dw 0006365.heromove: db 20,206366.heromana: dw 10,106367.heromanarec:db 5 6368.herostatus: db 2 6369.HeroUnits: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6370.HeroStatAttack: db 16371.HeroStatDefense: db 16372.HeroStatKnowledge: db 1 6373.HeroStatSpellDamage: db 1 6374.HeroSkills: db 0,0,0,0,0,06375.HeroLevel: db 16376.EarthSpells: db %0000 0000 6377.FireSpells: db %0000 0000 6378.AirSpells: db %0000 0000 6379.WaterSpells: db %0000 0000 6380.AllSchoolsSpells: db %0000 0000 6381.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6382.HeroSpecificInfo: ds 2638363906394StartSaveGameData:6396pl1hero1y: db 36397pl1hero1x: db 36398pl1hero1xp: dw 0 6399pl1hero1move: db 20,206400pl1hero1mana: dw 50,106401pl1hero1manarec:db 5 6402pl1hero1status: db 2 6405Pl1Hero1Units: db ContraGroupBUnitLevel1Number | dw 150 | db ContraGroupBUnitLevel2Number | dw 130 | db 000 | dw 000 | db ContraGroupBUnitLevel4Number | dw 130 | db ContraGroupBUnitLevel5Number | dw 100 | db ContraGroupBUnitLevel6Number | dw 100 6406Pl1Hero1StatAttack: db 06407Pl1Hero1StatDefense: db 06408Pl1Hero1StatKnowledge: db 1 6409Pl1Hero1StatSpellDamage: db 9 6412.HeroSkills: db 13,0,0,0,0,06413.HeroLevel: db 16414.EarthSpells: db %0000 1111 6415.FireSpells: db %0000 11116416.AirSpells: db %0000 11116417.WaterSpells: db %0000 11116418.AllSchoolsSpells: db %0000 111164196422.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6423.HeroSpecificInfo: dw HeroAddressesSnake16424.HeroDYDX: dw $ffff 6427 6433pl1hero2y: db $1c6434pl1hero2x: db $336435pl1hero2xp: dw 00006436pl1hero2move: db 06,206437pl1hero2mana: dw 10,106438pl1hero2manarec:db 5 6439pl1hero2status: db 255 6440Pl1Hero2Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6441.HeroStatAttack: db 16442.HeroStatDefense: db 16443.HeroStatKnowledge: db 1 6444.HeroStatSpellDamage: db 1 6445.HeroSkills: db 31,0,0,0,0,06446.HeroLevel: db 16447.EarthSpells: db %0000 0000 6448.FireSpells: db %0000 00006449.AirSpells: db %0000 00006450.WaterSpells: db %0000 00006451.AllSchoolsSpells: db %0000 00006452.Inventory: db 045,045,045,045,045,045,045,045,044, 016,027,033,043,038,0396453.HeroSpecificInfo: db 255,2556454.HeroDYDX: dw $ffff 6456pl1hero3y: db 01 6457pl1hero3x: db 036458pl1hero3xp: dw 00006459pl1hero3move: db 20,206460pl1hero3mana: dw 10,106461pl1hero3manarec:db 5 6462pl1hero3status: db 255 6463Pl1Hero3Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6464.HeroStatAttack: db 16465.HeroStatDefense: db 16466.HeroStatKnowledge: db 1 6467.HeroStatSpellDamage: db 1 6468.HeroSkills: db 8,30,24,0,0,06469.HeroLevel: db 16470.EarthSpells: db %0000 0000 6471.FireSpells: db %0000 00006472.AirSpells: db %0000 00006473.WaterSpells: db %0000 00006474.AllSchoolsSpells: db %0000 00006475.Inventory: ds lenghtinventorytable,0456476.HeroSpecificInfo: db 255,2556477.HeroDYDX: dw $ffff 6479pl1hero4y: db 00 6480pl1hero4x: db 00 6481pl1hero4xp: dw 00006482pl1hero4move: db 20,206483pl1hero4mana: dw 10,206484pl1hero4manarec:db 5 6485pl1hero4status: db 255 6486Pl1Hero4Units: db 006 | dw 010 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6487.HeroStatAttack: db 16488.HeroStatDefense: db 16489.HeroStatKnowledge: db 1 6490.HeroStatSpellDamage: db 1 6491.HeroSkills: db 33,10,1,0,0,06492.HeroLevel: db 16493.EarthSpells: db %0000 0001 6494.FireSpells: db %0000 00016495.AirSpells: db %0000 00016496.WaterSpells: db %0000 00016497.AllSchoolsSpells: db %0000 00016498.Inventory: ds lenghtinventorytable,0456499.HeroSpecificInfo: db 255,2556500.HeroDYDX: dw $ffff 6502pl1hero5y: db 00 6503pl1hero5x: db 01 6504pl1hero5xp: dw 00006505pl1hero5move: db 20,206506pl1hero5mana: dw 10,206507pl1hero5manarec:db 5 6508pl1hero5status: db 255 6509Pl1Hero5Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6510.HeroStatAttack: db 16511.HeroStatDefense: db 16512.HeroStatKnowledge: db 1 6513.HeroStatSpellDamage: db 1 6514.HeroSkills: db 33,10,1,0,0,06515.HeroLevel: db 16516.EarthSpells: db %0000 0001 6517.FireSpells: db %0000 00016518.AirSpells: db %0000 00016519.WaterSpells: db %0000 00016520.AllSchoolsSpells: db %0000 00016521.Inventory: ds lenghtinventorytable,0456522.HeroSpecificInfo: db 255,2556523.HeroDYDX: dw $ffff 6525pl1hero6y: db 00 6526.pl1hero6x: db 02 6527.pl1hero6xp: dw 00006528.pl1hero6move: db 20,206529.pl1hero6mana: dw 10,206530.pl1hero6manarec:db 5 6531.pl1hero6status: db 255 6532.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6533.HeroStatAttack: db 16534.HeroStatDefense: db 16535.HeroStatKnowledge: db 1 6536.HeroStatSpellDamage: db 1 6537.HeroSkills: db 33,10,1,0,0,186538.HeroLevel: db 16539.EarthSpells: db %0000 0001 6540.FireSpells: db %0000 00016541.AirSpells: db %0000 00016542.WaterSpells: db %0000 00016543.AllSchoolsSpells: db %0000 00016544.Inventory: ds lenghtinventorytable,0456545.HeroSpecificInfo: db 255,2556546.HeroDYDX: dw $ffff 6548pl1hero7y: db 00 6549.pl1hero6x: db 03 6550.pl1hero6xp: dw 00006551.pl1hero6move: db 20,206552.pl1hero6mana: dw 10,206553.pl1hero6manarec:db 5 6554.pl1hero6status: db 255 6555.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6556.HeroStatAttack: db 16557.HeroStatDefense: db 16558.HeroStatKnowledge: db 1 6559.HeroStatSpellDamage: db 1 6560.HeroSkills: db 33,10,1,0,0,186561.HeroLevel: db 16562.EarthSpells: db %0000 0001 6563.FireSpells: db %0000 00016564.AirSpells: db %0000 00016565.WaterSpells: db %0000 00016566.AllSchoolsSpells: db %0000 00016567.Inventory: ds lenghtinventorytable,0456568.HeroSpecificInfo: db 255,2556569.HeroDYDX: dw $ffff 6571pl1hero8y: db 00 6572.pl1hero6x: db 04 6573.pl1hero6xp: dw 00006574.pl1hero6move: db 20,206575.pl1hero6mana: dw 10,206576.pl1hero6manarec:db 5 6577.pl1hero6status: db 255 6578.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6579.HeroStatAttack: db 16580.HeroStatDefense: db 16581.HeroStatKnowledge: db 1 6582.HeroStatSpellDamage: db 1 6583.HeroSkills: db 33,10,1,0,0,186584.HeroLevel: db 16585.EarthSpells: db %0000 0001 6586.FireSpells: db %0000 00016587.AirSpells: db %0000 00016588.WaterSpells: db %0000 00016589.AllSchoolsSpells: db %0000 00016590.Inventory: ds lenghtinventorytable,0456591.HeroSpecificInfo: db 255,2556592.HeroDYDX: dw $ffff 6594pl1hero9y: db 00 6595.pl1hero6x: db 00 6596.pl1hero6xp: dw 00006597.pl1hero6move: db 00,006598.pl1hero6mana: dw 00,006599.pl1hero6manarec:db 0 6600.pl1hero6status: db 255 66026603pl2hero1y: db 36604pl2hero1x: db 666056606pl2hero1xp: dw 00006607pl2hero1move: db 20,206608pl2hero1mana: dw 50,106609pl2hero1manarec:db 5 6610pl2hero1status: db 1 6613Pl2Hero1Units: db 1 | dw 001 | db 001 | dw 010 | db 001 | dw 100 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6614.HeroStatAttack: db 06615.HeroStatDefense: db 06616.HeroStatKnowledge: db 1 6617.HeroStatSpellDamage: db 1 6618.HeroSkills: db 13,0,0,0,0,06619.HeroLevel: db 16620.EarthSpells: db %0000 1111 6621.FireSpells: db %0000 11116622.AirSpells: db %0000 11116623.WaterSpells: db %0000 11116624.AllSchoolsSpells: db %0000 111166256626.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,0456627.HeroSpecificInfo: dw HeroAddressesDrasle16628.HeroDYDX: dw $ffff 6632pl2hero2y: db 00 6633.pl1hero2x: db 04 6634.pl1hero6xp: dw 00006635.pl1hero6move: db 20,206636.pl1hero6mana: dw 10,206637.pl1hero6manarec:db 5 6638.pl1hero6status: db 1 6639.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6640.HeroStatAttack: db 16641.HeroStatDefense: db 16642.HeroStatKnowledge: db 1 6643.HeroStatSpellDamage: db 1 6644.HeroSkills: db 33,10,1,0,0,186645.HeroLevel: db 16646.EarthSpells: db %0000 0001 6647.FireSpells: db %0000 00016648.AirSpells: db %0000 00016649.WaterSpells: db %0000 00016650.AllSchoolsSpells: db %0000 00016651.Inventory: ds lenghtinventorytable,0456652.HeroSpecificInfo: dw HeroAddressesDrasle26653.HeroDYDX: dw $ffff 66566657pl2hero3y: ds lenghtherotable,2556658pl2hero4y: ds lenghtherotable,2556659pl2hero5y: ds lenghtherotable,2556660pl2hero6y: ds lenghtherotable,2556661pl2hero7y: ds lenghtherotable,2556662pl2hero8y: ds lenghtherotable,2556664pl2hero9y: db 00 6665.pl1hero6x: db 00 6666.pl1hero6xp: dw 00006667.pl1hero6move: db 00,006668.pl1hero6mana: dw 00,006669.pl1hero6manarec:db 0 6670.pl1hero6status: db 255 66726673pl3hero1y: db 806674pl3hero1x: db 406675pl3hero1xp: dw 00006676pl3hero1move: db 20,206677pl3hero1mana: dw 20,206678pl3hero1manarec:db 2 6679pl3hero1status: db 255 6680Pl3Hero1Units: db 033 | dw 103 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6681.HeroStatAttack: db 16682.HeroStatDefense: db 16683.HeroStatKnowledge: db 1 6684.HeroStatSpellDamage: db 1 6685.HeroSkills: db 33,10,1,0,18,06686.HeroLevel: db 16687.EarthSpells: db %0000 0000 6688.FireSpells: db %0000 00006689.AirSpells: db %0000 00006690.WaterSpells: db %0000 00006691.AllSchoolsSpells: db %0000 00006692.Inventory: ds lenghtinventorytable,0456693.HeroSpecificInfo: dw HeroAddressesGolvellius6694.HeroDYDX: dw $ffff 6696pl3hero2y: ds lenghtherotable,2556697pl3hero3y: ds lenghtherotable,2556698pl3hero4y: ds lenghtherotable,2556699pl3hero5y: ds lenghtherotable,2556700pl3hero6y: ds lenghtherotable,2556701pl3hero7y: ds lenghtherotable,2556702pl3hero8y: ds lenghtherotable,2556704pl3hero9y: db 00 6705.pl1hero6x: db 00 6706.pl1hero6xp: dw 00006707.pl1hero6move: db 00,006708.pl1hero6mana: dw 00,006709.pl1hero6manarec:db 0 6710.pl1hero6status: db 255 67126713pl4hero1y: db 1006714pl4hero1x: db 1006715pl4hero1xp: dw 00006716pl4hero1move: db 10,206717pl4hero1mana: dw 10,206718pl4hero1manarec:db 2 6719pl4hero1status: db 255 6720Pl4Hero1Units: db 053 | dw 001 | db 065 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6721.HeroStatAttack: db 16722.HeroStatDefense: db 16723.HeroStatKnowledge: db 1 6724.HeroStatSpellDamage: db 1 6725.HeroSkills: db 33,10,1,0,0,06726.HeroLevel: db 16727.EarthSpells: db %0000 0000 6728.FireSpells: db %0000 00006729.AirSpells: db %0000 00006730.WaterSpells: db %0000 00006731.AllSchoolsSpells: db %0000 00006732.Inventory: ds lenghtinventorytable,0456733.HeroSpecificInfo: dw HeroAddressesDrasle16734.HeroDYDX: dw $ffff 6736pl4hero2y: ds lenghtherotable,2556737pl4hero3y: ds lenghtherotable,2556738pl4hero4y: ds lenghtherotable,2556739pl4hero5y: ds lenghtherotable,2556740pl4hero6y: ds lenghtherotable,2556741pl4hero7y: ds lenghtherotable,2556742pl4hero8y: ds lenghtherotable,2556744pl4hero9y: db 00 6745.pl1hero6x: db 00 6746.pl1hero6xp: dw 00006747.pl1hero6move: db 00,006748.pl1hero6mana: dw 00,006749.pl1hero6manarec:db 0 6750.pl1hero6status: db 255 67526754CastleY: equ 06755CastleX: equ CastleY+16756CastlePlayer: equ CastleX+16757CastleLevel: equ CastlePlayer+16758CastleTavern: equ CastleLevel+16759CastleMarket: equ CastleTavern+16760CastleMageGuildLevel: equ CastleMarket+16761CastleBarracksLevel: equ CastleMageGuildLevel+16762CastleSawmillLevel: equ CastleBarracksLevel+16763CastleMineLevel: equ CastleSawmillLevel+16764AlreadyBuiltThisTurn?: equ CastleMineLevel+16765CastleName: equ AlreadyBuiltThisTurn?+16766CastleLevel1Units: equ CastleName+136767CastleLevel2Units: equ CastleLevel1Units+16768CastleLevel3Units: equ CastleLevel2Units+16769CastleLevel4Units: equ CastleLevel3Units+16770CastleLevel5Units: equ CastleLevel4Units+16771CastleLevel6Units: equ CastleLevel5Units+16772CastleLevel1UnitsAvail: equ CastleLevel6Units+16773CastleLevel2UnitsAvail: equ CastleLevel1UnitsAvail+26774CastleLevel3UnitsAvail: equ CastleLevel2UnitsAvail+26775CastleLevel4UnitsAvail: equ CastleLevel3UnitsAvail+26776CastleLevel5UnitsAvail: equ CastleLevel4UnitsAvail+26777CastleLevel6UnitsAvail: equ CastleLevel5UnitsAvail+26779AmountOfCastles: equ 46780LenghtCastleTable: equ Castle2-Castle16781 6783Castle1: db 255, 255, 255, 6, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth6784Castle2: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, usasUnitLevel1Number, usasUnitLevel2Number, usasUnitLevel3Number, usasUnitLevel4Number, usasUnitLevel5Number, usasUnitLevel6Number | dw usasUnitLevel1Growth, usasUnitLevel2Growth, usasUnitLevel3Growth, usasUnitLevel4Growth, usasUnitLevel5Growth, usasUnitLevel6Growth6785Castle3: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, sdsnatcherUnitLevel1Number, sdsnatcherUnitLevel2Number, sdsnatcherUnitLevel3Number, sdsnatcherUnitLevel4Number, sdsnatcherUnitLevel5Number, sdsnatcherUnitLevel6Number | dw sdsnatcherUnitLevel1Growth, sdsnatcherUnitLevel2Growth, sdsnatcherUnitLevel3Growth, sdsnatcherUnitLevel4Growth, sdsnatcherUnitLevel5Growth, sdsnatcherUnitLevel6Growth6786Castle4: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, psychoworldUnitLevel1Number, psychoworldUnitLevel2Number, psychoworldUnitLevel3Number, psychoworldUnitLevel4Number, psychoworldUnitLevel5Number, psychoworldUnitLevel6Number | dw psychoworldUnitLevel1Growth, psychoworldUnitLevel2Growth, psychoworldUnitLevel3Growth, psychoworldUnitLevel4Growth, psychoworldUnitLevel5Growth, psychoworldUnitLevel6Growth6787Castle5: db 255, 255, 25567886789WhichCastleIsPointerPointingAt?: ds 26790TempVariableCastleY: ds 16791TempVariableCastleX: ds 16793TavernHeroesTable:6794TavernHero1: equ 0 | TavernHero2: equ 1 | TavernHero3: equ 26795TavernHeroTableLenght: equ TavernHeroesPlayer2-TavernHeroesPlayer1-16796db 255 | TavernHeroesPlayer1: db 076,000,000,000,000,000,000,000,000,0006797db 255 | TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0006798db 255 | TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0006799db 255 | TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0006801AmountOfResourcesOffered: ds 26802AmountOfResourcesRequired: ds 26803CheckRequirementsWhichBuilding?: ds 26804ResourcesPlayer1:6805.Gold: dw 20009 6806.Wood: dw 20 6807.Ore: dw 20 6808.Gems: dw 10 6809.Rubies: dw 10 6810ResourcesPlayer2:6811.Gold: dw 20000 6812.Wood: dw 20 6813.Ore: dw 20 6814.Gems: dw 10 6815.Rubies: dw 10 6816ResourcesPlayer3:6817.Gold: dw 50006818.Wood: dw 3006819.Ore: dw 1006820.Gems: dw 606821.Rubies: dw 306822ResourcesPlayer4:6823.Gold: dw 50006824.Wood: dw 3006825.Ore: dw 1006826.Gems: dw 606827.Rubies: dw 306829 6830Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 16831Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 16832Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 06833Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 06835StartingTownLevel1Unit: ds 16836StartingTownLevel2Unit: ds 16837StartingTownLevel3Unit: ds 16838StartingTownLevel4Unit: ds 16839StartingTownLevel5Unit: ds 16840StartingTownLevel6Unit: ds 16842player1StartingTown: db 255 6843player2StartingTown: db 255 6844player3StartingTown: db 255 6845player4StartingTown: db 255 6847amountofplayers: db 36848player1human?: db 1 6849player2human?: db 16850player3human?: db 16851player4human?: db 26852whichplayernowplaying?: db 16854movementpathpointer: ds 1 6855movehero?: ds 16856movementspeed: ds 16858putmovementstars?: db 06859movementpath: ds 48*2 6860 db 128,1286861movementpathReverse: ds 48*2 6862ystar: ds 16863xstar: ds 16865CampaignMode?: ds 16866ScenarioSelected: ds 16867CampaignSelected: ds 16869currentherowindowclicked: db 16870plxcurrentheroAddress: dw pl1hero1y6872WorldPointer: dw GentleAutumnMap0468736879Date: dw 0 6880DaysToCompleteCampaign: ds 16881CampaignText: ds CampaignTextLenght6882CampaignFinished?: db 0688468866893EndSaveGameData:6894SaveGameDataLenght: equ EndSaveGameData-StartSaveGameData6895MSXHeroes.asm 611endengine:612dephase613enlength: Equ $-engine615618 ds $c000-$,$ff 620621 ds $4000623624 ds $4000626629Loaderblock: equ $04630phase $4000631 loader.asm116243547LenghtMapData: equ GentleAutumnMap01-GentleMap0348GentleMaps:50GentleMap03: db GentleMap03MapBlock | dw GentleMap03Map | db GentleMap03ObjectLayerMapBlock | dw GentleMap03ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (100/2) - 128 | db "2",255,"S",255,"Pochi is Lost         ",255,"Icy gusts battered the",254,"Worzen residence.     ",254,"Pochi, their loyal    ",254,"dragon-dog, went      ",254,"missing. Royas, the   ",254,"youngest, stood quiet,",254,"his brow furrowed as  ",254,"he stretched out      ",254,"telepathically.       ",254,"Pochi's message was   ",254,"faint, echoing from an",254,"unfamiliar, oppressive",254,"place - the ominous   ",254,"castle in the north.  ",254,"'Pochi needs us',     ",254,"Royas finally declared",254,"with a firm voice.    ",254, 254,"Will the Worzen family",254,"rescue their beloved  ",254,"companion?            ",25551GentleAutumnMap01: db GentleAutumnMap01MapBlock | dw GentleAutumnMap01Map | db GentleAutumnMap01ObjectLayerMapBlock | dw GentleAutumnMap01ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (000/2) - 128 | db "3",255,"M",255,"Crossroads of Courage ",255,"An urgent plea pierces",254,"the Worzen home.      ",254,"Two fallen fortresses ",254,"cry for aid:          ",254,"Castlevania, overrun  ",254,"by ghouls and skeletal",254,"horrors, and Castle   ",254,"Junker HQ, swarming   ",254,"with the infamous     ",254,"Snatchers.            ",254,"The Worzen family,    ",254,"known for their       ",254,"unwavering courage and",254,"diverse skills, stands",254,"at the precipice of a ",254,"perilous choice.      ",254, 254,"Can you forge a unique",254,"strategy to reclaim   ",254,"both fortresses?      ",254,"                      ",255 52GentleDesertMap03: db GentleDesertMap03MapBlock | dw GentleDesertMap03Map | db GentleDesertMap03ObjectLayerMapBlock | dw GentleDesertMap03ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (100/2) - 128 | db "2",255,"M",255,"Whispers in the Sand  ",255,"Scorching sand lashed ",254,"Wit's face as he and  ",254,"Cles, his companion,  ",254,"stalked towards the   ",254,"mirage shimmering in  ",254,"the distance.         ",254,"Rumors echoed: Trevor ",254,"Belmont, the hero,    ",254,"lost to darkness.     ",254, 254,"Their goal: reach the ",254,"castle, infiltrate its",254,"defenses, and somehow ",254,"confront Trevor.      ",254,"Not to subdue, but to ",254,"help the once renowned",254,"vampire hunter, now   ",254,"consumed by darkness. ",254,"                      ",254,"                      ",254,"                      ",25553GentleWinterMap05: db GentleWinterMap05MapBlock | dw GentleWinterMap05Map | db GentleWinterMap05ObjectLayerMapBlock | dw GentleWinterMap05ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (200/2) - 128 | db "4",255,"S",255,"An Arctic Alliance    ",255,"Frigid plains erupt in",254,"war. Goemon and       ",254,"Ebisumaru, blades     ",254,"drawn, stand with the ",254,"Belmonts against an   ",254,"unholy alliance:      ",254,"Junker HQ have joined ",254,"forces with the       ",254,"Worzen's arcane might.",254, 254,"You, wielding Goemon's",254,"agility, Ebisumaru's  ",254,"flames, and the       ",254,"Belmonts' whips, must ",254,"overcome this dark    ",254,"pact in a desperate   ",254,"fight for supremacy.  ",254,"Will your alliance    ",254,"triumph, or will the  ",254,"frozen lands succumb  ",254,"to a new power?       ",25554GentleMap04: db GentleMap04MapBlock | dw GentleMap04Map | db GentleMap04ObjectLayerMapBlock | dw GentleMap04ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (150/2) - 128 | db "4",255,"M",255,"Felghana's Champion   ",255,"In the rugged terrain ",254,"of Felghana, Adol sets",254,"out on a daring quest.",254,"With sword in hand, he",254,"faces three formidable",254,"foes, each guarding a ",254,"mighty fortress. The  ",254,"fate of the land rests",254,"on his shoulders as he",254,"storms through enemy  ",254,"lines.                ",254,"                      ",254,"Adol's determination  ",254,"and courage shine as  ",254,"he presses forward,   ",254,"conquering one castle ",254,"after another,        ",254,"bringing peace to the ",254,"war-torn realm.       ",254,"                      ",254, 25555GentleCaveMap01: db GentleCaveMap01MapBlock | dw GentleCaveMap01Map | db GentleCaveMap01ObjectLayerMapBlock | dw GentleCaveMap01ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (000/2) - 128 | db "2",255,"M",255,"Mildew and Moonlight  ",255,"In the depths of the  ",254,"earth, Lucia, a       ",254,"formidable sorcerer,  ",254,"embarks on a quest to ",254,"uncover ancient       ",254,"secrets.              ",254,"Descending into       ",254,"cavernous depths she  ",254,"seeks the lost castle ",254,"guarded by the        ",254,"legendary Adol.       ",254, 254,"Armed with powerful   ",254,"magic, she navigates  ",254,"treacherous passages, ",254,"overcoming fierce     ",254,"guardians to reach her",254,"elusive goal.         ",254,"                      ",254,"                      ",254,"                      ",25556GentleJungleMap05: db GentleJungleMap05MapBlock | dw GentleJungleMap05Map | db GentleJungleMap05ObjectLayerMapBlock | dw GentleJungleMap05ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (200/2) - 128 | db "3",255,"M",255,"A Jungle Expedition   ",255,"In the dense, murky   ",254,"jungle, Dr. Hank      ",254,"Mitchell ventures     ",254,"forth, navigating     ",254,"treacherous swamps and",254,"overgrown paths.      ",254,"His mission: to reach ",254,"the formidable castle ",254,"guarded by the        ",254,"sorceress Lucia.      ",254,"                      ",254,"Meanwhile, Lucia      ",254,"senses his approach   ",254,"and prepares her      ",254,"defenses, weaving     ",254,"spells to thwart his  ",254,"advance.              ",254, 254,"                      ",254,"                      ",254,"                      ",25557GentleAutumnMap02: db GentleAutumnMap02MapBlock | dw GentleAutumnMap02Map | db GentleAutumnMap02ObjectLayerMapBlock | dw GentleAutumnMap02ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (050/2) - 128 | db "2",255,"M",255,"The Valley of Doom    ",255,"In the heart of the   ",254,"Valley of Doom,       ",254,"Kelesis embarks on a  ",254,"perilous quest. With  ",254,"just two months to    ",254,"reach Dr. Hank        ",254,"Mitchell's castle, the",254,"stakes are high.      ",254, 254,"A powerful magical    ",254,"artifact, hidden      ",254,"within the castle's   ",254,"depths, is due to be  ",254,"activated by the next ",254,"full moon. This would ",254,"have catastrophic     ",254,"consequences, plunging",254,"the entire kingdom    ",254,"into darkness and     ",254,"chaos.                ",254,"                      ",25558GentleJungleMap02: db GentleJungleMap02MapBlock | dw GentleJungleMap02Map | db GentleJungleMap02ObjectLayerMapBlock | dw GentleJungleMap02ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (050/2) - 128 | db "2",255,"M",255,"A Jungle Retreat      ",255,"Bill Rizer ventures   ",254,"through the dense     ",254,"jungle, seeking an    ",254,"escape to Drasle's    ",254,"Den.                  ",254,"He stumbles upon a    ",254,"hidden cave, hopeful  ",254,"for safe passage.     ",254,"Inside, he encounters ",254,"Pochi, the family     ",254,"dragon-dog, whose     ",254,"warm welcome is       ",254,"uncertain.            ",254,"With cautious steps,  ",254,"Bill approaches,      ",254,"hoping for friendship ",254,"amidst the uncertainty",254,"of the jungle's       ",254,"depths.               ",254, 254,"                      ",25559GentleWinterMap03: db GentleWinterMap03MapBlock | dw GentleWinterMap03Map | db GentleWinterMap03ObjectLayerMapBlock | dw GentleWinterMap03ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (100/2) - 128 | db "4",255,"S",255,"Rally Against Rizer   ",255,"Amidst the towering   ",254,"walls of an armed     ",254,"fortress, Bill Rizer, ",254,"wielding his army,    ",254,"prepares for battle.  ",254,"                      ",254,"You assemble a team   ",254,"of MSX legends to     ",254,"counter his forces.   ",254,"Together you          ",254,"strategize to breach  ",254,"the fortress and      ",254,"confront Bill Rizer.  ",254, 254,"Choose your heroes    ",254,"wisely and prepare for",254,"the ultimate showdown.",254,"Victory or defeat     ",254,"awaits within the     ",254,"fortress's walls.     ",254,"                      ",25561GentleAutumnMap03: db GentleAutumnMap03MapBlock | dw GentleAutumnMap03Map | db GentleAutumnMap03ObjectLayerMapBlock | dw GentleAutumnMap03ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (100/2) - 128 | db "3",255,"L",255,"Into the Fray         ",255,"Fray, a spirited young",254,"sorceress, sets out   ",254,"from her humble home  ",254,"in search of          ",254,"adventure.            ",254, 254,"Her quest?            ",254,"To conquer the two    ",254,"formidable castles    ",254,"that loom over her    ",254,"realm like ancient    ",254,"guardians.            ",254,"                      ",254,"As Fray's quest       ",254,"unfolds, she embraces ",254,"the unknown with      ",254,"courage and           ",254,"determination, ready  ",254,"to conquer whatever   ",254,"obstacles stand in her",254,"path.                 ",25562GentleJungleMap04: db GentleJungleMap04MapBlock | dw GentleJungleMap04Map | db GentleJungleMap04ObjectLayerMapBlock | dw GentleJungleMap04ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (150/2) - 128 | db "4",255,"L",255,"The Soldier's Path    ",255,"Solid Snake traverses ",254,"rugged terrain and    ",254,"encounters perilous   ",254,"obstacles. Along the  ",254,"way, he marches       ",254,"toward the castle in  ",254,"the northwest, to form",254,"a powerful alliance.  ",254, 254,"As he unites with the ",254,"castle's forces, Solid",254,"Snake leads the charge",254,"against the foes in   ",254,"the southern castles, ",254,"using his tactical    ",254,"prowess and combat    ",254,"skills to secure      ",254,"victory and bring     ",254,"peace to the land.    ",254,"                      ",254,"                      ",25563GentleCaveMap05: db GentleCaveMap05MapBlock | dw GentleCaveMap05Map | db GentleCaveMap05ObjectLayerMapBlock | dw GentleCaveMap05ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (200/2) - 128 | db "2",255,"M",255,"Where East Meets West ",255,"A formidable sorcerer ",254,"named Dino reigns with",254,"dark power.           ",254,"His tyranny threatens ",254,"the land.             ",254,"                      ",254,"Young Snake, a daring ",254,"warrior, and Solid    ",254,"Snake, a seasoned     ",254,"veteran, must unite   ",254,"their strengths for a ",254,"daring assault against",254,"Dino. As they prepare ",254,"the realm's fate hangs",254,"in the balance. Will  ",254,"they conquer Dino's   ",254,"might and restore     ",254,"peace? The ultimate   ",254,"showdown awaits!      ",254,"                      ",254, 25564GentleWinterMap04: db GentleWinterMap04MapBlock | dw GentleWinterMap04Map | db GentleWinterMap04ObjectLayerMapBlock | dw GentleWinterMap04ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (150/2) - 128 | db "4",255,"M",255,"Three Reigns Fallen   ",255,"In a realm not yet    ",254,"touched by the sun's  ",254,"descent, Ashguine, the",254,"formidable warrior,   ",254,"embarks on a conquest ",254,"that will echo through",254,"history. With each    ",254,"step, he lays claim to",254,"three kingdoms, his   ",254,"blade a beacon of     ",254,"relentless            ",254,"determination.        ",254, 254,"As the day unfolds,   ",254,"the kingdoms tremble, ",254,"unaware of the force  ",254,"that approaches,      ",254,"destined to reshape   ",254,"their destiny with the",254,"singular might of one ",254,"determined soul.      ",25565GentleDesertMap01: db GentleDesertMap01MapBlock | dw GentleDesertMap01Map | db GentleDesertMap01ObjectLayerMapBlock | dw GentleDesertMap01ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (000/2) - 128 | db "4",255,"L",255,"Prince Logan's Odyssey",255,"In the realm of       ",254,"Isrenhasa, Prince     ",254,"Logan embarks on a    ",254,"perilous quest to save",254,"his kingdom from      ",254,"darkness.             ",254,"He sets forth to free ",254,"three kingdoms        ",254,"ensnared by sinister  ",254,"forces. Prince Logan  ",254,"must unlock the       ",254,"secrets of ancient    ",254,"magic to restore peace",254,"to his world.         ",254,"With each step, he    ",254,"draws closer to       ",254,"fulfilling his destiny",254,"and vanquishing the   ",254,"shadows that threaten ",254,"to consume Isrenhasa. ",254, 25566GentleMap05: db GentleMap05MapBlock | dw GentleMap05Map | db GentleMap05ObjectLayerMapBlock | dw GentleMap05ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (200/2) - 128 | db "4",255,"L",255,"Chronicles of Herzog  ",255,"In a strategic        ",254,"alliance, Mercies and ",254,"Ruth unite to broaden ",254,"their dominion.       ",254,"Together, they aim to ",254,"seize three pivotal   ",254,"fortresses.           ",254,"With synchronized     ",254,"tactics and unyielding",254,"determination, they   ",254,"march towards victory.",254, 254,"As allies turned      ",254,"champions, they forge ",254,"an indomitable force, ",254,"unstoppable in their  ",254,"pursuit of territorial",254,"supremacy.            ",254,"                      ",254,"                      ",254,"                      ",25567GentleAutumnMap05: db GentleAutumnMap05MapBlock | dw GentleAutumnMap05Map | db GentleAutumnMap05ObjectLayerMapBlock | dw GentleAutumnMap05ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (200/2) - 128 | db "4",255,"M",255,"Reign of the Druid    ",255,"In a land of forgotten",254,"kingdoms, the Young   ",254,"Noble, lost and alone,",254,"stumbles upon three   ",254,"ancient castles, each ",254,"fiercely guarded by a ",254,"dark druid wielding   ",254,"the power of shadow.  ",254, 254,"Fueled by unwavering  ",254,"courage, he vows to   ",254,"confront and vanquish ",254,"these malevolent foes,",254,"for only by defeating ",254,"them can he restore   ",254,"light and peace to the",254,"forsaken realm.       ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25568GentleWinterMap02: db GentleWinterMap02MapBlock | dw GentleWinterMap02Map | db GentleWinterMap02ObjectLayerMapBlock | dw GentleWinterMap02ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (050/2) - 128 | db "2",255,"M",255,"Pocky's Castle Crusade",255,"In the mystical world ",254,"of Pocky and Rocky,   ",254,"our brave hero, Pocky,",254,"embarks on a daring   ",254,"quest to conquer two  ",254,"towering castles      ",254,"shrouded in darkness. ",254,"                      ",254,"Armed with his trusty ",254,"broomstick and        ",254,"unwavering            ",254,"determination, Pocky  ",254,"faces treacherous     ",254,"traps and fierce foes.",254,"                      ",254,"Will Pocky emerge as a",254,"true hero, revered by ",254,"all who dwell in the  ",254,"realm?                ",254,"                      ",254, 25569GentleMap01: db GentleMap01MapBlock | dw GentleMap01Map | db GentleMap01ObjectLayerMapBlock | dw GentleMap01ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (000/2) - 128 | db "4",255,"L",255,"Lololand              ",255,"In the whimsical land ",254,"of Eggerland, our hero",254,"Lolo embarks on a     ",254,"grand adventure.      ",254, 254,"With a gleam in his   ",254,"eye and a puzzle-     ",254,"solving mind, he sets ",254,"out to explore the    ",254,"vast kingdom.         ",254,"Along the way, he     ",254,"encounters mischievous",254,"creatures and tricky  ",254,"traps, but Lolo's     ",254,"determination never   ",254,"wavers. With a mix of ",254,"wit and charm, he     ",254,"outsmarts every       ",254,"challenge, leaving a  ",254,"trail of laughter in  ",254,"his wake.             ",25570GentleCaveMap03: db GentleCaveMap03MapBlock | dw GentleCaveMap03Map | db GentleCaveMap03ObjectLayerMapBlock | dw GentleCaveMap03ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (100/2) - 128 | db "2",255,"M",255,"Comical Cavern Clash  ",255,"In the depths of a    ",254,"mysterious cave,      ",254,"Pippols and Lolo      ",254,"engage in a friendly  ",254,"competition.          ",254,"Armed with creativity,",254,"they gather creatures ",254,"far and wide to build ",254,"their armies.         ",254, 254,"Pippols recruits      ",254,"mighty dwarves and    ",254,"mischievous goblins,  ",254,"while Lolo enlists    ",254,"brave adventurers and ",254,"cunning monsters.     ",254,"                      ",254,"As their armies grow, ",254,"so does the excitement",254,"of the impending      ",254,"showdown.             ",25572GentleJungleMap01: db GentleJungleMap01MapBlock | dw GentleJungleMap01Map | db GentleJungleMap01ObjectLayerMapBlock | dw GentleJungleMap01ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (000/2) - 128 | db "4",255,"L",255,"Randar's Last Stand   ",255,"You, the valiant      ",254,"player, command a trio",254,"of mighty fortresses, ",254,"brimming with heroes  ",254,"itching for adventure.",254,"                      ",254,"With just four months ",254,"on the clock, the race",254,"is on to amass the    ",254,"most eccentric army   ",254,"imaginable and storm  ",254,"Randar's unsuspecting ",254,"stronghold.           ",254, 254,"Get ready to conquer  ",254,"with a grin in this   ",254,"uproarious clash of   ",254,"castles.              ",254,"                      ",254,"                      ",254,"                      ",25573GentleDesertMap02: db GentleDesertMap02MapBlock | dw GentleDesertMap02Map | db GentleDesertMap02ObjectLayerMapBlock | dw GentleDesertMap02ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (050/2) - 128 | db "4",255,"L",255,"A Desert Blood Moon   ",255,"The desert sun beat   ",254,"down on Luice and     ",254,"Dick, two adventurers ",254,"as mismatched as      ",254,"flip-flops on a camel.",254,"                      ",254,"Their mission: retake ",254,"the Three Sunken      ",254,"Spires, glorious      ",254,"sandcastles stolen by ",254,"the nefarious Belmont ",254,"family.               ",254,"                      ",254,"Through trials and    ",254,"triumphs, Luice and   ",254,"Dick prove that even  ",254,"in the harshest of    ",254,"landscapes,           ",254,"friendship and bravery",254,"prevail.              ",254, 25574GentleWinterMap01: db GentleWinterMap01MapBlock | dw GentleWinterMap01Map | db GentleWinterMap01ObjectLayerMapBlock | dw GentleWinterMap01ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (000/2) - 128 | db "2",255,"M",255,"A Beloved Journey     ",255,"Popolon and Aphrodite ",254,"embark on a frosty    ",254,"adventure, seeking the",254,"coveted Emerald Gloves",254,"hidden in the icy     ",254,"realm.                ",254,"Through snowstorms and",254,"perilous cliffs, they ",254,"press on, facing      ",254,"challenges and        ",254,"adversaries.          ",254, 254,"But the final showdown",254,"awaits as they        ",254,"approach the Gloves.  ",254,"                      ",254,"Ruika, the mighty     ",254,"ninja warrior stands  ",254,"in their way, ready to",254,"unleash her full      ",254,"might.                ",25575GentleAutumnMap04: db GentleAutumnMap04MapBlock | dw GentleAutumnMap04Map | db GentleAutumnMap04ObjectLayerMapBlock | dw GentleAutumnMap04ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (150/2) - 128 | db "2",255,"S",255,"Amber Skies, Rogue AI ",255,"In the golden hues of ",254,"autumn, amidst the    ",254,"rustling leaves of    ",254,"Illusion City, Tien   ",254,"Ren, Ho Mei, and Mei  ",254,"Hong embark on a      ",254,"daring mission.       ",254, 254,"Armed with their      ",254,"trusty snatchers, they",254,"confront a rogue AI   ",254,"snatcher threatening  ",254,"the city's peace.     ",254,"                      ",254,"Can they restore order",254,"to Illusion City and  ",254,"protect it from the   ",254,"chaos within, amidst  ",254,"the enchanting beauty ",254,"of the autumn         ",254,"landscape?            ",2557677GentleDesertMap04: db GentleDesertMap04MapBlock | dw GentleDesertMap04Map | db GentleDesertMap04ObjectLayerMapBlock | dw GentleDesertMap04ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (150/2) - 128 | db "2",255,"S",255,"Dragons' Deliverance  ",255,"In a race against the ",254,"clock, you embark on a",254,"daring mission to stop",254,"Dr. Hank Mitchell's   ",254,"sinister plans.       ",254, 254,"With just two months  ",254,"on the clock, the fate",254,"of mythical dragons   ",254,"hangs in the balance  ",254,"within the confines of",254,"his menacing castle.  ",254,"                      ",254,"You set out to        ",254,"confront the nefarious",254,"Dr. Mitchell and      ",254,"liberate the captive  ",254,"creatures before it's ",254,"too late.             ",254,"                      ",254,"The clock is ticking..",25578GentleCaveMap04: db GentleCaveMap04MapBlock | dw GentleCaveMap04Map | db GentleCaveMap04ObjectLayerMapBlock | dw GentleCaveMap04ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (150/2) - 128 | db "2",255,"M",255,"Hunting Dr. Mitchell  ",255,"In pursuit of Dr. Hank",254,"Mitchell, you delve   ",254,"into the labyrinthine ",254,"cave system.          ",254,"Confronting him in his",254,"fortress, you discover",254,"his upgraded dragon   ",254,"army.                 ",254,"                      ",254,"You prepare to thwart ",254,"his sinister plans    ",254,"once more.            ",254,"                      ",254,"Time is of the essence",254,"as you brace for the  ",254,"ultimate showdown to  ",254,"safeguard the realm   ",254,"from his tyranny.     ",254,"                      ",254,"                      ",254, 25579GentleJungleMap03: db GentleJungleMap03MapBlock | dw GentleJungleMap03Map | db GentleJungleMap03ObjectLayerMapBlock | dw GentleJungleMap03ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (100/2) - 128 | db "3",255,"M",255,"Heart of the Jungle   ",255,"Bill Rizer, amidst the",254,"dense jungle foliage, ",254,"faces his ultimate    ",254,"challenge. With laser ",254,"precision, he battles ",254,"through swarms of     ",254,"enemies.              ",254,"                      ",254,"The air thickens with ",254,"anticipation as he    ",254,"approaches two        ",254,"fortresses, guarded by",254,"the formidable        ",254,"adversaries Big Boss  ",254,"and Grey Fox.         ",254,"                      ",254,"Victory is within     ",254,"reach as Bill's       ",254,"indomitable spirit    ",254,"drives him onward.    ",254, 25580GentleMap02: db GentleMap02MapBlock | dw GentleMap02Map | db GentleMap02ObjectLayerMapBlock | dw GentleMap02ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (050/2) - 128 | db "3",255,"M",255,"Dawn of the Ninja     ",255,"In the shadowy veil of",254,"night, Ninja Ruika    ",254,"rallies her skilled   ",254,"warriors, sworn to    ",254,"reclaim two pillaged  ",254,"towns.                ",254,"                      ",254,"With swift precision, ",254,"they traverse rugged  ",254,"terrain, their resolve",254,"unyielding.           ",254, 254,"Amidst the whispering ",254,"winds, their mission  ",254,"is clear: restore     ",254,"peace to the ravaged  ",254,"lands.                ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25581GentleDesertMap05: db GentleDesertMap05MapBlock | dw GentleDesertMap05Map | db GentleDesertMap05ObjectLayerMapBlock | dw GentleDesertMap05ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (200/2) - 128 | db "2",255,"S",255,"Pixy's Bubble Symphony",255,"In the heart of the   ",254,"scorching desert, Pixy",254,"embarks on her daring ",254,"quest, accompanied by ",254,"the whimsical         ",254,"creatures from the    ",254,"magical realm of      ",254,"Bubble Bobble.        ",254,"                      ",254,"She sets her sights on",254,"the castle to the     ",254,"south, where the      ",254,"nefarious Doctor      ",254,"Pettrovich awaits.    ",254, 254,"Can she conquer the   ",254,"castle and restore    ",254,"peace to the desert   ",254,"realm?                ",254,"                      ",254,"                      ",25582GentleCaveMap02: db GentleCaveMap02MapBlock | dw GentleCaveMap02Map | db GentleCaveMap02ObjectLayerMapBlock | dw GentleCaveMap02ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (050/2) - 128 | db "4",255,"L",255,"A Worzen Family Epic  ",255,"In the depths of the  ",254,"cave dwellings, the   ",254,"Worzen family, under  ",254,"your leadership, faces",254,"relentless adversaries",254,"to reclaim their      ",254,"throne.               ",254,"                      ",254,"With every strike and ",254,"spell, they fight on, ",254,"determined to triumph ",254,"in three palaces and  ",254,"restore their rightful",254,"rule.                 ",254,"                      ",254,"Victory hangs in the  ",254,"balance as they press ",254,"forward, unwavering in",254,"their resolve.        ",254,"                      ",254, 25584899398 99MiniMapBlock: equ 12 100MiniMapAddress: equ 13101 102103XMiniMap: equ 203104YMiniMap: equ 005105LoadMiniMap:106 ld ix,(WorldPointer)107 ld l,(ix+MiniMapAddress) 108 ld h,(ix+MiniMapAddress+1) 109 ld de,$0000 + (YMiniMap*128) + (XMiniMap/2) - 128110 ld bc,$0000 + (048*256) + (050/2)111 ld a,(ix+MiniMapBlock) 112 jp CopyRamToVramCorrectedCastleOverview 114XMiniMapScenarioSelectScreen: equ 174115YMiniMapScenarioSelectScreen: equ 033116PutMiniMapScenarioSelectScreen:117 ld ix,(WorldPointer)118 ld l,(ix+MiniMapAddress) 119 ld h,(ix+MiniMapAddress+1) 120 ld de,$0000 + (YMiniMapScenarioSelectScreen*128) + (XMiniMapScenarioSelectScreen/2) - 128121 ld bc,$0000 + (048*256) + (050/2)122 ld a,(ix+MiniMapBlock) 123 call CopyRamToVramCorrectedCastleOverview 124 halt125 ld ix,(WorldPointer)126 call SetMapPalette127 jp SwapAndSetPage 129ShuffleCastleMageGuildSpells: 130 ld a,r131 and 3132 ld hl,.Castle1Spells133 jr z,.SpellsFound134 dec a135 ld hl,.Castle2Spells136 jr z,.SpellsFound137 dec a138 ld hl,.Castle3Spells139 jr z,.SpellsFound140141 ld hl,.Castle4Spells142144 .SpellsFound:145 ld de,Castle1Spells146 ld bc,4*4 147 ldir148 ret150 151.Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 1152.Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 1153.Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 0154.Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 0155.Castle5Spells: db % 0 1 0 1, % 1 0 1 0, % 0 0 1 1, % 1 1 0 0156.Castle6Spells: db % 1 0 1 0, % 0 1 0 1, % 1 0 0 1, % 0 1 1 0157.Castle7Spells: db % 0 1 0 1, % 1 0 1 0, % 1 1 0 0, % 0 0 1 1158.Castle8Spells: db % 1 0 1 0, % 0 1 0 1, % 0 1 1 0, % 1 0 0 1160SetCastlesInMiniMap:161 ld ix,Castle1162 call .SetCastle163 ld ix,Castle2164 call .SetCastle165 ld ix,Castle3166 call .SetCastle167 ld ix,Castle4168 call .SetCastle169 ret171 .SetCastle:172174 ld a,(ix+CastleX)175 cp 255176 ret z177 ld h,0178 ld l,a179 ld de,3 180 call MultiplyHlWithDE 181 push hl182 pop bc183 ld de,8 184 call DivideBCbyDE 185 push bc186 187 ld l,(ix+CastleY)188 ld h,0189 ld de,3 190 call MultiplyHlWithDE 191 push hl192 pop bc193 ld de,8 194 call DivideBCbyDE 196 pop de197 ld a,c198 add YMiniMap-2199 ld d,a201 ld a,e202 add XMiniMap-1203 ld e,a204 205 ld hl,$4000 + (071*128) + (212/2) - 128206207 ld bc,$0000 + (004*256) + (004/2)208 ld a,HudNewBlock 209 exx210 ex af,af'211 ld hl,CopyTransparantImageEXX212 jp EnterSpecificRoutineInCastleOverviewCode214ConvertMonstersObjectLayer:215 ld a,r216 and 7217 ld hl,ListOfUnlockedMonstersLevel1218 ld d,0219 ld e,a220 add hl,de221 ld (MonsterLevel1Pointer),hl223 ld hl,ListOfUnlockedMonstersLevel4224 add hl,de225 ld (MonsterLevel4Pointer),hl228 ld a,r229 and 15230 ld hl,ListOfUnlockedMonstersLevel2231 ld d,0232 ld e,a233 add hl,de234 ld (MonsterLevel2Pointer),hl236 ld hl,ListOfUnlockedMonstersLevel3237 add hl,de238 ld (MonsterLevel3Pointer),hl240 ld a,r241 and 4242 ld hl,ListOfUnlockedMonstersLevel5243 ld d,0244 ld e,a245 add hl,de246 ld (MonsterLevel5Pointer),hl249 252 254 255 ld hl,$8000-1257 .loopAndXorA:258 xor a259 .loop:260 inc hl261 bit 6,h 262 ret nz264 or (hl)265 jp z,.loop266 267 .Check:268 cp 7269 jr nc,.loopAndXorA271 dec a272 jp z,.Level1Monster273 dec a274 jr z,.Level2Monster275 dec a276 jr z,.Level3Monster277 dec a278 jr z,.Level4Monster279 dec a280 jr z,.Level5Monster282 .Level6Monster:283 ld de,(MonsterLevel6Pointer)284 ld a,(de)285 cp 255286 jr z,.Level5Monster287 call .ConvertLevelToMonster288 jr nz,.SetMonsterLevel6Pointer289 ld de,ListOfUnlockedMonstersLevel6290 .SetMonsterLevel6Pointer:291 ld (MonsterLevel6Pointer),de292 jp .loopAndXorA294 .Level5Monster:295 ld de,(MonsterLevel5Pointer)296 ld a,(de)297 cp 255298 jr z,.Level4Monster299 call .ConvertLevelToMonster300 jr nz,.SetMonsterLevel5Pointer301 ld de,ListOfUnlockedMonstersLevel5302 .SetMonsterLevel5Pointer:303 ld (MonsterLevel5Pointer),de304 jp .loopAndXorA306 .Level4Monster:307 ld de,(MonsterLevel4Pointer)308 ld a,(de)309 cp 255310 jr z,.Level3Monster311 call .ConvertLevelToMonster312 jr nz,.SetMonsterLevel4Pointer313 ld de,ListOfUnlockedMonstersLevel4314 .SetMonsterLevel4Pointer:315 ld (MonsterLevel4Pointer),de316 jp .loopAndXorA318 .Level3Monster:319 ld de,(MonsterLevel3Pointer)320 call .ConvertLevelToMonster321 jr nz,.SetMonsterLevel3Pointer322 ld de,ListOfUnlockedMonstersLevel3323 .SetMonsterLevel3Pointer:324 ld (MonsterLevel3Pointer),de325 jp .loopAndXorA327 .Level2Monster:328 ld de,(MonsterLevel2Pointer)329 call .ConvertLevelToMonster330 jr nz,.SetMonsterLevel2Pointer331 ld de,ListOfUnlockedMonstersLevel2332 .SetMonsterLevel2Pointer:333 ld (MonsterLevel2Pointer),de334 jp .loopAndXorA335 336 .Level1Monster:337 ld de,(MonsterLevel1Pointer)338 call .ConvertLevelToMonster339 jr nz,.SetMonsterLevel1Pointer340 ld de,ListOfUnlockedMonstersLevel1341 .SetMonsterLevel1Pointer:342 ld (MonsterLevel1Pointer),de343 jp .loopAndXorA345 .ConvertLevelToMonster:346 ld a,(de)347 ld (hl),a348 cp 160 349 jr nc,.EndCheck1Or2TilesInSize350 ld bc,-128351 add hl,bc352 add a,64+6 353 ld (hl),a354 sbc hl,bc355 356 .EndCheck1Or2TilesInSize:357 inc de358 ld a,(de)359 or a360 ret362CastleTileNr: equ 254363Number1Tile: equ 192364FindAndSetCastles: 365 ld a,255366 ld (Castle1+CastlePlayer),a 367 ld (Castle2+CastlePlayer),a368 ld (Castle3+CastlePlayer),a369 ld (Castle4+CastlePlayer),a370 ld (Castle1+CastleY),a 371 ld (Castle2+CastleY),a372 ld (Castle3+CastleY),a373 ld (Castle4+CastleY),a374 ld (Castle1+CastleX),a 375 ld (Castle2+CastleX),a376 ld (Castle3+CastleX),a377 ld (Castle4+CastleX),a379 382 384 385 ld hl,$8000-1386 .SetCastleTileNrAndGoloop:387 ld a,CastleTileNr388 .loop:389 inc hl390 bit 6,h 391 ret nz392 cp (hl)393 jr nz,.loop395 ld a,l 396 and 127397 dec a398 ld e,a 400 push hl401 push hl402 pop bc404 inc hl 405 ld a,(hl)406 sub a,Number1Tile-1407 408 cp 1409 ld iy,player1human? 410 ld ix,Castle1411 jr z,.CastleNrFound412 cp 2413 ld iy,player2human? 414 ld ix,Castle2 415 jr z,.CastleNrFound416 cp 3417 ld iy,player3human? 418 ld ix,Castle3419 jr z,.CastleNrFound420 ld iy,player4human? 421 ld ix,Castle4422 .CastleNrFound:423 424 ld (ix+CastlePlayer),a425 ld a,(iy)426 cp 2 427 jr nz,.EndCheckPlayerOff428 ld (ix+CastlePlayer),255 429 .EndCheckPlayerOff:431 ld (ix+CastleX),e432 ld (hl),0 434 ld de,128435 call DivideBCbyDE 436 437 ld a,c 438 inc a439 ld (ix+CastleY),a 441 pop hl442 jp .SetCastleTileNrAndGoloop444PlaceHeroesInCastles: 445 ld ix,Castle1446 ld iy,pl1hero1y447 call .SetHeroInCastle449 ld ix,Castle2450 ld iy,pl2hero1y451 call .SetHeroInCastle453 ld a,(amountofplayers)454 cp 2455 ret z457 ld ix,Castle3458 ld iy,pl3hero1y459 call .SetHeroInCastle461 ld a,(amountofplayers)462 cp 3463 ret z465 ld ix,Castle4466 ld iy,pl4hero1y467 call .SetHeroInCastle468 ret470 .SetHeroInCastle:471 ld a,(ix+CastleY)472 dec a473 ld (iy+HeroY),a474 ld a,(ix+CastleX)475 add a,2476 ld (iy+HeroX),a477 ld (iy+HeroStatus),2 478 ret480481CHMOUS: 482 call .go483 LD a,(MOUSIDBuffer)484 LD (MOUSID),A485 LD a,(MSEPRTBuffer)486 LD (MSEPRT),A487 ret488 .go:490 CALL .MOUSIN491 LD A,$10 492 LD (MSEPRTBuffer),A493 CALL .CHMS.0494 JP NC,.MOUSIN495 LD A,$60 496 LD (MSEPRTBuffer),A497 CALL .CHMS.0498 JP NC,.MOUSIN499 500 XOR A 501 LD (MOUSIDBuffer),A502504 RET 505 506 507.MOUSIN: LD A,255508 LD (MOUSIDBuffer),A509 LD HL,DLY_M2 520 EI 521 RET 522 523.CHMS.0: LD B,40 524.CHMS.1: PUSH BC525 CALL .RDPADL526 LD A,H 527 CP 1 528 JP NZ,.CHMS.2529 LD A,L 530 CP 1531 JP NZ,.CHMS.2532 POP BC533 DJNZ .CHMS.1534 SCF 535 RET 536.CHMS.2: POP BC 537 AND A 538 RET 541544.RDPADL: PUSH BC545 PUSH DE546 547 LD DE,(MSEPRTBuffer)548 LD A,15 549 CALL RD_PSG550 AND %10001111 551 OR E 552 LD E,A553 554555 LD B,40 556 LD C,20 557 CALL .RPDL.2558 CALL .RPDL.0559 LD H,A560 561562 CALL .RPDL.1563 CALL .RPDL.0564 LD L,A565 566 EI 567 POP DE568 POP BC569 RET 570 571.RPDL.0: RLCA 572 RLCA 573 RLCA 574 RLCA 575 LD D,A576 CALL .RPDL.1577 OR D578 NEG 579 RET 580 581.RPDL.1: LD B,7582 LD C,6583.RPDL.2: LD A,15584 CALL WR_PSG585 LD A,(MSEPRTBuffer)586 AND $30587 XOR E588 LD E,A589.DLYCAL: CALL DLY_M2590 LD A,14591 CALL RD_PSG592 AND $0F593 RET 594MSXHeroes.asm 632endLoader:633 ds $8000-$,$ff 634dephase636639InsertMouseBlock: equ $05640phase $4000641 incbin "..\grapx\TitleScreen\InsertMouse.SC5",7,112 * 128 642 ds $8000-$,$ff643dephase645AdolSpriteBlock: equ HeroesSpritesBlock1646Goemon1SpriteBlock: equ HeroesSpritesBlock1647PixySpriteBlock: equ HeroesSpritesBlock1648Drasle1SpriteBlock: equ HeroesSpritesBlock1649LatokSpriteBlock: equ HeroesSpritesBlock1650Drasle2SpriteBlock: equ HeroesSpritesBlock1651Snake1SpriteBlock: equ HeroesSpritesBlock1652Drasle3SpriteBlock: equ HeroesSpritesBlock1654Snake2SpriteBlock: equ HeroesSpritesBlock2655Drasle4SpriteBlock: equ HeroesSpritesBlock2656AshguineSpriteBlock: equ HeroesSpritesBlock2657Undeadline1SpriteBlock: equ HeroesSpritesBlock2658PsychoWorldSpriteBlock: equ HeroesSpritesBlock2659Undeadline2SpriteBlock: equ HeroesSpritesBlock2660Goemon2SpriteBlock: equ HeroesSpritesBlock2661Undeadline3SpriteBlock: equ HeroesSpritesBlock2663FraySpriteBlock: equ HeroesSpritesBlock3664BlackColorSpriteBlock: equ HeroesSpritesBlock3665WitSpriteBlock: equ HeroesSpritesBlock3666MitchellSpriteBlock: equ HeroesSpritesBlock3667JanJackGibsonSpriteBlock: equ HeroesSpritesBlock3668GillianSeedSpriteBlock: equ HeroesSpritesBlock3669SnatcherSpriteBlock: equ HeroesSpritesBlock3670GolvelliusSpriteBlock: equ HeroesSpritesBlock3672BillRizerSpriteBlock: equ HeroesSpritesBlock4673PochiSpriteBlock: equ HeroesSpritesBlock4674GreyFoxSpriteBlock: equ HeroesSpritesBlock4675TrevorBelmontSpriteBlock: equ HeroesSpritesBlock4676BigBossSpriteBlock: equ HeroesSpritesBlock4677SimonBelmontSpriteBlock: equ HeroesSpritesBlock4678DrPettrovichSpriteBlock: equ HeroesSpritesBlock4679RichterBelmontSpriteBlock: equ HeroesSpritesBlock4681UltraBoxSpriteBlock: equ HeroesSpritesBlock5682LoganSeriosSpriteBlock: equ HeroesSpritesBlock5683HollyWhiteSpriteBlock: equ HeroesSpritesBlock5684MerciesSpriteBlock: equ HeroesSpritesBlock5685NatashaRomanenkoSpriteBlock: equ HeroesSpritesBlock5686RuthSpriteBlock: equ HeroesSpritesBlock5687GeeraSpriteBlock: equ HeroesSpritesBlock5688YoungNobleSpriteBlock: equ HeroesSpritesBlock5690DawelSpriteBlock: equ HeroesSpritesBlock6691PockySpriteBlock: equ HeroesSpritesBlock6692KelesisTheCookSpriteBlock: equ HeroesSpritesBlock6693LoloSpriteBlock: equ HeroesSpritesBlock6694PippolsSpriteBlock: equ HeroesSpritesBlock6695RandarSpriteBlock: equ HeroesSpritesBlock6696ClesSpriteBlock: equ HeroesSpritesBlock6697LuiceSpriteBlock: equ HeroesSpritesBlock6699DickSpriteBlock: equ HeroesSpritesBlock7700AphroditeSpriteBlock: equ HeroesSpritesBlock7701TienRenSpriteBlock: equ HeroesSpritesBlock7702PopolonSpriteBlock: equ HeroesSpritesBlock7703HoMeiSpriteBlock: equ HeroesSpritesBlock7704PriestessKiSpriteBlock: equ HeroesSpritesBlock7705MeiHongSpriteBlock: equ HeroesSpritesBlock7706PrinceGilgameshSpriteBlock: equ HeroesSpritesBlock7708RandomHajileSpriteBlock: equ HeroesSpritesBlock8709BensonCunninghamSpriteBlock: equ HeroesSpritesBlock8710JamieSeedSpriteBlock: equ HeroesSpritesBlock8711ArmoredSnatcherSpriteBlock: equ HeroesSpritesBlock8712DruidSpriteBlock: equ HeroesSpritesBlock8713MomotaruSpriteBlock: equ HeroesSpritesBlock8714LukaSpriteBlock: equ HeroesSpritesBlock8715HeiwaAndButakoSpriteBlock: equ HeroesSpritesBlock8717AceSpriteBlock: equ HeroesSpritesBlock9718SpaceExplorer01SpriteBlock: equ HeroesSpritesBlock9719FernSpriteBlock: equ HeroesSpritesBlock9720HornSpriteBlock: equ HeroesSpritesBlock9721PixieSpriteBlock: equ HeroesSpritesBlock9722FreyaJerbainSpriteBlock: equ HeroesSpritesBlock9723LanceBeanSpriteBlock: equ HeroesSpritesBlock9724ThiharisSpriteBlock: equ HeroesSpritesBlock9726PampasSpriteBlock: equ HeroesSpritesBlock10727SeleneSpriteBlock: equ HeroesSpritesBlock10728SkooterSpriteBlock: equ HeroesSpritesBlock10729JeddaChefSpriteBlock: equ HeroesSpritesBlock10731734HeroesSpritesBlock1: equ $06735HeroesSpritesBlock2: equ HeroesSpritesBlock1 + 1736phase $4000737 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1.SC5",7,208 * 128 738 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1Bottom48Lines.SC5",7,48 * 128 739 ds $c000-$,$ff740dephase742745HeroesSpritesBlock3: equ HeroesSpritesBlock1 + 2746HeroesSpritesBlock4: equ HeroesSpritesBlock1 + 3747phase $4000748 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2.SC5",7,208 * 128 749 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2Bottom48Lines.SC5",7,48 * 128 750 ds $c000-$,$ff751dephase753756HeroesSpritesBlock5: equ HeroesSpritesBlock1 + 4757HeroesSpritesBlock6: equ HeroesSpritesBlock1 + 5758phase $4000759 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3.SC5",7,208 * 128 760 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3Bottom48Lines.SC5",7,48 * 128 761 ds $c000-$,$ff762dephase764767HeroesSpritesBlock7: equ HeroesSpritesBlock1 + 6768HeroesSpritesBlock8: equ HeroesSpritesBlock1 + 7769phase $4000770 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4.SC5",7,208 * 128 771 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4Bottom48Lines.SC5",7,48 * 128 772 ds $c000-$,$ff773dephase775778HeroesSpritesBlock9: equ HeroesSpritesBlock1 + 8779HeroesSpritesBlock10: equ HeroesSpritesBlock1 + 9780phase $4000781 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet5.SC5",7,192 * 128 782 ds $c000-$,$ff783dephase785788Enemy14x14PortraitsBlock: equ $10789phase $4000790 incbin "..\grapx\MonsterSprites\14x14Portraits.SC5",7,212 * 128 791 ds $c000-$,$ff792dephase794797Hero10x18PortraitsBlock: equ $12798phase $4000799 incbin "..\grapx\HeroesSprites\10x18Portraits.SC5",7,72 * 128 800 ds $8000-$,$ff801dephase803806phase $8000807QuickTipsBlock: equ $13808 QuickTips.asm1TextQuickTip1: db "As the kingdom's network of",2542 db "marketplaces in towns expands,",2543 db "the scales of fortune tilt",2544 db "increasingly in favor of the",2545 db "player, unveiling a more",2546 db "exquisite advantage.",2558TextQuickTip2: db "Using a keyboard ?",2549 db "Press and hold the Shift key to",25410 db "double the pointer's speed,",25411 db "and hold the Ctrl key to scroll",25412 db "directly through the map.",25514TextQuickTip3: db "Pressing the right mouse button",25415 db "or 'm' on your keyboard lets you",25416 db "close the window you're",25417 db "in or exit the castle screen.",25519TextQuickTip4:20 db "When a hero retreats from",25421 db "battle, they halt their",25422 db "contribution of experience to the",25423 db "enemy. Be assured, they shall",25424 db "soon embark on a graceful",25425 db "journey back to your tavern.",25527TextQuickTip5:28 db "Recruit a second hero early. They",25429 db "can take care of gathering",25430 db "supplies, allowing your main hero",25431 db "to explore and fight freely. Down",25432 db "the line, use a chain of heroes",25433 db "to move troops around super fast.",25535TextQuickTip6:36 db "Ensure your gold income outpaces",25437 db "expenses without leaving yourself",25438 db "defenseless early on. Swiftly",25439 db "acquire a capital. They're",25440 db "invaluable and boost troop",25441 db "production.",25543TextQuickTip7:44 db "The game favors centralization.",25445 db "Avoid building anything except",25446 db "town hall and city hall in",25447 db "secondary towns. These buildings",25448 db "are crucial for generating gold",25449 db "and nothing else.",25551TextQuickTip8:52 db "The Speed stat dictates both",25453 db "movement and turn order, making",25454 db "Earthbound a potent combat spell.",25455 db "A hero skilled in Earth Magic",25456 db "can cripple entire armies with",25457 db "a single cast.",25559TextQuickTip9:60 db "Melee units are crucial for",25461 db "engaging ranged units effectively,",25462 db "as ranged units are significantly",25463 db "weaker in close combat.",25464 db "Additionally, ranged units deal",25465 db "reduced damage from long range.",25567TextQuickTip10:68 db "Range penalty is a 50% reduction",25469 db "of damage for ranged attacks.",25470 db "It occurs when the target is",25471 db "further than 8 hexes from the",25472 db "shooter.",25574TextQuickTip11:75 db "Heroes ending their turn in a",25476 db "town with a Mage Guild will",25477 db "have their Spell Points fully",25478 db "restored by the start of their",25479 db "next turn.",25580 81TextQuickTip12:82 db "Every hero can learn level 1",25483 db "spells. Develop basic, advanced,",25484 db "and expert wisdom to gain",25485 db "access to level 2, 3, and 4",25486 db "spells.",25587 88TextQuickTip13:89 db "Although you can have up to 8",25490 db "heroes, consider carefully before",25491 db "recruiting more heroes.",25492 db "Usually, two or three suffice,",25493 db "but more may be necessary later",25494 db "on. Use your judgment wisely.",25596TextQuickTip14:97 db "You can build a town quickly by",25498 db "purchasing creature barracks for",25499 db "early combat or focus on",254100 db "upgrading to a Capitol for faster",254101 db "income and securing a stronger",254102 db "late game position.",255104TextQuickTip15:105 db "The creatures possessing the",254106 db "highest movement speed can opt",254107 db "to act first or wait until the",254108 db "end of their turn during combat.",255109 110TextQuickTip16:111 db "Strategically develop heroes.",254112 db "Warriors focus on non-magical",254113 db "skills, avoiding wisdom,",254114 db "while wizards prioritize magic.",255116TextQuickTip17:117 db "Sacrifice a pawn, win the game:",254118 db "Single units can serve as",254119 db "expendable buffers, absorbing",254120 db "hits for your main army and",254121 db "thereby shielding it from",254122 db "retaliatory strikes.",255123 124TextQuickTip18:125 db "Sacrifice a pawn, win the game:",254126 db "Single units can serve as",254127 db "expendable buffers, absorbing",254128 db "hits for your main army and",254129 db "thereby shielding it from",254130 db "retaliatory strikes.",255131 132TextQuickTip19:133 db "Access details about enemy",254134 db "stacks, items, and objects by",254135 db "right-clicking on the adventure",254136 db "map or pressing 'm' on your",254137 db "keyboard.",255139TextQuickTip20:140 db "You can check an enemy's level",254141 db "and size by right-clicking on",254142 db "them or pressing 'm'.",254143 db "The size order is:",254144 db "a few, several, many, numerous,",254145 db "a horde, and countless.",255147TextQuickTip21:148 db "In the cadence of combat,",254149 db "defending creatures with matched",254150 db "speed may claim the first step",254151 db "in battle on their turn,",254152 db "preceding their attacking",254153 db "counterparts.",255155TextQuickTip22:156 db "Consider the map size and ",254157 db "distance to opponents as crucial",254158 db "factors in determining whether",254159 db "to pursue an early or late game",254160 db "victory.",255162TextQuickTip23:163 db "The Armorer skill strengthens your",254164 db "creatures, reducing physical blows",254165 db "from both melee and ranged",254166 db "attackers. However, magical",254167 db "attacks from enemy heroes still",254168 db "pierce these defenses.",255170TextQuickTip24:171 db "A unit's speed indicates how",254172 db "many hexagonal tiles it can",254173 db "traverse on the battlefield,",254174 db "starting from the leftmost tile",254175 db "the unit occupies.",255177TextQuickTip25:178 db "Transferring army units between",254179 db "heroes deducts one movement",254180 db "point from the initiating hero.",254181 db "However, swapping units inside",254182 db "a castle does not consume a",254183 db "movement point.",255185TextQuickTip26:186 db "When an attacking unit's attack",254187 db "surpasses the defending unit's",254188 db "defense, it gains a 5% damage",254189 db "bonus per point difference,",254190 db "up to 300%.",255192TextQuickTip27:193 db "When a defending unit's defense",254194 db "exceeds the attacker's attack,",254195 db "the attacker suffers a 2.5%",254196 db "damage penalty per point deficit,",254197 db "up to 30%.",255199TextQuickTip28:200 db "A creature may opt to defend",254201 db "during its phase, gaining a 20%",254202 db "bonus to its defense rating",254203 db "(after accounting for item",254204 db "bonuses and spell effects) and",254205 db "forfeits the remainder of its turn.",255207TextQuickTip29:208 db "During combat, the spell",254209 db "duration can be determined",254210 db "using the formula:",254211 db "spell duration equals spell",254212 db "damage divided by 3, plus 2.",255213 214TextQuickTip30:215 db "Retreating is cost-free, yet",254216 db "you forfeit all creatures.",254217 db "Surrendering incurs a fee, but",254218 db "your creatures remain intact.",254219 db "The Hero can be rehired upon",254220 db "returning to the tavern.",255222TextQuickTip31:223 db "When your hero finds a scroll",254224 db "on the world map, they gain the",254225 db "capability to cast the spell it",254226 db "contains, even without the",254227 db "wisdom skill typically needed.",255229TextQuickTip32:230 db "Occupying the defending hero slot",254231 db "in a castle grants +1 defense.",254232 db "Additionally, if castle walls exist,",254233 db "the hero's defense increases by",254234 db "+5.",255235 236TextQuickTip33:237 db "Scattered among scrolls are",254238 db "special universal spells not",254239 db "teachable within mage guilds.",255241TextQuickTip34:242 db "The HUD shows your heroes'",254243 db "available movement points next",254244 db "to their hero portrait on the",254245 db "left, and their total mana",254246 db "points on the right.",255248249StartOfGameQuickTips: equ 35251TextQuickTip35:252 db "You can double-click on a",254253 db "location on the adventure map",254254 db "to move there. When your hero's",254255 db "movement points are depleted,",254256 db "click the hourglass to end your",254257 db "turn and recharge.",255259TextQuickTip36:260 db "Enter your castle by clicking its",254261 db "center or double-clicking the",254262 db "castle icon in the HUD.",254263 db "Begin constructing new structures",254264 db "to define your expanding empire.",255266TextQuickTip37:267 db "You're limited to constructing one",254268 db "building per turn. Plan ahead to",254269 db "decide whether to focus on",254270 db "generating income, enhancing",254271 db "magic, or summoning creatures.",255273TextQuickTip38:274 db "Can't find your hero ?",254275 db "Clicking the hero icon in the HUD",254276 db "will focus the screen on your",254277 db "hero's location. Clicking the castle",254278 db "icon will do the same for your",254279 db "castle.",255281TextQuickTip39:282 db "On the adventure map, you can",254283 db "gather resources necessary for",254284 db "constructing specific buildings.",254285 db "Additionally, you may stumble",254286 db "upon potent artifacts and scrolls",254287 db "that enhance your hero's prowess.",255289TextQuickTip40:290 db "Clicking on your hero or double-",254291 db "clicking your hero's icon in the",254292 db "HUD will open the hero menu,",254293 db "allowing you to access your",254294 db "hero's skills, inventory, army",254295 db "arrangement, spells, and stats.",255297TextQuickTip41:298 db "Each hero belongs to a specific",254299 db "class. This class determines their",254300 db "starting set of primary skills and",254301 db "influences the probability of",254302 db "acquiring new primary and",254303 db "secondary skills as they level up.",255305TextQuickTip42:306 db "In the hero menu's army window,",254307 db "you can rearrange and split your",254308 db "units. This allows you to create",254309 db "tactical formations, like using",254310 db "melee units as a shield for your",254311 db "ranged attackers.",255313TextQuickTip43:314 db "Prioritize information.",254315 db "Before engaging in combat,",254316 db "right-click on enemies to view",254317 db "their size and level. This crucial",254318 db "intel helps you estimate your",254319 db "odds of success.",255321TextQuickTip44:322 db "Combat follows a turn-based",254323 db "system, wherein each creature",254324 db "has the option to move, attack",254325 db "if within range, defend for a",254326 db "+20% defense bonus, or opt to",254327 db "delay their action until later.",255329TextQuickTip45:330 db "Each hero belongs to one of 3",254331 db "categories: Might, Adventure, or",254332 db "Wizardry.",254333 db "Plan your city's structures",254334 db "strategically to best complement",254335 db "their strengths.",255337TextQuickTip46:338 db "When your foe's forces are",254339 db "dwindling in combat, make a",254340 db "concerted effort to eliminate them",254341 db "in one decisive assault, leaving",254342 db "no chance for retreat.",255344TextQuickTip47:345 db "Defeating a hero grants you",254346 db "access to their equipment,",254347 db "expanding your arsenal.",254348 db "But remember, only what you can",254349 db "physically hold becomes yours.",255351TextQuickTip48:352 db "Creatures require a hero's",254353 db "guidance to be recruited. If your",254354 db "main hero is unavailable, consider",254355 db "acquiring another hero solely for",254356 db "the purpose of transporting these",254357 db "creatures.",255359TextQuickTip49:360 db "Upon obtaining a scroll, the game",254361 db "endeavors to assist your hero",254362 db "by granting them a scroll",254363 db "corresponding to a spell they",254364 db "haven't yet obtained or learned.",255366TextQuickTip50:367 db "A creature's damage is its actual",254368 db "offensive output during combat.",254369 db "However, its attack and defense",254370 db "serve as modifiers that determine",254371 db "the extent to which its damage",254372 db "increases or decreases.",255374LastQuickTip: equ 50379MSXHeroes.asm809 ds $c000-$,$ff810dephase812815Hero20x11PortraitsBlock: equ $14816phase $4000817 incbin "..\grapx\HeroesSprites\20x11Portraits.SC5",7,208 * 128 818 incbin "..\grapx\HeroesSprites\20x11PortraitsBottom48lines.SC5",7,048 * 128 819 ds $c000-$,$ff820dephase822825TitleScreenGraphicsBlock: equ $16826phase $4000827if Promo?828 incbin "..\grapx\TitleScreen\TitleScreenPromo.SC5",7,212 * 128 829else830 incbin "..\grapx\TitleScreen\TitleScreen.SC5",7,212 * 128 831endif832 ds $c000-$,$ff833dephase835838World1ObjectsBlock: equ $18839phase $4000840 incbin "..\grapx\tilesheets\world1Objects.SC5",7+(64*128),144 * 128 841 incbin "..\grapx\tilesheets\world1ObjectsBottom48Lines.SC5",7,48 * 128 842 ds $c000-$,$ff843dephase845848HeroOverviewGraphicsBlock: equ $1a849phase $4000850 incbin "..\grapx\HeroOverview\HeroOverviewGraphics.SC5",7,171 * 128 851 ds $c000-$,$ff852dephase854857HeroOverviewCodeBlock: equ $1c858phase $4000859 HeroOverviewCode.asm113HeroOverViewFirstWindowchoicesSX: equ 00014HeroOverViewFirstWindowchoicesSY: equ 00015HeroOverViewFirstWindowchoicesDX: equ 058 - 0516HeroOverViewFirstWindowchoicesDY: equ 03717HeroOverViewFirstWindowchoicesNX: equ 10618HeroOverViewFirstWindowchoicesNY: equ 12220HeroOverViewFirstWindowButtonNY: equ 01121HeroOverViewFirstWindowButtonNX: equ 0902325HeroOverViewSkillsWindowSX: equ 10626HeroOverViewSkillsWindowSY: equ 00027HeroOverViewSkillsWindowDX: equ 03028HeroOverViewSkillsWindowDY: equ 02529HeroOverViewSkillsWindowNX: equ 15030HeroOverViewSkillsWindowNY: equ 139-132HeroOverViewSkillsWindowButtonNY: equ 01133HeroOverViewSkillsWindowButtonNX: equ 1343537HeroOverViewStatusWindowSX: equ 00038HeroOverViewStatusWindowSY: equ 00039HeroOverViewStatusWindowDX: equ 02840HeroOverViewStatusWindowDY: equ 04041HeroOverViewStatusWindowNX: equ 15042HeroOverViewStatusWindowNY: equ 1164446HeroOverViewSpellBookWindowSX: equ 00047HeroOverViewSpellBookWindowSY: equ 00048HeroOverViewSpellBookWindowDX: equ 00649HeroOverViewSpellBookWindowDY: equ 00950HeroOverViewSpellBookWindowNX: equ 19251HeroOverViewSpellBookWindowNY: equ 18453HeroOverViewSpellBookWindowButton1NY: equ 035 - 154HeroOverViewSpellBookWindowButton1NX: equ 01055HeroOverViewSpellBookWindowButton2NY: equ 029 - 156HeroOverViewSpellBookWindowButton2NX: equ 01057HeroOverViewSpellBookWindowButton3NY: equ 023 - 158HeroOverViewSpellBookWindowButton3NX: equ 01059HeroOverViewSpellBookWindowButton4NY: equ 03560HeroOverViewSpellBookWindowButton4NX: equ 01062HeroOverViewSpellIconWindowButtonNY: equ 01663HeroOverViewSpellIconWindowButtonNX: equ 01665HeroOverViewInventoryIconWindowButtonNY: equ 02066HeroOverViewInventoryIconWindowButtonNX: equ 0206971HeroOverViewSpellBackdropSX: equ 19272HeroOverViewSpellBackdropSY: equ 12273HeroOverViewSpell1backdropDY: equ HeroOverViewSpellBookWindowDY + 04474HeroOverViewSpell1backdropDX: equ HeroOverViewSpellBookWindowDX + 03475HeroOverViewSpellbackdropNX: equ 02876HeroOverViewSpellbackdropNY: equ 02878HeroOverViewSpell2backdropDY: equ HeroOverViewSpellBookWindowDY + 04879HeroOverViewSpell2backdropDX: equ HeroOverViewSpellBookWindowDX + 06480HeroOverViewSpell3backdropDY: equ HeroOverViewSpellBookWindowDY + 08981HeroOverViewSpell3backdropDX: equ HeroOverViewSpellBookWindowDX + 03282HeroOverViewSpell4backdropDY: equ HeroOverViewSpellBookWindowDY + 09383HeroOverViewSpell4backdropDX: equ HeroOverViewSpellBookWindowDX + 06284HeroOverViewSpell5backdropDY: equ HeroOverViewSpellBookWindowDY + 04885HeroOverViewSpell5backdropDX: equ HeroOverViewSpellBookWindowDX + 10286HeroOverViewSpell6backdropDY: equ HeroOverViewSpellBookWindowDY + 04487HeroOverViewSpell6backdropDX: equ HeroOverViewSpellBookWindowDX + 13288HeroOverViewSpell7backdropDY: equ HeroOverViewSpellBookWindowDY + 09389HeroOverViewSpell7backdropDX: equ HeroOverViewSpellBookWindowDX + 10490HeroOverViewSpell8backdropDY: equ HeroOverViewSpellBookWindowDY + 08991HeroOverViewSpell8backdropDX: equ HeroOverViewSpellBookWindowDX + 1349394Spell01IconSX: equ 22495Spell01IconSY: equ 00096Spell02IconSX: equ 22497Spell02IconSY: equ 01698Spell03IconSX: equ 22499Spell03IconSY: equ 032100Spell04IconSX: equ 224101Spell04IconSY: equ 048102103Spell05IconSX: equ 224104Spell05IconSY: equ 064105Spell06IconSX: equ 224106Spell06IconSY: equ 080107Spell07IconSX: equ 224108Spell07IconSY: equ 096109Spell08IconSX: equ 224110Spell08IconSY: equ 112111112Spell09IconSX: equ 224113Spell09IconSY: equ 128114Spell10IconSX: equ 224115Spell10IconSY: equ 144116Spell11IconSX: equ 224117Spell11IconSY: equ 160118Spell12IconSX: equ 224119Spell12IconSY: equ 176120121Spell13IconSX: equ 000122Spell13IconSY: equ 184123Spell14IconSX: equ 032124Spell14IconSY: equ 184125Spell15IconSX: equ 064126Spell15IconSY: equ 184127Spell16IconSX: equ 096128Spell16IconSY: equ 184129130Spell17IconSX: equ 128131Spell17IconSY: equ 184132Spell18IconSX: equ 160133Spell18IconSY: equ 184134Spell19IconSX: equ 192135Spell19IconSY: equ 184136Spell20IconSX: equ 192137Spell20IconSY: equ 168140Spell1DY: equ HeroOverViewSpellBookWindowDY + 050141Spell1DX: equ HeroOverViewSpellBookWindowDX + 040142Spell2DY: equ HeroOverViewSpellBookWindowDY + 054143Spell2DX: equ HeroOverViewSpellBookWindowDX + 070144Spell3DY: equ HeroOverViewSpellBookWindowDY + 095145Spell3DX: equ HeroOverViewSpellBookWindowDX + 038146Spell4DY: equ HeroOverViewSpellBookWindowDY + 099147Spell4DX: equ HeroOverViewSpellBookWindowDX + 068148Spell5DY: equ HeroOverViewSpellBookWindowDY + 054149Spell5DX: equ HeroOverViewSpellBookWindowDX + 108150Spell6DY: equ HeroOverViewSpellBookWindowDY + 050151Spell6DX: equ HeroOverViewSpellBookWindowDX + 138152Spell7DY: equ HeroOverViewSpellBookWindowDY + 099153Spell7DX: equ HeroOverViewSpellBookWindowDX + 110154Spell8DY: equ HeroOverViewSpellBookWindowDY + 095155Spell8DX: equ HeroOverViewSpellBookWindowDX + 140157SpellIconNX: equ 016158SpellIconNY: equ 016160162HeroOverViewInventoryWindowSX: equ 000163HeroOverViewInventoryWindowSY: equ 000164HeroOverViewInventoryWindowDX: equ 030165HeroOverViewInventoryWindowDY: equ 024166HeroOverViewInventoryWindowNX: equ 146167HeroOverViewInventoryWindowNY: equ 156169InventoryItemNY: equ 020170InventoryItemNx: equ 020171172InventoryItem01DY: equ HeroOverViewInventoryWindowDY + 028173InventoryItem01Dx: equ HeroOverViewInventoryWindowDX + 020174InventoryItem02DY: equ HeroOverViewInventoryWindowDY + 028175InventoryItem02Dx: equ HeroOverViewInventoryWindowDX + 064176InventoryItem03DY: equ HeroOverViewInventoryWindowDY + 028177InventoryItem03Dx: equ HeroOverViewInventoryWindowDX + 108179InventoryItem04DY: equ HeroOverViewInventoryWindowDY + 053180InventoryItem04Dx: equ HeroOverViewInventoryWindowDX + 020181InventoryItem05DY: equ HeroOverViewInventoryWindowDY + 053182InventoryItem05Dx: equ HeroOverViewInventoryWindowDX + 064183InventoryItem06DY: equ HeroOverViewInventoryWindowDY + 053184InventoryItem06Dx: equ HeroOverViewInventoryWindowDX + 108186InventoryItem07DY: equ HeroOverViewInventoryWindowDY + 078187InventoryItem07Dx: equ HeroOverViewInventoryWindowDX + 020188InventoryItem08DY: equ HeroOverViewInventoryWindowDY + 078189InventoryItem08Dx: equ HeroOverViewInventoryWindowDX + 064190InventoryItem09DY: equ HeroOverViewInventoryWindowDY + 078191InventoryItem09Dx: equ HeroOverViewInventoryWindowDX + 108192193InventoryItem10DY: equ HeroOverViewInventoryWindowDY + 101194InventoryItem10Dx: equ HeroOverViewInventoryWindowDX + 008195InventoryItem11DY: equ HeroOverViewInventoryWindowDY + 101196InventoryItem11Dx: equ HeroOverViewInventoryWindowDX + 030197InventoryItem12DY: equ HeroOverViewInventoryWindowDY + 101198InventoryItem12Dx: equ HeroOverViewInventoryWindowDX + 052199InventoryItem13DY: equ HeroOverViewInventoryWindowDY + 101200InventoryItem13Dx: equ HeroOverViewInventoryWindowDX + 074201InventoryItem14DY: equ HeroOverViewInventoryWindowDY + 101202InventoryItem14Dx: equ HeroOverViewInventoryWindowDX + 096203InventoryItem15DY: equ HeroOverViewInventoryWindowDY + 101204InventoryItem15Dx: equ HeroOverViewInventoryWindowDX + 118206ScrollIconNR: equ 46207InventoryIconTableSYSX: 208 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 209 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 128210 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 211 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 128212 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 213 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 128214 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 215 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 128216 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 217 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 128219 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 220 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 128221 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 222 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 128223 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 224 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 128225 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 226 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 128227 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 228 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 128230 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 231 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 128232 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 233 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 128234 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 235 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 128236 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 237 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 128238 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 239 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 128241 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 242 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 128243 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 244 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 128245 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 246 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 128247 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 248 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 128249 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 250 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 128252 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 253 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 128254 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 255 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 128256 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 257 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 128258 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 259 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 128260 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 261 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 128263 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 264 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 128265 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 266 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 128267 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 268 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 128269 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 270 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 128271 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 272 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 128276 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 277 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 128278 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 279 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 128280 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 281 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 128282 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 283 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 128284 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 285 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 128287 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 288 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 128289 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 290 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 128291 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 292 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 128293 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 294 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 128295 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 296 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 128298 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 299 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 128300 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 301 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 128302 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 303 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 128304 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 305 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 128306 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 307 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 128309 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 310 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 128312 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 313 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 128315InventoryItem00ButtonOffSY: equ 000 316InventoryItem00ButtonOffSX: equ 146317InventoryItem00MouseOverSY: equ 020318InventoryItem00MouseOverSX: equ 146319InventoryItem01ButtonOffSY: equ 000 320InventoryItem01ButtonOffSX: equ 166321InventoryItem01MouseOverSY: equ 020322InventoryItem01MouseOverSX: equ 166323InventoryItem02ButtonOffSY: equ 000 324InventoryItem02ButtonOffSX: equ 186325InventoryItem02MouseOverSY: equ 020326InventoryItem02MouseOverSX: equ 186327InventoryItem03ButtonOffSY: equ 000 328InventoryItem03ButtonOffSX: equ 206329InventoryItem03MouseOverSY: equ 020330InventoryItem03MouseOverSX: equ 206331InventoryItem04ButtonOffSY: equ 000 332InventoryItem04ButtonOffSX: equ 226333InventoryItem04MouseOverSY: equ 020334InventoryItem04MouseOverSX: equ 226336InventoryItem05ButtonOffSY: equ 040 337InventoryItem05ButtonOffSX: equ 146338InventoryItem05MouseOverSY: equ 060339InventoryItem05MouseOverSX: equ 146340InventoryItem06ButtonOffSY: equ 040 341InventoryItem06ButtonOffSX: equ 166342InventoryItem06MouseOverSY: equ 060343InventoryItem06MouseOverSX: equ 166344InventoryItem07ButtonOffSY: equ 040 345InventoryItem07ButtonOffSX: equ 186346InventoryItem07MouseOverSY: equ 060347InventoryItem07MouseOverSX: equ 186348InventoryItem08ButtonOffSY: equ 040 349InventoryItem08ButtonOffSX: equ 206350InventoryItem08MouseOverSY: equ 060351InventoryItem08MouseOverSX: equ 206352InventoryItem09ButtonOffSY: equ 040 353InventoryItem09ButtonOffSX: equ 226354InventoryItem09MouseOverSY: equ 060355InventoryItem09MouseOverSX: equ 226357InventoryItem10ButtonOffSY: equ 080 358InventoryItem10ButtonOffSX: equ 146359InventoryItem10MouseOverSY: equ 100360InventoryItem10MouseOverSX: equ 146361InventoryItem11ButtonOffSY: equ 080 362InventoryItem11ButtonOffSX: equ 166363InventoryItem11MouseOverSY: equ 100364InventoryItem11MouseOverSX: equ 166365InventoryItem12ButtonOffSY: equ 080 366InventoryItem12ButtonOffSX: equ 186367InventoryItem12MouseOverSY: equ 100368InventoryItem12MouseOverSX: equ 186369InventoryItem13ButtonOffSY: equ 080 370InventoryItem13ButtonOffSX: equ 206371InventoryItem13MouseOverSY: equ 100372InventoryItem13MouseOverSX: equ 206373InventoryItem14ButtonOffSY: equ 080 374InventoryItem14ButtonOffSX: equ 226375InventoryItem14MouseOverSY: equ 100376InventoryItem14MouseOverSX: equ 226378InventoryItem15ButtonOffSY: equ 156 379InventoryItem15ButtonOffSX: equ 000380InventoryItem15MouseOverSY: equ 176381InventoryItem15MouseOverSX: equ 000382InventoryItem16ButtonOffSY: equ 156 383InventoryItem16ButtonOffSX: equ 020384InventoryItem16MouseOverSY: equ 176385InventoryItem16MouseOverSX: equ 020386InventoryItem17ButtonOffSY: equ 156 387InventoryItem17ButtonOffSX: equ 040388InventoryItem17MouseOverSY: equ 176389InventoryItem17MouseOverSX: equ 040390InventoryItem18ButtonOffSY: equ 156 391InventoryItem18ButtonOffSX: equ 060392InventoryItem18MouseOverSY: equ 176393InventoryItem18MouseOverSX: equ 060394InventoryItem19ButtonOffSY: equ 156 395InventoryItem19ButtonOffSX: equ 080396InventoryItem19MouseOverSY: equ 176397InventoryItem19MouseOverSX: equ 080399InventoryItem20ButtonOffSY: equ 156 400InventoryItem20ButtonOffSX: equ 100401InventoryItem20MouseOverSY: equ 176402InventoryItem20MouseOverSX: equ 100403InventoryItem21ButtonOffSY: equ 156 404InventoryItem21ButtonOffSX: equ 120405InventoryItem21MouseOverSY: equ 176406InventoryItem21MouseOverSX: equ 120407InventoryItem22ButtonOffSY: equ 156 408InventoryItem22ButtonOffSX: equ 140409InventoryItem22MouseOverSY: equ 176410InventoryItem22MouseOverSX: equ 140411InventoryItem23ButtonOffSY: equ 156 412InventoryItem23ButtonOffSX: equ 160413InventoryItem23MouseOverSY: equ 176414InventoryItem23MouseOverSX: equ 160415InventoryItem24ButtonOffSY: equ 156 416InventoryItem24ButtonOffSX: equ 180417InventoryItem24MouseOverSY: equ 176418InventoryItem24MouseOverSX: equ 180420InventoryItem25ButtonOffSY: equ 156 421InventoryItem25ButtonOffSX: equ 200422InventoryItem25MouseOverSY: equ 176423InventoryItem25MouseOverSX: equ 200424InventoryItem26ButtonOffSY: equ 156 425InventoryItem26ButtonOffSX: equ 220426InventoryItem26MouseOverSY: equ 176427InventoryItem26MouseOverSX: equ 220428InventoryItem27ButtonOffSY: equ 196 429InventoryItem27ButtonOffSX: equ 000430InventoryItem27MouseOverSY: equ 216431InventoryItem27MouseOverSX: equ 000432InventoryItem28ButtonOffSY: equ 196 433InventoryItem28ButtonOffSX: equ 020434InventoryItem28MouseOverSY: equ 216435InventoryItem28MouseOverSX: equ 020436InventoryItem29ButtonOffSY: equ 196 437InventoryItem29ButtonOffSX: equ 040438InventoryItem29MouseOverSY: equ 216439InventoryItem29MouseOverSX: equ 040441InventoryItem30ButtonOffSY: equ 196 442InventoryItem30ButtonOffSX: equ 060443InventoryItem30MouseOverSY: equ 216444InventoryItem30MouseOverSX: equ 060445InventoryItem31ButtonOffSY: equ 196 446InventoryItem31ButtonOffSX: equ 080447InventoryItem31MouseOverSY: equ 216448InventoryItem31MouseOverSX: equ 080449InventoryItem32ButtonOffSY: equ 196 450InventoryItem32ButtonOffSX: equ 100451InventoryItem32MouseOverSY: equ 216452InventoryItem32MouseOverSX: equ 100453InventoryItem33ButtonOffSY: equ 196 454InventoryItem33ButtonOffSX: equ 120455InventoryItem33MouseOverSY: equ 216456InventoryItem33MouseOverSX: equ 120457InventoryItem34ButtonOffSY: equ 196 458InventoryItem34ButtonOffSX: equ 140459InventoryItem34MouseOverSY: equ 216460InventoryItem34MouseOverSX: equ 140462InventoryItem35ButtonOffSY: equ 196 463InventoryItem35ButtonOffSX: equ 160464InventoryItem35MouseOverSY: equ 216465InventoryItem35MouseOverSX: equ 160466InventoryItem36ButtonOffSY: equ 196 467InventoryItem36ButtonOffSX: equ 180468InventoryItem36MouseOverSY: equ 216469InventoryItem36MouseOverSX: equ 180470InventoryItem37ButtonOffSY: equ 196 471InventoryItem37ButtonOffSX: equ 200472InventoryItem37MouseOverSY: equ 216473InventoryItem37MouseOverSX: equ 200474InventoryItem38ButtonOffSY: equ 196 475InventoryItem38ButtonOffSX: equ 220476InventoryItem38MouseOverSY: equ 216477InventoryItem38MouseOverSX: equ 220478InventoryItem39ButtonOffSY: equ 236 479InventoryItem39ButtonOffSX: equ 000480InventoryItem39MouseOverSY: equ 236481InventoryItem39MouseOverSX: equ 020483InventoryItem40ButtonOffSY: equ 236 484InventoryItem40ButtonOffSX: equ 040485InventoryItem40MouseOverSY: equ 120486InventoryItem40MouseOverSX: equ 146487InventoryItem41ButtonOffSY: equ 236 488InventoryItem41ButtonOffSX: equ 060489InventoryItem41MouseOverSY: equ 120490InventoryItem41MouseOverSX: equ 166491InventoryItem42ButtonOffSY: equ 236 492InventoryItem42ButtonOffSX: equ 080493InventoryItem42MouseOverSY: equ 120494InventoryItem42MouseOverSX: equ 186495InventoryItem43ButtonOffSY: equ 236 496InventoryItem43ButtonOffSX: equ 100497InventoryItem43MouseOverSY: equ 120498InventoryItem43MouseOverSX: equ 206499InventoryItem44ButtonOffSY: equ 236 500InventoryItem44ButtonOffSX: equ 120501InventoryItem44MouseOverSY: equ 120502InventoryItem44MouseOverSX: equ 226504InventoryItem45ButtonOffSY: equ 236 505InventoryItem45ButtonOffSX: equ 200506InventoryItem45MouseOverSY: equ 236507InventoryItem45MouseOverSX: equ 180509InventoryItem46ButtonOffSY: equ 236 510InventoryItem46ButtonOffSX: equ 140511InventoryItem46MouseOverSY: equ 236512InventoryItem46MouseOverSX: equ 160514516HeroOverViewArmyWindowSX: equ 000517HeroOverViewArmyWindowSY: equ 000518HeroOverViewArmyWindowDX: equ 024519HeroOverViewArmyWindowDY: equ 040520HeroOverViewArmyWindowNX: equ 156521HeroOverViewArmyWindowNY: equ 067 523HeroOverViewArmyIconWindowButtonNY: equ 030524HeroOverViewArmyIconWindowButtonNX: equ 018528DisplayEnemyHeroStatsWindowCode:529 call .SetHeroOverViewArmyWindow 530 call .Set16x30HeroIcon 531 ld ix,(EnemyHeroThatPointerIsOn)532 call SetArmyIconsAndAmount.army 534 call SwapAndSetPage 535 call .SetHeroOverViewArmyWindow 536 call .Set16x30HeroIcon 537 ld ix,(EnemyHeroThatPointerIsOn)538 call SetArmyIconsAndAmount.army 540 ld bc,SFX_ShowEnemyHeroStats541 call RePlayerSFX_PlayCh1543 .engine:544 call PopulateControls 546 ld a,(NewPrContr)547 and %0011 0000548 jr nz,.end550 call CheckEndHeroOverviewArmy 551 halt552 jp .engine554 .end:555 ld a,%0011 0000556 ld (ControlsOnInterrupt),a 557 ret559.Set16x30HeroIcon:560 ld ix,(EnemyHeroThatPointerIsOn)562 563 ld l,(ix+HeroSpecificInfo+0) 564 ld h,(ix+HeroSpecificInfo+1)565 push hl566 pop ix568 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 569 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 570 ld bc,$4000571 xor a572 sbc hl,bc574 ld bc,NXAndNY16x30HeroIcon575 ld a,Hero16x30PortraitsBlock 576 ld de,DYDX16x30HeroIconArmyWindow 577 jp CopyRamToVramCorrectedCastleOverview 579 583585587592.SetHeroOverViewArmyWindow:593 ld hl,$4000 + (066*128) + (HeroOverViewArmyWindowSX/2) -128594 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)595 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)596 ld a,ArmyGraphicsBlock597 jp CopyRamToVramCorrectedCastleOverview 600HeroOverviewArmyWindowCode:601 ld a,3 602 ld (SetHeroArmyAndStatusInHud?),a604608 call SetHeroOverViewArmyWindow 609 call Set16x30HeroIcon 610 call SetArmyIconsAndAmount 611 call UpdateHUd612 ld a,1613 ld (GameStatus),a 614 call SwapAndSetPage 615 call SetHeroOverViewArmyWindow 616 call Set16x30HeroIcon 617 call SetArmyIconsAndAmount 618 call UpdateHUd619 ld a,1620 ld (GameStatus),a 621 622 .engine:623 call PopulateControls 625 ld a,(Controls)626 bit 5,a 627 ret nz629 ld ix,HeroOverviewArmyIconButtonTable630 ld iy,ButtonTableArmyIconsSYSX631 call CheckButtonMouseInteraction633 ld a,(MenuOptionSelected?)634 or a635 jp nz,.ButtonPressed636638 call MarkLastPressedButtonArmy 641 ld ix,HeroOverviewArmyIconButtonTable642 call SetButtonStatusAndText4 643 call SetArmyIconsAndAmount 646 call SwapAndSetPage 647 call CheckEndHeroOverviewArmy 648 halt649 jp .engine651 .ButtonPressed:652 ld (MenuOptionSelected?Backup),a654 xor a655 ld (MenuOptionSelected?),a656658 ld (ix+HeroOverviewWindowButtonStatus),%1000 0011659660 jp HeroOverviewArmyWindowCode662MarkLastPressedButtonArmy: 663 ld a,(MenuOptionSelected?Backup) 664 cp 255 665 ret z666 ld a,(MenuOptionSelected?BackupLastFrame)667 cp 255668 jr z,.Set670 ld b,a671 ld a,(MenuOptionSelected?Backup) 672 cp b673 jr nz,.DifferentButtonPressed675 ld b,a676 ld a,6677 sub a,b679 ld ix,HeroOverviewArmyIconButtonTable680 ld de,HeroOverviewArmyIconButtonTableLenghtPerIcon681 .loop:682 jr z,.Found683 add ix,de684 dec a685 jr .loop686 .Found: 688689 push ix690 ld a,(MenuOptionSelected?Backup) 691 ld b,a692 ld a,6693 sub a,b 694 ld ix,(plxcurrentheroAddress)695 ld d,0696 ld e,a697 add ix,de 698 add ix,de 699 add ix,de 701 ld a,(ix+HeroUnits+1) 702 cp (ix+HeroUnits+2) 703 pop ix704 jp z,.end705707 ld (ix+2),%0100 0011 708 .Set:709 ld a,(MenuOptionSelected?Backup) 710 ld (MenuOptionSelected?BackupLastFrame),a711 ret713 .DifferentButtonPressed:714718719 ld a,(MenuOptionSelected?Backup) 720 ld b,a721 ld a,6722 sub a,b 723 ld ix,(plxcurrentheroAddress)724 ld d,0725 ld e,a726 add ix,de 727 add ix,de 728 add ix,de 730 ld a,(ix+HeroUnits+1) 731 or (ix+HeroUnits+2) 732 jp nz,.EndCheck1733 735 736 ld a,(MenuOptionSelected?BackupLastFrame) 737 ld b,a738 ld a,6739 sub a,b 740 ld ix,(plxcurrentheroAddress)741 ld d,0742 ld e,a743 add ix,de 744 add ix,de 745 add ix,de 746 ld l,(ix+HeroUnits+1) 747 ld h,(ix+HeroUnits+2) 748 dec hl749 ld (ix+HeroUnits+1),l 750 ld (ix+HeroUnits+2),h 751 ld c,(ix+HeroUnits+0) 753 ld a,(ix+HeroUnits+1) 754 or (ix+HeroUnits+2) 755 jr nz,.EndCheckZero756 ld (ix+HeroUnits+0),0 757 .EndCheckZero:758 760 761 ld a,(MenuOptionSelected?Backup)762 ld b,a763 ld a,6764 sub a,b 765 ld ix,(plxcurrentheroAddress)766 ld d,0767 ld e,a 768 add ix,de 769 add ix,de 770 add ix,de 772 ld (ix+HeroUnits+0),c 773 ld (ix+HeroUnits+1),1 774 ld (ix+HeroUnits+2),0 775 jp .end776 777 .EndCheck1:779780 ld a,(MenuOptionSelected?Backup) 781 ld b,a782 ld a,6783 sub a,b 784 ld ix,(plxcurrentheroAddress)785 ld d,0786 ld e,a787 add ix,de 788 add ix,de 789 add ix,de 791 ld c,(ix+HeroUnits+0) 793 ld a,(MenuOptionSelected?BackupLastFrame) 794 ld b,a795 ld a,6796 sub a,b 797 ld ix,(plxcurrentheroAddress)798 ld d,0799 ld e,a800 add ix,de 801 add ix,de 802 add ix,de 804 ld a,(ix+HeroUnits+0) 806 cp c807 jp nz,.EndCheck2809 810 ld (ix+HeroUnits+0),0 811 ld l,(ix+HeroUnits+1) 812 ld h,(ix+HeroUnits+2) 814 ld (ix+HeroUnits+1),0 815 ld (ix+HeroUnits+2),0 817 ld a,(MenuOptionSelected?Backup) 818 ld b,a819 ld a,6820 sub a,b 821 ld ix,(plxcurrentheroAddress)822 ld d,0823 ld e,a824 add ix,de 825 add ix,de 826 add ix,de827 ld e,(ix+HeroUnits+1) 828 ld d,(ix+HeroUnits+2) 829 add hl,de831 ld (ix+HeroUnits+1),l 832 ld (ix+HeroUnits+2),h 833 jp .end834 .EndCheck2:837839840 push iy842 ld a,(MenuOptionSelected?Backup) 843 ld b,a844 ld a,6845 sub a,b 846 ld ix,(plxcurrentheroAddress)847 ld d,0848 ld e,a849 add ix,de 850 add ix,de 851 add ix,de 853 ld a,(MenuOptionSelected?BackupLastFrame)854 ld b,a855 ld a,6856 sub a,b857 ld iy,(plxcurrentheroAddress)858 ld d,0859 ld e,a860 add iy,de861 add iy,de862 add iy,de864 ld a,(ix+HeroUnits+0) 865 ld b,(ix+HeroUnits+1) 866 ld c,(ix+HeroUnits+2) 868 ld d,(iy+HeroUnits+0) 869 ld e,(iy+HeroUnits+1) 870 ld h,(iy+HeroUnits+2) 872 ld (ix+HeroUnits+0),d 873 ld (ix+HeroUnits+1),e 874 ld (ix+HeroUnits+2),h 876 ld (iy+HeroUnits+0),a 877 ld (iy+HeroUnits+1),b 878 ld (iy+HeroUnits+2),c 880 pop iy882 .end:883 xor a884 ld (MenuOptionSelected?),a885 ld a,255886 ld (MenuOptionSelected?Backup),a 887 ld (MenuOptionSelected?BackupLastFrame),a888 pop af 889 jp HeroOverviewArmyWindowCode 909NXAndNY16x30HeroIcon: equ 030*256 + (016/2) 910DYDX16x30HeroIconArmyWindow: equ (HeroOverViewArmyWindowDY+28)*128 + ((HeroOverViewArmyWindowDX+10)/2) - 128 912Set16x30HeroIcon:913 ld ix,(plxcurrentheroAddress)915 916 ld l,(ix+HeroSpecificInfo+0) 917 ld h,(ix+HeroSpecificInfo+1)918 push hl919 pop ix921 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 922 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 923 ld bc,$4000924 xor a925 sbc hl,bc927 ld bc,NXAndNY16x30HeroIcon928 ld a,Hero16x30PortraitsBlock 929 ld de,DYDX16x30HeroIconArmyWindow 930 jp CopyRamToVramCorrectedCastleOverview 932 936938940945SetAddressHeroPortrait16x30SYSXinBC:946 ld l,(ix+HeroSpecificInfo+0) 947 ld h,(ix+HeroSpecificInfo+1)948 push hl949 pop ix951 ld c,(ix+HeroInfoPortrait16x30SYSX+0) 952 ld b,(ix+HeroInfoPortrait16x30SYSX+1) 953956 ret958SetArmyIconsAndAmount:959 ld ix,(plxcurrentheroAddress)961 call .army962965 .amount:966 ld l,(ix+HeroUnits+01)967 ld h,(ix+HeroUnits+02)968 ld b,HeroOverViewArmyWindowDX + 031 + 2969 ld c,HeroOverViewArmyWindowDY + 056970 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0972 ld l,(ix+HeroUnits+04)973 ld h,(ix+HeroUnits+05)974 ld b,HeroOverViewArmyWindowDX + 051 + 2975 ld c,HeroOverViewArmyWindowDY + 056976 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0978 ld l,(ix+HeroUnits+07)979 ld h,(ix+HeroUnits+08)980 ld b,HeroOverViewArmyWindowDX + 071 + 2981 ld c,HeroOverViewArmyWindowDY + 056982 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0984 ld l,(ix+HeroUnits+10)985 ld h,(ix+HeroUnits+11)986 ld b,HeroOverViewArmyWindowDX + 091 + 2987 ld c,HeroOverViewArmyWindowDY + 056988 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0990 ld l,(ix+HeroUnits+13)991 ld h,(ix+HeroUnits+14)992 ld b,HeroOverViewArmyWindowDX + 111 + 2993 ld c,HeroOverViewArmyWindowDY + 056994 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0996 ld l,(ix+HeroUnits+16)997 ld h,(ix+HeroUnits+17)998 ld b,HeroOverViewArmyWindowDX + 131 + 2999 ld c,HeroOverViewArmyWindowDY + 0561000 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs01001 ret1003 .army:1004 ld a,(ix+HeroUnits+00) 1005 call .SetSYSX1006 ld de,DYDXUnit1WindowInHud14x24 1007 call CopyTransparantImageHeroOverviewCode 1009 ld a,(ix+HeroUnits+03) 1010 call .SetSYSX1011 ld de,DYDXUnit2WindowInHud14x24 1012 call CopyTransparantImageHeroOverviewCode 1014 ld a,(ix+HeroUnits+06) 1015 call .SetSYSX1016 ld de,DYDXUnit3WindowInHud14x24 1017 call CopyTransparantImageHeroOverviewCode 1019 ld a,(ix+HeroUnits+09) 1020 call .SetSYSX1021 ld de,DYDXUnit4WindowInHud14x24 1022 call CopyTransparantImageHeroOverviewCode 1024 ld a,(ix+HeroUnits+12) 1025 call .SetSYSX1026 ld de,DYDXUnit5WindowInHud14x24 1027 call CopyTransparantImageHeroOverviewCode 1029 ld a,(ix+HeroUnits+15) 1030 call .SetSYSX1031 ld de,DYDXUnit6WindowInHud14x24 1032 call CopyTransparantImageHeroOverviewCode 1033 ret1035 .SetSYSX: 1036 cp 1801037 jr c,.EndCheckOverFlow1038 sub 1801039 ld l,a1040 ld a,Enemy14x24PortraitsBlockPart2 1041 jr .EntryPart21043 .EndCheckOverFlow:1044 ld l,a1045 ld a,Enemy14x24PortraitsBlock 1046 .EntryPart2:1047 ld h,01048 add hl,hl 1049 ld de,UnitSYSXTable14x24Portraits1050 add hl,de1051 ld c,(hl)1052 inc hl1053 ld b,(hl) 1054 push bc1055 pop hl1057 ld bc,NXAndNY14x24CharaterPortraits1058 ret1060DisplayTownAllignmentAssociatedCreatures:1061 ld a,(StartingTownLevel1Unit)1062 call SetArmyIconsAndAmount.SetSYSX1063 ld de,DYDXUnit1TownAllignment 1064 call CopyTransparantImageHeroOverviewCode 1066 ld a,(StartingTownLevel2Unit)1067 call SetArmyIconsAndAmount.SetSYSX1068 ld de,DYDXUnit2TownAllignment 1069 call CopyTransparantImageHeroOverviewCode 1071 ld a,(StartingTownLevel3Unit)1072 call SetArmyIconsAndAmount.SetSYSX1073 ld de,DYDXUnit3TownAllignment 1074 call CopyTransparantImageHeroOverviewCode 1076 ld a,(StartingTownLevel4Unit)1077 call SetArmyIconsAndAmount.SetSYSX1078 ld de,DYDXUnit4TownAllignment 1079 call CopyTransparantImageHeroOverviewCode 1081 ld a,(StartingTownLevel5Unit)1082 call SetArmyIconsAndAmount.SetSYSX1083 ld de,DYDXUnit5TownAllignment 1084 call CopyTransparantImageHeroOverviewCode 1086 ld a,(StartingTownLevel6Unit)1087 call SetArmyIconsAndAmount.SetSYSX1088 ld de,DYDXUnit6TownAllignment 1089 call CopyTransparantImageHeroOverviewCode 1090 ret1092NXAndNY14x24CharaterPortraits: equ 024*256 + (014/2) 1093DYDXUnit1WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+32)1094DYDXUnit2WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+52)1095DYDXUnit3WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+72)1096DYDXUnit4WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+92)1097DYDXUnit5WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+112)1098DYDXUnit6WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+132)1100DYDXUnit1TownAllignment: equ 256*(056) + (051)1101DYDXUnit2TownAllignment: equ 256*(056) + (103)1102DYDXUnit3TownAllignment: equ 256*(056) + (155)1103DYDXUnit4TownAllignment: equ 256*(100) + (051)1104DYDXUnit5TownAllignment: equ 256*(100) + (103)1105DYDXUnit6TownAllignment: equ 256*(100) + (155)1108 1109UnitSYSXTable14x24Portraits: 1110 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1281111 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-1281112 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-1281113 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-1281114 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-1281115 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-1281116 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-1281118 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-1281119 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-1281120 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-1281121 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-1281124CopyTransparantImageHeroOverviewCode: 11251126 push af1127 ld a,b1128 ld (CopyCastleButton2+ny),a1129 ld a,c1130 add a,a1131 ld (CopyCastleButton2+nx),a1132 pop af1134 push de1135 ld de,$8000 + (212*128) + (000/2) - 128 1136 call CopyRamToVramCorrectedWithoutActivePageSetting 1137 pop de1139 ld a,(activepage)1140 xor 11141 ld (CopyCastleButton2+dPage),a1143 ld a,d1144 ld (CopyCastleButton2+dy),a1145 ld a,e1146 ld (CopyCastleButton2+dx),a1148 ld hl,CopyCastleButton21149 call docopy1151 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1152 jp docopy11551165HeroOverviewInventoryWindowCode:1166 call SetHeroOverViewInventoryWindow 1167 call SetInventoryIcons 1168 call UpdateHUd1169 ld a,11170 ld (GameStatus),a 1171 call SwapAndSetPage 1172 call SetHeroOverViewInventoryWindow 1173 call SetInventoryIcons 1174 call CreateInventoryListForCurrHero 1175 call UpdateHUd1176 ld a,11177 ld (GameStatus),a 1179 .engine:1180 call PopulateControls 1181 call SetTotalManaHero1183 ld a,(Controls)1184 bit 5,a 1185 ret nz1187 ld ix,HeroOverviewInventoryIconButtonTable1188 ld iy,ButtonTableInventoryIconsSYSX1189 call CheckButtonMouseInteraction1190 ld a,(MenuOptionSelected?)1191 or a1192 jp nz,.InventoryIconPressed11941195 call SetTextInventoryItem 1197 call MarkLastPressedButton 1198 ld ix,HeroOverviewInventoryIconButtonTable1199 call SetButtonStatusAndText3 1203 call SwapAndSetPage 1204 call CheckEndHeroOverviewInventory 1205 halt1206 jp .engine1208 .InventoryIconPressed:1209 ld (MenuOptionSelected?Backup),a1211 xor a1212 ld (MenuOptionSelected?),a12131214 ld a,31215 ld (SetSkillsDescription?),a 1216 ld (ix+HeroOverviewWindowButtonStatus),%1000 00111217 jp HeroOverviewInventoryWindowCode1223MarkLastPressedButton: 1224 ld a,(MenuOptionSelected?Backup) 1225 cp 255 1226 ret z1227 ld a,(MenuOptionSelected?BackupLastFrame)1228 cp 2551229 jr z,.Set1231 ld b,a1232 ld a,(MenuOptionSelected?Backup) 1233 cp b1234 jr nz,.DifferentButtonPressed1236 ld b,a1237 ld a,151238 sub a,b1239 12401241 push af1242 ld ix,(plxcurrentheroAddress)1243 ld d,01244 ld e,a1245 add ix,de 1246 ld a,(ix+HeroInventory) 1248 cp 0451249 jr nz,.NotEmpty1250 ld a,2551251 ld (MenuOptionSelected?Backup),a 1252 ld (MenuOptionSelected?BackupLastFrame),a1253 pop af1254 ret1255 .NotEmpty:1256 pop af1260 ld ix,HeroOverviewInventoryIconButtonTable1261 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1262 .loop:1263 jr z,.Found1264 add ix,de1265 dec a1266 jr .loop1268 .Found: 1269 ld (ix+2),%0100 0011 1271 .Set:1272 ld a,(MenuOptionSelected?Backup) 1273 ld (MenuOptionSelected?BackupLastFrame),a1274 ret1276 .DifferentButtonPressed:127712821283 ld a,(MenuOptionSelected?Backup) 1284 cp 71285 jr c,.EndCheck11286 ld a,(MenuOptionSelected?BackupLastFrame)1287 cp 71288 jr nc,.UnableToSwapItems1289 .EndCheck1:12911292 ld a,(MenuOptionSelected?Backup) 1293 cp 71294 jr nc,.MenuOptionSelected?BackupLastFrame_GoesToSlot1to91295 ld a,(MenuOptionSelected?BackupLastFrame)1296 cp 15 - 91297 jp c,SwapInventoryItems 12991300 .MenuOptionSelected?Backup_GoesToSlot1to9:1301 ld a,(MenuOptionSelected?BackupLastFrame)1302 ld c,a1303 ld a,(MenuOptionSelected?Backup) 1304 jr .go1306 .MenuOptionSelected?BackupLastFrame_GoesToSlot1to9:1307 ld a,(MenuOptionSelected?Backup) 1308 ld c,a1309 ld a,(MenuOptionSelected?BackupLastFrame)13101312 .go:1313 ld b,a1314 ld a,151315 sub a,b 1316 ld ix,(plxcurrentheroAddress)1317 ld d,01318 ld e,a1319 add ix,de 1320 ld a,(ix+HeroInventory) 1321 cp 046 1322 jp nc,.UnableToSwapItems 1323 1324 sub 51325 ld b,151326 jr c,.InventorySlotFound 1327 sub 51328 ld b,141329 jr c,.InventorySlotFound 1330 sub 51331 ld b,131332 jr c,.InventorySlotFound 1333 sub 51334 ld b,121335 jr c,.InventorySlotFound 1336 sub 51337 ld b,111338 jr c,.InventorySlotFound 1339 sub 51340 ld b,101341 jr c,.InventorySlotFound 1342 sub 51343 ld b,091344 jr c,.InventorySlotFound 1345 sub 51346 ld b,081347 jr c,.InventorySlotFound 1348 sub 51349 ld b,071350 jr c,.InventorySlotFound 1352 jp SwapInventoryItems 1354 .InventorySlotFound: 1355 ld a,c1356 cp b1357 jp nz,.UnableToSwapItems13581359 jp SwapInventoryItems 1361 .UnableToSwapItems:1362 ld a,(MenuOptionSelected?Backup) 1363 ld b,a1364 ld a,151365 sub a,b1366 13671373 ld ix,HeroOverviewInventoryIconButtonTable1374 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1375 .loop2:1376 jr z,.Found21377 add ix,de1378 dec a1379 jr .loop21381 .Found2: 1382 ld (ix+2),%1000 0011 1383 ld a,(MenuOptionSelected?Backup) 1384 ld (MenuOptionSelected?BackupLastFrame),a1385 ret1387SwapInventoryItems: 1388 push iy1390 ld a,(MenuOptionSelected?Backup) 1391 ld b,a1392 ld a,151393 sub a,b 1394 ld ix,(plxcurrentheroAddress)1395 ld d,01396 ld e,a1397 add ix,de 1399 ld a,(MenuOptionSelected?BackupLastFrame)1400 ld b,a1401 ld a,151402 sub a,b1403 ld iy,(plxcurrentheroAddress)1404 ld d,01405 ld e,a1406 add iy,de 1408 ld b,(iy+HeroInventory) 1409 ld a,(ix+HeroInventory) 1410 ld (iy+HeroInventory),a 1411 ld (ix+HeroInventory),b 1413 pop iy1415 xor a1416 ld (MenuOptionSelected?),a1417 ld a,2551418 ld (MenuOptionSelected?Backup),a 1419 ld (MenuOptionSelected?BackupLastFrame),a1421 pop af 1422 ld a,11423 ld (SetSkillsDescription?),a 1424 jp HeroOverviewInventoryWindowCode 1426SetTextInventoryItem: 1427 ld a,(SetSkillsDescription?)1428 dec a1429 ret z1430 ld (SetSkillsDescription?),a 1432 ld a,(MenuOptionSelected?Backup) 1433 ld b,a1434 ld a,151435 sub a,b1436 1437 ld ix,(plxcurrentheroAddress)1438 ld d,01439 ld e,a1440 add ix,de 1441 ld a,(ix+HeroInventory) 1442 1443 ld ix,InventoryDescriptionList1444 add a,a 1445 ld e,a1446 add ix,de1447 ld l,(ix)1448 ld h,(ix+1)1449 .SetText:1451 ld b,HeroOverViewSpellBookWindowDX + 030 + 11452 ld c,HeroOverViewSpellBookWindowDY + 159 - 161453 jp SetText1455InventoryDescriptionList:1456 dw DescriptionSword1, DescriptionSword2, DescriptionSword3, DescriptionSword4, DescriptionSword51457 dw DescriptionArmor1, DescriptionArmor2, DescriptionArmor3, DescriptionArmor4, DescriptionArmor51458 dw DescriptionShield1, DescriptionShield2, DescriptionShield3, DescriptionShield4, DescriptionShield51459 dw DescriptionHelmet1, DescriptionHelmet2, DescriptionHelmet3, DescriptionHelmet4, DescriptionHelmet51460 dw DescriptionBoots1, DescriptionBoots2, DescriptionBoots3, DescriptionBoots4, DescriptionBoots51461 dw DescriptionGloves1, DescriptionGloves2, DescriptionGloves3, DescriptionGloves4, DescriptionGloves51462 dw DescriptionRing1, DescriptionRing2, DescriptionRing3, DescriptionRing4, DescriptionRing51463 dw DescriptionNecklace1, DescriptionNecklace2, DescriptionNecklace3, DescriptionNecklace4, DescriptionNecklace51464 dw DescriptionRobe1, DescriptionRobe2, DescriptionRobe3, DescriptionRobe4, DescriptionRobe51465 dw DescriptionEmpty1466 dw DescriptionScrollEarth1, DescriptionScrollEarth2, DescriptionScrollEarth3, DescriptionScrollEarth41467 dw DescriptionScrollFire1, DescriptionScrollFire2, DescriptionScrollFire3, DescriptionScrollFire41468 dw DescriptionScrollAir1, DescriptionScrollAir2, DescriptionScrollAir3, DescriptionScrollAir41469 dw DescriptionScrollWater1, DescriptionScrollWater2, DescriptionScrollWater3, DescriptionScrollWater41470 dw DescriptionScrollUniversal1, DescriptionScrollUniversal2, DescriptionScrollUniversal3, DescriptionScrollUniversal41472 1473DescriptionSword1: db "Dagger Time",254 | DaggerTimeAttack: equ 1 1474 db "Attack +",DaggerTimeAttack+$30,2551476 1477DescriptionSword2: db "Sword of Bahrain",254 | SwordOfBahrainAttack: equ 21478 db "Attack +2",2551480 1481DescriptionSword3: db "Hell Slayer",254 | HellSlayerAttack: equ 5 | HellSlayerDefence: equ -21482 db "Attack +5",2541483 db "Defense -2",2551485 1486DescriptionSword4: db "The Butterfly",254 | ButterflyAttack: equ 1 | ButterflyDefence: equ 1 | ButterflyIntelligence: equ 1 | ButterflySpellDamage: equ 11487 db "All primary attributes",2541488 db "+1",2551490 1491DescriptionSword5: db "swiftblade",254 | SwiftbladeAttack: equ 5 | SwiftbladeUnitSpeed: equ 11492 db "Attack + 5",2541493 db "Unit movement speed +1",2551495 1496DescriptionArmor1: db "Regalia Di Pleb",254 | RegaliaDiPlebDefence: equ 1 | RegaliaDiPlebUnitSpeed: equ 11497 db "Defense +1",2541498 db "Unit movement speed +1",2551500 1501DescriptionArmor2: db "Young Blood's Armor",254 | YoungBloodsArmorDefence: equ 21502 db "Defense +2",2551504 1505DescriptionArmor3: db "The Juggernaut",254 | TheJuggernautDefence: equ 4 | TheJuggernautUnitSpeed: equ -11506 db "Defense +4",2541507 db "Unit movement speed - 1",2551509 1510DescriptionArmor4: db "Yojimbo the Ronin",254 | YojumboTheRoninDefence: equ 41511 db "Defense +4",2541512 db "-2.5% enemy spell damage",2551514 1515DescriptionArmor5: db "Caesar's Chestplate",254 | CeasarsChestplateDefence: equ 5 | CaesarsChestplateUnitHp: equ 21516 db "Defense +5",2541517 db "Max hp units +2",2551519 1520DescriptionShield1: db "Greenleaf Shield",254 | GreenleafShieldDefence: equ 11521 db "Defense +1",2551523 1524DescriptionShield2: db "Wooden shield",254 | WoodenShieldDefence: equ 21525 db "Defense +2",2551527 1528 db "Defense +3",2541529DescriptionShield3: db "The Bram Stoker",254 | TheBramStokerDefence: equ 21530 db "Defense +2",2551531 db "-5% enemy spell damage",2551533 1534DescriptionShield4: db "Impenetrable shield",254 | ImpenetrableShieldDefence: equ 41535 db "Defense +4",2551537 1538DescriptionShield5: db "Hallowed Roundel",254 | TrainingShieldDefence: equ 51539 db "Defense +5",2551541 1542DescriptionHelmet1: db "Yatta Shi-ne",254 | YattaShiNeDefence: equ 1 | YattaShiNeSpellDamage: equ 11543 db "Spell power +1",2541544 db "Defense +1",2551546 1547DescriptionHelmet2: db "Fire hood",2541548 db "Spell power +2",254 | FireHoodSpellDamage: equ 21549 db "+2.5% spell damage",2551551 1552DescriptionHelmet3: db "Cerebro",2541553 db "Intelligence +3",255 | CerebroIntelligence: equ 31555 1556DescriptionHelmet4: db "The Viridescent",254 | TheViridescentDefence: equ 3 | TheViridescentUnitHp: equ 31557 db "Defense +3",2541558 db "Max hp units +3",2551560 1561DescriptionHelmet5: db "Pikemen's Helmet",254 | PikemensHelmetDefence: equ 5 | PikemensHelmetUnitSpeed: equ 11562 db "Defense +5",2541563 db "Unit movement speed +1",2551565 1566DescriptionBoots1: db "Shadow Tramper",254 | ShadowTramperUnitSpeed: equ 11567 db "Unit movement speed +1",2551569 1570DescriptionBoots2: db "Dusk Rover",2541571 db "-2.5% enemy spell damage",2551573 1574DescriptionBoots3: db "Planeswalkers",2541575 db "+3 max movement points",2541576 db "for hero on worldmap",2551578 1579DescriptionBoots4: db "Knight's Night Slippers",2541580 db "-7.5% enemy spell damage",2551582 1583DescriptionBoots5: db "Sturdy Boots",254 | SturdyBootsUnitSpeed: equ 31584 db "Unit movement speed +3",2551586 1587DescriptionGloves1: db "Gripfast",2541588 db "+2 max movement points",2541589 db "for hero on worldmap",2551591 1592DescriptionGloves2: db "Iron Hand",254 | IronHandUnitSpeed: equ -11593 db "-5% enemy spell damage",2541594 db "Unit movement speed -1",2551596 1597DescriptionGloves3: db "Elk Skin Gloves",254 | ElkSkinGlovesUnitHp: equ 2 | ElkSkinGlovesAttack: equ 21598 db "Attack +2",2541599 db "Max hp units +2",2551601 1602DescriptionGloves4: db "Venomous gauntlet",2541603 db "+7.5% spell damage",2551605 1606DescriptionGloves5: db "Emerald Gloves",254 | EmeraldGlovesIntelligence: equ 51607 db "Intelligence +5",2551609 1610DescriptionRing1: db "Small Ring",254 | SmallRingSpellDamage: equ 11611 db "Spell power +1",2551613 1614DescriptionRing2: db "Cyclops",254 | CyclopsIntelligence: equ 21615 db "Intelligence +2",2551617 1618DescriptionRing3: db "Scarlet Ring",254 | ScarletRingAttack: equ 1 | ScarletRingDefence: equ 1 | ScarletRingIntelligence: equ 1 | ScarletRingSpellPower: equ 1 1619 db "All primary attributes",2541620 db "+1",2551622 1623DescriptionRing4: db "Bronze Ring",2541624 db "-7.5% enemy spell damage",2551626 1627DescriptionRing5: db "Hypnotising Ring",2541628 db "-10% enemy spell damage",2551630 1631DescriptionNecklace1: db "The Blue Topaz",2541632 db "-2.5% enemy spell damage",2551634 1635DescriptionNecklace2: db "Good Luck Charm",2541636 db "+5% spell damage",2551638 1639DescriptionNecklace3: db "Negligee of Teeth",254 | NegligeeOfTeethIntelligence: equ 1 | NegligeeOfTeethSpellPower: equ 21640 db "Intelligence +1",2541641 db "Spell power +2",2551643 1644DescriptionNecklace4: db "Skull of the Unborn",2541645 db "Increases Necromancy",2541646 db "skill by 10%",2551648 1649DescriptionNecklace5: db "The Choker",254 | TheChokerSpellPower: equ 61650 db "Spell power +6",2551652 1653DescriptionRobe1: db "The King's Garment",2541654 db "Increases wealth by",2541655 db "125 gold per day",2551657 1658DescriptionRobe2: db "Priest's Cope",254 | PriestsCopeIntelligence: equ 2 1659 db "-2.5% enemy spell damage",2541660 db "Intelligence +2",2551662 1663DescriptionRobe3: db "Enchanted Robe",254 | EnchantedRobeSpellPower: equ 31664 db "Spell power +3",2551666 1667DescriptionRobe4: db "Rural Vest",254 | RuralVestUnitHp: equ 41668 db "Max hp units +4",2551670 1671DescriptionRobe5: db "Labcoat",254 | LabCoatSpellPower: equ 7 | LabcoatUnitHp: equ -21672 db "Spell power +7",2541673 db "Max hp units -2",2551675 1676DescriptionEmpty: db 2551678 1679DescriptionScrollEarth1: db "SpellScroll: Earthbound",2551680DescriptionScrollEarth2: db "SpellScroll: Plate Armor",2551681DescriptionScrollEarth3: db "SpellScroll: Resurrection",2551682DescriptionScrollEarth4: db "SpellScroll: Earthshock",2551684DescriptionScrollFire1: db "SpellScroll: Curse",2551685DescriptionScrollFire2: db "SpellScroll: Blinding Fog",2551686DescriptionScrollFire3: db "SpellScroll: Implosion",2551687DescriptionScrollFire4: db "SpellScroll: Sunstrike",2551689DescriptionScrollAir1: db "SpellScroll: Haste",2551690DescriptionScrollAir2: db "SpellScroll: ShieldBreaker",2551691DescriptionScrollAir3: db "SpellScroll: Claw Back",2551692DescriptionScrollAir4: db "SpellScroll: Spell Bubble",2551694DescriptionScrollWater1: db "SpellScroll: Cure",2551695DescriptionScrollWater2: db "SpellScroll: Ice Peak",2551696DescriptionScrollWater3: db "SpellScroll: Hypnosis",2551697DescriptionScrollWater4: db "SpellScroll: Frost Ring",2551699DescriptionScrollUniversal1: db "SpellScroll: Magic Arrows",2551700DescriptionScrollUniversal2: db "SpellScroll: Frenzy",2551701DescriptionScrollUniversal3: db "SpellScroll: Teleport",2551702DescriptionScrollUniversal4: db "SpellScroll: Primal Instinct",2551704CreateInventoryListForCurrHero: 1705 ld ix,(plxcurrentheroAddress)1706 ld iy,ButtonTableInventoryIconsSYSX1708 ld b,9+6 1710 .loop:1711 ld a,(ix+HeroInventory) 1712 call CheckScrollIcon 1713 add a,a 1714 add a,a 1715 ld d,01716 ld e,a1717 ld hl,InventoryIconTableSYSX1718 add hl,de1719 ld a,(hl)1720 ld (iy+0),a 1721 inc hl1722 ld a,(hl)1723 ld (iy+1),a 1724 inc hl1725 ld a,(hl)1726 ld (iy+2),a 1727 inc hl1728 ld a,(hl)1729 ld (iy+3),a 1730 ld de,61731 add iy,de 1732 inc ix 1733 djnz .loop1734 ret1736CheckScrollIcon:1737 cp ScrollIconNR1738 ret c1739 ld a,ScrollIconNR1740 ret1742SetInventoryIcons:1743 ld ix,(plxcurrentheroAddress)1745 call .SetIconHLBCandA1746 ld de,$0000 + (InventoryItem01DY*128) + (InventoryItem01DX/2)1747 call CopyRamToVramCorrectedCastleOverview 1749 call .SetIconHLBCandA 1750 ld de,$0000 + (InventoryItem02DY*128) + (InventoryItem02DX/2)1751 call CopyRamToVramCorrectedCastleOverview 1753 call .SetIconHLBCandA 1754 ld de,$0000 + (InventoryItem03DY*128) + (InventoryItem03DX/2)1755 call CopyRamToVramCorrectedCastleOverview 1757 call .SetIconHLBCandA 1758 ld de,$0000 + (InventoryItem04DY*128) + (InventoryItem04DX/2)1759 call CopyRamToVramCorrectedCastleOverview 1761 call .SetIconHLBCandA 1762 ld de,$0000 + (InventoryItem05DY*128) + (InventoryItem05DX/2)1763 call CopyRamToVramCorrectedCastleOverview 1765 call .SetIconHLBCandA 1766 ld de,$0000 + (InventoryItem06DY*128) + (InventoryItem06DX/2)1767 call CopyRamToVramCorrectedCastleOverview 1769 call .SetIconHLBCandA 1770 ld de,$0000 + (InventoryItem07DY*128) + (InventoryItem07DX/2)1771 call CopyRamToVramCorrectedCastleOverview 1773 call .SetIconHLBCandA 1774 ld de,$0000 + (InventoryItem08DY*128) + (InventoryItem08DX/2)1775 call CopyRamToVramCorrectedCastleOverview 1777 call .SetIconHLBCandA 1778 ld de,$0000 + (InventoryItem09DY*128) + (InventoryItem09DX/2)1779 call CopyRamToVramCorrectedCastleOverview 1781 1782 call .SetIconHLBCandA 1783 ld de,$0000 + (InventoryItem10DY*128) + (InventoryItem10DX/2)1784 call CopyRamToVramCorrectedCastleOverview 1786 call .SetIconHLBCandA 1787 ld de,$0000 + (InventoryItem11DY*128) + (InventoryItem11DX/2)1788 call CopyRamToVramCorrectedCastleOverview 1790 call .SetIconHLBCandA 1791 ld de,$0000 + (InventoryItem12DY*128) + (InventoryItem12DX/2)1792 call CopyRamToVramCorrectedCastleOverview 1794 call .SetIconHLBCandA 1795 ld de,$0000 + (InventoryItem13DY*128) + (InventoryItem13DX/2)1796 call CopyRamToVramCorrectedCastleOverview 1798 call .SetIconHLBCandA 1799 ld de,$0000 + (InventoryItem14DY*128) + (InventoryItem14DX/2)1800 call CopyRamToVramCorrectedCastleOverview 1802 call .SetIconHLBCandA 1803 ld de,$0000 + (InventoryItem15DY*128) + (InventoryItem15DX/2)1804 call CopyRamToVramCorrectedCastleOverview 1805 ret1807 .SetIconHLBCandA:1808 ld a,(ix+HeroInventory) 1809 call CheckScrollIcon 1810 add a,a 1811 add a,a 1812 ld iy,InventoryIconTableSYSX1813 ld d,01814 ld e,a1815 add iy,de1816 ld l,(iy)1817 ld h,(iy+1)1818 inc ix1819 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1820 ld a,InventoryGraphicsBlock1821 ret1824PlaceWaterSpellsInSpellBook:1825 ld ix,(plxcurrentheroAddress)1827 1828 xor a1829 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1830 ld a,58 1831 call CheckSpellScrollAvailable 1832 jr z,.PlaceWaterSpellLevel11833 bit 0,(ix+HeroWaterSpells)1834 jr z,.EndPlaceWaterSpell11835 .PlaceWaterSpellLevel1:1836 ld a,%1000 00111837 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1838 1839 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281840 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1841 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1842 ld a,SpellBookGraphicsBlock 1843 call CopyRamToVramCorrectedCastleOverview 1844 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1281845 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1846 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1847 ld a,SpellBookGraphicsBlock 1848 call CopyRamToVramCorrectedCastleOverview 1849 .EndPlaceWaterSpell1:1851 xor a1852 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1853 ld a,59 1854 call CheckSpellScrollAvailable 1855 jr z,.PlaceWaterSpellLevel21856 bit 1,(ix+HeroWaterSpells)1857 jr z,.EndPlaceWaterSpell21858 .PlaceWaterSpellLevel2:1859 ld a,%1000 00111860 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1861 1862 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281863 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1864 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1865 ld a,SpellBookGraphicsBlock 1866 call CopyRamToVramCorrectedCastleOverview 1867 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1281868 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1869 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1870 ld a,SpellBookGraphicsBlock 1871 call CopyRamToVramCorrectedCastleOverview 1872 .EndPlaceWaterSpell2:1874 xor a1875 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1876 ld a,60 1877 call CheckSpellScrollAvailable 1878 jr z,.PlaceWaterSpellLevel31879 bit 2,(ix+HeroWaterSpells)1880 jr z,.EndPlaceWaterSpell31881 .PlaceWaterSpellLevel3: 1882 ld a,%1000 00111883 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1884 1885 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281886 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1887 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1888 ld a,SpellBookGraphicsBlock 1889 call CopyRamToVramCorrectedCastleOverview 1890 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1281891 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1892 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1893 ld a,SpellBookGraphicsBlock 1894 call CopyRamToVramCorrectedCastleOverview 1895 .EndPlaceWaterSpell3:1897 xor a1898 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1899 ld a,61 1900 call CheckSpellScrollAvailable 1901 jr z,.PlaceWaterSpellLevel41902 bit 3,(ix+HeroWaterSpells)1903 jr z,.EndPlaceWaterSpell41904 .PlaceWaterSpellLevel4: 1905 ld a,%1000 00111906 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1907 1908 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281909 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)1910 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1911 ld a,SpellBookGraphicsBlock 1912 call CopyRamToVramCorrectedCastleOverview 1913 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1281914 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)1915 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1916 ld a,SpellBookGraphicsBlock 1917 call CopyRamToVramCorrectedCastleOverview 1918 .EndPlaceWaterSpell4:1919 jp PlaceAllSpellSchoolSpellsInSpellBook1921PlaceAirSpellsInSpellBook:1922 ld ix,(plxcurrentheroAddress)1924 1925 xor a1926 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1927 ld a,54 1928 call CheckSpellScrollAvailable 1929 jr z,.PlaceAirSpellLevel11930 bit 0,(ix+HeroAirSpells)1931 jr z,.EndPlaceAirSpell11932 .PlaceAirSpellLevel1:1933 ld a,%1000 00111934 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1935 1936 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281937 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1938 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1939 ld a,SpellBookGraphicsBlock 1940 call CopyRamToVramCorrectedCastleOverview 1941 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1281942 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1943 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1944 ld a,SpellBookGraphicsBlock 1945 call CopyRamToVramCorrectedCastleOverview 1946 .EndPlaceAirSpell1:1948 xor a1949 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1950 ld a,55 1951 call CheckSpellScrollAvailable 1952 jr z,.PlaceAirSpellLevel21953 bit 1,(ix+HeroAirSpells)1954 jr z,.EndPlaceAirSpell21955 .PlaceAirSpellLevel2:1956 ld a,%1000 00111957 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1959 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281960 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1961 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1962 ld a,SpellBookGraphicsBlock 1963 call CopyRamToVramCorrectedCastleOverview 1964 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1281965 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1966 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1967 ld a,SpellBookGraphicsBlock 1968 call CopyRamToVramCorrectedCastleOverview 1969 .EndPlaceAirSpell2:1971 xor a1972 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1973 ld a,56 1974 call CheckSpellScrollAvailable 1975 jr z,.PlaceAirSpellLevel31976 bit 2,(ix+HeroAirSpells)1977 jr z,.EndPlaceAirSpell31978 .PlaceAirSpellLevel3:1979 ld a,%1000 00111980 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1982 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281983 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1984 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1985 ld a,SpellBookGraphicsBlock 1986 call CopyRamToVramCorrectedCastleOverview 1987 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1281988 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1989 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1990 ld a,SpellBookGraphicsBlock 1991 call CopyRamToVramCorrectedCastleOverview 1992 .EndPlaceAirSpell3:1994 xor a1995 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1996 ld a,57 1997 call CheckSpellScrollAvailable 1998 jr z,.PlaceAirSpellLevel41999 bit 3,(ix+HeroAirSpells)2000 jr z,.EndPlaceAirSpell42001 .PlaceAirSpellLevel4:2002 ld a,%1000 00112003 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2005 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282006 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2007 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2008 ld a,SpellBookGraphicsBlock 2009 call CopyRamToVramCorrectedCastleOverview 2010 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282011 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2012 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2013 ld a,SpellBookGraphicsBlock 2014 call CopyRamToVramCorrectedCastleOverview 2015 .EndPlaceAirSpell4:2016 jp PlaceAllSpellSchoolSpellsInSpellBook2017 2018PlaceFireSpellsInSpellBook:2019 ld ix,(plxcurrentheroAddress)2021 2022 xor a2023 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2024 ld a,50 2025 call CheckSpellScrollAvailable 2026 jr z,.PlaceFireSpellLevel12027 bit 0,(ix+HeroFireSpells)2028 jr z,.EndPlaceFireSpell12029 .PlaceFireSpellLevel1:2030 ld a,%1000 00112031 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2032 2033 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282034 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2035 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2036 ld a,SpellBookGraphicsBlock 2037 call CopyRamToVramCorrectedCastleOverview 2038 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282039 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2040 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2041 ld a,SpellBookGraphicsBlock 2042 call CopyRamToVramCorrectedCastleOverview 2043 .EndPlaceFireSpell1:2045 xor a2046 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2047 ld a,51 2048 call CheckSpellScrollAvailable 2049 jr z,.PlaceFireSpellLevel22050 bit 1,(ix+HeroFireSpells)2051 jr z,.EndPlaceFireSpell22052 .PlaceFireSpellLevel2:2053 ld a,%1000 00112054 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2055 2056 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282057 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2058 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2059 ld a,SpellBookGraphicsBlock 2060 call CopyRamToVramCorrectedCastleOverview 2061 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282062 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2063 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2064 ld a,SpellBookGraphicsBlock 2065 call CopyRamToVramCorrectedCastleOverview 2066 .EndPlaceFireSpell2:2068 xor a2069 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2070 ld a,52 2071 call CheckSpellScrollAvailable 2072 jr z,.PlaceFireSpellLevel32073 bit 2,(ix+HeroFireSpells)2074 jr z,.EndPlaceFireSpell32075 .PlaceFireSpellLevel3:2076 ld a,%1000 00112077 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2078 2079 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282080 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2081 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2082 ld a,SpellBookGraphicsBlock 2083 call CopyRamToVramCorrectedCastleOverview 2084 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282085 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2086 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2087 ld a,SpellBookGraphicsBlock 2088 call CopyRamToVramCorrectedCastleOverview 2089 .EndPlaceFireSpell3:2091 xor a2092 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2093 ld a,53 2094 call CheckSpellScrollAvailable 2095 jr z,.PlaceFireSpellLevel42096 bit 3,(ix+HeroFireSpells)2097 jr z,.EndPlaceFireSpell42098 .PlaceFireSpellLevel4:2099 ld a,%1000 00112100 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2102 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282103 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2104 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2105 ld a,SpellBookGraphicsBlock 2106 call CopyRamToVramCorrectedCastleOverview 2107 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282108 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2109 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2110 ld a,SpellBookGraphicsBlock 2111 call CopyRamToVramCorrectedCastleOverview 2112 .EndPlaceFireSpell4:2113 jp PlaceAllSpellSchoolSpellsInSpellBook2116CheckSpellScrollAvailable: 2117 cp (ix+HeroInventory+9)2118 ret z2119 cp (ix+HeroInventory+10)2120 ret z2121 cp (ix+HeroInventory+11)2122 ret z2123 cp (ix+HeroInventory+12)2124 ret z2125 cp (ix+HeroInventory+13)2126 ret z2127 cp (ix+HeroInventory+14)2128 ret2129 2130PlaceEarthSpellsInSpellBook:2131 ld ix,(plxcurrentheroAddress)2133 2134 xor a2135 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2136 ld a,46 2137 call CheckSpellScrollAvailable 2138 jr z,.PlaceEarthSpellLevel12139 bit 0,(ix+HeroEarthSpells)2140 jr z,.EndPlaceEarthSpell12141 .PlaceEarthSpellLevel1:2142 ld a,%1000 00112143 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2144 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282145 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2146 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2147 ld a,SpellBookGraphicsBlock 2148 call CopyRamToVramCorrectedCastleOverview 2149 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282150 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2151 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2152 ld a,SpellBookGraphicsBlock 2153 call CopyRamToVramCorrectedCastleOverview 2154 .EndPlaceEarthSpell1:2156 xor a2157 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2158 ld a,47 2159 call CheckSpellScrollAvailable 2160 jr z,.PlaceEarthSpellLevel22161 bit 1,(ix+HeroEarthSpells)2162 jr z,.EndPlaceEarthSpell22163 .PlaceEarthSpellLevel2:2164 ld a,%1000 00112165 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2166 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282167 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2168 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2169 ld a,SpellBookGraphicsBlock 2170 call CopyRamToVramCorrectedCastleOverview 2171 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282172 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2173 ld bc,$0000 + (SpellIconNY* 256) + (SpellIconNX/2)2174 ld a,SpellBookGraphicsBlock 2175 call CopyRamToVramCorrectedCastleOverview 2176 .EndPlaceEarthSpell2:2178 xor a2179 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2180 ld a,48 2181 call CheckSpellScrollAvailable 2182 jr z,.PlaceEarthSpellLevel32183 bit 2,(ix+HeroEarthSpells)2184 jr z,.EndPlaceEarthSpell32185 .PlaceEarthSpellLevel3:2186 ld a,%1000 00112187 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2188 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282189 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2190 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2191 ld a,SpellBookGraphicsBlock 2192 call CopyRamToVramCorrectedCastleOverview 2193 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282194 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2195 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2196 ld a,SpellBookGraphicsBlock 2197 call CopyRamToVramCorrectedCastleOverview 2198 .EndPlaceEarthSpell3:2200 xor a2201 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2202 ld a,49 2203 call CheckSpellScrollAvailable 2204 jr z,.PlaceEarthSpellLevel42205 bit 3,(ix+HeroEarthSpells)2206 jr z,.EndPlaceEarthSpell42207 .PlaceEarthSpellLevel4:2208 ld a,%1000 00112209 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2210 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282211 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2212 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2213 ld a,SpellBookGraphicsBlock 2214 call CopyRamToVramCorrectedCastleOverview 2215 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282216 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2217 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2218 ld a,SpellBookGraphicsBlock 2219 call CopyRamToVramCorrectedCastleOverview 2220 .EndPlaceEarthSpell4:2221 jp PlaceAllSpellSchoolSpellsInSpellBook2223PlaceAllSpellSchoolSpellsInSpellBook:2224 ld ix,(plxcurrentheroAddress)2225 2226 2227 xor a2228 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2229 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2230 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2231 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2232 ld a,62 2233 call CheckSpellScrollAvailable 2234 jr z,.PlaceUniversalSpellLevel12235 bit 0,(ix+HeroAllSchoolsSpells)2236 jr z,.EndPlaceAllSchoolsSpell1 2237 .PlaceUniversalSpellLevel1:2238 ld a,%1000 00112239 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2240 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2241 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2242 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2243 2244 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282245 ld de,$0000 + (HeroOverViewSpell5backdropDY*128) + (HeroOverViewSpell5backdropDX/2)2246 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2247 ld a,SpellBookGraphicsBlock 2248 call CopyRamToVramCorrectedCastleOverview 2249 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282250 ld de,$0000 + (Spell5DY*128) + (Spell5DX/2)2251 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2252 ld a,SpellBookGraphicsBlock 2253 call CopyRamToVramCorrectedCastleOverview 2254 .EndPlaceAllSchoolsSpell1:2256 xor a2257 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2258 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2259 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2260 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2261 ld a,63 2262 call CheckSpellScrollAvailable 2263 jr z,.PlaceUniversalSpellLevel22264 bit 1,(ix+HeroAllSchoolsSpells)2265 jr z,.EndPlaceAllSchoolsSpell2 2266 .PlaceUniversalSpellLevel2:2267 ld a,%1000 00112268 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2269 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2270 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2271 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2273 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282274 ld de,$0000 + (HeroOverViewSpell6backdropDY*128) + (HeroOverViewSpell6backdropDX/2)2275 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2276 ld a,SpellBookGraphicsBlock 2277 call CopyRamToVramCorrectedCastleOverview 2278 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282279 ld de,$0000 + (Spell6DY*128) + (Spell6DX/2)2280 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2281 ld a,SpellBookGraphicsBlock 2282 call CopyRamToVramCorrectedCastleOverview 2283 .EndPlaceAllSchoolsSpell2:2285 xor a2286 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2287 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2288 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2289 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2290 ld a,64 2291 call CheckSpellScrollAvailable 2292 jr z,.PlaceUniversalSpellLevel32293 bit 2,(ix+HeroAllSchoolsSpells)2294 jr z,.EndPlaceAllSchoolsSpell3 2295 .PlaceUniversalSpellLevel3:2296 ld a,%1000 00112297 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2298 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2299 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2300 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2302 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282303 ld de,$0000 + (HeroOverViewSpell7backdropDY*128) + (HeroOverViewSpell7backdropDX/2)2304 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2305 ld a,SpellBookGraphicsBlock 2306 call CopyRamToVramCorrectedCastleOverview 2307 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282308 ld de,$0000 + (Spell7DY*128) + (Spell7DX/2)2309 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2310 ld a,SpellBookGraphicsBlock 2311 call CopyRamToVramCorrectedCastleOverview 2312 .EndPlaceAllSchoolsSpell3:2314 xor a2315 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2316 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2317 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2318 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2319 ld a,65 2320 call CheckSpellScrollAvailable 2321 jr z,.PlaceUniversalSpellLevel42322 bit 3,(ix+HeroAllSchoolsSpells)2323 jr z,.EndPlaceAllSchoolsSpell42324 .PlaceUniversalSpellLevel4:2325 ld a,%1000 00112326 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2327 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2328 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2329 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2331 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282332 ld de,$0000 + (HeroOverViewSpell8backdropDY*128) + (HeroOverViewSpell8backdropDX/2)2333 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2334 ld a,SpellBookGraphicsBlock 2335 call CopyRamToVramCorrectedCastleOverview 2336 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282337 ld de,$0000 + (Spell8DY*128) + (Spell8DX/2)2338 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2339 ld a,SpellBookGraphicsBlock 2340 call CopyRamToVramCorrectedCastleOverview 2341 .EndPlaceAllSchoolsSpell4:2342 ret2345HeroOverviewSpellBookWindowCode_Water:23462347 call SetHeroOverViewSpellBookWindow 2348 call ClearWhiteWindow2349 call ActivateButton_Water2350 call PlaceWaterSpellsInSpellBook2351 call SwapAndSetPage 2352 call SetHeroOverViewSpellBookWindow 2353 call ClearWhiteWindow2354 call ActivateButton_Water2355 call PlaceWaterSpellsInSpellBook2357 .engine:2358 call PopulateControls 2360 ld a,(Controls)2361 bit 5,a 2362 ret nz2363 2364 ld ix,HeroOverviewSpellBookButtonTable_Water2365 ld iy,ButtonTableSpellBookSYSX_Water2366 call CheckButtonMouseInteraction2367 ld a,(MenuOptionSelected?)2368 or a2369 jp nz,.ElementalButtonPressed2371 call CheckEndHeroOverviewSpellBook 2373 ld ix,HeroOverviewSpellBookButtonTable_Water2374 call SetButtonStatusAndText2 23792382 ld ix,HeroOverviewSpellIconButtonTable_Water2383 ld iy,ButtonTableSpellIconsWaterSYSX2384 call CheckButtonMouseInteraction2386 ld a,(MenuOptionSelected?)2387 or a2388 jp nz,.SpellIconPressed23902392 call SetSpellExplanation_Water 2394 ld ix,HeroOverviewSpellIconButtonTable_Water2395 call SetButtonStatusAndText2 23972400 2401 call SwapAndSetPage 2403 halt2404 jp .engine2406 .ElementalButtonPressed:2407 cp 1 2408 jp z,AirSelected2409 cp 2 2410 jp z,FireSelected2411 cp 3 2412 jp z,EarthSelected2413 ret2417 .SpellIconPressed:2418 ld (MenuOptionSelected?Backup),a2419 xor a2420 ld (MenuOptionSelected?),a24212422 ld a,32423 ld (SetSkillsDescription?),a 2424 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112425 jp HeroOverviewSpellBookWindowCode_Water2447HeroOverviewSpellBookWindowCode_Air:24482449 call SetHeroOverViewSpellBookWindow 2450 call ClearWhiteWindow2451 call ActivateButton_Air2452 call PlaceAirSpellsInSpellBook2453 call SwapAndSetPage 2454 call SetHeroOverViewSpellBookWindow 2455 call ClearWhiteWindow2456 call ActivateButton_Air2457 call PlaceAirSpellsInSpellBook2459 .engine:2460 call PopulateControls 2462 ld a,(Controls)2463 bit 5,a 2464 ret nz2465 2466 ld ix,HeroOverviewSpellBookButtonTable_Air2467 ld iy,ButtonTableSpellBookSYSX_Air2468 call CheckButtonMouseInteraction2469 ld a,(MenuOptionSelected?)2470 or a2471 jp nz,.ElementalButtonPressed2473 call CheckEndHeroOverviewSpellBook 2475 ld ix,HeroOverviewSpellBookButtonTable_Air2476 call SetButtonStatusAndText2 24802483 ld ix,HeroOverviewSpellIconButtonTable_Air2484 ld iy,ButtonTableSpellIconsAirSYSX2485 call CheckButtonMouseInteraction2487 ld a,(MenuOptionSelected?)2488 or a2489 jp nz,.SpellIconPressed24912493 call SetSpellExplanation_Air 2495 ld ix,HeroOverviewSpellIconButtonTable_Air2496 call SetButtonStatusAndText2 24982501 call SwapAndSetPage 2503 halt2504 jp .engine2506 .ElementalButtonPressed:2507 cp 1 2508 jp z,WaterSelected2509 cp 2 2510 jp z,FireSelected2511 cp 3 2512 jp z,EarthSelected2513 ret2514 2518 .SpellIconPressed:2519 ld (MenuOptionSelected?Backup),a2520 xor a2521 ld (MenuOptionSelected?),a25222523 ld a,32524 ld (SetSkillsDescription?),a 2525 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112526 jp HeroOverviewSpellBookWindowCode_Air2529 2530 2531 2532 2533 2534 2535 2536HeroOverviewSpellBookWindowCode_Fire:25372538 call SetHeroOverViewSpellBookWindow 2539 call ClearWhiteWindow2540 call ActivateButton_Fire2541 call PlaceFireSpellsInSpellBook2542 call SwapAndSetPage 2543 call SetHeroOverViewSpellBookWindow 2544 call ClearWhiteWindow2545 call ActivateButton_Fire2546 call PlaceFireSpellsInSpellBook2548 .engine:2549 call PopulateControls 2551 ld a,(Controls)2552 bit 5,a 2553 ret nz2554 2555 ld ix,HeroOverviewSpellBookButtonTable_Fire2556 ld iy,ButtonTableSpellBookSYSX_Fire2557 call CheckButtonMouseInteraction2558 ld a,(MenuOptionSelected?)2559 or a2560 jp nz,.ElementalButtonPressed2562 call CheckEndHeroOverviewSpellBook 2564 ld ix,HeroOverviewSpellBookButtonTable_Fire2565 call SetButtonStatusAndText2 25712574 ld ix,HeroOverviewSpellIconButtonTable_Fire2575 ld iy,ButtonTableSpellIconsFireSYSX2576 call CheckButtonMouseInteraction2578 ld a,(MenuOptionSelected?)2579 or a2580 jp nz,.SpellIconPressed25822584 call SetSpellExplanation_Fire 2586 ld ix,HeroOverviewSpellIconButtonTable_Fire2587 call SetButtonStatusAndText2 25892594 call SwapAndSetPage 2596 halt2597 jp .engine2599 .ElementalButtonPressed:2600 cp 1 2601 jp z,WaterSelected2602 cp 2 2603 jp z,AirSelected2604 cp 3 2605 jp z,EarthSelected2606 ret2615 .SpellIconPressed:2616 ld (MenuOptionSelected?Backup),a2617 xor a2618 ld (MenuOptionSelected?),a26192620 ld a,32621 ld (SetSkillsDescription?),a 2622 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112623 jp HeroOverviewSpellBookWindowCode_Fire2641HeroOverviewSpellBookWindowCode_Earth:264426472648 call SetHeroOverViewSpellBookWindow 2649 call ClearWhiteWindow2650 call ActivateButton_Earth 2651 call PlaceEarthSpellsInSpellBook 2652 call SwapAndSetPage 2653 call SetHeroOverViewSpellBookWindow 2654 call ClearWhiteWindow2655 call ActivateButton_Earth2656 call PlaceEarthSpellsInSpellBook 2658 .engine:2659 call PopulateControls 2661 ld a,(Controls)2662 bit 5,a 2663 ret nz2665 ld ix,HeroOverviewSpellBookButtonTable_Earth2666 ld iy,ButtonTableSpellBookSYSX_Earth2667 call CheckButtonMouseInteraction2668 ld a,(MenuOptionSelected?)2669 or a2670 jp nz,.ElementalButtonPressed2672 call CheckEndHeroOverviewSpellBook 2674 ld ix,HeroOverviewSpellBookButtonTable_Earth2675 call SetButtonStatusAndText2 26782681 ld ix,HeroOverviewSpellIconButtonTable_Earth2682 ld iy,ButtonTableSpellIconsEarthSYSX2683 call CheckButtonMouseInteraction2685 ld a,(MenuOptionSelected?)2686 or a2687 jp nz,.SpellIconPressed26892691 call SetSpellExplanation_Earth 2693 ld ix,HeroOverviewSpellIconButtonTable_Earth2694 call SetButtonStatusAndText2 269626992703270727092722 call SwapAndSetPage 2724 halt2725 jp .engine2731 .SpellIconPressed:2732 ld (MenuOptionSelected?Backup),a2733 xor a2734 ld (MenuOptionSelected?),a27352736 ld a,32737 ld (SetSkillsDescription?),a 2738 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112739 jp HeroOverviewSpellBookWindowCode_Earth2741 .ElementalButtonPressed:2742 cp 1 2743 jp z,WaterSelected2744 cp 2 2745 jp z,AirSelected2746 cp 3 2747 jp z,FireSelected2748 ret2750ClearWhiteWindow:2751 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+28)/2) -1282752 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2753 ld bc,$0000 + (18*256) + (20/2)2754 ld a,SpellBookGraphicsBlock2755 jp CopyRamToVramCorrectedCastleOverview 2757SetWhiteWindow:2758 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+008)/2) -1282759 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2760 ld bc,$0000 + (18*256) + (20/2)2761 ld a,SpellBookGraphicsBlock2762 jp CopyRamToVramCorrectedCastleOverview 2764SpellDescriptions:2766.DescriptionEarth4: db "Earthbound",2542767 db "Reduces the speed of the selected",2542768 db "enemy unit by 50%",2552770.DescriptionEarth3: db "Plate Armor",2542771 db "Increases the defense of the selected",2542772 db "friendly unit by 5.",2552774.DescriptionEarth2: db "Resurrection",2542775 db "Revives a segment of deceased",2542776 db "friendly living creatures.",2552778.DescriptionEarth1: db "Earthshock",2542779 db "Deals damage to all creatures in target",2542780 db "and adjacent hexes.",2552783.DescriptionFire4: db "Curse",2542784 db "Causes the selected enemy unit to deal",2542785 db "-3 damage when attacking.",2552787.DescriptionFire3: db "Blinding Fog",2542788 db "Target ranged unit deals 50% less",2542789 db "damage.",2552791.DescriptionFire2: db "Implosion",2542792 db "Deals damage to enemy unit and",2542793 db "adjecent units.",2552795.DescriptionFire1: db "Sunstrike",2542796 db "Calls down a solar beam to incinerate",2542797 db "a single enemy unit.",2552799.Descriptionair4: db "Haste",2542800 db "Increases the speed of the selected",2542801 db "friendly unit by 3.",2552803.Descriptionair3: db "Shieldbreaker",2542804 db "Reduces the defense of the selected ",2542805 db "enemy unit by 4.",2552807.Descriptionair2: db "Claw Back",2542808 db "Target allied unit has unlimited",2542809 db "retaliations each round.",2552811.Descriptionair1: db "Spell Bubble",2542812 db "Target friendly unit has a 75% chance",2542813 db "to deflect a single enemy spell.",2552816.Descriptionwater4: db "Cure",2542817 db "Dissipates all harmful spell effects",2542818 db "while restoring a set amount of HP.",2552820.Descriptionwater3: db "Ice Peak",2542821 db "Conjures an ice shard from the ground,",2542822 db "impaling a single enemy.",2552824.Descriptionwater2: db "Hypnosis",2542825 db "Enemy unit cant attack until attacked,",2542826 db "dispelled or effect wears off.",2552829.Descriptionwater1: db "Frost Ring",2542830 db "Causes damage to all units adjacent to",2542831 db "the central hex.",2552834.DescriptionAllSpellSchools4: db "magic arrows",2542835 db "Unleashes a relentless volley of arrows",2542836 db "at a single enemy unit.",2552838.DescriptionAllSpellSchools3: db "Frenzy",2542839 db "Friendly unit's damage increases by 5",2542840 db "while its defense decreases by 5.",2552842.DescriptionAllSpellSchools2: db "Teleport",2542843 db "Instantaneously displaces an allied",2542844 db "troop to an an unoccupied space.",2552846.DescriptionAllSpellSchools1: db "Primal Instinct",2542847 db "Friendly unit receives +3 damage,",2542848 db "+3 defense and +3 speed.",2552851SetSpellExplanation_Water:2852 ld a,(SetSkillsDescription?)2853 dec a2854 ret z2855 ld (SetSkillsDescription?),a 2857 call .GoSetText2858 call .SetSpellIcon2859 call .SetCost28602861 ret2863 .SetDamage:2864 ld a,(MenuOptionSelected?Backup)2865 cp 1 2866 ld b,DamageAllSpellSchools12867 jp z,DamageAmountFound2868 cp 2 2869 ld b,DamageAllSpellSchools22870 jp z,DamageAmountFound2871 cp 3 2872 ld b,DamageAllSpellSchools32873 jp z,DamageAmountFound2874 cp 4 2875 ld b,DamageAllSpellSchools42876 jp z,DamageAmountFound2878 cp 5 2879 ld b,DamageWaterSpell12880 jp z,DamageAmountFound2881 cp 6 2882 ld b,DamageWaterSpell22883 jp z,DamageAmountFound2884 cp 7 2885 ld b,DamageWaterSpell32886 jp z,DamageAmountFound2887 ld b,DamageWaterSpell42888 jp DamageAmountFound2890 .SetCost:2891 ld a,(MenuOptionSelected?Backup) 2892 cp 1 2893 ld b,CostAllSpellSchools12894 jp z,CostAmountFound2895 cp 2 2896 ld b,CostAllSpellSchools22897 jp z,CostAmountFound2898 cp 3 2899 ld b,CostAllSpellSchools32900 jp z,CostAmountFound2901 cp 4 2902 ld b,CostAllSpellSchools42903 jp z,CostAmountFound2905 cp 5 2906 ld b,CostWaterSpell12907 jp z,CostAmountFound2908 cp 6 2909 ld b,CostWaterSpell22910 jp z,CostAmountFound2911 cp 7 2912 ld b,CostWaterSpell32913 jp z,CostAmountFound2914 ld b,CostWaterSpell42915 jp CostAmountFound2917 .SetSpellIcon:2918 call SetWhiteWindow2920 ld a,(MenuOptionSelected?Backup)2922 cp 1 2923 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282924 jp z,.SetIcon2925 cp 2 2926 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282927 jp z,.SetIcon2928 cp 3 2929 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282930 jp z,.SetIcon2931 cp 42932 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282933 jp z,.SetIcon 2934 cp 5 2935 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282936 jp z,.SetIcon2937 cp 6 2938 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282939 jp z,.SetIcon2940 cp 7 2941 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282942 jp z,.SetIcon2943 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282944 .SetIcon:2945 2946 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)2947 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2948 ld a,SpellBookGraphicsBlock 2949 jp CopyRamToVramCorrectedCastleOverview 2951 .GoSetText:2952 ld a,(MenuOptionSelected?Backup)2954 cp 1 2955 ld hl,SpellDescriptions.DescriptionAllSpellSchools12956 jp z,.SetText2957 cp 2 2958 ld hl,SpellDescriptions.DescriptionAllSpellSchools22959 jp z,.SetText2960 cp 3 2961 ld hl,SpellDescriptions.DescriptionAllSpellSchools32962 jp z,.SetText2963 cp 42964 ld hl,SpellDescriptions.DescriptionAllSpellSchools42965 jp z,.SetText2968 cp 5 2969 ld hl,SpellDescriptions.Descriptionwater12970 jp z,.SetText2971 cp 6 2972 ld hl,SpellDescriptions.Descriptionwater22973 jp z,.SetText2974 cp 7 2975 ld hl,SpellDescriptions.Descriptionwater32976 jp z,.SetText2977 ld hl,SpellDescriptions.Descriptionwater42978 .SetText:2980 ld b,HeroOverViewSpellBookWindowDX + 0302981 ld c,HeroOverViewSpellBookWindowDY + 1592982 jp SetText2991SetSpellExplanation_Air:2992 ld a,(SetSkillsDescription?)2993 dec a2994 ret z2995 ld (SetSkillsDescription?),a 2997 call .GoSetText2998 call .SetSpellIcon2999 call .SetCost30003001 ret3003 .SetDamage:3004 ld a,(MenuOptionSelected?Backup)3005 cp 1 3006 ld b,DamageAllSpellSchools13007 jp z,DamageAmountFound3008 cp 2 3009 ld b,DamageAllSpellSchools23010 jp z,DamageAmountFound3011 cp 3 3012 ld b,DamageAllSpellSchools33013 jp z,DamageAmountFound3014 cp 4 3015 ld b,DamageAllSpellSchools43016 jp z,DamageAmountFound3018 cp 5 3019 ld b,DamageAirSpell13020 jp z,DamageAmountFound3021 cp 6 3022 ld b,DamageAirSpell23023 jp z,DamageAmountFound3024 cp 7 3025 ld b,DamageAirSpell33026 jp z,DamageAmountFound3027 ld b,DamageAirSpell43028 jp DamageAmountFound3030 .SetCost:3031 ld a,(MenuOptionSelected?Backup) 3032 cp 1 3033 ld b,CostAllSpellSchools13034 jp z,CostAmountFound3035 cp 2 3036 ld b,CostAllSpellSchools23037 jp z,CostAmountFound3038 cp 3 3039 ld b,CostAllSpellSchools33040 jp z,CostAmountFound3041 cp 4 3042 ld b,CostAllSpellSchools43043 jp z,CostAmountFound3045 cp 5 3046 ld b,CostAirSpell13047 jp z,CostAmountFound3048 cp 6 3049 ld b,CostAirSpell23050 jp z,CostAmountFound3051 cp 7 3052 ld b,CostAirSpell33053 jp z,CostAmountFound3054 ld b,CostAirSpell43055 jp CostAmountFound3057 .SetSpellIcon:3058 call SetWhiteWindow3060 ld a,(MenuOptionSelected?Backup)3062 cp 1 3063 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283064 jp z,.SetIcon3065 cp 2 3066 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283067 jp z,.SetIcon3068 cp 3 3069 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283070 jp z,.SetIcon3071 cp 43072 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283073 jp z,.SetIcon3074 3075 cp 5 3076 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283077 jp z,.SetIcon3078 cp 6 3079 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283080 jp z,.SetIcon3081 cp 7 3082 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283083 jp z,.SetIcon3084 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283085 .SetIcon:3086 3087 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3088 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3089 ld a,SpellBookGraphicsBlock 3090 jp CopyRamToVramCorrectedCastleOverview 3092 .GoSetText:3093 ld a,(MenuOptionSelected?Backup)3095 cp 1 3096 ld hl,SpellDescriptions.DescriptionAllSpellSchools13097 jp z,.SetText3098 cp 2 3099 ld hl,SpellDescriptions.DescriptionAllSpellSchools23100 jp z,.SetText3101 cp 3 3102 ld hl,SpellDescriptions.DescriptionAllSpellSchools33103 jp z,.SetText3104 cp 43105 ld hl,SpellDescriptions.DescriptionAllSpellSchools43106 jp z,.SetText3108 cp 5 3109 ld hl,SpellDescriptions.DescriptionAir13110 jp z,.SetText3111 cp 6 3112 ld hl,SpellDescriptions.DescriptionAir23113 jp z,.SetText3114 cp 7 3115 ld hl,SpellDescriptions.DescriptionAir33116 jp z,.SetText3117 ld hl,SpellDescriptions.DescriptionAir43118 .SetText:3120 ld b,HeroOverViewSpellBookWindowDX + 0303121 ld c,HeroOverViewSpellBookWindowDY + 1593122 jp SetText3149SetSpellExplanation_Fire:3150 ld a,(SetSkillsDescription?)3151 dec a3152 ret z3153 ld (SetSkillsDescription?),a 3155 call .GoSetText3156 call .SetSpellIcon3157 call .SetCost31583159 ret3161 .SetDamage:3162 ld a,(MenuOptionSelected?Backup)3163 cp 1 3164 ld b,DamageAllSpellSchools13165 jp z,DamageAmountFound3166 cp 2 3167 ld b,DamageAllSpellSchools23168 jp z,DamageAmountFound3169 cp 3 3170 ld b,DamageAllSpellSchools33171 jp z,DamageAmountFound3172 cp 4 3173 ld b,DamageAllSpellSchools43174 jp z,DamageAmountFound3176 cp 5 3177 ld b,DamageFireSpell13178 jp z,DamageAmountFound3179 cp 6 3180 ld b,DamageFireSpell23181 jp z,DamageAmountFound3182 cp 7 3183 ld b,DamageFireSpell33184 jp z,DamageAmountFound3185 ld b,DamageFireSpell43186 jp DamageAmountFound3188 .SetCost:3189 ld a,(MenuOptionSelected?Backup) 3190 cp 1 3191 ld b,CostAllSpellSchools13192 jp z,CostAmountFound3193 cp 2 3194 ld b,CostAllSpellSchools23195 jp z,CostAmountFound3196 cp 3 3197 ld b,CostAllSpellSchools33198 jp z,CostAmountFound3199 cp 4 3200 ld b,CostAllSpellSchools43201 jp z,CostAmountFound3203 cp 5 3204 ld b,CostFireSpell13205 jp z,CostAmountFound3206 cp 6 3207 ld b,CostFireSpell23208 jp z,CostAmountFound3209 cp 7 3210 ld b,CostFireSpell33211 jp z,CostAmountFound3212 ld b,CostFireSpell43213 jp CostAmountFound3215 .SetSpellIcon:3216 call SetWhiteWindow3218 ld a,(MenuOptionSelected?Backup)3219 cp 1 3220 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283221 jp z,.SetIcon3222 cp 2 3223 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283224 jp z,.SetIcon3225 cp 3 3226 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283227 jp z,.SetIcon3228 cp 43229 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283230 jp z,.SetIcon3231 cp 5 3232 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283233 jp z,.SetIcon3234 cp 6 3235 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283236 jp z,.SetIcon3237 cp 7 3238 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283239 jp z,.SetIcon3240 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283241 .SetIcon:3242 3243 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3244 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3245 ld a,SpellBookGraphicsBlock 3246 jp CopyRamToVramCorrectedCastleOverview 3248 .GoSetText:3249 ld a,(MenuOptionSelected?Backup)3250 cp 1 3251 ld hl,SpellDescriptions.DescriptionAllSpellSchools13252 jp z,.SetText3253 cp 2 3254 ld hl,SpellDescriptions.DescriptionAllSpellSchools23255 jp z,.SetText3256 cp 3 3257 ld hl,SpellDescriptions.DescriptionAllSpellSchools33258 jp z,.SetText3259 cp 43260 ld hl,SpellDescriptions.DescriptionAllSpellSchools43261 jp z,.SetText3263 cp 5 3264 ld hl,SpellDescriptions.DescriptionFire13265 jp z,.SetText3266 cp 6 3267 ld hl,SpellDescriptions.DescriptionFire23268 jp z,.SetText3269 cp 7 3270 ld hl,SpellDescriptions.DescriptionFire33271 jp z,.SetText3272 cp 83273 ld hl,SpellDescriptions.DescriptionFire43274 jp z,.SetText3275 .SetText:3277 ld b,HeroOverViewSpellBookWindowDX + 0303278 ld c,HeroOverViewSpellBookWindowDY + 1593279 jp SetText3297DamageAmountFound:3298 ld a,b3299 or a3300 ret z3302 ld b,HeroOverViewSpellBookWindowDX + 1683303 ld c,HeroOverViewSpellBookWindowDY + 1733304 push iy3305 ld l,a3306 ld h,03307 call SetNumber16BitCastle3308 pop iy3310 ld b,HeroOverViewSpellBookWindowDX + 1323311 ld c,HeroOverViewSpellBookWindowDY + 1733312 ld hl,.TextDamage3313 jp SetText3314 .TextDamage: db "Damage:",2553316CostAmountFound:3317 ld a,b3318 or a3319 ret z3320 ld b,HeroOverViewSpellBookWindowDX + 1743321 ld c,HeroOverViewSpellBookWindowDY + 1593322 push iy3323 ld l,a3324 ld h,03325 call SetNumber16BitCastle3326 pop iy3328 ld b,HeroOverViewSpellBookWindowDX + 1483329 ld c,HeroOverViewSpellBookWindowDY + 1593330 ld hl,.TextCost3331 jp SetText3332 .TextCost: db "Cost:",2553334334133443357SetSpellExplanation_Earth: 3358 ld a,(SetSkillsDescription?)3359 dec a3360 ret z3361 ld (SetSkillsDescription?),a 3363 call .GoSetText3364 call .SetSpellIcon3365 call .SetCost33663367 ret3369 .SetDamage:3370 ld a,(MenuOptionSelected?Backup)3371 cp 1 3372 ld b,DamageAllSpellSchools13373 jp z,DamageAmountFound3374 cp 2 3375 ld b,DamageAllSpellSchools23376 jp z,DamageAmountFound3377 cp 3 3378 ld b,DamageAllSpellSchools33379 jp z,DamageAmountFound3380 cp 4 3381 ld b,DamageAllSpellSchools43382 jp z,DamageAmountFound3384 cp 5 3385 ld b,DamageEarthSpell13386 jp z,DamageAmountFound3387 cp 6 3388 ld b,DamageEarthSpell23389 jp z,DamageAmountFound3390 cp 7 3391 ld b,DamageEarthSpell33392 jp z,DamageAmountFound3393 ld b,DamageEarthSpell43394 jp DamageAmountFound3396 .SetCost:3397 ld a,(MenuOptionSelected?Backup) 3398 cp 1 3399 ld b,CostAllSpellSchools13400 jp z,CostAmountFound3401 cp 2 3402 ld b,CostAllSpellSchools23403 jp z,CostAmountFound3404 cp 3 3405 ld b,CostAllSpellSchools33406 jp z,CostAmountFound3407 cp 4 3408 ld b,CostAllSpellSchools43409 jp z,CostAmountFound3411 cp 5 3412 ld b,CostEarthSpell13413 jp z,CostAmountFound3414 cp 6 3415 ld b,CostEarthSpell23416 jp z,CostAmountFound3417 cp 7 3418 ld b,CostEarthSpell33419 jp z,CostAmountFound3420 ld b,CostEarthSpell43421 jp CostAmountFound3424 .SetSpellIcon:3425 call SetWhiteWindow3427 ld a,(MenuOptionSelected?Backup)3428 cp 1 3429 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283430 jp z,.SetIcon3431 cp 2 3432 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283433 jp z,.SetIcon3434 cp 3 3435 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283436 jp z,.SetIcon3437 cp 43438 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283439 jp z,.SetIcon3440 3441 cp 5 3442 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283443 jp z,.SetIcon3444 cp 6 3445 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283446 jp z,.SetIcon3447 cp 7 3448 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283449 jp z,.SetIcon3450 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283451 .SetIcon:3452 3453 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3454 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3455 ld a,SpellBookGraphicsBlock 3456 jp CopyRamToVramCorrectedCastleOverview 3458 .GoSetText:3459 ld a,(MenuOptionSelected?Backup)3461 cp 1 3462 ld hl,SpellDescriptions.DescriptionAllSpellSchools13463 jp z,.SetText3464 cp 2 3465 ld hl,SpellDescriptions.DescriptionAllSpellSchools23466 jp z,.SetText3467 cp 3 3468 ld hl,SpellDescriptions.DescriptionAllSpellSchools33469 jp z,.SetText3470 cp 43471 ld hl,SpellDescriptions.DescriptionAllSpellSchools43472 jp z,.SetText3474 cp 5 3475 ld hl,SpellDescriptions.DescriptionEarth13476 jp z,.SetText3477 cp 6 3478 ld hl,SpellDescriptions.DescriptionEarth23479 jp z,.SetText3480 cp 7 3481 ld hl,SpellDescriptions.DescriptionEarth33482 jp z,.SetText3483 ld hl,SpellDescriptions.DescriptionEarth43484 .SetText:3486 ld b,HeroOverViewSpellBookWindowDX + 0303487 ld c,HeroOverViewSpellBookWindowDY + 1593488 jp SetText3490DamageAllSpellSchools4: equ 103491DamageAllSpellSchools3: equ 03492DamageAllSpellSchools2: equ 03493DamageAllSpellSchools1: equ 03495DamageEarthSpell4: equ 03496DamageEarthSpell3: equ 03497DamageEarthSpell2: equ 03498DamageEarthSpell1: equ 503500DamageFireSpell4: equ 03501DamageFireSpell3: equ 03502DamageFireSpell2: equ 153503DamageFireSpell1: equ 203505DamageAirSpell4: equ 03506DamageAirSpell3: equ 03507DamageAirSpell2: equ 03508DamageAirSpell1: equ 03510DamageWaterSpell4: equ 03511DamageWaterSpell3: equ 303512DamageWaterSpell2: equ 03513DamageWaterSpell1: equ 303515EarthSelected:3516 xor a3517 ld (MenuOptionSelected?),a 3518 jp HeroOverviewSpellBookWindowCode_Earth3520FireSelected:3521 xor a3522 ld (MenuOptionSelected?),a 3523 jp HeroOverviewSpellBookWindowCode_Fire3525AirSelected:3526 xor a3527 ld (MenuOptionSelected?),a 3528 jp HeroOverviewSpellBookWindowCode_Air3529 3530WaterSelected:3531 xor a3532 ld (MenuOptionSelected?),a 3533 jp HeroOverviewSpellBookWindowCode_Water3537ResetStatusSpellBookButtons: 35383545 ret3547ActivateButton_Earth:3548 ld ix,HeroOverviewSpellBookButtonTable_Earth_Activated3549 ld iy,ButtonTableSpellBookSYSX_Earth_Activated3550 jr SetElementalButton3552ActivateButton_Fire:3553 ld ix,HeroOverviewSpellBookButtonTable_Fire_Activated3554 ld iy,ButtonTableSpellBookSYSX_Fire_Activated3555 jr SetElementalButton3557ActivateButton_Air:3558 ld ix,HeroOverviewSpellBookButtonTable_Air_Activated3559 ld iy,ButtonTableSpellBookSYSX_Air_Activated3560 jr SetElementalButton3562ActivateButton_Water:3563 ld ix,HeroOverviewSpellBookButtonTable_Water_Activated3564 ld iy,ButtonTableSpellBookSYSX_Water_Activated3565 jr SetElementalButton3567SetElementalButton:3568 ld l,(iy+ButtonOMouseClicked)3569 ld h,(iy+ButtonOMouseClicked+1)3570 3571 ld e,(ix+HeroOverviewWindowButton_de)3572 ld d,(ix+HeroOverviewWindowButton_de+1)3574 ld c,(ix+Buttonnynx)3575 ld b,(ix+Buttonnynx+1)3577 ld a,SpellBookGraphicsBlock 3578 call CopyRamToVramCorrectedCastleOverview 3579 ret3582HeroOverviewStatusWindowCode:3583 call SetHeroOverViewStatusWindow 3584 call SetStatusTextAttack3585 call SwapAndSetPage 3586 call SetHeroOverViewStatusWindow 3587 call SetStatusTextAttack3589 .engine:3590 call PopulateControls 35923597 ld a,(Controls)3598 bit 5,a 3599 ret nz3601 call CheckEndHeroOverviewStatus 3602 halt3603 jp .engine3605HeroOverviewSkillsWindowCode:3606 call SetHeroSkillsInTable3608 ld a, %1000 0011 3609 ld (HeroOverviewSkillsButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3610 ld (HeroOverviewSkillsButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3611 ld (HeroOverviewSkillsButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3612 ld (HeroOverviewSkillsButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3613 ld (HeroOverviewSkillsButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3614 ld (HeroOverviewSkillsButtonTable + 5*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3616 call SetHeroOverViewSkillsWindow 3618 ld ix,HeroOverviewSkillsButtonTable3619 ld iy,ButtonTableSkillsSYSX3620 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3621 call SetButtonStatusAndText 3622 call SwapAndSetPage 3623 call SetHeroOverViewSkillsWindow 3625 .engine:3626 call PopulateControls 3628 ld a,(Controls)3629 bit 5,a 3630 ret nz3632 ld ix,HeroOverviewSkillsButtonTable3633 ld iy,ButtonTableSkillsSYSX3635 call CheckButtonMouseInteraction3636 ld a,(MenuOptionSelected?)3637 or a3638 jp nz,.MenuOptionSelected3640 call SetSkillExplanation 3641 call CheckEndHeroOverviewSkills 3642 ld ix,HeroOverviewSkillsButtonTable3643 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3644 call SetButtonStatusAndText 3645 call SwapAndSetPage 3646 3647 halt3648 jp .engine3650 .MenuOptionSelected:3651 xor a3652 ld (MenuOptionSelected?),a3653 ld (ActivatedSkillsButton),ix3654 ld a,33655 ld (SetSkillsDescription?),a 3656 jp HeroOverviewSkillsWindowCode3658TextLevel:3659 db "Level",2553660SetTextNameHeroAndLevel:3661 ld ix,(plxcurrentheroAddress)3662 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013663 ld c,HeroOverViewFirstWindowchoicesDY + 0083664 ld l,(ix+HeroSpecificInfo+0) 3665 ld h,(ix+HeroSpecificInfo+1)3666 call SetText3668 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013669 ld c,HeroOverViewFirstWindowchoicesDY + 0323670 ld hl,TextLevel3671 call SetText 3673 ld b,HeroOverViewFirstWindowchoicesDx + 050 - 0013674 ld c,HeroOverViewFirstWindowchoicesDY + 0323675 ld a,(ix+HeroLevel) 3676 ld l,a3677 ld h,03678 call SetNumber16BitCastle 3680 ld l,(ix+HeroSpecificInfo+0)3681 ld h,(ix+HeroSpecificInfo+1)3682 ld de,HeroInfoClass3683 add hl,de 3684 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013685 ld c,HeroOverViewFirstWindowchoicesDY + 0163686 jp SetText 3688DYDX16x30HeroIconAtHeroOverview: equ (HeroOverViewFirstWindowchoicesDY+10)*128 + ((HeroOverViewFirstWindowchoicesDX+10)/2) - 128 3689Set16x30HeroIconAtHeroOverviewCode:3690 ld ix,(plxcurrentheroAddress)3692 3693 ld l,(ix+HeroSpecificInfo+0) 3694 ld h,(ix+HeroSpecificInfo+1)3695 push hl3696 pop ix3698 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3699 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3700 ld bc,$40003701 xor a3702 sbc hl,bc3704 ld bc,NXAndNY16x30HeroIcon3705 ld a,Hero16x30PortraitsBlock 3706 ld de,DYDX16x30HeroIconAtHeroOverview 3707 jp CopyRamToVramCorrectedCastleOverview 3710 3714371637183723HeroOverviewCode:3724call screenon3728 ld a,33729 ld (SetHeroArmyAndStatusInHud?),a3731 ld a, %1000 0011 3732 ld (HeroOverviewFirstWindowButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3733 ld (HeroOverviewFirstWindowButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3734 ld (HeroOverviewFirstWindowButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3735 ld (HeroOverviewFirstWindowButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3736 ld (HeroOverviewFirstWindowButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a37403743 call SetHeroOverViewFirstWindow 3744 call Set16x30HeroIconAtHeroOverviewCode3745 call SetTextNameHeroAndLevel 3747 ld ix,HeroOverviewFirstWindowButtonTable3748 ld iy,ButtonTableSYSX3749 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3750 call SetButtonStatusAndText 3752 call SwapAndSetPage 3753 call SetHeroOverViewFirstWindow 3754 call Set16x30HeroIconAtHeroOverviewCode3755 call SetTextNameHeroAndLevel 37573762 ld a,%0001 00003763 ld (Controls),a 3766 ld bc,SFX_HeroOverviewMenu3767 call RePlayerSFX_PlayCh13769 .engine: 3770 call PopulateControls 37723777 ld a,(Controls)3778 bit 5,a 3779 ret nz3781 ld ix,HeroOverviewFirstWindowButtonTable3782 ld iy,ButtonTableSYSX3783 call CheckButtonMouseInteraction3785 ld a,(MenuOptionSelected?)3786 or a3787 jr nz,.MenuOptionSelected3789 call CheckEndHeroOverviewFirstWindow 3791 ld ix,HeroOverviewFirstWindowButtonTable3792 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3793 call SetButtonStatusAndText 3794 call SwapAndSetPage 37963797 jp .engine3799 .MenuOptionSelected:3800 cp 1 3801 jr z,.StatusSelected3802 cp 2 3803 jr z,.SpellBookSelected3804 cp 3 3805 jr z,.ArmySelected3806 cp 4 3807 jr z,.InventorySelected3808 cp 5 3809 jr z,.SkillsSelected3811 xor a3812 ld (MenuOptionSelected?),a3813 ret3815 .InventorySelected:3816 xor a3817 ld (MenuOptionSelected?),a 3818 jp HeroOverviewInventoryWindowCode3820 .StatusSelected:3821 xor a3822 ld (MenuOptionSelected?),a 3823 jp HeroOverviewStatusWindowCode3825 .ArmySelected:3826 xor a3827 ld (MenuOptionSelected?),a3828 jp HeroOverviewArmyWindowCode3830 .SpellBookSelected:3831 xor a3832 ld (MenuOptionSelected?),a 3833 jp HeroOverviewSpellBookWindowCode_Earth3834 3835 .SkillsSelected:3836 xor a3837 ld (MenuOptionSelected?),a 3838 jp HeroOverviewSkillsWindowCode3841SetStatusTextAttack:3842 ld ix,(plxcurrentheroAddress)3844 ld de,ItemAttackPointsTable3845 ld hl,SetAdditionalStatFromInventoryItemsInHL 3846 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3847 ld e,(ix+HeroStatAttack) 3848 ld d,03849 add hl,de3850 ld b,HeroOverViewStatusWindowDX + 056 + 004-33851 ld c,HeroOverViewStatusWindowDY + 0343852 call SetNumber16BitCastle3854 ld de,ItemDefencePointsTable3855 ld hl,SetAdditionalStatFromInventoryItemsInHL 3856 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3857 ld e,(ix+HeroStatDefense)3858 ld d,03859 add hl,de3861 bit 7,h 3862 jr z,.SetDefense3863 ld hl,03864 .SetDefense:3866 ld b,HeroOverViewStatusWindowDX + 067 + 004 -23867 ld c,HeroOverViewStatusWindowDY + 0343868 call SetNumber16BitCastle3870 ld de,ItemIntelligencePointsTable3871 ld hl,SetAdditionalStatFromInventoryItemsInHL 3872 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3873 ld e,(ix+HeroStatKnowledge)3874 ld d,03875 add hl,de 3876 ld b,HeroOverViewStatusWindowDX + 075 + 004 +23877 ld c,HeroOverViewStatusWindowDY + 0343878 call SetNumber16BitCastle3880 ld de,ItemSpellDamagePointsTable3881 ld hl,SetAdditionalStatFromInventoryItemsInHL 3882 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3883 ld e,(ix+HeroStatSpelldamage)3884 ld d,03885 add hl,de3886 ld b,HeroOverViewStatusWindowDX + 084 + 004 +53887 ld c,HeroOverViewStatusWindowDY + 0343888 call SetNumber16BitCastle3890 ld a,(ix+HeroLevel)3891 ld b,HeroOverViewStatusWindowDX + 0913892 ld c,HeroOverViewStatusWindowDY + 0453893 ld h,03894 ld l,a3895 call SetNumber16BitCastle3897 ld a,(ix+HeroLevel) 3898 cp 183899 ld hl,57533 3900 jr z,.XpSet3901 3902 ld l,(ix+HeroXp)3903 ld h,(ix+HeroXp+1)3904 .XpSet:3905 ld b,HeroOverViewStatusWindowDX + 0683906 ld c,HeroOverViewStatusWindowDY + 0593907 call SetNumber16BitCastle3909 ld a,(PutLetter+dx) 3910 add a,43911 ld b,a 3912 ld c,HeroOverViewStatusWindowDY + 059 3913 ld hl,TextSlash3914 call SetText3916 ld a,(ix+HeroLevel) 3917 cp 183918 ld hl,57533 3919 jr z,.XpMaxSet3920 3921 ld a,(ix+HeroLevel) 3922 add a,a3923 ld d,03924 ld e,a3925 ld hl,HeroXPTable-23926 add hl,de3927 ld e,(hl)3928 inc hl3929 ld d,(hl) 3930 ex de,hl3931 .XpMaxSet:3932 ld a,(PutLetter+dx) 3933 add a,43934 ld b,a 3935 ld c,HeroOverViewStatusWindowDY + 0593936 call SetNumber16BitCastle3938 ld a,(ix+HeroMove)3939 ld b,HeroOverViewStatusWindowDX + 1043940 ld c,HeroOverViewStatusWindowDY + 0733941 ld h,03942 ld l,a3943 call SetNumber16BitCastle3945 ld a,(ix+HeroTotalMove)3946 ld b,HeroOverViewStatusWindowDX + 1243947 ld c,HeroOverViewStatusWindowDY + 0733948 ld h,03949 ld l,a3950 call SetNumber16BitCastle3952 ld b,HeroOverViewStatusWindowDX + 0933953 ld c,HeroOverViewStatusWindowDY + 0873954 ld l,(ix+HeroMana+0)3955 ld h,(ix+HeroMana+1)3956 call SetNumber16BitCastle3958 call SetTotalManaHero3960 ld b,HeroOverViewStatusWindowDX + 1163961 ld c,HeroOverViewStatusWindowDY + 0873962 ld l,(ix+HeroTotalMana+0)3963 ld h,(ix+HeroTotalMana+1)3964 call SetNumber16BitCastle3966 ld a,(ix+HeroManarec)3967 ld b,HeroOverViewStatusWindowDX + 0983968 ld c,HeroOverViewStatusWindowDY + 1013969 ld h,03970 ld l,a3971 call SetNumber16BitCastle3972 ret3974TextSlash: db "/",2553978CheckEndHeroOverviewArmy:3979 ld a,(NewPrContr)3980 bit 4,a 3981 ret z3983 ld a,(spat+0) 3984 cp HeroOverViewArmyWindowDY3985 jr c,.NotOverHeroOverViewArmyWindow3986 cp HeroOverViewArmyWindowDY+HeroOverViewArmyWindowNY3987 jr nc,.NotOverHeroOverViewArmyWindow3988 3989 ld a,(spat+1) 3991 add a,063993 cp HeroOverViewArmyWindowDX3994 jr c,.NotOverHeroOverViewArmyWindow3995 cp HeroOverViewArmyWindowDX+HeroOverViewArmyWindowNX3996 ret c3998 .NotOverHeroOverViewArmyWindow:3999 pop af4000 ret 4002CheckEndHeroOverviewInventory:4003 ld a,(NewPrContr)4004 bit 4,a 4005 ret z4007 ld a,(spat+0) 4008 cp HeroOverViewInventoryWindowDY4009 jr c,.NotOverHeroOverViewInventoryWindow4010 cp HeroOverViewInventoryWindowDY+HeroOverViewInventoryWindowNY4011 jr nc,.NotOverHeroOverViewInventoryWindow4012 4013 ld a,(spat+1) 4015 add a,064017 cp HeroOverViewInventoryWindowDX4018 jr c,.NotOverHeroOverViewInventoryWindow4019 cp HeroOverViewInventoryWindowDX+HeroOverViewInventoryWindowNX4020 ret c4022 .NotOverHeroOverViewInventoryWindow:4023 pop af4024 ret 4026CheckEndHeroOverviewSpellBook:4027 ld a,(NewPrContr)4028 bit 4,a 4029 ret z4031 ld a,(spat+0) 4032 cp HeroOverViewSpellBookWindowDY4033 jr c,.NotOverHeroOverViewSpellBookWindow4034 cp HeroOverViewSpellBookWindowDY+HeroOverViewSpellBookWindowNY4035 jr nc,.NotOverHeroOverViewSpellBookWindow4036 4037 ld a,(spat+1) 4039 add a,064041 cp HeroOverViewSpellBookWindowDX4042 jr c,.NotOverHeroOverViewSpellBookWindow4043 cp HeroOverViewSpellBookWindowDX+HeroOverViewSpellBookWindowNX4044 ret c4046 .NotOverHeroOverViewSpellBookWindow:4047 pop af4048 ret 4050CheckEndHeroOverviewStatus:4051 ld a,(NewPrContr)4052 bit 4,a 4053 ret z4055 ld a,(spat+0) 4056 cp HeroOverViewStatusWindowDY4057 jr c,.NotOverHeroOverViewStatusWindow4058 cp HeroOverViewStatusWindowDY+HeroOverViewStatusWindowNY4059 jr nc,.NotOverHeroOverViewStatusWindow4060 4061 ld a,(spat+1) 4063 add a,064065 cp HeroOverViewStatusWindowDX4066 jr c,.NotOverHeroOverViewStatusWindow4067 cp HeroOverViewStatusWindowDX+HeroOverViewStatusWindowNX4068 ret c4070 .NotOverHeroOverViewStatusWindow:4071 pop af4072 ret 4074CheckEndHeroOverviewSkills:4075 ld a,(NewPrContr)4076 bit 4,a 4077 ret z4079 ld a,(spat+0) 4080 cp HeroOverViewSkillsWindowDY4081 jr c,.NotOverHeroOverViewSkillsWindow4082 cp HeroOverViewSkillsWindowDY+HeroOverViewSkillsWindowNY4083 jr nc,.NotOverHeroOverViewSkillsWindow4084 4085 ld a,(spat+1) 4087 add a,064089 cp HeroOverViewSkillsWindowDX4090 jr c,.NotOverHeroOverViewSkillsWindow4091 cp HeroOverViewSkillsWindowDX+HeroOverViewSkillsWindowNX4092 ret c4094 .NotOverHeroOverViewSkillsWindow:4095 pop af4096 ret 4098CheckEndHeroOverviewFirstWindow: 4099 ld a,(NewPrContr)4100 bit 4,a 4101 ret z4103 ld a,(spat+0) 4104 cp HeroOverViewFirstWindowchoicesDY4105 jr c,.NotOverHeroOverViewFirstWindowChoices4106 cp HeroOverViewFirstWindowchoicesDY+HeroOverViewFirstWindowchoicesNY4107 jr nc,.NotOverHeroOverViewFirstWindowChoices4108 4109 ld a,(spat+1) 4111 add a,064113 cp HeroOverViewFirstWindowchoicesDX4114 jr c,.NotOverHeroOverViewFirstWindowChoices4115 cp HeroOverViewFirstWindowchoicesDX+HeroOverViewFirstWindowchoicesNX4116 ret c4118 .NotOverHeroOverViewFirstWindowChoices:4119 pop af4120 ret 4122SetHeroSkillsInTable:4123 ld ix,(plxcurrentheroAddress)4125 ld a,(ix+HeroSkills+0)4126 ld de,TextSkillsWindowButton14127 call .SetheroSkill4129 ld a,(ix+HeroSkills+1)4130 ld de,TextSkillsWindowButton24131 call .SetheroSkill4133 ld a,(ix+HeroSkills+2)4134 ld de,TextSkillsWindowButton34135 call .SetheroSkill4137 ld a,(ix+HeroSkills+3)4138 ld de,TextSkillsWindowButton44139 call .SetheroSkill4141 ld a,(ix+HeroSkills+4)4142 ld de,TextSkillsWindowButton54143 call .SetheroSkill4145 ld a,(ix+HeroSkills+5)4146 ld de,TextSkillsWindowButton64147 call .SetheroSkill4148 ret4150 .SetheroSkill:4151 ld l,a4152 ld h,04153 add hl,hl 4154 add hl,hl 4155 add hl,hl 4156 push hl4157 add hl,hl 4158 add hl,hl 4159 add hl,hl 4160 add hl,hl 4161 pop bc4162 add hl,bc 4164 ld bc,SkillEmpty4165 add hl,bc4166 ld bc,LenghtSkillDescription4167 ldir4168 ret4171CheckButtonMouseInteraction:4172 ld b,(ix+HeroOverviewWindowAmountOfButtons)4173 ld de,ButtonTableLenght4175 .loop:4176 call .check4177 add ix,de4178 djnz .loop4179 ret4180 4181 .check:4182 ld a,(ix+HeroOverviewWindowButtonStatus)4183 or a4184 ret z4185 4186 ld a,(spat+0) 4187 cp (ix+HeroOverviewWindowButtonYtop)4188 jr c,.NotOverButton4189 cp (ix+HeroOverviewWindowButtonYbottom)4190 jr nc,.NotOverButton4191 ld a,(spat+1) 4193 add a,064195 cp (ix+HeroOverviewWindowButtonXleft)4196 jr c,.NotOverButton4197 cp (ix+HeroOverviewWindowButtonXright)4198 jr nc,.NotOverButton4199 4206 ld a,(Controls)4207 bit 4,a 4208 jr nz,.MouseOverButtonAndSpacePressed4209 bit 5,(ix+HeroOverviewWindowButtonStatus) 4210 jr nz,MenuOptionSelected 4211 .MouseHoverOverButton:42124214 bit 6,(ix+HeroOverviewWindowButtonStatus) 4215 ld (ix+HeroOverviewWindowButtonStatus),%0100 00114216 ret nz4218 push iy4219 push bc4220 ld bc,SFX_MouseOver4221 call RePlayerSFX_PlayCh1_MouseAction4222 pop bc4223 pop iy4224 ret4226 .MouseOverButtonAndSpacePressed:4227 bit 5,(ix+HeroOverviewWindowButtonStatus) 4228 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit4229 ld a,(NewPrContr)4230 bit 4,a 4231 jr z,.MouseHoverOverButton4233 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:4234 ld (ix+HeroOverviewWindowButtonStatus),%0010 001142364237 push iy4238 push bc4239 ld bc,SFX_MouseClick4240 call RePlayerSFX_PlayCh1_MouseAction4241 pop bc4242 pop iy42434244 ret4245 4246 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:4247 ld (ix+HeroOverviewWindowButtonStatus),%0010 00114248 ret4250 .NotOverButton:4251 bit 5,(ix+HeroOverviewWindowButtonStatus) 4252 jr nz,.buttonIsStillLit4253 bit 6,(ix+HeroOverviewWindowButtonStatus) 4254 ret z4255 .buttonIsStillLit:4256 ld (ix+HeroOverviewWindowButtonStatus),%1000 00114257 ret4259MenuOptionSelected:4260 ld a,b 4261 ld (MenuOptionSelected?),a4262 pop af 4263 ret4265SetButtonStatusAndText4:42664270 ld (BCStored),bc4272 ld b,(ix+HeroOverviewWindowAmountOfButtons)4273 .loop:4274 push bc4275 call .Setbutton4276 pop bc4277 ld de,ButtonTableLenght4278 add ix,de4281 ld de,6 4282 add iy,de4285 djnz .loop4286 ret4288 .Setbutton:4289 bit 0,(ix+HeroOverviewWindowButtonStatus)4290 jr nz,.bit0isSet4291 bit 1,(ix+HeroOverviewWindowButtonStatus)4292 ret z4293 4294 .bit1isSet:4295 res 1,(ix+HeroOverviewWindowButtonStatus)4296 jr .goCopyButton4297 .bit0isSet:4298 res 0,(ix+HeroOverviewWindowButtonStatus) 4299 .goCopyButton:4301 bit 7,(ix+HeroOverviewWindowButtonStatus)4302 ld l,(iy+ButtonOff)4303 ld h,(iy+ButtonOff+1)4304 jr nz,.go 4305 bit 6,(ix+HeroOverviewWindowButtonStatus)4306 ld l,(iy+ButtonMouseOver)4307 ld h,(iy+ButtonMouseOver+1)4308 jr nz,.go 4310 ld l,(iy+ButtonOMouseClicked)4311 ld h,(iy+ButtonOMouseClicked+1)4312 .go:4313 4314 ld e,(ix+HeroOverviewWindowButton_de)4315 ld d,(ix+HeroOverviewWindowButton_de+1)4316 ld bc,(BCStored)4318 ld c,(ix+Buttonnynx)4319 ld b,(ix+Buttonnynx+1)4321 ld a,ArmyGraphicsBlock 4322 call CopyRamToVramCorrectedCastleOverview 4323 ret4325SetButtonStatusAndText3:43264330 ld (BCStored),bc4332 ld b,(ix+HeroOverviewWindowAmountOfButtons)4333 .loop:4334 push bc4335 call .Setbutton4336 pop bc4337 ld de,ButtonTableLenght4338 add ix,de4341 ld de,6 4342 add iy,de4345 djnz .loop4346 ret4348 .Setbutton:4349 bit 0,(ix+HeroOverviewWindowButtonStatus)4350 jr nz,.bit0isSet4351 bit 1,(ix+HeroOverviewWindowButtonStatus)4352 ret z4353 4354 .bit1isSet:4355 res 1,(ix+HeroOverviewWindowButtonStatus)4356 jr .goCopyButton4357 .bit0isSet:4358 res 0,(ix+HeroOverviewWindowButtonStatus) 4359 .goCopyButton:4361 bit 7,(ix+HeroOverviewWindowButtonStatus)4362 ld l,(iy+ButtonOff)4363 ld h,(iy+ButtonOff+1)4364 jr nz,.go 4365 bit 6,(ix+HeroOverviewWindowButtonStatus)4366 ld l,(iy+ButtonMouseOver)4367 ld h,(iy+ButtonMouseOver+1)4368 jr nz,.go 4370 ld l,(iy+ButtonOMouseClicked)4371 ld h,(iy+ButtonOMouseClicked+1)4372 .go:4373 4374 ld e,(ix+HeroOverviewWindowButton_de)4375 ld d,(ix+HeroOverviewWindowButton_de+1)4376 ld bc,(BCStored)4378 ld c,(ix+Buttonnynx)4379 ld b,(ix+Buttonnynx+1)4381 ld a,InventoryGraphicsBlock 4382 call CopyRamToVramCorrectedCastleOverview 4383 ret4385SetButtonStatusAndText2: 4390 ld (BCStored),bc4392 ld b,(ix+HeroOverviewWindowAmountOfButtons)4393 .loop:4394 push bc4395 call .Setbutton4396 pop bc4397 ld de,ButtonTableLenght4398 add ix,de4401 ld de,6 4402 add iy,de4405 djnz .loop4406 ret4408 .Setbutton:4409 bit 0,(ix+HeroOverviewWindowButtonStatus)4410 jr nz,.bit0isSet4411 bit 1,(ix+HeroOverviewWindowButtonStatus)4412 ret z4413 4414 .bit1isSet:4415 res 1,(ix+HeroOverviewWindowButtonStatus)4416 jr .goCopyButton4417 .bit0isSet:4418 res 0,(ix+HeroOverviewWindowButtonStatus) 4419 .goCopyButton:4421 bit 7,(ix+HeroOverviewWindowButtonStatus)4422 ld l,(iy+ButtonOff)4423 ld h,(iy+ButtonOff+1)4424 jr nz,.go 4425 bit 6,(ix+HeroOverviewWindowButtonStatus)4426 ld l,(iy+ButtonMouseOver)4427 ld h,(iy+ButtonMouseOver+1)4428 jr nz,.go 4430 ld l,(iy+ButtonOMouseClicked)4431 ld h,(iy+ButtonOMouseClicked+1)4432 .go:4433 4434 ld e,(ix+HeroOverviewWindowButton_de)4435 ld d,(ix+HeroOverviewWindowButton_de+1)4436 ld bc,(BCStored)4438 ld c,(ix+Buttonnynx)4439 ld b,(ix+Buttonnynx+1)4441 ld a,SpellBookGraphicsBlock 4442 call CopyRamToVramCorrectedCastleOverview 4443 ret4445SetButtonStatusAndText: 44494453 ld (BCStored),bc4455 ld b,(ix+HeroOverviewWindowAmountOfButtons)4456 .loop:4457 push bc4458 call .Setbutton4459 pop bc4460 ld de,ButtonTableLenght4461 add ix,de4462 djnz .loop4463 ret4465 .Setbutton:4466 bit 0,(ix+HeroOverviewWindowButtonStatus)4467 jr nz,.bit0isSet4468 bit 1,(ix+HeroOverviewWindowButtonStatus)4469 ret z4470 4471 .bit1isSet:4472 res 1,(ix+HeroOverviewWindowButtonStatus)4473 jr .goCopyButton4474 .bit0isSet:4475 res 0,(ix+HeroOverviewWindowButtonStatus) 4476 .goCopyButton:4478 bit 7,(ix+HeroOverviewWindowButtonStatus)4479 ld l,(iy+ButtonOff)4480 ld h,(iy+ButtonOff+1)4481 jr nz,.go 4482 bit 6,(ix+HeroOverviewWindowButtonStatus)4483 ld l,(iy+ButtonMouseOver)4484 ld h,(iy+ButtonMouseOver+1)4485 jr nz,.go 4487 ld l,(iy+ButtonOMouseClicked)4488 ld h,(iy+ButtonOMouseClicked+1)4489 .go:4490 4491 ld e,(ix+HeroOverviewWindowButton_de)4492 ld d,(ix+HeroOverviewWindowButton_de+1)4493 ld bc,(BCStored)4495 ld a,HeroOverviewGraphicsBlock 4496 call CopyRamToVramCorrectedCastleOverview 4497 44984499 4500SetTextInButton:4501 ld l,(ix+TextAddress)4502 ld h,(ix+TextAddress+1) 4505 ld a,(ix+HeroOverviewWindowButtonYtop)4506 add a,445074508 ld c,a4509 ld a,(ix+HeroOverviewWindowButtonXleft)4510 add a,345114512 ld b,a4513 jp SetText4515SetSkillExplanation:4516 ld a,(SetSkillsDescription?)4517 dec a4518 ret z4519 ld (SetSkillsDescription?),a 4520 4521 ld ix,(ActivatedSkillsButton)4522 ld b,0374523 ld c,1384524 ld l,(ix+TextAddress)4525 ld h,(ix+TextAddress+1) 4526 ld de,LenghtTextSkillsDescription4527 add hl,de4528 jp SetText4530TextPlusSymbol: equ $2b4531TextMinusSymbol: equ $2d4532TextPercentageSymbol: equ $254533TextSpace: equ $204534TextNumber0: equ $304535TextApostrofeSymbol: equ $274536TextColonSymbol: equ $3a4537TextSlashSymbol: equ $2f4538TextQuestionMarkSymbol: equ $3f4539TextCommaSymbol: equ $2c4540TextDotSymbol: equ $2e4541TextOpeningParenthesisSymbol: equ $284542TextClosingParenthesisSymbol: equ $294544TextFirstWindowChoicesButton1: db "Skills",2554545TextFirstWindowChoicesButton2: db "Inventory",2554546TextFirstWindowChoicesButton3: db "Army",2554547TextFirstWindowChoicesButton4: db "Spell Book",2554548TextFirstWindowChoicesButton5: db "Status",2554550LenghtSkillDescription: equ SkillArcheryAdvanced-SkillArcheryBasic4551SkillEmpty:4552 db "                                 ",255 4553 db "                                 ",2544554 db "                                 ",2544555 db "                                 ",2554556SkillArcheryBasic:4557 db "Basic Archery                    ",255 4558 db "Basic Archery                    ",2544559 db "The ranged Attack damage of your ",2544560 db "units is increased by 10%        ",2554561SkillArcheryAdvanced:4562 db "Advanced Archery                 ",2554563 db "Advanced Archery                 ",2544564 db "The ranged Attack damage of your ",2544565 db "units is increased by 20%        ",2554566SkillArcheryExpert:4567 db "Expert Archery                   ",2554568 db "Expert Archery                   ",2544569 db "The ranged Attack damage of your ",2544570 db "units is increased by 50%        ",2554571SkillOffenceBasic:4572 db "Basic Offence                    ",255 4573 db "Basic Offence                    ",2544574 db "The hand to hand damage of your  ",2544575 db "units is increased by 10%        ",2554576SkillOffenceAdvanced:4577 db "Advanced Offence                 ",2554578 db "Advanced Offence                 ",2544579 db "The hand to hand damage of your  ",2544580 db "units is increased by 20%        ",2554581SkillOffenceExpert:4582 db "Expert Offence                   ",2554583 db "Expert Offence                   ",2544584 db "The hand to hand damage of your  ",2544585 db "units is increased by 30%        ",25545864587SkillArmourerBasic:4588 db "Basic Armorer                    ",255 4589 db "Basic Armorer                    ",2544590 db "Damage inflicted on your army is ",2544591 db "reduced by 5%                    ",2554592SkillArmourerAdvanced:4593 db "Advanced Armorer                 ",2554594 db "Advanced Armorer                 ",2544595 db "Damage inflicted on your army is ",2544596 db "reduced by 10%                   ",2554597SkillArmourerExpert:4598 db "Expert Armorer                   ",2554599 db "Expert Armorer                   ",2544600 db "Damage inflicted on your army is ",2544601 db "reduced by 15%                   ",2554602SkillResistanceBasic:4603 db "Basic Resistance                 ",255 4604 db "Basic Resistance                 ",2544605 db "Grants your units a 10% chance to",2544606 db "block individual targeted spells ",2554607SkillResistanceAdvanced:4608 db "Advanced Resistance              ",2554609 db "Advanced Resistance              ",2544610 db "Grants your units a 15% chance to",2544611 db "block individual targeted spells ",2554612SkillResistanceExpert:4613 db "Expert Resistance                ",2554614 db "Expert Resistance                ",2544615 db "Grants your units a 20% chance to",2544616 db "block individual targeted spells ",2554628SkillEstatesBasic:4629 db "Basic Estates                    ",255 4630 db "Basic Estates                    ",2544631 db "Your hero generates an extra 125 ",2544632 db "Gold per day.                    ",2554633SkillEstatesAdvanced:4634 db "Advanced Estates                 ",2554635 db "Advanced Estates                 ",2544636 db "Your hero generates an extra 250 ",2544637 db "Gold per day.                    ",2554638SkillEstatesExpert:4639 db "Expert Estates                   ",2554640 db "Expert Estates                   ",2544641 db "Your hero generates an extra 500 ",2544642 db "Gold per day.                    ",2554643SkillLearningBasic:4644 db "Basic Learning                   ",255 4645 db "Basic Learning                   ",2544646 db "Your hero's accumulated          ",2544647 db "experience is amplified by 10%   ",2554648SkillLearningAdvanced:4649 db "Advanced Learning                ",2554650 db "Advanced Learning                ",2544651 db "Your hero's accumulated          ",2544652 db "experience is amplified by 20%   ",2554653SkillLearningExpert:4654 db "Expert Learning                  ",2554655 db "Expert Learning                  ",2544656 db "Your hero's accumulated          ",2544657 db "experience is amplified by 30%   ",2554658SkillLogisticsBasic:4659 db "Basic Logistics                  ",255 4660 db "Basic Logistics                  ",2544661 db "An additional 10% is added to    ",2544662 db "your hero's land movement range. ",2554663SkillLogisticsAdvanced:4664 db "Advanced Logistics               ",2554665 db "Advanced Logistics               ",2544666 db "An additional 20% is added to    ",2544667 db "your hero's land movement range. ",2554668SkillLogisticsExpert:4669 db "Expert Logistics                 ",2554670 db "Expert Logistics                 ",2544671 db "An additional 30% is added to    ",2544672 db "your hero's land movement range. ",2554677SkillIntelligenceBasic:4678 db "Basic Intelligence               ",255 4679 db "Basic Intelligence               ",2544680 db "Boosts your hero's maximum spell ",2544681 db "points by 25%                    ",2554682SkillIntelligenceAdvanced:4683 db "Advanced Intelligence            ",2554684 db "Advanced Intelligence            ",2544685 db "Boosts your hero's maximum spell ",2544686 db "points by 50%                    ",2554687SkillIntelligenceExpert:4688 db "Expert Intelligence              ",2554689 db "Expert Intelligence              ",2544690 db "Boosts your hero's maximum spell ",2544691 db "points by 100%                   ",2554692SkillSorceryBasic:4693 db "Basic Sorcery                    ",255 4694 db "Basic Sorcery                    ",2544695 db "An additional 5% is added to     ",2544696 db "your hero's spell damage.        ",2554697SkillSorceryAdvanced:4698 db "Advanced Sorcery                 ",2554699 db "Advanced Sorcery                 ",2544700 db "An additional 10% is added to    ",2544701 db "your hero's spell damage.        ",2554702SkillSorceryExpert:4703 db "Expert Sorcery                   ",2554704 db "Expert Sorcery                   ",2544705 db "An additional 15% is added to    ",2544706 db "your hero's spell damage.        ",2554707SkillWisdomBasic:4708 db "Basic Wisdom                     ",255 4709 db "Basic Wisdom                     ",2544710 db "Your hero is capable of learning ",2544711 db "spells of level 2 and lower.     ",2554712SkillWisdomAdvanced:4713 db "Advanced Wisdom                  ",2554714 db "Advanced Wisdom                  ",2544715 db "Your hero is capable of learning ",2544716 db "spells of level 3 and lower.     ",2554717SkillWisdomExpert:4718 db "Expert Wisdom                    ",2554719 db "Expert Wisdom                    ",2544720 db "Your hero is capable of learning ",2544721 db "all spells.                      ",2554723SkillNecromancyBasic:4724 db "Basic Necromancy                 ",255 4725 db "Basic Necromancy                 ",2544726 db "Revives 10% of enemy creatures   ",2544727 db "that have fallen in battle.      ",2554728SkillNecromancyAdvanced:4729 db "Advanced Necromancy              ",2554730 db "Advanced Necromancy              ",2544731 db "Revives 20% of enemy creatures   ",2544732 db "that have fallen in battle.      ",2554733SkillNecromancyExpert:4734 db "Expert Necromancy                ",2554735 db "Expert Necromancy                ",2544736 db "Revives 1/3 of enemy creatures   ",2544737 db "that have fallen in battle.      ",25547404747 4748SetHeroOverViewFirstWindow:4749 ld hl,$4000 + (HeroOverViewFirstWindowchoicesSY*128) + (HeroOverViewFirstWindowchoicesSX/2) -1284750 ld de,$0000 + (HeroOverViewFirstWindowchoicesDY*128) + (HeroOverViewFirstWindowchoicesDX/2)4751 ld bc,$0000 + (HeroOverViewFirstWindowchoicesNY*256) + (HeroOverViewFirstWindowchoicesNX/2)4752 ld a,HeroOverviewGraphicsBlock 4753 jp CopyRamToVramCorrectedCastleOverview 4755SetHeroOverViewSkillsWindow:4756 ld hl,$4000 + (HeroOverViewSkillsWindowSY*128) + (HeroOverViewSkillsWindowSX/2) -1284757 ld de,$0000 + (HeroOverViewSkillsWindowDY*128) + (HeroOverViewSkillsWindowDX/2)4758 ld bc,$0000 + (HeroOverViewSkillsWindowNY*256) + (HeroOverViewSkillsWindowNX/2)4759 ld a,HeroOverviewGraphicsBlock 4760 jp CopyRamToVramCorrectedCastleOverview 4762SetHeroOverViewStatusWindow:4763 ld hl,$4000 + (HeroOverViewStatusWindowSY*128) + (HeroOverViewStatusWindowSX/2) -1284764 ld de,$0000 + (HeroOverViewStatusWindowDY*128) + (HeroOverViewStatusWindowDX/2)4765 ld bc,$0000 + (HeroOverViewStatusWindowNY*256) + (HeroOverViewStatusWindowNX/2)4766 ld a,HeroOverviewStatusGraphicsBlock4767 jp CopyRamToVramCorrectedCastleOverview 4769SetHeroOverViewSpellBookWindow:4770 ld hl,$4000 + (HeroOverViewSpellBookWindowSY*128) + (HeroOverViewSpellBookWindowSX/2) -1284771 ld de,$0000 + (HeroOverViewSpellBookWindowDY*128) + (HeroOverViewSpellBookWindowDX/2)4772 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4773 ld a,SpellBookGraphicsBlock4774 jp CopyRamToVramCorrectedCastleOverview 4776SetHeroOverViewInventoryWindow:4777 ld hl,$4000 + (HeroOverViewInventoryWindowSY*128) + (HeroOverViewInventoryWindowSX/2) -1284778 ld de,$0000 + (HeroOverViewInventoryWindowDY*128) + (HeroOverViewInventoryWindowDX/2)4779 ld bc,$0000 + (HeroOverViewInventoryWindowNY*256) + (HeroOverViewInventoryWindowNX/2)4780 ld a,InventoryGraphicsBlock4781 jp CopyRamToVramCorrectedCastleOverview 4783SetHeroOverViewArmyWindow:4784 ld hl,$4000 + (HeroOverViewArmyWindowSY*128) + (HeroOverViewArmyWindowSX/2) -1284785 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)4786 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)4787 ld a,ArmyGraphicsBlock4788 jp CopyRamToVramCorrectedCastleOverview 4791MSXHeroes.asm860 ds $8000-$,$ff861dephase863866HeroOverviewStatusGraphicsBlock: equ $1d867phase $4000868 incbin "..\grapx\HeroOverview\StatusWindow.SC5",7,116 * 128 869 ds $c000-$,$ff870dephase872875SpellBookGraphicsBlock: equ $1f876phase $4000877 incbin "..\grapx\HeroOverview\SpellBook.SC5",7,200 * 128 878 ds $c000-$,$ff879dephase881884InventoryGraphicsBlock: equ $21885phase $4000886 incbin "..\grapx\HeroOverview\Inventory.SC5",7,208 * 128 887 incbin "..\grapx\HeroOverview\InventoryBottom48Lines.SC5",7,48 * 128 888 ds $c000-$,$ff889dephase891894ArmyGraphicsBlock: equ $23895phase $4000896 incbin "..\grapx\HeroOverview\Army.SC5",7,133 * 128 897 ds $c000-$,$ff898dephase900903HeroArmyTransferGraphicsBlock: equ $25904phase $4000905 incbin "..\grapx\HeroOverview\HeroArmyTransfer.SC5",7,137 * 128 906 ds $c000-$,$ff907dephase909912Hero16x30PortraitsBlock: equ $27913phase $4000914 incbin "..\grapx\HeroesSprites\16x30Portraits.SC5",7,150 * 128 915 ds $c000-$,$ff916dephase918921Enemy14x24PortraitsBlock: equ $29922phase $4000923 incbin "..\grapx\MonsterSprites\14x24Portraits.SC5",7,208 * 128 924 incbin "..\grapx\MonsterSprites\14x24PortraitsBottom48lines.SC5",7,032 * 128 925 ds $c000-$,$ff926dephase928931Enemy14x24PortraitsBlockPart2: equ $2b932phase $4000933 incbin "..\grapx\MonsterSprites\14x24PortraitsPart2.SC5",7,24 * 128 934 ds $8000-$,$ff935dephase937940IndividualBuildingsBlock: equ $2c941phase $4000942 incbin "..\grapx\CastleOverview\IndividualBuildings.SC5",7,188 * 128 943 ds $c000-$,$ff944dephase946949IndividualBuildingsPage2Block: equ $2e950phase $4000951 incbin "..\grapx\CastleOverview\IndividualBuildingsPage2.SC5",7,142 * 128 952 ds $c000-$,$ff953dephase955958ButtonsBlock: equ $30959phase $4000960 incbin "..\grapx\CastleOverview\Buttons.SC5",7,093 * 128 961 ds $c000-$,$ff962dephase964967BuildBlock: equ $32968phase $4000969 incbin "..\grapx\CastleOverview\build.SC5",7,212 * 128 970 ds $c000-$,$ff971dephase973976ButtonsBuildBlock: equ $34977phase $4000978 incbin "..\grapx\CastleOverview\ButtonsBuild.SC5",7,166 * 128 979 ds $c000-$,$ff980dephase982985RecruitCreaturesBlock: equ $36986phase $4000987 incbin "..\grapx\CastleOverview\RecruitCreatures.SC5",7,212 * 128 988 ds $c000-$,$ff989dephase991994ButtonsRecruitBlock: equ $38995phase $4000996 incbin "..\grapx\CastleOverview\ButtonsRecruitCreatures.SC5",7,139 * 128 997 ds $c000-$,$ff998dephase10001003MagicGuildBlock: equ $3a1004phase $40001005 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",7,25 * 128 1006 incbin "..\grapx\CastleOverview\MagicGuild.SC5",25 * 128 + 7,154 * 128 1007 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",179 * 128 + 7,33 * 128 1008 ds $c000-$,$ff1009dephase10111014ChamberOfCommerceBlock: equ $3c1015phase $40001016 incbin "..\grapx\CastleOverview\ChamberOfCommerce.SC5",7,80 * 128 1017 incbin "..\grapx\CastleOverview\ChamberOfCommerceCastlePalette.SC5",80 * 128 + 7,132 * 128 1018 ds $c000-$,$ff1019dephase10211024ChamberOfCommerceButtonsBlock: equ $3e1025phase $40001026 incbin "..\grapx\CastleOverview\ButtonsChamberOfCommerce.SC5",7,152 * 128 1027 ds $c000-$,$ff1028dephase10301033TavernBlock: equ $401034phase $40001035 incbin "..\grapx\CastleOverview\Tavern.SC5",7,131 * 128 1036 incbin "..\grapx\CastleOverview\TavernCastlePalette.SC5",131 * 128 + 7,32 * 128 1037 incbin "..\grapx\CastleOverview\Tavern.SC5",163 * 128 + 7,049 * 128 1038 ds $c000-$,$ff1039dephase10411044CastleOverviewCodeBlock: equ $421045CastleOverviewFontBlock: equ $421046phase $40001047 incbin "..\grapx\CastleOverview\font.SC5",7,6 * 128 1048 CastleOverviewCode.asm11625ShowRecruitWindowForSelectedUnit: 26 xor a 27 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 28 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 29 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 30 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 31 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 32 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 33 ld a,%1100 001134 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 35 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 36 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 37 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 39 call .SetUnit 41 42 ld hl,$4000 + (047*128) + (000/2) - 12843 ld de,$0000 + (032*128) + (048/2) - 12844 ld bc,$0000 + (084*256) + (162/2)45 ld a,ButtonsRecruitBlock 46 call CopyRamToVramCorrectedCastleOverview 48 call SetCastleOverViewFontPage0Y212 50 call .army51 call .name52 call .cost53 call .Gemscost54 call .Rubiescost56 call .amountavailable57 call .recruitamount58 ret60.TotalRubiescost:61 ld a,(SelectedCastleRecruitLevelUnit)62 ld b,063+123 63 ld c,083 64 ld de,$0000 + (078*128) + ((074+97)/2) - 128 65 call .SetTotalRubiescost66 ret68.TotalGemscost:69 ld a,(SelectedCastleRecruitLevelUnit)70 ld b,063+123 71 ld c,083 72 ld de,$0000 + (078*128) + ((074+97)/2) - 128 73 call .SetTotalGemscost74 ret76 .SetTotalGemscost:77 push de78 call SetGemsCostSelectedCreatureInHL79 ld a,h80 or l81 jr z,.Zero 83 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)84 push bc85 call MultiplyHlWithDE86 pop bc88 call SetNumber16BitCastle 89 90 91 ld hl,$4000 + (000*128) + (228/2) - 1289293 pop de94 ld bc,$0000 + (013*256) + (014/2)95 ld a,ButtonsRecruitBlock 96 jp CopyRamToVramCorrectedCastleOverview 98 .SetTotalRubiescost:99 push de100 call SetRubiesCostSelectedCreatureInHL102 ld a,h103 or l104 jr z,.Zero 106 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)107 push bc108 call MultiplyHlWithDE109 pop bc111 call SetNumber16BitCastle 112 113 114 ld hl,$4000 + (000*128) + (242/2) - 128115116 pop de117 ld bc,$0000 + (013*256) + (014/2)118 ld a,ButtonsRecruitBlock 119 jp CopyRamToVramCorrectedCastleOverview 121 .Zero: 122 pop de123 ret125.totalcost:126 ld hl,(SelectedCastleRecruitLevelUnitTotalGoldCost)127 ld b,177128 ld c,071 129 jp SetNumber16BitCastle131.Rubiescost:132 ld a,(SelectedCastleRecruitLevelUnit)133 ld b,063+6 134 ld c,083 135 ld de,$0000 + (078*128) + (052/2) - 128 136 call SetAvailableRecruitArmy.SetRubiescost138.Gemscost:139 ld a,(SelectedCastleRecruitLevelUnit)140 ld b,063+6 141 ld c,083 142 ld de,$0000 + (078*128) + (052/2) - 128 143 jp SetAvailableRecruitArmy.SetGemscost145.cost:146 ld a,(SelectedCastleRecruitLevelUnit)147 ld b,072 148 ld c,071 150 call SetCostSelectedCreatureInHL 151 call SetNumber16BitCastle152 ret153 154.name:155 ld a,(SelectedCastleRecruitLevelUnit)156 ld b,125 157 ld c,038 159 call SetMonsterTableInIXCastleOverview 161 push ix162 pop hl163 ld de,MonsterTableName164 add hl,de165 call SetText167 168 ld a,CastleOverviewCodeBlock 169 call block1234 170 ret172.recruitamount:173 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)174 ld b,177175 ld c,103 176 jp SetNumber16BitCastle178.amountavailable:179 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)180 ld b,090181 ld c,103 182 jp SetNumber16BitCastle184.army:185 ld a,(SelectedCastleRecruitLevelUnit)186 call SetDefendingHeroArmyAndAmount.SetSYSX 187 ld de,050*256 + 120 188 call CopyTransparantImage 189 ret191.SetUnit:192 ld hl,SelectedCastleRecruitLevelUnit193 ld a,b 194 ld (SelectedCastleRecruitUnitWindow),a195 196 cp 6197 ld c,(iy+CastleLevel1Units+00)198 ld (hl),c199 ld e,(iy+CastleLevel1UnitsAvail+00)200 ld d,(iy+CastleLevel1UnitsAvail+01)201 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de202 ret z203 cp 5204 ld c,(iy+CastleLevel1Units+01)205 ld (hl),c206 ld e,(iy+CastleLevel1UnitsAvail+02)207 ld d,(iy+CastleLevel1UnitsAvail+03)208 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de209 ret z210 cp 4211 ld c,(iy+CastleLevel1Units+02)212 ld (hl),c213 ld e,(iy+CastleLevel1UnitsAvail+04)214 ld d,(iy+CastleLevel1UnitsAvail+05)215 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de216 ret z217 cp 3218 ld c,(iy+CastleLevel1Units+03)219 ld (hl),c220 ld e,(iy+CastleLevel1UnitsAvail+06)221 ld d,(iy+CastleLevel1UnitsAvail+07)222 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de223 ret z224 cp 2225 ld c,(iy+CastleLevel1Units+04)226 ld (hl),c227 ld e,(iy+CastleLevel1UnitsAvail+08)228 ld d,(iy+CastleLevel1UnitsAvail+09)229 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de230 ret z231232 ld c,(iy+CastleLevel1Units+05)233 ld (hl),c234 ld e,(iy+CastleLevel1UnitsAvail+10)235 ld d,(iy+CastleLevel1UnitsAvail+11)236 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de237238 ret251DisplayMonsterNames:252 ld a,(StartingTownLevel1Unit)253 ld b,058+(0*48) 254 ld c,086 255 call .SetMonsterName256 ld a,(StartingTownLevel2Unit)257 ld b,062+(1*48) 258 ld c,086 259 call .SetMonsterName260 ld a,(StartingTownLevel3Unit)261 ld b,066+(2*48) 262 ld c,086 263 call .SetMonsterName265 ld a,(StartingTownLevel4Unit)266 ld b,058+(0*48) 267 ld c,130 268 call .SetMonsterName269 ld a,(StartingTownLevel5Unit)270 ld b,062+(1*48) 271 ld c,130 272 call .SetMonsterName273 ld a,(StartingTownLevel6Unit)274 ld b,066+(2*48) 275 ld c,130 279 .SetMonsterName:280 call SetMonsterTableInIXCastleOverview 281 push ix282 pop hl283 ld de,MonsterTableName284 add hl,de286 call CenterHeroNameHasGainedALevel287 jp SetText291SetAvailableRecruitArmy:292 call SetCastleOverViewFontPage0Y212 294 call .army295 call .NamesAndAmount296 call .cost297 call .Gemscost298 call .Rubiescost299 call .attack300 call .defense301 call .HP302 call .SetBrownRecruitBarIf0UnitsAvailable303 call .SetInactiveWindowIfUnavailable304 ret306.SetBrownRecruitBarIf0UnitsAvailable:307 ld a,(iy+CastleLevel1UnitsAvail+00)308 or (iy+CastleLevel1UnitsAvail+01)309 call z,.Level1Units0Available311 ld a,(iy+CastleLevel2UnitsAvail+00)312 or (iy+CastleLevel2UnitsAvail+01)313 call z,.Level2Units0Available315 ld a,(iy+CastleLevel3UnitsAvail+00)316 or (iy+CastleLevel3UnitsAvail+01)317 call z,.Level3Units0Available319 ld a,(iy+CastleLevel4UnitsAvail+00)320 or (iy+CastleLevel4UnitsAvail+01)321 call z,.Level4Units0Available323 ld a,(iy+CastleLevel5UnitsAvail+00)324 or (iy+CastleLevel5UnitsAvail+01)325 call z,.Level5Units0Available327 ld a,(iy+CastleLevel6UnitsAvail+00)328 or (iy+CastleLevel6UnitsAvail+01)329 call z,.Level6Units0Available330 ret332 .Level1Units0Available:333 ld hl,$4000 + (063*128) + (162/2) - 128334 ld de,$0000 + ((034+30)*128) + ((005+001)/2) - 128 335 ld bc,$0000 + (009*256) + (076/2)336 ld a,ButtonsRecruitBlock 337 call CopyRamToVramCorrectedCastleOverview 338 xor a 339 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 340 ret341 342 .Level2Units0Available:343 ld hl,$4000 + (063*128) + (162/2) - 128344 ld de,$0000 + ((034+30)*128) + ((089+001)/2) - 128 345 ld bc,$0000 + (009*256) + (076/2)346 ld a,ButtonsRecruitBlock 347 call CopyRamToVramCorrectedCastleOverview 348 xor a 349 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 350 ret352 .Level3Units0Available:353 ld hl,$4000 + (063*128) + (162/2) - 128354 ld de,$0000 + ((034+30)*128) + ((173+001)/2) - 128 355 ld bc,$0000 + (009*256) + (076/2)356 ld a,ButtonsRecruitBlock 357 call CopyRamToVramCorrectedCastleOverview 358 xor a 359 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 360 ret362 .Level4Units0Available:363 ld hl,$4000 + (063*128) + (162/2) - 128364 ld de,$0000 + ((090+30)*128) + ((005+001)/2) - 128 365 ld bc,$0000 + (009*256) + (076/2)366 ld a,ButtonsRecruitBlock 367 call CopyRamToVramCorrectedCastleOverview 368 xor a 369 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 370 ret372 .Level5Units0Available:373 ld hl,$4000 + (063*128) + (162/2) - 128374 ld de,$0000 + ((090+30)*128) + ((089+001)/2) - 128 375 ld bc,$0000 + (009*256) + (076/2)376 ld a,ButtonsRecruitBlock 377 call CopyRamToVramCorrectedCastleOverview 378 xor a 379 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 380 ret382 .Level6Units0Available:383 ld hl,$4000 + (063*128) + (162/2) - 128384 ld de,$0000 + ((090+30)*128) + ((173+001)/2) - 128 385 ld bc,$0000 + (009*256) + (076/2)386 ld a,ButtonsRecruitBlock 387 call CopyRamToVramCorrectedCastleOverview 388 xor a 389 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 390 ret392 393.SetInactiveWindowIfUnavailable:394 ld a,(iy+CastleBarracksLevel+00)395 cp 6396 ret z397 cp 5398 jr z,.Level6UnitsUnavailable399 cp 4400 jr z,.Level5UnitsUnavailable401 cp 3402 jr z,.Level4UnitsUnavailable403 cp 2404 jr z,.Level3UnitsUnavailable406 .Level2UnitsUnavailable:407 ld hl,$4000 + (000*128) + (076/2) - 128408 ld de,$0000 + ((034-09)*128) + ((089+001)/2) - 128 409 ld bc,$0000 + (047*256) + (076/2)410 ld a,ButtonsRecruitBlock 411 call CopyRamToVramCorrectedCastleOverview 412 xor a 413 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 415 .Level3UnitsUnavailable:416 ld hl,$4000 + (000*128) + (076/2) - 128417 ld de,$0000 + ((034-09)*128) + ((173+001)/2) - 128 418 ld bc,$0000 + (047*256) + (076/2)419 ld a,ButtonsRecruitBlock 420 call CopyRamToVramCorrectedCastleOverview 421 xor a 422 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 424 .Level4UnitsUnavailable:425 ld hl,$4000 + (000*128) + (076/2) - 128426 ld de,$0000 + ((090-09)*128) + ((005+001)/2) - 128 427 ld bc,$0000 + (047*256) + (076/2)428 ld a,ButtonsRecruitBlock 429 call CopyRamToVramCorrectedCastleOverview 430 xor a 431 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 433 .Level5UnitsUnavailable:434 ld hl,$4000 + (000*128) + (076/2) - 128435 ld de,$0000 + ((090-09)*128) + ((089+001)/2) - 128 436 ld bc,$0000 + (047*256) + (076/2)437 ld a,ButtonsRecruitBlock 438 call CopyRamToVramCorrectedCastleOverview 439 xor a 440 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 442 .Level6UnitsUnavailable:443 ld hl,$4000 + (000*128) + (076/2) - 128444 ld de,$0000 + ((090-09)*128) + ((173+001)/2) - 128 445 ld bc,$0000 + (047*256) + (076/2)446 ld a,ButtonsRecruitBlock 447 call CopyRamToVramCorrectedCastleOverview 448 xor a 449 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 450 ret452.Rubiescost:453 ld a,(iy+CastleLevel1Units+00)454 ld b,005+45 455 ld c,043 456 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 457 call .SetRubiescost459 ld a,(iy+CastleLevel1Units+01)460 ld b,089+45 461 ld c,043 462 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 463 call .SetRubiescost465 ld a,(iy+CastleLevel1Units+02)466 ld b,173+45 467 ld c,043 468 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 469 call .SetRubiescost471 ld a,(iy+CastleLevel1Units+03)472 ld b,005+45 473 ld c,099 474 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 475 call .SetRubiescost477 ld a,(iy+CastleLevel1Units+04)478 ld b,089+45 479 ld c,099 480 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 481 call .SetRubiescost483 ld a,(iy+CastleLevel1Units+05)484 ld b,173+45 485 ld c,099 486 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 487 call .SetRubiescost488 ret490 .SetRubiescost:491 push de492 call SetRubiesCostSelectedCreatureInHL493 ld a,h494 or l495 jr z,.Zero 497 call SetNumber16BitCastle498 499 500 ld hl,$4000 + (000*128) + (242/2) - 128501502 pop de503 ld bc,$0000 + (013*256) + (014/2)504 ld a,ButtonsRecruitBlock 505 jp CopyRamToVramCorrectedCastleOverview 507.Gemscost:508 ld a,(iy+CastleLevel1Units+00)509 ld b,005+45 510 ld c,043 511 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 512 call .SetGemscost514 ld a,(iy+CastleLevel1Units+01)515 ld b,089+45 516 ld c,043 517 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 518 call .SetGemscost520 ld a,(iy+CastleLevel1Units+02)521 ld b,173+45 522 ld c,043 523 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 524 call .SetGemscost526 ld a,(iy+CastleLevel1Units+03)527 ld b,005+45 528 ld c,099 529 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 530 call .SetGemscost532 ld a,(iy+CastleLevel1Units+04)533 ld b,089+45 534 ld c,099 535 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 536 call .SetGemscost538 ld a,(iy+CastleLevel1Units+05)539 ld b,173+45 540 ld c,099 541 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 542 call .SetGemscost543 ret545 .SetGemscost:546 push de547 call SetGemsCostSelectedCreatureInHL548 ld a,h549 or l550 jr z,.Zero 552 call SetNumber16BitCastle553 554 555 ld hl,$4000 + (000*128) + (228/2) - 128556557 pop de558 ld bc,$0000 + (013*256) + (014/2)559 ld a,ButtonsRecruitBlock 560 jp CopyRamToVramCorrectedCastleOverview 562 .Zero: 563 pop de564 ret567 .attack:568 ld a,(iy+CastleLevel1Units+00)569 ld b,083-14 570 ld c,038 571 call .SetAttack573 ld a,(iy+CastleLevel1Units+01)574 ld b,167-14 575 ld c,038 576 call .SetAttack578 ld a,(iy+CastleLevel1Units+02)579 ld b,251-14 580 ld c,038 581 call .SetAttack583 ld a,(iy+CastleLevel1Units+03)584 ld b,083-14 585 ld c,038+56 586 call .SetAttack588 ld a,(iy+CastleLevel1Units+04)589 ld b,167-14 590 ld c,038+56 591 call .SetAttack593 ld a,(iy+CastleLevel1Units+05)594 ld b,251-14 595 ld c,038+56 596 call .SetAttack 597 ret599 .SetAttack:600 call SetAttackSelectedCreatureInHL 601 call SetNumber16BitCastle602 ret603 604 .defense:605 ld a,(iy+CastleLevel1Units+00)606 ld b,083-14 607 ld c,047 608 call .SetDefense610 ld a,(iy+CastleLevel1Units+01)611 ld b,167-14 612 ld c,047 613 call .SetDefense615 ld a,(iy+CastleLevel1Units+02)616 ld b,251-14 617 ld c,047 618 call .SetDefense620 ld a,(iy+CastleLevel1Units+03)621 ld b,083-14 622 ld c,047+56 623 call .SetDefense625 ld a,(iy+CastleLevel1Units+04)626 ld b,167-14 627 ld c,047+56 628 call .SetDefense630 ld a,(iy+CastleLevel1Units+05)631 ld b,251-14 632 ld c,047+56 633 call .SetDefense 634 ret636 .SetDefense:637 call SetDefenseSelectedCreatureInHL 638 call SetNumber16BitCastle639 ret641 .HP:642 ld a,(iy+CastleLevel1Units+00)643 ld b,083-14 644 ld c,056 645 call .SetHP647 ld a,(iy+CastleLevel1Units+01)648 ld b,167-14 649 ld c,056 650 call .SetHP652 ld a,(iy+CastleLevel1Units+02)653 ld b,251-14 654 ld c,056 655 call .SetHP657 ld a,(iy+CastleLevel1Units+03)658 ld b,083-14 659 ld c,056+56 660 call .SetHP662 ld a,(iy+CastleLevel1Units+04)663 ld b,167-14 664 ld c,056+56 665 call .SetHP667 ld a,(iy+CastleLevel1Units+05)668 ld b,251-14 669 ld c,056+56 670 call .SetHP 671 ret673 .SetHP:674 call SetHPSelectedCreatureInHL 675 call SetNumber16BitCastle676 ret677 678 .cost:679 ld a,(iy+CastleLevel1Units+00)680 ld b,005+023 681 ld c,055 682 call .SetCost684 ld a,(iy+CastleLevel1Units+01)685 ld b,089+023 686 ld c,055 687 call .SetCost689 ld a,(iy+CastleLevel1Units+02)690 ld b,173+023 691 ld c,055 692 call .SetCost694 ld a,(iy+CastleLevel1Units+03)695 ld b,005+023 696 ld c,111 697 call .SetCost699 ld a,(iy+CastleLevel1Units+04)700 ld b,089+023 701 ld c,111 702 call .SetCost704 ld a,(iy+CastleLevel1Units+05)705 ld b,173+023 706 ld c,111 707 call .SetCost708 ret710 .SetCost:711 call SetCostSelectedCreatureInHL 713 call SetNumber16BitCastle714 ret715 716 .setname:717 ret718 719 .NamesAndAmount:720 ld a,(iy+CastleLevel1Units+00)721 ld b,007 722 ld c,027 723 ld l,(iy+CastleLevel1UnitsAvail+00)724 ld h,(iy+CastleLevel1UnitsAvail+01) 725 call .SetNameAndAmount727 ld a,(iy+CastleLevel1Units+01)728 ld b,091 729 ld c,027 730 ld l,(iy+CastleLevel1UnitsAvail+02)731 ld h,(iy+CastleLevel1UnitsAvail+03) 732 call .SetNameAndAmount734 ld a,(iy+CastleLevel1Units+02)735 ld b,175 736 ld c,027 737 ld l,(iy+CastleLevel1UnitsAvail+04)738 ld h,(iy+CastleLevel1UnitsAvail+05) 739 call .SetNameAndAmount741 ld a,(iy+CastleLevel1Units+03)742 ld b,007 743 ld c,083 744 ld l,(iy+CastleLevel1UnitsAvail+06)745 ld h,(iy+CastleLevel1UnitsAvail+07)746 call .SetNameAndAmount748 ld a,(iy+CastleLevel1Units+04)749 ld b,091 750 ld c,083 751 ld l,(iy+CastleLevel1UnitsAvail+08)752 ld h,(iy+CastleLevel1UnitsAvail+09)753 call .SetNameAndAmount755 ld a,(iy+CastleLevel1Units+05)756 ld b,175 757 ld c,083 758 ld l,(iy+CastleLevel1UnitsAvail+10)759 ld h,(iy+CastleLevel1UnitsAvail+11)760 call .SetNameAndAmount761 ret763 .SetNameAndAmount:764 push hl 766 call SetMonsterTableInIXCastleOverview 768 push ix769 pop hl770 ld de,MonsterTableName771 add hl,de773 push bc774 call SetText775 pop bc777 ld a,(PutLetter+dx) 778 ld b,a779 780 ld hl,.TextSemiColon781 push bc782 call SetText783 pop bc785 ld a,(PutLetter+dx) 786 add a,3787 ld b,a788 pop hl 789 call SetNumber16BitCastle791 792 ld a,CastleOverviewCodeBlock 793 call block1234 794 ret796.TextSemiColon: db ":",255797 798.army:799 ld a,(iy+CastleLevel1Units) 800 call SetDefendingHeroArmyAndAmount.SetSYSX 801 ld de,DYDXUnit1Window 802 call CopyTransparantImage 804 ld a,(iy+CastleLevel2Units) 805 call SetDefendingHeroArmyAndAmount.SetSYSX 806 ld de,DYDXUnit2Window 807 call CopyTransparantImage 809 ld a,(iy+CastleLevel3Units) 810 call SetDefendingHeroArmyAndAmount.SetSYSX 811 ld de,DYDXUnit3Window 812 call CopyTransparantImage 814 ld a,(iy+CastleLevel4Units) 815 call SetDefendingHeroArmyAndAmount.SetSYSX 816 ld de,DYDXUnit4Window 817 call CopyTransparantImage 819 ld a,(iy+CastleLevel5Units) 820 call SetDefendingHeroArmyAndAmount.SetSYSX 821 ld de,DYDXUnit5Window 822 call CopyTransparantImage 824 ld a,(iy+CastleLevel6Units) 825 call SetDefendingHeroArmyAndAmount.SetSYSX 826 ld de,DYDXUnit6Window 827 call CopyTransparantImage 828 ret830DYDXUnit1Window: equ 038*256 + 008+1 831DYDXUnit2Window: equ 038*256 + 092+1 832DYDXUnit3Window: equ 038*256 + 176+1 833DYDXUnit4Window: equ 094*256 + 008+1 834DYDXUnit5Window: equ 094*256 + 092+1 835DYDXUnit6Window: equ 094*256 + 176+1 837SetCostSelectedCreatureInHL: 838 call SetMonsterTableInIXCastleOverview 839 ld h,0840 ld l,(ix+MonsterTableCostGold)842 add hl,hl 843 push hl844 add hl,hl 845 add hl,hl 846 pop de847 add hl,de 849 850 ld a,CastleOverviewCodeBlock 851 call block1234 852 ret854SetGemsCostSelectedCreatureInHL:855 call SetMonsterTableInIXCastleOverview 856 ld h,0857 ld l,(ix+MonsterTableCostGems)859 res 7,l 860 res 6,l861 res 5,l863 864 ld a,CastleOverviewCodeBlock 865 call block1234 866 ret868SetRubiesCostSelectedCreatureInHL:869 call SetMonsterTableInIXCastleOverview 870 ld h,0871 ld l,(ix+MonsterTableCostRubies)873 874 ld a,CastleOverviewCodeBlock 875 call block1234 876 ret878SetHPSelectedCreatureInHL:879 call SetMonsterTableInIXCastleOverview 880 ld h,0881 ld l,(ix+MonsterTableHp)883 884 ld a,CastleOverviewCodeBlock 885 call block1234 886 ret888SetAttackSelectedCreatureInHL:889 call SetMonsterTableInIXCastleOverview 890 ld h,0891 ld l,(ix+MonsterTableAttack)893 894 ld a,CastleOverviewCodeBlock 895 call block1234 896 ret898SetDefenseSelectedCreatureInHL:899 call SetMonsterTableInIXCastleOverview 900 ld h,0901 ld l,(ix+MonsterTableDefense)903 904 ld a,CastleOverviewCodeBlock 905 call block1234 906 ret908SetGrowthSelectedCreatureInHL:909 call SetMonsterTableInIXCastleOverview 910 ld h,0911 ld l,(ix+MonsterTableGrowth)913 914 ld a,CastleOverviewCodeBlock 915 call block1234 916 ret918SetMonsterTableInIXCastleOverview: 919 ld h,0920 ld l,a 921 922 ld a,MonsterAddressesForBattle1Block923 call block34 925 push bc926 ld ix,Monster001Table-LengthMonsterAddressesTable 927 ld de,LengthMonsterAddressesTable928 call MultiplyHlWithDE 929 push hl930 pop de931 add ix,de 932 pop bc933 ret935SettavernHeroSkill:936 ld a,HeroOverviewCodeBlock 937 call block34 939 ld a,(ix+TavernHero1)940 ld b,004+04 941 ld c,043+44 942 call .SetHeroSkill944 ld a,(ix+TavernHero2)945 ld b,090+04 946 ld c,043+44 947 call .SetHeroSkill949 ld a,(ix+TavernHero3)950 ld b,176+04 951 ld c,043+44 952 call .SetHeroSkill954 ld a,CastleOverviewCodeBlock 955 call block1234 956 ret958 .SetHeroSkill:959 or a960 ret z962 push ix 963 push bc964 ld b,a965 ld ix,HeroAddressesAdol-heroAddressesLenght966 ld de,heroAddressesLenght967 .loop:968 add ix,de969 djnz .loop970 pop bc971 972 ld a,(ix+HeroInfoSkill) 973 ld l,a974 ld h,0975 add hl,hl 976 add hl,hl 977 add hl,hl 978 push hl979 add hl,hl 980 add hl,hl 981 add hl,hl 982 add hl,hl 983 pop de984 add hl,de 985 ld de,SkillEmpty+$4000986 add hl,de988 call SetText 989 pop ix 990 ret992SetTextBuildingWhenClicked:993 ld a,(SetTextBuilding)994 dec a995 ret z996 ld (SetTextBuilding),a998 call ClearTextBuildWindow999 call SetSingleBuildButtonColor1000 call SetCastleOverViewFontPage0Y212 1002 ld hl,(PutWhichBuildText)1003 ld b,1821004 ld c,0471005 jp SetText100810161024SetTradingHeroesInventoryIcons:1025 ld ix,(plxcurrentheroAddress)1026 ld de,9 1027 add ix,de1029 1030 call .SetIconHLBCandA 1031 ld de,$0000 + (076*128) + (036/2)1032 call CopyRamToVramCorrectedCastleOverview 1034 call .SetIconHLBCandA 1035 ld de,$0000 + (076*128) + (058/2)1036 call CopyRamToVramCorrectedCastleOverview 1038 call .SetIconHLBCandA 1039 ld de,$0000 + (076*128) + (080/2)1040 call CopyRamToVramCorrectedCastleOverview 1042 call .SetIconHLBCandA 1043 ld de,$0000 + (076*128) + (102/2)1044 call CopyRamToVramCorrectedCastleOverview 1046 call .SetIconHLBCandA 1047 ld de,$0000 + (076*128) + (124/2)1048 call CopyRamToVramCorrectedCastleOverview 1050 call .SetIconHLBCandA 1051 ld de,$0000 + (076*128) + (146/2)1052 call CopyRamToVramCorrectedCastleOverview 1054 ld ix,(HeroWeTradeWith) 1055 ld de,9 1056 add ix,de1058 1059 call .SetIconHLBCandA 1060 ld de,$0000 + (140*128) + (036/2)1061 call CopyRamToVramCorrectedCastleOverview 1063 call .SetIconHLBCandA 1064 ld de,$0000 + (140*128) + (058/2)1065 call CopyRamToVramCorrectedCastleOverview 1067 call .SetIconHLBCandA 1068 ld de,$0000 + (140*128) + (080/2)1069 call CopyRamToVramCorrectedCastleOverview 1071 call .SetIconHLBCandA 1072 ld de,$0000 + (140*128) + (102/2)1073 call CopyRamToVramCorrectedCastleOverview 1075 call .SetIconHLBCandA 1076 ld de,$0000 + (140*128) + (124/2)1077 call CopyRamToVramCorrectedCastleOverview 1079 call .SetIconHLBCandA 1080 ld de,$0000 + (140*128) + (146/2)1081 call CopyRamToVramCorrectedCastleOverview 1082 ret1084 .SetIconHLBCandA:1085 ld a,(ix+HeroInventory) 1086 call .CheckScrollIcon 1087 add a,a 1088 add a,a 1089 ld iy,.InventoryIconTableSYSX1090 ld d,01091 ld e,a1092 add iy,de1093 ld l,(iy)1094 ld h,(iy+1)1095 inc ix1096 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1097 ld a,InventoryGraphicsBlock1098 ret1099 1100 .CheckScrollIcon:1101 cp ScrollIconNR1102 ret c1103 ld a,ScrollIconNR1104 ret 1106.InventoryIconTableSYSX: 1107 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 1108 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 1281109 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 1110 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 1281111 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 1112 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 1281113 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 1114 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 1281115 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 1116 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 1281118 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 1119 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 1281120 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 1121 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 1281122 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 1123 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 1281124 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 1125 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 1281126 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 1127 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 1281129 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 1130 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 1281131 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 1132 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 1281133 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 1134 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 1281135 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 1136 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 1281137 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 1138 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 1281140 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 1141 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 1281142 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 1143 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 1281144 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 1145 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 1281146 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 1147 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 1281148 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 1149 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 1281151 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 1152 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 1281153 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 1154 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 1281155 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 1156 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 1281157 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 1158 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 1281159 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 1160 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 1281162 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 1163 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 1281164 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 1165 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 1281166 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 1167 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 1281168 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 1169 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 1281170 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 1171 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 1281175 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 1176 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 1281177 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 1178 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 1281179 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 1180 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 1281181 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 1182 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 1281183 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 1184 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 1281186 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 1187 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 1281188 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 1189 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 1281190 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 1191 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 1281192 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 1193 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 1281194 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 1195 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 1281197 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 1198 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 1281199 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 1200 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 1281201 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 1202 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 1281203 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 1204 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 1281205 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 1206 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 1281208 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 1209 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 1281211 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 1212 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 1281218UpdateHudCode:1219 ld a,31220 ld (SetHeroArmyAndStatusInHud?),a 1221 call SetHeroArmyAndStatusInHud 1222 ret1224HudCode:1225 call checkcurrentplayerhuman 1226 ret z1228 call SetHeroArmyAndStatusInHud 1229 call SetCastlesInWindows 1230 call SetResources1232 1235 call .CheckButtonClicked 1237 call checkcurrentplayerhuman 1238 ret z1240 call SetHeroesInWindows 1242 call SetManaAndMovementBars 1244 ld ix,GenericButtonTable31245 call SetGenericButtons 1247 ret1249.CheckButtonClicked: 1250 ld a,(WhichHudButtonClicked?)1251 or a1252 ret z1253 ld b,a1254 xor a1255 ld (WhichHudButtonClicked?),a1257 ld a,b1258 cp 121259 jp z,CheckHeroArrowUp1260 cp 111261 jp z,FirstHeroWindowClicked1262 cp 101263 jp z,SecondHeroWindowClicked1264 cp 091265 jp z,ThirdHeroWindowClicked1266 cp 081267 jp z,CheckHeroArrowDown1269 cp 071270 jp z,CheckCastleArrowUp1271 cp 061272 jp z,FirstCastleWindowClicked1273 cp 051274 jp z,SecondCastleWindowClicked1275 cp 041276 jp z,ThirdCastleWindowClicked1277 cp 031278 jp z,CheckCastleArrowDown1279 cp 021280 jp z,EndTurn1281 cp 011282 jp z,DiskMenu1283 ret1285DiskMenu:1286 ld a,31287 ld (DiskMenuClicked?),a 1288 ret1290EndTurn:1292130113051309131313171323 ld a,21324 ld (DisplayStartOfTurnMessage?),a1326 call SetHero1ForCurrentPlayerInIX1328 1329 ld b,amountofheroesperplayer 1330 .loop:1332 1333 ld l,(ix+HeroTotalMana+0)1334 ld h,(ix+HeroTotalMana+1) 1335 ld e,(ix+HeroMana+0)1336 ld d,(ix+HeroMana+1)1337 or a1338 sbc hl,de1339 jr c,.EndSetMana1340 1341 ld l,(ix+HeroMana+0)1342 ld h,(ix+HeroMana+1)1343 ld d,01344 ld e,(ix+HeroManarec+0)1345 add hl,de 1346 ld e,(ix+HeroTotalMana+0)1347 ld d,(ix+HeroTotalMana+1) 1348 sbc hl,de1349 jp c,.nooverflowmana1350 ld l,(ix+HeroTotalMana+0)1351 ld h,(ix+HeroTotalMana+1) 1352 jr .SetMana1353 .nooverflowmana:1354 add hl,de1355 .SetMana:1356 ld (ix+HeroMana+0),l1357 ld (ix+HeroMana+1),h1358 .EndSetMana:1360 ld a,(ix+HeroTotalMove) 1361 ld (ix+HeroMove),a 1362 ld de,lenghtherotable1363 add ix,de 1364 djnz .loop1366 call SetNextPlayersTurnAndCheckPlayerEliminated1367 1368 ld hl,(Date) 1369 ld a,h1370 or l1371 jr z,.EndCheckNoIncomeDay1 1372 call AddCastlesIncomeToPlayer 1373 call AddCastlesSawmillResources 1374 call AddCastlesMineResources 1375 call AddEstatesIncomeToPlayer 1376 call AddKingsGarmentIncomeToPlayer 1377 .EndCheckNoIncomeDay1:1379 call ActivateFirstActiveHeroForCurrentPlayer1380 xor a1381 ld (SetHeroOverViewMenu?),a 1382 ret1384IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn:1385 ld hl,(Date)1386 inc hl1387 ld (Date),hl1388 call AddCreaturesToPools 1389 call SetAndRotateTavernHeroes 1390 call RefillManaHeroesInCastles 1391 jp ClearAlreadyBuiltThisTurnCastles1393SetNextPlayersTurnAndCheckPlayerEliminated:1394 call SetNextPlayersTurn1396 ld a,(whichplayernowplaying?) 1397 dec a1398 call z,IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn1400 ld a,(whichplayernowplaying?) 1401 ld b,a1402 dec a1403 ld hl,pl1hero1y+HeroStatus 1404 jr z,.PlayerFound1405 dec a1406 ld hl,pl2hero1y+HeroStatus 1407 jr z,.PlayerFound1408 dec a1409 ld hl,pl3hero1y+HeroStatus 1410 jr z,.PlayerFound14111412 ld hl,pl4hero1y+HeroStatus 1415 .PlayerFound:1416 ld a,(hl) 1417 inc a 1418 ret nz1419 1420 ld a,(Castle1+CastlePlayer)1421 cp b1422 ret z1423 ld a,(Castle2+CastlePlayer)1424 cp b1425 ret z1426 ld a,(Castle3+CastlePlayer)1427 cp b1428 ret z1429 ld a,(Castle4+CastlePlayer)1430 cp b1431 ret z1432 1433 jr SetNextPlayersTurnAndCheckPlayerEliminated1435AddCreaturesToPools: 1437 ld bc,(Date)1438 ld de,7 1439 call DivideBCbyDE 1440 ld a,h 1441 or l1442 ret nz1444 ld ix,Castle11445 call .AddCreatures1446 ld ix,Castle21447 call .AddCreatures1448 ld ix,Castle31449 call .AddCreatures1450 ld ix,Castle41451 call .AddCreatures1452 ret1453 1454 .AddCreatures:1455 ld a,(ix+CastleBarracksLevel)1456 or a1457 ret z1458 dec a1459 jp z,.BarracksLevel11460 dec a1461 jp z,.BarracksLevel21462 dec a1463 jp z,.BarracksLevel31464 dec a1465 jp z,.BarracksLevel41466 dec a1467 jp z,.BarracksLevel51469 .BarracksLevel6:1470 ld a,(ix+CastleLevel6Units)1471 push ix1472 call SetGrowthSelectedCreatureInHL 1473 pop ix 1474 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1475 ld e,(ix+CastleLevel6UnitsAvail)1476 ld d,(ix+CastleLevel6UnitsAvail+1)1477 add hl,de1478 ld (ix+CastleLevel6UnitsAvail),l1479 ld (ix+CastleLevel6UnitsAvail+1),h1481 .BarracksLevel5:1482 ld a,(ix+CastleLevel5Units)1483 push ix1484 call SetGrowthSelectedCreatureInHL 1485 pop ix1486 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1487 ld e,(ix+CastleLevel5UnitsAvail)1488 ld d,(ix+CastleLevel5UnitsAvail+1)1489 add hl,de1490 ld (ix+CastleLevel5UnitsAvail),l1491 ld (ix+CastleLevel5UnitsAvail+1),h1493 .BarracksLevel4:1494 ld a,(ix+CastleLevel4Units)1495 push ix1496 call SetGrowthSelectedCreatureInHL 1497 pop ix1498 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1499 ld e,(ix+CastleLevel4UnitsAvail)1500 ld d,(ix+CastleLevel4UnitsAvail+1)1501 add hl,de1502 ld (ix+CastleLevel4UnitsAvail),l1503 ld (ix+CastleLevel4UnitsAvail+1),h1505 .BarracksLevel3:1506 ld a,(ix+CastleLevel3Units)1507 push ix1508 call SetGrowthSelectedCreatureInHL 1509 pop ix1510 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1511 ld e,(ix+CastleLevel3UnitsAvail)1512 ld d,(ix+CastleLevel3UnitsAvail+1)1513 add hl,de1514 ld (ix+CastleLevel3UnitsAvail),l1515 ld (ix+CastleLevel3UnitsAvail+1),h1517 .BarracksLevel2:1518 ld a,(ix+CastleLevel2Units)1519 push ix1520 call SetGrowthSelectedCreatureInHL 1521 pop ix1522 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1523 ld e,(ix+CastleLevel2UnitsAvail)1524 ld d,(ix+CastleLevel2UnitsAvail+1)1525 add hl,de1526 ld (ix+CastleLevel2UnitsAvail),l1527 ld (ix+CastleLevel2UnitsAvail+1),h1529 .BarracksLevel1:1530 ld a,(ix+CastleLevel1Units)1531 push ix1532 call SetGrowthSelectedCreatureInHL 1533 pop ix1534 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1535 ld e,(ix+CastleLevel1UnitsAvail)1536 ld d,(ix+CastleLevel1UnitsAvail+1)1537 add hl,de1538 ld (ix+CastleLevel1UnitsAvail),l1539 ld (ix+CastleLevel1UnitsAvail+1),h1540 ret1542.Apply50or100PercentAddedGrowthForCitadelOrCapitol:1543 ld a,(ix+CastleLevel)1544 cp 4 1545 ld de,02 1546 jp z,SetChestText.ApplyPercentBasedBoost1547 cp 5 1548 ld de,01 1549 jp nc,SetChestText.ApplyPercentBasedBoost1550 ret1552SetManaAndMovementToMax:1553 call SetHeroMaxMovementPoints.IxAlreadySet1554 ld (ix+HeroMove),a 1556 ld de,ItemIntelligencePointsTable1557 push ix1558 call SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 1559 pop ix1560 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1562 ld l,(ix+HeroTotalMana+0)1563 ld h,(ix+HeroTotalMana+1)1564 ld (ix+HeroMana+0),l1565 ld (ix+HeroMana+1),h1566 ret1568ClearAlreadyBuiltThisTurnCastles:1569 xor a1570 ld (Castle1+AlreadyBuiltThisTurn?),a1571 ld (Castle2+AlreadyBuiltThisTurn?),a1572 ld (Castle3+AlreadyBuiltThisTurn?),a1573 ld (Castle4+AlreadyBuiltThisTurn?),a1574 ret1577RefillManaHeroesInCastles:1578 ld ix,pl1hero1y1579 call .RefillThisPlayer1580 ld ix,pl2hero1y1581 call .RefillThisPlayer1582 ld ix,pl3hero1y1583 call .RefillThisPlayer1584 ld ix,pl4hero1y15851587 .RefillThisPlayer:1588 ld b,amountofheroesperplayer1589 ld de,lenghtherotable1590 1591 .loop:1592 ld a,(ix+HeroStatus) 1593 cp 21594 jr z,.Refill1595 cp 2541596 jr z,.Refill1597 add ix,de1598 djnz .loop 1599 ret1601 .Refill:1602 ld l,(ix+HeroTotalMana+0)1603 ld h,(ix+HeroTotalMana+1) 1604 ld (ix+HeroMana+0),l1605 ld (ix+HeroMana+1),h1606 djnz .loop 1607 ret1609SetAndRotateTavernHeroes: 1610 ld hl,TavernHeroesPlayer1+11611 ld de,TavernHeroesPlayer11612 ld bc,TavernHeroesPlayer1+TavernHeroTableLenght-21613 call .RotateForThisPlayer 1614 ld hl,TavernHeroesPlayer2+11615 ld de,TavernHeroesPlayer21616 ld bc,TavernHeroesPlayer2+TavernHeroTableLenght-21617 call .RotateForThisPlayer 1618 ld hl,TavernHeroesPlayer3+11619 ld de,TavernHeroesPlayer31620 ld bc,TavernHeroesPlayer3+TavernHeroTableLenght-21621 call .RotateForThisPlayer 1622 ld hl,TavernHeroesPlayer4+11623 ld de,TavernHeroesPlayer41624 ld bc,TavernHeroesPlayer4+TavernHeroTableLenght-21625 call .RotateForThisPlayer 1626 ret1628 .RotateForThisPlayer:1629 push bc1630 ld a,(de) 1631 ex af,af' 1632 ld bc,TavernHeroTableLenght-11633 ldir1634 1635 1636 pop hl1637 .loop:1638 ld a,(hl)1639 or a1640 jr nz,.HeroFound1641 dec hl1642 jr .loop1644 .HeroFound:1645 inc hl1646 ex af,af' 1647 ld (hl),a1648 ret1650AddKingsGarmentIncomeToPlayer:1651 call SetHero1ForCurrentPlayerInIX1653 ld b,amountofheroesperplayer1654 .loop:1655 push ix1656 call .CheckSkill1657 pop ix1658 1659 ld de,lenghtherotable1660 add ix,de 1661 djnz .loop1662 ret1663 1664 .CheckSkill:1665 ld a,(ix+HeroStatus) 1666 cp 2551667 ret z 1668 ld a,(ix+Heroy)1669 cp 255 1670 ret z 1672 ld a,(ix+HeroInventory+8) 1673 cp 040 1674 ret nz1676 call SetResourcesCurrentPlayerinIX 1677 1678 ld l,(ix+0)1679 ld h,(ix+1)1680 ld de,1251681 add hl,de1682 ret c1683 ld (ix+0),l1684 ld (ix+1),h1685 ret1687AddEstatesIncomeToPlayer: 1688 call SetHero1ForCurrentPlayerInIX1690 ld c,amountofheroesperplayer1691 .loop:1692 ld b,6 1693 push ix1694 call .CheckSkill1695 pop ix1696 1697 ld de,lenghtherotable1698 add ix,de 1699 dec c1700 jr nz,.loop1701 ret1702 1703 .CheckSkill:1704 ld a,(ix+HeroStatus) 1705 cp 2551706 ret z 1707 ld a,(ix+Heroy)1708 cp 255 1709 ret z 1711 ld a,(ix+HeroSkills)1712 cp 131713 ld de,1251714 jr z,.EstatesFound 1715 cp 141716 ld de,2501717 jr z,.EstatesFound 1718 cp 151719 ld de,5001720 jr z,.EstatesFound 1722 inc ix 1723 djnz .CheckSkill1724 ret1726.EstatesFound:1727 call SetResourcesCurrentPlayerinIX 1728 1729 ld l,(ix+0)1730 ld h,(ix+1)1731 add hl,de1732 ret c1733 ld (ix+0),l1734 ld (ix+1),h1735 ret1737AddCastlesMineResources: 1738 call SetResourcesCurrentPlayerinIX 1740 ld iy,Castle11741 call .CheckCastle1742 ld iy,Castle21743 call .CheckCastle1744 ld iy,Castle31745 call .CheckCastle1746 ld iy,Castle41747 call .CheckCastle1748 ret1750 .CheckCastle:1751 ld a,(whichplayernowplaying?) 1752 cp (iy+CastlePlayer) 1753 ret nz 1755 ld a,(iy+CastleMineLevel) 1756 or a1757 ret z1758 cp 11759 ld de,0001 1760 ld bc,000 1761 ld hl,000 1762 jr z,.MineLevelFound1763 cp 21764 ld de,0002 1765 ld bc,001 1766 ld hl,000 1767 jr z,.MineLevelFound1768 ld de,0003 1769 ld bc,001 1770 ld hl,001 1771 .MineLevelFound:1773 push de1774 1775 ld e,(ix+8)1776 ld d,(ix+9)1777 add hl,de1778 pop de1779 ret c1780 ld (ix+8),l1781 ld (ix+9),h1783 1784 ld l,(ix+6)1785 ld h,(ix+7)1786 add hl,bc1787 ret c1788 ld (ix+6),l1789 ld (ix+7),h1791 1792 ld l,(ix+4)1793 ld h,(ix+5)1794 add hl,de1795 ret c1796 ld (ix+4),l1797 ld (ix+5),h1798 ret1800AddCastlesSawmillResources: 1801 call SetResourcesCurrentPlayerinIX 1803 ld iy,Castle11804 call .CheckCastle1805 ld iy,Castle21806 call .CheckCastle1807 ld iy,Castle31808 call .CheckCastle1809 ld iy,Castle41810 call .CheckCastle1811 ret1813 .CheckCastle:1814 ld a,(whichplayernowplaying?) 1815 cp (iy+CastlePlayer) 1816 ret nz 1818 ld a,(iy+CastleSawmillLevel) 1819 or a1820 ret z1821 cp 11822 ld de,0001 1823 jr z,.SawmillLevelFound1824 cp 21825 ld de,0002 1826 jr z,.SawmillLevelFound1827 ld de,0003 1828 .SawmillLevelFound:1830 1831 ld l,(ix+2)1832 ld h,(ix+3)1833 add hl,de1834 ret c1835 ld (ix+2),l1836 ld (ix+3),h1837 ret1839AddCastlesIncomeToPlayer: 1840 call SetResourcesCurrentPlayerinIX 1842 ld iy,Castle11843 call .CheckCastle1844 ld iy,Castle21845 call .CheckCastle1846 ld iy,Castle31847 call .CheckCastle1848 ld iy,Castle41849 call .CheckCastle1850 ret1852 .CheckCastle:1853 ld a,(whichplayernowplaying?) 1854 cp (iy+CastlePlayer) 1855 ret nz 1857 ld a,(iy+CastleLevel) 1858 cp 11859 ld de,500 1860 jr z,.CastleLevelFound1861 cp 21862 ld de,1000 1863 jr z,.CastleLevelFound1864 cp 31865 ld de,2000 1866 jr z,.CastleLevelFound1867 cp 41868 ld de,3000 1869 jr z,.CastleLevelFound1870 ld de,4000 1871 .CastleLevelFound:1873 1874 ld l,(ix+0)1875 ld h,(ix+1)1876 add hl,de1877 ret c1878 ld (ix+0),l1879 ld (ix+1),h1880 ret1882SetResources:1883 ld a,(SetResources?)1884 dec a1885 ret z1886 ld (SetResources?),a1888 call SetCastleOverViewFontPage0Y212 1889 call ClearResourcesHud1890 call SetResourcesCurrentPlayerinIX1892 1893 ld b,229 1894 ld c,204 1895 ld l,(ix+0)1896 ld h,(ix+1)1897 call SetNumber16BitCastle 1899 ld b,032+004 1900 ld c,204 1901 ld l,(ix+2)1902 ld h,(ix+3)1903 call SetNumber16BitCastle 1905 ld b,078+004 1906 ld c,204 1907 ld l,(ix+4)1908 ld h,(ix+5)1909 call SetNumber16BitCastle 1911 ld b,124+004 1912 ld c,204 1913 ld l,(ix+6)1914 ld h,(ix+7)1915 call SetNumber16BitCastle 1917 ld b,169+004 1918 ld c,204 1919 ld l,(ix+8)1920 ld h,(ix+9)1921 call SetNumber16BitCastle 1922 ret1924ClearResourcesHud: 1925 1926 ld hl,$4000 + (204*128) + (032/2) - 1281927 ld de,$0000 + (204*128) + (032/2) - 1281928 ld bc,$0000 + (005*256) + (224/2)1929 ld a,HudNewBlock 1930 jp CopyRamToVramCorrectedCastleOverview 1932SetHeroArmyAndStatusInHud:1933 call checkcurrentplayerhuman 1934 ret z1936 ld a,(SetHeroArmyAndStatusInHud?)1937 dec a1938 ret z1939 ld (SetHeroArmyAndStatusInHud?),a1941 call ClearHeroStatsAndArmyUnitsAmount1942 ld ix,(plxcurrentheroAddress)1943 ld a,(ix+HeroStatus)1944 cp 2551945 ret z 1947 call SetCastleOverViewFontPage0Y212 1948 call SetArmyUnits1949 call SetArmyUnitsAmount1950 call SetHeroPortrait10x181951 call SetHeroStats1952 ret1954ClearHeroStatsAndArmyUnitsAmount:1955 ld hl,$4000 + (122*128) + (202/2) - 1281956 ld de,$0000 + (122*128) + (202/2) - 1281957 ld bc,$0000 + (075*256) + (052/2)1958 ld a,HudNewBlock 1959 jp CopyRamToVramCorrectedCastleOverview 1961SetHeroStats:1962 ld ix,(plxcurrentheroAddress)1964 ld de,ItemAttackPointsTable1965 call SetAdditionalStatFromInventoryItemsInHL1966 ld e,(ix+HeroStatAttack) 1967 ld d,01968 add hl,de1969 ld b,216+001 1970 ld c,145 1971 call SetNumber16BitCastle1973 ld de,ItemDefencePointsTable1974 call SetAdditionalStatFromInventoryItemsInHL1975 ld e,(ix+HeroStatDefense) 1976 ld d,01977 add hl,de1978 1979 bit 7,h 1980 jr z,.SetDefense1981 ld hl,01982 .SetDefense:1983 1984 ld b,225+001 1985 ld c,145 1986 call SetNumber16BitCastle1988 ld de,ItemIntelligencePointsTable1989 call SetAdditionalStatFromInventoryItemsInHL1990 ld e,(ix+HeroStatKnowledge) 1991 ld d,01992 add hl,de1993 ld b,234+001 1994 ld c,145 1995 call SetNumber16BitCastle1997 ld de,ItemSpellDamagePointsTable1998 call SetAdditionalStatFromInventoryItemsInHL1999 ld e,(ix+HeroStatSpelldamage) 2000 ld d,02001 add hl,de2002 ld b,243+001 2003 ld c,145 2004 call SetNumber16BitCastle2005 ret2007SetAdditionalStatFromInventoryItemsInHL:2008 ld ix,(plxcurrentheroAddress)2009 .IxAlreadySet:2011 ld b,05 2012 ld c,0 2013 ld hl,0 2015 call .loop 2016 call .loop 2017 call .loop 2018 call .loop 2019 call .loop 2020 call .loop 2021 call .loop 2022 call .loop 2023 call .loop 2024 ld ix,(plxcurrentheroAddress)2025 ret2027 .loop:2028 call .Check2029 inc de 2030 inc c 2031 djnz .loop2033 inc ix2034 ld b,05 2035 ret2037 .Check:2038 ld a,(ix+HeroInventory+0) 2039 cp c 2040 ret nz2041 ld a,(de) 2042 push bc2043 ld b,02045 or a2046 jp p,.positive2047 dec b2048 .positive:2050 ld c,a2051 add hl,bc2052 pop bc2053 ret 2055ItemSpellDamagePointsTable:20562057 db 02058 db 02059 db 02060 db ButterflySpellDamage 2061 db 020622063 db 02064 db 02065 db 02066 db 02067 db 020682069 db 02070 db 02071 db 02072 db 02073 db 020742075 db YattaShiNeSpellDamage 2076 db FireHoodSpellDamage 2077 db 02078 db 02079 db 020802081 db 02082 db 02083 db 02084 db 02085 db 020862087 db 02088 db 02089 db 02090 db 02091 db 020922093 db SmallRingSpellDamage 2094 db 02095 db ScarletRingSpellPower 2096 db 02097 db 020982099 db 02100 db 02101 db NegligeeOfTeethSpellPower 2102 db 02103 db TheChokerSpellPower 2105 db 02106 db 02107 db EnchantedRobeSpellPower 2108 db 02109 db LabCoatSpellPower 2110 2111ItemIntelligencePointsTable:21122113 db 02114 db 02115 db 02116 db ButterflyIntelligence 2117 db 021182119 db 02120 db 02121 db 02122 db 02123 db 021242125 db 02126 db 02127 db 02128 db 02129 db 021302131 db 02132 db 02133 db CerebroIntelligence 2134 db 02135 db 021362137 db 02138 db 02139 db 02140 db 02141 db 021422143 db 02144 db 02145 db 02146 db 02147 db EmeraldGlovesIntelligence 2149 db 02150 db CyclopsIntelligence 2151 db ScarletRingSpellPower 2152 db 02153 db 021542155 db 02156 db 02157 db NegligeeOfTeethIntelligence 2158 db 02159 db 021602161 db 02162 db PriestsCopeIntelligence 2163 db 02164 db 02165 db 02166 2167ItemDefencePointsTable:21682169 db 02170 db 02171 db HellSlayerDefence 2172 db ButterflyDefence 2173 db 021742175 db RegaliaDiPlebDefence 2176 db YoungBloodsArmorDefence 2177 db TheJuggernautDefence 2178 db YojumboTheRoninDefence 2179 db CeasarsChestplateDefence 2181 db GreenLeafShieldDefence 2182 db WoodenShieldDefence 2183 db TheBramStokerDefence 2184 db ImpenetrableShieldDefence 2185 db TrainingShieldDefence 2187 db YattaShiNeDefence 2188 db 02189 db 02190 db TheViridescentDefence 2191 db PikemensHelmetDefence 2193 db 02194 db 02195 db 02196 db 02197 db 021982199 db 02200 db 02201 db 02202 db 02203 db 022042205 db 02206 db 02207 db ScarletRingDefence 2208 db 02209 db 022102211 db 02212 db 02213 db 02214 db 02215 db 022162217 db 02218 db 02219 db 02220 db 02221 db 02222 2223ItemAttackPointsTable:22242225 db DaggerTimeAttack 2226 db SwordOfBahrainAttack2227 db HellSlayerAttack2228 db ButterflyAttack2229 db SwiftbladeAttack2231 db 02232 db 02233 db 02234 db 02235 db 022362237 db 02238 db 02239 db 02240 db 02241 db 022422243 db 02244 db 02245 db 02246 db 02247 db 022482249 db 02250 db 02251 db 02252 db 02253 db 022542255 db 02256 db 02257 db ElkSkinGlovesAttack 2258 db 02259 db 022602261 db 02262 db 02263 db ScarletRingAttack 2264 db 02265 db 022662267 db 02268 db 02269 db 02270 db 02271 db 022722273 db 02274 db 02275 db 02276 db 02277 db 02279ItemUnitSpeedPointsTable:22802281 db 02282 db 02283 db 02284 db 02285 db SwiftbladeUnitSpeed2287 db RegaliaDiPlebUnitSpeed2288 db 02289 db TheJuggernautUnitSpeed2290 db 02291 db 022922293 db 02294 db 02295 db 02296 db 02297 db 022982299 db 02300 db 02301 db 02302 db 02303 db PikemensHelmetUnitSpeed2305 db ShadowTramperUnitSpeed2306 db 02307 db 02308 db 02309 db SturdyBootsUnitSpeed2311 db 02312 db IronHandUnitSpeed2313 db 02314 db 02315 db 023162317 db 02318 db 02319 db 02320 db 02321 db 023222323 db 02324 db 02325 db 02326 db 02327 db 023282329 db 02330 db 02331 db 02332 db 02333 db 02335ItemUnitHpPointsTable:23362337 db 02338 db 02339 db 02340 db 02341 db 023422343 db 02344 db 02345 db 02346 db 02347 db CaesarsChestplateUnitHp2349 db 02350 db 02351 db 02352 db 02353 db 023542355 db 02356 db 02357 db 02358 db TheViridescentUnitHp2359 db 023602361 db 02362 db 02363 db 02364 db 02365 db 023662367 db 02368 db 02369 db ElkSkinGlovesUnitHp2370 db 02371 db 023722373 db 02374 db 02375 db 02376 db 02377 db 023782379 db 02380 db 02381 db 02382 db 02383 db 023842385 db 02386 db 02387 db 02388 db RuralVestUnitHp2389 db LabcoatUnitHp2392SetHeroPortrait10x18:2393 ld ix,(plxcurrentheroAddress)2394 ld c,(ix+HeroSpecificInfo+0) 2395 ld b,(ix+HeroSpecificInfo+1)2396 push bc2397 pop ix2398 ld a,Hero10x18PortraitsBlock 2399 ld l,(ix+HeroInfoPortrait10x18SYSX+0) 2400 ld h,(ix+HeroInfoPortrait10x18SYSX+1) 2401 ld de,DYDXHeroWindow10x18InHud 2402 ld bc,NXAndNY10x18HeroPortraits 2403 call CopyRamToVramCorrectedCastleOverview 2404 ret2406HeroPortrait10x18SYSXAdol: equ $4000+(000*128)+(000/2)-128 2407HeroPortrait10x18SYSXGoemon1: equ $4000+(000*128)+(010/2)-128 2408HeroPortrait10x18SYSXPixy: equ $4000+(000*128)+(020/2)-128 2409HeroPortrait10x18SYSXDrasle1: equ $4000+(000*128)+(030/2)-128 2410HeroPortrait10x18SYSXLatok: equ $4000+(000*128)+(040/2)-128 2411HeroPortrait10x18SYSXDrasle2: equ $4000+(000*128)+(050/2)-128 2412HeroPortrait10x18SYSXSnake1: equ $4000+(000*128)+(060/2)-128 2413HeroPortrait10x18SYSXDrasle3: equ $4000+(000*128)+(070/2)-128 2415HeroPortrait10x18SYSXSnake2: equ $4000+(000*128)+(080/2)-128 2416HeroPortrait10x18SYSXDrasle4: equ $4000+(000*128)+(090/2)-128 2417HeroPortrait10x18SYSXAshguine: equ $4000+(000*128)+(100/2)-128 2418HeroPortrait10x18SYSXUndeadline1: equ $4000+(000*128)+(110/2)-128 2419HeroPortrait10x18SYSXPsychoWorld: equ $4000+(000*128)+(120/2)-128 2420HeroPortrait10x18SYSXUndeadline2: equ $4000+(000*128)+(130/2)-128 2421HeroPortrait10x18SYSXGoemon2: equ $4000+(000*128)+(140/2)-128 2422HeroPortrait10x18SYSXUndeadline3: equ $4000+(000*128)+(150/2)-128 2424HeroPortrait10x18SYSXFray: equ $4000+(000*128)+(160/2)-128 2425HeroPortrait10x18SYSXBlackColor: equ $4000+(000*128)+(170/2)-128 2426HeroPortrait10x18SYSXWit: equ $4000+(000*128)+(180/2)-128 2427HeroPortrait10x18SYSXMitchell: equ $4000+(000*128)+(190/2)-128 2428HeroPortrait10x18SYSXJanJackGibson:equ $4000+(000*128)+(200/2)-128 2429HeroPortrait10x18SYSXGillianSeed: equ $4000+(000*128)+(210/2)-128 2430HeroPortrait10x18SYSXSnatcher: equ $4000+(000*128)+(220/2)-128 2431HeroPortrait10x18SYSXGolvellius: equ $4000+(000*128)+(230/2)-128 2433HeroPortrait10x18SYSXBillRizer: equ $4000+(000*128)+(240/2)-128 2434HeroPortrait10x18SYSXPochi: equ $4000+(018*128)+(000/2)-128 2435HeroPortrait10x18SYSXGreyFox: equ $4000+(018*128)+(010/2)-128 2436HeroPortrait10x18SYSXTrevorBelmont:equ $4000+(018*128)+(020/2)-128 2437HeroPortrait10x18SYSXBigBoss: equ $4000+(018*128)+(030/2)-128 2438HeroPortrait10x18SYSXSimonBelmont: equ $4000+(018*128)+(040/2)-128 2439HeroPortrait10x18SYSXDrPettrovich: equ $4000+(018*128)+(050/2)-128 2440HeroPortrait10x18SYSXRichterBelmont:equ $4000+(018*128)+(060/2)-128 2442HeroPortrait10x18SYSXUltrabox: equ $4000+(018*128)+(070/2)-128 2443HeroPortrait10x18SYSXLoganSerios: equ $4000+(018*128)+(080/2)-128 2444HeroPortrait10x18SYSXHollyWhite: equ $4000+(018*128)+(090/2)-128 2445HeroPortrait10x18SYSXMercies: equ $4000+(018*128)+(100/2)-128 2446HeroPortrait10x18SYSXNatashaRomanenko: equ $4000+(018*128)+(110/2)-128 2447HeroPortrait10x18SYSXRuth: equ $4000+(018*128)+(120/2)-128 2448HeroPortrait10x18SYSXGeera: equ $4000+(018*128)+(130/2)-128 2449HeroPortrait10x18SYSXYoungNoble: equ $4000+(018*128)+(140/2)-128 2451HeroPortrait10x18SYSXDawel: equ $4000+(018*128)+(150/2)-128 2452HeroPortrait10x18SYSXPocky: equ $4000+(018*128)+(160/2)-128 2453HeroPortrait10x18SYSXKelesisTheCook: equ $4000+(018*128)+(170/2)-128 2454HeroPortrait10x18SYSXLolo: equ $4000+(018*128)+(180/2)-128 2455HeroPortrait10x18SYSXPippols: equ $4000+(018*128)+(190/2)-128 2456HeroPortrait10x18SYSXRandar: equ $4000+(018*128)+(200/2)-128 2457HeroPortrait10x18SYSXCles: equ $4000+(018*128)+(210/2)-128 2458HeroPortrait10x18SYSXLuice: equ $4000+(018*128)+(220/2)-128 2460HeroPortrait10x18SYSXDick: equ $4000+(018*128)+(230/2)-128 2461HeroPortrait10x18SYSXAphrodite: equ $4000+(018*128)+(240/2)-128 2462HeroPortrait10x18SYSXTienRen: equ $4000+(036*128)+(000/2)-128 2463HeroPortrait10x18SYSXPopolon: equ $4000+(036*128)+(010/2)-128 2464HeroPortrait10x18SYSXHoMei: equ $4000+(036*128)+(020/2)-128 2465HeroPortrait10x18SYSXPriestessKi: equ $4000+(036*128)+(030/2)-128 2466HeroPortrait10x18SYSXMeiHong: equ $4000+(036*128)+(040/2)-128 2467HeroPortrait10x18SYSXPrinceGilgamesh: equ $4000+(036*128)+(050/2)-128 2468HeroPortrait10x18SYSXRandomHajile: equ $4000+(036*128)+(060/2)-128 2469HeroPortrait10x18SYSXBensonCunningham: equ $4000+(036*128)+(070/2)-128 2470HeroPortrait10x18SYSXJamieSeed: equ $4000+(036*128)+(080/2)-128 2471HeroPortrait10x18SYSXArmoredSnatcher: equ $4000+(036*128)+(090/2)-128 2472HeroPortrait10x18SYSXDruid: equ $4000+(036*128)+(100/2)-128 2474HeroPortrait10x18SYSXMomotaru: equ $4000+(036*128)+(110/2)-128 2475HeroPortrait10x18SYSXLuka: equ $4000+(036*128)+(120/2)-128 2476HeroPortrait10x18SYSXHeiwaAndButako: equ $4000+(036*128)+(130/2)-128 2477HeroPortrait10x18SYSXAce: equ $4000+(036*128)+(140/2)-128 2478HeroPortrait10x18SYSXSpaceExplorer01: equ $4000+(036*128)+(150/2)-128 2479HeroPortrait10x18SYSXFern: equ $4000+(036*128)+(160/2)-128 2480HeroPortrait10x18SYSXHorn: equ $4000+(036*128)+(170/2)-128 2481HeroPortrait10x18SYSXPixie: equ $4000+(036*128)+(180/2)-128 2482HeroPortrait10x18SYSXFreyaJerbain: equ $4000+(036*128)+(190/2)-128 2483HeroPortrait10x18SYSXLanceBean: equ $4000+(036*128)+(200/2)-128 2484HeroPortrait10x18SYSXThiharis: equ $4000+(036*128)+(210/2)-128 2485HeroPortrait10x18SYSXPampas: equ $4000+(036*128)+(220/2)-128 2486HeroPortrait10x18SYSXSelene: equ $4000+(036*128)+(230/2)-128 2487HeroPortrait10x18SYSXSkooter: equ $4000+(036*128)+(240/2)-128 2488HeroPortrait10x18SYSXJeddaChef: equ $4000+(054*128)+(000/2)-128 2496SetArmyUnits:2497 ld a,(ix+HeroUnits+00) 2498 call SetDefendingHeroArmyAndAmount.SetSYSX 2499 ld de,DYDXUnit1WindowInHud 2500 call CopyTransparantImage 2502 ld a,(ix+HeroUnits+03) 2503 call SetDefendingHeroArmyAndAmount.SetSYSX 2504 ld de,DYDXUnit2WindowInHud 2505 call CopyTransparantImage 2507 ld a,(ix+HeroUnits+06) 2508 call SetDefendingHeroArmyAndAmount.SetSYSX 2509 ld de,DYDXUnit3WindowInHud 2510 call CopyTransparantImage 2512 ld a,(ix+HeroUnits+09) 2513 call SetDefendingHeroArmyAndAmount.SetSYSX 2514 ld de,DYDXUnit4WindowInHud 2515 call CopyTransparantImage 2517 ld a,(ix+HeroUnits+12) 2518 call SetDefendingHeroArmyAndAmount.SetSYSX 2519 ld de,DYDXUnit5WindowInHud 2520 call CopyTransparantImage 2522 ld a,(ix+HeroUnits+15) 2523 call SetDefendingHeroArmyAndAmount.SetSYSX 2524 ld de,DYDXUnit6WindowInHud 2525 call CopyTransparantImage 2526 ret2528NXAndNY14x14CharaterPortraits: equ 014*256 + (014/2) 2529DYDXUnit1WindowInHud: equ 153*256 + 204 2530DYDXUnit2WindowInHud: equ 153*256 + 220 2531DYDXUnit3WindowInHud: equ 153*256 + 236 2532DYDXUnit4WindowInHud: equ 176*256 + 204 2533DYDXUnit5WindowInHud: equ 176*256 + 220 2534DYDXUnit6WindowInHud: equ 176*256 + 236 2536SetArmyUnitsAmount:2537 ld l,(ix+HeroUnits+01)2538 ld h,(ix+HeroUnits+02)2539 ld b,204 + 12540 ld c,1692541 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02543 ld l,(ix+HeroUnits+04)2544 ld h,(ix+HeroUnits+05)2545 ld b,220 + 12546 ld c,1692547 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02549 ld l,(ix+HeroUnits+07)2550 ld h,(ix+HeroUnits+08)2551 ld b,236 + 12552 ld c,1692553 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02555 ld l,(ix+HeroUnits+10)2556 ld h,(ix+HeroUnits+11)2557 ld b,204 + 12558 ld c,1922559 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02561 ld l,(ix+HeroUnits+13)2562 ld h,(ix+HeroUnits+14)2563 ld b,220 + 12564 ld c,1922565 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02567 ld l,(ix+HeroUnits+16)2568 ld h,(ix+HeroUnits+17)2569 ld b,236 + 12570 ld c,1922571 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02572 ret2574SetManaAndMovementBars:2575 ld a,(ChangeManaAndMovement?)2576 dec a2577 ret z2578 ld (ChangeManaAndMovement?),a2580 call EraseManaandMovementBars2581 call .PutManaandMovementBars25822585 ret2587.PutManaandMovementBars:2588 call SetHero1ForCurrentPlayerInIX2589 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2591 ld de,$0000 + (067*128) + (226/2) - 1282592 ld hl,$0000 + (067*128) + (204/2) - 1282593 call .PutManaAndMovement 2595 ld de,$0000 + (078*128) + (226/2) - 1282596 ld hl,$0000 + (078*128) + (204/2) - 1282597 call .PutManaAndMovement 2599 ld de,$0000 + (089*128) + (226/2) - 1282600 ld hl,$0000 + (089*128) + (204/2) - 1282601 call .PutManaAndMovement 2602 ret2604 .PutManaAndMovement:2605 ld a,(ix+HeroStatus) 2606 cp 255 2607 ret z2608 cp 254 2609 jp nz,.EndCheckInCastle2610 2611 ld bc,lenghtherotable2612 add ix,bc 2613 jp .PutManaAndMovement2614 .EndCheckInCastle:2615 push hl2616 call PutManaBar 2617 pop de2618 call PutMovementBar 2619 ld bc,lenghtherotable2620 add ix,bc 2621 ret2623 PutManaBar:2624 exx2626 2627 ld l,(ix+HeroMana+0) 2628 ld h,(ix+HeroMana+1) 2629 ld de,102630 call MultiplyHlWithDE 2632 push hl2633 pop bc2634 ld e,(ix+HeroTotalMana+0) 2635 ld d,(ix+HeroTotalMana+1) 2636 call DivideBCbyDE 2638 ld a,c2639 or a2640 ld bc,$4000 + ((107+25+76)*128) + (042/2) - 1282641 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02642 dec a2643 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282644 jr z,.EndSearchPercentageMovement2645 dec a2646 ld bc,$4000 + ((107+25+76)*128) + (038/2) - 1282647 jr z,.EndSearchPercentageMovement2648 dec a2649 ld bc,$4000 + ((107+25+76)*128) + (036/2) - 1282650 jr z,.EndSearchPercentageMovement2651 dec a2652 ld bc,$4000 + ((107+25+76)*128) + (034/2) - 1282653 jr z,.EndSearchPercentageMovement2654 dec a2655 ld bc,$4000 + ((107+25+76)*128) + (032/2) - 1282656 jr z,.EndSearchPercentageMovement2657 dec a2658 ld bc,$4000 + ((107+25+76)*128) + (030/2) - 1282659 jr z,.EndSearchPercentageMovement2660 dec a2661 ld bc,$4000 + ((107+25+76)*128) + (028/2) - 1282662 jr z,.EndSearchPercentageMovement2663 dec a2664 ld bc,$4000 + ((107+25+76)*128) + (026/2) - 1282665 jr z,.EndSearchPercentageMovement2666 dec a2667 ld bc,$4000 + ((107+25+76)*128) + (024/2) - 1282668 jr z,.EndSearchPercentageMovement2669 ld bc,$4000 + ((107+25+76)*128) + (022/2) - 1282670 jr .EndSearchPercentageMovement2672 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2673 ld a,(ix+HeroMana+0) 2674 ld h,(ix+HeroMana+1) 2675 or h2676 jr z,.EndSearchPercentageMovement2677 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282679 .EndSearchPercentageMovement:2680 push bc2681 exx2682 pop hl2683 ld bc,$0000 + (010*256) + (002/2)2684 ld a,Hero20x11PortraitsBlock 2685 call CopyRamToVramCorrectedCastleOverview 2686 ret2688 PutMovementBar:2689 exx2690 2691 ld h,02692 ld l,(ix+HeroMove) 2693 ld de,102694 call MultiplyHlWithDE 2696 push hl2697 pop bc2698 ld d,02699 ld e,(ix+HeroTotalMove) 2700 call DivideBCbyDE 2702 ld a,c2703 or a2704 ld bc,$4000 + ((107+25+76)*128) + (020/2) - 1282705 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02706 dec a2707 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282708 jr z,.EndSearchPercentageMovement2709 dec a2710 ld bc,$4000 + ((107+25+76)*128) + (016/2) - 1282711 jr z,.EndSearchPercentageMovement2712 dec a2713 ld bc,$4000 + ((107+25+76)*128) + (014/2) - 1282714 jr z,.EndSearchPercentageMovement2715 dec a2716 ld bc,$4000 + ((107+25+76)*128) + (012/2) - 1282717 jr z,.EndSearchPercentageMovement2718 dec a2719 ld bc,$4000 + ((107+25+76)*128) + (010/2) - 1282720 jr z,.EndSearchPercentageMovement2721 dec a2722 ld bc,$4000 + ((107+25+76)*128) + (008/2) - 1282723 jr z,.EndSearchPercentageMovement2724 dec a2725 ld bc,$4000 + ((107+25+76)*128) + (006/2) - 1282726 jr z,.EndSearchPercentageMovement2727 dec a2728 ld bc,$4000 + ((107+25+76)*128) + (004/2) - 1282729 jr z,.EndSearchPercentageMovement2730 dec a2731 ld bc,$4000 + ((107+25+76)*128) + (002/2) - 1282732 jr z,.EndSearchPercentageMovement2733 ld bc,$4000 + ((107+25+76)*128) + (000/2) - 1282734 jr .EndSearchPercentageMovement2736 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2737 ld a,(ix+HeroMove) 2738 and a2739 jr z,.EndSearchPercentageMovement2740 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282742 .EndSearchPercentageMovement:2743 push bc2744 exx2745 pop hl2746 ld bc,$0000 + (010*256) + (002/2)2747 ld a,Hero20x11PortraitsBlock 2748 call CopyRamToVramCorrectedCastleOverview 2749 ret2751EraseManaandMovementBars:2752 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282753 ld de,$0000 + (067*128) + (204/2) - 1282754 ld bc,$0000 + (010*256) + (002/2)2755 ld a,Hero20x11PortraitsBlock 2756 call CopyRamToVramCorrectedCastleOverview 2758 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282759 ld de,$0000 + (078*128) + (204/2) - 1282760 ld bc,$0000 + (010*256) + (002/2)2761 ld a,Hero20x11PortraitsBlock 2762 call CopyRamToVramCorrectedCastleOverview 2764 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282765 ld de,$0000 + (089*128) + (204/2) - 1282766 ld bc,$0000 + (010*256) + (002/2)2767 ld a,Hero20x11PortraitsBlock 2768 call CopyRamToVramCorrectedCastleOverview 2770 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282771 ld de,$0000 + (067*128) + (226/2) - 1282772 ld bc,$0000 + (010*256) + (002/2)2773 ld a,Hero20x11PortraitsBlock 2774 call CopyRamToVramCorrectedCastleOverview 2776 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282777 ld de,$0000 + (078*128) + (226/2) - 1282778 ld bc,$0000 + (010*256) + (002/2)2779 ld a,Hero20x11PortraitsBlock 2780 call CopyRamToVramCorrectedCastleOverview 2782 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282783 ld de,$0000 + (089*128) + (226/2) - 1282784 ld bc,$0000 + (010*256) + (002/2)2785 ld a,Hero20x11PortraitsBlock 2786 call CopyRamToVramCorrectedCastleOverview 2787 ret27902792SetCastlesInWindows: 2793 ld a,(SetCastlesInWindows?)2794 dec a2795 ret z2796 ld (SetCastlesInWindows?),a2798 call ClearCastleButtons 2800 call SetCastleUsingCastleWindowPointerInIX2801 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2802 call .setCastlewindow2804 call SetCastleUsingCastleWindowPointerInIX2805 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2806 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2807 call .setCastlewindow2809 call SetCastleUsingCastleWindowPointerInIX2810 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2811 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2812 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2813 jp .setCastlewindow2815 .setCastlewindow:2816 2818 ld hl,CastleButtonGrassLand2819 2828 2829 ld bc,72830 ldir2831 ret2833CastleButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (156/2) - 128 | dw $4000 + ((139+25+76)*128) + (176/2) - 128 | dw $4000 + ((139+25+76)*128) + (196/2) - 1282834CastleButtonGrassLand: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (000/2) - 128 | dw $4000 + ((117+25+76)*128) + (020/2) - 128 | dw $4000 + ((117+25+76)*128) + (040/2) - 1282835CastleButtonSwamp: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (060/2) - 128 | dw $4000 + ((117+25+76)*128) + (080/2) - 128 | dw $4000 + ((117+25+76)*128) + (100/2) - 1282836CastleButtonHell: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (120/2) - 128 | dw $4000 + ((117+25+76)*128) + (140/2) - 128 | dw $4000 + ((117+25+76)*128) + (160/2) - 1282837CastleButtonSnow: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (180/2) - 128 | dw $4000 + ((117+25+76)*128) + (200/2) - 128 | dw $4000 + ((117+25+76)*128) + (220/2) - 1282839ClearCastleButtons:2840 ld hl,CastleButton20x11SYSXEmpty2841 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2842 ld bc,72843 ldir2845 ld hl,CastleButton20x11SYSXEmpty2846 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2847 ld bc,72848 ldir2850 ld hl,CastleButton20x11SYSXEmpty2851 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2852 ld bc,72853 ldir2854 ret2857ThirdCastleWindowClicked:2858 call SetCastleUsingCastleWindowPointerInIX2859 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2860 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2861 jp GoCenterAndCheckEnter2862 2863SecondCastleWindowClicked:2864 call SetCastleUsingCastleWindowPointerInIX2865 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2866 jp GoCenterAndCheckEnter2868FirstCastleWindowClicked:2869 call SetCastleUsingCastleWindowPointerInIX28702872 GoCenterAndCheckEnter: 2873 ld a,(mappointery)2874 ld b,a2875 ld a,(mappointerx)2876 ld c,a2877 push bc 2878 2879 call centrescreenforthisCastle2881 pop bc2882 2883 ld a,(mappointery)2884 ld h,a2885 ld a,(mappointerx)2886 ld l,a2887 xor a2888 sbc hl,bc2889 ret nz2891 ld (WhichCastleIsPointerPointingAt?),ix2892 ld a,12893 ld (EnterCastle?),a2894 ret28962898SetHeroesInWindows:2899 ld a,(SetHeroesInWindows?)2900 dec a2901 ret z2902 ld (SetHeroesInWindows?),a2904 call ClearHeroButtons 2905 call SetHero1ForCurrentPlayerInIX2906 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2908 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2909 call .setherowindow2910 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2911 call .setherowindow2912 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2914 .setherowindow:2915 ld a,(ix+HeroStatus) 2916 cp 2552917 ret z2918 cp 254 2919 jp nz,.EndCheckInCastle2920 2921 ld bc,lenghtherotable2922 add ix,bc 2923 jp .setherowindow2924 .EndCheckInCastle:2926 ld c,(ix+HeroSpecificInfo+0) 2927 ld b,(ix+HeroSpecificInfo+1)2928 push bc2929 pop iy2930 ld l,(iy+HeroButton20x11SYSX+0) 2931 ld h,(iy+HeroButton20x11SYSX+1) 2933 ld bc,72934 ldir2936 ld de,lenghtherotable2937 add ix,de 2938 ret2940ClearHeroButtons:2941 ld hl,HeroButton20x11SYSXEmpty2942 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2943 ld bc,72944 ldir2946 ld hl,HeroButton20x11SYSXEmpty2947 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2948 ld bc,72949 ldir2951 ld hl,HeroButton20x11SYSXEmpty2952 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2953 ld bc,72954 ldir2955 ret2957HeroButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (096/2) - 128 | dw $4000 + ((139+25+76)*128) + (116/2) - 128 | dw $4000 + ((139+25+76)*128) + (136/2) - 1282959HeroButton20x11SYSXAdol: db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (020/2) - 128 | dw $4000 + (000*128) + (040/2) - 1282960HeroButton20x11SYSXGoemon1: db %1100 0011 | dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (000*128) + (100/2) - 1282961HeroButton20x11SYSXPixy: db %1100 0011 | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (000*128) + (160/2) - 1282962HeroButton20x11SYSXDrasle1: db %1100 0011 | dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (000*128) + (220/2) - 1282964HeroButton20x11SYSXLatok: db %1100 0011 | dw $4000 + (011*128) + (000/2) - 128 | dw $4000 + (011*128) + (020/2) - 128 | dw $4000 + (011*128) + (040/2) - 1282965HeroButton20x11SYSXDrasle2: db %1100 0011 | dw $4000 + (011*128) + (060/2) - 128 | dw $4000 + (011*128) + (080/2) - 128 | dw $4000 + (011*128) + (100/2) - 1282966HeroButton20x11SYSXSnake1: db %1100 0011 | dw $4000 + (011*128) + (120/2) - 128 | dw $4000 + (011*128) + (140/2) - 128 | dw $4000 + (011*128) + (160/2) - 1282967HeroButton20x11SYSXDrasle3: db %1100 0011 | dw $4000 + (011*128) + (180/2) - 128 | dw $4000 + (011*128) + (200/2) - 128 | dw $4000 + (011*128) + (220/2) - 1282969HeroButton20x11SYSXSnake2: db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (020/2) - 128 | dw $4000 + (022*128) + (040/2) - 1282970HeroButton20x11SYSXDrasle4: db %1100 0011 | dw $4000 + (022*128) + (060/2) - 128 | dw $4000 + (022*128) + (080/2) - 128 | dw $4000 + (022*128) + (100/2) - 1282971HeroButton20x11SYSXAshguine: db %1100 0011 | dw $4000 + (022*128) + (120/2) - 128 | dw $4000 + (022*128) + (140/2) - 128 | dw $4000 + (022*128) + (160/2) - 1282972HeroButton20x11SYSXUndeadline1: db %1100 0011 | dw $4000 + (022*128) + (180/2) - 128 | dw $4000 + (022*128) + (200/2) - 128 | dw $4000 + (022*128) + (220/2) - 1282974HeroButton20x11SYSXPsychoWorld: db %1100 0011 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (033*128) + (020/2) - 128 | dw $4000 + (033*128) + (040/2) - 1282975HeroButton20x11SYSXUndeadline2: db %1100 0011 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (033*128) + (080/2) - 128 | dw $4000 + (033*128) + (100/2) - 1282976HeroButton20x11SYSXGoemon2: db %1100 0011 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (033*128) + (140/2) - 128 | dw $4000 + (033*128) + (160/2) - 1282977HeroButton20x11SYSXUndeadline3: db %1100 0011 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (033*128) + (200/2) - 128 | dw $4000 + (033*128) + (220/2) - 1282979HeroButton20x11SYSXFray: db %1100 0011 | dw $4000 + (044*128) + (000/2) - 128 | dw $4000 + (044*128) + (020/2) - 128 | dw $4000 + (044*128) + (040/2) - 1282980HeroButton20x11SYSXBlackColor: db %1100 0011 | dw $4000 + (044*128) + (060/2) - 128 | dw $4000 + (044*128) + (080/2) - 128 | dw $4000 + (044*128) + (100/2) - 1282981HeroButton20x11SYSXWit: db %1100 0011 | dw $4000 + (044*128) + (120/2) - 128 | dw $4000 + (044*128) + (140/2) - 128 | dw $4000 + (044*128) + (160/2) - 1282982HeroButton20x11SYSXMitchell: db %1100 0011 | dw $4000 + (044*128) + (180/2) - 128 | dw $4000 + (044*128) + (200/2) - 128 | dw $4000 + (044*128) + (220/2) - 1282984HeroButton20x11SYSXJanJackGibson: db %1100 0011 | dw $4000 + (055*128) + (000/2) - 128 | dw $4000 + (055*128) + (020/2) - 128 | dw $4000 + (055*128) + (040/2) - 1282985HeroButton20x11SYSXGillianSeed: db %1100 0011 | dw $4000 + (055*128) + (060/2) - 128 | dw $4000 + (055*128) + (080/2) - 128 | dw $4000 + (055*128) + (100/2) - 1282986HeroButton20x11SYSXSnatcher: db %1100 0011 | dw $4000 + (055*128) + (120/2) - 128 | dw $4000 + (055*128) + (140/2) - 128 | dw $4000 + (055*128) + (160/2) - 1282987HeroButton20x11SYSXGolvellius: db %1100 0011 | dw $4000 + (055*128) + (180/2) - 128 | dw $4000 + (055*128) + (200/2) - 128 | dw $4000 + (055*128) + (220/2) - 1282989HeroButton20x11SYSXBillRizer: db %1100 0011 | dw $4000 + (066*128) + (000/2) - 128 | dw $4000 + (066*128) + (020/2) - 128 | dw $4000 + (066*128) + (040/2) - 1282990HeroButton20x11SYSXPochi: db %1100 0011 | dw $4000 + (066*128) + (060/2) - 128 | dw $4000 + (066*128) + (080/2) - 128 | dw $4000 + (066*128) + (100/2) - 1282991HeroButton20x11SYSXGreyFox: db %1100 0011 | dw $4000 + (066*128) + (120/2) - 128 | dw $4000 + (066*128) + (140/2) - 128 | dw $4000 + (066*128) + (160/2) - 1282992HeroButton20x11SYSXTrevorBelmont: db %1100 0011 | dw $4000 + (066*128) + (180/2) - 128 | dw $4000 + (066*128) + (200/2) - 128 | dw $4000 + (066*128) + (220/2) - 1282994HeroButton20x11SYSXBigBoss: db %1100 0011 | dw $4000 + (077*128) + (000/2) - 128 | dw $4000 + (077*128) + (020/2) - 128 | dw $4000 + (077*128) + (040/2) - 1282995HeroButton20x11SYSXSimonBelmont: db %1100 0011 | dw $4000 + (077*128) + (060/2) - 128 | dw $4000 + (077*128) + (080/2) - 128 | dw $4000 + (077*128) + (100/2) - 1282996HeroButton20x11SYSXDrPettrovich: db %1100 0011 | dw $4000 + (077*128) + (120/2) - 128 | dw $4000 + (077*128) + (140/2) - 128 | dw $4000 + (077*128) + (160/2) - 1282997HeroButton20x11SYSXRichterBelmont: db %1100 0011 | dw $4000 + (077*128) + (180/2) - 128 | dw $4000 + (077*128) + (200/2) - 128 | dw $4000 + (077*128) + (220/2) - 1282999HeroButton20x11SYSXUltrabox: db %1100 0011 | dw $4000 + (088*128) + (000/2) - 128 | dw $4000 + (088*128) + (020/2) - 128 | dw $4000 + (088*128) + (040/2) - 1283000HeroButton20x11SYSXLoganSerios: db %1100 0011 | dw $4000 + (088*128) + (060/2) - 128 | dw $4000 + (088*128) + (080/2) - 128 | dw $4000 + (088*128) + (100/2) - 1283001HeroButton20x11SYSXHollyWhite: db %1100 0011 | dw $4000 + (088*128) + (120/2) - 128 | dw $4000 + (088*128) + (140/2) - 128 | dw $4000 + (088*128) + (160/2) - 1283002HeroButton20x11SYSXMercies: db %1100 0011 | dw $4000 + (088*128) + (180/2) - 128 | dw $4000 + (088*128) + (200/2) - 128 | dw $4000 + (088*128) + (220/2) - 1283004HeroButton20x11SYSXNatashaRomanenko:db %1100 0011 | dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (020/2) - 128 | dw $4000 + (099*128) + (040/2) - 1283005HeroButton20x11SYSXRuth: db %1100 0011 | dw $4000 + (099*128) + (060/2) - 128 | dw $4000 + (099*128) + (080/2) - 128 | dw $4000 + (099*128) + (100/2) - 1283006HeroButton20x11SYSXGeera: db %1100 0011 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (140/2) - 128 | dw $4000 + (099*128) + (160/2) - 1283007HeroButton20x11SYSXYoungNoble: db %1100 0011 | dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (200/2) - 128 | dw $4000 + (099*128) + (220/2) - 1283009HeroButton20x11SYSXDawel: db %1100 0011 | dw $4000 + (110*128) + (000/2) - 128 | dw $4000 + (110*128) + (020/2) - 128 | dw $4000 + (110*128) + (040/2) - 1283010HeroButton20x11SYSXPocky: db %1100 0011 | dw $4000 + (110*128) + (060/2) - 128 | dw $4000 + (110*128) + (080/2) - 128 | dw $4000 + (110*128) + (100/2) - 1283011HeroButton20x11SYSXKelesisTheCook: db %1100 0011 | dw $4000 + (110*128) + (120/2) - 128 | dw $4000 + (110*128) + (140/2) - 128 | dw $4000 + (110*128) + (160/2) - 1283012HeroButton20x11SYSXLolo: db %1100 0011 | dw $4000 + (110*128) + (180/2) - 128 | dw $4000 + (110*128) + (200/2) - 128 | dw $4000 + (110*128) + (220/2) - 1283014HeroButton20x11SYSXPippols: db %1100 0011 | dw $4000 + (121*128) + (000/2) - 128 | dw $4000 + (121*128) + (020/2) - 128 | dw $4000 + (121*128) + (040/2) - 1283015HeroButton20x11SYSXRandar: db %1100 0011 | dw $4000 + (121*128) + (060/2) - 128 | dw $4000 + (121*128) + (080/2) - 128 | dw $4000 + (121*128) + (100/2) - 1283016HeroButton20x11SYSXCles: db %1100 0011 | dw $4000 + (121*128) + (120/2) - 128 | dw $4000 + (121*128) + (140/2) - 128 | dw $4000 + (121*128) + (160/2) - 1283017HeroButton20x11SYSXLuice: db %1100 0011 | dw $4000 + (121*128) + (180/2) - 128 | dw $4000 + (121*128) + (200/2) - 128 | dw $4000 + (121*128) + (220/2) - 1283019HeroButton20x11SYSXDick: db %1100 0011 | dw $4000 + (132*128) + (000/2) - 128 | dw $4000 + (132*128) + (020/2) - 128 | dw $4000 + (132*128) + (040/2) - 1283020HeroButton20x11SYSXAphrodite: db %1100 0011 | dw $4000 + (132*128) + (060/2) - 128 | dw $4000 + (132*128) + (080/2) - 128 | dw $4000 + (132*128) + (100/2) - 1283021HeroButton20x11SYSXTienRen: db %1100 0011 | dw $4000 + (132*128) + (120/2) - 128 | dw $4000 + (132*128) + (140/2) - 128 | dw $4000 + (132*128) + (160/2) - 1283022HeroButton20x11SYSXPopolon: db %1100 0011 | dw $4000 + (132*128) + (180/2) - 128 | dw $4000 + (132*128) + (200/2) - 128 | dw $4000 + (132*128) + (220/2) - 1283024HeroButton20x11SYSXHoMei: db %1100 0011 | dw $4000 + (143*128) + (000/2) - 128 | dw $4000 + (143*128) + (020/2) - 128 | dw $4000 + (143*128) + (040/2) - 1283025HeroButton20x11SYSXPriestessKi: db %1100 0011 | dw $4000 + (143*128) + (060/2) - 128 | dw $4000 + (143*128) + (080/2) - 128 | dw $4000 + (143*128) + (100/2) - 1283026HeroButton20x11SYSXMeiHong: db %1100 0011 | dw $4000 + (143*128) + (120/2) - 128 | dw $4000 + (143*128) + (140/2) - 128 | dw $4000 + (143*128) + (160/2) - 1283027HeroButton20x11SYSXPrinceGilgamesh: db %1100 0011 | dw $4000 + (143*128) + (180/2) - 128 | dw $4000 + (143*128) + (200/2) - 128 | dw $4000 + (143*128) + (220/2) - 1283029HeroButton20x11SYSXRandomHajile: db %1100 0011 | dw $4000 + (154*128) + (000/2) - 128 | dw $4000 + (154*128) + (020/2) - 128 | dw $4000 + (154*128) + (040/2) - 1283030HeroButton20x11SYSXBensonCunningham: db %1100 0011 | dw $4000 + (154*128) + (060/2) - 128 | dw $4000 + (154*128) + (080/2) - 128 | dw $4000 + (154*128) + (100/2) - 1283031HeroButton20x11SYSXJamieSeed: db %1100 0011 | dw $4000 + (154*128) + (120/2) - 128 | dw $4000 + (154*128) + (140/2) - 128 | dw $4000 + (154*128) + (160/2) - 1283032HeroButton20x11SYSXArmoredSnatcher: db %1100 0011 | dw $4000 + (154*128) + (180/2) - 128 | dw $4000 + (154*128) + (200/2) - 128 | dw $4000 + (154*128) + (220/2) - 1283034HeroButton20x11SYSXDruid: db %1100 0011 | dw $4000 + (165*128) + (000/2) - 128 | dw $4000 + (165*128) + (020/2) - 128 | dw $4000 + (165*128) + (040/2) - 1283035HeroButton20x11SYSXMomotaru: db %1100 0011 | dw $4000 + (165*128) + (060/2) - 128 | dw $4000 + (165*128) + (080/2) - 128 | dw $4000 + (165*128) + (100/2) - 1283036HeroButton20x11SYSXLuka: db %1100 0011 | dw $4000 + (165*128) + (120/2) - 128 | dw $4000 + (165*128) + (140/2) - 128 | dw $4000 + (165*128) + (160/2) - 1283037HeroButton20x11SYSXHeiwaAndButako: db %1100 0011 | dw $4000 + (165*128) + (180/2) - 128 | dw $4000 + (165*128) + (200/2) - 128 | dw $4000 + (165*128) + (220/2) - 1283039HeroButton20x11SYSXAce: db %1100 0011 | dw $4000 + (176*128) + (000/2) - 128 | dw $4000 + (176*128) + (020/2) - 128 | dw $4000 + (176*128) + (040/2) - 1283040HeroButton20x11SYSXSpaceExplorer01: db %1100 0011 | dw $4000 + (176*128) + (060/2) - 128 | dw $4000 + (176*128) + (080/2) - 128 | dw $4000 + (176*128) + (100/2) - 1283041HeroButton20x11SYSXFern: db %1100 0011 | dw $4000 + (176*128) + (120/2) - 128 | dw $4000 + (176*128) + (140/2) - 128 | dw $4000 + (176*128) + (160/2) - 1283042HeroButton20x11SYSXHorn: db %1100 0011 | dw $4000 + (176*128) + (180/2) - 128 | dw $4000 + (176*128) + (200/2) - 128 | dw $4000 + (176*128) + (220/2) - 1283044HeroButton20x11SYSXPixie: db %1100 0011 | dw $4000 + (187*128) + (000/2) - 128 | dw $4000 + (187*128) + (020/2) - 128 | dw $4000 + (187*128) + (040/2) - 1283045HeroButton20x11SYSXFreyaJerbain: db %1100 0011 | dw $4000 + (187*128) + (060/2) - 128 | dw $4000 + (187*128) + (080/2) - 128 | dw $4000 + (187*128) + (100/2) - 1283046HeroButton20x11SYSXLanceBean: db %1100 0011 | dw $4000 + (187*128) + (120/2) - 128 | dw $4000 + (187*128) + (140/2) - 128 | dw $4000 + (187*128) + (160/2) - 1283047HeroButton20x11SYSXThiharis: db %1100 0011 | dw $4000 + (187*128) + (180/2) - 128 | dw $4000 + (187*128) + (200/2) - 128 | dw $4000 + (187*128) + (220/2) - 1283049HeroButton20x11SYSXPampas: db %1100 0011 | dw $4000 + (198*128) + (060/2) - 128 | dw $4000 + (198*128) + (080/2) - 128 | dw $4000 + (198*128) + (220/2) - 1283050HeroButton20x11SYSXSelene: db %1100 0011 | dw $4000 + (198*128) + (120/2) - 128 | dw $4000 + (198*128) + (140/2) - 128 | dw $4000 + (198*128) + (040/2) - 1283051HeroButton20x11SYSXSkooter: db %1100 0011 | dw $4000 + (198*128) + (180/2) - 128 | dw $4000 + (198*128) + (200/2) - 128 | dw $4000 + (198*128) + (100/2) - 1283052HeroButton20x11SYSXJeddaChef: db %1100 0011 | dw $4000 + (240*128) + (000/2) - 128 | dw $4000 + (240*128) + (020/2) - 128 | dw $4000 + (240*128) + (160/2) - 1283055HeroLevelUpCode:30563057 ld ix,(plxcurrentheroAddress)306030643069 ld a,(ix+Heroy)3070 cp 2553071 ret z3077 ld a,(ix+HeroTotalMana)3078 ld (HeroTotalManaBeforeLevelingUp),a3080 ld a,r3081 ld (framecounter),a 3083 ld a,255 3084 ld (PreviousButtonClicked),a 3085 ld ix,GenericButtonTable3086 ld (PreviousButtonClickedIX),ix3088 call SetLevelUpButtons3089 call IncreasePrimairySkill3091 call SetLevelUpGraphics 3092 call SetLevelUpHeroIcon3093 call SetPrimairySkillUpIcon 3094 call SetLevelUpText3095 call SwapAndSetPage 3096 call SetLevelUpGraphics 3097 call SetLevelUpHeroIcon3098 call SetPrimairySkillUpIcon 3099 call SetLevelUpText3101 .engine: 3102 call SwapAndSetPage 3103 call PopulateControls 31053114 3115 ld ix,GenericButtonTable3116 call CheckButtonInteractionControlsNotOnInt3118 call .CheckButtonClicked 3122 3123 ld ix,(PreviousButtonClickedIX) 3124 ld a,(ix+GenericButtonStatus)3125 push af3126 ld a,(PreviousButtonClicked)3127 cp 2553128 jr z,.EndMarkButton 3129 ld (ix+GenericButtonStatus),%1010 00113130 .EndMarkButton:3131 3134 ld ix,GenericButtonTable3135 call SetGenericButtons 3138 3139 pop af3140 ld ix,(PreviousButtonClickedIX) 3141 ld (ix+GenericButtonStatus),a3142 31463148 halt3149 jp .engine3151 .CheckButtonClicked:3152 ret nc3153 ld a,%1100 00113154 ld (GenericButtonTable),a 3156 ld a,b3157 cp 3 3158 jr z,.VButton3159 ld (PreviousButtonClicked),a3160 ld (PreviousButtonClickedIX),ix3161 cp 2 3162 jr z,.LeftSkillButton3163 3164 .RightSkillButton: 3165 ld a,(SkillInLevelUpSlot2)3166 jp SetLevelUpHeroSkillsInTable3168 .LeftSkillButton:3169 ld a,(SkillInLevelUpSlot1)3170 jp SetLevelUpHeroSkillsInTable3171 3172 .VButton:3173 pop af 3174 ld a,(PreviousButtonClicked)3175 cp 2 3176 jr z,.AddSkillOnTheLeft3178 .AddSkillOnTheRight:3179 ld ix,(plxcurrentheroAddress) 3180 ld a,(SkillInLevelUpSlot2)3181 ld b,a3182 ld a,(PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?)3183 jp AddThisSkillToHero3185 .AddSkillOnTheLeft:3186 ld ix,(plxcurrentheroAddress) 3187 ld a,(SkillInLevelUpSlot1)3188 ld b,a3189 ld a,(PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?)3190 jp AddThisSkillToHero3192SetLevelUpHeroSkillsInTable:3193 ex af,af'3194 ld a,HeroOverviewCodeBlock 3195 call block34 3197 ex af,af'3198 ld de,TextSkillsWindowButton13199 call .SetheroSkill3201 ld a,CastleOverviewCodeBlock 3202 call block1234 3204 ld hl,$4000 + (147*128) + (006/2) - 1283205 ld de,$0000 + (162*128) + (028/2) - 1283206 ld bc,$0000 + (020*256) + (148/2)3207 ld a,LevelUpBlock 3208 call CopyRamToVramCorrectedCastleOverview 3210 ld b,030 3211 ld c,162 3212 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3213 call SetText 3214 call SwapAndSetPage 3216 ld hl,$4000 + (147*128) + (006/2) - 1283217 ld de,$0000 + (162*128) + (028/2) - 1283218 ld bc,$0000 + (020*256) + (148/2)3219 ld a,LevelUpBlock 3220 call CopyRamToVramCorrectedCastleOverview 3222 ld b,030 3223 ld c,162 3224 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3225 jp SetText 3227 .SetheroSkill:3228 ld l,a3229 ld h,03230 add hl,hl 3231 add hl,hl 3232 add hl,hl 3233 push hl3234 add hl,hl 3235 add hl,hl 3236 add hl,hl 3237 add hl,hl 3238 pop bc3239 add hl,bc 3240 ld bc,SkillEmpty+$40003241 add hl,bc3242 ld bc,LenghtSkillDescription3243 ldir3244 ret3254AddThisSkillToHero:3255 call .goAdd3256 call SetTotalManaHero3257 ld a,(HeroTotalManaBeforeLevelingUp)3258 ld b,a3259 ld a,(ix+HeroTotalMana)3260 sub a,b 3261 add a,(ix+HeroMana) 3262 ld (ix+HeroMana),a3263 ret3265 .goAdd:3266 cp 13267 jr z,.HeroSlot13268 cp 23269 jr z,.HeroSlot23270 cp 33271 jr z,.HeroSlot33272 cp 43273 jr z,.HeroSlot43274 cp 53275 jr z,.HeroSlot53276 cp 63277 jr z,.HeroSlot63278 3279 .SkillShouldBePlacedInaFreeSlot:3280 xor a3281 cp (ix+HeroSkills+1)3282 jr z,.HeroSlot23283 cp (ix+HeroSkills+2)3284 jr z,.HeroSlot33285 cp (ix+HeroSkills+3)3286 jr z,.HeroSlot43287 cp (ix+HeroSkills+4)3288 jr z,.HeroSlot53290 .HeroSlot6:3291 ld (ix+HeroSkills+5),b3292 ret3293 .HeroSlot5:3294 ld (ix+HeroSkills+4),b3295 ret3296 .HeroSlot4:3297 ld (ix+HeroSkills+3),b3298 ret3299 .HeroSlot3:3300 ld (ix+HeroSkills+2),b3301 ret3302 .HeroSlot2:3303 ld (ix+HeroSkills+1),b3304 ret3305 .HeroSlot1:3306 ld (ix+HeroSkills+0),b3307 ret 3320SetLevelUpButtons:3321 ld hl,LevelUpButtonTable-23322 ld de,GenericButtonTable-23323 ld bc,2+(GenericButtonTableLenghtPerButton*03)3324 ldir3326 call .SetButtons3328 ld a,(SkillInLevelUpSlot1)3329 ld hl,SkillInLevelUpSlot23330 cp (hl)3331 ret nz3333 ld a,863334 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXleft),a3335 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXleft),a3336 ld a,86+303337 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXright),a3338 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXright),a3339 ret3342 .SetButtons:3344 ld ix,(plxcurrentheroAddress) 3346 ld a,(ix+HeroSkills+0) 3350 exx3351 ld hl,SkillInLevelUpSlot13352 ld bc,PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?3353 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*01+13354 exx3356 cp 133357 jp c,.SetLeftButtonMightRightButtonAdventureOrWizzardry3358 cp 223359 jp c,.SetLeftButtonAdventureRightButtonWizzardryOrMight3360 jp .SetLeftButtonWizzardryRightButtonMightOrAdventure3362 .SetLeftButtonWizzardryRightButtonMightOrAdventure:3363 call SetButtonWizzardry3364 exx3365 ld hl,SkillInLevelUpSlot23366 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3367 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13368 exx3369 ld a,r3370 and 13371 jp z,SetButtonMight3372 jp SetButtonAdventure3374 .SetLeftButtonMightRightButtonAdventureOrWizzardry:3375 call SetButtonMight3376 exx3377 ld hl,SkillInLevelUpSlot23378 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3379 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13380 exx3381 ld a,r3382 and 13383 jp z,SetButtonAdventure3384 jp SetButtonWizzardry3386 .SetLeftButtonAdventureRightButtonWizzardryOrMight:3387 call SetButtonAdventure3388 exx3389 ld hl,SkillInLevelUpSlot23390 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3391 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13392 exx3393 ld a,r3394 and 13395 jp z,SetButtonWizzardry3396 jp SetButtonMight3398SetSkillButton: 3399 inc b 3400 ld a,b3401 exx3402 ld (hl),a 3403 exx3404 ld a,c3405 exx3406 ld (bc),a3407 push de3408 exx3409 pop de3410 ld bc,63411 ldir3412 ret3414CheckAmountOfExpertSkills_Wizzardry:3415 ld b,0 3416 ld a,24 3417 call SearchExpertSkill3418 ld a,27 3419 call SearchExpertSkill3420 ld a,30 3421 call SearchExpertSkill3422 ld a,33 3423 call SearchExpertSkill3424 ret3426CheckAmountOfExpertSkills_Adventure:3427 ld b,0 3428 ld a,15 3429 call SearchExpertSkill3430 ld a,18 3431 call SearchExpertSkill3432 ld a,21 3433 call SearchExpertSkill3434 ret3438SetButtonWizzardry:3439 call IsItPossibleToLevelOrSetAWizzardrySkill?3440 jp c,SetButtonAdventure 3442 call CheckAmountOfExpertSkills_Wizzardry3443 ld a,b3444 cp 43445 jp z,SetButtonAdventure 3447 ld a,r3448 and 33449 jr z,.Intelligence3450 dec a3451 jr z,.Sorcery3452 dec a3453 jr z,.Wisdom3455 .Necromancy:3456 call IsItPossibleToLevelOrSetNecromancy?3457 jr c,.Wisdom 3459 ld b,31 3460 call CheckSkillAvailable 3461 jr c,.Wisdom 3462 ld hl,ButtonNecromancy3463 jp SetSkillButton3465 .Wisdom:3466 call IsItPossibleToLevelOrSetWisdom?3467 jr c,.Sorcery 3469 ld b,28 3470 call CheckSkillAvailable 3471 jr c,.Sorcery 3472 ld hl,ButtonWisdom3473 jp SetSkillButton3475 .Sorcery:3476 call IsItPossibleToLevelOrSetSorcery?3477 jr c,.Intelligence 3479 ld b,25 3480 call CheckSkillAvailable 3481 jr c,.Intelligence 3482 ld hl,ButtonSorcery3483 jp SetSkillButton3485 .Intelligence: 3486 call IsItPossibleToLevelOrSetIntelligence?3487 jr c,.Necromancy 3489 ld b,22 3490 call CheckSkillAvailable 3491 jr c,.Necromancy 3492 ld hl,ButtonIntelligence3493 jp SetSkillButton34953496SetButtonAdventure:3497 call IsItPossibleToLevelOrSetAnAdventureSkill?3498 jp c,SetButtonMight 3500 call CheckAmountOfExpertSkills_Adventure3501 ld a,b3502 cp 33503 jp z,SetButtonMight 3505 ld a,r3506 and 33507 jr z,.Estates3508 dec a3509 jr z,.Learning3510 dec a3511 jr z,.Logistics3513 .Learning:3514 call IsItPossibleToLevelOrSetLearning?3515 jr c,.Logistics 3517 ld b,16 3518 call CheckSkillAvailable 3519 jr c,.Logistics 3520 ld hl,ButtonLearning3521 jp SetSkillButton3523 .Logistics:3524 call IsItPossibleToLevelOrSetLogistics?3525 jr c,.Estates 3527 ld b,19 3528 call CheckSkillAvailable 3529 jr c,.Estates 3530 ld hl,ButtonLogistics3531 jp SetSkillButton3532 3533 .Estates:3534 call IsItPossibleToLevelOrSetEstates?3535 jr c,.Learning 3537 ld b,13 3538 call CheckSkillAvailable 3539 jr c,.Learning 3540 ld hl,ButtonEstates3541 jp SetSkillButton3544CheckAmountOfExpertSkills_Might:3545 ld b,0 3546 ld a,03 3547 call SearchExpertSkill3548 ld a,06 3549 call SearchExpertSkill3550 ld a,09 3551 call SearchExpertSkill3552 ld a,12 3553 call SearchExpertSkill3554 ret3556SearchExpertSkill:3557 cp (ix+HeroSkills+0) 3558 jr z,.ExpertSkillFound3559 cp (ix+HeroSkills+1) 3560 jr z,.ExpertSkillFound3561 cp (ix+HeroSkills+2) 3562 jr z,.ExpertSkillFound3563 cp (ix+HeroSkills+3) 3564 jr z,.ExpertSkillFound3565 cp (ix+HeroSkills+4) 3566 jr z,.ExpertSkillFound3567 cp (ix+HeroSkills+5) 3568 jr z,.ExpertSkillFound3569 ret3570 .ExpertSkillFound:3571 inc b3572 ret35743575IsItPossibleToLevelOrSetAMightSkill?: 3576 xor a3577 call CheckSkill 3578 ld a,1 3579 call CheckSkill 3580 ld a,2 3581 call CheckSkill 3583 ld a,4 3584 call CheckSkill 3585 ld a,5 3586 call CheckSkill 3588 ld a,7 3589 call CheckSkill 3590 ld a,8 3591 call CheckSkill 3593 ld a,10 3594 call CheckSkill 3595 ld a,11 3596 call CheckSkill 3598 scf3599 ret36013602IsItPossibleToLevelOrSetAnAdventureSkill?: 3603 xor a3604 call CheckSkill 3605 ld a,13 3606 call CheckSkill 3607 ld a,14 3608 call CheckSkill 3610 ld a,16 3611 call CheckSkill 3612 ld a,17 3613 call CheckSkill 3615 ld a,19 3616 call CheckSkill 3617 ld a,20 3618 call CheckSkill 3620 scf3621 ret36233624IsItPossibleToLevelOrSetAWizzardrySkill?: 3625 xor a3626 call CheckSkill 3627 ld a,22 3628 call CheckSkill 3629 ld a,23 3630 call CheckSkill 3632 ld a,25 3633 call CheckSkill 3634 ld a,26 3635 call CheckSkill 3637 ld a,28 3638 call CheckSkill 3639 ld a,29 3640 call CheckSkill 3642 ld a,31 3643 call CheckSkill 3644 ld a,32 3645 call CheckSkill 3647 scf3648 ret3649 3650IsItPossibleToLevelOrSetNecromancy?:3651 xor a3652 call CheckSkill 3653 ld a,31 3654 call CheckSkill 3655 ld a,32 3656 call CheckSkill 3658 scf3659 ret3661IsItPossibleToLevelOrSetWisdom?:3662 xor a3663 call CheckSkill 3664 ld a,28 3665 call CheckSkill 3666 ld a,29 3667 call CheckSkill 3669 scf3670 ret3672IsItPossibleToLevelOrSetSorcery?:3673 xor a3674 call CheckSkill 3675 ld a,25 3676 call CheckSkill 3677 ld a,26 3678 call CheckSkill 3680 scf3681 ret3683IsItPossibleToLevelOrSetIntelligence?:3684 xor a3685 call CheckSkill 3686 ld a,22 3687 call CheckSkill 3688 ld a,23 3689 call CheckSkill 3691 scf3692 ret3694IsItPossibleToLevelOrSetLogistics?:3695 xor a3696 call CheckSkill 3697 ld a,19 3698 call CheckSkill 3699 ld a,20 3700 call CheckSkill 3702 scf3703 ret3705IsItPossibleToLevelOrSetLearning?:3706 xor a3707 call CheckSkill 3708 ld a,16 3709 call CheckSkill 3710 ld a,17 3711 call CheckSkill 3713 scf3714 ret3716IsItPossibleToLevelOrSetEstates?:3717 xor a3718 call CheckSkill 3719 ld a,13 3720 call CheckSkill 3721 ld a,14 3722 call CheckSkill 3724 scf3725 ret3727IsItPossibleToLevelOrSetResistance?:3728 xor a3729 call CheckSkill 3730 ld a,10 3731 call CheckSkill 3732 ld a,11 3733 call CheckSkill 3735 scf3736 ret3738IsItPossibleToLevelOrSetArmourer?:3739 xor a3740 call CheckSkill 3741 ld a,7 3742 call CheckSkill 3743 ld a,8 3744 call CheckSkill 3746 scf3747 ret3749IsItPossibleToLevelOrSetOffence?:3750 xor a3751 call CheckSkill 3752 ld a,4 3753 call CheckSkill 3754 ld a,5 3755 call CheckSkill 3757 scf3758 ret3760IsItPossibleToLevelOrSetArchery?:3761 xor a3762 call CheckSkill 3763 ld a,1 3764 call CheckSkill 3765 ld a,2 3766 call CheckSkill 3768 scf3769 ret3771CheckSkill:3772 cp (ix+HeroSkills+0) 3773 jr z,.SkillFound3774 cp (ix+HeroSkills+1) 3775 jr z,.SkillFound3776 cp (ix+HeroSkills+2) 3777 jr z,.SkillFound3778 cp (ix+HeroSkills+3) 3779 jr z,.SkillFound3780 cp (ix+HeroSkills+4) 3781 jr z,.SkillFound3782 cp (ix+HeroSkills+5) 3783 jr z,.SkillFound3784 ret3785 .SkillFound:3786 pop bc 3787 ret37893790SetButtonMight:3791 call IsItPossibleToLevelOrSetAMightSkill?3792 jp c,SetButtonWizzardry 3793 3794 call CheckAmountOfExpertSkills_Might3795 ld a,b3796 cp 43797 jp z,SetButtonWizzardry 3798 3799 ld a,r3800 and 33801 jr z,.Archery3802 dec a3803 jr z,.Offence3804 dec a3805 jr z,.Armourer3807 .Resistance:3808 call IsItPossibleToLevelOrSetResistance?3809 jr c,.Armourer 3811 ld b,10 3812 call CheckSkillAvailable 3813 jr c,.Armourer 3814 ld hl,ButtonResistance3815 jp SetSkillButton3817 .Armourer:3818 call IsItPossibleToLevelOrSetArmourer?3819 jr c,.Offence 3820 3821 ld b,07 3822 call CheckSkillAvailable 3823 jr c,.Offence 3824 ld hl,ButtonArmourer3825 jp SetSkillButton3827 .Offence:3828 call IsItPossibleToLevelOrSetOffence?3829 jr c,.Archery 3831 ld b,04 3832 call CheckSkillAvailable 3833 jr c,.Archery 3834 ld hl,ButtonOffence3835 jp SetSkillButton3836 3837 .Archery:3838 call IsItPossibleToLevelOrSetArchery?3839 jr c,.Resistance 3841 ld b,01 3842 call CheckSkillAvailable 3843 jr c,.Resistance 3844 ld hl,ButtonArchery3845 jp SetSkillButton38483849ButtonArchery: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 1283850ButtonOffence: dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 1283851ButtonArmourer: dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (066*128) + (060/2) - 1283852ButtonResistance: dw $4000 + (000*128) + (090/2) - 128 | dw $4000 + (033*128) + (090/2) - 128 | dw $4000 + (066*128) + (090/2) - 12838533854ButtonEstates: dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (066*128) + (120/2) - 1283855ButtonLearning: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (033*128) + (150/2) - 128 | dw $4000 + (066*128) + (150/2) - 1283856ButtonLogistics: dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (066*128) + (180/2) - 12838573858ButtonIntelligence:dw $4000 + (000*128) + (210/2) - 128 | dw $4000 + (033*128) + (210/2) - 128 | dw $4000 + (066*128) + (210/2) - 1283859ButtonSorcery: dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (030/2) - 128 | dw $4000 + (099*128) + (060/2) - 1283860ButtonWisdom: dw $4000 + (099*128) + (090/2) - 128 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (150/2) - 1283861ButtonNecromancy: dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (210/2) - 128 | dw $4000 + (132*128) + (000/2) - 1283863CheckSkillAvailable:3864 3865 ld a,(ix+HeroSkills+0) 3866 ld c,1 3867 cp b3868 ret z3869 ld a,(ix+HeroSkills+1) 3870 ld c,2 3871 cp b3872 ret z3873 ld a,(ix+HeroSkills+2) 3874 ld c,3 3875 cp b3876 ret z3877 ld a,(ix+HeroSkills+3) 3878 ld c,4 3879 cp b3880 ret z3881 ld a,(ix+HeroSkills+4) 3882 ld c,5 3883 cp b3884 ret z3885 ld a,(ix+HeroSkills+5) 3886 ld c,6 3887 cp b3888 ret z3889 3890 inc b3891 ld a,(ix+HeroSkills+0) 3892 ld c,1 3893 cp b3894 ret z3895 ld a,(ix+HeroSkills+1) 3896 ld c,2 3897 cp b3898 ret z3899 ld a,(ix+HeroSkills+2) 3900 ld c,3 3901 cp b3902 ret z3903 ld a,(ix+HeroSkills+3) 3904 ld c,4 3905 cp b3906 ret z3907 ld a,(ix+HeroSkills+4) 3908 ld c,5 3909 cp b3910 ret z3911 ld a,(ix+HeroSkills+5) 3912 ld c,6 3913 cp b3914 ret z3915 3916 inc b3917 ld a,(ix+HeroSkills+0) 3918 cp b3919 jr z,.ExpertSkillAlreadyLearned3920 ld a,(ix+HeroSkills+1) 3921 cp b3922 jr z,.ExpertSkillAlreadyLearned3923 ld a,(ix+HeroSkills+2) 3924 cp b3925 jr z,.ExpertSkillAlreadyLearned3926 ld a,(ix+HeroSkills+3) 3927 cp b3928 jr z,.ExpertSkillAlreadyLearned3929 ld a,(ix+HeroSkills+4) 3930 cp b3931 jr z,.ExpertSkillAlreadyLearned3932 ld a,(ix+HeroSkills+5) 3933 cp b3934 jr z,.ExpertSkillAlreadyLearned3935 dec b3936 dec b3937 dec b3938 ld c,7 3939 or a 3940 ret3942 .ExpertSkillAlreadyLearned:3943 scf3944 ret3947395439593967LevelUpButtonTableGfxBlock: db SecondarySkillsButtonsBlock3968LevelUpButtonTableAmountOfButtons: db 33969LevelUpButtonTable: 3972 db %0100 0011 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 3973 3974 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 3975 3976 db %1100 0011 | dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1283978.Button1Ytop: equ 1373979.Button1YBottom: equ .Button1Ytop + 0193980.Button1XLeft: equ 1563981.Button1XRight: equ .Button1XLeft + 0203983.Button2Ytop: equ 1113984.Button2YBottom: equ .Button2Ytop + 0333985.Button2XLeft: equ 0623986.Button2XRight: equ .Button2XLeft + 0303988.Button3Ytop: equ 1113989.Button3YBottom: equ .Button3Ytop + 0333990.Button3XLeft: equ 1123991.Button3XRight: equ .Button3XLeft + 0303993SetLevelUpHeroIcon:3994 ld ix,(plxcurrentheroAddress) 3995 ld l,(ix+HeroSpecificInfo+0) 3996 ld h,(ix+HeroSpecificInfo+1)3997 push hl3998 pop ix3999 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 4000 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 4001 ld bc,$40004002 xor a4003 sbc hl,bc4004 ld de,$0000 + (034*128) + (094/2) - 1284005 ld bc,NXAndNY16x30HeroIcon4006 ld a,Hero16x30PortraitsBlock 4007 jp CopyRamToVramCorrectedCastleOverview 4009TextLevelUp2:4010 db "has gained a level",2554011TextLevelUp3:4012 db "level",2554013TextLevelUp5a:4014 db "  Attack + 1",2554015TextLevelUp5b:4016 db "  Defense + 1",2554017TextLevelUp5c:4018 db " Knowledge + 1",2554019TextLevelUp5d:4020 db "Spell Power + 1",2554021TextLevelUp6:4022 db "or",2554023 4024CenterHeroNameHasGainedALevel:4025 ld d,0 4026 push hl4027 .loop:4028 ld a,(hl)4029 cp 2554030 jr z,.EndNameFound4031 inc d4032 inc hl4033 dec b4034 dec b4035 jr .loop4036 .EndNameFound:4037 pop hl4038 ret4039 4040SetLevelUpText:4041 call SetCastleOverViewFontPage0Y212 4043 ld ix,(plxcurrentheroAddress) 4045 ld b,032+(17*2) 4046 ld c,022+00 4047 ld l,(ix+HeroSpecificInfo+0) 4048 ld h,(ix+HeroSpecificInfo+1)4049 call CenterHeroNameHasGainedALevel4050 call SetText 4052 ld a,(PutLetter+dx) 4053 add a,54054 4055 ld b,a 4056 ld c,022+00 4057 ld hl,TextLevelUp24058 call SetText 4060 4061 ld b,073-00 4062 ld c,071+00 4063 ld hl,TextLevelUp34064 call SetText 4066 ld a,(ix+HeroLevel) 4067 ld l,a4068 ld h,04069 ld b,094-00 4070 ld c,071+00 4071 call SetNumber16BitCastle4072 4073 ld l,(ix+HeroSpecificInfo+0) 4074 ld h,(ix+HeroSpecificInfo+1)4075 ld de,HeroInfoClass4076 add hl,de4078 ld a,(PutLetter+dx) 4079 add a,54080 ld b,a 4081 ld c,071+00 4082 call SetText 4084 call SetPrimairySkillLevelUpInA4085 or a4086 ld hl,TextLevelUp5a 4087 jr z,.PrimairySkillUpFound4088 dec a4089 ld hl,TextLevelUp5b 4090 jr z,.PrimairySkillUpFound4091 dec a4092 ld hl,TextLevelUp5c 4093 jr z,.PrimairySkillUpFound4094 ld hl,TextLevelUp5d 4095 .PrimairySkillUpFound: 4096 ld b,072+00 4097 ld c,102+00 4098 call SetText 4100 ld b,099+00 4101 ld c,125+00 4102 ld hl,TextLevelUp64103 call SetText 4105 ld a,(SkillInLevelUpSlot1)4106 ld l,a4107 ld h,04108 add hl,hl 4109 push hl4110 pop bc4111 add hl,hl 4112 add hl,hl 4113 push hl4114 pop de4115 add hl,hl 4116 add hl,de 4117 add hl,bc 4118 ld de,SkillTextEmpty4119 add hl,de4121 ld a,(SkillInLevelUpSlot1)4122 ld b,a4123 ld a,(SkillInLevelUpSlot2)4124 cp b4125 ld b,(062+112)/2 4126 jp z,.SkillsAreTheSame4127 4128 ld b,062+00 4129 ld c,145+00 4130 call SetText 4132 ld a,(SkillInLevelUpSlot2)4133 ld l,a4134 ld h,04135 add hl,hl 4136 push hl4137 pop bc4138 add hl,hl 4139 add hl,hl 4140 push hl4141 pop de4142 add hl,hl 4143 add hl,de 4144 add hl,bc 4145 ld de,SkillTextEmpty4146 add hl,de4147 ld b,112+00 4149 .SkillsAreTheSame:4150 ld c,145+00 4151 call SetText 4152 ret4154SkillTextEmpty:4155 db "            ",254 4156 db "            ",2554157SkillTextArcheryBasic:4158 db "Basic       ",254 4159 db "Archery     ",2554160SkillTextArcheryAdvanced:4161 db "Advanced    ",2544162 db "Archery     ",2554163SkillTextArcheryExpert:4164 db "Expert      ",2544165 db "Archery     ",2554166SkillTextOffenceBasic:4167 db "Basic       ",254 4168 db "Offence     ",2554169SkillTextOffenceAdvanced:4170 db "Advanced    ",2544171 db "Offence     ",2554172SkillTextOffenceExpert:4173 db "Expert      ",2544174 db "Offence     ",2554175SkillTextArmourerBasic:4176 db "Basic       ",254 4177 db "Armorer     ",2554178SkillTextArmourerAdvanced:4179 db "Advanced    ",2544180 db "Armorer     ",2554181SkillTextArmourerExpert:4182 db "Expert      ",2544183 db "Armorer     ",2554184SkillTextresistanceBasic:4185 db "Basic       ",254 4186 db "Resistance  ",2554187SkillTextresistanceAdvanced:4188 db "Advanced    ",2544189 db "Resistance  ",2554190SkillTextresistanceExpert:4191 db "Expert      ",2544192 db "Resistance  ",2554193SkillTextestatesBasic:4194 db "Basic       ",254 4195 db "Estates     ",2554196SkillTextestatesAdvanced:4197 db "Advanced    ",2544198 db "Estates     ",2554199SkillTextestatesExpert:4200 db "Expert      ",2544201 db "Estates     ",2554202SkillTextlearningBasic:4203 db "Basic       ",254 4204 db "Learning    ",2554205SkillTextlearningAdvanced:4206 db "Advanced    ",2544207 db "Learning    ",2554208SkillTextlearningExpert:4209 db "Expert      ",2544210 db "Learning    ",2554211SkillTextlogisticsBasic:4212 db "Basic       ",254 4213 db "Logistics   ",2554214SkillTextlogisticsAdvanced:4215 db "Advanced    ",2544216 db "Logistics   ",2554217SkillTextlogisticsExpert:4218 db "Expert      ",2544219 db "Logistics   ",2554220SkillTextintelligenceBasic:4221 db "Basic       ",254 4222 db "Intelligence",2554223SkillTextintelligenceAdvanced:4224 db "Advanced    ",2544225 db "Intelligence",2554226SkillTextintelligenceExpert:4227 db "Expert      ",2544228 db "Intelligence",2554229SkillTextsorceryBasic:4230 db "Basic       ",254 4231 db "Sorcery     ",2554232SkillTextsorceryAdvanced:4233 db "Advanced    ",2544234 db "Sorcery     ",2554235SkillTextsorceryExpert:4236 db "Expert      ",2544237 db "Sorcery     ",2554238SkillTextwisdomBasic:4239 db "Basic       ",254 4240 db "Wisdom      ",2554241SkillTextwisdomAdvanced:4242 db "Advanced    ",2544243 db "Wisdom      ",2554244SkillTextwisdomExpert:4245 db "Expert      ",2544246 db "Wisdom      ",2554247SkillTextnecromancyBasic:4248 db "Basic       ",254 4249 db "Necromancy  ",2554250SkillTextnecromancyAdvanced:4251 db "Advanced    ",2544252 db "Necromancy  ",2554253SkillTextnecromancyExpert:4254 db "Expert      ",2544255 db "Necromancy  ",2554257SetLevelUpGraphics:4258 ld hl,$4000 + (000*128) + (000/2) - 128 4259 ld de,$0000 + (015*128) + (022/2) - 1284260 ld bc,$0000 + (173*256) + (160/2)4261 ld a,LevelUpBlock 4262 jp CopyRamToVramCorrectedCastleOverview 4264SetPrimairySkillUpIcon:4265 call SetPrimairySkillLevelUpInA4266 or a 4267 ld hl,$4000 + (132*128) + (090/2) - 128 4268 jr z,.PrimairySkillUpFound4269 dec a 4270 ld hl,$4000 + (132*128) + (106/2) - 128 4271 jr z,.PrimairySkillUpFound4272 dec a 4273 ld hl,$4000 + (132*128) + (122/2) - 128 4274 jr z,.PrimairySkillUpFound4275 ld hl,$4000 + (132*128) + (138/2) - 128 4276 .PrimairySkillUpFound: 4278 ld de,$0000 + (081*128) + (094/2) - 1284279 ld bc,$0000 + (016*256) + (016/2)4280 ld a,SecondarySkillsButtonsBlock 4281 jp CopyRamToVramCorrectedCastleOverview 4283IncreasePrimairySkill:4284 ld a,34285 ld (SetHeroArmyAndStatusInHud?),a4287 call SetPrimairySkillLevelUpInA4288 or a 4289 jr z,.AttackUp4290 dec a 4291 jr z,.DefenseUp4292 dec a 4293 jr z,.KnowledgeUp4295 .SpellDamageUp: 4296 inc (ix+HeroStatSpellDamage)4297 ret4298 .KnowledgeUp:4299 inc (ix+HeroStatKnowledge)4300 ret4301 .DefenseUp:4302 inc (ix+HeroStatDefense)4303 ret4304 .AttackUp:4305 inc (ix+HeroStatAttack)4306 ret4308PrimairySkillLevelUpMight:4309 db 0,1,0,1,0,1,2,34310PrimairySkillLevelUpAdventure:4311 db 0,1,2,3,0,1,2,34312PrimairySkillLevelUpWizzardry:4313 db 2,3,2,3,2,3,0,14315SetPrimairySkillLevelUpInA:4316 ld ix,(plxcurrentheroAddress) 4318 ld a,(ix+HeroSkills+0) 4320 cp 134321 ld hl,PrimairySkillLevelUpMight4322 jp c,.ClassFound4323 cp 224324 ld hl,PrimairySkillLevelUpAdventure4325 jp c,.ClassFound4326 ld hl,PrimairySkillLevelUpWizzardry4327 .ClassFound:4329 ld a,(framecounter)4330 and 74331 ld d,04332 ld e,a4333 add hl,de4334 ld a,(hl)4335 ret4342DisplayChestCode:4343call ScreenOn4344 ld a,255 4345 ld (PreviousButtonClicked),a 4346 ld ix,GenericButtonTable4347 ld (PreviousButtonClickedIX),ix4349 call SetChestButtons4350 4351 call SetChestGraphics 4352 call SetChestText4353 call SwapAndSetPage 4354 call SetChestGraphics 4355 call SetChestText4357 .engine: 4358 call SwapAndSetPage 4359 call PopulateControls 43614370 4371 ld ix,GenericButtonTable4372 call CheckButtonInteractionControlsNotOnInt4374 call .CheckButtonClicked 4376 4377 ld ix,(PreviousButtonClickedIX) 4378 ld a,(ix+GenericButtonStatus)4379 push af4380 ld a,(PreviousButtonClicked)4381 cp 2554382 jr z,.EndMarkButton 4383 ld (ix+GenericButtonStatus),%1010 00114384 .EndMarkButton:4385 4388 ld ix,GenericButtonTable4389 call SetGenericButtons 4392 4393 pop af4394 ld ix,(PreviousButtonClickedIX) 4395 ld (ix+GenericButtonStatus),a4396 44024404 halt4405 jp .engine4407 .CheckButtonClicked:4408 ret nc4409 ld a,%1100 00114410 ld (GenericButtonTable),a 4412 ld a,b4413 cp 3 4414 jr z,.VButton4415 ld (PreviousButtonClicked),a4416 ld (PreviousButtonClickedIX),ix4417 cp 2 4418 jr z,.MoneyButton4419 4420 .XPButton: 4421 ret4423 .MoneyButton:4424 ret4425 4426 .VButton:4427 pop af 4428 ld a,(PreviousButtonClicked)4429 cp 2 4430 jr z,.AddMoney4432 .AddXp:4433 ld ix,(plxcurrentheroAddress) 4435 ld a,(BigChest?)4436 or a4437 ld hl,750 4438 jr z,.SetAmountOfXp 4439 ld hl,1000 4440 .SetAmountOfXp:44434444 call SetChestText.AddXPBoostFromLearning 4445 4447 ld e,(ix+HeroXp+0)4448 ld d,(ix+HeroXp+1)4449 add hl,de4450 ret c4451 ld (ix+HeroXp+0),l4452 ld (ix+HeroXp+1),h4453 ret4455 .AddMoney:4456 call SetResourcesCurrentPlayerinIX 4457 4458 ld a,(BigChest?)4459 or a4460 ld de,1000 4461 jr z,.SetAmountOfGold 4462 ld de,1500 4463 .SetAmountOfGold: 4464 4465 ld l,(ix+0)4466 ld h,(ix+1)4467 add hl,de4468 ret c4469 ld (ix+0),l4470 ld (ix+1),h4471 ld a,34472 ld (SetResources?),a 4473 ret 4475SetChestButtons:4476 ld hl,ChestButtonTable-24477 ld de,GenericButtonTable-24478 ld bc,2+(GenericButtonTableLenghtPerButton*03)4479 ldir4480 ret4482ChestButtonTableGfxBlock: db PlayerStartTurnBlock4483ChestButtonTableAmountOfButtons: db 34484ChestButtonTable: 4487 db %0100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4488 4489 db %1100 0011 | dw $4000 + (000*128) + (184/2) - 128 | dw $4000 + (032*128) + (184/2) - 128 | dw $4000 + (064*128) + (184/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 4490 4491 db %1100 0011 | dw $4000 + (000*128) + (216/2) - 128 | dw $4000 + (032*128) + (216/2) - 128 | dw $4000 + (064*128) + (216/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1284493.Button1Ytop: equ 1574494.Button1YBottom: equ .Button1Ytop + 0194495.Button1XLeft: equ 1644496.Button1XRight: equ .Button1XLeft + 0204498.Button2Ytop: equ 1374499.Button2YBottom: equ .Button2Ytop + 0324500.Button2XLeft: equ 0584501.Button2XRight: equ .Button2XLeft + 0324503.Button3Ytop: equ 1374504.Button3YBottom: equ .Button3Ytop + 0324505.Button3XLeft: equ 1164506.Button3XRight: equ .Button3XLeft + 0324509TextChest1:4510 db "Chest",2554511TextChest2:4512 db "Having scoured the land you stumble",2544513 db "upon hidden treasure: The choice lies",2544514 db "between claiming the gold or bestowing",2544515 db "it upon peasants for enlightenment.",2554516TextChest3:4517 db "Which do you choose ?",2554518TextChest4:4519 db "or",2554521 4522SetChestText:4523 call SetCastleOverViewFontPage0Y212 4525 ld b,093+00 4526 ld c,022+00 4527 ld hl,TextChest14528 call SetText 4530 ld b,025+00 4531 ld c,032+00 4532 ld hl,TextChest24533 call SetText 4535 ld b,061+00 4536 ld c,130+00 4537 ld hl,TextChest34538 call SetText 4540 ld b,097+00 4541 ld c,151+00 4542 ld hl,TextChest44543 call SetText 4545 ld a,(BigChest?)4546 or a4547 ld hl,1000 4548 jr z,.SetAmountOfGold 4549 ld hl,1500 4550 .SetAmountOfGold:4551 ld b,065+00 4552 ld c,171+00 4553 call SetNumber16BitCastle4555 ld a,(BigChest?)4556 or a4557 ld hl,750 4558 jr z,.SetAmountOfXp 4559 ld hl,1000 4560 .SetAmountOfXp:4562 ld ix,(plxcurrentheroAddress) 4563 call .AddXPBoostFromLearning 4564 4566 4567 ld b,121+00 4568 ld c,171+00 4569 call SetNumber16BitCastle4570 ret4574.AddXPBoostFromLearning: 4575 ld a,(ix+HeroSkills+0)4576 call .CheckSkillLearning4577 ld a,(ix+HeroSkills+1)4578 call .CheckSkillLearning4579 ld a,(ix+HeroSkills+2)4580 call .CheckSkillLearning4581 ld a,(ix+HeroSkills+3)4582 call .CheckSkillLearning4583 ld a,(ix+HeroSkills+4)4584 call .CheckSkillLearning4585 ld a,(ix+HeroSkills+5)4586 call .CheckSkillLearning4587 ret4589 .CheckSkillLearning:4590 cp 16 4591 jr z,.BasicLearningFound4592 cp 17 4593 jr z,.AdvancedLearningFound4594 cp 18 4595 jr z,.ExpertLearningFound4596 ret4598 .BasicLearningFound:4599 ld de,10 4600 jp .ApplyPercentBasedBoost4602 .AdvancedLearningFound:4603 ld de,5 4604 jp .ApplyPercentBasedBoost4606 .ExpertLearningFound:4607 ld de,10 4608 call .ApplyPercentBasedBoost4609 add hl,bc 4610 add hl,bc 4611 ret4613.ApplyPercentBasedBoost:4614 push hl 4615 4616 push hl4617 pop bc46184619 call DivideBCbyDE 4621 pop hl4622 add hl,bc 4623 ret4626SetChestGraphics:4627 ld hl,$4000 + (000*128) + (000/2) - 128 4628 ld de,$0000 + (015*128) + (016/2) - 1284629 ld bc,$0000 + (168*256) + (174/2)4630 ld a,ChestBlock 4631 call CopyRamToVramCorrectedCastleOverview 4633 ld a,(BigChest?)4634 or a4635 ret nz 4637 ld hl,$4000 + (000*128) + (174/2) - 128 4638 ld de,$0000 + (064*128) + (074/2) - 1284639 ld bc,$0000 + (062*256) + (058/2)4640 ld a,ChestBlock 4641 jp CopyRamToVramCorrectedCastleOverview 4644DisplayLearningStoneCOde:4645 call SetScrollVButton4646 4647 call SetLearningStoneGraphics 4648 call SetLearningStoneText4649 call SwapAndSetPage 4650 call SetLearningStoneGraphics 4651 call SetLearningStoneText4653 ld ix,(plxcurrentheroAddress) 4654 ld hl,10004655 call .AddXPBoostFromLearning 4657 ld e,(ix+HeroXp+0)4658 ld d,(ix+HeroXp+1)4659 add hl,de4660 jp c,DisplayScrollCode.engine4661 ld (ix+HeroXp+0),l4662 ld (ix+HeroXp+1),h4663 jp DisplayScrollCode.engine4665.AddXPBoostFromLearning: 4666 ld a,(ix+HeroSkills+0)4667 call .CheckSkillLearning4668 ld a,(ix+HeroSkills+1)4669 call .CheckSkillLearning4670 ld a,(ix+HeroSkills+2)4671 call .CheckSkillLearning4672 ld a,(ix+HeroSkills+3)4673 call .CheckSkillLearning4674 ld a,(ix+HeroSkills+4)4675 call .CheckSkillLearning4676 ld a,(ix+HeroSkills+5)4677 call .CheckSkillLearning4678 ret4680 .CheckSkillLearning:4681 cp 16 4682 jr z,.BasicLearningFound4683 cp 17 4684 jr z,.AdvancedLearningFound4685 cp 18 4686 jr z,.ExpertLearningFound4687 ret4689 .BasicLearningFound:4690 ld de,10 4691 jp .ApplyPercentBasedBoost4693 .AdvancedLearningFound:4694 ld de,5 4695 jp .ApplyPercentBasedBoost4697 .ExpertLearningFound:4698 ld de,10 4699 call .ApplyPercentBasedBoost4700 add hl,bc 4701 add hl,bc 4702 ret4704.ApplyPercentBasedBoost:4705 push hl 4706 4707 push hl4708 pop bc47094710 call DivideBCbyDE 4712 pop hl4713 add hl,bc 4714 ret4716SetLearningStoneText:4717 call SetCastleOverViewFontPage0Y212 4719 ld b,077+00 4720 ld c,031+00 4721 ld hl,TextLearningStone14722 call SetText 4724 ld b,030+00 4725 ld c,114+00 4726 ld hl,TextLearningStone24727 call SetText 4729 ld b,083+00 4730 ld c,160+00 4731 ld hl,TextLearningStone34732 call SetText 4734 ld ix,(plxcurrentheroAddress) 4735 ld hl,10004736 call DisplayLearningStoneCOde.AddXPBoostFromLearning 4737 ld b,092+00 4738 ld c,160+00 4739 jp SetNumber16BitCastle4741TextLearningStone1:4742 db "Learning Stone",2554743TextLearningStone2:4744 db "Peering into the learning stone,",2544745 db "you are amazed to see answers to",2544746 db "questions you have pondered for",2544747 db "years. The stone abruptly stills,",2544748 db "but the realization washes over",2544749 db "you - you have learned much.",2554750TextLearningStone3:4751 db "+     XP",2554753DisplayScrollCode:4754 call SetScrollVButton4755 call SetScrollGraphics 4756 call SetScrollText4757 call SwapAndSetPage 4758 call SetScrollGraphics 4759 call SetScrollText4761 ld bc,SFX_ScrollFound4762 call RePlayerSFX_PlayCh1 4764 .engine: 4765 call SwapAndSetPage 4766 call PopulateControls 47684773 ld a,(NewPrContr)4774 bit 5,a 4775 ret nz4777 4778 ld ix,GenericButtonTable4779 call CheckButtonInteractionControlsNotOnInt4781 call .CheckButtonClicked 4783 ld ix,GenericButtonTable4784 call SetGenericButtons 4786 call .CheckEndWindow 4788 halt4789 jp .engine4791 .CheckButtonClicked:4792 ret nc4793 pop af4794 ret4796 .CheckEndWindow:4797 ld a,(NewPrContr)4798 bit 4,a 4799 ret z4801 ld a,(spat+0) 4802 cp 024 4803 jr c,.Exit4804 cp 024+148 4805 jr nc,.Exit4806 4807 ld a,(spat+1) 4809 add a,064811 cp 020 4812 jr c,.Exit4813 cp 020+162 4814 ret c4816 .Exit:4817 pop af4818 ret4821SetScrollVButton:4822 ld hl,SetScrollVButtonTable-24823 ld de,GenericButtonTable-24824 ld bc,2+(GenericButtonTableLenghtPerButton*01)4825 ldir4826 ret4828SetScrollVButtonTableGfxBlock: db PlayerStartTurnBlock4829SetScrollVButtonTableAmountOfButtons: db 014830SetScrollVButtonTable: 4831 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4833.Button1Ytop: equ 1464834.Button1YBottom: equ .Button1Ytop + 0194835.Button1XLeft: equ 1544836.Button1XRight: equ .Button1XLeft + 0204839TextScroll1:4840 db "Ancient scroll discovered",2554841TextScroll2:4842 db "Unearthing an ancient scroll, you",2544843 db "imbue your spellbook with its",2544844 db "mystic spell.",2554845TextScroll3:4846 db "Hypnotism",2554848EarthSpellLevel1: db "  Earthbound   ",2554849EarthSpellLevel2: db "  Plate Armor  ",2554850EarthSpellLevel3: db " Resurrection  ",2554851EarthSpellLevel4: db "  Earthshock   ",2554852FireSpellLevel1: db "    Curse      ",2554853FireSpellLevel2: db " Blinding Fog  ",2554854FireSpellLevel3: db "   Implosion   ",2554855FireSpellLevel4: db "   Sunstrike   ",2554856AirSpellLevel1: db "    Haste      ",2554857AirSpellLevel2: db " ShieldBreaker ",2554858AirSpellLevel3: db "   Claw Back   ",2554859AirSpellLevel4: db " Spell Bubble  ",2554860WaterSpellLevel1: db "     Cure      ",2554861WaterSpellLevel2: db "   Ice Peak    ",2554862WaterSpellLevel3: db "   Hypnosis    ",2554863WaterSpellLevel4: db "   Frost Ring  ",2554864UniversalSpellLevel1: db " Magic Arrows  ",2554865UniversalSpellLevel2: db "    Frenzy     ",2554866UniversalSpellLevel3: db "   Teleport    ",2554867UniversalSpellLevel4: db "Primal Instinct",2554869 4870SetScrollText:4871 call SetCastleOverViewFontPage0Y212 4873 ld b,053+00 4874 ld c,031+00 4875 ld hl,TextScroll14876 call SetText 4878 ld b,030+00 4879 ld c,041+00 4880 ld hl,TextScroll24881 call SetText 4883 ld a,(SpellScrollInventoryNumber) 4884 sub a,464885 ld h,04886 ld l,a4887 ld de,164888 call MultiplyHlWithDE 4889 ld de,EarthSpellLevel14890 add hl,de4892 ld b,073+00 4893 ld c,147+00 4895 call SetText 4896 ret4899SetLearningStoneGraphics:4900 ld hl,$4000 + (000*128) + (000/2) - 1284901 ld de,$0000 + (024*128) + (020/2) - 1284902 ld bc,$0000 + (148*256) + (162/2)4903 ld a,ScrollBlock 4904 call CopyRamToVramCorrectedCastleOverview 4906 ld hl,$4000 + (139*128) + (044/2) - 1284907 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1284908 ld bc,$0000 + (060*256) + (104/2)4909 ld a,DefeatBlock 4910 call CopyRamToVramCorrectedCastleOverview 4912 ld hl,$4000 + (000*128) + (210/2) - 1284913 ld de,$0000 + ((024+19)*128) + ((020+60)/2) - 1284914 ld bc,$0000 + (068*256) + (038/2)4915 ld a,DefeatBlock 4916 jp CopyRamToVramCorrectedCastleOverview 4918SetScrollGraphics:4919 ld hl,$4000 + (000*128) + (000/2) - 1284920 ld de,$0000 + (024*128) + (020/2) - 1284921 ld bc,$0000 + (148*256) + (162/2)4922 ld a,ScrollBlock 4923 jp CopyRamToVramCorrectedCastleOverview 4925DisplayQuickTipsCode:4926 call SetQuickTipsButtons4927 halt4928 halt4929 halt4930 halt4931 call SetPlayerStartTurnGraphics 4933 if Promo?4934 ld a,(QuickTipsNumber)4935 inc a4936 cp LastQuickTip4937 jr nz,.EndCheckLastQuickTip4938 xor a4939 .EndCheckLastQuickTip:4940 ld (QuickTipsNumber),a4941 else4942 ld a,r4943 endif4945 push af 4946 call SetQuickTipsText4947 call SwapAndSetPage 4948 call SetPlayerStartTurnGraphics 4949 pop af 4950 call SetQuickTipsText4952 .engine: 4953 call SwapAndSetPage 4954 call PopulateControls 49564961 ld a,(NewPrContr)4962 bit 5,a 4963 ret nz4965 4966 ld ix,GenericButtonTable4967 call CheckButtonInteractionControlsNotOnInt4969 call .CheckButtonClicked 4971 ld ix,GenericButtonTable4972 call SetGenericButtons 4974 call .CheckEndWindow 4976 halt4977 jp .engine4979 .CheckButtonClicked:4980 ret nc4982 ld a,(DisplayQuickTips?)4983 xor 14984 ld (DisplayQuickTips?),a4985 ld hl,QuicktipsOff4986 jr z,.SetQuicktipsOnOff4987 ld hl,QuicktipsOn4988 .SetQuicktipsOnOff:4989 ld de,GenericButtonTable+14990 ld bc,64991 ldir4992 ret4994 .CheckEndWindow:4995 ld a,(NewPrContr)4996 bit 4,a 4997 ret z4999 ld a,(spat+0) 5000 cp 046 5001 jr c,.Exit5002 cp 046+095 5003 jr nc,.Exit5004 5005 ld a,(spat+1) 5007 add a,065009 cp 030 5010 jr c,.Exit5011 cp 030+144 5012 ret c5014 .Exit:5015 pop af5016 ret5018TextDidYouKnow: db "Did you know ?",2555019TextShowTipsAtStart: db "Show tips at start of turn ?",2555021ListOfQuickTips: 5022 dw TextQuickTip1 ,TextQuickTip2 ,TextQuickTip3 ,TextQuickTip4 ,TextQuickTip5 ,TextQuickTip6 ,TextQuickTip7 ,TextQuickTip8 ,TextQuickTip9 ,TextQuickTip105023 dw TextQuickTip11,TextQuickTip12,TextQuickTip13,TextQuickTip14,TextQuickTip15,TextQuickTip16,TextQuickTip17,TextQuickTip18,TextQuickTip19,TextQuickTip205024 dw TextQuickTip21,TextQuickTip22,TextQuickTip23,TextQuickTip24,TextQuickTip25,TextQuickTip26,TextQuickTip27,TextQuickTip28,TextQuickTip29,TextQuickTip305025 dw TextQuickTip31,TextQuickTip32,TextQuickTip33,TextQuickTip34,TextQuickTip35,TextQuickTip36,TextQuickTip37,TextQuickTip38,TextQuickTip39,TextQuickTip405026 dw TextQuickTip41,TextQuickTip42,TextQuickTip43,TextQuickTip44,TextQuickTip45,TextQuickTip46,TextQuickTip47,TextQuickTip48,TextQuickTip49,TextQuickTip505027 5028TotalAmountOfQuickTips: equ 505031SetQuickTipsText:50325033 push af 5035 ld b,069+00 5036 ld c,053+00 5037 ld hl,TextDidYouKnow5038 call SetText 5040 ld a,QuickTipsBlock 5041 call block34 5043 pop af 5044 ld b,05045 ld c,a5046 ld de,TotalAmountOfQuickTips 5047 call DivideBCbyDE 5048 add hl,hl5049 ld de,ListOfQuickTips5050 add hl,de5051 ld e,(hl)5052 inc hl5053 ld d,(hl)5054 ex de,hl50565058 ld b,038+00 5059 ld c,064+00 5060 call SetText 5062 ld b,047+00 5063 ld c,115+00 5064 ld hl,TextShowTipsAtStart 5065 call SetText 5067 ld a,CastleOverviewCodeBlock 5068 call block1234 5069 ret5071SetQuickTipsButtons:5072 ld hl,QuickTipsButtonTable-25073 ld de,GenericButtonTable-25074 ld bc,2+(GenericButtonTableLenghtPerButton*01)5075 ldir5076 ret5078QuicktipsOn: dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 1285079QuicktipsOff: dw $4000 + (057*128) + (158/2) - 128 | dw $4000 + (069*128) + (158/2) - 128 | dw $4000 + (081*128) + (158/2) - 1285081QuickTipsButtonTableGfxBlock: db PlayerStartTurnBlock5082QuickTipsButtonTableAmountOfButtons: db 015083QuickTipsButtonTable: 5084 db %1100 0011 | dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5086.Button1Ytop: equ 1225087.Button1YBottom: equ .Button1Ytop + 0125088.Button1XLeft: equ 0965089.Button1XRight: equ .Button1XLeft + 0145096CopyInactivePageToActivePage:5097 ld a,(activepage)5098 or a5099 ld hl,CopyPage1To05100 jp z,DoCopy5101 ld hl,CopyPage0To1PlayingField5102 jp DoCopy5103 5105DisplayStartOfTurnMessageCode:5106call ScreenOn5107 call SetPlayerStartTurnVButton5108 5109 call SetPlayerStartTurnGraphics 5110 call SetPlayerStartTurnText5111 call CopyInactivePageToActivePage51135116 ld bc,SFX_StartOfTurn5117 call RePlayerSFX_PlayCh1 5118 .engine: 5119 call SwapAndSetPage 5120 call PopulateControls 51225127 ld a,(Controls)5128 bit 5,a 5129 ret nz5131 5132 ld ix,GenericButtonTable5133 call CheckButtonInteractionControlsNotOnInt5135 call .CheckButtonClicked 5137 ld ix,GenericButtonTable5138 call SetGenericButtons 51405142 halt5143 jp .engine5145 .CheckButtonClicked:5146 ret nc5147 pop af5148 ret5150TextDate: db "Day:   Week:   Month:",2555151TextPlayerTurn: db "Player  's turn",2555153TextRemainingDaysForCampaign:5154 db "Remaining days to complete",2545155 db "     Campaign:",2555157CampaignFailedText: db "Mission failed. The campaign",2545158 db "was not finished in time.",2555160CampaignFinishedText: db "You have successfully completed",2545161 db "the campaign.",2545162 db " ",2545163 db "Return to the main menu and",2545164 db "prepare for your next challenge.",2555166SetPlayerStartTurnText:5167 call SetCastleOverViewFontPage0Y212 5169 ld b,056+00 5170 ld c,053+00 5171 ld hl,TextDate 5172 call SetText 5174 5175 ld bc,(Date)5176 ld de,7 5177 call DivideBCbyDE 5178 inc hl 5179 ld b,069+04 5180 ld c,053+00 5181 call SetNumber16BitCastle5183 5184 ld bc,(Date)5185 ld de,7 5186 call DivideBCbyDE 5188 5189 ld de,4 5190 call DivideBCbyDE 5191 push bc 5192 inc hl5193 ld b,104+04 5194 ld c,053+00 5195 call SetNumber16BitCastle5197 5198 pop hl5199 inc hl5200 ld b,142+04 5201 ld c,053+00 5202 call SetNumber16BitCastle5204ld a,(date)5205ld b,a5206ld a,(date+1)5207or a5208jr nz,.notzero5209ld a,2052105211ld a,7052125213.notzero:5216 ld a,(CampaignMode?)5217 or a5218 jr z,.ScenarioMode5220 ld a,(CampaignFinished?)5221 or a5222 jr nz,CampaignFinished5224 5225 ld b,050+00 5226 ld c,091+00 5227 ld hl,TextRemainingDaysForCampaign5228 call SetText 5230 ld a,(DaysToCompleteCampaign)5231 ld l,a5232 ld h,05233 ld de,(Date)5234 xor a5235 dec hl5236 sbc hl,de5237 jr nc,.StillTimeLeft5239 .OutOfTime:5240 ld hl,05241 ld b,118+00 5242 ld c,098+00 5243 call SetNumber16BitCastle5245 5246 ld b,040+00 5247 ld c,070+00 5248 ld hl,CampaignFailedText5249 call SetText 5250 ret5252 .StillTimeLeft:5253 inc hl5254 ld b,118+00 5255 ld c,098+00 5256 call SetNumber16BitCastle5258 5259 ld b,040+00 5260 ld c,070+00 5261 ld hl,CampaignText5262 call SetText 5263 ret5265 .ScenarioMode:5266 5267 ld b,075+00 5268 ld c,091+00 5269 ld hl,TextPlayerTurn 5270 call SetText 5272 ld a,(whichplayernowplaying?)5273 ld h,05274 ld l,a5275 ld b,095+06 5276 ld c,091+00 5277 call SetNumber16BitCastle5278 ret5280CampaignFinished:5281 ld b,040+00 5282 ld c,070+00 5283 ld hl,CampaignFinishedText5284 call SetText 5285 ret5287SetPlayerStartTurnGraphics:5288 ld hl,$4000 + (000*128) + (000/2) - 1285289 ld de,$0000 + (046*128) + (030/2) - 1285290 ld bc,$0000 + (095*256) + (144/2)5291 ld a,PlayerStartTurnBlock 5292 jp CopyRamToVramCorrectedCastleOverview 5294SetPlayerStartTurnVButton:5295 ld hl,PlayerStartTurnVButtonTable-25296 ld de,GenericButtonTable-25297 ld bc,2+(GenericButtonTableLenghtPerButton*01)5298 ldir5299 ret5301PlayerStartTurnVButtonTableGfxBlock: db PlayerStartTurnBlock5302PlayerStartTurnVButtonTableAmountOfButtons: db 015303PlayerStartTurnVButtonTable: 5304 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5306.Button1Ytop: equ 1145307.Button1YBottom: equ .Button1Ytop + 0195308.Button1XLeft: equ 0925309.Button1XRight: equ .Button1XLeft + 0205314TradeMenuCode:5315 ld bc,SFX_TradeMenu5316 call RePlayerSFX_PlayCh15318 ld a,3 5320 ld (ChangeManaAndMovement?),a 5322 ld a,255 5323 ld (PreviousButtonClicked),a5324 ld (PreviousButton2Clicked),a5325 5326 ld ix,GenericButtonTable5327 ld (PreviousButtonClickedIX),ix5329 ld ix,GenericButtonTable25330 ld (PreviousButton2ClickedIX),ix5332 call SetTradingHeroesArmyButtons5333 call SetTradingHeroesInventoryButtons5334 call SetHeroArmyTransferGraphics 5335 call SetTradingHeroesAndArmy5336 call SetTradingHeroesInventoryIcons5337 call SwapAndSetPage 5338 call SetHeroArmyTransferGraphics 5339 call SetTradingHeroesAndArmy5340 call SetTradingHeroesInventoryIcons5342 .engine: 5343 call SwapAndSetPage 5344 call PopulateControls 53465351 ld a,(Controls)5352 bit 5,a 5353 ret nz5355 call UpdateHUd5356 ld a,15357 ld (GameStatus),a 5359 5360 ld ix,GenericButtonTable25361 call CheckButtonInteractionControlsNotOnInt5363 call .CheckButtonClickedTradingHeroesInventory 5365 5366 ld ix,(PreviousButton2ClickedIX) 5367 ld a,(ix+GenericButtonStatus)5368 push af5369 ld a,(PreviousButton2Clicked)5370 cp 2555371 jr z,.EndMarkButton2 5372 ld (ix+GenericButtonStatus),%1010 00115373 .EndMarkButton2:5374 5376 ld ix,GenericButtonTable25377 call SetGenericButtons 5379 5380 pop af5381 ld ix,(PreviousButton2ClickedIX) 5382 ld (ix+GenericButtonStatus),a5383 5388 5389 ld ix,GenericButtonTable 5390 call CheckButtonInteractionControlsNotOnInt5392 call .CheckButtonClickedTradingHeroesArmy 5394 5395 ld ix,(PreviousButtonClickedIX) 5396 ld a,(ix+GenericButtonStatus)5397 push af5398 ld a,(PreviousButtonClicked)5399 cp 2555400 jr z,.EndMarkButton 5401 ld (ix+GenericButtonStatus),%1001 00115402 .EndMarkButton:5403 5405 ld ix,GenericButtonTable5406 call SetGenericButtons 5408 5409 pop af5410 ld ix,(PreviousButtonClickedIX) 5411 ld (ix+GenericButtonStatus),a5412 5419 call CheckEndTradeMenuWindow 5421 halt5422 jp .engine5426.CheckButtonClickedTradingHeroesInventory:5427 ret nc 5429 ld a,2555430 ld (PreviousButtonClicked),a5433 5438 5439 ld a,(PreviousButton2Clicked)5440 cp b5441 jr nz,.EndCheck1b5442 ld a,2555443 ld (PreviousButton2Clicked),a5444 ret5445 .EndCheck1b:5447 5448 ld a,(PreviousButton2Clicked)5449 cp 255 5450 jr nz,.EndCheck2b5452 ld a,b 5453 cp 65454 jp nc,.CheckTradingHero 5456 .CheckHeroWeTradeWith:5457 push ix5458 ld ix,(HeroWeTradeWith) 5459 ld a,65460 sub a,b 5461 ld d,05462 ld e,a5463 add ix,de 5465 ld a,(ix+HeroInventory+9) 5466 cp 045 5467 pop ix5468 ret z5469 jp .HighlightNewButton2 5470 5471 .CheckTradingHero: 5472 push ix5473 ld ix,(plxcurrentheroAddress) 5474 ld a,125475 sub a,b 5476 ld d,05477 ld e,a5478 add ix,de 5480 ld a,(ix+HeroInventory+9) 5481 cp 045 5482 pop ix5483 ret z5484 jp .HighlightNewButton2 5485 .EndCheck2b:5487 5488 ld d,b 5489 call .SetInventorySlotOfHeroInIX 5490 ld c,(ix+HeroInventory+9) 5492 ld a,(PreviousButton2Clicked)5493 ld d,a5494 call .SetInventorySlotOfHeroInIX 5495 ld d,(ix+HeroInventory+9) 5496 ld (ix+HeroInventory+9),c 5497 ld c,d5499 ld d,b 5500 call .SetInventorySlotOfHeroInIX 5501 ld (ix+HeroInventory+9),c 5503 pop af5504 jp TradeMenuCode5506 .HighlightNewButton2:5507 ld a,b 5508 ld (PreviousButton2Clicked),a5509 ld (PreviousButton2ClickedIX),ix5510 ret5512.SetInventorySlotOfHeroInIX:5513 ld a,d5514 cp 75515 jp nc,.TradingHero 5517 .HeroWeTradeWith:5518 ld ix,(HeroWeTradeWith) 5519 ld a,65520 sub a,d5521 ld d,05522 ld e,a5523 add ix,de 5524 ret5525 5526 .TradingHero: 5527 ld ix,(plxcurrentheroAddress) 5528 ld a,125529 sub a,d5530 ld d,05531 ld e,a5532 add ix,de 5533 ret5536.CheckButtonClickedTradingHeroesArmy: 5537 ret nc 5539 ld a,2555540 ld (PreviousButton2Clicked),a5542 5547 5548 ld a,(PreviousButtonClicked)5549 cp b5550 jr nz,.EndCheck15551 ld a,2555552 ld (PreviousButtonClicked),a5553 ret5554 .EndCheck1:5556 5557 ld a,(PreviousButtonClicked)5558 cp 255 5559 jr nz,.EndCheck25561 ld a,b 5562 cp 85563 jp c,.CheckVisitingHero 5565 .CheckDefendingHero:5566 ld c,254 5567 push bc5568 push ix55695570 ld ix,(plxcurrentheroAddress) 5572 pop ix5573 pop bc55745576 ld a,b 5577 cp 145578 jp z,.HighlightNewButton 5580 ld b,a5581 ld a,135582 sub a,b 5583 ld d,05584 ld e,a5586 ld c,254 5587 push bc5588 push ix5589 push de55905591 ld ix,(plxcurrentheroAddress) 5592 pop de5594 add ix,de 5595 add ix,de 5596 add ix,de 5598 ld a,(ix+HeroUnits+1) 5599 cp (ix+HeroUnits+2) 5600 pop ix5601 pop bc5602 ret z5603 5604 jp .HighlightNewButton 5605 5606 .CheckVisitingHero:5607 ld c,002 5608 push bc5609 push ix56105611 ld ix,(HeroWeTradeWith) 5612 pop ix5613 pop bc56145616 ld a,b 5617 cp 075618 jp z,.HighlightNewButton 5620 ld b,a5621 ld a,065622 sub a,b 5623 ld d,05624 ld e,a5626 ld c,002 5627 push bc5628 push ix5629 push de56305631 ld ix,(HeroWeTradeWith) 5632 pop de5634 add ix,de 5635 add ix,de 5636 add ix,de 5638 ld a,(ix+HeroUnits+1) 5639 cp (ix+HeroUnits+2) 5640 pop ix5641 pop bc5642 ret z5643 5644 jp .HighlightNewButton 5645 .EndCheck2:5647 56495651565756595662566556675669 ld c,002 5670 push bc5671 push ix56725673 ld ix,(HeroWeTradeWith) 5675 pop ix5676 pop bc56775678 ld c,254 5679 push bc5680 push ix56815682 ld ix,(plxcurrentheroAddress) 5684 pop ix5685 pop bc56865688 ld a,(PreviousButtonClicked)5689 cp 014 5690 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero5691 ld a,b 5692 cp 7 5693 jr z,.SwapVisitingHeroWithDefendingHero5694 .EndCheckPreviousButtonClickedWasDefendingHero:5695 5696 ld a,(PreviousButtonClicked)5697 cp 007 5698 jr nz,.EndCheck45699 ld a,b 5700 cp 014 5701 jr nz,.EndCheck45703 .SwapVisitingHeroWithDefendingHero:5704 ld c,002 5705 push bc5706 push ix57075708 ld ix,(HeroWeTradeWith) 5710 push ix 5711 ld c,254 5713 ld ix,(plxcurrentheroAddress) 5715 ld (ix+HeroStatus),002 5716 pop ix 5717 ld (ix+HeroStatus),254 5718 pop ix5719 pop bc5720 pop af 5722 jp .ExitVisitingAndDefendingArmyRoutine5723 .EndCheck4:57255727 ld a,(PreviousButtonClicked)5728 cp 014 5729 jr nz,.EndCheck55730 ld a,b 5731 cp 7 5732 jr nz,.EndCheck55733 5734 .ChangeDefendingHeroIntoVisitingHero:5735 ld c,254 5736 push bc5737 push ix57385739 ld ix,(plxcurrentheroAddress) 5741 ld (ix+HeroStatus),002 5742 pop ix5743 pop bc 5744 pop af 5745 jp .ExitVisitingAndDefendingArmyRoutine5746 .EndCheck5:57485750 ld a,(PreviousButtonClicked)5751 cp 007 5752 jr nz,.EndCheck65753 ld a,b 5754 cp 014 5755 jr nz,.EndCheck65757 .ChangeVisitingHeroIntoDefendingHero:5758 ld c,002 5759 push bc5760 push ix57615762 ld ix,(HeroWeTradeWith) 5764 ld (ix+HeroStatus),254 5765 pop ix5766 pop bc 5767 pop af 5768 jp .ExitVisitingAndDefendingArmyRoutine5769 .EndCheck6:57715772 ld a,(PreviousButtonClicked) 5773 cp 014 5774 jr nz,.EndCheck75775 ld a,2555776 ld (PreviousButtonClicked),a5777 ret5778 .EndCheck7:57805781 ld a,(PreviousButtonClicked) 5782 cp 007 5783 jr nz,.EndCheck85784 ld a,2555785 ld (PreviousButtonClicked),a5786 ret5787 .EndCheck8:57895791 ld a,b 5792 cp 14 5793 jp z,.ResetButtons5794 cp 07 5795 jp z,.ResetButtons5796 ld a,(PreviousButtonClicked)5797 cp 14 5798 jp z,.ResetButtons5799 cp 07 5800 jp z,.ResetButtons58025804 ld a,b 5805 cp 85806 jp nc,.EndCheck95807 ld a,(PreviousButtonClicked)5808 cp 85809 jp nc,.EndCheck95811 ld a,065812 sub a,b 5813 ld d,05814 ld e,a5816 ld c,002 5817 push bc5818 push ix5819 push de58205821 ld ix,(HeroWeTradeWith) 5823 pop de5825 add ix,de 5826 add ix,de 5827 add ix,de 5829 ld a,(ix+HeroUnits+1) 5830 or (ix+HeroUnits+2) 5831 pop ix5832 pop bc5833 jp nz,.EndCheck95834 5836 5837 ld a,(PreviousButtonClicked)5838 ld c,a5839 ld a,065840 sub a,c5841 ld d,05842 ld e,a5844 ld c,002 5845 push bc5846 push ix5847 push de58485849 ld ix,(HeroWeTradeWith) 5851 pop de5853 add ix,de 5854 add ix,de 5855 add ix,de 5857 ld l,(ix+HeroUnits+1) 5858 ld h,(ix+HeroUnits+2) 5859 dec hl5860 ld (ix+HeroUnits+1),l 5861 ld (ix+HeroUnits+2),h 5862 ld l,(ix+HeroUnits+0) 5864 ld a,(ix+HeroUnits+1) 5865 or (ix+HeroUnits+2) 5866 jr nz,.EndCheckZero5867 ld (ix+HeroUnits+0),0 5868 .EndCheckZero:5869 pop ix5870 pop bc5871 5873 5874 ld a,065875 sub a,b 5876 ld d,05877 ld e,a5879 ld c,002 5880 push bc5881 push ix5882 push de58835884 ld ix,(HeroWeTradeWith) 5886 pop de5888 add ix,de 5889 add ix,de 5890 add ix,de 5892 ld (ix+HeroUnits+0),l 5893 ld (ix+HeroUnits+1),1 5894 ld (ix+HeroUnits+2),0 5895 pop ix5896 pop bc5897 5899 pop af 5900 jp .ExitVisitingAndDefendingArmyRoutine5901 .EndCheck9:59035904 ld a,b 5905 cp 85906 jp c,.EndCheck9b5907 ld a,(PreviousButtonClicked)5908 cp 85909 jp c,.EndCheck9b5911 ld a,135912 sub a,b 5913 ld d,05914 ld e,a5916 ld c,254 5917 push bc5918 push ix5919 push de59205921 ld ix,(plxcurrentheroAddress) 5923 pop de5925 add ix,de 5926 add ix,de 5927 add ix,de 5929 ld a,(ix+HeroUnits+1) 5930 or (ix+HeroUnits+2) 5931 pop ix5932 pop bc5933 jp nz,.EndCheck9b5934 5936 5937 ld a,(PreviousButtonClicked)5938 ld c,a5939 ld a,135940 sub a,c5941 ld d,05942 ld e,a5944 ld c,254 5945 push bc5946 push ix5947 push de59485949 ld ix,(plxcurrentheroAddress) 5951 pop de5953 add ix,de 5954 add ix,de 5955 add ix,de 5957 ld l,(ix+HeroUnits+1) 5958 ld h,(ix+HeroUnits+2) 5959 dec hl5960 ld (ix+HeroUnits+1),l 5961 ld (ix+HeroUnits+2),h 5962 ld l,(ix+HeroUnits+0) 5964 ld a,(ix+HeroUnits+1) 5965 or (ix+HeroUnits+2) 5966 jr nz,.EndCheckZerob5967 ld (ix+HeroUnits+0),0 5968 .EndCheckZerob:5969 pop ix5970 pop bc5971 5973 5974 ld a,135975 sub a,b 5976 ld d,05977 ld e,a5979 ld c,254 5980 push bc5981 push ix5982 push de59835984 ld ix,(plxcurrentheroAddress) 5986 pop de5988 add ix,de 5989 add ix,de 5990 add ix,de 5992 ld (ix+HeroUnits+0),l 5993 ld (ix+HeroUnits+1),1 5994 ld (ix+HeroUnits+2),0 5995 pop ix5996 pop bc5997 5999 pop af 6000 jp .ExitVisitingAndDefendingArmyRoutine6001 .EndCheck9b:60046006 ld a,b 6007 cp 86008 jp nc,.EndCheck106009 ld a,(PreviousButtonClicked)6010 cp 86011 jp nc,.EndCheck106013 ld a,066014 sub a,b 6015 ld d,06016 ld e,a6018 ld c,002 6019 push bc6020 push ix6021 push de60226023 ld ix,(HeroWeTradeWith) 6025 pop de6027 add ix,de 6028 add ix,de 6029 add ix,de 6031 ld l,(ix+HeroUnits+0) 6032 pop ix6033 pop bc6035 ld a,(PreviousButtonClicked)6036 ld c,a6037 ld a,066038 sub a,c 6039 ld d,06040 ld e,a6042 ld c,002 6043 push bc6044 push ix6045 push de60466047 ld ix,(HeroWeTradeWith) 6049 pop de6051 add ix,de 6052 add ix,de 6053 add ix,de 6055 ld a,(ix+HeroUnits+0) 6056 cp l6057 jp nz,.EndCheck10WithPopIXandBC6059 ld (ix+HeroUnits+0),0 6060 ld l,(ix+HeroUnits+1) 6061 ld h,(ix+HeroUnits+2) 6063 ld (ix+HeroUnits+1),0 6064 ld (ix+HeroUnits+2),0 6065 6066 6067 pop ix6068 pop bc6069 6070 ld a,066071 sub a,b 6072 ld d,06073 ld e,a6075 ld c,002 6076 push bc6077 push ix6078 push de60796080 ld ix,(HeroWeTradeWith) 6082 pop de6084 add ix,de 6085 add ix,de 6086 add ix,de 6088 ld e,(ix+HeroUnits+1) 6089 ld d,(ix+HeroUnits+2) 6090 add hl,de6092 ld (ix+HeroUnits+1),l 6093 ld (ix+HeroUnits+2),h 6095 pop ix6096 pop bc 6097 pop af 6098 jp .ExitVisitingAndDefendingArmyRoutine6100 .EndCheck10WithPopIXandBC:6101 pop ix6102 pop bc6103 .EndCheck10:61056106 ld a,b 6107 cp 86108 jp c,.EndCheck10b6109 ld a,(PreviousButtonClicked)6110 cp 86111 jp c,.EndCheck10b6113 ld a,136114 sub a,b 6115 ld d,06116 ld e,a6118 ld c,254 6119 push bc6120 push ix6121 push de61226123 ld ix,(plxcurrentheroAddress) 6125 pop de6127 add ix,de 6128 add ix,de 6129 add ix,de 6131 ld l,(ix+HeroUnits+0) 6132 pop ix6133 pop bc6136 ld a,(PreviousButtonClicked)6137 ld c,a6138 ld a,136139 sub a,c 6140 ld d,06141 ld e,a6143 ld c,254 6144 push bc6145 push ix6146 push de61476148 ld ix,(plxcurrentheroAddress) 6149 pop de6151 add ix,de 6152 add ix,de 6153 add ix,de 6155 ld a,(ix+HeroUnits+0) 6156 cp l6157 jp nz,.EndCheck10bWithPopIXandBC6159 ld (ix+HeroUnits+0),0 6160 ld l,(ix+HeroUnits+1) 6161 ld h,(ix+HeroUnits+2) 6163 ld (ix+HeroUnits+1),0 6164 ld (ix+HeroUnits+2),0 6165 6166 6167 pop ix6168 pop bc6169 6170 ld a,136171 sub a,b 6172 ld d,06173 ld e,a6175 ld c,254 6176 push bc6177 push ix6178 push de61796180 ld ix,(plxcurrentheroAddress) 6181 pop de6183 add ix,de 6184 add ix,de 6185 add ix,de 6187 ld e,(ix+HeroUnits+1) 6188 ld d,(ix+HeroUnits+2) 6189 add hl,de6191 ld (ix+HeroUnits+1),l 6192 ld (ix+HeroUnits+2),h 6194 pop ix6195 pop bc 6196 pop af 6197 jp .ExitVisitingAndDefendingArmyRoutine6199 .EndCheck10bWithPopIXandBC:6200 pop ix6201 pop bc6202 .EndCheck10b:62046207 ld c,002 6208 push bc6209 push ix62106211 ld ix,(HeroWeTradeWith) 6212 pop ix6213 pop bc62146216 ld c,254 6217 push bc6218 push ix62196220 ld ix,(plxcurrentheroAddress) 6221 pop ix6222 pop bc62236226 6227 ld c,002 6228 push bc6229 push ix62306231 ld ix,(HeroWeTradeWith) 6232 call CheckHeroHasAtLeast2CreatureSlotsFilled6233 pop ix6234 pop bc6235 jp c,.EndCheck11 6238 6239 ld a,b 6240 cp 86241 jp c,.EndCheck116243 6244 ld a,136245 sub a,b 6246 ld d,06247 ld e,a6249 ld c,254 6250 push bc6251 push ix6252 push de62536254 ld ix,(plxcurrentheroAddress) 6255 pop de6257 add ix,de 6258 add ix,de 6259 add ix,de 6261 ld a,(ix+HeroUnits+1) 6262 or (ix+HeroUnits+2) 6263 pop ix6264 pop bc6265 jp nz,.EndCheck116266 6268 6269 ld a,(PreviousButtonClicked)6270 ld c,a6271 ld a,066272 sub a,c6273 ld d,06274 ld e,a6276 ld c,002 6277 push bc6278 push ix6279 push de62806281 ld ix,(HeroWeTradeWith) 6282 pop de6284 add ix,de 6285 add ix,de 6286 add ix,de 6288 ld a,(ix+HeroUnits+0) 6289 ex af,af'6290 ld l,(ix+HeroUnits+1) 6291 ld h,(ix+HeroUnits+2) 6293 ld (ix+HeroUnits+0),0 6294 ld (ix+HeroUnits+1),0 6295 ld (ix+HeroUnits+2),0 6297 pop ix6298 pop bc6300 ld a,136301 sub a,b 6302 ld d,06303 ld e,a6305 ld c,254 6306 push bc6307 push ix6308 push de63096310 ld ix,(plxcurrentheroAddress) 6311 pop de6313 add ix,de 6314 add ix,de 6315 add ix,de 6317 ex af,af'6318 ld (ix+HeroUnits+0),a 6319 ld (ix+HeroUnits+1),l 6320 ld (ix+HeroUnits+2),h 6322 pop ix6323 pop bc6324 pop af 6325 jp .ExitVisitingAndDefendingArmyRoutine6326 6327 .EndCheck11:63296335 6336 ld c,254 6337 push bc6338 push ix63396340 ld ix,(plxcurrentheroAddress) 6341 call CheckHeroHasAtLeast2CreatureSlotsFilled6342 pop ix6343 pop bc6344 jp c,.EndCheck11b 6347 6348 ld a,b 6349 cp 86350 jp nc,.EndCheck11b6352 6353 ld a,066354 sub a,b 6355 ld d,06356 ld e,a6358 ld c,002 6359 push bc6360 push ix6361 push de63626363 ld ix,(HeroWeTradeWith) 6364 pop de6366 add ix,de 6367 add ix,de 6368 add ix,de 6370 ld a,(ix+HeroUnits+1) 6371 or (ix+HeroUnits+2) 6372 pop ix6373 pop bc6374 jp nz,.EndCheck11b6375 6377 6378 ld a,(PreviousButtonClicked)6379 ld c,a6380 ld a,136381 sub a,c6382 ld d,06383 ld e,a6385 ld c,254 6386 push bc6387 push ix6388 push de63896390 ld ix,(plxcurrentheroAddress) 6391 pop de6393 add ix,de 6394 add ix,de 6395 add ix,de 6397 ld a,(ix+HeroUnits+0) 6398 ex af,af'6399 ld l,(ix+HeroUnits+1) 6400 ld h,(ix+HeroUnits+2) 6402 ld (ix+HeroUnits+0),0 6403 ld (ix+HeroUnits+1),0 6404 ld (ix+HeroUnits+2),0 6406 pop ix6407 pop bc6409 ld a,066410 sub a,b 6411 ld d,06412 ld e,a6414 ld c,002 6415 push bc6416 push ix6417 push de64186419 ld ix,(HeroWeTradeWith) 6420 pop de6422 add ix,de 6423 add ix,de 6424 add ix,de 6426 ex af,af'6427 ld (ix+HeroUnits+0),a 6428 ld (ix+HeroUnits+1),l 6429 ld (ix+HeroUnits+2),h 6431 pop ix6432 pop bc6433 pop af 6434 jp .ExitVisitingAndDefendingArmyRoutine6435 6436 .EndCheck11b:64386440 6441 ld c,002 6442 push bc6443 push ix64446445 ld ix,(HeroWeTradeWith) 6446 call CheckHeroHasAtLeast2CreatureSlotsFilled6447 pop ix6448 pop bc6449 jp c,.EndCheck12 6452 6453 ld a,b 6454 cp 86455 jp c,.EndCheck126457 6458 ld a,(PreviousButtonClicked)6459 ld c,a6460 ld a,066461 sub a,c6462 ld d,06463 ld e,a6465 ld c,002 6466 push bc6467 push ix6468 push de64696470 ld ix,(HeroWeTradeWith) 6471 pop de6473 add ix,de 6474 add ix,de 6475 add ix,de 6476 ld l,(ix+HeroUnits+0) 6477 pop ix6478 pop bc6479 6480 ld a,136481 sub a,b 6482 ld d,06483 ld e,a6485 ld c,254 6486 push bc6487 push ix6488 push de64896490 ld ix,(plxcurrentheroAddress) 6491 pop de6493 add ix,de 6494 add ix,de 6495 add ix,de 6496 ld a,(ix+HeroUnits+0) 6497 cp l6498 pop ix6499 pop bc6500 jp nz,.EndCheck126501 6503 6504 ld a,(PreviousButtonClicked)6505 ld c,a6506 ld a,066507 sub a,c6508 ld d,06509 ld e,a6511 ld c,002 6512 push bc6513 push ix6514 push de65156516 ld ix,(HeroWeTradeWith) 6517 pop de6519 add ix,de 6520 add ix,de 6521 add ix,de 6523 ld l,(ix+HeroUnits+1) 6524 ld h,(ix+HeroUnits+2) 6526 ld (ix+HeroUnits+0),0 6527 ld (ix+HeroUnits+1),0 6528 ld (ix+HeroUnits+2),0 6530 pop ix6531 pop bc6533 ld a,136534 sub a,b 6535 ld d,06536 ld e,a6538 ld c,254 6539 push bc6540 push ix6541 push de65426543 ld ix,(plxcurrentheroAddress) 6544 pop de6546 add ix,de 6547 add ix,de 6548 add ix,de 6550 ld e,(ix+HeroUnits+1) 6551 ld d,(ix+HeroUnits+2) 6552 add hl,de6553 ld (ix+HeroUnits+1),l 6554 ld (ix+HeroUnits+2),h 6556 pop ix6557 pop bc6558 pop af 6559 jp .ExitVisitingAndDefendingArmyRoutine6560 6561 .EndCheck12:6562 65636565 ld c,254 6566 push bc6567 push ix65686569 ld ix,(plxcurrentheroAddress) 6570 call CheckHeroHasAtLeast2CreatureSlotsFilled6571 pop ix6572 pop bc6573 jp c,.EndCheck12b 6576 6577 ld a,b 6578 cp 86579 jp nc,.EndCheck12b6581 6582 ld a,(PreviousButtonClicked)6583 ld c,a6584 ld a,136585 sub a,c6586 ld d,06587 ld e,a6589 ld c,254 6590 push bc6591 push ix6592 push de65936594 ld ix,(plxcurrentheroAddress) 6595 pop de6597 add ix,de 6598 add ix,de 6599 add ix,de 6600 ld l,(ix+HeroUnits+0) 6601 pop ix6602 pop bc6603 6604 ld a,066605 sub a,b 6606 ld d,06607 ld e,a6609 ld c,002 6610 push bc6611 push ix6612 push de66136614 ld ix,(HeroWeTradeWith) 6615 pop de6617 add ix,de 6618 add ix,de 6619 add ix,de 6620 ld a,(ix+HeroUnits+0) 6621 cp l6622 pop ix6623 pop bc6624 jp nz,.EndCheck12b6625 6627 6628 ld a,(PreviousButtonClicked)6629 ld c,a6630 ld a,136631 sub a,c6632 ld d,06633 ld e,a6635 ld c,254 6636 push bc6637 push ix6638 push de66396640 ld ix,(plxcurrentheroAddress) 6641 pop de6643 add ix,de 6644 add ix,de 6645 add ix,de 6647 ld l,(ix+HeroUnits+1) 6648 ld h,(ix+HeroUnits+2) 6650 ld (ix+HeroUnits+0),0 6651 ld (ix+HeroUnits+1),0 6652 ld (ix+HeroUnits+2),0 6654 pop ix6655 pop bc6657 ld a,066658 sub a,b 6659 ld d,06660 ld e,a6662 ld c,002 6663 push bc6664 push ix6665 push de66666667 ld ix,(HeroWeTradeWith) 6668 pop de6670 add ix,de 6671 add ix,de 6672 add ix,de 6674 ld e,(ix+HeroUnits+1) 6675 ld d,(ix+HeroUnits+2) 6676 add hl,de6677 ld (ix+HeroUnits+1),l 6678 ld (ix+HeroUnits+2),h 6680 pop ix6681 pop bc6682 pop af 6683 jp .ExitVisitingAndDefendingArmyRoutine6684 6685 .EndCheck12b:66876689 6690 ld a,b 6691 call .SetHeroUnitsInIX6693 ld a,(ix+HeroUnits+0) 6694 ex af,af'6695 ld l,(ix+HeroUnits+1) 6696 ld h,(ix+HeroUnits+2) 6698 ld a,l6699 or h6700 jp z,.ResetButtons 6701 exx6703 ld a,(PreviousButtonClicked) 6704 call .SetHeroUnitsInIX6706 ld a,(ix+HeroUnits+0) 6707 ex af,af'6708 ld (ix+HeroUnits+0),a 6709 ld l,(ix+HeroUnits+1) 6710 ld h,(ix+HeroUnits+2) 6712 ld a,l6713 or h6714 jp z,.ResetButtons 6716 exx6717 ld (ix+HeroUnits+1),l 6718 ld (ix+HeroUnits+2),h 6720 ld a,b 6721 call .SetHeroUnitsInIX6722 ex af,af'6723 ld (ix+HeroUnits+0),a 6724 exx6725 ld (ix+HeroUnits+1),l 6726 ld (ix+HeroUnits+2),h 6727 6728 pop af 6729 jp .ExitVisitingAndDefendingArmyRoutine6730 6731 .EndCheck13:6732 6733 .HighlightNewButton:6734 ld a,b 6735 ld (PreviousButtonClicked),a6736 ld (PreviousButtonClickedIX),ix6737 ret6739 .ResetButtons:6740 ld a,255 6741 ld (PreviousButtonClicked),a6742 ret6744.SetHeroUnitsInIX:6745 cp 86746 jp c,.VisitingHero6748 .DefendingHero:6749 ld c,a6750 ld a,136751 sub a,c 6752 ld d,06753 ld e,a6755 ld c,254 6756 push bc6757 push de67586759 ld ix,(plxcurrentheroAddress) 6760 pop de6761 pop bc6762 add ix,de 6763 add ix,de 6764 add ix,de 6765 ret6766 6767 .VisitingHero: 6768 ld c,a6769 ld a,066770 sub a,c 6771 ld d,06772 ld e,a6774 ld c,002 6775 push bc6776 push de67776778 ld ix,(HeroWeTradeWith) 6779 pop de6780 pop bc6781 add ix,de 6782 add ix,de 6783 add ix,de 6784 ret6787.ExitVisitingAndDefendingArmyRoutine: 6788 ld a,255 6789 ld (PreviousButtonClicked),a6790 call SetCastleOverViewFontPage0Y212 6798 call SetHeroArmyTransferGraphics 6799 call SetTradingHeroesAndArmy6800 call SetTradingHeroesInventoryIcons6801 call SwapAndSetPage 6802 call SetHeroArmyTransferGraphics 6803 call SetTradingHeroesInventoryIcons6804 call SetTradingHeroesAndArmy6805 jp .engine6864CheckEndTradeMenuWindow:6865 ld a,(NewPrContr)6866 bit 4,a 6867 ret z6869 ld a,(spat+0) 6870 cp 030 6871 jr c,.Exit6872 cp 030+137 6873 jr nc,.Exit6874 6875 ld a,(spat+1) 6877 add a,066879 cp 024 6880 jr c,.Exit6881 cp 024+156 6882 ret c6884 .Exit:6885 pop af6886 ret6895SetTradingHeroesInventoryButtons:6896 ld hl,TradingHeroesInventoryButtonTable-26897 ld de,GenericButtonTable2-26898 ld bc,2+(GenericButtonTableLenghtPerButton*12)6899 ldir6901 .CreateInventoryListTradingHeroes: 6902 ld ix,(plxcurrentheroAddress)6903 ld de,9 6904 add ix,de6906 ld iy,GenericButtonTable2+16907 ld b,6 6908 call .loop6911 ld ix,(HeroWeTradeWith)6912 ld de,9 6913 add ix,de6915 ld b,6 6916 .loop:6917 ld a,(ix+HeroInventory) 6918 call SetTradingHeroesInventoryIcons.CheckScrollIcon 6919 add a,a 6920 add a,a 6921 ld d,06922 ld e,a6923 ld hl,SetTradingHeroesInventoryIcons.InventoryIconTableSYSX6924 add hl,de6925 ld a,(hl)6926 ld (iy+0),a6927 inc hl6928 ld a,(hl)6929 ld (iy+1),a6930 inc hl6931 ld a,(hl)6932 ld (iy+2),a6933 inc hl6934 ld a,(hl)6935 ld (iy+3),a6936 ld de,GenericButtonTableLenghtPerButton6937 add iy,de 6938 inc ix 6939 djnz .loop6940 ret6944TradingHeroesInventoryButtonTableGfxBlock: db InventoryGraphicsBlock6945TradingHeroesInventoryButtonTableAmountOfButtons: db 126946TradingHeroesInventoryButtonTable: 6948 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 6949 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 6950 db %1100 0011 | dw $4000 + (021*128) + (170/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1286951 db %1100 0011 | dw $4000 + (180*128) + (100/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1286952 db %1100 0011 | dw $4000 + (050*128) + (050/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1286953 db %1100 0011 | dw $4000 + (060*128) + (060/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1286955 db %1100 0011 | dw $4000 + (040*128) + (040/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1286956 db %1100 0011 | dw $4000 + (030*128) + (030/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1286957 db %1100 0011 | dw $4000 + (020*128) + (020/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1286958 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1286959 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1286960 db %1100 0011 | dw $4000 + (056*128) + (176/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1286962.Button1Ytop: equ 0776963.Button1YBottom: equ .Button1Ytop + 0206964.Button1XLeft: equ 0366965.Button1XRight: equ .Button1XLeft + 0206967.Button2Ytop: equ 0776968.Button2YBottom: equ .Button2Ytop + 0206969.Button2XLeft: equ 0586970.Button2XRight: equ .Button2XLeft + 0206972.Button3Ytop: equ 0776973.Button3YBottom: equ .Button3Ytop + 0206974.Button3XLeft: equ 0806975.Button3XRight: equ .Button3XLeft + 0206977.Button4Ytop: equ 0776978.Button4YBottom: equ .Button4Ytop + 0206979.Button4XLeft: equ 1026980.Button4XRight: equ .Button4XLeft + 0206982.Button5Ytop: equ 0776983.Button5YBottom: equ .Button5Ytop + 0206984.Button5XLeft: equ 1246985.Button5XRight: equ .Button5XLeft + 0206987.Button6Ytop: equ 0776988.Button6YBottom: equ .Button6Ytop + 0206989.Button6XLeft: equ 1466990.Button6XRight: equ .Button6XLeft + 0206994.Button7Ytop: equ 1416995.Button7YBottom: equ .Button7Ytop + 0206996.Button7XLeft: equ 0366997.Button7XRight: equ .Button7XLeft + 0206999.Button8Ytop: equ 1417000.Button8YBottom: equ .Button8Ytop + 0207001.Button8XLeft: equ 0587002.Button8XRight: equ .Button8XLeft + 0207004.Button9Ytop: equ 1417005.Button9YBottom: equ .Button9Ytop + 0207006.Button9XLeft: equ 0807007.Button9XRight: equ .Button9XLeft + 0207009.Button10Ytop: equ 1417010.Button10YBottom: equ .Button10Ytop + 0207011.Button10XLeft: equ 1027012.Button10XRight: equ .Button10XLeft + 0207014.Button11Ytop: equ 1417015.Button11YBottom: equ .Button11Ytop + 0207016.Button11XLeft: equ 1247017.Button11XRight: equ .Button11XLeft + 0207019.Button12Ytop: equ 1417020.Button12YBottom: equ .Button12Ytop + 0207021.Button12XLeft: equ 1467022.Button12XRight: equ .Button12XLeft + 0207031SetTradingHeroesArmyButtons:7032 ld hl,TradingHeroesButtonTable-27033 ld de,GenericButtonTable-27034 ld bc,2+(GenericButtonTableLenghtPerButton*14)7035 ldir7036 ret7038TradingHeroesButtonTableGfxBlock: db HeroArmyTransferGraphicsBlock7039TradingHeroesButtonTableAmountOfButtons: db 147040TradingHeroesButtonTable: 7042 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 7043 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 7044 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1287045 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1287046 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1287047 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1287048 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1287050 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1287051 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1287052 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1287053 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1287054 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1287055 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1287056 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1287058.Button1Ytop: equ 0387059.Button1YBottom: equ .Button1Ytop + 0347060.Button1XLeft: equ 0327061.Button1XRight: equ .Button1XLeft + 0207063.Button2Ytop: equ 0407064.Button2YBottom: equ .Button2Ytop + 0307065.Button2XLeft: equ 0547066.Button2XRight: equ .Button2XLeft + 0187068.Button3Ytop: equ 0407069.Button3YBottom: equ .Button3Ytop + 0307070.Button3XLeft: equ 0747071.Button3XRight: equ .Button3XLeft + 0187073.Button4Ytop: equ 0407074.Button4YBottom: equ .Button4Ytop + 0307075.Button4XLeft: equ 0947076.Button4XRight: equ .Button4XLeft + 0187078.Button5Ytop: equ 0407079.Button5YBottom: equ .Button5Ytop + 0307080.Button5XLeft: equ 1147081.Button5XRight: equ .Button5XLeft + 0187083.Button6Ytop: equ 0407084.Button6YBottom: equ .Button6Ytop + 0307085.Button6XLeft: equ 1347086.Button6XRight: equ .Button6XLeft + 0187088.Button7Ytop: equ 0407089.Button7YBottom: equ .Button7Ytop + 0307090.Button7XLeft: equ 1547091.Button7XRight: equ .Button7XLeft + 0187095.Button8Ytop: equ 1027096.Button8YBottom: equ .Button8Ytop + 0347097.Button8XLeft: equ 0327098.Button8XRight: equ .Button8XLeft + 0207100.Button9Ytop: equ 1047101.Button9YBottom: equ .Button9Ytop + 0307102.Button9XLeft: equ 0547103.Button9XRight: equ .Button9XLeft + 0187105.Button10Ytop: equ 1047106.Button10YBottom: equ .Button10Ytop + 0307107.Button10XLeft: equ 0747108.Button10XRight: equ .Button10XLeft + 0187110.Button11Ytop: equ 1047111.Button11YBottom: equ .Button11Ytop + 0307112.Button11XLeft: equ 0947113.Button11XRight: equ .Button11XLeft + 0187115.Button12Ytop: equ 1047116.Button12YBottom: equ .Button12Ytop + 0307117.Button12XLeft: equ 1147118.Button12XRight: equ .Button12XLeft + 0187120.Button13Ytop: equ 1047121.Button13YBottom: equ .Button13Ytop + 0307122.Button13XLeft: equ 1347123.Button13XRight: equ .Button13XLeft + 0187125.Button14Ytop: equ 1047126.Button14YBottom: equ .Button14Ytop + 0307127.Button14XLeft: equ 1547128.Button14XRight: equ .Button14XLeft + 0187149SetTradingHeroesAndArmy:7150 call SetCastleOverViewFontPage0Y212 7152 call SetActiveTradingHero7153 call SetHeroWhoGetsTradeWith7154 call SetActiveTradingHeroArmyAndAmount7155 call SetHeroWhoGetsTradeWithArmyAndAmount7156 ret7164SetActiveTradingHero: 7165 ld ix,(plxcurrentheroAddress)7166 ld de,$0000 + (040*128) + (034/2) - 1287167 jp DoSetVisitingOrDefendingHero7168 7169SetHeroWhoGetsTradeWith: 7170 ld ix,(HeroWeTradeWith) 7171 ld de,$0000 + (104*128) + (034/2) - 1287172 jp DoSetVisitingOrDefendingHero7178SetActiveTradingHeroArmyAndAmount:7179 ld ix,(plxcurrentheroAddress)7182 call .army71837186 .amount:7187 ld l,(ix+HeroUnits+01)7188 ld h,(ix+HeroUnits+02)7189 ld b,0567190 ld c,0617191 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07193 ld l,(ix+HeroUnits+04)7194 ld h,(ix+HeroUnits+05)7195 ld b,0767196 ld c,0617197 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07199 ld l,(ix+HeroUnits+07)7200 ld h,(ix+HeroUnits+08)7201 ld b,0967202 ld c,0617203 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07205 ld l,(ix+HeroUnits+10)7206 ld h,(ix+HeroUnits+11)7207 ld b,1167208 ld c,0617209 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07211 ld l,(ix+HeroUnits+13)7212 ld h,(ix+HeroUnits+14)7213 ld b,1367214 ld c,0617215 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07217 ld l,(ix+HeroUnits+16)7218 ld h,(ix+HeroUnits+17)7219 ld b,1567220 ld c,0617221 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07222 ret7224 .army:7225 ld a,(ix+HeroUnits+00) 7226 call SetDefendingHeroArmyAndAmount.SetSYSX 7227 ld de,.DYDXDefendingHeroUnit1 7228 call CopyTransparantImage 7230 ld a,(ix+HeroUnits+03) 7231 call SetDefendingHeroArmyAndAmount.SetSYSX 7232 ld de,.DYDXDefendingHeroUnit2 7233 call CopyTransparantImage 7235 ld a,(ix+HeroUnits+06) 7236 call SetDefendingHeroArmyAndAmount.SetSYSX 7237 ld de,.DYDXDefendingHeroUnit3 7238 call CopyTransparantImage 7240 ld a,(ix+HeroUnits+09) 7241 call SetDefendingHeroArmyAndAmount.SetSYSX 7242 ld de,.DYDXDefendingHeroUnit4 7243 call CopyTransparantImage 7245 ld a,(ix+HeroUnits+12) 7246 call SetDefendingHeroArmyAndAmount.SetSYSX 7247 ld de,.DYDXDefendingHeroUnit5 7248 call CopyTransparantImage 7250 ld a,(ix+HeroUnits+15) 7251 call SetDefendingHeroArmyAndAmount.SetSYSX 7252 ld de,.DYDXDefendingHeroUnit6 7253 call CopyTransparantImage 7254 ret7256.DYDXDefendingHeroUnit1: equ 044*256 + 056 7257.DYDXDefendingHeroUnit2: equ 044*256 + 076 7258.DYDXDefendingHeroUnit3: equ 044*256 + 096 7259.DYDXDefendingHeroUnit4: equ 044*256 + 116 7260.DYDXDefendingHeroUnit5: equ 044*256 + 136 7261.DYDXDefendingHeroUnit6: equ 044*256 + 156 7263SetHeroWhoGetsTradeWithArmyAndAmount:7264 ld ix,(HeroWeTradeWith)7267 call .army72687271 .amount:7272 ld l,(ix+HeroUnits+01)7273 ld h,(ix+HeroUnits+02)7274 ld b,0567275 ld c,1257276 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07278 ld l,(ix+HeroUnits+04)7279 ld h,(ix+HeroUnits+05)7280 ld b,0767281 ld c,1257282 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07284 ld l,(ix+HeroUnits+07)7285 ld h,(ix+HeroUnits+08)7286 ld b,0967287 ld c,1257288 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07290 ld l,(ix+HeroUnits+10)7291 ld h,(ix+HeroUnits+11)7292 ld b,1167293 ld c,1257294 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07296 ld l,(ix+HeroUnits+13)7297 ld h,(ix+HeroUnits+14)7298 ld b,1367299 ld c,1257300 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07302 ld l,(ix+HeroUnits+16)7303 ld h,(ix+HeroUnits+17)7304 ld b,1567305 ld c,1257306 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07307 ret7309 .army:7310 ld a,(ix+HeroUnits+00) 7311 call SetDefendingHeroArmyAndAmount.SetSYSX 7312 ld de,.DYDXVisitingHeroUnit1 7313 call CopyTransparantImage 7315 ld a,(ix+HeroUnits+03) 7316 call SetDefendingHeroArmyAndAmount.SetSYSX 7317 ld de,.DYDXVisitingHeroUnit2 7318 call CopyTransparantImage 7320 ld a,(ix+HeroUnits+06) 7321 call SetDefendingHeroArmyAndAmount.SetSYSX 7322 ld de,.DYDXVisitingHeroUnit3 7323 call CopyTransparantImage 7325 ld a,(ix+HeroUnits+09) 7326 call SetDefendingHeroArmyAndAmount.SetSYSX 7327 ld de,.DYDXVisitingHeroUnit4 7328 call CopyTransparantImage 7330 ld a,(ix+HeroUnits+12) 7331 call SetDefendingHeroArmyAndAmount.SetSYSX 7332 ld de,.DYDXVisitingHeroUnit5 7333 call CopyTransparantImage 7335 ld a,(ix+HeroUnits+15) 7336 call SetDefendingHeroArmyAndAmount.SetSYSX 7337 ld de,.DYDXVisitingHeroUnit6 7338 call CopyTransparantImage 7339 ret7341.DYDXVisitingHeroUnit1: equ 108*256 + 056 7342.DYDXVisitingHeroUnit2: equ 108*256 + 076 7343.DYDXVisitingHeroUnit3: equ 108*256 + 096 7344.DYDXVisitingHeroUnit4: equ 108*256 + 116 7345.DYDXVisitingHeroUnit5: equ 108*256 + 136 7346.DYDXVisitingHeroUnit6: equ 108*256 + 156 7376ExitVisitingAndDefendingArmyRoutine: 7377 ld a,255 7378 ld (PreviousButtonClicked),a7379 call SetCastleOverViewFontPage0Y212 7381 call SetVisitingAndDefendingHeroesAndArmyWindow 7382 call SetVisitingAndDefendingHeroesAndArmy7383 call SwapAndSetPage 7384 call SetVisitingAndDefendingHeroesAndArmyWindow 7385 call SetVisitingAndDefendingHeroesAndArmy7387 ld a,(AreWeInTavern1OrRecruit2?)7388 dec a7389 jp z,CastleOverviewTavernCode.engine7390 jp CastleOverviewRecruitCode.engine7393FirstLineintHeightCastleTavern: equ 1257394SecondLineintHeightCastleTavern: equ 16073967398SetCastleTavernInterruptHandler:7399 di7400 ld hl,CastleInterruptHandler 7401 ld ($38+1),hl 7402 ld a,$c3 7403 ld ($38),a7404 7405 ld a,(VDP_0) 7406 or 16 7407 ld (VDP_0),a 7408 out ($99),a7409 ld a,1287410 out ($99),a7412 ld a,FirstLineintHeightCastleTavern7413 ld (CurrentLineIntHeight),a7414 out ($99),a7415 ld a,19+128 7416 ei7417 out ($99),a 7418 ret7420CastleOverviewTavernCode:7421 call SetScreenOff7423 ld a,17424 ld (AreWeInTavern1OrRecruit2?),a7426 ld a,255 7427 ld (PreviousButtonClicked),a7428 ld ix,GenericButtonTable7429 ld (PreviousButtonClickedIX),ix7431 call SetTavernButtons7432 call SetDefendingAndVisitingHeroButtons7434 ld hl,InGamePalette7435 call SetPalette7437 xor a7438 ld (activepage),a 7439 7440 ld a,%1100 00117441 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 7442 xor a7443 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 7444 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 7445 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 7446 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 7447 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 7449 ld a,1327450 call SetExitButtonHeight7451 7452 call SetTavernGraphics 7453 call SetResourcesPlayer7454 call SetVisitingAndDefendingHeroesAndArmy7455 call SetTavernHeroes7457 ld hl,CopyPage1To07458 call docopy7460 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady7461 call docopy7463 call SetCastleTavernInterruptHandler7464 7465 .engine:7466 call SwapAndSetPage 7467 call PopulateControls 74697474 ld a,(Controls)7475 bit 5,a 7476 jp nz,CastleOverviewCode7478 7479 ld ix,CastleOverviewButtonTable 7480 call CheckButtonMouseInteractionCastle7482 ld ix,CastleOverviewButtonTable7483 call SetCastleButtons 7486 7487 ld ix,GenericButtonTable 7488 call CheckButtonInteractionControlsNotOnInt7490 call .CheckButtonClickedVisitingAndDefendingHeroesAndArmy 7492 7493 ld ix,(PreviousButtonClickedIX) 7494 ld a,(ix+GenericButtonStatus)7495 push af7496 ld a,(PreviousButtonClicked)7497 cp 2557498 jr z,.EndMarkButton 7499 ld (ix+GenericButtonStatus),%1001 00117500 .EndMarkButton:7501 7503 ld ix,GenericButtonTable7504 call SetGenericButtons 7506 7507 pop af7508 ld ix,(PreviousButtonClickedIX) 7509 ld (ix+GenericButtonStatus),a7510 7513 7515 7516 ld ix,GenericButtonTable2 7517 call CheckButtonInteractionControlsNotOnInt7518 call .CheckTavernButtonClicked 7520 ld ix,GenericButtonTable27521 call SetGenericButtons 7524 call WaitVblank7525 call SetScreenOn7526 jp .engine7528.CheckButtonClickedVisitingAndDefendingHeroesAndArmy: 7529 ret nc 7531 7536 7537 ld a,(PreviousButtonClicked)7538 cp b7539 jr nz,.EndCheck17540 ld a,2557541 ld (PreviousButtonClicked),a7542 ret7543 .EndCheck1:7545 7546 ld a,(PreviousButtonClicked)7547 cp 255 7548 jr nz,.EndCheck27550 ld a,b 7551 cp 87552 jp c,.CheckVisitingHero 7554 .CheckDefendingHero:7555 ld c,254 7556 push bc7557 push ix7558 call SetVisitingOrDefendingHeroInIX 7559 pop ix7560 pop bc7561 ret c 7563 ld a,b 7564 cp 147565 jp z,.HighlightNewButton 7567 ld b,a7568 ld a,137569 sub a,b 7570 ld d,07571 ld e,a7573 ld c,254 7574 push bc7575 push ix7576 push de7577 call SetVisitingOrDefendingHeroInIX 7578 pop de7580 add ix,de 7581 add ix,de 7582 add ix,de 7584 ld a,(ix+HeroUnits+1) 7585 cp (ix+HeroUnits+2) 7586 pop ix7587 pop bc7588 ret z7589 7590 jp .HighlightNewButton 7591 7592 .CheckVisitingHero:7593 ld c,002 7594 push bc7595 push ix7596 call SetVisitingOrDefendingHeroInIX 7597 pop ix7598 pop bc7599 ret c 7601 ld a,b 7602 cp 077603 jp z,.HighlightNewButton 7605 ld b,a7606 ld a,067607 sub a,b 7608 ld d,07609 ld e,a7611 ld c,002 7612 push bc7613 push ix7614 push de7615 call SetVisitingOrDefendingHeroInIX 7616 pop de7618 add ix,de 7619 add ix,de 7620 add ix,de 7622 ld a,(ix+HeroUnits+1) 7623 cp (ix+HeroUnits+2) 7624 pop ix7625 pop bc7626 ret z7627 7628 jp .HighlightNewButton 7629 .EndCheck2:7631 76337635764176437646764976517653 ld c,002 7654 push bc7655 push ix7656 call SetVisitingOrDefendingHeroInIX 7657 pop ix7658 pop bc7659 jr c,.EndCheck47660 ld c,254 7661 push bc7662 push ix7663 call SetVisitingOrDefendingHeroInIX 7664 pop ix7665 pop bc7666 jr c,.EndCheck47667 7668 ld a,(PreviousButtonClicked)7669 cp 014 7670 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero7671 ld a,b 7672 cp 7 7673 jr z,.SwapVisitingHeroWithDefendingHero7674 .EndCheckPreviousButtonClickedWasDefendingHero:7675 7676 ld a,(PreviousButtonClicked)7677 cp 007 7678 jr nz,.EndCheck47679 ld a,b 7680 cp 014 7681 jr nz,.EndCheck47683 .SwapVisitingHeroWithDefendingHero:7684 ld c,002 7685 push bc7686 push ix7687 call SetVisitingOrDefendingHeroInIX 7688 push ix 7689 ld c,254 7690 call SetVisitingOrDefendingHeroInIX 7691 ld (ix+HeroStatus),002 7692 pop ix 7693 ld (ix+HeroStatus),254 7694 pop ix7695 pop bc7696 pop af 7698 jp ExitVisitingAndDefendingArmyRoutine7699 .EndCheck4:77017703 ld a,(PreviousButtonClicked)7704 cp 014 7705 jr nz,.EndCheck57706 ld a,b 7707 cp 7 7708 jr nz,.EndCheck57709 7710 .ChangeDefendingHeroIntoVisitingHero:7711 ld c,254 7712 push bc7713 push ix7714 call SetVisitingOrDefendingHeroInIX 7715 ld (ix+HeroStatus),002 7716 pop ix7717 pop bc 7718 pop af 7719 jp ExitVisitingAndDefendingArmyRoutine7720 .EndCheck5:77227724 ld a,(PreviousButtonClicked)7725 cp 007 7726 jr nz,.EndCheck67727 ld a,b 7728 cp 014 7729 jr nz,.EndCheck67731 .ChangeVisitingHeroIntoDefendingHero:7732 ld c,002 7733 push bc7734 push ix7735 call SetVisitingOrDefendingHeroInIX 7736 ld (ix+HeroStatus),254 7737 pop ix7738 pop bc 7739 pop af 7740 jp ExitVisitingAndDefendingArmyRoutine7741 .EndCheck6:77437744 ld a,(PreviousButtonClicked) 7745 cp 014 7746 jr nz,.EndCheck77747 ld a,2557748 ld (PreviousButtonClicked),a7749 ret7750 .EndCheck7:77527753 ld a,(PreviousButtonClicked) 7754 cp 007 7755 jr nz,.EndCheck87756 ld a,2557757 ld (PreviousButtonClicked),a7758 ret7759 .EndCheck8:77617763 ld a,b 7764 cp 14 7765 jp z,.ResetButtons7766 cp 07 7767 jp z,.ResetButtons7768 ld a,(PreviousButtonClicked)7769 cp 14 7770 jp z,.ResetButtons7771 cp 07 7772 jp z,.ResetButtons77747777 ld a,b 7778 cp 87779 jp nc,.EndCheck97780 ld a,(PreviousButtonClicked)7781 cp 87782 jp nc,.EndCheck97784 ld a,067785 sub a,b 7786 ld d,07787 ld e,a7789 ld c,002 7790 push bc7791 push ix7792 push de7793 call SetVisitingOrDefendingHeroInIX 7794 pop de7796 add ix,de 7797 add ix,de 7798 add ix,de 7800 ld a,(ix+HeroUnits+1) 7801 or (ix+HeroUnits+2) 7802 pop ix7803 pop bc7804 jp nz,.EndCheck97805 7807 7808 ld a,(PreviousButtonClicked)7809 ld c,a7810 ld a,067811 sub a,c7812 ld d,07813 ld e,a7815 ld c,002 7816 push bc7817 push ix7818 push de7819 call SetVisitingOrDefendingHeroInIX 7820 pop de7822 add ix,de 7823 add ix,de 7824 add ix,de 7826 ld l,(ix+HeroUnits+1) 7827 ld h,(ix+HeroUnits+2) 7828 dec hl7829 ld (ix+HeroUnits+1),l 7830 ld (ix+HeroUnits+2),h 7831 ld l,(ix+HeroUnits+0) 7833 ld a,(ix+HeroUnits+1) 7834 or (ix+HeroUnits+2) 7835 jr nz,.EndCheckZero7836 ld (ix+HeroUnits+0),0 7837 .EndCheckZero:7838 pop ix7839 pop bc7840 7842 7843 ld a,067844 sub a,b 7845 ld d,07846 ld e,a7848 ld c,002 7849 push bc7850 push ix7851 push de7852 call SetVisitingOrDefendingHeroInIX 7853 pop de7855 add ix,de 7856 add ix,de 7857 add ix,de 7859 ld (ix+HeroUnits+0),l 7860 ld (ix+HeroUnits+1),1 7861 ld (ix+HeroUnits+2),0 7862 pop ix7863 pop bc7864 7866 pop af 7867 jp ExitVisitingAndDefendingArmyRoutine7868 .EndCheck9:78707871 ld a,b 7872 cp 87873 jp c,.EndCheck9b7874 ld a,(PreviousButtonClicked)7875 cp 87876 jp c,.EndCheck9b7878 ld a,137879 sub a,b 7880 ld d,07881 ld e,a7883 ld c,254 7884 push bc7885 push ix7886 push de7887 call SetVisitingOrDefendingHeroInIX 7888 pop de7890 add ix,de 7891 add ix,de 7892 add ix,de 7894 ld a,(ix+HeroUnits+1) 7895 or (ix+HeroUnits+2) 7896 pop ix7897 pop bc7898 jp nz,.EndCheck9b7899 7901 7902 ld a,(PreviousButtonClicked)7903 ld c,a7904 ld a,137905 sub a,c7906 ld d,07907 ld e,a7909 ld c,254 7910 push bc7911 push ix7912 push de7913 call SetVisitingOrDefendingHeroInIX 7914 pop de7916 add ix,de 7917 add ix,de 7918 add ix,de 7920 ld l,(ix+HeroUnits+1) 7921 ld h,(ix+HeroUnits+2) 7922 dec hl7923 ld (ix+HeroUnits+1),l 7924 ld (ix+HeroUnits+2),h 7925 ld l,(ix+HeroUnits+0) 7927 ld a,(ix+HeroUnits+1) 7928 or (ix+HeroUnits+2) 7929 jr nz,.EndCheckZerob7930 ld (ix+HeroUnits+0),0 7931 .EndCheckZerob:7932 pop ix7933 pop bc7934 7936 7937 ld a,137938 sub a,b 7939 ld d,07940 ld e,a7942 ld c,254 7943 push bc7944 push ix7945 push de7946 call SetVisitingOrDefendingHeroInIX 7947 pop de7949 add ix,de 7950 add ix,de 7951 add ix,de 7953 ld (ix+HeroUnits+0),l 7954 ld (ix+HeroUnits+1),1 7955 ld (ix+HeroUnits+2),0 7956 pop ix7957 pop bc7958 7960 pop af 7961 jp ExitVisitingAndDefendingArmyRoutine7962 .EndCheck9b:79657967 ld a,b 7968 cp 87969 jp nc,.EndCheck107970 ld a,(PreviousButtonClicked)7971 cp 87972 jp nc,.EndCheck107974 ld a,067975 sub a,b 7976 ld d,07977 ld e,a7979 ld c,002 7980 push bc7981 push ix7982 push de7983 call SetVisitingOrDefendingHeroInIX 7984 pop de7986 add ix,de 7987 add ix,de 7988 add ix,de 7990 ld l,(ix+HeroUnits+0) 7991 pop ix7992 pop bc7994 ld a,(PreviousButtonClicked)7995 ld c,a7996 ld a,067997 sub a,c 7998 ld d,07999 ld e,a8001 ld c,002 8002 push bc8003 push ix8004 push de8005 call SetVisitingOrDefendingHeroInIX 8006 pop de8008 add ix,de 8009 add ix,de 8010 add ix,de 8012 ld a,(ix+HeroUnits+0) 8013 cp l8014 jp nz,.EndCheck10WithPopIXandBC8016 ld (ix+HeroUnits+0),0 8017 ld l,(ix+HeroUnits+1) 8018 ld h,(ix+HeroUnits+2) 8020 ld (ix+HeroUnits+1),0 8021 ld (ix+HeroUnits+2),0 8022 8023 8024 pop ix8025 pop bc8026 8027 ld a,068028 sub a,b 8029 ld d,08030 ld e,a8032 ld c,002 8033 push bc8034 push ix8035 push de8036 call SetVisitingOrDefendingHeroInIX 8037 pop de8039 add ix,de 8040 add ix,de 8041 add ix,de 8043 ld e,(ix+HeroUnits+1) 8044 ld d,(ix+HeroUnits+2) 8045 add hl,de8047 ld (ix+HeroUnits+1),l 8048 ld (ix+HeroUnits+2),h 8050 pop ix8051 pop bc 8052 pop af 8053 jp ExitVisitingAndDefendingArmyRoutine8055 .EndCheck10WithPopIXandBC:8056 pop ix8057 pop bc8058 .EndCheck10:80608061 ld a,b 8062 cp 88063 jp c,.EndCheck10b8064 ld a,(PreviousButtonClicked)8065 cp 88066 jp c,.EndCheck10b8068 ld a,138069 sub a,b 8070 ld d,08071 ld e,a8073 ld c,254 8074 push bc8075 push ix8076 push de8077 call SetVisitingOrDefendingHeroInIX 8078 pop de8080 add ix,de 8081 add ix,de 8082 add ix,de 8084 ld l,(ix+HeroUnits+0) 8085 pop ix8086 pop bc8089 ld a,(PreviousButtonClicked)8090 ld c,a8091 ld a,138092 sub a,c 8093 ld d,08094 ld e,a8096 ld c,254 8097 push bc8098 push ix8099 push de8100 call SetVisitingOrDefendingHeroInIX 8101 pop de8103 add ix,de 8104 add ix,de 8105 add ix,de 8107 ld a,(ix+HeroUnits+0) 8108 cp l8109 jp nz,.EndCheck10bWithPopIXandBC8111 ld (ix+HeroUnits+0),0 8112 ld l,(ix+HeroUnits+1) 8113 ld h,(ix+HeroUnits+2) 8115 ld (ix+HeroUnits+1),0 8116 ld (ix+HeroUnits+2),0 8117 8118 8119 pop ix8120 pop bc8121 8122 ld a,138123 sub a,b 8124 ld d,08125 ld e,a8127 ld c,254 8128 push bc8129 push ix8130 push de8131 call SetVisitingOrDefendingHeroInIX 8132 pop de8134 add ix,de 8135 add ix,de 8136 add ix,de 8138 ld e,(ix+HeroUnits+1) 8139 ld d,(ix+HeroUnits+2) 8140 add hl,de8142 ld (ix+HeroUnits+1),l 8143 ld (ix+HeroUnits+2),h 8145 pop ix8146 pop bc 8147 pop af 8148 jp ExitVisitingAndDefendingArmyRoutine8150 .EndCheck10bWithPopIXandBC:8151 pop ix8152 pop bc8153 .EndCheck10b:81558158 ld c,002 8159 push bc8160 push ix8161 call SetVisitingOrDefendingHeroInIX 8162 pop ix8163 pop bc8164 jp c,.EndCheck12b8166 ld c,254 8167 push bc8168 push ix8169 call SetVisitingOrDefendingHeroInIX 8170 pop ix8171 pop bc8172 jp c,.EndCheck12b8173 8175 8176 ld c,002 8177 push bc8178 push ix8179 call SetVisitingOrDefendingHeroInIX 8180 call CheckHeroHasAtLeast2CreatureSlotsFilled8181 pop ix8182 pop bc8183 jp c,.EndCheck11 8186 8187 ld a,b 8188 cp 88189 jp c,.EndCheck118191 8192 ld a,138193 sub a,b 8194 ld d,08195 ld e,a8197 ld c,254 8198 push bc8199 push ix8200 push de8201 call SetVisitingOrDefendingHeroInIX 8202 pop de8204 add ix,de 8205 add ix,de 8206 add ix,de 8208 ld a,(ix+HeroUnits+1) 8209 or (ix+HeroUnits+2) 8210 pop ix8211 pop bc8212 jp nz,.EndCheck118213 8215 8216 ld a,(PreviousButtonClicked)8217 ld c,a8218 ld a,068219 sub a,c8220 ld d,08221 ld e,a8223 ld c,002 8224 push bc8225 push ix8226 push de8227 call SetVisitingOrDefendingHeroInIX 8228 pop de8230 add ix,de 8231 add ix,de 8232 add ix,de 8234 ld a,(ix+HeroUnits+0) 8235 ex af,af'8236 ld l,(ix+HeroUnits+1) 8237 ld h,(ix+HeroUnits+2) 8239 ld (ix+HeroUnits+0),0 8240 ld (ix+HeroUnits+1),0 8241 ld (ix+HeroUnits+2),0 8243 pop ix8244 pop bc8246 ld a,138247 sub a,b 8248 ld d,08249 ld e,a8251 ld c,254 8252 push bc8253 push ix8254 push de8255 call SetVisitingOrDefendingHeroInIX 8256 pop de8258 add ix,de 8259 add ix,de 8260 add ix,de 8262 ex af,af'8263 ld (ix+HeroUnits+0),a 8264 ld (ix+HeroUnits+1),l 8265 ld (ix+HeroUnits+2),h 8267 pop ix8268 pop bc8269 pop af 8270 jp ExitVisitingAndDefendingArmyRoutine8271 8272 .EndCheck11:82748276 ld c,254 8277 push bc8278 push ix8279 call SetVisitingOrDefendingHeroInIX 8280 call CheckHeroHasAtLeast2CreatureSlotsFilled8281 pop ix8282 pop bc8283 jp c,.EndCheck11b 8286 8287 ld a,b 8288 cp 88289 jp nc,.EndCheck11b8291 8292 ld a,068293 sub a,b 8294 ld d,08295 ld e,a8297 ld c,002 8298 push bc8299 push ix8300 push de8301 call SetVisitingOrDefendingHeroInIX 8302 pop de8304 add ix,de 8305 add ix,de 8306 add ix,de 8308 ld a,(ix+HeroUnits+1) 8309 or (ix+HeroUnits+2) 8310 pop ix8311 pop bc8312 jp nz,.EndCheck11b8313 8315 8316 ld a,(PreviousButtonClicked)8317 ld c,a8318 ld a,138319 sub a,c8320 ld d,08321 ld e,a8323 ld c,254 8324 push bc8325 push ix8326 push de8327 call SetVisitingOrDefendingHeroInIX 8328 pop de8330 add ix,de 8331 add ix,de 8332 add ix,de 8334 ld a,(ix+HeroUnits+0) 8335 ex af,af'8336 ld l,(ix+HeroUnits+1) 8337 ld h,(ix+HeroUnits+2) 8339 ld (ix+HeroUnits+0),0 8340 ld (ix+HeroUnits+1),0 8341 ld (ix+HeroUnits+2),0 8343 pop ix8344 pop bc8346 ld a,068347 sub a,b 8348 ld d,08349 ld e,a8351 ld c,002 8352 push bc8353 push ix8354 push de8355 call SetVisitingOrDefendingHeroInIX 8356 pop de8358 add ix,de 8359 add ix,de 8360 add ix,de 8362 ex af,af'8363 ld (ix+HeroUnits+0),a 8364 ld (ix+HeroUnits+1),l 8365 ld (ix+HeroUnits+2),h 8367 pop ix8368 pop bc8369 pop af 8370 jp ExitVisitingAndDefendingArmyRoutine8371 8372 .EndCheck11b:83748376 8377 ld c,002 8378 push bc8379 push ix8380 call SetVisitingOrDefendingHeroInIX 8381 call CheckHeroHasAtLeast2CreatureSlotsFilled8382 pop ix8383 pop bc8384 jp c,.EndCheck12 8387 8388 ld a,b 8389 cp 88390 jp c,.EndCheck128392 8393 ld a,(PreviousButtonClicked)8394 ld c,a8395 ld a,068396 sub a,c8397 ld d,08398 ld e,a8400 ld c,002 8401 push bc8402 push ix8403 push de8404 call SetVisitingOrDefendingHeroInIX 8405 pop de8407 add ix,de 8408 add ix,de 8409 add ix,de 8410 ld l,(ix+HeroUnits+0) 8411 pop ix8412 pop bc8413 8414 ld a,138415 sub a,b 8416 ld d,08417 ld e,a8419 ld c,254 8420 push bc8421 push ix8422 push de8423 call SetVisitingOrDefendingHeroInIX 8424 pop de8426 add ix,de 8427 add ix,de 8428 add ix,de 8429 ld a,(ix+HeroUnits+0) 8430 cp l8431 pop ix8432 pop bc8433 jp nz,.EndCheck128434 8436 8437 ld a,(PreviousButtonClicked)8438 ld c,a8439 ld a,068440 sub a,c8441 ld d,08442 ld e,a8444 ld c,002 8445 push bc8446 push ix8447 push de8448 call SetVisitingOrDefendingHeroInIX 8449 pop de8451 add ix,de 8452 add ix,de 8453 add ix,de 8455 ld l,(ix+HeroUnits+1) 8456 ld h,(ix+HeroUnits+2) 8458 ld (ix+HeroUnits+0),0 8459 ld (ix+HeroUnits+1),0 8460 ld (ix+HeroUnits+2),0 8462 pop ix8463 pop bc8465 ld a,138466 sub a,b 8467 ld d,08468 ld e,a8470 ld c,254 8471 push bc8472 push ix8473 push de8474 call SetVisitingOrDefendingHeroInIX 8475 pop de8477 add ix,de 8478 add ix,de 8479 add ix,de 8481 ld e,(ix+HeroUnits+1) 8482 ld d,(ix+HeroUnits+2) 8483 add hl,de8484 ld (ix+HeroUnits+1),l 8485 ld (ix+HeroUnits+2),h 8487 pop ix8488 pop bc8489 pop af 8490 jp ExitVisitingAndDefendingArmyRoutine8491 8492 .EndCheck12:8493 84948496 ld c,254 8497 push bc8498 push ix8499 call SetVisitingOrDefendingHeroInIX 8500 call CheckHeroHasAtLeast2CreatureSlotsFilled8501 pop ix8502 pop bc8503 jp c,.EndCheck12b 8506 8507 ld a,b 8508 cp 88509 jp nc,.EndCheck12b8511 8512 ld a,(PreviousButtonClicked)8513 ld c,a8514 ld a,138515 sub a,c8516 ld d,08517 ld e,a8519 ld c,254 8520 push bc8521 push ix8522 push de8523 call SetVisitingOrDefendingHeroInIX 8524 pop de8526 add ix,de 8527 add ix,de 8528 add ix,de 8529 ld l,(ix+HeroUnits+0) 8530 pop ix8531 pop bc8532 8533 ld a,068534 sub a,b 8535 ld d,08536 ld e,a8538 ld c,002 8539 push bc8540 push ix8541 push de8542 call SetVisitingOrDefendingHeroInIX 8543 pop de8545 add ix,de 8546 add ix,de 8547 add ix,de 8548 ld a,(ix+HeroUnits+0) 8549 cp l8550 pop ix8551 pop bc8552 jp nz,.EndCheck12b8553 8555 8556 ld a,(PreviousButtonClicked)8557 ld c,a8558 ld a,138559 sub a,c8560 ld d,08561 ld e,a8563 ld c,254 8564 push bc8565 push ix8566 push de8567 call SetVisitingOrDefendingHeroInIX 8568 pop de8570 add ix,de 8571 add ix,de 8572 add ix,de 8574 ld l,(ix+HeroUnits+1) 8575 ld h,(ix+HeroUnits+2) 8577 ld (ix+HeroUnits+0),0 8578 ld (ix+HeroUnits+1),0 8579 ld (ix+HeroUnits+2),0 8581 pop ix8582 pop bc8584 ld a,068585 sub a,b 8586 ld d,08587 ld e,a8589 ld c,002 8590 push bc8591 push ix8592 push de8593 call SetVisitingOrDefendingHeroInIX 8594 pop de8596 add ix,de 8597 add ix,de 8598 add ix,de 8600 ld e,(ix+HeroUnits+1) 8601 ld d,(ix+HeroUnits+2) 8602 add hl,de8603 ld (ix+HeroUnits+1),l 8604 ld (ix+HeroUnits+2),h 8606 pop ix8607 pop bc8608 pop af 8609 jp ExitVisitingAndDefendingArmyRoutine8610 8611 .EndCheck12b:86138616 8617 ld a,b 8618 cp 8 8619 jp c,.EndCheckbothSlotsClickedBelongToDefendingHero8620 ld a,(PreviousButtonClicked)8621 cp 88622 jp nc,.Swap8623 .EndCheckbothSlotsClickedBelongToDefendingHero:8625 8626 ld a,b 8627 cp 8 8628 jp nc,.EndCheckbothSlotsClickedBelongToVisitingHero8629 ld a,(PreviousButtonClicked)8630 cp 88631 jp c,.Swap8632 .EndCheckbothSlotsClickedBelongToVisitingHero:8634 8635 ld c,002 8636 push bc8637 push de8638 call SetVisitingOrDefendingHeroInIX 8639 pop de8640 pop bc8641 jp c,.ResetButtons 8642 8643 ld c,254 8644 push bc8645 push de8646 call SetVisitingOrDefendingHeroInIX 8647 pop de8648 pop bc8649 jp c,.ResetButtons 8656 .Swap:8657 ld a,b 8658 call .SetHeroUnitsInIX8660 ld a,(ix+HeroUnits+0) 8661 ex af,af'8662 ld l,(ix+HeroUnits+1) 8663 ld h,(ix+HeroUnits+2) 8665 ld a,l8666 or h8667 jp z,.ResetButtons 8668 exx8670 ld a,(PreviousButtonClicked) 8671 call .SetHeroUnitsInIX8673 ld a,(ix+HeroUnits+0) 8674 ex af,af'8675 ld (ix+HeroUnits+0),a 8676 ld l,(ix+HeroUnits+1) 8677 ld h,(ix+HeroUnits+2) 8679 ld a,l8680 or h8681 jp z,.ResetButtons 8683 exx8684 ld (ix+HeroUnits+1),l 8685 ld (ix+HeroUnits+2),h 8687 ld a,b 8688 call .SetHeroUnitsInIX8689 ex af,af'8690 ld (ix+HeroUnits+0),a 8691 exx8692 ld (ix+HeroUnits+1),l 8693 ld (ix+HeroUnits+2),h 8694 8695 pop af 8696 jp ExitVisitingAndDefendingArmyRoutine8697 8698 .EndCheck13:8699 8700 .HighlightNewButton:8701 ld a,b 8702 ld (PreviousButtonClicked),a8703 ld (PreviousButtonClickedIX),ix8704 ret8706 .ResetButtons:8707 ld a,255 8708 ld (PreviousButtonClicked),a8709 ret8711.SetHeroUnitsInIX:8712 cp 88713 jp c,.VisitingHero8715 .DefendingHero:8716 ld c,a8717 ld a,138718 sub a,c 8719 ld d,08720 ld e,a8722 ld c,254 8723 push bc8724 push de8725 call SetVisitingOrDefendingHeroInIX 8726 pop de8727 pop bc8728 add ix,de 8729 add ix,de 8730 add ix,de 8731 ret8732 8733 .VisitingHero: 8734 ld c,a8735 ld a,068736 sub a,c 8737 ld d,08738 ld e,a8740 ld c,002 8741 push bc8742 push de8743 call SetVisitingOrDefendingHeroInIX 8744 pop de8745 pop bc8746 add ix,de 8747 add ix,de 8748 add ix,de 8749 ret8757.CheckTavernButtonClicked: 8758 ret nc8760 ld a,002 8761 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8762 ld c,002 8763 push bc 8764 call SetVisitingOrDefendingHeroInIX 8765 pop bc 8766 jr c,.go 8768 ld a,254 8769 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8770 ld c,254 8771 push bc 8772 call SetVisitingOrDefendingHeroInIX 8773 pop bc 8774 ret nc 8775 .go:8777 ld a,b8778 cp 38779 jr z,.TavernButton1Pressed8780 cp 28781 jr z,.TavernButton2Pressed87828785 .TavernButton3Pressed:8786 push ix8787 call SetTavernHeroesTablePlayerinIX8788 ld a,(ix+TavernHero3) 8789 pop ix8790 or a8791 ret z 8792 call .Reduce2000Gold 8793 jp c,PlayInsuffucientFundsSfx 8794 call .SetHeroStats 8795 push ix8796 call SetTavernHeroesTablePlayerinIX8797 ld (ix+TavernHero3),000 8798 pop ix8799 jp .HeroRecruited8801 .TavernButton2Pressed:8802 push ix8803 call SetTavernHeroesTablePlayerinIX8804 ld a,(ix+TavernHero2) 8805 pop ix8806 or a8807 ret z 8808 call .Reduce2000Gold 8809 jp c,PlayInsuffucientFundsSfx 8810 call .SetHeroStats 8811 push ix8812 call SetTavernHeroesTablePlayerinIX8813 ld (ix+TavernHero2),000 8814 pop ix8815 jp .HeroRecruited8817 .TavernButton1Pressed:8818 push ix8819 call SetTavernHeroesTablePlayerinIX8820 ld a,(ix+TavernHero1) 8821 pop ix8822 or a8823 ret z 8824 call .Reduce2000Gold 8825 jp c,PlayInsuffucientFundsSfx 8826 call .SetHeroStats 8827 push ix8828 call SetTavernHeroesTablePlayerinIX8829 ld (ix+TavernHero1),000 8830 pop ix8831 jp .HeroRecruited8833 .HeroRecruited:8835 push iy8836 push bc8837 ld bc,SFX_Purchase8838 call RePlayerSFX_PlayCh18839 pop bc8840 pop iy8842 call SetResourcesPlayer8843 call SetVisitingAndDefendingHeroesAndArmy8844 call SetTavernHeroes8845 call SetTavernButtons8846 ld ix,GenericButtonTable28847 call SetGenericButtons 8849 call SwapAndSetPage 8851 call SetResourcesPlayer8852 call SetVisitingAndDefendingHeroesAndArmy8853 call SetTavernHeroes8854 call SetTavernButtons8855 ld ix,GenericButtonTable28856 call SetGenericButtons 8857 pop af 8858 jp CastleOverviewTavernCode.engine8860 .SetHeroStats: 8861 push af 8862 call .CheckIsHeroAHeroThatHasFled?8863 call SetEmptyHeroSlotForCurrentPlayerInIX8864 call .ClearHeroSlot 8865 call .SetYX 8866 pop af 8868 8869 ld b,a 8870 ld hl,HeroAddressesAdol-heroAddressesLenght8871 ld de,heroAddressesLenght 8872 .loop2:8873 add hl,de8874 djnz .loop28875 ld (ix+HeroSpecificInfo+0),l8876 ld (ix+HeroSpecificInfo+1),h8877 8878 8879 ld de,HeroInfoSkill8880 add hl,de8881 ld a,(hl)8882 ld (ix+HeroSkills),a8883 8884 8885 inc hl 8886 ld a,(hl)8887 dec a8888 ld b,08889 ld c,a8890 ld de,118891 call DivideBCbyDE 8893 add hl,hl 8894 add hl,hl 8895 ld de,.HeroSkillPerClassTable8896 add hl,de8897 ld a,(hl)8898 ld (ix+HeroStatAttack),a8899 inc hl8900 ld a,(hl)8901 ld (ix+HeroStatDefense),a8902 inc hl8903 ld a,(hl)8904 ld (ix+HeroStatKnowledge),a8905 inc hl8906 ld a,(hl)8907 ld (ix+HeroStatSpellDamage),a8908 8909 8910 ld a,(iy+CastleLevel1Units) 8911 ld (ix+HeroUnits),a8913 8914 call SetManaAndMovementToMax 8915 ret8916 8917 .HeroSkillPerClassTable:89188919 db 2,1,1,1 8920 db 3,1,1,0 8921 db 1,3,1,0 8922 db 1,2,1,1 8923 8924 db 1,2,1,1 8925 db 1,1,2,1 8926 db 2,1,1,1 8927 8928 db 0,0,3,2 8929 db 1,0,1,3 8930 db 0,1,2,2 8931 db 1,1,2,1 8932 8933 .Reduce2000Gold:8934 push af8935 call SetResourcesCurrentPlayerinIX 8937 ld l,(ix+0)8938 ld h,(ix+1) 8939 ld de,20008940 or a8941 pop af8942 sbc hl,de8943 ret c8944 ld (ix+0),l8945 ld (ix+1),h 8946 ret8948 .ClearHeroSlot:8949 ld hl,EmptyHeroRecruitedAtTavern8950 push ix8951 pop de8952 ld bc,lenghtherotable-2 8953 ldir8954 ret8956 .SetYX:8957 ld a,(iy+CastleY) 8958 dec a8959 ld (ix+HeroY),a 8960 ld a,(iy+Castlex) 8961 inc a8962 inc a8963 ld (ix+HeroX),a 8964 ret8966.CheckIsHeroAHeroThatHasFled?:8967 ld c,a 8968 ld b,amountofheroesperplayer8969 ld a,(whichplayernowplaying?)8970 cp 1 | ld ix,pl1hero1y | jr z,.GoFindHero8971 cp 2 | ld ix,pl2hero1y | jr z,.GoFindHero8972 cp 3 | ld ix,pl3hero1y | jr z,.GoFindHero8973 cp 4 | ld ix,pl4hero1y | jr z,.GoFindHero8975 .GoFindHero:8976 ld l,(ix+HeroSpecificInfo+0) 8977 ld h,(ix+HeroSpecificInfo+1)8978 ld de,HeroInfoNumber8979 add hl,de8980 ld a,(hl) 8981 cp c8982 jr z,.HeroFound8983 ld de,lenghtherotable8984 add ix,de8985 djnz .GoFindHero8986 ret8988 .HeroFound:8989 8991 ld a,(ix+HeroUnits)8992 cp UnitWhenRetreated8993 jr nz,.EndCheckRetreated8994 ld a,(iy+CastleLevel1Units) 8995 ld (ix+HeroUnits),a8996 ld (ix+HeroUnits+1),18997 .EndCheckRetreated:8998 8999 pop af 9001 ld a,(EmptyHeroRecruitedAtTavern+HeroStatus)9002 ld (ix+heroStatus),a 9004 9005 call SetManaAndMovementToMax 9007 call .SetYX9008 call .FaceHeroLookingDown9010 pop af9011 ret 9013 .FaceHeroLookingDown:9014 9015 ld e,(ix+HeroSpecificInfo+0) 9016 ld d,(ix+HeroSpecificInfo+1)9017 push de9018 pop ix 9020 ld a,(ix+HeroinfoSYSX+0) 9021 and %0100 1000 9022 or a,128 + (064 / 2) 9023 xor 89024 ld (ix+HeroinfoSYSX+0),a9025 ret9030CheckHeroHasAtLeast2CreatureSlotsFilled:9031 ld b,0 9032 ld a,(ix+HeroUnits+1) 9033 or (ix+HeroUnits+2) 9034 jr z,.DefendingHeroCreatureSlot1Empty9035 inc b9036 .DefendingHeroCreatureSlot1Empty:9037 ld a,(ix+HeroUnits+4) 9038 or (ix+HeroUnits+5) 9039 jr z,.DefendingHeroCreatureSlot2Empty9040 inc b9041 .DefendingHeroCreatureSlot2Empty:9042 ld a,(ix+HeroUnits+7) 9043 or (ix+HeroUnits+8) 9044 jr z,.DefendingHeroCreatureSlot3Empty9045 inc b9046 .DefendingHeroCreatureSlot3Empty:9047 ld a,(ix+HeroUnits+10) 9048 or (ix+HeroUnits+11) 9049 jr z,.DefendingHeroCreatureSlot4Empty9050 inc b9051 .DefendingHeroCreatureSlot4Empty:9052 ld a,(ix+HeroUnits+13) 9053 or (ix+HeroUnits+14) 9054 jr z,.DefendingHeroCreatureSlot5Empty9055 inc b9056 .DefendingHeroCreatureSlot5Empty:9057 ld a,(ix+HeroUnits+16) 9058 or (ix+HeroUnits+17) 9059 jr z,.DefendingHeroCreatureSlot6Empty9060 inc b9061 .DefendingHeroCreatureSlot6Empty:9062 ld a,b9063 cp 29064 ret9066SetEmptyHeroSlotForCurrentPlayerInIX:9067 ld b,amountofheroesperplayer9068 ld a,(whichplayernowplaying?)9069 cp 1 | ld ix,pl1hero1y | jr z,.GoFindEmptySlotLoop9070 cp 2 | ld ix,pl2hero1y | jr z,.GoFindEmptySlotLoop9071 cp 3 | ld ix,pl3hero1y | jr z,.GoFindEmptySlotLoop9072 cp 4 | ld ix,pl4hero1y | jr z,.GoFindEmptySlotLoop9074 .GoFindEmptySlotLoop:9075 ld a,(ix+HeroStatus)9076 cp 2559077 ret z9078 ld de,lenghtherotable9079 add ix,de9080 djnz .GoFindEmptySlotLoop9082 pop af 9083 pop af 9084 pop af 9085 ret9087SetTavernHeroes:9088 call SetTavernHeroesTablePlayerinIX9089 call SettavernHeroIcons9090 call SettavernHeroNames9091 call SettavernHeroClass9092 call SettavernHeroSkill9093 call EraseTavernHeroWindowWhenUnavailable9094 ret9096SetTavernHeroesTablePlayerinIX:9097 ld a,(whichplayernowplaying?)9098 ld ix,TavernHeroesPlayer19099 cp 19100 ret z9101 ld ix,TavernHeroesPlayer29102 cp 29103 ret z9104 ld ix,TavernHeroesPlayer39105 cp 39106 ret z9107 ld ix,TavernHeroesPlayer491089110 ret9112EraseTavernHeroWindowWhenUnavailable:9113 ld a,(ix+TavernHero1)9114 or a9115 ld de,$0000 + (045*128) + (006/2) - 1289116 call z,.EraseWindow9117 ld a,(ix+TavernHero2)9118 or a9119 ld de,$0000 + (045*128) + (092/2) - 1289120 call z,.EraseWindow9121 ld a,(ix+TavernHero3)9122 or a9123 ld de,$0000 + (045*128) + (178/2) - 1289124 call z,.EraseWindow9125 ret9127 .EraseWindow:9128 ld hl,$4000 + (055*128) + (180/2) - 1289129 ld bc,$0000 + (070*256) + (072/2)9130 ld a,BuildBlock 9131 jp CopyRamToVramCorrectedCastleOverview 9152TextClass: db "Class:",2559153SettavernHeroClass:9154 ld hl,TextClass9155 ld b,004+28 9156 ld c,048+02 9157 call SetText 9159 ld hl,TextClass9160 ld b,090+28 9161 ld c,048+02 9162 call SetText 9164 ld hl,TextClass9165 ld b,176+28 9166 ld c,048+02 9167 call SetText 9169 ld a,(ix+TavernHero1)9170 ld b,004+28 9171 ld c,058+00 9172 call .SetHeroClass9174 ld a,(ix+TavernHero2)9175 ld b,090+28 9176 ld c,058+00 9177 call .SetHeroClass9179 ld a,(ix+TavernHero3)9180 ld b,176+28 9181 ld c,058+00 9182 call .SetHeroClass9183 ret9185 .SetHeroClass:9186 or a9187 ret z9189 push bc9191 ld b,a9192 ld hl,HeroAddressesAdol-heroAddressesLenght+HeroInfoClass9193 ld de,heroAddressesLenght9194 .loop:9195 add hl,de9196 djnz .loop9198 pop bc9199 9200 call SetText 9201 ret9205SettavernHeroNames:9206 9207 ld hl,$4000 + (034*128) + (004/2) - 1289208 ld de,$0000 + (034*128) + (004/2) - 1289209 ld bc,$0000 + (007*256) + (248/2)9210 ld a,TavernBlock 9211 call CopyRamToVramCorrectedCastleOverview 9213 ld a,(ix+TavernHero1)9214 ld b,004+06+(17*2) 9215 ld c,035+00 9216 call .SetHeroName9218 ld a,(ix+TavernHero2)9219 ld b,090+06+(17*2) 9220 ld c,035+00 9221 call .SetHeroName9223 ld a,(ix+TavernHero3)9224 ld b,176+06+(17*2) 9225 ld c,035+00 9226 call .SetHeroName9227 ret9229 .SetHeroName:9230 or a9231 ret z9233 push bc9235 ld b,a9236 ld hl,HeroAddressesAdol-heroAddressesLenght9237 ld de,heroAddressesLenght9238 .loop:9239 add hl,de9240 djnz .loop9242 pop bc9244 call CenterHeroNameHasGainedALevel9245 call SetText 9246 ret9247 9248SettavernHeroIcons: 9249 ld a,(ix+TavernHero1)9250 ld de,DYDX16x30HeroIconTavernWindow19251 call .SetHeroIcon9252 ld a,(ix+TavernHero2)9253 ld de,DYDX16x30HeroIconTavernWindow29254 call .SetHeroIcon9255 ld a,(ix+TavernHero3)9256 ld de,DYDX16x30HeroIconTavernWindow39257 call .SetHeroIcon9258 ret9259 9260 .SetHeroIcon:9261 or a9262 ret z9264 push ix 9265 push de 9266 ld b,a9267 ld ix,HeroAddressesAdol-heroAddressesLenght9268 ld de,heroAddressesLenght9269 .loop:9270 add ix,de9271 djnz .loop9273 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9274 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9275 ld bc,$40009276 xor a9277 sbc hl,bc9279 pop de 9280 pop ix 9281 ld bc,NXAndNY16x30HeroIcon9282 ld a,Hero16x30PortraitsBlock 9283 jp CopyRamToVramCorrectedCastleOverview 9285DYDX16x30HeroIconTavernWindow1: equ $0000 + (047*128) + (008/2) - 1289286DYDX16x30HeroIconTavernWindow2: equ $0000 + (047*128) + (094/2) - 1289287DYDX16x30HeroIconTavernWindow3: equ $0000 + (047*128) + (180/2) - 1289290SetVisitingAndDefendingHeroesAndArmy:9291 call SetVisitingHero9292 call SetDefendingHero9293 call SetVisitingHeroArmyAndAmount9294 call SetDefendingHeroArmyAndAmount9295 ret9297SetDefendingHeroArmyAndAmount:9298 ld c,254 9299 call SetVisitingOrDefendingHeroInIX 9300 ret c9302 call .army93039306 .amount:9307 ld l,(ix+HeroUnits+01)9308 ld h,(ix+HeroUnits+02)9309 ld b,0299310 ld c,1979311 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09313 ld l,(ix+HeroUnits+04)9314 ld h,(ix+HeroUnits+05)9315 ld b,0459316 ld c,1979317 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09319 ld l,(ix+HeroUnits+07)9320 ld h,(ix+HeroUnits+08)9321 ld b,0619322 ld c,1979323 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09325 ld l,(ix+HeroUnits+10)9326 ld h,(ix+HeroUnits+11)9327 ld b,0779328 ld c,1979329 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09331 ld l,(ix+HeroUnits+13)9332 ld h,(ix+HeroUnits+14)9333 ld b,0939334 ld c,1979335 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09337 ld l,(ix+HeroUnits+16)9338 ld h,(ix+HeroUnits+17)9339 ld b,1099340 ld c,1979341 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09342 ret9344 .army:9345 ld a,(ix+HeroUnits+00) 9346 call .SetSYSX 9347 ld de,DYDXDefendingHeroUnit1 9348 call CopyTransparantImage 9350 ld a,(ix+HeroUnits+03) 9351 call .SetSYSX 9352 ld de,DYDXDefendingHeroUnit2 9353 call CopyTransparantImage 9355 ld a,(ix+HeroUnits+06) 9356 call .SetSYSX 9357 ld de,DYDXDefendingHeroUnit3 9358 call CopyTransparantImage 9360 ld a,(ix+HeroUnits+09) 9361 call .SetSYSX 9362 ld de,DYDXDefendingHeroUnit4 9363 call CopyTransparantImage 9365 ld a,(ix+HeroUnits+12) 9366 call .SetSYSX 9367 ld de,DYDXDefendingHeroUnit5 9368 call CopyTransparantImage 9370 ld a,(ix+HeroUnits+15) 9371 call .SetSYSX 9372 ld de,DYDXDefendingHeroUnit6 9373 call CopyTransparantImage 9374 ret9376 .SetSYSX: 9377 ld h,09378 ld l,a9379 add hl,hl 9380 ld de,UnitSYSXTable14x14Portraits9381 add hl,de9382 ld c,(hl)9383 inc hl9384 ld b,(hl) 9385 push bc9386 pop hl9388 ld a,Enemy14x14PortraitsBlock 9389 ld bc,NXAndNY14x14CharaterPortraits9390 ret9392 9393UnitSYSXTable14x14Portraits: 9394 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1289395 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-1289396 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-1289397 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-1289398 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-1289399 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-1289400 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-1289402 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-1289403 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-1289404 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-1289405 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-1289407DYDXDefendingHeroUnit1: equ 256*181 + 028 9408DYDXDefendingHeroUnit2: equ 256*181 + 044 9409DYDXDefendingHeroUnit3: equ 256*181 + 060 9410DYDXDefendingHeroUnit4: equ 256*181 + 076 9411DYDXDefendingHeroUnit5: equ 256*181 + 092 9412DYDXDefendingHeroUnit6: equ 256*181 + 108 9414SetVisitingHeroArmyAndAmount:9415 ld c,002 9416 call SetVisitingOrDefendingHeroInIX 9417 ret c9419 call .army94209423 .amount:9424 ld l,(ix+HeroUnits+01)9425 ld h,(ix+HeroUnits+02)9426 ld b,1579427 ld c,1979428 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09430 ld l,(ix+HeroUnits+04)9431 ld h,(ix+HeroUnits+05)9432 ld b,1739433 ld c,1979434 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09436 ld l,(ix+HeroUnits+07)9437 ld h,(ix+HeroUnits+08)9438 ld b,1899439 ld c,1979440 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09442 ld l,(ix+HeroUnits+10)9443 ld h,(ix+HeroUnits+11)9444 ld b,2059445 ld c,1979446 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09448 ld l,(ix+HeroUnits+13)9449 ld h,(ix+HeroUnits+14)9450 ld b,2219451 ld c,1979452 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09454 ld l,(ix+HeroUnits+16)9455 ld h,(ix+HeroUnits+17)9456 ld b,2379457 ld c,1979458 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09459 ret9461 .army:9462 ld a,(ix+HeroUnits+00) 9463 call SetDefendingHeroArmyAndAmount.SetSYSX 9464 ld de,DYDXVisitingHeroUnit1 9465 call CopyTransparantImage 9467 ld a,(ix+HeroUnits+03) 9468 call SetDefendingHeroArmyAndAmount.SetSYSX 9469 ld de,DYDXVisitingHeroUnit2 9470 call CopyTransparantImage 9472 ld a,(ix+HeroUnits+06) 9473 call SetDefendingHeroArmyAndAmount.SetSYSX 9474 ld de,DYDXVisitingHeroUnit3 9475 call CopyTransparantImage 9477 ld a,(ix+HeroUnits+09) 9478 call SetDefendingHeroArmyAndAmount.SetSYSX 9479 ld de,DYDXVisitingHeroUnit4 9480 call CopyTransparantImage 9482 ld a,(ix+HeroUnits+12) 9483 call SetDefendingHeroArmyAndAmount.SetSYSX 9484 ld de,DYDXVisitingHeroUnit5 9485 call CopyTransparantImage 9487 ld a,(ix+HeroUnits+15) 9488 call SetDefendingHeroArmyAndAmount.SetSYSX 9489 ld de,DYDXVisitingHeroUnit6 9490 call CopyTransparantImage 9491 ret9493DYDXVisitingHeroUnit1: equ 256*181 + 156 9494DYDXVisitingHeroUnit2: equ 256*181 + 172 9495DYDXVisitingHeroUnit3: equ 256*181 + 188 9496DYDXVisitingHeroUnit4: equ 256*181 + 204 9497DYDXVisitingHeroUnit5: equ 256*181 + 220 9498DYDXVisitingHeroUnit6: equ 256*181 + 236 9500SetVisitingOrDefendingHeroInIX: 9501 ld a,(whichplayernowplaying?)9502 cp 1 | ld ix,pl1hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9503 cp 2 | ld ix,pl2hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9504 cp 3 | ld ix,pl3hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9505 cp 4 | ld ix,pl4hero1y | jr z,.CheckHeroVisitingOrDefendingCastle 9507 .CheckHeroVisitingOrDefendingCastle:9508 ld b,amountofheroesperplayer9509 .loop:9510 call .DoCheckHero 9511 ld de,lenghtherotable9512 add ix,de 9513 djnz .loop9514 add ix,de 9515 scf 9516 ret9518 .DoCheckHero:9519 ld a,(iy+CastleY) 9520 dec a9521 cp (ix+Heroy)9522 ret nz9523 ld a,(iy+CastleX)9524 inc a9525 inc a9526 cp (ix+Herox)9527 ret nz9528 ld a,(ix+HeroStatus) 9529 cp c 9530 ret nz9532 pop bc 9533 ret9535SetDefendingHero:9536 ld c,254 9537 call SetVisitingOrDefendingHeroInIX 9539 ld de,$0000 + (176*128) + (004/2) - 1289540 jp c,SetNoHeroVisitingOrDefendingCastle9541 ld de,DYDX16x30HeroIconAtDefendingHeroWindow9542 jp DoSetVisitingOrDefendingHero9543 9544SetVisitingHero: 9545 ld c,002 9546 call SetVisitingOrDefendingHeroInIX 9548 ld de,$0000 + (176*128) + (132/2) - 1289549 jp c,SetNoHeroVisitingOrDefendingCastle9550 ld de,DYDX16x30HeroIconAtVisitingHeroWindow9551 jp DoSetVisitingOrDefendingHero9553SetNoHeroVisitingOrDefendingCastle:9554 ld hl,$4000 + (013*128) + (230/2) - 1289555 ld bc,$0000 + (028*256) + (020/2)9556 ld a,ButtonsRecruitBlock 9557 jp CopyRamToVramCorrectedCastleOverview 9559DoSetVisitingOrDefendingHero:9560 9561 ld l,(ix+HeroSpecificInfo+0) 9562 ld h,(ix+HeroSpecificInfo+1)9563 push hl9564 pop ix9566 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9567 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9568 ld bc,$40009569 xor a9570 sbc hl,bc9572 ld bc,NXAndNY16x30HeroIcon9573 ld a,Hero16x30PortraitsBlock 9574 jp CopyRamToVramCorrectedCastleOverview 9576DYDX16x30HeroIconAtVisitingHeroWindow: equ $0000 + (176*128) + (134/2) - 1289577DYDX16x30HeroIconAtDefendingHeroWindow: equ $0000 + (176*128) + (006/2) - 1289579SetDefendingAndVisitingHeroButtons:9580 ld hl,DefendingAndVisitingHeroButtonTable-29581 ld de,GenericButtonTable-29582 ld bc,2+(GenericButtonTableLenghtPerButton*14)9583 ldir9584 ret9586DefendingAndVisitingHeroButtonTableGfxBlock: db ButtonsRecruitBlock9587DefendingAndVisitingHeroButtonTableAmountOfButtons: db 149588DefendingAndVisitingHeroButtonTable: 9590 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9591 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 9592 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1289593 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1289594 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1289595 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1289596 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1289598 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1289599 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1289600 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1289601 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1289602 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1289603 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1289604 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1289606.Button1Ytop: equ 1749607.Button1YBottom: equ .Button1Ytop + 0349608.Button1XLeft: equ 0049609.Button1XRight: equ .Button1XLeft + 0209611.Button2Ytop: equ 1769612.Button2YBottom: equ .Button2Ytop + 0309613.Button2XLeft: equ 0279614.Button2XRight: equ .Button2XLeft + 0169616.Button3Ytop: equ 1769617.Button3YBottom: equ .Button3Ytop + 0309618.Button3XLeft: equ 0439619.Button3XRight: equ .Button3XLeft + 0169621.Button4Ytop: equ 1769622.Button4YBottom: equ .Button4Ytop + 0309623.Button4XLeft: equ 0599624.Button4XRight: equ .Button4XLeft + 0169626.Button5Ytop: equ 1769627.Button5YBottom: equ .Button5Ytop + 0309628.Button5XLeft: equ 0759629.Button5XRight: equ .Button5XLeft + 0169631.Button6Ytop: equ 1769632.Button6YBottom: equ .Button6Ytop + 0309633.Button6XLeft: equ 0919634.Button6XRight: equ .Button6XLeft + 0169636.Button7Ytop: equ 1769637.Button7YBottom: equ .Button7Ytop + 0309638.Button7XLeft: equ 1079639.Button7XRight: equ .Button7XLeft + 0169643.Button8Ytop: equ 1749644.Button8YBottom: equ .Button8Ytop + 0349645.Button8XLeft: equ 004 + 1289646.Button8XRight: equ .Button8XLeft + 0209648.Button9Ytop: equ 1769649.Button9YBottom: equ .Button9Ytop + 0309650.Button9XLeft: equ 027 + 1289651.Button9XRight: equ .Button9XLeft + 0169653.Button10Ytop: equ 1769654.Button10YBottom: equ .Button10Ytop + 0309655.Button10XLeft: equ 043 + 1289656.Button10XRight: equ .Button10XLeft + 0169658.Button11Ytop: equ 1769659.Button11YBottom: equ .Button11Ytop + 0309660.Button11XLeft: equ 059 + 1289661.Button11XRight: equ .Button11XLeft + 0169663.Button12Ytop: equ 1769664.Button12YBottom: equ .Button12Ytop + 0309665.Button12XLeft: equ 075 + 1289666.Button12XRight: equ .Button12XLeft + 0169668.Button13Ytop: equ 1769669.Button13YBottom: equ .Button13Ytop + 0309670.Button13XLeft: equ 091 + 1289671.Button13XRight: equ .Button13XLeft + 0169673.Button14Ytop: equ 1769674.Button14YBottom: equ .Button14Ytop + 0309675.Button14XLeft: equ 107 + 1289676.Button14XRight: equ .Button14XLeft + 0169693SetTavernButtons:9694 ld hl,TavernButtonTable-29695 ld de,GenericButtonTable2-29696 ld bc,2+(GenericButtonTableLenghtPerButton*3)9697 ldir9699 call .SetRedButtonsIfPlayerHasInsufficientFunds9700 call .SetBrownButtonIfHeroIsAlreadyRecruited9701 ret9703 .SetBrownButtonIfHeroIsAlreadyRecruited:9704 call SetTavernHeroesTablePlayerinIX9705 ld a,(ix+TavernHero1) 9706 or a9707 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*0)9708 call z,.AlreadyRecruitedSetBrown9710 ld a,(ix+TavernHero2) 9711 or a9712 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*1)9713 call z,.AlreadyRecruitedSetBrown9715 ld a,(ix+TavernHero3) 9716 or a9717 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*2)9718 call z,.AlreadyRecruitedSetBrown9719 ret9721 .AlreadyRecruitedSetBrown:9722 ld hl,.BrownButton9723 ld bc,69724 ldir9725 ret9727 .BrownButton:9728 dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 1289729 9730 .SetRedButtonsIfPlayerHasInsufficientFunds:9731 call SetResourcesCurrentPlayerinIX9733 9734 ld l,(ix+0)9735 ld h,(ix+1) 9736 ld de,20009737 xor a9738 sbc hl,de9739 ret nc9740 9741 ld hl,TavernButtonTableWhenNotEnoughCash9742 ld de,GenericButtonTable29743 ld bc,GenericButtonTableLenghtPerButton*39744 ldir9745 ret9753TavernButton1Ytop: equ 1189754TavernButton1YBottom: equ TavernButton1Ytop + 0099755TavernButton1XLeft: equ 0049756TavernButton1XRight: equ TavernButton1XLeft + 0769758TavernButton2Ytop: equ 1189759TavernButton2YBottom: equ TavernButton2Ytop + 0099760TavernButton2XLeft: equ 0909761TavernButton2XRight: equ TavernButton2XLeft + 0769763TavernButton3Ytop: equ 1189764TavernButton3YBottom: equ TavernButton3Ytop + 0099765TavernButton3XLeft: equ 1769766TavernButton3XRight: equ TavernButton3XLeft + 0769768TavernButtonTableLenghtPerButton: equ TavernButtonTable.endlenght-TavernButtonTable9769TavernButtonTableGfxBlock: db ButtonsRecruitBlock9770TavernButtonTableAmountOfButtons: db 39771TavernButtonTable: 9772 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9773 .endlenght:9774 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9775 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289777TavernButtonTableWhenNotEnoughCash: 9778 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9779 .endlenght:9780 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9781 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289789FirstLineintHeightCastleMarket: equ 0749790SecondLineintHeightCastleMarket: equ 1179791ThirdLineintHeightCastleMarket: equ 1599792SetCastleMarketInterruptHandler:9793 di9794 ld hl,CastleInterruptHandler 9795 ld ($38+1),hl 9796 ld a,$c3 9797 ld ($38),a9798 9799 ld a,(VDP_0) 9800 or 16 9801 ld (VDP_0),a 9802 out ($99),a9803 ld a,1289804 out ($99),a9806 ld a,FirstLineintHeightCastleMarket9807 ld (CurrentLineIntHeight),a9808 out ($99),a9809 ld a,19+128 9810 ei9811 out ($99),a 9812 ret9814SetCastleMarketInterruptSecondLine:9815 ld a,SecondLineintHeightCastleMarket9816 ld (CurrentLineIntHeight),a9817 out ($99),a9818 ld a,19+128 9819 ei9820 out ($99),a 9821 ret9823SetCastleMarketInterruptThirdLine:9824 ld a,ThirdLineintHeightCastleMarket9825 ld (CurrentLineIntHeight),a9826 out ($99),a9827 ld a,19+128 9828 ei9829 out ($99),a 9830 ret9832PlayInsuffucientFundsSfx:9833 push iy9834 push bc9835 ld bc,SFX_InsufficientFunds9836 call RePlayerSFX_PlayCh19837 pop bc9838 pop iy9839 ret9841CastleOverviewMarketPlaceCode:9842 call SetScreenOff9844 call SetMarketPlaceButtons9846 ld a,255 9847 ld (PreviousButtonClicked),a9848 ld (PreviousButton2Clicked),a9849 ld ix,GenericButtonTable9850 ld (PreviousButtonClickedIX),ix9851 ld (PreviousButton2ClickedIX),ix9853 ld hl,InGamePalette9854 call SetPalette9856 xor a9857 ld (activepage),a 9858 9859 ld a,%1100 00119860 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 9861 xor a9862 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 9863 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 9864 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 9865 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 9866 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 9868 call SetMarketPlaceGraphics 9869 call SetResourcesPlayer9871 ld hl,CopyPage1To09872 call docopy9874 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9875 call docopy9877 call SetCastleMarketInterruptHandler9878 9879 .engine:9880 call SwapAndSetPage 9881 call PopulateControls 98839888 ld a,(Controls)9889 bit 5,a 9890 jp nz,CastleOverviewCode9892 9893 ld ix,CastleOverviewButtonTable 9894 call CheckButtonMouseInteractionCastle9896 ld ix,CastleOverviewButtonTable9897 call SetCastleButtons 9900 9901 ld ix,GenericButtonTable 9902 call CheckButtonInteractionControlsNotOnInt9903 call .CheckButtonClicked 9907 9908 ld ix,(PreviousButtonClickedIX) 9909 ld a,(ix+GenericButtonStatus)9910 push af9911 ld a,(PreviousButtonClicked)9912 cp 2559913 jr z,.EndMarkButton 9914 ld (ix+GenericButtonStatus),%1010 00119915 .EndMarkButton:9916 9918 9919 ld ix,(PreviousButton2ClickedIX) 9920 ld a,(ix+GenericButtonStatus)9921 push af9922 ld a,(PreviousButton2Clicked)9923 cp 2559924 jr z,.EndMarkButton2 9925 ld (ix+GenericButtonStatus),%1010 00119926 .EndMarkButton2:9927 9933 ld ix,GenericButtonTable9934 call SetGenericButtons 9937 9938 pop af9939 ld ix,(PreviousButton2ClickedIX) 9940 ld (ix+GenericButtonStatus),a9941 9943 9944 pop af9945 ld ix,(PreviousButtonClickedIX) 9946 ld (ix+GenericButtonStatus),a9947 9952 99549955 call SetScreenOn9956 jp .engine9958.CheckButtonClicked: 9959 ret nc9961 ld a,b 9962 cp 9 9963 jp nc,.WhichResourceDoYouNeedClicked9964 cp 4 9965 jp nc,.WhichResourceWillYouTradeClicked9966 cp 39967 jp z,.PlusButtonPressed9968 cp 29969 jp z,.BuyButtonPressed9970 cp 19971 jp z,.MinusButtonPressed9972 ret9973 9974 .BuyButtonPressed:9975 9976 call SetResourcesCurrentPlayerinIX9977 ld a,(MarketPlaceResourceNeeded)9978 cp 09 9979 jr z,.IXPointsToResourceNeededCheckOverflow9980 inc ix9981 inc ix9982 cp 13 9983 jr z,.IXPointsToResourceNeededCheckOverflow9984 inc ix9985 inc ix9986 cp 12 9987 jr z,.IXPointsToResourceNeededCheckOverflow9988 inc ix9989 inc ix9990 cp 11 9991 jr z,.IXPointsToResourceNeededCheckOverflow9992 inc ix9993 inc ix9994 cp 10 9995 jr z,.IXPointsToResourceNeededCheckOverflow9997 .IXPointsToResourceNeededCheckOverflow:9998 ld l,(ix+0)9999 ld h,(ix+1) 10000 ld de,(AmountOfResourcesOffered)10001 add hl,de 10002 jp c,PlayInsuffucientFundsSfx10003 10005 10006 call SetResourcesCurrentPlayerinIX10007 ld a,(MarketPlaceResourceToTrade) 10008 cp 04 10009 jr z,.IXPointsToResourceRequired10010 inc ix10011 inc ix10012 cp 08 10013 jr z,.IXPointsToResourceRequired10014 inc ix10015 inc ix10016 cp 07 10017 jr z,.IXPointsToResourceRequired10018 inc ix10019 inc ix10020 cp 06 10021 jr z,.IXPointsToResourceRequired10022 inc ix10023 inc ix10024 cp 05 10025 jr z,.IXPointsToResourceRequired10027 .IXPointsToResourceRequired:10028 ld l,(ix+0)10029 ld h,(ix+1) 10030 ld de,(AmountOfResourcesRequired)10031 xor a10032 sbc hl,de 10033 jp c,PlayInsuffucientFundsSfx10034 ld (ix+0),l10035 ld (ix+1),h 10038 10039 call SetResourcesCurrentPlayerinIX10040 ld a,(MarketPlaceResourceNeeded)10041 cp 09 10042 jr z,.IXPointsToResourceNeeded10043 inc ix10044 inc ix10045 cp 13 10046 jr z,.IXPointsToResourceNeeded10047 inc ix10048 inc ix10049 cp 12 10050 jr z,.IXPointsToResourceNeeded10051 inc ix10052 inc ix10053 cp 11 10054 jr z,.IXPointsToResourceNeeded10055 inc ix10056 inc ix10057 cp 10 10058 jr z,.IXPointsToResourceNeeded10060 .IXPointsToResourceNeeded:10061 ld l,(ix+0)10062 ld h,(ix+1) 10063 ld de,(AmountOfResourcesOffered)10064 add hl,de 10065 ld (ix+0),l10066 ld (ix+1),h 10069 push iy10070 push bc10071 ld bc,SFX_Purchase10072 call RePlayerSFX_PlayCh110073 pop bc10074 pop iy10076 call SetResourcesPlayer10077 call SwapAndSetPage 10078 call SetResourcesPlayer10079 ret10081 .WoodNeeded:10082 inc ix10083 inc ix 10084 ret10085 10086 .MinusButtonPressed:10087 call .SetTradeCostInHL 10088 ld e,(hl)10089 inc hl10090 ld d,(hl) 10091 inc hl10092 ld c,(hl)10093 inc hl10094 ld b,(hl) 10096 10097 ld hl,(AmountOfResourcesOffered)10098 xor a10099 sbc hl,de10100 ret z10101 ld (AmountOfResourcesOffered),hl10102 ld hl,(AmountOfResourcesRequired)10103 xor a10104 sbc hl,bc10105 ld (AmountOfResourcesRequired),hl10107 call .ClearAmountsOfferedAndRequired10108 call .SetTotalAmountOfferedVSRequired10109 call SwapAndSetPage 10110 call .ClearAmountsOfferedAndRequired10111 call .SetTotalAmountOfferedVSRequired10112 ret10113 10114 .PlusButtonPressed:10115 call .SetTradeCostInHL 10116 ld e,(hl)10117 inc hl10118 ld d,(hl) 10119 inc hl10120 ld c,(hl)10121 inc hl10122 ld b,(hl) 10124 10125 ld hl,(AmountOfResourcesRequired)10126 add hl,bc10127 ret c10129 ld hl,(AmountOfResourcesOffered)10130 add hl,de10131 ret c10132 ld (AmountOfResourcesOffered),hl10133 ld hl,(AmountOfResourcesRequired)10134 add hl,bc10135 ld (AmountOfResourcesRequired),hl10137 call .ClearAmountsOfferedAndRequired10138 call .SetTotalAmountOfferedVSRequired10139 call SwapAndSetPage 10140 call .ClearAmountsOfferedAndRequired10141 call .SetTotalAmountOfferedVSRequired10142 ret10144 .ClearAmountsOfferedAndRequired:10145 ld hl,$4000 + (131*128) + (052/2) - 12810146 ld de,$0000 + (147*128) + (054/2) - 12810147 ld bc,$0000 + (006*256) + (036/2)10148 ld a,ChamberOfCommerceButtonsBlock 10149 call CopyRamToVramCorrectedCastleOverview 10151 ld hl,$4000 + (131*128) + (052/2) - 12810152 ld de,$0000 + (147*128) + (170/2) - 12810153 ld bc,$0000 + (006*256) + (036/2)10154 ld a,ChamberOfCommerceButtonsBlock 10155 call CopyRamToVramCorrectedCastleOverview 10156 ret10157 10158 .WhichResourceWillYouTradeClicked:10159 ld (PreviousButton2Clicked),a 10160 ld (PreviousButton2ClickedIX),ix 10161 10162 ld (MarketPlaceResourceToTrade),a10164 call SetCastleOverViewFontPage0Y212 10166 ld a,%1100 0011 10167 ld (GenericButtonTable+10*GenericButtonTableLenghtPerButton),a 10168 ld (GenericButtonTable+11*GenericButtonTableLenghtPerButton),a 10169 ld (GenericButtonTable+12*GenericButtonTableLenghtPerButton),a 10170 10171 .EntryPointWhenClickedOnWhichResourceDoYouNeed:10172 call .SetIcanOfferYouWindow10173 call .SetIconResourceNeeded10174 call .SetIconResourceToTrade10175 call .SetTextResourceNeeded10176 call .SetTextResourceToTrade10177 call .SetCost10178 call .SetTotalAmountOfferedVSRequired10179 call SwapAndSetPage 10180 call .SetIcanOfferYouWindow10181 call .SetIconResourceNeeded10182 call .SetIconResourceToTrade10183 call .SetTextResourceNeeded10184 call .SetTextResourceToTrade10185 call .SetCost10186 call .SetTotalAmountOfferedVSRequired10187 ret10189 .SetTotalAmountOfferedVSRequired:10190 ld b,054 10191 ld c,147 10192 ld hl,(AmountOfResourcesOffered)10193 call SetNumber16BitCastle 10195 ld b,181 10196 ld c,147 10197 ld hl,(AmountOfResourcesRequired)10198 call SetNumber16BitCastle 10199 ret10201 .SetCost:10202 call .SetTradeCostInHL10203 10204 ld e,(hl)10205 inc hl10206 ld d,(hl)10207 ld (AmountOfResourcesOffered),de10208 inc hl10209 ld e,(hl)10210 inc hl10211 ld d,(hl)10212 ld (AmountOfResourcesRequired),de10214 ld b,069+005 10215 ld c,128 10216 ld hl,(AmountOfResourcesOffered)10217 call SetNumber16BitCastle 10219 ld b,167 10220 ld c,128 10221 ld hl,(AmountOfResourcesRequired)10222 call SetNumber16BitCastle 10223 ret1022510236.TextCostRequireWoodTradeStone: dw 0001,000710237.TextCostRequireWoodTradeGems: dw 0001,000310238.TextCostRequireWoodTradeGold: dw 0001,166710239.TextCostRequireGemTradeStone: dw 0001,001310240.TextCostRequireGemTradeGems: dw 0001,000710241.TextCostRequireGemTradeGold: dw 0001,333310242.TextCostRequireGoldTradeWood: dw 0037,000110243.TextCostRequireGoldTradeRuby: dw 0075,000110244.TextCostRequireGoldTradeGold: dw 0001,00011024510246.TextCostRequireWoodTradeStone2: dw 0001,000510247.TextCostRequireWoodTradeGems2: dw 0001,000310248.TextCostRequireWoodTradeGold2: dw 0001,125010249.TextCostRequireGemTradeStone2: dw 0001,001010250.TextCostRequireGemTradeGems2: dw 0001,000510251.TextCostRequireGemTradeGold2: dw 0001,250010252.TextCostRequireGoldTradeWood2: dw 0050,000110253.TextCostRequireGoldTradeRuby2: dw 0100,000110254.TextCostRequireGoldTradeGold2: dw 0001,00011025510256.TextCostRequireWoodTradeStone3: dw 0001,000410257.TextCostRequireWoodTradeGems3: dw 0001,000210258.TextCostRequireWoodTradeGold3: dw 0001,100010259.TextCostRequireGemTradeStone3: dw 0001,000810260.TextCostRequireGemTradeGems3: dw 0001,000410261.TextCostRequireGemTradeGold3: dw 0001,200010262.TextCostRequireGoldTradeWood3: dw 0062,000110263.TextCostRequireGoldTradeRuby3: dw 0125,000110264.TextCostRequireGoldTradeGold3: dw 0001,000110268 .SetTradeCostInHL:10269 call .DoSetTradeCost10270 call .SetAmountOfMarketPlacesInB 10271 ld a,b10272 or a10273 ret z10274 cp 310275 jr c,.loop10276 ld b,2 10277 .loop:10278 ld de,3610279 add hl,de10280 djnz .loop10281 ret10282 10283 .SetAmountOfMarketPlacesInB:10284 ld a,(whichplayernowplaying?)10285 ld b,-1 10286 ld ix,Castle1 | cp (ix+CastlePlayer) | call z,.check10287 ld ix,Castle2 | cp (ix+CastlePlayer) | call z,.check10288 ld ix,Castle3 | cp (ix+CastlePlayer) | call z,.check10289 ld ix,Castle4 | cp (ix+CastlePlayer) | call z,.check10290 ret10292 .check:10293 bit 0,(ix+CastleMarket)10294 ret z10295 inc b10296 ret10298 10299 .DoSetTradeCost:10300 ld a,(MarketPlaceResourceNeeded)10301 cp 12 10302 jp nc,.RequireWoodOrStone10303 cp 10 10304 jp nc,.RequireGemsOrRubies10306 .RequireGold:10307 ld a,(MarketPlaceResourceToTrade) 10308 cp 07 10309 ld hl,.TextCostRequireGoldTradeWood10310 ret nc10311 cp 05 10312 ld hl,.TextCostRequireGoldTradeRuby10313 ret nc10314 ld hl,.TextCostRequireGoldTradeGold10315 ret 10316 10317 .RequireGemsOrRubies:10318 ld a,(MarketPlaceResourceToTrade) 10319 cp 07 10320 ld hl,.TextCostRequireGemTradeStone10321 ret nc10322 cp 05 10323 ld hl,.TextCostRequireGemTradeGems10324 ret nc10325 ld hl,.TextCostRequireGemTradeGold10326 ret10327 10328 .RequireWoodOrStone:10329 ld a,(MarketPlaceResourceToTrade) 10330 cp 07 10331 ld hl,.TextCostRequireWoodTradeStone10332 ret nc10333 cp 05 10334 ld hl,.TextCostRequireWoodTradeGems10335 ret nc10336 ld hl,.TextCostRequireWoodTradeGold10337 ret10339 .SetTextResourceNeeded:10340 ld a,(MarketPlaceResourceNeeded)10341 call .SetTextResourceInHL10342 ld b,12710343 ld c,12810344 jp SetText10346 .SetTextResourceToTrade:10347 ld a,(MarketPlaceResourceToTrade)10348 call .SetTextResourceInHL10349 ld b,22710350 ld c,12810351 jp SetText10353 .SetTextResourceInHL:10354 ld hl,.TextWood10355 cp 1310356 ret z10357 cp 810358 ret z10360 ld hl,.TextStone10361 cp 1210362 ret z10363 cp 710364 ret z10366 ld hl,.TextGems10367 cp 1110368 ret z10369 cp 610370 ret z10372 ld hl,.TextRubies10373 cp 1010374 ret z10375 cp 510376 ret z10378 ld hl,.TextGold1037910383 ret10385.TextWood: db "wood",25510386.TextStone: db "stone",25510387.TextGems: db "gems",25510388.TextRubies: db "rubies",25510389.TextGold: db "gold",25510391 10392 .SetIcanOfferYouWindow:10393 ld hl,$4000 + (109*128) + (000/2) - 12810394 ld de,$0000 + (123*128) + (000/2) - 12810395 ld bc,$0000 + (043*256) + (256/2)10396 ld a,ChamberOfCommerceButtonsBlock 10397 call CopyRamToVramCorrectedCastleOverview 10398 jp SetCastleMarketInterruptThirdLine10400 .SetIconResourceNeeded:10401 ld a,(MarketPlaceResourceNeeded)10402 call .SetResourceInHL 1040310404 ld de,$0000 + (138*128) + (024/2) - 12810405 ld bc,$0000 + (022*256) + (028/2)10406 ld a,ChamberOfCommerceButtonsBlock 10407 jp CopyRamToVramCorrectedCastleOverview 10409 .SetIconResourceToTrade:10410 ld a,(MarketPlaceResourceToTrade)10411 call .SetResourceInHL1041210413 ld de,$0000 + (138*128) + (206/2) - 12810414 ld bc,$0000 + (022*256) + (028/2)10415 ld a,ChamberOfCommerceButtonsBlock 10416 jp CopyRamToVramCorrectedCastleOverview 10418 .SetResourceInHL:10419 ld hl,$4000 + (000*128) + (000/2) - 128 10420 cp 1310421 ret z10422 cp 810423 ret z10425 ld hl,$4000 + (000*128) + (028/2) - 128 10426 cp 1210427 ret z10428 cp 710429 ret z10431 ld hl,$4000 + (000*128) + (056/2) - 128 10432 cp 1110433 ret z10434 cp 610435 ret z10437 ld hl,$4000 + (000*128) + (084/2) - 128 10438 cp 1010439 ret z10440 cp 510441 ret z10443 ld hl,$4000 + (000*128) + (112/2) - 128 10448 ret10450 10451 .WhichResourceDoYouNeedClicked:10452 ld (PreviousButtonClicked),a 10453 ld (PreviousButtonClickedIX),ix10454 10455 ld (MarketPlaceResourceNeeded),a10457 ld a,(GenericButtonTable+10*GenericButtonTableLenghtPerButton) 10458 bit 7,a 10459 jp nz,.EntryPointWhenClickedOnWhichResourceDoYouNeed10460 10461 ld a,(GenericButtonTable+5*GenericButtonTableLenghtPerButton) 10462 bit 7,a10463 ret nz10464 10465 ld a,%1100 0011 10466 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a 10467 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a 10468 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a 10469 ld (GenericButtonTable+8*GenericButtonTableLenghtPerButton),a 10470 ld (GenericButtonTable+9*GenericButtonTableLenghtPerButton),a 10471 10472 call .SetWhichResourceWillYouTradeWindow10473 call SwapAndSetPage 10474 .SetWhichResourceWillYouTradeWindow:10475 ld hl,$4000 + (066*128) + (000/2) - 12810476 ld de,$0000 + (080*128) + (000/2) - 12810477 ld bc,$0000 + (043*256) + (256/2)10478 ld a,ChamberOfCommerceButtonsBlock 10479 call CopyRamToVramCorrectedCastleOverview 10480 jp SetCastleMarketInterruptSecondLine10481 10482SetMarketPlaceButtons:10483 ld hl,MarketPlaceButtonTable-210484 ld de,GenericButtonTable-210485 ld bc,2+(GenericButtonTableLenghtPerButton*13)10486 ldir10487 ret10489MarketPlaceButton1Ytop: equ 05210490MarketPlaceButton1YBottom: equ MarketPlaceButton1Ytop + 02210491MarketPlaceButton1XLeft: equ 03010492MarketPlaceButton1XRight: equ MarketPlaceButton1XLeft + 02810494MarketPlaceButton2Ytop: equ 05210495MarketPlaceButton2YBottom: equ MarketPlaceButton2Ytop + 02210496MarketPlaceButton2XLeft: equ 07210497MarketPlaceButton2XRight: equ MarketPlaceButton2XLeft + 02810499MarketPlaceButton3Ytop: equ 05210500MarketPlaceButton3YBottom: equ MarketPlaceButton3Ytop + 02210501MarketPlaceButton3XLeft: equ 11410502MarketPlaceButton3XRight: equ MarketPlaceButton3XLeft + 02810504MarketPlaceButton4Ytop: equ 05210505MarketPlaceButton4YBottom: equ MarketPlaceButton4Ytop + 02210506MarketPlaceButton4XLeft: equ 15610507MarketPlaceButton4XRight: equ MarketPlaceButton4XLeft + 02810509MarketPlaceButton5Ytop: equ 05210510MarketPlaceButton5YBottom: equ MarketPlaceButton5Ytop + 02210511MarketPlaceButton5XLeft: equ 19810512MarketPlaceButton5XRight: equ MarketPlaceButton5XLeft + 02810514MarketPlaceButton6Ytop: equ 09510515MarketPlaceButton6YBottom: equ MarketPlaceButton6Ytop + 02210516MarketPlaceButton6XLeft: equ 03010517MarketPlaceButton6XRight: equ MarketPlaceButton6XLeft + 02810519MarketPlaceButton7Ytop: equ 09510520MarketPlaceButton7YBottom: equ MarketPlaceButton7Ytop + 02210521MarketPlaceButton7XLeft: equ 07210522MarketPlaceButton7XRight: equ MarketPlaceButton7XLeft + 02810524MarketPlaceButton8Ytop: equ 09510525MarketPlaceButton8YBottom: equ MarketPlaceButton8Ytop + 02210526MarketPlaceButton8XLeft: equ 11410527MarketPlaceButton8XRight: equ MarketPlaceButton8XLeft + 02810529MarketPlaceButton9Ytop: equ 09510530MarketPlaceButton9YBottom: equ MarketPlaceButton9Ytop + 02210531MarketPlaceButton9XLeft: equ 15610532MarketPlaceButton9XRight: equ MarketPlaceButton9XLeft + 02810534MarketPlaceButton10Ytop: equ 09510535MarketPlaceButton10YBottom: equ MarketPlaceButton10Ytop + 02210536MarketPlaceButton10XLeft: equ 19810537MarketPlaceButton10XRight: equ MarketPlaceButton10XLeft + 02810541MarketPlaceButton11Ytop: equ 14310542MarketPlaceButton11YBottom: equ MarketPlaceButton11Ytop + 01410543MarketPlaceButton11XLeft: equ 09210544MarketPlaceButton11XRight: equ MarketPlaceButton11XLeft + 01410546MarketPlaceButton12Ytop: equ 14110547MarketPlaceButton12YBottom: equ MarketPlaceButton12Ytop + 01810548MarketPlaceButton12XLeft: equ 11610549MarketPlaceButton12XRight: equ MarketPlaceButton12XLeft + 02610551MarketPlaceButton13Ytop: equ 14310552MarketPlaceButton13YBottom: equ MarketPlaceButton13Ytop + 01410553MarketPlaceButton13XLeft: equ 15210554MarketPlaceButton13XRight: equ MarketPlaceButton13XLeft + 01410556MarketPlaceButtonTableLenghtPerButton: equ MarketPlaceButtonTable.endlenght-MarketPlaceButtonTable10557MarketPlaceButtonTableGfxBlock: db ChamberOfCommerceButtonsBlock10558MarketPlaceButtonTableAmountOfButtons: db 1310559MarketPlaceButtonTable: 10561 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton1Ytop,MarketPlaceButton1YBottom,MarketPlaceButton1XLeft,MarketPlaceButton1XRight | dw $0000 + (MarketPlaceButton1Ytop*128) + (MarketPlaceButton1XLeft/2) - 128 10562 .endlenght:10563 db %1010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton2Ytop,MarketPlaceButton2YBottom,MarketPlaceButton2XLeft,MarketPlaceButton2XRight | dw $0000 + (MarketPlaceButton2Ytop*128) + (MarketPlaceButton2XLeft/2) - 128 10564 db %1001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton3Ytop,MarketPlaceButton3YBottom,MarketPlaceButton3XLeft,MarketPlaceButton3XRight | dw $0000 + (MarketPlaceButton3Ytop*128) + (MarketPlaceButton3XLeft/2) - 12810565 db %1100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton4Ytop,MarketPlaceButton4YBottom,MarketPlaceButton4XLeft,MarketPlaceButton4XRight | dw $0000 + (MarketPlaceButton4Ytop*128) + (MarketPlaceButton4XLeft/2) - 128 10566 db %1100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton5Ytop,MarketPlaceButton5YBottom,MarketPlaceButton5XLeft,MarketPlaceButton5XRight | dw $0000 + (MarketPlaceButton5Ytop*128) + (MarketPlaceButton5XLeft/2) - 128 10567 10568 db %0100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton6Ytop,MarketPlaceButton6YBottom,MarketPlaceButton6XLeft,MarketPlaceButton6XRight | dw $0000 + (MarketPlaceButton6Ytop*128) + (MarketPlaceButton6XLeft/2) - 128 10569 db %0010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton7Ytop,MarketPlaceButton7YBottom,MarketPlaceButton7XLeft,MarketPlaceButton7XRight | dw $0000 + (MarketPlaceButton7Ytop*128) + (MarketPlaceButton7XLeft/2) - 128 10570 db %0001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton8Ytop,MarketPlaceButton8YBottom,MarketPlaceButton8XLeft,MarketPlaceButton8XRight | dw $0000 + (MarketPlaceButton8Ytop*128) + (MarketPlaceButton8XLeft/2) - 12810571 db %0100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton9Ytop,MarketPlaceButton9YBottom,MarketPlaceButton9XLeft,MarketPlaceButton9XRight | dw $0000 + (MarketPlaceButton9Ytop*128) + (MarketPlaceButton9XLeft/2) - 128 10572 db %0100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton10Ytop,MarketPlaceButton10YBottom,MarketPlaceButton10XLeft,MarketPlaceButton10XRight | dw $0000 + (MarketPlaceButton10Ytop*128) + (MarketPlaceButton10XLeft/2) - 128 10573 10574 db %0100 0011 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (014*128) + (140/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton11Ytop,MarketPlaceButton11YBottom,MarketPlaceButton11XLeft,MarketPlaceButton11XRight | dw $0000 + (MarketPlaceButton11Ytop*128) + (MarketPlaceButton11XLeft/2) - 128 10575 db %0010 0011 | dw $4000 + (042*128) + (140/2) - 128 | dw $4000 + (042*128) + (166/2) - 128 | dw $4000 + (042*128) + (192/2) - 128 | db MarketPlaceButton12Ytop,MarketPlaceButton12YBottom,MarketPlaceButton12XLeft,MarketPlaceButton12XRight | dw $0000 + (MarketPlaceButton12Ytop*128) + (MarketPlaceButton12XLeft/2) - 128 10576 db %0001 0011 | dw $4000 + (000*128) + (154/2) - 128 | dw $4000 + (014*128) + (154/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton13Ytop,MarketPlaceButton13YBottom,MarketPlaceButton13XLeft,MarketPlaceButton13XRight | dw $0000 + (MarketPlaceButton13Ytop*128) + (MarketPlaceButton13XLeft/2) - 12810579FirstLineintHeightCastleMagicGuild: equ 02310580SecondLineintHeightCastleMagicGuild: equ 17310581SetCastleMagicGuildInterruptHandler:10582 di10583 ld hl,CastleInterruptHandler 10584 ld ($38+1),hl 10585 ld a,$c3 10586 ld ($38),a10587 10588 ld a,(VDP_0) 10589 or 16 10590 ld (VDP_0),a 10591 out ($99),a10592 ld a,12810593 out ($99),a10595 ld a,FirstLineintHeightCastleMagicGuild10596 ld (CurrentLineIntHeight),a10597 out ($99),a10598 ld a,19+128 10599 ei10600 out ($99),a 10601 ret10603CastleOverviewMagicGuildCode:10604 call SetScreenOff10606 call SetMagicGuildButtons10608 ld hl,InGamePalette10609 call SetPalette10611 xor a10612 ld (activepage),a 10613 10614 ld a,%1100 001110615 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 10616 xor a10617 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 10618 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 10619 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 10620 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 10621 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 10623 call SetMagicGuildGraphics 10625 ld hl,CopyPage1To010626 call docopy10628 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10629 call docopy10631 call SetCastleMagicGuildInterruptHandler10632 10633 .engine: 10634 call SwapAndSetPage 10635 call PopulateControls 1063710642 ld a,(Controls)10643 bit 5,a 10644 jp nz,CastleOverviewCode10646 10647 ld ix,CastleOverviewButtonTable 10648 call CheckButtonMouseInteractionCastle10650 ld ix,CastleOverviewButtonTable10651 call SetCastleButtons 10654 10655 ld ix,GenericButtonTable 10656 call CheckButtonInteractionControlsNotOnInt10657 call .CheckButtonClicked 10659 ld ix,GenericButtonTable10660 call SetGenericButtons 10663 call WaitVblank10664 call SetScreenOn10665 jp .engine10667.CheckButtonClicked: 10668 ret nc10670 push bc 10671 call SetCastleOverViewFontPage0Y212 10672 call .ClearTextWindow10673 call .SetSpellIcon10674 pop bc 10675 push bc 10676 call .SetText10677 call SwapAndSetPage 10678 call .ClearTextWindow10679 call .SetSpellIcon10680 pop bc 10681 call .SetText10682 ret10684 .ClearTextWindow:10685 ld hl,$4000 + (154*128) + (006/2) - 12810686 ld de,$0000 + (154*128) + (006/2) - 12810687 ld bc,$0000 + (020*256) + (244/2)10688 ld a,MagicGuildBlock 10689 jp CopyRamToVramCorrectedCastleOverview 10691 .SetSpellIcon:10692 ld hl,$4000 + (126*128) + (196/2) - 12810693 ld de,$0000 + (154*128) + (008/2) - 12810694 ld bc,$0000 + (020*256) + (020/2)10695 ld a,SpellBookGraphicsBlock 10696 jp CopyRamToVramCorrectedCastleOverview 10698.SetText:10699 ld a,b10700 cp 810701 ld de,(GenericButtonTable+1+0*GenericButtonTableLenghtPerButton)10702 jp z,.ButtonFound10703 cp 710704 ld de,(GenericButtonTable+1+1*GenericButtonTableLenghtPerButton)10705 jp z,.ButtonFound10706 cp 610707 ld de,(GenericButtonTable+1+2*GenericButtonTableLenghtPerButton)10708 jp z,.ButtonFound10709 cp 510710 ld de,(GenericButtonTable+1+3*GenericButtonTableLenghtPerButton)10711 jp z,.ButtonFound10712 cp 410713 ld de,(GenericButtonTable+1+4*GenericButtonTableLenghtPerButton)10714 jp z,.ButtonFound10715 cp 310716 ld de,(GenericButtonTable+1+5*GenericButtonTableLenghtPerButton)10717 jp z,.ButtonFound10718 cp 210719 ld de,(GenericButtonTable+1+6*GenericButtonTableLenghtPerButton)10720 jp z,.ButtonFound10721 ld de,(GenericButtonTable+1+7*GenericButtonTableLenghtPerButton)10722 .ButtonFound:10723 ld hl,EarthLevel1Untouched10724 call CompareHLwithDE10725 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth410726 jp z,.SpellFound10727 ld hl,EarthLevel2Untouched10728 call CompareHLwithDE10729 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth310730 jp z,.SpellFound10731 ld hl,EarthLevel3Untouched10732 call CompareHLwithDE10733 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth210734 jp z,.SpellFound10735 ld hl,EarthLevel4Untouched10736 call CompareHLwithDE10737 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth110738 jp z,.SpellFound10740 ld hl,FireLevel1Untouched10741 call CompareHLwithDE10742 ld hl,SpellDescriptionsMagicGuild.DescriptionFire410743 jp z,.SpellFound10744 ld hl,FireLevel2Untouched10745 call CompareHLwithDE10746 ld hl,SpellDescriptionsMagicGuild.DescriptionFire310747 jp z,.SpellFound10748 ld hl,FireLevel3Untouched10749 call CompareHLwithDE10750 ld hl,SpellDescriptionsMagicGuild.DescriptionFire210751 jp z,.SpellFound10752 ld hl,FireLevel4Untouched10753 call CompareHLwithDE10754 ld hl,SpellDescriptionsMagicGuild.DescriptionFire110755 jp z,.SpellFound10757 ld hl,AirLevel1Untouched10758 call CompareHLwithDE10759 ld hl,SpellDescriptionsMagicGuild.DescriptionAir410760 jp z,.SpellFound10761 ld hl,AirLevel2Untouched10762 call CompareHLwithDE10763 ld hl,SpellDescriptionsMagicGuild.DescriptionAir310764 jp z,.SpellFound10765 ld hl,AirLevel3Untouched10766 call CompareHLwithDE10767 ld hl,SpellDescriptionsMagicGuild.DescriptionAir210768 jp z,.SpellFound10769 ld hl,AirLevel4Untouched10770 call CompareHLwithDE10771 ld hl,SpellDescriptionsMagicGuild.DescriptionAir110772 jp z,.SpellFound10774 ld hl,WaterLevel1Untouched10775 call CompareHLwithDE10776 ld hl,SpellDescriptionsMagicGuild.DescriptionWater410777 jp z,.SpellFound10778 ld hl,WaterLevel2Untouched10779 call CompareHLwithDE10780 ld hl,SpellDescriptionsMagicGuild.DescriptionWater310781 jp z,.SpellFound10782 ld hl,WaterLevel3Untouched10783 call CompareHLwithDE10784 ld hl,SpellDescriptionsMagicGuild.DescriptionWater210785 jp z,.SpellFound10786 ld hl,WaterLevel4Untouched10787 call CompareHLwithDE10788 ld hl,SpellDescriptionsMagicGuild.DescriptionWater110789 jp z,.SpellFound10790 10791 .SpellFound:10792 push hl10793 10794 ex de,hl1079510796 ld de,$0000 + (156*128) + (010/2) - 12810797 ld bc,$0000 + (016*256) + (016/2)10798 ld a,SpellBookGraphicsBlock 10799 call CopyRamToVramCorrectedCastleOverview 10801 pop hl10802 ld b,03110803 ld c,15410804 jp SetText10806SpellDescriptionsMagicGuild:10808.DescriptionEarth4: db "Earthbound",25410809 db "Applies a 50% movement speed debuff to the selected",25410810 db "enemy unit.",25510812.DescriptionEarth3: db "Plate Armor",25410813 db "Increases the defense of the selected friendly unit",25410814 db "by 5.",25510816.DescriptionEarth2: db "Resurrection",25410817 db "Revives a segment of deceased friendly living",25410818 db "creatures.",25510820.DescriptionEarth1: db "Earthshock",25410821 db "Deals damage to all creatures in target and adjacent",25410822 db "hexes.",25510825.DescriptionFire4: db "Curse",25410826 db "Causes the selected enemy unit to deal -3 damage",25410827 db "when attacking.",25510829.DescriptionFire3: db "Blinding Fog",25410830 db "Target ranged unit deals 50% less damage.",25510832.DescriptionFire2: db "Implosion",25410833 db "Deals damage to enemy unit and adjecent units.",25510835.DescriptionFire1: db "Sunstrike",25410836 db "Calls down a solar beam to incinerate a single enemy",25410837 db "unit.",25510839.Descriptionair4: db "Haste",25410840 db "Increases the speed of the selected friendly unit by 3.",25510842.Descriptionair3: db "Shieldbreaker",25410843 db "Reduces the defense of the selected enemy unit by 4.",25510845.Descriptionair2: db "Claw Back",25410846 db "Target allied unit has unlimited retaliations each round.",25510848.Descriptionair1: db "Spell Bubble",25410849 db "Target friendly unit has a 75% chance to deflect a",25410850 db "single enemy spell.",25510853.Descriptionwater4: db "Cure",25410854 db "Dissipates all harmful spell effects while restoring a set",25410855 db "amount of HP.",25510857.Descriptionwater3: db "Ice Peak",25410858 db "Conjures an ice shard from the ground, impaling a",25410859 db "single enemy.",25510861.Descriptionwater2: db "Hypnosis",25410862 db "Enemy unit cant attack until attacked, dispelled or",25410863 db "effect wears off.",25510866.Descriptionwater1: db "Frost Ring",25410867 db "Causes damage to all units adjacent to the central hex.",25510870SetGenericButtons: 10871 ld a,(ix+GenericButtonGfxBlock)10872 ld (ButtonGfxBlockCopy),a10874 ld b,(ix+GenericButtonAmountOfButtons)10875 .loop:10876 push bc10877 call .Setbutton10878 pop bc10879 ld de,GenericButtonTableLenghtPerButton10880 add ix,de10882 djnz .loop10883 ret10885 .Setbutton:10886 bit 7,(ix+GenericButtonStatus)10887 ret z 10889 bit 0,(ix+GenericButtonStatus) 10890 res 0,(ix+GenericButtonStatus) 10891 jr nz,.goCopyButton10892 bit 1,(ix+GenericButtonStatus)10893 res 1,(ix+GenericButtonStatus)10894 ret z 10895 .goCopyButton:10897 ld l,(ix+GenericButton_SYSX_Ontouched)10898 ld h,(ix+GenericButton_SYSX_Ontouched+1)10899 bit 6,(ix+GenericButtonStatus)10900 jr nz,.go 10902 ld l,(ix+GenericButton_SYSX_MovedOver)10903 ld h,(ix+GenericButton_SYSX_MovedOver+1)10904 bit 5,(ix+GenericButtonStatus)10905 jr nz,.go 10907 ld l,(ix+GenericButton_SYSX_Clicked)10908 ld h,(ix+GenericButton_SYSX_Clicked+1)10909 .go:10911 10912 ld e,(ix+GenericButton_DYDX)10913 ld d,(ix+GenericButton_DYDX+1)10915 ld a,(ix+GenericButtonYbottom)10916 sub a,(ix+GenericButtonYtop)10917 ld b,a 10918 ld a,(ix+GenericButtonXright)10919 sub a,(ix+GenericButtonXleft)10920 srl a 10921 ld c,a 10924 ld a,(ButtonGfxBlockCopy)1092810934109371093910941 ld de,$8000 + (212*128) + (000/2) - 128 10942 call CopyRamToVramCorrectedWithoutActivePageSetting 10944 ld a,(activepage)10945 xor 110946 ld (CopyCastleButton2+dPage),a10948 ld a,(ix+GenericButtonXleft)10949 ld (CopyCastleButton2+dx),a10950 ld a,(ix+GenericButtonYtop)10951 ld (CopyCastleButton2+dy),a10953 ld a,(ix+GenericButtonYbottom)10954 sub a,(ix+GenericButtonYtop)10955 ld (CopyCastleButton2+ny),a10957 ld a,(ix+GenericButtonXright)10958 sub a,(ix+GenericButtonXleft)10959 ld (CopyCastleButton2+nx),a10961 ld hl,CopyCastleButton210962 call docopy1096310965 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10966 call docopy10967 ret10969MagicGuildButtonTableGfxBlock: db SpellBookGraphicsBlock10970MagicGuildButtonTableAmountOfButtons: db 810971MagicGuildButtonTable: 10973EarthLevel1Button:10974 db %1100 0011 | dw EarthLevel1Untouched | dw EarthLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel1Y ,MagicGuildEarthLevel1Y+16 ,MagicGuildEarthLevel1X ,MagicGuildEarthLevel1X+16 | dw $0000 + (MagicGuildEarthLevel1Y*128) + (MagicGuildEarthLevel1X/2) - 128 |10975FireLevel1Button:10976 db %1100 0011 | dw FireLevel1Untouched | dw FireLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel1Y , MagicGuildFireLevel1Y+16 , MagicGuildFireLevel1X , MagicGuildFireLevel1X+16 | dw $0000 + (MagicGuildFireLevel1Y*128) + (MagicGuildFireLevel1X/2) - 128 |10977AirLevel1Button:10978 db %1100 0011 | dw AirLevel1Untouched | dw AirLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel1Y , MagicGuildAirLevel1Y+16 , MagicGuildAirLevel1X , MagicGuildAirLevel1X+16 | dw $0000 + (MagicGuildAirLevel1Y*128) + (MagicGuildAirLevel1X/2) - 128 |10979WaterLevel1Button:10980 db %1100 0011 | dw WaterLevel1Untouched | dw WaterLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel1Y, MagicGuildWaterLevel1Y+16, MagicGuildWaterLevel1X, MagicGuildWaterLevel1X+16 | dw $0000 + (MagicGuildWaterLevel1Y*128) + (MagicGuildWaterLevel1X/2) - 128 | 1098210983EarthLevel2Button:10984 db %1100 0011 | dw EarthLevel2Untouched | dw EarthLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel2Y ,MagicGuildEarthLevel2Y+16 ,MagicGuildEarthLevel2X ,MagicGuildEarthLevel2X+16 | dw $0000 + (MagicGuildEarthLevel2Y*128) + (MagicGuildEarthLevel2X/2) - 128 |10985FireLevel2Button:10986 db %1100 0011 | dw FireLevel2Untouched | dw FireLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel2Y , MagicGuildFireLevel2Y+16 , MagicGuildFireLevel2X , MagicGuildFireLevel2X+16 | dw $0000 + (MagicGuildFireLevel2Y*128) + (MagicGuildFireLevel2X/2) - 128 |10987AirLevel2Button:10988 db %1100 0011 | dw AirLevel2Untouched | dw AirLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel2Y , MagicGuildAirLevel2Y+16 , MagicGuildAirLevel2X , MagicGuildAirLevel2X+16 | dw $0000 + (MagicGuildAirLevel2Y*128) + (MagicGuildAirLevel2X/2) - 128 |10989WaterLevel2Button:10990 db %1100 0011 | dw WaterLevel2Untouched | dw WaterLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel2Y, MagicGuildWaterLevel2Y+16, MagicGuildWaterLevel2X, MagicGuildWaterLevel2X+16 | dw $0000 + (MagicGuildWaterLevel2Y*128) + (MagicGuildWaterLevel2X/2) - 128 | 1099210993EarthLevel3Button:10994 db %1100 0011 | dw EarthLevel3Untouched | dw EarthLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel3Y ,MagicGuildEarthLevel3Y+16 ,MagicGuildEarthLevel3X ,MagicGuildEarthLevel3X+16 | dw $0000 + (MagicGuildEarthLevel3Y*128) + (MagicGuildEarthLevel3X/2) - 128 |10995FireLevel3Button:10996 db %1100 0011 | dw FireLevel3Untouched | dw FireLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel3Y , MagicGuildFireLevel3Y+16 , MagicGuildFireLevel3X , MagicGuildFireLevel3X+16 | dw $0000 + (MagicGuildFireLevel3Y*128) + (MagicGuildFireLevel3X/2) - 128 |10997AirLevel3Button:10998 db %1100 0011 | dw AirLevel3Untouched | dw AirLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel3Y , MagicGuildAirLevel3Y+16 , MagicGuildAirLevel3X , MagicGuildAirLevel3X+16 | dw $0000 + (MagicGuildAirLevel3Y*128) + (MagicGuildAirLevel3X/2) - 128 |10999WaterLevel3Button:11000 db %1100 0011 | dw WaterLevel3Untouched | dw WaterLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel3Y, MagicGuildWaterLevel3Y+16, MagicGuildWaterLevel3X, MagicGuildWaterLevel3X+16 | dw $0000 + (MagicGuildWaterLevel3Y*128) + (MagicGuildWaterLevel3X/2) - 128 | 1100211003EarthLevel4Button:11004 db %1100 0011 | dw EarthLevel4Untouched | dw EarthLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel4Y ,MagicGuildEarthLevel4Y+16 ,MagicGuildEarthLevel4X ,MagicGuildEarthLevel4X+16 | dw $0000 + (MagicGuildEarthLevel4Y*128) + (MagicGuildEarthLevel4X/2) - 128 |11005FireLevel4Button:11006 db %1100 0011 | dw FireLevel4Untouched | dw FireLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel4Y , MagicGuildFireLevel4Y+16 , MagicGuildFireLevel4X , MagicGuildFireLevel4X+16 | dw $0000 + (MagicGuildFireLevel4Y*128) + (MagicGuildFireLevel4X/2) - 128 |11007AirLevel4Button:11008 db %1100 0011 | dw AirLevel4Untouched | dw AirLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel4Y , MagicGuildAirLevel4Y+16 , MagicGuildAirLevel4X , MagicGuildAirLevel4X+16 | dw $0000 + (MagicGuildAirLevel4Y*128) + (MagicGuildAirLevel4X/2) - 128 |11009WaterLevel4Button:11010 db %1100 0011 | dw WaterLevel4Untouched | dw WaterLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel4Y, MagicGuildWaterLevel4Y+16, MagicGuildWaterLevel4X, MagicGuildWaterLevel4X+16 | dw $0000 + (MagicGuildWaterLevel4Y*128) + (MagicGuildWaterLevel4X/2) - 128 | 11012SetCastleSpellsInIX:11013 push iy11014 pop de11015 ld hl,Castle111016 ld ix,Castle1Spells11017 call CompareHLwithDE11018 ret z11020 ld hl,Castle211021 ld ix,Castle2Spells11022 call CompareHLwithDE11023 ret z11025 ld hl,Castle311026 ld ix,Castle3Spells11027 call CompareHLwithDE11028 ret z11030 ld hl,Castle411031 ld ix,Castle4Spells11032 call CompareHLwithDE11033 ret z11034 ret11036SetMagicGuildButtons:11037 ld hl,MagicGuildButtonTable-211038 ld de,GenericButtonTable-211039 ld bc,2+(GenericButtonTableLenghtPerButton*8)11040 ldir11042 call SetCastleSpellsInIX11043 ld de,GenericButtonTable11045 11046 ld hl,EarthLevel1Button11047 bit 0,(ix+0)11048 call nz,.AddButton11049 ld hl,FireLevel1Button11050 bit 0,(ix+1)11051 call nz,.AddButton11052 ld hl,AirLevel1Button11053 bit 0,(ix+2)11054 call nz,.AddButton11055 ld hl,WaterLevel1Button11056 bit 0,(ix+3)11057 call nz,.AddButton11059 ld hl,EarthLevel2Button11060 bit 1,(ix+0)11061 call nz,.AddButton11062 ld hl,FireLevel2Button11063 bit 1,(ix+1)11064 call nz,.AddButton11065 ld hl,AirLevel2Button11066 bit 1,(ix+2)11067 call nz,.AddButton11068 ld hl,WaterLevel2Button11069 bit 1,(ix+3)11070 call nz,.AddButton11072 ld hl,EarthLevel3Button11073 bit 2,(ix+0)11074 call nz,.AddButton11075 ld hl,FireLevel3Button11076 bit 2,(ix+1)11077 call nz,.AddButton11078 ld hl,AirLevel3Button11079 bit 2,(ix+2)11080 call nz,.AddButton11081 ld hl,WaterLevel3Button11082 bit 2,(ix+3)11083 call nz,.AddButton11085 ld hl,EarthLevel4Button11086 bit 3,(ix+0)11087 call nz,.AddButton11088 ld hl,FireLevel4Button11089 bit 3,(ix+1)11090 call nz,.AddButton11091 ld hl,AirLevel4Button11092 bit 3,(ix+2)11093 call nz,.AddButton11094 ld hl,WaterLevel4Button11095 bit 3,(ix+3)11096 call nz,.AddButton11098 ld a,(iy+CastleMageGuildLevel)11099 cp 411100 ret z11101 xor a11102 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a11103 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a11105 ld a,(iy+CastleMageGuildLevel)11106 cp 311107 ret z11108 xor a11109 ld (GenericButtonTable+4*GenericButtonTableLenghtPerButton),a11110 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a11112 ld a,(iy+CastleMageGuildLevel)11113 cp 211114 ret z11115 xor a11116 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a11117 ld (GenericButtonTable+3*GenericButtonTableLenghtPerButton),a11118 ret11120 .AddButton:11121 ld bc,GenericButtonTableLenghtPerButton11122 ldir11123 ret1112511126MagicGuildEarthLevel1Y: equ 04611127MagicGuildEarthLevel1X: equ 03411128MagicGuildEarthLevel2Y: equ 04611129MagicGuildEarthLevel2X: equ 07211130MagicGuildEarthLevel3Y: equ 06911131MagicGuildEarthLevel3X: equ 03411132MagicGuildEarthLevel4Y: equ 06911133MagicGuildEarthLevel4X: equ 07211135MagicGuildFireLevel1Y: equ 10511136MagicGuildFireLevel1X: equ 03411137MagicGuildFireLevel2Y: equ 10511138MagicGuildFireLevel2X: equ 07211139MagicGuildFireLevel3Y: equ 12811140MagicGuildFireLevel3X: equ 03411141MagicGuildFireLevel4Y: equ 12811142MagicGuildFireLevel4X: equ 07211144MagicGuildAirLevel1Y: equ 04611145MagicGuildAirLevel1X: equ 16611146MagicGuildAirLevel2Y: equ 04611147MagicGuildAirLevel2X: equ 20411148MagicGuildAirLevel3Y: equ 06911149MagicGuildAirLevel3X: equ 16611150MagicGuildAirLevel4Y: equ 06911151MagicGuildAirLevel4X: equ 20411153MagicGuildWaterLevel1Y: equ 10511154MagicGuildWaterLevel1X: equ 16611155MagicGuildWaterLevel2Y: equ 10511156MagicGuildWaterLevel2X: equ 20411157MagicGuildWaterLevel3Y: equ 12811158MagicGuildWaterLevel3X: equ 16611159MagicGuildWaterLevel4Y: equ 12811160MagicGuildWaterLevel4X: equ 2041116211163EarthLevel1Untouched: equ $4000 + (000*128) + (224/2) - 12811164EarthLevel1Touched: equ $4000 + (000*128) + (240/2) - 12811165EarthLevel2Untouched: equ $4000 + (016*128) + (224/2) - 12811166EarthLevel2Touched: equ $4000 + (016*128) + (240/2) - 12811167EarthLevel3Untouched: equ $4000 + (032*128) + (224/2) - 12811168EarthLevel3Touched: equ $4000 + (032*128) + (240/2) - 12811169EarthLevel4Untouched: equ $4000 + (048*128) + (224/2) - 12811170EarthLevel4Touched: equ $4000 + (048*128) + (240/2) - 12811172FireLevel1Untouched: equ $4000 + (064*128) + (224/2) - 12811173FireLevel1Touched: equ $4000 + (064*128) + (240/2) - 12811174FireLevel2Untouched: equ $4000 + (080*128) + (224/2) - 12811175FireLevel2Touched: equ $4000 + (080*128) + (240/2) - 12811176FireLevel3Untouched: equ $4000 + (096*128) + (224/2) - 12811177FireLevel3Touched: equ $4000 + (096*128) + (240/2) - 12811178FireLevel4Untouched: equ $4000 + (112*128) + (224/2) - 12811179FireLevel4Touched: equ $4000 + (112*128) + (240/2) - 12811181AirLevel1Untouched: equ $4000 + (128*128) + (224/2) - 12811182AirLevel1Touched: equ $4000 + (128*128) + (240/2) - 12811183AirLevel2Untouched: equ $4000 + (144*128) + (224/2) - 12811184AirLevel2Touched: equ $4000 + (144*128) + (240/2) - 12811185AirLevel3Untouched: equ $4000 + (160*128) + (224/2) - 12811186AirLevel3Touched: equ $4000 + (160*128) + (240/2) - 12811187AirLevel4Untouched: equ $4000 + (176*128) + (224/2) - 12811188AirLevel4Touched: equ $4000 + (176*128) + (240/2) - 12811190WaterLevel1Untouched: equ $4000 + (184*128) + (000/2) - 12811191WaterLevel1Touched: equ $4000 + (184*128) + (016/2) - 12811192WaterLevel2Untouched: equ $4000 + (184*128) + (032/2) - 12811193WaterLevel2Touched: equ $4000 + (184*128) + (048/2) - 12811194WaterLevel3Untouched: equ $4000 + (184*128) + (064/2) - 12811195WaterLevel3Touched: equ $4000 + (184*128) + (080/2) - 12811196WaterLevel4Untouched: equ $4000 + (184*128) + (096/2) - 12811197WaterLevel4Touched: equ $4000 + (184*128) + (112/2) - 12811200SetExitButtonHeight:11201 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYtop),a11202 ld (CopyCastleButton+dy),a11203 add a,3111204 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYbottom),a11205 ret11207CastleOverviewRecruitCode:11208 call SetScreenOff11210 ld a,211211 ld (AreWeInTavern1OrRecruit2?),a11214 ld a,255 11215 ld (PreviousButtonClicked),a11216 ld ix,GenericButtonTable11217 ld (PreviousButtonClickedIX),ix11218 call SetDefendingAndVisitingHeroButtons11219 ld hl,InGamePalette11220 call SetPalette11222 xor a11223 ld (activepage),a 11225 ld hl,011226 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11227 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11228 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11229 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11230 11231 ld a,%1100 001111232 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 11233 xor a11234 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 11235 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 11236 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 11237 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 11238 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 11240 ld a,13311241 call SetExitButtonHeight11243 xor a11244 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11245 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11246 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11247 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11249 ld a,%1100 0011 11250 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11251 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11252 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11253 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11254 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11255 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11257 call SetRecruitGraphics 11258 call SetResourcesPlayer11259 call SetVisitingAndDefendingHeroesAndArmy11260 call SetAvailableRecruitArmy 11261 call SetVisitingAndDefendingHeroesAndArmy1126311266 ld hl,CopyPage1To011267 call docopy11269 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady11270 call docopy11272 call SetCastleRecruitInterruptHandler11273 11274 .engine: 11275 call SwapAndSetPage 11276 call PopulateControls 1127811283 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11284 or a11285 ld a,(Controls)11286 jr z,.NotInRecruitMAXBUYWindow11287 bit 5,a 11288 call nz,ExitSingleUnitRecruitWindow11289 .NotInRecruitMAXBUYWindow:11290 bit 5,a 11291 jp nz,CastleOverviewCode11293 11294 ld ix,GenericButtonTable 11295 call CheckButtonInteractionControlsNotOnInt11297 call CastleOverviewTavernCode.CheckButtonClickedVisitingAndDefendingHeroesAndArmy 11299 11300 ld ix,(PreviousButtonClickedIX) 11301 ld a,(ix+GenericButtonStatus)11302 push af11303 ld a,(PreviousButtonClicked)11304 cp 25511305 jr z,.EndMarkButton 11306 ld (ix+GenericButtonStatus),%1001 001111307 .EndMarkButton:11308 11310 ld ix,GenericButtonTable11311 call SetGenericButtons 11313 11314 pop af11315 ld ix,(PreviousButtonClickedIX) 11316 ld (ix+GenericButtonStatus),a11317 11320 11321 ld ix,CastleOverviewButtonTable 11322 call CheckButtonMouseInteractionCastle11324 ld ix,CastleOverviewButtonTable11325 call SetCastleButtons 11328 11329 ld ix,RecruitButtonTable 11330 call CheckButtonMouseInteractionRecruitButtons11332 ld ix,RecruitButtonTable11333 call SetRecruitButtons 1133611339 call SwapAndSetPage 11340 ld ix,RecruitButtonTable11341 call SetRecruitButtons 11342 call SwapAndSetPage 11344 11345 ld ix,RecruitButtonMAXBUYTable 11346 call CheckButtonMouseInteractionRecruitMAXBUYButtons11348 ld ix,RecruitButtonMAXBUYTable11349 call SetRecruitMAXBUYButtons 11352 call CheckEndRecruitUnitWindow 11354 call WaitVblank11355 call SetScreenOn11356 jp .engine11358FirstLineintHeightCastleRecruit: equ 12611359SecondLineintHeightCastleRecruit: equ 16011360SetCastleRecruitInterruptHandler:11361 di11362 ld hl,CastleInterruptHandler 11363 ld ($38+1),hl 11364 ld a,$c3 11365 ld ($38),a11366 11367 ld a,(VDP_0) 11368 or 16 11369 ld (VDP_0),a 11370 out ($99),a11371 ld a,12811372 out ($99),a11374 ld a,FirstLineintHeightCastleRecruit11375 ld (CurrentLineIntHeight),a11376 out ($99),a11377 ld a,19+128 11378 ei11379 out ($99),a 11380 ret11382CheckEndRecruitUnitWindow:11383 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11384 or a11385 ret z11387 ld a,(NewPrContr)11388 bit 4,a 11389 ret z11391 ld a,(spat+0) 11392 cp 032 11393 jr c,ExitSingleUnitRecruitWindow11394 cp 032+092 11395 jr nc,ExitSingleUnitRecruitWindow11396 11397 ld a,(spat+1) 11399 add a,0611401 cp 048 11402 jr c,ExitSingleUnitRecruitWindow11403 cp 048+162 11404 ret c11406ExitSingleUnitRecruitWindow:11407 ld hl,011408 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11409 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11410 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11411 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11413 xor a11414 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11415 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11416 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11417 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11419 ld a,%1100 0011 11420 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11421 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11422 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11423 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11424 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11425 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11427 call SetRecruitGraphics6CreatureWindows 11428 call SetAvailableRecruitArmy 11429 call SetResourcesPlayer11430 call SwapAndSetPage 11431 call SetRecruitGraphics6CreatureWindows 11432 call SetAvailableRecruitArmy 11433 call SetResourcesPlayer11434 11435 pop af 11437 jp ExitVisitingAndDefendingArmyRoutine1143911444SetRecruitMAXBUYButtons: 11445 ld b,(ix+AmountOfButtons)11446 .loop:11447 push bc11448 call .Setbutton11449 pop bc11450 ld de,RecruitButtonMAXBUYTableLenghtPerButton11451 add ix,de11453 djnz .loop11454 ret11456 .Setbutton:11457 bit 7,(ix+RecruitButtonStatus)11458 ret z 11460 bit 0,(ix+RecruitButtonStatus) 11461 res 0,(ix+RecruitButtonStatus) 11462 jr nz,.goCopyButton11463 bit 1,(ix+RecruitButtonStatus)11464 res 1,(ix+RecruitButtonStatus)11465 ret z 11466 .goCopyButton:11468 ld l,(ix+RecruitButton_SYSX_Ontouched)11469 ld h,(ix+RecruitButton_SYSX_Ontouched+1)11470 bit 6,(ix+RecruitButtonStatus)11471 jr nz,.go 11473 ld l,(ix+RecruitButton_SYSX_MovedOver)11474 ld h,(ix+RecruitButton_SYSX_MovedOver+1)11475 bit 5,(ix+RecruitButtonStatus)11476 jr nz,.go 11478 ld l,(ix+RecruitButton_SYSX_Clicked)11479 ld h,(ix+RecruitButton_SYSX_Clicked+1)11480 .go:11482 11483 ld e,(ix+RecruitButton_DYDX)11484 ld d,(ix+RecruitButton_DYDX+1)11487 ld a,(ix+GenericButtonYbottom)11488 sub a,(ix+GenericButtonYtop)11489 ld b,a 11490 ld a,(ix+GenericButtonXright)11491 sub a,(ix+GenericButtonXleft)11492 srl a 11493 ld c,a 1149711498 ld a,ButtonsRecruitBlock 11499 call CopyRamToVramCorrectedCastleOverview 11501 ret11512CheckButtonMouseInteractionRecruitMAXBUYButtons:11513 ld b,(ix+AmountOfButtons)11514 ld de,RecruitButtonMAXBUYTableLenghtPerButton11516 .loop:11517 call .check11518 add ix,de11519 djnz .loop11520 ret11521 11522 .check:11523 bit 7,(ix+RecruitButtonStatus) 11524 ret z 11525 11526 ld a,(spat+0) 11527 cp (ix+RecruitButtonYtop)11528 jr c,.NotOverButton11529 cp (ix+RecruitButtonYbottom)11530 jr nc,.NotOverButton11531 ld a,(spat+1) 11533 add a,0611535 cp (ix+RecruitButtonXleft)11536 jr c,.NotOverButton11537 cp (ix+RecruitButtonXright)11538 jr nc,.NotOverButton11539 1154111547 ld a,(Controls)11548 bit 4,a 11549 jr nz,.MouseOverButtonAndSpacePressed11550 bit 4,(ix+RecruitButtonStatus) 11551 jr nz,.MenuOptionSelected 11552 .MouseHoverOverButton:11553 11554 bit 5,(ix+RecruitButtonStatus) 11555 ld (ix+RecruitButtonStatus),%1010 001111556 ret nz11558 push iy11559 push bc11560 ld bc,SFX_MouseOver11561 call RePlayerSFX_PlayCh111562 pop bc11563 pop iy11564 ret11566 .MouseOverButtonAndSpacePressed:11567 bit 4,(ix+RecruitButtonStatus) 11568 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit11569 ld a,(NewPrContr)11570 bit 4,a 11571 jr z,.MouseHoverOverButton11573 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:11574 ld (ix+RecruitButtonStatus),%1001 001111575 push iy11576 push bc11577 ld bc,SFX_MouseClick11578 call RePlayerSFX_PlayCh111579 pop bc11580 pop iy11581 ret11582 11583 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:11584 ld (ix+RecruitButtonStatus),%1001 001111585 ret11587 .NotOverButton:11588 bit 4,(ix+RecruitButtonStatus) 11589 jr nz,.buttonIsStillLit11590 bit 5,(ix+RecruitButtonStatus) 11591 ret z11592 .buttonIsStillLit:11593 ld (ix+RecruitButtonStatus),%1100 001111594 ret11596 .MenuOptionSelected:11597 pop af 11598 ld (ix+RecruitButtonStatus),%1010 001111599 ld a,b11600 cp 411601 jr z,.BuyButtonPressed11602 cp 311603 jr z,.MaxButtonPressed11604 cp 211605 jr z,.PlusButtonPressed11606 cp 111607 jr z,.MinusButtonPressed11608 ret11610 .MinusButtonPressed:11611 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11612 ld a,l11613 or h11614 ret z 11615 11616 dec hl11617 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11619 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11620 inc hl11621 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11623 call .GoSetAvailableAmountRecruitAmountAndTotalCost11624 call SwapAndSetPage 11625 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11627 .PlusButtonPressed:11628 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11629 ld a,l11630 or h11631 ret z 11633 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11634 inc hl1163611637 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11639 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11640 dec hl1164211643 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11645 call .GoSetAvailableAmountRecruitAmountAndTotalCost11646 call SwapAndSetPage 11647 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11651 .MaxButtonPressed:11652 call SetCastleOverViewFontPage0Y212 11654 call .SetAvailableAmountRecruitAmountAndTotalCost11655 call SwapAndSetPage 11656 call .SetAvailableAmountRecruitAmountAndTotalCost11657 ret11659 .BuyButtonPressed:11660 11661 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11662 ld a,d11663 or e11664 jp z,ExitSingleUnitRecruitWindow 11666 11667 ld c,002 11668 call .CheckAddCreaturesToVisitingHero11669 jr nc,.UnitsAdded 11670 ld c,254 11671 call .CheckAddCreaturesToVisitingHero11672 jr nc,.UnitsAdded 11675 push iy11676 push bc11677 ld bc,SFX_InsufficientFunds11678 call RePlayerSFX_PlayCh111679 pop bc11680 pop iy11683 11684 ld c,002 11685 call SetVisitingOrDefendingHeroInIX 11686 jp nc,ExitSingleUnitRecruitWindow 11688 ld c,254 11689 call SetVisitingOrDefendingHeroInIX 11690 jp nc,ExitSingleUnitRecruitWindow 11694 11696 ld hl,$4000 + (132*128) + (160/2) - 12811697 ld de,$0000 + (067*128) + (080/2) - 12811698 ld bc,$0000 + (041*256) + (096/2)11699 ld a,LevelUpBlock 11700 call CopyRamToVramCorrectedCastleOverview 11701 call SwapAndSetPage 11702 .WaitTriggerPressed:11703 call PopulateControls 11709 ld a,(NewPrContr)11710 and %0011 000011711 jr z,.WaitTriggerPressed11712 jp ExitSingleUnitRecruitWindow11714 .UnitsAdded:11715 push iy11716 push bc11717 ld bc,SFX_Purchase11718 call RePlayerSFX_PlayCh111719 pop bc11720 pop iy11722 call SetResourcesCurrentPlayerinIX11723 11724 ld l,(ix+0)11725 ld h,(ix+1) 11726 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11727 xor a11728 sbc hl,de11729 ld (ix+0),l11730 ld (ix+1),h 11732 ld l,(ix+6)11733 ld h,(ix+7) 11734 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)11735 xor a11736 sbc hl,de11737 ld (ix+6),l11738 ld (ix+7),h 11740 ld l,(ix+8)11741 ld h,(ix+9) 11742 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)11743 xor a11744 sbc hl,de11745 ld (ix+8),l11746 ld (ix+9),h 11748 call .SubtractPurchasedUnitsFromCastle11749 jp ExitSingleUnitRecruitWindow11751 .CheckAddCreaturesToVisitingHero:11752 call SetVisitingOrDefendingHeroInIX 11753 ret c 11755 ld a,(SelectedCastleRecruitLevelUnit)11756 ld b,a11757 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11759 11760 ld a,(SelectedCastleRecruitLevelUnit)11761 cp (ix+HeroUnits+0) 11762 jp z,.Slot1SameUnit11763 cp (ix+HeroUnits+3) 11764 jp z,.Slot2SameUnit11765 cp (ix+HeroUnits+6) 11766 jp z,.Slot3SameUnit11767 cp (ix+HeroUnits+9) 11768 jp z,.Slot4SameUnit11769 cp (ix+HeroUnits+12) 11770 jp z,.Slot5SameUnit11771 cp (ix+HeroUnits+15) 11772 jp z,.Slot6SameUnit11773 11774 11775 xor a11776 cp (ix+HeroUnits+0) 11777 jp z,.Slot1IsEmpty11778 cp (ix+HeroUnits+3) 11779 jp z,.Slot2IsEmpty11780 cp (ix+HeroUnits+6) 11781 jp z,.Slot3IsEmpty11782 cp (ix+HeroUnits+9) 11783 jp z,.Slot4IsEmpty11784 cp (ix+HeroUnits+12) 11785 jp z,.Slot5IsEmpty11786 cp (ix+HeroUnits+15) 11787 jp z,.Slot6IsEmpty11788 scf11789 ret11790 11791 .Slot1SameUnit:11792 ld e,(ix+HeroUnits+1) 11793 ld d,(ix+HeroUnits+2) 11794 add hl,de11795 ld (ix+HeroUnits+1),l 11796 ld (ix+HeroUnits+2),h 11797 ret11798 .Slot2SameUnit:11799 ld e,(ix+HeroUnits+4) 11800 ld d,(ix+HeroUnits+5) 11801 add hl,de11802 ld (ix+HeroUnits+4),l 11803 ld (ix+HeroUnits+5),h 11804 ret11805 .Slot3SameUnit:11806 ld e,(ix+HeroUnits+7) 11807 ld d,(ix+HeroUnits+8) 11808 add hl,de11809 ld (ix+HeroUnits+7),l 11810 ld (ix+HeroUnits+8),h 11811 ret11812 .Slot4SameUnit:11813 ld e,(ix+HeroUnits+10) 11814 ld d,(ix+HeroUnits+11) 11815 add hl,de11816 ld (ix+HeroUnits+10),l 11817 ld (ix+HeroUnits+11),h 11818 ret11819 .Slot5SameUnit:11820 ld e,(ix+HeroUnits+13) 11821 ld d,(ix+HeroUnits+14) 11822 add hl,de11823 ld (ix+HeroUnits+13),l 11824 ld (ix+HeroUnits+14),h 11825 ret11826 .Slot6SameUnit:11827 ld e,(ix+HeroUnits+16) 11828 ld d,(ix+HeroUnits+17) 11829 add hl,de11830 ld (ix+HeroUnits+16),l 11831 ld (ix+HeroUnits+17),h 11832 ret11834 .Slot1IsEmpty:11835 ld (ix+HeroUnits+0),b 11836 ld (ix+HeroUnits+1),l 11837 ld (ix+HeroUnits+2),h 11838 ret11839 .Slot2IsEmpty:11840 ld (ix+HeroUnits+3),b 11841 ld (ix+HeroUnits+4),l 11842 ld (ix+HeroUnits+5),h 11843 ret11844 .Slot3IsEmpty:11845 ld (ix+HeroUnits+6),b 11846 ld (ix+HeroUnits+7),l 11847 ld (ix+HeroUnits+8),h 11848 ret11849 .Slot4IsEmpty:11850 ld (ix+HeroUnits+9),b 11851 ld (ix+HeroUnits+10),l 11852 ld (ix+HeroUnits+11),h 11853 ret11854 .Slot5IsEmpty:11855 ld (ix+HeroUnits+12),b 11856 ld (ix+HeroUnits+13),l 11857 ld (ix+HeroUnits+14),h 11858 ret11859 .Slot6IsEmpty:11860 ld (ix+HeroUnits+15),b 11861 ld (ix+HeroUnits+16),l 11862 ld (ix+HeroUnits+17),h 11863 ret11868.SubtractPurchasedUnitsFromCastle:11869 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11870 ld a,(SelectedCastleRecruitUnitWindow)11871 cp 611872 jr nz,.EndCheckUnitLevel1 11873 ld l,(iy+CastleLevel1UnitsAvail+00)11874 ld h,(iy+CastleLevel1UnitsAvail+01)11875 sbc hl,de11876 ld (iy+CastleLevel1UnitsAvail+00),l11877 ld (iy+CastleLevel1UnitsAvail+01),h11878 ret11879 .EndCheckUnitLevel1:11881 cp 511882 jr nz,.EndCheckUnitLevel2 11883 ld l,(iy+CastleLevel1UnitsAvail+02)11884 ld h,(iy+CastleLevel1UnitsAvail+03)11885 sbc hl,de11886 ld (iy+CastleLevel1UnitsAvail+02),l11887 ld (iy+CastleLevel1UnitsAvail+03),h11888 ret11889 .EndCheckUnitLevel2:11891 cp 411892 jr nz,.EndCheckUnitLevel3 11893 ld l,(iy+CastleLevel1UnitsAvail+04)11894 ld h,(iy+CastleLevel1UnitsAvail+05)11895 sbc hl,de11896 ld (iy+CastleLevel1UnitsAvail+04),l11897 ld (iy+CastleLevel1UnitsAvail+05),h11898 ret11899 .EndCheckUnitLevel3:11901 cp 311902 jr nz,.EndCheckUnitLevel411903 ld l,(iy+CastleLevel1UnitsAvail+06)11904 ld h,(iy+CastleLevel1UnitsAvail+07)11905 sbc hl,de11906 ld (iy+CastleLevel1UnitsAvail+06),l11907 ld (iy+CastleLevel1UnitsAvail+07),h11908 ret11909 .EndCheckUnitLevel4:11911 cp 211912 jr nz,.EndCheckUnitLevel511913 ld l,(iy+CastleLevel1UnitsAvail+08)11914 ld h,(iy+CastleLevel1UnitsAvail+09)11915 sbc hl,de11916 ld (iy+CastleLevel1UnitsAvail+08),l11917 ld (iy+CastleLevel1UnitsAvail+09),h11918 ret11919 .EndCheckUnitLevel5:11921 cp 111922 jr nz,.EndCheckUnitLevel611923 ld l,(iy+CastleLevel1UnitsAvail+10)11924 ld h,(iy+CastleLevel1UnitsAvail+11)11925 sbc hl,de11926 ld (iy+CastleLevel1UnitsAvail+10),l11927 ld (iy+CastleLevel1UnitsAvail+11),h11928 ret11929 .EndCheckUnitLevel6:11930 ret11937.SetAvailableAmountRecruitAmountAndTotalCost:11938 11939 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11940 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11941 add hl,de11942 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11943 ld hl,011944 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11946 .GoSetAvailableAmountRecruitAmountAndTotalCost:11948 11949 ld hl,$4000 + (118*128) + (040/2) - 12811950 ld de,$0000 + (103*128) + (088/2) - 12811951 ld bc,$0000 + (005*256) + (026/2)11952 ld a,ButtonsRecruitBlock 11953 call CopyRamToVramCorrectedCastleOverview 11955 11956 ld hl,$4000 + (086*128) + (122/2) - 12811957 ld de,$0000 + (071*128) + (170/2) - 12811958 ld bc,$0000 + (037*256) + (036/2)11959 ld a,ButtonsRecruitBlock 11960 call CopyRamToVramCorrectedCastleOverview 11962 call .SetTotalCost 11964 11965 call SetResourcesCurrentPlayerinIX11966 11967 ld l,(ix+0)11968 ld h,(ix+1) 11969 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11970 xor a11971 sbc hl,de 11972 jr nc,.EndCheckEnoughGoldToRecruitALLunits11974 11975 ld a,(SelectedCastleRecruitLevelUnit)11976 call SetCostSelectedCreatureInHL 11977 push hl 11978 call SetResourcesCurrentPlayerinIX11979 11980 ld c,(ix+0)11981 ld b,(ix+1) 11982 pop de 11984 call DivideBCbyDE 11986 11987 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11988 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11989 add hl,de11990 sbc hl,bc11991 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11992 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11993 call .SetTotalCost11994 .EndCheckEnoughGoldToRecruitALLunits:11999 12000 call SetResourcesCurrentPlayerinIX12001 12002 ld l,(ix+6)12003 ld h,(ix+7) 12004 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)12005 xor a12006 sbc hl,de 12007 jr nc,.EndCheckEnoughGemsToRecruitALLunits12009 12010 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)12011 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12012 add hl,de12013 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl12014 ld hl,012015 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl12017 12018 ld a,(SelectedCastleRecruitLevelUnit)12019 call SetGemsCostSelectedCreatureInHL 12020 push hl 12021 call SetResourcesCurrentPlayerinIX12022 12023 ld c,(ix+6)12024 ld b,(ix+7) 12025 pop de 12027 call DivideBCbyDE 12029 12030 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)12031 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12032 add hl,de12033 sbc hl,bc12034 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl12035 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc12036 call .SetTotalCost 12037 .EndCheckEnoughGemsToRecruitALLunits:12044 12045 call SetResourcesCurrentPlayerinIX12046 12047 ld l,(ix+8)12048 ld h,(ix+9) 12049 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)12050 xor a12051 sbc hl,de 12052 jr nc,.EndCheckEnoughRubiesToRecruitALLunits12054 12055 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)12056 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12057 add hl,de12058 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl12059 ld hl,012060 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl12062 12063 ld a,(SelectedCastleRecruitLevelUnit)12064 call SetRubiesCostSelectedCreatureInHL 12065 push hl 12066 call SetResourcesCurrentPlayerinIX12067 12068 ld c,(ix+8)12069 ld b,(ix+9) 12070 pop de 12072 call DivideBCbyDE 12074 12075 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)12076 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12077 add hl,de12078 sbc hl,bc12079 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl12080 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc12081 call .SetTotalCost12082 .EndCheckEnoughRubiesToRecruitALLunits:12085 call ShowRecruitWindowForSelectedUnit.amountavailable12086 call ShowRecruitWindowForSelectedUnit.recruitamount12088 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)12089 ld a,h12090 or l12091 ret z12093 call ShowRecruitWindowForSelectedUnit.totalcost12094 call ShowRecruitWindowForSelectedUnit.TotalGemscost12095 call ShowRecruitWindowForSelectedUnit.TotalRubiescost12096 ret12098 .SetTotalCost:12099 12100 ld a,(SelectedCastleRecruitLevelUnit)12101 call SetCostSelectedCreatureInHL 12102 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12103 call MultiplyHlWithDE12104 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl12106 12107 ld a,(SelectedCastleRecruitLevelUnit)12108 call SetGemsCostSelectedCreatureInHL 12109 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12110 call MultiplyHlWithDE12111 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl12113 12114 ld a,(SelectedCastleRecruitLevelUnit)12115 call SetRubiesCostSelectedCreatureInHL 12116 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12117 call MultiplyHlWithDE12118 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl12119 ret12134SetRecruitButtons: 12135 ld b,612136 .loop:12137 push bc12138 call .Setbutton12139 pop bc12140 ld de,RecruitButtonTableLenghtPerButton12141 add ix,de12143 djnz .loop12144 ret12146 .Setbutton:12147 bit 7,(ix+RecruitButtonStatus)12148 ret z 12150 bit 0,(ix+RecruitButtonStatus) 12151 res 0,(ix+RecruitButtonStatus) 12152 jr nz,.goCopyButton12153 bit 1,(ix+RecruitButtonStatus)12154 res 1,(ix+RecruitButtonStatus)12155 ret z 12156 .goCopyButton:12158 ld l,(ix+RecruitButton_SYSX_Ontouched)12159 ld h,(ix+RecruitButton_SYSX_Ontouched+1)12160 bit 6,(ix+RecruitButtonStatus)12161 jr nz,.go 12163 ld l,(ix+RecruitButton_SYSX_MovedOver)12164 ld h,(ix+RecruitButton_SYSX_MovedOver+1)12165 bit 5,(ix+RecruitButtonStatus)12166 jr nz,.go 12168 ld l,(ix+RecruitButton_SYSX_Clicked)12169 ld h,(ix+RecruitButton_SYSX_Clicked+1)12170 .go:12172 12173 ld e,(ix+RecruitButton_DYDX)12174 ld d,(ix+RecruitButton_DYDX+1)12176 ld bc,$0000 + (009*256) + (076/2) 12177 ld a,ButtonsRecruitBlock 12178 call CopyRamToVramCorrectedCastleOverview 12180 ret12193CheckButtonMouseInteractionRecruitButtons:12194 ld b,612195 ld de,RecruitButtonTableLenghtPerButton12197 .loop:12198 call .check12199 add ix,de12200 djnz .loop12201 ret12202 12203 .check:12204 bit 7,(ix+RecruitButtonStatus) 12205 ret z 12206 12207 ld a,(spat+0) 12208 cp (ix+RecruitButtonYtop)12209 jr c,.NotOverButton12210 cp (ix+RecruitButtonYbottom)12211 jr nc,.NotOverButton12212 ld a,(spat+1) 12214 add a,0612216 cp (ix+RecruitButtonXleft)12217 jr c,.NotOverButton12218 cp (ix+RecruitButtonXright)12219 jr nc,.NotOverButton12220 1222212228 ld a,(Controls)12229 bit 4,a 12230 jr nz,.MouseOverButtonAndSpacePressed12231 bit 4,(ix+RecruitButtonStatus) 12232 jr nz,.MenuOptionSelected 12233 .MouseHoverOverButton:12234 12235 bit 5,(ix+RecruitButtonStatus) 12236 ld (ix+RecruitButtonStatus),%1010 001112237 ret nz12239 push iy12240 push bc12241 ld bc,SFX_MouseOver12242 call RePlayerSFX_PlayCh112243 pop bc12244 pop iy12245 ret12247 .MouseOverButtonAndSpacePressed:12248 bit 4,(ix+RecruitButtonStatus) 12249 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12250 ld a,(NewPrContr)12251 bit 4,a 12252 jr z,.MouseHoverOverButton12254 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12255 ld (ix+RecruitButtonStatus),%1001 001112256 push iy12257 push bc12258 ld bc,SFX_MouseClick12259 call RePlayerSFX_PlayCh112260 pop bc12261 pop iy12262 ret12264 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12265 ld (ix+RecruitButtonStatus),%1001 001112266 ret12268 .NotOverButton:12269 bit 4,(ix+RecruitButtonStatus) 12270 jr nz,.buttonIsStillLit12271 bit 5,(ix+RecruitButtonStatus) 12272 ret z12273 .buttonIsStillLit:12274 ld (ix+RecruitButtonStatus),%1100 001112275 ret12277 .MenuOptionSelected:12278 pop af 12282 push bc 12283 call ShowRecruitWindowForSelectedUnit12284 call SwapAndSetPage 12285 pop bc12286 call ShowRecruitWindowForSelectedUnit12287 ret12300 12301 12318CastleOverviewBuildCode: 12319 call SetScreenOff12321 call Set9BuildButtons 12323 ld hl,CastleOverviewPalette12324 call SetPalette12326 xor a12327 ld (activepage),a 12329 call SetBuildGraphics 12330 call SetResourcesPlayer12332 ld hl,CopyPage1To012333 call docopy12335 ld a,%1100 001112336 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 12337 xor a12338 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 12339 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 12340 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 12341 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 12342 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 12344 ld a,%1100 001112345 ld (BuildButtonTable+0*BuildButtonTableLenghtPerButton),a 12346 ld (BuildButtonTable+1*BuildButtonTableLenghtPerButton),a 12347 ld (BuildButtonTable+2*BuildButtonTableLenghtPerButton),a 12348 ld (BuildButtonTable+3*BuildButtonTableLenghtPerButton),a 12349 ld (BuildButtonTable+4*BuildButtonTableLenghtPerButton),a 12350 ld (BuildButtonTable+5*BuildButtonTableLenghtPerButton),a 12351 ld (BuildButtonTable+6*BuildButtonTableLenghtPerButton),a 12352 ld (BuildButtonTable+7*BuildButtonTableLenghtPerButton),a 12353 ld (BuildButtonTable+8*BuildButtonTableLenghtPerButton),a 12355 ld hl,SetSingleBuildButtonColor.putgreen12356 ld de,SingleBuildButtonTable12357 ld bc,712358 ldir12360 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12361 call docopy12363 call SetCastleBuildInterruptHandler12364 12365 .engine: 12366 call SwapAndSetPage 12367 call PopulateControls 1236912374 ld a,(Controls)12375 bit 5,a 12376 jp nz,CastleOverviewCode12378 12379 ld ix,CastleOverviewButtonTable 12380 call CheckButtonMouseInteractionCastle12382 ld ix,CastleOverviewButtonTable12383 call SetCastleButtons 12386 12387 ld ix,BuildButtonTable 12388 call CheckButtonMouseInteractionBuildButtons12390 ld ix,BuildButtonTable12391 call SetBuildButtons 12392 call SetTextBuildingWhenClicked 12395 call SetVandXSymbols12398 12399 ld ix,SingleBuildButtonTable 12400 call CheckButtonMouseInteractionSingleBuildButton12402 ld ix,SingleBuildButtonTable12403 call SetSingleBuildButton 12406 call WaitVblank12407 call SetScreenOn12408 jp .engine12410lineintheightCastleBuild: equ 1412411SetCastleBuildInterruptHandler:12412 di12413 ld hl,CastleInterruptHandler 12414 ld ($38+1),hl 12415 ld a,$c3 12416 ld ($38),a12417 12418 ld a,(VDP_0) 12419 or 16 12420 ld (VDP_0),a 12421 out ($99),a12422 ld a,12812423 out ($99),a12425 ld a,lineintheightCastleBuild12426 ld (CurrentLineIntHeight),a12427 out ($99),a12428 ld a,19+128 12429 ei12430 out ($99),a 12431 ret12433xOffsetVandX: equ 3912434YOffsetVandX: equ +012436BlueBuildButton: equ $4000 + (000*128) + (000/2) - 12812437GreenBuildButton: equ $4000 + (000*128) + (150/2) - 12812438RedBuildButton: equ $4000 + (038*128) + (050/2) - 12812441SetVandXSymbols:12442 12443 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12444 ld de,GreenBuildButton12445 call CompareHLwithDE12446 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12447 call z,.SetGreenButton12449 12450 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12451 ld de,GreenBuildButton12452 call CompareHLwithDE12453 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12454 call z,.SetGreenButton12456 12457 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12458 ld de,GreenBuildButton12459 call CompareHLwithDE12460 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12461 call z,.SetGreenButton12463 12464 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12465 ld de,GreenBuildButton12466 call CompareHLwithDE12467 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12468 call z,.SetGreenButton12470 12471 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12472 ld de,GreenBuildButton12473 call CompareHLwithDE12474 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12475 call z,.SetGreenButton12477 12478 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12479 ld de,GreenBuildButton12480 call CompareHLwithDE12481 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12482 call z,.SetGreenButton12484 12485 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12486 ld de,GreenBuildButton12487 call CompareHLwithDE12488 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12489 call z,.SetGreenButton12491 12492 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12493 ld de,GreenBuildButton12494 call CompareHLwithDE12495 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12496 call z,.SetGreenButton12498 12499 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12500 ld de,GreenBuildButton12501 call CompareHLwithDE12502 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12503 call z,.SetGreenButton12505 12506 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12507 ld de,RedBuildButton12508 call CompareHLwithDE12509 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12510 call z,.SetRedButton12512 12513 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12514 ld de,RedBuildButton12515 call CompareHLwithDE12516 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12517 call z,.SetRedButton12519 12520 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12521 ld de,RedBuildButton12522 call CompareHLwithDE12523 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12524 call z,.SetRedButton12526 12527 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12528 ld de,RedBuildButton12529 call CompareHLwithDE12530 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12531 call z,.SetRedButton12533 12534 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12535 ld de,RedBuildButton12536 call CompareHLwithDE12537 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12538 call z,.SetRedButton12540 12541 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12542 ld de,RedBuildButton12543 call CompareHLwithDE12544 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12545 call z,.SetRedButton12547 12548 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12549 ld de,RedBuildButton12550 call CompareHLwithDE12551 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12552 call z,.SetRedButton12554 12555 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12556 ld de,RedBuildButton12557 call CompareHLwithDE12558 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12559 call z,.SetRedButton12561 12562 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12563 ld de,RedBuildButton12564 call CompareHLwithDE12565 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12566 call z,.SetRedButton12567 ret12569.SetGreenButton:12570 ld hl,$4000 + (114*128) + (200/2) - 128 12571 ld bc,$0000 + (017*256) + (018/2) 12572 ld a,ButtonsBuildBlock 12573 call CopyTransparantImage12574 ret12576.SetRedButton:12577 ld hl,$4000 + (115*128) + (218/2) - 128 12578 ld bc,$0000 + (016*256) + (014/2) 12579 ld a,ButtonsBuildBlock 12580 call CopyTransparantImage12581 ret12584CopyTransparantImageEXX:12585 ex af,af'12586 exx1258712592CopyTransparantImage: 1259312594 push af12595 ld a,b12596 ld (CopyCastleButton2+ny),a12597 ld a,c12598 add a,a12599 ld (CopyCastleButton2+nx),a12600 pop af12602 push de12603 ld de,$8000 + (212*128) + (000/2) - 128 12604 call CopyRamToVramCorrectedWithoutActivePageSetting 12605 pop de12607 ld a,(activepage)12608 xor 112609 ld (CopyCastleButton2+dPage),a12611 ld a,d12612 ld (CopyCastleButton2+dy),a12613 ld a,e12614 ld (CopyCastleButton2+dx),a12616 ld hl,CopyCastleButton212617 call docopy12619 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12620 jp docopy12622CheckButtonMouseInteractionSingleBuildButton: 12623 bit 7,(ix+BuildButtonStatus) 12624 ret z 12625 12626 ld a,(spat+0) 12627 cp (ix+BuildButtonYtop)12628 jr c,.NotOverButton12629 cp (ix+BuildButtonYbottom)12630 jr nc,.NotOverButton12631 ld a,(spat+1) 12633 add a,0612635 cp (ix+BuildButtonXleft)12636 jr c,.NotOverButton12637 cp (ix+BuildButtonXright)12638 jr nc,.NotOverButton12639 1264112647 ld a,(Controls)12648 bit 4,a 12649 jr nz,.MouseOverButtonAndSpacePressed12650 bit 4,(ix+BuildButtonStatus) 12651 jr nz,.MenuOptionSelected 12652 .MouseHoverOverButton:12653 12654 bit 5,(ix+BuildButtonStatus) 12655 ld (ix+BuildButtonStatus),%1010 001112656 ret nz12658 push iy12659 push bc12660 ld bc,SFX_MouseOver12661 call RePlayerSFX_PlayCh112662 pop bc12663 pop iy12664 ret12665 .MouseOverButtonAndSpacePressed:12666 bit 4,(ix+BuildButtonStatus) 12667 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12668 ld a,(NewPrContr)12669 bit 4,a 12670 jr z,.MouseHoverOverButton12672 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12673 ld (ix+BuildButtonStatus),%1001 001112674 push iy12675 push bc12676 ld bc,SFX_MouseClick12677 call RePlayerSFX_PlayCh112678 pop bc12679 pop iy12680 ret12681 12682 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12683 ld (ix+BuildButtonStatus),%1001 001112684 ret12686 .NotOverButton:12687 bit 4,(ix+BuildButtonStatus) 12688 jr nz,.buttonIsStillLit12689 bit 5,(ix+BuildButtonStatus) 12690 ret z12691 .buttonIsStillLit:12692 ld (ix+BuildButtonStatus),%1100 001112693 ret12695 .MenuOptionSelected:12696 12698 12699 ld (ix+BuildButtonStatus),%1010 001112701 12702 ld a,(SingleBuildButtonTable+1)12703 ld e,a12704 ld a,(SingleBuildButtonTable+2)12705 ld d,a12706 ld hl,$4000 + (148*128) + (144/2) - 12812707 xor a12708 sbc hl,de12709 ret nz12711 ld a,255 12712 ld (SetNewBuilding?),a 12714 ld a,(WhichBuildingWasClicked?)12715 cp 1 12716 jr z,.CityWalls12717 cp 2 12718 jr z,.BarracksTower12719 cp 3 12720 jr z,.Barracks12721 cp 4 12722 jr z,.Mine12723 cp 5 12724 jr z,.Sawmill12725 cp 6 12726 jr z,.MagicGuild12727 cp 7 12728 jr z,.Tavern12729 cp 8 12730 jr z,.MarketPlace12731 cp 9 12732 jr z,.Castle12734 .CityWalls: 12735 .Castle:12736 ld a,(iy+CastleLevel)12737 cp 512738 jr z,.CityWallsNewBuilding12739 inc (iy+CastleLevel)12740 jp PurchaseBuilding12741 .CityWallsNewBuilding:12742 ld a,8 12743 ld (SetNewBuilding?),a12744 jp PurchaseBuilding12746 .MarketPlace: 12747 ld a,7 12748 ld (SetNewBuilding?),a12749 jp PurchaseBuilding12751 .Tavern:12752 ld a,6 12753 ld (SetNewBuilding?),a12754 jp PurchaseBuilding12756 .MagicGuild:12757 ld a,(iy+CastleMageGuildLevel)12758 or a12759 jr z,.MagicGuildNewBuilding12760 inc (iy+CastleMageGuildLevel)12761 jp PurchaseBuilding12762 .MagicGuildNewBuilding:12763 ld a,5 12764 ld (SetNewBuilding?),a12765 jp PurchaseBuilding12767 .Sawmill:12768 ld a,(iy+CastleSawmillLevel)12769 or a12770 jr z,.SawmillNewBuilding12771 inc (iy+CastleSawmillLevel)12772 jp PurchaseBuilding12773 .SawmillNewBuilding:12774 ld a,3 12775 ld (SetNewBuilding?),a12776 jp PurchaseBuilding12778 .Mine:12779 ld a,(iy+CastleMineLevel)12780 or a12781 jr z,.MineNewBuilding12782 inc (iy+CastleMineLevel)12783 jp PurchaseBuilding12784 .MineNewBuilding:12785 ld a,4 12786 ld (SetNewBuilding?),a12787 jp PurchaseBuilding12789 .BarracksTower:12790 .Barracks:12791 ld a,(iy+CastleBarracksLevel)12792 or a12793 jr z,.BarracksNewBuilding12794 cp 512795 jr z,.BarracksTowerNewBuilding12796 inc (iy+CastleBarracksLevel)12797 jp PurchaseBuilding12798 .BarracksTowerNewBuilding:12799 ld a,2 12800 ld (SetNewBuilding?),a12801 jp PurchaseBuilding12802 .BarracksNewBuilding:12803 ld a,1 12804 ld (SetNewBuilding?),a12805 jp PurchaseBuilding12807PurchaseBuilding:12808 if UnlimitedBuildsPerTurn?=012809 ld (iy+AlreadyBuiltThisTurn?),112810 endif12812 push iy12813 push bc12814 ld bc,SFX_Purchase12815 call RePlayerSFX_PlayCh112816 pop bc12817 pop iy12819 12820 ld ix,(CheckRequirementsWhichBuilding?)12821 ld e,(ix+0)12822 ld d,(ix+1) 12823 call SetResourcesCurrentPlayerinIX12824 ld l,(ix+0)12825 ld h,(ix+1) 12826 xor a12827 sbc hl,de12828 ld (ix+0),l12829 ld (ix+1),h 12831 12832 ld ix,(CheckRequirementsWhichBuilding?)12833 ld e,(ix+2)12834 ld d,(ix+3) 12835 call SetResourcesCurrentPlayerinIX12836 ld l,(ix+2)12837 ld h,(ix+3) 12838 xor a12839 sbc hl,de12840 ld (ix+2),l12841 ld (ix+3),h 12843 12844 ld ix,(CheckRequirementsWhichBuilding?)12845 ld e,(ix+4)12846 ld d,(ix+5) 12847 call SetResourcesCurrentPlayerinIX12848 ld l,(ix+4)12849 ld h,(ix+5) 12850 xor a12851 sbc hl,de12852 ld (ix+4),l12853 ld (ix+5),h 12855 12856 ld ix,(CheckRequirementsWhichBuilding?)12857 ld e,(ix+6)12858 ld d,(ix+7) 12859 call SetResourcesCurrentPlayerinIX12860 ld l,(ix+6)12861 ld h,(ix+7) 12862 xor a12863 sbc hl,de12864 ld (ix+6),l12865 ld (ix+7),h 12867 12868 ld ix,(CheckRequirementsWhichBuilding?)12869 ld e,(ix+8)12870 ld d,(ix+9) 12871 call SetResourcesCurrentPlayerinIX12872 ld l,(ix+8)12873 ld h,(ix+9) 12874 xor a12875 sbc hl,de12876 ld (ix+8),l12877 ld (ix+9),h 12879 pop af12880 jp CastleOverviewCode128811288412897SetSingleBuildButton: 12898 bit 7,(ix+BuildButtonStatus)12899 ret z 12901 bit 0,(ix+BuildButtonStatus) 12902 res 0,(ix+BuildButtonStatus) 12903 jr nz,.goCopyButton12904 bit 1,(ix+BuildButtonStatus)12905 res 1,(ix+BuildButtonStatus)12906 ret z 12907 .goCopyButton:12909 ld l,(ix+BuildButton_SYSX_Ontouched)12910 ld h,(ix+BuildButton_SYSX_Ontouched+1)12911 bit 6,(ix+BuildButtonStatus)12912 jr nz,.go 12914 ld l,(ix+BuildButton_SYSX_MovedOver)12915 ld h,(ix+BuildButton_SYSX_MovedOver+1)12916 bit 5,(ix+BuildButtonStatus)12917 jr nz,.go 12919 ld l,(ix+BuildButton_SYSX_Clicked)12920 ld h,(ix+BuildButton_SYSX_Clicked+1)12921 .go:12923 12924 ld de,$0000 + (168*128) + (180/2) - 128 12925 ld bc,$0000 + (009*256) + (072/2) 12926 ld a,ButtonsBuildBlock 12927 call CopyRamToVramCorrectedCastleOverview 12929 ret12945Set9BuildButtons: 12946 call .Castle12947 call .MarketPlace12948 call .Tavern12949 call .MagicGuild12950 call .Sawmill12951 call .Mine12952 call .Barracks12953 call .BarracksTower12954 call .CityWalls12955 ret12957 .CityWalls:12958 ld de,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)12959 ld a,(iy+CastleLevel)12960 cp 612961 jp z,.Green12962 bit 0,(iy+AlreadyBuiltThisTurn?)12963 jp nz,.Red12964 ld hl,CityWallsCost12965 ld (CheckRequirementsWhichBuilding?),hl12966 jp .CheckRequirementsBuildingMetCityWalls12968 .BarracksTower:12969 ld de,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)12970 ld a,(iy+CastleBarracksLevel)12971 cp 612972 jp z,.Green12973 bit 0,(iy+AlreadyBuiltThisTurn?)12974 jp nz,.Red12975 ld hl,BarracksTowerCost12976 ld (CheckRequirementsWhichBuilding?),hl12977 jp .CheckRequirementsBuildingMetBarracksTower12979 .Barracks:12980 ld de,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)12981 ld a,(iy+CastleBarracksLevel)12982 cp 512983 jp nc,.Green12984 bit 0,(iy+AlreadyBuiltThisTurn?)12985 jp nz,.Red1298612992 ld a,(iy+CastleBarracksLevel)12993 or a12994 ld hl,BarracksLevel1Cost12995 jp z,.BarracksLevelFound12996 dec a12997 ld hl,BarracksLevel2Cost12998 jp z,.BarracksLevelFound12999 dec a13000 ld hl,BarracksLevel3Cost13001 jp z,.BarracksLevelFound13002 dec a13003 ld hl,BarracksLevel4Cost13004 jp z,.BarracksLevelFound13005 ld hl,BarracksLevel5Cost13006 .BarracksLevelFound:13017 ld (CheckRequirementsWhichBuilding?),hl13018 jp .CheckRequirementsBuildingMet13021 .Mine:13022 ld de,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)13023 ld a,(iy+CastleMineLevel)13024 cp 313025 jp z,.Green13026 bit 0,(iy+AlreadyBuiltThisTurn?)13027 jp nz,.Red1302813033 ld a,(iy+CastleMineLevel)13034 or a13035 ld hl,MineLevel1Cost13036 jp z,.MineLevelFound13037 dec a13038 ld hl,MineLevel2Cost13039 jp z,.MineLevelFound13040 ld hl,MineLevel3Cost13041 .MineLevelFound:13052 ld (CheckRequirementsWhichBuilding?),hl13053 jp .CheckRequirementsBuildingMet13055 .Sawmill:13056 ld de,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)13057 ld a,(iy+CastleSawmillLevel)13058 cp 313059 jp z,.Green13060 bit 0,(iy+AlreadyBuiltThisTurn?)13061 jp nz,.Red1306213066 ld a,(iy+CastleSawmillLevel)13067 or a13068 ld hl,SawmillLevel1Cost13069 jp z,.SawmillLevelFound13070 dec a13071 ld hl,SawmillLevel2Cost13072 jp z,.SawmillLevelFound13073 ld hl,SawmillLevel3Cost13074 .SawmillLevelFound:13082 ld (CheckRequirementsWhichBuilding?),hl13083 jp .CheckRequirementsBuildingMet13085 .MagicGuild:13086 ld de,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)13087 ld a,(iy+CastleMageGuildLevel)13088 cp 413089 jp z,.Green13090 bit 0,(iy+AlreadyBuiltThisTurn?)13091 jp nz,.Red1309213096 ld a,(iy+CastleMageGuildLevel)13097 or a13098 ld hl,MagicGuildLevel1Cost13099 jp z,.MagicGuildLevelFound13100 dec a13101 ld hl,MagicGuildLevel2Cost13102 jp z,.MagicGuildLevelFound13103 dec a13104 ld hl,MagicGuildLevel3Cost13105 jp z,.MagicGuildLevelFound13106 ld hl,MagicGuildLevel4Cost13107 .MagicGuildLevelFound:13119 ld (CheckRequirementsWhichBuilding?),hl13120 jp .CheckRequirementsBuildingMet13122 .Tavern:13123 ld de,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)13124 bit 0,(iy+CastleTavern)13125 jp nz,.Green13126 bit 0,(iy+AlreadyBuiltThisTurn?)13127 jp nz,.Red13128 ld hl,TavernCost13129 ld (CheckRequirementsWhichBuilding?),hl13130 jp .CheckRequirementsBuildingMet13131 13132 .MarketPlace:13133 ld de,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)13134 bit 0,(iy+CastleMarket)13135 jp nz,.Green13136 bit 0,(iy+AlreadyBuiltThisTurn?)13137 jp nz,.Red13138 ld hl,MarketPlaceCost13139 ld (CheckRequirementsWhichBuilding?),hl13140 jp .CheckRequirementsBuildingMet13141 13142 .Castle:13143 ld de,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)13144 bit 0,(iy+AlreadyBuiltThisTurn?)13145 jp nz,.Red13147 ld a,(iy+CastleLevel)13148 cp 513149 jp nc,.Green13151 ld a,(iy+CastleLevel)13152 cp 113153 ld hl,CastleLevel2Cost13154 ld (CheckRequirementsWhichBuilding?),hl13155 jp z,.CheckRequirementsBuildingMetCastleLevel213157 cp 213158 ld hl,CastleLevel3Cost13159 ld (CheckRequirementsWhichBuilding?),hl13160 jp z,.CheckRequirementsBuildingMetCastleLevel313162 cp 313163 ld hl,CastleLevel4Cost13164 ld (CheckRequirementsWhichBuilding?),hl13165 jp z,.CheckRequirementsBuildingMet1316713168 ld hl,CastleLevel5Cost13169 ld (CheckRequirementsWhichBuilding?),hl1317013171 jp .CheckRequirementsBuildingMet13172 13173 .Blue:13174 ld hl,.BlueButton13175 ld bc,6 13176 ldir13177 ret13178 13179 .Red:13180 ld hl,.RedButton13181 ld bc,6 13182 ldir13183 ret13184 13185 .Green:13186 ld hl,.GreenButton13187 ld bc,6 13188 ldir13189 ret13191.BlueButton: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 12813192.GreenButton: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (038*128) + (000/2) - 12813193.RedButton: dw $4000 + (038*128) + (050/2) - 128 | dw $4000 + (038*128) + (100/2) - 128 | dw $4000 + (038*128) + (150/2) - 12813195.CheckRequirementsBuildingMetCastleLevel2:13196 ld a,(iy+CastleTavern) 13197 or a13198 jp z,.Red13199 jp .CheckRequirementsBuildingMet13201.CheckRequirementsBuildingMetCastleLevel3:13202 ld a,(iy+CastleMarket) 13203 or a13204 jp z,.Red13205 ld a,(iy+CastleMageGuildLevel) 13206 or a13207 jp z,.Red13208 jp .CheckRequirementsBuildingMet13210.CheckRequirementsBuildingMetBarracksTower:13211 ld a,(iy+CastleBarracksLevel) 13212 cp 513213 jp nz,.Red13214 jp .CheckRequirementsBuildingMet13216.CheckRequirementsBuildingMetCityWalls:13217 ld a,(iy+CastleLevel) 13218 cp 513219 jp nz,.Red13220 jp .CheckRequirementsBuildingMet13222.CheckRequirementsBuildingMet:13223 13224 call SetResourcesCurrentPlayerinIX13225 ld l,(ix+0)13226 ld h,(ix+1) 13227 ld ix,(CheckRequirementsWhichBuilding?)13228 ld c,(ix+0)13229 ld b,(ix+1) 13230 xor a13231 sbc hl,bc13232 jp c,.Red 13234 13235 call SetResourcesCurrentPlayerinIX13236 ld l,(ix+2)13237 ld h,(ix+3) 13238 ld ix,(CheckRequirementsWhichBuilding?)13239 ld c,(ix+2)13240 ld b,(ix+3) 13241 xor a13242 sbc hl,bc13243 jp c,.Red 13245 13246 call SetResourcesCurrentPlayerinIX13247 ld l,(ix+4)13248 ld h,(ix+5) 13249 ld ix,(CheckRequirementsWhichBuilding?)13250 ld c,(ix+4)13251 ld b,(ix+5) 13252 xor a13253 sbc hl,bc13254 jp c,.Red 13256 13257 call SetResourcesCurrentPlayerinIX13258 ld l,(ix+6)13259 ld h,(ix+7) 13260 ld ix,(CheckRequirementsWhichBuilding?)13261 ld c,(ix+6)13262 ld b,(ix+7) 13263 xor a13264 sbc hl,bc13265 jp c,.Red 13267 13268 call SetResourcesCurrentPlayerinIX13269 ld l,(ix+8)13270 ld h,(ix+9) 13271 ld ix,(CheckRequirementsWhichBuilding?)13272 ld c,(ix+8)13273 ld b,(ix+9) 13274 xor a13275 sbc hl,bc13276 jp c,.Red 13277 jp .Blue 13279SetSingleBuildButtonColor:13280 push iy13282 ld a,(WhichBuildingWasClicked?)13284 cp 1 13285 ld iy,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)13286 jr z,.BuildingFound13287 cp 2 13288 ld iy,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)13289 jr z,.BuildingFound13290 cp 3 13291 ld iy,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)13292 jr z,.BuildingFound13293 cp 4 13294 ld iy,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)13295 jr z,.BuildingFound13296 cp 5 13297 ld iy,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)13298 jr z,.BuildingFound13299 cp 6 13300 ld iy,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)13301 jr z,.BuildingFound13302 cp 7 13303 ld iy,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)13304 jr z,.BuildingFound13305 cp 8 13306 ld iy,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)13307 jr z,.BuildingFound13308 cp 9 13309 ld iy,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)13310 jr z,.BuildingFound13313 .BuildingFound:13314 ld e,(iy)13315 ld d,(iy+1) 13317 pop iy13319 ld hl,$4000 + (000*128) + (000/2) - 128 13320 xor a13321 sbc hl,de13322 jr z,.blue13323 13324 ld hl,$4000 + (000*128) + (150/2) - 128 13325 xor a13326 sbc hl,de13327 jr z,.green13329 ld hl,$4000 + (038*128) + (050/2) - 128 13330 xor a13331 sbc hl,de13332 jr z,.red13334 13335 .red:13336 ld hl,.putred13337 ld de,SingleBuildButtonTable13338 ld bc,713339 ldir13340 ret13341 13342 .green:13343 ld hl,.putgreen13344 ld de,SingleBuildButtonTable13345 ld bc,713346 ldir13347 ret13348 13349 .blue:13350 ld hl,.putblue13351 ld de,SingleBuildButtonTable13352 ld bc,713353 ldir13354 ret13356.putred: db %1100 0011 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 12813357.putgreen: db %1100 0011 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 12813358.putblue: db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 12813397CheckButtonMouseInteractionBuildButtons:13398 ld b,913399 ld de,BuildButtonTableLenghtPerButton13401 .loop:13402 call .check13403 add ix,de13404 djnz .loop13405 ret13406 13407 .check:13408 bit 7,(ix+BuildButtonStatus) 13409 ret z 13410 13411 ld a,(spat+0) 13412 cp (ix+BuildButtonYtop)13413 jr c,.NotOverButton13414 cp (ix+BuildButtonYbottom)13415 jr nc,.NotOverButton13416 ld a,(spat+1) 13418 add a,0613420 cp (ix+BuildButtonXleft)13421 jr c,.NotOverButton13422 cp (ix+BuildButtonXright)13423 jr nc,.NotOverButton13424 1342613432 ld a,(Controls)13433 bit 4,a 13434 jr nz,.MouseOverButtonAndSpacePressed13435 bit 4,(ix+BuildButtonStatus) 13436 jr nz,.MenuOptionSelected 13437 .MouseHoverOverButton:13438 13439 bit 5,(ix+BuildButtonStatus) 13440 ld (ix+BuildButtonStatus),%1010 001113441 ret nz13443 push iy13444 push bc13445 ld bc,SFX_MouseOver13446 call RePlayerSFX_PlayCh113447 pop bc13448 pop iy13449 ret13451 .MouseOverButtonAndSpacePressed:13452 bit 4,(ix+BuildButtonStatus) 13453 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit13454 ld a,(NewPrContr)13455 bit 4,a 13456 jr z,.MouseHoverOverButton13458 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:13459 ld (ix+BuildButtonStatus),%1001 001113460 push iy13461 push bc13462 ld bc,SFX_MouseClick13463 call RePlayerSFX_PlayCh113464 pop bc13465 pop iy13466 ret13467 13468 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:13469 ld (ix+BuildButtonStatus),%1001 001113470 ret13472 .NotOverButton:13473 bit 4,(ix+BuildButtonStatus) 13474 jr nz,.buttonIsStillLit13475 bit 5,(ix+BuildButtonStatus) 13476 ret z13477 .buttonIsStillLit:13478 ld (ix+BuildButtonStatus),%1100 001113479 ret13481 .MenuOptionSelected:13482 pop af 13483 ld (ix+BuildButtonStatus),%1010 001113485 ld a,313486 ld (SetTextBuilding),a13488 ld a,b13489 cp 1 13490 jp z,.CityWalls13491 cp 2 13492 jp z,.BarracksTower13493 cp 3 13494 jp z,.Barracks13495 cp 4 13496 jp z,.Mine13497 cp 5 13498 jp z,.Sawmill13499 cp 6 13500 jp z,.MagicGuild13501 cp 7 13502 jp z,.Tavern13503 cp 8 13504 jp z,.MarketPlace13505 cp 9 13506 jp z,.Castle13508 .MarketPlace:13509 ld a,(iy+CastleMarket)13510 or a13511 ld de,MarketPlaceCost13512 ld hl,TextMarketPlace13513 jp z,.SetWhichTextToPut13514 ld hl,TextMarketPlaceFinished13515 jp .SetWhichTextToPut13517 .Tavern:13518 ld a,(iy+CastleTavern)13519 or a13520 ld de,TavernCost13521 ld hl,TextTavern13522 jp z,.SetWhichTextToPut13523 ld hl,TextTavernFinished13524 jp .SetWhichTextToPut13526 .BarracksTower:13527 ld a,(iy+CastleBarracksLevel)13528 cp 613529 ld de,BarracksTowerCost13530 ld hl,TextBarracksTower13531 jp nz,.SetWhichTextToPut13532 ld hl,TextBarracksTowerFinished13533 jp .SetWhichTextToPut13535 .CityWalls:13536 ld a,(iy+CastleLevel)13537 cp 613538 ld de,CityWallsCost13539 ld hl,TextCityWalls13540 jp nz,.SetWhichTextToPut13541 ld hl,TextCityWallsFinished13542 jp .SetWhichTextToPut13543 13544 .Barracks:13545 ld a,(iy+CastleBarracksLevel)13546 cp 013547 ld de,BarracksLevel1Cost13548 ld hl,TextBarracksLevel113549 jp z,.SetWhichTextToPut13550 cp 113551 ld de,BarracksLevel2Cost13552 ld hl,TextBarracksLevel213553 jp z,.SetWhichTextToPut13554 cp 213555 ld de,BarracksLevel3Cost13556 ld hl,TextBarracksLevel313557 jp z,.SetWhichTextToPut13558 cp 313559 ld de,BarracksLevel4Cost13560 ld hl,TextBarracksLevel413561 jp z,.SetWhichTextToPut13562 cp 413563 ld de,BarracksLevel5Cost13564 ld hl,TextBarracksLevel513565 jp z,.SetWhichTextToPut13566 ld hl,TextBarracksLevel5Finished13567 jp .SetWhichTextToPut13569 .Mine:13570 ld a,(iy+CastleMineLevel)13571 cp 013572 ld de,MineLevel1Cost13573 ld hl,TextMineLevel113574 jp z,.SetWhichTextToPut13575 cp 113576 ld de,MineLevel2Cost13577 ld hl,TextMineLevel213578 jp z,.SetWhichTextToPut13579 cp 213580 ld de,MineLevel3Cost13581 ld hl,TextMineLevel313582 jp z,.SetWhichTextToPut13583 ld hl,TextMineLevel3Finished13584 jp .SetWhichTextToPut13586 .Sawmill:13587 ld a,(iy+CastleSawmillLevel)13588 cp 013589 ld de,SawmillLevel1Cost 13590 ld hl,TextSawmillLevel113591 jp z,.SetWhichTextToPut13592 cp 113593 ld de,SawmillLevel2Cost 13594 ld hl,TextSawmillLevel213595 jp z,.SetWhichTextToPut13596 cp 213597 ld de,SawmillLevel3Cost 13598 ld hl,TextSawmillLevel313599 jp z,.SetWhichTextToPut13600 ld hl,TextSawmillLevel3Finished13601 jp .SetWhichTextToPut13603 .MagicGuild:13604 ld a,(iy+CastleMageGuildLevel)13605 cp 013606 ld de,MagicGuildLevel1Cost13607 ld hl,TextMagicGuildLevel113608 jp z,.SetWhichTextToPut13609 cp 113610 ld de,MagicGuildLevel2Cost13611 ld hl,TextMagicGuildLevel213612 jp z,.SetWhichTextToPut13613 cp 213614 ld de,MagicGuildLevel3Cost13615 ld hl,TextMagicGuildLevel313616 jp z,.SetWhichTextToPut13617 cp 313618 ld de,MagicGuildLevel4Cost13619 ld hl,TextMagicGuildLevel413620 jp z,.SetWhichTextToPut13621 ld hl,TextMagicGuildLevel4Finished13622 jp .SetWhichTextToPut13624 .Castle:13625 ld a,(iy+CastleLevel)13626 cp 113627 ld de,CastleLevel2Cost13628 ld hl,TextCastleLevel213629 jp z,.SetWhichTextToPut13630 cp 213631 ld de,CastleLevel3Cost13632 ld hl,TextCastleLevel313633 jp z,.SetWhichTextToPut13634 cp 313635 ld de,CastleLevel4Cost13636 ld hl,TextCastleLevel413637 jp z,.SetWhichTextToPut13638 cp 413639 ld de,CastleLevel5Cost13640 ld hl,TextCastleLevel513641 jp z,.SetWhichTextToPut13642 ld hl,TextCastleLevel5Finished13643 jp .SetWhichTextToPut13645 .SetWhichTextToPut:13646 ld (CheckRequirementsWhichBuilding?),de13647 ld (PutWhichBuildText),hl13648 ld a,b13649 ld (WhichBuildingWasClicked?),a13650 ret13652TextCastleLevel2: 13653 db "   Town Hall",25413654 db " ",25413655 db "Generates 1000",25413656 db "gold per day",25413657 db " ",25413658 db "Cost:",25413659 db "2500 Gold",25413660 db " ",25413661 db "Requirements:",25413662 db "Tavern",2551366413667CastleLevel2Cost: 13668.Gold: dw 250013669.Wood: dw 00013670.Ore: dw 00013671.Gems: dw 00013672.Rubies: dw 00013676TextCastleLevel3: 13677 db "   City Hall",25413678 db " ",25413679 db "Generates 2000",25413680 db "gold per day",25413681 db " ",25413682 db "Cost:",25413683 db "5000 Gold",25413684 db " ",25413685 db "Requirements:",25413686 db "Magic Guild",25413687 db "Level 1",25413688 db "Market Place",25513690CastleLevel3Cost: 13691.Gold: dw 500013692.Wood: dw 00013693.Ore: dw 00013694.Gems: dw 00013695.Rubies: dw 00013697TextCastleLevel4: 13698 db "    Citadel",25413699 db " ",25413700 db "Generates 3000",25413701 db "gold per day",25413702 db " ",25413703 db "increases the",25413704 db "production of",25413705 db "all creatures",25413706 db "by 50%",25413707 db " ",25413708 db "Cost:",25413709 db "7500 Gold",25413710 db "+10 wood",25413711 db "+10 ore",25513713CastleLevel4Cost: 13714.Gold: dw 750013715.Wood: dw 01013716.Ore: dw 01013717.Gems: dw 00013718.Rubies: dw 00013720TextCastleLevel5: 13721 db "    Capitol",25413722 db " ",25413723 db "Generates 4000",25413724 db "gold per day",25413725 db " ",25413726 db "increases the",25413727 db "production of",25413728 db "all creatures",25413729 db "by 100%",25413730 db " ",25413731 db "Cost:",25413732 db "10000 Gold",25413733 db "+20 wood",25413734 db "+20 ore",25513735TextCastleLevel5Finished: 13736 db "    Capitol",25413737 db " ",25413738 db "Generates 4000",25413739 db "gold per day",25413740 db " ",25413741 db "increases the",25413742 db "production of",25413743 db "all creatures",25413744 db "by 100%",25513746CastleLevel5Cost: 13747.Gold: dw 1000013748.Wood: dw 02013749.Ore: dw 02013750.Gems: dw 00013751.Rubies: dw 00013753TextMarketPlace: 13754 db "  Market Place",25413755 db " ",25413756 db "Facilitates the",25413757 db "commerce of",25413758 db "crucial resources",25413759 db " ",25413760 db "Cost:",25413761 db "500 Gold",25413762 db "+5 Wood",25513763TextMarketPlaceFinished: 13764 db "  Market Place",25413765 db " ",25413766 db "Facilitates the",25413767 db "commerce of",25413768 db "crucial resources",25513770MarketPlaceCost:13771.Gold: dw 50013772.Wood: dw 0513773.Ore: dw 0013774.Gems: dw 0013775.Rubies: dw 0013777TextTavern: 13778 db "    Tavern",25413779 db " ",25413780 db "Grants the ",25413781 db "capability to",25413782 db "enlist visiting",25413783 db "heroes into",25413784 db "service",25413785 db " ",25413786 db "Cost:",25413787 db "500 Gold",25413788 db "+5 Wood",25513789TextTavernFinished: 13790 db "    Tavern",25413791 db " ",25413792 db "Grants the ",25413793 db "capability to",25413794 db "enlist visiting",25413795 db "heroes into",25413796 db "service",25513797 13798TavernCost:13799.Gold: dw 50013800.Wood: dw 0513801.Ore: dw 0013802.Gems: dw 0013803.Rubies: dw 0013805TextMagicGuildLevel1: 13806 db " Magic Guild 1",25413807 db " ",25413808 db "Adds two level 1",25413809 db "spells to the",25413810 db "magic guild",25413811 db " ",25413812 db "An overnight stay",25413813 db "at the Castle",25413814 db "completely refills",25413815 db "heroes' magic",25413816 db "points.",25413817 db " ",25413818 db "Cost:",25413819 db "2000 Gold",25413820 db "+5 Wood",25413821 db "+5 Ore",25513823MagicGuildLevel1Cost:13824.Gold: dw 200013825.Wood: dw 0513826.Ore: dw 0513827.Gems: dw 0013828.Rubies: dw 0013830TextMagicGuildLevel2: 13831 db " Magic Guild 2",25413832 db " ",25413833 db "Adds two level 2",25413834 db "spells to the",25413835 db "magic guild",25413836 db " ",25413837 db "Visiting heroes",25413838 db "can learn these",25413839 db "spells",25413840 db " ",25413841 db "Cost:",25413842 db "1000 Gold",25413843 db "+5 Wood",25413844 db "+5 Ore",25413845 db "+5 Gems",25413846 db "+5 Rubies",25513848MagicGuildLevel2Cost:13849.Gold: dw 100013850.Wood: dw 0513851.Ore: dw 0513852.Gems: dw 0513853.Rubies: dw 0513855TextMagicGuildLevel3: 13856 db " Magic Guild 3",25413857 db " ",25413858 db "Adds two level 3",25413859 db "spells to the",25413860 db "magic guild",25413861 db " ",25413862 db "Visiting heroes",25413863 db "can learn these",25413864 db "spells",25413865 db " ",25413866 db "Cost:",25413867 db "1000 Gold",25413868 db "+5 Wood",25413869 db "+5 Ore",25413870 db "+6 Gems",25413871 db "+6 Rubies",25513873MagicGuildLevel3Cost:13874.Gold: dw 100013875.Wood: dw 0513876.Ore: dw 0513877.Gems: dw 0613878.Rubies: dw 0613880TextMagicGuildLevel4: 13881 db " Magic Guild 4",25413882 db " ",25413883 db "Adds two level 4",25413884 db "spells to the",25413885 db "magic guild",25413886 db " ",25413887 db "Visiting heroes",25413888 db "can learn these",25413889 db "spells",25413890 db " ",25413891 db "Cost:",25413892 db "1000 Gold",25413893 db "+5 Wood",25413894 db "+5 Ore",25413895 db "+8 Gems",25413896 db "+8 Rubies",25513897TextMagicGuildLevel4Finished: 13898 db " Magic Guild 4",25413899 db " ",25413900 db "Adds two level 4",25413901 db "spells to the",25413902 db "magic guild",25413903 db " ",25413904 db "Visiting heroes",25413905 db "can learn these",25413906 db "spells if their",25413907 db "skill requirements",25413908 db "are met",25513909MagicGuildLevel4Cost:13910.Gold: dw 100013911.Wood: dw 0513912.Ore: dw 0513913.Gems: dw 0813914.Rubies: dw 0813916TextSawmillLevel1: 13917 db "  Sawmill 1",25413918 db " ",25413919 db "Produces:",25413920 db "+1 wood",25413921 db "per day",25413922 db " ",25413923 db "Cost:",25413924 db "1000 Gold",25513926SawmillLevel1Cost:13927.Gold: dw 100013928.Wood: dw 0013929.Ore: dw 0013930.Gems: dw 0013931.Rubies: dw 0013933TextSawmillLevel2: 13934 db "  Sawmill 2",25413935 db " ",25413936 db "Produces:",25413937 db "+2 wood",25413938 db "per day",25413939 db " ",25413940 db "Cost:",25413941 db "1500 Gold",25513943SawmillLevel2Cost:13944.Gold: dw 150013945.Wood: dw 0013946.Ore: dw 0013947.Gems: dw 0013948.Rubies: dw 0013950TextSawmillLevel3: 13951 db "  Sawmill 3",25413952 db " ",25413953 db "Produces:",25413954 db "+3 wood",25413955 db "per day",25413956 db " ",25413957 db "Cost:",25413958 db "2000 Gold",25513959TextSawmillLevel3Finished: 13960 db "  Sawmill 3",25413961 db " ",25413962 db "Produces:",25413963 db "+3 wood",25413964 db "per day",25513965SawmillLevel3Cost:13966.Gold: dw 200013967.Wood: dw 0013968.Ore: dw 0013969.Gems: dw 0013970.Rubies: dw 0013972TextMineLevel1: 13973 db "   Mine 1",25413974 db " ",25413975 db "Produces:",25413976 db "+1 ore",25413977 db "per day",25413978 db " ",25413979 db "Cost:",25413980 db "1000 Gold",25513982MineLevel1Cost:13983.Gold: dw 100013984.Wood: dw 0013985.Ore: dw 0013986.Gems: dw 0013987.Rubies: dw 0013989TextMineLevel2: 13990 db "   Mine 2",25413991 db " ",25413992 db "Produces:",25413993 db "+2 ore",25413994 db "+1 gem",25413995 db "per day",25413996 db " ",25413997 db "Cost:",25413998 db "2000 Gold",25514000MineLevel2Cost:14001.Gold: dw 200014002.Wood: dw 0014003.Ore: dw 0014004.Gems: dw 0014005.Rubies: dw 0014007TextMineLevel3: 14008 db "   Mine 3",25414009 db " ",25414010 db "Produces:",25414011 db "+3 ore",25414012 db "+1 gem",25414013 db "+1 ruby",25414014 db "per day",25414015 db " ",25414016 db "Cost:",25414017 db "2500 Gold",25514018TextMineLevel3Finished: 14019 db "   Mine 3",25414020 db " ",25414021 db "Produces:",25414022 db "+3 ore",25414023 db "+1 gem",25414024 db "+1 ruby",25414025 db "per day",25514026 14027MineLevel3Cost:14028.Gold: dw 250014029.Wood: dw 0014030.Ore: dw 0014031.Gems: dw 0014032.Rubies: dw 0014034TextBarracksLevel1: 14035 db "  Barracks 1",25414036 db " ",25414037 db "Manufactures",25414038 db "level 1 creatures",25414039 db "each bearing",25414040 db "their own unique",25414041 db "attributes and",25414042 db "powers",25414043 db " ",25414044 db "Replenishes every",25414045 db "week",25414046 db " ",25414047 db "Cost:",25414048 db "500 Gold",25414049 db "+5 Wood",25514051BarracksLevel1Cost:14052.Gold: dw 50014053.Wood: dw 0514054.Ore: dw 0014055.Gems: dw 0014056.Rubies: dw 0014058TextBarracksLevel2: 14059 db "  Barracks 2",25414060 db " ",25414061 db "Manufactures",25414062 db "level 2 creatures",25414063 db "each bearing",25414064 db "their own unique",25414065 db "attributes and",25414066 db "powers",25414067 db " ",25414068 db "Replenishes every",25414069 db "week",25414070 db " ",25414071 db "Cost:",25414072 db "1000 Gold",25414073 db "+5 Wood",25414074 db "+5 Ore",25514076BarracksLevel2Cost:14077.Gold: dw 100014078.Wood: dw 0514079.Ore: dw 0514080.Gems: dw 0014081.Rubies: dw 0014083TextBarracksLevel3: 14084 db "  Barracks 3",25414085 db " ",25414086 db "Manufactures",25414087 db "level 3 creatures",25414088 db "each bearing",25414089 db "their own unique",25414090 db "attributes and",25414091 db "powers",25414092 db " ",25414093 db "Replenishes every",25414094 db "week",25414095 db " ",25414096 db "Cost:",25414097 db "1500 Gold",25414098 db "+5 Ore",25514100BarracksLevel3Cost:14101.Gold: dw 150014102.Wood: dw 0014103.Ore: dw 0514104.Gems: dw 0014105.Rubies: dw 0014107TextBarracksLevel4: 14108 db "  Barracks 4",25414109 db " ",25414110 db "Manufactures",25414111 db "level 4 creatures",25414112 db " ",25414113 db "Replenishes every",25414114 db "week",25414115 db " ",25414116 db "Cost:",25414117 db "2000 Gold",25414118 db "+3 Wood",25414119 db "+3 Ore",25414120 db "+1 Gems",25414121 db "+1 Rubies",25514123BarracksLevel4Cost:14124.Gold: dw 200014125.Wood: dw 0314126.Ore: dw 0314127.Gems: dw 0114128.Rubies: dw 0114130TextBarracksLevel5: 14131 db "  Barracks 5",25414132 db " ",25414133 db "Manufactures",25414134 db "level 5 creatures",25414135 db "each bearing",25414136 db "their own unique",25414137 db "attributes and",25414138 db "powers",25414139 db " ",25414140 db "Replenishes every",25414141 db "week",25414142 db " ",25414143 db "Cost:",25414144 db "5000 Gold",25414145 db "+15 Wood",25514146TextBarracksLevel5Finished:14147 db "  Barracks 5",25414148 db " ",25414149 db "Manufactures",25414150 db "level 5 creatures",25414151 db "each bearing",25414152 db "their own unique",25414153 db "attributes and",25414154 db "powers",25414155 db " ",25414156 db "Replenishes every",25414157 db "week",25514160BarracksLevel5Cost:14161.Gold: dw 500014162.Wood: dw 1514163.Ore: dw 0014164.Gems: dw 0014165.Rubies: dw 0014167TextBarracksTower: 14168 db " Barracks Tower",25414169 db " ",25414170 db "Manufactures",25414171 db "level 6 creatures",25414172 db " ",25414173 db "Replenishes every",25414174 db "week",25414175 db " ",25414176 db "Cost:",25414177 db "20000 Gold",25414178 db "+10 Gems",25414179 db "+10 Rubies",25414180 db " ",25414181 db "Requirements:",25414182 db "Barracks 5",25514183TextBarracksTowerFinished: 14184 db " Barracks Tower",25414185 db " ",25414186 db "Manufactures",25414187 db "level 6 creatures",25414188 db "each bearing",25414189 db "their own unique",25414190 db "attributes and",25414191 db "powers",25414192 db " ",25414193 db "Replenishes every",25414194 db "week",25514195 14196BarracksTowerCost:14197.Gold: dw 2000014198.Wood: dw 0014199.Ore: dw 0014200.Gems: dw 1014201.Rubies: dw 1014203TextCityWalls: 14204 db "   City Walls",25414205 db " ",25414206 14207 db "Strengthens city",25414208 db "defenses with",25414209 db "fortified walls,",25414210 db "granting heroes in",25414211 db "the defending hero",25414212 db "slot + 5 defense",25414213 14214 db " ",25414215 db "Cost:",25414216 db "2000 Gold",25414217 db "+5 Wood",25414218 db "+5 Ore",25414219 db " ",25414220 db "Requirements:",25414221 db "Capitol",25514222TextCityWallsFinished: 14223 db "   City Walls",25414224 db " ",25414225 db "Enhances your",25414226 db "city's security",25414227 db "through fortified",25414228 db "walls that stand",25414229 db "resolute against",25414230 db "relentless sieges",25414231 db " ",25414232 db "The defending hero",25414233 db "slot grants heroes",25414234 db "+5 defense",25514239CityWallsCost:14240.Gold: dw 200014241.Wood: dw 514242.Ore: dw 514243.Gems: dw 0014244.Rubies: dw 0014257SetBuildButtons: 14258 ld b,914259 .loop:14260 push bc14261 call .Setbutton14262 pop bc14263 ld de,BuildButtonTableLenghtPerButton14264 add ix,de14266 djnz .loop14267 ret14269 .Setbutton:14270 bit 7,(ix+BuildButtonStatus)14271 ret z 14273 bit 0,(ix+BuildButtonStatus) 14274 res 0,(ix+BuildButtonStatus) 14275 jr nz,.goCopyButton14276 bit 1,(ix+BuildButtonStatus)14277 res 1,(ix+BuildButtonStatus)14278 ret z 14279 .goCopyButton:14281 ld l,(ix+BuildButton_SYSX_Ontouched)14282 ld h,(ix+BuildButton_SYSX_Ontouched+1)14283 bit 6,(ix+BuildButtonStatus)14284 jr nz,.go 14286 ld l,(ix+BuildButton_SYSX_MovedOver)14287 ld h,(ix+BuildButton_SYSX_MovedOver+1)14288 bit 5,(ix+BuildButtonStatus)14289 jr nz,.go 14291 ld l,(ix+BuildButton_SYSX_Clicked)14292 ld h,(ix+BuildButton_SYSX_Clicked+1)14293 .go:14295 14296 ld de,$8000 + (212*128) + (000/2) - 128 14297 ld bc,$0000 + (038*256) + (050/2) 14298 ld a,ButtonsBuildBlock 14299 call CopyRamToVramCorrectedWithoutActivePageSetting 14301 ld a,(activepage)14302 xor 114303 ld (CopyBuildButton+dPage),a14304 ld (CopyBuildButtonImage+dPage),a14306 14307 ld a,(ix+BuildButtonYtop)14308 ld (CopyBuildButton+dy),a14309 ld (CopyBuildButtonImage+dy),a14310 ld a,(ix+BuildButtonXleft)14311 ld (CopyBuildButton+dx),a14312 ld (CopyBuildButtonImage+dx),a14314 ld hl,CopyBuildButton14315 call docopy14317 14318 ld l,(ix+BuildButtonImage_SYSX)14319 ld h,(ix+BuildButtonImage_SYSX+1)14320 ld de,$8000 + (212*128) + (050/2) - 128 14321 ld bc,$0000 + (033*256) + (050/2) 14322 ld a,ButtonsBuildBlock 14323 call CopyRamToVramCorrectedWithoutActivePageSetting 14324 14325 ld hl,CopyBuildButtonImage14326 call docopy1432714329 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14330 call docopy14331 ret14351TextGoldPerDay: db "Gold/day",25514353SetNameCastleAndDailyIncome:14354 call SetCastleOverViewFontPage0Y212 14355 ld b,20014356 ld c,214358 push iy14359 pop hl14360 ld de,CastleName14361 add hl,de14362 call SetText14364 ld c,009 14365 ld b,196+004 14367 ld a,(iy+CastleLevel)14368 cp 1 14369 ld hl,50014370 jr z,.CastleLevelFound14372 ld b,196 14374 cp 2 14375 ld hl,100014376 jr z,.CastleLevelFound14378 cp 3 14379 ld hl,200014380 jr z,.CastleLevelFound14382 cp 4 14383 ld hl,300014384 jr z,.CastleLevelFound14386 cp 5 14387 ld hl,400014388 jr z,.CastleLevelFound14389 14390 .CastleLevelFound:14392 call SetNumber16BitCastle 14394 ld b,21914395 ld c,00914396 ld hl,TextGoldPerDay14397 call SetText14399 14400 ld b,23014401 ld c,01614402 ld hl,.TextDay14403 call SetText14405 14406 ld bc,(Date)14407 ld de,7 14408 call DivideBCbyDE 14409 inc hl 14410 ld b,248 14411 ld c,016 14412 jp SetNumber16BitCastle14414 .TextDay: db "Day:",25514416HandleAllHeroesLearnMagicGuildSpells:14417 push iy14418 14419 ld ix,pl1hero1y14420 ld b,amountofheroesperplayer14421 call .loop14422 ld ix,pl2hero1y14423 ld b,amountofheroesperplayer14424 call .loop14425 ld ix,pl3hero1y14426 ld b,amountofheroesperplayer14427 call .loop14428 ld ix,pl4hero1y14429 ld b,amountofheroesperplayer14430 call .loop14432 pop iy14433 ret14435 .loop:14436 push bc14437 call .CheckHero14438 pop bc14439 ld de,lenghtherotable14440 add ix,de14441 djnz .loop14442 ret14444 .CheckHero: 14445 ld a,(ix+HeroStatus) 14446 cp 214447 jr z,.CheckWhichCastle14448 cp 25414449 ret nz14451 .CheckWhichCastle: 14452 ld iy,Castle114453 call .FindCastle14454 ld iy,Castle214455 call .FindCastle14456 ld iy,Castle314457 call .FindCastle14458 ld iy,Castle414459 call .FindCastle14460 ld iy,Castle514461 call .FindCastle14462 ret14464 .FindCastle:14465 ld a,(ix+HeroY) 14466 inc a 14467 cp (iy+CastleY)14468 ret nz14470 ld a,(ix+HeroX) 14471 dec a 14472 dec a 14473 cp (iy+CastleX)14474 ret nz14475 14476 pop af 14478 ld b,(iy+CastleMageGuildLevel) 14479 14480 push ix14483 14490 call SetCastleSpellsInIX 14491 pop iy 14493 ld c,(ix+0) 14494 call .CheckLevel234SpellsPossibleToLearn14495 ld a,c14496 or (iy+HeroEarthSpells)14497 ld (iy+HeroEarthSpells),a14498 ld c,(ix+1) 14499 call .CheckLevel234SpellsPossibleToLearn14500 ld a,c14501 or (iy+HeroFireSpells)14502 ld (iy+HeroFireSpells),a14503 ld c,(ix+2) 14504 call .CheckLevel234SpellsPossibleToLearn14505 ld a,c14506 or (iy+HeroAirSpells)14507 ld (iy+HeroAirSpells),a14508 ld c,(ix+3) 14509 call .CheckLevel234SpellsPossibleToLearn14510 ld a,c14511 or (iy+HeroWaterSpells)14512 ld (iy+HeroWaterSpells),a14513 14514 push iy14515 pop ix 14516 ret14518.CheckLevel234SpellsPossibleToLearn: 14519 call .CheckMageGuildLevel14521 14522 ld a,30 14523 cp (iy+HeroSkills+0)14524 ret z14525 cp (iy+HeroSkills+1)14526 ret z14527 cp (iy+HeroSkills+2)14528 ret z14529 cp (iy+HeroSkills+3)14530 ret z14531 cp (iy+HeroSkills+4)14532 ret z14533 cp (iy+HeroSkills+5)14534 ret z14536 res 3,c 14538 ld a,29 14539 cp (iy+HeroSkills+0)14540 ret z14541 cp (iy+HeroSkills+1)14542 ret z14543 cp (iy+HeroSkills+2)14544 ret z14545 cp (iy+HeroSkills+3)14546 ret z14547 cp (iy+HeroSkills+4)14548 ret z14549 cp (iy+HeroSkills+5)14550 ret z14552 res 2,c 14554 ld a,28 14555 cp (iy+HeroSkills+0)14556 ret z14557 cp (iy+HeroSkills+1)14558 ret z14559 cp (iy+HeroSkills+2)14560 ret z14561 cp (iy+HeroSkills+3)14562 ret z14563 cp (iy+HeroSkills+4)14564 ret z14565 cp (iy+HeroSkills+5)14566 ret z14568 res 1,c 14569 ret14571.CheckMageGuildLevel:14572 ld a,b 14573 cp 414574 ret z14575 res 3,c 14577 cp 314578 ret z14579 res 2,c 14581 cp 214582 ret z14583 res 1,c 14584 14585 cp 114586 ret z14587 res 0,c 14588 ret14590 14597CastleOverviewCode: 14598 call SetInterruptHandler 14600 ld a,314601 ld (SetResources?),a1460314606 14607 ld c,254 14608 call SetVisitingOrDefendingHeroInIX 14609 push ix14610 ld c,002 14611 call SetVisitingOrDefendingHeroInIX 14612 push ix14613 14615 call .goEnterCastle14617 14618 ld c,002 14619 call SetVisitingOrDefendingHeroInIX 14620 push ix14621 pop hl14622 pop de14623 call CompareHLwithDE 14624 jr z,.Same14626 pop af 14627 jp ActivateFirstActiveHeroForCurrentPlayer 14628 14629 .Same:14630 ld c,254 14631 call SetVisitingOrDefendingHeroInIX 14632 push ix14633 pop hl14634 pop de14635 call CompareHLwithDE 14636 ret z14637 jp ActivateFirstActiveHeroForCurrentPlayer 14638 14639 .goEnterCastle:14641 call SetScreenOff14643 ld hl,CastleOverviewPalette14644 call SetPalette14646 xor a14647 ld (activepage),a 14649 ld a,(ShowNewlyBoughtBuildingFadingIn?)14650 or a14651 jr nz,.EndCheckShowNewlyBoughtBuilding14652 call EnableNewBuilding14653 xor a14654 ld (SetNewBuilding?),a14655 .EndCheckShowNewlyBoughtBuilding:14657 call SetCastleOverviewGraphics 14658 call SwapAndSetPage 14659 call SetIndividualBuildings 14660 call SwapAndSetPage 14661 call SetNameCastleAndDailyIncome14663 ld hl,CopyPage1To014664 call docopy14666 call FadeInNewlyBoughtBuilding14668 ld a,17914669 call SetExitButtonHeight14670 call SetActiveCastleOverviewButtons14671 14672 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14673 call docopy14674 call HandleAllHeroesLearnMagicGuildSpells14676 ld a,(CurrentSongBeingPlayed)14677 cp SongSquareA14678 jr z,.engine14679 cp SongSquareB14680 jr z,.engine14682 ld a,r14683 rrca14684 ld b,SongSquareA14685 jr c,.SongSquareFound14686 ld b,SongSquareB14687 .SongSquareFound:14688 ld a,b14689 ld (ChangeSong?),a 14691 .engine:14692 call SwapAndSetPage 14693 call PopulateControls 14699 ld a,(Controls)14700 bit 5,a 14701 ret nz14703 ld ix,CastleOverviewButtonTable 14704 call CheckButtonMouseInteractionCastleMainScreen14706 ld ix,CastleOverviewButtonTable14707 call SetCastleButtons 14709 call WaitVblank14710 call SetScreenOn 14711 jp .engine14713WaitVblank:14714 ld a,(vblankintflag) 14715 ld hl,vblankintflag14716 .checkflag:14717 cp (hl)14718 jr z,.checkflag14719 ret14721CopyPage2To0:14722 db 0,0,0,214723 db 0,0,0,014724 db 0,1,212,014725 db 0,0,$d0 14726CopyPage0To2:14727 db 0,0,0,014728 db 0,0,0,214729 db 0,1,212,014730 db 0,0,$d0 14731 14732EnableNewBuilding:14733 ld a,(SetNewBuilding?) 14734 dec a14735 jr z,.barracks14736 dec a14737 jr z,.barracksUpgrade14738 dec a14739 jr z,.sawmill14740 dec a14741 jr z,.mine14742 dec a14743 jr z,.mageguild14744 dec a14745 jr z,.tavern14746 dec a14747 jr z,.market14748 dec a14749 jr z,.citywalls14750 ret14752 .citywalls:14753 ld (iy+CastleLevel),614754 ret14756 .market:14757 ld (iy+CastleMarket),114758 ret14760 .tavern:14761 ld (iy+CastleTavern),114762 ret14764 .mageguild:14765 ld (iy+CastleMageGuildLevel),114766 ret14768 .mine:14769 ld (iy+CastleMineLevel),114770 ret14772 .sawmill:14773 ld (iy+CastleSawmillLevel),114774 ret14776 .barracksUpgrade:14777 ld (iy+CastleBarracksLevel),614778 ret14780 .barracks:14781 ld (iy+CastleBarracksLevel),114782 ret14784SetVariablesNewBuilding:14785 ld a,(SetNewBuilding?) 14786 dec a14787 jr z,.barracks14788 dec a14789 jr z,.barracksUpgrade14790 dec a14791 jr z,.sawmill14792 dec a14793 jr z,.mine14794 dec a14795 jr z,.mageguild14796 dec a14797 jr z,.tavern14798 dec a14799 jr z,.market14800 dec a14801 jr z,.citywalls14802 ret14804 .citywalls:14805 ld b,CityWallsSX14806 ld c,CityWallsSY14807 ld l,CityWallsSX+CityWallsNX14808 ld h,CityWallsSY+CityWallsNY14809 ld e,1 14810 ret14812 .market:14813 ld b,MarketSX14814 ld c,MarketSY14815 ld l,MarketSX+MarketNX14816 ld h,MarketSY+MarketNY14817 ld e,1 14818 ret14820 .tavern:14821 ld b,TavernSX14822 ld c,TavernSY14823 ld l,TavernSX+TavernNX14824 ld h,TavernSY+TavernNY14825 ld e,0 14826 ret14828 .mageguild:14829 ld b,MageGuildSX14830 ld c,MageGuildSY14831 ld l,MageGuildSX+MageGuildNX14832 ld h,MageGuildSY+MageGuildNY14833 ld e,0 14834 ret14836 .mine:14837 ld b,mineSX14838 ld c,mineSY14839 ld l,mineSX+mineNX14840 ld h,mineSY+mineNY14841 ld e,0 14842 ret14844 .sawmill:14845 ld b,sawmillSX14846 ld c,sawmillSY14847 ld l,sawmillSX+sawmillNX14848 ld h,sawmillSY+sawmillNY14849 ld e,0 14850 ret14852 .barracksUpgrade:14853 ld b,barracksUpgradeSX14854 ld c,barracksUpgradeSY14855 ld l,barracksUpgradeSX+barracksUpgradeNX14856 ld h,barracksUpgradeSY+barracksUpgradeNY14857 ld e,1 14858 ret14860 .barracks:14861 ld b,BarracksSX14862 ld c,BarracksSY14863 ld l,BarracksSX+BarracksNX14864 ld h,BarracksSY+BarracksNY14865 ld e,1 14866 ret14868 BarracksSX: equ 176-214869 BarracksSY: equ 05714870 BarracksNX: equ 08014871 BarracksNY: equ 10114873 BarracksUpgradeSX: equ 20214874 BarracksUpgradeSY: equ 00614875 BarracksUpgradeNX: equ 048 + 514876 BarracksUpgradeNY: equ 08814878 SawMillSX: equ 03214879 SawMillSY: equ 10114880 SawMillNX: equ 06014881 SawMillNY: equ 03514883 MineSX: equ 05014884 MineSY: equ 12614885 MineNX: equ 12614886 MineNY: equ 05214888 MageGuildSX: equ 00014889 MageGuildSY: equ 01914890 MageGuildNX: equ 04814891 MageGuildNY: equ 16814893 TavernSX: equ 06014894 TavernSY: equ 09714895 TavernNX: equ 15814896 TavernNY: equ 11514898 MarketSX: equ 16614899 MarketSY: equ 10614900 MarketNX: equ 090 - 214901 MarketNY: equ 08814903 CityWallsSX: equ 00014904 CityWallsSY: equ 18514905 CityWallsNX: equ 25514906 CityWallsNY: equ 02714908OnlyPlaySfxNewBuilding:14909 push iy14910 push bc14911 ld bc,SFX_BuildingBeingBuilt14912 call RePlayerSFX_PlayCh114913 pop bc14914 pop iy14916 xor a14917 ld (SetNewBuilding?),a14918 ret14920FadeInNewlyBoughtBuilding:14921 ld a,(SetNewBuilding?)14922 or a14923 ret z14925 cp 25514926 jp z,OnlyPlaySfxNewBuilding14928 ld a,114929 ld (ReloadAllObjectsInVram?),a 14931 ld a,(VDP_0+8) 14932 or %0000001014933 ld (VDP_0+8),a14934 di14935 out ($99),a14936 ld a,8+12814937 ei14938 out ($99),a14940 ld hl,CopyPage0To214941 call docopy 14942 call SetScreenOn 14944 xor a14945 ld (activepage),a 14946 call SetCastleOverviewGraphics 14947 ld a,2*32+3114948 call SetPageSpecial.setpage 14950 ld a,114951 ld (activepage),a 14953 call EnableNewBuilding14954 call SetIndividualBuildings 14956 xor a14957 ld (activepage),a 14958 call SetNameCastleAndDailyIncome14960 14961 push iy14962 push bc14963 ld bc,SFX_BuildingBeingBuilt14964 call RePlayerSFX_PlayCh114965 pop bc14966 pop iy14968 call SetVariablesNewBuilding14969 ld d,.AmountOfBuildingSteps14970 .AmountOfBuildingSteps: equ 1314972 exx14973 ld c,$9b 14974 ld d,32 14975 ld e,17+128 14976 exx14978 ld a,b 14979 call GoBuildBuildingPart14980 call GoBuildBuildingPart14981 call GoBuildBuildingPart14982 call GoBuildBuildingPart14983 call GoBuildBuildingPart14984 call GoBuildBuildingPart14985 call GoBuildBuildingPart14986 call GoBuildBuildingPart14987 call GoBuildBuildingPart14988 call GoBuildBuildingPart14989 call GoBuildBuildingPart14990 call GoBuildBuildingPart14991 call GoBuildBuildingPart14993 ld hl,CopyPage2To014994 call docopy14995 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14996 call docopy14998 xor a14999 ld (SetNewBuilding?),a15001 ld a,(VDP_0+8) 15002 and %1111110115003 ld (VDP_0+8),a15004 di15005 out ($99),a15006 ld a,8+12815007 ei15008 out ($99),a15009 ret15011GoBuildBuildingPartBuildingThatTouchRightEdge:15012 .loop:15013 exx15014 ld hl,BuildingFadeIn 15015 ld a,d15016 di15017 out ($99),a15018 ld a,e15019 ei15020 out ($99),a15022 dw $a3ed,$a3ed,$a3ed,$a3ed15023 dw $a3ed,$a3ed,$a3ed,$a3ed15024 dw $a3ed,$a3ed,$a3ed,$a3ed15025 dw $a3ed,$a3ed,$a3ed15026 exx15027 15028 ld a,(BuildingFadeIn+sx)15029 add a,d 15030 jr nc,.go15031 add a,b 15032 ld (BuildingFadeIn+sx),a15033 ld (BuildingFadeIn+dx),a15035 ld a,(BuildingFadeIn+sy)15036 inc a15037 cp h 15038 ret nc15039 ld (BuildingFadeIn+sy),a15040 ld (BuildingFadeIn+dy),a15041 jp .loop15043 .go:15044 ld (BuildingFadeIn+sx),a15045 ld (BuildingFadeIn+dx),a15046 jp .loop15048GoBuildBuildingPart:15049 push af15051 ld (BuildingFadeIn+sx),a15052 ld (BuildingFadeIn+dx),a15053 ld a,c 15054 ld (BuildingFadeIn+sy),a15055 ld (BuildingFadeIn+dy),a 15056 bit 0,e15057 call nz,GoBuildBuildingPartBuildingThatTouchRightEdge.loop15058 bit 0,e15059 call z,.loop15061 pop af15062 inc a15063 ret15065 .loop:15066 exx15067 ld hl,BuildingFadeIn 15068 ld a,d15069 di15070 out ($99),a15071 ld a,e15072 ei15073 out ($99),a15075 dw $a3ed,$a3ed,$a3ed,$a3ed15076 dw $a3ed,$a3ed,$a3ed,$a3ed15077 dw $a3ed,$a3ed,$a3ed,$a3ed15078 dw $a3ed,$a3ed,$a3ed15079 exx15080 15081 ld a,(BuildingFadeIn+sx)15082 add a,d 15083 cp l 15084 jr c,.go15085 sub a,l 15086 add a,b 15087 ld (BuildingFadeIn+sx),a15088 ld (BuildingFadeIn+dx),a15090 ld a,(BuildingFadeIn+sy)15091 inc a15092 cp h 15093 ret nc15094 ld (BuildingFadeIn+sy),a15095 ld (BuildingFadeIn+dy),a15096 jp .loop15098 .go:15099 ld (BuildingFadeIn+sx),a15100 ld (BuildingFadeIn+dx),a15101 jp .loop15104SetActiveCastleOverviewButtons:15105 ld a,%1100 001115106 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 15107 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 15108 xor a15109 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 15110 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 15111 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 15112 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 15114 ld a,(iy+CastleBarracksLevel)15115 or a15116 jr z,.EndCheckBarracks15117 ld a,%1100 001115118 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 15119 .EndCheckBarracks:15121 ld a,(iy+CastleMageGuildLevel)15122 or a15123 jr z,.EndCheckMageGuild15124 ld a,%1100 001115125 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 15126 .EndCheckMageGuild:15128 ld a,(iy+CastleMarket)15129 or a15130 jr z,.EndCheckMarket15131 ld a,%1100 001115132 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 15133 .EndCheckMarket:15135 ld a,(iy+CastleTavern)15136 or a15137 jr z,.EndCheckTavern15138 ld a,%1100 001115139 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 15140 .EndCheckTavern:15141 ret15143SetCastleButtons: 15144 ld b,615145 .loop:15146 push bc15147 call .Setbutton15148 pop bc15149 ld de,CastleOverviewButtonTableLenghtPerButton15150 add ix,de15152 djnz .loop15153 ret15155 .Setbutton:15156 bit 7,(ix+CastleOverviewWindowButtonStatus)15157 ret z 15159 bit 0,(ix+CastleOverviewWindowButtonStatus)15160 jr nz,.bit0isSet15161 bit 1,(ix+CastleOverviewWindowButtonStatus)15162 ret z15163 15164 .bit1isSet:15165 res 1,(ix+CastleOverviewWindowButtonStatus)15166 jr .goCopyButton15167 .bit0isSet:15168 res 0,(ix+CastleOverviewWindowButtonStatus) 15169 .goCopyButton:15171 ld l,(ix+CastleOverviewWindowButton_SYSX_Ontouched)15172 ld h,(ix+CastleOverviewWindowButton_SYSX_Ontouched+1)15173 bit 6,(ix+CastleOverviewWindowButtonStatus)15174 jr nz,.go 15176 ld l,(ix+CastleOverviewWindowButton_SYSX_MovedOver)15177 ld h,(ix+CastleOverviewWindowButton_SYSX_MovedOver+1)15178 bit 5,(ix+CastleOverviewWindowButtonStatus)15179 jr nz,.go 15181 ld l,(ix+CastleOverviewWindowButton_SYSX_Clicked)15182 ld h,(ix+CastleOverviewWindowButton_SYSX_Clicked+1)1518315185 .go:1518715188 ld de,$8000 + (212*128) + (012/2) - 128 15189 ld bc,$0000 + (031*256) + (040/2) 15190 ld a,ButtonsBlock 15191 call CopyRamToVramCorrectedWithoutActivePageSetting 15193 ld a,(activepage)15194 xor 115195 ld (CopyCastleButton+dPage),a15197 ld a,(ix+CastleOverviewWindowButton_dx)15198 ld (CopyCastleButton+dx),a15200 ld hl,CopyCastleButton15201 call docopy1520215204 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady15205 call docopy15206 ret15208CheckButtonMouseInteractionCastleMainScreen:15209 ld b,615210 ld de,CastleOverviewButtonTableLenghtPerButton15212 .loop:15213 call .check15214 add ix,de15215 djnz .loop15216 ret15217 15218 .check:15219 bit 7,(ix+CastleOverviewWindowButtonStatus)15220 ret z15221 15222 ld a,(spat+0) 15223 cp (ix+CastleOverviewWindowButtonYtop)15224 jr c,.NotOverButton15225 cp (ix+CastleOverviewWindowButtonYbottom)15226 jr nc,.NotOverButton15227 ld a,(spat+1) 15229 add a,0615231 cp (ix+CastleOverviewWindowButtonXleft)15232 jr c,.NotOverButton15233 cp (ix+CastleOverviewWindowButtonXright)15234 jr nc,.NotOverButton15235 1523715243 ld a,(Controls)15244 bit 4,a 15245 jr nz,.MouseOverButtonAndSpacePressed15246 bit 4,(ix+CastleOverviewWindowButtonStatus) 15247 jr nz,.MenuOptionSelected 15248 .MouseHoverOverButton:1524915251 15252 bit 5,(ix+CastleOverviewWindowButtonStatus) 15253 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115254 ret nz15256 push iy15257 push bc15258 ld bc,SFX_MouseOver15259 call RePlayerSFX_PlayCh115260 pop bc15261 pop iy15262 ret15264 .MouseOverButtonAndSpacePressed:15265 bit 4,(ix+CastleOverviewWindowButtonStatus) 15266 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15267 ld a,(NewPrContr)15268 bit 4,a 15269 jr z,.MouseHoverOverButton15271 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15272 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115273 push iy15274 push bc15275 ld bc,SFX_MouseClick15276 call RePlayerSFX_PlayCh115277 pop bc15278 pop iy15279 ret15280 15281 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15282 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115283 ret15285 .NotOverButton:15286 bit 4,(ix+CastleOverviewWindowButtonStatus) 15287 jr nz,.buttonIsStillLit15288 bit 5,(ix+CastleOverviewWindowButtonStatus) 15289 ret z15290 .buttonIsStillLit:15291 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115292 ret15294 .MenuOptionSelected:15295 ld a,b15296 cp 1 15297 jr nz,.EndCheckExit15298 pop af 15299 pop af 15300 ret15301 .EndCheckExit:15303 cp 2 15304 jr nz,.EndCheckTavern15305 15306 pop af 15307 pop af 15308 jp CastleOverviewTavernCode 15309 ret15310 .EndCheckTavern:15312 cp 3 15313 jr nz,.EndCheckMarket15314 15315 pop af 15316 pop af 15317 jp CastleOverviewMarketPlaceCode 15318 .EndCheckMarket:15320 cp 4 15321 jr nz,.EndCheckMagicGuild15322 15323 pop af 15324 pop af 15325 jp CastleOverviewMagicGuildCode 15326 .EndCheckMagicGuild:15328 cp 5 15329 jr nz,.EndCheckRecruit15330 15331 pop af 15332 pop af 15333 jp CastleOverviewRecruitCode 15334 .EndCheckRecruit:15336 15337 pop af 15338 pop af 15339 jp CastleOverviewBuildCode 1534115342CheckButtonMouseInteractionCastle:15343 ld b,615344 ld de,CastleOverviewButtonTableLenghtPerButton15346 .loop:15347 call .check15348 add ix,de15349 djnz .loop15350 ret15351 15352 .check:15353 bit 7,(ix+CastleOverviewWindowButtonStatus)15354 ret z15355 15356 ld a,(spat+0) 15357 cp (ix+CastleOverviewWindowButtonYtop)15358 jr c,.NotOverButton15359 cp (ix+CastleOverviewWindowButtonYbottom)15360 jr nc,.NotOverButton15361 ld a,(spat+1) 15363 add a,0615365 cp (ix+CastleOverviewWindowButtonXleft)15366 jr c,.NotOverButton15367 cp (ix+CastleOverviewWindowButtonXright)15368 jr nc,.NotOverButton15369 1537115377 ld a,(Controls)15378 bit 4,a 15379 jr nz,.MouseOverButtonAndSpacePressed15380 bit 4,(ix+CastleOverviewWindowButtonStatus) 15381 jr nz,.MenuOptionSelected 15382 .MouseHoverOverButton:15383 15384 bit 5,(ix+CastleOverviewWindowButtonStatus) 15385 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115386 ret nz15388 push iy15389 push bc15390 ld bc,SFX_MouseOver15391 call RePlayerSFX_PlayCh115392 pop bc15393 pop iy15394 ret15396 .MouseOverButtonAndSpacePressed:15397 bit 4,(ix+CastleOverviewWindowButtonStatus) 15398 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15399 ld a,(NewPrContr)15400 bit 4,a 15401 jr z,.MouseHoverOverButton15403 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15404 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115405 push iy15406 push bc15407 ld bc,SFX_MouseClick15408 call RePlayerSFX_PlayCh115409 pop bc15410 pop iy15411 ret15412 15413 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15414 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115415 ret15417 .NotOverButton:15418 bit 4,(ix+CastleOverviewWindowButtonStatus) 15419 jr nz,.buttonIsStillLit15420 bit 5,(ix+CastleOverviewWindowButtonStatus) 15421 ret z15422 .buttonIsStillLit:15423 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115424 ret15426 .MenuOptionSelected:15427 pop af 15428 pop af 15429 jp CastleOverviewCode15430 15432SetIndividualBuildings:1543315434 ld a,(iy+CastleBarracksLevel)15435 or a15436 jr z,.EndCheckBarracks15437 ld hl,$4000 + (000*128) + (000/2) - 128 15438 ld de,$0000 + (057*128) + (176/2) - 128 15439 ld bc,$0000 + (101*256) + (080/2) 15440 ld a,IndividualBuildingsBlock 15441 call CopyRamToVramCorrectedCastleOverview 15442 ld hl,CopyBarracks15443 call docopy15444 .EndCheckBarracks:1544615447 ld a,(iy+CastleBarracksLevel)15448 cp 615449 jr nz,.EndCheckBarracksUpgrade15450 ld hl,$4000 + (100*128) + (160/2) - 128 15451 ld de,$0000 + (006*128) + (202/2) - 128 15452 ld bc,$0000 + (088*256) + (048/2) 15453 ld a,IndividualBuildingsBlock 15454 call CopyRamToVramCorrectedCastleOverview 15455 ld hl,CopyBarracksUpgrade15456 call docopy15457 .EndCheckBarracksUpgrade:1545915460 ld a,(iy+CastleSawmillLevel)15461 or a15462 jr z,.EndCheckSawmill15463 ld hl,$4000 + (101*128) + (000/2) - 128 15464 ld de,$0000 + (101*128) + (032/2) - 128 15465 ld bc,$0000 + (035*256) + (060/2) 15466 ld a,IndividualBuildingsBlock 15467 call CopyRamToVramCorrectedCastleOverview 15468 ld hl,CopySawmill15469 call docopy15470 .EndCheckSawmill:1547215473 ld a,(iy+CastleMineLevel)15474 or a15475 jr z,.EndCheckMine15476 ld hl,$4000 + (136*128) + (000/2) - 128 15477 ld de,$0000 + (150*128) + (000/2) - 128 15478 ld bc,$0000 + (052*256) + (126/2) 15479 ld a,IndividualBuildingsBlock 15480 call CopyRamToVramCorrectedCastleOverview 15481 ld hl,CopyMine15482 call docopy15483 .EndCheckMine:1548515486 ld a,(iy+CastleMageGuildLevel)15487 or a15488 jr z,.EndCheckMageGuild15489 ld hl,$4000 + (000*128) + (208/2) - 128 15490 ld de,$0000 + (019*128) + (000/2) - 128 15491 ld bc,$0000 + (168*256) + (048/2) 15492 ld a,IndividualBuildingsBlock 15493 call CopyRamToVramCorrectedCastleOverview 15494 ld hl,CopyMageGuild15495 call docopy15496 .EndCheckMageGuild:15498 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady15499 call docopy1550115502 ld a,(iy+CastleTavern)15503 or a15504 jr z,.EndCheckTavern15505 ld hl,$4000 + (000*128) + (000/2) - 128 15506 ld de,$0000 + (097*128) + (060/2) - 128 15507 ld bc,$0000 + (115*256) + (158/2) 15508 ld a,IndividualBuildingsPage2Block 15509 call CopyRamToVramCorrectedCastleOverview 15510 ld hl,CopyTavern15511 call docopy15512 .EndCheckTavern:1551415515 ld a,(iy+CastleMarket)15516 or a15517 jr z,.EndCheckMarket15518 ld hl,$4000 + (000*128) + (080/2) - 128 15519 ld de,$0000 + (000*128) + (000/2) - 128 15520 ld bc,$0000 + (088*256) + (090/2) 15521 ld a,IndividualBuildingsBlock 15522 call CopyRamToVramCorrectedCastleOverview 15523 ld hl,CopyChamberOfCommerce15524 call docopy15525 .EndCheckMarket:1552715528 ld a,(iy+CastleLevel)15529 cp 615530 jr nz,.EndCheckCityWalls15531 ld hl,$4000 + (115*128) + (000/2) - 128 15532 ld de,$0000 + (185*128) + (000/2) - 128 15533 ld bc,$0000 + (027*256) + (256/2) 15534 ld a,IndividualBuildingsPage2Block 15535 call CopyRamToVramCorrectedCastleOverview 15536 ld hl,CopyCityWalls15537 call docopy15538 .EndCheckCityWalls:15539 ret15541SetCastleOverviewGraphics: 15542 ld hl,$4000 + (000*128) + (000/2) - 12815543 ld de,$0000 + (000*128) + (000/2) - 12815544 ld bc,$0000 + (212*256) + (256/2)15545 ld a,CastleOverviewBlock 15546 jp CopyRamToVramCorrectedCastleOverview 15548SetBuildGraphics: 15549 ld hl,$4000 + (000*128) + (000/2) - 12815550 ld de,$0000 + (000*128) + (000/2) - 12815551 ld bc,$0000 + (212*256) + (256/2)15552 ld a,BuildBlock 15553 call CopyRamToVramCorrectedCastleOverview 15555 15556 ld hl,$4000 + (000*128) + (000/2) - 12815557 ld de,$0000 + (000*128) + (000/2) - 12815558 ld bc,$0000 + (020*256) + (256/2)15559 ld a,ChamberOfCommerceBlock 15560 jp CopyRamToVramCorrectedCastleOverview 15562ClearTextBuildWindow:15563 ld hl,$4000 + (046*128) + (180/2) - 12815564 ld de,$0000 + (046*128) + (180/2) - 12815565 ld bc,$0000 + (131*256) + (072/2)15566 ld a,BuildBlock 15567 jp CopyRamToVramCorrectedCastleOverview 15569SetCastleOverViewFontPage0Y212: 15570 ld hl,$4000 + (000*128) + (000/2) - 12815571 ld de,$0000 + (212*128) + (000/2) - 12815572 ld bc,$0000 + (006*256) + (256/2)15573 ld a,CastleOverviewFontBlock 15574 jp CopyRamToVramCorrectedWithoutActivePageSetting 15576SetRecruitGraphics:15577 ld hl,$4000 + (000*128) + (000/2) - 12815578 ld de,$0000 + (000*128) + (000/2) - 12815579 ld bc,$0000 + (212*256) + (256/2)15580 ld a,RecruitCreaturesBlock 15581 call CopyRamToVramCorrectedCastleOverview 15583 ld a,r15584 and 315585 ld hl,$4000 + (000*128) + (000/2) - 12815586 jr z,.MonsterFound15587 dec a15588 ld hl,$4000 + (030*128) + (000/2) - 12815589 jr z,.MonsterFound15590 dec a15591 ld hl,$4000 + (060*128) + (000/2) - 12815592 jr z,.MonsterFound15593 ld hl,$4000 + (090*128) + (000/2) - 12815594 .MonsterFound:15595 ld de,$0000 + (133*128) + (000/2) - 12815596 ld bc,$0000 + (030*256) + (256/2)15597 ld a,RecruitCreatures4MonstersBlock 15598 jp CopyRamToVramCorrectedCastleOverview 15600SetRecruitGraphics6CreatureWindows:15601 ld hl,$4000 + (026*128) + (000/2) - 12815602 ld de,$0000 + (026*128) + (000/2) - 12815603 ld bc,$0000 + (103*256) + (256/2)15604 ld a,RecruitCreaturesBlock 15605 jp CopyRamToVramCorrectedCastleOverview 15607SetVisitingAndDefendingHeroesAndArmyWindow:15608 ld hl,$4000 + (174*128) + (004/2) - 12815609 ld de,$0000 + (174*128) + (004/2) - 12815610 ld bc,$0000 + (034*256) + (248/2)15611 ld a,RecruitCreaturesBlock 15612 jp CopyRamToVramCorrectedCastleOverview 15614SetMagicGuildGraphics:15615 ld hl,$4000 + (000*128) + (000/2) - 12815616 ld de,$0000 + (000*128) + (000/2) - 12815617 ld bc,$0000 + (212*256) + (256/2)15618 ld a,MagicGuildBlock 15619 jp CopyRamToVramCorrectedCastleOverview 15621SetMarketPlaceGraphics:15622 ld hl,$4000 + (000*128) + (000/2) - 12815623 ld de,$0000 + (000*128) + (000/2) - 12815624 ld bc,$0000 + (212*256) + (256/2)15625 ld a,ChamberOfCommerceBlock 15626 jp CopyRamToVramCorrectedCastleOverview 15628SetTavernGraphics:15629 ld hl,$4000 + (000*128) + (000/2) - 12815630 ld de,$0000 + (000*128) + (000/2) - 12815631 ld bc,$0000 + (212*256) + (256/2)15632 ld a,TavernBlock 15633 jp CopyRamToVramCorrectedCastleOverview 15635SetHeroArmyTransferGraphics:15636 ld hl,$4000 + (000*128) + (000/2) - 12815637 ld de,$0000 + (030*128) + (024/2) - 12815638 ld bc,$0000 + (137*256) + (156/2)15639 ld a,HeroArmyTransferGraphicsBlock 15640 jp CopyRamToVramCorrectedCastleOverview 15642CopyBarracks:15643 db 176,0,057,015644 db 176,0,057,115645 db 080,0,101,015646 db 0,%0000 0000,$9815648CopyBarracksUpgrade:15649 db 202,0,006,015650 db 202,0,006,115651 db 048,0,088,015652 db 0,%0000 0000,$9815654CopySawmill:15655 db 032,0,101,015656 db 032,0,101,115657 db 060,0,035,015658 db 0,%0000 0000,$9815660CopyMine:15661 db 000,0,150,015662 db 050,0,126,115663 db 126,0,052,015664 db 0,%0000 0000,$9815666CopyMageGuild:15667 db 000,0,019,015668 db 000,0,019,115669 db 048,0,168,015670 db 0,%0000 0000,$9815672CopyTavern:15673 db 060,0,097,015674 db 060,0,097,115675 db 158,0,115,015676 db 0,%0000 0000,$9815678CopyChamberOfCommerce:15679 db 000,0,000,015680 db 166,0,106,115681 db 090,0,088,015682 db 0,%0000 0000,$9815684CopyCityWalls:15685 db 000,0,185,015686 db 000,0,185,115687 db 000,1,027,015688 db 0,%0000 0000,$9815690SetResourcesPlayer:15691 call SetCastleOverViewFontPage0Y212 15693 ld hl,$4000 + (007*128) + (032/2) - 12815694 ld de,$0000 + (007*128) + (032/2) - 12815695 ld bc,$0000 + (005*256) + (220/2)15696 ld a,ChamberOfCommerceBlock 15697 call CopyRamToVramCorrectedCastleOverview 15699 call SetResourcesCurrentPlayerinIX15701 15702 ld b,217 15703 ld c,007 15704 ld l,(ix+0)15705 ld h,(ix+1)15706 call SetNumber16BitCastle 15708 ld b,035 15709 ld c,007 15710 ld l,(ix+2)15711 ld h,(ix+3)15712 call SetNumber16BitCastle 15714 ld b,078 15715 ld c,007 15716 ld l,(ix+4)15717 ld h,(ix+5)15718 call SetNumber16BitCastle 15720 ld b,122 15721 ld c,007 15722 ld l,(ix+6)15723 ld h,(ix+7)15724 call SetNumber16BitCastle 15726 ld b,166 15727 ld c,007 15728 ld l,(ix+8)15729 ld h,(ix+9)15730 call SetNumber16BitCastle 15731 ret15733MSXHeroes.asm1049 ds $c000-$,$ff1050dephase10521055PlayerStartTurnBlock: equ $441056phase $40001057 incbin "..\grapx\HeroOverview\PlayerStartTurnWindow.SC5",7,95 * 128 1058 ds $8000-$,$ff1059dephase10611064SpritesWeaponsBlock: equ $451065phase $40001066SpriteCharKingMori:1067 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tgs.gen12 db 03 db 164 db 165 db 366 db 07 db 08 db 329 db 3210 db 6311 db 012 db 013 db 1614 db 6415 db 3216 db 317 db 318 db 019 db 9620 db 9621 db 222 db 123 db 424 db 025 db 026 db 25427 db 228 db 229 db 030 db 031 db 1832 db 433 db 434 db 035 db 036 db 037 db 438 db 6339 db 6340 db 9541 db 9542 db 3243 db 3144 db 3145 db 11146 db 19147 db 048 db 349 db 050 db 051 db 052 db 9653 db 054 db 25455 db 25156 db 25257 db 25258 db 259 db 25360 db 25361 db 25462 db 25463 db 1664 db 065 db 066 db 067 db 068 db 4469 db 070 db 5471 db 4872 db 8073 db 8074 db 075 db 1676 db 2477 db 10478 db 17679 db 080 db 3681 db 082 db 083 db 084 db 14685 db 12886 db 687 db 1188 db 1289 db 490 db 091 db 592 db 593 db 694 db 5495 db 12896 db 15497 db 09899 db 0100 db 6101 db 6102 db 64103 db 128104 db 32105 db 0106 db 0107 db 127108 db 64109 db 64110 db 0111 db 0112 db 72113 db 32114 db 32115 db 0116 db 8117 db 8118 db 36119 db 0120 db 0121 db 4122 db 4123 db 252124 db 0125 db 0126 db 8127 db 2128 db 4129 db 192130 db 192131 db 0132 db 0133 db 6134 db 0135 db 127136 db 223137 db 63138 db 63139 db 64140 db 191141 db 191142 db 127143 db 127144 db 8145 db 0146 db 0147 db 0148 db 0149 db 0150 db 32151 db 252152 db 252153 db 250154 db 250155 db 4156 db 248157 db 248158 db 246159 db 253160 db 0161 db 192162 db 0163 db 0164 db 0165 db 73166 db 1167 db 96168 db 208169 db 48170 db 32171 db 0172 db 160173 db 160174 db 96175 db 108176 db 1177 db 89178 db 0179 db 0180 db 0181 db 52182 db 0183 db 108184 db 12185 db 10186 db 10187 db 0188 db 8189 db 24190 db 22191 db 13192 db 0193 db 36194 db 0195MSXHeroes.asm1068SpriteColKingMori:1069 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tcs.gen12 db 2553 db 134 db 25 db 26 db 27 db 108 db 109 db 1010 db 1211 db 1012 db 1013 db 1014 db 215 db 216 db 217 db 1318 db 25519 db 25520 db 7421 db 7422 db 7623 db 7624 db 7625 db 7626 db 7727 db 7628 db 7629 db 7630 db 7631 db 7432 db 7433 db 25534 db 25535 db 25536 db 7737 db 7638 db 7739 db 7740 db 7741 db 7742 db 25543 db 7744 db 7745 db 7746 db 7747 db 7648 db 7749 db 2555051 db 25552 db 1353 db 254 db 255 db 256 db 1057 db 1058 db 1059 db 1260 db 1061 db 1062 db 1063 db 264 db 265 db 266 db 1367 db 25568 db 25569 db 7470 db 7471 db 7672 db 7673 db 7674 db 7675 db 7776 db 7677 db 7678 db 7679 db 7680 db 7481 db 7482 db 25583 db 25584 db 25585 db 7786 db 7687 db 7788 db 7789 db 7790 db 7791 db 25592 db 7793 db 7794 db 7795 db 7796 db 7697 db 7798 db 25599MSXHeroes.asm1070SpriteCharBubbleBobble:1071 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tgs.gen12 db 33 db 154 db 315 db 586 db 1157 db 1238 db 2519 db 23810 db 22811 db 22412 db 11213 db 11214 db 6015 db 3116 db 1517 db 318 db 19219 db 24020 db 24821 db 6022 db 1423 db 1424 db 725 db 726 db 727 db 3928 db 9429 db 17430 db 12431 db 24832 db 24033 db 19234 db 035 db 1236 db 1937 db 438 db 839 db 8540 db 18141 db 17042 db 16443 db 16044 db 8045 db 8046 db 4447 db 1948 db 1249 db 050 db 051 db 4852 db 20053 db 054 db 055 db 1056 db 557 db 558 db 559 db 3760 db 12261 db 23462 db 11663 db 20064 db 4865 db 066 db 067 db 068 db 069 db 4270 db 8571 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 5286 db 1087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 15101 db 31102 db 62103 db 127104 db 127105 db 255106 db 238107 db 228108 db 224109 db 112110 db 112111 db 60112 db 31113 db 15114 db 3115 db 192116 db 240117 db 248118 db 60119 db 14120 db 14121 db 7122 db 7123 db 7124 db 39125 db 126126 db 238127 db 124128 db 248129 db 240130 db 192131 db 0132 db 12133 db 19134 db 42135 db 85136 db 85137 db 181138 db 170139 db 164140 db 160141 db 80142 db 80143 db 44144 db 19145 db 12146 db 0147 db 0148 db 48149 db 200150 db 52151 db 10152 db 10153 db 5154 db 5155 db 5156 db 37157 db 122158 db 234159 db 116160 db 200161 db 48162 db 0163 db 0164 db 0165 db 0166 db 0167 db 81168 db 81169 db 177170 db 0171 db 0172 db 0173 db 80174 db 80175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 10184 db 10185 db 5186 db 0187 db 0188 db 0189 db 90190 db 170191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1072SpriteColBubbleBobble:1073 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tcs.gen12 db 133 db 14 db 15 db 16 db 17 db 18 db 19 db 110 db 111 db 112 db 113 db 114 db 115 db 116 db 117 db 1318 db 25519 db 7720 db 7721 db 6622 db 6623 db 7624 db 7625 db 7726 db 7727 db 7728 db 7629 db 7630 db 7731 db 7732 db 7733 db 25534 db 25535 db 25536 db 25537 db 7738 db 7639 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 453 db 454 db 455 db 456 db 457 db 458 db 459 db 460 db 461 db 462 db 463 db 464 db 465 db 466 db 1367 db 25568 db 7769 db 7770 db 7771 db 7672 db 7673 db 7674 db 7775 db 7776 db 7777 db 7678 db 7679 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 7788 db 7789 db 7790 db 25591 db 25592 db 25593 db 7794 db 7795 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1074SpriteCharAxeMan:1075 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tgs.gen12 db 13 db 04 db 05 db 86 db 377 db 238 db 319 db 410 db 3011 db 6112 db 3013 db 1314 db 415 db 016 db 017 db 018 db 12819 db 19220 db 9621 db 17622 db 21623 db 23624 db 25425 db 19826 db 9627 db 3228 db 14429 db 7230 db 3631 db 1832 db 933 db 634 db 035 db 136 db 137 db 5138 db 5939 db 5640 db 2741 db 5942 db 24343 db 25144 db 12545 db 6246 db 3047 db 1448 db 649 db 050 db 051 db 052 db 12853 db 19254 db 22455 db 24056 db 25457 db 5658 db 12859 db 19260 db 22461 db 24062 db 5663 db 2864 db 1465 db 466 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 11289 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 7101 db 15102 db 7103 db 15104 db 31105 db 5106 db 10107 db 4108 db 9109 db 19110 db 36111 db 72112 db 144113 db 32114 db 64115 db 0116 db 0117 db 184118 db 96119 db 72120 db 240121 db 96122 db 113123 db 251124 db 246125 db 108126 db 88127 db 112128 db 224129 db 192130 db 0131 db 0132 db 0133 db 2134 db 31135 db 62136 db 31137 db 123138 db 7139 db 15140 db 14141 db 28142 db 56143 db 112144 db 224145 db 192146 db 0147 db 0148 db 0149 db 16150 db 184151 db 176152 db 176153 db 152154 db 158155 db 60156 db 120157 db 240158 db 224159 db 128160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 124169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 96197 db 144198 db 72199 db 36200 db 18201 db 9202 db 4203 db 6204 db 99205 db 127206 db 55207 db 27208 db 13209 db 6210 db 3211 db 1212 db 0213 db 0214 db 0215 db 32216 db 176217 db 120218 db 188219 db 120220 db 32221 db 248222 db 232223 db 164224 db 16225 db 0226 db 0227 db 128228 db 32229 db 112230 db 56231 db 28232 db 15233 db 7234 db 3235 db 1236 db 28237 db 127238 db 15239 db 7240 db 3241 db 1242 db 0243 db 0244 db 0245 db 96246 db 112247 db 120248 db 124249 db 190250 db 223251 db 207252 db 220253 db 216254 db 28255 db 220256 db 204257 db 128258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 14270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 3295 db 7296 db 14297 db 26298 db 54299 db 111300 db 223301 db 142302 db 6303 db 15304 db 18305 db 6306 db 29307 db 0308 db 0309 db 2310 db 4311 db 9312 db 18313 db 36314 db 200315 db 144316 db 32317 db 80318 db 160319 db 248320 db 240321 db 224322 db 240323 db 224324 db 192325 db 0326 db 0327 db 0328 db 1329 db 7330 db 15331 db 30332 db 60333 db 121334 db 25335 db 13336 db 13337 db 29338 db 8339 db 0340 db 0341 db 0342 db 3343 db 7344 db 14345 db 28346 db 56347 db 112348 db 240349 db 224350 db 222351 db 248352 db 124353 db 248354 db 64355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 0365 db 0366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 0381 db 0382 db 0383 db 62384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm1076SpriteColAxeMan:1077 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 99 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1418 db 25519 db 7820 db 7821 db 7822 db 7823 db 7824 db 7725 db 7826 db 7827 db 7828 db 7829 db 7830 db 7831 db 7832 db 7833 db 7934 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7941 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1452 db 1453 db 1454 db 1355 db 1356 db 957 db 1358 db 1359 db 1360 db 1361 db 1362 db 1363 db 1364 db 1365 db 1366 db 1367 db 25568 db 25569 db 7970 db 7871 db 7872 db 7773 db 7874 db 7875 db 7876 db 7877 db 7878 db 7879 db 7880 db 7881 db 7882 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 25590 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 14101 db 13102 db 13103 db 13104 db 13105 db 13106 db 13107 db 13108 db 13109 db 9110 db 13111 db 13112 db 13113 db 13114 db 13115 db 13116 db 79117 db 78118 db 78119 db 78120 db 78121 db 78122 db 78123 db 78124 db 78125 db 77126 db 78127 db 78128 db 78129 db 78130 db 78131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 79142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 13150 db 13151 db 13152 db 13153 db 13154 db 13155 db 13156 db 13157 db 13158 db 13159 db 9160 db 13161 db 13162 db 14163 db 14164 db 14165 db 255166 db 78167 db 78168 db 78169 db 78170 db 78171 db 78172 db 78173 db 78174 db 78175 db 77176 db 78177 db 78178 db 79179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 255189 db 255190 db 255191 db 78192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm1078SpriteCharGeneralBullet1:1079 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tgs.gen12 db 03 db 04 db 05 db 36 db 77 db 158 db 309 db 2810 db 3011 db 3112 db 1513 db 714 db 315 db 016 db 017 db 018 db 019 db 020 db 021 db 12822 db 19223 db 22424 db 24025 db 11226 db 24027 db 24028 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 439 db 340 db 641 db 442 db 643 db 344 db 845 db 446 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 6455 db 12856 db 19257 db 6458 db 19259 db 12860 db 3261 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 872 db 1773 db 1974 db 1775 db 1676 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 3288 db 1689 db 14490 db 1691 db 1692 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm1080SpriteColGeneralBullet1:1081 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7723 db 7524 db 7525 db 7526 db 7527 db 7528 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7641 db 7642 db 7643 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm1082SpriteCharContraBullet:1083 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 159 db 710 db 011 db 712 db 1513 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 12825 db 12826 db 6427 db 12828 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 842 db 1543 db 844 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 6458 db 16059 db 6460 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 474 db 875 db 476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 3291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 1106 db 1107 db 2108 db 1109 db 1110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 240122 db 224123 db 0124 db 224125 db 240126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 2139 db 5140 db 2141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 16155 db 240156 db 16157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 4172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 32187 db 16188 db 32189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1084SpriteColContraBullet:1085 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1011 db 1012 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7726 db 7627 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7842 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 1059 db 1060 db 1061 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7775 db 7676 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7891 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1086SpriteCharGrenadier:1087 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tgs.gen12 db 03 db 04 db 05 db 06 db 97 db 158 db 59 db 510 db 1511 db 1512 db 1513 db 914 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 19223 db 22424 db 4825 db 1626 db 20827 db 24028 db 22429 db 19230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 640 db 1041 db 1042 db 043 db 244 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 3256 db 19257 db 22458 db 3259 db 4860 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 275 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 1689 db 1690 db 1691 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 3104 db 7105 db 12106 db 8107 db 11108 db 15109 db 7110 db 3111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 144120 db 240121 db 160122 db 160123 db 240124 db 240125 db 240126 db 144127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 4137 db 3138 db 7139 db 4140 db 12141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 96153 db 80154 db 80155 db 0156 db 64157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 8170 db 8171 db 8172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 64188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1088SpriteColGrenadier:1089 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 1313 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7425 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 1362 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7474 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1090SpriteCharHandGrenade:1091 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 69 db 1210 db 911 db 1112 db 1513 db 1514 db 715 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 9623 db 17624 db 14425 db 11226 db 22427 db 22428 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 141 db 342 db 643 db 444 db 1045 db 1346 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 6456 db 9657 db 12858 db 059 db 060 db 16061 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 172 db 473 db 874 db 875 db 976 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 14488 db 14489 db 11290 db 3291 db 9692 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 15104 db 28105 db 30106 db 31107 db 31108 db 15109 db 7110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 64122 db 32123 db 96124 db 144125 db 176126 db 224127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 3137 db 1138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 128154 db 192155 db 128156 db 96157 db 64158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 24169 db 20170 db 26171 db 20172 db 10173 db 7174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 64185 db 0186 db 32187 db 96188 db 144189 db 144190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 1200 db 3201 db 7202 db 7203 db 7204 db 14205 db 9206 db 13207 db 6208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 224216 db 240217 db 240218 db 208219 db 144220 db 48221 db 96222 db 128223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 2233 db 5234 db 0235 db 0236 db 1237 db 6238 db 2239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 176249 db 80250 db 32251 db 96252 db 192253 db 128254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 6267 db 4268 db 14269 db 9270 db 9271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 144283 db 16284 db 16285 db 32286 db 128287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 7298 db 13299 db 9300 db 6301 db 4302 db 2303 db 3304 db 1305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 224315 db 240316 db 248317 db 248318 db 120319 db 56320 db 240321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 2331 db 6332 db 1333 db 3334 db 1335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 0349 db 0350 db 128351 db 192352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 9363 db 9364 db 6365 db 4366 db 0367 db 2368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 224379 db 80380 db 40381 db 88382 db 40383 db 24384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm1092SpriteColHandGrenade:1093 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 413 db 414 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7424 db 7425 db 7426 db 7427 db 7428 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7741 db 7742 db 7743 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 462 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7473 db 7474 db 7475 db 7476 db 7477 db 7478 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 13104 db 4105 db 4106 db 4107 db 4108 db 4109 db 4110 db 4111 db 13112 db 255113 db 255114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 77121 db 77122 db 74123 db 74124 db 74125 db 74126 db 74127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 77139 db 77140 db 77141 db 77142 db 77143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 4155 db 4156 db 4157 db 4158 db 4159 db 4160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 74171 db 74172 db 74173 db 74174 db 74175 db 74176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm1094SpriteCharVanguard:1095 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tgs.gen12 db 03 db 04 db 05 db 146 db 197 db 148 db 2519 db 12810 db 6411 db 12712 db 6313 db 3114 db 1415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 1226 db 727 db 25528 db 25429 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 1439 db 24340 db 25341 db 25542 db 25543 db 12144 db 5745 db 1946 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 24856 db 25257 db 24758 db 24959 db 25560 db 25461 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 1072 db 24973 db 074 db 12875 db 5976 db 1077 db 1078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 25289 db 790 db 091 db 25492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 48107 db 224108 db 255109 db 127110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 112119 db 200120 db 112121 db 223122 db 1123 db 2124 db 254125 db 252126 db 248127 db 112128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 31137 db 63138 db 239139 db 159140 db 255141 db 127142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 112152 db 207153 db 191154 db 255155 db 255156 db 158157 db 156158 db 200159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 63170 db 224171 db 0172 db 127173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 80185 db 159186 db 0187 db 1188 db 220189 db 80190 db 80191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1096SpriteColVanguard:1097 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 108 db 109 db 1010 db 1011 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7823 db 7724 db 7625 db 7626 db 7627 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7840 db 7741 db 7742 db 7743 db 7844 db 7845 db 7846 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 1355 db 1356 db 1057 db 1058 db 1059 db 1060 db 1261 db 1262 db 1263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 7872 db 7773 db 7674 db 7675 db 7676 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 7790 db 7791 db 7792 db 7893 db 7894 db 7895 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1098SpriteCharLanFang:1099 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 639 db 010 db 12711 db 12712 db 9513 db 3114 db 615 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 2426 db 24827 db 19228 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 8843 db 7044 db 6445 db 2546 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 858 db 5659 db 6460 db 12861 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 6374 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 22490 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 6102 db 31103 db 95104 db 127105 db 127106 db 0107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 248122 db 24123 db 248124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 25135 db 64136 db 70137 db 88138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 128152 db 64153 db 56154 db 8155 db 0156 db 0157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 63171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 224187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 7197 db 31198 db 63199 db 63200 db 127201 db 127202 db 127203 db 0204 db 0205 db 0206 db 0207 db 0208 db 0209 db 0210 db 0211 db 0212 db 240213 db 240214 db 240215 db 240216 db 240217 db 240218 db 248219 db 8220 db 24221 db 56222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 6229 db 25230 db 36231 db 32232 db 88233 db 64234 db 88235 db 127236 db 0237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 16245 db 80246 db 16247 db 16248 db 16249 db 16250 db 24251 db 244252 db 8253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 64268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 4284 db 32285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 15294 db 15295 db 15296 db 15297 db 15298 db 15299 db 31300 db 16301 db 24302 db 28303 db 0304 db 0305 db 0306 db 0307 db 0308 db 0309 db 224310 db 248311 db 252312 db 252313 db 254314 db 254315 db 254316 db 0317 db 0318 db 0319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 8326 db 10327 db 8328 db 8329 db 8330 db 8331 db 24332 db 47333 db 16334 db 0335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 96342 db 152343 db 36344 db 4345 db 26346 db 2347 db 26348 db 254349 db 0350 db 0351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 32365 db 4366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 2381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 1395 db 3396 db 31397 db 24398 db 31399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 96409 db 248410 db 250411 db 254412 db 254413 db 0414 db 252415 db 0416 db 0417 db 0418 db 0419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 1427 db 2428 db 28429 db 16430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 0441 db 152442 db 2443 db 98444 db 26445 db 0446 db 0447 db 0448 db 0449 db 0450 db 0451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 7462 db 0463 db 0464 db 0465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 252478 db 0479 db 0480 db 0481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 0488 db 0489 db 0490 db 0491 db 0492 db 0493 db 31494 db 24495 db 31496 db 3497 db 1498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 0509 db 252510 db 0511 db 254512 db 254513 db 250514 db 248515 db 96516 db 0517 db 0518 db 0519 db 0520 db 0521 db 0522 db 0523 db 0524 db 0525 db 0526 db 16527 db 28528 db 2529 db 1530 db 0531 db 0532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 0541 db 0542 db 0543 db 26544 db 98545 db 2546 db 152547 db 0548 db 0549 db 0550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 7559 db 0560 db 0561 db 0562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 252575 db 0576 db 0577 db 0578 db 0579 db 0580 db 0581 db 0582 db 0583584 db 0585 db 0586 db 0587 db 0588 db 0589 db 28590 db 24591 db 16592 db 31593 db 15594 db 15595 db 15596 db 15597 db 15598 db 15599 db 7600 db 0601 db 0602 db 0603 db 0604 db 0605 db 0606 db 0607 db 0608 db 254609 db 254610 db 254611 db 252612 db 252613 db 248614 db 224615 db 128616 db 0617 db 0618 db 0619 db 0620 db 0621 db 0622 db 16623 db 47624 db 24625 db 8626 db 8627 db 8628 db 8629 db 10630 db 8631 db 0632 db 0633 db 0634 db 0635 db 0636 db 0637 db 0638 db 0639 db 254640 db 26641 db 2642 db 26643 db 4644 db 36645 db 152646 db 96647 db 0648 db 0649 db 0650 db 0651 db 0652 db 0653 db 0654 db 4655 db 32656 db 0657 db 0658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 0669 db 0670 db 0671 db 2672 db 0673 db 0674 db 0675 db 0676 db 0677 db 0678 db 0679 db 0680681 db 0682 db 0683 db 0684 db 0685 db 0686 db 0687 db 0688 db 0689 db 127690 db 127691 db 127692 db 63693 db 63694 db 31695 db 7696 db 1697 db 0698 db 0699 db 0700 db 0701 db 0702 db 56703 db 24704 db 8705 db 248706 db 240707 db 240708 db 240709 db 240710 db 240711 db 240712 db 224713 db 0714 db 0715 db 0716 db 0717 db 0718 db 0719 db 0720 db 127721 db 88722 db 64723 db 88724 db 32725 db 36726 db 25727 db 6728 db 0729 db 0730 db 0731 db 0732 db 0733 db 0734 db 0735 db 8736 db 244737 db 24738 db 16739 db 16740 db 16741 db 16742 db 80743 db 16744 db 0745 db 0746 db 0747 db 0748 db 0749 db 0750 db 0751 db 0752 db 64753 db 0754 db 0755 db 0756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 0767 db 32768 db 4769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777MSXHeroes.asm1100SpriteColLanFang:1101 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1211 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7526 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 1354 db 1255 db 1256 db 1257 db 1258 db 1059 db 1360 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 7771 db 7772 db 7773 db 7774 db 7575 db 25576 db 25577 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7691 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 12101 db 12102 db 12103 db 12104 db 12105 db 12106 db 12107 db 10108 db 10109 db 13110 db 255111 db 255112 db 255113 db 255114 db 255115 db 255116 db 77117 db 77118 db 77119 db 77120 db 77121 db 77122 db 77123 db 76124 db 75125 db 255126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 77140 db 76141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 12150 db 12151 db 12152 db 12153 db 12154 db 12155 db 12156 db 10157 db 10158 db 13159 db 255160 db 255161 db 255162 db 255163 db 255164 db 255165 db 77166 db 77167 db 77168 db 77169 db 77170 db 77171 db 77172 db 76173 db 75174 db 255175 db 255176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 77189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 255199 db 255200 db 13201 db 12202 db 12203 db 12204 db 12205 db 10206 db 13207 db 255208 db 255209 db 255210 db 255211 db 255212 db 255213 db 255214 db 255215 db 255216 db 255217 db 77218 db 77219 db 77220 db 77221 db 75222 db 255223 db 255224 db 255225 db 255226 db 255227 db 255228 db 255229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 76238 db 255239 db 255240 db 255241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 255248 db 255249 db 255250 db 255251 db 255252 db 255253 db 13254 db 10255 db 12256 db 12257 db 12258 db 12259 db 13260 db 255261 db 255262 db 255263 db 255264 db 255265 db 255266 db 255267 db 255268 db 255269 db 255270 db 75271 db 77272 db 77273 db 77274 db 77275 db 255276 db 255277 db 255278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 76287 db 255288 db 255289 db 255290 db 255291 db 255292 db 255293 db 255294 db 255295296 db 255297 db 255298 db 255299 db 255300 db 255301 db 13302 db 10303 db 10304 db 12305 db 12306 db 12307 db 12308 db 12309 db 12310 db 12311 db 13312 db 255313 db 255314 db 255315 db 255316 db 255317 db 255318 db 75319 db 76320 db 77321 db 77322 db 77323 db 77324 db 77325 db 77326 db 77327 db 255328 db 255329 db 255330 db 255331 db 255332 db 255333 db 255334 db 76335 db 77336 db 255337 db 255338 db 255339 db 255340 db 255341 db 255342 db 255343 db 255344345 db 255346 db 255347 db 255348 db 255349 db 255350 db 13351 db 10352 db 10353 db 12354 db 12355 db 12356 db 12357 db 12358 db 12359 db 12360 db 13361 db 255362 db 255363 db 255364 db 255365 db 255366 db 255367 db 75368 db 76369 db 77370 db 77371 db 77372 db 77373 db 77374 db 77375 db 77376 db 255377 db 255378 db 255379 db 255380 db 255381 db 255382 db 255383 db 76384 db 77385 db 255386 db 255387 db 255388 db 255389 db 255390 db 255391 db 255392 db 255393MSXHeroes.asm1102SpriteCharHanChen:1103 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tgs.gen12 db 03 db 74 db 315 db 636 db 1037 db 1268 db 2549 db 25510 db 25511 db 25512 db 25513 db 12714 db 12715 db 6316 db 3117 db 1518 db 1819 db 19920 db 24221 db 12022 db 10123 db 22024 db 25425 db 11826 db 25427 db 25428 db 25429 db 25230 db 25231 db 24832 db 24033 db 19234 db 035 db 736 db 3137 db 6338 db 12639 db 10340 db 19541 db 23142 db 25543 db 12744 db 6345 db 1546 db 047 db 048 db 049 db 050 db 051 db 19452 db 24453 db 15654 db 22855 db 11656 db 11857 db 14258 db 14259 db 25260 db 24861 db 22462 db 063 db 064 db 065 db 066 db 067 db 768 db 3169 db 6370 db 12771 db 6772 db 23073 db 25574 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 19284 db 24085 db 14486 db 12487 db 8488 db 11889 db 690 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm1104SpriteColHanChen:1105 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tcs.gen12 db 93 db 94 db 95 db 106 db 97 db 108 db 109 db 1010 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1318 db 25519 db 7520 db 7621 db 7622 db 7423 db 7624 db 7725 db 7726 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534 db 25535 db 7936 db 7937 db 7738 db 7639 db 7740 db 7841 db 7842 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm1106SpriteCharLiYen:1107 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2499 db 25510 db 25511 db 6312 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 25224 db 25525 db 25526 db 23127 db 24028 db 24829 db 4830 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 24941 db 24742 db 22343 db 5644 db 745 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 12357 db 12758 db 23159 db 4860 db 20061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 24973 db 774 db 19375 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 389 db 5690 db 3991 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 63105 db 255106 db 255107 db 231108 db 15109 db 31110 db 12111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 159122 db 255123 db 255124 db 252125 db 224126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 222138 db 254139 db 231140 db 12141 db 19142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 159154 db 239155 db 251156 db 28157 db 224158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 192170 db 28171 db 228172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 159186 db 224187 db 131188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1108SpriteColLiYen:1109 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 138 db 49 db 410 db 411 db 1212 db 1213 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 7625 db 7626 db 7627 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 458 db 459 db 460 db 1261 db 1262 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7674 db 7675 db 7676 db 7777 db 7778 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1110SpriteCharKnightYama:1111 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tgs.gen12 db 03 db 04 db 35 db 76 db 157 db 318 db 319 db 6310 db 6311 db 3112 db 3113 db 1514 db 715 db 116 db 017 db 018 db 019 db 020 db 12821 db 22422 db 24023 db 24824 db 24825 db 25226 db 25227 db 25228 db 24829 db 24030 db 22431 db 12832 db 033 db 034 db 035 db 036 db 037 db 438 db 339 db 040 db 841 db 1642 db 1743 db 844 db 845 db 446 db 647 db 048 db 049 db 050 db 051 db 052 db 053 db 9654 db 055 db 19256 db 3257 db 20858 db 6459 db 12860 db 061 db 062 db 9663 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 871 db 2372 db 2073 db 4174 db 4675 db 1876 db 2177 db 878 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 14487 db 4088 db 20089 db 3690 db 14891 db 10092 db 13693 db 1694 db 095 db 096 db 097 db 098MSXHeroes.asm1112SpriteColKnightYama:1113 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tcs.gen12 db 2553 db 2554 db 135 db 96 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 915 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 7722 db 7523 db 7524 db 7525 db 7526 db 7527 db 7528 db 7529 db 7530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm1114SpriteCharBisshopHeichi:1115 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2559 db 8010 db 17611 db 25512 db 22413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 626 db 327 db 25528 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 17542 db 7943 db 3144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 24858 db 25259 db 25560 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 6476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 690 db 391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 96107 db 192108 db 255109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 255122 db 10123 db 13124 db 255125 db 7126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 31139 db 63140 db 255141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 245155 db 242156 db 248157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 96171 db 192172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 2189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1116SpriteColBisshopHeichi:1117 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 410 db 411 db 412 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7742 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 459 db 460 db 461 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7791 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1118SpriteCharPornHeichi:1119 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 1247 db 2558 db 1959 db 19210 db 12711 db 12712 db 12713 db 12414 db 12415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 20624 db 25525 db 5126 db 25227 db 25428 db 20629 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 13140 db 12841 db 12842 db 12843 db 12844 db 12845 db 13146 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 20656 db 4957 db 158 db 259 db 160 db 4961 db 20662 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 6073 db 6374 db 6375 db 6376 db 6077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 20490 db 24891 db 20492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 115105 db 255106 db 204107 db 63108 db 127109 db 115110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 62120 db 255121 db 195122 db 3123 db 254124 db 254125 db 254126 db 62127 db 62128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 115137 db 140138 db 128139 db 64140 db 128141 db 140142 db 115143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 193153 db 1154 db 1155 db 1156 db 1157 db 1158 db 193159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 51171 db 31172 db 51173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 60186 db 252187 db 252188 db 252189 db 60190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1120SpriteColPornHeichi:1121 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 18 db 19 db 110 db 211 db 212 db 213 db 214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7841 db 7842 db 7843 db 7844 db 7845 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 157 db 158 db 159 db 260 db 261 db 262 db 263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7890 db 7891 db 7892 db 7893 db 7894 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1122SpriteCharYamaKnight:1123 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tgs.gen12 db 03 db 14 db 155 db 636 db 1277 db 1268 db 619 db 6110 db 2911 db 3012 db 1413 db 1414 db 615 db 616 db 217 db 118 db 6219 db 25520 db 24921 db 23022 db 15223 db 9624 db 12825 db 026 db 027 db 12828 db 12829 db 12830 db 12831 db 12832 db 12833 db 034 db 035 db 136 db 1537 db 6238 db 11239 db 9640 db 4941 db 4942 db 2543 db 2444 db 1245 db 1246 db 447 db 448 db 149 db 050 db 051 db 19352 db 19353 db 654 db 2455 db 9656 db 12857 db 058 db 059 db 12860 db 12861 db 12862 db 12863 db 12864 db 065 db 066 db 067 db 068 db 1469 db 4870 db 6471 db 6472 db 3373 db 3374 db 1775 db 1676 db 877 db 878 db 179 db 180 db 081 db 082 db 083 db 084 db 185 db 686 db 2487 db 9688 db 12889 db 090 db 091 db 12892 db 12893 db 12894 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 3103 db 15104 db 63105 db 126106 db 129107 db 126108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 48117 db 248118 db 248119 db 252120 db 252121 db 60122 db 222123 db 94124 db 46125 db 47126 db 23127 db 23128 db 11129 db 11130 db 6131 db 0132 db 0133 db 0134 db 3135 db 15136 db 60137 db 112138 db 129139 db 126140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 200150 db 216151 db 12152 db 12153 db 12154 db 198155 db 70156 db 38157 db 35158 db 19159 db 19160 db 9161 db 9162 db 0163 db 0164 db 0165 db 0166 db 3167 db 12168 db 48169 db 64170 db 129171 db 126172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 8183 db 4184 db 4185 db 4186 db 194187 db 66188 db 34189 db 33190 db 17191 db 17192 db 4193 db 4194 db 0195196 db 0197 db 1198 db 1199 db 1200 db 1201 db 1202 db 1203 db 0204 db 0205 db 1206 db 6207 db 25208 db 103209 db 159210 db 255211 db 124212 db 128213 db 64214 db 96215 db 96216 db 112217 db 112218 db 120219 db 184220 db 188221 db 188222 db 126223 db 254224 db 252225 db 240226 db 128227 db 0228 db 0229 db 0230 db 1231 db 1232 db 1233 db 1234 db 1235 db 0236 db 0237 db 1238 db 6239 db 24240 db 96241 db 131242 db 131243 db 0244 db 0245 db 128246 db 32247 db 32248 db 48249 db 48250 db 24251 db 152252 db 140253 db 140254 db 6255 db 14256 db 124257 db 240258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 1265 db 1266 db 1267 db 0268 db 0269 db 1270 db 6271 db 24272 db 96273 db 128274 db 0275 db 0276 db 0277 db 0278 db 128279 db 128280 db 16281 db 16282 db 8283 db 136284 db 132285 db 132286 db 2287 db 2288 db 12289 db 112290 db 0291 db 0292293 db 96294 db 208295 db 208296 db 232297 db 232298 db 244299 db 116300 db 122301 db 123302 db 60303 db 63304 db 63305 db 31306 db 31307 db 12308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 0316 db 126317 db 129318 db 126319 db 252320 db 240321 db 192322 db 0323 db 0324 db 0325 db 0326 db 144327 db 144328 db 200329 db 200330 db 196331 db 100332 db 98333 db 99334 db 48335 db 48336 db 48337 db 27338 db 19339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 126349 db 129350 db 14351 db 60352 db 240353 db 192354 db 0355 db 0356 db 0357 db 0358 db 32359 db 32360 db 136361 db 136362 db 132363 db 68364 db 66365 db 67366 db 32367 db 32368 db 32369 db 16370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 126381 db 129382 db 2383 db 12384 db 48385 db 192386 db 0387 db 0388 db 0389MSXHeroes.asm1124SpriteColYamaKnight:1125 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tcs.gen12 db 133 db 94 db 85 db 86 db 87 db 88 db 89 db 810 db 811 db 812 db 813 db 814 db 915 db 916 db 1317 db 1318 db 25519 db 7720 db 7321 db 7322 db 7323 db 7324 db 7325 db 7326 db 7327 db 7328 db 7329 db 7330 db 7731 db 7732 db 7833 db 25534 db 25535 db 25536 db 7737 db 7738 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 7847 db 7848 db 25549 db 2555051 db 25552 db 1353 db 954 db 855 db 856 db 857 db 858 db 859 db 860 db 861 db 862 db 863 db 864 db 965 db 966 db 1367 db 25568 db 25569 db 7770 db 7371 db 7372 db 7373 db 7374 db 7375 db 7376 db 7377 db 7378 db 7379 db 7380 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 7787 db 7788 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 7795 db 7796 db 7897 db 7898 db 25599100 db 13101 db 13102 db 9103 db 9104 db 8105 db 8106 db 8107 db 8108 db 8109 db 8110 db 8111 db 8112 db 8113 db 8114 db 9115 db 13116 db 255117 db 78118 db 77119 db 77120 db 73121 db 73122 db 73123 db 73124 db 73125 db 73126 db 73127 db 73128 db 73129 db 73130 db 77131 db 255132 db 255133 db 255134 db 78135 db 78136 db 77137 db 77138 db 77139 db 77140 db 77141 db 77142 db 77143 db 77144 db 77145 db 77146 db 255147 db 255148149 db 13150 db 9151 db 9152 db 8153 db 8154 db 8155 db 8156 db 8157 db 8158 db 8159 db 8160 db 8161 db 8162 db 9163 db 13164 db 255165 db 255166 db 77167 db 77168 db 73169 db 73170 db 73171 db 73172 db 73173 db 73174 db 73175 db 73176 db 73177 db 73178 db 77179 db 255180 db 255181 db 255182 db 78183 db 78184 db 77185 db 77186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 77193 db 77194 db 255195 db 255196 db 255197MSXHeroes.asm1126SpriteCharGooGoo:1127 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tgs.gen12 db 03 db 04 db 05 db 06 db 647 db 648 db 1279 db 12710 db 12711 db 6412 db 6413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 25225 db 25426 db 25227 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 19140 db 3241 db 042 db 3243 db 19144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 25256 db 457 db 258 db 459 db 25260 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 12873 db 12874 db 12875 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 289 db 190 db 291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 63106 db 127107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 2120 db 2121 db 254122 db 254123 db 254124 db 2125 db 2126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 63137 db 32138 db 64139 db 32140 db 63141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 253153 db 4154 db 0155 db 4156 db 253157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 64170 db 128171 db 64172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 1186 db 1187 db 1188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1128SpriteColGooGoo:1129 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 78 db 69 db 610 db 611 db 712 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7125 db 7126 db 7127 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 757 db 658 db 659 db 660 db 761 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7174 db 7175 db 7176 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1130SpriteCharScreech:1131 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tgs.gen12 db 03 db 284 db 285 db 506 db 1147 db 48 db 49 db 6710 db 8211 db 5312 db 3013 db 3014 db 015 db 016 db 017 db 018 db 019 db 11220 db 11221 db 25222 db 23623 db 1624 db 025 db 24826 db 21627 db 20028 db 5629 db 6030 db 2831 db 832 db 033 db 034 db 035 db 036 db 2037 db 438 db 3639 db 040 db 12241 db 442 db 3743 db 344 db 1845 db 3046 db 047 db 048 db 049 db 050 db 051 db 052 db 11253 db 8854 db 12055 db 1656 db 12057 db 1658 db 9659 db 4860 db 3261 db 3662 db 2063 db 064 db 065 db 066 db 067 db 068 db 3469 db 4270 db 7471 db 5672 db 6673 db 12374 db 7475 db 4076 db 3377 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 13685 db 13286 db 13287 db 088 db 12089 db 13690 db 13691 db 20092 db 6893 db 094 db 095 db 096 db 097 db 09899 db 0100 db 14101 db 14102 db 63103 db 55104 db 8105 db 0106 db 31107 db 27108 db 19109 db 28110 db 60111 db 56112 db 16113 db 0114 db 0115 db 0116 db 56117 db 56118 db 76119 db 78120 db 32121 db 32122 db 194123 db 74124 db 172125 db 120126 db 120127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 14134 db 26135 db 30136 db 8137 db 30138 db 8139 db 6140 db 12141 db 4142 db 36143 db 40144 db 0145 db 0146 db 0147 db 0148 db 0149 db 40150 db 32151 db 36152 db 0153 db 94154 db 32155 db 164156 db 192157 db 72158 db 120159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 17166 db 33167 db 33168 db 0169 db 30170 db 17171 db 17172 db 19173 db 34174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 68182 db 84183 db 82184 db 28185 db 66186 db 222187 db 82188 db 20189 db 132190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm1132SpriteColScreech:1133 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tcs.gen12 db 2553 db 134 db 25 db 16 db 17 db 28 db 29 db 110 db 111 db 112 db 213 db 114 db 115 db 1316 db 25517 db 25518 db 25519 db 25520 db 6721 db 6622 db 6623 db 6724 db 7625 db 6626 db 6627 db 6628 db 6729 db 7730 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 7737 db 7638 db 7639 db 7640 db 7741 db 7642 db 7643 db 7644 db 7745 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 1353 db 254 db 155 db 156 db 257 db 258 db 159 db 160 db 161 db 262 db 163 db 164 db 1365 db 25566 db 25567 db 25568 db 25569 db 6770 db 6671 db 6672 db 6773 db 7674 db 6675 db 6676 db 6677 db 6778 db 7779 db 7780 db 25581 db 25582 db 25583 db 25584 db 25585 db 7786 db 7687 db 7688 db 7689 db 7790 db 7691 db 7692 db 7693 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm1134SpriteCharPastryChef:1135 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tgs.gen12 db 03 db 04 db 15 db 46 db 147 db 468 db 2479 db 25510 db 25511 db 24712 db 4613 db 1414 db 415 db 116 db 017 db 018 db 2019 db 15620 db 20621 db 23822 db 23123 db 11924 db 11925 db 11926 db 11927 db 11928 db 11929 db 23130 db 23831 db 20632 db 15633 db 2034 db 035 db 036 db 137 db 438 db 1039 db 4240 db 21341 db 10942 db 10943 db 21344 db 4245 db 1046 db 447 db 148 db 049 db 050 db 851 db 14852 db 7453 db 17054 db 16555 db 8556 db 8557 db 8558 db 8559 db 8560 db 8561 db 16562 db 17063 db 7464 db 14865 db 866 db 067 db 068 db 069 db 470 db 471 db 3272 db 073 db 074 db 075 db 076 db 3277 db 478 db 479 db 080 db 081 db 082 db 083 db 12884 db 12885 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 12896 db 12897 db 09899 db 40100 db 57101 db 115102 db 119103 db 231104 db 238105 db 238106 db 238107 db 238108 db 238109 db 238110 db 231111 db 119112 db 115113 db 57114 db 40115 db 0116 db 0117 db 128118 db 32119 db 112120 db 116121 db 239122 db 255123 db 255124 db 239125 db 116126 db 112127 db 32128 db 128129 db 0130 db 0131 db 16132 db 41133 db 82134 db 85135 db 165136 db 170137 db 170138 db 170139 db 170140 db 170141 db 170142 db 165143 db 85144 db 82145 db 41146 db 16147 db 0148 db 0149 db 128150 db 32151 db 80152 db 84153 db 171154 db 182155 db 182156 db 171157 db 84158 db 80159 db 32160 db 128161 db 0162 db 0163 db 0164 db 1165 db 1166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 1177 db 1178 db 0179 db 0180 db 0181 db 0182 db 32183 db 32184 db 4185 db 0186 db 0187 db 0188 db 0189 db 4190 db 32191 db 32192 db 0193 db 0194 db 0195MSXHeroes.asm1136SpriteColPastryChef:1137 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tcs.gen12 db 133 db 124 db 125 db 126 db 127 db 128 db 129 db 1210 db 1211 db 1212 db 1213 db 1214 db 1215 db 1216 db 1217 db 1318 db 7819 db 7720 db 7721 db 7722 db 7723 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 7731 db 7732 db 7733 db 7834 db 25535 db 7936 db 7837 db 7938 db 7839 db 7940 db 25541 db 25542 db 25543 db 25544 db 7945 db 7846 db 7947 db 7848 db 7949 db 2555051 db 1352 db 1253 db 1254 db 1255 db 1256 db 1257 db 1258 db 1259 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 7868 db 7769 db 7770 db 7771 db 7772 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 7883 db 25584 db 7985 db 7886 db 7987 db 7888 db 7989 db 25590 db 25591 db 25592 db 25593 db 7994 db 7895 db 7996 db 7897 db 7998 db 25599MSXHeroes.asm1138SpriteCharVicViper:1139 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 1279 db 12810 db 12811 db 12712 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 3223 db 11224 db 25425 db 12726 db 12727 db 25428 db 11229 db 3230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 12741 db 042 db 043 db 12744 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 8056 db 22257 db 3258 db 3259 db 22260 db 8061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 25574 db 25575 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 19390 db 19391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 2103 db 7104 db 3105 db 3106 db 2107 db 3108 db 7109 db 7110 db 15111 db 15112 db 30113 db 30114 db 12115 db 48116 db 120117 db 120118 db 240119 db 240120 db 224121 db 240122 db 120123 db 208124 db 128125 db 128126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 2135 db 5136 db 0137 db 0138 db 3139 db 2140 db 4141 db 4142 db 9143 db 9144 db 18145 db 18146 db 0147 db 0148 db 72149 db 72150 db 144151 db 144152 db 128153 db 64154 db 232155 db 80156 db 128157 db 128158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 2169 db 3170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 32185 db 144186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 12197 db 30198 db 30199 db 15200 db 15201 db 7202 db 15203 db 30204 db 11205 db 1206 db 1207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 64216 db 224217 db 192218 db 192219 db 64220 db 192221 db 224222 db 224223 db 240224 db 240225 db 120226 db 120227 db 48228 db 0229 db 18230 db 18231 db 9232 db 9233 db 1234 db 2235 db 23236 db 10237 db 1238 db 1239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 64248 db 160249 db 0250 db 0251 db 192252 db 64253 db 32254 db 32255 db 144256 db 144257 db 72258 db 72259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 4266 db 9267 db 0268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 64282 db 192283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 4298 db 14299 db 127300 db 254301 db 254302 db 127303 db 14304 db 4305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 254316 db 1317 db 1318 db 254319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 10331 db 123332 db 4333 db 4334 db 123335 db 10336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 254348 db 0349 db 0350 db 254351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 131365 db 131366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 255381 db 255382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 0395 db 1396 db 1397 db 11398 db 30399 db 15400 db 7401 db 15402 db 15403 db 30404 db 30405 db 12406 db 48407 db 120408 db 120409 db 240410 db 240411 db 224412 db 224413 db 192414 db 64415 db 192416 db 192417 db 224418 db 64419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 0427 db 1428 db 1429 db 10430 db 23431 db 2432 db 1433 db 9434 db 9435 db 18436 db 18437 db 0438 db 0439 db 72440 db 72441 db 144442 db 144443 db 32444 db 32445 db 64446 db 192447 db 0448 db 0449 db 160450 db 64451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 0462 db 0463 db 9464 db 4465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 0478 db 0479 db 192480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 12488 db 30489 db 30490 db 15491 db 15492 db 7493 db 7494 db 3495 db 2496 db 3497 db 3498 db 7499 db 2500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 128509 db 128510 db 208511 db 120512 db 240513 db 224514 db 240515 db 240516 db 120517 db 120518 db 48519 db 0520 db 18521 db 18522 db 9523 db 9524 db 4525 db 4526 db 2527 db 3528 db 0529 db 0530 db 5531 db 2532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 128541 db 128542 db 80543 db 232544 db 64545 db 128546 db 144547 db 144548 db 72549 db 72550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 0559 db 0560 db 3561 db 2562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 0576 db 144577 db 32578 db 0579 db 0580 db 0581 db 0582 db 0583MSXHeroes.asm1140SpriteColVicViper:1141 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 98 db 99 db 910 db 911 db 912 db 913 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7526 db 7527 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 7643 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 953 db 954 db 955 db 956 db 957 db 958 db 959 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 25568 db 7769 db 7770 db 7771 db 7772 db 7573 db 7574 db 7675 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 13101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 12109 db 12110 db 12111 db 12112 db 12113 db 12114 db 12115 db 13116 db 255117 db 77118 db 77119 db 77120 db 77121 db 75122 db 75123 db 76124 db 77125 db 77126 db 77127 db 77128 db 77129 db 77130 db 77131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 77138 db 77139 db 255140 db 255141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 9155 db 9156 db 9157 db 9158 db 9159 db 9160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 77171 db 77172 db 75173 db 75174 db 77175 db 77176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 76189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 13199 db 12200 db 12201 db 12202 db 12203 db 12204 db 12205 db 12206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 13214 db 255215 db 77216 db 77217 db 77218 db 77219 db 77220 db 77221 db 77222 db 76223 db 75224 db 75225 db 77226 db 77227 db 77228 db 77229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 255238 db 255239 db 77240 db 77241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 13248 db 12249 db 12250 db 12251 db 12252 db 12253 db 12254 db 12255 db 9256 db 9257 db 9258 db 9259 db 9260 db 9261 db 9262 db 13263 db 255264 db 77265 db 77266 db 77267 db 77268 db 77269 db 77270 db 77271 db 76272 db 75273 db 75274 db 77275 db 77276 db 77277 db 77278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 255287 db 255288 db 77289 db 77290 db 255291 db 255292 db 255293 db 255294 db 255295MSXHeroes.asm1142SpriteCharAndorogynus:1143 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tgs.gen12 db 03 db 04 db 15 db 26 db 77 db 78 db 39 db 110 db 011 db 112 db 213 db 714 db 715 db 316 db 117 db 018 db 019 db 020 db 12821 db 6422 db 22423 db 22424 db 19225 db 12826 db 027 db 12828 db 6429 db 22430 db 22431 db 19232 db 12833 db 034 db 035 db 036 db 037 db 138 db 439 db 440 db 241 db 042 db 043 db 044 db 145 db 446 db 447 db 248 db 049 db 050 db 051 db 052 db 053 db 12854 db 3255 db 16056 db 6457 db 058 db 059 db 060 db 12861 db 3262 db 16063 db 6464 db 065 db 066 db 067 db 068 db 069 db 070 db 271 db 072 db 073 db 074 db 075 db 076 db 077 db 278 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 6487 db 088 db 089 db 090 db 091 db 092 db 093 db 6494 db 095 db 096 db 097 db 098MSXHeroes.asm1144SpriteColAndorogynus:1145 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tcs.gen12 db 2553 db 2554 db 135 db 136 db 127 db 128 db 129 db 1310 db 25511 db 1312 db 1313 db 1214 db 1215 db 1216 db 1317 db 25518 db 25519 db 25520 db 25521 db 7822 db 7723 db 7724 db 7725 db 25526 db 25527 db 25528 db 7829 db 7730 db 7731 db 7732 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7839 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 7846 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm1146SpriteCharNinjaKun:1147 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 19 db 110 db 1511 db 712 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 12823 db 12824 db 12825 db 24026 db 24827 db 19228 db 19229 db 19230 db 19231 db 12832 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 1543 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 12059 db 860 db 19261 db 062 db 12863 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 1576 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 11292 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 4105 db 7106 db 7107 db 1108 db 3109 db 3110 db 7111 db 6112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 48121 db 112122 db 224123 db 64124 db 224125 db 240126 db 112127 db 16128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 7138 db 3139 db 0140 db 0141 db 3142 db 6143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 96154 db 224155 db 32156 db 0157 db 112158 db 16159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 2172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 192188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 0200 db 1201 db 1202 db 1203 db 1204 db 7205 db 15206 db 15207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 128218 db 128219 db 248220 db 248221 db 192222 db 192223 db 192224 db 192225 db 64226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 0233 db 0234 db 0235 db 0236 db 7237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 112253 db 16254 db 192255 db 0256 db 64257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 15270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 96286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292MSXHeroes.asm1148SpriteColNinjaKun:1149 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 138 db 139 db 1310 db 1211 db 912 db 1213 db 1314 db 1215 db 1216 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 7727 db 7428 db 7729 db 25530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 7644 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 1258 db 1259 db 960 db 1361 db 1262 db 1263 db 1264 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7774 db 7775 db 7476 db 25577 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 25591 db 7692 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 255104 db 13105 db 13106 db 13107 db 13108 db 12109 db 9110 db 12111 db 13112 db 12113 db 12114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 255121 db 255122 db 255123 db 255124 db 77125 db 74126 db 77127 db 255128 db 77129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 76142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148MSXHeroes.asm1150 ds $8000-$,$ff1151dephase11531156ScrollBlock: equ $461157phase $40001158 incbin "..\grapx\ObjectsOnMap\Scroll.SC5",7,162 * 128 1159 ds $c000-$,$ff1160dephase11621165ChestBlock: equ $481166phase $40001167 incbin "..\grapx\ObjectsOnMap\Chest.SC5",7,174 * 128 1168 ds $c000-$,$ff1169dephase11711174LevelUpBlock: equ $4a1175phase $40001176 incbin "..\grapx\HeroOverview\LevelUp.SC5",7,173 * 128 1177 ds $c000-$,$ff1178dephase11801183HudNewBlock: equ $4c1184phase $40001185 incbin "..\grapx\hud\HudNew.SC5",7,212 * 128 1186 ds $c000-$,$ff1187dephase11891192SecondarySkillsButtonsBlock: equ $4e1193phase $40001194 incbin "..\grapx\HeroOverview\SecondarySkillsButtons.SC5",7,165 * 128 1195 ds $c000-$,$ff1196dephase11981199BattleCodeBlock: equ $501200phase $40001201 BattleCode.asm1CheckEnemyAI:2 ld a,(MoVeMonster?) 3 or a4 ret nz6 ld a,(SwitchToNextMonster?)7 or a8 ret nz10 call SetCurrentActiveMOnsterInIX11 push ix12 pop hl13 ld a,l14 or h 15 jr z,.NeutralOrComputerControlledMonsterFound17 ld a,(HeroThatGetsAttacked) 18 or a 19 jr z,.EndCheckPlayerGetsAttackIsHuman?21 ld a,(PlayerThatGetsAttacked) 22 ld hl,player1human?-123 ld d,024 ld e,a25 add hl,de26 ld a,(hl)27 or a28 ret nz 29 .EndCheckPlayerGetsAttackIsHuman?:31 ld a,(CurrentActiveMonster) 32 cp 733 jp c,.HumanPlayerFound 34 35 .NeutralOrComputerControlledMonsterFound:36 call SetMonsterTableInIY 38 call SetTotalMonsterSpeedInHL 39 ld c,l41 ld d,(iy+MonsterTableSpecialAbility)424445 ld a,BattleCodePage2Block 46 call block34 47 call HandleEnemyAI 49 ret51.HumanPlayerFound:52 ld a,(AutoCombatButtonPressed?)53 or a54 ret z55 jr .NeutralOrComputerControlledMonsterFound57HandleMonsters:586062 call CheckRightClickToDisplayInfo 63 call CheckSpaceToMoveMonster64 call CheckMonsterDied 65 call CheckSwitchToNextMonster66 call SetCurrentMonsterInBattleFieldGrid 67 call CheckEnemyAI 6970 ld a,BattleCodePage2Block 71 call block34 72 call SetBattleText73 call AnimateAutoCombatButton74 call HandleSpellBook 75 call HandleSpellCast 7879 call SetCurrentActiveMOnsterInIX80 call StoreSYSXNYNXAndBlock 81 call EraseMonsterPreviousFrame 82 call MoveMonster 83 call CheckWaitButtonPressed84 call CheckDefendButtonPressed85 call AnimateMonster 8788 ld ix,Monster089 call StoreSYSXNYNXAndBlock 91 call CheckWasCursorOnATilePreviousFrame92 ld a,(WasCursorOnATilePreviousFrame?)93 or a94 jr z,.EndEraseGridTile96 call EraseMonsterPreviousFrame 98 .EndEraseGridTile:100 call MoveMonster 101 call SortMonstersFromHighToLow 103104 call SetCurrentActiveMOnsterInIX105 call SetAmountUnderMonster106 call StoreSYSXNYNXAndBlock 107 call PutMonster 109110 ld a,(MoVeMonster?) 111 or a112 jr nz,.EndPutGridTile113 ld a,(SwitchToNextMonster?)114 or a115 jr nz,.EndPutGridTile117 call CheckIsCursorOnATileThisFrame118 call SetcursorWhenGridTileIsActive 120 ld a,(IsCursorOnATileThisFrame?)121 or a122 jr z,.EndPutGridTile123 124 ld ix,Monster0125 call StoreSYSXNYNXAndBlock 126 call PutMonster 127 .EndPutGridTile:129130 call SetCurrentActiveMOnsterInIX131 call StoreSYSXNYNXAndBlock 132 call Recover134135 ld a,(MoVeMonster?) 136 or a137 jr nz,.EndRecoverGridTile138 ld a,(SwitchToNextMonster?)139 or a140 jr nz,.EndRecoverGridTile141 ld a,(IsCursorOnATileThisFrame?)142 or a143 jr z,.EndRecoverGridTile145 ld ix,Monster0146 call StoreSYSXNYNXAndBlock 147 call Recover148 .EndRecoverGridTile:149 ret151PressMToLookAtPage2And3:152 ld a,(NewPrContr)153 bit 5,a 154 call nz,.SetPage2156 ld a,(NewPrContr)157 bit 6,a 158 ret z160.SetPage3:161 ld a,3*32+31162 call SetPageSpecial.setpage163 jp .WaitKeyPress165.SetPage2:166 ld a,2*32+31167 call SetPageSpecial.setpage168 jp .WaitKeyPress170.WaitKeyPress:171 call PopulateControls 172 ld a,(NewPrContr)173 bit 4,a 174 jp z,.WaitKeyPress175 ret177BattleScreenVerticalOffset: equ 16178InitiateBattle:179call screenoff183188 ld a,BattleScreenVerticalOffset 189 di190 out ($99),a191 ld a,23+128192 ei193 out ($99),a195201 xor a202 ld (MonsterDied?),a 203 ld (SurrenderButtonPressed?),a 204 ld (RetreatButtonPressed?),a 205 ld (MonsterAnimationStep),a206 ld (MonsterAnimationSpeed),a207 ld (MoVeMonster?),a208 ld (LeftOrRightPlayerLostEntireArmy?),a209 ld (AutoCombatButtonPressed?),a210 ld (LeftPlayerAlreadyCastSpellThisRound?),a211 ld (RightPlayerAlreadyCastSpellThisRound?),a212216217 ld a,BattleCodePage2Block 218 call block34 219 call ClearBattleFieldGridStartOfBattle220 call ClearBattleText221222 call SetFontPage0Y250 223 call SetBattleButtons224226 call BuildUpBattleFieldAndPutMonsters228 229 ld a,r230 and 3231 ld b,SongWarzoneC232 jr z,.SongWarzoneFound233 dec a234 ld b,SongWarzoneB235 jr z,.SongWarzoneFound236 ld b,SongWarzoneA237 .SongWarzoneFound:238 ld a,b239 ld (ChangeSong?),a241 .engine:242244 ld a,(framecounter)245 inc a246 ld (framecounter),a248 call SwapAndSetPage 249 call PopulateControls 250 call HandleMonsters251 call CheckVictoryOrDefeat 252 call CheckRetreatOrSurrender 254 255 ld ix,GenericButtonTable256 call CheckButtonInteractionControlsNotOnInt257 call .CheckBattleButtonClicked 259 ld ix,GenericButtonTable260 call .SetGenericButtons 262 263272 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady273 call DoCopy275280283 284 ld a,01 285 ld hl,vblankintflag 286 .checkflag:287 cp (hl)288 jr nc,.checkflag289 ld (hl),0290 halt291 call screenon292 jp .engine294.CheckBattleButtonClicked: 295 ret nc297 ld a,(MoVeMonster?) 298 or a299 jr nz,.CheckAutoCombatButton 301 ld a,(SwitchToNextMonster?)302 or a303 jr nz,.CheckAutoCombatButton 305 ld a,b306 cp 9307 jp z,.DiskOptionsButtonPressed308 cp 8309 jp z,.RetreatButtonPressed310 cp 7311 jp z,.SurrenderButtonPressed312 cp 6313 jr z,.WaitButtonPressed314 cp 5315 jr z,.DefendButtonPressed316 cp 4317 jr z,.SpellBookButtonPressed318 cp 2319 jr z,.BattleTextUpButtonPressed320 cp 1321 jr z,.BattleTextDownButtonPressed322 .CheckAutoCombatButton:323 ld a,b324 cp 3325 jr z,.AutoCombatButtonPressed326 ret328.BattleTextDownButtonPressed:329 ld hl,(BattleTextPointer)330 ld bc,BattleTextQ-BattleText1331 add hl,bc333 ld de,BattleText1334 call CompareHLwithDE 335 ret nc336 337 add hl,de338 ld (BattleTextPointer),hl340 ld a,128341 ld (SetBattleText?),a342 ret344.BattleTextUpButtonPressed:345 ld hl,(BattleTextPointer)346 ld bc,BattleTextQ-BattleText1347 or a348 sbc hl,bc350 ld de,BattleText8351 call CompareHLwithDE 352 ret c353 354 add hl,de355 ld (BattleTextPointer),hl357 ld a,128358 ld (SetBattleText?),a359 ret360 361.AutoCombatButtonPressed:362 ld a,(AutoCombatButtonPressed?)363 xor 1364 ld (AutoCombatButtonPressed?),a365 ret367.WaitButtonPressed:368 ld a,1369 ld (WaitButtonPressed?),a370 ret372.SpellBookButtonPressed:373 374 ld hl,(GenericButtonTable + (5*GenericButtonTableLenghtPerButton) + 1)375 ld de,$4000 + (090*128) + (214/2) - 128376 call CompareHLwithDE 377 ret z379 ld a,1380 ld (SpellBookButtonPressed?),a381 jp EndSpellSelected383.DefendButtonPressed:384 ld a,1385 ld (DefendButtonPressed?),a386 ret388.SurrenderButtonPressed:389 390 ld hl,(GenericButtonTable + (2*GenericButtonTableLenghtPerButton) + 1)391 ld de,$4000 + (110*128) + (178/2) - 128392 call CompareHLwithDE 393 ret z395 ld a,1396 ld (SurrenderButtonPressed?),a397 jp EndSpellSelected399.RetreatButtonPressed:400 401 ld hl,(GenericButtonTable + (1*GenericButtonTableLenghtPerButton) + 1)402 ld de,$4000 + (110*128) + (160/2) - 128403 call CompareHLwithDE 404 ret z406 ld a,1407 ld (RetreatButtonPressed?),a408 jp EndSpellSelected410.DiskOptionsButtonPressed:411 jp EndSpellSelected413.SetGenericButtons: 414 ld a,(ix+GenericButtonGfxBlock)415 ld (ButtonGfxBlockCopy),a417 ld b,(ix+GenericButtonAmountOfButtons)418 .loop:419 push bc420 call .Setbutton421 pop bc422 ld de,GenericButtonTableLenghtPerButton423 add ix,de425 djnz .loop426 ret428 .Setbutton:429 bit 7,(ix+GenericButtonStatus)430 ret z 432 bit 0,(ix+GenericButtonStatus) 433 res 0,(ix+GenericButtonStatus) 434 jr nz,.goCopyButton435 bit 1,(ix+GenericButtonStatus)436 res 1,(ix+GenericButtonStatus)437 ret z 438 .goCopyButton:440 ld l,(ix+GenericButton_SYSX_Ontouched)441 ld h,(ix+GenericButton_SYSX_Ontouched+1)442 bit 6,(ix+GenericButtonStatus)443 jr nz,.go 445 ld l,(ix+GenericButton_SYSX_MovedOver)446 ld h,(ix+GenericButton_SYSX_MovedOver+1)447 bit 5,(ix+GenericButtonStatus)448 jr nz,.go 450 ld l,(ix+GenericButton_SYSX_Clicked)451 ld h,(ix+GenericButton_SYSX_Clicked+1)452 .go:454 455 ld e,(ix+GenericButton_DYDX)456 ld d,(ix+GenericButton_DYDX+1)458 ld a,(ix+GenericButtonYbottom)459 sub a,(ix+GenericButtonYtop)460 ld b,a 461 ld a,(ix+GenericButtonXright)462 sub a,(ix+GenericButtonXleft)463 srl a 464 ld c,a 467 ld a,(ButtonGfxBlockCopy)469471 ld de,$8000 + ((212+16)*128) + (000/2) - 128 472 call CopyRamToVramCorrectedWithoutActivePageSetting 474 ld a,(activepage)475 xor 1476 ld (CopyCastleButton2+dPage),a478 ld a,(ix+GenericButtonXleft)479 ld (CopyCastleButton2+dx),a480 ld a,(ix+GenericButtonYtop)481 ld (CopyCastleButton2+dy),a483 ld a,(ix+GenericButtonYbottom)484 sub a,(ix+GenericButtonYtop)485 ld (CopyCastleButton2+ny),a487 ld a,(ix+GenericButtonXright)488 sub a,(ix+GenericButtonXleft)489 ld (CopyCastleButton2+nx),a491 ld a,212+16492 ld (CopyCastleButton2+sy),a494 ld hl,CopyCastleButton2495 call docopy497 ld a,212498 ld (CopyCastleButton2+sy),a500 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady501 call docopy502 ret504SetMonsterTableInIY:505 ld a,(slot.page12rom) 506 out ($a8),a 508 509 ld a,MonsterAddressesForBattle1Block 510 call block34 512 ld h,0513 ld l,(ix+MonsterNumber)514 ld de,LengthMonsterAddressesTable515 call MultiplyHlWithDE 516 ld iy,Monster001Table-LengthMonsterAddressesTable 517 ex de,hl518 add iy,de519 ret521525 529532541SetMonsterTableInIYNeutralMonster:542 ld a,MonsterAddressesForBattle1Block 543 call block34 545 546 call SetNeutralMonsterHeroCollidedWithInA548 ld h,0549 ld l,a550 ld de,LengthMonsterAddressesTable551 call MultiplyHlWithDE 552 ld iy,Monster001Table-LengthMonsterAddressesTable 553 ex de,hl554 add iy,de555 ret567CheckRetreatOrSurrender:568 ld a,(SurrenderButtonPressed?)569 or a 570 jp nz,SurrenderButtonPressed571 ld a,(RetreatButtonPressed?)572 or a 573 jp nz,RetreatButtonPressed574 ret576CalculateCostToSurrender: 577 ld a,(CurrentActiveMonster) 578 cp 7579 jr c,.LeftPlayerSurrendered581 .RightPlayerSurrendered:582 ld ix,Monster7583 call .CalculateCostMonsters584 push hl586 ld ix,Monster8587 call .CalculateCostMonsters588 pop de589 add hl,de590 push hl592 ld ix,Monster9593 call .CalculateCostMonsters594 pop de595 add hl,de596 push hl598 ld ix,Monster10599 call .CalculateCostMonsters600 pop de601 add hl,de602 push hl604 ld ix,Monster11605 call .CalculateCostMonsters606 pop de607 add hl,de608 push hl610 ld ix,Monster12611 call .CalculateCostMonsters612 pop de613 add hl,de614 615 616 ld de,5617 call MultiplyHlWithDE 618 ret620 .LeftPlayerSurrendered:621 ld ix,Monster1622 call .CalculateCostMonsters623 push hl625 ld ix,Monster2626 call .CalculateCostMonsters627 pop de628 add hl,de629 push hl631 ld ix,Monster3632 call .CalculateCostMonsters633 pop de634 add hl,de635 push hl637 ld ix,Monster4638 call .CalculateCostMonsters639 pop de640 add hl,de641 push hl643 ld ix,Monster5644 call .CalculateCostMonsters645 pop de646 add hl,de647 push hl649 ld ix,Monster6650 call .CalculateCostMonsters651 pop de652 add hl,de654 655 ld de,5656 call MultiplyHlWithDE 657 ret659 .CalculateCostMonsters:660 push ix661 call SetMonsterTableInIY 662 ld d,0663 ld e,(iy+MonsterTableCostGold)664 pop ix665 ld l,(ix+MonsterAmount)666 ld h,(ix+MonsterAmount+1)667 call MultiplyHlWithDE 668 ret670SurrenderButtonPressed:671 xor a672 ld (SurrenderButtonPressed?),a674 ld (MoVeMonster?),a 675 or a676 ret nz 678 call .BackupBackGround679 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady680 call DoCopy682 ld hl,$4000 + (000*128) + (000/2) - 128683 ld de,$0000 + ((120+16)*128) + (014/2) - 128684 ld bc,$0000 + (059*256) + (228/2)685 ld a,RetreatBlock 686 call CopyRamToVramCorrectedCastleOverview 688 call CalculateCostToSurrender 690 691 ld b,125 692 ld c,142+16 694 call SetNumber16BitCastle695 696 697 ld a,(CurrentActiveMonster) 698 cp 7699 ld ix,(HeroThatGetsAttacked) 700 jr c,.CurrentActiveHeroFound701 ld ix,(plxcurrentheroAddress)702 .CurrentActiveHeroFound:703 ld b,123 704 ld c,135+16 705 ld l,(ix+HeroSpecificInfo+0) 706 ld h,(ix+HeroSpecificInfo+1)707 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel708 call SetText 709 710 call SwapAndSetPage 711 call CheckVictoryOrDefeat.CopyActivePageToInactivePage712 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady713 call DoCopy715 call SetSurrenderButtons717 .engine:718 call SwapAndSetPage 719 call PopulateControls 721 722 ld ix,GenericButtonTable2723 call CheckButtonInteractionControlsNotOnInt724 call .CheckSurrenderButtonClicked 726 ld ix,GenericButtonTable2727 call InitiateBattle.SetGenericButtons 730 ld a,(NewPrContr)731 bit 5,a 732 call nz,.NoPressed733 jp .engine735.CheckSurrenderButtonClicked: 736 ret nc738 ld a,b739 cp 2740 jr z,.YesPressed741743 744 .NoPressed:745 call .RestoreBackGround746 pop af 747 ret749 .YesPressed:750 751 ld a,(CurrentActiveMonster) 752 cp 7753 jr c,.LeftPlayerSurrendered754 .RightPlayerSurrendered:755 call CalculateXpGainedLeftPlayer 756 ld ix,(plxcurrentheroAddress) 758 ld e,(ix+HeroXp+0)759 ld d,(ix+HeroXp+1)760 add hl,de761 jr c,.EndCheckOverflow1762 ld (ix+HeroXp+0),l763 ld (ix+HeroXp+1),h764 .EndCheckOverflow1:765 jr .EndCheckOverflow2767 .LeftPlayerSurrendered:768 call CalculateXpGainedRightPlayer 769 ld ix,(HeroThatGetsAttacked) 771 ld e,(ix+HeroXp+0)772 ld d,(ix+HeroXp+1)773 add hl,de774 jr c,.EndCheckOverflow2775 ld (ix+HeroXp+0),l776 ld (ix+HeroXp+1),h777 .EndCheckOverflow2: 779 call ExchangeSurrenderGoldBetweenHeroes780 call RemoveDeadMonstersAttacker781 call RemoveDeadMonstersDefender783 784 ld a,(CurrentActiveMonster) 785 cp 7786 ld ix,(plxcurrentheroAddress)787 jr c,.CurrentActiveHeroFound1788 ld ix,(HeroThatGetsAttacked) 789 .CurrentActiveHeroFound1:791 call HeroFledSurrendering792 pop af 793 pop af 795 ld a,StopSong796 ld (ChangeSong?),a797 ret799.RestoreBackGround:800 ld a,(activepage) 801 or a802 jr z,.ActivePageIs0803 804 .ActivePageIs1:805 ld hl,.RestorePage3toPage0806 call docopy807 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady808 call DoCopy 809 call SwapAndSetPage 810 ld hl,.RestorePage3toPage1811 call docopy812 ret813 .ActivePageIs0: 814 ld hl,.RestorePage3toPage1815 call docopy816 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady817 call DoCopy 818 call SwapAndSetPage 819 ld hl,.RestorePage3toPage0820 call docopy821 ret823.BackupBackGround:824 ld a,(activepage) 825 or a826 ld hl,.BackupPage1toPage3827 jp z,docopy828 ld hl,.BackupPage0toPage3829 jp docopy831.BackupPage1toPage3:832 db 014,000,120+16,001833 db 000,000,256-59,003834 db 228,000,059,000835 db 000,000,$d0 836.BackupPage0toPage3:837 db 014,000,120+16,000838 db 000,000,256-59,003839 db 228,000,059,000840 db 000,000,$d0 842.RestorePage3toPage0:843 db 000,000,256-59,003844 db 014,000,120+16,000845 db 228,000,059,000846 db 000,000,$d0 847.RestorePage3toPage1:848 db 000,000,256-59,003849 db 014,000,120+16,001850 db 228,000,059,000851 db 000,000,$d0 860ExchangeSurrenderGoldBetweenHeroes:861 call CalculateCostToSurrender 862 push hl863 pop de865 866 ld a,(CurrentActiveMonster) 867 cp 7868 ld a,(whichplayernowplaying?) 869 jr c,.SurrenderingPlayerFound870 ld a,(PlayerThatGetsAttacked)871 .SurrenderingPlayerFound:873 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA874 ld l,(ix+0)875 ld h,(ix+1) 876 or a877 sbc hl,de 878 ld (ix+0),l879 ld (ix+1),h 881 882 ld a,(CurrentActiveMonster) 883 cp 7884 ld a,(PlayerThatGetsAttacked)885 jr c,.VictoriousPlayerFound886 ld a,(whichplayernowplaying?) 887 .VictoriousPlayerFound:889 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA890 ld l,(ix+0)891 ld h,(ix+1) 892 add hl,de 893 ret c894 ld (ix+0),l895 ld (ix+1),h 896 ret903SetSurrenderButtons:904 ld hl,SurrenderButtonTable-2905 ld de,GenericButtonTable2-2906 ld bc,2+(GenericButtonTableLenghtPerButton*2)907 ldir909 call CalculateCostToSurrender 910 push hl911 pop de913 ld a,(CurrentActiveMonster) 914 cp 7915 ld a,(whichplayernowplaying?) 916 jr c,.SurrenderingPlayerFound917 ld a,(PlayerThatGetsAttacked)918 .SurrenderingPlayerFound:920 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA921 ld l,(ix+0)922 ld h,(ix+1) 923 or a924 sbc hl,de 925 ret nc927 xor a928 ld (GenericButtonTable2),a 929 ret931SurrenderButton1Ytop: equ 153+16932SurrenderButton1YBottom: equ SurrenderButton1Ytop + 019933SurrenderButton1XLeft: equ 062934SurrenderButton1XRight: equ SurrenderButton1XLeft + 020936SurrenderButton2Ytop: equ 154+16937SurrenderButton2YBottom: equ SurrenderButton2Ytop + 018938SurrenderButton2XLeft: equ 174939SurrenderButton2XRight: equ SurrenderButton2XLeft + 020941SurrenderButtonTableGfxBlock: db RetreatBlock942SurrenderButtonTableAmountOfButtons: db 2943SurrenderButtonTable: 944 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db SurrenderButton1Ytop,SurrenderButton1YBottom,SurrenderButton1XLeft,SurrenderButton1XRight | dw $0000 + (SurrenderButton1Ytop*128) + (SurrenderButton1XLeft/2) - 128 945 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db SurrenderButton2Ytop,SurrenderButton2YBottom,SurrenderButton2XLeft,SurrenderButton2XRight | dw $0000 + (SurrenderButton2Ytop*128) + (SurrenderButton2XLeft/2) - 128 947RetreatButtonPressed:948 xor a949 ld (RetreatButtonPressed?),a951 ld (MoVeMonster?),a 952 or a953 ret nz 955 call SurrenderButtonPressed.BackupBackGround956 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady957 call DoCopy959 ld hl,$4000 + (058*128) + (000/2) - 128960 ld de,$0000 + ((120+16)*128) + (014/2) - 128961 ld bc,$0000 + (059*256) + (228/2)962 ld a,RetreatBlock 963 call CopyRamToVramCorrectedCastleOverview 965 call SwapAndSetPage 966 call CheckVictoryOrDefeat.CopyActivePageToInactivePage967 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady968 call DoCopy970 call SetRetreatButtons972 .engine:973 call SwapAndSetPage 974 call PopulateControls 976 977 ld ix,GenericButtonTable2978 call CheckButtonInteractionControlsNotOnInt979 call .CheckRetreatButtonClicked 981 ld ix,GenericButtonTable2982 call InitiateBattle.SetGenericButtons 985 ld a,(NewPrContr)986 bit 5,a 987 call nz,SurrenderButtonPressed.NoPressed988 jp .engine990.CheckRetreatButtonClicked: 991 ret nc993 ld a,b994 cp 2995 jr z,.YesPressed996998 999 .NoPressed:1000 call SurrenderButtonPressed.RestoreBackGround1002 pop af 1003 ret1005 .YesPressed:1006 1007 ld a,(CurrentActiveMonster) 1008 cp 71009 jr c,.LeftPlayerRetreated1010 .RightPlayerRetreated:1011 call CalculateXpGainedLeftPlayer 1012 ld ix,(plxcurrentheroAddress) 1014 ld e,(ix+HeroXp+0)1015 ld d,(ix+HeroXp+1)1016 add hl,de1017 jr c,.EndCheckOverflow11018 ld (ix+HeroXp+0),l1019 ld (ix+HeroXp+1),h1020 .EndCheckOverflow1:1021 jr .EndCheckOverflow21023 .LeftPlayerRetreated:1024 call CalculateXpGainedRightPlayer 1025 ld ix,(HeroThatGetsAttacked) 1027 ld e,(ix+HeroXp+0)1028 ld d,(ix+HeroXp+1)1029 add hl,de1030 jr c,.EndCheckOverflow21031 ld (ix+HeroXp+0),l1032 ld (ix+HeroXp+1),h1033 .EndCheckOverflow2: 1035 call RemoveDeadMonstersAttacker1036 call RemoveDeadMonstersDefender1037 1038 1039 ld a,(CurrentActiveMonster) 1040 cp 71041 ld ix,(plxcurrentheroAddress)1042 jr c,.CurrentActiveHeroFound1043 ld ix,(HeroThatGetsAttacked) 1044 .CurrentActiveHeroFound:1046 call HeroFledRetreating1047 pop af 1048 pop af 1050 ld a,StopSong1051 ld (ChangeSong?),a1052 ret1054SetRetreatButtons:1055 ld hl,SurrenderButtonTable-21056 ld de,GenericButtonTable2-21057 ld bc,2+(GenericButtonTableLenghtPerButton*2)1058 ldir1059 ret1063RemoveDeadMonstersAttacker:1064 1065 ld iy,(plxcurrentheroAddress) 1067 ld a,(Monster1+MonsterAmount)1068 ld (iy+HeroUnits+1),a1069 ld a,(Monster1+MonsterAmount+1)1070 ld (iy+HeroUnits+2),a 1071 or (iy+HeroUnits+1)1072 jr nz,.EndCheck0UnitsLeftSlot11073 ld (iy+HeroUnits+0),0 1074 .EndCheck0UnitsLeftSlot1:1076 ld a,(Monster2+MonsterAmount)1077 ld (iy+HeroUnits+4),a1078 ld a,(Monster2+MonsterAmount+1)1079 ld (iy+HeroUnits+5),a 1080 or (iy+HeroUnits+4)1081 jr nz,.EndCheck0UnitsLeftSlot21082 ld (iy+HeroUnits+3),0 1083 .EndCheck0UnitsLeftSlot2:1085 ld a,(Monster3+MonsterAmount)1086 ld (iy+HeroUnits+7),a1087 ld a,(Monster3+MonsterAmount+1)1088 ld (iy+HeroUnits+8),a 1089 or (iy+HeroUnits+7)1090 jr nz,.EndCheck0UnitsLeftSlot31091 ld (iy+HeroUnits+6),0 1092 .EndCheck0UnitsLeftSlot3:1094 ld a,(Monster4+MonsterAmount)1095 ld (iy+HeroUnits+10),a1096 ld a,(Monster4+MonsterAmount+1)1097 ld (iy+HeroUnits+11),a 1098 or (iy+HeroUnits+10)1099 jr nz,.EndCheck0UnitsLeftSlot41100 ld (iy+HeroUnits+9),0 1101 .EndCheck0UnitsLeftSlot4:1103 ld a,(Monster5+MonsterAmount)1104 ld (iy+HeroUnits+13),a1105 ld a,(Monster5+MonsterAmount+1)1106 ld (iy+HeroUnits+14),a 1107 or (iy+HeroUnits+13)1108 jr nz,.EndCheck0UnitsLeftSlot51109 ld (iy+HeroUnits+12),0 1110 .EndCheck0UnitsLeftSlot5:1112 ld a,(Monster6+MonsterAmount)1113 ld (iy+HeroUnits+16),a1114 ld a,(Monster6+MonsterAmount+1)1115 ld (iy+HeroUnits+17),a 1116 or (iy+HeroUnits+16)1117 jr nz,.EndCheck0UnitsLeftSlot61118 ld (iy+HeroUnits+15),0 1119 .EndCheck0UnitsLeftSlot6:1120 ret1122RemoveDeadMonstersDefender:1123 1124 ld iy,(HeroThatGetsAttacked) 1126 push iy1127 pop hl1128 ld a,l1129 or h1130 jr z,.RemoveDeadMonstersNeutralMonster1132 ld a,(Monster7+MonsterAmount)1133 ld (iy+HeroUnits+1),a1134 ld a,(Monster7+MonsterAmount+1)1135 ld (iy+HeroUnits+2),a 1136 or (iy+HeroUnits+1)1137 jr nz,.EndCheck0UnitsLeftSlot11138 ld (iy+HeroUnits+0),0 1139 .EndCheck0UnitsLeftSlot1:1141 ld a,(Monster8+MonsterAmount)1142 ld (iy+HeroUnits+4),a1143 ld a,(Monster8+MonsterAmount+1)1144 ld (iy+HeroUnits+5),a 1145 or (iy+HeroUnits+4)1146 jr nz,.EndCheck0UnitsLeftSlot21147 ld (iy+HeroUnits+3),0 1148 .EndCheck0UnitsLeftSlot2:1150 ld a,(Monster9+MonsterAmount)1151 ld (iy+HeroUnits+7),a1152 ld a,(Monster9+MonsterAmount+1)1153 ld (iy+HeroUnits+8),a 1154 or (iy+HeroUnits+7)1155 jr nz,.EndCheck0UnitsLeftSlot31156 ld (iy+HeroUnits+6),0 1157 .EndCheck0UnitsLeftSlot3:1159 ld a,(Monster10+MonsterAmount)1160 ld (iy+HeroUnits+10),a1161 ld a,(Monster10+MonsterAmount+1)1162 ld (iy+HeroUnits+11),a 1163 or (iy+HeroUnits+10)1164 jr nz,.EndCheck0UnitsLeftSlot41165 ld (iy+HeroUnits+9),0 1166 .EndCheck0UnitsLeftSlot4:1168 ld a,(Monster11+MonsterAmount)1169 ld (iy+HeroUnits+13),a1170 ld a,(Monster11+MonsterAmount+1)1171 ld (iy+HeroUnits+14),a 1172 or (iy+HeroUnits+13)1173 jr nz,.EndCheck0UnitsLeftSlot51174 ld (iy+HeroUnits+12),0 1175 .EndCheck0UnitsLeftSlot5:1177 ld a,(Monster12+MonsterAmount)1178 ld (iy+HeroUnits+16),a1179 ld a,(Monster12+MonsterAmount+1)1180 ld (iy+HeroUnits+17),a 1181 or (iy+HeroUnits+16)1182 jr nz,.EndCheck0UnitsLeftSlot61183 ld (iy+HeroUnits+15),0 1184 .EndCheck0UnitsLeftSlot6:1185 ret1187.RemoveDeadMonstersNeutralMonster:1188 ld hl,0 1190 ld ix,Monster71191 call .CheckAmountOfMonstersRemaining1192 ld ix,Monster81193 call .CheckAmountOfMonstersRemaining1194 ld ix,Monster91195 call .CheckAmountOfMonstersRemaining1196 ld ix,Monster101197 call .CheckAmountOfMonstersRemaining1198 ld ix,Monster111199 call .CheckAmountOfMonstersRemaining1200 ld ix,Monster121201 call .CheckAmountOfMonstersRemaining1203 ld de,51204 sbc hl,de1205 ld a,Number1Tile 1206 jr c,.SetAmount1208 ld de,81209 sbc hl,de1210 ld a,Number1Tile+1 1211 jr c,.SetAmount1213 ld de,161214 sbc hl,de1215 ld a,Number1Tile+2 1216 jr c,.SetAmount1218 ld de,321219 sbc hl,de1220 ld a,Number1Tile+3 1221 jr c,.SetAmount1223 ld de,321224 sbc hl,de1225 ld a,Number1Tile+4 1226 jr c,.SetAmount12281230 ld a,Number1Tile+5 1233 .SetAmount:1234 ld (RemoveDeadMonstersNeutralMonster?),a1235 ret1236 1237 .CheckAmountOfMonstersRemaining: 1238 ld e,(ix+MonsterAmount)1239 ld d,(ix+MonsterAmount+1)1240 add hl,de1241 ret1243CalculateXpGainedRightPlayer:1244 1245 ld iy,(plxcurrentheroAddress) 1246 ld l,(iy+HeroUnits+1)1247 ld h,(iy+HeroUnits+2) 1248 ld ix,Monster11249 call CalculateXpGainedLeftPlayer.CalculateXpGained1250 push hl1252 ld iy,(plxcurrentheroAddress) 1253 ld l,(iy+HeroUnits+4)1254 ld h,(iy+HeroUnits+5) 1255 ld ix,Monster21256 call CalculateXpGainedLeftPlayer.CalculateXpGained1257 pop de1258 add hl,de1259 push hl1261 ld iy,(plxcurrentheroAddress) 1262 ld l,(iy+HeroUnits+7)1263 ld h,(iy+HeroUnits+8) 1264 ld ix,Monster31265 call CalculateXpGainedLeftPlayer.CalculateXpGained1266 pop de1267 add hl,de1268 push hl1270 ld iy,(plxcurrentheroAddress) 1271 ld l,(iy+HeroUnits+10)1272 ld h,(iy+HeroUnits+11) 1273 ld ix,Monster41274 call CalculateXpGainedLeftPlayer.CalculateXpGained1275 pop de1276 add hl,de1277 push hl1279 ld iy,(plxcurrentheroAddress) 1280 ld l,(iy+HeroUnits+13)1281 ld h,(iy+HeroUnits+14) 1282 ld ix,Monster51283 call CalculateXpGainedLeftPlayer.CalculateXpGained1284 pop de1285 add hl,de1286 push hl1288 ld iy,(plxcurrentheroAddress) 1289 ld l,(iy+HeroUnits+16)1290 ld h,(iy+HeroUnits+17) 1291 ld ix,Monster61292 call CalculateXpGainedLeftPlayer.CalculateXpGained1293 pop de1294 add hl,de1295 add hl,hl 1297 ld ix,(HeroThatGetsAttacked) 1298 call AddXPBoostFromLearning 1299 ret1301CalculateXpGainedLeftPlayer:1302 ld ix,(HeroThatGetsAttacked) 1303 push ix1304 pop hl1305 ld a,l1306 or h1307 jp z,CalculateXpGainedWhenRightPlayerIsNeutralMonster1309 1310 ld iy,(HeroThatGetsAttacked) 1311 ld l,(iy+HeroUnits+1)1312 ld h,(iy+HeroUnits+2) 1313 ld ix,Monster71314 call .CalculateXpGained1315 push hl1317 ld iy,(HeroThatGetsAttacked) 1318 ld l,(iy+HeroUnits+4)1319 ld h,(iy+HeroUnits+5) 1320 ld ix,Monster81321 call .CalculateXpGained1322 pop de1323 add hl,de1324 push hl1326 ld iy,(HeroThatGetsAttacked) 1327 ld l,(iy+HeroUnits+7)1328 ld h,(iy+HeroUnits+8) 1329 ld ix,Monster91330 call .CalculateXpGained1331 pop de1332 add hl,de1333 push hl1335 ld iy,(HeroThatGetsAttacked) 1336 ld l,(iy+HeroUnits+10)1337 ld h,(iy+HeroUnits+11) 1338 ld ix,Monster101339 call .CalculateXpGained1340 pop de1341 add hl,de1342 push hl1344 ld iy,(HeroThatGetsAttacked) 1345 ld l,(iy+HeroUnits+13)1346 ld h,(iy+HeroUnits+14) 1347 ld ix,Monster111348 call .CalculateXpGained1349 pop de1350 add hl,de1351 push hl1353 ld iy,(HeroThatGetsAttacked) 1354 ld l,(iy+HeroUnits+16)1355 ld h,(iy+HeroUnits+17) 1356 ld ix,Monster121357 call .CalculateXpGained1358 pop de1359 add hl,de1360 add hl,hl 1361 1362 ld ix,(plxcurrentheroAddress) 1363 call AddXPBoostFromLearning 1364 ret1366 .CalculateXpGained:1367 ld e,(ix+MonsterAmount)1368 ld d,(ix+MonsterAmount+1)1370 or a1371 sbc hl,de 1372 ret z 1374 push hl 1375 call SetTotalMonsterHPInHL 1376 push hl1377 pop de13791381 pop hl1383 call MultiplyHlWithDE 1384 ret1386CalculateXpGainedWhenRightPlayerIsNeutralMonster:1387 call SetMonsterTableInIYNeutralMonster1388 ld d,01389 ld e,(iy+MonsterTableHp) 1390 call SetAllMonstersInMonsterTable.SetAmountInA1391 ld h,01392 ld l,a1393 call MultiplyHlWithDE 1395 add hl,hl 1397 ld ix,(plxcurrentheroAddress) 1398 call AddXPBoostFromLearning 1399 ret1401AddXPBoostFromLearning: 1402 ld a,(ix+HeroSkills+0)1403 call .CheckSkillLearning1404 ld a,(ix+HeroSkills+1)1405 call .CheckSkillLearning1406 ld a,(ix+HeroSkills+2)1407 call .CheckSkillLearning1408 ld a,(ix+HeroSkills+3)1409 call .CheckSkillLearning1410 ld a,(ix+HeroSkills+4)1411 call .CheckSkillLearning1412 ld a,(ix+HeroSkills+5)1413 call .CheckSkillLearning1414 ret1416 .CheckSkillLearning:1417 cp 16 1418 jr z,.BasicLearningFound1419 cp 17 1420 jr z,.AdvancedLearningFound1421 cp 18 1422 jr z,.ExpertLearningFound1423 ret1425 .BasicLearningFound:1426 ld de,10 1427 jp ApplyPercentBasedBoost1429 .AdvancedLearningFound:1430 ld de,5 1431 jp ApplyPercentBasedBoost1433 .ExpertLearningFound:1434 ld de,10 1435 call ApplyPercentBasedBoost1436 add hl,bc 1437 add hl,bc 1438 ret1440CheckVictoryOrDefeat:1441 ld a,(MoVeMonster?) 1442 or a1443 ret nz1445 call .CheckLeftPlayerLostEntireArmy1446 call .CheckRightPlayerLostEntireArmy1447 ret1449 .CheckLeftPlayerLostEntireArmy:1450 ld a,(Monster1+MonsterHP)1451 or a1452 ret nz1453 ld a,(Monster2+MonsterHP)1454 or a1455 ret nz1456 ld a,(Monster3+MonsterHP)1457 or a1458 ret nz1459 ld a,(Monster4+MonsterHP)1460 or a1461 ret nz1462 ld a,(Monster5+MonsterHP)1463 or a1464 ret nz1465 ld a,(Monster6+MonsterHP)1466 or a1467 ret nz1468 1470 ld a,11471 ld (LeftOrRightPlayerLostEntireArmy?),a 1472 ld a,(ShowExplosionSprite?) 1473 or a1474 ret nz14761479 ld a,SongDefeat1480 ld (ChangeSong?),a1482 ld a,1 1483 ld (activepage),a 1484 call SwapAndSetPage 1486 ld hl,$4000 + (000*128) + (000/2) - 1281487 ld de,$0000 + ((002+16)*128) + (024/2) - 1281488 ld bc,$0000 + (207*256) + (210/2)14891491 ld a,DefeatBlock 1495 call CopyRamToVramCorrectedCastleOverview 1497 1498 ld ix,(plxcurrentheroAddress) 1499 call .SetLeftHero1501 1502 ld ix,(HeroThatGetsAttacked) 1503 call .SetRightHero1505 ld ix,(HeroThatGetsAttacked) 1506 push ix1507 pop hl1508 ld a,l1509 or h1510 jr z,.EndAddXpToRightPlayer 1511 1512 call CalculateXpGainedRightPlayer 1513 ld ix,(HeroThatGetsAttacked) 1515 ld e,(ix+HeroXp+0)1516 ld d,(ix+HeroXp+1)1517 add hl,de1518 jr c,.EndAddXpToRightPlayer1519 ld (ix+HeroXp+0),l1520 ld (ix+HeroXp+1),h1521 .EndAddXpToRightPlayer:15231524 ld a,BattleCodePage2Block 1525 call block34 1526 call SetBattlefieldCasualtiesAttacker1527 call SetBattlefieldCasualtiesDefender15281530 call RemoveDeadMonstersDefender1531 1532 call SwapAndSetPage 1533 call .CopyActivePageToInactivePage1534 call SetVictoryOrDefeatButton1536 .engine2:1537 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1538 call DoCopy1540 call SwapAndSetPage 1541 call PopulateControls 1543 1544 ld ix,GenericButtonTable21545 call CheckButtonInteractionControlsNotOnInt1546 call .CheckVictoryOrDefeatButtonClicked 1548 ld ix,GenericButtonTable21549 call InitiateBattle.SetGenericButtons 1552 ld a,(NewPrContr)1553 bit 5,a 1554 jp z,.engine21556 1557 call DeactivateHeroThatAttacks 1558 1559 pop de1560 pop de1561 ret1562 1563.CheckVictoryOrDefeatButtonClicked:1564 ret nc1565 1566 1567 call DeactivateHeroThatAttacks 1569 1570 call FirstHeroWindowClicked 1571 1572 pop de1573 pop de1574 pop de1575 ret1577 .CheckRightPlayerLostEntireArmy:1578 ld a,(Monster7+MonsterHP)1579 or a1580 ret nz1581 ld a,(Monster8+MonsterHP)1582 or a1583 ret nz1584 ld a,(Monster9+MonsterHP)1585 or a1586 ret nz1587 ld a,(Monster10+MonsterHP)1588 or a1589 ret nz1590 ld a,(Monster11+MonsterHP)1591 or a1592 ret nz1593 ld a,(Monster12+MonsterHP)1594 or a1595 ret nz1596 1598 ld a,11599 ld (LeftOrRightPlayerLostEntireArmy?),a 1600 ld a,(ShowExplosionSprite?) 1601 or a1602 ret nz16041607 ld a,SongVictory1608 ld (ChangeSong?),a1610 ld a,1 1611 ld (activepage),a 1612 call SwapAndSetPage 1614 ld hl,$4000 + (000*128) + (000/2) - 1281615 ld de,$0000 + ((002+16)*128) + (024/2) - 1281616 ld bc,$0000 + (127*256) + (210/2)1617 ld a,VictoryBlock 1618 call CopyRamToVramCorrectedCastleOverview 1620 ld hl,$4000 + (127*128) + (000/2) - 1281621 ld de,$0000 + ((002+127+16)*128) + (024/2) - 1281622 ld bc,$0000 + ((207-127)*256) + (210/2)1623 ld a,DefeatBlock 1624 call CopyRamToVramCorrectedCastleOverview 1626 1627 ld ix,(plxcurrentheroAddress) 1628 call .SetLeftHero1630 1631 ld ix,(HeroThatGetsAttacked) 1632 call .SetRightHero1634 call CalculateXpGainedLeftPlayer 1636 push hl1637 ld ix,(plxcurrentheroAddress) 1639 ld e,(ix+HeroXp+0)1640 ld d,(ix+HeroXp+1)1641 add hl,de1642 jr c,.EndCheckOverflow1643 ld (ix+HeroXp+0),l1644 ld (ix+HeroXp+1),h1645 .EndCheckOverflow:1646 pop hl1648 1649 ld b,112 1650 ld c,116+16 1651 call SetNumber16BitCastle1652 16531654 ld a,BattleCodePage2Block 1655 call block34 1656 call SetBattlefieldCasualtiesAttacker1657 call SetBattlefieldCasualtiesDefender16581660 call RemoveDeadMonstersAttacker1662 call SwapAndSetPage 1663 call .CopyActivePageToInactivePage1664 call SetVictoryOrDefeatButton16661667 ld a,BattleCodePage2Block 1668 call block34 1669 call HandleNecromancy 1670 call AttackingHeroTakesItemsDefendingHero16711673 .engine:1674 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1675 call DoCopy1677 call SwapAndSetPage 1678 call PopulateControls 1680 1681 ld ix,GenericButtonTable21682 call CheckButtonInteractionControlsNotOnInt1683 call .CheckVictoryOrDefeatButtonClicked2 1685 ld ix,GenericButtonTable21686 call InitiateBattle.SetGenericButtons 1689 ld a,(NewPrContr)1690 bit 5,a 1691 jp z,.engine 1693 1694 call DeactivateHeroThatGetsAttacked 1695 1696 pop de1697 pop de1698 ret1699 1700.CheckVictoryOrDefeatButtonClicked2:1701 ret nc1702 1703 1704 call DeactivateHeroThatGetsAttacked 1705 1706 pop de1707 pop de1708 pop de1709 ret1711.SetLeftHero:1712 push ix1713 ld l,(ix+HeroSpecificInfo+0) 1714 ld h,(ix+HeroSpecificInfo+1)1715 push hl1716 pop ix1717 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1718 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1719 ld bc,$40001720 xor a1721 sbc hl,bc1722 ld de,$0000 + ((011+16)*128) + (032/2) - 1281723 ld bc,NXAndNY16x30HeroIcon1724 ld a,Hero16x30PortraitsBlock 1725 call CopyRamToVramCorrectedCastleOverview 1727 1728 pop ix1729 ld b,090 1730 ld c,013+16 1731 ld l,(ix+HeroSpecificInfo+0) 1732 ld h,(ix+HeroSpecificInfo+1)1733 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1734 call SetText 1736 ld b,121 1737 ld c,109+16 1738 ld l,(ix+HeroSpecificInfo+0) 1739 ld h,(ix+HeroSpecificInfo+1)1740 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1741 call SetText 1742 ret1744 .SetRightHero:1745 push ix1746 pop hl1747 ld a,l1748 or h1749 jr z,.RightHeroIsANeutralMonster1750 1751 push ix1752 ld l,(ix+HeroSpecificInfo+0) 1753 ld h,(ix+HeroSpecificInfo+1)1754 push hl1755 pop ix1756 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1757 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1758 ld bc,$40001759 xor a1760 sbc hl,bc1761 ld de,$0000 + ((011+16)*128) + (210/2) - 1281762 ld bc,NXAndNY16x30HeroIcon1763 ld a,Hero16x30PortraitsBlock 1764 call CopyRamToVramCorrectedCastleOverview 1766 1767 pop ix1768 ld b,166 1769 ld c,013+16 1770 ld l,(ix+HeroSpecificInfo+0) 1771 ld h,(ix+HeroSpecificInfo+1)1772 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1773 call SetText 1774 ret1776 .RightHeroIsANeutralMonster:1777 call SetNeutralMonsterHeroCollidedWithInA1778 call CheckRightClickToDisplayInfo.SetSYSX1779 exx1780 ld de,256*(015+16) + (211)1781 exx1782 ld de,$0000 + ((015+16)*128) + (210/2) - 1281783 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 1785 call SetMonsterTableInIYNeutralMonster1786 push iy1787 pop hl1788 ld de,MonsterTableName1789 add hl,de1791 1792 ld b,166 1793 ld c,013+16 1795 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1796 call SetText1797 ret1799 .CopyActivePageToInactivePage:1800 ld a,(activepage) 1801 or a1802 ld hl,.CopyPage0toPage11803 jp z,docopy1804 ld hl,.CopyPage1toPage01805 jp docopy1807.CopyPage1toPage0:1808 db 000,000,016,0011809 db 000,000,016,0001810 db 000,001,212,0001811 db 000,000,$d0 1812.CopyPage0toPage1:1813 db 000,000,016,0001814 db 000,000,016,0011815 db 000,001,212,0001816 db 000,000,$d0 1818SetVictoryOrDefeatButton:1819 ld hl,VictoryOrDefeatButtonTable-21820 ld de,GenericButtonTable2-21821 ld bc,2+(GenericButtonTableLenghtPerButton*1)1822 ldir1823 ret1825VictoryOrDefeatButton1Ytop: equ 183 + 161826VictoryOrDefeatButton1YBottom: equ VictoryOrDefeatButton1Ytop + 0191827VictoryOrDefeatButton1XLeft: equ 2081828VictoryOrDefeatButton1XRight: equ VictoryOrDefeatButton1XLeft + 0201830VictoryOrDefeatButtonTableGfxBlock: db RetreatBlock1831VictoryOrDefeatButtonTableAmountOfButtons: db 11832VictoryOrDefeatButtonTable: 1833 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db VictoryOrDefeatButton1Ytop,VictoryOrDefeatButton1YBottom,VictoryOrDefeatButton1XLeft,VictoryOrDefeatButton1XRight | dw $0000 + (VictoryOrDefeatButton1Ytop*128) + (VictoryOrDefeatButton1XLeft/2) - 128 1836CheckRightClickToDisplayInfo:18371841 ld a,(MoVeMonster?) 1842 or a1843 ret nz1845 ld a,(NewPrContr)1846 bit 5,a 1847 ret z1849 1855 ld ix,Monster11856 call .CheckMonster1857 ld ix,Monster21858 call .CheckMonster1859 ld ix,Monster31860 call .CheckMonster1861 ld ix,Monster41862 call .CheckMonster1863 ld ix,Monster51864 call .CheckMonster1865 ld ix,Monster61866 call .CheckMonster1867 ld ix,Monster71868 call .CheckMonster1869 ld ix,Monster81870 call .CheckMonster1871 ld ix,Monster91872 call .CheckMonster1873 ld ix,Monster101874 call .CheckMonster1875 ld ix,Monster111876 call .CheckMonster1877 ld ix,Monster121878 call .CheckMonster1880 call CheckPointerOnAttackingHero1881 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1882 call docopy 1883 call CheckPointerOnDefendingHero1884 ret1886 .CheckMonster:1887 call .Check1TileMonsterStandsOn 1888 1889 ld a,(ix+MonsterNX)1890 cp 171891 ret c1892 ld a,(Monster0+MonsterX)1893 ld c,a1894 ld a,(ix+MonsterX)1895 add a,161896 call .Check1898 1899 ld a,(ix+MonsterNX)1900 cp 331901 ret c1902 ld a,(Monster0+MonsterX)1903 ld c,a1904 ld a,(ix+MonsterX)1905 add a,321906 call .Check1908 1909 ld a,(ix+MonsterNX)1910 cp 571911 ret c1912 ld a,(Monster0+MonsterX)1913 ld c,a1914 ld a,(ix+MonsterX)1915 add a,481916 call .Check1917 ret1918 .Check1TileMonsterStandsOn: 1919 ld a,(Monster0+MonsterX)1920 ld c,a1921 ld a,(ix+MonsterX)1923 .Check:1924 cp c1925 ret nz1927 ld a,(ix+MonsterY)1928 ld c,a1929 ld a,(ix+MonsterNY)1930 add a,c1931 ld c,a1933 ld a,(Monster0+MonsterY)1934 add a,0171935 cp c1936 ret nz1938 pop af1939 pop af1940 1941 ld de,$0000 + ((000+16)*128) + (000/2) - 1281943 ld a,(spat+1) 1944 sub 321945 jr nc,.NotCarryX1946 xor a1947 .NotCarryX:1948 cp 1261949 jr c,.NoOverFlowRight1950 ld a,1261951 .NoOverFlowRight:1953 res 0,a1955 push af 1957 srl a 1958 ld h,01959 ld l,a1960 add hl,de1961 ex de,hl1962 1963 ld a,(spat+0) 1964 ld b,-501965 cp 701966 jr nc,.CursorTopOfScreen1967 ld b,321968 .CursorTopOfScreen:1969 add a,b1970 1971 1972 sub a,241973 jr nc,.NotCarryY1974 xor a1975 .NotCarryY:1976 cp 1131977 jr c,.NoOverFlowBottom1978 ld a,1131979 .NoOverFlowBottom:1981 res 0,a1983 push af 1985 ld h,01986 ld l,a1987 add hl,hl 1988 add hl,hl 1989 add hl,hl 1990 add hl,hl 1991 add hl,hl 1992 add hl,hl 1993 add hl,hl 1994 add hl,de1995 ex de,hl1997 1998 ld hl,$4000 + (061*128) + (162/2) - 1281999 ld bc,$0000 + (070*256) + (086/2)2000 ld a,ScrollBlock 2001 push de2002 pop iy 2003 call CopyRamToVramCorrectedCastleOverview 2005 2006 push iy2007 call SetMonsterTableInIY 2008 ld a,(iy+MonsterTableSpecialAbility)2009 pop iy2010 cp RangedMonster2011 jp nz,.EndCheckMonsterIsRanged2013 push iy2014 pop de 2015 ld hl,10/2 + (49*128)2016 add hl,de2017 ex de,hl2018 ld hl,$4000 + (131*128) + (162/2) - 1282019 ld bc,$0000 + (014*256) + (014/2)2020 ld a,ScrollBlock 2021 call CopyRamToVramCorrectedCastleOverview 2022 .EndCheckMonsterIsRanged:2024 ld a,(ix+MonsterNumber)2025 call .SetSYSX20272029 ex af,af'2030 pop af 2031 add a,23+132032 ld d,a2033 pop af 2034 add a,92035 ld e,a2036 push af2037 ld a,d 2038 push af2039 ex af,af'2041 call CopyTransparantImageBattleCode 2043 2044 ld a,(ix+MonsterStatusEffect1)2045 ld hl,68/2 + (16*128) 2046 call .SetStatusSpellEffectIcon2048 ld a,(ix+MonsterStatusEffect2)2049 ld hl,68/2 + (30*128) 2050 call .SetStatusSpellEffectIcon2052 ld a,(ix+MonsterStatusEffect3)2053 ld hl,54/2 + (16*128) 2054 call .SetStatusSpellEffectIcon2056 ld a,(ix+MonsterStatusEffect4)2057 ld hl,54/2 + (30*128) 2058 call .SetStatusSpellEffectIcon2060 ld a,(ix+MonsterStatusEffect5)2061 ld hl,68/2 + (43*128) 2062 call .SetStatusSpellEffectIcon2064 2065 pop af 2066 add a,48-23+122067 ld c,a 2068 pop af 2069 add a,41-82070 ld b,a 2071 push bc2073 ld h,02074 ld l,(ix+MonsterHP)2075 call SetNumber16BitCastle2077 2078 ld a,(PutLetter+dy) 2079 ld c,a 2080 ld a,(PutLetter+dx) 2081 ld b,a 2083 ld hl,.TextSlash2084 call SetText2086 2087 call SetTotalMonsterHPInHL 2089 ld a,(PutLetter+dy) 2090 ld c,a 2091 ld a,(PutLetter+dx) 2092 ld b,a 2094 call SetNumber16BitCastle2096 2097 call SetTotalMonsterSpeedInHL 2099 pop bc2100 ld a,c 2101 sub a,102102 ld c,a 2103 push bc2105 call SetNumber16BitCastle2107 2108 call SetTotalMonsterDefenseInHL 2110 pop bc2111 ld a,c 2112 sub a,102113 ld c,a 2114 push bc2116 call SetNumber16BitCastle2118 2119 call SetTotalMonsterAttackInHL 2121 pop bc2122 ld a,c 2123 sub a,92124 ld c,a 2125 push bc2127 call SetNumber16BitCastle2129 2130 call SetTotalMonsterDamageInHL 2132 pop bc2133 ld a,c 2134 sub a,92135 ld c,a 2136 push bc2138 call SetNumber16BitCastle2140 2141 pop bc2142 ld a,c 2143 sub a,122144 ld c,a 2146 ld a,b 2147 sub a,202148 ld b,a 2149 2150 push iy2151 pop hl2152 ld de,MonsterTableName2153 add hl,de2154 call SetText2156 jp WaitKeyPressToGoBackToGame2158 .SetStatusSpellEffectIcon:2159 push iy2160 pop de 2161 add hl,de2162 ex de,hl2163 ld hl,$4000 + (151*128) + (032/2) - 1282165 and %1111 0000 2166 srl a 2167 ld b,02168 ld c,a2169 add hl,bc2171 ld bc,$0000 + (012*256) + (012/2)2172 ld a,SecondarySkillsButtonsBlock 2173 jp CopyRamToVramCorrectedCastleOverview 2176 .TextSlash: db "/",2552178 .SetSYSX: 2179 cp 1802180 jr c,.EndCheckOverFlow2181 sub 1802182 ld l,a2183 ld a,Enemy14x24PortraitsBlockPart2 2184 jr .EntryPart22186 .EndCheckOverFlow:2187 ld l,a2188 ld a,Enemy14x24PortraitsBlock 2189 .EntryPart2:2190 ld h,021922193 push af2194 ld a,BattleCodePage2Block 2195 call block34 2196 pop af2198 add hl,hl 2199 ld de,UnitSYSXTable14x24Portraits22200 add hl,de2201 ld c,(hl)2202 inc hl2203 ld b,(hl) 2204 push bc2205 pop hl2207 ld bc,NXAndNY14x24CharaterPortraits2209 ret2210 2213CopyTransparantImageBattleCode: 22142215 push af2216 ld a,b2217 ld (CopyCastleButton2+ny),a2218 ld a,c2219 add a,a2220 ld (CopyCastleButton2+nx),a2221 pop af2223 push de2224 ld de,$8000 + ((212+16)*128) + (000/2) - 128 2225 call CopyRamToVramCorrectedWithoutActivePageSetting 2226 pop de2228 ld a,(activepage)2229 xor 12230 ld (CopyCastleButton2+dPage),a2232 ld a,d2233 ld (CopyCastleButton2+dy),a2234 ld a,e2235 ld (CopyCastleButton2+dx),a2237 ld a,212+162238 ld (CopyCastleButton2+sy),a2240 ld hl,CopyCastleButton22241 call docopy2243 ld a,2122244 ld (CopyCastleButton2+sy),a2246 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2247 jp docopy2249SetTotalMonsterHPInHL: 2250 call SetMonsterTableInIY 2251 push ix2252 2253 push ix2254 pop hl 2255 ld de,Monster72256 call CompareHLwithDE 2257 ld ix,(plxcurrentheroAddress) 2258 jr c,.HeroFound2259 ld ix,(HeroThatGetsAttacked) 2260 push ix2261 pop hl2263 ld a,l2264 or h2265 jr nz,.HeroFound 2266 ld hl,0 2267 jr .endAddHP2268 .HeroFound:2269 2271 ld de,ItemUnitHpPointsTable2272 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2273 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2274 .endAddHP:2275 pop ix2277 ld d,02278 ld e,(iy+MonsterTableHp)2279 add hl,de 2280 ret2282SetTotalMonsterSpeedInHL: 2283 push ix2284 2285 push ix2286 pop hl 2287 ld de,Monster72288 call CompareHLwithDE 2289 ld ix,(plxcurrentheroAddress) 2290 jr c,.HeroFound2291 ld ix,(HeroThatGetsAttacked) 2292 push ix2293 pop hl2295 ld a,l2296 or h2297 jr nz,.HeroFound 2298 ld hl,0 2299 jr .endAddSpeed2300 .HeroFound:2301 2303 ld de,ItemUnitSpeedPointsTable2304 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2305 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2306 .endAddSpeed:2307 pop ix 2309 ld d,02310 ld e,(iy+MonsterTableSpeed)2311 add hl,de 2313 ld b,HasteSpellNumber 2314 call CheckPresenceStatusEffect 2315 jr nz,.EndCheckHaste2316 ld de,3 2317 add hl,de2318 .EndCheckHaste:2320 ld b,InnerBeastSpellNumber 2321 call CheckPresenceStatusEffect 2322 jr nz,.EndCheckInnerBeast2323 ld de,3 2324 add hl,de2325 .EndCheckInnerBeast: 2327 ld b,EarthBoundSpellNumber 2328 call CheckPresenceStatusEffect 2329 jr nz,.EndCheckEarthBound2330 push hl2331 pop bc2332 ld de,2 2333 call DivideBCbyDE 2334 push bc2335 pop hl2336 .EndCheckEarthBound:2337 ret2339CheckPresenceStatusEffect:2340 ld a,(ix+MonsterStatusEffect1) 2341 and %1111 00002342 cp b2343 ret z2344 ld a,(ix+MonsterStatusEffect2) 2345 and %1111 00002346 cp b2347 ret z2348 ld a,(ix+MonsterStatusEffect3) 2349 and %1111 00002350 cp b2351 ret z2352 ld a,(ix+MonsterStatusEffect4) 2353 and %1111 00002354 cp b2355 ret z2356 ld a,(ix+MonsterStatusEffect5) 2357 and %1111 00002358 cp b2359 ret2361CheckPresenceSpellBubble:2362 ld a,(ix+MonsterStatusEffect1) 2363 and %1111 00002364 cp c2365 ret z2366 inc ix2367 djnz CheckPresenceSpellBubble2368 ret2370RemoveSpell: 2371 ld a,(ix+MonsterStatusEffect1) 2372 and %1111 00002373 cp b2374 jr nz,.SpellNotFoundStatus12375 ld (ix+MonsterStatusEffect1),0 2376 .SpellNotFoundStatus1:2377 ld a,(ix+MonsterStatusEffect2) 2378 and %1111 00002379 cp b2380 jr nz,.SpellNotFoundStatus22381 ld (ix+MonsterStatusEffect2),0 2382 .SpellNotFoundStatus2:2383 ld a,(ix+MonsterStatusEffect3) 2384 and %1111 00002385 cp b2386 jr nz,.SpellNotFoundStatus32387 ld (ix+MonsterStatusEffect3),0 2388 .SpellNotFoundStatus3:2389 ld a,(ix+MonsterStatusEffect4) 2390 and %1111 00002391 cp b2392 jr nz,.SpellNotFoundStatus42393 ld (ix+MonsterStatusEffect4),0 2394 .SpellNotFoundStatus4:2395 ld a,(ix+MonsterStatusEffect5) 2396 and %1111 00002397 ret nz2398 ld (ix+MonsterStatusEffect5),0 2399 ret2401AddDefenseFromDefendingInCastleOrCastleWalls:2402 ld a,(ix+HeroStatus) 2403 cp 2542404 ret nz2405 inc hl 2406 .CheckWhichCastle: 2407 push iy2408 ld iy,Castle12409 call .FindCastle2410 ld iy,Castle22411 call .FindCastle2412 ld iy,Castle32413 call .FindCastle2414 ld iy,Castle42415 call .FindCastle2416 ld iy,Castle52417 call .FindCastle2418 pop iy2419 ret2421 .FindCastle:2422 ld a,(ix+HeroY) 2423 inc a 2424 cp (iy+CastleY)2425 ret nz2427 ld a,(ix+HeroX) 2428 dec a 2429 dec a 2430 cp (iy+CastleX)2431 ret nz2432 2433 ld a,(iy+CastleLevel) 2434 cp 62435 ret nz2436 ld de,52437 add hl,de 2438 ret2440SetTotalMonsterDefenseInHL: 2441 push ix2442 2443 push ix2444 pop hl 2445 ld de,Monster72446 call CompareHLwithDE 2447 ld ix,(plxcurrentheroAddress) 2448 jr c,.HeroFound2449 ld ix,(HeroThatGetsAttacked) 2450 push ix2451 pop hl2453 ld a,l2454 or h2455 jr nz,.HeroFound 2456 ld hl,0 2457 jr .endAddDefense2458 .HeroFound:2459 2461 ld de,ItemDefencePointsTable2462 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2463 push ix2464 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2465 pop ix2467 ld d,02468 ld e,(ix+HeroStatDefense)2469 add hl,de 2470 call AddDefenseFromDefendingInCastleOrCastleWalls2472 bit 7,h 2473 jr z,.SetDefense2474 ld hl,02475 .SetDefense:2477 .endAddDefense:2478 pop ix2480 ld d,02481 ld e,(iy+MonsterTableDefense)2482 add hl,de 2484 ld b,PlateArmorSpellNumber 2485 call CheckPresenceStatusEffect 2486 jr nz,.EndCheckPlateArmor2487 ld de,5 2488 add hl,de2489 .EndCheckPlateArmor:2491 ld b,InnerBeastSpellNumber 2492 call CheckPresenceStatusEffect 2493 jr nz,.EndCheckInnerBeast2494 ld de,3 2495 add hl,de2496 .EndCheckInnerBeast:2498 ld b,ShieldBreakerSpellNumber 2499 call CheckPresenceStatusEffect 2500 jr nz,.EndCheckShieldBreaker2501 ld de,-4 2502 add hl,de2503 bit 7,h 2504 jr z,.EndCheckShieldBreaker2505 ld hl,0 2506 .EndCheckShieldBreaker:2508 ld b,FrenzySpellNumber 2509 call CheckPresenceStatusEffect 2510 jr nz,.EndCheckFrenzy2511 ld de,-5 2512 add hl,de2513 bit 7,h 2514 jr z,.EndCheckFrenzy2515 ld hl,0 2516 .EndCheckFrenzy:2518 2519 ld a,(ix+MonsterStatus) 2520 and %0111 11112521 cp MonsterStatusDefending 2522 ret nz2524 ld de,05 2525 call ApplyPercentBasedBoost 2527 ld a,c 2528 or a2529 ret nz2530 ld bc,12531 add hl,bc 2534 ret2537 2540SetTotalMonsterDamageENTIRESTACKInHL: 2541 push ix2542 2543 push ix2544 pop hl 2545 ld de,Monster72546 call CompareHLwithDE 2547 ld ix,(plxcurrentheroAddress) 2548 jr c,.HeroFound2549 ld ix,(HeroThatGetsAttacked) 2550 push ix2551 pop hl2553 ld a,l2554 or h2555 jr z,.setDamageNeutralMonster2556 .HeroFound:2557 2559 ld h,02560 ld l,(iy+MonsterTableDamage) 2562 pop ix2563 call SetTotalMonsterDamageInHL.ProcessInnerBeast 2564 call SetTotalMonsterDamageInHL.ProcessFrenzy 2565 call SetTotalMonsterDamageInHL.ProcessCurse 2566 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2568 call .MultiplyDamageWIthAllUnitsInStack2570 2571 push hl2572 push ix2573 pop hl 2574 ld de,Monster72575 call CompareHLwithDE 2576 ld ix,(plxcurrentheroAddress) 2577 jr c,.HeroFound22578 ld ix,(HeroThatGetsAttacked) 2579 .HeroFound2:2580 pop hl2581 call SetTotalMonsterDamageInHL.AddDamageFromSkills 2583 ld a,l2584 or h2585 ret nz2586 ld hl,1 2587 ret2589 .setDamageNeutralMonster:2590 ld h,02591 ld l,(iy+MonsterTableDamage)2592 pop ix2593 call SetTotalMonsterDamageInHL.ProcessCurse 2594 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2596 call .MultiplyDamageWIthAllUnitsInStack2598 ld a,l2599 or h2600 ret nz2601 ld hl,1 2602 ret2604 .MultiplyDamageWIthAllUnitsInStack:2605 push hl2606 call SetCurrentActiveMOnsterInIX2607 pop de2608 ld l,(ix+MonsterAmount)2609 ld h,(ix+MonsterAmount+1)2610 jp MultiplyHlWithDE 2612SetTotalMonsterDamageInHL: 2613 push ix2614 2615 push ix2616 pop hl 2617 ld de,Monster72618 call CompareHLwithDE 2619 ld ix,(plxcurrentheroAddress) 2620 jr c,.HeroFound2621 ld ix,(HeroThatGetsAttacked) 2622 push ix2623 pop hl2625 ld a,l2626 or h2627 jr z,.setDamageNeutralMonster2628 .HeroFound:2629 2631 ld h,02632 ld l,(iy+MonsterTableDamage) 2634 pop ix2635 call .ProcessInnerBeast 2636 call .ProcessFrenzy 2637 call .ProcessCurse 2638 call .ProcessBlindingFog 2640 2641 push hl2642 push ix2643 pop hl 2644 ld de,Monster72645 call CompareHLwithDE 2646 ld ix,(plxcurrentheroAddress) 2647 jr c,.HeroFound22648 ld ix,(HeroThatGetsAttacked) 2649 .HeroFound2:2650 pop hl2651 call .AddDamageFromSkills 2653 ld a,l2654 or h2655 ret nz2656 ld hl,1 2657 ret2659 .setDamageNeutralMonster:2660 ld h,02661 ld l,(iy+MonsterTableDamage)2662 pop ix2663 call .ProcessCurse 2664 call .ProcessBlindingFog 2665 ld a,l2666 or h2667 ret nz2668 ld hl,1 2669 ret2671 .ProcessInnerBeast:2672 ld b,InnerBeastSpellNumber 2673 call CheckPresenceStatusEffect 2674 ret nz2675 ld de,3 2676 add hl,de2677 ret2679 .ProcessFrenzy:2680 ld b,FrenzySpellNumber 2681 call CheckPresenceStatusEffect 2682 ret nz2683 ld de,+5 2684 add hl,de2685 ret2687 .ProcessCurse:2688 ld b,CurseSpellNumber 2689 call CheckPresenceStatusEffect 2690 ret nz2691 ld de,-3 2692 add hl,de2693 bit 7,h 2694 ret z2695 ld hl,1 2696 ret2698 .ProcessBlindingFog:2699 ld b,BlindingFogSpellNumber 2700 call CheckPresenceStatusEffect 2701 ret nz2702 push hl2703 pop bc2704 ld de,2 2705 call DivideBCbyDE 2706 push bc2707 pop hl2708 ret2710 .AddDamageFromSkills:2711 2712 ld a,(iy+MonsterTableSpecialAbility)2713 cp RangedMonster2714 jp z,.MonsterIsRanged2716 .MonsterIsMelee:2717 ld a,(ix+HeroSkills+0)2718 call .CheckSkillOffence2719 ld a,(ix+HeroSkills+1)2720 call .CheckSkillOffence2721 ld a,(ix+HeroSkills+2)2722 call .CheckSkillOffence2723 ld a,(ix+HeroSkills+3)2724 call .CheckSkillOffence2725 ld a,(ix+HeroSkills+4)2726 call .CheckSkillOffence2727 ld a,(ix+HeroSkills+5)2728 call .CheckSkillOffence2729 ret2731 .CheckSkillOffence:2732 cp 04 2733 jr z,.BasicOffenceFound2734 cp 05 2735 jr z,.AdvancedOffenceFound2736 cp 06 2737 jr z,.ExpertOffenceFound2738 ret2740 .BasicOffenceFound:2741 ld de,10 2742 jp ApplyPercentBasedBoost2744 .AdvancedOffenceFound:2745 ld de,5 2746 jp ApplyPercentBasedBoost2748 .ExpertOffenceFound:2749 ld de,10 2750 call ApplyPercentBasedBoost2751 add hl,bc 2752 add hl,bc 2753 ret2755 .MonsterIsRanged:2756 ld a,(ix+HeroSkills+0)2757 call .CheckSkilArchery2758 ld a,(ix+HeroSkills+1)2759 call .CheckSkilArchery2760 ld a,(ix+HeroSkills+2)2761 call .CheckSkilArchery2762 ld a,(ix+HeroSkills+3)2763 call .CheckSkilArchery2764 ld a,(ix+HeroSkills+4)2765 call .CheckSkilArchery2766 ld a,(ix+HeroSkills+5)2767 call .CheckSkilArchery2768 ret2770 .CheckSkilArchery:2771 cp 01 2772 jr z,.BasicArcheryFound2773 cp 02 2774 jr z,.AdvancedArcheryFound2775 cp 03 2776 jr z,.ExpertArcheryFound2777 ret2779 .BasicArcheryFound: 2780 ld de,10 2781 jp ApplyPercentBasedBoost2783 .AdvancedArcheryFound: 2784 ld de,5 2785 jp ApplyPercentBasedBoost2787 .ExpertArcheryFound: 2788 ld de,2 2789 jp ApplyPercentBasedBoost2791SetTotalMonsterAttackInHL: 2792 push ix2793 2794 push ix2795 pop hl 2796 ld de,Monster72797 call CompareHLwithDE 2798 ld ix,(plxcurrentheroAddress) 2799 jr c,.HeroFound2800 ld ix,(HeroThatGetsAttacked) 2801 push ix2802 pop hl2804 ld a,l2805 or h2806 jr z,.setAttackNeutralMonster2807 .HeroFound:2808 2810 2811 ld de,ItemAttackPointsTable2812 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2813 push ix2814 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2815 pop ix2817 ld d,02818 ld e,(iy+MonsterTableAttack) 2819 add hl,de 2821 ld d,02822 ld e,(ix+HeroStatAttack)2823 add hl,de 2825 pop ix2826 ret2828 .setAttackNeutralMonster:2829 ld h,02830 ld l,(iy+MonsterTableAttack)2831 pop ix2832 ret2834ApplyPercentBasedBoost:2835 push hl 2836 2837 push hl2838 pop bc28392840 call DivideBCbyDE 2842 pop hl2843 add hl,bc 2844 ret2846CheckPointerOnDefendingHero:2847 ld a,(spat)2848 cp 38+242849 ret nc2850 cp 06+242851 ret c2852 ld a,(spat+1)2853 cp 2362854 ret c2856 ld hl,(HeroThatGetsAttacked) 2857 ld a,l2858 or h2859 ret z2861 ld hl,$4000 + (000*128) + (162/2) - 1282862 ld de,$0000 + (040*128) + ((18+134)/2) - 1282863 ld bc,$0000 + (062*256) + (086/2)2864 ld a,ScrollBlock 2865 call CopyRamToVramCorrectedCastleOverview 2867 2868 ld ix,(HeroThatGetsAttacked) 2869 ld l,(ix+HeroSpecificInfo+0) 2870 ld h,(ix+HeroSpecificInfo+1)2871 push hl2872 pop ix2873 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 2874 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 2875 ld bc,$40002876 xor a2877 sbc hl,bc2878 ld de,$0000 + ((040+021)*128) + ((018+10+134)/2) - 1282879 ld bc,NXAndNY16x30HeroIcon2880 ld a,Hero16x30PortraitsBlock 2881 call CopyRamToVramCorrectedCastleOverview 2883 2884 ld ix,(HeroThatGetsAttacked) 2885 ld de,ItemAttackPointsTable2886 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2887 push ix2888 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2889 pop ix2890 ld e,(ix+HeroStatAttack) 2891 ld d,02892 add hl,de2893 ld b,060+134 2894 ld c,060 2895 call SetNumber16BitCastle2897 2898 ld de,ItemDefencePointsTable2899 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2900 push ix2901 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2902 pop ix2903 ld e,(ix+HeroStatDefense) 2904 ld d,02905 add hl,de2906 call AddDefenseFromDefendingInCastleOrCastleWalls2908 bit 7,h 2909 jr z,.SetDefense2910 ld hl,02911 .SetDefense:2914 ld b,060+134 2915 ld c,069 2916 call SetNumber16BitCastle2918 2919 ld l,(ix+HeroMana)2920 ld h,(ix+HeroMana+1)2921 ld b,060+134 2922 ld c,078 2923 call SetNumber16BitCastle2924 2925 2926 ld a,(PutLetter+dy) 2927 ld c,a 2928 ld a,(PutLetter+dx) 2929 ld b,a 2930 ld hl,CheckPointerOnAttackingHero.TextSlash2931 call SetText2933 2934 ld a,(PutLetter+dy) 2935 ld c,a 2936 ld a,(PutLetter+dx) 2937 ld b,a 2938 ld l,(ix+HeroTotalMana)2939 ld h,(ix+HeroTotalMana+1)2940 call SetNumber16BitCastle2942 2943 ld de,ItemSpellDamagePointsTable2944 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2945 push ix2946 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2947 pop ix2948 ld e,(ix+HeroStatSpelldamage)2949 ld d,02950 add hl,de29522954 ld b,060+134 2955 ld c,088 2956 call SetNumber16BitCastle2958 2959 ld b,064+134 2960 ld c,047 2961 ld l,(ix+HeroSpecificInfo+0) 2962 ld h,(ix+HeroSpecificInfo+1)2963 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel2964 call SetText 2966 jp WaitKeyPressToGoBackToGame2968CheckPointerOnAttackingHero:2969 ld a,(spat)2970 cp 38+242971 ret nc2972 cp 06+242973 ret c2974 ld a,(spat+1)2975 cp 102976 ret nc2978 ld hl,$4000 + (000*128) + (162/2) - 1282979 ld de,$0000 + (040*128) + (018/2) - 1282980 ld bc,$0000 + (062*256) + (086/2)2981 ld a,ScrollBlock 2982 call CopyRamToVramCorrectedCastleOverview 2984 2985 ld ix,(plxcurrentheroAddress) 2986 ld l,(ix+HeroSpecificInfo+0) 2987 ld h,(ix+HeroSpecificInfo+1)2988 push hl2989 pop ix2990 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 2991 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 2992 ld bc,$40002993 xor a2994 sbc hl,bc2995 ld de,$0000 + ((040+021)*128) + ((018+10)/2) - 1282996 ld bc,NXAndNY16x30HeroIcon2997 ld a,Hero16x30PortraitsBlock 2998 call CopyRamToVramCorrectedCastleOverview 3000 3001 ld ix,(plxcurrentheroAddress)3002 ld de,ItemAttackPointsTable3003 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3004 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3005 ld e,(ix+HeroStatAttack) 3006 ld d,03007 add hl,de3008 ld b,060 3009 ld c,060 3010 call SetNumber16BitCastle3012 3013 ld de,ItemDefencePointsTable3014 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3015 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3016 ld e,(ix+HeroStatDefense) 3017 ld d,03018 add hl,de3019 call AddDefenseFromDefendingInCastleOrCastleWalls3021 bit 7,h 3022 jr z,.SetDefense3023 ld hl,03024 .SetDefense:3027 ld b,060 3028 ld c,069 3029 call SetNumber16BitCastle3031 3032 ld l,(ix+HeroMana)3033 ld h,(ix+HeroMana+1)3034 ld b,060 3035 ld c,078 3036 call SetNumber16BitCastle3037 3038 3039 ld a,(PutLetter+dy) 3040 ld c,a 3041 ld a,(PutLetter+dx) 3042 ld b,a 3043 ld hl,.TextSlash3044 call SetText3046 3047 ld a,(PutLetter+dy) 3048 ld c,a 3049 ld a,(PutLetter+dx) 3050 ld b,a 3051 ld l,(ix+HeroTotalMana)3052 ld h,(ix+HeroTotalMana+1)3053 call SetNumber16BitCastle3055 3056 ld de,ItemSpellDamagePointsTable3057 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3058 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3059 ld e,(ix+HeroStatSpelldamage)3060 ld d,03061 add hl,de30633065 ld b,060 3066 ld c,088 3067 call SetNumber16BitCastle3069 3070 ld b,064 3071 ld c,047 3073 ld l,(ix+HeroSpecificInfo+0) 3074 ld h,(ix+HeroSpecificInfo+1)3075 call .CenterHeroNameHasGainedALevel3076 call SetText 3078 jp WaitKeyPressToGoBackToGame3080 .TextSlash: db "/",2553081 .CenterHeroNameHasGainedALevel:3082 ld d,0 3083 push hl3084 .loop:3085 ld a,(hl)3086 cp 2553087 jr z,.EndNameFound3088 inc d3089 inc hl3090 dec b3091 dec b3092 jr .loop3093 .EndNameFound:3094 pop hl3095 ret3097WaitKeyPressToGoBackToGame:3098 ld hl,CursorHand3099 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl3100 ld hl,SpriteColCursorSprites3101 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl3103 call SwapAndSetPage 3104 .loop:3105 call PopulateControls 3106 31073111 ld a,(NewPrContr)3112 bit 5,a 3113 jr nz,.End3114 ld a,(NewPrContr)3115 bit 4,a 3116 jr z,.loop3118 .End:3119 xor a3120 ld (NewPrContr),a3122 ld a,(activepage) 3123 or a3124 ld hl,.RestorePage03125 jp z,docopy3126 ld hl,.RestorePage13127 jp docopy3129.RestorePage0:3130 db 000,000,000,0013131 db 000,000,000,0003132 db 000,001,191,0003133 db 000,000,$d0 3134.RestorePage1:3135 db 000,000,000,0003136 db 000,000,000,0013137 db 000,001,191,0003138 db 000,000,$d0 3140CheckWaitButtonPressed:31413149 ld a,(WaitButtonPressed?)3150 dec a3151 ret m3152 ld (WaitButtonPressed?),a3154 ld (MoVeMonster?),a 3155 or a3156 ret nz 3157 3158 call SetCurrentActiveMOnsterInIX3159 ld a,(ix+MonsterStatus) 3160 and %0111 11113161 cp MonsterStatusWaiting3162 ret z 3164 ld a,(ix+MonsterStatus) 3165 and %1000 0003166 or a,MonsterStatusWaiting3167 ld (ix+MonsterStatus),a3169 xor a3170 ld (MoVeMonster?),a 3171 ld (MonsterMovementPathPointer),a3172 ld (MonsterAnimationSpeed),a3173 ld (MonsterAnimationStep),a3175 ld a,13176 ld (SwitchToNextMonster?),a3177 3178 3179 ld a,1 3180 .EntryPointForDefendButtonPressed:3181 ld (BattleTextQ),a3182 ld a,23183 ld (SetBattleText?),a 3185 ld a,(ix+MonsterAmount) 3186 or (ix+MonsterAmount+1)3187 ld (BattleTextQ+3),a 3191 SetMonsterNameInBattleTextQ4:3192 call SetMonsterTableInIY 3193 push iy3194 pop hl3195 ld de,MonsterTableName3196 add hl,de3197 ld de,BattleTextQ+4 3198 ld bc,123199 ldir3200 ret32033204CheckDefendButtonPressed:32053213 ld a,(DefendButtonPressed?)3214 dec a3215 ret m3216 ld (DefendButtonPressed?),a3218 ld (MoVeMonster?),a 3219 or a3220 ret nz 3222 ld a,(ix+MonsterStatus) 3223 and %1000 0003224 or a,MonsterStatusDefending3225 ld (ix+MonsterStatus),a3227 xor a3228 ld (MoVeMonster?),a 3229 ld (MonsterMovementPathPointer),a3230 ld (MonsterAnimationSpeed),a3231 ld (MonsterAnimationStep),a3233 ld a,13234 ld (SwitchToNextMonster?),a3236 call SetMonsterTableInIY 3237 call SetTotalMonsterDefenseInHL 3240 ld a,c3241 ld (BattleTextQ+1),a 3243 ld a,2 3244 jp CheckWaitButtonPressed.EntryPointForDefendButtonPressed3245 3246 ret32483255ShowEnemyStats:32563257 call SetEnemyStatsWindow 3258 call SwapAndSetPage 3259 3260 ld bc,SFX_ShowEnemyStats3261 call RePlayerSFX_PlayCh1 3263 .engine:3264 call PopulateControls 32663271 ld a,(NewPrContr)3272 and %0011 00003273 jr nz,.end3274 jr .engine 3276 .end:3277 ld a,%0011 00003278 ld (ControlsOnInterrupt),a 3279 ret3281SetEnemyStatsWindow:3282 ld de,$0000 + (007*128) + (008/2) - 1283284 ld a,(spat+1) 3285 sub 323286 jr nc,.NotCarryX3287 xor a3288 .NotCarryX:3289 cp 1263290 jr c,.NoOverFlowRight3291 ld a,1263292 .NoOverFlowRight:3294 res 0,a3296 ld b,a 3298 srl a 3299 ld h,03300 ld l,a3301 add hl,de3302 ex de,hl3303 3304 ld a,(spat+0) 3305 ld c,-503306 cp 703307 jr nc,.CursorTopOfScreen3308 ld c,323309 .CursorTopOfScreen:3310 add a,c3312 sub a,243313 jr nc,.NotCarryY3314 xor a3315 .NotCarryY:3316 cp 1193317 jr c,.NoOverFlowBottom3318 ld a,1193319 .NoOverFlowBottom:3321 ld c,a 3322 push bc3324 ld h,03325 ld l,a3326 add hl,hl 3327 add hl,hl 3328 add hl,hl 3329 add hl,hl 3330 add hl,hl 3331 add hl,hl 3332 add hl,hl 3333 add hl,de3334 ex de,hl3335 3336 ld hl,$4000 + (062*128) + (174/2) - 1283337 ld bc,$0000 + (069*256) + (062/2)3338 ld a,ChestBlock 3339 push de3340 call CopyRamToVramCorrectedCastleOverview 3342 3343 call SetMonsterTableInIYNeutralMonster3344 pop de3345 ld a,(iy+MonsterTableSpecialAbility)3346 cp RangedMonster3347 jp nz,.EndCheckRanged3348 ld hl,40/2 + (22*128)3349 add hl,de3350 ex de,hl3351 ld hl,$4000 + (131*128) + (176/2) - 1283352 ld bc,$0000 + (016*256) + (018/2)3353 ld a,ScrollBlock 3354 call CopyRamToVramCorrectedCastleOverview 3355 .EndCheckRanged:3357 3359 call SetNeutralMonsterHeroCollidedWithInA3360 call CheckRightClickToDisplayInfo.SetSYSX3362 exx3363 pop bc 3364 push bc3365 push af3366 ld a,b 3367 add a,31+13368 ld e,a3370 ld a,c 3371 add a,283372 ld d,a3373 pop af3374 exx3376 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 3378 pop bc 3380 ld a,c 3381 add a,143382 ld c,a3384 ld a,b 3385 add a,16+223386 ld b,a3387 ld a,4 3389 push bc3391 call SetMonsterTableInIYNeutralMonster 3392 push iy3393 pop hl3394 ld de,MonsterTableName3395 add hl,de3396 pop bc3397 push bc3398 3399 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel3400 call SetText 3402 pop bc3404 ld a,c 3405 add a,433406 ld c,a 3407 ld a,b 3408 add a,8-223409 ld b,a 3411 call SetAmountInHL3413 push bc3414 call SetText 3415 pop bc3417 ld a,c3418 add a,073419 ld c,a 3420 ld a,b3421 add a,233422 ld b,a 3423 push bc3425 call SetMonsterTableInIYNeutralMonster3426 pop bc3428 ld a,(iy+MonsterTableCostGems)3429 and %1110 00003430 cp Level1Unit3431 ld hl,13432 jp z,SetNumber16BitCastle3433 cp Level2Unit3434 ld hl,23435 jp z,SetNumber16BitCastle3436 cp Level3Unit3437 ld hl,33438 jp z,SetNumber16BitCastle3439 cp Level4Unit3440 ld hl,43441 jp z,SetNumber16BitCastle3442 cp Level5Unit3443 ld hl,53444 jp z,SetNumber16BitCastle3445 cp Level6Unit3446 ld hl,63447 jp z,SetNumber16BitCastle3449SetAmountInHL: 3450 3451 call SetAllMonstersInMonsterTable.SetAmountInA3452 cp 53453 ld hl,TextAFew3454 ret c3455 cp 133456 ld hl,TextSeveral3457 ret c3458 cp 293459 ld hl,TextMany3460 ret c3461 cp 613462 ld hl,TextNumerous3463 ret c3464 cp 933465 ld hl,TextAHorde3466 ret c34673468 ld hl,TextCountless3469 ret3472TextAFew: db " A Few",2553473TextSeveral: db "Several",2553474TextMany: db " Many",2553475TextNumerous: db "Numerous",2553476TextAHorde: db "A horde",2553477TextCountless: db "Countless",2553490ListOfMonsters:3491 db 021 3492 db 022 3493 db 019 3494 db 091 3495 db 092 3496 db 093 3497 db 094 3498 db 139 3499 db 136 3500 db 154 3501 db 153 3502 db 134 3503 db 132 3504 db 133 3505 db 147 3506 db 146 3507 db 148 3508 db 143 3509 db 088 3510 db 089 3511 db 126 3512 db 157 3513 db 130 3514 db 131 3515 db 124 3516 db 144 3517 db 145 3518 db 164 3519 db 167 3520 db 128 3521 db 140 3522 db 142 3523 db 030 3524 db 032 3525 db 034 3526 db 053 3527 db 070 3528 db 067 3529 db 098 3530 db 090 3531 db 155 3532 db 150 3533 db 151 3534 db 152 3535 db 149 3536 db 125 3537 db 122 3538 db 123 3539 db 087 3540 db 082 3541 db 079 3542 db 078 3543 db 159 3544 db 169 3545 db 160 3546 db 161 3547 db 162 3548 db 163 3549 db 168 3551 db 181 3552 db 180 3553 db 178 3554 db 179 3555 db 177 3556 3557ListOfGuardTowerMonsters:3558.level1:3559 db 175 3560 db 176 3561 db 171 3562 db 172 3564.level2:3565 db 057 3566 db 173 3567 db 055 3568 db 129 3570.level3:3571 db 107 3572 db 173 3573 db 108 3574 db 165 3576.level4:3577 db 109 3578 db 137 3579 db 166 3580 db 127 3582.level5:3583 db 174 3584 db 138 3585 db 170 3586 db 135 3588.level6:3589 db 141 3590 db 156 3591 db 141 3592 db 156 3594GuardTowerMonster:3595 call .GetMonsterInHL3596 ld ix,(plxcurrentheroAddress)3597 ld a,(ix+HeroX)3598 and 33599 ld d,03600 ld e,a3601 add hl,de3602 ld a,(hl)3603 ret3605 .GetMonsterInHL:3606 ld a,(GuardTowerMonsterLevel)3607 dec a3608 ld hl,ListOfGuardTowerMonsters.level13609 ret z3610 dec a3611 ld hl,ListOfGuardTowerMonsters.level23612 ret z3613 dec a3614 ld hl,ListOfGuardTowerMonsters.level33615 ret z3616 dec a3617 ld hl,ListOfGuardTowerMonsters.level43618 ret z3619 dec a3620 ld hl,ListOfGuardTowerMonsters.level53621 ret z3622 ld hl,ListOfGuardTowerMonsters.level63623 ret3625SetNeutralMonsterHeroCollidedWithInA:3626 ld a,(MonsterHerocollidedWithOnMap)3627 or a3628 jr z,GuardTowerMonster3629 sub a,128 3630 ld d,03631 ld e,a3632 ld hl,ListOfMonsters3633 add hl,de3634 ld a,(hl) 3635 ret3637SetAllMonstersInMonsterTable:3638 ld ix,(plxcurrentheroAddress)3639 ld a,(ix+HeroUnits+00) 3640 ld (ListOfMonstersToPut+00),a3641 ld l,(ix+HeroUnits+01) 3642 ld h,(ix+HeroUnits+02) 3643 ld (ListOfMonstersToPut+01),hl3645 ld a,(ix+HeroUnits+03) 3646 ld (ListOfMonstersToPut+05),a3647 ld l,(ix+HeroUnits+04) 3648 ld h,(ix+HeroUnits+05) 3649 ld (ListOfMonstersToPut+06),hl3651 ld a,(ix+HeroUnits+06) 3652 ld (ListOfMonstersToPut+10),a3653 ld l,(ix+HeroUnits+07) 3654 ld h,(ix+HeroUnits+08) 3655 ld (ListOfMonstersToPut+11),hl3657 ld a,(ix+HeroUnits+09) 3658 ld (ListOfMonstersToPut+15),a3659 ld l,(ix+HeroUnits+10) 3660 ld h,(ix+HeroUnits+11) 3661 ld (ListOfMonstersToPut+16),hl3663 ld a,(ix+HeroUnits+12) 3664 ld (ListOfMonstersToPut+20),a3665 ld l,(ix+HeroUnits+13) 3666 ld h,(ix+HeroUnits+14) 3667 ld (ListOfMonstersToPut+21),hl3669 ld a,(ix+HeroUnits+15) 3670 ld (ListOfMonstersToPut+25),a3671 ld l,(ix+HeroUnits+16) 3672 ld h,(ix+HeroUnits+17) 3673 ld (ListOfMonstersToPut+26),hl3675 ld hl,(HeroThatGetsAttacked) 3676 ld a,l3677 or h3678 jp nz,.DefenderHasAHero3680 3681 xor a3682 ld hl,03683 ld (ListOfMonstersToPut+30),a3684 ld (ListOfMonstersToPut+31),hl3685 ld (ListOfMonstersToPut+35),a3686 ld (ListOfMonstersToPut+36),hl3687 ld (ListOfMonstersToPut+40),a3688 ld (ListOfMonstersToPut+41),hl3689 ld (ListOfMonstersToPut+45),a3690 ld (ListOfMonstersToPut+46),hl3691 ld (ListOfMonstersToPut+50),a3692 ld (ListOfMonstersToPut+51),hl3693 ld (ListOfMonstersToPut+55),a3694 ld (ListOfMonstersToPut+56),hl36963698 ld a,r3699 and 33700 jr z,.Situation2 3701 dec a3702 jr z,.Situation3 3703 3704 .Situation1: 3705 call SetNeutralMonsterHeroCollidedWithInA 3706 ld (ListOfMonstersToPut+40),a3707 call .SetAmountInA3709 ld l,a3710 ld h,03711 ld (ListOfMonstersToPut+41),hl3712 jp .EndSetAllMonsters3714 .Situation2: 3715 call SetNeutralMonsterHeroCollidedWithInA 3716 ld (ListOfMonstersToPut+40),a3717 ld (ListOfMonstersToPut+45),a3718 call .SetAmountInA3719 cp 13720 jr nz,.EndCheckTotalAmountIs13721 xor a3722 ld (ListOfMonstersToPut+40),a3723 ld a,13724 .EndCheckTotalAmountIs1:3725 srl a 3726 ld l,a3727 ld h,03728 ld (ListOfMonstersToPut+41),hl3729 ld de,03730 adc hl,de 3731 ld (ListOfMonstersToPut+46),hl3732 jp .EndSetAllMonsters3734 .Situation3: 3735 call SetNeutralMonsterHeroCollidedWithInA 3736 ld (ListOfMonstersToPut+45),a3737 ex af,af'3738 call .SetAmountInA3739 ld e,a3740 ld c,3 3741 call Div8 3742 ld l,a3743 ld h,03744 or a3745 jr z,.DivisionResultIs0 3746 ex af,af'3747 ld (ListOfMonstersToPut+35),a3748 ld (ListOfMonstersToPut+40),a3749 ex af,af'3750 ld (ListOfMonstersToPut+36),hl3751 ld (ListOfMonstersToPut+41),hl3752 .DivisionResultIs0:3753 ld d,03754 ld e,b3755 add hl,de 3756 ld (ListOfMonstersToPut+46),hl3757 jp .EndSetAllMonsters3759 .SetAmountInA:3760 ld a,(MonsterHerocollidedWithOnMapAmount)3761 sub a,Number1Tile3762 jr z,.Amount1 3763 dec a3764 jr z,.Amount23765 dec a3766 jr z,.Amount33767 dec a3768 jr z,.Amount43769 dec a3770 jr z,.Amount53772 .Amount6: 3773 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3774 and 313775 add a,933776 ret3778 .Amount5: 3779 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3780 and 313781 add a,613782 ret3784 .Amount4: 3785 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3786 and 313787 add a,293788 ret3790 .Amount3: 3791 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3792 and 153793 add a,133794 ret3796 .Amount2: 3797 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3798 and 73799 add a,53800 ret3801 3802 .Amount1: 3803 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3804 and 33805 inc a3806 ret3808 .DefenderHasAHero:3809 ld ix,(HeroThatGetsAttacked)3810 ld a,(ix+HeroUnits+00) 3811 ld (ListOfMonstersToPut+30),a3812 ld l,(ix+HeroUnits+01) 3813 ld h,(ix+HeroUnits+02) 3814 ld (ListOfMonstersToPut+31),hl3816 ld a,(ix+HeroUnits+03) 3817 ld (ListOfMonstersToPut+35),a3818 ld l,(ix+HeroUnits+04) 3819 ld h,(ix+HeroUnits+05) 3820 ld (ListOfMonstersToPut+36),hl3822 ld a,(ix+HeroUnits+06) 3823 ld (ListOfMonstersToPut+40),a3824 ld l,(ix+HeroUnits+07) 3825 ld h,(ix+HeroUnits+08) 3826 ld (ListOfMonstersToPut+41),hl3828 ld a,(ix+HeroUnits+09) 3829 ld (ListOfMonstersToPut+45),a3830 ld l,(ix+HeroUnits+10) 3831 ld h,(ix+HeroUnits+11) 3832 ld (ListOfMonstersToPut+46),hl3834 ld a,(ix+HeroUnits+12) 3835 ld (ListOfMonstersToPut+50),a3836 ld l,(ix+HeroUnits+13) 3837 ld h,(ix+HeroUnits+14) 3838 ld (ListOfMonstersToPut+51),hl3840 ld a,(ix+HeroUnits+15) 3841 ld (ListOfMonstersToPut+55),a3842 ld l,(ix+HeroUnits+16) 3843 ld h,(ix+HeroUnits+17) 3844 ld (ListOfMonstersToPut+56),hl3846 .EndSetAllMonsters:3847 ld ix,ListOfMonstersToPut3848 ld iy,Monster13849 ld b,1 3851 call .SetMonster3852 call .SetMonster3853 call .SetMonster3854 call .SetMonster3855 call .SetMonster3856 call .SetMonster3858 call .SetMonster3859 call .SetMonster3860 call .SetMonster3861 call .SetMonster3862 call .SetMonster3863 call .SetMonster3864 ret3866 .SetMonster:3867 push bc3869 xor a3870 ld (iy+MonsterStatus),a 3871 ld (iy+MonsterStatusEffect1),a 3872 ld (iy+MonsterStatusEffect2),a 3873 ld (iy+MonsterStatusEffect3),a 3874 ld (iy+MonsterStatusEffect4),a 3875 ld (iy+MonsterStatusEffect5),a 3876 3877 ld a,(ix+1)3878 ld (iy+MonsterAmount),a3879 ld a,(ix+2)3880 ld (iy+MonsterAmount+1),a3881 ld a,(ix)3882 ld (iy+MonsterNumber),a3884 push ix3885 push iy3886 push af 3888 ld a,b3889 ld (CurrentActiveMonster),a3890 call SetCurrentActiveMOnsterInIX3892 call SetTotalMonsterHPInHL 3893 ld e,l3895 ld b,(iy+MonsterTableSpriteSheetBlock)3896 ld c,(iy+MonsterTableNX)3897 ld d,(iy+MonsterTableNY)38983900 pop af 3901 or a3902 jr nz,.Not03903 ld e,03904 .Not0:3905 ld (ix+MonsterHP),e3907 ld l,(iy+0)3908 ld h,(iy+1) 3909 push hl3910 pop iy 3912 ld a,(CurrentActiveMonster) 3913 cp 73914 jr c,.MonsterIsFacingRight3916 .MonsterIsFacingLeft:3917 push de3918 ld a,(iy+1) 3919 add a,a3920 ld d,03921 ld e,a3922 add iy,de 3923 pop de3925 .MonsterIsFacingRight:3926 ld l,(iy+3)3927 ld h,(iy+2) 3929 pop iy3930 pop ix3932 ld (iy+MonsterSYSX),h3933 ld (iy+MonsterSYSX+1),l3935 ld (iy+MonsterBlock),b3936 ld (iy+MonsterNX),c3937 ld (iy+MonsterNXPrevious),c3938 ld (iy+MonsterNY),d3939 ld (iy+MonsterNYPrevious),d3940 ld a,(ix+3)3941 ld (iy+MonsterX),a3942 ld (iy+MonsterXPrevious),a3947 ld a,(CurrentActiveMonster) 3948 cp 73949 jr c,.EndCheckAdjustXForMonstersOnTheRight3951 ld a,c 3952 cp 173953 jp c,.EndCheckAdjustXForMonstersOnTheRight3955 ld a,(iy+MonsterX)3956 sub a,163957 ld (iy+MonsterX),a3958 ld (iy+MonsterXPrevious),a3960 ld a,c 3961 cp 333962 jp c,.EndCheckAdjustXForMonstersOnTheRight3964 ld a,(iy+MonsterX)3965 sub a,163966 ld (iy+MonsterX),a3967 ld (iy+MonsterXPrevious),a3969 ld a,c 3970 cp 57 3971 jp c,.EndCheckAdjustXForMonstersOnTheRight3973 ld a,(iy+MonsterX)3974 sub a,163975 ld (iy+MonsterX),a3976 ld (iy+MonsterXPrevious),a3978 .EndCheckAdjustXForMonstersOnTheRight:3984 ld a,(ix+4)3985 sub a,d3986 ld (iy+MonsterY),a3987 ld (iy+MonsterYPrevious),a3989 ld a,(iy+MonsterHP)3990 or a3991 jr nz,.NotZero3993 3994 ld (iy+MonsterX),2553995 ld (iy+MonsterXPrevious),2553996 ld (iy+MonsterY),2123997 ld (iy+MonsterYPrevious),2123998 .NotZero:4000 4001 ld de,54002 add ix,de 4003 4004 ld de,LenghtMonsterTable4005 add iy,de 4006 4007 pop bc4008 inc b4009 ret4011SetCurrentActiveMOnsterInIX:4012 ld a,(CurrentActiveMonster)4013 inc a4014 ld b,a4015 ld ix,Monster0-LenghtMonsterTable4017 .loop:4018 ld de,LenghtMonsterTable4019 add ix,de4020 djnz .loop4021 ret4023AnimateMonster:4024 call SetCurrentActiveMOnsterInIX4025 call SetMonsterTableInIY 4027 ld a,(MoVeMonster?) 4028 cp 14029 jr nz,.EndCheckMoveMonster4030 inc iy4031 inc iy 4032 .EndCheckMoveMonster:4034 ld a,(MoVeMonster?) 4035 cp 24036 jp z,.MonsterAttacksAnimateOnlyOnGeneralAttackPattern4038 ld l,(iy+0)4039 ld h,(iy+1) 4040 push hl4041 pop iy 4043 push iy4044 call .animate4045 pop iy4047 4048 ld a,(MonsterAnimationSpeed)4049 inc a4050 cp (iy+0) 4051 jr nz,.EndCheckAnimate4052 ld a,(MonsterAnimationStep) 4053 inc a4054 cp (iy+1) 4055 jr nz,.EndCheckLoop4056 xor a4057 .EndCheckLoop:4058 ld (MonsterAnimationStep),a4059 xor a 4060 .EndCheckAnimate:4061 ld (MonsterAnimationSpeed),a4062 ret4064 .animate:4065 4066 ld a,(MoVeMonster?) 4067 or a4068 jr z,.EndCheckMonsterMoving4069 ld a,(MonsterMovingRight?)4070 or a4071 jr z,.MonsterIsFacingLeft4072 jr .MonsterIsFacingRight4073 .EndCheckMonsterMoving:4075 ld a,(CurrentActiveMonster) 4076 cp 74077 jr c,.MonsterIsFacingRight4079 .MonsterIsFacingLeft:4080 ld a,(iy+1) 4081 add a,a4082 ld d,04083 ld e,a4084 add iy,de 4086 .MonsterIsFacingRight:4087 ld a,(MonsterAnimationStep)4088 add a,a4089 add a,24090 ld d,04091 ld e,a4092 add iy,de4093 4094 ld l,(iy+0)4095 ld h,(iy+1) 4097 ld (ix+MonsterSYSX+0),l4098 ld (ix+MonsterSYSX+1),h4099 ret4101 .MonsterAttacksAnimateOnlyOnGeneralAttackPattern:4102 ld l,(iy+4)4103 ld h,(iy+5) 4104 ld de,GeneralMonsterAttackPatternRight4105 call CompareHLwithDE 4106 ret nz4108 ld l,(iy+0)4109 ld h,(iy+1) 4110 push hl4111 pop iy 4113 ld a,(MonsterAttackingRight?)4114 or a4115 jr z,.MonsterIsFacingLeft4116 jr .MonsterIsFacingRight4118TeleportMovement: equ 104119AnimateAttack: equ 204120DisplaceLeft: equ 214121DisplaceRight: equ 224122ShowBeingHitSprite: equ 234123ShootProjectile: equ 244124InitiateAttack: equ 2544125EndMovement: equ 2554126WaitImpactProjectile: equ 254127DisplaceLeft8: equ 264128DisplaceRight8: equ 274129MoveMonster:4130 ld a,(ix+MonsterY)4131 ld (ix+MonsterYPrevious),a4132 ld a,(ix+MonsterX)4133 ld (ix+MonsterXPrevious),a4134 ld a,(ix+MonsterNY)4135 ld (ix+MonsterNYPrevious),a4136 ld a,(ix+MonsterNX)4137 ld (ix+MonsterNXPrevious),a4139 push ix4140 pop hl4141 ld de,Monster04142 call CompareHLwithDE4143 jp z,MoveGridPointer4145 ld a,(MoVeMonster?) 4146 or a4147 ret z4149 ld hl,CursorHand4150 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl4151 ld hl,SpriteColCursorSprites4152 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl4154 .HandleMovement:4155 ld a,(MonsterMovementPathPointer)4156 ld e,a4157 ld d,04158 ld hl,MonsterMovementPath4159 add hl,de4160 ld a,(hl)4161 cp EndMovement 4162 jp z,.EndMovement4163 cp InitiateAttack 4164 jp z,.HandleAttackedMonster4165 cp 128 4166 jp nc,.ChangeNX4167 cp TeleportMovement4168 jp z,.TeleportMovement4169 cp 124170 jp z,.InitiateAttackRightUp4171 cp 134172 jp z,.InitiateAttackRight4173 cp 144174 jp z,.InitiateAttackRightDown4175 cp 164176 jp z,.InitiateAttackLeftDown4177 cp 174178 jp z,.InitiateAttackLeft4179 cp 184180 jp z,.InitiateAttackLeftUp4181 cp AnimateAttack4182 jp z,.AnimateAttack4183 cp DisplaceLeft 4184 jp z,.DisplaceLeft4185 cp DisplaceRight 4186 jp z,.DisplaceRight4187 cp ShowBeingHitSprite 4188 jp z,.ShowBeingHitSprite4189 cp ShootProjectile 4190 jp z,.ShootProjectile4191 cp WaitImpactProjectile 4192 jp z,.WaitImpactProjectile4193 cp DisplaceLeft8 4194 jp z,.DisplaceLeft84195 cp DisplaceRight8 4196 jp z,.DisplaceRight84198 call .Move4200 ld a,(MoveMonster?) 4201 cp 24202 ld c,1 4203 jr z,.SetMovementDuration4204 ld c,3 4205 .SetMovementDuration:4206 4207 ld a,(MonsterMovementAmountOfSteps)4208 dec a4209 and c4210 ld (MonsterMovementAmountOfSteps),a4211 ret nz4212 ld a,(MonsterMovementPathPointer)4213 inc a4214 ld (MonsterMovementPathPointer),a4215 ret4217 .DisplaceLeft:4218 ld a,(ix+MonsterX)4219 sub a,164220 ld (ix+MonsterX),a4222 ld a,(MonsterMovementPathPointer)4223 inc a4224 ld (MonsterMovementPathPointer),a4225 jp .HandleMovement4227 .DisplaceRight:4228 ld a,(ix+MonsterX)4229 add a,164230 ld (ix+MonsterX),a4232 ld a,(MonsterMovementPathPointer)4233 inc a4234 ld (MonsterMovementPathPointer),a4235 jp .HandleMovement4237 .DisplaceLeft8:4238 ld a,(ix+MonsterX)4239 sub a,84240 ld (ix+MonsterX),a4242 ld a,(MonsterMovementPathPointer)4243 inc a4244 ld (MonsterMovementPathPointer),a4245 jp .HandleMovement4247 .DisplaceRight8:4248 ld a,(ix+MonsterX)4249 add a,84250 ld (ix+MonsterX),a4252 ld a,(MonsterMovementPathPointer)4253 inc a4254 ld (MonsterMovementPathPointer),a4255 jp .HandleMovement4257 .ShowBeingHitSprite:4258 ld a,r4259 and 34260 ld bc,SFX_Punch4261 jr z,.goPlaySfx4262 dec a4263 ld bc,SFX_Kick4264 jr z,.goPlaySfx4265 dec a4266 ld bc,SFX_104267 jr z,.goPlaySfx4268 ld bc,SFX_104270 .goPlaySfx:4271 call RePlayerSFX_PlayCh14273 ld a,14274 ld (ShowExplosionSprite?),a 4275 xor a4276 ld (ExplosionSpriteStep),a4277 ld a,(MonsterMovementPathPointer)4278 inc a4279 ld (MonsterMovementPathPointer),a4280 jp .HandleMovement4282 .ShootProjectile:4283 push iy4284 push bc4285 ld bc,SFX_Shoot4286 call RePlayerSFX_PlayCh14287 pop bc4288 pop iy4290 ld a,14291 ld (ShootProjectile?),a4292 ld a,(MonsterMovementPathPointer)4293 inc a4294 ld (MonsterMovementPathPointer),a4295 jp .HandleMovement4297 .WaitImpactProjectile:4298 ld a,(ShootProjectile?)4299 or a4300 ret nz4302 push iy4303 push bc4304 ld bc,SFX_enemyhit4305 call RePlayerSFX_PlayCh14306 pop bc4307 pop iy4309 ld a,14310 ld (ShowExplosionSprite?),a 4311 xor a4312 ld (ExplosionSpriteStep),a4313 jp .HandleAttackedMonster4314 4315 .AnimateAttack:4316 inc hl4317 ld e,(hl)4318 inc hl4319 ld d,(hl) 4320 ld (ix+MonsterSYSX+0),e4321 ld (ix+MonsterSYSX+1),d4323 ld a,(MonsterMovementPathPointer)4324 add a,34325 ld (MonsterMovementPathPointer),a4326 jp .HandleMovement4328 .InitiateAttackRight:4329 ld (ActiveMonsterAttackingDirection),a4330 call SetCurrentActiveMOnsterInIX4331 call SetMonsterTableInIY 4332 ld l,(iy+4)4333 ld h,(iy+5) 4334 ld a,1 4335 jp .InitiateAttack4337 .InitiateAttackLeft:4338 ld (ActiveMonsterAttackingDirection),a4339 call SetCurrentActiveMOnsterInIX4340 call SetMonsterTableInIY 4341 ld l,(iy+6)4342 ld h,(iy+7) 4343 Xor a 4344 jp .InitiateAttack4346 .InitiateAttackLeftUp:4347 ld (ActiveMonsterAttackingDirection),a4348 call SetCurrentActiveMOnsterInIX4349 call SetMonsterTableInIY 4350 ld l,(iy+08)4351 ld h,(iy+09) 4352 Xor a 4353 jp .InitiateAttack4355 .InitiateAttackLeftDown:4356 ld (ActiveMonsterAttackingDirection),a4357 call SetCurrentActiveMOnsterInIX4358 call SetMonsterTableInIY 4359 ld l,(iy+10)4360 ld h,(iy+11) 4361 Xor a 4362 jp .InitiateAttack4364 .InitiateAttackRightUp:4365 ld (ActiveMonsterAttackingDirection),a4366 call SetCurrentActiveMOnsterInIX4367 call SetMonsterTableInIY 4368 ld l,(iy+12)4369 ld h,(iy+13) 4370 ld a,1 4371 jp .InitiateAttack4373 .InitiateAttackRightDown:4374 ld (ActiveMonsterAttackingDirection),a4375 call SetCurrentActiveMOnsterInIX4376 call SetMonsterTableInIY 4377 ld l,(iy+14)4378 ld h,(iy+15) 4379 ld a,1 4380 jp .InitiateAttack4382 .InitiateAttack:43834384 ld a,24385 ld (MoveMonster?),a 4386 xor a4387 ld (MonsterMovementPathPointer),a4388 ld de,MonsterMovementPath43894393 ld bc,LenghtMonsterMovementPathTable4395 ldir4396 4397 xor a4398 ld (MonsterAttackingRight?),a 4399 ld a,(MonsterMovementPath+1)4400 cp 54401 jp nc,.HandleMovement4402 ld a,14403 ld (MonsterAttackingRight?),a 4404 4405 jp .HandleMovement4407 .HandleAttackedMonster:4408 4409 call SetCurrentActiveMOnsterInIX4410 call SetMonsterTableInIY 4413 call SetTotalMonsterDamageENTIRESTACKInHL4416 44194428 4431 call ApplyAttackDefenseFormula 44374438 ld a,(BrokenArrow?)4439 or a4440 jr z,.EndCheckBrokenArrow4441 push hl4442 pop bc4443 ld de,2 4444 call DivideBCbyDE 4445 push bc4446 pop hl4447 .EndCheckBrokenArrow:444844504451 ld a,(HandleRetaliation?) 4452 or a4453 jr z,.EndCheckRetaliation4455 push hl4456 call SetCurrentActiveMOnsterInIX4457 call SetMonsterTableInIY 4458 pop hl4459 ld a,(iy+MonsterTableSpecialAbility)4460 cp RangedMonster4461 jp nz,.EndCheckRetaliation4463 push hl4464 pop bc4465 ld de,2 4466 call DivideBCbyDE 4467 push bc4468 pop hl4470 .EndCheckRetaliation:447144734474 call ApplyAttackReductionFromArmorer4475 call ApplyAttackReductionFromGreenLeafShield4480 4481 push hl4482 ld a,3 4483 ld (BattleTextQ),a4484 ld a,24485 ld (SetBattleText?),a 4486 ld (BattleTextQ+1),hl 4487 call SetCurrentActiveMOnsterInIX4489 ld a,(ix+MonsterAmount) 4490 or (ix+MonsterAmount+1)4491 ld (BattleTextQ+3),a 4493 call SetMonsterNameInBattleTextQ44495 pop hl4496 4503 .DealDamageToMonster: 4505 ld de,04506 ex de,hl4507 or a4508 sbc hl,de 4509 push hl4511 ld ix,(MonsterThatIsBeingAttacked)4513 ld b,hypnosisSpellNumber 4514 call RemoveSpell 4516 4517 ld l,(ix+MonsterAmount)4518 ld h,(ix+MonsterAmount+1)4519 ld (AmountMonsterBeforeBeingAttacked),hl4521 call SetTotalMonsterHPInHL 4522 ld c,l 4523 pop hl 4525 ld ix,(MonsterThatIsBeingAttacked)4526 .loop:4527 ld d,04528 ld e,(ix+MonsterHP) 4530 add hl,de4531 jr c,.NoUnitsOrExactly1UnitLost4533 ld e,(ix+MonsterAmount)4534 ld d,(ix+MonsterAmount+1)4535 dec de 4536 ld (ix+MonsterAmount),e4537 ld (ix+MonsterAmount+1),d4538 ld a,d4539 or e4541 jr z,.MonsterDied4542 ld (ix+MonsterHP),c 4543 jp .loop4545 .NoUnitsOrExactly1UnitLost:4546 ld (ix+MonsterHP),l4547 ld a,l4548 or a4549 jr nz,.CheckRetaliate4551 ld e,(ix+MonsterAmount)4552 ld d,(ix+MonsterAmount+1)4553 dec de 4554 ld (ix+MonsterAmount),e4555 ld (ix+MonsterAmount+1),d4556 ld a,d4557 or e4559 jr z,.MonsterDied4560 ld (ix+MonsterHP),c 4562 4563 .CheckRetaliate: 4564 call SetAmountUnderMonsterIn3Pages4566 ld a,(SpellSelected?) 4567 or a4568 ret nz4570 ld a,(HandleRetaliation?) 4571 or a 4572 jr z,.go4573 xor a4574 ld (HandleRetaliation?),a4575 jr .EndSetStatusOnEndMovement4576 .go:4580 4581 call SetCurrentActiveMOnsterInIX4582 call SetMonsterTableInIY 4583 ld a,(iy+MonsterTableSpecialAbility)4584 cp RangedMonster4585 jp nz,.EndCheckRangedMonster4586 ld a,(MayRangedAttackBeRetaliated?)4587 or a4588 jp z,.EndMovement4589 .EndCheckRangedMonster:4590 4592 ld ix,(MonsterThatIsBeingAttacked)4593 bit 7,(ix+MonsterStatus) 4594 jr nz,.EndMovement4595 ld a,14596 ld (HandleRetaliation?),a4598 ld b,ClawBackSpellNumber 4599 call CheckPresenceStatusEffect 4600 jr z,.EndMovement4601 set 7,(ix+MonsterStatus) 4602 jr .EndMovement4603 4604 .MonsterDied:4605 ld (ix+MonsterHP),000 4606 ld a,34607 ld (ShowExplosionSprite?),a 4608 xor a4609 ld (ExplosionSpriteStep),a 4610 ld a,14611 ld (MonsterDied?),a4613 push iy4614 push bc4615 ld bc,SFX_MonsterDied4616 call RePlayerSFX_PlayCh14617 pop bc4618 pop iy4620 ld a,(SpellSelected?) 4621 or a4622 ret nz4624 ld a,(HandleRetaliation?) 4625 or a 4626 jr z,.EndMovement4627 xor a4628 ld (HandleRetaliation?),a4629 jr .EndSetStatusOnEndMovement4631 .EndMovement:4632 call SetCurrentActiveMOnsterInIX4633 4634 ld a,(ix+MonsterStatus) 4635 and %1000 0004636 or a,MonsterStatusTurnEnded4637 ld (ix+MonsterStatus),a4638 .EndSetStatusOnEndMovement:4640 xor a4641 ld (MoVeMonster?),a 4642 ld (MonsterMovementPathPointer),a4643 ld (MonsterAnimationSpeed),a4644 ld (MonsterAnimationStep),a4645 ld a,14646 ld (SwitchToNextMonster?),a4647 ret4649 .ChangeNX:4650 and %0111 11114651 ld (ix+MonsterNX),a4652 ld a,(MonsterMovementPathPointer)4653 inc a4654 ld (MonsterMovementPathPointer),a4655 jp .HandleMovement4657 .Move:4658 cp 24659 jr z,.MoveRightUp4660 cp 34661 jr z,.MoveRight4662 cp 44663 jr z,.MoveRightDown4664 cp 64665 jr z,.MoveLeftDown4666 cp 74667 jr z,.MoveLeft4668 cp 84669 jr z,.MoveLeftUp4670 ret4672 .TeleportMovement:4673 inc hl 4674 ld a,(hl)4675 ld (ix+MonsterY),a4676 inc hl 4677 ld a,(hl)4678 ld (ix+MonsterX),a4680 xor a4681 ld (MoVeMonster?),a 4682 ld (MonsterMovementPathPointer),a4683 ld (MonsterAnimationSpeed),a4684 ld (MonsterAnimationStep),a4685 ld a,14686 ld (SwitchToNextMonster?),a4687 ret4689 .MoveRightUp:4690 ld a,14691 ld (MonsterMovingRight?),a4693 ld a,(ix+MonsterX)4694 add a,24695 ld (ix+MonsterX),a4697 ld a,(ix+MonsterY)4698 sub a,44699 ld (ix+MonsterY),a4700 ret4702 .MoveRight:4703 ld a,14704 ld (MonsterMovingRight?),a4706 ld a,(ix+MonsterX)4707 add a,44708 ld (ix+MonsterX),a4709 ret4711 .MoveRightDown:4712 ld a,14713 ld (MonsterMovingRight?),a4715 ld a,(ix+MonsterX)4716 add a,24717 ld (ix+MonsterX),a4719 ld a,(ix+MonsterY)4720 add a,44721 ld (ix+MonsterY),a4722 ret4724 .MoveLeftDown:4725 xor a4726 ld (MonsterMovingRight?),a4728 ld a,(ix+MonsterX)4729 sub a,24730 ld (ix+MonsterX),a4732 ld a,(ix+MonsterY)4733 add a,44734 ld (ix+MonsterY),a4735 ret4737 .MoveLeft:4738 xor a4739 ld (MonsterMovingRight?),a4741 ld a,(ix+MonsterX)4742 sub a,44743 ld (ix+MonsterX),a4744 ret4746 .MoveLeftUp:4747 xor a4748 ld (MonsterMovingRight?),a4750 ld a,(ix+MonsterX)4751 sub a,24752 ld (ix+MonsterX),a4754 ld a,(ix+MonsterY)4755 sub a,44756 ld (ix+MonsterY),a4757 ret4759ApplyAttackReductionFromGreenLeafShield:4760 push hl 4761 4762 ld ix,(MonsterThatIsBeingAttacked)4764 4765 push ix4766 pop hl 4767 ld de,Monster74768 call CompareHLwithDE 4769 ld ix,(plxcurrentheroAddress) 4770 jr c,.HeroFound4771 ld ix,(HeroThatGetsAttacked) 4772 push ix4773 pop hl4774 ld a,l4775 or h4776 pop hl 4777 ret z 4778 push hl4779 .HeroFound:4780 4781 4782 pop hl 4784 ld a,(ix+HeroInventory+2) 4785 cp 010 4786 ret nz4788 4789 push hl4790 call SetCurrentActiveMOnsterInIX4791 call SetMonsterTableInIY 4792 ld a,(iy+MonsterTableSpecialAbility)4793 cp RangedMonster4794 pop hl4795 ret nz4796 4797 ld de,02 4798 call ApplyPercentBasedBoost4799 or a4800 sbc hl,bc4801 sbc hl,bc4802 ret4803 48054806ApplyAttackReductionFromArmorer:4807 push hl 4808 4809 ld ix,(MonsterThatIsBeingAttacked)4811 4812 push ix4813 pop hl 4814 ld de,Monster74815 call CompareHLwithDE 4816 ld ix,(plxcurrentheroAddress) 4817 jr c,.HeroFound4818 ld ix,(HeroThatGetsAttacked) 4819 push ix4820 pop hl4821 ld a,l4822 or h4823 pop hl 4824 ret z 4825 push hl4826 .HeroFound:4827 4829 pop hl 4830 ld a,(ix+HeroSkills+0)4831 call .CheckSkillArmorer4832 ld a,(ix+HeroSkills+1)4833 call .CheckSkillArmorer4834 ld a,(ix+HeroSkills+2)4835 call .CheckSkillArmorer4836 ld a,(ix+HeroSkills+3)4837 call .CheckSkillArmorer4838 ld a,(ix+HeroSkills+4)4839 call .CheckSkillArmorer4840 ld a,(ix+HeroSkills+5)4841 call .CheckSkillArmorer4842 ret4844 .CheckSkillArmorer:4845 cp 07 4846 jr z,.BasicArmorerFound4847 cp 08 4848 jr z,.AdvancedArmorerFound4849 cp 09 4850 jr z,.ExpertArmorerFound4851 ret4853 .BasicArmorerFound:4854 ld de,20 4855 call ApplyPercentBasedBoost4856 or a4857 sbc hl,bc4858 sbc hl,bc4859 ret4861 .AdvancedArmorerFound:4862 ld de,10 4863 call ApplyPercentBasedBoost4864 or a4865 sbc hl,bc4866 sbc hl,bc4867 ret4869 .ExpertArmorerFound:4870 ld de,07 4871 call ApplyPercentBasedBoost4872 or a4873 sbc hl,bc4874 sbc hl,bc4875 ret4880 4883ApplyAttackDefenseFormula: 4884 push hl4885 4886 ld ix,(MonsterThatIsBeingAttacked)4887 call SetMonsterTableInIY 4888 call SetTotalMonsterDefenseInHL 4889 push hl4891 call SetCurrentActiveMOnsterInIX4892 call SetMonsterTableInIY 4893 call SetTotalMonsterAttackInHL 4894 pop de4895 4896 or a4897 sbc hl,de 4898 jr z,.AttackAndDefenseAreTheSame4899 4900 jr c,.DefenseIsHigher4902 .AttackIsHigher: 4903 ld a,l4904 cp 614905 jr c,.Go24906 ld a,604907 .Go2:4908 ld e,a4910 pop hl4912 push de4913 ld de,20 4914 call ApplyPercentBasedBoost4915 pop de4917 .loop1:4918 dec e4919 ret z4920 add hl,bc 4921 jp .loop14922 4923 .DefenseIsHigher: 4924 ld a,l4925 neg4926 cp 134927 jr c,.Go4928 ld a,124929 .Go:4931 ld e,a4932 pop hl4934 push de4935 ld de,40 4936 call ApplyPercentBasedBoost4937 pop de4938 or a4939 sbc hl,bc4940 sbc hl,bc4942 .loop2:4943 dec e4944 ret z4945 sbc hl,bc 4946 jp .loop24948 .AttackAndDefenseAreTheSame:4949 pop hl4950 ret4953MoveGridPointer:4954 ld a,(spat)4955 add a,14 4956 4957 and %1111 00004958 bit 4,a4959 jr z,.EvenTiles4961 .OddTiles:4962 sub a,94963 ld (ix+MonsterY),a4965 ld a,(spat+1)4966 sub a,6 4967 4968 and %1111 00004969 add a,4+84970 ld (ix+MonsterX),a4971 ret4973 .EvenTiles:4974 sub a,94975 ld (ix+MonsterY),a4976 ld a,(spat+1)4977 sub a,-44979 and %1111 00004980 add a,44981 ld (ix+MonsterX),a4982 ret49844988SortMonstersOnTheirSpeed:4989 ld c,TotalAmountOfMonstersOnBattleField-1-1 4990 call .sortloop4991 ret4993 .sortloop:4994 ld iy, MonstersSortedOnSpeed 4995 ld b,c 4997 .innerloop:4998 ld l,(iy)4999 ld h,(iy+1) 5000 push hl5001 pop ix5005 push iy5006 push bc5007 call SetMonsterTableInIY5009 call SetTotalMonsterSpeedInHL 5010 ld e,l5011 5013 50145015 pop bc5016 pop iy5017 push de5018 5019 ld l,(iy+2)5020 ld h,(iy+3) 5021 push hl5022 pop ix5023 5024 push iy5025 push bc 5026 call SetMonsterTableInIY5028 call SetTotalMonsterSpeedInHL 5029 ld a,l50325033 pop bc5034 pop iy5035 pop de5039 5040 cp e 5041 jr nc,.noswap 5043 5045 ld l,(iy)5046 ld h,(iy+1) 5047 ld e,(iy+2)5048 ld d,(iy+3) 5050 ld (iy),e5051 ld (iy+1),d 5052 ld (iy+2),l5053 ld (iy+3),h 5054 .noswap:5056 inc iy 5057 inc iy 5058 djnz .innerloop 5060 5061 dec c5062 jr nz,.sortloop 5063 ret50645066CopyARowOf12PixelsFromBottomOfPage3ToPage2:5067 db 0,0,172+16,35068 db 0,0,188+16,25069 db 0,1,12,05070 db 0,0,$d0 5071 5072BuildUpBattleFieldAndPutMonsters: 5073 xor a5074 ld (activepage),a 5075 call SetBattleFieldGraphics 5076 ld a,r5077 push af 5078 call .SetRocks5079 call .SetHeroes5080 ld hl,.CopyPage1To25081 call DoCopy 5082 call SwapAndSetPage 5083 call SetBattleFieldGraphics 5084 pop af 5085 call .SetRocks5086 call .SetHeroes5087 ld hl,.CopyPage1To35088 call DoCopy 50905092 call SetAllMonstersInMonsterTable 5093 call .PutAllMonsters 5094 call .CopyAllMonstersToPage1and250975102 xor a51035104 ld (CurrentActiveMonster),a5105 call CheckSwitchToNextMonster.GoToNextActiveMonster51075109 ret5112 .SetHeroes:5113 5114 ld ix,(plxcurrentheroAddress) 5115 ld l,(ix+HeroSpecificInfo+0) 5116 ld h,(ix+HeroSpecificInfo+1)5117 push hl5118 pop ix5120 5121 ld a,(ix+HeroinfoSYSX+0) 5122 and %0100 1000 5123 or a,128 + (064 / 2) 5124 xor 8 5125 ld l,a5126 ld h,(ix+HeroInfoSYSX+1) 5128 .XLeftHero: equ 05129 .YLeftHero: equ 305131 exx5132 ld de,256*(.YLeftHero) + (.XLeftHero)5133 exx5134 ld bc,.NXAndNY16x32HeroIcon5136 ld a,(ix+HeroInfoSpriteBlock)5138 call .CopyTransparantImageHero 5140 5141 ld ix,(HeroThatGetsAttacked) 5143 push ix 5144 pop hl5145 ld a,l5146 or h5147 ret z5149 ld l,(ix+HeroSpecificInfo+0) 5150 ld h,(ix+HeroSpecificInfo+1)5151 push hl5152 pop ix5153 5154 5155 ld a,(ix+HeroinfoSYSX+0) 5156 and %0100 1000 5157 or a,128 + (064 / 2) 5158 xor 8 5159 ld l,a5160 ld h,(ix+HeroInfoSYSX+1) 5162 .XRightHero: equ 256-165163 .YRightHero: equ 305165 exx5166 ld de,256*(.YRightHero) + (.XRightHero)5168 exx5169 ld bc,.NXAndNY16x32HeroIcon5170 ld a,(ix+HeroInfoSpriteBlock)5171 jp .CopyTransparantImageHero 5173.NXAndNY16x32HeroIcon: equ 032*256 + (016/2) 5176.CopyTransparantImageHero: 51775179 ld (BlockToReadFrom),a5180 ld (AddressToWriteFrom),hl5181 ld de,$8000 + ((212+12)*128) + (000/2) - 128 5182 ld (AddressToWriteTo),de 5183 ld (NXAndNY),bc5185 ld a,b5186 ld (CopyCastleButton2+ny),a5187 ld a,c5188 add a,a5189 ld (CopyCastleButton2+nx),a5191 call CopyRamToVramPage3ForBattleEngine 5193 ld a,(activepage)5194 xor 15195 ld (CopyCastleButton2+dPage),a5197 exx5198 ld a,d5199 ld (CopyCastleButton2+dy),a5200 ld a,e5201 ld (CopyCastleButton2+dx),a5203 ld a,212+125204 ld (CopyCastleButton2+sy),a5206 ld a,35207 ld (CopyCastleButton2+sPage),a5208 ld hl,CopyCastleButton25209 call docopy5210 ld a,15211 ld (CopyCastleButton2+sPage),a5213 ld a,2125214 ld (CopyCastleButton2+sy),a5216 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5217 call docopy5218 ret5221.CopyTransparantImage: 52225223 push af5224 ld a,b5225 ld (CopyCastleButton2+ny),a5226 ld a,c5227 add a,a5228 ld (CopyCastleButton2+nx),a5229 pop af5231 ld de,$8000 + ((212+16)*128) + (000/2) - 128 5232 call CopyRamToVramCorrectedWithoutActivePageSetting 5234 ld a,(activepage)5235 xor 15236 ld (CopyCastleButton2+dPage),a5238 exx5239 ld a,d5240 ld (CopyCastleButton2+dy),a5241 ld a,e5242 ld (CopyCastleButton2+dx),a5244 ld a,212+165245 ld (CopyCastleButton2+sy),a5247 ld hl,CopyCastleButton25248 call docopy5250 ld a,2125251 ld (CopyCastleButton2+sy),a5253 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5254 call docopy5255 ret5271 .CopyAllMonstersToPage1and2:5272 ld hl,.CopyMonstersFromPage0to15273 call DoCopy 5274 ld hl,.CopyMonstersFromPage0to2 5275 call DoCopy 5276 ret5277 5278 .PutAllMonsters:5279 call SortMonstersFromHighToLow 5280 ld a,1 5281 ld (CurrentActiveMonster),a5282 .loop:5283 call SetCurrentActiveMOnsterInIX5284 ld a,(ix+MonsterHP)5285 or a528652905291 jr nz,.GoPutMonster5292 5293 ld (ix+MonsterX),2555294 ld (ix+MonsterXPrevious),2555295 ld (ix+MonsterY),2125296 ld (ix+MonsterYPrevious),2125297 jr .NextMonster5298 .GoPutMonster:52995302 call Set255WhereMonsterStandsInBattleFieldGrid5303 call SetAmountUnderMonster5304 call StoreSYSXNYNXAndBlock 5305 call PutMonster 5306 .NextMonster:5307 ld a,(CurrentActiveMonster)5308 inc a 5309 cp TotalAmountOfMonstersOnBattleField5310 ret z5311 ld (CurrentActiveMonster),a5312 jr .loop5314.CopyMonstersFromPage0to1:5315 db 0,0,0,05316 db 0,0,0,15317 db 0,1,188+16,05318 db 0,0,$d0 5320.CopyMonstersFromPage0to2:5321 db 0,0,0,05322 db 0,0,0,25323 db 0,1,188+16,05324 db 0,0,$d0 5326.CopyPage1To2:5327 db 0,0,0,15328 db 0,0,0,25329 db 0,1,188+16,05330 db 0,0,$d0 5332.CopyPage1To3:5333 db 0,0,0,15334 db 0,0,0,35335 db 0,1,188+16,05336 db 0,0,$d0 5338 .SetRocks:5339 and 75340 ld hl,RocksVersion1+15341 jr z,.RocksFormationFound5342 dec a5343 ld hl,RocksVersion2+15344 jr z,.RocksFormationFound5345 dec a5346 ld hl,RocksVersion3+15347 jr z,.RocksFormationFound5348 dec a5349 ld hl,RocksVersion4+15350 jr z,.RocksFormationFound5351 dec a5352 ld hl,RocksVersion5+15353 jr z,.RocksFormationFound5354 dec a5355 ld hl,RocksVersion6+15356 jr z,.RocksFormationFound5357 dec a5358 ld hl,RocksVersion7+15359 jr z,.RocksFormationFound53605361 ld hl,RocksVersion8+153625363 .RocksFormationFound:5364 push hl5365 pop ix53665367 ld b,(ix-1) 5368 ld a,b5369 or a5370 ret z5372 .RockLoop:5373 push bc5374 ld e,(ix+0)5375 ld d,(ix+1)5376 call .GoSetRock 5378 ld l,(ix+2)5379 ld h,(ix+3)5380 ld (hl),2555382 inc ix5383 inc ix5384 inc ix5385 inc ix5386 pop bc5387 djnz .RockLoop5388 ret5390 .GoSetRock:5391 ld a,(BattleGraphicsBlock) 5392 cp BattleFieldWinterBlock5393 ld hl,$4000 + (000*128) + (016/2) - 128 5394 jr z,.BattleFieldTileFound5395 cp BattleFieldDesertBlock5396 ld hl,$4000 + (000*128) + (064/2) - 128 5397 jr z,.BattleFieldTileFound5398 cp BattleFieldCaveBlock5399 ld hl,$4000 + (000*128) + (112/2) - 128 5400 jr z,.BattleFieldTileFound5401 cp BattleFieldGentleBlock5402 ld hl,$4000 + (000*128) + (048/2) - 128 5403 jr z,.BattleFieldTileFound5404 cp BattleFieldAutumnBlock5405 ld hl,$4000 + (000*128) + (000/2) - 128 5406 jr z,.BattleFieldTileFound5407 ld hl,$4000 + (000*128) + (080/2) - 128 5409 .BattleFieldTileFound:5410 ld bc,$0000 + (016*256) + (016/2)5411 ld a,BattleFieldObjectsBlock 5413 push de5414 exx5415 pop de5416 exx5417 jp BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 5419RocksVersion1:5420 db 05421 dw $0000 + ((00*16+056)*256) + ((07*08 + 12)), BattleFieldGrid+007 + 00*LenghtBattleField5423RocksVersion2:5424 db 15425 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5427RocksVersion3:5428 db 25429 dw $0000 + ((03*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 03*LenghtBattleField5430 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5432RocksVersion4:5433 db 35434 dw $0000 + ((01*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 01*LenghtBattleField5435 dw $0000 + ((01*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 01*LenghtBattleField5436 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5438RocksVersion5:5439 db 35440 dw $0000 + ((05*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5441 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5442 dw $0000 + ((04*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 04*LenghtBattleField5444RocksVersion6:5445 db 45446 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5447 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5448 dw $0000 + ((04*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 04*LenghtBattleField5449 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5451RocksVersion7:5452 db 55453 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5454 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5455 dw $0000 + ((04*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 04*LenghtBattleField5456 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5457 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5459RocksVersion8:5460 db 65461 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5462 dw $0000 + ((02*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 02*LenghtBattleField5463 dw $0000 + ((01*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 01*LenghtBattleField5464 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5465 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5466 dw $0000 + ((06*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 06*LenghtBattleField5468Set255WhereMonsterStandsInBattleFieldGrid:5469 call FindMonsterInBattleFieldGrid 5471 5472 ld a,(ix+MonsterNX)5473 ld (hl),255 5474 cp 175475 ret c5476 5477 inc hl5478 inc hl5479 ld (hl),255 5480 cp 335481 ret c5482 inc hl5483 inc hl5484 ld (hl),255 5485 cp 575486 ret c5487 inc hl5488 inc hl5489 ld (hl),255 5490 ret5492CheckMonsterDied:5493 ld a,(MonsterDied?)5494 or a5495 ret z5496 xor a5497 ld (MonsterDied?),a5499 ld ix,(MonsterThatIsBeingAttacked)5501 5505 ld a,(activepage)5506 xor 15507 ld (EraseMonster+dPage),a5508 ld a,35509 ld (EraseMonster+sPage),a5510 5511 ld a,(ix+MonsterYPrevious)5512 ld (EraseMonster+sy),a 5513 ld (EraseMonster+dy),a5515 ld a,(ix+MonsterXPrevious)5516 ld (EraseMonster+dx),a5517 ld (EraseMonster+sx),a5519 ld a,(ix+MonsterNXPrevious)5520 ld (EraseMonster+nx),a5521 ld a,(ix+MonsterNYPrevious)5522 ld (EraseMonster+ny),a55245527 ld hl,EraseMonster5528 call docopy5530 5531 call RecoverOverwrittenMonstersSkipMonster05533 call SwapAndSetPage 5535 5539 ld a,(activepage)5540 xor 15541 ld (EraseMonster+dPage),a5542 ld a,35543 ld (EraseMonster+sPage),a5544 5545 ld a,(ix+MonsterYPrevious)5546 ld (EraseMonster+sy),a 5547 ld (EraseMonster+dy),a5549 ld a,(ix+MonsterXPrevious)5550 ld (EraseMonster+dx),a5551 ld (EraseMonster+sx),a5553 ld a,(ix+MonsterNXPrevious)5554 ld (EraseMonster+nx),a5555 ld a,(ix+MonsterNYPrevious)5556 ld (EraseMonster+ny),a55585561 ld hl,EraseMonster5562 call docopy5564 5565 call RecoverOverwrittenMonstersSkipMonster05567 call SwapAndSetPage 5569 5570 ld a,(activepage)5571 xor 15572 ld (EraseMonster+sPage),a5573 ld a,25574 ld (EraseMonster+dPage),a5575 5576 ld hl,EraseMonster5577 call docopy5579 ld a,25580 ld (EraseMonster+sPage),a5581 5582 5583 call FindMonsterInBattleFieldGrid 5584 call Set001AtCurrentMonstersLocation5586 5587 ld (ix+MonsterX),2555588 ld (ix+MonsterXPrevious),2555589 ld (ix+MonsterY),2125590 ld (ix+MonsterYPrevious),2125591 ret 5593SetAmountUnderMonster:55945600 ld hl,$4000 + (038*128) + (000/2) - 1285601 ld de,$0000 + (249*128) + (240/2) - 128 5602 ld bc,$0000 + (007*256) + (016/2) 5603 ld a,BattleFieldObjectsBlock 5604 call CopyRamToVramCorrectedCastleOverview 5606 ld b,241 5607 ld c,250 5608 ld l,(ix+MonsterAmount)5609 ld h,(ix+MonsterAmount+1)5610 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs056115613 ld a,(PutLetter+dx) 5614sub 24056155616 ld (PutMonsterAmountOnBattleField+nx),a5618 5622 ld a,(ix+MonsterNX)5623 sub a,165624 srl a 5625 add a,(ix+MonsterX)5626 ld (PutMonsterAmountOnBattleField+dx),a5628 ld a,(ix+MonsterY)56295632 ld (PutMonsterAmountOnBattleField+dy),a5634 ld a,(activepage)5635 xor 15636 ld (PutMonsterAmountOnBattleField+spage),a5637 ld (PutMonsterAmountOnBattleField+dpage),a5638 ld (SmoothCornerPutMonsterAmount+spage),a5639 ld (SmoothCornerPutMonsterAmount+dpage),a5641 ld a,(PutLetter+dx) 5642 dec a5643 ld (SmoothCornerPutMonsterAmount+dx),a5644 5645 ld hl,SmoothCornerPutMonsterAmount5646 call docopy 5648 ld hl,PutMonsterAmountOnBattleField5649 jp docopy 5651ClearAmountUnderMonster:5652 5656 ld a,165657 ld (ClearMonsterAmountOnBattleField+nx),a5658 5659 ld a,(ix+MonsterNX)5660 sub a,165661 srl a 5662 add a,(ix+MonsterX)5663 ld (ClearMonsterAmountOnBattleField+sx),a5664 ld (ClearMonsterAmountOnBattleField+dx),a5666 ld a,(ix+MonsterY)5667 ld (ClearMonsterAmountOnBattleField+sy),a 5668 ld (ClearMonsterAmountOnBattleField+dy),a 56705671 ld a,(activepage)5672 xor 15673 ld (ClearMonsterAmountOnBattleField+dpage),a5674 5675 ld a,3 5676 ld (ClearMonsterAmountOnBattleField+spage),a5678 ld hl,ClearMonsterAmountOnBattleField5679 call docopy 56815682 xor a5683 ld (RepairAmountAboveMonster?),a 5684 call RecoverOverwrittenMonstersSkipMonster05685 ld a,15686 ld (RepairAmountAboveMonster?),a 56885689 ld a,(activepage)5690 ld (ClearMonsterAmountOnBattleField+dpage),a5691 xor 15692 ld (ClearMonsterAmountOnBattleField+spage),a5694 ld hl,ClearMonsterAmountOnBattleField5695 call docopy 5696 56975698 ld a,25699 ld (ClearMonsterAmountOnBattleField+dpage),a5701 ld hl,ClearMonsterAmountOnBattleField5702 call docopy57045705 ld a,25706 ld (ClearMonsterAmountOnBattleField+spage),a5707 ld a,(activepage)5708 xor 15709 ld (ClearMonsterAmountOnBattleField+dpage),a5710 ld a,(ix+MonsterY)5711 ld (ClearMonsterAmountOnBattleField+sy),a5712 ld (ClearMonsterAmountOnBattleField+dy),a5713 ld a,(ix+MonsterX)5714 ld (ClearMonsterAmountOnBattleField+sx),a5715 ld (ClearMonsterAmountOnBattleField+dx),a5716 ld a,(ix+MonsterNY)5717 ld (ClearMonsterAmountOnBattleField+ny),a5718 ld a,(ix+MonsterNX)5719 ld (ClearMonsterAmountOnBattleField+nx),a5720 ld hl,ClearMonsterAmountOnBattleField5721 call docopy5723 ld a,75724 ld (ClearMonsterAmountOnBattleField+ny),a5725 ld a,2405726 ld (ClearMonsterAmountOnBattleField+sx),a5727 ld a,2495728 ld (ClearMonsterAmountOnBattleField+sy),a 5729 ret5731SetAmountUnderMonsterIn3Pages:5732 ld hl,(AmountMonsterBeforeBeingAttacked)5733 ld e,(ix+MonsterAmount)5734 ld d,(ix+MonsterAmount+1)5735 call CompareHLwithDE5736 ret z 5737 5738 ld ix,(MonsterThatIsBeingAttacked)5739 call ClearAmountUnderMonster5741 ld ix,(MonsterThatIsBeingAttacked)5742 call SetAmountUnderMonster5744 ld a,(activepage)5745 ld (PutMonsterAmountOnBattleField+dpage),a5746 ld hl,PutMonsterAmountOnBattleField5747 call docopy 5748 5749 ld a,25750 ld (PutMonsterAmountOnBattleField+dpage),a5751 ld hl,PutMonsterAmountOnBattleField5752 jp docopy 5753 5754Recover:5755 5756 push ix5757 pop hl5758 ld de,Monster05759 call CompareHLwithDE5760 jp z,RecoverOverwrittenMonstersHard5761 jp RecoverOverwrittenMonsters 5762 5763SortMonstersFromHighToLow:5764 push ix5765 ld c,TotalAmountOfMonstersOnBattleField-1-1 5766 call sortloop5767 pop ix5768 ret5770sortloop:5771 ld iy, OrderOfMonstersFromHighToLow + 2 5772 ld b,c 5774 .innerloop:5775 ld l,(iy)5776 ld h,(iy+1) 5777 push hl5778 pop ix5779 ld a,(ix+MonsterY)5780 add a,(ix+MonsterNY)5781 ld e,a 5783 ld l,(iy+2)5784 ld h,(iy+3) 5785 push hl5786 pop ix5787 ld a,(ix+MonsterY)5788 add a,(ix+MonsterNY)5790 cp e 5791 jr nc,.noswap 5793 5795 ld l,(iy)5796 ld h,(iy+1) 5797 ld e,(iy+2)5798 ld d,(iy+3) 5800 ld (iy),e5801 ld (iy+1),d 5802 ld (iy+2),l5803 ld (iy+3),h 5804 .noswap:5806 inc iy 5807 inc iy 5808 djnz .innerloop 5810 5811 dec c5812 jr nz,sortloop 5813 ret58145816CheckSpaceToMoveMonster:58175821 ld a,(NewPrContr)5822 bit 4,a5823 ret z5825 xor a5826 ld (BrokenArrow?),a5828 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5829 ld de,CursorBootsOld5830 call CompareHLwithDE5831 ld c,EndMovement 5832 jp z,.BootsFoundSetMovementPath5834 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5835 ld de,CursorSwordRight5836 call CompareHLwithDE5837 jp z,.SwordRightFoundSetMovementPath5839 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5840 ld de,CursorSwordLeft5841 call CompareHLwithDE5842 jp z,.SwordLeftFoundSetMovementPath5844 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5845 ld de,CursorSwordLeftUp5846 call CompareHLwithDE5847 jp z,.SwordLeftUpFoundSetMovementPath 5849 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5850 ld de,CursorSwordLeftDown5851 call CompareHLwithDE5852 jp z,.SwordLeftDownFoundSetMovementPath5854 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5855 ld de,CursorSwordRightUp5856 call CompareHLwithDE5857 jp z,.SwordRightUpFoundSetMovementPath5859 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5860 ld de,CursorSwordRightDown5861 call CompareHLwithDE5862 jp z,.SwordRightDownFoundSetMovementPath 5864 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5865 ld de,CursorBowAndArrow5866 call CompareHLwithDE5867 jp z,.BowAndArrowFoundSetMovementPath5869 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5870 ld de,CursorBrokenArrow5871 call CompareHLwithDE5872 ret nz5874 .BrokenArrowFoundSetMovementPath:5875 ld a,15876 ld (BrokenArrow?),a5877 .BowAndArrowFoundSetMovementPath: 5878 call SetCurrentActiveMOnsterInIX5879 ld a,(ix+MonsterX)5880 ld iy,(MonsterThatIsBeingAttacked)5881 cp (iy+MonsterX)5882 ld c,013 5883 jr c,.DirectionFound5884 ld c,017 5885 .DirectionFound:5886 ld a,15887 ld (MoVeMonster?),a 5888 xor a5889 ld (MonsterAnimationSpeed),a5890 ld (MonsterAnimationStep),a5891 ld iy,MonsterMovementPath5892 ld (iy),c 5894 push iy5895 push bc5896 ld bc,SFX_MouseClick5897 call RePlayerSFX_PlayCh1_MouseAction5898 pop bc5899 pop iy 5900 ret5902 .SwordLeftUpFoundSetMovementPath:5903 call FindCursorInBattleFieldGrid 5904 inc hl5905 ld de,LenghtBattleField5906 add hl,de5907 ld c,018 5908 jr .CursorLocationSet5910 .SwordLeftDownFoundSetMovementPath:5911 call FindCursorInBattleFieldGrid 5912 inc hl5913 ld de,LenghtBattleField5914 or a5915 sbc hl,de5916 ld c,016 5917 jr .CursorLocationSet5919 .SwordRightUpFoundSetMovementPath:5920 call FindCursorInBattleFieldGrid 5921 dec hl5922 ld de,LenghtBattleField5923 add hl,de5924 ld c,012 5925 jr .CursorLocationSet5927 .SwordRightDownFoundSetMovementPath:5928 call FindCursorInBattleFieldGrid 5929 dec hl5930 ld de,LenghtBattleField5931 or a5932 sbc hl,de5933 ld c,014 5934 jr .CursorLocationSet5936 .SwordLeftFoundSetMovementPath:5937 call FindCursorInBattleFieldGrid 5938 inc hl5939 inc hl5940 ld c,017 5941 jr .CursorLocationSet5943 .SwordRightFoundSetMovementPath:5944 call FindCursorInBattleFieldGrid 5945 dec hl5946 dec hl5948 call SetCurrentActiveMOnsterInIX5949 ld a,(ix+MonsterNX)5950 cp 175951 jp c,.SwordRightFound5952 dec hl5953 dec hl5954 cp 335955 jp c,.SwordRightFound5956 dec hl5957 dec hl5958 cp 575959 jp c,.SwordRightFound5960 dec hl5961 dec hl5962 .SwordRightFound:5964 ld c,013 5965 jr .CursorLocationSet5967 .BootsFoundSetMovementPath:5968 call FindCursorInBattleFieldGrid 5969 .CursorLocationSet:5971 ld a,15972 ld (MoVeMonster?),a 5973 xor a5974 ld (MonsterAnimationSpeed),a5975 ld (MonsterAnimationStep),a5977 push iy5978 push bc5979 ld bc,SFX_MouseClick5980 call RePlayerSFX_PlayCh1_MouseAction5981 pop bc5982 pop iy5984 5985 ld a,(hl) 5986 cp 15987 jr nz,.EndCheckActiveMonsterIsOnThisTile5988 ld iy,MonsterMovementPath5989 ld (iy),c 5990 ret5991 .EndCheckActiveMonsterIsOnThisTile:5994 ld a,(hl) 5995 dec a5997 ld iy,MonsterMovementPath5998 ld d,05999 ld e,a6000 add iy,de6001 ld (iy),c 6002 .loop:6003 call SearchForTileNumberA 6004 6005 dec iy6006 ld (iy),b6007 dec a6008 jr nz,.loop6009 6010 SearchForTileNumberA:6011 ld de,LenghtBattleField6012 6013 dec hl6014 dec hl6015 cp (hl)6016 jr z,.Right6018 6019 inc hl6020 inc hl6021 inc hl6022 inc hl6023 cp (hl)6024 jr z,.Left6026 6027 dec hl6028 dec hl6029 dec hl6030 or a6031 sbc hl,de6032 cp (hl)6033 jr z,.RightDown6035 6036 inc hl6037 inc hl6038 cp (hl)6039 jr z,.LeftDown6041 6042 add hl,de6043 add hl,de6044 cp (hl)6045 jr z,.LeftUp6047 6048 dec hl6049 dec hl6050 cp (hl)6051 jr z,.RightUp6053 .RightUp:6054 ld b,26055 ret6057 .LeftUp:6058 ld b,86059 ret6060 6061 .LeftDown:6062 ld b,66063 ret6065 .RightDown:6066 ld b,46067 ret6069 .Left:6070 ld b,76071 ret6073 .Right:6074 ld b,36075 ret6076 6077CheckSwitchToNextMonster:6078 ld a,(SwitchToNextMonster?)6079 or a6080 ret z6081 inc a6082 ld (SwitchToNextMonster?),a6083 cp 3 6084 ld a,06085 ld (MonsterAnimationSpeed),a6086 ld (MonsterAnimationStep),a6087 ret c6088 xor a6089 ld (SwitchToNextMonster?),a6091 call EndSpellSelected6092 call SetCurrentActiveMOnsterInIX6093 call Set255WhereMonsterStandsInBattleFieldGrid6095 6096 ld a,(activepage)6097 ld (TransparantImageBattleRecoverySprite+sPage),a6098 ld a,26099 ld (TransparantImageBattleRecoverySprite+dPage),a 6100 ld a,(ix+MonsterY)6101 ld (TransparantImageBattleRecoverySprite+sy),a 6102 ld (TransparantImageBattleRecoverySprite+dy),a 6103 ld a,(ix+MonsterX)6104 ld (TransparantImageBattleRecoverySprite+sx),a6105 ld (TransparantImageBattleRecoverySprite+dx),a6106 ld a,(ix+MonsterNY)6107 61086109 6110 ld (TransparantImageBattleRecoverySprite+ny),a6111 ld a,(ix+MonsterNX)6112 ld (TransparantImageBattleRecoverySprite+nx),a6114 ld hl,TransparantImageBattleRecoverySprite6115 call docopy61176120 .GoToNextActiveMonster:6121 ld a,(HandleRetaliation?)6122 or a6123 jr z,.EndHandleRetaliation6125 ld iy,(MonsterThatIsBeingAttacked)6126 ld (MonsterThatIsBeingAttacked),ix 6127 ld a,(ix+MonsterX)6128 ld (MonsterThatIsBeingAttackedX),a6129 ld a,(ix+MonsterNX)6130 ld (MonsterThatIsBeingAttackedNX),a6131 ld a,(ix+MonsterY)6132 ld (MonsterThatIsBeingAttackedY),a6133 ld a,(ix+MonsterNY)6134 ld (MonsterThatIsBeingAttackedNY),a6135 6136 call SetMonsterInIYAsActiveMonsterAndSetInIX6138 ld a,16139 ld (MoVeMonster?),a 6140 xor a6141 ld (MonsterAnimationSpeed),a6142 ld (MonsterAnimationStep),a6144 ld a,(ActiveMonsterAttackingDirection)6145 cp 12 6146 ld c,16 6147 jr z,.SetCounterAttackdirection6148 cp 13 6149 ld c,17 6150 jr z,.SetCounterAttackdirection6151 cp 14 6152 ld c,18 6153 jr z,.SetCounterAttackdirection6154 cp 16 6155 ld c,12 6156 jr z,.SetCounterAttackdirection6157 cp 17 6158 ld c,13 6159 jr z,.SetCounterAttackdirection6160 cp 18 6161 ld c,14 6162 jr z,.SetCounterAttackdirection6164 .SetCounterAttackdirection:6165 ld iy,MonsterMovementPath6166 ld (iy),c 6167 jr .EndFindNextActiveMonster6168 .EndHandleRetaliation:6169 call FindNextActiveMonster 6170 .EndFindNextActiveMonster:6172 6175 ld a,(activepage)6176 xor 16177 ld (EraseMonster+dPage),a6178 ld a,36179 ld (EraseMonster+sPage),a6180 6181 ld a,(ix+MonsterYPrevious)6182 ld (EraseMonster+sy),a 6183 ld (EraseMonster+dy),a6185 ld a,(ix+MonsterXPrevious)6186 ld (EraseMonster+dx),a6187 ld (EraseMonster+sx),a6189 ld a,(ix+MonsterNXPrevious)6190 ld (EraseMonster+nx),a6191 ld a,(ix+MonsterNYPrevious)6192 61936194 6195 ld (EraseMonster+ny),a6197 ld hl,EraseMonster6198 call docopy6200 6201 call RecoverOverwrittenMonstersSkipMonster06203 6204 ld a,(activepage)6205 xor 16206 ld (EraseMonster+sPage),a6207 ld a,26208 ld (EraseMonster+dPage),a6209 6210 ld hl,EraseMonster6211 call docopy6213 ld a,26214 ld (EraseMonster+sPage),a6216 ld a,(HandleRetaliation?)6217 or a6218 ret nz6222 6223 ld hl,(HeroThatGetsAttacked) 6224 ld a,l6225 or h6226 jp z,.EndDisableSurrenderAndRetreatButton 6228 ld hl,.RetreatButtonActive6229 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6230 ld bc,76231 ldir6233 ld hl,.SurrenderButtonActive6234 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6235 ld bc,76236 ldir6238 call SetCurrentActiveMOnsterInIX6239 6240 push ix6241 pop hl 6242 ld de,Monster76243 call CompareHLwithDE 6244 ld ix,(plxcurrentheroAddress) 6245 jr c,.HeroFound26246 ld ix,(HeroThatGetsAttacked) 6247 push ix6248 pop hl6249 ld a,l6250 or h6251 jp z,.EndDisableSurrenderAndRetreatButton 6252 .HeroFound2:6254 ld a,(ix+HeroStatus) 6255 cp 26256 jr z,.NotPossibleToRetreatOrSurrender6257 cp 2546258 jr z,.NotPossibleToRetreatOrSurrender6260 6261 ld a,(CurrentActiveMonster) 6262 cp 76263 ld a,(whichplayernowplaying?) 6264 jr c,.ActivePlayerFound6265 ld a,(PlayerThatGetsAttacked)6266 .ActivePlayerFound:6267 ld b,a6268 ld a,(Castle1+CastlePlayer)6269 cp b6270 jr z,.EndDisableSurrenderAndRetreatButton 6271 ld a,(Castle2+CastlePlayer)6272 cp b6273 jr z,.EndDisableSurrenderAndRetreatButton 6274 ld a,(Castle3+CastlePlayer)6275 cp b6276 jr z,.EndDisableSurrenderAndRetreatButton 6277 ld a,(Castle4+CastlePlayer)6278 cp b6279 jr z,.EndDisableSurrenderAndRetreatButton 6281 .NotPossibleToRetreatOrSurrender: 6282 ld hl,.RetreatButtonGrey6283 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6284 ld bc,76285 ldir6287 ld hl,.SurrenderButtonGrey6288 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6289 ld bc,76290 ldir6291 .EndDisableSurrenderAndRetreatButton:6295 6296 ld hl,.WaitButtonActive6297 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6298 ld bc,76299 ldir6301 call SetCurrentActiveMOnsterInIX6302 ld a,(ix+MonsterStatus) 6303 and %0111 11116304 cp 1 6305 jr nz,.EndCheckWaitButton6307 ld hl,.WaitButtonGrey6308 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6309 ld bc,76310 ldir6311 .EndCheckWaitButton:6312 6313 6314 ld hl,.SpellBookButtonActive6315 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6316 ld bc,76317 ldir6319 6320 push ix6321 pop hl 6322 ld de,Monster76323 call CompareHLwithDE 6324 ld a,(LeftPlayerAlreadyCastSpellThisRound?)6325 jr c,.HeroFound6326 ld a,(RightPlayerAlreadyCastSpellThisRound?)6327 .HeroFound:6328 or a6329 ret z6331 ld hl,.SpellBookButtonGrey6332 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6333 ld bc,76334 ldir6335 ret6337.RetreatButtonGrey:6338 db %1100 0011 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 1286339.RetreatButtonActive:6340 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 1286342.SurrenderButtonGrey:6343 db %1100 0011 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 1286344.SurrenderButtonActive:6345 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 1286350.SpellBookButtonGrey:6351 db %1100 0011 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 1286352.SpellBookButtonActive:6353 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 6355.WaitButtonGrey:6356 db %1100 0011 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 1286357.WaitButtonActive:6358 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 1286359 6360 6361FindNextActiveMonster:6362 call SortMonstersOnTheirSpeed63646367 ld ix,MonstersSortedOnSpeed.LastMonster6368 ld b,TotalAmountOfMonstersOnBattleField - 1 6370 .LoopUp:6371 ld l,(ix)6372 ld h,(ix+1)6373 6374 push hl6375 pop iy 6376 ld a,(iy+MonsterHP)6377 or a6378 jr z,.FindNext6381 push ix6382 push iy6383 pop ix6384 push bc6385 ld b,hypnosisSpellNumber 6386 call CheckPresenceStatusEffect 6387 pop bc6388 pop ix6389 jr z,.FindNext6392 ld a,(iy+MonsterStatus) 6393 and %0111 1111 6394 jr z,.MonsterFound6396 .FindNext:6397 dec ix6398 dec ix6399 djnz .LoopUp6401 6402 inc ix6403 inc ix6404 ld b,TotalAmountOfMonstersOnBattleField - 1 6406 .LoopDown:6407 ld l,(ix)6408 ld h,(ix+1)6409 6410 push hl6411 pop iy 6412 ld a,(iy+MonsterHP)6413 or a6414 jr z,.FindNext26415 ld a,(iy+MonsterStatus) 6416 and %0111 11116417 cp 1 6418 jr z,.MonsterFound6420 .FindNext2:6421 inc ix6422 inc ix6423 djnz .LoopDown6425 6427 call ReduceDurationStatusEffectsMonsters6429 ld a,MonsterStatusEnabled6430 ld (Monster1+MonsterStatus),a6431 ld (Monster2+MonsterStatus),a6432 ld (Monster3+MonsterStatus),a6433 ld (Monster4+MonsterStatus),a6434 ld (Monster5+MonsterStatus),a6435 ld (Monster6+MonsterStatus),a6436 ld (Monster7+MonsterStatus),a6437 ld (Monster8+MonsterStatus),a6438 ld (Monster9+MonsterStatus),a6439 ld (Monster10+MonsterStatus),a6440 ld (Monster11+MonsterStatus),a6441 ld (Monster12+MonsterStatus),a6442 xor a6443 ld (LeftPlayerAlreadyCastSpellThisRound?),a6444 ld (RightPlayerAlreadyCastSpellThisRound?),a6445 ld a,5 6446 ld (BattleTextQ),a6447 ld a,26448 ld (SetBattleText?),a 6449 ld a,(BattleRound)6450 inc a6451 ld (BattleRound),a6452 ld (BattleTextQ+1),a6453 jp FindNextActiveMonster6455 .MonsterFound:6456 SetMonsterInIYAsActiveMonsterAndSetInIX:6457 6458 push iy6459 pop de 6460 6461 ld hl,Monster1 | call CompareHLwithDE | ld a,01 | jr z,.CurrentActiveMonsterFound6462 ld hl,Monster2 | call CompareHLwithDE | ld a,02 | jr z,.CurrentActiveMonsterFound6463 ld hl,Monster3 | call CompareHLwithDE | ld a,03 | jr z,.CurrentActiveMonsterFound6464 ld hl,Monster4 | call CompareHLwithDE | ld a,04 | jr z,.CurrentActiveMonsterFound6465 ld hl,Monster5 | call CompareHLwithDE | ld a,05 | jr z,.CurrentActiveMonsterFound6466 ld hl,Monster6 | call CompareHLwithDE | ld a,06 | jr z,.CurrentActiveMonsterFound6467 ld hl,Monster7 | call CompareHLwithDE | ld a,07 | jr z,.CurrentActiveMonsterFound6468 ld hl,Monster8 | call CompareHLwithDE | ld a,08 | jr z,.CurrentActiveMonsterFound6469 ld hl,Monster9 | call CompareHLwithDE | ld a,09 | jr z,.CurrentActiveMonsterFound6470 ld hl,Monster10 | call CompareHLwithDE | ld a,10 | jr z,.CurrentActiveMonsterFound6471 ld hl,Monster11 | call CompareHLwithDE | ld a,11 | jr z,.CurrentActiveMonsterFound6472 ld hl,Monster12 | call CompareHLwithDE | ld a,12 | jr z,.CurrentActiveMonsterFound6474 .CurrentActiveMonsterFound:6476 6483 ld (CurrentActiveMonster),a6485 ld a,16486 ld (SetMonsterInBattleFieldGrid?),a6487 call SetCurrentActiveMOnsterInIX64896492 ret6493 6494 6495RecoverOverwrittenMonstersHard:6496 exx6497 ld hl,OrderOfMonstersFromHighToLow6498 ld b,TotalAmountOfMonstersOnBattleField6500 .loop:6501 ld e,(hl)6502 inc hl6503 ld d,(hl)6504 inc hl6505 push de6506 pop iy 6507 6508 exx6509 call RecoverOverwrittenMonsters.GoRecoverHard6510 exx6511 djnz .loop6512 ret6514RecoverOverwrittenMonstersSkipMonster0:6515 exx6516 ld hl,OrderOfMonstersFromHighToLow + 26517 ld b,TotalAmountOfMonstersOnBattleField - 1 6519 .loop:6520 ld e,(hl)6521 inc hl6522 ld d,(hl)6523 inc hl6524 push de6525 pop iy 6526 6527 exx6528 call RecoverOverwrittenMonsters.GoRecoverHard6529 exx6530 djnz .loop6531 ret6533RecoverOverwrittenMonsters:6534 exx6535 ld hl,OrderOfMonstersFromHighToLow + 26536 ld b,TotalAmountOfMonstersOnBattleField - 1 6538 .loop:6539 ld e,(hl)6540 inc hl6541 ld d,(hl)6542 inc hl6543 push de6544 pop iy 6545 6546 exx6547 call .GoRecover6548 exx6549 djnz .loop6550 ret6552 .GoRecover:6553 6554 ld a,(iy+MonsterY) 6555 add a,(iy+MonsterNY)6556 ld b,a6557 ld a,(ix+MonsterY) 6558 add a,(ix+MonsterNY) 6559 cp b6560 ret nc6561 .GoRecoverHard:6563 6564 push ix6565 pop hl6566 push iy6567 pop de6568 call CompareHLwithDE6569 ret z6571 6573 ld a,(ix+MonsterX) 6574 add a,(ix+MonsterNX)6575 sub (iy+MonsterX) 6576 ret c6577 ret z6579 6580 ld a,(iy+MonsterX) 6581 add a,(iy+MonsterNX)6582 sub (ix+MonsterX) 6583 ret c6584 ret z6586 6587 ld a,(ix+MonsterY) 6588 add a,(ix+MonsterNY)6589 sub (iy+MonsterY) 6590 ret c6591 ret z6593 6594 ld a,(iy+MonsterY) 6595 add a,(iy+MonsterNY)6596 sub (ix+MonsterY) 6597 ret c6598 ret z66006602 6603 ld a,(ix+MonsterX) 6604 add a,(ix+MonsterNX)6605 sub (iy+MonsterX) 6606 cp (ix+MonsterNX)6607 jr c,.NXFoundLeft6609 6610 ld a,(iy+MonsterX) 6611 add a,(iy+MonsterNX)6612 sub (ix+MonsterX) 6613 cp (ix+MonsterNX)6614 jr c,.NXFoundRight6616 .NXFoundMiddle:6617 ld a,(ix+MonsterNX) 6618 cp (iy+MonsterNX)6619 jr c,.go46620 jr z,.go46621 ld a,(iy+MonsterNX)6622 .go4:6623 srl a 6624 ld c,a 6625 ld a,(ix+MonsterX) 6626 sub (iy+MonsterX) 6627 srl a 6628 ld e,a 6629 jr .NxSet6631 .NXFoundRight:6632 srl a 6633 ld c,a 6634 ld a,(iy+MonsterNX) 6635 srl a 6636 sub a,c 6637 ld e,a 6638 jr .NxSet6640 .NXFoundLeft:6641 cp (iy+MonsterNX)6642 jr c,.go6643 jr z,.go6644 ld a,(iy+MonsterNX)6645 .go: 6646 srl a 6647 ld c,a 6648 ld e,00/2 6649 .NxSet:6651 6652 ld a,(ix+MonsterY) 6653 add a,(ix+MonsterNY)6654 sub (iy+MonsterY) 6655 cp (ix+MonsterNY)6656 jr c,.NYFoundTop6658 6659 ld a,(iy+MonsterY) 6660 add a,(iy+MonsterNY)6661 sub (ix+MonsterY) 6662 cp (ix+MonsterNY)6663 jr c,.NYFoundBottom6665 .NYFoundMiddle:6666 ld a,(ix+MonsterNY) 6667 cp (iy+MonsterNY)6668 jr c,.go56669 jr z,.go56670 ld a,(iy+MonsterNY)66716672 .go5:6674 66756676 ld b,a 6678 ld a,(ix+MonsterY) 6679 sub (iy+MonsterY) 6680 srl a 6681 ld d,a 6682 jr .NYSet6684 .NYFoundBottom:6685 ld b,a 6686 ld a,(iy+MonsterNY) 6687 sub a,b 6688 srl a 6689 ld d,a 6690 jr .NYSet6692 .NYFoundTop:6693 cp (iy+MonsterNY)6694 jr c,.go26695 jr z,.go26696 ld a,(iy+MonsterNY)6697 .go2:6698 ld b,a 6699 ld d,00/2 6702 .NYSet:67066709 671067176719 ld l,(iy+MonsterSYSX+0) 6720 ld h,(iy+MonsterSYSX+1) 6724 6725 ld a,l 6726 add a,e 6727 ld l,a6729 6730 ld a,h 6731 add a,d 6732 ld h,a6734 ld a,(iy+MonsterBlock+0) 6736 ld (AddressToWriteFrom),hl6737 ld (NXAndNY),bc6738 ld (BlockToReadFrom),a6740 ld a,(activepage)6741 xor 16742 ld (TransparantImageBattle+dPage),a6744 ld a,(iy+MonsterY)6745 6746 add a,d 6747 add a,d6748 6749 ld (TransparantImageBattle+dy),a 6750 ld a,(iy+MonsterX)6752 add a,e 6753 add a,e6755 ld (TransparantImageBattle+dx),a6757 ld bc,(NXAndNY)6758 ld a,c6759 add a,a6760 ld (TransparantImageBattle+nx),a6761 ld a,b6762 ld (TransparantImageBattle+ny),a6763 ld a,1886764 ld (TransparantImageBattle+sy),a 6766 ld a,(TransparantImageBattle+sx)6767 add a,64 6768 ld (TransparantImageBattle+sx),a6769 ld de,$8000 + (188*128) + (000/2) - 128 6770 jr z,.DestinationAddressInPage3Set6771 sub a,646772 ld de,$8000 + (188*128) + (064/2) - 128 6773 jr z,.DestinationAddressInPage3Set6774 sub a,646775 ld de,$8000 + (188*128) + (128/2) - 128 6776 jr z,.DestinationAddressInPage3Set6777 sub a,646778 ld de,$8000 + (188*128) + (192/2) - 128 6779 .DestinationAddressInPage3Set:6780 ld (AddressToWriteTo),de 6782 call CopyRamToVramPage3ForBattleEngine 6784 ld a,(RepairAmountAboveMonster?)6785 or a6786 jr z,.EndRepairAmountAboveMonster6788 6789 push ix6790 pop hl6791 ld de,Monster06792 call CompareHLwithDE6793 push ix6794 push iy6795 pop ix6796 call nz,SetAmountUnderMonster6797 pop ix6798 6800 .EndRepairAmountAboveMonster:6802 ld hl,TransparantImageBattle6803 jp docopy6805 6811PutMonster:6812 ld a,(activepage)6813 xor 16814 ld (TransparantImageBattle+dPage),a6816 ld a,(ix+MonsterY)6817 ld (TransparantImageBattle+dy),a 6818 ld a,(ix+MonsterX)6819 ld (TransparantImageBattle+dx),a6821 ld bc,(NXAndNY)6822 ld a,c6823 add a,a6824 ld (TransparantImageBattle+nx),a6825 ld a,b6826 ld (TransparantImageBattle+ny),a6827 ld a,1886828 ld (TransparantImageBattle+sy),a 6830 ld a,(TransparantImageBattle+sx)6831 add a,64 6832 ld (TransparantImageBattle+sx),a6833 ld de,$8000 + (188*128) + (000/2) - 128 6834 jr z,.DestinationAddressInPage3Set6835 sub a,646836 ld de,$8000 + (188*128) + (064/2) - 128 6837 jr z,.DestinationAddressInPage3Set6838 sub a,646839 ld de,$8000 + (188*128) + (128/2) - 128 6840 jr z,.DestinationAddressInPage3Set6841 sub a,646842 ld de,$8000 + (188*128) + (192/2) - 128 6843 .DestinationAddressInPage3Set:6844 ld (AddressToWriteTo),de 6846 call CopyRamToVramPage3ForBattleEngine 6848 ld hl,TransparantImageBattle6849 jp docopy6851 6856StoreSYSXNYNXAndBlock:6857 ld l,(ix+MonsterSYSX+0) 6858 ld h,(ix+MonsterSYSX+1) 68606861 ld a,(ix+MonsterNX) 6862 srl a6863 ld c,a68656866 ld b,(ix+MonsterNY)6867 6868 ld a,(ix+MonsterBlock+0) 6869 ld (AddressToWriteFrom),hl6870 ld (NXAndNY),bc6871 ld (BlockToReadFrom),a6872 ret6886SetCurrentMonsterInBattleFieldGrid: 6887 ld a,(SetMonsterInBattleFieldGrid?)6888 dec a6889 ret m6890 ld (SetMonsterInBattleFieldGrid?),a6892 call ClearBattleFieldGrid 6893 call SetCurrentActiveMOnsterInIX6894 call FindMonsterInBattleFieldGrid 6895 call Set001AtCurrentMonstersLocation6896 call Set254TilesWHereMonsterCantMoveToDueToItsNX6897 call SetAllNumbersInGrid6898 jp FillRemaining000sWith254 6900FillRemaining000sWith254: 6901 ld a,0006902 ld hl,BattleFieldGrid-16903 ld b,LenghtBattleField*HeightBattleField6904 .loop:6905 inc hl6906 cp a,(hl)6907 jr z,.SetTo2546908 djnz .loop6909 ret6910 .SetTo254:6911 ld (hl),2546912 djnz .loop 6913 ret6915Set001AtCurrentMonstersLocation:6916 6917 ld a,(ix+MonsterNX)6918 ld (hl),001 6919 cp 1769206921 ret c6922 6923 inc hl6924 inc hl6925 ld (hl),000 6926 cp 336927 ret c69286929 inc hl6930 inc hl6931 ld (hl),000 6932 cp 5769336934 ret c6935 inc hl6936 inc hl6937 ld (hl),000 6939 ret6941ClearBattleFieldGrid:6942 ld a,2556943 ld hl,BattleFieldGrid-16944 ld b,LenghtBattleField*HeightBattleField6945 .loop:6946 inc hl6947 cp a,(hl)6948 jr nz,.SetTo0006949 djnz .loop6950 ret6951 .SetTo000:6952 ld (hl),0006953 djnz .loop 6954 ret6956Set254TilesWHereMonsterCantMoveToDueToItsNX:69576960 ld b,LenghtBattleField*HeightBattleField - 36961 ld hl,BattleFieldGrid+36962 .loop:6963 ld a,(hl)6964 cp 2556965 call z,.Found2556966 inc hl6967 djnz .loop6968 ret6969 6970 .Found255:6971 ld a,(ix+MonsterNX)6972 cp 17 6973 ret c6975 6976 dec hl6977 dec hl6978 ld a,(hl)6979 or a6980 jr nz,.EndCheck06981 ld (hl),2546982 .EndCheck0:6983 inc hl6984 inc hl6986 ld a,(ix+MonsterNX)6987 cp 33 6988 ret c6990 6991 dec hl6992 dec hl6993 dec hl6994 dec hl6995 ld a,(hl)6996 or a6997 jr nz,.EndCheck0b6998 ld (hl),2546999 .EndCheck0b:7000 inc hl7001 inc hl7002 inc hl7003 inc hl7005 ld a,(ix+MonsterNX)7006 cp 57 7007 ret c 7009 7010 dec hl7011 dec hl7012 dec hl7013 dec hl7014 dec hl7015 dec hl7016 ld a,(hl)7017 or a7018 jr nz,.EndCheck0c7019 ld (hl),2547020 .EndCheck0c:7021 inc hl7022 inc hl7023 inc hl7024 inc hl7025 inc hl7026 inc hl7027 ret7029SetAllNumbersInGrid:7030 ld e,000 7031 ld a,001 7032 ld b,17 7033 ex af,af'7035 .loop:7036 ex af,af'7037 inc e 7038 inc a 7039 ex af,af'7041 exx7042 call .GoNextNumber7043 exx7044 djnz .loop7045 ret7047.GoNextNumber:7048 ld b,-1 7049 ld c,0 7050 ld d,07052 .MainLoop:7053 call .GoCheckNextPosition70547056 ld hl,BattleFieldGrid7057 ld e,b7058 add hl,de7059 ld e,c7060 add hl,de 7062 ld a,(hl)7063 exx7064 cp e 7065 exx7066 jp nz,.MainLoop7068 call .SetNumberIn6Directions 7069 jp .MainLoop7071.GoCheckNextPosition:7072 ld a,b 7073 inc a7074 ld b,a 7075 cp LenghtBattleField7076 ret nz7077 7078 ld b,0 7080 ld a,c 7081 add a,LenghtBattleField7082 ld c,a 7083 cp HeightBattleField*LenghtBattleField7084 ret nz7086 pop af7087 ret7088 7089.SetNumberIn6Directions:7090 7092 push bc7093 call .Direction17094 pop bc7095 7096 push bc7097 call .Direction27098 pop bc7099 7100 push bc7101 call .Direction37102 pop bc7103 7104 push bc7105 call .Direction47106 pop bc7107 7108 push bc7109 call .Direction57110 pop bc7111 7112 push bc7113 call .Direction67114 pop bc 7115 ret7117.SetnumberInHL:7118 ld a,c7119.SetnumberInHLHeightAlreadyInA:7120 add a,b7121 ld e,a7123 ld hl,BattleFieldGrid7124 add hl,de 7125 7126 ld a,(hl)7127 or a7128 ret nz7129 ex af,af'7130 ld (hl),a7131 ex af,af'7132 ret7134.Direction6: 7135 inc b 7136 ld a,b7137 cp LenghtBattleField7138 ret z7140 ld a,c7141 add a,LenghtBattleField7142 cp HeightBattleField*LenghtBattleField7143 ret z7144 jp .SetnumberInHLHeightAlreadyInA7146.Direction5: 7147 dec b 7148 ret m7150 ld a,c7151 add a,LenghtBattleField7152 cp HeightBattleField*LenghtBattleField7153 ret z7154 jp .SetnumberInHLHeightAlreadyInA7156.Direction4: 7157 inc b 7158 ld a,b7159 cp LenghtBattleField7160 ret z7161 inc b 7162 ld a,b7163 cp LenghtBattleField7164 ret z7165 jp .SetnumberInHL7167.Direction3: 7168 dec b 7169 ret m7170 dec b 7171 ret m7172 jp .SetnumberInHL7174.Direction2: 7175 inc b 7176 ld a,b7177 cp LenghtBattleField7178 ret z7179 7180 ld a,c7181 sub a,LenghtBattleField7182 ret c7183 jp .SetnumberInHLHeightAlreadyInA7185.Direction1: 7186 dec b 7187 ret m7189 ld a,c7190 sub a,LenghtBattleField7191 ret c7192 jp .SetnumberInHLHeightAlreadyInA7194FindMonsterInBattleFieldGrid:7195 ld hl,BattleFieldGrid7197 ld a,(ix+MonsterY)7198 sub 056 + 167199 add (ix+MonsterNY)7200 srl a 7201 srl a 7202 srl a 7203 srl a 7204 jr z,.SetX7205 7206 ld b,a7207 ld de,LenghtBattleField7208 .loop:7209 add hl,de7210 djnz .loop7211 7212 .SetX:7213 ld a,(ix+MonsterX)7214 sub a,127215 srl a 7216 srl a 7217 srl a 7218 ret z7220 ld d,07221 ld e,a7222 add hl,de7223 ret7225FindCursorInBattleFieldGrid: 7226 ld hl,BattleFieldGrid7228 ld a,(Monster0+MonsterY)7229 sub a,39 + 167230 srl a 7231 srl a 7232 srl a 7233 srl a 7234 jr z,.SetX7235 7236 ld b,a7237 ld de,LenghtBattleField7238 .loop:7239 add hl,de7240 djnz .loop7241 7242 .SetX:7243 ld a,(Monster0+MonsterX)7244 sub a,127245 srl a 7246 srl a 7247 srl a 7248 ret z7250 ld d,07251 ld e,a7252 add hl,de7253 ret7255CheckIsCursorOnATileThisFrame:7256 xor a7257 ld (IsCursorOnATileThisFrame?),a7259 ld a,(Monster0+MonsterY) 7260 cp 24 + 16 7261 ret c7262 cp 183 7263 ret nc72657266 ld a,(Monster0+MonsterX)7267 cp $047268 ret z7269 cp $fc7270 ret z72717272 cp $ec7273 ret z7274 cp $f47275 ret z7277 ld a,(spat+1)7278 cp $05 7279 ret c7280 cp $ec 7281 ret nc7282 7283 ld a,(Monster0+MonsterY)7284 sub a,39 + 167285 srl a 7286 srl a 7287 srl a 7288 srl a 7289 bit 0,a7290 jr nz,.EndCheckLeftExceptions7291 ld a,(spat+1)7292 cp $0b 7293 ret c7294 .EndCheckLeftExceptions:7295 7296 ld a,(Monster0+MonsterY)7297 sub a,39 + 167298 srl a 7299 srl a 7300 srl a 7301 srl a 7302 bit 0,a7303 jr z,.EndCheckRightExceptions7304 ld a,(spat+1)7305 cp $e6 7306 ret nc7307 .EndCheckRightExceptions:7309 ld a,17310 ld (IsCursorOnATileThisFrame?),a7311 ret7312 7313CheckWasCursorOnATilePreviousFrame:7314 xor a7315 ld (WasCursorOnATilePreviousFrame?),a7317 ld a,(Monster0+MonsterYPrevious)7318 cp 24 + 16 7319 ret c7320 cp 183 + 16 7321 ret nc7323 ld a,17324 ld (WasCursorOnATilePreviousFrame?),a7325 ret7327SetcursorWhenGridTileIsActive:7328 call .goSetCursorSprite7330 ld hl,(BufferCursorSpriteChar)7331 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl7332 ld hl,(BufferCursorSpriteCol)7333 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl7334 ret7336 .goSetCursorSprite:7337 ld a,(IsCursorOnATileThisFrame?)7338 or a7339 jp z,.SetHand7341 ld a,(SpellSelected?)7342 or a7343 jp nz,SpellSelectedHandleCursor7344 73457346 call SetMonsterTableInIY 7347 call SetTotalMonsterSpeedInHL 7348 ld c,l7349 inc c 7350 inc c735273557358 call FindCursorInBattleFieldGrid7359 ld a,(hl)7360 cp 1 7361 jr z,.ProhibitionSign7362 cp c 7363 jr nc,.ProhibitionSign7366 ld a,(ix+MonsterNX)7367 cp 177368 jr c,.SetBoots7369 cp 337370 jr c,.MonsterIs2TilesWide7371 cp 577372 jr c,.MonsterIs3TilesWide7374 .MonsterIs4TilesWide:7375 inc hl7376 inc hl7377 ld a,(hl)7378 cp 2557379 jr z,.ProhibitionSign7380 inc hl7381 inc hl7382 ld a,(hl)7383 cp 2557384 jr z,.ProhibitionSign7385 inc hl7386 inc hl7387 ld a,(hl)7388 cp 2557389 jr z,.ProhibitionSign7390 jr .SetBoots7392 .MonsterIs3TilesWide:7393 inc hl7394 inc hl7395 ld a,(hl)7396 cp 2557397 jr z,.ProhibitionSign7398 inc hl7399 inc hl7400 ld a,(hl)7401 cp 2557402 jr z,.ProhibitionSign7403 jr .SetBoots7405 .MonsterIs2TilesWide:7406 inc hl7407 inc hl7408 ld a,(hl)7409 cp 2557410 jr z,.ProhibitionSign7411 jr .SetBoots7413 .ProhibitionSign:7414 call .CheckPointerOnEnemy7415 7416 ld hl,CursorProhibitionSign7417 ld (BufferCursorSpriteChar),hl7418 ld hl,SpriteProhibitionSignColor7419 ld (BufferCursorSpriteCol),hl7420 ret7421 7422 .SetBoots:7423 ld hl,CursorBootsOld7424 ld (BufferCursorSpriteChar),hl7425 ld hl,SpriteColCursorSprites7426 ld (BufferCursorSpriteCol),hl7427 ret7429 .SetHand:7430 ld hl,CursorHand7431 ld (BufferCursorSpriteChar),hl7432 ld hl,SpriteColCursorSprites7433 ld (BufferCursorSpriteCol),hl7434 ret7436 .CheckPointerOnEnemy:7437 ld a,(CurrentActiveMonster)7438 cp 77439 jr nc,.RightPlayerIsActive7441 .LeftPlayerIsActive:7442 ld ix,Monster77443 call .CheckMonster7444 ld ix,Monster87445 call .CheckMonster7446 ld ix,Monster97447 call .CheckMonster7448 ld ix,Monster107449 call .CheckMonster7450 ld ix,Monster117451 call .CheckMonster7452 ld ix,Monster127453 call .CheckMonster7454 ret7456 .RightPlayerIsActive:7457 ld ix,Monster17458 call .CheckMonster7459 ld ix,Monster27460 call .CheckMonster7461 ld ix,Monster37462 call .CheckMonster7463 ld ix,Monster47464 call .CheckMonster7465 ld ix,Monster57466 call .CheckMonster7467 ld ix,Monster67468 call .CheckMonster7469 ret7471 .CheckMonster:7479 call .Check1TileMonsterStandsOn 7480 7481 ld a,(ix+MonsterNX)7482 cp 177483 ret c7484 ld a,(Monster0+MonsterX)7485 ld c,a7486 ld a,(ix+MonsterX)7487 add a,167488 call .Check7490 7491 ld a,(ix+MonsterNX)7492 cp 337493 ret c7494 ld a,(Monster0+MonsterX)7495 ld c,a7496 ld a,(ix+MonsterX)7497 add a,327498 call .Check7500 7501 ld a,(ix+MonsterNX)7502 cp 577503 ret c7504 ld a,(Monster0+MonsterX)7505 ld c,a7506 ld a,(ix+MonsterX)7507 add a,487508 call .Check7509 ret7510 .Check1TileMonsterStandsOn:7520 7521 ld a,(Monster0+MonsterX)7522 ld c,a7523 ld a,(ix+MonsterX)7525 .Check:7526 cp c7527 ret nz7529 ld a,(ix+MonsterY)7530 ld c,a7531 ld a,(ix+MonsterNY)7532 add a,c7533 ld c,a7535 ld a,(Monster0+MonsterY)7536 add a,0177537 cp c7538 ret nz7540 pop af7541 pop af7542 pop af7544 ld (MonsterThatIsBeingAttacked),ix7545 ld a,(ix+MonsterX)7546 ld (MonsterThatIsBeingAttackedX),a7547 ld a,(ix+MonsterNX)7548 ld (MonsterThatIsBeingAttackedNX),a7549 ld a,(ix+MonsterY)7550 ld (MonsterThatIsBeingAttackedY),a7551 ld a,(ix+MonsterNY)7552 ld (MonsterThatIsBeingAttackedNY),a7554 7555 call SetCurrentActiveMOnsterInIX7556 call SetMonsterTableInIY 7557 ld a,(iy+MonsterTableSpecialAbility)7558 cp RangedMonster7559 jp z,RangedMonsterCheck7561 call .PointerIsOnEnemyCheckIfPossibleToAttack7563 7565 ld hl,CursorSwordLeft7566 call .CheckSetSwordLeft7567 ld hl,CursorSwordLeftDown7568 call .CheckSetSwordLeftDown7569 ld hl,CursorSwordLeftUp7570 call .CheckSetSwordLeftUp7571 ld hl,CursorSwordRight7572 call .CheckSetSwordRight7573 ld hl,CursorSwordRightDown7574 call .CheckSetSwordRightDown7575 ld hl,CursorSwordRightUp7576 call .CheckSetSwordRightUp7578 .SetProhibitionSign:7579 ld hl,CursorProhibitionSign7580 ld (BufferCursorSpriteChar),hl7581 ld hl,SpriteProhibitionSignColor7582 ld (BufferCursorSpriteCol),hl7583 ret758575997616 .PointerIsOnEnemyCheckIfPossibleToAttack:7617 7619 ld a,(Monster0+MonsterY) 7620 sub a,39 + 167621 srl a 7622 srl a 7623 srl a 7624 srl a 7625 bit 0,a7626 jr z,.EvenRow7627 7628 .OddRow:76297638 ld a,(spat+1)7639 and %0000 11107640 cp %0000 01107641 jp z,.SetSwordRight7642 cp %0000 10007643 jp z,.SetSwordRight7644 cp %0000 10107645 jp z,.SetSwordRight7646 cp %0000 11007647 jp z,.SetSwordRight7648 jp .SetSwordLeft7649 7650 .EvenRow:76517660 ld a,(spat+1)7661 and %0000 11107662 cp %0000 11007663 jp z,.SetSwordRight7664 cp %0000 11107665 jp z,.SetSwordRight7666 cp %0000 00007667 jp z,.SetSwordRight7668 cp %0000 00107669 jp z,.SetSwordRight7670 jp .SetSwordLeft7672 .SetSwordLeft:76737682 ld a,(spat)7683 and %0000 11107684 ld hl,CursorSwordLeftDown 7685 cp %0000 00107686 jp z,.CheckSetSwordLeftDown7687 cp %0000 01007688 jp z,.CheckSetSwordLeftDown7689 cp %0000 01107690 jp z,.CheckSetSwordLeftDown7691 ld hl,CursorSwordLeft 7692 cp %0000 10007693 jp z,.CheckSetSwordLeft7694 cp %0000 10107695 jp z,.CheckSetSwordLeft7696 ld hl,CursorSwordLeftUp 7697 jp .CheckSetSwordLeftUp76987704 7705 7706 .SetSwordRight:77077716 ld a,(spat)7717 and %0000 11107718 ld hl,CursorSwordRightDown 7719 cp %0000 00107720 jp z,.CheckSetSwordRightDown7721 cp %0000 01007722 jp z,.CheckSetSwordRightDown7723 cp %0000 01107724 jp z,.CheckSetSwordRightDown7725 ld hl,CursorSwordRight 7726 cp %0000 10007727 jp z,.CheckSetSwordRight7728 cp %0000 10107729 jp z,.CheckSetSwordRight7730 ld hl,CursorSwordRightUp 7731 jp .CheckSetSwordRightUp77327739 .CheckSetSwordLeftDown:7740 ld (BufferCursorSpriteChar),hl7741 ld hl,SpriteColCursorSprites7742 ld (BufferCursorSpriteCol),hl7744 7745 call FindCursorInBattleFieldGrid7746 inc hl7747 ld de,LenghtBattleField7748 or a7749 sbc hl,de7750 jp .CheckTile7752 .CheckSetSwordLeftUp:7753 ld (BufferCursorSpriteChar),hl7754 ld hl,SpriteColCursorSprites7755 ld (BufferCursorSpriteCol),hl7757 7758 call FindCursorInBattleFieldGrid7759 inc hl7760 ld de,LenghtBattleField7761 add hl,de7762 jp .CheckTile7764 .CheckSetSwordRightDown:7765 ld (BufferCursorSpriteChar),hl7766 ld hl,SpriteColCursorSprites7767 ld (BufferCursorSpriteCol),hl7769 7770 call FindCursorInBattleFieldGrid7771 dec hl7772 ld de,LenghtBattleField7773 or a7774 sbc hl,de7775 ld a,(hl)7776 jp .CheckTile7778 .CheckSetSwordRightUp:7779 ld (BufferCursorSpriteChar),hl7780 ld hl,SpriteColCursorSprites7781 ld (BufferCursorSpriteCol),hl7783 7784 call FindCursorInBattleFieldGrid7785 dec hl7786 ld de,LenghtBattleField7787 add hl,de7788 jp .CheckTile7790 .CheckSetSwordLeft:7791 ld (BufferCursorSpriteChar),hl7792 ld hl,SpriteColCursorSprites7793 ld (BufferCursorSpriteCol),hl7795 7796 call FindCursorInBattleFieldGrid7797 inc hl7798 inc hl7799 jp .CheckTile7801 .CheckSetSwordRight:7802 ld (BufferCursorSpriteChar),hl7803 ld hl,SpriteColCursorSprites7804 ld (BufferCursorSpriteCol),hl7806 7807 call FindCursorInBattleFieldGrid7808 dec hl7809 dec hl7816 call SetCurrentActiveMOnsterInIX7817 ld a,(ix+MonsterNX)7818 cp 177819 jp c,.CheckTile7820 dec hl7821 dec hl7822 cp 337823 jp c,.CheckTile7824 dec hl7825 dec hl7826 cp 577827 jp c,.CheckTile7828 dec hl7829 dec hl78377839 .CheckTile:7842 push hl7843 call SetCurrentActiveMOnsterInIX7844 call SetMonsterTableInIY 7845 call SetTotalMonsterSpeedInHL 7846 ld c,l7847 inc c 7848 pop hl78507853 ld a,(hl)7854 cp c 7855 ret nc7856 7857 pop af7858 ret7859 7867RangedMonstersRange: equ 10 7868RangedMonsterCheck:7869 xor a7870 ld (IsThereAnyEnemyRightNextToActiveMonster?),a7872 7873 call SetCurrentActiveMOnsterInIX7874 ld a,(ix+MonsterY)7875 sub 0567876 add (ix+MonsterNY)7877 srl a 7878 srl a 7879 srl a 7880 srl a 7881 ld e,a 7883 ld a,(ix+MonsterX)7884 sub a,127885 srl a 7886 srl a 7887 srl a 7888 ld d,a 7890 ld a,(CurrentActiveMonster)7891 cp 77892 jr nc,.RightPlayerIsActive7894 .LeftPlayerIsActive:7895 7896 ld iy,Monster77897 call .Check 7898 ld iy,Monster87899 call .Check7900 ld iy,Monster97901 call .Check7902 ld iy,Monster107903 call .Check7904 ld iy,Monster117905 call .Check7906 ld iy,Monster127907 call .Check7908 7909 ld iy,(MonsterThatIsBeingAttacked)7910 xor a7911 ld (MayRangedAttackBeRetaliated?),a 7912 jr .Check7914 .RightPlayerIsActive:7915 7916 ld iy,Monster17917 call .Check7918 ld iy,Monster27919 call .Check7920 ld iy,Monster37921 call .Check7922 ld iy,Monster47923 call .Check7924 ld iy,Monster57925 call .Check7926 ld iy,Monster67927 call .Check7928 7929 ld iy,(MonsterThatIsBeingAttacked)7930 xor a7931 ld (MayRangedAttackBeRetaliated?),a 7933 .Check:7934 ld a,(iy+MonsterHP)7935 or a7936 ret z 7937 7938 ld a,(iy+MonsterY)7939 sub 0567940 add (iy+MonsterNY)7941 srl a 7942 srl a 7943 srl a 7944 srl a 7945 ld l,a 7947 ld a,(iy+MonsterX)7948 sub a,127949 srl a 7950 srl a 7951 srl a 7952 ld h,a 7954 7958 7959 7961 7965 7966 push de7967 push hl7969 ld a,(ix+MonsterNX)7970 cp 177971 jr c,.RightSideActiveMonsterFound7972 inc d7973 inc d 7974 cp 337975 jr c,.RightSideActiveMonsterFound7976 inc d7977 inc d 7978 cp 577979 jr c,.RightSideActiveMonsterFound7980 inc d7981 inc d 7982 .RightSideActiveMonsterFound:7984 ld b,0 7985 ld c,0 7987 .loop:7988 inc b7989 7990 ld a,e 7991 cp l 7992 jr z,.SameY_MoveOnlyX7993 inc e 7994 jr c,.ymovedNowMoveX7995 dec e7996 dec e 7997 .ymovedNowMoveX:7998 ld a,d 7999 cp h 8000 inc d 8001 jr c,.loop 8002 dec d8003 dec d 8004 jr .loop8006 .SameY_MoveOnlyX: 8007 ld a,d 8008 cp h 8009 jr z,.End 8010 inc d8011 inc d 8012 jr c,.loop 8013 dec d8014 dec d8015 dec d8016 dec d 8017 jr .loop8018 .End:8020 pop hl8021 pop de8023 ld a,b8024 cp 28025 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow8026 8027 cp RangedMonstersRange8028 jr nc,.OutOfrange8029 ld c,1 8030 .OutOfrange:8032 8033 push de8035 ld a,(iy+MonsterNX)8036 cp 178037 jr c,.RightSideCheckingMonsterFound8038 inc h8039 inc h 8040 cp 338041 jr c,.RightSideCheckingMonsterFound8042 inc h8043 inc h 8044 cp 578045 jr c,.RightSideCheckingMonsterFound8046 inc h8047 inc h 8048 .RightSideCheckingMonsterFound:8050 ld b,0 8052 .loop2:8053 inc b8054 8055 ld a,e 8056 cp l 8057 jr z,.SameY_MoveOnlyX28058 inc e 8059 jr c,.ymovedNowMoveX28060 dec e8061 dec e 8062 .ymovedNowMoveX2:8063 ld a,d 8064 cp h 8065 inc d 8066 jr c,.loop28067 dec d8068 dec d 8069 jr .loop28071 .SameY_MoveOnlyX2: 8072 ld a,d 8073 cp h 8074 jr z,.End2 8075 inc d8076 inc d 8077 jr c,.loop28078 dec d8079 dec d8080 dec d8081 dec d 8082 jr .loop28083 .End2:8085 pop de8087 ld a,b8088 cp 28089 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow8090 8091 8092 ld a,28093 ld (BrokenArrow?),a 8095 ld a,(IsThereAnyEnemyRightNextToActiveMonster?)8096 or a8097 jp nz,SetcursorWhenGridTileIsActive.SetProhibitionSign8098 8099 ld a,b8100 cp 68101 jr c,.BowAndArrow 8103 bit 0,c 8104 jr nz,.BowAndArrow 8106 .BrokenArrow: 8107 ld hl,CursorBrokenArrow8108 ld (BufferCursorSpriteChar),hl8109 ld hl,SpriteColCursorSprites8110 ld (BufferCursorSpriteCol),hl8112 ld a,18113 ld (BrokenArrow?),a8114 ret8116 .EnemyIsRightNextToActiveMonsterSoBrokenArrow:8117 ld a,18118 ld (IsThereAnyEnemyRightNextToActiveMonster?),a8119 ld (MayRangedAttackBeRetaliated?),a8120 jr .BrokenArrow8122 .BowAndArrow:8123 ld hl,CursorBowAndArrow8124 ld (BufferCursorSpriteChar),hl8125 ld hl,SpriteColCursorSprites8126 ld (BufferCursorSpriteCol),hl8128 xor a8129 ld (BrokenArrow?),a8130 ret8132EndSpellSelectedAndSpellGetsSpellBubbled:8133 ld iy,SpellBubbleActivatedAndPoppedAnimation8134 call AnimateSpell8136EndSpellSelectedAndReduceManaCost:8137 call GetSelectedSpellCost 8138 ld e,a8139 ld d,08140 push de8142 call SetCurrentActiveMOnsterInIX8143 8144 push ix8145 pop hl 8146 ld de,Monster78147 call CompareHLwithDE 8148 ld ix,(plxcurrentheroAddress) 8149 ld hl,LeftPlayerAlreadyCastSpellThisRound?8150 jr c,.HeroFound8151 ld ix,(HeroThatGetsAttacked) 8152 ld hl,RightPlayerAlreadyCastSpellThisRound?8153 .HeroFound:8155 ld (hl),1 8157 ld hl,CheckSwitchToNextMonster.SpellBookButtonGrey8158 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)8159 ld bc,78160 ldir8162 8163 ld l,(ix+HeroMana)8164 ld h,(ix+HeroMana+1)8165 pop de8166 or a8167 sbc hl,de8168 ld (ix+HeroMana),l8169 ld (ix+HeroMana+1),h8171 ld a,1 8172 ld (SwitchToNextMonster?),a8174EndSpellSelected:8175 xor a8176 ld (SpellSelected?),a8177 ret8179SpellSelectedHandleCursor:8180 ld a,(Controls)8181 bit 5,a 8182 call nz,EndSpellSelected8183 8184 ld b,1 8185 ld a,(CurrentActiveMonster)8186 cp 78187 jr c,.FriendlyMonsterFound8188 ld b,0 8189 .FriendlyMonsterFound:8191 ld ix,Monster18192 call .CheckPointerOnCreature8193 ld ix,Monster28194 call .CheckPointerOnCreature8195 ld ix,Monster38196 call .CheckPointerOnCreature8197 ld ix,Monster48198 call .CheckPointerOnCreature8199 ld ix,Monster58200 call .CheckPointerOnCreature8201 ld ix,Monster68202 call .CheckPointerOnCreature8204 ld a,b8205 xor 18206 ld b,a 8208 ld ix,Monster78209 call .CheckPointerOnCreature8210 ld ix,Monster88211 call .CheckPointerOnCreature8212 ld ix,Monster98213 call .CheckPointerOnCreature8214 ld ix,Monster108215 call .CheckPointerOnCreature8216 ld ix,Monster118217 call .CheckPointerOnCreature8218 ld ix,Monster128219 call .CheckPointerOnCreature8220 8221 8222 call GetSelectedSpellCastableOn 8223 cp 38224 jp z,.SetSpriteSpellbook8225 cp 58226 jp z,.CheckFreeHex8228 .SetSpriteProhibitionSign:8229 ld hl,CursorProhibitionSign8230 ld (BufferCursorSpriteChar),hl8231 ld hl,SpriteProhibitionSignColor8232 ld (BufferCursorSpriteCol),hl8233 ret8235 .CheckFreeHex:8236 call SetCurrentActiveMOnsterInIX8237 call FindCursorInBattleFieldGrid8238 ld a,(hl)8239 cp 255 8240 jr z,.SetSpriteProhibitionSign8241 ld a,(ix+MonsterNX)8242 cp 178243 jp c,.SetSpriteSpellbook8244 cp 338245 jp c,.MonsterIs2TilesWide8246 cp 578247 jp c,.MonsterIs3TilesWide8248 .MonsterIs4TilesWide:8249 inc hl8250 inc hl8251 ld a,(hl)8252 cp 2558253 jp z,.SetSpriteProhibitionSign8254 .MonsterIs3TilesWide:8255 inc hl8256 inc hl8257 ld a,(hl)8258 cp 2558259 jp z,.SetSpriteProhibitionSign8260 .MonsterIs2TilesWide:8261 inc hl8262 inc hl8263 ld a,(hl)8264 cp 2558265 jp z,.SetSpriteProhibitionSign8266 jp .SetSpriteSpellbook8268 .CheckPointerOnCreature:8269 call .Check1TileMonsterStandsOn 8270 8271 ld a,(ix+MonsterNX)8272 cp 178273 ret c8274 ld a,(Monster0+MonsterX)8275 ld c,a8276 ld a,(ix+MonsterX)8277 add a,168278 call .Check8280 8281 ld a,(ix+MonsterNX)8282 cp 338283 ret c8284 ld a,(Monster0+MonsterX)8285 ld c,a8286 ld a,(ix+MonsterX)8287 add a,328288 call .Check8290 8291 ld a,(ix+MonsterNX)8292 cp 578293 ret c8294 ld a,(Monster0+MonsterX)8295 ld c,a8296 ld a,(ix+MonsterX)8297 add a,488298 call .Check8299 ret8300 .Check1TileMonsterStandsOn:8301 ld a,(Monster0+MonsterX)8302 ld c,a8303 ld a,(ix+MonsterX)8305 .Check:8306 cp c8307 ret nz8309 ld a,(ix+MonsterY)8310 ld c,a8311 ld a,(ix+MonsterNY)8312 add a,c8313 ld c,a8315 ld a,(Monster0+MonsterY)8316 add a,0178317 cp c8318 ret nz8320 pop af 8321 pop af8323 ld (MonsterThatIsBeingAttacked),ix8324 ld a,(ix+MonsterX)8325 ld (MonsterThatIsBeingAttackedX),a8326 ld a,(ix+MonsterNX)8327 ld (MonsterThatIsBeingAttackedNX),a8328 ld a,(ix+MonsterY)8329 ld (MonsterThatIsBeingAttackedY),a8330 ld a,(ix+MonsterNY)8331 ld (MonsterThatIsBeingAttackedNY),a8333 8334 call GetSelectedSpellCastableOn 8335 cp 58336 jp z,.CheckFreeHex8337 cp 48338 jp z,.SpellCanBecastOnlyOnRangedEnemy8339 cp 38340 jp z,.SpellCanBecastAnyWhere8341 cp 28342 jp z,.SpellCanBecastOnlyOnEnemy8343 cp 18344 jp z,.SpellCanBecastOnlyOnAlly8346 .SpellCanBecastOnlyOnAlly:8347 bit 0,b 8348 jp nz,.SetSpriteSpellbook8349 jp .SetSpriteProhibitionSign8351 .SpellCanBecastOnlyOnRangedEnemy:8352 bit 0,b 8353 jp nz,.SetSpriteProhibitionSign8355 call SetMonsterTableInIY 8356 ld a,(iy+MonsterTableSpecialAbility)8357 cp RangedMonster8358 jp nz,.SetSpriteProhibitionSign8359 8360 jp .SetSpriteSpellbook8362 .SpellCanBecastOnlyOnEnemy:8363 bit 0,b 8364 jp z,.SetSpriteSpellbook8365 jp .SetSpriteProhibitionSign8367 .SpellCanBecastAnyWhere:8368 .SetSpriteSpellbook:8369 ld hl,CursorEnterCastle8370 ld (BufferCursorSpriteChar),hl8371 ld hl,SpriteColCursorSprites8372 ld (BufferCursorSpriteCol),hl8374 ld a,(NewPrContr)8375 bit 4,a 8376 ret z8377 8378 8379 ld a,18380 ld (CastSpell?),a8381 ret8382 8384SpellEarthBound: db 2 | dw SpellEarthBoundRoutine | db CostEarthSpell48385SpellPlateArmor: db 1 | dw SpellPlateArmorRoutine | db CostEarthSpell38386SpellResurrection: db 1 | dw SpellResurrectionRoutine | db CostEarthSpell28387SpellEarthShock: db 3 | dw SpellEarthShockRoutine | db CostEarthSpell183888389SpellCurse: db 2 | dw SpellCurseRoutine | db CostFireSpell48390SpellBlindingFog: db 4 | dw SpellBlindingFogRoutine | db CostFireSpell38391Spellimplosion: db 2 | dw SpellimplosionRoutine | db CostFireSpell28392Spellsunstrike: db 2 | dw SpellsunstrikeRoutine | db CostFireSpell183938394SpellHaste: db 1 | dw SpellHasteRoutine | db CostAirSpell48395SpellShieldBreaker: db 2 | dw SpellShieldBreakerRoutine | db CostAirSpell38396SpellClawBack: db 1 | dw SpellClawBackRoutine | db CostAirSpell28397SpellSpellBubble: db 1 | dw SpellSpellBubbleRoutine | db CostAirSpell183988399SpellCure: db 1 | dw SpellCureRoutine | db CostWaterSpell48400SpellIceBolt: db 2 | dw SpellIceBoltRoutine | db CostWaterSpell38401Spellhypnosis: db 2 | dw SpellhypnosisRoutine | db CostWaterSpell28402SpellFrostRing: db 3 | dw SpellFrostRingRoutine | db CostWaterSpell184038404SpellMagicArrows: db 2 | dw SpellMagicArrowsRoutine | db CostAllSpellSchools48405SpellFrenzy: db 1 | dw SpellFrenzyRoutine | db CostAllSpellSchools38406SpellTeleport: db 5 | dw SpellTeleportRoutine | db CostAllSpellSchools28407SpellInnerBeast: db 1 | dw SpellInnerBeastRoutine | db CostAllSpellSchools18409CostAllSpellSchools4: equ 5 8410CostAllSpellSchools3: equ 9 8411CostAllSpellSchools2: equ 13 8412CostAllSpellSchools1: equ 14 8414CostEarthSpell4: equ 4 8415CostEarthSpell3: equ 6 8416CostEarthSpell2: equ 12 8417CostEarthSpell1: equ 16 8419CostFireSpell4: equ 6 8420CostFireSpell3: equ 10 8421CostFireSpell2: equ 15 8422CostFireSpell1: equ 16 8424CostAirSpell4: equ 5 8425CostAirSpell3: equ 7 8426CostAirSpell2: equ 11 8427CostAirSpell1: equ 18 8429CostWaterSpell4: equ 6 8430CostWaterSpell3: equ 8 8431CostWaterSpell2: equ 12 8432CostWaterSpell1: equ 15 8434GetSelectedSpellCost: 8435 call GetSelectedSpellTable 8436 inc hl8437 inc hl8438 inc hl8439 ld a,(hl) 8440 ret8442GetSelectedSpellRoutine: 8443 call GetSelectedSpellTable 8444 inc hl8445 ld e,(hl)8446 inc hl8447 ld d,(hl)8448 ex de,hl8449 ret8451GetSelectedSpellCastableOn:8452 call GetSelectedSpellTable 8453 ld a,(hl) 8454 ret8456GetSelectedSpellTable: 8457 ld a,(SpellSelected?)8458 cp 18459 ld hl,SpellInnerBeast8460 ret z8461 cp 28462 ld hl,SpellTeleport8463 ret z8464 cp 38465 ld hl,SpellFrenzy8466 ret z8467 cp 48468 ld hl,SpellMagicArrows8469 ret z8470 ld a,(SelectedElementInSpellBook) 8471 or a8472 jr z,.EarthSpellSelected8473 dec a8474 jr z,.FireSpellSelected8475 dec a8476 jr z,.AirSpellSelected8478 .WaterSpellSelected:8479 ld a,(SpellSelected?)8480 cp 58481 ld hl,SpellFrostRing8482 ret z8483 cp 68484 ld hl,Spellhypnosis8485 ret z8486 cp 78487 ld hl,SpellIceBolt8488 ret z8489 cp 88490 ld hl,SpellCure8491 ret8493 .AirSpellSelected:8494 ld a,(SpellSelected?)8495 cp 58496 ld hl,SpellSpellBubble8497 ret z8498 cp 68499 ld hl,SpellClawBack8500 ret z8501 cp 78502 ld hl,SpellShieldBreaker8503 ret z8504 cp 88505 ld hl,SpellHaste8506 ret8508 .FireSpellSelected:8509 ld a,(SpellSelected?)8510 cp 58511 ld hl,Spellsunstrike8512 ret z8513 cp 68514 ld hl,Spellimplosion8515 ret z8516 cp 78517 ld hl,SpellBlindingFog8518 ret z8519 cp 88520 ld hl,SpellCurse8521 ret8523 .EarthSpellSelected:8524 ld a,(SpellSelected?)8525 cp 58526 ld hl,SpellEarthShock8527 ret z8528 cp 68529 ld hl,SpellResurrection8530 ret z8531 cp 78532 ld hl,SpellPlateArmor8533 ret z8534 cp 88535 ld hl,SpellEarthBound8536 ret8538ReduceDurationStatusEffectsMonsters: 8539 ld ix,Monster18540 ld c,12 8541 .totalMonstersLoop:8542 ld b,5 8543 .loop:8544 ld a,(ix+MonsterStatusEffect1) 8545 and %0000 11118546 jr z,.NextStatusEffect8547 dec (ix+MonsterStatusEffect1) 8548 ld a,(ix+MonsterStatusEffect1) 8549 and %0000 11118550 jr nz,.NextStatusEffect8551 ld (ix+MonsterStatusEffect1),0 8552 .NextStatusEffect:8553 inc ix8554 djnz .loop8555 8556 ld de,LenghtMonsterTable-58557 add ix,de 8558 dec c8559 jr nz,.totalMonstersLoop8560 ret8562GetSpellPowerForCurrentActiveHero:8563 call SetCurrentActiveMOnsterInIX8564 8565 8566 push ix8567 pop hl 8568 ld de,Monster78569 call CompareHLwithDE 8570 ld ix,(plxcurrentheroAddress) 8571 jr c,.HeroFound8572 ld ix,(HeroThatGetsAttacked) 8580 .HeroFound:8582 8583 ld de,ItemSpellDamagePointsTable8584 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 8585 push ix8586 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters8587 pop ix8588 ld e,(ix+HeroStatSpelldamage)8589 ld d,08590 add hl,de8591 ret8593GetSpellDuration: 8594 call GetSpellPowerForCurrentActiveHero 8596 8597 push hl8598 pop bc8599 ld de,38600 call DivideBCbyDE 8601 ld a,c8602 add a,28603 ret8605CheckIfSpellGetsSpellBubbleed:8606 call CheckResistanceSkill 8607 ret z8609 ld a,r8610 and 38611 jr z,.DontSpellBubble8613 ld ix,(MonsterThatIsBeingAttacked)8614 ld c,SpellBubbleSpellNumber 8615 ld b,AmountOfStatusEffects8616 call CheckPresenceSpellBubble 8617 ret nz8618 8619 ld (ix+MonsterStatusEffect1),0 8620 xor a 8621 ret8622 .DontSpellBubble:8623 inc a 8624 ret8626EarthBoundSpellNumber: equ 1*168627SpellEarthBoundRoutine:8628 call CheckIfSpellGetsSpellBubbleed 8629 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8631 ld bc,SFX_EarthBound8632 call RePlayerSFX_PlayCh1 8634 ld iy,EarthBoundAnimation8635 call AnimateSpell8637 call GetSpellDuration 8638 ld ix,(MonsterThatIsBeingAttacked)8639 or EarthBoundSpellNumber 8640 call SetSpellInEmptyStatusSlot8641 ld a,6 8642 call PrepBattleTextForSpells8644 jp EndSpellSelectedAndReduceManaCost8646PlateArmorSpellNumber: equ 2*168647SpellPlateArmorRoutine:8648 ld bc,SFX_PlateArmor8649 call RePlayerSFX_PlayCh1 8651 ld iy,PlateArmorAnimation8652 call AnimateSpell8654 call GetSpellDuration 8655 ld ix,(MonsterThatIsBeingAttacked)8656 or PlateArmorSpellNumber 8657 call SetSpellInEmptyStatusSlot8658 ld a,7 8659 call PrepBattleTextForSpells8660 jp EndSpellSelectedAndReduceManaCost8662CurseSpellNumber: equ 3*168663SpellCurseRoutine:8664 call CheckIfSpellGetsSpellBubbleed 8665 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8667 ld bc,SFX_Curse8668 call RePlayerSFX_PlayCh1 8670 ld iy,CurseAnimation8671 call AnimateSpell8673 call GetSpellDuration 8674 ld ix,(MonsterThatIsBeingAttacked)8675 or CurseSpellNumber 8676 call SetSpellInEmptyStatusSlot8677 ld a,10 8678 call PrepBattleTextForSpells8679 jp EndSpellSelectedAndReduceManaCost8681BlindingFogSpellNumber: equ 4*168682SpellBlindingFogRoutine:8683 call CheckIfSpellGetsSpellBubbleed 8684 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8686 ld bc,SFX_BlindingFog8687 call RePlayerSFX_PlayCh1 8689 ld iy,BlindingFogAnimation8690 call AnimateSpell8692 call GetSpellDuration 8693 ld ix,(MonsterThatIsBeingAttacked)8694 or BlindingFogSpellNumber 8695 call SetSpellInEmptyStatusSlot8696 ld a,11 8697 call PrepBattleTextForSpells8698 jp EndSpellSelectedAndReduceManaCost8700HasteSpellNumber: equ 5*168701SpellHasteRoutine:8702 ld bc,SFX_Haste8703 call RePlayerSFX_PlayCh1 8705 ld iy,HasteAnimation8706 call AnimateSpell8708 call GetSpellDuration 8709 ld ix,(MonsterThatIsBeingAttacked)8710 or HasteSpellNumber 8711 call SetSpellInEmptyStatusSlot8712 ld a,14 8713 call PrepBattleTextForSpells8714 jp EndSpellSelectedAndReduceManaCost8716ShieldBreakerSpellNumber: equ 6*168717SpellShieldBreakerRoutine:8718 call CheckIfSpellGetsSpellBubbleed 8719 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8721 ld bc,SFX_Shieldbreaker8722 call RePlayerSFX_PlayCh1 8724 ld iy,ShieldBreakerAnimation8725 call AnimateSpell8727 call GetSpellDuration 8728 ld ix,(MonsterThatIsBeingAttacked)8729 or ShieldBreakerSpellNumber 8730 call SetSpellInEmptyStatusSlot8731 ld a,15 8732 call PrepBattleTextForSpells8733 jp EndSpellSelectedAndReduceManaCost8735ClawBackSpellNumber: equ 7*168736SpellClawBackRoutine:8737 ld bc,SFX_ClawBack8738 call RePlayerSFX_PlayCh1 8740 ld iy,ClawBackAnimation8741 call AnimateSpell8743 call GetSpellDuration 8744 ld ix,(MonsterThatIsBeingAttacked)8745 or ClawBackSpellNumber 8746 call SetSpellInEmptyStatusSlot8747 ld a,16 8748 call PrepBattleTextForSpells8749 jp EndSpellSelectedAndReduceManaCost8751hypnosisSpellNumber: equ 8*168752SpellhypnosisRoutine:8753 call CheckIfSpellGetsSpellBubbleed 8754 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8756 ld bc,SFX_Hypnosis8757 call RePlayerSFX_PlayCh1 8759 ld iy,hypnosisAnimation8760 call AnimateSpell8762 call GetSpellDuration 8763 ld ix,(MonsterThatIsBeingAttacked)8764 or hypnosisSpellNumber 8765 call SetSpellInEmptyStatusSlot8766 ld a,20 8767 call PrepBattleTextForSpells8768 jp EndSpellSelectedAndReduceManaCost8770FrenzySpellNumber: equ 9*168771SpellFrenzyRoutine:8772 ld bc,SFX_Frenzy8773 call RePlayerSFX_PlayCh1 8775 ld iy,FrenzyAnimation8776 call AnimateSpell8778 call GetSpellDuration 8779 ld ix,(MonsterThatIsBeingAttacked)8780 or FrenzySpellNumber 8781 call SetSpellInEmptyStatusSlot8782 ld a,23 8783 call PrepBattleTextForSpells8784 jp EndSpellSelectedAndReduceManaCost8786InnerBeastSpellNumber: equ 10*168787SpellInnerBeastRoutine:8788 ld bc,SFX_InnerBeast8789 call RePlayerSFX_PlayCh1 8791 ld iy,InnerBeastAnimation8792 call AnimateSpell8794 call GetSpellDuration 8795 ld ix,(MonsterThatIsBeingAttacked)8796 or InnerBeastSpellNumber 8797 call SetSpellInEmptyStatusSlot8798 ld a,25 8799 call PrepBattleTextForSpells8800 jp EndSpellSelectedAndReduceManaCost8802SpellBubbleSpellNumber: equ 11*168803SpellSpellBubbleRoutine:8804 ld bc,SFX_SpellBubble8805 call RePlayerSFX_PlayCh1 8807 ld iy,SpellBubbleAnimation8808 call AnimateSpell8809 8810 call GetSpellDuration 8811 ld ix,(MonsterThatIsBeingAttacked)8812 or SpellBubbleSpellNumber 8813 call SetSpellInEmptyStatusSlot8814 ld a,17 8815 call PrepBattleTextForSpells8816 jp EndSpellSelectedAndReduceManaCost8818GetIceBoltDMGAmount: 8819 call GetSpellPowerForCurrentActiveHero 8820 ld de,108821 call MultiplyHlWithDE 8822 ld de,308823 add hl,de8824 jp AddPositiveSpellDamageFromItemsForActiveHero8826SpellIceBoltRoutine:8827 call CheckIfSpellGetsSpellBubbleed 8828 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8830 ld bc,SFX_IceBolt8831 call RePlayerSFX_PlayCh1 8833 ld iy,IceBoltAnimation8834 call AnimateSpell8836 call GetIceBoltDMGAmount 8837 call ReduceSpellDamageFromItems 8838 ld (AEOSpellDamage),hl 8839 ld ix,(MonsterThatIsBeingAttacked)8840 call MoveMonster.DealDamageToMonster8841 ld a,19 8842 call PrepBattleTextForSpells8843 jp EndSpellSelectedAndReduceManaCost8845GetEarthShockDMGAmount: 8846 call GetSpellPowerForCurrentActiveHero 8847 ld de,108848 call MultiplyHlWithDE 8849 ld de,508850 add hl,de8851 jp AddPositiveSpellDamageFromItemsForActiveHero8853SpellEarthShockRoutine:8854 ld ix,Monster0 8855 ld (MonsterThatIsBeingAttacked),ix8857 ld bc,SFX_EarthShock8858 call RePlayerSFX_PlayCh1 8860 ld iy,EarthShockAnimation8861 call AnimateSpell8863 call GetEarthShockDMGAmount 8864 ld (AEOSpellDamage),hl8865 ld a,9 8866 call PrepBattleTextForSpells8867 jp GoCastAOESpell8869GetimplosionDMGAmount: 8870 call GetSpellPowerForCurrentActiveHero 8871 ld de,108872 call MultiplyHlWithDE 8873 ld de,158874 add hl,de8875 jp AddPositiveSpellDamageFromItemsForActiveHero8877SpellimplosionRoutine:8878 call CheckIfSpellGetsSpellBubbleed 8879 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8881 ld bc,SFX_Implosion8882 call RePlayerSFX_PlayCh1 8884 ld iy,implosionAnimation8885 call AnimateSpell8887 call GetimplosionDMGAmount 8888 ld (AEOSpellDamage),hl8889 ld a,12 8890 call PrepBattleTextForSpells8891 jp GoCastAOESpell8893GetFrostRingDMGAmount: 8894 call GetSpellPowerForCurrentActiveHero 8895 ld de,108896 call MultiplyHlWithDE 8897 ld de,308898 add hl,de8899 jp AddPositiveSpellDamageFromItemsForActiveHero8901SpellFrostRingRoutine:8902 ld ix,Monster0 8903 ld (MonsterThatIsBeingAttacked),ix8905 ld bc,SFX_FrostRing8906 call RePlayerSFX_PlayCh1 8908 ld iy,FrostRingAnimation8909 call AnimateSpell8911 call GetFrostRingDMGAmount 8912 ld (AEOSpellDamage),hl8914 ld hl,08915 ld (MonsterThatWasDamagedPreviousCheck),hl8916 ld a,(Monster0+MonsterX)8917 ld (CursorXWhereSpellWasCast),a8918 ld a,(Monster0+MonsterY)8919 ld (CursorYWhereSpellWasCast),a8921 ld a,(CursorXWhereSpellWasCast) 8922 sub a,168923 ld (CursorXWhereSpellWasCast),a8924 call GoCastAOESpell.DamageMonsterOnThisTile8926 ld a,(CursorXWhereSpellWasCast) 8927 add a,168928 ld (CursorXWhereSpellWasCast),a8930 ld a,21 8931 call PrepBattleTextForSpells8933 jp GoCastAOESpell.EntryPointFrostRing8935GetMagicArrowsDMGAmount: 8936 call GetSpellPowerForCurrentActiveHero 8937 ld de,108938 call MultiplyHlWithDE 8939 ld de,108940 add hl,de8941 jp AddPositiveSpellDamageFromItemsForActiveHero8943SpellMagicArrowsRoutine:8944 call CheckIfSpellGetsSpellBubbleed 8945 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8947 ld bc,SFX_MagicArrow8948 call RePlayerSFX_PlayCh1 8950 ld iy,MagicArrowsAnimation8951 call AnimateSpell8953 call GetMagicArrowsDMGAmount 8954 call ReduceSpellDamageFromItems 8955 ld (AEOSpellDamage),hl 8957 ld ix,(MonsterThatIsBeingAttacked)8958 call MoveMonster.DealDamageToMonster8960 ld a,22 8961 call PrepBattleTextForSpells8962 jp EndSpellSelectedAndReduceManaCost8964GetsunstrikeDMGAmount: 8965 call GetSpellPowerForCurrentActiveHero 8966 ld de,108967 call MultiplyHlWithDE 8968 ld de,808969 add hl,de8970 jp AddPositiveSpellDamageFromItemsForActiveHero8972SpellsunstrikeRoutine:8973 call CheckIfSpellGetsSpellBubbleed 8974 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8976 ld bc,SFX_Sunstrike8977 call RePlayerSFX_PlayCh1 8979 ld iy,sunstrikeAnimation8980 call AnimateSpell8982 call GetsunstrikeDMGAmount 8983 call ReduceSpellDamageFromItems 8984 ld (AEOSpellDamage),hl 8986 ld ix,(MonsterThatIsBeingAttacked)8987 call MoveMonster.DealDamageToMonster8989 ld a,13 8990 call PrepBattleTextForSpells8991 jp EndSpellSelectedAndReduceManaCost8993GetCureAmount: 8994 call GetSpellPowerForCurrentActiveHero 8995 ld de,58996 call MultiplyHlWithDE 8997 ld de,208998 add hl,de8999 ret9001SpellCureRoutine:9002 ld bc,SFX_Cure9003 call RePlayerSFX_PlayCh1 9005 ld iy,CureAnimation9006 call AnimateSpell9008 call GetCureAmount 9009 ld a,l9010 push af 9011 ld ix,(MonsterThatIsBeingAttacked)9012 call SetMonsterTableInIY 9013 pop af 9014 add a,(ix+MonsterHP)9015 jr nc,.NotCarry9016 ld a,2559017 .NotCarry:9018 ld (ix+MonsterHP),a9019 cp (iy+MonsterTableHp) 9020 jp c,EndSpellSelected9021 ld a,(iy+MonsterTableHp) 9022 ld (ix+MonsterHP),a9024 ld b,EarthBoundSpellNumber 9025 call RemoveSpell 9026 ld b,CurseSpellNumber 9027 call RemoveSpell 9028 ld b,BlindingFogSpellNumber 9029 call RemoveSpell 9030 ld b,ShieldBreakerSpellNumber 9031 call RemoveSpell 9032 ld b,hypnosisSpellNumber 9033 call RemoveSpell 9035 ld a,18 9036 call PrepBattleTextForSpells9037 jp EndSpellSelectedAndReduceManaCost9039GetResurrectionAmount: 9040 call GetSpellPowerForCurrentActiveHero 9041 ld de,59042 call MultiplyHlWithDE 9043 ld de,609044 add hl,de9045 ld a,l9046 ret9048SpellResurrectionRoutine:9049 ld bc,SFX_Resurrect9050 call RePlayerSFX_PlayCh1 9052 ld iy,ResurrectionAnimation9053 call AnimateSpell9055 call GetResurrectionAmount 9056 push af9057 ld ix,(MonsterThatIsBeingAttacked)9058 9059 ld l,(ix+MonsterAmount)9060 ld h,(ix+MonsterAmount+1)9061 ld (AmountMonsterBeforeBeingAttacked),hl9063 call SetMonsterTableInIY 9065 pop af9067 add a,(ix+MonsterHP)9068 jr nc,.NotCarry9069 ld a,2559070 .NotCarry:9072 .CheckOverFlow:9073 ld (ix+MonsterHP),a9074 cp (iy+MonsterTableHp) 9075 jp c,.EndRessurectionRoutine9077 sub (iy+MonsterTableHp) 9079 call .SetTotalAmountMonsterAtStartBattleInHL9081 ld e,(ix+MonsterAmount)9082 ld d,(ix+MonsterAmount+1)9083 call CompareHLwithDE 9084 jr z,.MaxHpAndMaxAmountReached 9085 inc de9086 ld (ix+MonsterAmount),e9087 ld (ix+MonsterAmount+1),d9089 jr .CheckOverFlow9090 .MaxHpAndMaxAmountReached:9091 ld a,(iy+MonsterTableHp) 9092 ld (ix+MonsterHP),a9093 jp .EndRessurectionRoutine9095 .SetTotalAmountMonsterAtStartBattleInHL:9096 ld de,(MonsterThatIsBeingAttacked)9097 ld hl,Monster19098 call CompareHLwithDE 9099 ld hl,(ListOfMonstersToPutMonster1+1) 9100 ret z9101 ld hl,Monster29102 call CompareHLwithDE 9103 ld hl,(ListOfMonstersToPutMonster2+1) 9104 ret z9105 ld hl,Monster39106 call CompareHLwithDE 9107 ld hl,(ListOfMonstersToPutMonster3+1) 9108 ret z9109 ld hl,Monster49110 call CompareHLwithDE 9111 ld hl,(ListOfMonstersToPutMonster4+1) 9112 ret z9113 ld hl,Monster59114 call CompareHLwithDE 9115 ld hl,(ListOfMonstersToPutMonster5+1) 9116 ret z9117 ld hl,Monster69118 call CompareHLwithDE 9119 ld hl,(ListOfMonstersToPutMonster6+1) 9120 ret z9121 ld hl,Monster79122 call CompareHLwithDE 9123 ld hl,(ListOfMonstersToPutMonster7+1) 9124 ret z9125 ld hl,Monster89126 call CompareHLwithDE 9127 ld hl,(ListOfMonstersToPutMonster8+1) 9128 ret z9129 ld hl,Monster99130 call CompareHLwithDE 9131 ld hl,(ListOfMonstersToPutMonster9+1) 9132 ret z9133 ld hl,Monster109134 call CompareHLwithDE 9135 ld hl,(ListOfMonstersToPutMonster10+1) 9136 ret z9137 ld hl,Monster119138 call CompareHLwithDE 9139 ld hl,(ListOfMonstersToPutMonster11+1) 9140 ret z91419143 ld hl,(ListOfMonstersToPutMonster12+1) 9145 ret9147 .EndRessurectionRoutine:9148 call SetAmountUnderMonsterIn3Pages9150 ld a,8 9151 call PrepBattleTextForSpells9152 jp EndSpellSelectedAndReduceManaCost9154GoCastAOESpell:9155 ld hl,09156 ld (MonsterThatWasDamagedPreviousCheck),hl9157 ld a,(Monster0+MonsterX)9158 ld (CursorXWhereSpellWasCast),a9159 ld a,(Monster0+MonsterY)9160 ld (CursorYWhereSpellWasCast),a9162 ld a,(CursorXWhereSpellWasCast) 9163 sub a,169164 ld (CursorXWhereSpellWasCast),a9165 call .DamageMonsterOnThisTile9167 ld a,(CursorXWhereSpellWasCast) 9168 add a,169169 ld (CursorXWhereSpellWasCast),a9170 call .DamageMonsterOnThisTile9171 9172 .EntryPointFrostRing:9173 ld a,(CursorXWhereSpellWasCast) 9174 add a,169175 ld (CursorXWhereSpellWasCast),a9176 call .DamageMonsterOnThisTile9178 ld a,(CursorXWhereSpellWasCast) 9179 sub a,89180 ld (CursorXWhereSpellWasCast),a9181 ld a,(CursorYWhereSpellWasCast) 9182 sub a,169183 ld (CursorYWhereSpellWasCast),a9184 call .DamageMonsterOnThisTile9186 ld a,(CursorXWhereSpellWasCast) 9187 sub a,169188 ld (CursorXWhereSpellWasCast),a9189 call .DamageMonsterOnThisTile9191 ld a,(CursorYWhereSpellWasCast) 9192 add a,329193 ld (CursorYWhereSpellWasCast),a9194 call .DamageMonsterOnThisTile9196 ld a,(CursorXWhereSpellWasCast) 9197 add a,169198 ld (CursorXWhereSpellWasCast),a9199 call .DamageMonsterOnThisTile9200 jp EndSpellSelectedAndReduceManaCost9202 .DamageMonsterOnThisTile:9203 call CheckCollateralSpellDamage 9204 ret nc9205 9206 ld ix,(MonsterThatIsBeingAttacked) 9207 push ix9208 pop de9209 ld hl,(MonsterThatWasDamagedPreviousCheck)9210 call CompareHLwithDE 9211 ret z 9212 ld (MonsterThatWasDamagedPreviousCheck),de9214 ld hl,(AEOSpellDamage)9216 ld a,BattleCodePage2Block 9217 call block34 9218 call ReduceSpellDamageFromItems 9220 call MoveMonster.DealDamageToMonster9221 call CheckMonsterDied 9222 .WaitExplosionMonster:9223 ld a,(ShowExplosionSprite?) 9224 or a9225 jr nz,.WaitExplosionMonster9226 ret9228CheckCollateralSpellDamage: 9229 ld ix,Monster19230 call .CheckPointerOnCreature9231 ld ix,Monster29232 call .CheckPointerOnCreature9233 ld ix,Monster39234 call .CheckPointerOnCreature9235 ld ix,Monster49236 call .CheckPointerOnCreature9237 ld ix,Monster59238 call .CheckPointerOnCreature9239 ld ix,Monster69240 call .CheckPointerOnCreature9241 ld ix,Monster79242 call .CheckPointerOnCreature9243 ld ix,Monster89244 call .CheckPointerOnCreature9245 ld ix,Monster99246 call .CheckPointerOnCreature9247 ld ix,Monster109248 call .CheckPointerOnCreature9249 ld ix,Monster119250 call .CheckPointerOnCreature9251 ld ix,Monster129252 call .CheckPointerOnCreature9253 xor a 9254 ret9255 9256 .CheckPointerOnCreature:9257 call .Check1TileMonsterStandsOn 9258 9259 ld a,(ix+MonsterNX)9260 cp 179261 ret c9262 ld a,(CursorXWhereSpellWasCast)9263 ld c,a9264 ld a,(ix+MonsterX)9265 add a,169266 call .Check9268 9269 ld a,(ix+MonsterNX)9270 cp 339271 ret c9272 ld a,(CursorXWhereSpellWasCast)9273 ld c,a9274 ld a,(ix+MonsterX)9275 add a,329276 call .Check9278 9279 ld a,(ix+MonsterNX)9280 cp 579281 ret c9282 ld a,(CursorXWhereSpellWasCast)9283 ld c,a9284 ld a,(ix+MonsterX)9285 add a,489286 call .Check9287 ret9288 .Check1TileMonsterStandsOn:9289 ld a,(CursorXWhereSpellWasCast)9290 ld c,a9291 ld a,(ix+MonsterX)9293 .Check:9294 cp c9295 ret nz9297 ld a,(ix+MonsterY)9298 ld c,a9299 ld a,(ix+MonsterNY)9300 add a,c9301 ld c,a9303 ld a,(CursorYWhereSpellWasCast)9304 add a,0179305 cp c9306 ret nz9308 pop af 9309 pop af9311 ld (MonsterThatIsBeingAttacked),ix9312 ld a,(ix+MonsterX)9313 ld (MonsterThatIsBeingAttackedX),a9314 ld a,(ix+MonsterNX)9315 ld (MonsterThatIsBeingAttackedNX),a9316 ld a,(ix+MonsterY)9317 ld (MonsterThatIsBeingAttackedY),a9318 ld a,(ix+MonsterNY)9319 ld (MonsterThatIsBeingAttackedNY),a9320 scf 9321 ret9323SpellTeleportRoutine:9324 ld a,19325 ld (MoVeMonster?),a 9326 xor a9327 ld (MonsterAnimationSpeed),a9328 ld (MonsterAnimationStep),a9329 ld iy,MonsterMovementPath9330 ld (iy+0),TeleportMovement 9332 call SetCurrentActiveMOnsterInIX9334 ld a,(Monster0+MonsterY)9335 sub a,(ix+MonsterNY)9336 add a,179337 ld (iy+1),a 9338 ld a,(Monster0+MonsterX)9339 ld (iy+2),a 9341 ld (MonsterThatIsBeingAttacked),ix9343 ld bc,SFX_Teleport9344 call RePlayerSFX_PlayCh1 9346 ld iy,TeleportAnimation9347 call AnimateSpell9349 ld ix,(MonsterThatIsBeingAttacked)9350 ld a,24 9351 call PrepBattleTextForSpells9352 jp EndSpellSelectedAndReduceManaCost9354PrepBattleTextForSpells: 9355 ld (BattleTextQ),a9356 ld a,29357 ld (SetBattleText?),a 9358 jp SetMonsterNameInBattleTextQ493609361SetSpellInEmptyStatusSlot: 9363push ix9365 ld c,a 9366 and %1111 0000 9367 ld d,a 9369 ld b,5 9371 .loop:9372 ld a,(ix+MonsterStatusEffect1)9373 or a9374 jr z,.EmptySlotFound9375 9376 and %1111 0000 9377 cp d 9378 jr z,.EmptySlotFound 9379 9380 inc ix 9381 djnz .loop9383pop ix9384 ret9385 9388 .EmptySlotFound:9389 ld (ix+MonsterStatusEffect1),c9392pop ix9393 ret9404EraseMonsterPreviousFrame:9405 ld a,(activepage)9406 xor 19407 ld (EraseMonster+dPage),a9409 ld a,(ix+MonsterYPrevious)9410 ld (EraseMonster+sy),a 9411 ld (EraseMonster+dy),a9413 ld a,(ix+MonsterXPrevious)9414 ld (EraseMonster+dx),a9415 ld (EraseMonster+sx),a9417 ld bc,(NXAndNY)9418 ld a,c9419 inc a 9420 add a,a9423 ld a,(ix+MonsterNXPrevious)9426 ld (EraseMonster+nx),a9427 ld a,b9429 ld a,(ix+MonsterNYPrevious)9430 94319432 9433 ld (EraseMonster+ny),a9435 ld hl,EraseMonster9436 call docopy9437 ret9439SetBattleFieldGraphics:9440 ld hl,$4000 + (000*128) + (000/2) - 1289441 ld de,$0000 + (016*128) + (000/2) - 1289442 ld bc,$0000 + (212*256) + (256/2)94439448 ld a,(BattleGraphicsBlock) 9449 jp CopyRamToVramCorrectedCastleOverview 9451HeroFledRetreating: 9452 xor a9453 ld (ix+HeroUnits+00),UnitWhenRetreated | UnitWhenRetreated: equ 2559454 ld (ix+HeroUnits+01),a9455 ld (ix+HeroUnits+02),a9457 ld (ix+HeroUnits+03),a9458 ld (ix+HeroUnits+04),a9459 ld (ix+HeroUnits+05),a9461 ld (ix+HeroUnits+06),a9462 ld (ix+HeroUnits+07),a9463 ld (ix+HeroUnits+08),a9465 ld (ix+HeroUnits+09),a9466 ld (ix+HeroUnits+10),a9467 ld (ix+HeroUnits+11),a9469 ld (ix+HeroUnits+12),a9470 ld (ix+HeroUnits+13),a9471 ld (ix+HeroUnits+14),a9473 ld (ix+HeroUnits+15),a9474 ld (ix+HeroUnits+16),a9475 ld (ix+HeroUnits+17),a9476 9477HeroFledSurrendering: 9479 ld (ix+HeroStatus),254 9480 ld (ix+Heroy),2559481 ld (ix+Herox),2559483 ld l,(ix+HeroSpecificInfo+0) 9484 ld h,(ix+HeroSpecificInfo+1)9485 ld de,HeroInfoNumber9486 add hl,de9487 ld b,(hl) 9489 ld a,(CurrentActiveMonster) 9490 cp 79491 ld a,(whichplayernowplaying?) 9492 jr c,.FleeingPlayerFound9493 ld a,(PlayerThatGetsAttacked)9494 .FleeingPlayerFound:9496 9497 cp 19498 ld hl,TavernHeroesPlayer1+TavernHeroTableLenght-29499 jr z,.loop9500 cp 29501 ld hl,TavernHeroesPlayer2+TavernHeroTableLenght-29502 jr z,.loop9503 cp 39504 ld hl,TavernHeroesPlayer3+TavernHeroTableLenght-29505 jr z,.loop9506 ld hl,TavernHeroesPlayer4+TavernHeroTableLenght-29507 .loop:9508 ld a,(hl)9509 or a9510 jr nz,.HeroFound9511 dec hl9512 jr .loop9514 .HeroFound:9515 inc hl9516 ld (hl),b9517 ret9518 9519DeactivateHeroThatAttacks:9520 ld a,(whichplayernowplaying?)9521 ld (PlayerWhoLostAHeroInBattle?),a9522 ld a,39523 ld (PlayerLostHeroInBattle?),a9525 9526 ld de,lenghtherotable9527 ld hl,lenghtherotable*(amountofheroesperplayer-1)9529 call SetHero1ForCurrentPlayerInIX9530 push ix9531 pop iy 9532 ld ix,(plxcurrentheroAddress) 9533 9534 ld b,amountofheroesperplayer9535 .loop:9536 ld a,(iy+HeroStatus) 9537 inc a 9538 jp z,.endcheck1 9540 ld a,(ix+HeroY)9541 cp (iy+HeroY)9542 jp nz,.endcheck19544 ld a,(ix+HeroX)9545 cp (iy+HeroX)9546 jp z,.HeroTouchesEnemyHero9547 .endcheck1:9548 add iy,de9549 or a9550 sbc hl,de 9551 djnz .loop9552 ret9554 .HeroTouchesEnemyHero:9555 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl9557 ld ix,(plxcurrentheroAddress) 9558 ld (ix+HeroStatus),255 9560 push ix9561 pop hl9562 ld de,lenghtherotable9563 add hl,de 9565 push ix9566 pop de 9567 9568 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9570 ld a,b9571 or c9572 ret z 9574 ldir9576 9577 ld a,(whichplayernowplaying?)9578 dec a9579 ld hl,pl1hero8y9580 jr z,.LastHeroFound9581 dec a9582 ld hl,pl2hero8y9583 jr z,.LastHeroFound9584 dec a9585 ld hl,pl3hero8y9586 jr z,.LastHeroFound9587 ld hl,pl4hero8y9588 .LastHeroFound:9589 ld (hl),255 9590 ret9591 9592SetHero1ForPlayerThatGotAttackedInIX: 9593 ld a,(PlayerThatGetsAttacked) 9594 dec a9595 ld ix,pl1hero1y9596 ret z9597 dec a9598 ld ix,pl2hero1y9599 ret z9600 dec a9601 ld ix,pl3hero1y9602 ret z9603 ld ix,pl4hero1y9604 ret9605 9606DeactivateHeroThatGetsAttacked: 9607 ld ix,(HeroThatGetsAttacked) 9609 push ix9610 pop hl9611 ld a,l9612 or h9613 jr z,.NeutralEnemyDied9615 ld a,(PlayerThatGetsAttacked)9616 ld (PlayerWhoLostAHeroInBattle?),a9617 ld a,39618 ld (PlayerLostHeroInBattle?),a9620 9621 ld de,lenghtherotable9622 ld hl,lenghtherotable*(amountofheroesperplayer-1)9624 call SetHero1ForPlayerThatGotAttackedInIX9625 push ix9626 pop iy 9627 ld ix,(HeroThatGetsAttacked) 9628 9629 ld b,amountofheroesperplayer9630 .loop:9631 ld a,(iy+HeroStatus) 9632 inc a 9633 jp z,.endcheck1 9635 ld a,(ix+HeroY)9636 cp (iy+HeroY)9637 jp nz,.endcheck19639 ld a,(ix+HeroX)9640 cp (iy+HeroX)9641 jp z,.HeroTouchesEnemyHero9642 .endcheck1:9643 add iy,de9644 or a9645 sbc hl,de 9646 djnz .loop9647 ret9649 .HeroTouchesEnemyHero:9650 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl96529654 ld ix,(HeroThatGetsAttacked) 96569662 ld (ix+HeroStatus),255 9664 push ix9665 pop hl9666 ld de,lenghtherotable9667 add hl,de 9669 push ix9670 pop de 9671 9672 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9674 ld a,b9675 or c9676 ret z 9678 ldir9680 ld iy,(LastHeroForPlayerThatGetsAttacked)9681 ld (iy+HeroStatus),255 9682 ret9684 .NeutralEnemyDied:9685 ld a,19686 ld (NeutralEnemyDied?),a9687 ret9689AnimateSpell:9690 jp GoAnimateSpell9696CopyActivePageToInactivePage:9697 ld a,(activepage)9698 or a9699 ld hl,CopyPage1To09700 jp nz,DoCopy9701 ld hl,CopyPage0To1PlayingField9702 jp DoCopy9710MSXHeroes.asm1202 ds $8000-$,$ff1203dephase12051206BattleCodePage2Block: equ $511207phase $80001208 BattleCodePage2.asm1AnimateAutoCombatButton:2 ld a,(AutoCombatButtonPressed?)3 or a4 jr z,.AutoCombatNotOn6 ld a,(framecounter)7 and 159 cp 410 ld hl,$4000 + (072*128) + (196/2) - 12811 jr c,.SetAutoCombatButton13 cp 814 ld hl,$4000 + (072*128) + (214/2) - 12815 jr c,.SetAutoCombatButton17 cp 1218 ld hl,$4000 + (072*128) + (232/2) - 12819 jr c,.SetAutoCombatButton21 ld hl,$4000 + (090*128) + (196/2) - 12823 .SetAutoCombatButton:24 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 25 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 26 ld a,(GenericButtonTable+(GenericButtonTableLenghtPerButton*6))27 or %0000 001128 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),a29 ret31 .AutoCombatNotOn:32 ld hl,$4000 + (054*128) + (214/2) - 12833 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 34 ld hl,$4000 + (054*128) + (232/2) - 12835 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 36 ret38HandleEnemyAI: 39 inc c 40 ld a,d41 cp 12842 jp z,HandleEnemyAIRangeMonster44HandleEnemyAIMeleeMonster:45 ld a,c46 exx47 ld c,a 48 ld b,18 50 ld a,(CurrentActiveMonster) 51 cp 752 jr nc,.RightPlayerIsCurrentlyActive53 54 .LeftPlayerIsCurrentlyActive:55 exx56 ld ix,Monster7 | call .Checkpass1CheckAttackFromTheLeftFirst 57 ld ix,Monster8 | call .Checkpass1CheckAttackFromTheLeftFirst 58 ld ix,Monster9 | call .Checkpass1CheckAttackFromTheLeftFirst 59 ld ix,Monster10 | call .Checkpass1CheckAttackFromTheLeftFirst 60 ld ix,Monster11 | call .Checkpass1CheckAttackFromTheLeftFirst 61 ld ix,Monster12 | call .Checkpass1CheckAttackFromTheLeftFirst 63 ld ix,Monster7 | call .Checkpass2CheckAttackFromTheLeftFirst 64 ld ix,Monster8 | call .Checkpass2CheckAttackFromTheLeftFirst 65 ld ix,Monster9 | call .Checkpass2CheckAttackFromTheLeftFirst 66 ld ix,Monster10 | call .Checkpass2CheckAttackFromTheLeftFirst 67 ld ix,Monster11 | call .Checkpass2CheckAttackFromTheLeftFirst 68 ld ix,Monster12 | call .Checkpass2CheckAttackFromTheLeftFirst 70 71 inc c72 exx73 djnz .LeftPlayerIsCurrentlyActive74 75 ld a,176 ld (DefendButtonPressed?),a 77 ret79 .RightPlayerIsCurrentlyActive:80 exx81 ld ix,Monster1 | call .Checkpass1 82 ld ix,Monster2 | call .Checkpass1 83 ld ix,Monster3 | call .Checkpass1 84 ld ix,Monster4 | call .Checkpass1 85 ld ix,Monster5 | call .Checkpass1 86 ld ix,Monster6 | call .Checkpass1 88 ld ix,Monster1 | call .Checkpass2 89 ld ix,Monster2 | call .Checkpass2 90 ld ix,Monster3 | call .Checkpass2 91 ld ix,Monster4 | call .Checkpass2 92 ld ix,Monster5 | call .Checkpass2 93 ld ix,Monster6 | call .Checkpass2 95 96 inc c97 exx98 djnz .RightPlayerIsCurrentlyActive99 100 ld a,1101 ld (DefendButtonPressed?),a 102 ret103 104 .Checkpass2: 105 ld (MonsterThatIsBeingAttacked),ix106 jr .endCheckAmount108 .Checkpass1: 109 ld (MonsterThatIsBeingAttacked),ix110 ld l,(ix+MonsterAmount)111 ld h,(ix+MonsterAmount+1)112 ld de,10 113 call CompareHLwithDE114 ret c 115 .endCheckAmount:116 ld a,(ix+MonsterHP)117 or a118 ret z 119 ld a,(ix+MonsterX)120 ld (MonsterThatIsBeingAttackedX),a121 ld a,(ix+MonsterNX)122 ld (MonsterThatIsBeingAttackedNX),a123 ld a,(ix+MonsterY)124 ld (MonsterThatIsBeingAttackedY),a125 ld a,(ix+MonsterNY)126 ld (MonsterThatIsBeingAttackedNY),a128 call .CanMonsterBeAttackedFromTheRIght?129 call .CanMonsterBeAttackedFromTheRIghtBottom?130 call .CanMonsterBeAttackedFromTheRIghtTop?131 call .CanMonsterBeAttackedFromTheLeft?132 call .CanMonsterBeAttackedFromTheLeftBottom?133 call .CanMonsterBeAttackedFromTheLeftTop?134 ret137 .Checkpass2CheckAttackFromTheLeftFirst: 138 ld (MonsterThatIsBeingAttacked),ix139 jr .endCheckAmountCheckAttackFromTheLeftFirst141 .Checkpass1CheckAttackFromTheLeftFirst: 142 ld (MonsterThatIsBeingAttacked),ix143 ld l,(ix+MonsterAmount)144 ld h,(ix+MonsterAmount+1)145 ld de,10 146 call CompareHLwithDE147 ret c 148 .endCheckAmountCheckAttackFromTheLeftFirst:149 ld a,(ix+MonsterHP)150 or a151 ret z 152 ld a,(ix+MonsterX)153 ld (MonsterThatIsBeingAttackedX),a154 ld a,(ix+MonsterNX)155 ld (MonsterThatIsBeingAttackedNX),a156 ld a,(ix+MonsterY)157 ld (MonsterThatIsBeingAttackedY),a158 ld a,(ix+MonsterNY)159 ld (MonsterThatIsBeingAttackedNY),a161 call .CanMonsterBeAttackedFromTheLeft?162 call .CanMonsterBeAttackedFromTheLeftBottom?163 call .CanMonsterBeAttackedFromTheLeftTop?164 call .CanMonsterBeAttackedFromTheRIght?165 call .CanMonsterBeAttackedFromTheRIghtBottom?166 call .CanMonsterBeAttackedFromTheRIghtTop?167 ret169 .CanMonsterBeAttackedFromTheLeftBottom?:170 call FindMonsterInBattleFieldGrid 171 dec hl172 ld de,LenghtBattleField173 add hl,de174 call .CheckLeftBottomWidth1Tile175 ld a,(ix+MonsterNX)176 cp 17177 ret c178 inc hl179 inc hl180 call .CheckLeftBottomWidth1Tile181 ld a,(ix+MonsterNX)182 cp 33183 ret c184 inc hl185 inc hl186 call .CheckLeftBottomWidth1Tile187 ld a,(ix+MonsterNX)188 cp 57189 ret c190 inc hl191 inc hl192 call .CheckLeftBottomWidth1Tile193 ret194 .CheckLeftBottomWidth1Tile:195 ld a,(hl)196 cp 255 197 ret z 198 cp c 199 ret nc200 pop af201 pop af202 pop af203 push bc 204 ld c,012 205 call CheckSpaceToMoveMonster.CursorLocationSet206 pop bc 207 exx208 ld hl,MonsterMovementPath209 ld d,0210 ld e,c211 dec e212 add hl,de213 ld (hl),255 214 ret216 .CanMonsterBeAttackedFromTheLeftTop?:217 call FindMonsterInBattleFieldGrid 218 dec hl219 ld de,LenghtBattleField220 or a221 sbc hl,de222 call .CheckLeftTopWidth1Tile223 ld a,(ix+MonsterNX)224 cp 17225 ret c226 inc hl227 inc hl228 call .CheckLeftTopWidth1Tile229 ld a,(ix+MonsterNX)230 cp 33231 ret c232 inc hl233 inc hl234 call .CheckLeftTopWidth1Tile235 ld a,(ix+MonsterNX)236 cp 57237 ret c238 inc hl239 inc hl240 call .CheckLeftTopWidth1Tile241 ret242 .CheckLeftTopWidth1Tile:243 ld a,(hl)244 cp 255 245 ret z 246 cp c 247 ret nc248 pop af249 pop af250 pop af251 push bc 252 ld c,014 253 call CheckSpaceToMoveMonster.CursorLocationSet254 pop bc 255 exx256 ld hl,MonsterMovementPath257 ld d,0258 ld e,c259 dec e260 add hl,de261 ld (hl),255 262 ret264 .CanMonsterBeAttackedFromTheRIghtBottom?:265 call FindMonsterInBattleFieldGrid 266 inc hl267 ld de,LenghtBattleField268 add hl,de269 call .CheckRightBottomWidth1Tile270 ld a,(ix+MonsterNX)271 cp 17272 ret c273 inc hl274 inc hl275 call .CheckRightBottomWidth1Tile276 ld a,(ix+MonsterNX)277 cp 33278 ret c279 inc hl280 inc hl281 call .CheckRightBottomWidth1Tile282 ld a,(ix+MonsterNX)283 cp 57284 ret c285 inc hl286 inc hl287 call .CheckRightBottomWidth1Tile288 ret289 .CheckRightBottomWidth1Tile:290 ld a,(hl)291 cp 255 292 ret z 293 cp c 294 ret nc295 pop af296 pop af297 pop af298 push bc 299 ld c,018 300 call CheckSpaceToMoveMonster.CursorLocationSet301 pop bc 302 exx303 ld hl,MonsterMovementPath304 ld d,0305 ld e,c306 dec e307 add hl,de308 ld (hl),255 309 ret311 .CanMonsterBeAttackedFromTheRIghtTop?:312 call FindMonsterInBattleFieldGrid 313 inc hl314 ld de,LenghtBattleField315 or a316 sbc hl,de317 call .CheckRightTopWidth1Tile318 ld a,(ix+MonsterNX)319 cp 17320 ret c321 inc hl322 inc hl323 call .CheckRightTopWidth1Tile324 ld a,(ix+MonsterNX)325 cp 33326 ret c327 inc hl328 inc hl329 call .CheckRightTopWidth1Tile330 ld a,(ix+MonsterNX)331 cp 57332 ret c333 inc hl334 inc hl335 call .CheckRightTopWidth1Tile336 ret337 .CheckRightTopWidth1Tile:338 ld a,(hl)339 cp 255 340 ret z 341 cp c 342 ret nc343 pop af344 pop af345 pop af346 push bc 347 ld c,016 348 call CheckSpaceToMoveMonster.CursorLocationSet349 pop bc 350 exx351 ld hl,MonsterMovementPath352 ld d,0353 ld e,c354 dec e355 add hl,de356 ld (hl),255 357 ret359 .CanMonsterBeAttackedFromTheLeft?:360 call FindMonsterInBattleFieldGrid 361 dec hl362 dec hl364 push ix365 push hl366 call SetCurrentActiveMOnsterInIX367 ld a,(ix+MonsterNX)368 pop hl369 pop ix371 cp 17372 jr c,.MonsterWidthFound_Left 373 dec hl374 dec hl375 cp 33376 jr c,.MonsterWidthFound_Left 377 dec hl378 dec hl379 cp 57380 jr c,.MonsterWidthFound_Left 381 dec hl382 dec hl 383 .MonsterWidthFound_Left:384 385 ld a,(hl)386 cp 255 387 ret z 388 cp c 389 ret nc390 pop af391 pop af392 push bc 393 ld c,013 394 call CheckSpaceToMoveMonster.CursorLocationSet395 pop bc 396 397 exx398 ld hl,MonsterMovementPath399 ld d,0400 ld e,c401 dec e402 add hl,de403 ld (hl),255 404 ret405 406 .CanMonsterBeAttackedFromTheRIght?:407 call FindMonsterInBattleFieldGrid 408 inc hl409 inc hl411 ld a,(ix+MonsterNX)412 cp 17413 jr c,.MonsterWidthFound_Right 414 inc hl415 inc hl416 cp 33417 jr c,.MonsterWidthFound_Right 418 inc hl419 inc hl420 cp 57421 jr c,.MonsterWidthFound_Right 422 inc hl423 inc hl 424 .MonsterWidthFound_Right:426 ld a,(hl)427 cp 255 428 ret z 429 cp c 430 ret nc431 pop af432 pop af433 push bc 434 ld c,017 435 call CheckSpaceToMoveMonster.CursorLocationSet436 pop bc 437 438 exx439 ld hl,MonsterMovementPath440 ld d,0441 ld e,c442 dec e443 add hl,de444 ld (hl),255 445 ret447HandleEnemyAIRangeMonster:448 ld a,(CurrentActiveMonster) 449 cp 7450 jp nc,.RightPlayerIsCurrentlyActive452 .LeftPlayerIsCurrentlyActive:453454 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 455 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 456 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 457 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 458 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 459 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 461462 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 463 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 464 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 465 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 466 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 467 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 469470 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 471 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 472 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 473 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 474 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 475 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 477478 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 479 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 480 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 481 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 482 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 483 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 484 ret486 .RightPlayerIsCurrentlyActive:487488 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 489 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 490 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 491 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 492 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 493 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 495496 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 497 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 498 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 499 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 500 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 501 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 503504 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 505 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 506 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 507 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 508 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 509 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 511512 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 513 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 514 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 515 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 516 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 517 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 518 ret520 .CheckPass4: 521 ld a,(MoVeMonster?) 522 or a523 ret z 524 pop af 525 ret527 .CheckPass3: 528 ld a,(MoVeMonster?) 529 or a530 ret z 531 ld a,(BrokenArrow?) 532 or a533 ret nz 534 pop af 535 ret537 .CheckPass2: 538 ld a,(MoVeMonster?) 539 or a540 ret z 541 ld ix,(MonsterThatIsBeingAttacked)542 ld l,(ix+MonsterAmount)543 ld h,(ix+MonsterAmount+1)544 ld de,10 545 call CompareHLwithDE 546 ret c547 pop af 548 ret550 .CheckPass1: 551 ld a,(MoVeMonster?) 552 or a553 ret z 554 ld a,(BrokenArrow?) 555 or a556 ret nz557 ld ix,(MonsterThatIsBeingAttacked)558 ld l,(ix+MonsterAmount)559 ld h,(ix+MonsterAmount+1)560 ld de,10 561 call CompareHLwithDE 562 ret c563 pop af 564 ret566 .CheckIfMonsterCanBeAttacked:567 xor a568 ld (MoVeMonster?),a 570 ld (MonsterThatIsBeingAttacked),ix571 ld a,(ix+MonsterHP)572 or a573 ret z 574 ld a,(ix+MonsterX)575 ld (MonsterThatIsBeingAttackedX),a576 ld a,(ix+MonsterNX)577 ld (MonsterThatIsBeingAttackedNX),a578 ld a,(ix+MonsterY)579 ld (MonsterThatIsBeingAttackedY),a580 ld a,(ix+MonsterNY)581 ld (MonsterThatIsBeingAttackedNY),a582 583 584 call RangedMonsterCheck586 ld a,(BrokenArrow?) 587 cp 2 588 ret z590 call SetCurrentActiveMOnsterInIX591 ld a,(ix+MonsterX)592 ld iy,(MonsterThatIsBeingAttacked)593 cp (iy+MonsterX)594 ld c,013 595 jr c,.DirectionFound596 ld c,017 597 .DirectionFound:598 ld a,1599 ld (MoVeMonster?),a 600 xor a601 ld (MonsterAnimationSpeed),a602 ld (MonsterAnimationStep),a603 ld iy,MonsterMovementPath604 ld (iy),c 605 ret607SetBattlefieldCasualtiesDefender:608 ld ix,(HeroThatGetsAttacked) 609 push ix610 pop hl611 ld a,l612 or h613 jp z,.SetBattlefieldCasualtiesDefenderNeutralMonster615 ld a,173+16616 ld (CasualtiesOverviewCopy+dy),a618 ld hl,$4000 + (142*128) + (044/2) - 128619 ld de,$0000 + ((212+16)*128) + (020/2) - 128620 ld bc,$0000 + (022*256) + (138/2)621 ld a,VictoryBlock 622 call CopyRamToVramCorrectedCastleOverview 624 ld b,004 625 ld c,0 626 ld de,$0000 + ((214+16)*128) + (024/2) - 128 628 ld iy,(HeroThatGetsAttacked) 629 ld a,(iy+HeroUnits+0) 630 ld l,(iy+HeroUnits+1)631 ld h,(iy+HeroUnits+2) 632 ld ix,Monster7633 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied635 ld iy,(HeroThatGetsAttacked) 636 ld a,(iy+HeroUnits+3) 637 ld l,(iy+HeroUnits+4)638 ld h,(iy+HeroUnits+5) 639 ld ix,Monster8640 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied642 ld iy,(HeroThatGetsAttacked) 643 ld a,(iy+HeroUnits+6) 644 ld l,(iy+HeroUnits+7)645 ld h,(iy+HeroUnits+8) 646 ld ix,Monster9647 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied649 ld iy,(HeroThatGetsAttacked) 650 ld a,(iy+HeroUnits+9) 651 ld l,(iy+HeroUnits+10)652 ld h,(iy+HeroUnits+11) 653 ld ix,Monster10654 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied656 ld iy,(HeroThatGetsAttacked) 657 ld a,(iy+HeroUnits+12) 658 ld l,(iy+HeroUnits+13)659 ld h,(iy+HeroUnits+14) 660 ld ix,Monster11661 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied663 ld iy,(HeroThatGetsAttacked) 664 ld a,(iy+HeroUnits+15) 665 ld l,(iy+HeroUnits+16)666 ld h,(iy+HeroUnits+17) 667 ld ix,Monster12668 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied669 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked671.SetBattlefieldCasualtiesDefenderNeutralMonster:672 ld a,173+16673 ld (CasualtiesOverviewCopy+dy),a675 ld hl,$4000 + (142*128) + (044/2) - 128676 ld de,$0000 + ((212+16)*128) + (020/2) - 128677 ld bc,$0000 + (022*256) + (138/2)678 ld a,VictoryBlock 679 call CopyRamToVramCorrectedCastleOverview 681 ld b,004 682 ld c,0 683 ld de,$0000 + ((214+16)*128) + (024/2) - 128 685 ld iy,ListOfMonstersToPutMonster7686 ld a,(iy+0) 687 ld l,(iy+1)688 ld h,(iy+2) 689 ld ix,Monster7690 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied692 ld iy,ListOfMonstersToPutMonster8693 ld a,(iy+0) 694 ld l,(iy+1)695 ld h,(iy+2) 696 ld ix,Monster8697 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied699 ld iy,ListOfMonstersToPutMonster9700 ld a,(iy+0) 701 ld l,(iy+1)702 ld h,(iy+2) 703 ld ix,Monster9704 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied706 ld iy,ListOfMonstersToPutMonster10707 ld a,(iy+0) 708 ld l,(iy+1)709 ld h,(iy+2) 710 ld ix,Monster10711 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied713 ld iy,ListOfMonstersToPutMonster11714 ld a,(iy+0) 715 ld l,(iy+1)716 ld h,(iy+2) 717 ld ix,Monster11718 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied720 ld iy,ListOfMonstersToPutMonster12721 ld a,(iy+0) 722 ld l,(iy+1)723 ld h,(iy+2) 724 ld ix,Monster12725 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied726 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked728SetBattlefieldCasualtiesAttacker:729 ld a,144+16730 ld (CasualtiesOverviewCopy+dy),a732 ld hl,$4000 + (142*128) + (044/2) - 128733 ld de,$0000 + ((212+16)*128) + (020/2) - 128734 ld bc,$0000 + (022*256) + (138/2)735 ld a,VictoryBlock 736 call CopyRamToVramCorrectedCastleOverview 738 ld b,004 739 ld c,0 740 ld de,$0000 + ((214+16)*128) + (024/2) - 128 742 ld iy,(plxcurrentheroAddress) 743 ld a,(iy+HeroUnits+0) 744 ld l,(iy+HeroUnits+1)745 ld h,(iy+HeroUnits+2) 746 ld ix,Monster1747 call .CheckAmountOfMonstersSlotDied749 ld iy,(plxcurrentheroAddress) 750 ld a,(iy+HeroUnits+3) 751 ld l,(iy+HeroUnits+4)752 ld h,(iy+HeroUnits+5) 753 ld ix,Monster2754 call .CheckAmountOfMonstersSlotDied756 ld iy,(plxcurrentheroAddress) 757 ld a,(iy+HeroUnits+6) 758 ld l,(iy+HeroUnits+7)759 ld h,(iy+HeroUnits+8) 760 ld ix,Monster3761 call .CheckAmountOfMonstersSlotDied763 ld iy,(plxcurrentheroAddress) 764 ld a,(iy+HeroUnits+9) 765 ld l,(iy+HeroUnits+10)766 ld h,(iy+HeroUnits+11) 767 ld ix,Monster4768 call .CheckAmountOfMonstersSlotDied770 ld iy,(plxcurrentheroAddress) 771 ld a,(iy+HeroUnits+12) 772 ld l,(iy+HeroUnits+13)773 ld h,(iy+HeroUnits+14) 774 ld ix,Monster5775 call .CheckAmountOfMonstersSlotDied777 ld iy,(plxcurrentheroAddress) 778 ld a,(iy+HeroUnits+15) 779 ld l,(iy+HeroUnits+16)780 ld h,(iy+HeroUnits+17) 781 ld ix,Monster6782 call .CheckAmountOfMonstersSlotDied783 .AllSlotsChecked:785 ld a,c 786 or a787 ret z788 dec a789 ld b,1*22 790 ld c,068+ 5*11 791 jr z,.AmountOfSlotsWithCasualtiesFound792 dec a793 ld b,2*22 794 ld c,068+ 4*11 795 jr z,.AmountOfSlotsWithCasualtiesFound796 dec a797 ld b,3*22 798 ld c,068+ 3*11 799 jr z,.AmountOfSlotsWithCasualtiesFound800 dec a801 ld b,4*22 802 ld c,068+ 2*11 803 jr z,.AmountOfSlotsWithCasualtiesFound804 dec a805 ld b,5*22 806 ld c,068+ 1*11 807 jr z,.AmountOfSlotsWithCasualtiesFound808 ld b,6*22 809 ld c,068+ 0*11 811 .AmountOfSlotsWithCasualtiesFound:812 ld a,(activepage) 813 or a814 ld a,1815 jr z,.ActivePageFound816 xor a817 .ActivePageFound:818 ld (CasualtiesOverviewCopy+sPage),a819 ld (CasualtiesOverviewCopy+dPage),a820 821 ld a,b822 ld (CasualtiesOverviewCopy+nx),a823 ld a,c824 ld (CasualtiesOverviewCopy+dx),a825 826 ld hl,CasualtiesOverviewCopy827 call docopy828 ret830 .CheckAmountOfMonstersSlotDied:831 ex af,af'832 833 call .CalculateAmountOfUnitsLost834 ret z836 837 push bc838 ld c,212+17+16 839 push de840 ld a,b841 add a,20842 ld b,a843 call SetNumber16BitCastle844 845 ex af,af'846 call SetSYSX14x14847 pop de848 push de849851 push hl852 ld hl,128853 add hl,de854 add hl,hl855 ex de,hl856 pop hl857 858 call CopyTransparantImageBattleCode 860 pop de861 pop bc863 inc c 865 ld a,b866 add a,22867 ld b,a869 ld hl,22/2870 add hl,de871 ex de,hl872 ret874 .CalculateAmountOfUnitsLost:875 push de876 ld e,(ix+MonsterAmount)877 ld d,(ix+MonsterAmount+1)879 or a880 sbc hl,de 881 pop de882 ret884SetSYSX14x14: 885 ld h,0886 ld l,a887 add hl,hl 888 ld de,UnitSYSXTable14x14Portraits2889 add hl,de890 ld c,(hl)891 inc hl892 ld b,(hl) 893 push bc894 pop hl896 ld a,Enemy14x14PortraitsBlock 897 ld bc,NXAndNY14x14CharaterPortraits898 ret900 901UnitSYSXTable14x14Portraits2: 902 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128903 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-128904 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-128905 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-128906 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-128907 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-128908 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-128910 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-128911 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-128912 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-128913 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-128915UnitSYSXTable14x24Portraits2: 916 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128917 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-128918 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-128919 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-128920 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-128921 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-128922 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-128924 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-128925 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-128926 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-128927 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-128930ClearBattleFieldGridStartOfBattle:931 ld hl,.BattleFieldGrid932 ld de,BattleFieldGrid933 ld bc,EndBattleFieldGrid-BattleFieldGrid934 ldir935 ret937.BattleFieldGrid: 938 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000939 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255940 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000941 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255942 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000943 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255944 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 945 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255946 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000948955SetFontPage0Y250: 956 ld hl,$4000 + (000*128) + (000/2) - 128957 ld de,$0000 + (250*128) + (000/2) - 128958 ld bc,$0000 + (006*256) + (256/2)959 ld a,CastleOverviewFontBlock 960 jp CopyRamToVramCorrectedWithoutActivePageSetting 962SetBattleButtons:963 ld hl,BattleButtonTable-2964 ld de,GenericButtonTable-2965 ld bc,2+(GenericButtonTableLenghtPerButton*9)966 ldir968 call .CheckSurrenderButton970 .CheckAutoCombatButton:971 972 ld hl,(HeroThatGetsAttacked) 973 ld a,l974 or h975 ret z977 ld a,(PlayerThatGetsAttacked) 978 ld hl,player1human?-1979 ld d,0980 ld e,a981 add hl,de982 ld a,(hl)983 or a984 ret z 986 xor a987 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a988 ret990 .CheckSurrenderButton:991 992 ld hl,(HeroThatGetsAttacked) 993 ld a,l994 or h995 ret nz997 xor a998 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a999 ret1001BattleButton1Ytop: equ 193 + 161002BattleButton1YBottom: equ BattleButton1Ytop + 0181003BattleButton1XLeft: equ 0021004BattleButton1XRight: equ BattleButton1XLeft + 0181006BattleButton2Ytop: equ 193 + 161007BattleButton2YBottom: equ BattleButton2Ytop + 0181008BattleButton2XLeft: equ 0201009BattleButton2XRight: equ BattleButton2XLeft + 0181011BattleButton3Ytop: equ 193 + 161012BattleButton3YBottom: equ BattleButton3Ytop + 0181013BattleButton3XLeft: equ 0381014BattleButton3XRight: equ BattleButton3XLeft + 0181016BattleButton4Ytop: equ 193 + 161017BattleButton4YBottom: equ BattleButton4Ytop + 0181018BattleButton4XLeft: equ 1801019BattleButton4XRight: equ BattleButton4XLeft + 0181021BattleButton5Ytop: equ 193 + 161022BattleButton5YBottom: equ BattleButton5Ytop + 0181023BattleButton5XLeft: equ 1981024BattleButton5XRight: equ BattleButton5XLeft + 0181026BattleButton6Ytop: equ 193 + 161027BattleButton6YBottom: equ BattleButton6Ytop + 0181028BattleButton6XLeft: equ 2181029BattleButton6XRight: equ BattleButton6XLeft + 0181031BattleButton7Ytop: equ 193 + 161032BattleButton7YBottom: equ BattleButton7Ytop + 0181033BattleButton7XLeft: equ 2361034BattleButton7XRight: equ BattleButton7XLeft + 0181036BattleButton8Ytop: equ 192 + 161037BattleButton8YBottom: equ BattleButton8Ytop + 0101038BattleButton8XLeft: equ 1701039BattleButton8XRight: equ BattleButton8XLeft + 0101041BattleButton9Ytop: equ 192+10 + 161042BattleButton9YBottom: equ BattleButton9Ytop + 0101043BattleButton9XLeft: equ 1701044BattleButton9XRight: equ BattleButton9XLeft + 0101047BattleButtonTableGfxBlock: db LevelUpBlock1048BattleButtonTableAmountOfButtons: db 91049BattleButtonTable: 1050 db %1100 0011 | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (000*128) + (178/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db BattleButton1Ytop,BattleButton1YBottom,BattleButton1XLeft,BattleButton1XRight | dw $0000 + (BattleButton1Ytop*128) + (BattleButton1XLeft/2) - 128 1051 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 128 | db BattleButton2Ytop,BattleButton2YBottom,BattleButton2XLeft,BattleButton2XRight | dw $0000 + (BattleButton2Ytop*128) + (BattleButton2XLeft/2) - 128 1052 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 128 | db BattleButton3Ytop,BattleButton3YBottom,BattleButton3XLeft,BattleButton3XRight | dw $0000 + (BattleButton3Ytop*128) + (BattleButton3XLeft/2) - 1281054 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 128 | db BattleButton4Ytop,BattleButton4YBottom,BattleButton4XLeft,BattleButton4XRight | dw $0000 + (BattleButton4Ytop*128) + (BattleButton4XLeft/2) - 1281055 db %1100 0011 | dw $4000 + (018*128) + (232/2) - 128 | dw $4000 + (036*128) + (160/2) - 128 | dw $4000 + (036*128) + (178/2) - 128 | db BattleButton5Ytop,BattleButton5YBottom,BattleButton5XLeft,BattleButton5XRight | dw $0000 + (BattleButton5Ytop*128) + (BattleButton5XLeft/2) - 1281056 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 | db BattleButton6Ytop,BattleButton6YBottom,BattleButton6XLeft,BattleButton6XRight | dw $0000 + (BattleButton6Ytop*128) + (BattleButton6XLeft/2) - 1281057 db %1100 0011 | dw $4000 + (054*128) + (214/2) - 128 | dw $4000 + (054*128) + (232/2) - 128 | dw $4000 + (072*128) + (160/2) - 128 | db BattleButton7Ytop,BattleButton7YBottom,BattleButton7XLeft,BattleButton7XRight | dw $0000 + (BattleButton7Ytop*128) + (BattleButton7XLeft/2) - 12810581059 db %1100 0011 | dw $4000 + (090*128) + (160/2) - 128 | dw $4000 + (090*128) + (170/2) - 128 | dw $4000 + (090*128) + (180/2) - 128 | db BattleButton8Ytop,BattleButton8YBottom,BattleButton8XLeft,BattleButton8XRight | dw $0000 + (BattleButton8Ytop*128) + (BattleButton8XLeft/2) - 1281060 db %1100 0011 | dw $4000 + (100*128) + (160/2) - 128 | dw $4000 + (100*128) + (170/2) - 128 | dw $4000 + (100*128) + (180/2) - 128 | db BattleButton9Ytop,BattleButton9YBottom,BattleButton9XLeft,BattleButton9XRight | dw $0000 + (BattleButton9Ytop*128) + (BattleButton9XLeft/2) - 1281063HandleNecromancy: 1064 ld ix,(plxcurrentheroAddress) 1065 ld a,(ix+HeroSkills+0)1066 call .CheckSkillNecromancy1067 ld a,(ix+HeroSkills+1)1068 call .CheckSkillNecromancy1069 ld a,(ix+HeroSkills+2)1070 call .CheckSkillNecromancy1071 ld a,(ix+HeroSkills+3)1072 call .CheckSkillNecromancy1073 ld a,(ix+HeroSkills+4)1074 call .CheckSkillNecromancy1075 ld a,(ix+HeroSkills+5)1076 call .CheckSkillNecromancy1077 ret1079 .CheckSkillNecromancy:1080 cp 31 1081 jp z,.BasicNecromancyFound1082 cp 32 1083 jp z,.AdvancedNecromancyFound1084 cp 33 1085 jp z,.ExpertNecromancyFound1086 ret1088 .BasicNecromancyFound:1089 call CalculateTotalNumberOfUnitsLostDefender 1090 ld de,10 1091 call DivideBCbyDE 1092 call SetMinimumOf1Unit1093 call SetSkeletonsInHeroUnitSlot 1094 jp HandleSkullOfTheUnborn 1096 .AdvancedNecromancyFound:1097 call CalculateTotalNumberOfUnitsLostDefender 1098 ld de,05 1099 call DivideBCbyDE 1100 call SetMinimumOf1Unit1101 call SetSkeletonsInHeroUnitSlot 1102 jp HandleSkullOfTheUnborn 1104 .ExpertNecromancyFound:1105 call CalculateTotalNumberOfUnitsLostDefender 1106 ld de,03 1107 call DivideBCbyDE 1108 call SetMinimumOf1Unit1109 call SetSkeletonsInHeroUnitSlot 1110 jp HandleSkullOfTheUnborn 1112HandleSkullOfTheUnborn:1113 ld ix,(plxcurrentheroAddress)1114 ld a,(ix+HeroInventory+7) 1115 cp 038 1116 ret nz1118 call CalculateTotalNumberOfUnitsLostDefender 1119 ld de,10 1120 call DivideBCbyDE 1121 call SetMinimumOf1Unit1122 call SetSkeletonsInHeroUnitSlot 1123 ret1125SetMinimumOf1Unit:1126 ld a,b 1127 or c 1128 ret nz1129 inc bc1130 ret1132CalculateTotalNumberOfUnitsLostDefender:1133 ld bc,0 1135 ld iy,ListOfMonstersToPutMonster71136 ld l,(iy+1)1137 ld h,(iy+2) 1138 ld ix,Monster71139 call .CalculateAmountOfUnitsLost1141 ld iy,ListOfMonstersToPutMonster81142 ld l,(iy+1)1143 ld h,(iy+2) 1144 ld ix,Monster81145 call .CalculateAmountOfUnitsLost1147 ld iy,ListOfMonstersToPutMonster91148 ld l,(iy+1)1149 ld h,(iy+2) 1150 ld ix,Monster91151 call .CalculateAmountOfUnitsLost1153 ld iy,ListOfMonstersToPutMonster101154 ld l,(iy+1)1155 ld h,(iy+2) 1156 ld ix,Monster101157 call .CalculateAmountOfUnitsLost1159 ld iy,ListOfMonstersToPutMonster111160 ld l,(iy+1)1161 ld h,(iy+2) 1162 ld ix,Monster111163 call .CalculateAmountOfUnitsLost1165 ld iy,ListOfMonstersToPutMonster121166 ld l,(iy+1)1167 ld h,(iy+2) 1168 ld ix,Monster121169 call .CalculateAmountOfUnitsLost1170 ret1172 .CalculateAmountOfUnitsLost:1173 ld e,(ix+MonsterAmount)1174 ld d,(ix+MonsterAmount+1)1176 or a1177 sbc hl,de 1179 add hl,bc1180 push hl1181 pop bc1182 ret1184SetSkeletonsInHeroUnitSlot:1185 ld d,6 1187 ld ix,(plxcurrentheroAddress) 1188 .loop:1189 ld a,(ix+HeroUnits+0)1190 or a1191 jr z,.EmptyUnitSlotFound1192 cp 25 1193 jr z,.SlotWithSkeletonsFound1194 1195 inc ix1196 inc ix1197 inc ix1198 dec d1199 jr nz,.loop1200 ret1202 .SlotWithSkeletonsFound:1203 ld l,(ix+HeroUnits+1) 1204 ld h,(ix+HeroUnits+2) 1205 add hl,bc1206 ld (ix+HeroUnits+1),l 1207 ld (ix+HeroUnits+2),h 1208 ret1210 .EmptyUnitSlotFound:1211 ld (ix+HeroUnits+0),25 1212 ld (ix+HeroUnits+1),c 1213 ld (ix+HeroUnits+2),b 1214 ret1222HandleProjectileSprite:12231224 dec a1225 jr nz,.HandleProjectile1226 1227 1228 ld a,21229 ld (ShootProjectile?),a 1230 1231 1232 call SetCurrentActiveMOnsterInIX1233 call .SetCharacterAndColor 1235 ld a,(ix+MonsterY)1236 add a,b1237 ld (spat+4*16),a1238 ld (spat+4*17),a1239 ld (spat+4*18),a1241 ld a,(ix+MonsterNX)1242 sub a,161243 srl a1244 add a,(ix+MonsterX)1245 ld (spat+4*16+1),a1246 ld (spat+4*17+1),a1247 ld (spat+4*18+1),a 12481250 .HandleProjectile:1251 call SetCurrentActiveMOnsterInIX1252 ld a,(spat+4*16+1)1253 ld e,a 1254 ld a,(spat+4*16)1255 ld d,a 1257 ld a,(MonsterThatIsBeingAttackedX)1258 ld b,a1259 ld a,(MonsterThatIsBeingAttackedNX)1260 sub a,161261 srl a 1262 add a,b 1263 ld l,a 1265 ld a,(MonsterThatIsBeingAttackedY)1266 ld b,a1267 ld a,(MonsterThatIsBeingAttackedNY)1268 add a,b1269 sub a,161270 ld h,a 1272 1273 ld a,d 1274 cp h 1275 jr nz,.EndCheckEndPointReached1276 ld a,e 1277 cp l 1278 jp z,.EndProjectile1279 .EndCheckEndPointReached:1282 1283 ld a,h1284 sub a,d 1285 jr nc,.notcarry11286 neg1287 .notcarry1:1288 ld c,a 1289 1290 ld a,l1291 sub a,e 1292 jr nc,.notcarry21293 neg1294 .notcarry2:1295 ld b,a 1297 1298 cp c1299 jr c,.MoreVertical1301 .MoreHorizontal:1302 1308 push bc1309 push de1310 ld e,b1311 call Div8 1312 pop de1313 pop bc1314 cp 21315 jr c,.Move2x2y1316 cp 31317 jr c,.Move3x2y1318 cp 41319 jr c,.Move3x1y1320 cp 51321 jr c,.Move4x1y1323 .Move4x1y: 1324 call .MoveX1325 call .MoveX1326 call .MoveX1327 call .MoveX1328 call .MoveY1329 jp .SetCoordinates1331 .Move3x1y: 1332 call .MoveX1333 call .MoveX1334 call .MoveX1335 call .MoveY1336 jp .SetCoordinates1338 .Move3x2y: 1339 call .MoveX1340 call .MoveX1341 call .MoveX1342 call .MoveY1343 call .MoveY1344 jp .SetCoordinates1346 .Move2x2y: 1347 call .MoveX1348 call .MoveX1349 call .MoveY1350 call .MoveY1351 jp .SetCoordinates1353 .MoreVertical:1354 1360 push bc1361 push de1362 ld e,c1363 ld c,b1364 call Div8 1365 pop de1366 pop bc1367 cp 21368 jr c,.Move2y2x1369 cp 31370 jr c,.Move3y2x1371 cp 41372 jr c,.Move3y1x1373 cp 51374 jr c,.Move4y1x1376 .Move4y1x: 1377 call .MoveY1378 call .MoveY1379 call .MoveY1380 call .MoveY1381 call .MoveX1382 jr .SetCoordinates1384 .Move3y1x: 1385 call .MoveY1386 call .MoveY1387 call .MoveY1388 call .MoveX1389 jr .SetCoordinates1391 .Move3y2x: 1392 call .MoveY1393 call .MoveY1394 call .MoveY1395 call .MoveX1396 call .MoveX1397 jr .SetCoordinates1399 .Move2y2x: 1400 call .MoveY1401 call .MoveY1402 call .MoveX1403 call .MoveX1404 jr .SetCoordinates1406 .SetCoordinates:1407 ld a,e 1408 ld (spat+4*16+1),a1409 ld (spat+4*17+1),a1410 ld (spat+4*18+1),a1411 ld a,d 1412 ld (spat+4*16),a1413 ld (spat+4*17),a1414 ld (spat+4*18),a1416 xor a 1417 ld hl,sprcharaddr+(16*32) 1418 call SetVdp_Write1420 ld a,SpritesWeaponsBlock1421 ld ($6000),a 1423 call .SetCharacterAndColor1424 push de 1426 ld c,$981427 call outix96 1429 xor a 1430 ld hl,sprcoladdr+(16*16) 1431 call SetVdp_Write1433 pop hl 1434 ld c,$981435 call outix48 1437 ld a,BattleCodeBlock1438 ld ($6000),a 1439 ret1441 .SetCharacterAndColor:1442 ld a,(ix+MonsterNumber)1443 cp 0071444 ld b,08 1445 jp z,.Bobblun1446 cp 0081447 jp z,.Bubblun1448 cp 0261449 jp z,.AxeMan1450 cp 0351451 jp z,.GeneralBullet1 1452 cp 0361453 ld b,12 1454 jp z,.ContraBullet 1455 cp 0371456 ld b,06 1457 jp z,.ContraBullet 1458 cp 0391459 ld b,04 1460 jp z,.HandGrenade 1461 cp 0401462 ld b,10 1463 jp z,.ContraBullet 1464 cp 0431465 ld b,22 1466 jp z,.ContraBullet 1467 cp 0471468 ld b,12 1469 jp z,.Grenadier 1470 cp 0491471 jp z,.Vanguard 1472 cp 0691473 jp z,.GeneralBullet1 1474 cp 0921475 ld b,08 1476 jp z,.ContraBullet 1477 cp 0931478 jp z,.ContraBullet 1479 cp 0941480 jp z,.ContraBullet 1481 cp 1041482 ld b,16 1483 jp z,.LanFang 1484 cp 1091485 ld b,10 1486 jp z,.HanChen 1487 cp 1101488 jp z,.LiYen 1489 cp 1121490 ld b,06 1491 jp z,.KingMori1492 cp 1131493 jp z,.KnightYama1494 cp 1151495 jp z,.BisshopHeichi1496 cp 1191497 jp z,.PornHeichi1498 cp 1201499 jp z,.YamaKnight1500 cp 1251501 jp z,.GooGoo1502 cp 1291503 jp z,.Screech1504 cp 1441505 ld b,22 1506 jp z,.PastryChef1507 cp 1491508 ld b,06 1509 jp z,.VicViper1510 cp 1531511 jp z,.Andorogynus1512 cp 1581513 jp z,.BisshopHeichi 1514 cp 1591515 jp z,.GeneralBullet1 1516 cp 1681517 jp z,.NinjaKun1518 cp 1831519 ld b,14 1520 jp z,.GeneralBullet1 1521 ret1523 .NinjaKun:1524 call .InvertFrameCounterWhenOnTheRightSide15251529 ld de,6 1530 ld b,01531 ld c,a1532 call DivideBCbyDE 1533 ld a,l1534 srl a 1536 ld hl,SpriteCharNinjaKun + 0*961537 ld de,SpriteColNinjaKun + 0*481538 ret z1539 ld hl,SpriteCharNinjaKun + 1*961540 ld de,SpriteColNinjaKun + 1*481541 dec a1542 ret z1543 ld hl,SpriteCharNinjaKun + 2*961544 ld de,SpriteColNinjaKun + 2*481545 ret1547 .Andorogynus:1548 ld hl,SpriteCharAndorogynus + 0*961549 ld de,SpriteColAndorogynus + 0*481550 ret1552 .VicViper:1553 call .InvertFrameCounterWhenOnTheRightSide15541558 ld de,12 1559 ld b,01560 ld c,a1561 call DivideBCbyDE 1562 ld a,l1563 srl a 1565 ld hl,SpriteCharVicViper + 5*961566 ld de,SpriteColVicViper + 5*481567 ret z1568 ld hl,SpriteCharVicViper + 4*961569 ld de,SpriteColVicViper + 4*481570 dec a1571 ret z1572 ld hl,SpriteCharVicViper + 3*961573 ld de,SpriteColVicViper + 3*481574 dec a1575 ret z1576 ld hl,SpriteCharVicViper + 2*961577 ld de,SpriteColVicViper + 2*481578 dec a1579 ret z1580 ld hl,SpriteCharVicViper + 1*961581 ld de,SpriteColVicViper + 1*481582 dec a1583 ret z1584 ld hl,SpriteCharVicViper + 0*961585 ld de,SpriteColVicViper + 0*481586 dec a1587 ret z1588 ld hl,SpriteCharVicViper + 5*961589 ld de,SpriteColVicViper + 5*481590 dec a1591 ret z1592 ld hl,SpriteCharVicViper + 5*961593 ld de,SpriteColVicViper + 5*481594 ret1596 .PastryChef:1597 ld hl,SpriteCharPastryChef + 0*961598 ld de,SpriteColPastryChef + 0*481599 ld a,(CurrentActiveMonster)1600 cp 71601 ret c1602 ld hl,SpriteCharPastryChef + 1*961603 ld de,SpriteColPastryChef + 1*481604 ret1606 .Screech:1607 ld hl,SpriteCharScreech + 0*961608 ld de,SpriteColScreech + 0*481609 ld a,(CurrentActiveMonster)1610 cp 71611 ret c1612 ld hl,SpriteCharScreech + 1*961613 ld de,SpriteColScreech + 1*481614 ret1616 .GooGoo:1617 ld hl,SpriteCharGooGoo + 0*961618 ld de,SpriteColGooGoo + 0*481619 ld a,(CurrentActiveMonster)1620 cp 71621 ret c1622 ld hl,SpriteCharGooGoo + 1*961623 ld de,SpriteColGooGoo + 1*481624 ret1626 .YamaKnight:1627 call .InvertFrameCounterWhenOnTheRightSide16281629 srl a 1630 and 31631 ld hl,SpriteCharYamaKnight + 0*961632 ld de,SpriteColYamaKnight + 0*481633 ret z1634 ld hl,SpriteCharYamaKnight + 1*961635 ld de,SpriteColYamaKnight + 1*481636 dec a1637 ret z1638 ld hl,SpriteCharYamaKnight + 2*961639 ld de,SpriteColYamaKnight + 2*481640 dec a1641 ret z1642 ld hl,SpriteCharYamaKnight + 3*961643 ld de,SpriteColYamaKnight + 3*481644 ret1646 .PornHeichi:1647 ld hl,SpriteCharPornHeichi + 0*961648 ld de,SpriteColPornHeichi + 0*481649 ld a,(CurrentActiveMonster)1650 cp 71651 ret c1652 ld hl,SpriteCharPornHeichi + 1*961653 ld de,SpriteColPornHeichi + 1*481654 ret1656 .BisshopHeichi:1657 ld hl,SpriteCharBisshopHeichi + 0*961658 ld de,SpriteColBisshopHeichi + 0*481659 ld a,(CurrentActiveMonster)1660 cp 71661 ret c1662 ld hl,SpriteCharBisshopHeichi + 1*961663 ld de,SpriteColBisshopHeichi + 1*481664 ret1666 .KnightYama:1667 ld hl,SpriteCharKnightYama + 0*961668 ld de,SpriteColKnightYama + 0*481669 ret1671 .KingMori:1672 ld a,(framecounter)1673 srl a 1674 and 11675 ld hl,SpriteCharKingMori + 0*961676 ld de,SpriteColKingMori + 0*481677 ret z1678 ld hl,SpriteCharKingMori + 1*961679 ld de,SpriteColKingMori + 1*481680 ret1681 1682 .LiYen:1683 ld a,(framecounter)1684 srl a 1685 and 11686 ld hl,SpriteCharLiYen + 0*961687 ld de,SpriteColLiYen + 0*481688 ret z1689 ld hl,SpriteCharLiYen + 1*961690 ld de,SpriteColLiYen + 1*481691 ret1693 .HanChen:1694 ld hl,SpriteCharHanChen + 0*961695 ld de,SpriteColHanChen + 0*481696 ret1698 .LanFang:1699 call .InvertFrameCounterWhenOnTheRightSide17001702 and 71703 ld hl,SpriteCharLanFang + 0*961704 ld de,SpriteColLanFang + 0*481705 ret z1706 ld hl,SpriteCharLanFang + 1*961707 ld de,SpriteColLanFang + 1*481708 dec a1709 ret z1710 ld hl,SpriteCharLanFang + 2*961711 ld de,SpriteColLanFang + 2*481712 dec a1713 ret z1714 ld hl,SpriteCharLanFang + 3*961715 ld de,SpriteColLanFang + 3*481716 dec a1717 ret z1718 ld hl,SpriteCharLanFang + 4*961719 ld de,SpriteColLanFang + 4*481720 dec a1721 ret z1722 ld hl,SpriteCharLanFang + 5*961723 ld de,SpriteColLanFang + 5*481724 dec a1725 ret z1726 ld hl,SpriteCharLanFang + 6*961727 ld de,SpriteColLanFang + 6*481728 dec a1729 ret z1730 ld hl,SpriteCharLanFang + 7*961731 ld de,SpriteColLanFang + 7*481732 ret1734 .HandGrenade:1735 call .InvertFrameCounterWhenOnTheRightSide17361737 srl a 1738 and 31739 ld hl,SpriteCharHandGrenade + 0*961740 ld de,SpriteColHandGrenade + 0*481741 ret z1742 ld hl,SpriteCharHandGrenade + 1*961743 ld de,SpriteColHandGrenade + 1*481744 dec a1745 ret z1746 ld hl,SpriteCharHandGrenade + 2*961747 ld de,SpriteColHandGrenade + 2*481748 dec a1749 ret z1750 ld hl,SpriteCharHandGrenade + 3*961751 ld de,SpriteColHandGrenade + 3*481752 ret1754 .Vanguard:1755 ld hl,SpriteCharVanguard + 0*961756 ld de,SpriteColVanguard + 0*481757 ld a,(CurrentActiveMonster)1758 cp 71759 ret c1760 ld hl,SpriteCharVanguard + 1*961761 ld de,SpriteColVanguard + 1*481762 ret1764 .Grenadier:1765 ld hl,SpriteCharGrenadier + 0*961766 ld de,SpriteColGrenadier + 0*481767 ld a,(CurrentActiveMonster)1768 cp 71769 ret c1770 ld hl,SpriteCharGrenadier + 1*961771 ld de,SpriteColGrenadier + 1*481772 ret1774 .ContraBullet:1775 ld hl,SpriteCharContraBullet + 0*961776 ld de,SpriteColContraBullet + 0*481777 ld a,(CurrentActiveMonster)1778 cp 71779 ret c1780 ld hl,SpriteCharContraBullet + 1*961781 ld de,SpriteColContraBullet + 1*481782 ret1784 .GeneralBullet1:1785 ld hl,SpriteCharGeneralBullet1 + 0*961786 ld de,SpriteColGeneralBullet1 + 0*481787 ret1789 .AxeMan:1790 call .InvertFrameCounterWhenOnTheRightSide17911792 srl a 1793 and 31794 ld hl,SpriteCharAxeMan + 0*961795 ld de,SpriteColAxeMan + 0*481796 ret z1797 ld hl,SpriteCharAxeMan + 1*961798 ld de,SpriteColAxeMan + 1*481799 dec a1800 ret z1801 ld hl,SpriteCharAxeMan + 2*961802 ld de,SpriteColAxeMan + 2*481803 dec a1804 ret z1805 ld hl,SpriteCharAxeMan + 3*961806 ld de,SpriteColAxeMan + 3*481807 ret1809 .Bubblun:1810 ld hl,SpriteCharBubbleBobble + 0*961811 ld de,SpriteColBubbleBobble + 0*481812 ret1814 .Bobblun:1815 ld hl,SpriteCharBubbleBobble + 1*961816 ld de,SpriteColBubbleBobble + 1*481817 ret1819 .InvertFrameCounterWhenOnTheRightSide:1820 ld a,(CurrentActiveMonster)1821 cp 71822 ld a,(framecounter)1823 ret c1824 neg1825 ret1827 .MoveY:1828 ld a,d 1829 cp h 1830 ret z1831 inc d1832 ret c1833 dec d1834 dec d1835 ret1837 .MoveX:1838 ld a,e 1839 cp l 1840 ret z1841 inc e1842 ret c1843 dec e1844 dec e1845 ret1847.EndProjectile:1848 ld a,213+16 1849 ld (spat+4*16),a1850 ld (spat+4*17),a1851 ld (spat+4*18),a1853 xor a1854 ld (ShootProjectile?),a 1855 ret 1858SpriteCharExplosion:1859 ../sprites/explosions.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 06667 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 9683 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098 db 099 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 0106 db 0107 db 0108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 0122 db 0123 db 0124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 14149 db 19150 db 51151 db 55152 db 60153 db 108154 db 103155 db 43156 db 28157 db 4158 db 3159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 12182 db 28183 db 27184 db 7185 db 55186 db 59187 db 20188 db 7189 db 3190 db 0191 db 0192 db 0193 db 0194 db 0195 db 0196197 db 144198 db 152199 db 152200 db 148201 db 230202 db 246203 db 156204 db 152205 db 144206 db 224207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 0218 db 0219 db 0220 db 0221 db 0222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 96230 db 240231 db 240232 db 104233 db 156234 db 172235 db 112236 db 240237 db 96238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 0253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261262 db 0263 db 0264 db 0265 db 6266 db 13267 db 15268 db 6269 db 0270 db 0271 db 1272 db 3273 db 3274 db 3275 db 7276 db 15277 db 13278 db 0279 db 0280 db 0281 db 0282 db 29283 db 51284 db 103285 db 110286 db 254287 db 252288 db 143289 db 15290 db 28291 db 152292 db 248293 db 248294 db 0295 db 0296 db 0297 db 0298 db 6299 db 6300 db 0301 db 0302 db 0303 db 0304 db 1305 db 1306 db 1307 db 1308 db 6309 db 7310 db 0311 db 0312 db 0313 db 0314 db 0315 db 29316 db 59317 db 55318 db 7319 db 239320 db 244321 db 243322 db 239323 db 239324 db 223325 db 31326327 db 0328 db 0329 db 17330 db 1331 db 192332 db 48333 db 62334 db 31335 db 25336 db 49337 db 241338 db 225339 db 115340 db 63341 db 62342 db 63343 db 0344 db 192345 db 160346 db 32347 db 192348 db 0349 db 0350 db 0351 db 128352 db 128353 db 128354 db 128355 db 192356 db 96357 db 32358 db 96359 db 0360 db 0361 db 0362 db 0363 db 0364 db 192365 db 224366 db 246367 db 247368 db 239369 db 223370 db 63371 db 222372 db 205373 db 227374 db 237375 db 0376 db 0377 db 192378 db 192379 db 0380 db 0381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 128388 db 192389 db 192390 db 192391392 db 13393 db 15394 db 7395 db 7396 db 7397 db 3398 db 1399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 156409 db 63410 db 31411 db 254412 db 248413 db 220414 db 200415 db 127416 db 8417 db 6418 db 13419 db 9420 db 6421 db 0422 db 0423 db 0424 db 6425 db 5426 db 1427 db 2428 db 3429 db 1430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 239441 db 223442 db 230443 db 217444 db 31445 db 111446 db 55447 db 0448 db 7449 db 0450 db 6451 db 6452 db 0453 db 0454 db 0455 db 0456457 db 115458 db 231459 db 207460 db 253461 db 127462 db 207463 db 156464 db 24465 db 224466 db 112467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 192474 db 0475 db 144476 db 128477 db 128478 db 0479 db 0480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486 db 0487 db 0488 db 0489 db 222490 db 188491 db 125492 db 187493 db 198494 db 184495 db 120496 db 224497 db 0498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 128506 db 0507 db 0508 db 0509 db 0510 db 0511 db 0512 db 0513 db 0514 db 0515 db 0516 db 0517 db 0518 db 0519 db 0520 db 0521522 db 0523 db 0524 db 0525 db 0526 db 0527 db 0528 db 0529 db 1530 db 3531 db 7532 db 15533 db 11534 db 11535 db 8536 db 6537 db 1538 db 0539 db 0540 db 0541 db 128542 db 3543 db 12544 db 124545 db 200546 db 141547 db 71548 db 62549 db 156550 db 251551 db 234552 db 79553 db 246554 db 0555 db 0556 db 0557 db 1558 db 2559 db 0560 db 0561 db 0562 db 0563 db 2564 db 6565 db 6566 db 6567 db 7568 db 1569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 3576 db 15577 db 63578 db 255579 db 252580 db 251581 db 247582 db 110583 db 21584 db 176585 db 8586587 db 0588 db 0589 db 0590 db 1591 db 192592 db 48593 db 62594 db 19595 db 177596 db 226597 db 124598 db 57599 db 223600 db 87601 db 242602 db 111603 db 0604 db 0605 db 0606 db 0607 db 0608 db 0609 db 0610 db 128611 db 192612 db 224613 db 240614 db 208615 db 208616 db 16617 db 96618 db 128619 db 0620 db 0621 db 0622 db 0623 db 0624 db 192625 db 240626 db 252627 db 255628 db 63629 db 223630 db 239631 db 118632 db 168633 db 13634 db 16635 db 0636 db 0637 db 0638 db 128639 db 64640 db 0641 db 0642 db 0643 db 0644 db 64645 db 96646 db 96647 db 96648 db 224649 db 128650 db 0651652 db 8653 db 0654 db 0655 db 0656 db 0657 db 8658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 40669 db 97670 db 4671 db 129672 db 42673 db 6674 db 2675 db 1676 db 0677 db 0678 db 0679 db 0680 db 0681 db 0682 db 0683 db 0684 db 0685 db 8686 db 4687 db 0688 db 0689 db 0690 db 0691 db 0692 db 0693 db 0694 db 0695 db 0696 db 0697 db 0698 db 0699 db 0700 db 16701 db 0702 db 0703 db 8704 db 65705 db 3706 db 1707 db 0708 db 0709 db 0710 db 0711 db 0712 db 0713 db 0714 db 0715 db 0716717 db 20718 db 134719 db 32720 db 129721 db 84722 db 96723 db 64724 db 128725 db 0726 db 0727 db 0728 db 0729 db 0730 db 0731 db 0732 db 0733 db 16734 db 0735 db 0736 db 0737 db 0738 db 16739 db 0740 db 0741 db 0742 db 0743 db 0744 db 0745 db 0746 db 0747 db 0748 db 0749 db 8750 db 0751 db 0752 db 16753 db 130754 db 192755 db 128756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 16767 db 32768 db 0769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777 db 0778 db 0779 db 0780 db 0781782 db 0783 db 0784 db 0785 db 1786 db 51787 db 66788 db 2789 db 0790 db 13791 db 18792 db 54793 db 18794 db 12795 db 0796 db 2797 db 3798 db 0799 db 15800 db 113801 db 249802 db 208803 db 201804 db 127805 db 44806 db 99807 db 0808 db 0809 db 0810 db 0811 db 0812 db 0813 db 64814 db 0815 db 0816 db 0817 db 0818 db 32819 db 65820 db 1821 db 1822 db 0823 db 12824 db 28825 db 12826 db 0827 db 0828 db 1829 db 0830 db 0831 db 0832 db 14833 db 127834 db 255835 db 255836 db 255837 db 211838 db 128839 db 0840 db 0841 db 0842 db 0843 db 0844 db 0845 db 0846847 db 0848 db 240849 db 142850 db 159851 db 11852 db 147853 db 254854 db 52855 db 198856 db 0857 db 0858 db 0859 db 0860 db 0861 db 0862 db 2863 db 0864 db 0865 db 0866 db 128867 db 204868 db 66869 db 64870 db 0871 db 176872 db 72873 db 108874 db 72875 db 48876 db 0877 db 64878 db 192879 db 0880 db 0881 db 112882 db 254883 db 255884 db 255885 db 255886 db 203887 db 1888 db 0889 db 0890 db 0891 db 0892 db 0893 db 0894 db 0895 db 0896 db 0897 db 0898 db 0899 db 4900 db 130901 db 128902 db 128903 db 0904 db 48905 db 56906 db 48907 db 0908 db 0909 db 128910 db 0911912 db 0913 db 0914 db 0915 db 0916 db 0917 db 0918 db 0919 db 0920 db 0921 db 0922 db 0923 db 0924 db 0925 db 0926 db 0927 db 0928 db 0929 db 0930 db 0931 db 0932 db 0933 db 0934 db 0935 db 0936 db 0937 db 0938 db 0939 db 0940 db 0941 db 0942 db 0943 db 0944 db 0945 db 0946 db 0947 db 0948 db 0949 db 0950 db 0951 db 0952 db 0953 db 0954 db 0955 db 0956 db 0957 db 0958 db 0959 db 0960 db 0961 db 0962 db 0963 db 0964 db 0965 db 0966 db 0967 db 0968 db 0969 db 0970 db 0971 db 0972 db 0973 db 0974 db 0975 db 0976977 db 0978 db 0979 db 0980 db 0981 db 0982 db 0983 db 0984 db 0985 db 0986 db 0987 db 0988 db 0989 db 0990 db 0991 db 0992 db 0993 db 0994 db 0995 db 0996 db 0997 db 0998 db 0999 db 01000 db 01001 db 01002 db 01003 db 01004 db 01005 db 01006 db 01007 db 01008 db 01009 db 01010 db 01011 db 01012 db 01013 db 01014 db 01015 db 01016 db 01017 db 01018 db 01019 db 01020 db 01021 db 01022 db 01023 db 01024 db 01025 db 01026 db 01027 db 01028 db 01029 db 01030 db 01031 db 01032 db 01033 db 01034 db 01035 db 01036 db 01037 db 01038 db 01039 db 01040 db 010411042 db 01043 db 01044 db 01045 db 01046 db 21047 db 11048 db 01049 db 81050 db 161051 db 01052 db 01053 db 01054 db 01055 db 01056 db 01057 db 01058 db 01059 db 01060 db 121061 db 821062 db 331063 db 21064 db 321065 db 1281066 db 01067 db 01068 db 01069 db 01070 db 01071 db 01072 db 01073 db 01074 db 01075 db 01076 db 01077 db 321078 db 01079 db 21080 db 01081 db 161082 db 01083 db 01084 db 01085 db 01086 db 01087 db 01088 db 01089 db 01090 db 01091 db 01092 db 01093 db 121094 db 641095 db 11096 db 641097 db 01098 db 01099 db 01100 db 01101 db 01102 db 01103 db 01104 db 01105 db 011061107 db 01108 db 01109 db 481110 db 741111 db 1321112 db 641113 db 41114 db 11115 db 01116 db 01117 db 01118 db 01119 db 01120 db 01121 db 01122 db 01123 db 01124 db 01125 db 01126 db 01127 db 641128 db 1281129 db 01130 db 161131 db 81132 db 01133 db 01134 db 01135 db 01136 db 01137 db 01138 db 01139 db 01140 db 01141 db 01142 db 481143 db 21144 db 1281145 db 21146 db 01147 db 01148 db 01149 db 01150 db 01151 db 01152 db 01153 db 01154 db 01155 db 01156 db 01157 db 01158 db 41159 db 01160 db 641161 db 01162 db 81163 db 01164 db 01165 db 01166 db 01167 db 01168 db 01169 db 01170 db 011711172 db 01173 db 01174 db 01175 db 01176 db 01177 db 01178 db 01179 db 01180 db 01181 db 01182 db 01183 db 01184 db 01185 db 01186 db 01187 db 01188 db 01189 db 01190 db 01191 db 01192 db 01193 db 01194 db 01195 db 01196 db 01197 db 01198 db 01199 db 01200 db 01201 db 01202 db 01203 db 01204 db 01205 db 01206 db 01207 db 01208 db 01209 db 01210 db 01211 db 01212 db 01213 db 01214 db 01215 db 01216 db 01217 db 01218 db 01219 db 01220 db 01221 db 01222 db 01223 db 01224 db 01225 db 01226 db 01227 db 01228 db 01229 db 01230 db 01231 db 01232 db 01233 db 01234 db 01235 db 012361237 db 01238 db 01239 db 01240 db 01241 db 01242 db 01243 db 01244 db 01245 db 01246 db 01247 db 01248 db 01249 db 01250 db 01251 db 01252 db 01253 db 01254 db 01255 db 01256 db 01257 db 01258 db 01259 db 01260 db 01261 db 01262 db 01263 db 01264 db 01265 db 01266 db 01267 db 01268 db 01269 db 01270 db 01271 db 01272 db 01273 db 01274 db 01275 db 01276 db 01277 db 01278 db 01279 db 01280 db 01281 db 01282 db 01283 db 01284 db 01285 db 01286 db 01287 db 01288 db 01289 db 01290 db 01291 db 01292 db 01293 db 01294 db 01295 db 01296 db 01297 db 01298 db 01299 db 01300 db 013011302 db 01303 db 01304 db 01305 db 01306 db 141307 db 311308 db 511309 db 551310 db 601311 db 1081312 db 1031313 db 631314 db 281315 db 41316 db 31317 db 01318 db 01319 db 01320 db 01321 db 961322 db 1441323 db 1521324 db 1521325 db 2521326 db 2301327 db 2461328 db 1561329 db 1521330 db 2401331 db 2241332 db 01333 db 01334 db 01335 db 01336 db 01337 db 01338 db 01339 db 121340 db 281341 db 271342 db 71343 db 551344 db 591345 db 201346 db 71347 db 31348 db 01349 db 01350 db 01351 db 01352 db 01353 db 01354 db 961355 db 2401356 db 2401357 db 1041358 db 1561359 db 1721360 db 1121361 db 2401362 db 961363 db 01364 db 01365 db 013661367 db 01368 db 71369 db 251370 db 1211371 db 1211372 db 2071373 db 2061374 db 771375 db 501376 db 11377 db 01378 db 01379 db 21380 db 31381 db 01382 db 01383 db 01384 db 2241385 db 1521386 db 1581387 db 1581388 db 2431389 db 1151390 db 1781391 db 761392 db 1281393 db 321394 db 961395 db 01396 db 01397 db 01398 db 1281399 db 01400 db 01401 db 61402 db 151403 db 471404 db 1181405 db 1201406 db 481407 db 11408 db 01409 db 01410 db 01411 db 11412 db 01413 db 01414 db 01415 db 01416 db 01417 db 961418 db 2401419 db 2441420 db 1101421 db 301422 db 121423 db 1281424 db 01425 db 641426 db 01427 db 01428 db 01429 db 01430 db 014311432 db 41433 db 101434 db 41435 db 641436 db 1601437 db 651438 db 01439 db 41440 db 21441 db 01442 db 01443 db 01444 db 11445 db 01446 db 01447 db 01448 db 321449 db 801450 db 321451 db 21452 db 51453 db 1301454 db 01455 db 01456 db 01457 db 641458 db 1281459 db 01460 db 01461 db 01462 db 01463 db 01464 db 01465 db 41466 db 01467 db 01468 db 641469 db 01470 db 01471 db 21472 db 01473 db 01474 db 01475 db 01476 db 01477 db 01478 db 01479 db 01480 db 01481 db 321482 db 01483 db 01484 db 21485 db 01486 db 01487 db 01488 db 01489 db 1281490 db 01491 db 01492 db 01493 db 01494 db 01495 db 014961497 db 41498 db 321499 db 01500 db 01501 db 1281502 db 11503 db 01504 db 01505 db 21506 db 01507 db 01508 db 01509 db 01510 db 01511 db 01512 db 01513 db 321514 db 41515 db 01516 db 01517 db 11518 db 01519 db 641520 db 01521 db 01522 db 01523 db 01524 db 1281525 db 01526 db 01527 db 01528 db 01529 db 01530 db 01531 db 01532 db 01533 db 01534 db 01535 db 01536 db 01537 db 01538 db 01539 db 01540 db 01541 db 01542 db 01543 db 01544 db 01545 db 01546 db 01547 db 01548 db 01549 db 01550 db 01551 db 01552 db 01553 db 01554 db 01555 db 01556 db 01557 db 01558 db 01559 db 01560 db 01561BattleCodePage2.asm1860SpriteColorExplosion:1861 ../sprites/explosions.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 2553435 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550 db 951 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 25558 db 25559 db 25560 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 2556768 db 969 db 970 db 971 db 972 db 973 db 974 db 975 db 976 db 977 db 978 db 979 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 7586 db 7487 db 7488 db 7489 db 7490 db 7491 db 7592 db 7493 db 7594 db 25595 db 25596 db 25597 db 25598 db 25599 db 255100101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 9109 db 9110 db 9111 db 255112 db 255113 db 255114 db 255115 db 255116 db 255117 db 75118 db 74119 db 74120 db 75121 db 74122 db 74123 db 74124 db 74125 db 75126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133134 db 255135 db 255136 db 255137 db 9138 db 9139 db 9140 db 9141 db 9142 db 9143 db 9144 db 9145 db 9146 db 9147 db 9148 db 9149 db 9150 db 255151 db 255152 db 255153 db 255154 db 74155 db 74156 db 74157 db 74158 db 74159 db 74160 db 74161 db 74162 db 74163 db 74164 db 74165 db 74166167 db 255168 db 9169 db 9170 db 9171 db 9172 db 9173 db 9174 db 9175 db 9176 db 9177 db 9178 db 9179 db 9180 db 9181 db 9182 db 9183 db 255184 db 255185 db 74186 db 75187 db 255188 db 75189 db 74190 db 74191 db 74192 db 74193 db 74194 db 74195 db 74196 db 74197 db 74198 db 74199200 db 9201 db 9202 db 9203 db 9204 db 9205 db 9206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 255214 db 255215 db 255216 db 74217 db 74218 db 74219 db 74220 db 74221 db 74222 db 75223 db 255224 db 75225 db 255226 db 74227 db 75228 db 255229 db 255230 db 255231 db 255232233 db 9234 db 9235 db 9236 db 9237 db 9238 db 9239 db 9240 db 9241 db 9242 db 9243 db 255244 db 255245 db 255246 db 255247 db 255248 db 255249 db 74250 db 74251 db 74252 db 74253 db 74254 db 74255 db 74256 db 75257 db 255258 db 255259 db 255260 db 255261 db 255262 db 255263 db 255264 db 255265266 db 255267 db 255268 db 255269 db 9270 db 9271 db 9272 db 9273 db 9274 db 9275 db 9276 db 9277 db 9278 db 9279 db 9280 db 9281 db 9282 db 255283 db 255284 db 255285 db 75286 db 75287 db 75288 db 74289 db 74290 db 74291 db 74292 db 74293 db 74294 db 74295 db 75296 db 75297 db 75298299 db 255300 db 255301 db 255302 db 9303 db 9304 db 9305 db 9306 db 9307 db 9308 db 9309 db 9310 db 9311 db 9312 db 9313 db 9314 db 9315 db 255316 db 255317 db 255318 db 75319 db 75320 db 75321 db 74322 db 74323 db 74324 db 74325 db 74326 db 74327 db 74328 db 75329 db 75330 db 75331332 db 9333 db 9334 db 9335 db 9336 db 9337 db 9338 db 9339 db 9340 db 255341 db 255342 db 255343 db 255344 db 255345 db 255346 db 255347 db 255348 db 75349 db 75350 db 75351 db 75352 db 75353 db 74354 db 75355 db 255356 db 255357 db 255358 db 255359 db 255360 db 255361 db 255362 db 255363 db 255364365 db 9366 db 9367 db 9368 db 9369 db 9370 db 9371 db 9372 db 9373 db 255374 db 255375 db 255376 db 255377 db 255378 db 255379 db 255380 db 255381 db 75382 db 75383 db 75384 db 75385 db 75386 db 74387 db 75388 db 255389 db 255390 db 255391 db 255392 db 255393 db 255394 db 255395 db 255396 db 255397398 db 255399 db 9400 db 9401 db 9402 db 9403 db 9404 db 9405 db 9406 db 9407 db 9408 db 9409 db 9410 db 9411 db 255412 db 9413 db 9414 db 255415 db 255416 db 75417 db 74418 db 74419 db 74420 db 74421 db 75422 db 75423 db 74424 db 74425 db 75426 db 255427 db 255428 db 75429 db 255430431 db 255432 db 9433 db 9434 db 9435 db 9436 db 9437 db 9438 db 9439 db 9440 db 9441 db 9442 db 9443 db 9444 db 255445 db 9446 db 9447 db 255448 db 255449 db 75450 db 74451 db 74452 db 74453 db 74454 db 75455 db 75456 db 74457 db 74458 db 75459 db 255460 db 255461 db 75462 db 255463464 db 255465 db 255466 db 255467 db 255468 db 255469 db 255470 db 255471 db 255472 db 255473 db 255474 db 255475 db 255476 db 255477 db 255478 db 255479 db 255480 db 255481 db 255482 db 255483 db 255484 db 255485 db 255486 db 255487 db 255488 db 255489 db 255490 db 255491 db 255492 db 255493 db 255494 db 255495 db 255496497 db 255498 db 255499 db 255500 db 255501 db 255502 db 255503 db 255504 db 255505 db 255506 db 255507 db 255508 db 255509 db 255510 db 255511 db 255512 db 255513 db 255514 db 255515 db 255516 db 255517 db 255518 db 255519 db 255520 db 255521 db 255522 db 255523 db 255524 db 255525 db 255526 db 255527 db 255528 db 255529530 db 255531 db 255532 db 9533 db 9534 db 9535 db 9536 db 9537 db 9538 db 9539 db 255540 db 255541 db 255542 db 255543 db 255544 db 255545 db 255546 db 255547 db 255548 db 255549 db 75550 db 75551 db 75552 db 75553 db 75554 db 255555 db 255556 db 255557 db 255558 db 255559 db 255560 db 255561 db 255562563 db 255564 db 255565 db 9566 db 9567 db 9568 db 9569 db 9570 db 9571 db 9572 db 255573 db 255574 db 255575 db 255576 db 255577 db 255578 db 255579 db 255580 db 255581 db 255582 db 75583 db 75584 db 75585 db 75586 db 75587 db 255588 db 255589 db 255590 db 255591 db 255592 db 255593 db 255594 db 255595596 db 255597 db 255598 db 255599 db 255600 db 255601 db 255602 db 255603 db 255604 db 255605 db 255606 db 255607 db 255608 db 255609 db 255610 db 255611 db 255612 db 255613 db 255614 db 255615 db 255616 db 255617 db 255618 db 255619 db 255620 db 255621 db 255622 db 255623 db 255624 db 255625 db 255626 db 255627 db 255628629 db 255630 db 255631 db 255632 db 255633 db 255634 db 255635 db 255636 db 255637 db 255638 db 255639 db 255640 db 255641 db 255642 db 255643 db 255644 db 255645 db 255646 db 255647 db 255648 db 255649 db 255650 db 255651 db 255652 db 255653 db 255654 db 255655 db 255656 db 255657 db 255658 db 255659 db 255660 db 255661662 db 255663 db 255664 db 255665 db 9666 db 9667 db 9668 db 9669 db 9670 db 9671 db 9672 db 9673 db 9674 db 9675 db 9676 db 9677 db 255678 db 255679 db 255680 db 255681 db 255682 db 75683 db 74684 db 74685 db 74686 db 74687 db 74688 db 74689 db 74690 db 74691 db 75692 db 255693 db 255694695 db 255696 db 9697 db 9698 db 9699 db 9700 db 9701 db 9702 db 9703 db 9704 db 9705 db 9706 db 9707 db 9708 db 9709 db 255710 db 9711 db 255712 db 255713 db 75714 db 74715 db 74716 db 74717 db 74718 db 75719 db 75720 db 255721 db 75722 db 255723 db 75724 db 255725 db 255726 db 255727728 db 9729 db 9730 db 9731 db 9732 db 9733 db 9734 db 255735 db 9736 db 9737 db 9738 db 9739 db 255740 db 9741 db 255742 db 255743 db 255744 db 255745 db 75746 db 255747 db 255748 db 75749 db 255750 db 255751 db 75752 db 255753 db 75754 db 255755 db 255756 db 255757 db 255758 db 255759 db 255760761 db 9762 db 9763 db 255764 db 255765 db 9766 db 9767 db 9768 db 255769 db 9770 db 255771 db 255772 db 9773 db 255774 db 255775 db 255776 db 255777 db 255778 db 255779 db 255780 db 255781 db 255782 db 255783 db 255784 db 255785 db 255786 db 255787 db 255788 db 255789 db 255790 db 255791 db 255792 db 255793BattleCodePage2.asm1863SpriteCharBeingHit:1864 incbin "../sprites/sprconv FOR SINGLE SPRITES/BeingHitSprite.spr"1865SpriteColorBeingHit:1866 ds 16,colorred| ds 16,colorsnowishwhite+64 | ds 16,colorwhite+641868HandleExplosionSprite:18691872 dec a1873 jp z,BeingHitSprite1875 ld a,(MonsterThatIsBeingAttackedNX)1876 cp 171877 jp c,SmallExplosionSprite1878 jp BigExplosionSprite1880 BeingHitSprite:1881 ld a,(MonsterThatIsBeingAttackedY)1882 ld b,a1883 ld a,(MonsterThatIsBeingAttackedNY)1884 add a,b 1885 sub a,161886 ld (spat+4*16),a1887 ld (spat+4*17),a1888 ld (spat+4*18),a1890 1895 ld a,(MonsterThatIsBeingAttackedX)1896 ld b,a1897 ld a,(MonsterThatIsBeingAttackedNX)1898 sub a,161899 srl a 1900 add a,b 1901 ld (spat+4*16+1),a1902 ld (spat+4*17+1),a1903 ld (spat+4*18+1),a1905 xor a 1906 ld hl,sprcharaddr+(16*32) 1907 call SetVdp_Write1909 ld a,(ExplosionSpriteStep)1910 cp 21911 ld hl,SpriteCharBeingHit + 0*961912 jr c,.CharFound1913 cp 41914 ld hl,SpriteCharBeingHit + 1*961915 jr c,.CharFound1916 ld hl,SpriteCharBeingHit + 2*961917 .CharFound:1918 ld c,$981919 call outix96 1921 xor a 1922 ld hl,sprcoladdr+(16*16) 1923 call SetVdp_Write1925 ld hl,SpriteColorBeingHit1926 ld c,$981927 call outix48 1929 ld a,(ExplosionSpriteStep)1930 inc a1931 ld (ExplosionSpriteStep),a1932 cp 61933 ret c1934 1935 ld a,213+16 1936 ld (spat+4*16),a1937 ld (spat+4*17),a1938 ld (spat+4*18),a1940 xor a1941 ld (ShowExplosionSprite?),a 1942 ret 1944 SmallExplosionSprite:1945 ld a,(MonsterThatIsBeingAttackedY)1946 ld b,a1947 ld a,(MonsterThatIsBeingAttackedNY)1948 add a,b 1949 sub a,161950 ld (spat+4*16),a1951 ld (spat+4*17),a1953 1958 ld a,(MonsterThatIsBeingAttackedX)1959 ld b,a1960 ld a,(MonsterThatIsBeingAttackedNX)1961 sub a,161962 srl a 1963 add a,b 1964 ld (spat+4*16+1),a1965 ld (spat+4*17+1),a1967 xor a 1968 ld hl,sprcharaddr+(16*32) 1969 call SetVdp_Write1971 ld a,(ExplosionSpriteStep)1972 cp 41973 ld hl,SpriteCharExplosion + 0*64 + 5*2561974 jr c,.CharFound1975 cp 81976 ld hl,SpriteCharExplosion + 1*64 + 5*2561977 jr c,.CharFound1978 cp 121979 ld hl,SpriteCharExplosion + 2*64 + 5*2561980 jr c,.CharFound1981 ld hl,SpriteCharExplosion + 3*64 + 5*2561982 .CharFound:1983 ld c,$981984 call outix64 1986 xor a 1987 ld hl,sprcoladdr+(16*16) 1988 call SetVdp_Write1990 ld a,(ExplosionSpriteStep)1991 cp 41992 ld hl,SpriteColorExplosion + 0*32 + 5*1281993 jr c,.ColorFound1994 cp 81995 ld hl,SpriteColorExplosion + 1*32 + 5*1281996 jr c,.ColorFound1997 cp 121998 ld hl,SpriteColorExplosion + 2*32 + 5*1281999 jr c,.ColorFound2000 ld hl,SpriteColorExplosion + 3*32 + 5*1282001 .ColorFound:2002 ld c,$982003 call outix32 2005 ld a,(ExplosionSpriteStep)2006 inc a2007 ld (ExplosionSpriteStep),a2008 cp 162009 ret c2010 2011 ld a,213+16 2012 ld (spat+4*16),a2013 ld (spat+4*17),a2014 ld (spat+4*18),a2016 xor a2017 ld (ShowExplosionSprite?),a 2018 ret2020 BigExplosionSprite:2021 ld a,(MonsterThatIsBeingAttackedY)2022 ld b,a2023 ld a,(MonsterThatIsBeingAttackedNY)2024 add a,b 2025 sub a,322026 ld (spat+4*16),a2027 ld (spat+4*17),a2028 ld (spat+4*18),a2029 ld (spat+4*19),a2030 add a,162031 ld (spat+4*20),a2032 ld (spat+4*21),a2033 ld (spat+4*22),a2034 ld (spat+4*23),a2036 2040 ld a,(MonsterThatIsBeingAttackedX)2041 ld b,a2042 ld a,(MonsterThatIsBeingAttackedNX)2043 sub a,322044 srl a 2045 add a,b 2046 ld (spat+4*16+1),a2047 ld (spat+4*17+1),a2048 ld (spat+4*20+1),a2049 ld (spat+4*21+1),a 2050 add a,162051 ld (spat+4*18+1),a2052 ld (spat+4*19+1),a2053 ld (spat+4*22+1),a2054 ld (spat+4*23+1),a2056 xor a 2057 ld hl,sprcharaddr+(16*32) 2058 call SetVdp_Write2060 ld a,(ExplosionSpriteStep)2061 cp 42062 ld hl,SpriteCharExplosion + 0*2562063 jr c,.CharFound2064 cp 82065 ld hl,SpriteCharExplosion + 1*2562066 jr c,.CharFound2067 cp 122068 ld hl,SpriteCharExplosion + 2*2562069 jr c,.CharFound2070 cp 162071 ld hl,SpriteCharExplosion + 3*2562072 jr c,.CharFound2073 ld hl,SpriteCharExplosion + 4*2562074 .CharFound:2075 ld c,$982076 call outix256 2078 xor a 2079 ld hl,sprcoladdr+(16*16) 2080 call SetVdp_Write2082 ld a,(ExplosionSpriteStep)2083 cp 42084 ld hl,SpriteColorExplosion + 0*1282085 jr c,.ColorFound2086 cp 82087 ld hl,SpriteColorExplosion + 1*1282088 jr c,.ColorFound2089 cp 122090 ld hl,SpriteColorExplosion + 2*1282091 jr c,.ColorFound2092 cp 162093 ld hl,SpriteColorExplosion + 3*1282094 jr c,.ColorFound2095 ld hl,SpriteColorExplosion + 4*1282096 .ColorFound:2097 ld c,$982098 call outix128 2100 ld a,(ExplosionSpriteStep)2101 inc a2102 ld (ExplosionSpriteStep),a2103 cp 202104 ret c2105 2106 ld a,213+16 2107 ld (spat+4*16),a2108 ld (spat+4*17),a2109 ld (spat+4*18),a2110 ld (spat+4*19),a2111 ld (spat+4*20),a2112 ld (spat+4*21),a2113 ld (spat+4*22),a2114 ld (spat+4*23),a2116 xor a2117 ld (ShowExplosionSprite?),a 2118 ret2120ClearBattleText:2121 ld hl,.BattleTextPointer2122 ld de,BattleTextPointer2123 ld bc,.EndBattleText-.BattleTextPointer2124 ldir2125 ret2127.BattleTextPointer: dw BattleText22128.BattleRound: db 12129.SetBattleText?: db 2 2130.BattleText8: db 0 | dw 0000 | db 0 ,"           ",255 2131.BattleText7: db 0 | dw 0000 | db 0 ,"           ",255 2132.BattleText6: db 0 | dw 0000 | db 0 ,"           ",255 2133.BattleText5: db 0 | dw 0000 | db 0 ,"           ",255 2134.BattleText4: db 0 | dw 0000 | db 0 ,"           ",255 2135.BattleText3: db 0 | dw 0000 | db 0 ,"           ",255 2136.BattleText2: db 0 | dw 0000 | db 0 ,"           ",255 2137.BattleText1: db 5 | dw 0001 | db 0 ,"           ",255 2138.BattleTextQ: db 0 | dw 0000 | db 0 ,"           ",255 2139.EndBattleText:2141SetBattleText:2142 ld a,(LeftOrRightPlayerLostEntireArmy?)2143 or a2144 ret nz2146 ld a,(SetBattleText?)2147 dec a2148 ret m2149 ld (SetBattleText?),a2150 dec a2151 call z,.MoveEveryTextEntry1PositionUp2154 cp 72155 jp z,.EndSetBattleText2157 .SetBattleTextWithoutMovingEntries:2158 call .CleanTextField2160 ld ix,(BattleTextPointer)2161 ld c,195+16 2162 call .SetText2163 ld de,BattleTextQ-BattleText12164 add ix,de2165 ld c,203+16 2166 call .SetText2167 ret2169 .SetText:2170 ld b,060 2172 ld a,(ix) 2173 dec a2174 jp z,.wait2175 dec a2176 jp z,.defend2177 dec a2178 jp z,.DealDamage2179 dec a21802181 dec a2182 jp z,.NextRound 2183 dec a2184 jp z,.EarthBound2185 dec a2186 jp z,.PlateArmor2187 dec a2188 jp z,.Resurrection2189 dec a2190 jp z,.EarthShock2191 dec a2192 jp z,.Curse 2193 dec a2194 jp z,.BlindingFog 2195 dec a2196 jp z,.Implosion2197 dec a2198 jp z,.Sunstrike2199 dec a2200 jp z,.Haste2201 dec a2202 jp z,.ShieldBreaker 2203 dec a2204 jp z,.ClawBack2205 dec a2206 jp z,.SpellBubble2207 dec a2208 jp z,.Cure2209 dec a2210 jp z,.IcePeak2211 dec a2212 jp z,.Hypnosis 2213 dec a2214 jp z,.FrostRing2215 dec a2216 jp z,.MagicArrows2217 dec a2218 jp z,.Frenzy2219 dec a2220 jp z,.Teleport2221 dec a2222 jp z,.PrimalInstinct 2223 ret2225 .PrimalInstinct:2226 call .PutMonsterNameAndLetterS2227 ld hl,.TextPlus3dmgdefspd2228 jp SetText 2229 .TextPlus3dmgdefspd: db "+3 all stats",2552231 .Teleport:2232 call .PutMonsterNameAndLetterS2233 ld hl,.TextTeleported2234 jp SetText 2235 .TextTeleported: db "Teleported",2552237 .Frenzy:2238 call .PutMonsterNameAndLetterS2239 ld hl,.TextFrenzy2240 jp SetText 2241 .TextFrenzy: db "Frenzy",2552243 .MagicArrows:2244 ld hl,.TextMagicArrowsdmg2245 jp .EntryAOESpells2246 .TextMagicArrowsdmg: db "Magic Arrows dmg: ",2552248 .FrostRing:2249 ld hl,.TextFrostRingAOEdmg2250 jp .EntryAOESpells2251 .TextFrostRingAOEdmg: db "Frost Ring AOE dmg: ",2552253 .Hypnosis:2254 call .PutMonsterNameAndLetterS2255 ld hl,.TextHypnotized2256 jp SetText 2257 .TextHypnotized: db "Hypnotized",2552259 .IcePeak:2260 ld hl,.TextIcePeakdmg2261 jp .EntryAOESpells2262 .TextIcePeakdmg: db "Ice Peak dmg: ",2552264 .Cure:2265 call .PutMonsterNameAndLetterS2266 ld hl,.TextCured2267 jp SetText 2268 .TextCured: db "Cured",2552270 .SpellBubble:2271 call .PutMonsterNameAndLetterS2272 ld hl,.TextSpellBubble2273 jp SetText 2274 .TextSpellBubble: db "Spell Bubble",2552276 .ClawBack:2277 call .PutMonsterNameAndLetterS2278 ld hl,.TextClawBack2279 jp SetText 2280 .TextClawBack: db "Claw Back",2552282 .ShieldBreaker:2283 call .PutMonsterNameAndLetterS2284 ld hl,.TextMinus4Defense2285 jp SetText 2286 .TextMinus4Defense: db "-4 def",2552288 .Haste:2289 call .PutMonsterNameAndLetterS2290 ld hl,.TextPlus3Speed2291 jp SetText 2292 .TextPlus3Speed: db "+3 spd",2552294 .Sunstrike:2295 ld hl,.TextSunstrikedmg2296 jp .EntryAOESpells2297 .TextSunstrikedmg: db "Sunstrike dmg: ",2552299 .Implosion:2300 ld hl,.TextImplosionAOEdmg2301 jp .EntryAOESpells2302 .TextImplosionAOEdmg: db "Implosion AOE dmg: ",2552304 .BlindingFog:2305 call .PutMonsterNameAndLetterS2306 ld hl,.TextMinus50PercentDamage2307 jp SetText 2308 .TextMinus50PercentDamage: db "-50% dmg",2552310 .Curse:2311 call .PutMonsterNameAndLetterS2312 ld hl,.TextMinus3Damage2313 jp SetText 2314 .TextMinus3Damage: db "-3 dmg",2552316 .EarthShock:2317 ld hl,.TextEarthShockAOEdmg2318 .EntryAOESpells:2319 push bc2320 call SetText 2321 pop bc2322 ld hl,(AEOSpellDamage)2323 ld a,(PutLetter+dx) 2324 ld b,a 2325 push bc2326 call SetNumber16BitCastle2327 pop bc2328 ret2329 .TextEarthShockAOEdmg: db "Earthshock AOE dmg: ",2552331 .Resurrection:2332 call .PutMonsterNameAndLetterS2333 ld hl,.TextResurrected2334 jp SetText 2335 .TextResurrected: db "Resurrected",2552337 .PlateArmor:2338 call .PutMonsterNameAndLetterS2339 ld hl,.TextPlus5Defense2340 jp SetText 2341 .TextPlus5Defense: db "+5 def",2552343 .EarthBound:2344 call .PutMonsterNameAndLetterS2345 ld hl,.Textminus50PercentSpeed2346 jp SetText 2347 .Textminus50PercentSpeed: db "-50% spd",2552350 .PutMonsterNameAndLetterS:2351 push ix2352 pop hl2353 ld de,42354 add hl,de 2355 push bc2356 call SetText 2357 pop bc23592360 dec hl2361 ld a,(hl)2362 cp "s"2363 ret z 2365 ld a,(ix+3) 2366 dec a2367 ret z 2369 ld hl,.TextLetterS2371 ld a,(PutLetter+dx) 2372 ld b,a 2373 push bc2374 call SetText 2375 pop bc2377 ld a,(PutLetter+dx) 2378 ld b,a 2379 ret2380.TextLetterS: db "s: ",2552397 .NextRound:2398 ld a,(ix+1) 2399 dec a2400 jr z,.CombatStart2402 ld hl,.TextRound2403 push bc2404 call SetText 2405 pop bc2407 ld a,(ix+1) 2408 ld h,02409 ld l,a2410 ld a,(PutLetter+dx) 2411 ld b,a 2412 push bc2413 call SetNumber16BitCastle2414 pop bc2416 ld hl,.TextBegins2417 ld a,(PutLetter+dx) 2418 ld b,a 2420 call SetText 2422 ret2424 .CombatStart:2425 ld hl,.TextCombatStart2426 call SetText 2427 ret2428 2429.TextCombatStart: db "      Combat Start",2552430.TextRound: db "Round ",2552431.TextBegins: db " begins.",2552433 .defend:2434 push ix2435 pop hl2436 ld de,42437 add hl,de 2438 push bc2439 call SetText 2440 pop bc2442 dec hl2443 ld a,(hl)2444 cp "s"2445 ld hl,.TextdefendMultipleUnits2446 jr nz,.EndCheckNameEndsWithS_defend2447 ld hl,.TextdefendMultipleUnits+12448 .EndCheckNameEndsWithS_defend:2450 ld a,(ix+3) 2451 dec a2452 jr nz,.AmountFound22453 ld hl,.TextdefendSingleUnit2454 .AmountFound2:2455 ld a,(PutLetter+dx) 2456 ld b,a 2457 push bc2458 call SetText 2459 pop bc2461 ld hl,.TextdefendOpenPlus2462 ld a,(PutLetter+dx) 2463 add a,22464 ld b,a 2465 push bc2466 call SetText 2467 pop bc2469 ld a,(ix+1) 2470 ld h,02471 ld l,a2472 ld a,(PutLetter+dx) 2473 ld b,a 2474 push bc2475 call SetNumber16BitCastle2476 pop bc2478 ld hl,.Textdef2479 ld a,(PutLetter+dx) 2480 add a,12481 ld b,a 2483 call SetText 2485 ret2487.TextdefendOpenPlus: db "(+",2552488.TextdefendSingleUnit: db " defends.",2552489.TextdefendMultipleUnits: db "s defend.",2552490.Textdef: db "def)",2552492 .wait:2493 ld hl,.TextThe2494 push bc2495 call SetText 2496 pop bc2498 push ix2499 pop hl2500 ld de,42501 add hl,de 2502 ld a,(PutLetter+dx) 2503 ld b,a 2504 push bc2505 call SetText 2506 pop bc2509 dec hl2510 ld a,(hl)2511 cp "s"2512 ld hl,.TextwaitsMultipleUnits2513 jr nz,.EndCheckNameEndsWithS_wait2514 ld hl,.TextwaitsMultipleUnits+12515 .EndCheckNameEndsWithS_wait:2517 ld a,(ix+3) 2518 dec a2519 jr nz,.AmountFound12520 ld hl,.TextwaitsSingleUnit2521 .AmountFound1:2523 ld a,(PutLetter+dx) 2524 ld b,a 2526 call SetText 2528 ret2529.TextThe: db "The ",2552530.TextwaitsSingleUnit: db " waits.",2552531.TextwaitsMultipleUnits: db "s wait.",2552534.DealDamage:2535 push ix2536 pop hl2537 ld de,42538 add hl,de 2539 push bc2540 call SetText 2541 pop bc2544 dec hl2545 ld a,(hl)2546 cp "s"2547 ld hl,.TextdealdamageMultipleUnits2548 jr nz,.EndCheckNameEndsWithS_dealdamage2549 ld hl,.TextdealdamageMultipleUnits+12550 .EndCheckNameEndsWithS_dealdamage:2554 ld a,(ix+3) 2555 dec a2556 jr nz,.AmountFound32557 ld hl,.TextdealdamageSingleUnit2558 .AmountFound3:2560 ld a,(PutLetter+dx) 2561 ld b,a 2562 push bc2563 call SetText 2564 pop bc2566 ld l,(ix+1) 2567 ld h,(ix+2) 2568 ld a,(PutLetter+dx) 2569 ld b,a 2570 push bc2571 call SetNumber16BitCastle2572 pop bc2574 ld hl,.TextsDMG2575 ld a,(PutLetter+dx) 2576 ld b,a 2578 call SetText 2580 ret2581.TextdealdamageSingleUnit: db " deals ",2552582.TextdealdamageMultipleUnits: db "s deal ",2552583.TextsDMG: db " dmg.",2552585.EndSetBattleText:2586 xor a2587 ld (SetBattleText?),a2588 ret2590.MoveEveryTextEntry1PositionUp:2591 ld hl,BattleText72592 ld de,BattleText82593 ld bc,BattleTextQ-BattleText82594 ldir25952597.ResetBattleTextPointer:2598 ld hl,BattleText22599 ld (BattleTextPointer),hl2600 ret2602.CleanTextField:2603 ld hl,$4000 + (195*128) + (060/2) - 1282604 ld de,$0000 + ((195+16)*128) + (060/2) - 1282605 ld bc,$0000 + (014*256) + (118/2)2606 ld a,BattleFieldWinterBlock 2607 jp CopyRamToVramCorrectedCastleOverview 26092610AttackingHeroTakesItemsDefendingHero:2611 ld ix,(plxcurrentheroAddress) 2612 ld iy,(HeroThatGetsAttacked) 2613 push iy2614 pop hl2615 ld a,l2616 or h2617 ret z 2619 ld d,9 + 6 2620 .PassItemLoop:2621 call .PassItem2622 inc ix2623 inc iy2624 dec d2625 jr nz,.PassItemLoop2626 ret2627 2628 .PassItem:2629 ld a,(iy+HeroInventory)2630 cp 045 2631 ret z2632 ld c,a2633 ld a,(ix+HeroInventory)2634 cp 045 2635 jr z,.EmptyBodySlotFound2636 2637 push ix2638 ld ix,(plxcurrentheroAddress) 2639 ld b,6 2640 .loop:2641 ld a,(ix+HeroInventory+9)2642 cp 0452643 jr z,.EmptyOpenSlotFound2644 inc ix2645 djnz .loop2646 pop ix2647 ret2649 .EmptyBodySlotFound:2650 ld (ix+HeroInventory),c2651 ret2652 .EmptyOpenSlotFound:2653 ld (ix+HeroInventory+9),c2654 pop ix2655 ret2657SetSpellExplanation:2658 ld a,b 2659 ld (MenuOptionSelected?Backup),a2661 ld a,12662 ld (SpellExplanationDisplayed?),a2664 xor a 2665 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2667 call .SetDescriptionTexticonCostAndDamage26682673 ld a,1 2674 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2675 ret2686 .SetDescriptionTexticonCostAndDamage:2687 2688 exx2689 ld hl,0 2690 exx2691 ld a,(MenuOptionSelected?Backup)2692 dec a2693 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools12694 ld de,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282695 ld b,CostAllSpellSchools12696 jp z,.GoSetDescriptionTexticonCostAndDamage2698 2702 dec a2703 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools22704 ld de,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282705 ld b,CostAllSpellSchools22706 jp z,.GoSetDescriptionTexticonCostAndDamage2708 2712 dec a2713 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools32714 ld de,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282715 ld b,CostAllSpellSchools32716 jp z,.GoSetDescriptionTexticonCostAndDamage2718 2719 push af2720 exx2721 call GetMagicArrowsDMGAmount 2722 exx2723 pop af2725 dec a2726 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools42727 ld de,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282728 ld b,CostAllSpellSchools42729 jp z,.GoSetDescriptionTexticonCostAndDamage2731 ld a,(SelectedElementInSpellBook) 2732 or a2733 jp z,.SetSpellExplanationEarth2734 dec a2735 jp z,.SetSpellExplanationFire2736 dec a2737 jp z,.SetSpellExplanationAir2738 2739 .SetSpellExplanationWater:2740 2741 exx2742 call GetFrostRingDMGAmount 2743 exx2744 ld a,(MenuOptionSelected?Backup)2745 cp 5 2746 ld hl,SpellDescriptionsBattle.Descriptionwater12747 ld de,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282748 ld b,CostWaterSpell12749 jp z,.GoSetDescriptionTexticonCostAndDamage2751 2752 exx2753 ld hl,0 2754 exx27552756 cp 6 2757 ld hl,SpellDescriptionsBattle.Descriptionwater22758 ld de,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282759 ld b,CostWaterSpell22760 jp z,.GoSetDescriptionTexticonCostAndDamage2762 2763 exx2764 call GetIceBoltDMGAmount 2765 exx2766 ld a,(MenuOptionSelected?Backup)2767 cp 7 2768 ld hl,SpellDescriptionsBattle.Descriptionwater32769 ld de,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282770 ld b,CostWaterSpell32771 jp z,.GoSetDescriptionTexticonCostAndDamage2773 2774 exx2775 call GetCureAmount 2776 exx2777 ld hl,SpellDescriptionsBattle.Descriptionwater42778 ld de,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282779 ld b,CostWaterSpell42780 jp .GoSetDescriptionTexticonCostAndDamage_Cure2782 .SetSpellExplanationAir:2783 2784 exx2785 ld hl,0 2786 exx2787 ld a,(MenuOptionSelected?Backup)2788 cp 5 2789 ld hl,SpellDescriptionsBattle.DescriptionAir12790 ld de,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282791 ld b,CostAirSpell12792 jp z,.GoSetDescriptionTexticonCostAndDamage2794 2795 cp 6 2796 ld hl,SpellDescriptionsBattle.DescriptionAir22797 ld de,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1282798 ld b,CostAirSpell22799 jp z,.GoSetDescriptionTexticonCostAndDamage2801 2802 cp 7 2803 ld hl,SpellDescriptionsBattle.DescriptionAir32804 ld de,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1282805 ld b,CostAirSpell32806 jp z,.GoSetDescriptionTexticonCostAndDamage2808 2809 ld hl,SpellDescriptionsBattle.DescriptionAir42810 ld de,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1282811 ld b,CostAirSpell42812 jp .GoSetDescriptionTexticonCostAndDamage2814 .SetSpellExplanationFire:2815 2816 exx2817 call GetsunstrikeDMGAmount 2818 exx2819 ld a,(MenuOptionSelected?Backup)2820 cp 5 2821 ld hl,SpellDescriptionsBattle.DescriptionFire12822 ld de,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282823 ld b,CostFireSpell12824 jp z,.GoSetDescriptionTexticonCostAndDamage2826 2827 exx2828 call GetimplosionDMGAmount 2829 exx2830 ld a,(MenuOptionSelected?Backup)2831 cp 6 2832 ld hl,SpellDescriptionsBattle.DescriptionFire22833 ld de,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282834 ld b,CostFireSpell22835 jp z,.GoSetDescriptionTexticonCostAndDamage2837 2838 exx2839 ld hl,0 2840 exx2841 ld a,(MenuOptionSelected?Backup)2842 cp 7 2843 ld hl,SpellDescriptionsBattle.DescriptionFire32844 ld de,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282845 ld b,CostFireSpell32846 jp z,.GoSetDescriptionTexticonCostAndDamage2848 2852 ld hl,SpellDescriptionsBattle.DescriptionFire42853 ld de,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282854 ld b,CostFireSpell42855 jp .GoSetDescriptionTexticonCostAndDamage2857 .SetSpellExplanationEarth:2858 2859 exx2860 call GetEarthShockDMGAmount 2861 exx2862 ld a,(MenuOptionSelected?Backup)2863 cp 5 2864 ld hl,SpellDescriptionsBattle.DescriptionEarth12865 ld de,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282866 ld b,CostEarthSpell12867 jp z,.GoSetDescriptionTexticonCostAndDamage2869 2870 exx2871 call GetResurrectionAmount 2872 exx2873 ld a,(MenuOptionSelected?Backup)2874 cp 6 2875 ld hl,SpellDescriptionsBattle.DescriptionEarth22876 ld de,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282877 ld b,CostEarthSpell22878 jp z,.GoSetDescriptionTexticonCostAndDamage_Resurrection2880 2881 exx2882 ld hl,0 2883 exx2884 ld a,(MenuOptionSelected?Backup)2885 cp 7 2886 ld hl,SpellDescriptionsBattle.DescriptionEarth32887 ld de,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282888 ld b,CostEarthSpell32889 jp z,.GoSetDescriptionTexticonCostAndDamage2891 2895 ld hl,SpellDescriptionsBattle.DescriptionEarth42896 ld de,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282897 ld b,CostEarthSpell42898 jp .GoSetDescriptionTexticonCostAndDamage2900 .GoSetDescriptionTexticonCostAndDamage_Resurrection:2901 exx2902 push hl 2903 ld hl,02904 exx2905 call .GoSetDescriptionTexticonCostAndDamage2906 pop hl 2907 push iy2908 ld b,SpellBookX + 0772909 ld c,SpellBookY + 1662910 call SetNumber16BitCastle2911 pop iy2912 ret2914 .GoSetDescriptionTexticonCostAndDamage_Cure:2915 exx2916 push hl 2917 ld hl,02918 exx2919 call .GoSetDescriptionTexticonCostAndDamage2920 pop hl 2921 push iy2922 ld b,SpellBookX + 892923 ld c,SpellBookY + 1732924 call SetNumber16BitCastle2925 pop iy2926 ret2928 .GoSetDescriptionTexticonCostAndDamage:2929 push bc 2930 push de 2931 2932 2933 ld b,SpellBookX + 0302934 ld c,SpellBookY + 1592935 call SetText2936 2937 pop hl 2938 ld de,$0000 + ((SpellBookY + 160) *128) + ((SpellBookX+10)/2)2939 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2940 ld a,SpellBookGraphicsBlock 2941 call CopyRamToVramCorrectedWithoutActivePageSetting 2942 2943 pop bc 2944 push bc2945 .CostAmountFound:2946 ld l,b2947 ld h,02948 ld b,SpellBookX + 1742949 ld c,SpellBookY + 1592950 push iy2951 call SetNumber16BitCastle2952 pop iy2954 ld b,SpellBookX + 1482955 ld c,SpellBookY + 1592956 ld hl,.TextCost2957 call SetText2959 pop bc 2960 .DamageAmountFound:2961 exx 2962 ld a,l2963 or h2964 ret z2965 push iy2966 ld b,SpellBookX + 1682967 ld c,SpellBookY + 17329682970 call SetNumber16BitCastle29712972 pop iy2974 ld b,SpellBookX + 1322975 ld c,SpellBookY + 1732976 ld hl,.TextDamage2977 jp SetText2978 .TextDamage: db "Damage:",2552979 .TextCost: db "Cost:",255 2980 2992SpellDescriptionsBattle:2993.DescriptionEarth4: db "Earthbound",2542994 db "Reduces the speed of the selected",2542995 db "enemy unit by 50%",2552997.DescriptionEarth3: db "Plate Armor",2542998 db "Increases the defense of the selected",2542999 db "friendly unit by 5.",2553001.DescriptionEarth2: db "Resurrection",2543002 db "Reanimates     HP of killed living",2543003 db "friendly creatures.",2553005.DescriptionEarth1: db "Earthshock",2543006 db "Deals damage to all creatures in target",2543007 db "and adjacent hexes.",2553010.DescriptionFire4: db "Curse",2543011 db "Causes the selected enemy unit to deal",2543012 db "-3 damage when attacking.",2553014.DescriptionFire3: db "Blinding Fog",2543015 db "Target ranged unit deals 50% less",2543016 db "damage.",2553018.DescriptionFire2: db "Implosion",2543019 db "Deals damage to enemy unit and",2543020 db "adjecent units.",2553022.DescriptionFire1: db "Sunstrike",2543023 db "Calls down a solar beam to incinerate",2543024 db "a single enemy unit.",2553026.Descriptionair4: db "Haste",2543027 db "Increases the speed of the selected",2543028 db "friendly unit by 3.",2553030.Descriptionair3: db "Shieldbreaker",2543031 db "Reduces the defense of the selected ",2543032 db "enemy unit by 4.",2553034.Descriptionair2: db "Claw Back",2543035 db "Target allied unit has unlimited",2543036 db "retaliations each round.",2553038.Descriptionair1: db "Spell Bubble",2543039 db "Target friendly unit has a 75% chance",2543040 db "to deflect a single enemy spell.",2553043.Descriptionwater4: db "Cure",2543044 db "Removes all negative spell effects",2543045 db "and heals for     HP.",2553047.Descriptionwater3: db "Ice Peak",2543048 db "Conjures an ice shard from the ground,",2543049 db "impaling a single enemy.",2553051.Descriptionwater2: db "Hypnosis",2543052 db "Enemy unit cant attack until attacked,",2543053 db "dispelled or effect wears off.",2553056.Descriptionwater1: db "Frost Ring",2543057 db "Causes damage to all units adjacent to",2543058 db "the central hex.",2553061.DescriptionAllSpellSchools4: db "magic arrows",2543062 db "Unleashes a relentless volley of arrows",2543063 db "at a single enemy unit.",2553065.DescriptionAllSpellSchools3: db "Frenzy",2543066 db "Friendly unit's damage increases by 5",2543067 db "while its defense decreases by 5.",2553069.DescriptionAllSpellSchools2: db "Teleport",2543070 db "Instantaneously displaces an allied",2543071 db "troop to an an unoccupied space.",2553073.DescriptionAllSpellSchools1: db "Primal Instinct",2543074 db "Friendly unit receives +3 damage,",2543075 db "+3 defense and +3 speed.",2553083SetAmountSpellPoints:3084 ld b,100 3085 ld c,168 3086 ld hl,.TextSpellPoints3087 call SetText 3089 call SetCurrentActiveMOnsterInIX3090 3091 push ix3092 pop hl 3093 ld de,Monster73094 call CompareHLwithDE 3095 ld ix,(plxcurrentheroAddress) 3096 jr c,.HeroFound3097 ld ix,(HeroThatGetsAttacked) 3098 .HeroFound:3100 3101 ld l,(ix+HeroMana)3102 ld h,(ix+HeroMana+1)3103 ld b,148 3104 ld c,168 3105 call SetNumber16BitCastle3106 ret3107.TextSpellPoints: db "Spell Points:",2553109SpellBookX: equ 0323110SpellBookY: equ 002+BattleScreenVerticalOffset3111HandleSpellBook:3112 ld a,(SpellBookButtonPressed?)3113 or a3114 ret z3115 ld a,(activepage)3116 or a3117 ret z 3118 xor a3119 ld (SpellBookButtonPressed?),a3120 3121 call SetGraphicsSpellBook3122 call SetAmountSpellPoints3124 3125 call SetCurrentActiveMOnsterInIX 3126 3127 push ix3128 pop hl 3129 ld de,Monster73130 call CompareHLwithDE 3131 ld ix,(plxcurrentheroAddress) 3132 jr c,.HeroFound23133 ld ix,(HeroThatGetsAttacked) 3134 .HeroFound2:3136 call SetGraphicsElementalSpells3137 call SetGraphicsElementalSpells.SetUniversalSpells3138 call LightUpCurrentActiveElementalButton3139 halt 3140 call SwapAndSetPage 3143 .engine:3144 call PopulateControls 3146 3147 ld ix,BattleSpellBookButtonTable3148 ld iy,ButtonTableSpellBookSYSX_Water3149 call CheckButtonMouseInteraction4ElementalButtons3150 ld a,b3151 or a3152 call nz,.ElementalButtonPressed31533154 ld ix,BattleSpellBookButtonTable3155 call .CopyButtons 3159 3160 ld ix,BattleSpellIconButtons3161 ld a,(SelectedElementInSpellBook) 3162 or a3163 ld iy,ButtonTableSpellIconsEarthSYSX3164 jp z,.ElementFound3165 dec a3166 ld iy,ButtonTableSpellIconsFireSYSX3167 jp z,.ElementFound3168 dec a3169 ld iy,ButtonTableSpellIconsAirSYSX3170 jp z,.ElementFound3171 ld iy,ButtonTableSpellIconsWaterSYSX3172 .ElementFound:3173 call .CheckButtonMouseInteraction31743177 ld ix,BattleSpellIconButtons3178 call .CopyButtons 3181 ld a,(NewPrContr)3182 bit 5,a 3183 jp nz,ExitSpellBook3184 call CheckMouseClickOutsideSpellBook 3185 jp .engine3188 .ElementalButtonPressed:3189 ld a,%1000 00113190 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3191 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3192 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3193 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3195 call .HandleSelectedElementButton3197 3198 call SetCurrentActiveMOnsterInIX 3199 3200 push ix3201 pop hl 3202 ld de,Monster73203 call CompareHLwithDE 3204 ld ix,(plxcurrentheroAddress) 3205 jr c,.HeroFound33206 ld ix,(HeroThatGetsAttacked) 3207 .HeroFound3:3209 jp SetGraphicsElementalSpells3211 .HandleSelectedElementButton:3212 ld a,b3213 cp 1 3214 jp z,.Water3215 cp 2 3216 jp z,.AirSelected3217 cp 3 3218 jp z,.FireSelected32193222 .EarthSelected:3223 xor a3224 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3225 ld (SelectedElementInSpellBook),a 3226 ret3228 .FireSelected:3229 xor a3230 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3231 ld a,13232 ld (SelectedElementInSpellBook),a 3233 ret3235 .AirSelected:3236 xor a3237 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3238 ld a,23239 ld (SelectedElementInSpellBook),a 3240 ret3242 .Water:3243 xor a3244 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3245 ld a,33246 ld (SelectedElementInSpellBook),a 3247 ret3251.CopyButtons: 3256 ld b,(ix+HeroOverviewWindowAmountOfButtons)3257 .loop:3258 push bc3259 call .Setbutton3260 pop bc3261 ld de,ButtonTableLenght3262 add ix,de3263 ld de,6 3264 add iy,de3265 djnz .loop3266 ret3268 .Setbutton:3269 bit 0,(ix+HeroOverviewWindowButtonStatus)3270 jr nz,.bit0isSet3271 bit 1,(ix+HeroOverviewWindowButtonStatus)3272 ret z3273 3274 .bit1isSet:3275 res 1,(ix+HeroOverviewWindowButtonStatus)3276 jr .goCopyButton3277 .bit0isSet:3278 res 0,(ix+HeroOverviewWindowButtonStatus) 3279 .goCopyButton:3281 bit 7,(ix+HeroOverviewWindowButtonStatus)3282 ld l,(iy+ButtonOff)3283 ld h,(iy+ButtonOff+1)3284 jr nz,.go 3285 bit 6,(ix+HeroOverviewWindowButtonStatus)3286 ld l,(iy+ButtonMouseOver)3287 ld h,(iy+ButtonMouseOver+1)3288 jr nz,.go 3290 ld l,(iy+ButtonOMouseClicked)3291 ld h,(iy+ButtonOMouseClicked+1)3292 .go:3293 3294 ld e,(ix+HeroOverviewWindowButton_de)3295 ld d,(ix+HeroOverviewWindowButton_de+1)3297 ld c,(ix+Buttonnynx)3298 ld b,(ix+Buttonnynx+1)3300 ld a,SpellBookGraphicsBlock 3301 jp CopyRamToVramCorrectedWithoutActivePageSetting 3318.CheckButtonMouseInteraction:3319 ld b,(ix+HeroOverviewWindowAmountOfButtons)3320 ld de,ButtonTableLenght3322 .loop2:3323 call .check3324 add ix,de3325 djnz .loop23327 ld a,(SpellExplanationDisplayed?) 3328 or a3329 ret z3330 xor a3331 ld (SpellExplanationDisplayed?),a 3333 3338 ld hl,$4000 + (158*128) + (010/2) -1283339 ld de,$0000 + ((SpellBookY+158)*128) + ((SpellBookX+10)/2)3340 ld bc,$0000 + (20*256) + (176/2)3341 ld a,SpellBookGraphicsBlock3342 jp CopyRamToVramCorrectedWithoutActivePageSetting 3343 3344 .check:3345 ld a,(ix+HeroOverviewWindowButtonStatus)3346 or a3347 ret z3348 3349 ld a,(spat+0) 3350 cp (ix+HeroOverviewWindowButtonYtop)3351 jr c,.NotOverButton3352 cp (ix+HeroOverviewWindowButtonYbottom)3353 jr nc,.NotOverButton3354 ld a,(spat+1) 3356 add a,063358 cp (ix+HeroOverviewWindowButtonXleft)3359 jr c,.NotOverButton3360 cp (ix+HeroOverviewWindowButtonXright)3361 jr nc,.NotOverButton3362 3369 ld a,(Controls)3370 bit 4,a 3371 jr nz,.MouseOverButtonAndSpacePressed3372 bit 5,(ix+HeroOverviewWindowButtonStatus) 3373 jr nz,.MenuOptionSelected 3374 .MouseHoverOverButton:3375 pop af 3376 bit 6,(ix+HeroOverviewWindowButtonStatus) 3377 ret nz3378 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113379 push iy3380 push bc3381 ld bc,SFX_MouseOver3382 call RePlayerSFX_PlayCh1_MouseAction3383 pop bc3384 pop iy3385 jp SetSpellExplanation 3387 .MouseOverButtonAndSpacePressed:3388 bit 5,(ix+HeroOverviewWindowButtonStatus) 3389 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3390 ld a,(NewPrContr)3391 bit 4,a 3392 jr z,.MouseHoverOverButton3394 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3395 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113397 push iy3398 push bc3399 ld bc,SFX_MouseClick3400 call RePlayerSFX_PlayCh1_MouseAction3401 pop bc3402 pop iy3404 pop af 3405 ret3407 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3408 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113409 pop af 3410 ret3412 .NotOverButton:3413 bit 5,(ix+HeroOverviewWindowButtonStatus) 3414 jr nz,.buttonIsStillLit3415 bit 6,(ix+HeroOverviewWindowButtonStatus) 3416 ret z3417 .buttonIsStillLit:3418 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113419 pop af 3420 ret3422.MenuOptionSelected:3423 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113425 pop af 3427 ld a,b 3428 ld (SpellSelected?),a 3430 call GetSelectedSpellCost 3431 ld e,a3432 ld d,03433 push de3435 call SetCurrentActiveMOnsterInIX3436 3437 push ix3438 pop hl 3439 ld de,Monster73440 call CompareHLwithDE 3441 ld ix,(plxcurrentheroAddress) 3442 jr c,.HeroFound3443 ld ix,(HeroThatGetsAttacked) 3444 .HeroFound:3446 3447 ld l,(ix+HeroMana)3448 ld h,(ix+HeroMana+1)3449 pop de3450 or a3451 sbc hl,de3452 jr c,.NotEnoughMana3453 pop af 3454 jp ExitSpellBook 3456 .NotEnoughMana:3457 xor a3458 ld (SpellSelected?),a 3459 ret3461CheckButtonMouseInteraction4ElementalButtons:3462 ld b,(ix+HeroOverviewWindowAmountOfButtons)3463 ld de,ButtonTableLenght3465 .loop2:3466 call .check3467 add ix,de3468 djnz .loop23469 ret3470 3471 .check:3472 ld a,(ix+HeroOverviewWindowButtonStatus)3473 or a3474 ret z3475 3476 ld a,(spat+0) 3477 cp (ix+HeroOverviewWindowButtonYtop)3478 jr c,.NotOverButton3479 cp (ix+HeroOverviewWindowButtonYbottom)3480 jr nc,.NotOverButton3481 ld a,(spat+1) 3483 add a,063485 cp (ix+HeroOverviewWindowButtonXleft)3486 jr c,.NotOverButton3487 cp (ix+HeroOverviewWindowButtonXright)3488 jr nc,.NotOverButton3489 3496 ld a,(Controls)3497 bit 4,a 3498 jr nz,.MouseOverButtonAndSpacePressed3499 bit 5,(ix+HeroOverviewWindowButtonStatus) 3500 jr nz,.MenuOptionSelected 3501 .MouseHoverOverButton:3502 bit 6,(ix+HeroOverviewWindowButtonStatus) 3503 ret nz3504 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113506 push iy3507 push bc3508 ld bc,SFX_MouseOver3509 call RePlayerSFX_PlayCh1_MouseAction3510 pop bc3511 pop iy3512 ret3514 .MouseOverButtonAndSpacePressed:3515 bit 5,(ix+HeroOverviewWindowButtonStatus) 3516 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3517 ld a,(NewPrContr)3518 bit 4,a 3519 jr z,.MouseHoverOverButton3521 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3522 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113523 push iy3524 push bc3525 ld bc,SFX_MouseClick3526 call RePlayerSFX_PlayCh1_MouseAction3527 pop bc3528 pop iy3529 ret3530 3531 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3532 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113533 ret3535 .NotOverButton:3536 bit 5,(ix+HeroOverviewWindowButtonStatus) 3537 jr nz,.buttonIsStillLit3538 bit 6,(ix+HeroOverviewWindowButtonStatus) 3539 ret z3540 .buttonIsStillLit:3541 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113542 ret3544.MenuOptionSelected:3545 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113547 ld a,b 3549 pop af 3550 ret3559LightUpCurrentActiveElementalButton:3560 ld a,(SelectedElementInSpellBook) 3561 or a3562 jr z,.Earth3563 dec a3564 jr z,.Fire3565 dec a3566 jr z,.Air3568 .Water:3569 ld a,%0010 00113570 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3571 call .LightUpButton3572 xor a3573 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3574 ret3576 .Air:3577 ld a,%0010 00113578 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3579 call .LightUpButton3580 xor a3581 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3582 ret3584 .Fire:3585 ld a,%0010 00113586 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3587 call .LightUpButton3588 xor a3589 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3590 ret3591 3592 .Earth:3593 ld a,%0010 00113594 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3595 call .LightUpButton3596 xor a3597 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3598 ret3600 .LightUpButton:3601 ld ix,BattleSpellBookButtonTable3602 ld iy,ButtonTableSpellBookSYSX_Water3603 jp HandleSpellBook.CopyButtons 3608CheckMouseClickOutsideSpellBook:3609 ld a,(NewPrContr)3610 bit 4,a 3611 ret z3613 ld a,(spat+0) 3614 cp SpellBookY3615 jr c,.NotOverHeroOverViewSpellBookWindow3616 cp SpellBookY+HeroOverViewSpellBookWindowNY3617 jr nc,.NotOverHeroOverViewSpellBookWindow3618 3619 ld a,(spat+1) 3621 add a,063623 cp SpellBookX3624 jr c,.NotOverHeroOverViewSpellBookWindow3625 cp SpellBookX+HeroOverViewSpellBookWindowNX3626 ret c3628 .NotOverHeroOverViewSpellBookWindow:3629 pop af3631 xor a3632 ld (NewPrContr),a 3634 jp ExitSpellBook3636ExitSpellBook:3637 ld hl,CheckVictoryOrDefeat.CopyPage1toPage03638 call docopy3639 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady3640 call docopy3641 halt 3642 ret3644SetGraphicsElementalSpells:3645 xor a3646 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3647 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3648 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3649 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3651 ld a,(SelectedElementInSpellBook) 3652 or a3653 jp z,.SetEarthSpells3654 dec a3655 jp z,.SetFireSpells3656 dec a3657 jp z,.SetAirSpells3658 jp .SetWaterSpells3660 .EraseElementalSpellLevel1:3661 ld hl,$4000 + ((.HeroOverViewSpell1backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell1backdropDX-SpellBookX)/2) -1283662 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3663 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3664 ld a,SpellBookGraphicsBlock 3665 jp CopyRamToVramCorrectedWithoutActivePageSetting 3667 .EraseElementalSpellLevel2:3668 ld hl,$4000 + ((.HeroOverViewSpell2backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell2backdropDX-SpellBookX)/2) -1283669 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3670 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3671 ld a,SpellBookGraphicsBlock 3672 jp CopyRamToVramCorrectedWithoutActivePageSetting 3674 .EraseElementalSpellLevel3:3675 ld hl,$4000 + ((.HeroOverViewSpell3backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell3backdropDX-SpellBookX)/2) -1283676 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3677 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3678 ld a,SpellBookGraphicsBlock 3679 jp CopyRamToVramCorrectedWithoutActivePageSetting 3681 .EraseElementalSpellLevel4:3682 ld hl,$4000 + ((.HeroOverViewSpell4backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell4backdropDX-SpellBookX)/2) -1283683 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3684 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3685 ld a,SpellBookGraphicsBlock 3686 jp CopyRamToVramCorrectedWithoutActivePageSetting 3688 .CheckSpellScrollAvailable:3689 cp (ix+HeroInventory+9)3690 ret z3691 cp (ix+HeroInventory+10)3692 ret z3693 cp (ix+HeroInventory+11)3694 ret z3695 cp (ix+HeroInventory+12)3696 ret z3697 cp (ix+HeroInventory+13)3698 ret z3699 cp (ix+HeroInventory+14)3700 ret3702.SetEarthSpells:3703 3704 ld a,46 3705 call .CheckSpellScrollAvailable 3706 jr z,.PlaceEarthSpell13707 bit 0,(ix+HeroEarthSpells)3708 jr nz,.PlaceEarthSpell13709 call .EraseElementalSpellLevel13710 jr .EndPlaceEarthSpell13711 .PlaceEarthSpell1:3712 ld a,%1000 00113713 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3714 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283715 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3716 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3717 ld a,SpellBookGraphicsBlock 3718 call CopyRamToVramCorrectedWithoutActivePageSetting 3719 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283720 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3721 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3722 ld a,SpellBookGraphicsBlock 3723 call CopyRamToVramCorrectedWithoutActivePageSetting 3724 .EndPlaceEarthSpell1:3726 ld a,47 3727 call .CheckSpellScrollAvailable 3728 jr z,.PlaceEarthSpell23729 bit 1,(ix+HeroEarthSpells)3730 jr nz,.PlaceEarthSpell23731 call .EraseElementalSpellLevel23732 jr .EndPlaceEarthSpell23733 .PlaceEarthSpell2:3734 ld a,%1000 00113735 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3736 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283737 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3738 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3739 ld a,SpellBookGraphicsBlock 3740 call CopyRamToVramCorrectedWithoutActivePageSetting 3741 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283742 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3743 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3744 ld a,SpellBookGraphicsBlock 3745 call CopyRamToVramCorrectedWithoutActivePageSetting 3746 .EndPlaceEarthSpell2:3748 ld a,48 3749 call .CheckSpellScrollAvailable 3750 jr z,.PlaceEarthSpell33751 bit 2,(ix+HeroEarthSpells)3752 jr nz,.PlaceEarthSpell33753 call .EraseElementalSpellLevel33754 jr .EndPlaceEarthSpell33755 .PlaceEarthSpell3:3756 ld a,%1000 00113757 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3758 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283759 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3760 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3761 ld a,SpellBookGraphicsBlock 3762 call CopyRamToVramCorrectedWithoutActivePageSetting 3763 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283764 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3765 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3766 ld a,SpellBookGraphicsBlock 3767 call CopyRamToVramCorrectedWithoutActivePageSetting 3768 .EndPlaceEarthSpell3:3770 ld a,49 3771 call .CheckSpellScrollAvailable 3772 jr z,.PlaceEarthSpell43773 bit 3,(ix+HeroEarthSpells)3774 jr nz,.PlaceEarthSpell43775 jp .EraseElementalSpellLevel43776 .PlaceEarthSpell4:3777 ld a,%1000 00113778 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3779 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283780 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3781 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3782 ld a,SpellBookGraphicsBlock 3783 call CopyRamToVramCorrectedWithoutActivePageSetting 3784 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283785 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3786 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3787 ld a,SpellBookGraphicsBlock 3788 jp CopyRamToVramCorrectedWithoutActivePageSetting 3790.SetFireSpells:3791 3792 ld a,50 3793 call .CheckSpellScrollAvailable 3794 jr z,.PlaceFireSpell13795 bit 0,(ix+HeroFireSpells)3796 jr nz,.PlaceFireSpell13797 call .EraseElementalSpellLevel13798 jr .EndPlaceFireSpell13799 .PlaceFireSpell1:3800 ld a,%1000 00113801 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3802 3803 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283804 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3805 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3806 ld a,SpellBookGraphicsBlock 3807 call CopyRamToVramCorrectedWithoutActivePageSetting 3808 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283809 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3810 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3811 ld a,SpellBookGraphicsBlock 3812 call CopyRamToVramCorrectedWithoutActivePageSetting 3813 .EndPlaceFireSpell1:3815 ld a,51 3816 call .CheckSpellScrollAvailable 3817 jr z,.PlaceFireSpell23818 bit 1,(ix+HeroFireSpells)3819 jr nz,.PlaceFireSpell23820 call .EraseElementalSpellLevel23821 jr .EndPlaceFireSpell23822 .PlaceFireSpell2:3823 ld a,%1000 00113824 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3825 3826 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283827 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3828 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3829 ld a,SpellBookGraphicsBlock 3830 call CopyRamToVramCorrectedWithoutActivePageSetting 3831 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283832 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3833 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3834 ld a,SpellBookGraphicsBlock 3835 call CopyRamToVramCorrectedWithoutActivePageSetting 3836 .EndPlaceFireSpell2:3838 ld a,52 3839 call .CheckSpellScrollAvailable 3840 jr z,.PlaceFireSpell33841 bit 2,(ix+HeroFireSpells)3842 jr nz,.PlaceFireSpell33843 call .EraseElementalSpellLevel33844 jr .EndPlaceFireSpell33845 .PlaceFireSpell3:3846 ld a,%1000 00113847 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3848 3849 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283850 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3851 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3852 ld a,SpellBookGraphicsBlock 3853 call CopyRamToVramCorrectedWithoutActivePageSetting 3854 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283855 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3856 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3857 ld a,SpellBookGraphicsBlock 3858 call CopyRamToVramCorrectedWithoutActivePageSetting 3859 .EndPlaceFireSpell3:3861 ld a,53 3862 call .CheckSpellScrollAvailable 3863 jr z,.PlaceFireSpell43864 bit 3,(ix+HeroFireSpells)3865 jr nz,.PlaceFireSpell43866 jp .EraseElementalSpellLevel43867 .PlaceFireSpell4:3869 ld a,%1000 00113870 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3872 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283873 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3874 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3875 ld a,SpellBookGraphicsBlock 3876 call CopyRamToVramCorrectedWithoutActivePageSetting 3877 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283878 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3879 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3880 ld a,SpellBookGraphicsBlock 3881 jp CopyRamToVramCorrectedWithoutActivePageSetting 3883.SetAirSpells:3884 3885 ld a,54 3886 call .CheckSpellScrollAvailable 3887 jr z,.PlaceAirSpell13888 bit 0,(ix+HeroAirSpells)3889 jr nz,.PlaceAirSpell13890 call .EraseElementalSpellLevel13891 jr .EndPlaceAirSpell13892 .PlaceAirSpell1:3893 ld a,%1000 00113894 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3895 3896 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283897 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3898 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3899 ld a,SpellBookGraphicsBlock 3900 call CopyRamToVramCorrectedWithoutActivePageSetting 3901 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283902 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3903 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3904 ld a,SpellBookGraphicsBlock 3905 call CopyRamToVramCorrectedWithoutActivePageSetting 3906 .EndPlaceAirSpell1:3908 ld a,55 3909 call .CheckSpellScrollAvailable 3910 jr z,.PlaceAirSpell23911 bit 1,(ix+HeroAirSpells)3912 jr nz,.PlaceAirSpell23913 call .EraseElementalSpellLevel23914 jr .EndPlaceAirSpell23915 .PlaceAirSpell2:3916 ld a,%1000 00113917 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3919 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283920 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3921 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3922 ld a,SpellBookGraphicsBlock 3923 call CopyRamToVramCorrectedWithoutActivePageSetting 3924 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283925 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3926 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3927 ld a,SpellBookGraphicsBlock 3928 call CopyRamToVramCorrectedWithoutActivePageSetting 3929 .EndPlaceAirSpell2:3931 ld a,56 3932 call .CheckSpellScrollAvailable 3933 jr z,.PlaceAirSpell33934 bit 2,(ix+HeroAirSpells)3935 jr nz,.PlaceAirSpell33936 call .EraseElementalSpellLevel33937 jr .EndPlaceAirSpell33938 .PlaceAirSpell3:3939 ld a,%1000 00113940 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3942 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283943 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3944 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3945 ld a,SpellBookGraphicsBlock 3946 call CopyRamToVramCorrectedWithoutActivePageSetting 3947 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283948 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3949 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3950 ld a,SpellBookGraphicsBlock 3951 call CopyRamToVramCorrectedWithoutActivePageSetting 3952 .EndPlaceAirSpell3:3954 ld a,57 3955 call .CheckSpellScrollAvailable 3956 jr z,.PlaceAirSpell43957 bit 3,(ix+HeroAirSpells)3958 jr nz,.PlaceAirSpell43959 jp .EraseElementalSpellLevel4 3960 .PlaceAirSpell4:3961 ld a,%1000 00113962 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3964 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283965 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3966 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3967 ld a,SpellBookGraphicsBlock 3968 call CopyRamToVramCorrectedWithoutActivePageSetting 3969 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283970 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3971 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3972 ld a,SpellBookGraphicsBlock 3973 jp CopyRamToVramCorrectedWithoutActivePageSetting 3975.SetWaterSpells:3976 3977 ld a,58 3978 call .CheckSpellScrollAvailable 3979 jr z,.PlaceWaterSpell13980 bit 0,(ix+HeroWaterSpells)3981 jr nz,.PlaceWaterSpell13982 call .EraseElementalSpellLevel13983 jr .EndPlaceWaterSpell13984 .PlaceWaterSpell1:3985 ld a,%1000 00113986 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3987 3988 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283989 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3990 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3991 ld a,SpellBookGraphicsBlock 3992 call CopyRamToVramCorrectedWithoutActivePageSetting 3993 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1283994 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3995 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3996 ld a,SpellBookGraphicsBlock 3997 call CopyRamToVramCorrectedWithoutActivePageSetting 3998 .EndPlaceWaterSpell1:4000 ld a,59 4001 call .CheckSpellScrollAvailable 4002 jr z,.PlaceWaterSpell24003 bit 1,(ix+HeroWaterSpells)4004 jr nz,.PlaceWaterSpell24005 call .EraseElementalSpellLevel24006 jr .EndPlaceWaterSpell24007 .PlaceWaterSpell2:4008 ld a,%1000 00114009 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4010 4011 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284012 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)4013 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4014 ld a,SpellBookGraphicsBlock 4015 call CopyRamToVramCorrectedWithoutActivePageSetting 4016 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1284017 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)4018 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4019 ld a,SpellBookGraphicsBlock 4020 call CopyRamToVramCorrectedWithoutActivePageSetting 4021 .EndPlaceWaterSpell2:4023 ld a,60 4024 call .CheckSpellScrollAvailable 4025 jr z,.PlaceWaterSpell34026 bit 2,(ix+HeroWaterSpells)4027 jr nz,.PlaceWaterSpell34028 call .EraseElementalSpellLevel34029 jr .EndPlaceWaterSpell34030 .PlaceWaterSpell3:4031 ld a,%1000 00114032 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4033 4034 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284035 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)4036 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4037 ld a,SpellBookGraphicsBlock 4038 call CopyRamToVramCorrectedWithoutActivePageSetting 4039 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1284040 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)4041 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4042 ld a,SpellBookGraphicsBlock 4043 call CopyRamToVramCorrectedWithoutActivePageSetting 4044 .EndPlaceWaterSpell3:4046 ld a,61 4047 call .CheckSpellScrollAvailable 4048 jr z,.PlaceWaterSpell44049 bit 3,(ix+HeroWaterSpells)4050 jr nz,.PlaceWaterSpell44051 jp .EraseElementalSpellLevel44052 .PlaceWaterSpell4:4053 ld a,%1000 00114054 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4055 4056 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284057 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)4058 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4059 ld a,SpellBookGraphicsBlock 4060 call CopyRamToVramCorrectedWithoutActivePageSetting 4061 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1284062 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)4063 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4064 ld a,SpellBookGraphicsBlock 4065 jp CopyRamToVramCorrectedWithoutActivePageSetting 4067.SetUniversalSpells:4068 xor a4069 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4070 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4071 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4072 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4074 4075 ld a,62 4076 call .CheckSpellScrollAvailable 4077 jr z,.PlaceUniversalSpell14078 bit 0,(ix+HeroAllSchoolsSpells)4079 jr z,.EndPlaceAllSchoolsSpell1 4080 .PlaceUniversalSpell1:4081 ld a,%1000 00114082 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4083 4084 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284085 ld de,$0000 + (.HeroOverViewSpell5backdropDY*128) + (.HeroOverViewSpell5backdropDX/2)4086 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4087 ld a,SpellBookGraphicsBlock 4088 call CopyRamToVramCorrectedWithoutActivePageSetting 4089 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1284090 ld de,$0000 + (.Spell5DY*128) + (.Spell5DX/2)4091 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4092 ld a,SpellBookGraphicsBlock 4093 call CopyRamToVramCorrectedWithoutActivePageSetting 4094 .EndPlaceAllSchoolsSpell1:4096 ld a,63 4097 call .CheckSpellScrollAvailable 4098 jr z,.PlaceUniversalSpell24099 bit 1,(ix+HeroAllSchoolsSpells)4100 jr z,.EndPlaceAllSchoolsSpell2 4101 .PlaceUniversalSpell2:4102 ld a,%1000 00114103 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4105 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284106 ld de,$0000 + (.HeroOverViewSpell6backdropDY*128) + (.HeroOverViewSpell6backdropDX/2)4107 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4108 ld a,SpellBookGraphicsBlock 4109 call CopyRamToVramCorrectedWithoutActivePageSetting 4110 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1284111 ld de,$0000 + (.Spell6DY*128) + (.Spell6DX/2)4112 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4113 ld a,SpellBookGraphicsBlock 4114 call CopyRamToVramCorrectedWithoutActivePageSetting 4115 .EndPlaceAllSchoolsSpell2:4117 ld a,64 4118 call .CheckSpellScrollAvailable 4119 jr z,.PlaceUniversalSpell34120 bit 2,(ix+HeroAllSchoolsSpells)4121 jr z,.EndPlaceAllSchoolsSpell3 4122 .PlaceUniversalSpell3:4123 ld a,%1000 00114124 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4126 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284127 ld de,$0000 + (.HeroOverViewSpell7backdropDY*128) + (.HeroOverViewSpell7backdropDX/2)4128 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4129 ld a,SpellBookGraphicsBlock 4130 call CopyRamToVramCorrectedWithoutActivePageSetting 4131 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1284132 ld de,$0000 + (.Spell7DY*128) + (.Spell7DX/2)4133 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4134 ld a,SpellBookGraphicsBlock 4135 call CopyRamToVramCorrectedWithoutActivePageSetting 4136 .EndPlaceAllSchoolsSpell3:4138 ld a,65 4139 call .CheckSpellScrollAvailable 4140 jr z,.PlaceUniversalSpell44141 bit 3,(ix+HeroAllSchoolsSpells)4142 ret z4143 .PlaceUniversalSpell4:4144 ld a,%1000 00114145 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4147 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284148 ld de,$0000 + (.HeroOverViewSpell8backdropDY*128) + (.HeroOverViewSpell8backdropDX/2)4149 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4150 ld a,SpellBookGraphicsBlock 4151 call CopyRamToVramCorrectedWithoutActivePageSetting 4152 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1284153 ld de,$0000 + (.Spell8DY*128) + (.Spell8DX/2)4154 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4155 ld a,SpellBookGraphicsBlock 4156 jp CopyRamToVramCorrectedWithoutActivePageSetting 4159.HeroOverViewSpell1backdropDY: equ SpellBookY + 0444160.HeroOverViewSpell1backdropDX: equ SpellBookX + 0344161.HeroOverViewSpell2backdropDY: equ SpellBookY + 0484162.HeroOverViewSpell2backdropDX: equ SpellBookX + 0644163.HeroOverViewSpell3backdropDY: equ SpellBookY + 0894164.HeroOverViewSpell3backdropDX: equ SpellBookX + 0324165.HeroOverViewSpell4backdropDY: equ SpellBookY + 0934166.HeroOverViewSpell4backdropDX: equ SpellBookX + 0624167.HeroOverViewSpell5backdropDY: equ SpellBookY + 0484168.HeroOverViewSpell5backdropDX: equ SpellBookX + 1024169.HeroOverViewSpell6backdropDY: equ SpellBookY + 0444170.HeroOverViewSpell6backdropDX: equ SpellBookX + 1324171.HeroOverViewSpell7backdropDY: equ SpellBookY + 0934172.HeroOverViewSpell7backdropDX: equ SpellBookX + 1044173.HeroOverViewSpell8backdropDY: equ SpellBookY + 0894174.HeroOverViewSpell8backdropDX: equ SpellBookX + 1344176.Spell1DY: equ SpellBookY + 0504177.Spell1DX: equ SpellBookX + 0404178.Spell2DY: equ SpellBookY + 0544179.Spell2DX: equ SpellBookX + 0704180.Spell3DY: equ SpellBookY + 0954181.Spell3DX: equ SpellBookX + 0384182.Spell4DY: equ SpellBookY + 0994183.Spell4DX: equ SpellBookX + 0684184.Spell5DY: equ SpellBookY + 0544185.Spell5DX: equ SpellBookX + 1084186.Spell6DY: equ SpellBookY + 0504187.Spell6DX: equ SpellBookX + 1384188.Spell7DY: equ SpellBookY + 0994189.Spell7DX: equ SpellBookX + 1104190.Spell8DY: equ SpellBookY + 0954191.Spell8DX: equ SpellBookX + 14041944197SetGraphicsSpellBook:4198 ld hl,$4000 + (000*128) + (000/2) -1284199 ld de,$0000 + (SpellBookY*128) + (SpellBookX/2)4200 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4201 ld a,SpellBookGraphicsBlock4202 jp CopyRamToVramCorrectedCastleOverview 4204HandleSpellCast:4205 ld a,(CastSpell?)4206 or a4207 ret z4208 xor a4209 ld (CastSpell?),a42114214 call GetSelectedSpellRoutine 4215 jp (hl) 4217421942264232423842444253LenghtSpellAnimationStep: equ 44255 db SpellAnimationsBlock 4256 db 1 4257CureAnimation:4258 4259 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 032,022/24260 dw $4000 + ((032*0)*128) + ((022*1)/2) - 128 | db 032,022/24261 dw $4000 + ((032*0)*128) + ((022*2)/2) - 128 | db 032,022/24262 dw $4000 + ((032*0)*128) + ((022*3)/2) - 128 | db 032,022/24263 dw $4000 + ((032*0)*128) + ((022*4)/2) - 128 | db 032,022/24264 dw $4000 + ((032*0)*128) + ((022*5)/2) - 128 | db 032,022/24265 dw $4000 + ((032*0)*128) + ((022*6)/2) - 128 | db 032,022/24266 dw $4000 + ((032*0)*128) + ((022*7)/2) - 128 | db 032,022/24267 dw $4000 + ((032*0)*128) + ((022*8)/2) - 128 | db 032,022/24268 dw $4000 + ((032*0)*128) + ((022*9)/2) - 128 | db 032,022/24269 dw $4000 + ((032*0)*128) + ((022*10)/2) - 128 | db 032,022/24270 dw $4000 + ((032*1)*128) + ((022*0)/2) - 128 | db 032,022/24271 dw $4000 + ((032*1)*128) + ((022*1)/2) - 128 | db 032,022/24272 dw $4000 + ((032*1)*128) + ((022*2)/2) - 128 | db 032,022/24273 dw $4000 + ((032*1)*128) + ((022*3)/2) - 128 | db 032,022/24274 dw $4000 + ((032*1)*128) + ((022*4)/2) - 128 | db 032,022/24275 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 002,002/2 4276 dw 04278 db SpellAnimations16Block 4279 db 0 4280HasteAnimation:4281 4282 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24283 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24284 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24285 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24286 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24287 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24288 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24289 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24290 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24291 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24292 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24293 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24294 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24295 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4296 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4297 dw 0 4299 db SpellAnimations2Block 4300 db 0 4301EarthShockAnimation:4302 4303 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24304 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24305 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24306 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24307 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24308 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24309 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24310 dw $4000 + ((064*1)*128) + ((064*3)/2) - 128 | db 064,064/24311 dw $4000 + ((064*2)*128) + ((064*0)/2) - 128 | db 064,064/24312 dw $4000 + ((064*2)*128) + ((064*1)/2) - 128 | db 064,064/24313 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4314 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4315 dw 0 4317 db SpellAnimations2Block 4318 db 1 4319MagicArrowsAnimation:4320 4321 dw $4000 + ((064*3)*128) + ((040*0)/2) - 128 | db 064,040/24322 dw $4000 + ((064*3)*128) + ((040*1)/2) - 128 | db 064,040/24323 dw $4000 + ((064*3)*128) + ((040*2)/2) - 128 | db 064,040/24324 dw $4000 + ((064*3)*128) + ((040*3)/2) - 128 | db 064,040/24325 dw $4000 + ((064*3)*128) + ((040*4)/2) - 128 | db 064,040/24326 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24327 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24328 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24329 dw $4000 + ((064*0)*128) + ((040*0)/2) - 128 | db 002,002/2 4330 dw 0 4332 db SpellAnimations3Block 4333 db 0 4334sunstrikeAnimation:4335 4336 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24337 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24338 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24339 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24340 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24341 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24342 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24343 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24344 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24345 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24346 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4347 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4348 dw 0 4350 db SpellAnimations4Block 4351 db 0 4352IceBoltAnimation:4353 4354 dw $4000 + ((064*0)*128) + ((032*0)/2) - 128 | db 064,032/24355 dw $4000 + ((064*0)*128) + ((032*1)/2) - 128 | db 064,032/24356 dw $4000 + ((064*0)*128) + ((032*2)/2) - 128 | db 064,032/24357 dw $4000 + ((064*0)*128) + ((032*3)/2) - 128 | db 064,032/24358 dw $4000 + ((064*0)*128) + ((032*4)/2) - 128 | db 064,032/24359 dw $4000 + ((064*0)*128) + ((032*5)/2) - 128 | db 064,032/24360 dw $4000 + ((064*0)*128) + ((032*6)/2) - 128 | db 064,032/24361 dw $4000 + ((064*0)*128) + ((032*7)/2) - 128 | db 064,032/24362 dw $4000 + ((064*1)*128) + ((032*0)/2) - 128 | db 064,032/24363 dw $4000 + ((064*1)*128) + ((032*1)/2) - 128 | db 064,032/24364 dw $4000 + ((064*1)*128) + ((032*2)/2) - 128 | db 064,032/24365 dw $4000 + ((064*1)*128) + ((032*3)/2) - 128 | db 064,032/24366 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4367 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4368 dw 0 4370 db SpellAnimations5Block 4371 db 0 4372implosionAnimation:4373 4374 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24375 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24376 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24377 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24378 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24379 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24380 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24381 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24382 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24383 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24384 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4385 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4386 dw 0 4388 db SpellAnimations6Block 4389 db 1 4390EarthBoundAnimation:4391 4392 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 026,042/24393 dw $4000 + ((026*0)*128) + ((042*1)/2) - 128 | db 026,042/24394 dw $4000 + ((026*0)*128) + ((042*2)/2) - 128 | db 026,042/24395 dw $4000 + ((026*0)*128) + ((042*3)/2) - 128 | db 026,042/24396 dw $4000 + ((026*0)*128) + ((042*4)/2) - 128 | db 026,042/24397 dw $4000 + ((026*0)*128) + ((042*5)/2) - 128 | db 026,042/24398 dw $4000 + ((026*1)*128) + ((042*0)/2) - 128 | db 026,042/24399 dw $4000 + ((026*1)*128) + ((042*1)/2) - 128 | db 026,042/24400 dw $4000 + ((026*1)*128) + ((042*2)/2) - 128 | db 026,042/24401 dw $4000 + ((026*1)*128) + ((042*3)/2) - 128 | db 026,042/24402 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4403 dw 0 4405 db SpellAnimations6Block 4406 db 0 4407FrostRingAnimation:4408 4409 dw $4000 + ((030*0+52)*128) + ((054*0)/2) - 128 | db 030,054/24410 dw $4000 + ((030*0+52)*128) + ((054*1)/2) - 128 | db 030,054/24411 dw $4000 + ((030*0+52)*128) + ((054*2)/2) - 128 | db 030,054/24412 dw $4000 + ((030*0+52)*128) + ((054*3)/2) - 128 | db 030,054/24413 dw $4000 + ((030*1+52)*128) + ((054*0)/2) - 128 | db 030,054/24414 dw $4000 + ((030*1+52)*128) + ((054*1)/2) - 128 | db 030,054/24415 dw $4000 + ((030*1+52)*128) + ((054*2)/2) - 128 | db 030,054/24416 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24417 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24418 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4419 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4420 dw 0 4422 db SpellAnimations8Block 4423 db 1 4424ShieldBreakerAnimation:4425 4426 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24427 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24428 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24429 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24430 dw $4000 + ((032*0)*128) + ((042*1)/2) - 128 | db 032,042/24431 dw $4000 + ((032*0)*128) + ((042*2)/2) - 128 | db 032,042/24432 dw $4000 + ((032*0)*128) + ((042*3)/2) - 128 | db 032,042/24433 dw $4000 + ((032*0)*128) + ((042*4)/2) - 128 | db 032,042/24434 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24435 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24436 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4437 dw 0 4439 db SpellAnimations16Block 4440 db 1 4441CurseAnimation:4442 4443 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24444 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24445 dw $4000 + ((033*0+40)*128) + ((048*1)/2) - 128 | db 033,048/24446 dw $4000 + ((033*0+40)*128) + ((048*2)/2) - 128 | db 033,048/24447 dw $4000 + ((033*0+40)*128) + ((048*3)/2) - 128 | db 033,048/24448 dw $4000 + ((033*0+40)*128) + ((048*4)/2) - 128 | db 033,048/24449 dw $4000 + ((033*1+40)*128) + ((048*0)/2) - 128 | db 033,048/24450 dw $4000 + ((033*1+40)*128) + ((048*1)/2) - 128 | db 033,048/24451 dw $4000 + ((033*1+40)*128) + ((048*2)/2) - 128 | db 033,048/24452 dw $4000 + ((033*1+40)*128) + ((048*3)/2) - 128 | db 033,048/24453 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24454 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24455 4456 dw $4000 + ((033*0)*128) + ((048*0)/2) - 128 | db 002,002/2 4457 dw 0 4459 db SpellAnimations8Block 4460 db 1 4461PlateArmorAnimation:4462 4463 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24464 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24465 dw $4000 + ((032*1)*128) + ((028*1)/2) - 128 | db 032,028/24466 dw $4000 + ((032*1)*128) + ((028*2)/2) - 128 | db 032,028/24467 dw $4000 + ((032*1)*128) + ((028*3)/2) - 128 | db 032,028/24468 dw $4000 + ((032*1)*128) + ((028*4)/2) - 128 | db 032,028/24469 dw $4000 + ((032*1)*128) + ((028*5)/2) - 128 | db 032,028/24470 dw $4000 + ((032*1)*128) + ((028*6)/2) - 128 | db 032,028/24471 dw $4000 + ((032*1)*128) + ((028*7)/2) - 128 | db 032,028/24472 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24473 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24474 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24475 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24476 dw $4000 + ((032*1)*128) + ((042*0)/2) - 128 | db 002,002/2 4477 dw 0 4479 db SpellAnimations9Block 4480 db 0 4481InnerBeastAnimation:4482 4483 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24484 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24485 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24486 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24487 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24488 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24489 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24490 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4491 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4492 dw 0 4494 db SpellAnimations10Block 4495 db 0 4496TeleportAnimation:4497 4498 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24499 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24500 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24501 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24502 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24503 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24504 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24505 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24506 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24507 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24508 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24509 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4510 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4511 dw 0 4513 db SpellAnimations10Block 4514 db 0 4515FrenzyAnimation:4516 4517 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24518 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24519 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24520 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24521 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24522 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24523 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24524 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24525 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24526 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24527 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24528 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24529 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24530 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24531 dw $4000 + ((032*3)*128) + ((032*0)/2) - 128 | db 032,032/24532 dw $4000 + ((032*3)*128) + ((032*1)/2) - 128 | db 032,032/24533 dw $4000 + ((032*3)*128) + ((032*2)/2) - 128 | db 032,032/24534 dw $4000 + ((032*3)*128) + ((032*3)/2) - 128 | db 032,032/24535 dw $4000 + ((032*3)*128) + ((032*4)/2) - 128 | db 032,032/24536 dw $4000 + ((032*3)*128) + ((032*5)/2) - 128 | db 032,032/24537 dw $4000 + ((032*3)*128) + ((032*6)/2) - 128 | db 032,032/24538 dw $4000 + ((032*3)*128) + ((032*7)/2) - 128 | db 032,032/24539 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4540 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4541 dw 0 4543 db SpellAnimations11Block 4544 db 1 4545ResurrectionAnimation:4546 4547 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24548 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24549 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24550 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24551 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24552 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24553 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24554 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24555 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24556 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24557 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24558 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24559 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24560 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24561 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24562 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24563 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24564 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24565 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24566 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24567 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24568 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24569 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24570 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24571 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24572 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4573 dw 0 4575 db SpellAnimations12Block 4576 db 0 4577SpellBubbleAnimation:4578 4579 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24580 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24581 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24582 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24583 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24584 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/24585 4586 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24587 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24588 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24589 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24590 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24591 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24592 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24594 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24595 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24596 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24597 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24598 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24599 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24600 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24602 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24603 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24604 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24605 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24606 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24607 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24608 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24610 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4611 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4612 dw 0 4614 db SpellAnimations12Block 4615 db 0 4616SpellBubbleActivatedAndPoppedAnimation:4617 4618 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24619 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24620 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24621 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24622 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24623 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/2 4624 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24625 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24626 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24627 dw $4000 + ((042*2)*128) + ((036*0)/2) - 128 | db 042,036/24628 dw $4000 + ((042*2)*128) + ((036*1)/2) - 128 | db 042,036/24629 dw $4000 + ((042*2)*128) + ((036*2)/2) - 128 | db 042,036/24630 dw $4000 + ((042*2)*128) + ((036*3)/2) - 128 | db 042,036/24631 dw $4000 + ((042*2)*128) + ((036*4)/2) - 128 | db 042,036/24632 dw $4000 + ((042*2)*128) + ((036*5)/2) - 128 | db 042,036/24633 dw $4000 + ((042*2)*128) + ((036*6)/2) - 128 | db 042,036/24634 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4635 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4636 dw 0 4638 db SpellAnimations13Block 4639 db 0 4640hypnosisAnimation:4641 4642 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24643 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24644 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24645 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24646 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24647 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24648 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24649 dw $4000 + ((061*1)*128) + ((060*3)/2) - 128 | db 061,060/24650 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24651 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24652 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24653 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24654 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24655 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24656 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24657 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4658 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4659 dw 0 4661 db SpellAnimations14Block 4662 db 1 4663ClawBackAnimation:4664 4665 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 026,030/24666 dw $4000 + ((026*0)*128) + ((030*1)/2) - 128 | db 026,030/24667 dw $4000 + ((026*0)*128) + ((030*2)/2) - 128 | db 026,030/24668 dw $4000 + ((026*0)*128) + ((030*3)/2) - 128 | db 026,030/24669 dw $4000 + ((026*0)*128) + ((030*4)/2) - 128 | db 026,030/24670 dw $4000 + ((026*0)*128) + ((030*5)/2) - 128 | db 026,030/24671 dw $4000 + ((026*0)*128) + ((030*6)/2) - 128 | db 026,030/24672 dw $4000 + ((026*0)*128) + ((030*7)/2) - 128 | db 026,030/24673 dw $4000 + ((026*1)*128) + ((030*0)/2) - 128 | db 026,030/24674 dw $4000 + ((026*1)*128) + ((030*1)/2) - 128 | db 026,030/24675 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 002,002/2 4676 dw 0 4678 db SpellAnimations15Block 4679 db 1 4680BlindingFogAnimation:4681 4682 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24683 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24684 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24685 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24686 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24687 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24688 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24689 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24690 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24691 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24692 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24693 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24694 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24695 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24696 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24697 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24698 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24699 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24700 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4701 dw 0 4704GoAnimateSpell:4705 xor a4706 ld (activepage),a 4707 call SwapAndSetPage 4708 ld hl,CheckVictoryOrDefeat.CopyPage1toPage04709 call docopy4711 xor a4712 ld (SpellAnimationStep),a4713 ld (SpellAnimationSpeed),a4714 ld (BackupImagePage0Ready?),a4715 ld (BackupImagePage1Ready?),a4716 ld a,(iy-1) 4717 ld (SpellAnimationSpeed+1),a4718 ld a,(iy-2) 4719 ld (SpellAnimationGfxBlock),a4721 .AnimationLoop:4722 4723 ld l,(iy)4724 ld h,(iy+1) 4725 ld a,l4726 or h4727 ret z 4728 ld de,$8000 + (188*128) + (000/2) - 128 4729 ld b,(iy+2) 4730 ld c,(iy+3) 4731 ld a,(SpellAnimationGfxBlock)4732 ld (AddressToWriteFrom),hl4733 ld (AddressToWriteTo),de 4734 ld (NXAndNY),bc4735 ld (BlockToReadFrom),a4736 call CopyRamToVramPage3ForBattleEngine 4738 4739 ld a,1884740 ld (TransparantImageBattle+sy),a 4741 xor a4742 ld (TransparantImageBattle+sx),a 4744 ld a,(iy+2) 4745 ld (TransparantImageBattle+ny),a4746 ld a,(iy+3) 4747 add a,a4748 ld (TransparantImageBattle+nx),a4749 4750 ld ix,(MonsterThatIsBeingAttacked)4751 ld a,(ix+MonsterY)4752 add a,(ix+MonsterNY)4753 sub (iy+2) 4754 ld (TransparantImageBattle+dy),a 4756 ld a,(ix+MonsterNX) 4757 srl a 4758 add a,(ix+MonsterX) 4759 sub a,(iy+3) 4760 res 0,a4761 jp nc,.EndCheckOverFlowLeft4763 neg4764 ld b,a4765 ld (TransparantImageBattle+sx),a 4766 ld a,(TransparantImageBattle+nx)4767 sub a,b4768 ld (TransparantImageBattle+nx),a4771 xor a4772 .EndCheckOverFlowLeft:4773 ld (TransparantImageBattle+dx),a 4776 4777 ld a,(activepage)4778 xor 14779 ld (TransparantImageBattle+dPage),a 4781 4782 call .Recoverbackground 4784 call .BackupImage 4786 ld hl,TransparantImageBattle4787 call docopy4788 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady4789 call DoCopy4790 halt4791 call SwapAndSetPage 4793 ld a,(SpellAnimationSpeed+1)4794 ld b,a4795 ld a,(SpellAnimationSpeed)4796 inc a4797 and b4798 ld (SpellAnimationSpeed),a4799 jp nz,.AnimationLoop4800 ld de,LenghtSpellAnimationStep4801 add iy,de 4802 jp .AnimationLoop4804.Recoverbackground:4805 ld a,(activepage) 4806 or a4807 ld b,1284808 ld ix,FreeToUseFastCopy1 4809 jr z,.RecoveryPageFound4810 ld b,0644811 ld ix,FreeToUseFastCopy0 4812 .RecoveryPageFound:4813 bit 0,(ix-1) 4814 ret z4816 ld a,(ix+sy)4817 ld (ix+dy),a4818 ld a,(ix+sx)4819 ld (ix+dx),a4821 ld a,b4822 ld (ix+sx),a 4823 ld a,1884824 ld (ix+sy),a 4826 ld a,(activepage) 4827 xor 14828 ld (ix+dpage),a4830 ld a,3 4831 ld (ix+spage),a4833 push ix4834 pop hl4835 jp docopy4837.BackupImage:4838 ld a,(activepage) 4839 or a4840 ld a,1284841 ld ix,FreeToUseFastCopy1 4842 jr z,.SetDx4843 ld a,0644844 ld ix,FreeToUseFastCopy0 4845 .SetDx:4846 ld (ix+dx),a 4847 set 0,(ix-1) 4849 ld a,34850 ld (ix+dpage),a4851 ld a,(TransparantImageBattle+ny)4852 ld (ix+ny),a4853 ld a,(TransparantImageBattle+nx)4854 ld (ix+nx),a4856 ld a,(TransparantImageBattle+dy)4857 ld (ix+sy),a4858 ld a,(TransparantImageBattle+dx)4859 ld (ix+sx),a4861 ld a,1884862 ld (ix+dy),a4864 ld a,(activepage) 4865 xor 14866 ld (ix+spage),a4868 push ix4869 pop hl4870 jp docopy4872CheckResistanceSkill: 4873 ld a,(CurrentActiveMonster) 4874 cp 74875 ld ix,(HeroThatGetsAttacked) 4876 jr c,.HeroThatGetsSpellCastOnFound4877 ld ix,(plxcurrentheroAddress)4878 .HeroThatGetsSpellCastOnFound:4880 push ix4881 pop hl4882 ld a,l4883 or h4884 jr z,.NeutralEnemy 4885 4886 ld a,(ix+HeroSkills+0)4887 call .CheckSkillResistance4888 ld a,(ix+HeroSkills+1)4889 call .CheckSkillResistance4890 ld a,(ix+HeroSkills+2)4891 call .CheckSkillResistance4892 ld a,(ix+HeroSkills+3)4893 call .CheckSkillResistance4894 ld a,(ix+HeroSkills+4)4895 call .CheckSkillResistance4896 ld a,(ix+HeroSkills+5)4897 call .CheckSkillResistance4898 ret4900 .NeutralEnemy: 4901 inc a 4902 ret4903 4904 .CheckSkillResistance:4905 cp 10 4906 jr z,.BasicResistanceFound4907 cp 11 4908 jr z,.AdvancedResistanceFound4909 cp 12 4910 jr z,.ExpertResistanceFound4911 ret4913 .BasicResistanceFound:4914 pop af 4916 4917 ld a,r4918 ld b,04919 ld c,a4920 ld de,104921 call DivideBCbyDE 4922 ld a,l4923 or a 4924 ret4926 .AdvancedResistanceFound:4927 pop af 4929 4930 ld a,r4931 ld b,04932 ld c,a4933 ld de,64934 call DivideBCbyDE 4935 ld a,l4936 or a 4937 ret4939 .ExpertResistanceFound:4940 pop af 4942 4943 ld a,r4944 ld b,04945 ld c,a4946 ld de,54947 call DivideBCbyDE 4948 ld a,l4949 or a 4950 ret4952AddPositiveSpellDamageFromSorcery:4953 push hl 4955 call SetCurrentActiveMOnsterInIX4956 4957 4958 push ix4959 pop hl 4960 ld de,Monster74961 call CompareHLwithDE 4962 ld ix,(plxcurrentheroAddress) 4963 jr c,.HeroFound4964 ld ix,(HeroThatGetsAttacked) 4965 jr .HeroFound4966 .HeroFound:4968 pop hl 4969 4970 ld a,(ix+HeroSkills+0)4971 call .CheckSkillSorcery4972 ld a,(ix+HeroSkills+1)4973 call .CheckSkillSorcery4974 ld a,(ix+HeroSkills+2)4975 call .CheckSkillSorcery4976 ld a,(ix+HeroSkills+3)4977 call .CheckSkillSorcery4978 ld a,(ix+HeroSkills+4)4979 call .CheckSkillSorcery4980 ld a,(ix+HeroSkills+5)4981 call .CheckSkillSorcery4982 ret4983 4984 .CheckSkillSorcery:4985 cp 25 4986 jr z,.BasicSorceryFound4987 cp 26 4988 jr z,.AdvancedSorceryFound4989 cp 27 4990 jr z,.ExpertSorceryFound4991 ret4993 .BasicSorceryFound:4994 pop af 4995 ld de,20 4996 jp ApplyPercentBasedBoost 4998 .AdvancedSorceryFound:4999 pop af 5000 ld de,10 5001 jp ApplyPercentBasedBoost 5003 .ExpertSorceryFound:5004 pop af 5005 ld de,06 5006 jp ApplyPercentBasedBoost 5012AddPositiveSpellDamageFromItemsForActiveHero:5013 call AddPositiveSpellDamageFromSorcery5015 push hl 5017 call SetCurrentActiveMOnsterInIX5018 5019 5020 push ix5021 pop hl 5022 ld de,Monster75023 call CompareHLwithDE 5024 ld ix,(plxcurrentheroAddress) 5025 jr c,.HeroFound5026 ld ix,(HeroThatGetsAttacked) 5027 jr .HeroFound5028 .HeroFound:5030 pop hl 5032 call .CheckItem16 5033 call .CheckItem28 5034 call .CheckItem36 5035 ret5037 .CheckItem16: 5038 ld a,(ix+HeroInventory+3) 5039 cp 0165040 ret nz5041 ld de,40 5042 jp ApplyPercentBasedBoost5044 .CheckItem28: 5045 ld a,(ix+HeroInventory+5) 5046 cp 0285047 ret nz5048 ld de,13 5049 jp ApplyPercentBasedBoost5051 .CheckItem36: 5052 ld a,(ix+HeroInventory+7) 5053 cp 0365054 ret nz5055 ld de,20 5056 jp ApplyPercentBasedBoost 5057 5058ReduceSpellDamageFromItems:5059 push hl 5061 ld ix,(MonsterThatIsBeingAttacked) 5063 push ix5064 pop hl 5065 ld de,Monster75066 call CompareHLwithDE 5067 ld ix,(plxcurrentheroAddress) 5068 jr c,.HeroFound5069 ld ix,(HeroThatGetsAttacked) 5070 .HeroFound:5072 pop hl 5074 call .CheckItem08 5075 call .CheckItem12 5076 call .CheckItem21 5077 call .CheckItem23 5078 call .CheckItem26 5079 call .CheckItem33 5080 call .CheckItem34 5081 call .CheckItem35 5082 call .CheckItem41 5083 ret5085 .CheckItem08: 5086 ld a,(ix+HeroInventory+1) 5087 cp 0085088 ret nz5089 ld de,40 5090 jp .ReducePercentage5092 .CheckItem12: 5093 ld a,(ix+HeroInventory+2) 5094 cp 0125095 ret nz5096 ld de,20 5097 jp .ReducePercentage5099 .CheckItem21: 5100 ld a,(ix+HeroInventory+4) 5101 cp 0215102 ret nz5103 ld de,40 5104 jp .ReducePercentage5106 .CheckItem23: 5107 ld a,(ix+HeroInventory+4) 5108 cp 0235109 ret nz5110 ld de,13 5111 jp .ReducePercentage5113 .CheckItem26: 5114 ld a,(ix+HeroInventory+5) 5115 cp 0265116 ret nz5117 ld de,20 5118 jp .ReducePercentage5120 .CheckItem33: 5121 ld a,(ix+HeroInventory+6) 5122 cp 0335123 ret nz5124 ld de,13 5125 jp .ReducePercentage5127 .CheckItem34: 5128 ld a,(ix+HeroInventory+6) 5129 cp 0345130 ret nz5131 ld de,10 5132 jp .ReducePercentage5134 .CheckItem35: 5135 ld a,(ix+HeroInventory+7) 5136 cp 0355137 ret nz5138 ld de,40 5139 jp .ReducePercentage5141 .CheckItem41: 5142 ld a,(ix+HeroInventory+8) 5143 cp 0415144 ret nz5145 ld de,40 5146 jp .ReducePercentage5148 .ReducePercentage:5149 push hl5151 push hl5152 pop bc5153 call DivideBCbyDE 5154 ld a,b5155 or c5156 jr nz,.NotZero5157 inc c 5158 .NotZero:5160 pop hl5161 or a5162 sbc hl,bc5163 ret5176MSXHeroes.asm1209 ds $c000-$,$ff1210dephase12121215BattleFieldObjectsBlock: equ $521216phase $40001217 incbin "..\grapx\Battlefield\BattleFieldObjects.SC5",7,45 * 128 1218 ds $8000-$,$ff1219dephase12211224ExtraRoutinesCodeBlock: equ $531225phase $40001226 ExtraRoutines.asm116ShowItemStats:17call screenon18 call SetItemStatsWindow 19 call SwapAndSetPage 20 21 .engine:22 call PopulateControls 2429 ld a,(NewPrContr)30 and %0011 000031 jr nz,.end32 jr .engine 34 .end:35 ld a,%0011 000036 ld (ControlsOnInterrupt),a 37 ret40SetItemStatsWindow:41 ld de,$0000 + (007*128) + (008/2) - 12843 ld a,(spat+1) 44 sub 3245 jr nc,.NotCarryX46 xor a47 .NotCarryX:48 cp 10049 jr c,.NoOverFlowRight50 ld a,10051 .NoOverFlowRight:53 ld b,a 55 srl a 56 ld h,057 ld l,a58 add hl,de59 ex de,hl60 61 ld a,(spat+0) 62 ld c,-5063 cp 7064 jr nc,.CursorTopOfScreen65 ld c,3266 .CursorTopOfScreen:67 add a,c69 sub a,2470 jr nc,.NotCarryY71 xor a72 .NotCarryY:73 cp 11974 jr c,.NoOverFlowBottom75 ld a,11976 .NoOverFlowBottom:78 ld c,a 79 push bc81 ld h,082 ld l,a83 add hl,hl 84 add hl,hl 85 add hl,hl 86 add hl,hl 87 add hl,hl 88 add hl,hl 89 add hl,hl 90 add hl,de91 ex de,hl93 ld hl,$4000 + (070*128) + (150/2) - 12894 ld bc,$0000 + (040*256) + (088/2)95 ld a,HeroOverviewStatusGraphicsBlock 96 call CopyRamToVramCorrectedCastleOverview 98 pop bc 100101 ld a,b 102 add a,15103 ld b,a 105 ld a,c 106 add a,14107 ld c,a 109 ld a,(MonsterHerocollidedWithOnMap)110 cp 73111 jp z,CheckLearningStoneAlreadyVisited112 cp 74113 jp z,CheckSpireOfWisdomAlreadyVisited114 cp 76115 jp z,CheckGuardTowerAlreadyVisited116 cp 83 117 ld hl,TextArtifact118 jp nc,SetText119 sub 65 120 ld h,0121 ld l,a 122 ld de,LenghtTextItem123 push bc124 call MultiplyHlWithDE 125 pop bc126 ld de,TextChestRuby127 add hl,de128 jp SetText 130CheckLearningStoneAlreadyVisited:131 call .CheckLearningStoneAlreadyVisited132 ld hl,TextLearningStone133 jp z,SetText 134 ld hl,TextLearningStoneX135 jp SetText 137.CheckLearningStoneAlreadyVisited:138 ld ix,(plxcurrentheroAddress)139 ld a,(MonsterHerocollidedWithOnMapAmount) 140 sub 192141 jr z,.LearningStone1142 dec a143 jr z,.LearningStone2144 dec a145 jr z,.LearningStone3146 dec a147 jr z,.LearningStone4148 dec a149 jr z,.LearningStone5150152 .LearningStone6:153 bit 6,(ix+HeroFireSpells)154 ret155 .LearningStone5:156 bit 7,(ix+HeroFireSpells)157 ret158 .LearningStone4:159 bit 4,(ix+HeroEarthSpells)160 ret161 .LearningStone3:162 bit 5,(ix+HeroEarthSpells)163 ret164 .LearningStone2:165 bit 6,(ix+HeroEarthSpells)166 ret167 .LearningStone1:168 bit 7,(ix+HeroEarthSpells)169 ret171CheckSpireOfWisdomAlreadyVisited:172 call .CheckSpireOfWisdomAlreadyVisited173 ld hl,TextSpireOfWisdom174 jp z,SetText 175 ld hl,TextSpireOfWisdomX176 jp SetText 178.CheckSpireOfWisdomAlreadyVisited:179 ld ix,(plxcurrentheroAddress)180 ld a,(MonsterHerocollidedWithOnMapAmount) 181 sub 192182 jr z,.SpireOfWisdom1183 dec a184 jr z,.SpireOfWisdom2185 dec a186 jr z,.SpireOfWisdom3187 dec a188 jr z,.SpireOfWisdom4189 dec a190 jr z,.SpireOfWisdom5191193 194 .SpireOfWisdom6:195 bit 4,(ix+HeroAirSpells)196 ret197 .SpireOfWisdom5:198 bit 5,(ix+HeroAirSpells)199 ret200 .SpireOfWisdom4:201 bit 6,(ix+HeroAirSpells)202 ret203 .SpireOfWisdom3:204 bit 7,(ix+HeroAirSpells)205 ret206 .SpireOfWisdom2:207 bit 4,(ix+HeroFireSpells)208 ret209 .SpireOfWisdom1:210 bit 5,(ix+HeroFireSpells)211 ret220CheckGuardTowerAlreadyVisited:221 ld a,(MonsterHerocollidedWithOnMapAmount)222 or a223 ld hl,TextGuardTowerX224 jp z,SetText 225 ld hl,TextGuardTower226 jp SetText 228LenghtTextItem: equ TextChestGems-TextChestRuby229TextChestRuby: db "     Chest      ",254,254 230 db " Chest with Riches",255232TextChestGems: db "     Chest      ",254,254 233 db " Chest with Gold  ",255235TextWood: db "     Wood       ",254,254 236 db " 5 Pieces of Wood ",255238TextOre: db "      Ore       ",254,254 239 db " 5 Pieces of Ore  ",255241TextGems: db "     Gems       ",254,254 242 db " 5 Pieces of Gems ",255244TextRubies: db "     Rubies     ",254,254 245 db "5 Pieces of Rubies",255247TextBagOfGold: db "   Bag of Gold  ",254,254 248 db " Contains 500 Gold",255250TextWaterWell: db "   Water Well   ",254,254 251 db " Restores Mobility",255253TextLearningStone: db "  Learning Stone",254,254 254 db "+1000 XP once only",255256TextSpireOfWisdom: db " Spire of Wisdom",254,254 257 db "+1 Stat once only ",255259TextScroll: db "  Ancient Scroll",254,254 260 db " Holds Enchantment",255262TextGuardTower: db "   Guard Tower  ",254,254 263 db " Rich in treasures",255265TextArtifact: db "  Ancient Relic ",254,254 266 db " A Mighty Artifact",255270TextLearningStoneX: db "  Learning Stone",254,254 271 db " Already Learned  ",255273TextSpireOfWisdomX: db " Spire of Wisdom",254,254 274 db " Already Learned  ",255276TextGuardTowerX: db "   Guard Tower  ",254,254 277 db "  Already Visited ",255280CheckIfAPlayerGotEliminated:281 282 ld a,(PlayerLostHeroInBattle?)283 dec a284 ret m285 ld (PlayerLostHeroInBattle?),a286 jp nz,DisableScrollScreen 288 289 call .CheckWhichPlayerLostAHero 290 push hl291 pop ix292 ld a,(ix+HeroStatus) 293 cp 255294 jr z,.NoMoreHeroesLeft295 cp 254296 ret nz 297 ld a,(ix+HeroX) 298 cp 255299 ret nz 300 .NoMoreHeroesLeft:302 303 ld a,(PlayerWhoLostAHeroInBattle?)304 ld b,a305 ld a,(Castle1+CastlePlayer)306 cp b307 ret z 308 ld a,(Castle2+CastlePlayer)309 cp b310 ret z 311 ld a,(Castle3+CastlePlayer)312 cp b313 ret z 314 ld a,(Castle4+CastlePlayer)315 cp b316 ret z 318 call ClearMapPage0AndMapPage1 320 ld a,1321 ld (GameStatus),a 323 call SetPlayerEliminatedWindowAndText324 call SwapAndSetPage 325 326 .engine:327 call PopulateControls 329334 ld a,(NewPrContr)335 and %0011 0000336 jr nz,.end337 jr .engine 339 .end:340 ld a,%0011 0000341 ld (ControlsOnInterrupt),a 342 jp CheckIfThereIsAPlayerWhoWonTheGame344.CheckWhichPlayerLostAHero:345 ld a,(PlayerWhoLostAHeroInBattle?)346 dec a347 ld hl,pl1hero1y 348 ret z349 dec a350 ld hl,pl2hero1y 351 ret z352 dec a353 ld hl,pl3hero1y 354 ret z355 ld hl,pl4hero1y 356 ret358CheckIfThereIsAPlayerWhoWonTheGame:359 ld c,0 361 ld b,1 362 ld a,(pl1hero1y+HeroStatus) 363 call .CheckPlayer364 ld b,2 365 ld a,(pl2hero1y+HeroStatus) 366 call .CheckPlayer367 ld b,3 368 ld a,(pl3hero1y+HeroStatus) 369 call .CheckPlayer370 ld b,4 371 ld a,(pl4hero1y+HeroStatus) 372 call .CheckPlayer374 dec c 375 ret nz377 call SwapAndSetPage 378 ld b,60379 .loop:380 halt381 djnz .loop382 call SetPlayerWonGameWindowAndText 383 call SwapAndSetPage 384 385 .engine:386 call PopulateControls 388393 ld a,(NewPrContr)394 and %0011 0000395 jr nz,.end396 jr .engine 398 .end:399 ld a,%0011 0000400 ld (ControlsOnInterrupt),a 401 ret402 403 .CheckPlayer:404 cp 255405 jr nz,.PlayerStillHasAHeroOrCastleLeft406 407 ld a,(Castle1+CastlePlayer)408 cp b409 jr z,.PlayerStillHasAHeroOrCastleLeft410 ld a,(Castle2+CastlePlayer)411 cp b412 jr z,.PlayerStillHasAHeroOrCastleLeft413 ld a,(Castle3+CastlePlayer)414 cp b415 jr z,.PlayerStillHasAHeroOrCastleLeft416 ld a,(Castle4+CastlePlayer)417 cp b418 ret nz420 .PlayerStillHasAHeroOrCastleLeft:421 inc c 422 ret428SetPlayerWonGameWindowAndText:429 ld hl,$4000 + (070*128) + (150/2) - 128430 ld de,$0000 + (060*128) + (058/2) - 128431 ld bc,$0000 + (040*256) + (088/2)432 ld a,HeroOverviewStatusGraphicsBlock 433 call CopyRamToVramCorrectedCastleOverview 435 ld a,(CampaignMode?)436 or a437 jr nz,.CampaignMode439 ld b,075 440 ld c,067 441 ld hl,TextPlayerWonGame1442 call SetText444 ld hl,1445 ld a,(pl1hero1y+HeroStatus) 446 cp 255447 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame448 ld hl,2449 ld a,(pl2hero1y+HeroStatus) 450 cp 255451 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame452 ld hl,3453 ld a,(pl2hero1y+HeroStatus) 454 cp 255455 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame456 ld hl,4457 .PlayerStillHasAHeroLeftAndWonTheGame:458 ld b,115 459 ld c,078 460 call SetNumber16BitCastle462 ld b,078 463 ld c,078 464 ld hl,TextPlayerWonGame2465 jp SetText467 .CampaignMode:468 ld a,(DaysToCompleteCampaign)469 ld l,a470 ld h,0471 ld de,(Date)472 xor a473 dec hl474 sbc hl,de475 jr nc,.CampaignFinishedInTime477 .CampaignFinishedOutOfTime:478 ld b,075 479 ld c,067 480 ld hl,TextOutOfTime481 call SetText483 ld b,078 484 ld c,078 485 ld hl,TextCampaignFailed486 jp SetText488 .CampaignFinishedInTime:489 ld b,075 490 ld c,067 491 ld hl,TextPlayerWonGame1492 call SetText494 ld a,1495 ld (CampaignFinished?),a496 ld b,078 497 ld c,078 498 ld hl,TextCampaignFinished499 call SetText501 502 ld a,(CampaignSelected)503 ld b,a504 ld a,(AmountOfCampaignsFinished)505 cp b506 ret nz507 inc a508 ld (AmountOfCampaignsFinished),a510 511 di 512 ld a,SaveDataBlock11-$100513 ld ($7100),a 515 516 ld hl,$8000517 call SectorErase 519 call CheckEraseDone521 522 ld hl,AmountOfCampaignsFinished523 ld de,$8000524 ld bc,1525 call FlashWrite526 ret528TextOutOfTime:529 db "Out Of Time",255530TextCampaignFailed: 531 db " You failed",254532 db "the Campaign",255534TextPlayerWonGame1: 535 db "Congratulations",255536TextPlayerWonGame2: 537 db "  Player",254538 db "Is Victorious",255540TextCampaignFinished: 541 db " You finished",254542 db "this Campaign",255544SetPlayerEliminatedWindowAndText:545 ld hl,$4000 + (070*128) + (150/2) - 128546 ld de,$0000 + (060*128) + (058/2) - 128547 ld bc,$0000 + (040*256) + (088/2)548 ld a,HeroOverviewStatusGraphicsBlock 549 call CopyRamToVramCorrectedCastleOverview 551 ld b,066 552 ld c,067 553 ld hl,TextPlayerEliminated1554 call SetText556 ld a,(PlayerWhoLostAHeroInBattle?)557 ld l,a558 ld h,0559 ld b,115 560 ld c,078 561 call SetNumber16BitCastle563 ld b,078 564 ld c,078 565 ld hl,TextPlayerEliminated2566 jp SetText569TextPlayerEliminated1: 570 db " Player Eliminated",255571TextPlayerEliminated2: 572 db "  Player",254573 db "Is Eliminated",255590DisplaySpireOfWisdomCOde:591 ld a,255 592 ld (PreviousButtonClicked),a 593 ld ix,GenericButtonTable594 ld (PreviousButtonClickedIX),ix596 call SetSpireOfWisdomButtons597 call SetSpireOfWisdomGraphics 598 call SetSpireOfWisdomText599 call SwapAndSetPage 600 call SetSpireOfWisdomGraphics 601 call SetSpireOfWisdomText602 .engine: 603 call SwapAndSetPage 604 call PopulateControls 606615 616 ld ix,GenericButtonTable617 call CheckButtonInteractionControlsNotOnInt619 call .CheckButtonClicked 621 622 ld ix,(PreviousButtonClickedIX) 623 ld a,(ix+GenericButtonStatus)624 push af625 ld a,(PreviousButtonClicked)626 cp 255627 jr z,.EndMarkButton 628 ld (ix+GenericButtonStatus),%1010 0011629 .EndMarkButton:630 632 ld ix,GenericButtonTable633 call .SetGenericButtons 635 636 pop af637 ld ix,(PreviousButtonClickedIX) 638 ld (ix+GenericButtonStatus),a639 641 halt642 jp .engine644 .CheckButtonClicked:645 ret nc646 ld a,%1100 0011647 ld (GenericButtonTable+(4*GenericButtonTableLenghtPerButton)),a 649 ld a,b650 cp 1 651 jp z,.VButton652 ld (PreviousButtonClicked),a653 ld (PreviousButtonClickedIX),ix654 ret664 .SetGenericButtons: 665 ld a,(ix+GenericButtonGfxBlock)666 ld (ButtonGfxBlockCopy),a668 ld b,(ix+GenericButtonAmountOfButtons)669 .loop:670 push bc671 call .Setbutton672 pop bc673 ld de,GenericButtonTableLenghtPerButton674 add ix,de676 djnz .loop677 ret679 .Setbutton:680 bit 7,(ix+GenericButtonStatus)681 ret z 683 bit 0,(ix+GenericButtonStatus) 684 res 0,(ix+GenericButtonStatus) 685 jr nz,.goCopyButton686 bit 1,(ix+GenericButtonStatus)687 res 1,(ix+GenericButtonStatus)688 ret z 689 .goCopyButton:691 ld l,(ix+GenericButton_SYSX_Ontouched)692 ld h,(ix+GenericButton_SYSX_Ontouched+1)693 bit 6,(ix+GenericButtonStatus)694 jr nz,.go 696 ld l,(ix+GenericButton_SYSX_MovedOver)697 ld h,(ix+GenericButton_SYSX_MovedOver+1)698 bit 5,(ix+GenericButtonStatus)699 jr nz,.go 701 ld l,(ix+GenericButton_SYSX_Clicked)702 ld h,(ix+GenericButton_SYSX_Clicked+1)703 .go:705 706 ld e,(ix+GenericButton_DYDX)707 ld d,(ix+GenericButton_DYDX+1)709 ld a,(ix+GenericButtonYbottom)710 sub a,(ix+GenericButtonYtop)711 ld b,a 712 ld a,(ix+GenericButtonXright)713 sub a,(ix+GenericButtonXleft)714 srl a 715 ld c,a 718 ld a,(ButtonGfxBlockCopy)720722 ld de,$8000 + ((212+16)*128) + (000/2) - 128 723 call CopyRamToVramCorrectedWithoutActivePageSetting 725 ld a,(activepage)726 xor 1727 ld (CopyCastleButton2+dPage),a729 ld a,(ix+GenericButtonXleft)730 ld (CopyCastleButton2+dx),a731 ld a,(ix+GenericButtonYtop)732 ld (CopyCastleButton2+dy),a734 ld a,(ix+GenericButtonYbottom)735 sub a,(ix+GenericButtonYtop)736 ld (CopyCastleButton2+ny),a738 ld a,(ix+GenericButtonXright)739 sub a,(ix+GenericButtonXleft)740 ld (CopyCastleButton2+nx),a742 ld a,212+16743 ld (CopyCastleButton2+sy),a745 ld hl,CopyCastleButton2746 call docopy748 ld a,212749 ld (CopyCastleButton2+sy),a751 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady752 call docopy753 ret755 .VButton:756 pop af 757 ld ix,(plxcurrentheroAddress)758 ld a,(PreviousButtonClicked)759 cp 2760 jr z,.SpellPowerSelected761 cp 3762 jr z,.IntelligenceSelected763 cp 4764 jr z,.DefenseSelected765768 .AttackSelected:769 inc (ix+HeroStatAttack)770 ret772 .DefenseSelected:773 inc (ix+HeroStatDefense)774 ret776 .IntelligenceSelected:777 inc (ix+HeroStatKnowledge)778 ret780 .SpellPowerSelected:781 inc (ix+HeroStatSpellDamage)782 ret784SetSpireOfWisdomButtons:785 ld hl,SetSpireOfWisdomButtonTable-2786 ld de,GenericButtonTable-2787 ld bc,2+(GenericButtonTableLenghtPerButton*05)788 ldir789 ret791SetSpireOfWisdomButtonTableGfxBlock: db SecondarySkillsButtonsBlock792SetSpireOfWisdomButtonTableAmountOfButtons: db 05793SetSpireOfWisdomButtonTable: 795 db %1100 0011 | dw $4000 + (132*128) + (090/2) - 128 | dw $4000 + (132*128) + (154/2) - 128 | dw $4000 + (000*128) + (240/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 796 797 db %1100 0011 | dw $4000 + (132*128) + (106/2) - 128 | dw $4000 + (132*128) + (170/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 798 799 db %1100 0011 | dw $4000 + (132*128) + (122/2) - 128 | dw $4000 + (132*128) + (186/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 128 800 801 db %1100 0011 | dw $4000 + (132*128) + (138/2) - 128 | dw $4000 + (132*128) + (202/2) - 128 | dw $4000 + (048*128) + (240/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 128 802 803 db %0000 0000 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 128 805.Button1Ytop: equ 026 + 24806.Button1YBottom: equ .Button1Ytop + 016807.Button1XLeft: equ 028 + 20808.Button1XRight: equ .Button1XLeft + 016810.Button2Ytop: equ 060 + 24811.Button2YBottom: equ .Button2Ytop + 016812.Button2XLeft: equ 028 + 20813.Button2XRight: equ .Button2XLeft + 016815.Button3Ytop: equ 026 + 24816.Button3YBottom: equ .Button3Ytop + 016817.Button3XLeft: equ 118 + 20818.Button3XRight: equ .Button3XLeft + 016820.Button4Ytop: equ 060 + 24821.Button4YBottom: equ .Button4Ytop + 016822.Button4XLeft: equ 118 + 20823.Button4XRight: equ .Button4XLeft + 016825.Button5Ytop: equ 146826.Button5YBottom: equ .Button5Ytop + 019827.Button5XLeft: equ 154828.Button5XRight: equ .Button5XLeft + 020830SetSpireOfWisdomText:831 call .SetFontPage0Y212 833 ld b,072+00 834 ld c,031+00 835 ld hl,TextSpireOfWisdom1836 call SetText 838 ld b,035+00 839 ld c,069+00 840 ld hl,TextPlus1Attack841 call SetText 843 ld b,034+00 844 ld c,103+00 845 ld hl,TextPlus1Defense846 call SetText 848 ld b,120+00 849 ld c,069+00 850 ld hl,TextPlus1Intelligence851 call SetText 853 ld b,119+00 854 ld c,103+00 855 ld hl,TextPlus1SpellPower856 call SetText 858 ld b,029+00 859 ld c,116+00 860 ld hl,TextSpireOfWisdom2861 jp SetText 863.SetFontPage0Y212: 864 ld hl,$4000 + (000*128) + (000/2) - 128865 ld de,$0000 + (212*128) + (000/2) - 128866 ld bc,$0000 + (006*256) + (256/2)867 ld a,CastleOverviewFontBlock 868 jp CopyRamToVramCorrectedWithoutActivePageSetting 871TextSpireOfWisdom1:872 db "Spire Of Wisdom",255873TextSpireOfWisdom2:874 db "Within the hallowed walls of the",254875 db "Spire of Wisdom, you stand poised",254876 db "to refine your essence.",254877 db "Choose your path: forge your",254878 db "attack, bolster your defense, ",254879 db "sharpen your intellect, or unlock",254880 db "the arcane depths of spellcraft.",255881TextPlus1Attack:882 db "+1 attack",255883TextPlus1Defense:884 db "+1 defense",255885TextPlus1Intelligence:886 db "+1 intelligence",255887TextPlus1SpellPower:888 db "+1 spell power",255890SetSpireOfWisdomGraphics:891 ld hl,$4000 + (000*128) + (000/2) - 128892 ld de,$0000 + (024*128) + (020/2) - 128893 ld bc,$0000 + (148*256) + (162/2)894 ld a,ScrollBlock 895 call CopyRamToVramCorrectedCastleOverview 897 ld hl,$4000 + (139*128) + (044/2) - 128898 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 128899 ld bc,$0000 + (060*256) + (104/2)900 ld a,DefeatBlock 901 call CopyRamToVramCorrectedCastleOverview 903 ld hl,$4000 + (068*128) + (210/2) - 128904 ld de,$0000 + ((024+19)*128) + ((020+70)/2) - 128905 ld bc,$0000 + (068*256) + (026/2)906 ld a,DefeatBlock 907 call CopyRamToVramCorrectedCastleOverview 909 ld hl,$4000 + (132*128) + (218/2) - 128910 ld de,$0000 + (146*128) + (154/2) - 128911 ld bc,$0000 + (019*256) + (020/2)912 ld a,SecondarySkillsButtonsBlock 913 jp CopyRamToVramCorrectedCastleOverview 932933SetNamesInSaveGameButtons:934 ld b,10 935 ld a,000 936 ld c,045+(0*13) 937 .loop:938 push af939 push bc940 call .SetName941 pop bc942 ld a,c943 add a,13944 ld c,a 945 pop af946 inc a 947 djnz .loop948 ei949 ret951 .SetName:952 add a,a953 add a,a 954 di955 ld ($7100),a 957 ld a,(amountofplayers-StartSaveGameData+$8000)958 ld d,a 959 ld hl,(WorldPointer-StartSaveGameData+$8000)961 ld a,($8000+HeroMove)962 cp 255963 ret z965 ld a,(slot.page12rom) 966 out ($a8),a 967 ld a,Loaderblock 968 call block34 970 push de972 ld de,ScenarioNameAddress+2+$4000 973 add hl,de974 push bc975 ld b,184 976 call SetText 977 pop bc979 inc hl 980 push bc981 ld b,017 982 call SetText 983 pop bc985 pop de987 ld h,000 988 ld l,d 989 push bc990 ld b,165 991 call SetNumber16BitCastle993 ld a,(DayOfMonthTientallen)994 ld hl,10995 ld d,0996 ld e,a997 call MultiplyHlWithDE 998 ld a,(DayOfMonthEenheden)999 ld e,a1000 ld d,01001 add hl,de1003 pop bc1004 push bc1005 ld b,112 1006 call SetNumber16BitCastle1008 ld hl,.TextSlash1009 pop bc1010 push bc1011 ld a,(PutLetter+dx)1012 ld b,a 1013 call SetText 1015 ld a,(MonthTientallen)1016 ld hl,101017 ld d,01018 ld e,a1019 call MultiplyHlWithDE 1020 ld a,(MonthEenheden)1021 ld e,a1022 ld d,01023 add hl,de1024 pop bc1025 push bc1026 ld a,(PutLetter+dx)1027 ld b,a 1028 call SetNumber16BitCastle1030 ld hl,.TextSlash1031 pop bc1032 push bc1033 ld a,(PutLetter+dx)1034 ld b,a 1035 call SetText 1037 ld a,(YearTientallen)1038 ld hl,101039 ld d,01040 ld e,a1041 call MultiplyHlWithDE 1042 ld a,(YearEenheden)1043 ld e,a1044 ld d,01045 add hl,de1046 ld de,1980 1047 add hl,de1049 pop bc1050 push bc1051 ld a,(PutLetter+dx)1052 ld b,a 1053 call SetNumber16BitCastle1054 pop bc 1055 ret1057.TextSlash: db "/",2551066SaveGameCode:1067 call SetSaveGameGraphics 1068 call SetNamesInSaveGameButtons1069 call SwapAndSetPage 1070 call SetSaveGameGraphics 1071 call SetNamesInSaveGameButtons1072 call CopyActivePageToInactivePageExtraRoutines1073 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1074 call docopy1076 call SetSaveGameButtons1077 ld a,2551078 ld (SaveGameSelected),a 1080 .engine: 1081 call SwapAndSetPage 1082 call PopulateControls 10841089 ld a,(NewPrContr)1090 bit 5,a 1091 ret nz1093 ld ix,GenericButtonTable1094 call CheckButtonInteractionControlsNotOnInt1095 call .CheckButtonClicked 1097 ld ix,GenericButtonTable1098 call DisplaySpireOfWisdomCOde.SetGenericButtons 1101 call SetNamesInSaveGameButtons11041105 jp .engine1107 .CheckClickOutOfWindow:1108 ld a,(NewPrContr)1109 bit 4,a 1110 ret z1112 ld a,(spat+0) 1113 cp DiskMenuWindowDY1114 jr c,.NotOutOfWindow1115 cp DiskMenuWindowDY+DiskMenuWindowNY1116 jr nc,.NotOutOfWindow1117 1118 ld a,(spat+1) 1119 add a,061120 cp DiskMenuWindowDX1121 jr c,.NotOutOfWindow1122 cp DiskMenuWindowDX+DiskMenuWindowNX1123 ret c1124 .NotOutOfWindow:1125 pop af1126 ret1132 .CheckButtonClicked:1133 ret nc1135 ld a,b1136 cp 21137 jp z,.SaveButtonPressed1138 cp 11139 jp z,.BackButtonPressed1141 .SaveGameSlotPressed:1142 ld a,12 1143 sub b1144 ld (SaveGameSelected),a 1146 call SetSaveGameButtons 1148 1149 ld a,(SaveGameSelected) 1150 ld d,01151 ld e,a1152 ld hl,GenericButtonTableLenghtPerButton1153 call MultiplyHlWithDE 1154 ld de,GenericButtonTable+11155 add hl,de1156 ex de,hl1157 ld hl,.ScenarioButtonConstantlyLit1158 ld bc,41159 ldir1160 ret1162 .SaveButtonPressed:1163 ld a,(SaveGameSelected) 1164 cp 2551165 ret z 1167 call SaveGameToFlash1169 pop af1170 ret1172 .BackButtonPressed:1173 pop af1174 ret1176 .ScenarioButtonConstantlyLit:1177 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1281178 .ScenarioButtonNormallyLit:1179 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1281195SetSaveGameGraphics:1196 ld hl,$4000 + (000*128) + (000/2) - 1281197 ld de,$0000 + (005*128) + (006/2) - 1281198 ld bc,$0000 + (192*256) + (192/2)1199 ld a,SaveGameBlock 1200 jp CopyRamToVramCorrectedCastleOverview 1203SetSaveGameButtons:1204 ld hl,SaveGameButtonTable-21205 ld de,GenericButtonTable-21206 ld bc,2+(GenericButtonTableLenghtPerButton*12)1207 ldir1208 ret1210 1211SaveGameButton1Ytop: equ 047 + (0*13) - 51212SaveGameButton1YBottom: equ SaveGameButton1Ytop + 0111213SaveGameButton1XLeft: equ 022 - 81214SaveGameButton1XRight: equ SaveGameButton1XLeft + 0961216SaveGameButton2Ytop: equ 047 + (1*13) - 51217SaveGameButton2YBottom: equ SaveGameButton2Ytop + 0111218SaveGameButton2XLeft: equ 022 - 81219SaveGameButton2XRight: equ SaveGameButton2XLeft + 0961221SaveGameButton3Ytop: equ 047 + (2*13) - 51222SaveGameButton3YBottom: equ SaveGameButton3Ytop + 0111223SaveGameButton3XLeft: equ 022 - 81224SaveGameButton3XRight: equ SaveGameButton3XLeft + 0961226SaveGameButton4Ytop: equ 047 + (3*13) - 51227SaveGameButton4YBottom: equ SaveGameButton4Ytop + 0111228SaveGameButton4XLeft: equ 022 - 81229SaveGameButton4XRight: equ SaveGameButton4XLeft + 0961231SaveGameButton5Ytop: equ 047 + (4*13) - 51232SaveGameButton5YBottom: equ SaveGameButton5Ytop + 0111233SaveGameButton5XLeft: equ 022 - 81234SaveGameButton5XRight: equ SaveGameButton5XLeft + 0961236SaveGameButton6Ytop: equ 047 + (5*13) - 51237SaveGameButton6YBottom: equ SaveGameButton6Ytop + 0111238SaveGameButton6XLeft: equ 022 - 81239SaveGameButton6XRight: equ SaveGameButton6XLeft + 0961241SaveGameButton7Ytop: equ 047 + (6*13) - 51242SaveGameButton7YBottom: equ SaveGameButton7Ytop + 0111243SaveGameButton7XLeft: equ 022 - 81244SaveGameButton7XRight: equ SaveGameButton7XLeft + 0961246SaveGameButton8Ytop: equ 047 + (7*13) - 51247SaveGameButton8YBottom: equ SaveGameButton8Ytop + 0111248SaveGameButton8XLeft: equ 022 - 81249SaveGameButton8XRight: equ SaveGameButton8XLeft + 0961251SaveGameButton9Ytop: equ 047 + (8*13) - 51252SaveGameButton9YBottom: equ SaveGameButton9Ytop + 0111253SaveGameButton9XLeft: equ 022 - 81254SaveGameButton9XRight: equ SaveGameButton9XLeft + 0961256SaveGameButton10Ytop: equ 047 + (9*13) - 51257SaveGameButton10YBottom: equ SaveGameButton10Ytop + 0111258SaveGameButton10XLeft: equ 022 - 81259SaveGameButton10XRight: equ SaveGameButton10XLeft + 0961261 1262SaveGameButton11Ytop: equ 1721263SaveGameButton11YBottom: equ SaveGameButton11Ytop + 0151264SaveGameButton11XLeft: equ 0781265SaveGameButton11XRight: equ SaveGameButton11XLeft + 0181267SaveGameButton12Ytop: equ 1721268SaveGameButton12YBottom: equ SaveGameButton12Ytop + 0151269SaveGameButton12XLeft: equ 1041270SaveGameButton12XRight: equ SaveGameButton12XLeft + 0181272SaveGameButtonTableGfxBlock: db ScenarioSelectButtonsBlock 1273SaveGameButtonTableAmountOfButtons: db 121274SaveGameButtonTable: 1276 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton1Ytop,SaveGameButton1YBottom,SaveGameButton1XLeft,SaveGameButton1XRight | dw $0000 + (SaveGameButton1Ytop*128) + (SaveGameButton1XLeft/2) - 128 1277 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton2Ytop,SaveGameButton2YBottom,SaveGameButton2XLeft,SaveGameButton2XRight | dw $0000 + (SaveGameButton2Ytop*128) + (SaveGameButton2XLeft/2) - 128 1278 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton3Ytop,SaveGameButton3YBottom,SaveGameButton3XLeft,SaveGameButton3XRight | dw $0000 + (SaveGameButton3Ytop*128) + (SaveGameButton3XLeft/2) - 1281279 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton4Ytop,SaveGameButton4YBottom,SaveGameButton4XLeft,SaveGameButton4XRight | dw $0000 + (SaveGameButton4Ytop*128) + (SaveGameButton4XLeft/2) - 1281280 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton5Ytop,SaveGameButton5YBottom,SaveGameButton5XLeft,SaveGameButton5XRight | dw $0000 + (SaveGameButton5Ytop*128) + (SaveGameButton5XLeft/2) - 1281281 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton6Ytop,SaveGameButton6YBottom,SaveGameButton6XLeft,SaveGameButton6XRight | dw $0000 + (SaveGameButton6Ytop*128) + (SaveGameButton6XLeft/2) - 1281282 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton7Ytop,SaveGameButton7YBottom,SaveGameButton7XLeft,SaveGameButton7XRight | dw $0000 + (SaveGameButton7Ytop*128) + (SaveGameButton7XLeft/2) - 1281283 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton8Ytop,SaveGameButton8YBottom,SaveGameButton8XLeft,SaveGameButton8XRight | dw $0000 + (SaveGameButton8Ytop*128) + (SaveGameButton8XLeft/2) - 1281284 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton9Ytop,SaveGameButton9YBottom,SaveGameButton9XLeft,SaveGameButton9XRight | dw $0000 + (SaveGameButton9Ytop*128) + (SaveGameButton9XLeft/2) - 1281285 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton10Ytop,SaveGameButton10YBottom,SaveGameButton10XLeft,SaveGameButton10XRight | dw $0000 + (SaveGameButton10Ytop*128) + (SaveGameButton10XLeft/2) - 1281287 1288 db %1100 0011 | dw $4000 + (152*128) + (000/2) - 128 | dw $4000 + (152*128) + (018/2) - 128 | dw $4000 + (152*128) + (036/2) - 128 | db SaveGameButton11Ytop,SaveGameButton11YBottom,SaveGameButton11XLeft,SaveGameButton11XRight | dw $0000 + (SaveGameButton11Ytop*128) + (SaveGameButton11XLeft/2) - 1281289 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db SaveGameButton12Ytop,SaveGameButton12YBottom,SaveGameButton12XLeft,SaveGameButton12XRight | dw $0000 + (SaveGameButton12Ytop*128) + (SaveGameButton12XLeft/2) - 1281303DiskMenuWindowDX: equ 0301304DiskMenuWindowDY: equ 0631305DiskMenuWindowNX: equ 1441306DiskMenuWindowNY: equ 0511307DisplayDiskMenuCOde:1308 call SetDiskMenuButtons1309 call SetDiskMenuGraphics 1310 call SetDayWeekMonthDiskMenu1311 call SwapAndSetPage 1312 call SetDiskMenuGraphics 1313 call SetDayWeekMonthDiskMenu1314 call CopyActivePageToInactivePageExtraRoutines1315 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1316 call docopy1318 .engine: 1319 call SwapAndSetPage 1320 call PopulateControls 13221327 ld a,(NewPrContr)1328 bit 5,a 1329 ret nz1331 ld ix,GenericButtonTable1332 call CheckButtonInteractionControlsNotOnInt1334 call .CheckButtonClicked 1336 ld ix,GenericButtonTable1337 call DisplaySpireOfWisdomCOde.SetGenericButtons 1338 call .CheckClickOutOfWindow 1340 halt1341 jp .engine1343 .CheckClickOutOfWindow:1344 ld a,(NewPrContr)1345 bit 4,a 1346 ret z1348 ld a,(spat+0) 1349 cp DiskMenuWindowDY1350 jr c,.NotOutOfWindow1351 cp DiskMenuWindowDY+DiskMenuWindowNY1352 jr nc,.NotOutOfWindow1353 1354 ld a,(spat+1) 1355 add a,061356 cp DiskMenuWindowDX1357 jr c,.NotOutOfWindow1358 cp DiskMenuWindowDX+DiskMenuWindowNX1359 ret c1360 .NotOutOfWindow:1361 pop af1362 ret1364 .CheckButtonClicked:1365 ret nc1366 pop af 1367 ld a,b1368 cp 1 1369 jp nz,ConfirmMainMenuCOde1370 jp SaveGameCode1372SetDayWeekMonthDiskMenu:1373 1374 ld bc,(Date)1375 ld de,7 1376 call DivideBCbyDE 1377 inc hl 1378 ld b,069+05 1379 ld c,053+17 1380 call SetNumber16BitCastle1382 1383 ld bc,(Date)1384 ld de,7 1385 call DivideBCbyDE 1387 1388 ld de,4 1389 call DivideBCbyDE 1390 push bc 1391 inc hl1392 ld b,104+05 1393 ld c,053+17 1394 call SetNumber16BitCastle1396 1397 pop hl1398 inc hl1399 ld b,142+05 1400 ld c,053+17 1401 call SetNumber16BitCastle1402 ret1404ConfirmMainMenuCOde:1405 call SetConfirmMainMenuButtons1406 call SetConfirmMainMenuGraphics 1407 call SwapAndSetPage 1408 call SetConfirmMainMenuGraphics 1409 call CopyActivePageToInactivePageExtraRoutines1410 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1411 call docopy1413 .engine: 1414 call SwapAndSetPage 1415 call PopulateControls 14171422 ld a,(NewPrContr)1423 bit 5,a 1424 ret nz1426 ld ix,GenericButtonTable1427 call CheckButtonInteractionControlsNotOnInt1429 call .CheckButtonClicked 1431 ld ix,GenericButtonTable1432 call DisplaySpireOfWisdomCOde.SetGenericButtons 1434 call .CheckClickOutOfWindow 1436 halt1437 jp .engine1439 .CheckClickOutOfWindow:1440 ld a,(NewPrContr)1441 bit 4,a 1442 ret z1444 ld a,(spat+0) 1445 cp DiskMenuWindowDY1446 jr c,.NotOutOfWindow1447 cp DiskMenuWindowDY+DiskMenuWindowNY1448 jr nc,.NotOutOfWindow1449 1450 ld a,(spat+1) 1451 add a,061452 cp DiskMenuWindowDX1453 jr c,.NotOutOfWindow1454 cp DiskMenuWindowDX+DiskMenuWindowNX1455 ret c1456 .NotOutOfWindow:1457 pop af1458 jp DisplayDiskMenuCOde1461 .CheckButtonClicked:1462 ret nc1463 pop af 1464 ld a,b1465 cp 1 1466 jp z,DisplayDiskMenuCOde1467 ld a,11468 ld (BackToMainMenu?),a1469 ret1471SetConfirmMainMenuButtons:1472 ld hl,SetConfirmMainMenuuButtonTable-21473 ld de,GenericButtonTable-21474 ld bc,2+(GenericButtonTableLenghtPerButton*02)1475 ldir1476 ret1478SetConfirmMainMenuuButtonTableGfxBlock: db RetreatBlock1479SetConfirmMainMenuuButtonTableAmountOfButtons: db 021480SetConfirmMainMenuuButtonTable: 1482 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1483 1484 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1486.Button1Ytop: equ 0881487.Button1YBottom: equ .Button1Ytop + 0191488.Button1XLeft: equ 0481489.Button1XRight: equ .Button1XLeft + 0201491.Button2Ytop: equ 0891492.Button2YBottom: equ .Button2Ytop + 0181493.Button2XLeft: equ 048+0901494.Button2XRight: equ .Button2XLeft + 0201496SetDiskMenuButtons:1497 ld hl,SetDiskMenuButtonTable-21498 ld de,GenericButtonTable-21499 ld bc,2+(GenericButtonTableLenghtPerButton*02)1500 ldir1501 ret1503SetDiskMenuButtonTableGfxBlock: db DiskMenuBlock1504SetDiskMenuButtonTableAmountOfButtons: db 021505SetDiskMenuButtonTable: 1507 db %1100 0011 | dw $4000 + (101*128) + (000/2) - 128 | dw $4000 + (112*128) + (000/2) - 128 | dw $4000 + (123*128) + (000/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1508 1509 db %1100 0011 | dw $4000 + (101*128) + (128/2) - 128 | dw $4000 + (112*128) + (128/2) - 128 | dw $4000 + (123*128) + (128/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1511.Button1Ytop: equ 0811512.Button1YBottom: equ .Button1Ytop + 0111513.Button1XLeft: equ 0381514.Button1XRight: equ .Button1XLeft + 1281516.Button2Ytop: equ 0951517.Button2YBottom: equ .Button2Ytop + 0111518.Button2XLeft: equ 0381519.Button2XRight: equ .Button2XLeft + 1281521SetConfirmMainMenuGraphics:1522 ld hl,$4000 + (050*128) + (000/2) - 1281523 ld de,$0000 + (063*128) + (030/2) - 1281524 ld bc,$0000 + (051*256) + (144/2)1525 ld a,DiskMenuBlock 1526 jp CopyRamToVramCorrectedCastleOverview 1528SetDiskMenuGraphics:1529 ld hl,$4000 + (000*128) + (000/2) - 1281530 ld de,$0000 + (063*128) + (030/2) - 1281531 ld bc,$0000 + (051*256) + (144/2)1532 ld a,DiskMenuBlock 1533 jp CopyRamToVramCorrectedCastleOverview 1535CopyActivePageToInactivePageExtraRoutines:1536 ld a,(activepage) 1537 or a1538 ld hl,.CopyPage0toPage11539 jp z,docopy1540 ld hl,.CopyPage1toPage01541 jp docopy1543.CopyPage1toPage0:1544 db 000,000,016,0011545 db 000,000,016,0001546 db 000,001,212-16,0001547 db 000,000,$d0 1548.CopyPage0toPage1:1549 db 000,000,016,0001550 db 000,000,016,0011551 db 000,001,212-16,0001552 db 000,000,$d0 1559DisplayGuardTowerRewardCOde:1560call screenon1562 ld bc,SFX_GuardTowerReward1563 call RePlayerSFX_PlayCh1 1565 call SetResourcesCurrentPlayerinIX 1567 ld l,(ix+0)1568 ld h,(ix+1) 1569 ld de,(GuardTowerReward)1570 add hl,de1571 jr c,.EndCheckOverFlow1572 ld (ix+0),l1573 ld (ix+1),h 1574 .EndCheckOverFlow:1575 15761578 call SetGuardTowerRewardVButton1580 call SetGuardTowerRewardGraphics 1581 call SetGuardTowerRewardText1582 call SwapAndSetPage 1583 call CopyActivePageToInactivePage1584 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1585 call DoCopy1587 .engine: 1588 call SwapAndSetPage 1589 call PopulateControls 15911596 ld a,(NewPrContr)1597 bit 5,a 1598 ret nz1600 ld ix,GenericButtonTable1601 call CheckButtonInteractionControlsNotOnInt1602 ret c1604 ld ix,GenericButtonTable1605 call InitiateBattle.SetGenericButtons 1607 call .CheckEndWindow 1609 halt1610 jp .engine1613 .CheckEndWindow:1614 ld a,(NewPrContr)1615 bit 4,a 1616 ret z1618 ld a,(spat+0) 1619 cp 044 1620 jr c,.Exit1621 cp 044+095 1622 jr nc,.Exit1623 1624 ld a,(spat+1) 1626 add a,061628 cp 030 1629 jr c,.Exit1630 cp 030+144 1631 ret c1633 .Exit:1634 pop af1635 ret1637SetGuardTowerRewardVButton:1638 ld hl,SetGuardTowerRewardVButtonTable-21639 ld de,GenericButtonTable-21640 ld bc,2+(GenericButtonTableLenghtPerButton*01)1641 ldir1642 ret1644SetGuardTowerRewardVButtonTableGfxBlock: db PlayerStartTurnBlock1645SetGuardTowerRewardVButtonTableAmountOfButtons: db 011646SetGuardTowerRewardVButtonTable: 1647 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1649.Button1Ytop: equ 1131650.Button1YBottom: equ .Button1Ytop + 0191651.Button1XLeft: equ 1461652.Button1XRight: equ .Button1XLeft + 0201654SetGuardTowerRewardText:1655 call SetFontPage0Y212BattleCode 1657 ld b,060+00 1658 ld c,051+00 1659 ld hl,TextGuardTowerReward11660 call SetText 1662 ld b,040+00 1663 ld c,064+00 1664 ld hl,TextGuardTowerReward21665 call SetText 1667 ld hl,(GuardTowerReward)1668 ld b,080+00 1669 ld c,100+00 1670 call SetNumber16BitCastle1672 ld b,106+00 1673 ld c,100+00 1674 ld hl,TextGuardTowerReward31675 call SetText 1676 ret1678TextGuardTowerReward1:1679 db "Guard Tower Reward",2551680TextGuardTowerReward2:1681 db "The dust of battle settles,",2541682 db "revealing a reward within the",2541683 db "conquered tower:",2551684TextGuardTowerReward3:1685 db "Gold",2551694SetGuardTowerRewardGraphics:1695 ld hl,$4000 + (000*128) + (000/2) - 1281696 ld de,$0000 + (44*128) + (030/2) - 1281697 ld bc,$0000 + (095*256) + (144/2)1698 ld a,PlayerStartTurnBlock 1699 jp CopyRamToVramCorrectedCastleOverview 1701DisplayGuardTowerCOde:1702 call SetGuardTowerButtons1703 call SetGuardTowerGraphics 1704 call SetGuardTowerText1705 call SwapAndSetPage 1706 call CopyActivePageToInactivePage1707 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1708 call DoCopy1710 ld bc,SFX_GuardTowerEncountered1711 call RePlayerSFX_PlayCh1 17131715 1716 .engine: 1717 call SwapAndSetPage 1718 call PopulateControls 17201725 ld a,(NewPrContr)1726 bit 5,a 1727 ret nz1729 ld ix,GenericButtonTable1730 call CheckButtonInteractionControlsNotOnInt1732 call .CheckButtonClicked 1734 ld ix,GenericButtonTable1735 call InitiateBattle.SetGenericButtons 1737 halt1738 jp .engine1740 .CheckButtonClicked:1741 ret nc1742 pop af 1744 ld a,b1745 cp 11746 ret nz 1747 ld a,1 1748 ld (FightGuardTowerMonster?),a 1749 ret1751SetGuardTowerButtons:1752 ld hl,SetGuardTowerButtonTable-21753 ld de,GenericButtonTable-21754 ld bc,2+(GenericButtonTableLenghtPerButton*02)1755 ldir1756 ret1758SetGuardTowerButtonTableGfxBlock: db RetreatBlock1759SetGuardTowerButtonTableAmountOfButtons: db 021760SetGuardTowerButtonTable: 1762 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1763 1764 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1766.Button1Ytop: equ 1481767.Button1YBottom: equ .Button1Ytop + 0181768.Button1XLeft: equ 0721769.Button1XRight: equ .Button1XLeft + 0201771.Button2Ytop: equ 1471772.Button2YBottom: equ .Button2Ytop + 0191773.Button2XLeft: equ 1121774.Button2XRight: equ .Button2XLeft + 0201776SetFontPage0Y212BattleCode: 1777 ld hl,$4000 + (000*128) + (000/2) - 1281778 ld de,$0000 + (212*128) + (000/2) - 1281779 ld bc,$0000 + (006*256) + (256/2)1780 ld a,CastleOverviewFontBlock 1781 jp CopyRamToVramCorrectedWithoutActivePageSetting 1784SetGuardTowerText:1785 call SetFontPage0Y212BattleCode 1787 ld b,078+00 1788 ld c,031+00 1789 ld hl,TextGuardTower11790 call SetText 1792 ld b,027+00 1793 ld c,041+00 1794 ld hl,TextGuardTower21795 call SetText 1797 ld b,040+00 1798 ld c,140+00 1799 ld hl,TextGuardTower31800 call SetText 1802 call SetAmountInHL1803 ld b,121+00 1804 ld c,055+00 1805 call SetText 1806 1807 ld a,(GuardTowerMonsterLevel)1808 ld l,a1809 ld h,01810 ld b,047+00 1811 ld c,062+00 1812 call SetNumber16BitCastle1813 1814 xor a 1815 ld (MonsterHerocollidedWithOnMap),a1817 call SetMonsterTableInIYNeutralMonster1818 push iy1819 pop hl1820 ld de,MonsterTableName1821 add hl,de1822 ld b,057+00 1823 ld c,062+00 1826 push bc1827 call SetText 1828 pop bc1830 dec hl1831 ld a,(hl)1832 cp "s"1833 ret z1835 ld hl,.TextS1836 ld a,(PutLetter+dx) 1837 ld b,a 1838 jp SetText 1840.TextS: db "s.",2551842TextGuardTower1:1843 db "Guard Tower",2551844TextGuardTower2:1845 db "A majestic ancient guard tower rises  ",2541846 db "before you, concealing treasures ",2541847 db "untold. But defended by",2541848 db "level  ",2551849TextGuardTower3:1850 db "Dare you face them in combat?",2551852SetGuardTowerGraphics:1853 ld hl,$4000 + (000*128) + (000/2) - 1281854 ld de,$0000 + (024*128) + (020/2) - 1281855 ld bc,$0000 + (148*256) + (162/2)1856 ld a,ScrollBlock 1857 call CopyRamToVramCorrectedCastleOverview 1859 ld hl,$4000 + (139*128) + (044/2) - 1281860 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1281861 ld bc,$0000 + (060*256) + (104/2)1862 ld a,DefeatBlock 1863 call CopyRamToVramCorrectedCastleOverview 1865 ld hl,$4000 + (000*128) + (150/2) - 1281866 ld de,$0000 + ((024+44)*128) + ((020+56)/2) - 1281867 ld bc,$0000 + (070*256) + (064/2)1868 ld a,HeroOverviewStatusGraphicsBlock 1869 jp CopyRamToVramCorrectedCastleOverview 1870 1874 MSXHeroes.asm 1227 ds $8000-$,$ff1228dephase12301233MonsterAddressesForBattle1Block: equ $541234phase $80001235 MonsterAddressesForBattle1.asm1MonsterTableSpriteSheetBlock: equ 162MonsterTableNX: equ MonsterTableSpriteSheetBlock+13MonsterTableNY: equ MonsterTableNX+14MonsterTableCostGold: equ MonsterTableNY+15MonsterTableCostGems: equ MonsterTableCostGold+16MonsterTableCostRubies: equ MonsterTableCostGems+17MonsterTableHp: equ MonsterTableCostRubies+18MonsterTableSpeed: equ MonsterTableHp+19MonsterTableAttack: equ MonsterTableSpeed+110MonsterTableDefense: equ MonsterTableAttack+111MonsterTableGrowth: equ MonsterTableDefense+112MonsterTableDamage: equ MonsterTableGrowth+113MonsterTableSpecialAbility: equ MonsterTableDamage+114MonsterTableName: equ MonsterTableSpecialAbility+115RangedMonster: equ 12817LengthMonsterAddressesTable: equ Monster002Table-Monster001Table19Level1Unit: equ %0000 000020Level2Unit: equ %0010 000021Level3Unit: equ %0100 000022Level4Unit: equ %0110 000023Level5Unit: equ %1000 000024Level6Unit: equ %1010 000029MonsterAddressesForBattle1Data.asm12DragonSlayerUnitLevel1Number: equ 303DragonSlayerUnitLevel1Damage: equ 24DragonSlayerUnitLevel1Attack: equ 45DragonSlayerUnitLevel1Defense: equ 56DragonSlayerUnitLevel1HP: equ 107DragonSlayerUnitLevel1Speed: equ 48DragonSlayerUnitLevel1Growth: equ 149DragonSlayerUnitLevel1CostGold: equ 80/1010DragonSlayerUnitLevel1CostGems: equ 00+Level1Unit11DragonSlayerUnitLevel1CostRubies: equ 013DragonSlayerUnitLevel2Number: equ 2714DragonSlayerUnitLevel2Damage: equ 315DragonSlayerUnitLevel2Attack: equ 616DragonSlayerUnitLevel2Defense: equ 617DragonSlayerUnitLevel2HP: equ 1118DragonSlayerUnitLevel2Speed: equ 419DragonSlayerUnitLevel2Growth: equ 920DragonSlayerUnitLevel2CostGold: equ 100/1021DragonSlayerUnitLevel2CostGems: equ 00+Level2Unit22DragonSlayerUnitLevel2CostRubies: equ 024DragonSlayerUnitLevel3Number: equ 2925DragonSlayerUnitLevel3Damage: equ 526DragonSlayerUnitLevel3Attack: equ 827DragonSlayerUnitLevel3Defense: equ 828DragonSlayerUnitLevel3HP: equ 2529DragonSlayerUnitLevel3Speed: equ 630DragonSlayerUnitLevel3Growth: equ 731DragonSlayerUnitLevel3CostGold: equ 200/1032DragonSlayerUnitLevel3CostGems: equ 00+Level3Unit33DragonSlayerUnitLevel3CostRubies: equ 035DragonSlayerUnitLevel4Number: equ 3136DragonSlayerUnitLevel4Damage: equ 837DragonSlayerUnitLevel4Attack: equ 1038DragonSlayerUnitLevel4Defense: equ 1239DragonSlayerUnitLevel4HP: equ 3540DragonSlayerUnitLevel4Speed: equ 541DragonSlayerUnitLevel4Growth: equ 442DragonSlayerUnitLevel4CostGold: equ 300/1043DragonSlayerUnitLevel4CostGems: equ 00+Level4Unit44DragonSlayerUnitLevel4CostRubies: equ 046DragonSlayerUnitLevel5Number: equ 3547DragonSlayerUnitLevel5Damage: equ 1148DragonSlayerUnitLevel5Attack: equ 1249DragonSlayerUnitLevel5Defense: equ 1350DragonSlayerUnitLevel5HP: equ 4051DragonSlayerUnitLevel5Speed: equ 552DragonSlayerUnitLevel5Growth: equ 253DragonSlayerUnitLevel5CostGold: equ 400/1054DragonSlayerUnitLevel5CostGems: equ 00+Level5Unit55DragonSlayerUnitLevel5CostRubies: equ 057DragonSlayerUnitLevel6Number: equ 3358DragonSlayerUnitLevel6Damage: equ 2059DragonSlayerUnitLevel6Attack: equ 1660DragonSlayerUnitLevel6Defense: equ 1561DragonSlayerUnitLevel6HP: equ 100+5062DragonSlayerUnitLevel6Speed: equ 763DragonSlayerUnitLevel6Growth: equ 164DragonSlayerUnitLevel6CostGold: equ 1000/1065DragonSlayerUnitLevel6CostGems: equ 00+Level6Unit66DragonSlayerUnitLevel6CostRubies: equ 272UsasUnitLevel1Number: equ 5173UsasUnitLevel1Damage: equ 274UsasUnitLevel1Attack: equ 575UsasUnitLevel1Defense: equ 376UsasUnitLevel1HP: equ 877UsasUnitLevel1Speed: equ 678UsasUnitLevel1Growth: equ 1479UsasUnitLevel1CostGold: equ 70/1080UsasUnitLevel1CostGems: equ 00+Level1Unit81UsasUnitLevel1CostRubies: equ 083UsasUnitLevel2Number: equ 5284UsasUnitLevel2Damage: equ 385UsasUnitLevel2Attack: equ 686UsasUnitLevel2Defense: equ 787UsasUnitLevel2HP: equ 2088UsasUnitLevel2Speed: equ 389UsasUnitLevel2Growth: equ 890UsasUnitLevel2CostGold: equ 120/1091UsasUnitLevel2CostGems: equ 00+Level2Unit92UsasUnitLevel2CostRubies: equ 094UsasUnitLevel3Number: equ 5495UsasUnitLevel3Damage: equ 496UsasUnitLevel3Attack: equ 997UsasUnitLevel3Defense: equ 798UsasUnitLevel3HP: equ 2599UsasUnitLevel3Speed: equ 6100UsasUnitLevel3Growth: equ 7101UsasUnitLevel3CostGold: equ 200/10102UsasUnitLevel3CostGems: equ 00+Level3Unit103UsasUnitLevel3CostRubies: equ 0105UsasUnitLevel4Number: equ 48106UsasUnitLevel4Damage: equ 7107UsasUnitLevel4Attack: equ 9108UsasUnitLevel4Defense: equ 8109UsasUnitLevel4HP: equ 30110UsasUnitLevel4Speed: equ 8111UsasUnitLevel4Growth: equ 5112UsasUnitLevel4CostGold: equ 250/10113UsasUnitLevel4CostGems: equ 00+Level4Unit114UsasUnitLevel4CostRubies: equ 0116UsasUnitLevel5Number: equ 49 117UsasUnitLevel5Damage: equ 10118UsasUnitLevel5Attack: equ 9119UsasUnitLevel5Defense: equ 12120UsasUnitLevel5HP: equ 65121UsasUnitLevel5Speed: equ 4122UsasUnitLevel5Growth: equ 2123UsasUnitLevel5CostGold: equ 425/10124UsasUnitLevel5CostGems: equ 00+Level5Unit125UsasUnitLevel5CostRubies: equ 1127UsasUnitLevel6Number: equ 50128UsasUnitLevel6Damage: equ 20129UsasUnitLevel6Attack: equ 15130UsasUnitLevel6Defense: equ 14131UsasUnitLevel6HP: equ 90+50132UsasUnitLevel6Speed: equ 7133UsasUnitLevel6Growth: equ 1134UsasUnitLevel6CostGold: equ 850/10135UsasUnitLevel6CostGems: equ 02+Level6Unit136UsasUnitLevel6CostRubies: equ 0140SDSnatcherUnitLevel1Number: equ 6141SDSnatcherUnitLevel1Damage: equ 2142SDSnatcherUnitLevel1Attack: equ 3143SDSnatcherUnitLevel1Defense: equ 3144SDSnatcherUnitLevel1HP: equ 4145SDSnatcherUnitLevel1Speed: equ 4146SDSnatcherUnitLevel1Growth: equ 16147SDSnatcherUnitLevel1CostGold: equ 30/10148SDSnatcherUnitLevel1CostGems: equ 00+Level1Unit149SDSnatcherUnitLevel1CostRubies: equ 0151SDSnatcherUnitLevel2Number: equ 5152SDSnatcherUnitLevel2Damage: equ 3153SDSnatcherUnitLevel2Attack: equ 6154SDSnatcherUnitLevel2Defense: equ 6155SDSnatcherUnitLevel2HP: equ 16156SDSnatcherUnitLevel2Speed: equ 6157SDSnatcherUnitLevel2Growth: equ 9158SDSnatcherUnitLevel2CostGold: equ 130/10159SDSnatcherUnitLevel2CostGems: equ 00+Level2Unit160SDSnatcherUnitLevel2CostRubies: equ 0162SDSnatcherUnitLevel3Number: equ 1163SDSnatcherUnitLevel3Damage: equ 5164SDSnatcherUnitLevel3Attack: equ 7165SDSnatcherUnitLevel3Defense: equ 10166SDSnatcherUnitLevel3HP: equ 30167SDSnatcherUnitLevel3Speed: equ 3168SDSnatcherUnitLevel3Growth: equ 6169SDSnatcherUnitLevel3CostGold: equ 250/10170SDSnatcherUnitLevel3CostGems: equ 00+Level3Unit171SDSnatcherUnitLevel3CostRubies: equ 0173SDSnatcherUnitLevel4Number: equ 2174SDSnatcherUnitLevel4Damage: equ 8175SDSnatcherUnitLevel4Attack: equ 11176SDSnatcherUnitLevel4Defense: equ 8177SDSnatcherUnitLevel4HP: equ 35178SDSnatcherUnitLevel4Speed: equ 6179SDSnatcherUnitLevel4Growth: equ 4180SDSnatcherUnitLevel4CostGold: equ 350/10181SDSnatcherUnitLevel4CostGems: equ 00+Level4Unit182SDSnatcherUnitLevel4CostRubies: equ 0184SDSnatcherUnitLevel5Number: equ 3185SDSnatcherUnitLevel5Damage: equ 15186SDSnatcherUnitLevel5Attack: equ 12187SDSnatcherUnitLevel5Defense: equ 12188SDSnatcherUnitLevel5HP: equ 40189SDSnatcherUnitLevel5Speed: equ 7190SDSnatcherUnitLevel5Growth: equ 3191SDSnatcherUnitLevel5CostGold: equ 550/10192SDSnatcherUnitLevel5CostGems: equ 00+Level5Unit193SDSnatcherUnitLevel5CostRubies: equ 0195SDSnatcherUnitLevel6Number: equ 4196SDSnatcherUnitLevel6Damage: equ 20197SDSnatcherUnitLevel6Attack: equ 16198SDSnatcherUnitLevel6Defense: equ 13199SDSnatcherUnitLevel6HP: equ 115+50200SDSnatcherUnitLevel6Speed: equ 5201SDSnatcherUnitLevel6Growth: equ 1202SDSnatcherUnitLevel6CostGold: equ 850/10203SDSnatcherUnitLevel6CostGems: equ 02+Level6Unit204SDSnatcherUnitLevel6CostRubies: equ 0207CastleVaniaUnitLevel1Number: equ 25208CastleVaniaUnitLevel1Damage: equ 2209CastleVaniaUnitLevel1Attack: equ 2210CastleVaniaUnitLevel1Defense: equ 3211CastleVaniaUnitLevel1HP: equ 4212CastleVaniaUnitLevel1Speed: equ 5213CastleVaniaUnitLevel1Growth: equ 15214CastleVaniaUnitLevel1CostGold: equ 50/10215CastleVaniaUnitLevel1CostGems: equ 00+Level1Unit216CastleVaniaUnitLevel1CostRubies: equ 0218CastleVaniaUnitLevel2Number: equ 23219CastleVaniaUnitLevel2Damage: equ 3220CastleVaniaUnitLevel2Attack: equ 6221CastleVaniaUnitLevel2Defense: equ 4222CastleVaniaUnitLevel2HP: equ 16223CastleVaniaUnitLevel2Speed: equ 4224CastleVaniaUnitLevel2Growth: equ 8225CastleVaniaUnitLevel2CostGold: equ 125/10226CastleVaniaUnitLevel2CostGems: equ 00+Level2Unit227CastleVaniaUnitLevel2CostRubies: equ 0229CastleVaniaUnitLevel3Number: equ 18230CastleVaniaUnitLevel3Damage: equ 5231CastleVaniaUnitLevel3Attack: equ 10232CastleVaniaUnitLevel3Defense: equ 6233CastleVaniaUnitLevel3HP: equ 25234CastleVaniaUnitLevel3Speed: equ 7235CastleVaniaUnitLevel3Growth: equ 5236CastleVaniaUnitLevel3CostGold: equ 200/10237CastleVaniaUnitLevel3CostGems: equ 00+Level3Unit238CastleVaniaUnitLevel3CostRubies: equ 0240CastleVaniaUnitLevel4Number: equ 26241CastleVaniaUnitLevel4Damage: equ 8242CastleVaniaUnitLevel4Attack: equ 10243CastleVaniaUnitLevel4Defense: equ 10244CastleVaniaUnitLevel4HP: equ 25245CastleVaniaUnitLevel4Speed: equ 3246CastleVaniaUnitLevel4Growth: equ 4247CastleVaniaUnitLevel4CostGold: equ 250/10248CastleVaniaUnitLevel4CostGems: equ 00+Level4Unit249CastleVaniaUnitLevel4CostRubies: equ 0251CastleVaniaUnitLevel5Number: equ 20252CastleVaniaUnitLevel5Damage: equ 14253CastleVaniaUnitLevel5Attack: equ 13254CastleVaniaUnitLevel5Defense: equ 13255CastleVaniaUnitLevel5HP: equ 45256CastleVaniaUnitLevel5Speed: equ 6257CastleVaniaUnitLevel5Growth: equ 3258CastleVaniaUnitLevel5CostGold: equ 500/10259CastleVaniaUnitLevel5CostGems: equ 00+Level5Unit260CastleVaniaUnitLevel5CostRubies: equ 0262CastleVaniaUnitLevel6Number: equ 24263CastleVaniaUnitLevel6Damage: equ 20264CastleVaniaUnitLevel6Attack: equ 16265CastleVaniaUnitLevel6Defense: equ 12266CastleVaniaUnitLevel6HP: equ 90+50267CastleVaniaUnitLevel6Speed: equ 9268CastleVaniaUnitLevel6Growth: equ 1269CastleVaniaUnitLevel6CostGold: equ 900/10270CastleVaniaUnitLevel6CostGems: equ 00+Level6Unit271CastleVaniaUnitLevel6CostRubies: equ 2276PsychoWorldUnitLevel1Number: equ 66277PsychoWorldUnitLevel1Damage: equ 2278PsychoWorldUnitLevel1Attack: equ 5279PsychoWorldUnitLevel1Defense: equ 4280PsychoWorldUnitLevel1HP: equ 6281PsychoWorldUnitLevel1Speed: equ 4282PsychoWorldUnitLevel1Growth: equ 12283PsychoWorldUnitLevel1CostGold: equ 60/10284PsychoWorldUnitLevel1CostGems: equ 00+Level1Unit285PsychoWorldUnitLevel1CostRubies: equ 0287PsychoWorldUnitLevel2Number: equ 63288PsychoWorldUnitLevel2Damage: equ 3289PsychoWorldUnitLevel2Attack: equ 5290PsychoWorldUnitLevel2Defense: equ 5291PsychoWorldUnitLevel2HP: equ 15292PsychoWorldUnitLevel2Speed: equ 3293PsychoWorldUnitLevel2Growth: equ 8294PsychoWorldUnitLevel2CostGold: equ 100/10295PsychoWorldUnitLevel2CostGems: equ 00+Level2Unit296PsychoWorldUnitLevel2CostRubies: equ 0298PsychoWorldUnitLevel3Number: equ 64299PsychoWorldUnitLevel3Damage: equ 5300PsychoWorldUnitLevel3Attack: equ 7301PsychoWorldUnitLevel3Defense: equ 7302PsychoWorldUnitLevel3HP: equ 18303PsychoWorldUnitLevel3Speed: equ 5304PsychoWorldUnitLevel3Growth: equ 7305PsychoWorldUnitLevel3CostGold: equ 200/10306PsychoWorldUnitLevel3CostGems: equ 00+Level3Unit307PsychoWorldUnitLevel3CostRubies: equ 0309PsychoWorldUnitLevel4Number: equ 65310PsychoWorldUnitLevel4Damage: equ 7311PsychoWorldUnitLevel4Attack: equ 10312PsychoWorldUnitLevel4Defense: equ 9313PsychoWorldUnitLevel4HP: equ 30314PsychoWorldUnitLevel4Speed: equ 6315PsychoWorldUnitLevel4Growth: equ 4316PsychoWorldUnitLevel4CostGold: equ 360/10317PsychoWorldUnitLevel4CostGems: equ 00+Level4Unit318PsychoWorldUnitLevel4CostRubies: equ 0320PsychoWorldUnitLevel5Number: equ 69321PsychoWorldUnitLevel5Damage: equ 12322PsychoWorldUnitLevel5Attack: equ 13323PsychoWorldUnitLevel5Defense: equ 10324PsychoWorldUnitLevel5HP: equ 30325PsychoWorldUnitLevel5Speed: equ 6326PsychoWorldUnitLevel5Growth: equ 3327PsychoWorldUnitLevel5CostGold: equ 400/10328PsychoWorldUnitLevel5CostGems: equ 01+Level5Unit329PsychoWorldUnitLevel5CostRubies: equ 0331PsychoWorldUnitLevel6Number: equ 68332PsychoWorldUnitLevel6Damage: equ 22333PsychoWorldUnitLevel6Attack: equ 16334PsychoWorldUnitLevel6Defense: equ 16335PsychoWorldUnitLevel6HP: equ 120+50336PsychoWorldUnitLevel6Speed: equ 7337PsychoWorldUnitLevel6Growth: equ 1338PsychoWorldUnitLevel6CostGold: equ 1200/10339PsychoWorldUnitLevel6CostGems: equ 00+Level6Unit340PsychoWorldUnitLevel6CostRubies: equ 1346KingKongUnitLevel1Number: equ 77347KingKongUnitLevel1Damage: equ 2348KingKongUnitLevel1Attack: equ 4349KingKongUnitLevel1Defense: equ 3350KingKongUnitLevel1HP: equ 5351KingKongUnitLevel1Speed: equ 4352KingKongUnitLevel1Growth: equ 14353KingKongUnitLevel1CostGold: equ 50/10354KingKongUnitLevel1CostGems: equ 00+Level1Unit355KingKongUnitLevel1CostRubies: equ 0357KingKongUnitLevel2Number: equ 75358KingKongUnitLevel2Damage: equ 3359KingKongUnitLevel2Attack: equ 6360KingKongUnitLevel2Defense: equ 5361KingKongUnitLevel2HP: equ 14362KingKongUnitLevel2Speed: equ 6363KingKongUnitLevel2Growth: equ 8364KingKongUnitLevel2CostGold: equ 130/10365KingKongUnitLevel2CostGems: equ 00+Level2Unit366KingKongUnitLevel2CostRubies: equ 0368KingKongUnitLevel3Number: equ 76369KingKongUnitLevel3Damage: equ 4370KingKongUnitLevel3Attack: equ 9371KingKongUnitLevel3Defense: equ 7372KingKongUnitLevel3HP: equ 22373KingKongUnitLevel3Speed: equ 5374KingKongUnitLevel3Growth: equ 7375KingKongUnitLevel3CostGold: equ 250/10376KingKongUnitLevel3CostGems: equ 00+Level3Unit377KingKongUnitLevel3CostRubies: equ 0379KingKongUnitLevel4Number: equ 74380KingKongUnitLevel4Damage: equ 7381KingKongUnitLevel4Attack: equ 10382KingKongUnitLevel4Defense: equ 7383KingKongUnitLevel4HP: equ 30384KingKongUnitLevel4Speed: equ 3385KingKongUnitLevel4Growth: equ 4386KingKongUnitLevel4CostGold: equ 300/10387KingKongUnitLevel4CostGems: equ 00+Level4Unit388KingKongUnitLevel4CostRubies: equ 0390KingKongUnitLevel5Number: equ 73391KingKongUnitLevel5Damage: equ 16392KingKongUnitLevel5Attack: equ 14393KingKongUnitLevel5Defense: equ 12394KingKongUnitLevel5HP: equ 60395KingKongUnitLevel5Speed: equ 6396KingKongUnitLevel5Growth: equ 3397KingKongUnitLevel5CostGold: equ 500/10398KingKongUnitLevel5CostGems: equ 00+Level5Unit399KingKongUnitLevel5CostRubies: equ 0401KingKongUnitLevel6Number: equ 72402KingKongUnitLevel6Damage: equ 17403KingKongUnitLevel6Attack: equ 15404KingKongUnitLevel6Defense: equ 13405KingKongUnitLevel6HP: equ 80+50406KingKongUnitLevel6Speed: equ 7407KingKongUnitLevel6Growth: equ 1408KingKongUnitLevel6CostGold: equ 850/10409KingKongUnitLevel6CostGems: equ 01+Level6Unit410KingKongUnitLevel6CostRubies: equ 0417ContraGroupAUnitLevel1Number: equ 38418ContraGroupAUnitLevel1Damage: equ 2419ContraGroupAUnitLevel1Attack: equ 4420ContraGroupAUnitLevel1Defense: equ 2421ContraGroupAUnitLevel1HP: equ 5422ContraGroupAUnitLevel1Speed: equ 5423ContraGroupAUnitLevel1Growth: equ 15424ContraGroupAUnitLevel1CostGold: equ 40/10425ContraGroupAUnitLevel1CostGems: equ 00+Level1Unit426ContraGroupAUnitLevel1CostRubies: equ 0428ContraGroupAUnitLevel2Number: equ 42429ContraGroupAUnitLevel2Damage: equ 4430ContraGroupAUnitLevel2Attack: equ 7431ContraGroupAUnitLevel2Defense: equ 5432ContraGroupAUnitLevel2HP: equ 10433ContraGroupAUnitLevel2Speed: equ 6434ContraGroupAUnitLevel2Growth: equ 9435ContraGroupAUnitLevel2CostGold: equ 100/10436ContraGroupAUnitLevel2CostGems: equ 00+Level2Unit437ContraGroupAUnitLevel2CostRubies: equ 0439ContraGroupAUnitLevel3Number: equ 41440ContraGroupAUnitLevel3Damage: equ 5441ContraGroupAUnitLevel3Attack: equ 8442ContraGroupAUnitLevel3Defense: equ 4443ContraGroupAUnitLevel3HP: equ 15444ContraGroupAUnitLevel3Speed: equ 6445ContraGroupAUnitLevel3Growth: equ 7446ContraGroupAUnitLevel3CostGold: equ 150/10447ContraGroupAUnitLevel3CostGems: equ 00+Level3Unit448ContraGroupAUnitLevel3CostRubies: equ 0450ContraGroupAUnitLevel4Number: equ 47451ContraGroupAUnitLevel4Damage: equ 8452ContraGroupAUnitLevel4Attack: equ 13453ContraGroupAUnitLevel4Defense: equ 7454ContraGroupAUnitLevel4HP: equ 40455ContraGroupAUnitLevel4Speed: equ 2456ContraGroupAUnitLevel4Growth: equ 4457ContraGroupAUnitLevel4CostGold: equ 300/10458ContraGroupAUnitLevel4CostGems: equ 00+Level4Unit459ContraGroupAUnitLevel4CostRubies: equ 0461ContraGroupAUnitLevel5Number: equ 45462ContraGroupAUnitLevel5Damage: equ 13463ContraGroupAUnitLevel5Attack: equ 13464ContraGroupAUnitLevel5Defense: equ 11465ContraGroupAUnitLevel5HP: equ 60466ContraGroupAUnitLevel5Speed: equ 7467ContraGroupAUnitLevel5Growth: equ 3468ContraGroupAUnitLevel5CostGold: equ 500/10469ContraGroupAUnitLevel5CostGems: equ 00+Level5Unit470ContraGroupAUnitLevel5CostRubies: equ 1472ContraGroupAUnitLevel6Number: equ 46473ContraGroupAUnitLevel6Damage: equ 18474ContraGroupAUnitLevel6Attack: equ 15475ContraGroupAUnitLevel6Defense: equ 12476ContraGroupAUnitLevel6HP: equ 70+50477ContraGroupAUnitLevel6Speed: equ 6478ContraGroupAUnitLevel6Growth: equ 1479ContraGroupAUnitLevel6CostGold: equ 750/10480ContraGroupAUnitLevel6CostGems: equ 02+Level6Unit481ContraGroupAUnitLevel6CostRubies: equ 0488ContraGroupBUnitLevel1Number: equ 44489ContraGroupBUnitLevel1Damage: equ 2490ContraGroupBUnitLevel1Attack: equ 3491ContraGroupBUnitLevel1Defense: equ 5492ContraGroupBUnitLevel1HP: equ 6493ContraGroupBUnitLevel1Speed: equ 4494ContraGroupBUnitLevel1Growth: equ 13495ContraGroupBUnitLevel1CostGold: equ 50/10496ContraGroupBUnitLevel1CostGems: equ 00+Level1Unit497ContraGroupBUnitLevel1CostRubies: equ 0499ContraGroupBUnitLevel2Number: equ 36 500ContraGroupBUnitLevel2Damage: equ 3 501ContraGroupBUnitLevel2Attack: equ 4 502ContraGroupBUnitLevel2Defense: equ 6503ContraGroupBUnitLevel2HP: equ 15504ContraGroupBUnitLevel2Speed: equ 4505ContraGroupBUnitLevel2Growth: equ 8506ContraGroupBUnitLevel2CostGold: equ 110/10507ContraGroupBUnitLevel2CostGems: equ 00+Level2Unit508ContraGroupBUnitLevel2CostRubies: equ 0510ContraGroupBUnitLevel3Number: equ 43 511ContraGroupBUnitLevel3Damage: equ 4512ContraGroupBUnitLevel3Attack: equ 7513ContraGroupBUnitLevel3Defense: equ 8514ContraGroupBUnitLevel3HP: equ 22515ContraGroupBUnitLevel3Speed: equ 9516ContraGroupBUnitLevel3Growth: equ 7517ContraGroupBUnitLevel3CostGold: equ 220/10518ContraGroupBUnitLevel3CostGems: equ 00+Level3Unit519ContraGroupBUnitLevel3CostRubies: equ 0521ContraGroupBUnitLevel4Number: equ 37 522ContraGroupBUnitLevel4Damage: equ 8523ContraGroupBUnitLevel4Attack: equ 11524ContraGroupBUnitLevel4Defense: equ 11525ContraGroupBUnitLevel4HP: equ 35526ContraGroupBUnitLevel4Speed: equ 6527ContraGroupBUnitLevel4Growth: equ 5528ContraGroupBUnitLevel4CostGold: equ 330/10529ContraGroupBUnitLevel4CostGems: equ 00+Level4Unit530ContraGroupBUnitLevel4CostRubies: equ 0532ContraGroupBUnitLevel5Number: equ 39 533ContraGroupBUnitLevel5Damage: equ 12 534ContraGroupBUnitLevel5Attack: equ 9 535ContraGroupBUnitLevel5Defense: equ 14536ContraGroupBUnitLevel5HP: equ 50537ContraGroupBUnitLevel5Speed: equ 5538ContraGroupBUnitLevel5Growth: equ 3539ContraGroupBUnitLevel5CostGold: equ 530/10540ContraGroupBUnitLevel5CostGems: equ 01+Level5Unit541ContraGroupBUnitLevel5CostRubies: equ 0543ContraGroupBUnitLevel6Number: equ 40 544ContraGroupBUnitLevel6Damage: equ 15 545ContraGroupBUnitLevel6Attack: equ 13 546ContraGroupBUnitLevel6Defense: equ 13547ContraGroupBUnitLevel6HP: equ 70+50548ContraGroupBUnitLevel6Speed: equ 7549ContraGroupBUnitLevel6Growth: equ 1550ContraGroupBUnitLevel6CostGold: equ 800/10551ContraGroupBUnitLevel6CostGems: equ 00+Level6Unit552ContraGroupBUnitLevel6CostRubies: equ 2559GoemonUnitLevel1Number: equ 62560GoemonUnitLevel1Damage: equ 2561GoemonUnitLevel1Attack: equ 2562GoemonUnitLevel1Defense: equ 3563GoemonUnitLevel1HP: equ 6564GoemonUnitLevel1Speed: equ 3565GoemonUnitLevel1Growth: equ 20566GoemonUnitLevel1CostGold: equ 30/10567GoemonUnitLevel1CostGems: equ 00+Level1Unit568GoemonUnitLevel1CostRubies: equ 0570GoemonUnitLevel2Number: equ 58571GoemonUnitLevel2Damage: equ 4572GoemonUnitLevel2Attack: equ 9573GoemonUnitLevel2Defense: equ 9574GoemonUnitLevel2HP: equ 25575GoemonUnitLevel2Speed: equ 7576GoemonUnitLevel2Growth: equ 6577GoemonUnitLevel2CostGold: equ 250/10578GoemonUnitLevel2CostGems: equ 00+Level2Unit579GoemonUnitLevel2CostRubies: equ 0581GoemonUnitLevel3Number: equ 60582GoemonUnitLevel3Damage: equ 5583GoemonUnitLevel3Attack: equ 8584GoemonUnitLevel3Defense: equ 10585GoemonUnitLevel3HP: equ 30586GoemonUnitLevel3Speed: equ 5587GoemonUnitLevel3Growth: equ 6588GoemonUnitLevel3CostGold: equ 300/10589GoemonUnitLevel3CostGems: equ 00+Level3Unit590GoemonUnitLevel3CostRubies: equ 0592GoemonUnitLevel4Number: equ 56593GoemonUnitLevel4Damage: equ 6594GoemonUnitLevel4Attack: equ 10595GoemonUnitLevel4Defense: equ 8596GoemonUnitLevel4HP: equ 35597GoemonUnitLevel4Speed: equ 6598GoemonUnitLevel4Growth: equ 5599GoemonUnitLevel4CostGold: equ 350/10600GoemonUnitLevel4CostGems: equ 00+Level4Unit601GoemonUnitLevel4CostRubies: equ 0603GoemonUnitLevel5Number: equ 61604GoemonUnitLevel5Damage: equ 9605GoemonUnitLevel5Attack: equ 12606GoemonUnitLevel5Defense: equ 10607GoemonUnitLevel5HP: equ 40608GoemonUnitLevel5Speed: equ 4609GoemonUnitLevel5Growth: equ 4610GoemonUnitLevel5CostGold: equ 400/10611GoemonUnitLevel5CostGems: equ 00+Level5Unit612GoemonUnitLevel5CostRubies: equ 0614GoemonUnitLevel6Number: equ 59615GoemonUnitLevel6Damage: equ 15616GoemonUnitLevel6Attack: equ 15617GoemonUnitLevel6Defense: equ 13618GoemonUnitLevel6HP: equ 75+50619GoemonUnitLevel6Speed: equ 7620GoemonUnitLevel6Growth: equ 1621GoemonUnitLevel6CostGold: equ 750/10622GoemonUnitLevel6CostGems: equ 02+Level6Unit623GoemonUnitLevel6CostRubies: equ 0629GolvelliusUnitLevel1Number: equ 80630GolvelliusUnitLevel1Damage: equ 2631GolvelliusUnitLevel1Attack: equ 4632GolvelliusUnitLevel1Defense: equ 2633GolvelliusUnitLevel1HP: equ 4634GolvelliusUnitLevel1Speed: equ 5635GolvelliusUnitLevel1Growth: equ 15636GolvelliusUnitLevel1CostGold: equ 50/10637GolvelliusUnitLevel1CostGems: equ 00+Level1Unit638GolvelliusUnitLevel1CostRubies: equ 0640GolvelliusUnitLevel2Number: equ 81641GolvelliusUnitLevel2Damage: equ 3642GolvelliusUnitLevel2Attack: equ 6643GolvelliusUnitLevel2Defense: equ 5644GolvelliusUnitLevel2HP: equ 15645GolvelliusUnitLevel2Speed: equ 6646GolvelliusUnitLevel2Growth: equ 8647GolvelliusUnitLevel2CostGold: equ 150/10648GolvelliusUnitLevel2CostGems: equ 00+Level2Unit649GolvelliusUnitLevel2CostRubies: equ 0651GolvelliusUnitLevel3Number: equ 83652GolvelliusUnitLevel3Damage: equ 5653GolvelliusUnitLevel3Attack: equ 7654GolvelliusUnitLevel3Defense: equ 7655GolvelliusUnitLevel3HP: equ 30656GolvelliusUnitLevel3Speed: equ 5657GolvelliusUnitLevel3Growth: equ 7658GolvelliusUnitLevel3CostGold: equ 300/10659GolvelliusUnitLevel3CostGems: equ 00+Level3Unit660GolvelliusUnitLevel3CostRubies: equ 0662GolvelliusUnitLevel4Number: equ 84663GolvelliusUnitLevel4Damage: equ 7664GolvelliusUnitLevel4Attack: equ 12665GolvelliusUnitLevel4Defense: equ 10666GolvelliusUnitLevel4HP: equ 32667GolvelliusUnitLevel4Speed: equ 8668GolvelliusUnitLevel4Growth: equ 4669GolvelliusUnitLevel4CostGold: equ 400/10670GolvelliusUnitLevel4CostGems: equ 00+Level4Unit671GolvelliusUnitLevel4CostRubies: equ 0673GolvelliusUnitLevel5Number: equ 85674GolvelliusUnitLevel5Damage: equ 9675GolvelliusUnitLevel5Attack: equ 14676GolvelliusUnitLevel5Defense: equ 7677GolvelliusUnitLevel5HP: equ 40678GolvelliusUnitLevel5Speed: equ 7679GolvelliusUnitLevel5Growth: equ 3680GolvelliusUnitLevel5CostGold: equ 500/10681GolvelliusUnitLevel5CostGems: equ 00+Level5Unit682GolvelliusUnitLevel5CostRubies: equ 0684GolvelliusUnitLevel6Number: equ 86685GolvelliusUnitLevel6Damage: equ 13686GolvelliusUnitLevel6Attack: equ 15687GolvelliusUnitLevel6Defense: equ 12688GolvelliusUnitLevel6HP: equ 160+50689GolvelliusUnitLevel6Speed: equ 5690GolvelliusUnitLevel6Growth: equ 1691GolvelliusUnitLevel6CostGold: equ 850/10692GolvelliusUnitLevel6CostGems: equ 00+Level6Unit693GolvelliusUnitLevel6CostRubies: equ 2697Ys3UnitLevel1Number: equ 100698Ys3UnitLevel1Damage: equ 3699Ys3UnitLevel1Attack: equ 3700Ys3UnitLevel1Defense: equ 4701Ys3UnitLevel1HP: equ 11702Ys3UnitLevel1Speed: equ 4703Ys3UnitLevel1Growth: equ 14704Ys3UnitLevel1CostGold: equ 60/10705Ys3UnitLevel1CostGems: equ 00+Level1Unit706Ys3UnitLevel1CostRubies: equ 0708Ys3UnitLevel2Number: equ 99709Ys3UnitLevel2Damage: equ 3710Ys3UnitLevel2Attack: equ 6711Ys3UnitLevel2Defense: equ 5712Ys3UnitLevel2HP: equ 11713Ys3UnitLevel2Speed: equ 6714Ys3UnitLevel2Growth: equ 8715Ys3UnitLevel2CostGold: equ 90/10716Ys3UnitLevel2CostGems: equ 00+Level2Unit717Ys3UnitLevel2CostRubies: equ 0719Ys3UnitLevel3Number: equ 97720Ys3UnitLevel3Damage: equ 5721Ys3UnitLevel3Attack: equ 8722Ys3UnitLevel3Defense: equ 9723Ys3UnitLevel3HP: equ 28724Ys3UnitLevel3Speed: equ 6725Ys3UnitLevel3Growth: equ 7726Ys3UnitLevel3CostGold: equ 220/10727Ys3UnitLevel3CostGems: equ 00+Level3Unit728Ys3UnitLevel3CostRubies: equ 0730Ys3UnitLevel4Number: equ 96731Ys3UnitLevel4Damage: equ 8732Ys3UnitLevel4Attack: equ 10733Ys3UnitLevel4Defense: equ 11734Ys3UnitLevel4HP: equ 35735Ys3UnitLevel4Speed: equ 5736Ys3UnitLevel4Growth: equ 4737Ys3UnitLevel4CostGold: equ 300/10738Ys3UnitLevel4CostGems: equ 00+Level4Unit739Ys3UnitLevel4CostRubies: equ 0741Ys3UnitLevel5Number: equ 95742Ys3UnitLevel5Damage: equ 11743Ys3UnitLevel5Attack: equ 12744Ys3UnitLevel5Defense: equ 11745Ys3UnitLevel5HP: equ 32746Ys3UnitLevel5Speed: equ 5747Ys3UnitLevel5Growth: equ 3748Ys3UnitLevel5CostGold: equ 420/10749Ys3UnitLevel5CostGems: equ 00+Level5Unit750Ys3UnitLevel5CostRubies: equ 0752Ys3UnitLevel6Number: equ 101753Ys3UnitLevel6Damage: equ 19754Ys3UnitLevel6Attack: equ 15755Ys3UnitLevel6Defense: equ 12756Ys3UnitLevel6HP: equ 100+50757Ys3UnitLevel6Speed: equ 10758Ys3UnitLevel6Growth: equ 1759Ys3UnitLevel6CostGold: equ 1000/10760Ys3UnitLevel6CostGems: equ 01+Level6Unit761Ys3UnitLevel6CostRubies: equ 0769AkanbeDragonGroupAUnitLevel1Number: equ 117770AkanbeDragonGroupAUnitLevel1Damage: equ 3771AkanbeDragonGroupAUnitLevel1Attack: equ 5772AkanbeDragonGroupAUnitLevel1Defense: equ 2773AkanbeDragonGroupAUnitLevel1HP: equ 5774AkanbeDragonGroupAUnitLevel1Speed: equ 3775AkanbeDragonGroupAUnitLevel1Growth: equ 18776AkanbeDragonGroupAUnitLevel1CostGold: equ 50/10777AkanbeDragonGroupAUnitLevel1CostGems: equ 00+Level1Unit778AkanbeDragonGroupAUnitLevel1CostRubies: equ 0780AkanbeDragonGroupAUnitLevel2Number: equ 113781AkanbeDragonGroupAUnitLevel2Damage: equ 4782AkanbeDragonGroupAUnitLevel2Attack: equ 4783AkanbeDragonGroupAUnitLevel2Defense: equ 4784AkanbeDragonGroupAUnitLevel2HP: equ 12785AkanbeDragonGroupAUnitLevel2Speed: equ 6786AkanbeDragonGroupAUnitLevel2Growth: equ 9787AkanbeDragonGroupAUnitLevel2CostGold: equ 120/10788AkanbeDragonGroupAUnitLevel2CostGems: equ 00+Level2Unit789AkanbeDragonGroupAUnitLevel2CostRubies: equ 0791AkanbeDragonGroupAUnitLevel3Number: equ 115792AkanbeDragonGroupAUnitLevel3Damage: equ 5793AkanbeDragonGroupAUnitLevel3Attack: equ 10794AkanbeDragonGroupAUnitLevel3Defense: equ 4795AkanbeDragonGroupAUnitLevel3HP: equ 15796AkanbeDragonGroupAUnitLevel3Speed: equ 4797AkanbeDragonGroupAUnitLevel3Growth: equ 6798AkanbeDragonGroupAUnitLevel3CostGold: equ 170/10799AkanbeDragonGroupAUnitLevel3CostGems: equ 00+Level3Unit800AkanbeDragonGroupAUnitLevel3CostRubies: equ 0802AkanbeDragonGroupAUnitLevel4Number: equ 118803AkanbeDragonGroupAUnitLevel4Damage: equ 7804AkanbeDragonGroupAUnitLevel4Attack: equ 11805AkanbeDragonGroupAUnitLevel4Defense: equ 7806AkanbeDragonGroupAUnitLevel4HP: equ 40807AkanbeDragonGroupAUnitLevel4Speed: equ 8808AkanbeDragonGroupAUnitLevel4Growth: equ 4809AkanbeDragonGroupAUnitLevel4CostGold: equ 320/10810AkanbeDragonGroupAUnitLevel4CostGems: equ 00+Level4Unit811AkanbeDragonGroupAUnitLevel4CostRubies: equ 0813AkanbeDragonGroupAUnitLevel5Number: equ 111814AkanbeDragonGroupAUnitLevel5Damage: equ 11815AkanbeDragonGroupAUnitLevel5Attack: equ 13816AkanbeDragonGroupAUnitLevel5Defense: equ 11817AkanbeDragonGroupAUnitLevel5HP: equ 65818AkanbeDragonGroupAUnitLevel5Speed: equ 7819AkanbeDragonGroupAUnitLevel5Growth: equ 3820AkanbeDragonGroupAUnitLevel5CostGold: equ 500/10821AkanbeDragonGroupAUnitLevel5CostGems: equ 00+Level5Unit822AkanbeDragonGroupAUnitLevel5CostRubies: equ 1824AkanbeDragonGroupAUnitLevel6Number: equ 112825AkanbeDragonGroupAUnitLevel6Damage: equ 20826AkanbeDragonGroupAUnitLevel6Attack: equ 14827AkanbeDragonGroupAUnitLevel6Defense: equ 12828AkanbeDragonGroupAUnitLevel6HP: equ 70+50829AkanbeDragonGroupAUnitLevel6Speed: equ 6830AkanbeDragonGroupAUnitLevel6Growth: equ 1831AkanbeDragonGroupAUnitLevel6CostGold: equ 750/10832AkanbeDragonGroupAUnitLevel6CostGems: equ 00+Level6Unit833AkanbeDragonGroupAUnitLevel6CostRubies: equ 2840AkanbeDragonGroupBUnitLevel1Number: equ 119841AkanbeDragonGroupBUnitLevel1Damage: equ 2842AkanbeDragonGroupBUnitLevel1Attack: equ 2843AkanbeDragonGroupBUnitLevel1Defense: equ 5844AkanbeDragonGroupBUnitLevel1HP: equ 6845AkanbeDragonGroupBUnitLevel1Speed: equ 4846AkanbeDragonGroupBUnitLevel1Growth: equ 11847AkanbeDragonGroupBUnitLevel1CostGold: equ 50/10848AkanbeDragonGroupBUnitLevel1CostGems: equ 00+Level1Unit849AkanbeDragonGroupBUnitLevel1CostRubies: equ 0851AkanbeDragonGroupBUnitLevel2Number: equ 114852AkanbeDragonGroupBUnitLevel2Damage: equ 3853AkanbeDragonGroupBUnitLevel2Attack: equ 6854AkanbeDragonGroupBUnitLevel2Defense: equ 6855AkanbeDragonGroupBUnitLevel2HP: equ 13856AkanbeDragonGroupBUnitLevel2Speed: equ 5857AkanbeDragonGroupBUnitLevel2Growth: equ 9858AkanbeDragonGroupBUnitLevel2CostGold: equ 110/10859AkanbeDragonGroupBUnitLevel2CostGems: equ 00+Level2Unit860AkanbeDragonGroupBUnitLevel2CostRubies: equ 0862AkanbeDragonGroupBUnitLevel3Number: equ 116863AkanbeDragonGroupBUnitLevel3Damage: equ 5864AkanbeDragonGroupBUnitLevel3Attack: equ 7865AkanbeDragonGroupBUnitLevel3Defense: equ 7866AkanbeDragonGroupBUnitLevel3HP: equ 21867AkanbeDragonGroupBUnitLevel3Speed: equ 5868AkanbeDragonGroupBUnitLevel3Growth: equ 8869AkanbeDragonGroupBUnitLevel3CostGold: equ 230/10870AkanbeDragonGroupBUnitLevel3CostGems: equ 00+Level3Unit871AkanbeDragonGroupBUnitLevel3CostRubies: equ 0873AkanbeDragonGroupBUnitLevel4Number: equ 120874AkanbeDragonGroupBUnitLevel4Damage: equ 9875AkanbeDragonGroupBUnitLevel4Attack: equ 9876AkanbeDragonGroupBUnitLevel4Defense: equ 11877AkanbeDragonGroupBUnitLevel4HP: equ 40878AkanbeDragonGroupBUnitLevel4Speed: equ 5879AkanbeDragonGroupBUnitLevel4Growth: equ 4880AkanbeDragonGroupBUnitLevel4CostGold: equ 340/10881AkanbeDragonGroupBUnitLevel4CostGems: equ 00+Level4Unit882AkanbeDragonGroupBUnitLevel4CostRubies: equ 0884AkanbeDragonGroupBUnitLevel5Number: equ 158885AkanbeDragonGroupBUnitLevel5Damage: equ 14886AkanbeDragonGroupBUnitLevel5Attack: equ 11887AkanbeDragonGroupBUnitLevel5Defense: equ 12888AkanbeDragonGroupBUnitLevel5HP: equ 100889AkanbeDragonGroupBUnitLevel5Speed: equ 5890AkanbeDragonGroupBUnitLevel5Growth: equ 3891AkanbeDragonGroupBUnitLevel5CostGold: equ 530/10892AkanbeDragonGroupBUnitLevel5CostGems: equ 00+Level5Unit893AkanbeDragonGroupBUnitLevel5CostRubies: equ 1895AkanbeDragonGroupBUnitLevel6Number: equ 121896AkanbeDragonGroupBUnitLevel6Damage: equ 22897AkanbeDragonGroupBUnitLevel6Attack: equ 15898AkanbeDragonGroupBUnitLevel6Defense: equ 12899AkanbeDragonGroupBUnitLevel6HP: equ 170+50900AkanbeDragonGroupBUnitLevel6Speed: equ 6901AkanbeDragonGroupBUnitLevel6Growth: equ 1902AkanbeDragonGroupBUnitLevel6CostGold: equ 800/10903AkanbeDragonGroupBUnitLevel6CostGems: equ 02+Level6Unit904AkanbeDragonGroupBUnitLevel6CostRubies: equ 0911YieArKungFuUnitLevel1Number: equ 102912YieArKungFuUnitLevel1Damage: equ 3913YieArKungFuUnitLevel1Attack: equ 5914YieArKungFuUnitLevel1Defense: equ 5915YieArKungFuUnitLevel1HP: equ 12916YieArKungFuUnitLevel1Speed: equ 4917YieArKungFuUnitLevel1Growth: equ 14918YieArKungFuUnitLevel1CostGold: equ 80/10919YieArKungFuUnitLevel1CostGems: equ 00+Level1Unit920YieArKungFuUnitLevel1CostRubies: equ 0922YieArKungFuUnitLevel2Number: equ 103923YieArKungFuUnitLevel2Damage: equ 4924YieArKungFuUnitLevel2Attack: equ 6925YieArKungFuUnitLevel2Defense: equ 6926YieArKungFuUnitLevel2HP: equ 14927YieArKungFuUnitLevel2Speed: equ 6928YieArKungFuUnitLevel2Growth: equ 8929YieArKungFuUnitLevel2CostGold: equ 110/10930YieArKungFuUnitLevel2CostGems: equ 00+Level2Unit931YieArKungFuUnitLevel2CostRubies: equ 0933YieArKungFuUnitLevel3Number: equ 104934YieArKungFuUnitLevel3Damage: equ 5935YieArKungFuUnitLevel3Attack: equ 7936YieArKungFuUnitLevel3Defense: equ 6937YieArKungFuUnitLevel3HP: equ 20938YieArKungFuUnitLevel3Speed: equ 3939YieArKungFuUnitLevel3Growth: equ 7940YieArKungFuUnitLevel3CostGold: equ 250/10941YieArKungFuUnitLevel3CostGems: equ 00+Level3Unit942YieArKungFuUnitLevel3CostRubies: equ 0944YieArKungFuUnitLevel4Number: equ 105945YieArKungFuUnitLevel4Damage: equ 7946YieArKungFuUnitLevel4Attack: equ 8947YieArKungFuUnitLevel4Defense: equ 9948YieArKungFuUnitLevel4HP: equ 37949YieArKungFuUnitLevel4Speed: equ 5950YieArKungFuUnitLevel4Growth: equ 4951YieArKungFuUnitLevel4CostGold: equ 320/10952YieArKungFuUnitLevel4CostGems: equ 00+Level4Unit953YieArKungFuUnitLevel4CostRubies: equ 0955YieArKungFuUnitLevel5Number: equ 106956YieArKungFuUnitLevel5Damage: equ 15957YieArKungFuUnitLevel5Attack: equ 12958YieArKungFuUnitLevel5Defense: equ 10959YieArKungFuUnitLevel5HP: equ 40960YieArKungFuUnitLevel5Speed: equ 7961YieArKungFuUnitLevel5Growth: equ 3962YieArKungFuUnitLevel5CostGold: equ 420/10963YieArKungFuUnitLevel5CostGems: equ 00+Level5Unit964YieArKungFuUnitLevel5CostRubies: equ 0966YieArKungFuUnitLevel6Number: equ 110967YieArKungFuUnitLevel6Damage: equ 18968YieArKungFuUnitLevel6Attack: equ 15969YieArKungFuUnitLevel6Defense: equ 15970YieArKungFuUnitLevel6HP: equ 120+50971YieArKungFuUnitLevel6Speed: equ 8972YieArKungFuUnitLevel6Growth: equ 1973YieArKungFuUnitLevel6CostGold: equ 1200/10974YieArKungFuUnitLevel6CostGems: equ 02+Level6Unit975YieArKungFuUnitLevel6CostRubies: equ 0981BubbleBobbleGroupAUnitLevel1Number: equ 9982BubbleBobbleGroupAUnitLevel1Damage: equ 2983BubbleBobbleGroupAUnitLevel1Attack: equ 4984BubbleBobbleGroupAUnitLevel1Defense: equ 4985BubbleBobbleGroupAUnitLevel1HP: equ 10986BubbleBobbleGroupAUnitLevel1Speed: equ 4987BubbleBobbleGroupAUnitLevel1Growth: equ 14988BubbleBobbleGroupAUnitLevel1CostGold: equ 60/10989BubbleBobbleGroupAUnitLevel1CostGems: equ 00+Level1Unit990BubbleBobbleGroupAUnitLevel1CostRubies: equ 0992BubbleBobbleGroupAUnitLevel2Number: equ 15993BubbleBobbleGroupAUnitLevel2Damage: equ 3994BubbleBobbleGroupAUnitLevel2Attack: equ 5995BubbleBobbleGroupAUnitLevel2Defense: equ 4996BubbleBobbleGroupAUnitLevel2HP: equ 11997BubbleBobbleGroupAUnitLevel2Speed: equ 4998BubbleBobbleGroupAUnitLevel2Growth: equ 9999BubbleBobbleGroupAUnitLevel2CostGold: equ 100/101000BubbleBobbleGroupAUnitLevel2CostGems: equ 00+Level2Unit1001BubbleBobbleGroupAUnitLevel2CostRubies: equ 01003BubbleBobbleGroupAUnitLevel3Number: equ 111004BubbleBobbleGroupAUnitLevel3Damage: equ 51005BubbleBobbleGroupAUnitLevel3Attack: equ 81006BubbleBobbleGroupAUnitLevel3Defense: equ 81007BubbleBobbleGroupAUnitLevel3HP: equ 251008BubbleBobbleGroupAUnitLevel3Speed: equ 61009BubbleBobbleGroupAUnitLevel3Growth: equ 71010BubbleBobbleGroupAUnitLevel3CostGold: equ 160/101011BubbleBobbleGroupAUnitLevel3CostGems: equ 00+Level3Unit1012BubbleBobbleGroupAUnitLevel3CostRubies: equ 01014BubbleBobbleGroupAUnitLevel4Number: equ 121015BubbleBobbleGroupAUnitLevel4Damage: equ 61016BubbleBobbleGroupAUnitLevel4Attack: equ 101017BubbleBobbleGroupAUnitLevel4Defense: equ 121018BubbleBobbleGroupAUnitLevel4HP: equ 351019BubbleBobbleGroupAUnitLevel4Speed: equ 51020BubbleBobbleGroupAUnitLevel4Growth: equ 41021BubbleBobbleGroupAUnitLevel4CostGold: equ 300/101022BubbleBobbleGroupAUnitLevel4CostGems: equ 00+Level4Unit1023BubbleBobbleGroupAUnitLevel4CostRubies: equ 01025BubbleBobbleGroupAUnitLevel5Number: equ 81026BubbleBobbleGroupAUnitLevel5Damage: equ 121027BubbleBobbleGroupAUnitLevel5Attack: equ 111028BubbleBobbleGroupAUnitLevel5Defense: equ 131029BubbleBobbleGroupAUnitLevel5HP: equ 451030BubbleBobbleGroupAUnitLevel5Speed: equ 71031BubbleBobbleGroupAUnitLevel5Growth: equ 31032BubbleBobbleGroupAUnitLevel5CostGold: equ 500/101033BubbleBobbleGroupAUnitLevel5CostGems: equ 00+Level5Unit1034BubbleBobbleGroupAUnitLevel5CostRubies: equ 11036BubbleBobbleGroupAUnitLevel6Number: equ 711037BubbleBobbleGroupAUnitLevel6Damage: equ 241038BubbleBobbleGroupAUnitLevel6Attack: equ 131039BubbleBobbleGroupAUnitLevel6Defense: equ 131040BubbleBobbleGroupAUnitLevel6HP: equ 160+501041BubbleBobbleGroupAUnitLevel6Speed: equ 61042BubbleBobbleGroupAUnitLevel6Growth: equ 11043BubbleBobbleGroupAUnitLevel6CostGold: equ 700/101044BubbleBobbleGroupAUnitLevel6CostGems: equ 00+Level6Unit1045BubbleBobbleGroupAUnitLevel6CostRubies: equ 31052BubbleBobbleGroupBUnitLevel1Number: equ 131053BubbleBobbleGroupBUnitLevel1Damage: equ 31054BubbleBobbleGroupBUnitLevel1Attack: equ 31055BubbleBobbleGroupBUnitLevel1Defense: equ 51056BubbleBobbleGroupBUnitLevel1HP: equ 61057BubbleBobbleGroupBUnitLevel1Speed: equ 41058BubbleBobbleGroupBUnitLevel1Growth: equ 111059BubbleBobbleGroupBUnitLevel1CostGold: equ 60/101060BubbleBobbleGroupBUnitLevel1CostGems: equ 00+Level1Unit1061BubbleBobbleGroupBUnitLevel1CostRubies: equ 01063BubbleBobbleGroupBUnitLevel2Number: equ 141064BubbleBobbleGroupBUnitLevel2Damage: equ 41065BubbleBobbleGroupBUnitLevel2Attack: equ 51066BubbleBobbleGroupBUnitLevel2Defense: equ 61067BubbleBobbleGroupBUnitLevel2HP: equ 141068BubbleBobbleGroupBUnitLevel2Speed: equ 51069BubbleBobbleGroupBUnitLevel2Growth: equ 91070BubbleBobbleGroupBUnitLevel2CostGold: equ 110/101071BubbleBobbleGroupBUnitLevel2CostGems: equ 00+Level2Unit1072BubbleBobbleGroupBUnitLevel2CostRubies: equ 01074BubbleBobbleGroupBUnitLevel3Number: equ 101075BubbleBobbleGroupBUnitLevel3Damage: equ 51076BubbleBobbleGroupBUnitLevel3Attack: equ 81077BubbleBobbleGroupBUnitLevel3Defense: equ 71078BubbleBobbleGroupBUnitLevel3HP: equ 211079BubbleBobbleGroupBUnitLevel3Speed: equ 51080BubbleBobbleGroupBUnitLevel3Growth: equ 81081BubbleBobbleGroupBUnitLevel3CostGold: equ 250/101082BubbleBobbleGroupBUnitLevel3CostGems: equ 00+Level3Unit1083BubbleBobbleGroupBUnitLevel3CostRubies: equ 01085BubbleBobbleGroupBUnitLevel4Number: equ 71086BubbleBobbleGroupBUnitLevel4Damage: equ 71087BubbleBobbleGroupBUnitLevel4Attack: equ 91088BubbleBobbleGroupBUnitLevel4Defense: equ 101089BubbleBobbleGroupBUnitLevel4HP: equ 401090BubbleBobbleGroupBUnitLevel4Speed: equ 51091BubbleBobbleGroupBUnitLevel4Growth: equ 41092BubbleBobbleGroupBUnitLevel4CostGold: equ 340/101093BubbleBobbleGroupBUnitLevel4CostGems: equ 00+Level4Unit1094BubbleBobbleGroupBUnitLevel4CostRubies: equ 01096BubbleBobbleGroupBUnitLevel5Number: equ 171097BubbleBobbleGroupBUnitLevel5Damage: equ 151098BubbleBobbleGroupBUnitLevel5Attack: equ 101099BubbleBobbleGroupBUnitLevel5Defense: equ 121100BubbleBobbleGroupBUnitLevel5HP: equ 1201101BubbleBobbleGroupBUnitLevel5Speed: equ 51102BubbleBobbleGroupBUnitLevel5Growth: equ 31103BubbleBobbleGroupBUnitLevel5CostGold: equ 530/101104BubbleBobbleGroupBUnitLevel5CostGems: equ 01+Level5Unit1105BubbleBobbleGroupBUnitLevel5CostRubies: equ 01107BubbleBobbleGroupBUnitLevel6Number: equ 161108BubbleBobbleGroupBUnitLevel6Damage: equ 251109BubbleBobbleGroupBUnitLevel6Attack: equ 121110BubbleBobbleGroupBUnitLevel6Defense: equ 121111BubbleBobbleGroupBUnitLevel6HP: equ 200+501112BubbleBobbleGroupBUnitLevel6Speed: equ 61113BubbleBobbleGroupBUnitLevel6Growth: equ 11114BubbleBobbleGroupBUnitLevel6CostGold: equ 800/101115BubbleBobbleGroupBUnitLevel6CostGems: equ 03+Level6Unit1116BubbleBobbleGroupBUnitLevel6CostRubies: equ 011211122SolidSnakeUnitLevel1Number: equ 90 1123SolidSnakeUnitLevel1Damage: equ 21124SolidSnakeUnitLevel1Attack: equ 21125SolidSnakeUnitLevel1Defense: equ 51126SolidSnakeUnitLevel1HP: equ 61127SolidSnakeUnitLevel1Speed: equ 61128SolidSnakeUnitLevel1Growth: equ 111129SolidSnakeUnitLevel1CostGold: equ 60/101130SolidSnakeUnitLevel1CostGems: equ 00+Level1Unit1131SolidSnakeUnitLevel1CostRubies: equ 011321133SolidSnakeUnitLevel2Number: equ 911134SolidSnakeUnitLevel2Damage: equ 31135SolidSnakeUnitLevel2Attack: equ 51136SolidSnakeUnitLevel2Defense: equ 61137SolidSnakeUnitLevel2HP: equ 131138SolidSnakeUnitLevel2Speed: equ 81139SolidSnakeUnitLevel2Growth: equ 91140SolidSnakeUnitLevel2CostGold: equ 110/101141SolidSnakeUnitLevel2CostGems: equ 00+Level2Unit1142SolidSnakeUnitLevel2CostRubies: equ 011431144SolidSnakeUnitLevel3Number: equ 941145SolidSnakeUnitLevel3Damage: equ 51146SolidSnakeUnitLevel3Attack: equ 41147SolidSnakeUnitLevel3Defense: equ 71148SolidSnakeUnitLevel3HP: equ 211149SolidSnakeUnitLevel3Speed: equ 51150SolidSnakeUnitLevel3Growth: equ 81151SolidSnakeUnitLevel3CostGold: equ 250/101152SolidSnakeUnitLevel3CostGems: equ 00+Level3Unit1153SolidSnakeUnitLevel3CostRubies: equ 011541155SolidSnakeUnitLevel4Number: equ 921156SolidSnakeUnitLevel4Damage: equ 81157SolidSnakeUnitLevel4Attack: equ 61158SolidSnakeUnitLevel4Defense: equ 101159SolidSnakeUnitLevel4HP: equ 401160SolidSnakeUnitLevel4Speed: equ 51161SolidSnakeUnitLevel4Growth: equ 41162SolidSnakeUnitLevel4CostGold: equ 340/101163SolidSnakeUnitLevel4CostGems: equ 00+Level4Unit1164SolidSnakeUnitLevel4CostRubies: equ 011651166SolidSnakeUnitLevel5Number: equ 931167SolidSnakeUnitLevel5Damage: equ 131168SolidSnakeUnitLevel5Attack: equ 81169SolidSnakeUnitLevel5Defense: equ 121170SolidSnakeUnitLevel5HP: equ 1201171SolidSnakeUnitLevel5Speed: equ 51172SolidSnakeUnitLevel5Growth: equ 31173SolidSnakeUnitLevel5CostGold: equ 530/101174SolidSnakeUnitLevel5CostGems: equ 01+Level5Unit1175SolidSnakeUnitLevel5CostRubies: equ 011771178DevaUnitLevel2Number: equ 1361179DevaUnitLevel2Damage: equ 41180DevaUnitLevel2Attack: equ 51181DevaUnitLevel2Defense: equ 61182DevaUnitLevel2HP: equ 131183DevaUnitLevel2Speed: equ 41184DevaUnitLevel2Growth: equ 91185DevaUnitLevel2CostGold: equ 110/101186DevaUnitLevel2CostGems: equ 00+Level2Unit1187DevaUnitLevel2CostRubies: equ 011881189DevaUnitLevel4Number: equ 1371190DevaUnitLevel4Damage: equ 91191DevaUnitLevel4Attack: equ 81192DevaUnitLevel4Defense: equ 71193DevaUnitLevel4HP: equ 301194DevaUnitLevel4Speed: equ 61195DevaUnitLevel4Growth: equ 51196DevaUnitLevel4CostGold: equ 250/101197DevaUnitLevel4CostGems: equ 00+Level3Unit1198DevaUnitLevel4CostRubies: equ 011991200DevaUnitLevel5Number: equ 1351201DevaUnitLevel5Damage: equ 131202DevaUnitLevel5Attack: equ 111203DevaUnitLevel5Defense: equ 121204DevaUnitLevel5HP: equ 551205DevaUnitLevel5Speed: equ 61206DevaUnitLevel5Growth: equ 21207DevaUnitLevel5CostGold: equ 440/101208DevaUnitLevel5CostGems: equ 00+Level4Unit1209DevaUnitLevel5CostRubies: equ 012111212Usas2UnitLevel4Number: equ 1391213Usas2UnitLevel4Damage: equ 91214Usas2UnitLevel4Attack: equ 101215Usas2UnitLevel4Defense: equ 71216Usas2UnitLevel4HP: equ 301217Usas2UnitLevel4Speed: equ 31218Usas2UnitLevel4Growth: equ 41219Usas2UnitLevel4CostGold: equ 300/101220Usas2UnitLevel4CostGems: equ 00+Level4Unit1221Usas2UnitLevel4CostRubies: equ 012221223Usas2UnitLevel5Number: equ 1381224Usas2UnitLevel5Damage: equ 171225Usas2UnitLevel5Attack: equ 171226Usas2UnitLevel5Defense: equ 71227Usas2UnitLevel5HP: equ 351228Usas2UnitLevel5Speed: equ 61229Usas2UnitLevel5Growth: equ 31230Usas2UnitLevel5CostGold: equ 500/101231Usas2UnitLevel5CostGems: equ 00+Level5Unit1232Usas2UnitLevel5CostRubies: equ 012351236KingsValley2UnitLevel1Number: equ 1511237KingsValley2UnitLevel1Damage: equ 31238KingsValley2UnitLevel1Attack: equ 41239KingsValley2UnitLevel1Defense: equ 31240KingsValley2UnitLevel1HP: equ 51241KingsValley2UnitLevel1Speed: equ 41242KingsValley2UnitLevel1Growth: equ 141243KingsValley2UnitLevel1CostGold: equ 50/101244KingsValley2UnitLevel1CostGems: equ 00+Level1Unit1245KingsValley2UnitLevel1CostRubies: equ 012461247KingsValley2UnitLevel2Number: equ 1521248KingsValley2UnitLevel2Damage: equ 41249KingsValley2UnitLevel2Attack: equ 61250KingsValley2UnitLevel2Defense: equ 51251KingsValley2UnitLevel2HP: equ 141252KingsValley2UnitLevel2Speed: equ 61253KingsValley2UnitLevel2Growth: equ 81254KingsValley2UnitLevel2CostGold: equ 130/101255KingsValley2UnitLevel2CostGems: equ 00+Level2Unit1256KingsValley2UnitLevel2CostRubies: equ 012571258KingsValley2UnitLevel3Number: equ 1501259KingsValley2UnitLevel3Damage: equ 51260KingsValley2UnitLevel3Attack: equ 91261KingsValley2UnitLevel3Defense: equ 71262KingsValley2UnitLevel3HP: equ 221263KingsValley2UnitLevel3Speed: equ 51264KingsValley2UnitLevel3Growth: equ 71265KingsValley2UnitLevel3CostGold: equ 250/101266KingsValley2UnitLevel3CostGems: equ 00+Level3Unit1267KingsValley2UnitLevel3CostRubies: equ 012681269KingsValley2UnitLevel4Number: equ 1491270KingsValley2UnitLevel4Damage: equ 81271KingsValley2UnitLevel4Attack: equ 101272KingsValley2UnitLevel4Defense: equ 71273KingsValley2UnitLevel4HP: equ 301274KingsValley2UnitLevel4Speed: equ 31275KingsValley2UnitLevel4Growth: equ 41276KingsValley2UnitLevel4CostGold: equ 300/101277KingsValley2UnitLevel4CostGems: equ 00+Level4Unit1278KingsValley2UnitLevel4CostRubies: equ 012821283ChukaTaisenUnitLevel1Number: equ 1821284ChukaTaisenUnitLevel1Damage: equ 21285ChukaTaisenUnitLevel1Attack: equ 41286ChukaTaisenUnitLevel1Defense: equ 31287ChukaTaisenUnitLevel1HP: equ 51288ChukaTaisenUnitLevel1Speed: equ 41289ChukaTaisenUnitLevel1Growth: equ 131290ChukaTaisenUnitLevel1CostGold: equ 50/101291ChukaTaisenUnitLevel1CostGems: equ 00+Level1Unit1292ChukaTaisenUnitLevel1CostRubies: equ 012931294ChukaTaisenUnitLevel2Number: equ 1831295ChukaTaisenUnitLevel2Damage: equ 31296ChukaTaisenUnitLevel2Attack: equ 41297ChukaTaisenUnitLevel2Defense: equ 51298ChukaTaisenUnitLevel2HP: equ 121299ChukaTaisenUnitLevel2Speed: equ 51300ChukaTaisenUnitLevel2Growth: equ 81301ChukaTaisenUnitLevel2CostGold: equ 130/101302ChukaTaisenUnitLevel2CostGems: equ 00+Level2Unit1303ChukaTaisenUnitLevel2CostRubies: equ 013041305ChukaTaisenUnitLevel3Number: equ 1841306ChukaTaisenUnitLevel3Damage: equ 51307ChukaTaisenUnitLevel3Attack: equ 91308ChukaTaisenUnitLevel3Defense: equ 71309ChukaTaisenUnitLevel3HP: equ 221310ChukaTaisenUnitLevel3Speed: equ 51311ChukaTaisenUnitLevel3Growth: equ 71312ChukaTaisenUnitLevel3CostGold: equ 250/101313ChukaTaisenUnitLevel3CostGems: equ 00+Level3Unit1314ChukaTaisenUnitLevel3CostRubies: equ 013151316ChukaTaisenUnitLevel4Number: equ 1851317ChukaTaisenUnitLevel4Damage: equ 71318ChukaTaisenUnitLevel4Attack: equ 101319ChukaTaisenUnitLevel4Defense: equ 71320ChukaTaisenUnitLevel4HP: equ 301321ChukaTaisenUnitLevel4Speed: equ 31322ChukaTaisenUnitLevel4Growth: equ 41323ChukaTaisenUnitLevel4CostGold: equ 300/101324ChukaTaisenUnitLevel4CostGems: equ 00+Level4Unit1325ChukaTaisenUnitLevel4CostRubies: equ 013261327ChukaTaisenUnitLevel5Number: equ 1861328ChukaTaisenUnitLevel5Damage: equ 121329ChukaTaisenUnitLevel5Attack: equ 101330ChukaTaisenUnitLevel5Defense: equ 121331ChukaTaisenUnitLevel5HP: equ 1201332ChukaTaisenUnitLevel5Speed: equ 51333ChukaTaisenUnitLevel5Growth: equ 31334ChukaTaisenUnitLevel5CostGold: equ 530/101335ChukaTaisenUnitLevel5CostGems: equ 01+Level5Unit1336ChukaTaisenUnitLevel5CostRubies: equ 013371338ChukaTaisenUnitLevel6Number: equ 1871339ChukaTaisenUnitLevel6Damage: equ 181340ChukaTaisenUnitLevel6Attack: equ 131341ChukaTaisenUnitLevel6Defense: equ 131342ChukaTaisenUnitLevel6HP: equ 185+501343ChukaTaisenUnitLevel6Speed: equ 61344ChukaTaisenUnitLevel6Growth: equ 11345ChukaTaisenUnitLevel6CostGold: equ 800/101346ChukaTaisenUnitLevel6CostGems: equ 03+Level6Unit1347ChukaTaisenUnitLevel6CostRubies: equ 01355RandomAUnitLevel1Number: equ 301356RandomAUnitLevel1Damage: equ 21357RandomAUnitLevel1Attack: equ 41358RandomAUnitLevel1Defense: equ 51359RandomAUnitLevel1HP: equ 91360RandomAUnitLevel1Speed: equ 41361RandomAUnitLevel1Growth: equ 141362RandomAUnitLevel1CostGold: equ 80/101363RandomAUnitLevel1CostGems: equ 00+Level1Unit1364RandomAUnitLevel1CostRubies: equ 01366RandomAUnitLevel2Number: equ 271367RandomAUnitLevel2Damage: equ 31368RandomAUnitLevel2Attack: equ 71369RandomAUnitLevel2Defense: equ 61370RandomAUnitLevel2HP: equ 111371RandomAUnitLevel2Speed: equ 41372RandomAUnitLevel2Growth: equ 91373RandomAUnitLevel2CostGold: equ 100/101374RandomAUnitLevel2CostGems: equ 00+Level2Unit1375RandomAUnitLevel2CostRubies: equ 01377RandomAUnitLevel3Number: equ 291378RandomAUnitLevel3Damage: equ 51379RandomAUnitLevel3Attack: equ 81380RandomAUnitLevel3Defense: equ 81381RandomAUnitLevel3HP: equ 241382RandomAUnitLevel3Speed: equ 51383RandomAUnitLevel3Growth: equ 71384RandomAUnitLevel3CostGold: equ 200/101385RandomAUnitLevel3CostGems: equ 00+Level3Unit1386RandomAUnitLevel3CostRubies: equ 01388RandomAUnitLevel4Number: equ 311389RandomAUnitLevel4Damage: equ 71390RandomAUnitLevel4Attack: equ 101391RandomAUnitLevel4Defense: equ 131392RandomAUnitLevel4HP: equ 351393RandomAUnitLevel4Speed: equ 51394RandomAUnitLevel4Growth: equ 41395RandomAUnitLevel4CostGold: equ 300/101396RandomAUnitLevel4CostGems: equ 00+Level4Unit1397RandomAUnitLevel4CostRubies: equ 01399RandomAUnitLevel5Number: equ 351400RandomAUnitLevel5Damage: equ 101401RandomAUnitLevel5Attack: equ 111402RandomAUnitLevel5Defense: equ 131403RandomAUnitLevel5HP: equ 451404RandomAUnitLevel5Speed: equ 51405RandomAUnitLevel5Growth: equ 21406RandomAUnitLevel5CostGold: equ 400/101407RandomAUnitLevel5CostGems: equ 00+Level5Unit1408RandomAUnitLevel5CostRubies: equ 01410RandomAUnitLevel6Number: equ 331411RandomAUnitLevel6Damage: equ 181412RandomAUnitLevel6Attack: equ 151413RandomAUnitLevel6Defense: equ 161414RandomAUnitLevel6HP: equ 90+501415RandomAUnitLevel6Speed: equ 71416RandomAUnitLevel6Growth: equ 11417RandomAUnitLevel6CostGold: equ 1000/101418RandomAUnitLevel6CostGems: equ 00+Level6Unit1419RandomAUnitLevel6CostRubies: equ 21425RandomBUnitLevel1Number: equ 511426RandomBUnitLevel1Damage: equ 31427RandomBUnitLevel1Attack: equ 51428RandomBUnitLevel1Defense: equ 41429RandomBUnitLevel1HP: equ 71430RandomBUnitLevel1Speed: equ 61431RandomBUnitLevel1Growth: equ 141432RandomBUnitLevel1CostGold: equ 70/101433RandomBUnitLevel1CostGems: equ 00+Level1Unit1434RandomBUnitLevel1CostRubies: equ 01436RandomBUnitLevel2Number: equ 521437RandomBUnitLevel2Damage: equ 41438RandomBUnitLevel2Attack: equ 61439RandomBUnitLevel2Defense: equ 71440RandomBUnitLevel2HP: equ 161441RandomBUnitLevel2Speed: equ 31442RandomBUnitLevel2Growth: equ 81443RandomBUnitLevel2CostGold: equ 120/101444RandomBUnitLevel2CostGems: equ 00+Level2Unit1445RandomBUnitLevel2CostRubies: equ 01447RandomBUnitLevel3Number: equ 541448RandomBUnitLevel3Damage: equ 61449RandomBUnitLevel3Attack: equ 91450RandomBUnitLevel3Defense: equ 81451RandomBUnitLevel3HP: equ 251452RandomBUnitLevel3Speed: equ 61453RandomBUnitLevel3Growth: equ 71454RandomBUnitLevel3CostGold: equ 200/101455RandomBUnitLevel3CostGems: equ 00+Level3Unit1456RandomBUnitLevel3CostRubies: equ 01458RandomBUnitLevel4Number: equ 481459RandomBUnitLevel4Damage: equ 81460RandomBUnitLevel4Attack: equ 91461RandomBUnitLevel4Defense: equ 81462RandomBUnitLevel4HP: equ 321463RandomBUnitLevel4Speed: equ 81464RandomBUnitLevel4Growth: equ 51465RandomBUnitLevel4CostGold: equ 250/101466RandomBUnitLevel4CostGems: equ 00+Level4Unit1467RandomBUnitLevel4CostRubies: equ 01469RandomBUnitLevel5Number: equ 491470RandomBUnitLevel5Damage: equ 141471RandomBUnitLevel5Attack: equ 101472RandomBUnitLevel5Defense: equ 121473RandomBUnitLevel5HP: equ 601474RandomBUnitLevel5Speed: equ 41475RandomBUnitLevel5Growth: equ 21476RandomBUnitLevel5CostGold: equ 425/101477RandomBUnitLevel5CostGems: equ 00+Level5Unit1478RandomBUnitLevel5CostRubies: equ 11480RandomBUnitLevel6Number: equ 501481RandomBUnitLevel6Damage: equ 191482RandomBUnitLevel6Attack: equ 151483RandomBUnitLevel6Defense: equ 141484RandomBUnitLevel6HP: equ 95+501485RandomBUnitLevel6Speed: equ 71486RandomBUnitLevel6Growth: equ 11487RandomBUnitLevel6CostGold: equ 850/101488RandomBUnitLevel6CostGems: equ 02+Level6Unit1489RandomBUnitLevel6CostRubies: equ 01492MonsterAddressesForBattle1.asm34Monster001Table: 35 dw Monster001Idle36 dw Monster001Move37 dw GeneralMonsterAttackPatternRight38 dw GeneralMonsterAttackPatternLeft39 dw GeneralMonsterAttackPatternLeftUp40 dw GeneralMonsterAttackPatternLeftDown41 dw GeneralMonsterAttackPatternRightUp42 dw GeneralMonsterAttackPatternRightDown43 db BattleMonsterSpriteSheet1Block44 db 16 45 db 32+00 46 db UsasUnitLevel3CostGold 47 db UsasUnitLevel3CostGems 48 db UsasUnitLevel3CostRubies 49 db UsasUnitLevel3HP 50 db UsasUnitLevel3Speed 51 db UsasUnitLevel3Attack 52 db UsasUnitLevel3Defense 53 db UsasUnitLevel3Growth 54 db UsasUnitLevel3Damage 55 db 000 56 db "Brown Flyer",25558Monster002Table: 59 dw Monster002Idle60 dw Monster002Move61 dw GeneralMonsterAttackPatternRight62 dw GeneralMonsterAttackPatternLeft63 dw GeneralMonsterAttackPatternLeftUp64 dw GeneralMonsterAttackPatternLeftDown65 dw GeneralMonsterAttackPatternRightUp66 dw GeneralMonsterAttackPatternRightDown67 db BattleMonsterSpriteSheet1Block68 db 16 69 db 32+00 70 db UsasUnitLevel4CostGold 71 db UsasUnitLevel4CostGems 72 db UsasUnitLevel4CostRubies 73 db UsasUnitLevel4HP 74 db UsasUnitLevel4Speed 75 db UsasUnitLevel4Attack 76 db UsasUnitLevel4Defense 77 db UsasUnitLevel4Growth 78 db UsasUnitLevel4Damage 79 db 000 80 db "Green Flyer",25582Monster003Table: 83 dw Monster003Idle84 dw Monster003Move85 dw GeneralMonsterAttackPatternRight86 dw GeneralMonsterAttackPatternLeft87 dw GeneralMonsterAttackPatternLeftUp88 dw GeneralMonsterAttackPatternLeftDown89 dw GeneralMonsterAttackPatternRightUp90 dw GeneralMonsterAttackPatternRightDown91 db BattleMonsterSpriteSheet1Block92 db 16 93 db 32+00 94 db UsasUnitLevel5CostGold 95 db UsasUnitLevel5CostGems 96 db UsasUnitLevel5CostRubies 97 db UsasUnitLevel5HP 98 db UsasUnitLevel5Speed 99 db UsasUnitLevel5Attack 100 db UsasUnitLevel5Defense 101 db UsasUnitLevel5Growth 102 db UsasUnitLevel5Damage 103 db 000 104 db "DarkG Flyer",255106Monster004Table: 107 dw Monster004Idle108 dw Monster004Move109 dw GeneralMonsterAttackPatternRight110 dw GeneralMonsterAttackPatternLeft111 dw GeneralMonsterAttackPatternLeftUp112 dw GeneralMonsterAttackPatternLeftDown113 dw GeneralMonsterAttackPatternRightUp114 dw GeneralMonsterAttackPatternRightDown115 db BattleMonsterSpriteSheet1Block116 db 16 117 db 32+00 118 db UsasUnitLevel6CostGold 119 db UsasUnitLevel6CostGems 120 db UsasUnitLevel6CostRubies 121 db UsasUnitLevel6HP 122 db UsasUnitLevel6Speed 123 db UsasUnitLevel6Attack 124 db UsasUnitLevel6Defense 125 db UsasUnitLevel6Growth 126 db UsasUnitLevel6Damage 127 db 000 128 db "LightGFlyer",255130Monster005Table: 131 dw Monster005Idle132 dw Monster005Move133 dw GeneralMonsterAttackPatternRight134 dw GeneralMonsterAttackPatternLeft135 dw GeneralMonsterAttackPatternLeftUp136 dw GeneralMonsterAttackPatternLeftDown137 dw GeneralMonsterAttackPatternRightUp138 dw GeneralMonsterAttackPatternRightDown139 db BattleMonsterSpriteSheet1Block140 db 16 141 db 16+08 142 db UsasUnitLevel2CostGold 143 db UsasUnitLevel2CostGems 144 db UsasUnitLevel2CostRubies 145 db UsasUnitLevel2HP 146 db UsasUnitLevel2Speed 147 db UsasUnitLevel2Attack 148 db UsasUnitLevel2Defense 149 db UsasUnitLevel2Growth 150 db UsasUnitLevel2Damage 151 db 000 152 db "Big Spider",255," "154Monster006Table: 155 dw Monster006Idle156 dw Monster006Move157 dw GeneralMonsterAttackPatternRight158 dw GeneralMonsterAttackPatternLeft159 dw GeneralMonsterAttackPatternLeftUp160 dw GeneralMonsterAttackPatternLeftDown161 dw GeneralMonsterAttackPatternRightUp162 dw GeneralMonsterAttackPatternRightDown163 db BattleMonsterSpriteSheet1Block164 db 16 165 db 16+04 166 db UsasUnitLevel1CostGold 167 db UsasUnitLevel1CostGems 168 db UsasUnitLevel1CostRubies 169 db UsasUnitLevel1HP 170 db UsasUnitLevel1Speed 171 db UsasUnitLevel1Attack 172 db UsasUnitLevel1Defense 173 db UsasUnitLevel1Growth 174 db UsasUnitLevel1Damage 175 db 000 176 db "Tiny Spider",255178Monster007Table: 179 dw Monster007Idle180 dw Monster007Move181 dw Monster007AttackPatternRight182 dw Monster007AttackPatternLeft183 dw Monster007AttackPatternLeft184 dw Monster007AttackPatternLeft185 dw Monster007AttackPatternRight186 dw Monster007AttackPatternRight187 db BattleMonsterSpriteSheet1Block188 db 16 189 db 16+08 190 db BubbleBobbleGroupBUnitLevel4CostGold 191 db BubbleBobbleGroupBUnitLevel4CostGems 192 db BubbleBobbleGroupBUnitLevel4CostRubies 193 db BubbleBobbleGroupBUnitLevel4HP 194 db BubbleBobbleGroupBUnitLevel4Speed 195 db BubbleBobbleGroupBUnitLevel4Attack 196 db BubbleBobbleGroupBUnitLevel4Defense 197 db BubbleBobbleGroupBUnitLevel4Growth 198 db BubbleBobbleGroupBUnitLevel4Damage 199 db RangedMonster 200 db "Bobblun",255,"    "202Monster008Table: 203 dw Monster008Idle204 dw Monster008Move205 dw Monster008AttackPatternRight206 dw Monster008AttackPatternLeft207 dw Monster008AttackPatternLeft208 dw Monster008AttackPatternLeft209 dw Monster008AttackPatternRight210 dw Monster008AttackPatternRight211 db BattleMonsterSpriteSheet1Block212 db 16 213 db 16+08 214 db BubbleBobbleGroupAUnitLevel5CostGold 215 db BubbleBobbleGroupAUnitLevel5CostGems 216 db BubbleBobbleGroupAUnitLevel5CostRubies 217 db BubbleBobbleGroupAUnitLevel5HP 218 db BubbleBobbleGroupAUnitLevel5Speed 219 db BubbleBobbleGroupAUnitLevel5Attack 220 db BubbleBobbleGroupAUnitLevel5Defense 221 db BubbleBobbleGroupAUnitLevel5Growth 222 db BubbleBobbleGroupAUnitLevel5Damage 223 db RangedMonster 224 db "Bubblun",255,"    "226Monster009Table: 227 dw Monster009Idle228 dw Monster009Move229 dw GeneralMonsterAttackPatternRight230 dw GeneralMonsterAttackPatternLeft231 dw GeneralMonsterAttackPatternLeftUp232 dw GeneralMonsterAttackPatternLeftDown233 dw GeneralMonsterAttackPatternRightUp234 dw GeneralMonsterAttackPatternRightDown235 db BattleMonsterSpriteSheet1Block236 db 16 237 db 16+08 238 db BubbleBobbleGroupAUnitLevel1CostGold 239 db BubbleBobbleGroupAUnitLevel1CostGems 240 db BubbleBobbleGroupAUnitLevel1CostRubies 241 db BubbleBobbleGroupAUnitLevel1HP 242 db BubbleBobbleGroupAUnitLevel1Speed 243 db BubbleBobbleGroupAUnitLevel1Attack 244 db BubbleBobbleGroupAUnitLevel1Defense 245 db BubbleBobbleGroupAUnitLevel1Growth 246 db BubbleBobbleGroupAUnitLevel1Damage 247 db 000 248 db "Zen Chan",255,"   "250Monster010Table: 251 dw Monster010Idle252 dw Monster010Move253 dw GeneralMonsterAttackPatternRight254 dw GeneralMonsterAttackPatternLeft255 dw GeneralMonsterAttackPatternLeftUp256 dw GeneralMonsterAttackPatternLeftDown257 dw GeneralMonsterAttackPatternRightUp258 dw GeneralMonsterAttackPatternRightDown259 db BattleMonsterSpriteSheet1Block260 db 16 261 db 16+08 262 db BubbleBobbleGroupBUnitLevel3CostGold 263 db BubbleBobbleGroupBUnitLevel3CostGems 264 db BubbleBobbleGroupBUnitLevel3CostRubies 265 db BubbleBobbleGroupBUnitLevel3HP 266 db BubbleBobbleGroupBUnitLevel3Speed 267 db BubbleBobbleGroupBUnitLevel3Attack 268 db BubbleBobbleGroupBUnitLevel3Defense 269 db BubbleBobbleGroupBUnitLevel3Growth 270 db BubbleBobbleGroupBUnitLevel3Damage 271 db 000 272 db "Mad Zenchan",255274Monster011Table: 275 dw Monster011Idle276 dw Monster011Move277 dw GeneralMonsterAttackPatternRight278 dw GeneralMonsterAttackPatternLeft279 dw GeneralMonsterAttackPatternLeftUp280 dw GeneralMonsterAttackPatternLeftDown281 dw GeneralMonsterAttackPatternRightUp282 dw GeneralMonsterAttackPatternRightDown283 db BattleMonsterSpriteSheet1Block284 db 16 285 db 16+08 286 db BubbleBobbleGroupAUnitLevel3CostGold 287 db BubbleBobbleGroupAUnitLevel3CostGems 288 db BubbleBobbleGroupAUnitLevel3CostRubies 289 db BubbleBobbleGroupAUnitLevel3HP 290 db BubbleBobbleGroupAUnitLevel3Speed 291 db BubbleBobbleGroupAUnitLevel3Attack 292 db BubbleBobbleGroupAUnitLevel3Defense 293 db BubbleBobbleGroupAUnitLevel3Growth 294 db BubbleBobbleGroupAUnitLevel3Damage 295 db 000 296 db "Mighta",255,"     "298Monster012Table: 299 dw Monster012Idle300 dw Monster012Move301 dw GeneralMonsterAttackPatternRight302 dw GeneralMonsterAttackPatternLeft303 dw GeneralMonsterAttackPatternLeftUp304 dw GeneralMonsterAttackPatternLeftDown305 dw GeneralMonsterAttackPatternRightUp306 dw GeneralMonsterAttackPatternRightDown307 db BattleMonsterSpriteSheet1Block308 db 16 309 db 16+08 310 db BubbleBobbleGroupAUnitLevel4CostGold 311 db BubbleBobbleGroupAUnitLevel4CostGems 312 db BubbleBobbleGroupAUnitLevel4CostRubies 313 db BubbleBobbleGroupAUnitLevel4HP 314 db BubbleBobbleGroupAUnitLevel4Speed 315 db BubbleBobbleGroupAUnitLevel4Attack 316 db BubbleBobbleGroupAUnitLevel4Defense 317 db BubbleBobbleGroupAUnitLevel4Growth 318 db BubbleBobbleGroupAUnitLevel4Damage 319 db 000 320 db "SkellMonsta",255322Monster013Table: 323 dw Monster013Idle324 dw Monster013Move325 dw GeneralMonsterAttackPatternRight326 dw GeneralMonsterAttackPatternLeft327 dw GeneralMonsterAttackPatternLeftUp328 dw GeneralMonsterAttackPatternLeftDown329 dw GeneralMonsterAttackPatternRightUp330 dw GeneralMonsterAttackPatternRightDown331 db BattleMonsterSpriteSheet1Block332 db 16 333 db 16+08 334 db BubbleBobbleGroupBUnitLevel1CostGold 335 db BubbleBobbleGroupBUnitLevel1CostGems 336 db BubbleBobbleGroupBUnitLevel1CostRubies 337 db BubbleBobbleGroupBUnitLevel1HP 338 db BubbleBobbleGroupBUnitLevel1Speed 339 db BubbleBobbleGroupBUnitLevel1Attack 340 db BubbleBobbleGroupBUnitLevel1Defense 341 db BubbleBobbleGroupBUnitLevel1Growth 342 db BubbleBobbleGroupBUnitLevel1Damage 343 db 000 344 db "Banebou",255,"    "346Monster014Table: 347 dw Monster014Idle348 dw Monster014Move349 dw GeneralMonsterAttackPatternRight350 dw GeneralMonsterAttackPatternLeft351 dw GeneralMonsterAttackPatternLeftUp352 dw GeneralMonsterAttackPatternLeftDown353 dw GeneralMonsterAttackPatternRightUp354 dw GeneralMonsterAttackPatternRightDown355 db BattleMonsterSpriteSheet1Block356 db 16 357 db 16+08 358 db BubbleBobbleGroupBUnitLevel2CostGold 359 db BubbleBobbleGroupBUnitLevel2CostGems 360 db BubbleBobbleGroupBUnitLevel2CostRubies 361 db BubbleBobbleGroupBUnitLevel2HP 362 db BubbleBobbleGroupBUnitLevel2Speed 363 db BubbleBobbleGroupBUnitLevel2Attack 364 db BubbleBobbleGroupBUnitLevel2Defense 365 db BubbleBobbleGroupBUnitLevel2Growth 366 db BubbleBobbleGroupBUnitLevel2Damage 367 db 000 368 db "Hidegons",255,"   "370Monster015Table: 371 dw Monster015Idle372 dw Monster015Move373 dw GeneralMonsterAttackPatternRight374 dw GeneralMonsterAttackPatternLeft375 dw GeneralMonsterAttackPatternLeftUp376 dw GeneralMonsterAttackPatternLeftDown377 dw GeneralMonsterAttackPatternRightUp378 dw GeneralMonsterAttackPatternRightDown379 db BattleMonsterSpriteSheet1Block380 db 16 381 db 16+08 382 db BubbleBobbleGroupAUnitLevel2CostGold 383 db BubbleBobbleGroupAUnitLevel2CostGems 384 db BubbleBobbleGroupAUnitLevel2CostRubies 385 db BubbleBobbleGroupAUnitLevel2HP 386 db BubbleBobbleGroupAUnitLevel2Speed 387 db BubbleBobbleGroupAUnitLevel2Attack 388 db BubbleBobbleGroupAUnitLevel2Defense 389 db BubbleBobbleGroupAUnitLevel2Growth 390 db BubbleBobbleGroupAUnitLevel2Damage 391 db 000 392 db "Drunk",255,"      "394Monster016Table: 395 dw Monster016Idle396 dw Monster016Move397 dw GeneralMonsterAttackPatternRight398 dw GeneralMonsterAttackPatternLeft399 dw GeneralMonsterAttackPatternLeftUp400 dw GeneralMonsterAttackPatternLeftDown401 dw GeneralMonsterAttackPatternRightUp402 dw GeneralMonsterAttackPatternRightDown403 db BattleMonsterSpriteSheet2Block404 db 64 405 db 64+04 406 db BubbleBobbleGroupBUnitLevel6CostGold 407 db BubbleBobbleGroupBUnitLevel6CostGems 408 db BubbleBobbleGroupBUnitLevel6CostRubies 409 db BubbleBobbleGroupBUnitLevel6HP 410 db BubbleBobbleGroupBUnitLevel6Speed 411 db BubbleBobbleGroupBUnitLevel6Attack 412 db BubbleBobbleGroupBUnitLevel6Defense 413 db BubbleBobbleGroupBUnitLevel6Growth 414 db BubbleBobbleGroupBUnitLevel6Damage 415 db 000 416 db "Super Drunk",255418Monster017Table: 419 dw Monster017Idle420 dw Monster017Move421 dw GeneralMonsterAttackPatternRight422 dw GeneralMonsterAttackPatternLeft423 dw GeneralMonsterAttackPatternLeftUp424 dw GeneralMonsterAttackPatternLeftDown425 dw GeneralMonsterAttackPatternRightUp426 dw GeneralMonsterAttackPatternRightDown427 db BattleMonsterSpriteSheet1Block428 db 32 429 db 32+08 430 db BubbleBobbleGroupBUnitLevel5CostGold 431 db BubbleBobbleGroupBUnitLevel5CostGems 432 db BubbleBobbleGroupBUnitLevel5CostRubies 433 db BubbleBobbleGroupBUnitLevel5HP 434 db BubbleBobbleGroupBUnitLevel5Speed 435 db BubbleBobbleGroupBUnitLevel5Attack 436 db BubbleBobbleGroupBUnitLevel5Defense 437 db BubbleBobbleGroupBUnitLevel5Growth 438 db BubbleBobbleGroupBUnitLevel5Damage 439 db 000 440 db "Supermighta",255446Monster018Table: 447 dw Monster018Idle448 dw Monster018Move449 dw Monster018AttackPatternRight450 dw Monster018AttackPatternLeft451 dw Monster018AttackPatternLeftUp452 dw Monster018AttackPatternLeftDown453 dw Monster018AttackPatternRightUp454 dw Monster018AttackPatternRightDown455 db BattleMonsterSpriteSheet1Block456 db 32 457 db 32+08 458 db CastleVaniaUnitLevel3CostGold 459 db CastleVaniaUnitLevel3CostGems 460 db CastleVaniaUnitLevel3CostRubies 461 db CastleVaniaUnitLevel3HP 462 db CastleVaniaUnitLevel3Speed 463 db CastleVaniaUnitLevel3Attack 464 db CastleVaniaUnitLevel3Defense 465 db CastleVaniaUnitLevel3Growth 466 db CastleVaniaUnitLevel3Damage 467 db 000 468 db "Fish Man",255,"   "470Monster019Table: 471 dw Monster019Idle472 dw Monster019Move473 dw GeneralMonsterAttackPatternRight474 dw GeneralMonsterAttackPatternLeft475 dw GeneralMonsterAttackPatternLeftUp476 dw GeneralMonsterAttackPatternLeftDown477 dw GeneralMonsterAttackPatternRightUp478 dw GeneralMonsterAttackPatternRightDown479 db BattleMonsterSpriteSheet1Block480 db 16 481 db 32+08 482 db CastleVaniaUnitLevel1CostGold 483 db CastleVaniaUnitLevel1CostGems 484 db CastleVaniaUnitLevel1CostRubies 485 db CastleVaniaUnitLevel1HP 486 db CastleVaniaUnitLevel1Speed 487 db CastleVaniaUnitLevel1Attack 488 db CastleVaniaUnitLevel1Defense 489 db CastleVaniaUnitLevel1Growth 490 db CastleVaniaUnitLevel1Damage 491 db 000 492 db "Zombie",255,"     "494Monster020Table: 495 dw Monster020Idle496 dw Monster020Move497 dw GeneralMonsterAttackPatternRight498 dw GeneralMonsterAttackPatternLeft499 dw GeneralMonsterAttackPatternLeftUp500 dw GeneralMonsterAttackPatternLeftDown501 dw GeneralMonsterAttackPatternRightUp502 dw GeneralMonsterAttackPatternRightDown503 db BattleMonsterSpriteSheet2Block504 db 16 505 db 40+08 506 db CastleVaniaUnitLevel5CostGold 507 db CastleVaniaUnitLevel5CostGems 508 db CastleVaniaUnitLevel5CostRubies 509 db CastleVaniaUnitLevel5HP 510 db CastleVaniaUnitLevel5Speed 511 db CastleVaniaUnitLevel5Attack 512 db CastleVaniaUnitLevel5Defense 513 db CastleVaniaUnitLevel5Growth 514 db CastleVaniaUnitLevel5Damage 515 db 000 516 db "Mummy Man",255,"  "518Monster021Table: 519 dw Monster021Idle520 dw Monster021Move521 dw Monster021AttackPatternRight522 dw Monster021AttackPatternLeft523 dw Monster021AttackPatternLeftUp524 dw Monster021AttackPatternLeftDown525 dw Monster021AttackPatternRightUp526 dw Monster021AttackPatternRightDown527 db BattleMonsterSpriteSheet1Block528 db 16 529 db 32+08 530 db CastleVaniaUnitLevel3CostGold 531 db CastleVaniaUnitLevel3CostGems 532 db CastleVaniaUnitLevel3CostRubies 533 db CastleVaniaUnitLevel3HP 534 db CastleVaniaUnitLevel3Speed 535 db CastleVaniaUnitLevel3Attack 536 db CastleVaniaUnitLevel3Defense 537 db CastleVaniaUnitLevel3Growth 538 db CastleVaniaUnitLevel3Damage 539 db 000 540 db "Spear Guard",255542Monster022Table: 543 dw Monster022Idle544 dw Monster022Move545 dw GeneralMonsterAttackPatternRight546 dw GeneralMonsterAttackPatternLeft547 dw GeneralMonsterAttackPatternLeftUp548 dw GeneralMonsterAttackPatternLeftDown549 dw GeneralMonsterAttackPatternRightUp550 dw GeneralMonsterAttackPatternRightDown551 db BattleMonsterSpriteSheet3Block552 db 16 553 db 24+08 554 db CastleVaniaUnitLevel2CostGold 555 db CastleVaniaUnitLevel2CostGems 556 db CastleVaniaUnitLevel2CostRubies 557 db CastleVaniaUnitLevel2HP 558 db CastleVaniaUnitLevel2Speed 559 db CastleVaniaUnitLevel2Attack 560 db CastleVaniaUnitLevel2Defense 561 db CastleVaniaUnitLevel2Growth 562 db CastleVaniaUnitLevel2Damage 563 db 000 564 db "Medusa Head",255565 566Monster023Table: 567 dw Monster023Idle568 dw Monster023Move569 dw Monster023AttackPatternRight570 dw Monster023AttackPatternLeft571 dw Monster023AttackPatternLeftUp572 dw Monster023AttackPatternLeftDown573 dw Monster023AttackPatternRightUp574 dw Monster023AttackPatternRightDown575 db BattleMonsterSpriteSheet3Block576 db 16 577 db 16+08 578 db CastleVaniaUnitLevel2CostGold 579 db CastleVaniaUnitLevel2CostGems 580 db CastleVaniaUnitLevel2CostRubies 581 db CastleVaniaUnitLevel2HP 582 db CastleVaniaUnitLevel2Speed 583 db CastleVaniaUnitLevel2Attack 584 db CastleVaniaUnitLevel2Defense 585 db CastleVaniaUnitLevel2Growth 586 db CastleVaniaUnitLevel2Damage 587 db 000 588 db "Flea Man",255,"   "590Monster024Table: 591 dw Monster024Idle592 dw Monster024Move593 dw GeneralMonsterAttackPatternRight594 dw GeneralMonsterAttackPatternLeft595 dw GeneralMonsterAttackPatternLeftUp596 dw GeneralMonsterAttackPatternLeftDown597 dw GeneralMonsterAttackPatternRightUp598 dw GeneralMonsterAttackPatternRightDown599 db BattleMonsterSpriteSheet3Block600 db 48 601 db 48+08 602 db CastleVaniaUnitLevel6CostGold 603 db CastleVaniaUnitLevel6CostGems 604 db CastleVaniaUnitLevel6CostRubies 605 db CastleVaniaUnitLevel6HP 606 db CastleVaniaUnitLevel6Speed 607 db CastleVaniaUnitLevel6Attack 608 db CastleVaniaUnitLevel6Defense 609 db CastleVaniaUnitLevel6Growth 610 db CastleVaniaUnitLevel6Damage 611 db 000 612 db "Grim Reaper",255613 614Monster025Table: 615 dw Monster025Idle616 dw Monster025Move617 dw Monster025AttackPatternRight618 dw Monster025AttackPatternLeft619 dw Monster025AttackPatternLeftUp620 dw Monster025AttackPatternLeftDown621 dw Monster025AttackPatternRightUp622 dw Monster025AttackPatternRightDown623 db BattleMonsterSpriteSheet3Block624 db 16 625 db 32+08 626 db CastleVaniaUnitLevel1CostGold 627 db CastleVaniaUnitLevel1CostGems 628 db CastleVaniaUnitLevel1CostRubies 629 db CastleVaniaUnitLevel1HP 630 db CastleVaniaUnitLevel1Speed 631 db CastleVaniaUnitLevel1Attack 632 db CastleVaniaUnitLevel1Defense 633 db CastleVaniaUnitLevel1Growth 634 db CastleVaniaUnitLevel1Damage 635 db 000 636 db "Skeleton",255,"   "638Monster026Table: 639 dw Monster026Idle640 dw Monster026Move641 dw Monster026AttackPatternRight642 dw Monster026AttackPatternLeft643 dw Monster026AttackPatternLeft644 dw Monster026AttackPatternLeft645 dw Monster026AttackPatternRight646 dw Monster026AttackPatternRight647 db BattleMonsterSpriteSheet2Block648 db 16 649 db 32+08 650 db CastleVaniaUnitLevel4CostGold 651 db CastleVaniaUnitLevel4CostGems 652 db CastleVaniaUnitLevel4CostRubies 653 db CastleVaniaUnitLevel4HP 654 db CastleVaniaUnitLevel4Speed 655 db CastleVaniaUnitLevel4Attack 656 db CastleVaniaUnitLevel4Defense 657 db CastleVaniaUnitLevel4Growth 658 db CastleVaniaUnitLevel4Damage 659 db RangedMonster 660 db "Axe Man",255,"    "667Monster027Table: 668 dw Monster027Idle669 dw Monster027Move670 dw GeneralMonsterAttackPatternRight671 dw GeneralMonsterAttackPatternLeft672 dw GeneralMonsterAttackPatternLeftUp673 dw GeneralMonsterAttackPatternLeftDown674 dw GeneralMonsterAttackPatternRightUp675 dw GeneralMonsterAttackPatternRightDown676 db BattleMonsterSpriteSheet3Block677 db 16 678 db 16+08 679 db DragonSlayerUnitLevel2CostGold 680 db DragonSlayerUnitLevel2CostGems 681 db DragonSlayerUnitLevel2CostRubies 682 db DragonSlayerUnitLevel2HP 683 db DragonSlayerUnitLevel2Speed 684 db DragonSlayerUnitLevel2Attack 685 db DragonSlayerUnitLevel2Defense 686 db DragonSlayerUnitLevel2Growth 687 db DragonSlayerUnitLevel2Damage 688 db 000 689 db "Scorpii",255,"    "692Monster028Table: 693 dw Monster028Idle694 dw Monster028Move695 dw GeneralMonsterAttackPatternRight696 dw GeneralMonsterAttackPatternLeft697 dw GeneralMonsterAttackPatternLeftUp698 dw GeneralMonsterAttackPatternLeftDown699 dw GeneralMonsterAttackPatternRightUp700 dw GeneralMonsterAttackPatternRightDown701 db BattleMonsterSpriteSheet3Block702 db 16 703 db 16+08 704 db DragonSlayerUnitLevel1CostGold 705 db DragonSlayerUnitLevel1CostGems 706 db DragonSlayerUnitLevel1CostRubies 707 db DragonSlayerUnitLevel1HP 708 db DragonSlayerUnitLevel1Speed 709 db DragonSlayerUnitLevel1Attack 710 db DragonSlayerUnitLevel1Defense 711 db DragonSlayerUnitLevel1Growth 712 db DragonSlayerUnitLevel1Damage 713 db 000 714 db "Porgi",255,"      "716Monster029Table: 717 dw Monster029Idle718 dw Monster029Move719 dw GeneralMonsterAttackPatternRight720 dw GeneralMonsterAttackPatternLeft721 dw GeneralMonsterAttackPatternLeftUp722 dw GeneralMonsterAttackPatternLeftDown723 dw GeneralMonsterAttackPatternRightUp724 dw GeneralMonsterAttackPatternRightDown725 db BattleMonsterSpriteSheet3Block726 db 16 727 db 16+08 728 db DragonSlayerUnitLevel3CostGold 729 db DragonSlayerUnitLevel3CostGems 730 db DragonSlayerUnitLevel3CostRubies 731 db DragonSlayerUnitLevel3HP 732 db DragonSlayerUnitLevel3Speed 733 db DragonSlayerUnitLevel3Attack 734 db DragonSlayerUnitLevel3Defense 735 db DragonSlayerUnitLevel3Growth 736 db DragonSlayerUnitLevel3Damage 737 db 000 738 db "Rock Man",255,"   "740Monster030Table: 741 dw Monster030Idle742 dw Monster030Move743 dw GeneralMonsterAttackPatternRight744 dw GeneralMonsterAttackPatternLeft745 dw GeneralMonsterAttackPatternLeftUp746 dw GeneralMonsterAttackPatternLeftDown747 dw GeneralMonsterAttackPatternRightUp748 dw GeneralMonsterAttackPatternRightDown749 db BattleMonsterSpriteSheet3Block750 db 16 751 db 16+08 752 db DragonSlayerUnitLevel1CostGold 753 db DragonSlayerUnitLevel1CostGems 754 db DragonSlayerUnitLevel1CostRubies 755 db DragonSlayerUnitLevel1HP 756 db DragonSlayerUnitLevel1Speed 757 db DragonSlayerUnitLevel1Attack 758 db DragonSlayerUnitLevel1Defense 759 db DragonSlayerUnitLevel1Growth 760 db DragonSlayerUnitLevel1Damage 761 db 000 762 db "Dawg",255,"       "763765Monster031Table: 766 dw Monster031Idle767 dw Monster031Move768 dw GeneralMonsterAttackPatternRight769 dw GeneralMonsterAttackPatternLeft770 dw GeneralMonsterAttackPatternLeftUp771 dw GeneralMonsterAttackPatternLeftDown772 dw GeneralMonsterAttackPatternRightUp773 dw GeneralMonsterAttackPatternRightDown774 db BattleMonsterSpriteSheet3Block775 db 16 776 db 16+08 777 db DragonSlayerUnitLevel4CostGold 778 db DragonSlayerUnitLevel4CostGems 779 db DragonSlayerUnitLevel4CostRubies 780 db DragonSlayerUnitLevel4HP 781 db DragonSlayerUnitLevel4Speed 782 db DragonSlayerUnitLevel4Attack 783 db DragonSlayerUnitLevel4Defense 784 db DragonSlayerUnitLevel4Growth 785 db DragonSlayerUnitLevel4Damage 786 db 000 787 db "Gers",255,"       "789Monster032Table: 790 dw Monster032Idle791 dw Monster032Move792 dw GeneralMonsterAttackPatternRight793 dw GeneralMonsterAttackPatternLeft794 dw GeneralMonsterAttackPatternLeftUp795 dw GeneralMonsterAttackPatternLeftDown796 dw GeneralMonsterAttackPatternRightUp797 dw GeneralMonsterAttackPatternRightDown798 db BattleMonsterSpriteSheet3Block799 db 16 800 db 16+08 801 db DragonSlayerUnitLevel2CostGold 802 db DragonSlayerUnitLevel2CostGems 803 db DragonSlayerUnitLevel2CostRubies 804 db DragonSlayerUnitLevel2HP 805 db DragonSlayerUnitLevel2Speed 806 db DragonSlayerUnitLevel2Attack 807 db DragonSlayerUnitLevel2Defense 808 db DragonSlayerUnitLevel2Growth 809 db DragonSlayerUnitLevel2Damage 810 db 000 811 db "Yashinotkin",255813Monster033Table: 814 dw Monster033Idle815 dw Monster033Move816 dw GeneralMonsterAttackPatternRight817 dw GeneralMonsterAttackPatternLeft818 dw GeneralMonsterAttackPatternLeftUp819 dw GeneralMonsterAttackPatternLeftDown820 dw GeneralMonsterAttackPatternRightUp821 dw GeneralMonsterAttackPatternRightDown822 db BattleMonsterSpriteSheet3Block823 db 16 824 db 16+08 825 db DragonSlayerUnitLevel6CostGold 826 db DragonSlayerUnitLevel6CostGems 827 db DragonSlayerUnitLevel6CostRubies 828 db DragonSlayerUnitLevel6HP 829 db DragonSlayerUnitLevel6Speed 830 db DragonSlayerUnitLevel6Attack 831 db DragonSlayerUnitLevel6Defense 832 db DragonSlayerUnitLevel6Growth 833 db DragonSlayerUnitLevel6Damage 834 db 000 835 db "King Mu",255,"    "837Monster034Table: 838 dw Monster034Idle839 dw Monster034Move840 dw GeneralMonsterAttackPatternRight841 dw GeneralMonsterAttackPatternLeft842 dw GeneralMonsterAttackPatternLeftUp843 dw GeneralMonsterAttackPatternLeftDown844 dw GeneralMonsterAttackPatternRightUp845 dw GeneralMonsterAttackPatternRightDown846 db BattleMonsterSpriteSheet3Block847 db 16 848 db 16+08 849 db DragonSlayerUnitLevel3CostGold 850 db DragonSlayerUnitLevel3CostGems 851 db DragonSlayerUnitLevel3CostRubies 852 db DragonSlayerUnitLevel3HP 853 db DragonSlayerUnitLevel3Speed 854 db DragonSlayerUnitLevel3Attack 855 db DragonSlayerUnitLevel3Defense 856 db DragonSlayerUnitLevel3Growth 857 db DragonSlayerUnitLevel3Damage 858 db 000 859 db "Crawler",255,"    "861Monster035Table: 862 dw Monster035Idle863 dw Monster035Move864 dw Monster035AttackPatternRight865 dw Monster035AttackPatternLeft866 dw Monster035AttackPatternLeft867 dw Monster035AttackPatternLeft868 dw Monster035AttackPatternRight869 dw Monster035AttackPatternRight870 db BattleMonsterSpriteSheet3Block871 db 16 872 db 16+08 873 db DragonSlayerUnitLevel5CostGold 874 db DragonSlayerUnitLevel5CostGems 875 db DragonSlayerUnitLevel5CostRubies 876 db DragonSlayerUnitLevel5HP 877 db DragonSlayerUnitLevel5Speed 878 db DragonSlayerUnitLevel5Attack 879 db DragonSlayerUnitLevel5Defense 880 db DragonSlayerUnitLevel5Growth 881 db DragonSlayerUnitLevel5Damage 882 db RangedMonster 883 db "Octo",255,"       "885Monster036Table: 886 dw Monster036Idle887 dw Monster036Move888 dw Monster036AttackPatternRight889 dw Monster036AttackPatternLeft890 dw Monster036AttackPatternLeft891 dw Monster036AttackPatternLeft892 dw Monster036AttackPatternRight893 dw Monster036AttackPatternRight894 db BattleMonsterSpriteSheet3Block895 db 16 896 db 32+08 897 db ContraGroupBUnitLevel2CostGold 898 db ContraGroupBUnitLevel2CostGems 899 db ContraGroupBUnitLevel2CostRubies 900 db ContraGroupBUnitLevel2HP 901 db ContraGroupBUnitLevel2Speed 902 db ContraGroupBUnitLevel2Attack 903 db ContraGroupBUnitLevel2Defense 904 db ContraGroupBUnitLevel2Growth 905 db ContraGroupBUnitLevel2Damage 906 db RangedMonster 907 db "Sarge",255,"      "909Monster037Table: 910 dw Monster037Idle911 dw Monster037Move912 dw GeneralMonsterAttackPatternRight913 dw GeneralMonsterAttackPatternLeft914 dw GeneralMonsterAttackPatternLeftUp915 dw GeneralMonsterAttackPatternLeftDown916 dw GeneralMonsterAttackPatternRightUp917 dw GeneralMonsterAttackPatternRightDown918 db BattleMonsterSpriteSheet4Block919 db 16 920 db 32+08 921 db ContraGroupBUnitLevel4CostGold 922 db ContraGroupBUnitLevel4CostGems 923 db ContraGroupBUnitLevel4CostRubies 924 db ContraGroupBUnitLevel4HP 925 db ContraGroupBUnitLevel4Speed 926 db ContraGroupBUnitLevel4Attack 927 db ContraGroupBUnitLevel4Defense 928 db ContraGroupBUnitLevel4Growth 929 db ContraGroupBUnitLevel4Damage 930 db 000 931 db "Lieutenant",255," "933Monster038Table: 934 dw Monster038Idle935 dw Monster038Move936 dw GeneralMonsterAttackPatternRight937 dw GeneralMonsterAttackPatternLeft938 dw GeneralMonsterAttackPatternLeftUp939 dw GeneralMonsterAttackPatternLeftDown940 dw GeneralMonsterAttackPatternRightUp941 dw GeneralMonsterAttackPatternRightDown942 db BattleMonsterSpriteSheet1Block943 db 16 944 db 32+08 945 db ContraGroupAUnitLevel1CostGold 946 db ContraGroupAUnitLevel1CostGems 947 db ContraGroupAUnitLevel1CostRubies 948 db ContraGroupAUnitLevel1HP 949 db ContraGroupAUnitLevel1Speed 950 db ContraGroupAUnitLevel1Attack 951 db ContraGroupAUnitLevel1Defense 952 db ContraGroupAUnitLevel1Growth 953 db ContraGroupAUnitLevel1Damage 954 db 000 955 db "FootSoldier",255957Monster039Table: 958 dw Monster039Idle959 dw Monster039Move960 dw Monster039AttackPatternRight961 dw Monster039AttackPatternLeft962 dw Monster039AttackPatternLeft963 dw Monster039AttackPatternLeft964 dw Monster039AttackPatternRight965 dw Monster039AttackPatternRight966 db BattleMonsterSpriteSheet4Block967 db 32 968 db 32+08 969 db ContraGroupBUnitLevel5CostGold 970 db ContraGroupBUnitLevel5CostGems 971 db ContraGroupBUnitLevel5CostRubies 972 db ContraGroupBUnitLevel5HP 973 db ContraGroupBUnitLevel5Speed 974 db ContraGroupBUnitLevel5Attack 975 db ContraGroupBUnitLevel5Defense 976 db ContraGroupBUnitLevel5Growth 977 db ContraGroupBUnitLevel5Damage 978 db RangedMonster 979 db "Grenadier",255,"  "981Monster040Table: 982 dw Monster040Idle983 dw Monster040Move984 dw Monster040AttackPatternRight985 dw Monster040AttackPatternLeft986 dw Monster040AttackPatternLeft987 dw Monster040AttackPatternLeft988 dw Monster040AttackPatternRight989 dw Monster040AttackPatternRight990 db BattleMonsterSpriteSheet4Block991 db 32 992 db 32+08 993 db ContraGroupBUnitLevel6CostGold 994 db ContraGroupBUnitLevel6CostGems 995 db ContraGroupBUnitLevel6CostRubies 996 db ContraGroupBUnitLevel6HP 997 db ContraGroupBUnitLevel6Speed 998 db ContraGroupBUnitLevel6Attack 999 db ContraGroupBUnitLevel6Defense 1000 db ContraGroupBUnitLevel6Growth 1001 db ContraGroupBUnitLevel6Damage 1002 db RangedMonster 1003 db "Sniper",255,"     "1005Monster041Table: 1006 dw Monster041Idle1007 dw Monster041Move1008 dw GeneralMonsterAttackPatternRight1009 dw GeneralMonsterAttackPatternLeft1010 dw GeneralMonsterAttackPatternLeftUp1011 dw GeneralMonsterAttackPatternLeftDown1012 dw GeneralMonsterAttackPatternRightUp1013 dw GeneralMonsterAttackPatternRightDown1014 db BattleMonsterSpriteSheet2Block1015 db 32 1016 db 24+08 1017 db ContraGroupAUnitLevel3CostGold 1018 db ContraGroupAUnitLevel3CostGems 1019 db ContraGroupAUnitLevel3CostRubies 1020 db ContraGroupAUnitLevel3HP 1021 db ContraGroupAUnitLevel3Speed 1022 db ContraGroupAUnitLevel3Attack 1023 db ContraGroupAUnitLevel3Defense 1024 db ContraGroupAUnitLevel3Growth 1025 db ContraGroupAUnitLevel3Damage 1026 db 000 1027 db "Gigafly",255,"    "1029Monster042Table: 1030 dw Monster042Idle1031 dw Monster042Move1032 dw GeneralMonsterAttackPatternRight1033 dw GeneralMonsterAttackPatternLeft1034 dw GeneralMonsterAttackPatternLeftUp1035 dw GeneralMonsterAttackPatternLeftDown1036 dw GeneralMonsterAttackPatternRightUp1037 dw GeneralMonsterAttackPatternRightDown1038 db BattleMonsterSpriteSheet4Block1039 db 32 1040 db 32+08 1041 db ContraGroupAUnitLevel2CostGold 1042 db ContraGroupAUnitLevel2CostGems 1043 db ContraGroupAUnitLevel2CostRubies 1044 db ContraGroupAUnitLevel2HP 1045 db ContraGroupAUnitLevel2Speed 1046 db ContraGroupAUnitLevel2Attack 1047 db ContraGroupAUnitLevel2Defense 1048 db ContraGroupAUnitLevel2Growth 1049 db ContraGroupAUnitLevel2Damage 1050 db 000 1051 db "Alien Grunt",2551053Monster043Table: 1054 dw Monster043Idle1055 dw Monster043Move1056 dw GeneralMonsterAttackPatternRight1057 dw GeneralMonsterAttackPatternLeft1058 dw GeneralMonsterAttackPatternLeftUp1059 dw GeneralMonsterAttackPatternLeftDown1060 dw GeneralMonsterAttackPatternRightUp1061 dw GeneralMonsterAttackPatternRightDown1062 db BattleMonsterSpriteSheet3Block1063 db 16 1064 db 32+08 1065 db ContraGroupBUnitLevel3CostGold 1066 db ContraGroupBUnitLevel3CostGems 1067 db ContraGroupBUnitLevel3CostRubies 1068 db ContraGroupBUnitLevel3HP 1069 db ContraGroupBUnitLevel3Speed 1070 db ContraGroupBUnitLevel3Attack 1071 db ContraGroupBUnitLevel3Defense 1072 db ContraGroupBUnitLevel3Growth 1073 db ContraGroupBUnitLevel3Damage 1074 db 000 1075 db "Infiltrant",255," "1077Monster044Table: 1078 dw Monster044Idle1079 dw Monster044Move1080 dw GeneralMonsterAttackPatternRight1081 dw GeneralMonsterAttackPatternLeft1082 dw GeneralMonsterAttackPatternLeftUp1083 dw GeneralMonsterAttackPatternLeftDown1084 dw GeneralMonsterAttackPatternRightUp1085 dw GeneralMonsterAttackPatternRightDown1086 db BattleMonsterSpriteSheet4Block1087 db 32 1088 db 32+08 1089 db ContraGroupBUnitLevel1CostGold 1090 db ContraGroupBUnitLevel1CostGems 1091 db ContraGroupBUnitLevel1CostRubies 1092 db ContraGroupBUnitLevel1HP 1093 db ContraGroupBUnitLevel1Speed 1094 db ContraGroupBUnitLevel1Attack 1095 db ContraGroupBUnitLevel1Defense 1096 db ContraGroupBUnitLevel1Growth 1097 db ContraGroupBUnitLevel1Damage 1098 db 000 1099 db "Red Soldier",2551100 1101Monster045Table: 1102 dw Monster045Idle1103 dw Monster045Move1104 dw GeneralMonsterAttackPatternRight1105 dw GeneralMonsterAttackPatternLeft1106 dw GeneralMonsterAttackPatternLeftUp1107 dw GeneralMonsterAttackPatternLeftDown1108 dw GeneralMonsterAttackPatternRightUp1109 dw GeneralMonsterAttackPatternRightDown1110 db BattleMonsterSpriteSheet2Block1111 db 32 1112 db 24+08 1113 db ContraGroupAUnitLevel5CostGold 1114 db ContraGroupAUnitLevel5CostGems 1115 db ContraGroupAUnitLevel5CostRubies 1116 db ContraGroupAUnitLevel5HP 1117 db ContraGroupAUnitLevel5Speed 1118 db ContraGroupAUnitLevel5Attack 1119 db ContraGroupAUnitLevel5Defense 1120 db ContraGroupAUnitLevel5Growth 1121 db ContraGroupAUnitLevel5Damage 1122 db 000 1123 db "Face Hugger",2551125Monster046Table: 1126 dw Monster046Idle1127 dw Monster046Move1128 dw GeneralMonsterAttackPatternRight1129 dw GeneralMonsterAttackPatternLeft1130 dw GeneralMonsterAttackPatternLeftUp1131 dw GeneralMonsterAttackPatternLeftDown1132 dw GeneralMonsterAttackPatternRightUp1133 dw GeneralMonsterAttackPatternRightDown1134 db BattleMonsterSpriteSheet4Block1135 db 32 1136 db 56+08 1137 db ContraGroupAUnitLevel6CostGold 1138 db ContraGroupAUnitLevel6CostGems 1139 db ContraGroupAUnitLevel6CostRubies 1140 db ContraGroupAUnitLevel6HP 1141 db ContraGroupAUnitLevel6Speed 1142 db ContraGroupAUnitLevel6Attack 1143 db ContraGroupAUnitLevel6Defense 1144 db ContraGroupAUnitLevel6Growth 1145 db ContraGroupAUnitLevel6Damage 1146 db 000 1147 db "Gorudea",255,"    "1149Monster047Table: 1150 dw Monster047Idle1151 dw Monster047Move1152 dw Monster047AttackPatternRight1153 dw Monster047AttackPatternLeft1154 dw Monster047AttackPatternLeft1155 dw Monster047AttackPatternLeft1156 dw Monster047AttackPatternRight1157 dw Monster047AttackPatternRight1158 db BattleMonsterSpriteSheet3Block1159 db 32 1160 db 32+08 1161 db ContraGroupAUnitLevel4CostGold 1162 db ContraGroupAUnitLevel4CostGems 1163 db ContraGroupAUnitLevel4CostRubies 1164 db ContraGroupAUnitLevel4HP 1165 db ContraGroupAUnitLevel4Speed 1166 db ContraGroupAUnitLevel4Attack 1167 db ContraGroupAUnitLevel4Defense 1168 db ContraGroupAUnitLevel4Growth 1169 db ContraGroupAUnitLevel4Damage 1170 db RangedMonster 1171 db "Turret",255,"     "1180Monster048Table: 1181 dw Monster048Idle1182 dw Monster048Move1183 dw GeneralMonsterAttackPatternRight1184 dw GeneralMonsterAttackPatternLeft1185 dw GeneralMonsterAttackPatternLeftUp1186 dw GeneralMonsterAttackPatternLeftDown1187 dw GeneralMonsterAttackPatternRightUp1188 dw GeneralMonsterAttackPatternRightDown1189 db BattleMonsterSpriteSheet2Block1190 db 16 1191 db 40+08 1192 db UsasUnitLevel4CostGold 1193 db UsasUnitLevel4CostGems 1194 db UsasUnitLevel4CostRubies 1195 db UsasUnitLevel4HP 1196 db UsasUnitLevel4Speed 1197 db UsasUnitLevel4Attack 1198 db UsasUnitLevel4Defense 1199 db UsasUnitLevel4Growth 1200 db UsasUnitLevel4Damage 1201 db 000 1202 db "Gravewing",255,"  "1204Monster049Table: 1205 dw Monster049Idle1206 dw Monster049Move1207 dw Monster049AttackPatternRight1208 dw Monster049AttackPatternLeft1209 dw Monster049AttackPatternLeft1210 dw Monster049AttackPatternLeft1211 dw Monster049AttackPatternRight1212 dw Monster049AttackPatternRight1213 db BattleMonsterSpriteSheet4Block1214 db 16 1215 db 24+08 1216 db UsasUnitLevel5CostGold 1217 db UsasUnitLevel5CostGems 1218 db UsasUnitLevel5CostRubies 1219 db UsasUnitLevel5HP 1220 db UsasUnitLevel5Speed 1221 db UsasUnitLevel5Attack 1222 db UsasUnitLevel5Defense 1223 db UsasUnitLevel5Growth 1224 db UsasUnitLevel5Damage 1225 db RangedMonster 1226 db "Vanguard",255,"   "1228Monster050Table: 1229 dw Monster050Idle1230 dw Monster050Move1231 dw GeneralMonsterAttackPatternRight1232 dw GeneralMonsterAttackPatternLeft1233 dw GeneralMonsterAttackPatternLeftUp1234 dw GeneralMonsterAttackPatternLeftDown1235 dw GeneralMonsterAttackPatternRightUp1236 dw GeneralMonsterAttackPatternRightDown1237 db BattleMonsterSpriteSheet4Block1238 db 16 1239 db 32+08 1240 db UsasUnitLevel6CostGold 1241 db UsasUnitLevel6CostGems 1242 db UsasUnitLevel6CostRubies 1243 db UsasUnitLevel6HP 1244 db UsasUnitLevel6Speed 1245 db UsasUnitLevel6Attack 1246 db UsasUnitLevel6Defense 1247 db UsasUnitLevel6Growth 1248 db UsasUnitLevel6Damage 1249 db 000 1250 db "Aerial Luna",2551251 1252Monster051Table: 1253 dw Monster051Idle1254 dw Monster051Move1255 dw GeneralMonsterAttackPatternRight1256 dw GeneralMonsterAttackPatternLeft1257 dw GeneralMonsterAttackPatternLeftUp1258 dw GeneralMonsterAttackPatternLeftDown1259 dw GeneralMonsterAttackPatternRightUp1260 dw GeneralMonsterAttackPatternRightDown1261 db BattleMonsterSpriteSheet4Block1262 db 16 1263 db 16+08 1264 db UsasUnitLevel1CostGold 1265 db UsasUnitLevel1CostGems 1266 db UsasUnitLevel1CostRubies 1267 db UsasUnitLevel1HP 1268 db UsasUnitLevel1Speed 1269 db UsasUnitLevel1Attack 1270 db UsasUnitLevel1Defense 1271 db UsasUnitLevel1Growth 1272 db UsasUnitLevel1Damage 1273 db 000 1274 db "Mini Phanto",2551275 1276Monster052Table: 1277 dw Monster052Idle1278 dw Monster052Move1279 dw GeneralMonsterAttackPatternRight1280 dw GeneralMonsterAttackPatternLeft1281 dw GeneralMonsterAttackPatternLeftUp1282 dw GeneralMonsterAttackPatternLeftDown1283 dw GeneralMonsterAttackPatternRightUp1284 dw GeneralMonsterAttackPatternRightDown1285 db BattleMonsterSpriteSheet4Block1286 db 16 1287 db 16+08 1288 db UsasUnitLevel2CostGold 1289 db UsasUnitLevel2CostGems 1290 db UsasUnitLevel2CostRubies 1291 db UsasUnitLevel2HP 1292 db UsasUnitLevel2Speed 1293 db UsasUnitLevel2Attack 1294 db UsasUnitLevel2Defense 1295 db UsasUnitLevel2Growth 1296 db UsasUnitLevel2Damage 1297 db 000 1298 db "Thicket Tot",2551299 1300Monster053Table: 1301 dw Monster053Idle1302 dw Monster053Move1303 dw GeneralMonsterAttackPatternRight1304 dw GeneralMonsterAttackPatternLeft1305 dw GeneralMonsterAttackPatternLeftUp1306 dw GeneralMonsterAttackPatternLeftDown1307 dw GeneralMonsterAttackPatternRightUp1308 dw GeneralMonsterAttackPatternRightDown1309 db BattleMonsterSpriteSheet3Block1310 db 16 1311 db 16+08 1312 db UsasUnitLevel1CostGold 1313 db UsasUnitLevel1CostGems 1314 db UsasUnitLevel1CostRubies 1315 db UsasUnitLevel1HP 1316 db UsasUnitLevel1Speed 1317 db UsasUnitLevel1Attack 1318 db UsasUnitLevel1Defense 1319 db UsasUnitLevel1Growth 1320 db UsasUnitLevel1Damage 1321 db 000 1322 db "Bonefin",255,"    "1324Monster054Table: 1325 dw Monster054Idle1326 dw Monster054Move1327 dw GeneralMonsterAttackPatternRight1328 dw GeneralMonsterAttackPatternLeft1329 dw GeneralMonsterAttackPatternLeftUp1330 dw GeneralMonsterAttackPatternLeftDown1331 dw GeneralMonsterAttackPatternRightUp1332 dw GeneralMonsterAttackPatternRightDown1333 db BattleMonsterSpriteSheet2Block1334 db 16 1335 db 32+08 1336 db UsasUnitLevel3CostGold 1337 db UsasUnitLevel3CostGems 1338 db UsasUnitLevel3CostRubies 1339 db UsasUnitLevel3HP 1340 db UsasUnitLevel3Speed 1341 db UsasUnitLevel3Attack 1342 db UsasUnitLevel3Defense 1343 db UsasUnitLevel3Growth 1344 db UsasUnitLevel3Damage 1345 db 000 1346 db "Zomblet",255,"    "1348Monster055Table: 1349 dw Monster055Idle1350 dw Monster055Move1351 dw Monster055AttackPatternRight1352 dw Monster055AttackPatternLeft1353 dw Monster055AttackPatternLeftUp1354 dw Monster055AttackPatternLeftDown1355 dw Monster055AttackPatternRightUp1356 dw Monster055AttackPatternRightDown1357 db BattleMonsterSpriteSheet5Block1358 db 32 1359 db 32+08 1360 db GoemonUnitLevel2CostGold 1361 db GoemonUnitLevel2CostGems 1362 db GoemonUnitLevel2CostRubies 1363 db GoemonUnitLevel2HP 1364 db GoemonUnitLevel2Speed 1365 db GoemonUnitLevel2Attack 1366 db GoemonUnitLevel2Defense 1367 db GoemonUnitLevel2Growth 1368 db GoemonUnitLevel2Damage 1369 db 000 1370 db "Cheek",255,"      "1372Monster056Table: 1373 dw Monster056Idle1374 dw Monster056Move1375 dw GeneralMonsterAttackPatternRight1376 dw GeneralMonsterAttackPatternLeft1377 dw GeneralMonsterAttackPatternLeftUp1378 dw GeneralMonsterAttackPatternLeftDown1379 dw GeneralMonsterAttackPatternRightUp1380 dw GeneralMonsterAttackPatternRightDown1381 db BattleMonsterSpriteSheet5Block1382 db 32 1383 db 32+08 1384 db GoemonUnitLevel4CostGold 1385 db GoemonUnitLevel4CostGems 1386 db GoemonUnitLevel4CostRubies 1387 db GoemonUnitLevel4HP 1388 db GoemonUnitLevel4Speed 1389 db GoemonUnitLevel4Attack 1390 db GoemonUnitLevel4Defense 1391 db GoemonUnitLevel4Growth 1392 db GoemonUnitLevel4Damage 1393 db 000 1394 db "Official",255,"   "1396Monster057Table: 1397 dw Monster057Idle1398 dw Monster057Move1399 dw GeneralMonsterAttackPatternRight1400 dw GeneralMonsterAttackPatternLeft1401 dw GeneralMonsterAttackPatternLeftUp1402 dw GeneralMonsterAttackPatternLeftDown1403 dw GeneralMonsterAttackPatternRightUp1404 dw GeneralMonsterAttackPatternRightDown1405 db BattleMonsterSpriteSheet5Block1406 db 32 1407 db 32+08 1408 db GoemonUnitLevel2CostGold 1409 db GoemonUnitLevel2CostGems 1410 db GoemonUnitLevel2CostRubies 1411 db GoemonUnitLevel2HP 1412 db GoemonUnitLevel2Speed 1413 db GoemonUnitLevel2Attack 1414 db GoemonUnitLevel2Defense 1415 db GoemonUnitLevel2Growth 1416 db GoemonUnitLevel2Damage 1417 db 000 1418 db "Kasa Obake",255," "1420Monster058Table: 1421 dw Monster058Idle1422 dw Monster058Move1423 dw Monster058AttackPatternRight1424 dw Monster058AttackPatternLeft1425 dw Monster058AttackPatternLeftUp1426 dw Monster058AttackPatternLeftDown1427 dw Monster058AttackPatternRightUp1428 dw Monster058AttackPatternRightDown1429 db BattleMonsterSpriteSheet5Block1430 db 32 1431 db 32+08 1432 db GoemonUnitLevel2CostGold 1433 db GoemonUnitLevel2CostGems 1434 db GoemonUnitLevel2CostRubies 1435 db GoemonUnitLevel2HP 1436 db GoemonUnitLevel2Speed 1437 db GoemonUnitLevel2Attack 1438 db GoemonUnitLevel2Defense 1439 db GoemonUnitLevel2Growth 1440 db GoemonUnitLevel2Damage 1441 db 000 1442 db "Fishmonger",255," "1444Monster059Table: 1445 dw Monster059Idle1446 dw Monster059Move1447 dw GeneralMonsterAttackPatternRight1448 dw GeneralMonsterAttackPatternLeft1449 dw GeneralMonsterAttackPatternLeftUp1450 dw GeneralMonsterAttackPatternLeftDown1451 dw GeneralMonsterAttackPatternRightUp1452 dw GeneralMonsterAttackPatternRightDown1453 db BattleMonsterSpriteSheet5Block1454 db 32 1455 db 32+08 1456 db GoemonUnitLevel6CostGold 1457 db GoemonUnitLevel6CostGems 1458 db GoemonUnitLevel6CostRubies 1459 db GoemonUnitLevel6HP 1460 db GoemonUnitLevel6Speed 1461 db GoemonUnitLevel6Attack 1462 db GoemonUnitLevel6Defense 1463 db GoemonUnitLevel6Growth 1464 db GoemonUnitLevel6Damage 1465 db 000 1466 db "Ronin",255,"      "1468Monster060Table: 1469 dw Monster060Idle1470 dw Monster060Move1471 dw GeneralMonsterAttackPatternRight1472 dw GeneralMonsterAttackPatternLeft1473 dw GeneralMonsterAttackPatternLeftUp1474 dw GeneralMonsterAttackPatternLeftDown1475 dw GeneralMonsterAttackPatternRightUp1476 dw GeneralMonsterAttackPatternRightDown1477 db BattleMonsterSpriteSheet5Block1478 db 32 1479 db 32+08 1480 db GoemonUnitLevel3CostGold 1481 db GoemonUnitLevel3CostGems 1482 db GoemonUnitLevel3CostRubies 1483 db GoemonUnitLevel3HP 1484 db GoemonUnitLevel3Speed 1485 db GoemonUnitLevel3Attack 1486 db GoemonUnitLevel3Defense 1487 db GoemonUnitLevel3Growth 1488 db GoemonUnitLevel3Damage 1489 db 000 1490 db "Bucket Head",2551492Monster061Table: 1493 dw Monster061Idle1494 dw Monster061Move1495 dw GeneralMonsterAttackPatternRight1496 dw GeneralMonsterAttackPatternLeft1497 dw GeneralMonsterAttackPatternLeftUp1498 dw GeneralMonsterAttackPatternLeftDown1499 dw GeneralMonsterAttackPatternRightUp1500 dw GeneralMonsterAttackPatternRightDown1501 db BattleMonsterSpriteSheet5Block1502 db 48 1503 db 32+08 1504 db GoemonUnitLevel5CostGold 1505 db GoemonUnitLevel5CostGems 1506 db GoemonUnitLevel5CostRubies 1507 db GoemonUnitLevel5HP 1508 db GoemonUnitLevel5Speed 1509 db GoemonUnitLevel5Attack 1510 db GoemonUnitLevel5Defense 1511 db GoemonUnitLevel5Growth 1512 db GoemonUnitLevel5Damage 1513 db 000 1514 db "Headmaster",255," "1516Monster062Table: 1517 dw Monster062Idle1518 dw Monster062Move1519 dw Monster062AttackPatternRight1520 dw Monster062AttackPatternLeft1521 dw Monster062AttackPatternLeftUp1522 dw Monster062AttackPatternLeftDown1523 dw Monster062AttackPatternRightUp1524 dw Monster062AttackPatternRightDown1525 db BattleMonsterSpriteSheet5Block1526 db 32 1527 db 32+08 1528 db GoemonUnitLevel1CostGold 1529 db GoemonUnitLevel1CostGems 1530 db GoemonUnitLevel1CostRubies 1531 db GoemonUnitLevel1HP 1532 db GoemonUnitLevel1Speed 1533 db GoemonUnitLevel1Attack 1534 db GoemonUnitLevel1Defense 1535 db GoemonUnitLevel1Growth 1536 db GoemonUnitLevel1Damage 1537 db 000 1538 db "Granola",255,"    "1540Monster063Table: 1541 dw Monster063Idle1542 dw Monster063Move1543 dw GeneralMonsterAttackPatternRight1544 dw GeneralMonsterAttackPatternLeft1545 dw GeneralMonsterAttackPatternLeftUp1546 dw GeneralMonsterAttackPatternLeftDown1547 dw GeneralMonsterAttackPatternRightUp1548 dw GeneralMonsterAttackPatternRightDown1549 db BattleMonsterSpriteSheet4Block1550 db 16 1551 db 16+08 1552 db PsychoWorldUnitLevel2CostGold 1553 db PsychoWorldUnitLevel2CostGems 1554 db PsychoWorldUnitLevel2CostRubies 1555 db PsychoWorldUnitLevel2HP 1556 db PsychoWorldUnitLevel2Speed 1557 db PsychoWorldUnitLevel2Attack 1558 db PsychoWorldUnitLevel2Defense 1559 db PsychoWorldUnitLevel2Growth 1560 db PsychoWorldUnitLevel2Damage 1561 db 000 1562 db "Rouge Gazer",2551564Monster064Table: 1565 dw Monster064Idle1566 dw Monster064Move1567 dw GeneralMonsterAttackPatternRight1568 dw GeneralMonsterAttackPatternLeft1569 dw GeneralMonsterAttackPatternLeftUp1570 dw GeneralMonsterAttackPatternLeftDown1571 dw GeneralMonsterAttackPatternRightUp1572 dw GeneralMonsterAttackPatternRightDown1573 db BattleMonsterSpriteSheet4Block1574 db 16 1575 db 16+08 1576 db PsychoWorldUnitLevel3CostGold 1577 db PsychoWorldUnitLevel3CostGems 1578 db PsychoWorldUnitLevel3CostRubies 1579 db PsychoWorldUnitLevel3HP 1580 db PsychoWorldUnitLevel3Speed 1581 db PsychoWorldUnitLevel3Attack 1582 db PsychoWorldUnitLevel3Defense 1583 db PsychoWorldUnitLevel3Growth 1584 db PsychoWorldUnitLevel3Damage 1585 db 000 1586 db "Glacierling",2551588Monster065Table: 1589 dw Monster065Idle1590 dw Monster065Move1591 dw GeneralMonsterAttackPatternRight1592 dw GeneralMonsterAttackPatternLeft1593 dw GeneralMonsterAttackPatternLeftUp1594 dw GeneralMonsterAttackPatternLeftDown1595 dw GeneralMonsterAttackPatternRightUp1596 dw GeneralMonsterAttackPatternRightDown1597 db BattleMonsterSpriteSheet6Block1598 db 16 1599 db 16+08 1600 db PsychoWorldUnitLevel4CostGold 1601 db PsychoWorldUnitLevel4CostGems 1602 db PsychoWorldUnitLevel4CostRubies 1603 db PsychoWorldUnitLevel4HP 1604 db PsychoWorldUnitLevel4Speed 1605 db PsychoWorldUnitLevel4Attack 1606 db PsychoWorldUnitLevel4Defense 1607 db PsychoWorldUnitLevel4Growth 1608 db PsychoWorldUnitLevel4Damage 1609 db 000 1610 db "Floatwing",255,"  "1612Monster066Table: 1613 dw Monster066Idle1614 dw Monster066Move1615 dw GeneralMonsterAttackPatternRight1616 dw GeneralMonsterAttackPatternLeft1617 dw GeneralMonsterAttackPatternLeftUp1618 dw GeneralMonsterAttackPatternLeftDown1619 dw GeneralMonsterAttackPatternRightUp1620 dw GeneralMonsterAttackPatternRightDown1621 db BattleMonsterSpriteSheet3Block1622 db 16 1623 db 16+08 1624 db PsychoWorldUnitLevel1CostGold 1625 db PsychoWorldUnitLevel1CostGems 1626 db PsychoWorldUnitLevel1CostRubies 1627 db PsychoWorldUnitLevel1HP 1628 db PsychoWorldUnitLevel1Speed 1629 db PsychoWorldUnitLevel1Attack 1630 db PsychoWorldUnitLevel1Defense 1631 db PsychoWorldUnitLevel1Growth 1632 db PsychoWorldUnitLevel1Damage 1633 db 000 1634 db "CrimsonPeek",2551636Monster067Table: 1637 dw Monster067Idle1638 dw Monster067Move1639 dw GeneralMonsterAttackPatternRight1640 dw GeneralMonsterAttackPatternLeft1641 dw GeneralMonsterAttackPatternLeftUp1642 dw GeneralMonsterAttackPatternLeftDown1643 dw GeneralMonsterAttackPatternRightUp1644 dw GeneralMonsterAttackPatternRightDown1645 db BattleMonsterSpriteSheet6Block1646 db 16 1647 db 16+08 1648 db PsychoWorldUnitLevel2CostGold 1649 db PsychoWorldUnitLevel2CostGems 1650 db PsychoWorldUnitLevel2CostRubies 1651 db PsychoWorldUnitLevel2HP 1652 db PsychoWorldUnitLevel2Speed 1653 db PsychoWorldUnitLevel2Attack 1654 db PsychoWorldUnitLevel2Defense 1655 db PsychoWorldUnitLevel2Growth 1656 db PsychoWorldUnitLevel2Damage 1657 db 000 1658 db "Fernling",255,"   "1660Monster068Table: 1661 dw Monster068Idle1662 dw Monster068Move1663 dw GeneralMonsterAttackPatternRight1664 dw GeneralMonsterAttackPatternLeft1665 dw GeneralMonsterAttackPatternLeftUp1666 dw GeneralMonsterAttackPatternLeftDown1667 dw GeneralMonsterAttackPatternRightUp1668 dw GeneralMonsterAttackPatternRightDown1669 db BattleMonsterSpriteSheet6Block1670 db 32 1671 db 32+08 1672 db PsychoWorldUnitLevel6CostGold 1673 db PsychoWorldUnitLevel6CostGems 1674 db PsychoWorldUnitLevel6CostRubies 1675 db PsychoWorldUnitLevel6HP 1676 db PsychoWorldUnitLevel6Speed 1677 db PsychoWorldUnitLevel6Attack 1678 db PsychoWorldUnitLevel6Defense 1679 db PsychoWorldUnitLevel6Growth 1680 db PsychoWorldUnitLevel6Damage 1681 db 000 1682 db "Bladezilla",255," "1684Monster069Table: 1685 dw Monster069Idle1686 dw Monster069Move1687 dw Monster069AttackPatternRight1688 dw Monster069AttackPatternLeft1689 dw Monster069AttackPatternLeft1690 dw Monster069AttackPatternLeft1691 dw Monster069AttackPatternRight1692 dw Monster069AttackPatternRight1693 db BattleMonsterSpriteSheet6Block1694 db 32 1695 db 32+08 1696 db PsychoWorldUnitLevel5CostGold 1697 db PsychoWorldUnitLevel5CostGems 1698 db PsychoWorldUnitLevel5CostRubies 1699 db PsychoWorldUnitLevel5HP 1700 db PsychoWorldUnitLevel5Speed 1701 db PsychoWorldUnitLevel5Attack 1702 db PsychoWorldUnitLevel5Defense 1703 db PsychoWorldUnitLevel5Growth 1704 db PsychoWorldUnitLevel5Damage 1705 db RangedMonster 1706 db "Spitvine",255,"   "1708Monster070Table: 1709 dw Monster070Idle1710 dw Monster070Move1711 dw GeneralMonsterAttackPatternRight1712 dw GeneralMonsterAttackPatternLeft1713 dw GeneralMonsterAttackPatternLeftUp1714 dw GeneralMonsterAttackPatternLeftDown1715 dw GeneralMonsterAttackPatternRightUp1716 dw GeneralMonsterAttackPatternRightDown1717 db BattleMonsterSpriteSheet4Block1718 db 16 1719 db 16+08 1720 db PsychoWorldUnitLevel1CostGold 1721 db PsychoWorldUnitLevel1CostGems 1722 db PsychoWorldUnitLevel1CostRubies 1723 db PsychoWorldUnitLevel1HP 1724 db PsychoWorldUnitLevel1Speed 1725 db PsychoWorldUnitLevel1Attack 1726 db PsychoWorldUnitLevel1Defense 1727 db PsychoWorldUnitLevel1Growth 1728 db PsychoWorldUnitLevel1Damage 1729 db 000 1730 db "OptiLeaper",255," "1732Monster071Table: 1733 dw Monster071Idle1734 dw Monster071Move1735 dw GeneralMonsterAttackPatternRight1736 dw GeneralMonsterAttackPatternLeft1737 dw GeneralMonsterAttackPatternLeftUp1738 dw GeneralMonsterAttackPatternLeftDown1739 dw GeneralMonsterAttackPatternRightUp1740 dw GeneralMonsterAttackPatternRightDown1741 db BattleMonsterSpriteSheet2Block1742 db 64 1743 db 64+04 1744 db BubbleBobbleGroupAUnitLevel6CostGold 1745 db BubbleBobbleGroupAUnitLevel6CostGems 1746 db BubbleBobbleGroupAUnitLevel6CostRubies 1747 db BubbleBobbleGroupAUnitLevel6HP 1748 db BubbleBobbleGroupAUnitLevel6Speed 1749 db BubbleBobbleGroupAUnitLevel6Attack 1750 db BubbleBobbleGroupAUnitLevel6Defense 1751 db BubbleBobbleGroupAUnitLevel6Growth 1752 db BubbleBobbleGroupAUnitLevel6Damage 1753 db 000 1754 db "Boo",255,"        "1756Monster072Table: 1757 dw Monster072Idle1758 dw Monster072Move1759 dw GeneralMonsterAttackPatternRight1760 dw GeneralMonsterAttackPatternLeft1761 dw GeneralMonsterAttackPatternLeftUp1762 dw GeneralMonsterAttackPatternLeftDown1763 dw GeneralMonsterAttackPatternRightUp1764 dw GeneralMonsterAttackPatternRightDown1765 db BattleMonsterSpriteSheet6Block1766 db 32 1767 db 32+08 1768 db KingKongUnitLevel6CostGold 1769 db KingKongUnitLevel6CostGems 1770 db KingKongUnitLevel6CostRubies 1771 db KingKongUnitLevel6HP 1772 db KingKongUnitLevel6Speed 1773 db KingKongUnitLevel6Attack 1774 db KingKongUnitLevel6Defense 1775 db KingKongUnitLevel6Growth 1776 db KingKongUnitLevel6Damage 1777 db 000 1778 db "King Kong",255,"  "1780Monster073Table: 1781 dw Monster073Idle1782 dw Monster073Move1783 dw GeneralMonsterAttackPatternRight1784 dw GeneralMonsterAttackPatternLeft1785 dw GeneralMonsterAttackPatternLeftUp1786 dw GeneralMonsterAttackPatternLeftDown1787 dw GeneralMonsterAttackPatternRightUp1788 dw GeneralMonsterAttackPatternRightDown1789 db BattleMonsterSpriteSheet6Block1790 db 32 1791 db 32+08 1792 db KingKongUnitLevel5CostGold 1793 db KingKongUnitLevel5CostGems 1794 db KingKongUnitLevel5CostRubies 1795 db KingKongUnitLevel5HP 1796 db KingKongUnitLevel5Speed 1797 db KingKongUnitLevel5Attack 1798 db KingKongUnitLevel5Defense 1799 db KingKongUnitLevel5Growth 1800 db KingKongUnitLevel5Damage 1801 db 000 1802 db "RockGoliath",2551804Monster074Table: 1805 dw Monster074Idle1806 dw Monster074Move1807 dw GeneralMonsterAttackPatternRight1808 dw GeneralMonsterAttackPatternLeft1809 dw GeneralMonsterAttackPatternLeftUp1810 dw GeneralMonsterAttackPatternLeftDown1811 dw GeneralMonsterAttackPatternRightUp1812 dw GeneralMonsterAttackPatternRightDown1813 db BattleMonsterSpriteSheet6Block1814 db 16 1815 db 16+08 1816 db KingKongUnitLevel4CostGold 1817 db KingKongUnitLevel4CostGems 1818 db KingKongUnitLevel4CostRubies 1819 db KingKongUnitLevel4HP 1820 db KingKongUnitLevel4Speed 1821 db KingKongUnitLevel4Attack 1822 db KingKongUnitLevel4Defense 1823 db KingKongUnitLevel4Growth 1824 db KingKongUnitLevel4Damage 1825 db 000 1826 db "Stone Guard",2551827 1828Monster075Table: 1829 dw Monster075Idle1830 dw Monster075Move1831 dw GeneralMonsterAttackPatternRight1832 dw GeneralMonsterAttackPatternLeft1833 dw GeneralMonsterAttackPatternLeftUp1834 dw GeneralMonsterAttackPatternLeftDown1835 dw GeneralMonsterAttackPatternRightUp1836 dw GeneralMonsterAttackPatternRightDown1837 db BattleMonsterSpriteSheet6Block1838 db 16 1839 db 16+08 1840 db KingKongUnitLevel2CostGold 1841 db KingKongUnitLevel2CostGems 1842 db KingKongUnitLevel2CostRubies 1843 db KingKongUnitLevel2HP 1844 db KingKongUnitLevel2Speed 1845 db KingKongUnitLevel2Attack 1846 db KingKongUnitLevel2Defense 1847 db KingKongUnitLevel2Growth 1848 db KingKongUnitLevel2Damage 1849 db 000 1850 db "LimeCritter",2551851 1852Monster076Table: 1853 dw Monster076Idle1854 dw Monster076Move1855 dw GeneralMonsterAttackPatternRight1856 dw GeneralMonsterAttackPatternLeft1857 dw GeneralMonsterAttackPatternLeftUp1858 dw GeneralMonsterAttackPatternLeftDown1859 dw GeneralMonsterAttackPatternRightUp1860 dw GeneralMonsterAttackPatternRightDown1861 db BattleMonsterSpriteSheet6Block1862 db 16 1863 db 16+08 1864 db KingKongUnitLevel3CostGold 1865 db KingKongUnitLevel3CostGems 1866 db KingKongUnitLevel3CostRubies 1867 db KingKongUnitLevel3HP 1868 db KingKongUnitLevel3Speed 1869 db KingKongUnitLevel3Attack 1870 db KingKongUnitLevel3Defense 1871 db KingKongUnitLevel3Growth 1872 db KingKongUnitLevel3Damage 1873 db 000 1874 db "Salmon Hog",255," "1876Monster077Table: 1877 dw Monster077Idle1878 dw Monster077Move1879 dw GeneralMonsterAttackPatternRight1880 dw GeneralMonsterAttackPatternLeft1881 dw GeneralMonsterAttackPatternLeftUp1882 dw GeneralMonsterAttackPatternLeftDown1883 dw GeneralMonsterAttackPatternRightUp1884 dw GeneralMonsterAttackPatternRightDown1885 db BattleMonsterSpriteSheet3Block1886 db 16 1887 db 16+08 1888 db KingKongUnitLevel1CostGold 1889 db KingKongUnitLevel1CostGems 1890 db KingKongUnitLevel1CostRubies 1891 db KingKongUnitLevel1HP 1892 db KingKongUnitLevel1Speed 1893 db KingKongUnitLevel1Attack 1894 db KingKongUnitLevel1Defense 1895 db KingKongUnitLevel1Growth 1896 db KingKongUnitLevel1Damage 1897 db 000 1898 db "Swamp Goop",255," "1908Monster078Table: 1909 dw Monster078Idle1910 dw Monster078Move1911 dw GeneralMonsterAttackPatternRight1912 dw GeneralMonsterAttackPatternLeft1913 dw GeneralMonsterAttackPatternLeftUp1914 dw GeneralMonsterAttackPatternLeftDown1915 dw GeneralMonsterAttackPatternRightUp1916 dw GeneralMonsterAttackPatternRightDown1917 db BattleMonsterSpriteSheet5Block1918 db 16 1919 db 16+08 1920 db GolvelliusUnitLevel3CostGold 1921 db GolvelliusUnitLevel3CostGems 1922 db GolvelliusUnitLevel3CostRubies 1923 db GolvelliusUnitLevel3HP 1924 db GolvelliusUnitLevel3Speed 1925 db GolvelliusUnitLevel3Attack 1926 db GolvelliusUnitLevel3Defense 1927 db GolvelliusUnitLevel3Growth 1928 db GolvelliusUnitLevel3Damage 1929 db 000 1930 db "Bat",255,"        "1932Monster079Table: 1933 dw Monster079Idle1934 dw Monster079Move1935 dw GeneralMonsterAttackPatternRight1936 dw GeneralMonsterAttackPatternLeft1937 dw GeneralMonsterAttackPatternLeftUp1938 dw GeneralMonsterAttackPatternLeftDown1939 dw GeneralMonsterAttackPatternRightUp1940 dw GeneralMonsterAttackPatternRightDown1941 db BattleMonsterSpriteSheet6Block1942 db 16 1943 db 16+08 1944 db GolvelliusUnitLevel2CostGold 1945 db GolvelliusUnitLevel2CostGems 1946 db GolvelliusUnitLevel2CostRubies 1947 db GolvelliusUnitLevel2HP 1948 db GolvelliusUnitLevel2Speed 1949 db GolvelliusUnitLevel2Attack 1950 db GolvelliusUnitLevel2Defense 1951 db GolvelliusUnitLevel2Growth 1952 db GolvelliusUnitLevel2Damage 1953 db 000 1954 db "Olive Boa",255,"  "1956Monster080Table: 1957 dw Monster080Idle1958 dw Monster080Move1959 dw GeneralMonsterAttackPatternRight1960 dw GeneralMonsterAttackPatternLeft1961 dw GeneralMonsterAttackPatternLeftUp1962 dw GeneralMonsterAttackPatternLeftDown1963 dw GeneralMonsterAttackPatternRightUp1964 dw GeneralMonsterAttackPatternRightDown1965 db BattleMonsterSpriteSheet5Block1966 db 16 1967 db 08+08 1968 db GolvelliusUnitLevel1CostGold 1969 db GolvelliusUnitLevel1CostGems 1970 db GolvelliusUnitLevel1CostRubies 1971 db GolvelliusUnitLevel1HP 1972 db GolvelliusUnitLevel1Speed 1973 db GolvelliusUnitLevel1Attack 1974 db GolvelliusUnitLevel1Defense 1975 db GolvelliusUnitLevel1Growth 1976 db GolvelliusUnitLevel1Damage 1977 db 000 1978 db "SilkenLarva",2551980Monster081Table: 1981 dw Monster081Idle1982 dw Monster081Move1983 dw GeneralMonsterAttackPatternRight1984 dw GeneralMonsterAttackPatternLeft1985 dw GeneralMonsterAttackPatternLeftUp1986 dw GeneralMonsterAttackPatternLeftDown1987 dw GeneralMonsterAttackPatternRightUp1988 dw GeneralMonsterAttackPatternRightDown1989 db BattleMonsterSpriteSheet6Block1990 db 16 1991 db 16+08 1992 db GolvelliusUnitLevel2CostGold 1993 db GolvelliusUnitLevel2CostGems 1994 db GolvelliusUnitLevel2CostRubies 1995 db GolvelliusUnitLevel2HP 1996 db GolvelliusUnitLevel2Speed 1997 db GolvelliusUnitLevel2Attack 1998 db GolvelliusUnitLevel2Defense 1999 db GolvelliusUnitLevel2Growth 2000 db GolvelliusUnitLevel2Damage 2001 db 000 2002 db "ChocoTusker",2552004Monster082Table: 2005 dw Monster082Idle2006 dw Monster082Move2007 dw GeneralMonsterAttackPatternRight2008 dw GeneralMonsterAttackPatternLeft2009 dw GeneralMonsterAttackPatternLeftUp2010 dw GeneralMonsterAttackPatternLeftDown2011 dw GeneralMonsterAttackPatternRightUp2012 dw GeneralMonsterAttackPatternRightDown2013 db BattleMonsterSpriteSheet5Block2014 db 16 2015 db 08+08 2016 db GolvelliusUnitLevel1CostGold 2017 db GolvelliusUnitLevel1CostGems 2018 db GolvelliusUnitLevel1CostRubies 2019 db GolvelliusUnitLevel1HP 2020 db GolvelliusUnitLevel1Speed 2021 db GolvelliusUnitLevel1Attack 2022 db GolvelliusUnitLevel1Defense 2023 db GolvelliusUnitLevel1Growth 2024 db GolvelliusUnitLevel1Damage 2025 db 000 2026 db "JadeWormlet",2552027 2028Monster083Table: 2029 dw Monster083Idle2030 dw Monster083Move2031 dw GeneralMonsterAttackPatternRight2032 dw GeneralMonsterAttackPatternLeft2033 dw GeneralMonsterAttackPatternLeftUp2034 dw GeneralMonsterAttackPatternLeftDown2035 dw GeneralMonsterAttackPatternRightUp2036 dw GeneralMonsterAttackPatternRightDown2037 db BattleMonsterSpriteSheet6Block2038 db 16 2039 db 16+08 2040 db GolvelliusUnitLevel3CostGold 2041 db GolvelliusUnitLevel3CostGems 2042 db GolvelliusUnitLevel3CostRubies 2043 db GolvelliusUnitLevel3HP 2044 db GolvelliusUnitLevel3Speed 2045 db GolvelliusUnitLevel3Attack 2046 db GolvelliusUnitLevel3Defense 2047 db GolvelliusUnitLevel3Growth 2048 db GolvelliusUnitLevel3Damage 2049 db 000 2050 db "Sable Raven",2552051 2052Monster084Table: 2053 dw Monster084Idle2054 dw Monster084Move2055 dw GeneralMonsterAttackPatternRight2056 dw GeneralMonsterAttackPatternLeft2057 dw GeneralMonsterAttackPatternLeftUp2058 dw GeneralMonsterAttackPatternLeftDown2059 dw GeneralMonsterAttackPatternRightUp2060 dw GeneralMonsterAttackPatternRightDown2061 db BattleMonsterSpriteSheet4Block2062 db 16 2063 db 24+08 2064 db GolvelliusUnitLevel4CostGold 2065 db GolvelliusUnitLevel4CostGems 2066 db GolvelliusUnitLevel4CostRubies 2067 db GolvelliusUnitLevel4HP 2068 db GolvelliusUnitLevel4Speed 2069 db GolvelliusUnitLevel4Attack 2070 db GolvelliusUnitLevel4Defense 2071 db GolvelliusUnitLevel4Growth 2072 db GolvelliusUnitLevel4Damage 2073 db 000 2074 db "Headless",255,"   "2076Monster085Table: 2077 dw Monster085Idle2078 dw Monster085Move2079 dw GeneralMonsterAttackPatternRight2080 dw GeneralMonsterAttackPatternLeft2081 dw GeneralMonsterAttackPatternLeftUp2082 dw GeneralMonsterAttackPatternLeftDown2083 dw GeneralMonsterAttackPatternRightUp2084 dw GeneralMonsterAttackPatternRightDown2085 db BattleMonsterSpriteSheet4Block2086 db 16 2087 db 32+08 2088 db GolvelliusUnitLevel5CostGold 2089 db GolvelliusUnitLevel5CostGems 2090 db GolvelliusUnitLevel5CostRubies 2091 db GolvelliusUnitLevel5HP 2092 db GolvelliusUnitLevel5Speed 2093 db GolvelliusUnitLevel5Attack 2094 db GolvelliusUnitLevel5Defense 2095 db GolvelliusUnitLevel5Growth 2096 db GolvelliusUnitLevel5Damage 2097 db 000 2098 db "Seraph",255,"     "2100Monster086Table: 2101 dw Monster086Idle2102 dw Monster086Move2103 dw GeneralMonsterAttackPatternRight2104 dw GeneralMonsterAttackPatternLeft2105 dw GeneralMonsterAttackPatternLeftUp2106 dw GeneralMonsterAttackPatternLeftDown2107 dw GeneralMonsterAttackPatternRightUp2108 dw GeneralMonsterAttackPatternRightDown2109 db BattleMonsterSpriteSheet7Block2110 db 56 2111 db 64+04 2112 db GolvelliusUnitLevel6CostGold 2113 db GolvelliusUnitLevel6CostGems 2114 db GolvelliusUnitLevel6CostRubies 2115 db GolvelliusUnitLevel6HP 2116 db GolvelliusUnitLevel6Speed 2117 db GolvelliusUnitLevel6Attack 2118 db GolvelliusUnitLevel6Defense 2119 db GolvelliusUnitLevel6Growth 2120 db GolvelliusUnitLevel6Damage 2121 db 000 2122 db "Flame Cobra",2552123 2127Monster087Table: 2128 dw Monster087Idle2129 dw Monster087Move2130 dw GeneralMonsterAttackPatternRight2131 dw GeneralMonsterAttackPatternLeft2132 dw GeneralMonsterAttackPatternLeftUp2133 dw GeneralMonsterAttackPatternLeftDown2134 dw GeneralMonsterAttackPatternRightUp2135 dw GeneralMonsterAttackPatternRightDown2136 db BattleMonsterSpriteSheet6Block2137 db 16 2138 db 32+08 2139 db RandomAUnitLevel4CostGold 2140 db RandomAUnitLevel4CostGems 2141 db RandomAUnitLevel4CostRubies 2142 db RandomAUnitLevel4HP 2143 db RandomAUnitLevel4Speed 2144 db RandomAUnitLevel4Attack 2145 db RandomAUnitLevel4Defense 2146 db RandomAUnitLevel4Growth 2147 db RandomAUnitLevel4Damage 2148 db 000 2149 db "Visage",255,"     "2150 2151Monster088Table: 2152 dw Monster088Idle2153 dw Monster088Move2154 dw GeneralMonsterAttackPatternRight2155 dw GeneralMonsterAttackPatternLeft2156 dw GeneralMonsterAttackPatternLeftUp2157 dw GeneralMonsterAttackPatternLeftDown2158 dw GeneralMonsterAttackPatternRightUp2159 dw GeneralMonsterAttackPatternRightDown2160 db BattleMonsterSpriteSheet6Block2161 db 16 2162 db 32+08 2163 db RandomAUnitLevel2CostGold 2164 db RandomAUnitLevel2CostGems 2165 db RandomAUnitLevel2CostRubies 2166 db RandomAUnitLevel2HP 2167 db RandomAUnitLevel2Speed 2168 db RandomAUnitLevel2Attack 2169 db RandomAUnitLevel2Defense 2170 db RandomAUnitLevel2Growth 2171 db RandomAUnitLevel2Damage 2172 db 000 2173 db "JungleBrute",2552174 2175Monster089Table: 2176 dw Monster089Idle2177 dw Monster089Move2178 dw GeneralMonsterAttackPatternRight2179 dw GeneralMonsterAttackPatternLeft2180 dw GeneralMonsterAttackPatternLeftUp2181 dw GeneralMonsterAttackPatternLeftDown2182 dw GeneralMonsterAttackPatternRightUp2183 dw GeneralMonsterAttackPatternRightDown2184 db BattleMonsterSpriteSheet6Block2185 db 16 2186 db 32+08 2187 db CastleVaniaUnitLevel1CostGold 2188 db CastleVaniaUnitLevel1CostGems 2189 db CastleVaniaUnitLevel1CostRubies 2190 db CastleVaniaUnitLevel1HP 2191 db CastleVaniaUnitLevel1Speed 2192 db CastleVaniaUnitLevel1Attack 2193 db CastleVaniaUnitLevel1Defense 2194 db CastleVaniaUnitLevel1Growth 2195 db CastleVaniaUnitLevel1Damage 2196 db 000 2197 db "Lurcher",255,"    "2201Monster090Table: 2202 dw Monster090Idle2203 dw Monster090Move2204 dw GeneralMonsterAttackPatternRight2205 dw GeneralMonsterAttackPatternLeft2206 dw GeneralMonsterAttackPatternLeftUp2207 dw GeneralMonsterAttackPatternLeftDown2208 dw GeneralMonsterAttackPatternRightUp2209 dw GeneralMonsterAttackPatternRightDown2210 db BattleMonsterSpriteSheet5Block2211 db 16 2212 db 08+08 2213 db SolidSnakeUnitLevel1CostGold 2214 db SolidSnakeUnitLevel1CostGems 2215 db SolidSnakeUnitLevel1CostRubies 2216 db SolidSnakeUnitLevel1HP 2217 db SolidSnakeUnitLevel1Speed 2218 db SolidSnakeUnitLevel1Attack 2219 db SolidSnakeUnitLevel1Defense 2220 db SolidSnakeUnitLevel1Growth 2221 db SolidSnakeUnitLevel1Damage 2222 db 000 2223 db "Scavenger",255,"  "2225Monster091Table: 2226 dw Monster091Idle2227 dw Monster091Move2228 dw GeneralMonsterAttackPatternRight2229 dw GeneralMonsterAttackPatternLeft2230 dw GeneralMonsterAttackPatternLeftUp2231 dw GeneralMonsterAttackPatternLeftDown2232 dw GeneralMonsterAttackPatternRightUp2233 dw GeneralMonsterAttackPatternRightDown2234 db BattleMonsterSpriteSheet6Block2235 db 16 2236 db 32+08 2237 db SolidSnakeUnitLevel2CostGold 2238 db SolidSnakeUnitLevel2CostGems 2239 db SolidSnakeUnitLevel2CostRubies 2240 db SolidSnakeUnitLevel2HP 2241 db SolidSnakeUnitLevel2Speed 2242 db SolidSnakeUnitLevel2Attack 2243 db SolidSnakeUnitLevel2Defense 2244 db SolidSnakeUnitLevel2Growth 2245 db SolidSnakeUnitLevel2Damage 2246 db 000 2247 db "Running Man",2552248 2249Monster092Table: 2250 dw Monster092Idle2251 dw Monster092Move2252 dw Monster092AttackPatternRight2253 dw Monster092AttackPatternLeft2254 dw Monster092AttackPatternLeft2255 dw Monster092AttackPatternLeft2256 dw Monster092AttackPatternRight2257 dw Monster092AttackPatternRight2258 db BattleMonsterSpriteSheet6Block2259 db 16 2260 db 32+08 2261 db SolidSnakeUnitLevel4CostGold 2262 db SolidSnakeUnitLevel4CostGems 2263 db SolidSnakeUnitLevel4CostRubies 2264 db SolidSnakeUnitLevel4HP 2265 db SolidSnakeUnitLevel4Speed 2266 db SolidSnakeUnitLevel4Attack 2267 db SolidSnakeUnitLevel4Defense 2268 db SolidSnakeUnitLevel4Growth 2269 db SolidSnakeUnitLevel4Damage 2270 db RangedMonster 2271 db "Trooper",255,"    "2273Monster093Table: 2274 dw Monster093Idle2275 dw Monster093Move2276 dw Monster093AttackPatternRight2277 dw Monster093AttackPatternLeft2278 dw Monster093AttackPatternLeft2279 dw Monster093AttackPatternLeft2280 dw Monster093AttackPatternRight2281 dw Monster093AttackPatternRight2282 db BattleMonsterSpriteSheet6Block2283 db 16 2284 db 32+08 2285 db SolidSnakeUnitLevel5CostGold 2286 db SolidSnakeUnitLevel5CostGems 2287 db SolidSnakeUnitLevel5CostRubies 2288 db SolidSnakeUnitLevel5HP 2289 db SolidSnakeUnitLevel5Speed 2290 db SolidSnakeUnitLevel5Attack 2291 db SolidSnakeUnitLevel5Defense 2292 db SolidSnakeUnitLevel5Growth 2293 db SolidSnakeUnitLevel5Damage 2294 db RangedMonster 2295 db "Antigas Man",2552296 2297Monster094Table: 2298 dw Monster094Idle2299 dw Monster094Move2300 dw Monster094AttackPatternRight2301 dw Monster094AttackPatternLeft2302 dw Monster094AttackPatternLeft2303 dw Monster094AttackPatternLeft2304 dw Monster094AttackPatternRight2305 dw Monster094AttackPatternRight2306 db BattleMonsterSpriteSheet6Block2307 db 16 2308 db 32+08 2309 db SolidSnakeUnitLevel3CostGold 2310 db SolidSnakeUnitLevel3CostGems 2311 db SolidSnakeUnitLevel3CostRubies 2312 db SolidSnakeUnitLevel3HP 2313 db SolidSnakeUnitLevel3Speed 2314 db SolidSnakeUnitLevel3Attack 2315 db SolidSnakeUnitLevel3Defense 2316 db SolidSnakeUnitLevel3Growth 2317 db SolidSnakeUnitLevel3Damage 2318 db RangedMonster 2319 db "Footman",255,"    "2327Monster095Table: 2328 dw Monster095Idle2329 dw Monster095Move2330 dw Monster095AttackPatternRight2331 dw Monster095AttackPatternLeft2332 dw Monster095AttackPatternLeftUp2333 dw Monster095AttackPatternLeftDown2334 dw Monster095AttackPatternRightUp2335 dw Monster095AttackPatternRightDown2336 db BattleMonsterSpriteSheet8Block2337 db 16 2338 db 24+08 2339 db Ys3UnitLevel5CostGold 2340 db Ys3UnitLevel5CostGems 2341 db Ys3UnitLevel5CostRubies 2342 db Ys3UnitLevel5HP 2343 db Ys3UnitLevel5Speed 2344 db Ys3UnitLevel5Attack 2345 db Ys3UnitLevel5Defense 2346 db Ys3UnitLevel5Growth 2347 db Ys3UnitLevel5Damage 2348 db 000 2349 db "Geld",255,"       "2351Monster096Table: 2352 dw Monster096Idle2353 dw Monster096Move2354 dw Monster096AttackPatternRight2355 dw Monster096AttackPatternLeft2356 dw Monster096AttackPatternLeftUp2357 dw Monster096AttackPatternLeftDown2358 dw Monster096AttackPatternRightUp2359 dw Monster096AttackPatternRightDown2360 db BattleMonsterSpriteSheet8Block2361 db 32 2362 db 24+08 2363 db Ys3UnitLevel4CostGold 2364 db Ys3UnitLevel4CostGems 2365 db Ys3UnitLevel4CostRubies 2366 db Ys3UnitLevel4HP 2367 db Ys3UnitLevel4Speed 2368 db Ys3UnitLevel4Attack 2369 db Ys3UnitLevel4Defense 2370 db Ys3UnitLevel4Growth 2371 db Ys3UnitLevel4Damage 2372 db 000 2373 db "Raddel",255,"     "2374 2375Monster097Table: 2376 dw Monster097Idle2377 dw Monster097Move2378 dw GeneralMonsterAttackPatternRight2379 dw GeneralMonsterAttackPatternLeft2380 dw GeneralMonsterAttackPatternLeftUp2381 dw GeneralMonsterAttackPatternLeftDown2382 dw GeneralMonsterAttackPatternRightUp2383 dw GeneralMonsterAttackPatternRightDown2384 db BattleMonsterSpriteSheet8Block2385 db 16 2386 db 24+08 2387 db Ys3UnitLevel3CostGold 2388 db Ys3UnitLevel3CostGems 2389 db Ys3UnitLevel3CostRubies 2390 db Ys3UnitLevel3HP 2391 db Ys3UnitLevel3Speed 2392 db Ys3UnitLevel3Attack 2393 db Ys3UnitLevel3Defense 2394 db Ys3UnitLevel3Growth 2395 db Ys3UnitLevel3Damage 2396 db 000 2397 db "Bikmorl",255,"    "2398 2399Monster098Table: 2400 dw Monster098Idle2401 dw Monster098Move2402 dw GeneralMonsterAttackPatternRight2403 dw GeneralMonsterAttackPatternLeft2404 dw GeneralMonsterAttackPatternLeftUp2405 dw GeneralMonsterAttackPatternLeftDown2406 dw GeneralMonsterAttackPatternRightUp2407 dw GeneralMonsterAttackPatternRightDown2408 db BattleMonsterSpriteSheet8Block2409 db 16 2410 db 08+08 2411 db Ys3UnitLevel1CostGold 2412 db Ys3UnitLevel1CostGems 2413 db Ys3UnitLevel1CostRubies 2414 db Ys3UnitLevel1HP 2415 db Ys3UnitLevel1Speed 2416 db Ys3UnitLevel1Attack 2417 db Ys3UnitLevel1Defense 2418 db Ys3UnitLevel1Growth 2419 db Ys3UnitLevel1Damage 2420 db 000 2421 db "Slime",255,"      "2422 2423Monster099Table: 2424 dw Monster099Idle2425 dw Monster099Move2426 dw GeneralMonsterAttackPatternRight2427 dw GeneralMonsterAttackPatternLeft2428 dw GeneralMonsterAttackPatternLeftUp2429 dw GeneralMonsterAttackPatternLeftDown2430 dw GeneralMonsterAttackPatternRightUp2431 dw GeneralMonsterAttackPatternRightDown2432 db BattleMonsterSpriteSheet8Block2433 db 16 2434 db 24+08 2435 db Ys3UnitLevel2CostGold 2436 db Ys3UnitLevel2CostGems 2437 db Ys3UnitLevel2CostRubies 2438 db Ys3UnitLevel2HP 2439 db Ys3UnitLevel2Speed 2440 db Ys3UnitLevel2Attack 2441 db Ys3UnitLevel2Defense 2442 db Ys3UnitLevel2Growth 2443 db Ys3UnitLevel2Damage 2444 db 000 2445 db "Keyron",255,"     "2446 2447Monster100Table: 2448 dw Monster100Idle2449 dw Monster100Move2450 dw GeneralMonsterAttackPatternRight2451 dw GeneralMonsterAttackPatternLeft2452 dw GeneralMonsterAttackPatternLeftUp2453 dw GeneralMonsterAttackPatternLeftDown2454 dw GeneralMonsterAttackPatternRightUp2455 dw GeneralMonsterAttackPatternRightDown2456 db BattleMonsterSpriteSheet5Block2457 db 16 2458 db 08+08 2459 db Ys3UnitLevel1CostGold 2460 db Ys3UnitLevel1CostGems 2461 db Ys3UnitLevel1CostRubies 2462 db Ys3UnitLevel1HP 2463 db Ys3UnitLevel1Speed 2464 db Ys3UnitLevel1Attack 2465 db Ys3UnitLevel1Defense 2466 db Ys3UnitLevel1Growth 2467 db Ys3UnitLevel1Damage 2468 db 000 2469 db "Gululmus",255,"   "2470 2471Monster101Table: 2472 dw Monster101Idle2473 dw Monster101Move2474 dw Monster101AttackPatternRight2475 dw Monster101AttackPatternLeft2476 dw Monster101AttackPatternLeftUp2477 dw Monster101AttackPatternLeftDown2478 dw Monster101AttackPatternRightUp2479 dw Monster101AttackPatternRightDown2480 db BattleMonsterSpriteSheet8Block2481 db 48 2482 db 24+08 2483 db Ys3UnitLevel6CostGold 2484 db Ys3UnitLevel6CostGems 2485 db Ys3UnitLevel6CostRubies 2486 db Ys3UnitLevel6HP 2487 db Ys3UnitLevel6Speed 2488 db Ys3UnitLevel6Attack 2489 db Ys3UnitLevel6Defense 2490 db Ys3UnitLevel6Growth 2491 db Ys3UnitLevel6Damage 2492 db 000 2493 db "Sabre Wolf",255," "2494 2500Monster102Table: 2501 dw Monster102Idle2502 dw Monster102Move2503 dw Monster102AttackPatternRight2504 dw Monster102AttackPatternLeft2505 dw Monster102AttackPatternLeftUp2506 dw Monster102AttackPatternLeftDown2507 dw Monster102AttackPatternRightUp2508 dw Monster102AttackPatternRightDown2509 db BattleMonsterSpriteSheet9Block2510 db 32 2511 db 32+08 2512 db YieArKungFuUnitLevel1CostGold 2513 db YieArKungFuUnitLevel1CostGems 2514 db YieArKungFuUnitLevel1CostRubies 2515 db YieArKungFuUnitLevel1HP 2516 db YieArKungFuUnitLevel1Speed 2517 db YieArKungFuUnitLevel1Attack 2518 db YieArKungFuUnitLevel1Defense 2519 db YieArKungFuUnitLevel1Growth 2520 db YieArKungFuUnitLevel1Damage 2521 db 000 2522 db "Lee Young",255,"  "2523 2524Monster103Table: 2525 dw Monster103Idle2526 dw Monster103Move2527 dw Monster103AttackPatternRight2528 dw Monster103AttackPatternLeft2529 dw Monster103AttackPatternLeftUp2530 dw Monster103AttackPatternLeftDown2531 dw Monster103AttackPatternRightUp2532 dw Monster103AttackPatternRightDown2533 db BattleMonsterSpriteSheet9Block2534 db 48 2535 db 40+08 2536 db YieArKungFuUnitLevel2CostGold 2537 db YieArKungFuUnitLevel2CostGems 2538 db YieArKungFuUnitLevel2CostRubies 2539 db YieArKungFuUnitLevel2HP 2540 db YieArKungFuUnitLevel2Speed 2541 db YieArKungFuUnitLevel2Attack 2542 db YieArKungFuUnitLevel2Defense 2543 db YieArKungFuUnitLevel2Growth 2544 db YieArKungFuUnitLevel2Damage 2545 db 000 2546 db "Yen Pei",255,"    "2547 2548Monster104Table: 2549 dw Monster104Idle2550 dw Monster104Move2551 dw Monster104AttackPatternRight2552 dw Monster104AttackPatternLeft2553 dw Monster104AttackPatternLeft2554 dw Monster104AttackPatternLeft2555 dw Monster104AttackPatternRight2556 dw Monster104AttackPatternRight2557 db BattleMonsterSpriteSheet9Block2558 db 32 2559 db 32+08 2560 db YieArKungFuUnitLevel3CostGold 2561 db YieArKungFuUnitLevel3CostGems 2562 db YieArKungFuUnitLevel3CostRubies 2563 db YieArKungFuUnitLevel3HP 2564 db YieArKungFuUnitLevel3Speed 2565 db YieArKungFuUnitLevel3Attack 2566 db YieArKungFuUnitLevel3Defense 2567 db YieArKungFuUnitLevel3Growth 2568 db YieArKungFuUnitLevel3Damage 2569 db RangedMonster 2570 db "Lan Fang",255,"   "2572Monster105Table: 2573 dw Monster105Idle2574 dw Monster105Move2575 dw Monster105AttackPatternRight2576 dw Monster105AttackPatternLeft2577 dw Monster105AttackPatternLeftUp2578 dw Monster105AttackPatternLeftDown2579 dw Monster105AttackPatternRightUp2580 dw Monster105AttackPatternRightDown2581 db BattleMonsterSpriteSheet9Block2582 db 48 2583 db 40+08 2584 db YieArKungFuUnitLevel4CostGold 2585 db YieArKungFuUnitLevel4CostGems 2586 db YieArKungFuUnitLevel4CostRubies 2587 db YieArKungFuUnitLevel4HP 2588 db YieArKungFuUnitLevel4Speed 2589 db YieArKungFuUnitLevel4Attack 2590 db YieArKungFuUnitLevel4Defense 2591 db YieArKungFuUnitLevel4Growth 2592 db YieArKungFuUnitLevel4Damage 2593 db 000 2594 db "Po Chin",255,"    "2596Monster106Table: 2597 dw Monster106Idle2598 dw Monster106Move2599 dw Monster106AttackPatternRight2600 dw Monster106AttackPatternLeft2601 dw Monster106AttackPatternLeftUp2602 dw Monster106AttackPatternLeftDown2603 dw Monster106AttackPatternRightUp2604 dw Monster106AttackPatternRightDown2605 db BattleMonsterSpriteSheet10Block2606 db 48 2607 db 32+08 2608 db YieArKungFuUnitLevel5CostGold 2609 db YieArKungFuUnitLevel5CostGems 2610 db YieArKungFuUnitLevel5CostRubies 2611 db YieArKungFuUnitLevel5HP 2612 db YieArKungFuUnitLevel5Speed 2613 db YieArKungFuUnitLevel5Attack 2614 db YieArKungFuUnitLevel5Defense 2615 db YieArKungFuUnitLevel5Growth 2616 db YieArKungFuUnitLevel5Damage 2617 db 000 2618 db "Wen Hu",255,"     "2620Monster107Table: 2621 dw Monster107Idle2622 dw Monster107Move2623 dw Monster107AttackPatternRight2624 dw Monster107AttackPatternLeft2625 dw Monster107AttackPatternLeftUp2626 dw Monster107AttackPatternLeftDown2627 dw Monster107AttackPatternRightUp2628 dw Monster107AttackPatternRightDown2629 db BattleMonsterSpriteSheet10Block2630 db 48 2631 db 32+08 2632 db YieArKungFuUnitLevel3CostGold 2633 db YieArKungFuUnitLevel3CostGems 2634 db YieArKungFuUnitLevel3CostRubies 2635 db YieArKungFuUnitLevel3HP 2636 db YieArKungFuUnitLevel3Speed 2637 db YieArKungFuUnitLevel3Attack 2638 db YieArKungFuUnitLevel3Defense 2639 db YieArKungFuUnitLevel3Growth 2640 db YieArKungFuUnitLevel3Damage 2641 db 000 2642 db "Wei Chin",255,"   "2644Monster108Table: 2645 dw Monster108Idle2646 dw Monster108Move2647 dw Monster108AttackPatternRight2648 dw Monster108AttackPatternLeft2649 dw Monster108AttackPatternLeftUp2650 dw Monster108AttackPatternLeftDown2651 dw Monster108AttackPatternRightUp2652 dw Monster108AttackPatternRightDown2653 db BattleMonsterSpriteSheet10Block2654 db 32 2655 db 32+08 2656 db YieArKungFuUnitLevel3CostGold 2657 db YieArKungFuUnitLevel3CostGems 2658 db YieArKungFuUnitLevel3CostRubies 2659 db YieArKungFuUnitLevel3HP 2660 db YieArKungFuUnitLevel3Speed 2661 db YieArKungFuUnitLevel3Attack 2662 db YieArKungFuUnitLevel3Defense 2663 db YieArKungFuUnitLevel3Growth 2664 db YieArKungFuUnitLevel3Damage 2665 db 000 2666 db "Mei Ling",255,"   "2668Monster109Table: 2669 dw Monster109Idle2670 dw Monster109Move2671 dw Monster109AttackPatternRight2672 dw Monster109AttackPatternLeft2673 dw Monster109AttackPatternLeft2674 dw Monster109AttackPatternLeft2675 dw Monster109AttackPatternRight2676 dw Monster109AttackPatternRight2677 db BattleMonsterSpriteSheet10Block2678 db 32 2679 db 32+08 2680 db YieArKungFuUnitLevel4CostGold 2681 db YieArKungFuUnitLevel4CostGems 2682 db YieArKungFuUnitLevel4CostRubies 2683 db YieArKungFuUnitLevel4HP 2684 db YieArKungFuUnitLevel4Speed 2685 db YieArKungFuUnitLevel4Attack 2686 db YieArKungFuUnitLevel4Defense 2687 db YieArKungFuUnitLevel4Growth 2688 db YieArKungFuUnitLevel4Damage 2689 db RangedMonster 2690 db "Han Chen",255,"   "2692Monster110Table: 2693 dw Monster110Idle2694 dw Monster110Move2695 dw Monster110AttackPatternRight2696 dw Monster110AttackPatternLeft2697 dw Monster110AttackPatternLeft2698 dw Monster110AttackPatternLeft2699 dw Monster110AttackPatternRight2700 dw Monster110AttackPatternRight2701 db BattleMonsterSpriteSheet10Block2702 db 32 2703 db 40+08 2704 db YieArKungFuUnitLevel6CostGold 2705 db YieArKungFuUnitLevel6CostGems 2706 db YieArKungFuUnitLevel6CostRubies 2707 db YieArKungFuUnitLevel6HP 2708 db YieArKungFuUnitLevel6Speed 2709 db YieArKungFuUnitLevel6Attack 2710 db YieArKungFuUnitLevel6Defense 2711 db YieArKungFuUnitLevel6Growth 2712 db YieArKungFuUnitLevel6Damage 2713 db RangedMonster 2714 db "Li Yen",255,"     "2728Monster111Table: 2729 dw Monster111Idle2730 dw Monster111Move2731 dw GeneralMonsterAttackPatternRight2732 dw GeneralMonsterAttackPatternLeft2733 dw GeneralMonsterAttackPatternLeftUp2734 dw GeneralMonsterAttackPatternLeftDown2735 dw GeneralMonsterAttackPatternRightUp2736 dw GeneralMonsterAttackPatternRightDown2737 db BattleMonsterSpriteSheet8Block2738 db 32 2739 db 24+08 2740 db AkanbeDragonGroupAUnitLevel5CostGold 2741 db AkanbeDragonGroupAUnitLevel5CostGems 2742 db AkanbeDragonGroupAUnitLevel5CostRubies 2743 db AkanbeDragonGroupAUnitLevel5HP 2744 db AkanbeDragonGroupAUnitLevel5Speed 2745 db AkanbeDragonGroupAUnitLevel5Attack 2746 db AkanbeDragonGroupAUnitLevel5Defense 2747 db AkanbeDragonGroupAUnitLevel5Growth 2748 db AkanbeDragonGroupAUnitLevel5Damage 2749 db 000 2750 db "Queen Sora",255," "2752Monster112Table: 2753 dw Monster112Idle2754 dw Monster112Move2755 dw Monster112AttackPatternRight2756 dw Monster112AttackPatternLeft2757 dw Monster112AttackPatternLeft2758 dw Monster112AttackPatternLeft2759 dw Monster112AttackPatternRight2760 dw Monster112AttackPatternRight2761 db BattleMonsterSpriteSheet8Block2762 db 32 2763 db 24+08 2764 db AkanbeDragonGroupAUnitLevel6CostGold 2765 db AkanbeDragonGroupAUnitLevel6CostGems 2766 db AkanbeDragonGroupAUnitLevel6CostRubies 2767 db AkanbeDragonGroupAUnitLevel6HP 2768 db AkanbeDragonGroupAUnitLevel6Speed 2769 db AkanbeDragonGroupAUnitLevel6Attack 2770 db AkanbeDragonGroupAUnitLevel6Defense 2771 db AkanbeDragonGroupAUnitLevel6Growth 2772 db AkanbeDragonGroupAUnitLevel6Damage 2773 db RangedMonster 2774 db "King Mori",255,"  "2776Monster113Table: 2777 dw Monster113Idle2778 dw Monster113Move2779 dw Monster113AttackPatternRight2780 dw Monster113AttackPatternLeft2781 dw Monster113AttackPatternLeft2782 dw Monster113AttackPatternLeft2783 dw Monster113AttackPatternRight2784 dw Monster113AttackPatternRight2785 db BattleMonsterSpriteSheet8Block2786 db 32 2787 db 24+08 2788 db AkanbeDragonGroupAUnitLevel2CostGold 2789 db AkanbeDragonGroupAUnitLevel2CostGems 2790 db AkanbeDragonGroupAUnitLevel2CostRubies 2791 db AkanbeDragonGroupAUnitLevel2HP 2792 db AkanbeDragonGroupAUnitLevel2Speed 2793 db AkanbeDragonGroupAUnitLevel2Attack 2794 db AkanbeDragonGroupAUnitLevel2Defense 2795 db AkanbeDragonGroupAUnitLevel2Growth 2796 db AkanbeDragonGroupAUnitLevel2Damage 2797 db RangedMonster 2798 db "Knight Yama",2552799 2800Monster114Table: 2801 dw Monster114Idle2802 dw Monster114Move2803 dw GeneralMonsterAttackPatternRight2804 dw GeneralMonsterAttackPatternLeft2805 dw GeneralMonsterAttackPatternLeftUp2806 dw GeneralMonsterAttackPatternLeftDown2807 dw GeneralMonsterAttackPatternRightUp2808 dw GeneralMonsterAttackPatternRightDown2809 db BattleMonsterSpriteSheet8Block2810 db 32 2811 db 32+08 2812 db AkanbeDragonGroupBUnitLevel2CostGold 2813 db AkanbeDragonGroupBUnitLevel2CostGems 2814 db AkanbeDragonGroupBUnitLevel2CostRubies 2815 db AkanbeDragonGroupBUnitLevel2HP 2816 db AkanbeDragonGroupBUnitLevel2Speed 2817 db AkanbeDragonGroupBUnitLevel2Attack 2818 db AkanbeDragonGroupBUnitLevel2Defense 2819 db AkanbeDragonGroupBUnitLevel2Growth 2820 db AkanbeDragonGroupBUnitLevel2Damage 2821 db 000 2822 db "Bishop Mori",2552824Monster115Table: 2825 dw Monster115Idle2826 dw Monster115Move2827 dw Monster115AttackPatternRight2828 dw Monster115AttackPatternLeft2829 dw Monster115AttackPatternLeft2830 dw Monster115AttackPatternLeft2831 dw Monster115AttackPatternRight2832 dw Monster115AttackPatternRight2833 db BattleMonsterSpriteSheet10Block2834 db 32 2835 db 24+08 2836 db AkanbeDragonGroupAUnitLevel3CostGold 2837 db AkanbeDragonGroupAUnitLevel3CostGems 2838 db AkanbeDragonGroupAUnitLevel3CostRubies 2839 db AkanbeDragonGroupAUnitLevel3HP 2840 db AkanbeDragonGroupAUnitLevel3Speed 2841 db AkanbeDragonGroupAUnitLevel3Attack 2842 db AkanbeDragonGroupAUnitLevel3Defense 2843 db AkanbeDragonGroupAUnitLevel3Growth 2844 db AkanbeDragonGroupAUnitLevel3Damage 2845 db RangedMonster 2846 db "B. Heichi",255,"  "2848Monster116Table: 2849 dw Monster116Idle2850 dw Monster116Move2851 dw Monster116AttackPatternRight2852 dw Monster116AttackPatternLeft2853 dw Monster116AttackPatternLeftUp2854 dw Monster116AttackPatternLeftDown2855 dw Monster116AttackPatternRightUp2856 dw Monster116AttackPatternRightDown2857 db BattleMonsterSpriteSheet10Block2858 db 32 2859 db 24+08 2860 db AkanbeDragonGroupBUnitLevel3CostGold 2861 db AkanbeDragonGroupBUnitLevel3CostGems 2862 db AkanbeDragonGroupBUnitLevel3CostRubies 2863 db AkanbeDragonGroupBUnitLevel3HP 2864 db AkanbeDragonGroupBUnitLevel3Speed 2865 db AkanbeDragonGroupBUnitLevel3Attack 2866 db AkanbeDragonGroupBUnitLevel3Defense 2867 db AkanbeDragonGroupBUnitLevel3Growth 2868 db AkanbeDragonGroupBUnitLevel3Damage 2869 db 000 2870 db "Roke Mizu",255,"  "2872Monster117Table: 2873 dw Monster117Idle2874 dw Monster117Move2875 dw Monster117AttackPatternRight2876 dw Monster117AttackPatternLeft2877 dw Monster117AttackPatternLeftUp2878 dw Monster117AttackPatternLeftDown2879 dw Monster117AttackPatternRightUp2880 dw Monster117AttackPatternRightDown2881 db BattleMonsterSpriteSheet11Block2882 db 32 2883 db 24+08 2884 db AkanbeDragonGroupAUnitLevel1CostGold 2885 db AkanbeDragonGroupAUnitLevel1CostGems 2886 db AkanbeDragonGroupAUnitLevel1CostRubies 2887 db AkanbeDragonGroupAUnitLevel1HP 2888 db AkanbeDragonGroupAUnitLevel1Speed 2889 db AkanbeDragonGroupAUnitLevel1Attack 2890 db AkanbeDragonGroupAUnitLevel1Defense 2891 db AkanbeDragonGroupAUnitLevel1Growth 2892 db AkanbeDragonGroupAUnitLevel1Damage 2893 db 000 2894 db "Porn Mizu",255,"  "2896Monster118Table: 2897 dw Monster118Idle2898 dw Monster118Move2899 dw Monster118AttackPatternRight2900 dw Monster118AttackPatternLeft2901 dw Monster118AttackPatternLeftUp2902 dw Monster118AttackPatternLeftDown2903 dw Monster118AttackPatternRightUp2904 dw Monster118AttackPatternRightDown2905 db BattleMonsterSpriteSheet11Block2906 db 32 2907 db 24+08 2908 db AkanbeDragonGroupAUnitLevel4CostGold 2909 db AkanbeDragonGroupAUnitLevel4CostGems 2910 db AkanbeDragonGroupAUnitLevel4CostRubies 2911 db AkanbeDragonGroupAUnitLevel4HP 2912 db AkanbeDragonGroupAUnitLevel4Speed 2913 db AkanbeDragonGroupAUnitLevel4Attack 2914 db AkanbeDragonGroupAUnitLevel4Defense 2915 db AkanbeDragonGroupAUnitLevel4Growth 2916 db AkanbeDragonGroupAUnitLevel4Damage 2917 db 000 2918 db "Roke Yama",255,"  "2920Monster119Table: 2921 dw Monster119Idle2922 dw Monster119Move2923 dw Monster119AttackPatternRight2924 dw Monster119AttackPatternLeft2925 dw Monster119AttackPatternLeft2926 dw Monster119AttackPatternLeft2927 dw Monster119AttackPatternRight2928 dw Monster119AttackPatternRight2929 db BattleMonsterSpriteSheet11Block2930 db 32 2931 db 24+08 2932 db AkanbeDragonGroupBUnitLevel1CostGold 2933 db AkanbeDragonGroupBUnitLevel1CostGems 2934 db AkanbeDragonGroupBUnitLevel1CostRubies 2935 db AkanbeDragonGroupBUnitLevel1HP 2936 db AkanbeDragonGroupBUnitLevel1Speed 2937 db AkanbeDragonGroupBUnitLevel1Attack 2938 db AkanbeDragonGroupBUnitLevel1Defense 2939 db AkanbeDragonGroupBUnitLevel1Growth 2940 db AkanbeDragonGroupBUnitLevel1Damage 2941 db RangedMonster 2942 db "Porn Heichi",2552943 2944Monster120Table: 2945 dw Monster120Idle2946 dw Monster120Move2947 dw Monster120AttackPatternRight2948 dw Monster120AttackPatternLeft2949 dw Monster120AttackPatternLeft2950 dw Monster120AttackPatternLeft2951 dw Monster120AttackPatternRight2952 dw Monster120AttackPatternRight2953 db BattleMonsterSpriteSheet11Block2954 db 32 2955 db 24+08 2956 db AkanbeDragonGroupBUnitLevel4CostGold 2957 db AkanbeDragonGroupBUnitLevel4CostGems 2958 db AkanbeDragonGroupBUnitLevel4CostRubies 2959 db AkanbeDragonGroupBUnitLevel4HP 2960 db AkanbeDragonGroupBUnitLevel4Speed 2961 db AkanbeDragonGroupBUnitLevel4Attack 2962 db AkanbeDragonGroupBUnitLevel4Defense 2963 db AkanbeDragonGroupBUnitLevel4Growth 2964 db AkanbeDragonGroupBUnitLevel4Damage 2965 db RangedMonster 2966 db "Yama Knight",2552968Monster121Table: 2969 dw Monster121Idle2970 dw Monster121Move2971 dw GeneralMonsterAttackPatternRight2972 dw GeneralMonsterAttackPatternLeft2973 dw GeneralMonsterAttackPatternLeftUp2974 dw GeneralMonsterAttackPatternLeftDown2975 dw GeneralMonsterAttackPatternRightUp2976 dw GeneralMonsterAttackPatternRightDown2977 db BattleMonsterSpriteSheet11Block2978 db 48 2979 db 56+08 2980 db AkanbeDragonGroupBUnitLevel6CostGold 2981 db AkanbeDragonGroupBUnitLevel6CostGems 2982 db AkanbeDragonGroupBUnitLevel6CostRubies 2983 db AkanbeDragonGroupBUnitLevel6HP 2984 db AkanbeDragonGroupBUnitLevel6Speed 2985 db AkanbeDragonGroupBUnitLevel6Attack 2986 db AkanbeDragonGroupBUnitLevel6Defense 2987 db AkanbeDragonGroupBUnitLevel6Growth 2988 db AkanbeDragonGroupBUnitLevel6Damage 2989 db 000 2990 db "King Heichi",2552992Monster122Table: 2993 dw Monster122Idle2994 dw Monster122Move2995 dw Monster122AttackPatternRight2996 dw Monster122AttackPatternLeft2997 dw Monster122AttackPatternLeftUp2998 dw Monster122AttackPatternLeftDown2999 dw Monster122AttackPatternRightUp3000 dw Monster122AttackPatternRightDown3001 db BattleMonsterSpriteSheet11Block3002 db 16 3003 db 24+08 3004 db RandomBUnitLevel3CostGold 3005 db RandomBUnitLevel3CostGems 3006 db RandomBUnitLevel3CostRubies 3007 db RandomBUnitLevel3HP 3008 db RandomBUnitLevel3Speed 3009 db RandomBUnitLevel3Attack 3010 db RandomBUnitLevel3Defense 3011 db RandomBUnitLevel3Growth 3012 db RandomBUnitLevel3Damage 3013 db 000 3014 db "Spooky",255,"     "3016Monster123Table: 3017 dw Monster123Idle3018 dw Monster123Move3019 dw GeneralMonsterAttackPatternRight3020 dw GeneralMonsterAttackPatternLeft3021 dw GeneralMonsterAttackPatternLeftUp3022 dw GeneralMonsterAttackPatternLeftDown3023 dw GeneralMonsterAttackPatternRightUp3024 dw GeneralMonsterAttackPatternRightDown3025 db BattleMonsterSpriteSheet11Block3026 db 16 3027 db 24+08 3028 db RandomBUnitLevel2CostGold 3029 db RandomBUnitLevel2CostGems 3030 db RandomBUnitLevel2CostRubies 3031 db RandomBUnitLevel2HP 3032 db RandomBUnitLevel2Speed 3033 db RandomBUnitLevel2Attack 3034 db RandomBUnitLevel2Defense 3035 db RandomBUnitLevel2Growth 3036 db RandomBUnitLevel2Damage 3037 db 000 3038 db "Ghosty",255,"     "3040Monster124Table: 3041 dw Monster124Idle3042 dw Monster124Move3043 dw GeneralMonsterAttackPatternRight3044 dw GeneralMonsterAttackPatternLeft3045 dw GeneralMonsterAttackPatternLeftUp3046 dw GeneralMonsterAttackPatternLeftDown3047 dw GeneralMonsterAttackPatternRightUp3048 dw GeneralMonsterAttackPatternRightDown3049 db BattleMonsterSpriteSheet7Block3050 db 16 3051 db 24+08 3052 db RandomAUnitLevel3CostGold 3053 db RandomAUnitLevel3CostGems 3054 db RandomAUnitLevel3CostRubies 3055 db RandomAUnitLevel3HP 3056 db RandomAUnitLevel3Speed 3057 db RandomAUnitLevel3Attack 3058 db RandomAUnitLevel3Defense 3059 db RandomAUnitLevel3Growth 3060 db RandomAUnitLevel3Damage 3061 db 000 3062 db "KuGyoku Den",2553063 3064Monster125Table: 3065 dw Monster125Idle3066 dw Monster125Move3067 dw Monster125AttackPatternRight3068 dw Monster125AttackPatternLeft3069 dw Monster125AttackPatternLeft3070 dw Monster125AttackPatternLeft3071 dw Monster125AttackPatternRight3072 dw Monster125AttackPatternRight3073 db BattleMonsterSpriteSheet7Block3074 db 16 3075 db 16+08 3076 db RandomBUnitLevel2CostGold 3077 db RandomBUnitLevel2CostGems 3078 db RandomBUnitLevel2CostRubies 3079 db RandomBUnitLevel2HP 3080 db RandomBUnitLevel2Speed 3081 db RandomBUnitLevel2Attack-2 3082 db RandomBUnitLevel2Defense-1 3083 db RandomBUnitLevel2Growth 3084 db RandomBUnitLevel2Damage 3085 db RangedMonster 3086 db "GooGoo",255,"     "3088Monster126Table: 3089 dw Monster126Idle3090 dw Monster126Move3091 dw GeneralMonsterAttackPatternRight3092 dw GeneralMonsterAttackPatternLeft3093 dw GeneralMonsterAttackPatternLeftUp3094 dw GeneralMonsterAttackPatternLeftDown3095 dw GeneralMonsterAttackPatternRightUp3096 dw GeneralMonsterAttackPatternRightDown3097 db BattleMonsterSpriteSheet11Block3098 db 16 3099 db 24+08 3100 db RandomBUnitLevel1CostGold 3101 db RandomBUnitLevel1CostGems 3102 db RandomBUnitLevel1CostRubies 3103 db RandomBUnitLevel1HP 3104 db RandomBUnitLevel1Speed 3105 db RandomBUnitLevel1Attack 3106 db RandomBUnitLevel1Defense 3107 db RandomBUnitLevel1Growth 3108 db RandomBUnitLevel1Damage 3109 db 000 3110 db "Sofia",255,"      "3112Monster127Table: 3113 dw Monster127Idle3114 dw Monster127Move3115 dw Monster127AttackPatternRight3116 dw Monster127AttackPatternLeft3117 dw Monster127AttackPatternLeftUp3118 dw Monster127AttackPatternLeftDown3119 dw Monster127AttackPatternRightUp3120 dw Monster127AttackPatternRightDown3121 db BattleMonsterSpriteSheet13Block3122 db 32 3123 db 40+08 3124 db RandomBUnitLevel4CostGold 3125 db RandomBUnitLevel4CostGems 3126 db RandomBUnitLevel4CostRubies 3127 db RandomBUnitLevel4HP 3128 db RandomBUnitLevel4Speed 3129 db RandomBUnitLevel4Attack 3130 db RandomBUnitLevel4Defense 3131 db RandomBUnitLevel4Growth 3132 db RandomBUnitLevel4Damage 3133 db 000 3134 db "Rastan",255,"     "3136Monster128Table: 3137 dw Monster128Idle3138 dw Monster128Move3139 dw Monster128AttackPatternRight3140 dw Monster128AttackPatternLeft3141 dw Monster128AttackPatternLeftUp3142 dw Monster128AttackPatternLeftDown3143 dw Monster128AttackPatternRightUp3144 dw Monster128AttackPatternRightDown3145 db BattleMonsterSpriteSheet13Block3146 db 16 3147 db 32+08 3148 db RandomAUnitLevel5CostGold 3149 db RandomAUnitLevel5CostGems 3150 db RandomAUnitLevel5CostRubies 3151 db RandomAUnitLevel5HP 3152 db RandomAUnitLevel5Speed 3153 db RandomAUnitLevel5Attack 3154 db RandomAUnitLevel5Defense 3155 db RandomAUnitLevel5Growth 3156 db RandomAUnitLevel5Damage 3157 db 000 3158 db "BlasterBot",255," "3160Monster129Table: 3161 dw Monster129Idle3162 dw Monster129Move3163 dw Monster129AttackPatternRight3164 dw Monster129AttackPatternLeft3165 dw Monster129AttackPatternLeft3166 dw Monster129AttackPatternLeft3167 dw Monster129AttackPatternRight3168 dw Monster129AttackPatternRight3169 db BattleMonsterSpriteSheet13Block3170 db 32 3171 db 32+08 3172 db RandomAUnitLevel2CostGold 3173 db RandomAUnitLevel2CostGems 3174 db RandomAUnitLevel2CostRubies 3175 db RandomAUnitLevel2HP 3176 db RandomAUnitLevel2Speed 3177 db RandomAUnitLevel2Attack-3 3178 db RandomAUnitLevel2Defense 3179 db RandomAUnitLevel2Growth 3180 db RandomAUnitLevel2Damage 3181 db RangedMonster 3182 db "Screech",255,"    "3184Monster130Table: 3185 dw Monster130Idle3186 dw Monster130Move3187 dw Monster130AttackPatternRight3188 dw Monster130AttackPatternLeft3189 dw Monster130AttackPatternLeftUp3190 dw Monster130AttackPatternLeftDown3191 dw Monster130AttackPatternRightUp3192 dw Monster130AttackPatternRightDown3193 db BattleMonsterSpriteSheet13Block3194 db 16 3195 db 32+08 3196 db RandomBUnitLevel2CostGold 3197 db RandomBUnitLevel2CostGems 3198 db RandomBUnitLevel2CostRubies 3199 db RandomBUnitLevel2HP 3200 db RandomBUnitLevel2Speed 3201 db RandomBUnitLevel2Attack 3202 db RandomBUnitLevel2Defense 3203 db RandomBUnitLevel2Growth 3204 db RandomBUnitLevel2Damage 3205 db 000 3206 db "Schaefer",255,"   "3208Monster131Table: 3209 dw Monster131Idle3210 dw Monster131Move3211 dw Monster131AttackPatternRight3212 dw Monster131AttackPatternLeft3213 dw Monster131AttackPatternLeftUp3214 dw Monster131AttackPatternLeftDown3215 dw Monster131AttackPatternRightUp3216 dw Monster131AttackPatternRightDown3217 db BattleMonsterSpriteSheet13Block3218 db 16 3219 db 32+08 3220 db RandomAUnitLevel3CostGold 3221 db RandomAUnitLevel3CostGems 3222 db RandomAUnitLevel3CostRubies 3223 db RandomAUnitLevel3HP 3224 db RandomAUnitLevel3Speed 3225 db RandomAUnitLevel3Attack 3226 db RandomAUnitLevel3Defense 3227 db RandomAUnitLevel3Growth 3228 db RandomAUnitLevel3Damage 3229 db 000 3230 db "Jon Sparkle",2553232Monster132Table: 3233 dw Monster132Idle3234 dw Monster132Move3235 dw Monster132AttackPatternRight3236 dw Monster132AttackPatternLeft3237 dw Monster132AttackPatternLeftUp3238 dw Monster132AttackPatternLeftDown3239 dw Monster132AttackPatternRightUp3240 dw Monster132AttackPatternRightDown3241 db BattleMonsterSpriteSheet13Block3242 db 16 3243 db 32+08 3244 db RandomBUnitLevel4CostGold 3245 db RandomBUnitLevel4CostGems 3246 db RandomBUnitLevel4CostRubies 3247 db RandomBUnitLevel4HP 3248 db RandomBUnitLevel4Speed 3249 db RandomBUnitLevel4Attack 3250 db RandomBUnitLevel4Defense 3251 db RandomBUnitLevel4Growth 3252 db RandomBUnitLevel4Damage 3253 db 000 3254 db "Monmon",255,"     "3255 3256Monster133Table: 3257 dw Monster133Idle3258 dw Monster133Move3259 dw Monster133AttackPatternRight3260 dw Monster133AttackPatternLeft3261 dw Monster133AttackPatternLeftUp3262 dw Monster133AttackPatternLeftDown3263 dw Monster133AttackPatternRightUp3264 dw Monster133AttackPatternRightDown3265 db BattleMonsterSpriteSheet13Block3266 db 16 3267 db 32+08 3268 db RandomBUnitLevel3CostGold 3269 db RandomBUnitLevel3CostGems 3270 db RandomBUnitLevel3CostRubies 3271 db RandomBUnitLevel3HP 3272 db RandomBUnitLevel3Speed 3273 db RandomBUnitLevel3Attack 3274 db RandomBUnitLevel3Defense 3275 db RandomBUnitLevel3Growth 3276 db RandomBUnitLevel3Damage 3277 db 000 3278 db "Cob Crusher",2553279 3280Monster134Table: 3281 dw Monster134Idle3282 dw Monster134Move3283 dw Monster134AttackPatternRight3284 dw Monster134AttackPatternLeft3285 dw Monster134AttackPatternLeftUp3286 dw Monster134AttackPatternLeftDown3287 dw Monster134AttackPatternRightUp3288 dw Monster134AttackPatternRightDown3289 db BattleMonsterSpriteSheet11Block3290 db 16 3291 db 24+08 3292 db RandomAUnitLevel2CostGold 3293 db RandomAUnitLevel2CostGems 3294 db RandomAUnitLevel2CostRubies 3295 db RandomAUnitLevel2HP 3296 db RandomAUnitLevel2Speed 3297 db RandomAUnitLevel2Attack 3298 db RandomAUnitLevel2Defense 3299 db RandomAUnitLevel2Growth 3300 db RandomAUnitLevel2Damage 3301 db 000 3302 db "Limb Linger",2553303 3304Monster135Table: 3305 dw Monster135Idle3306 dw Monster135Move3307 dw Monster135AttackPatternRight3308 dw Monster135AttackPatternLeft3309 dw Monster135AttackPatternLeftUp3310 dw Monster135AttackPatternLeftDown3311 dw Monster135AttackPatternRightUp3312 dw Monster135AttackPatternRightDown3313 db BattleMonsterSpriteSheet14Block3314 db 32 3315 db 40+08 3316 db DevaUnitLevel5CostGold 3317 db DevaUnitLevel5CostGems 3318 db DevaUnitLevel5CostRubies 3319 db DevaUnitLevel5HP 3320 db DevaUnitLevel5Speed 3321 db DevaUnitLevel5Attack 3322 db DevaUnitLevel5Defense 3323 db DevaUnitLevel5Growth 3324 db DevaUnitLevel5Damage 3325 db 000 3326 db "Deva",255,"       "3327 3328Monster136Table: 3329 dw Monster136Idle3330 dw Monster136Move3331 dw Monster136AttackPatternRight3332 dw Monster136AttackPatternLeft3333 dw Monster136AttackPatternLeftUp3334 dw Monster136AttackPatternLeftDown3335 dw Monster136AttackPatternRightUp3336 dw Monster136AttackPatternRightDown3337 db BattleMonsterSpriteSheet7Block3338 db 16 3339 db 40+08 3340 db DevaUnitLevel2CostGold 3341 db DevaUnitLevel2CostGems 3342 db DevaUnitLevel2CostRubies 3343 db DevaUnitLevel2HP 3344 db DevaUnitLevel2Speed 3345 db DevaUnitLevel2Attack 3346 db DevaUnitLevel2Defense 3347 db DevaUnitLevel2Growth 3348 db DevaUnitLevel2Damage 3349 db 000 3350 db "Spectroll",255,"  "3351 3352Monster137Table: 3353 dw Monster137Idle3354 dw Monster137Move3355 dw GeneralMonsterAttackPatternRight3356 dw GeneralMonsterAttackPatternLeft3357 dw GeneralMonsterAttackPatternLeftUp3358 dw GeneralMonsterAttackPatternLeftDown3359 dw GeneralMonsterAttackPatternRightUp3360 dw GeneralMonsterAttackPatternRightDown3361 db BattleMonsterSpriteSheet12Block3362 db 32 3363 db 48+08 3364 db DevaUnitLevel4CostGold 3365 db DevaUnitLevel4CostGems 3366 db DevaUnitLevel4CostRubies 3367 db DevaUnitLevel4HP 3368 db DevaUnitLevel4Speed 3369 db DevaUnitLevel4Attack 3370 db DevaUnitLevel4Defense 3371 db DevaUnitLevel4Growth 3372 db DevaUnitLevel4Damage 3373 db 000 3374 db "Yurei Kage",255," "3375 3376Monster138Table: 3377 dw Monster138Idle3378 dw Monster138Move3379 dw GeneralMonsterAttackPatternRight3380 dw GeneralMonsterAttackPatternLeft3381 dw GeneralMonsterAttackPatternLeftUp3382 dw GeneralMonsterAttackPatternLeftDown3383 dw GeneralMonsterAttackPatternRightUp3384 dw GeneralMonsterAttackPatternRightDown3385 db BattleMonsterSpriteSheet12Block3386 db 48 3387 db 40+08 3388 db Usas2UnitLevel5CostGold 3389 db Usas2UnitLevel5CostGems 3390 db Usas2UnitLevel5CostRubies 3391 db Usas2UnitLevel5HP 3392 db Usas2UnitLevel5Speed 3393 db Usas2UnitLevel5Attack 3394 db Usas2UnitLevel5Defense 3395 db Usas2UnitLevel5Growth 3396 db Usas2UnitLevel5Damage 3397 db 000 3398 db "Blob",255,"       "3400Monster139Table: 3401 dw Monster139Idle3402 dw Monster139Move3403 dw Monster139AttackPatternRight3404 dw Monster139AttackPatternLeft3405 dw Monster139AttackPatternLeftUp3406 dw Monster139AttackPatternLeftDown3407 dw Monster139AttackPatternRightUp3408 dw Monster139AttackPatternRightDown3409 db BattleMonsterSpriteSheet12Block3410 db 32 3411 db 32+08 3412 db Usas2UnitLevel4CostGold 3413 db Usas2UnitLevel4CostGems 3414 db Usas2UnitLevel4CostRubies 3415 db Usas2UnitLevel4HP 3416 db Usas2UnitLevel4Speed 3417 db Usas2UnitLevel4Attack 3418 db Usas2UnitLevel4Defense 3419 db Usas2UnitLevel4Growth 3420 db Usas2UnitLevel4Damage 3421 db 000 3422 db "Emir Mystic",2553423 3424Monster140Table: 3425 dw Monster140Idle3426 dw Monster140Move3427 dw Monster140AttackPatternRight3428 dw Monster140AttackPatternLeft3429 dw Monster140AttackPatternLeftUp3430 dw Monster140AttackPatternLeftDown3431 dw Monster140AttackPatternRightUp3432 dw Monster140AttackPatternRightDown3433 db BattleMonsterSpriteSheet14Block3434 db 32 3435 db 32+08 3436 db RandomAUnitLevel5CostGold 3437 db RandomAUnitLevel5CostGems 3438 db RandomAUnitLevel5CostRubies 3439 db RandomAUnitLevel5HP 3440 db RandomAUnitLevel5Speed 3441 db RandomAUnitLevel5Attack 3442 db RandomAUnitLevel5Defense 3443 db RandomAUnitLevel5Growth 3444 db RandomAUnitLevel5Damage 3445 db 000 3446 db "Duncan 7",255,"   "3448Monster141Table: 3449 dw Monster141Idle3450 dw Monster141Move3451 dw GeneralMonsterAttackPatternRight3452 dw GeneralMonsterAttackPatternLeft3453 dw GeneralMonsterAttackPatternLeftUp3454 dw GeneralMonsterAttackPatternLeftDown3455 dw GeneralMonsterAttackPatternRightUp3456 dw GeneralMonsterAttackPatternRightDown3457 db BattleMonsterSpriteSheet7Block3458 db 64 3459 db 64+04 3460 db RandomAUnitLevel6CostGold 3461 db RandomAUnitLevel6CostGems 3462 db RandomAUnitLevel6CostRubies 3463 db RandomAUnitLevel6HP 3464 db RandomAUnitLevel6Speed 3465 db RandomAUnitLevel6Attack 3466 db RandomAUnitLevel6Defense 3467 db RandomAUnitLevel6Growth 3468 db RandomAUnitLevel6Damage 3469 db 000 3470 db "Monstrilla",255," "3472Monster142Table: 3473 dw Monster142Idle3474 dw Monster142Move3475 dw GeneralMonsterAttackPatternRight3476 dw GeneralMonsterAttackPatternLeft3477 dw GeneralMonsterAttackPatternLeftUp3478 dw GeneralMonsterAttackPatternLeftDown3479 dw GeneralMonsterAttackPatternRightUp3480 dw GeneralMonsterAttackPatternRightDown3481 db BattleMonsterSpriteSheet7Block3482 db 32 3483 db 40+08 3484 db RandomAUnitLevel4CostGold 3485 db RandomAUnitLevel4CostGems 3486 db RandomAUnitLevel4CostRubies 3487 db RandomAUnitLevel4HP 3488 db RandomAUnitLevel4Speed 3489 db RandomAUnitLevel4Attack 3490 db RandomAUnitLevel4Defense 3491 db RandomAUnitLevel4Growth 3492 db RandomAUnitLevel4Damage 3493 db 000 3494 db "Biolumia",255,"   "3496Monster143Table: 3497 dw Monster143Idle3498 dw Monster143Move3499 dw Monster143AttackPatternRight3500 dw Monster143AttackPatternLeft3501 dw Monster143AttackPatternLeftUp3502 dw Monster143AttackPatternLeftDown3503 dw Monster143AttackPatternRightUp3504 dw Monster143AttackPatternRightDown3505 db BattleMonsterSpriteSheet14Block3506 db 16 3507 db 32+08 3508 db RandomAUnitLevel1CostGold 3509 db RandomAUnitLevel1CostGems 3510 db RandomAUnitLevel1CostRubies 3511 db RandomAUnitLevel1HP 3512 db RandomAUnitLevel1Speed 3513 db RandomAUnitLevel1Attack 3514 db RandomAUnitLevel1Defense 3515 db RandomAUnitLevel1Growth 3516 db RandomAUnitLevel1Damage 3517 db 000 3518 db "Anna Lee",255,"   "3520Monster144Table: 3521 dw Monster144Idle3522 dw Monster144Move3523 dw Monster144AttackPatternRight3524 dw Monster144AttackPatternLeft3525 dw Monster144AttackPatternLeft3526 dw Monster144AttackPatternLeft3527 dw Monster144AttackPatternRight3528 dw Monster144AttackPatternRight3529 db BattleMonsterSpriteSheet14Block3530 db 16 3531 db 32+08 3532 db RandomBUnitLevel2CostGold 3533 db RandomBUnitLevel2CostGems 3534 db RandomBUnitLevel2CostRubies 3535 db RandomBUnitLevel2HP-3 3536 db RandomBUnitLevel2Speed-1 3537 db RandomBUnitLevel2Attack-2 3538 db RandomBUnitLevel2Defense 3539 db RandomBUnitLevel2Growth 3540 db RandomBUnitLevel2Damage 3541 db RangedMonster 3542 db "Pastry Chef",2553544Monster145Table: 3545 dw Monster145Idle3546 dw Monster145Move3547 dw Monster145AttackPatternRight3548 dw Monster145AttackPatternLeft3549 dw Monster145AttackPatternLeftUp3550 dw Monster145AttackPatternLeftDown3551 dw Monster145AttackPatternRightUp3552 dw Monster145AttackPatternRightDown3553 db BattleMonsterSpriteSheet14Block3554 db 16 3555 db 32+08 3556 db RandomBUnitLevel2CostGold 3557 db RandomBUnitLevel2CostGems 3558 db RandomBUnitLevel2CostRubies 3559 db RandomBUnitLevel2HP 3560 db RandomBUnitLevel2Speed 3561 db RandomBUnitLevel2Attack 3562 db RandomBUnitLevel2Defense 3563 db RandomBUnitLevel2Growth 3564 db RandomBUnitLevel2Damage 3565 db 000 3566 db "Indy Brave",255," "3568Monster146Table: 3569 dw Monster146Idle3570 dw Monster146Move3571 dw GeneralMonsterAttackPatternRight3572 dw GeneralMonsterAttackPatternLeft3573 dw GeneralMonsterAttackPatternLeftUp3574 dw GeneralMonsterAttackPatternLeftDown3575 dw GeneralMonsterAttackPatternRightUp3576 dw GeneralMonsterAttackPatternRightDown3577 db BattleMonsterSpriteSheet14Block3578 db 16 3579 db 32+08 3580 db RandomAUnitLevel3CostGold 3581 db RandomAUnitLevel3CostGems 3582 db RandomAUnitLevel3CostRubies 3583 db RandomAUnitLevel3HP 3584 db RandomAUnitLevel3Speed 3585 db RandomAUnitLevel3Attack 3586 db RandomAUnitLevel3Defense 3587 db RandomAUnitLevel3Growth 3588 db RandomAUnitLevel3Damage 3589 db 000 3590 db "Red Lupin",255,"  "3592Monster147Table: 3593 dw Monster147Idle3594 dw Monster147Move3595 dw GeneralMonsterAttackPatternRight3596 dw GeneralMonsterAttackPatternLeft3597 dw GeneralMonsterAttackPatternLeftUp3598 dw GeneralMonsterAttackPatternLeftDown3599 dw GeneralMonsterAttackPatternRightUp3600 dw GeneralMonsterAttackPatternRightDown3601 db BattleMonsterSpriteSheet13Block3602 db 16 3603 db 32+08 3604 db RandomBUnitLevel3CostGold 3605 db RandomBUnitLevel3CostGems 3606 db RandomBUnitLevel3CostRubies 3607 db RandomBUnitLevel3HP 3608 db RandomBUnitLevel3Speed 3609 db RandomBUnitLevel3Attack 3610 db RandomBUnitLevel3Defense 3611 db RandomBUnitLevel3Growth 3612 db RandomBUnitLevel3Damage 3613 db 000 3614 db "Green Lupin",2553615 3616Monster148Table: 3617 dw Monster148Idle3618 dw Monster148Move3619 dw GeneralMonsterAttackPatternRight3620 dw GeneralMonsterAttackPatternLeft3621 dw GeneralMonsterAttackPatternLeftUp3622 dw GeneralMonsterAttackPatternLeftDown3623 dw GeneralMonsterAttackPatternRightUp3624 dw GeneralMonsterAttackPatternRightDown3625 db BattleMonsterSpriteSheet14Block3626 db 16 3627 db 32+08 3628 db RandomAUnitLevel2CostGold 3629 db RandomAUnitLevel2CostGems 3630 db RandomAUnitLevel2CostRubies 3631 db RandomAUnitLevel2HP 3632 db RandomAUnitLevel2Speed 3633 db RandomAUnitLevel2Attack 3634 db RandomAUnitLevel2Defense 3635 db RandomAUnitLevel2Growth 3636 db RandomAUnitLevel2Damage 3637 db 000 3638 db "Major Mirth",2553639 3640Monster149Table: 3641 dw Monster149Idle3642 dw Monster149Move3643 dw Monster149AttackPatternRight3644 dw Monster149AttackPatternLeft3645 dw Monster149AttackPatternLeft3646 dw Monster149AttackPatternLeft3647 dw Monster149AttackPatternRight3648 dw Monster149AttackPatternRight3649 db BattleMonsterSpriteSheet13Block3650 db 16 3651 db 16+08 3652 db KingsValley2UnitLevel4CostGold 3653 db KingsValley2UnitLevel4CostGems 3654 db KingsValley2UnitLevel4CostRubies 3655 db KingsValley2UnitLevel4HP 3656 db KingsValley2UnitLevel4Speed 3657 db KingsValley2UnitLevel4Attack 3658 db KingsValley2UnitLevel4Defense 3659 db KingsValley2UnitLevel4Growth 3660 db KingsValley2UnitLevel4Damage 3661 db RangedMonster 3662 db "Vic Viper",255,"  "3664Monster150Table: 3665 dw Monster150Idle3666 dw Monster150Move3667 dw Monster150AttackPatternRight3668 dw Monster150AttackPatternLeft3669 dw Monster150AttackPatternLeftUp3670 dw Monster150AttackPatternLeftDown3671 dw Monster150AttackPatternRightUp3672 dw Monster150AttackPatternRightDown3673 db BattleMonsterSpriteSheet6Block3674 db 16 3675 db 16+08 3676 db KingsValley2UnitLevel3CostGold 3677 db KingsValley2UnitLevel3CostGems 3678 db KingsValley2UnitLevel3CostRubies 3679 db KingsValley2UnitLevel3HP 3680 db KingsValley2UnitLevel3Speed 3681 db KingsValley2UnitLevel3Attack 3682 db KingsValley2UnitLevel3Defense 3683 db KingsValley2UnitLevel3Growth 3684 db KingsValley2UnitLevel3Damage 3685 db 000 3686 db "Rock Roll",255,"  "3688Monster151Table: 3689 dw Monster151Idle3690 dw Monster151Move3691 dw GeneralMonsterAttackPatternRight3692 dw GeneralMonsterAttackPatternLeft3693 dw GeneralMonsterAttackPatternLeftUp3694 dw GeneralMonsterAttackPatternLeftDown3695 dw GeneralMonsterAttackPatternRightUp3696 dw GeneralMonsterAttackPatternRightDown3697 db BattleMonsterSpriteSheet6Block3698 db 16 3699 db 16+08 3700 db KingsValley2UnitLevel1CostGold 3701 db KingsValley2UnitLevel1CostGems 3702 db KingsValley2UnitLevel1CostRubies 3703 db KingsValley2UnitLevel1HP 3704 db KingsValley2UnitLevel1Speed 3705 db KingsValley2UnitLevel1Attack 3706 db KingsValley2UnitLevel1Defense 3707 db KingsValley2UnitLevel1Growth 3708 db KingsValley2UnitLevel1Damage 3709 db 000 3710 db "Slouman",255,"    "3712Monster152Table: 3713 dw Monster152Idle3714 dw Monster152Move3715 dw Monster152AttackPatternRight3716 dw Monster152AttackPatternLeft3717 dw Monster152AttackPatternLeftUp3718 dw Monster152AttackPatternLeftDown3719 dw Monster152AttackPatternRightUp3720 dw Monster152AttackPatternRightDown3721 db BattleMonsterSpriteSheet6Block3722 db 16 3723 db 16+08 3724 db KingsValley2UnitLevel2CostGold 3725 db KingsValley2UnitLevel2CostGems 3726 db KingsValley2UnitLevel2CostRubies 3727 db KingsValley2UnitLevel2HP 3728 db KingsValley2UnitLevel2Speed 3729 db KingsValley2UnitLevel2Attack 3730 db KingsValley2UnitLevel2Defense 3731 db KingsValley2UnitLevel2Growth 3732 db KingsValley2UnitLevel2Damage 3733 db 000 3734 db "Pyoncy",255,"     "3742Monster153Table: 3743 dw Monster153Idle3744 dw Monster153Move3745 dw Monster153AttackPatternRight3746 dw Monster153AttackPatternLeft3747 dw Monster153AttackPatternLeft3748 dw Monster153AttackPatternLeft3749 dw Monster153AttackPatternRight3750 dw Monster153AttackPatternRight3751 db BattleMonsterSpriteSheet6Block3752 db 16 3753 db 40+08 3754 db RandomBUnitLevel4CostGold 3755 db RandomBUnitLevel4CostGems 3756 db RandomBUnitLevel4CostRubies 3757 db RandomBUnitLevel4HP-2 3758 db RandomBUnitLevel4Speed 3759 db RandomBUnitLevel4Attack-2 3760 db RandomBUnitLevel4Defense 3761 db RandomBUnitLevel4Growth 3762 db RandomBUnitLevel4Damage 3763 db RangedMonster 3764 db "Andorogynus",2553765 3766Monster154Table: 3767 dw Monster154Idle3768 dw Monster154Move3769 dw GeneralMonsterAttackPatternRight3770 dw GeneralMonsterAttackPatternLeft3771 dw GeneralMonsterAttackPatternLeftUp3772 dw GeneralMonsterAttackPatternLeftDown3773 dw GeneralMonsterAttackPatternRightUp3774 dw GeneralMonsterAttackPatternRightDown3775 db BattleMonsterSpriteSheet6Block3776 db 16 3777 db 32+08 3778 db RandomBUnitLevel5CostGold 3779 db RandomBUnitLevel5CostGems 3780 db RandomBUnitLevel5CostRubies 3781 db RandomBUnitLevel5HP 3782 db RandomBUnitLevel5Speed 3783 db RandomBUnitLevel5Attack 3784 db RandomBUnitLevel5Defense 3785 db RandomBUnitLevel5Growth 3786 db RandomBUnitLevel5Damage 3787 db 000 3788 db "Thexder",255,"    "3790Monster155Table: 3791 dw Monster155Idle3792 dw Monster155Move3793 dw GeneralMonsterAttackPatternRight3794 dw GeneralMonsterAttackPatternLeft3795 dw GeneralMonsterAttackPatternLeftUp3796 dw GeneralMonsterAttackPatternLeftDown3797 dw GeneralMonsterAttackPatternRightUp3798 dw GeneralMonsterAttackPatternRightDown3799 db BattleMonsterSpriteSheet6Block3800 db 16 3801 db 16+08 3802 db RandomAUnitLevel3CostGold 3803 db RandomAUnitLevel3CostGems 3804 db RandomAUnitLevel3CostRubies 3805 db RandomAUnitLevel3HP 3806 db RandomAUnitLevel3Speed 3807 db RandomAUnitLevel3Attack 3808 db RandomAUnitLevel3Defense 3809 db RandomAUnitLevel3Growth 3810 db RandomAUnitLevel3Damage 3811 db 000 3812 db "BounceBot",255,"  "3814Monster156Table: 3815 dw Monster156Idle3816 dw Monster156Move3817 dw GeneralMonsterAttackPatternRight3818 dw GeneralMonsterAttackPatternLeft3819 dw GeneralMonsterAttackPatternLeftUp3820 dw GeneralMonsterAttackPatternLeftDown3821 dw GeneralMonsterAttackPatternRightUp3822 dw GeneralMonsterAttackPatternRightDown3823 db BattleMonsterSpriteSheet11Block3824 db 32 3825 db 24+08 3826 db RandomBUnitLevel6CostGold 3827 db RandomBUnitLevel6CostGems 3828 db RandomBUnitLevel6CostRubies 3829 db RandomBUnitLevel6HP 3830 db RandomBUnitLevel6Speed 3831 db RandomBUnitLevel6Attack 3832 db RandomBUnitLevel6Defense 3833 db RandomBUnitLevel6Growth 3834 db RandomBUnitLevel6Damage 3835 db 000 3836 db "ColossalBot",2553838Monster157Table: 3839 dw Monster157Idle3840 dw Monster157Move3841 dw Monster157AttackPatternRight3842 dw Monster157AttackPatternLeft3843 dw Monster157AttackPatternLeftUp3844 dw Monster157AttackPatternLeftDown3845 dw Monster157AttackPatternRightUp3846 dw Monster157AttackPatternRightDown3847 db BattleMonsterSpriteSheet12Block3848 db 16 3849 db 32+08 3850 db RandomAUnitLevel3CostGold 3851 db RandomAUnitLevel3CostGems 3852 db RandomAUnitLevel3CostRubies 3853 db RandomAUnitLevel3HP 3854 db RandomAUnitLevel3Speed 3855 db RandomAUnitLevel3Attack 3856 db RandomAUnitLevel3Defense 3857 db RandomAUnitLevel3Growth 3858 db RandomAUnitLevel3Damage 3859 db 000 3860 db "SuperRunner",2553861 3862Monster158Table: 3863 dw Monster158Idle3864 dw Monster158Move3865 dw Monster158AttackPatternRight3866 dw Monster158AttackPatternLeft3867 dw Monster158AttackPatternLeft3868 dw Monster158AttackPatternLeft3869 dw Monster158AttackPatternRight3870 dw Monster158AttackPatternRight3871 db BattleMonsterSpriteSheet9Block3872 db 32 3873 db 24+08 3874 db AkanbeDragonGroupBUnitLevel5CostGold 3875 db AkanbeDragonGroupBUnitLevel5CostGems 3876 db AkanbeDragonGroupBUnitLevel5CostRubies 3877 db AkanbeDragonGroupBUnitLevel5HP 3878 db AkanbeDragonGroupBUnitLevel5Speed 3879 db AkanbeDragonGroupBUnitLevel5Attack 3880 db AkanbeDragonGroupBUnitLevel5Defense 3881 db AkanbeDragonGroupBUnitLevel5Growth 3882 db AkanbeDragonGroupBUnitLevel5Damage 3883 db RangedMonster 3884 db "Queen Sora",255," "3890SenkoKyuLevel2Number: equ 523891SenkoKyuLevel2Attack: equ 33892SenkoKyuLevel2Damage: equ 33893SenkoKyuLevel2Defense: equ 73894SenkoKyuLevel2HP: equ 183895SenkoKyuLevel2Speed: equ 33896SenkoKyuLevel2Growth: equ 83897SenkoKyuLevel2CostGold: equ 120/103898SenkoKyuLevel2CostGems: equ 00+Level2Unit3899SenkoKyuLevel2CostRubies: equ 03901Monster159Table: 3902 dw Monster159Idle3903 dw Monster159Move3904 dw Monster159AttackPatternRight3905 dw Monster159AttackPatternLeft3906 dw Monster159AttackPatternLeft3907 dw Monster159AttackPatternLeft3908 dw Monster159AttackPatternRight3909 dw Monster159AttackPatternRight3910 db BattleMonsterSpriteSheet9Block3911 db 16 3912 db 16+08 3913 db SenkoKyuLevel2CostGold 3914 db SenkoKyuLevel2CostGems 3915 db SenkoKyuLevel2CostRubies 3916 db SenkoKyuLevel2HP 3917 db SenkoKyuLevel2Speed 3918 db SenkoKyuLevel2Attack 3919 db SenkoKyuLevel2Defense 3920 db SenkoKyuLevel2Growth 3921 db SenkoKyuLevel2Damage 3922 db RangedMonster 3923 db "Senko Kyu",255,"  "3925Monster160Table: 3926 dw Monster160Idle3927 dw Monster160Move3928 dw GeneralMonsterAttackPatternRight3929 dw GeneralMonsterAttackPatternLeft3930 dw GeneralMonsterAttackPatternLeftUp3931 dw GeneralMonsterAttackPatternLeftDown3932 dw GeneralMonsterAttackPatternRightUp3933 dw GeneralMonsterAttackPatternRightDown3934 db BattleMonsterSpriteSheet9Block3935 db 16 3936 db 16+08 3937 db RandomBUnitLevel1CostGold 3938 db RandomBUnitLevel1CostGems 3939 db RandomBUnitLevel1CostRubies 3940 db RandomBUnitLevel1HP 3941 db RandomBUnitLevel1Speed 3942 db RandomBUnitLevel1Attack 3943 db RandomBUnitLevel1Defense 3944 db RandomBUnitLevel1Growth 3945 db RandomBUnitLevel1Damage 3946 db 000 3947 db "Chucklehook",2553948 3949Monster161Table: 3950 dw Monster161Idle3951 dw Monster161Move3952 dw GeneralMonsterAttackPatternRight3953 dw GeneralMonsterAttackPatternLeft3954 dw GeneralMonsterAttackPatternLeftUp3955 dw GeneralMonsterAttackPatternLeftDown3956 dw GeneralMonsterAttackPatternRightUp3957 dw GeneralMonsterAttackPatternRightDown3958 db BattleMonsterSpriteSheet7Block3959 db 16 3960 db 16+08 3961 db RandomBUnitLevel3CostGold 3962 db RandomBUnitLevel3CostGems 3963 db RandomBUnitLevel3CostRubies 3964 db RandomBUnitLevel3HP 3965 db RandomBUnitLevel3Speed 3966 db RandomBUnitLevel3Attack 3967 db RandomBUnitLevel3Defense 3968 db RandomBUnitLevel3Growth 3969 db RandomBUnitLevel3Damage 3970 db 000 3971 db "Sir Oji",255,"    "3973Monster162Table: 3974 dw Monster162Idle3975 dw Monster162Move3976 dw GeneralMonsterAttackPatternRight3977 dw GeneralMonsterAttackPatternLeft3978 dw GeneralMonsterAttackPatternLeftUp3979 dw GeneralMonsterAttackPatternLeftDown3980 dw GeneralMonsterAttackPatternRightUp3981 dw GeneralMonsterAttackPatternRightDown3982 db BattleMonsterSpriteSheet7Block3983 db 16 3984 db 16+08 3985 db RandomBUnitLevel3CostGold 3986 db RandomBUnitLevel3CostGems 3987 db RandomBUnitLevel3CostRubies 3988 db RandomBUnitLevel3HP 3989 db RandomBUnitLevel3Speed 3990 db RandomBUnitLevel3Attack 3991 db RandomBUnitLevel3Defense 3992 db RandomBUnitLevel3Growth 3993 db RandomBUnitLevel3Damage 3994 db 000 3995 db "Pentaro",255,"    "3997Monster163Table: 3998 dw Monster163Idle3999 dw Monster163Move4000 dw GeneralMonsterAttackPatternRight4001 dw GeneralMonsterAttackPatternLeft4002 dw GeneralMonsterAttackPatternLeftUp4003 dw GeneralMonsterAttackPatternLeftDown4004 dw GeneralMonsterAttackPatternRightUp4005 dw GeneralMonsterAttackPatternRightDown4006 db BattleMonsterSpriteSheet7Block4007 db 16 4008 db 16+08 4009 db RandomBUnitLevel2CostGold 4010 db RandomBUnitLevel2CostGems 4011 db RandomBUnitLevel2CostRubies 4012 db RandomBUnitLevel2HP 4013 db RandomBUnitLevel2Speed 4014 db RandomBUnitLevel2Attack 4015 db RandomBUnitLevel2Defense 4016 db RandomBUnitLevel2Growth 4017 db RandomBUnitLevel2Damage 4018 db 000 4019 db "Moai",255,"       "4021Monster164Table: 4022 dw Monster164Idle4023 dw Monster164Move4024 dw Monster164AttackPatternRight4025 dw Monster164AttackPatternLeft4026 dw Monster164AttackPatternLeftUp4027 dw Monster164AttackPatternLeftDown4028 dw Monster164AttackPatternRightUp4029 dw Monster164AttackPatternRightDown4030 db BattleMonsterSpriteSheet7Block4031 db 16 4032 db 40+08 4033 db RandomBUnitLevel4CostGold 4034 db RandomBUnitLevel4CostGems 4035 db RandomBUnitLevel4CostRubies 4036 db RandomBUnitLevel4HP 4037 db RandomBUnitLevel4Speed 4038 db RandomBUnitLevel4Attack 4039 db RandomBUnitLevel4Defense 4040 db RandomBUnitLevel4Growth 4041 db RandomBUnitLevel4Damage 4042 db 000 4043 db "Thomas",255,"     "4045Monster165Table: 4046 dw Monster165Idle4047 dw Monster165Move4048 dw GeneralMonsterAttackPatternRight4049 dw GeneralMonsterAttackPatternLeft4050 dw GeneralMonsterAttackPatternLeftUp4051 dw GeneralMonsterAttackPatternLeftDown4052 dw GeneralMonsterAttackPatternRightUp4053 dw GeneralMonsterAttackPatternRightDown4054 db BattleMonsterSpriteSheet15Block4055 db 32 4056 db 16+08 4057 db RandomBUnitLevel3CostGold 4058 db RandomBUnitLevel3CostGems 4059 db RandomBUnitLevel3CostRubies 4060 db RandomBUnitLevel3HP 4061 db RandomBUnitLevel3Speed 4062 db RandomBUnitLevel3Attack 4063 db RandomBUnitLevel3Defense 4064 db RandomBUnitLevel3Growth 4065 db RandomBUnitLevel3Damage 4066 db 000 4067 db "BlueSteel",255,"  "4069Monster166Table: 4070 dw Monster166Idle4071 dw Monster166Move4072 dw GeneralMonsterAttackPatternRight4073 dw GeneralMonsterAttackPatternLeft4074 dw GeneralMonsterAttackPatternLeftUp4075 dw GeneralMonsterAttackPatternLeftDown4076 dw GeneralMonsterAttackPatternRightUp4077 dw GeneralMonsterAttackPatternRightDown4078 db BattleMonsterSpriteSheet12Block4079 db 16 4080 db 40+08 4081 db RandomBUnitLevel4CostGold 4082 db RandomBUnitLevel4CostGems 4083 db RandomBUnitLevel4CostRubies 4084 db RandomBUnitLevel4HP 4085 db RandomBUnitLevel4Speed 4086 db RandomBUnitLevel4Attack 4087 db RandomBUnitLevel4Defense 4088 db RandomBUnitLevel4Growth 4089 db RandomBUnitLevel4Damage 4090 db 000 4091 db "Hikodrone",255,"  "4093Monster167Table: 4094 dw Monster167Idle4095 dw Monster167Move4096 dw GeneralMonsterAttackPatternRight4097 dw GeneralMonsterAttackPatternLeft4098 dw GeneralMonsterAttackPatternLeftUp4099 dw GeneralMonsterAttackPatternLeftDown4100 dw GeneralMonsterAttackPatternRightUp4101 dw GeneralMonsterAttackPatternRightDown4102 db BattleMonsterSpriteSheet15Block4103 db 16 4104 db 32+08 4105 db RandomBUnitLevel3CostGold 4106 db RandomBUnitLevel3CostGems 4107 db RandomBUnitLevel3CostRubies 4108 db RandomBUnitLevel3HP 4109 db RandomBUnitLevel3Speed 4110 db RandomBUnitLevel3Attack 4111 db RandomBUnitLevel3Defense 4112 db RandomBUnitLevel3Growth 4113 db RandomBUnitLevel3Damage 4114 db 000 4115 db "Wonder Boy",255," "4117NinjaKunLevel2Number: equ 524118NinjaKunLevel2Attack: equ 34119NinjaKunLevel2Damage: equ 34120NinjaKunLevel2Defense: equ 74121NinjaKunLevel2HP: equ 174122NinjaKunLevel2Speed: equ 34123NinjaKunLevel2Growth: equ 84124NinjaKunLevel2CostGold: equ 120/104125NinjaKunLevel2CostGems: equ 00+Level2Unit4126NinjaKunLevel2CostRubies: equ 04128Monster168Table: 4129 dw Monster168Idle4130 dw Monster168Move4131 dw Monster168AttackPatternRight4132 dw Monster168AttackPatternLeft4133 dw Monster168AttackPatternLeft4134 dw Monster168AttackPatternLeft4135 dw Monster168AttackPatternRight4136 dw Monster168AttackPatternRight4137 db BattleMonsterSpriteSheet15Block4138 db 16 4139 db 16+08 4140 db NinjaKunLevel2CostGold 4141 db NinjaKunLevel2CostGems 4142 db NinjaKunLevel2CostRubies 4143 db NinjaKunLevel2HP 4144 db NinjaKunLevel2Speed 4145 db NinjaKunLevel2Attack 4146 db NinjaKunLevel2Defense 4147 db NinjaKunLevel2Growth 4148 db NinjaKunLevel2Damage 4149 db RangedMonster 4150 db "Ninja Kun",255,"  "4152Monster169Table: 4153 dw Monster169Idle4154 dw Monster169Move4155 dw GeneralMonsterAttackPatternRight4156 dw GeneralMonsterAttackPatternLeft4157 dw GeneralMonsterAttackPatternLeftUp4158 dw GeneralMonsterAttackPatternLeftDown4159 dw GeneralMonsterAttackPatternRightUp4160 dw GeneralMonsterAttackPatternRightDown4161 db BattleMonsterSpriteSheet15Block4162 db 16 4163 db 24+08 4164 db RandomBUnitLevel3CostGold 4165 db RandomBUnitLevel3CostGems 4166 db RandomBUnitLevel3CostRubies 4167 db RandomBUnitLevel3HP 4168 db RandomBUnitLevel3Speed 4169 db RandomBUnitLevel3Attack 4170 db RandomBUnitLevel3Defense 4171 db RandomBUnitLevel3Growth 4172 db RandomBUnitLevel3Damage 4173 db 000 4174 db "Kubiwatari",255," "4176Monster170Table: 4177 dw Monster170Idle4178 dw Monster170Move4179 dw GeneralMonsterAttackPatternRight4180 dw GeneralMonsterAttackPatternLeft4181 dw GeneralMonsterAttackPatternLeftUp4182 dw GeneralMonsterAttackPatternLeftDown4183 dw GeneralMonsterAttackPatternRightUp4184 dw GeneralMonsterAttackPatternRightDown4185 db BattleMonsterSpriteSheet10Block4186 db 32 4187 db 24+08 4188 db RandomBUnitLevel5CostGold 4189 db RandomBUnitLevel5CostGems 4190 db RandomBUnitLevel5CostRubies 4191 db RandomBUnitLevel5HP 4192 db RandomBUnitLevel5Speed 4193 db RandomBUnitLevel5Attack 4194 db RandomBUnitLevel5Defense 4195 db RandomBUnitLevel5Growth 4196 db RandomBUnitLevel5Damage 4197 db 000 4199 db "Flutterbane",2554201Monster171Table: 4202 dw Monster171Idle4203 dw Monster171Move4204 dw GeneralMonsterAttackPatternRight4205 dw GeneralMonsterAttackPatternLeft4206 dw GeneralMonsterAttackPatternLeftUp4207 dw GeneralMonsterAttackPatternLeftDown4208 dw GeneralMonsterAttackPatternRightUp4209 dw GeneralMonsterAttackPatternRightDown4210 db BattleMonsterSpriteSheet8Block4211 db 16 4212 db 24+08 4213 db RandomBUnitLevel1CostGold 4214 db RandomBUnitLevel1CostGems 4215 db RandomBUnitLevel1CostRubies 4216 db RandomBUnitLevel1HP 4217 db RandomBUnitLevel1Speed 4218 db RandomBUnitLevel1Attack 4219 db RandomBUnitLevel1Defense 4220 db RandomBUnitLevel1Growth 4221 db RandomBUnitLevel1Damage 4222 db 000 4223 db "Topple Zip",255," "4225Monster172Table: 4226 dw Monster172Idle4227 dw Monster172Move4228 dw GeneralMonsterAttackPatternRight4229 dw GeneralMonsterAttackPatternLeft4230 dw GeneralMonsterAttackPatternLeftUp4231 dw GeneralMonsterAttackPatternLeftDown4232 dw GeneralMonsterAttackPatternRightUp4233 dw GeneralMonsterAttackPatternRightDown4234 db BattleMonsterSpriteSheet12Block4235 db 16 4236 db 24+08 4237 db RandomBUnitLevel1CostGold 4238 db RandomBUnitLevel1CostGems 4239 db RandomBUnitLevel1CostRubies 4240 db RandomBUnitLevel1HP 4241 db RandomBUnitLevel1Speed 4242 db RandomBUnitLevel1Attack 4243 db RandomBUnitLevel1Defense 4244 db RandomBUnitLevel1Growth 4245 db RandomBUnitLevel1Damage 4246 db 000 4247 db "Topplane",255,"   "4249Monster173Table: 4250 dw Monster173Idle4251 dw Monster173Move4252 dw GeneralMonsterAttackPatternRight4253 dw GeneralMonsterAttackPatternLeft4254 dw GeneralMonsterAttackPatternLeftUp4255 dw GeneralMonsterAttackPatternLeftDown4256 dw GeneralMonsterAttackPatternRightUp4257 dw GeneralMonsterAttackPatternRightDown4258 db BattleMonsterSpriteSheet15Block4259 db 16 4260 db 32+08 4261 db RandomBUnitLevel3CostGold 4262 db RandomBUnitLevel3CostGems 4263 db RandomBUnitLevel3CostRubies 4264 db RandomBUnitLevel3HP 4265 db RandomBUnitLevel3Speed 4266 db RandomBUnitLevel3Attack 4267 db RandomBUnitLevel3Defense 4268 db RandomBUnitLevel3Growth 4269 db RandomBUnitLevel3Damage 4270 db 000 4271 db "Nyancle",255,"    "4273Monster174Table: 4274 dw Monster174Idle4275 dw Monster174Move4276 dw Monster174AttackPatternRight4277 dw Monster174AttackPatternLeft4278 dw Monster174AttackPatternLeftUp4279 dw Monster174AttackPatternLeftDown4280 dw Monster174AttackPatternRightUp4281 dw Monster174AttackPatternRightDown4282 db BattleMonsterSpriteSheet15Block4283 db 32 4284 db 32+08 4285 db RandomBUnitLevel5CostGold 4286 db RandomBUnitLevel5CostGems 4287 db RandomBUnitLevel5CostRubies 4288 db RandomBUnitLevel5HP 4289 db RandomBUnitLevel5Speed 4290 db RandomBUnitLevel5Attack 4291 db RandomBUnitLevel5Defense 4292 db RandomBUnitLevel5Growth 4293 db RandomBUnitLevel5Damage 4294 db 000 4295 db "Ashguine",255,"   "4297Monster175Table: 4298 dw Monster175Idle4299 dw Monster175Move4300 dw GeneralMonsterAttackPatternRight4301 dw GeneralMonsterAttackPatternLeft4302 dw GeneralMonsterAttackPatternLeftUp4303 dw GeneralMonsterAttackPatternLeftDown4304 dw GeneralMonsterAttackPatternRightUp4305 dw GeneralMonsterAttackPatternRightDown4306 db BattleMonsterSpriteSheet15Block4307 db 32 4308 db 48+08 4309 db RandomBUnitLevel1CostGold 4310 db RandomBUnitLevel1CostGems 4311 db RandomBUnitLevel1CostRubies 4312 db RandomBUnitLevel1HP 4313 db RandomBUnitLevel1Speed 4314 db RandomBUnitLevel1Attack 4315 db RandomBUnitLevel1Defense 4316 db RandomBUnitLevel1Growth 4317 db RandomBUnitLevel1Damage 4318 db 000 4319 db "Hard Boiled",2554321Monster176Table: 4322 dw Monster176Idle4323 dw Monster176Move4324 dw Monster176AttackPatternRight4325 dw Monster176AttackPatternLeft4326 dw Monster176AttackPatternLeftUp4327 dw Monster176AttackPatternLeftDown4328 dw Monster176AttackPatternRightUp4329 dw Monster176AttackPatternRightDown4330 db BattleMonsterSpriteSheet15Block4331 db 16 4332 db 16+08 4333 db RandomBUnitLevel1CostGold 4334 db RandomBUnitLevel1CostGems 4335 db RandomBUnitLevel1CostRubies 4336 db RandomBUnitLevel1HP 4337 db RandomBUnitLevel1Speed 4338 db RandomBUnitLevel1Attack 4339 db RandomBUnitLevel1Defense 4340 db RandomBUnitLevel1Growth 4341 db RandomBUnitLevel1Damage 4342 db 000 4343 db "Pingo",255,"      "4345Monster177Table: 4346 dw Monster177Idle4347 dw Monster177Move4348 dw GeneralMonsterAttackPatternRight4349 dw GeneralMonsterAttackPatternLeft4350 dw GeneralMonsterAttackPatternLeftUp4351 dw GeneralMonsterAttackPatternLeftDown4352 dw GeneralMonsterAttackPatternRightUp4353 dw GeneralMonsterAttackPatternRightDown4354 db BattleMonsterSpriteSheet15Block4355 db 16 4356 db 16+08 4357 db RandomBUnitLevel1CostGold 4358 db RandomBUnitLevel1CostGems 4359 db RandomBUnitLevel1CostRubies 4360 db RandomBUnitLevel1HP 4361 db RandomBUnitLevel1Speed 4362 db RandomBUnitLevel1Attack 4363 db RandomBUnitLevel1Defense 4364 db RandomBUnitLevel1Growth 4365 db RandomBUnitLevel1Damage 4366 db 000 4367 db "Doki Bear",255,"  "4369Monster178Table: 4370 dw Monster178Idle4371 dw Monster178Move4372 dw Monster178AttackPatternRight4373 dw Monster178AttackPatternLeft4374 dw Monster178AttackPatternLeftUp4375 dw Monster178AttackPatternLeftDown4376 dw Monster178AttackPatternRightUp4377 dw Monster178AttackPatternRightDown4378 db BattleMonsterSpriteSheet15Block4379 db 16 4380 db 16+08 4381 db RandomBUnitLevel3CostGold 4382 db RandomBUnitLevel3CostGems 4383 db RandomBUnitLevel3CostRubies 4384 db RandomBUnitLevel3HP 4385 db RandomBUnitLevel3Speed 4386 db RandomBUnitLevel3Attack 4387 db RandomBUnitLevel3Defense 4388 db RandomBUnitLevel3Growth 4389 db RandomBUnitLevel3Damage 4390 db 000 4391 db "InspecteurZ",2554392 4393Monster179Table: 4394 dw Monster179Idle4395 dw Monster179Move4396 dw GeneralMonsterAttackPatternRight4397 dw GeneralMonsterAttackPatternLeft4398 dw GeneralMonsterAttackPatternLeftUp4399 dw GeneralMonsterAttackPatternLeftDown4400 dw GeneralMonsterAttackPatternRightUp4401 dw GeneralMonsterAttackPatternRightDown4402 db BattleMonsterSpriteSheet15Block4403 db 16 4404 db 16+08 4405 db RandomBUnitLevel2CostGold 4406 db RandomBUnitLevel2CostGems 4407 db RandomBUnitLevel2CostRubies 4408 db RandomBUnitLevel2HP 4409 db RandomBUnitLevel2Speed 4410 db RandomBUnitLevel2Attack 4411 db RandomBUnitLevel2Defense 4412 db RandomBUnitLevel2Growth 4413 db RandomBUnitLevel2Damage 4414 db 000 4415 db "Thug",255,"       "4417Monster180Table: 4418 dw Monster180Idle4419 dw Monster180Move4420 dw GeneralMonsterAttackPatternRight4421 dw GeneralMonsterAttackPatternLeft4422 dw GeneralMonsterAttackPatternLeftUp4423 dw GeneralMonsterAttackPatternLeftDown4424 dw GeneralMonsterAttackPatternRightUp4425 dw GeneralMonsterAttackPatternRightDown4426 db BattleMonsterSpriteSheet15Block4427 db 16 4428 db 16+08 4429 db RandomBUnitLevel1CostGold 4430 db RandomBUnitLevel1CostGems 4431 db RandomBUnitLevel1CostRubies 4432 db RandomBUnitLevel1HP 4433 db RandomBUnitLevel1Speed 4434 db RandomBUnitLevel1Attack 4435 db RandomBUnitLevel1Defense 4436 db RandomBUnitLevel1Growth 4437 db RandomBUnitLevel1Damage 4438 db 000 4439 db "Goblin",255,"     "4441Monster181Table: 4442 dw Monster181Idle4443 dw Monster181Move4444 dw GeneralMonsterAttackPatternRight4445 dw GeneralMonsterAttackPatternLeft4446 dw GeneralMonsterAttackPatternLeftUp4447 dw GeneralMonsterAttackPatternLeftDown4448 dw GeneralMonsterAttackPatternRightUp4449 dw GeneralMonsterAttackPatternRightDown4450 db BattleMonsterSpriteSheet15Block4451 db 16 4452 db 16+08 4453 db RandomBUnitLevel2CostGold 4454 db RandomBUnitLevel2CostGems 4455 db RandomBUnitLevel2CostRubies 4456 db RandomBUnitLevel2HP 4457 db RandomBUnitLevel2Speed 4458 db RandomBUnitLevel2Attack 4459 db RandomBUnitLevel2Defense 4460 db RandomBUnitLevel2Growth 4461 db RandomBUnitLevel2Damage 4462 db 000 4463 db "Emberhorn",255,"  "4465Monster182Table: 4466 dw Monster182Idle4467 dw Monster182Move4468 dw GeneralMonsterAttackPatternRight4469 dw GeneralMonsterAttackPatternLeft4470 dw GeneralMonsterAttackPatternLeftUp4471 dw GeneralMonsterAttackPatternLeftDown4472 dw GeneralMonsterAttackPatternRightUp4473 dw GeneralMonsterAttackPatternRightDown4474 db BattleMonsterSpriteSheet16Block4475 db 48 4476 db 32+08 4477 db ChukaTaisenUnitLevel1CostGold 4478 db ChukaTaisenUnitLevel1CostGems 4479 db ChukaTaisenUnitLevel1CostRubies 4480 db ChukaTaisenUnitLevel1HP 4481 db ChukaTaisenUnitLevel1Speed 4482 db ChukaTaisenUnitLevel1Attack 4483 db ChukaTaisenUnitLevel1Defense 4484 db ChukaTaisenUnitLevel1Growth 4485 db ChukaTaisenUnitLevel1Damage 4486 db 000 4487 db "Kanton Man",255," "4489Monster183Table: 4490 dw Monster183Idle4491 dw Monster183Move4492 dw Monster183AttackPatternRight4493 dw Monster183AttackPatternLeft4494 dw Monster183AttackPatternLeft4495 dw Monster183AttackPatternLeft4496 dw Monster183AttackPatternRight4497 dw Monster183AttackPatternRight4498 db BattleMonsterSpriteSheet16Block4499 db 32 4500 db 32+08 4501 db ChukaTaisenUnitLevel2CostGold 4502 db ChukaTaisenUnitLevel2CostGems 4503 db ChukaTaisenUnitLevel2CostRubies 4504 db ChukaTaisenUnitLevel2HP 4505 db ChukaTaisenUnitLevel2Speed 4506 db ChukaTaisenUnitLevel2Attack 4507 db ChukaTaisenUnitLevel2Defense 4508 db ChukaTaisenUnitLevel2Growth 4509 db ChukaTaisenUnitLevel2Damage 4510 db RangedMonster 4511 db "Sun Wukong",255," "4513Monster184Table: 4514 dw Monster184Idle4515 dw Monster184Move4516 dw GeneralMonsterAttackPatternRight4517 dw GeneralMonsterAttackPatternLeft4518 dw GeneralMonsterAttackPatternLeftUp4519 dw GeneralMonsterAttackPatternLeftDown4520 dw GeneralMonsterAttackPatternRightUp4521 dw GeneralMonsterAttackPatternRightDown4522 db BattleMonsterSpriteSheet16Block4523 db 32 4524 db 40+08 4525 db ChukaTaisenUnitLevel3CostGold 4526 db ChukaTaisenUnitLevel3CostGems 4527 db ChukaTaisenUnitLevel3CostRubies 4528 db ChukaTaisenUnitLevel3HP 4529 db ChukaTaisenUnitLevel3Speed 4530 db ChukaTaisenUnitLevel3Attack 4531 db ChukaTaisenUnitLevel3Defense 4532 db ChukaTaisenUnitLevel3Growth 4533 db ChukaTaisenUnitLevel3Damage 4534 db 000 4535 db "Shock Scout",2554536 4537Monster185Table: 4538 dw Monster185Idle4539 dw Monster185Move4540 dw GeneralMonsterAttackPatternRight4541 dw GeneralMonsterAttackPatternLeft4542 dw GeneralMonsterAttackPatternLeftUp4543 dw GeneralMonsterAttackPatternLeftDown4544 dw GeneralMonsterAttackPatternRightUp4545 dw GeneralMonsterAttackPatternRightDown4546 db BattleMonsterSpriteSheet16Block4547 db 32 4548 db 40+08 4549 db ChukaTaisenUnitLevel4CostGold 4550 db ChukaTaisenUnitLevel4CostGems 4551 db ChukaTaisenUnitLevel4CostRubies 4552 db ChukaTaisenUnitLevel4HP 4553 db ChukaTaisenUnitLevel4Speed 4554 db ChukaTaisenUnitLevel4Attack 4555 db ChukaTaisenUnitLevel4Defense 4556 db ChukaTaisenUnitLevel4Growth 4557 db ChukaTaisenUnitLevel4Damage 4558 db 000 4559 db "Evil Hermit",2554561Monster186Table: 4562 dw Monster186Idle4563 dw Monster186Move4564 dw GeneralMonsterAttackPatternRight4565 dw GeneralMonsterAttackPatternLeft4566 dw GeneralMonsterAttackPatternLeftUp4567 dw GeneralMonsterAttackPatternLeftDown4568 dw GeneralMonsterAttackPatternRightUp4569 dw GeneralMonsterAttackPatternRightDown4570 db BattleMonsterSpriteSheet16Block4571 db 32 4572 db 40+08 4573 db ChukaTaisenUnitLevel5CostGold 4574 db ChukaTaisenUnitLevel5CostGems 4575 db ChukaTaisenUnitLevel5CostRubies 4576 db ChukaTaisenUnitLevel5HP 4577 db ChukaTaisenUnitLevel5Speed 4578 db ChukaTaisenUnitLevel5Attack 4579 db ChukaTaisenUnitLevel5Defense 4580 db ChukaTaisenUnitLevel5Growth 4581 db ChukaTaisenUnitLevel5Damage 4582 db 000 4583 db "Bad Buddha",255," "4585Monster187Table: 4586 dw Monster187Idle4587 dw Monster187Move4588 dw GeneralMonsterAttackPatternRight4589 dw GeneralMonsterAttackPatternLeft4590 dw GeneralMonsterAttackPatternLeftUp4591 dw GeneralMonsterAttackPatternLeftDown4592 dw GeneralMonsterAttackPatternRightUp4593 dw GeneralMonsterAttackPatternRightDown4594 db BattleMonsterSpriteSheet15Block4595 db 32 4596 db 40+08 4597 db ChukaTaisenUnitLevel6CostGold 4598 db ChukaTaisenUnitLevel6CostGems 4599 db ChukaTaisenUnitLevel6CostRubies 4600 db ChukaTaisenUnitLevel6HP 4601 db ChukaTaisenUnitLevel6Speed 4602 db ChukaTaisenUnitLevel6Attack 4603 db ChukaTaisenUnitLevel6Defense 4604 db ChukaTaisenUnitLevel6Growth 4605 db ChukaTaisenUnitLevel6Damage 4606 db 000 4607 db "Dualhorn",255,"   "46094610GeneralMonsterAttackPatternRight:4611 db 000,003,ShowBeingHitSprite,007,000,InitiateAttack4612GeneralMonsterAttackPatternLeft:4613 db 000,007,ShowBeingHitSprite,003,000,InitiateAttack4614GeneralMonsterAttackPatternLeftUp:4615 db 000,008,ShowBeingHitSprite,004,000,InitiateAttack4616GeneralMonsterAttackPatternLeftDown:4617 db 000,006,ShowBeingHitSprite,002,000,InitiateAttack4618GeneralMonsterAttackPatternRightUp:4619 db 000,002,ShowBeingHitSprite,006,000,InitiateAttack4620GeneralMonsterAttackPatternRightDown:4621 db 000,004,ShowBeingHitSprite,008,000,InitiateAttack46224625RIdle1Monster001: equ $4000 + (000*128) + (000/2) - 1284626RIdle2Monster001: equ $4000 + (000*128) + (016/2) - 1284627RIdle3Monster001: equ $4000 + (000*128) + (032/2) - 1284628RIdle4Monster001: equ $4000 + (000*128) + (048/2) - 1284630LIdle1Monster001: equ $4000 + (000*128) + (112/2) - 1284631LIdle2Monster001: equ $4000 + (000*128) + (096/2) - 1284632LIdle3Monster001: equ $4000 + (000*128) + (080/2) - 1284633LIdle4Monster001: equ $4000 + (000*128) + (064/2) - 1284635Monster001Move: 4636Monster001Idle:4637 db 3 4638 db 6 4639 dw RIdle1Monster0014640 dw RIdle2Monster0014641 dw RIdle3Monster0014642 dw RIdle4Monster0014643 dw RIdle3Monster0014644 dw RIdle2Monster0014645 4646 dw LIdle1Monster0014647 dw LIdle2Monster0014648 dw LIdle3Monster0014649 dw LIdle4Monster0014650 dw LIdle3Monster0014651 dw LIdle2Monster00146524654RIdle1Monster002: equ $4000 + (000*128) + (128/2) - 1284655RIdle2Monster002: equ $4000 + (000*128) + (144/2) - 1284656RIdle3Monster002: equ $4000 + (000*128) + (160/2) - 1284657RIdle4Monster002: equ $4000 + (000*128) + (176/2) - 1284659LIdle1Monster002: equ $4000 + (000*128) + (240/2) - 1284660LIdle2Monster002: equ $4000 + (000*128) + (224/2) - 1284661LIdle3Monster002: equ $4000 + (000*128) + (208/2) - 1284662LIdle4Monster002: equ $4000 + (000*128) + (192/2) - 1284664Monster002Move: 4665Monster002Idle:4666 db 3 4667 db 6 4668 dw RIdle1Monster0024669 dw RIdle2Monster0024670 dw RIdle3Monster0024671 dw RIdle4Monster0024672 dw RIdle3Monster0024673 dw RIdle2Monster0024674 4675 dw LIdle1Monster0024676 dw LIdle2Monster0024677 dw LIdle3Monster0024678 dw LIdle4Monster0024679 dw LIdle3Monster0024680 dw LIdle2Monster00246814683RIdle1Monster003: equ $4000 + (032*128) + (000/2) - 1284684RIdle2Monster003: equ $4000 + (032*128) + (016/2) - 1284685RIdle3Monster003: equ $4000 + (032*128) + (032/2) - 1284686RIdle4Monster003: equ $4000 + (032*128) + (048/2) - 1284688LIdle1Monster003: equ $4000 + (032*128) + (112/2) - 1284689LIdle2Monster003: equ $4000 + (032*128) + (096/2) - 1284690LIdle3Monster003: equ $4000 + (032*128) + (080/2) - 1284691LIdle4Monster003: equ $4000 + (032*128) + (064/2) - 1284693Monster003Move: 4694Monster003Idle:4695 db 5 4696 db 6 4697 dw RIdle1Monster0034698 dw RIdle2Monster0034699 dw RIdle3Monster0034700 dw RIdle4Monster0034701 dw RIdle3Monster0034702 dw RIdle2Monster0034703 4704 dw LIdle1Monster0034705 dw LIdle2Monster0034706 dw LIdle3Monster0034707 dw LIdle4Monster0034708 dw LIdle3Monster0034709 dw LIdle2Monster00347104712RIdle1Monster004: equ $4000 + (032*128) + (128/2) - 1284713RIdle2Monster004: equ $4000 + (032*128) + (144/2) - 1284714RIdle3Monster004: equ $4000 + (032*128) + (160/2) - 1284715RIdle4Monster004: equ $4000 + (032*128) + (176/2) - 1284717LIdle1Monster004: equ $4000 + (032*128) + (240/2) - 1284718LIdle2Monster004: equ $4000 + (032*128) + (224/2) - 1284719LIdle3Monster004: equ $4000 + (032*128) + (208/2) - 1284720LIdle4Monster004: equ $4000 + (032*128) + (192/2) - 1284722Monster004Move: 4723Monster004Idle:4724 db 4 4725 db 6 4726 dw RIdle1Monster0044727 dw RIdle2Monster0044728 dw RIdle3Monster0044729 dw RIdle4Monster0044730 dw RIdle3Monster0044731 dw RIdle2Monster0044732 4733 dw LIdle1Monster0044734 dw LIdle2Monster0044735 dw LIdle3Monster0044736 dw LIdle4Monster0044737 dw LIdle3Monster0044738 dw LIdle2Monster00447394742RIdle1Monster005: equ $4000 + (064*128) + (000/2) - 1284743RIdle2Monster005: equ $4000 + (064*128) + (016/2) - 1284745LIdle1Monster005: equ $4000 + (064*128) + (032/2) - 1284746LIdle2Monster005: equ $4000 + (064*128) + (048/2) - 1284748Monster005Move: 4749Monster005Idle:4750 db 3 4751 db 2 4752 dw RIdle1Monster0054753 dw RIdle2Monster0054754 4755 dw LIdle1Monster0054756 dw LIdle2Monster00547574760RIdle1Monster006: equ $4000 + (068*128) + (064/2) - 1284761RIdle2Monster006: equ $4000 + (068*128) + (080/2) - 1284763LIdle1Monster006: equ $4000 + (068*128) + (096/2) - 1284764LIdle2Monster006: equ $4000 + (068*128) + (112/2) - 1284766Monster006Move: 4767Monster006Idle:4768 db 4 4769 db 2 4770 dw RIdle1Monster0064771 dw RIdle2Monster0064772 4773 dw LIdle1Monster0064774 dw LIdle2Monster00647754778RIdle1Monster007: equ $4000 + (064*128) + (128/2) - 128 4779RIdle2Monster007: equ $4000 + (064*128) + (144/2) - 128 4780Rattack1Monster007: equ $4000 + (064*128) + (160/2) - 128 4782LIdle1Monster007: equ $4000 + (064*128) + (208/2) - 128 4783LIdle2Monster007: equ $4000 + (064*128) + (192/2) - 128 4784Lattack1Monster007: equ $4000 + (064*128) + (176/2) - 128 4786Monster007Move: 4787Monster007Idle:4788 db 4 4789 db 2 4790 dw RIdle1Monster0074791 dw RIdle2Monster0074792 4793 dw LIdle1Monster0074794 dw LIdle2Monster0074796Monster007AttackPatternRight:4797 db AnimateAttack | dw Rattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile4798Monster007AttackPatternLeft:4799 db AnimateAttack | dw Lattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile48004803RIdle1Monster008: equ $4000 + (064*128) + (224/2) - 128 4804RIdle2Monster008: equ $4000 + (064*128) + (240/2) - 128 4805Rattack1Monster008: equ $4000 + (088*128) + (000/2) - 128 4807LIdle1Monster008: equ $4000 + (088*128) + (048/2) - 128 4808LIdle2Monster008: equ $4000 + (088*128) + (032/2) - 128 4809Lattack1Monster008: equ $4000 + (088*128) + (016/2) - 128 4811Monster008Move: 4812Monster008Idle:4813 db 4 4814 db 2 4815 dw RIdle1Monster0084816 dw RIdle2Monster0084817 4818 dw LIdle1Monster0084819 dw LIdle2Monster0084821Monster008AttackPatternRight:4822 db AnimateAttack | dw Rattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile4823Monster008AttackPatternLeft:4824 db AnimateAttack | dw Lattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile48254828RIdle1Monster009: equ $4000 + (088*128) + (064/2) - 128 4829RIdle2Monster009: equ $4000 + (088*128) + (080/2) - 128 4831LIdle1Monster009: equ $4000 + (088*128) + (096/2) - 128 4832LIdle2Monster009: equ $4000 + (088*128) + (112/2) - 128 4834Monster009Move: 4835Monster009Idle:4836 db 4 4837 db 2 4838 dw RIdle1Monster0094839 dw RIdle2Monster0094840 4841 dw LIdle1Monster0094842 dw LIdle2Monster00948434846RIdle1Monster010: equ $4000 + (088*128) + (128/2) - 128 4847RIdle2Monster010: equ $4000 + (088*128) + (144/2) - 128 4849LIdle1Monster010: equ $4000 + (088*128) + (176/2) - 128 4850LIdle2Monster010: equ $4000 + (088*128) + (160/2) - 128 4852Monster010Move: 4853Monster010Idle:4854 db 4 4855 db 2 4856 dw RIdle1Monster0104857 dw RIdle2Monster0104858 4859 dw LIdle1Monster0104860 dw LIdle2Monster01048614864RIdle1Monster011: equ $4000 + (088*128) + (192/2) - 128 4865RIdle2Monster011: equ $4000 + (088*128) + (208/2) - 128 4867LIdle1Monster011: equ $4000 + (088*128) + (224/2) - 128 4868LIdle2Monster011: equ $4000 + (088*128) + (240/2) - 128 4870Monster011Move: 4871Monster011Idle:4872 db 4 4873 db 2 4874 dw RIdle1Monster0114875 dw RIdle2Monster0114876 4877 dw LIdle1Monster0114878 dw LIdle2Monster01148794882RIdle1Monster012: equ $4000 + (112*128) + (000/2) - 128 4883RIdle2Monster012: equ $4000 + (112*128) + (016/2) - 128 4885LIdle1Monster012: equ $4000 + (112*128) + (048/2) - 128 4886LIdle2Monster012: equ $4000 + (112*128) + (032/2) - 128 4888Monster012Move: 4889Monster012Idle:4890 db 4 4891 db 2 4892 dw RIdle1Monster0124893 dw RIdle2Monster0124894 4895 dw LIdle1Monster0124896 dw LIdle2Monster01248974900RIdle1Monster013: equ $4000 + (112*128) + (064/2) - 128 4901RIdle2Monster013: equ $4000 + (112*128) + (080/2) - 128 4902RIdle3Monster013: equ $4000 + (112*128) + (096/2) - 128 4904LIdle1Monster013: equ $4000 + (112*128) + (144/2) - 128 4905LIdle2Monster013: equ $4000 + (112*128) + (128/2) - 128 4906LIdle3Monster013: equ $4000 + (112*128) + (112/2) - 128 4908Monster013Move: 4909Monster013Idle:4910 db 4 4911 db 4 4912 dw RIdle1Monster0134913 dw RIdle2Monster0134914 dw RIdle3Monster0134915 dw RIdle2Monster0134916 4917 dw LIdle1Monster0134918 dw LIdle2Monster0134919 dw LIdle3Monster0134920 dw LIdle2Monster01349214924RIdle1Monster014: equ $4000 + (112*128) + (160/2) - 128 4925RIdle2Monster014: equ $4000 + (112*128) + (176/2) - 128 4927LIdle1Monster014: equ $4000 + (112*128) + (208/2) - 128 4928LIdle2Monster014: equ $4000 + (112*128) + (192/2) - 128 4930Monster014Move: 4931Monster014Idle:4932 db 4 4933 db 2 4934 dw RIdle1Monster0144935 dw RIdle2Monster0144936 4937 dw LIdle1Monster0144938 dw LIdle2Monster01449394942RIdle1Monster015: equ $4000 + (112*128) + (224/2) - 128 4943RIdle2Monster015: equ $4000 + (112*128) + (240/2) - 128 4945LIdle1Monster015: equ $4000 + (136*128) + (000/2) - 128 4946LIdle2Monster015: equ $4000 + (136*128) + (016/2) - 128 4948Monster015Move: 4949Monster015Idle:4950 db 4 4951 db 2 4952 dw RIdle1Monster0154953 dw RIdle2Monster0154954 4955 dw LIdle1Monster0154956 dw LIdle2Monster01549574960RIdle1Monster016: equ $4000 + (068*128) + (000/2) - 128 4961RIdle2Monster016: equ $4000 + (068*128) + (064/2) - 128 4963LIdle1Monster016: equ $4000 + (068*128) + (128/2) - 128 4964LIdle2Monster016: equ $4000 + (068*128) + (192/2) - 128 4966Monster016Move: 4967Monster016Idle:4968 db 4 4969 db 2 4970 dw RIdle1Monster0164971 dw RIdle2Monster0164972 4973 dw LIdle1Monster0164974 dw LIdle2Monster01649754978RIdle1Monster017: equ $4000 + (136*128) + (032/2) - 128 4979RIdle2Monster017: equ $4000 + (136*128) + (064/2) - 128 4981LIdle1Monster017: equ $4000 + (136*128) + (128/2) - 128 4982LIdle2Monster017: equ $4000 + (136*128) + (096/2) - 128 4984Monster017Move: 4985Monster017Idle:4986 db 4 4987 db 2 4988 dw RIdle1Monster0174989 dw RIdle2Monster0174990 4991 dw LIdle1Monster0174992 dw LIdle2Monster01749934995RIdle1Monster018: equ $4000 + (136*128) + (160/2) - 128 4996RIdle2Monster018: equ $4000 + (136*128) + (192/2) - 128 4997RIdle3Monster018: equ $4000 + (136*128) + (224/2) - 128 4998RAttack1Monster018: equ $4000 + (176*128) + (000/2) - 128 5000LIdle1Monster018: equ $4000 + (176*128) + (128/2) - 128 5001LIdle2Monster018: equ $4000 + (176*128) + (096/2) - 128 5002LIdle3Monster018: equ $4000 + (176*128) + (064/2) - 128 5003LAttack1Monster018: equ $4000 + (176*128) + (032/2) - 128 5005Monster018Move: 5006Monster018Idle:5007 db 4 5008 db 3 5009 dw RIdle1Monster0185010 dw RIdle2Monster0185011 dw RIdle3Monster0185012 5013 dw LIdle1Monster0185014 dw LIdle2Monster0185015 dw LIdle3Monster0185017Monster018AttackPatternRight:5018 db 000,003,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,007,InitiateAttack5019Monster018AttackPatternRightUp:5020 db 000,008,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,004,InitiateAttack5021Monster018AttackPatternRightDown:5022 db 000,006,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,002,InitiateAttack5024Monster018AttackPatternLeft:5025 db 000,007,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,003,InitiateAttack5026Monster018AttackPatternLeftUp:5027 db 000,002,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,006,InitiateAttack5028Monster018AttackPatternLeftDown:5029 db 000,004,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,008,InitiateAttack50305033RIdle1Monster019: equ $4000 + (176*128) + (160/2) - 128 5034RIdle2Monster019: equ $4000 + (176*128) + (176/2) - 128 5036LIdle1Monster019: equ $4000 + (176*128) + (208/2) - 128 5037LIdle2Monster019: equ $4000 + (176*128) + (192/2) - 128 5039Monster019Move: 5040Monster019Idle:5041 db 4 5042 db 2 5043 dw RIdle1Monster0195044 dw RIdle2Monster0195045 5046 dw LIdle1Monster0195047 dw LIdle2Monster01950485051RIdle1Monster020: equ $4000 + (136*128) + (000/2) - 128 5052RIdle2Monster020: equ $4000 + (136*128) + (016/2) - 128 5053RIdle3Monster020: equ $4000 + (136*128) + (032/2) - 128 5055LIdle1Monster020: equ $4000 + (136*128) + (080/2) - 128 5056LIdle2Monster020: equ $4000 + (136*128) + (064/2) - 128 5057LIdle3Monster020: equ $4000 + (136*128) + (048/2) - 128 5059Monster020Move: 5060Monster020Idle:5061 db 4 5062 db 4 5063 dw RIdle1Monster0205064 dw RIdle2Monster0205065 dw RIdle3Monster0205066 dw RIdle2Monster0205067 5068 dw LIdle1Monster0205069 dw LIdle2Monster0205070 dw LIdle3Monster0205071 dw LIdle2Monster02050725075RIdle1Monster021: equ $4000 + (176*128) + (224/2) - 128 5076RIdle2Monster021: equ $4000 + (176*128) + (240/2) - 128 5077RIdle3Monster021: equ $4000 + (216*128) + (000/2) - 128 5078RAttack1Monster021: equ $4000 + (216*128) + (016/2) - 128 5079RAttack2Monster021: equ $4000 + (216*128) + (048/2) - 128 5081LIdle1Monster021: equ $4000 + (216*128) + (176/2) - 128 5082LIdle2Monster021: equ $4000 + (216*128) + (160/2) - 128 5083LIdle3Monster021: equ $4000 + (216*128) + (144/2) - 128 5084LAttack1Monster021: equ $4000 + (216*128) + (112/2) - 128 5085LAttack2Monster021: equ $4000 + (216*128) + (080/2) - 128 5087Monster021Move: 5088Monster021Idle:5089 db 4 5090 db 4 5091 dw RIdle1Monster0215092 dw RIdle2Monster0215093 dw RIdle3Monster0215094 dw RIdle2Monster0215095 5096 dw LIdle1Monster0215097 dw LIdle2Monster0215098 dw LIdle3Monster0215099 dw LIdle2Monster0215101Monster021AttackPatternRight:5102 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 003,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 007,128+16,AnimateAttack | dw RIdle1Monster021 | db 000,InitiateAttack5103Monster021AttackPatternRightUp:5104 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 008,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 004,InitiateAttack5105Monster021AttackPatternRightDown:5106 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 006,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 002,InitiateAttack5108Monster021AttackPatternLeft:5109 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,000,AnimateAttack | dw Lattack2Monster021 | db 007,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 003,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,000,InitiateAttack5110Monster021AttackPatternLeftUp:5111 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,002,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,006,InitiateAttack5112Monster021AttackPatternLeftDown:5113 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,004,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,008,InitiateAttack51145117RIdle1Monster022: equ $4000 + (024*128) + (240/2) - 128 5118RIdle2Monster022: equ $4000 + (080*128) + (048/2) - 128 5120LIdle1Monster022: equ $4000 + (080*128) + (080/2) - 128 5121LIdle2Monster022: equ $4000 + (080*128) + (064/2) - 128 5123Monster022Move: 5124Monster022Idle:5125 db 6 5126 db 2 5127 dw RIdle1Monster0225128 dw RIdle2Monster0225129 5130 dw LIdle1Monster0225131 dw LIdle2Monster02251325135RIdle1Monster023: equ $4000 + (000*128) + (240/2) - 128 5136RIdle2Monster023: equ $4000 + (056*128) + (048/2) - 128 5137RAttack1Monster023: equ $4000 + (056*128) + (064/2) - 128 5138RAttack2Monster023: equ $4000 + (056*128) + (080/2) - 128 5139RAttack3Monster023: equ $4000 + (056*128) + (096/2) - 128 5141LIdle1Monster023: equ $4000 + (056*128) + (176/2) - 128 5142LIdle2Monster023: equ $4000 + (056*128) + (160/2) - 128 5143LAttack1Monster023: equ $4000 + (056*128) + (144/2) - 128 5144LAttack2Monster023: equ $4000 + (056*128) + (128/2) - 128 5145LAttack3Monster023: equ $4000 + (056*128) + (112/2) - 128 5147Monster023Move: 5148Monster023Idle:5149 db 6 5150 db 2 5151 dw RIdle1Monster0235152 dw RIdle2Monster0235153 5154 dw LIdle1Monster0235155 dw LIdle2Monster0235157Monster023AttackPatternRight:5158 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,003,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,007,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5159Monster023AttackPatternRightUp:5160 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,002,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,006,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5161Monster023AttackPatternRightDown:5162 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,004,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,008,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5163Monster023AttackPatternLeft:5164 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,007,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,003,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5165Monster023AttackPatternLeftUp:5166 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,008,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,004,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5167Monster023AttackPatternLeftDown:5168 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,006,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,002,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack51695172RIdle1Monster024: equ $4000 + (000*128) + (000/2) - 128 5173RIdle2Monster024: equ $4000 + (000*128) + (048/2) - 128 5174RIdle3Monster024: equ $4000 + (000*128) + (096/2) - 128 5176LIdle1Monster024: equ $4000 + (056*128) + (000/2) - 128 5177LIdle2Monster024: equ $4000 + (000*128) + (192/2) - 128 5178LIdle3Monster024: equ $4000 + (000*128) + (144/2) - 128 5180Monster024Move: 5181Monster024Idle:5182 db 4 5183 db 4 5184 dw RIdle1Monster0245185 dw RIdle2Monster0245186 dw RIdle3Monster0245187 dw RIdle2Monster0245188 5189 dw LIdle1Monster0245190 dw LIdle2Monster0245191 dw LIdle3Monster0245192 dw LIdle2Monster02451935196RIdle1Monster025: equ $4000 + (112*128) + (000/2) - 128 5197RIdle2Monster025: equ $4000 + (112*128) + (016/2) - 128 5198RAttack1Monster025: equ $4000 + (112*128) + (032/2) - 128 5200LIdle1Monster025: equ $4000 + (112*128) + (080/2) - 128 5201LIdle2Monster025: equ $4000 + (112*128) + (064/2) - 128 5202LAttack1Monster025: equ $4000 + (112*128) + (048/2) - 128 5204Monster025Move: 5205Monster025Idle:5206 db 8 5207 db 2 5208 dw RIdle1Monster0255209 dw RIdle2Monster0255210 5211 dw LIdle1Monster0255212 dw LIdle2Monster0255216Monster025AttackPatternRight:5217 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,003,ShowBeingHitSprite,000,007,000,000,InitiateAttack5218Monster025AttackPatternRightUp:5219 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,002,ShowBeingHitSprite,000,006,000,000,InitiateAttack5220Monster025AttackPatternRightDown:5221 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,004,ShowBeingHitSprite,000,008,000,000,InitiateAttack5222Monster025AttackPatternLeft:5223 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,007,ShowBeingHitSprite,000,003,000,000,InitiateAttack5224Monster025AttackPatternLeftUp:5225 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,008,ShowBeingHitSprite,000,004,000,000,InitiateAttack5226Monster025AttackPatternLeftDown:5227 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,006,ShowBeingHitSprite,000,002,000,000,InitiateAttack52325235RIdle1Monster026: equ $4000 + (184*128) + (000/2) - 128 5236RIdle2Monster026: equ $4000 + (184*128) + (016/2) - 128 5237RAttack1Monster026: equ $4000 + (184*128) + (032/2) - 128 5238RAttack2Monster026: equ $4000 + (184*128) + (064/2) - 128 5240LIdle1Monster026: equ $4000 + (184*128) + (176/2) - 128 5241LIdle2Monster026: equ $4000 + (184*128) + (160/2) - 128 5242LAttack1Monster026: equ $4000 + (184*128) + (128/2) - 128 5243LAttack2Monster026: equ $4000 + (184*128) + (096/2) - 128 5245Monster026Move: 5246Monster026Idle:5247 db 7 5248 db 2 5249 dw RIdle1Monster0265250 dw RIdle2Monster0265251 5252 dw LIdle1Monster0265253 dw LIdle2Monster0265254Monster026AttackPatternRight:5255 db AnimateAttack | dw Rattack1Monster026 | db 128+32,000,000,AnimateAttack | dw Rattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster026 | db 128+16,WaitImpactProjectile5256Monster026AttackPatternLeft:5257 db AnimateAttack | dw Lattack1Monster026 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw Lattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster026 | db 128+16,DisplaceRight,WaitImpactProjectile 52585261RIdle1Monster027: equ $4000 + (056*128) + (192/2) - 128 5262RIdle2Monster027: equ $4000 + (056*128) + (208/2) - 128 5264LIdle1Monster027: equ $4000 + (056*128) + (240/2) - 128 5265LIdle2Monster027: equ $4000 + (056*128) + (224/2) - 128 5267Monster027Move: 5268Monster027Idle:5269 db 7 5270 db 2 5271 dw RIdle1Monster0275272 dw RIdle2Monster0275273 5274 dw LIdle1Monster0275275 dw LIdle2Monster02752765279RIdle1Monster028: equ $4000 + (080*128) + (096/2) - 128 5280RIdle2Monster028: equ $4000 + (080*128) + (112/2) - 128 5282LIdle1Monster028: equ $4000 + (080*128) + (144/2) - 128 5283LIdle2Monster028: equ $4000 + (080*128) + (128/2) - 128 5285Monster028Move: 5286Monster028Idle:5287 db 7 5288 db 2 5289 dw RIdle1Monster0285290 dw RIdle2Monster0285291 5292 dw LIdle1Monster0285293 dw LIdle2Monster02852945297RIdle1Monster029: equ $4000 + (080*128) + (160/2) - 128 5298RIdle2Monster029: equ $4000 + (080*128) + (176/2) - 128 5300LIdle1Monster029: equ $4000 + (080*128) + (208/2) - 128 5301LIdle2Monster029: equ $4000 + (080*128) + (192/2) - 128 5303Monster029Move: 5304Monster029Idle:5305 db 7 5306 db 2 5307 dw RIdle1Monster0295308 dw RIdle2Monster0295309 5310 dw LIdle1Monster0295311 dw LIdle2Monster02953125315RIdle1Monster030: equ $4000 + (080*128) + (224/2) - 128 5316RIdle2Monster030: equ $4000 + (080*128) + (240/2) - 128 5318LIdle1Monster030: equ $4000 + (104*128) + (112/2) - 128 5319LIdle2Monster030: equ $4000 + (104*128) + (096/2) - 128 5321Monster030Move: 5322Monster030Idle:5323 db 7 5324 db 2 5325 dw RIdle1Monster0305326 dw RIdle2Monster0305327 5328 dw LIdle1Monster0305329 dw LIdle2Monster03053305333RIdle1Monster031: equ $4000 + (104*128) + (128/2) - 128 5334RIdle2Monster031: equ $4000 + (104*128) + (144/2) - 128 5336LIdle1Monster031: equ $4000 + (104*128) + (176/2) - 128 5337LIdle2Monster031: equ $4000 + (104*128) + (160/2) - 128 5339Monster031Move: 5340Monster031Idle:5341 db 7 5342 db 2 5343 dw RIdle1Monster0315344 dw RIdle2Monster0315345 5346 dw LIdle1Monster0315347 dw LIdle2Monster03153485351RIdle1Monster032: equ $4000 + (104*128) + (192/2) - 128 5352RIdle2Monster032: equ $4000 + (104*128) + (208/2) - 128 5354LIdle1Monster032: equ $4000 + (104*128) + (240/2) - 128 5355LIdle2Monster032: equ $4000 + (104*128) + (224/2) - 128 5357Monster032Move: 5358Monster032Idle:5359 db 7 5360 db 2 5361 dw RIdle1Monster0325362 dw RIdle2Monster0325363 5364 dw LIdle1Monster0325365 dw LIdle2Monster03253665369RIdle1Monster033: equ $4000 + (128*128) + (096/2) - 128 5370RIdle2Monster033: equ $4000 + (128*128) + (112/2) - 128 5372LIdle1Monster033: equ $4000 + (128*128) + (144/2) - 128 5373LIdle2Monster033: equ $4000 + (128*128) + (128/2) - 128 5375Monster033Move: 5376Monster033Idle:5377 db 7 5378 db 2 5379 dw RIdle1Monster0335380 dw RIdle2Monster0335381 5382 dw LIdle1Monster0335383 dw LIdle2Monster03353845387RIdle1Monster034: equ $4000 + (128*128) + (160/2) - 128 5388RIdle2Monster034: equ $4000 + (128*128) + (176/2) - 128 5390LIdle1Monster034: equ $4000 + (128*128) + (208/2) - 128 5391LIdle2Monster034: equ $4000 + (128*128) + (192/2) - 128 5393Monster034Move: 5394Monster034Idle:5395 db 7 5396 db 2 5397 dw RIdle1Monster0345398 dw RIdle2Monster0345399 5400 dw LIdle1Monster0345401 dw LIdle2Monster03454025405RIdle1Monster035: equ $4000 + (128*128) + (224/2) - 128 5406RIdle2Monster035: equ $4000 + (128*128) + (240/2) - 128 5408LIdle1Monster035: equ $4000 + (152*128) + (000/2) - 128 5409LIdle2Monster035: equ $4000 + (152*128) + (016/2) - 128 5411Monster035Move: 5412Monster035Idle:5413 db 7 5414 db 2 5415 dw RIdle1Monster0355416 dw RIdle2Monster0355417 5418 dw LIdle1Monster0355419 dw LIdle2Monster0355420Monster035AttackPatternLeft:5421Monster035AttackPatternRight:5422 db ShootProjectile,WaitImpactProjectile54235426RIdle1Monster036: equ $4000 + (216*128) + (000/2) - 128 5427RIdle2Monster036: equ $4000 + (216*128) + (016/2) - 128 5428RIdle3Monster036: equ $4000 + (216*128) + (032/2) - 128 5429RAttack1Monster036: equ $4000 + (216*128) + (048/2) - 128 5431LIdle1Monster036: equ $4000 + (216*128) + (144/2) - 128 5432LIdle2Monster036: equ $4000 + (216*128) + (128/2) - 128 5433LIdle3Monster036: equ $4000 + (216*128) + (112/2) - 128 5434LAttack1Monster036: equ $4000 + (216*128) + (080/2) - 128 5436Monster036Move: 5437Monster036Idle:5438 db 5 5439 db 4 5440 dw RIdle1Monster0365441 dw RIdle2Monster0365442 dw RIdle3Monster0365443 dw RIdle2Monster0365444 5445 dw LIdle1Monster0365446 dw LIdle2Monster0365447 dw LIdle3Monster0365448 dw LIdle2Monster0365449Monster036AttackPatternRight:5450 db 000,AnimateAttack | dw Rattack1Monster036 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster036 | db 128+16,WaitImpactProjectile5451Monster036AttackPatternLeft:5452 db 000,AnimateAttack | dw Lattack1Monster036 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster036 | db DisplaceRight,128+16,WaitImpactProjectile54535456RIdle1Monster037: equ $4000 + (000*128) + (000/2) - 128 5457RIdle2Monster037: equ $4000 + (000*128) + (016/2) - 128 5458RIdle3Monster037: equ $4000 + (000*128) + (032/2) - 128 5459RIdle4Monster037: equ $4000 + (000*128) + (048/2) - 128 5460RAttack1Monster037: equ $4000 + (000*128) + (064/2) - 128 5461RAttack2Monster037: equ $4000 + (000*128) + (096/2) - 128 5463LIdle1Monster037: equ $4000 + (000*128) + (240/2) - 128 5464LIdle2Monster037: equ $4000 + (000*128) + (224/2) - 128 5465LIdle3Monster037: equ $4000 + (000*128) + (208/2) - 128 5466LIdle4Monster037: equ $4000 + (000*128) + (192/2) - 128 5467LAttack1Monster037: equ $4000 + (000*128) + (160/2) - 128 5468LAttack2Monster037: equ $4000 + (000*128) + (128/2) - 128 5470Monster037Move: 5471Monster037Idle:5472 db 4 5473 db 4 5474 dw RIdle1Monster0375475 dw RIdle2Monster0375476 dw RIdle3Monster0375477 dw RIdle4Monster0375478 5479 dw LIdle1Monster0375480 dw LIdle2Monster0375481 dw LIdle3Monster0375482 dw LIdle4Monster0375483Monster037AttackPatternRight:5484 db AnimateAttack | dw Rattack1Monster037 | db 128+32,000,000,000,AnimateAttack | dw Rattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster037 | db 128+16,WaitImpactProjectile5485Monster037AttackPatternLeft:5486 db AnimateAttack | dw Lattack1Monster037 | db 128+32,DisplaceLeft,000,000,000,AnimateAttack | dw Lattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster037 | db DisplaceRight,128+16,WaitImpactProjectile54875490RIdle1Monster038: equ $4000 + (216*128) + (192/2) - 128 5491RIdle2Monster038: equ $4000 + (216*128) + (208/2) - 128 5493LIdle1Monster038: equ $4000 + (216*128) + (240/2) - 128 5494LIdle2Monster038: equ $4000 + (216*128) + (224/2) - 128 5496Monster038Move: 5497Monster038Idle:5498 db 5 5499 db 2 5500 dw RIdle1Monster0385501 dw RIdle2Monster0385502 5503 dw LIdle1Monster0385504 dw LIdle2Monster03855055508RIdle1Monster039: equ $4000 + (040*128) + (000/2) - 128 5509RIdle2Monster039: equ $4000 + (040*128) + (032/2) - 128 5510RIdle3Monster039: equ $4000 + (040*128) + (064/2) - 128 5512LIdle1Monster039: equ $4000 + (040*128) + (160/2) - 128 5513LIdle2Monster039: equ $4000 + (040*128) + (128/2) - 128 5514LIdle3Monster039: equ $4000 + (040*128) + (096/2) - 128 5516Monster039Move: 5517Monster039Idle:5518 db 3 5519 db 5 5520 dw RIdle1Monster0395521 dw RIdle2Monster0395522 dw RIdle2Monster0395523 dw RIdle3Monster0395524 dw RIdle3Monster0395525 5526 dw LIdle1Monster0395527 dw LIdle2Monster0395528 dw LIdle2Monster0395529 dw LIdle3Monster0395530 dw LIdle3Monster0395531Monster039AttackPatternRight:5532 db 000,AnimateAttack | dw RIdle1Monster039 | db ShootProjectile,WaitImpactProjectile5533Monster039AttackPatternLeft:5534 db 000,AnimateAttack | dw LIdle1Monster039 | db ShootProjectile,WaitImpactProjectile55355538RIdle1Monster040: equ $4000 + (080*128) + (000/2) - 128 5539RIdle2Monster040: equ $4000 + (080*128) + (032/2) - 128 5540RIdle3Monster040: equ $4000 + (080*128) + (064/2) - 128 5541RAttack1Monster040: equ $4000 + (080*128) + (096/2) - 128 5543LIdle1Monster040: equ $4000 + (080*128) + (224/2) - 128 5544LIdle2Monster040: equ $4000 + (080*128) + (192/2) - 128 5545LIdle3Monster040: equ $4000 + (080*128) + (160/2) - 128 5546LAttack1Monster040: equ $4000 + (080*128) + (128/2) - 128 5548Monster040Move: 5549Monster040Idle:5550 db 6 5551 db 3 5552 dw RIdle1Monster0405553 dw RIdle2Monster0405554 dw RIdle3Monster0405555 5556 dw LIdle1Monster0405557 dw LIdle2Monster0405558 dw LIdle3Monster0405559Monster040AttackPatternRight:5560 db 000,AnimateAttack | dw Rattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster040 | db WaitImpactProjectile5561Monster040AttackPatternLeft:5562 db 000,AnimateAttack | dw Lattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster040 | db WaitImpactProjectile55635566RIdle1Monster041: equ $4000 + (224*128) + (128/2) - 128 5567RIdle2Monster041: equ $4000 + (224*128) + (160/2) - 128 5569LIdle1Monster041: equ $4000 + (224*128) + (192/2) - 128 5570LIdle2Monster041: equ $4000 + (224*128) + (224/2) - 128 5572Monster041Move: 5573Monster041Idle:5574 db 1 5575 db 2 5576 dw RIdle1Monster0415577 dw RIdle2Monster0415578 5579 dw LIdle1Monster0415580 dw LIdle2Monster04155815584RIdle1Monster042: equ $4000 + (120*128) + (000/2) - 128 5585RIdle2Monster042: equ $4000 + (120*128) + (032/2) - 128 5587LIdle1Monster042: equ $4000 + (120*128) + (064/2) - 128 5588LIdle2Monster042: equ $4000 + (120*128) + (096/2) - 128 5590Monster042Move: 5591Monster042Idle:5592 db 5 5593 db 2 5594 dw RIdle1Monster0425595 dw RIdle2Monster0425596 5597 dw LIdle1Monster0425598 dw LIdle2Monster04255995602RIdle1Monster043: equ $4000 + (216*128) + (160/2) - 128 5603RIdle2Monster043: equ $4000 + (216*128) + (176/2) - 128 5604RIdle3Monster043: equ $4000 + (216*128) + (192/2) - 128 5605RAttack1Monster043: equ $4000 + (176*128) + (192/2) - 128 5607LIdle1Monster043: equ $4000 + (216*128) + (240/2) - 128 5608LIdle2Monster043: equ $4000 + (216*128) + (224/2) - 128 5609LIdle3Monster043: equ $4000 + (216*128) + (208/2) - 128 5610LAttack1Monster043: equ $4000 + (176*128) + (224/2) - 128 5612Monster043Move: 5613Monster043Idle:5614 db 4 5615 db 3 5616 dw RIdle1Monster0435617 dw RIdle2Monster0435618 dw RIdle3Monster0435619 5620 dw LIdle1Monster0435621 dw LIdle2Monster0435622 dw LIdle3Monster0435623Monster043AttackPatternRight:5624 db 000,AnimateAttack | dw Rattack1Monster043 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster043 | db 128+16,WaitImpactProjectile5625Monster043AttackPatternLeft:5626 db 000,AnimateAttack | dw Lattack1Monster043 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster043 | db DisplaceRight,128+16,WaitImpactProjectile56275630RIdle1Monster044: equ $4000 + (120*128) + (128/2) - 128 5631RIdle2Monster044: equ $4000 + (120*128) + (160/2) - 128 5633LIdle1Monster044: equ $4000 + (120*128) + (224/2) - 128 5634LIdle2Monster044: equ $4000 + (120*128) + (192/2) - 128 5636Monster044Move: 5637Monster044Idle:5638 db 6 5639 db 2 5640 dw RIdle1Monster0445641 dw RIdle2Monster0445642 5643 dw LIdle1Monster0445644 dw LIdle2Monster04456455648RIdle1Monster045: equ $4000 + (224*128) + (000/2) - 128 5649RIdle2Monster045: equ $4000 + (224*128) + (032/2) - 128 5651LIdle1Monster045: equ $4000 + (224*128) + (096/2) - 128 5652LIdle2Monster045: equ $4000 + (224*128) + (064/2) - 128 5654Monster045Move: 5655Monster045Idle:5656 db 9 5657 db 2 5658 dw RIdle1Monster0455659 dw RIdle2Monster0455660 5661 dw LIdle1Monster0455662 dw LIdle2Monster04556635666RIdle1Monster046: equ $4000 + (160*128) + (000/2) - 128 5667RIdle2Monster046: equ $4000 + (160*128) + (032/2) - 128 5669LIdle1Monster046: equ $4000 + (160*128) + (096/2) - 128 5670LIdle2Monster046: equ $4000 + (160*128) + (064/2) - 128 5672Monster046Move: 5673Monster046Idle:5674 db 9 5675 db 2 5676 dw RIdle1Monster0465677 dw RIdle2Monster0465678 5679 dw LIdle1Monster0465680 dw LIdle2Monster04656815684RIdle1Monster047: equ $4000 + (176*128) + (000/2) - 128 5685RIdle2Monster047: equ $4000 + (176*128) + (032/2) - 128 5686RIdle3Monster047: equ $4000 + (176*128) + (064/2) - 128 5688LIdle1Monster047: equ $4000 + (176*128) + (160/2) - 128 5689LIdle2Monster047: equ $4000 + (176*128) + (128/2) - 128 5690LIdle3Monster047: equ $4000 + (176*128) + (096/2) - 128 5692Monster047Move: 5693Monster047Idle:5694 db 13 5695 db 4 5696 dw RIdle1Monster0475697 dw RIdle2Monster0475698 dw RIdle1Monster0475699 dw RIdle3Monster0475700 5701 dw LIdle1Monster0475702 dw LIdle2Monster0475703 dw LIdle1Monster0475704 dw LIdle3Monster0475705Monster047AttackPatternRight:5706 db 000,AnimateAttack | dw RIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile5707Monster047AttackPatternLeft:5708 db 000,AnimateAttack | dw LIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile57095712RIdle1Monster048: equ $4000 + (136*128) + (096/2) - 128 5713RIdle2Monster048: equ $4000 + (136*128) + (112/2) - 128 5714RIdle3Monster048: equ $4000 + (136*128) + (128/2) - 128 5715RIdle4Monster048: equ $4000 + (136*128) + (144/2) - 128 5716RIdle5Monster048: equ $4000 + (136*128) + (160/2) - 128 5718LIdle1Monster048: equ $4000 + (136*128) + (240/2) - 128 5719LIdle2Monster048: equ $4000 + (136*128) + (224/2) - 128 5720LIdle3Monster048: equ $4000 + (136*128) + (208/2) - 128 5721LIdle4Monster048: equ $4000 + (136*128) + (192/2) - 128 5722LIdle5Monster048: equ $4000 + (136*128) + (176/2) - 128 5724Monster048Move: 5725Monster048Idle:5726 db 05 5727 db 8 5728 dw RIdle1Monster0485729 dw RIdle2Monster0485730 dw RIdle3Monster0485731 dw RIdle4Monster0485732 dw RIdle5Monster0485733 dw RIdle4Monster0485734 dw RIdle3Monster0485735 dw RIdle2Monster0485736 5737 dw LIdle1Monster0485738 dw LIdle2Monster0485739 dw LIdle3Monster0485740 dw LIdle4Monster0485741 dw LIdle5Monster0485742 dw LIdle4Monster0485743 dw LIdle3Monster0485744 dw LIdle2Monster04857455748RIdle1Monster049: equ $4000 + (224*128) + (000/2) - 128 5749RIdle2Monster049: equ $4000 + (224*128) + (016/2) - 128 5750RAttack1Monster049: equ $4000 + (224*128) + (032/2) - 128 5752LIdle1Monster049: equ $4000 + (224*128) + (080/2) - 128 5753LIdle2Monster049: equ $4000 + (224*128) + (064/2) - 128 5754LAttack1Monster049: equ $4000 + (224*128) + (048/2) - 128 5756Monster049Move: 5757Monster049Idle:5758 db 06 5759 db 2 5760 dw RIdle1Monster0495761 dw RIdle2Monster0495762 5763 dw LIdle1Monster0495764 dw LIdle2Monster0495765Monster049AttackPatternRight:5766 db AnimateAttack | dw Rattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile5767Monster049AttackPatternLeft:5768 db AnimateAttack | dw Lattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile57705773RIdle1Monster050: equ $4000 + (184*128) + (128/2) - 128 5774RIdle2Monster050: equ $4000 + (184*128) + (144/2) - 128 5776LIdle1Monster050: equ $4000 + (184*128) + (176/2) - 128 5777LIdle2Monster050: equ $4000 + (184*128) + (160/2) - 128 5779Monster050Move: 5780Monster050Idle:5781 db 06 5782 db 2 5783 dw RIdle1Monster0505784 dw RIdle2Monster0505785 5786 dw LIdle1Monster0505787 dw LIdle2Monster05057885791RIdle1Monster051: equ $4000 + (160*128) + (128/2) - 128 5792RIdle2Monster051: equ $4000 + (160*128) + (144/2) - 128 5794LIdle1Monster051: equ $4000 + (160*128) + (176/2) - 128 5795LIdle2Monster051: equ $4000 + (160*128) + (160/2) - 128 5797Monster051Move: 5798Monster051Idle:5799 db 06 5800 db 2 5801 dw RIdle1Monster0515802 dw RIdle2Monster0515803 5804 dw LIdle1Monster0515805 dw LIdle2Monster05158065809RIdle1Monster052: equ $4000 + (160*128) + (192/2) - 128 5810RIdle2Monster052: equ $4000 + (160*128) + (208/2) - 128 5812LIdle1Monster052: equ $4000 + (160*128) + (240/2) - 128 5813LIdle2Monster052: equ $4000 + (160*128) + (224/2) - 128 5815Monster052Move: 5816Monster052Idle:5817 db 06 5818 db 2 5819 dw RIdle1Monster0525820 dw RIdle2Monster0525821 5822 dw LIdle1Monster0525823 dw LIdle2Monster05258245827RIdle1Monster053: equ $4000 + (152*128) + (032/2) - 128 5828RIdle2Monster053: equ $4000 + (152*128) + (048/2) - 128 5830LIdle1Monster053: equ $4000 + (152*128) + (080/2) - 128 5831LIdle2Monster053: equ $4000 + (152*128) + (064/2) - 128 5833Monster053Move: 5834Monster053Idle:5835 db 06 5836 db 2 5837 dw RIdle1Monster0535838 dw RIdle2Monster0535839 5840 dw LIdle1Monster0535841 dw LIdle2Monster05358425845RIdle1Monster054: equ $4000 + (184*128) + (192/2) - 128 5846RIdle2Monster054: equ $4000 + (184*128) + (208/2) - 128 5848LIdle1Monster054: equ $4000 + (184*128) + (240/2) - 128 5849LIdle2Monster054: equ $4000 + (184*128) + (224/2) - 128 5851Monster054Move: 5852Monster054Idle:5853 db 08 5854 db 2 5855 dw RIdle1Monster0545856 dw RIdle2Monster0545857 5858 dw LIdle1Monster0545859 dw LIdle2Monster05458605863RIdle1Monster055: equ $4000 + (000*128) + (000/2) - 128 5864RIdle2Monster055: equ $4000 + (000*128) + (032/2) - 128 5865RAttack1Monster055: equ $4000 + (000*128) + (064/2) - 128 5867LIdle1Monster055: equ $4000 + (000*128) + (160/2) - 128 5868LIdle2Monster055: equ $4000 + (000*128) + (128/2) - 128 5869LAttack1Monster055: equ $4000 + (000*128) + (096/2) - 128 5871Monster055Move: 5872Monster055Idle:5873 db 06 5874 db 2 5875 dw RIdle1Monster0555876 dw RIdle2Monster0555877 5878 dw LIdle1Monster0555879 dw LIdle2Monster0555880Monster055AttackPatternRight:5881 db 000,AnimateAttack | dw RAttack1Monster055 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5882Monster055AttackPatternLeft:5883 db 000,AnimateAttack | dw LAttack1Monster055 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5884Monster055AttackPatternLeftUp:5885 db 000,AnimateAttack | dw LAttack1Monster055 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5886Monster055AttackPatternLeftDown:5887 db 000,AnimateAttack | dw LAttack1Monster055 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5888Monster055AttackPatternRightUp:5889 db 000,AnimateAttack | dw RAttack1Monster055 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5890Monster055AttackPatternRightDown:5891 db 000,AnimateAttack | dw RAttack1Monster055 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack58925895RIdle1Monster056: equ $4000 + (000*128) + (192/2) - 128 5896RIdle2Monster056: equ $4000 + (000*128) + (224/2) - 128 5898LIdle1Monster056: equ $4000 + (040*128) + (224/2) - 128 5899LIdle2Monster056: equ $4000 + (040*128) + (192/2) - 128 5901Monster056Move: 5902Monster056Idle:5903 db 06 5904 db 2 5905 dw RIdle1Monster0565906 dw RIdle2Monster0565907 5908 dw LIdle1Monster0565909 dw LIdle2Monster05659105913RIdle1Monster057: equ $4000 + (040*128) + (000/2) - 128 5914RIdle2Monster057: equ $4000 + (040*128) + (032/2) - 128 5915RIdle3Monster057: equ $4000 + (040*128) + (064/2) - 128 5917LIdle1Monster057: equ $4000 + (040*128) + (160/2) - 128 5918LIdle2Monster057: equ $4000 + (040*128) + (128/2) - 128 5919LIdle3Monster057: equ $4000 + (040*128) + (096/2) - 128 5921Monster057Move: 5922Monster057Idle:5923 db 06 5924 db 4 5925 dw RIdle1Monster0575926 dw RIdle2Monster0575927 dw RIdle3Monster0575928 dw RIdle2Monster0575929 5930 dw LIdle1Monster0575931 dw LIdle2Monster0575932 dw LIdle3Monster0575933 dw LIdle2Monster05759345937RIdle1Monster058: equ $4000 + (080*128) + (000/2) - 128 5938RIdle2Monster058: equ $4000 + (080*128) + (032/2) - 128 5939RAttack1Monster058: equ $4000 + (080*128) + (064/2) - 128 5941LIdle1Monster058: equ $4000 + (080*128) + (160/2) - 128 5942LIdle2Monster058: equ $4000 + (080*128) + (128/2) - 128 5943LAttack1Monster058: equ $4000 + (080*128) + (096/2) - 128 5945Monster058Move: 5946Monster058Idle:5947 db 06 5948 db 2 5949 dw RIdle1Monster0585950 dw RIdle2Monster0585951 5952 dw LIdle1Monster0585953 dw LIdle2Monster0585954Monster058AttackPatternRight:5955 db 000,AnimateAttack | dw RAttack1Monster058 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5956Monster058AttackPatternLeft:5957 db 000,AnimateAttack | dw LAttack1Monster058 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5958Monster058AttackPatternLeftUp:5959 db 000,AnimateAttack | dw LAttack1Monster058 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5960Monster058AttackPatternLeftDown:5961 db 000,AnimateAttack | dw LAttack1Monster058 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5962Monster058AttackPatternRightUp:5963 db 000,AnimateAttack | dw RAttack1Monster058 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5964Monster058AttackPatternRightDown:5965 db 000,AnimateAttack | dw RAttack1Monster058 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack59665969RIdle1Monster059: equ $4000 + (120*128) + (000/2) - 128 5970RIdle2Monster059: equ $4000 + (120*128) + (032/2) - 128 5972LIdle1Monster059: equ $4000 + (120*128) + (096/2) - 128 5973LIdle2Monster059: equ $4000 + (120*128) + (064/2) - 128 5975Monster059Move: 5976Monster059Idle:5977 db 06 5978 db 2 5979 dw RIdle1Monster0595980 dw RIdle2Monster0595981 5982 dw LIdle1Monster0595983 dw LIdle2Monster05959845987RIdle1Monster060: equ $4000 + (120*128) + (128/2) - 128 5988RIdle2Monster060: equ $4000 + (120*128) + (160/2) - 128 5990LIdle1Monster060: equ $4000 + (120*128) + (224/2) - 128 5991LIdle2Monster060: equ $4000 + (120*128) + (192/2) - 128 5993Monster060Move: 5994Monster060Idle:5995 db 06 5996 db 2 5997 dw RIdle1Monster0605998 dw RIdle2Monster0605999 6000 dw LIdle1Monster0606001 dw LIdle2Monster06060026005RIdle1Monster061: equ $4000 + (160*128) + (000/2) - 128 6006RIdle2Monster061: equ $4000 + (160*128) + (048/2) - 128 6008LIdle1Monster061: equ $4000 + (160*128) + (144/2) - 128 6009LIdle2Monster061: equ $4000 + (160*128) + (096/2) - 128 6011Monster061Move: 6012Monster061Idle:6013 db 06 6014 db 2 6015 dw RIdle1Monster0616016 dw RIdle2Monster0616017 6018 dw LIdle1Monster0616019 dw LIdle2Monster06160206023RIdle1Monster062: equ $4000 + (200*128) + (000/2) - 128 6024RIdle2Monster062: equ $4000 + (200*128) + (032/2) - 128 6025RMove1Monster062: equ $4000 + (200*128) + (064/2) - 128 6026RMove2Monster062: equ $4000 + (200*128) + (096/2) - 128 6027RAttack1Monster062: equ $4000 + (080*128) + (192/2) - 128 6029LIdle1Monster062: equ $4000 + (200*128) + (224/2) - 128 6030LIdle2Monster062: equ $4000 + (200*128) + (192/2) - 128 6031LMove1Monster062: equ $4000 + (200*128) + (160/2) - 128 6032LMove2Monster062: equ $4000 + (200*128) + (128/2) - 128 6033LAttack1Monster062: equ $4000 + (160*128) + (192/2) - 128 6035Monster062Move: 6036 db 06 6037 db 2 6038 dw RMove1Monster0626039 dw RMove2Monster0626040 6041 dw LMove1Monster0626042 dw LMove2Monster0626043Monster062Idle:6044 db 06 6045 db 2 6046 dw RIdle1Monster0626047 dw RIdle2Monster0626048 6049 dw LIdle1Monster0626050 dw LIdle2Monster0626051Monster062AttackPatternRight:6052 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6053Monster062AttackPatternLeft:6054 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6055Monster062AttackPatternLeftUp:6056 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6057Monster062AttackPatternLeftDown:6058 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6059Monster062AttackPatternRightUp:6060 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6061Monster062AttackPatternRightDown:6062 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack 60636066RIdle1Monster063: equ $4000 + (208*128) + (192/2) - 128 6067RIdle2Monster063: equ $4000 + (208*128) + (208/2) - 128 6069LIdle1Monster063: equ $4000 + (208*128) + (240/2) - 128 6070LIdle2Monster063: equ $4000 + (208*128) + (224/2) - 128 6072Monster063Move: 6073Monster063Idle:6074 db 06 6075 db 2 6076 dw RIdle1Monster0636077 dw RIdle2Monster0636078 6079 dw LIdle1Monster0636080 dw LIdle2Monster06360816084RIdle1Monster064: equ $4000 + (232*128) + (192/2) - 128 6085RIdle2Monster064: equ $4000 + (232*128) + (208/2) - 128 6087LIdle1Monster064: equ $4000 + (232*128) + (240/2) - 128 6088LIdle2Monster064: equ $4000 + (232*128) + (224/2) - 128 6090Monster064Move: 6091Monster064Idle:6092 db 06 6093 db 2 6094 dw RIdle1Monster0646095 dw RIdle2Monster0646096 6097 dw LIdle1Monster0646098 dw LIdle2Monster06460996102RIdle1Monster065: equ $4000 + (000*128) + (064/2) - 128 6103RIdle2Monster065: equ $4000 + (000*128) + (080/2) - 128 6105LIdle1Monster065: equ $4000 + (000*128) + (112/2) - 128 6106LIdle2Monster065: equ $4000 + (000*128) + (096/2) - 128 6108Monster065Move: 6109Monster065Idle:6110 db 06 6111 db 2 6112 dw RIdle1Monster0656113 dw RIdle2Monster0656114 6115 dw LIdle1Monster0656116 dw LIdle2Monster06561176120RIdle1Monster066: equ $4000 + (152*128) + (096/2) - 128 6121RIdle2Monster066: equ $4000 + (152*128) + (112/2) - 128 6123LIdle1Monster066: equ $4000 + (152*128) + (144/2) - 128 6124LIdle2Monster066: equ $4000 + (152*128) + (128/2) - 128 6126Monster066Move: 6127Monster066Idle:6128 db 06 6129 db 2 6130 dw RIdle1Monster0666131 dw RIdle2Monster0666132 6133 dw LIdle1Monster0666134 dw LIdle2Monster06661356138RIdle1Monster067: equ $4000 + (000*128) + (000/2) - 128 6139RIdle2Monster067: equ $4000 + (000*128) + (016/2) - 128 6141LIdle1Monster067: equ $4000 + (000*128) + (048/2) - 128 6142LIdle2Monster067: equ $4000 + (000*128) + (032/2) - 128 6144Monster067Move: 6145Monster067Idle:6146 db 06 6147 db 2 6148 dw RIdle1Monster0676149 dw RIdle2Monster0676150 6151 dw LIdle1Monster0676152 dw LIdle2Monster06761536156RIdle1Monster068: equ $4000 + (024*128) + (000/2) - 128 6157RIdle2Monster068: equ $4000 + (024*128) + (032/2) - 128 6159LIdle1Monster068: equ $4000 + (024*128) + (096/2) - 128 6160LIdle2Monster068: equ $4000 + (024*128) + (064/2) - 128 6162Monster068Move: 6163Monster068Idle:6164 db 06 6165 db 2 6166 dw RIdle1Monster0686167 dw RIdle2Monster0686168 6169 dw LIdle1Monster0686170 dw LIdle2Monster06861716174RIdle1Monster069: equ $4000 + (024*128) + (128/2) - 128 6175RIdle2Monster069: equ $4000 + (024*128) + (160/2) - 128 6177LIdle1Monster069: equ $4000 + (024*128) + (224/2) - 128 6178LIdle2Monster069: equ $4000 + (024*128) + (192/2) - 128 6180Monster069Move: 6181Monster069Idle:6182 db 06 6183 db 2 6184 dw RIdle1Monster0696185 dw RIdle2Monster0696186 6187 dw LIdle1Monster0696188 dw LIdle2Monster0696189Monster069AttackPatternRight:6190 db 000,AnimateAttack | dw RIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile6191Monster069AttackPatternLeft:6192 db 000,AnimateAttack | dw LIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile61936196RIdle1Monster070: equ $4000 + (184*128) + (192/2) - 128 6197RIdle2Monster070: equ $4000 + (184*128) + (208/2) - 128 6199LIdle1Monster070: equ $4000 + (184*128) + (240/2) - 128 6200LIdle2Monster070: equ $4000 + (184*128) + (224/2) - 128 6202Monster070Move: 6203Monster070Idle:6204 db 06 6205 db 2 6206 dw RIdle1Monster0706207 dw RIdle2Monster0706208 6209 dw LIdle1Monster0706210 dw LIdle2Monster07062116214RIdle1Monster071: equ $4000 + (000*128) + (000/2) - 1286215RIdle2Monster071: equ $4000 + (000*128) + (064/2) - 1286217LIdle1Monster071: equ $4000 + (000*128) + (192/2) - 1286218LIdle2Monster071: equ $4000 + (000*128) + (128/2) - 1286220Monster071Move: 6221Monster071Idle:6222 db 3 6223 db 2 6224 dw RIdle1Monster0716225 dw RIdle2Monster0716226 6227 dw LIdle1Monster0716228 dw LIdle2Monster071622962356237RIdle1Monster072: equ $4000 + (064*128) + (000/2) - 1286238RIdle2Monster072: equ $4000 + (064*128) + (032/2) - 1286240LIdle1Monster072: equ $4000 + (064*128) + (096/2) - 1286241LIdle2Monster072: equ $4000 + (064*128) + (064/2) - 1286243Monster072Move: 6244Monster072Idle:6245 db 8 6246 db 2 6247 dw RIdle1Monster0726248 dw RIdle2Monster0726249 6250 dw LIdle1Monster0726251 dw LIdle2Monster07262526255RIdle1Monster073: equ $4000 + (064*128) + (128/2) - 1286256RIdle2Monster073: equ $4000 + (064*128) + (160/2) - 1286258LIdle1Monster073: equ $4000 + (064*128) + (224/2) - 1286259LIdle2Monster073: equ $4000 + (064*128) + (192/2) - 1286261Monster073Move: 6262Monster073Idle:6263 db 8 6264 db 2 6265 dw RIdle1Monster0736266 dw RIdle2Monster0736267 6268 dw LIdle1Monster0736269 dw LIdle2Monster07362706273RIdle1Monster074: equ $4000 + (000*128) + (128/2) - 1286274RIdle2Monster074: equ $4000 + (000*128) + (144/2) - 1286276LIdle1Monster074: equ $4000 + (000*128) + (176/2) - 1286277LIdle2Monster074: equ $4000 + (000*128) + (160/2) - 1286279Monster074Move: 6280Monster074Idle:6281 db 7 6282 db 2 6283 dw RIdle1Monster0746284 dw RIdle2Monster0746285 6286 dw LIdle1Monster0746287 dw LIdle2Monster07462886291RIdle1Monster075: equ $4000 + (000*128) + (192/2) - 1286292RIdle2Monster075: equ $4000 + (000*128) + (208/2) - 1286294LIdle1Monster075: equ $4000 + (000*128) + (240/2) - 1286295LIdle2Monster075: equ $4000 + (000*128) + (224/2) - 1286297Monster075Move: 6298Monster075Idle:6299 db 7 6300 db 2 6301 dw RIdle1Monster0756302 dw RIdle2Monster0756303 6304 dw LIdle1Monster0756305 dw LIdle2Monster07563066309RIdle1Monster076: equ $4000 + (104*128) + (000/2) - 1286310RIdle2Monster076: equ $4000 + (104*128) + (016/2) - 1286312LIdle1Monster076: equ $4000 + (104*128) + (048/2) - 1286313LIdle2Monster076: equ $4000 + (104*128) + (032/2) - 1286315Monster076Move: 6316Monster076Idle:6317 db 6 6318 db 2 6319 dw RIdle1Monster0766320 dw RIdle2Monster0766321 6322 dw LIdle1Monster0766323 dw LIdle2Monster07663246327RIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286328RIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286329RIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286331LIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286332LIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286333LIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286335Monster077Move: 6336Monster077Idle:6337 db 5 6338 db 4 6339 dw RIdle1Monster0776340 dw RIdle2Monster0776341 dw RIdle3Monster0776342 dw RIdle2Monster0776343 6344 dw LIdle1Monster0776345 dw LIdle2Monster0776346 dw LIdle3Monster0776347 dw LIdle2Monster07763486351RIdle1Monster078: equ $4000 + (096*128) + (240/2) - 1286352RIdle2Monster078: equ $4000 + (176*128) + (240/2) - 1286354LIdle1Monster078: equ $4000 + (176*128) + (240/2) - 1286355LIdle2Monster078: equ $4000 + (096*128) + (240/2) - 1286357Monster078Move: 6358Monster078Idle:6359 db 6 6360 db 2 6361 dw RIdle1Monster0786362 dw RIdle2Monster0786363 6364 dw LIdle1Monster0786365 dw LIdle2Monster07863666369RIdle1Monster079: equ $4000 + (104*128) + (064/2) - 1286370RIdle2Monster079: equ $4000 + (104*128) + (080/2) - 1286372LIdle1Monster079: equ $4000 + (104*128) + (112/2) - 1286373LIdle2Monster079: equ $4000 + (104*128) + (096/2) - 1286375Monster079Move: 6376Monster079Idle:6377 db 6 6378 db 2 6379 dw RIdle1Monster0796380 dw RIdle2Monster0796381 6382 dw LIdle1Monster0796383 dw LIdle2Monster07963846387RIdle1Monster080: equ $4000 + (240*128) + (032/2) - 1286388RIdle2Monster080: equ $4000 + (240*128) + (048/2) - 1286390LIdle1Monster080: equ $4000 + (240*128) + (080/2) - 1286391LIdle2Monster080: equ $4000 + (240*128) + (064/2) - 1286393Monster080Move: 6394Monster080Idle:6395 db 9 6396 db 2 6397 dw RIdle1Monster0806398 dw RIdle2Monster0806399 6400 dw LIdle1Monster0806401 dw LIdle2Monster08064026405RIdle1Monster081: equ $4000 + (104*128) + (128/2) - 1286406RIdle2Monster081: equ $4000 + (104*128) + (144/2) - 1286408LIdle1Monster081: equ $4000 + (104*128) + (176/2) - 1286409LIdle2Monster081: equ $4000 + (104*128) + (160/2) - 1286411Monster081Move: 6412Monster081Idle:6413 db 8 6414 db 2 6415 dw RIdle1Monster0816416 dw RIdle2Monster0816417 6418 dw LIdle1Monster0816419 dw LIdle2Monster08164206423RIdle1Monster082: equ $4000 + (080*128) + (240/2) - 1286424RIdle2Monster082: equ $4000 + (160*128) + (240/2) - 1286426LIdle1Monster082: equ $4000 + (240*128) + (016/2) - 1286427LIdle2Monster082: equ $4000 + (240*128) + (000/2) - 1286429Monster082Move: 6430Monster082Idle:6431 db 6 6432 db 2 6433 dw RIdle1Monster0826434 dw RIdle2Monster0826435 6436 dw LIdle1Monster0826437 dw LIdle2Monster08264386441RIdle1Monster083: equ $4000 + (104*128) + (192/2) - 1286442RIdle2Monster083: equ $4000 + (104*128) + (208/2) - 1286444LIdle1Monster083: equ $4000 + (104*128) + (240/2) - 1286445LIdle2Monster083: equ $4000 + (104*128) + (224/2) - 1286447Monster083Move: 6448Monster083Idle:6449 db 6 6450 db 2 6451 dw RIdle1Monster0836452 dw RIdle2Monster0836453 6454 dw LIdle1Monster0836455 dw LIdle2Monster08364566459RIdle1Monster084: equ $4000 + (224*128) + (128/2) - 1286460RIdle2Monster084: equ $4000 + (224*128) + (144/2) - 1286462LIdle1Monster084: equ $4000 + (224*128) + (176/2) - 1286463LIdle2Monster084: equ $4000 + (224*128) + (160/2) - 1286465Monster084Move: 6466Monster084Idle:6467 db 8 6468 db 2 6469 dw RIdle1Monster0846470 dw RIdle2Monster0846471 6472 dw LIdle1Monster0846473 dw LIdle2Monster08464746477RIdle1Monster085: equ $4000 + (040*128) + (192/2) - 1286478RIdle2Monster085: equ $4000 + (040*128) + (208/2) - 1286480LIdle1Monster085: equ $4000 + (040*128) + (240/2) - 1286481LIdle2Monster085: equ $4000 + (040*128) + (224/2) - 1286483Monster085Move: 6484Monster085Idle:6485 db 9 6486 db 2 6487 dw RIdle1Monster0856488 dw RIdle2Monster0856489 6490 dw LIdle1Monster0856491 dw LIdle2Monster08564926495RIdle1Monster086: equ $4000 + (000*128) + (000/2) - 1286496RIdle2Monster086: equ $4000 + (000*128) + (056/2) - 1286498LIdle1Monster086: equ $4000 + (000*128) + (112/2) - 1286499LIdle2Monster086: equ $4000 + (000*128) + (168/2) - 1286501Monster086Move: 6502Monster086Idle:6503 db 2 6504 db 2 6505 dw RIdle1Monster0866506 dw RIdle2Monster0866507 6508 dw LIdle1Monster0866509 dw LIdle2Monster08665106513RIdle1Monster087: equ $4000 + (128*128) + (128/2) - 1286514RIdle2Monster087: equ $4000 + (128*128) + (144/2) - 1286516LIdle1Monster087: equ $4000 + (128*128) + (176/2) - 1286517LIdle2Monster087: equ $4000 + (128*128) + (160/2) - 1286519Monster087Move: 6520Monster087Idle:6521 db 8 6522 db 2 6523 dw RIdle1Monster0876524 dw RIdle2Monster0876525 6526 dw LIdle1Monster0876527 dw LIdle2Monster08765286531RIdle1Monster088: equ $4000 + (128*128) + (000/2) - 1286532RIdle2Monster088: equ $4000 + (128*128) + (016/2) - 1286534LIdle1Monster088: equ $4000 + (128*128) + (048/2) - 1286535LIdle2Monster088: equ $4000 + (128*128) + (032/2) - 1286537Monster088Move: 6538Monster088Idle:6539 db 8 6540 db 2 6541 dw RIdle1Monster0886542 dw RIdle2Monster0886543 6544 dw LIdle1Monster0886545 dw LIdle2Monster08865466549RIdle1Monster089: equ $4000 + (128*128) + (064/2) - 1286550RIdle2Monster089: equ $4000 + (128*128) + (080/2) - 1286552LIdle1Monster089: equ $4000 + (128*128) + (112/2) - 1286553LIdle2Monster089: equ $4000 + (128*128) + (096/2) - 1286555Monster089Move: 6556Monster089Idle:6557 db 9 6558 db 2 6559 dw RIdle1Monster0896560 dw RIdle2Monster0896561 6562 dw LIdle1Monster0896563 dw LIdle2Monster08965646567RIdle1Monster090: equ $4000 + (240*128) + (096/2) - 1286568RIdle2Monster090: equ $4000 + (240*128) + (112/2) - 1286570LIdle1Monster090: equ $4000 + (240*128) + (144/2) - 1286571LIdle2Monster090: equ $4000 + (240*128) + (128/2) - 1286573Monster090Move: 6574Monster090Idle:6575 db 8 6576 db 2 6577 dw RIdle1Monster0906578 dw RIdle2Monster0906579 6580 dw LIdle1Monster0906581 dw LIdle2Monster09065826585RIdle1Monster091: equ $4000 + (128*128) + (192/2) - 1286586RIdle2Monster091: equ $4000 + (128*128) + (208/2) - 1286588LIdle1Monster091: equ $4000 + (128*128) + (240/2) - 1286589LIdle2Monster091: equ $4000 + (128*128) + (224/2) - 1286591Monster091Move: 6592Monster091Idle:6593 db 7 6594 db 2 6595 dw RIdle1Monster0916596 dw RIdle2Monster0916597 6598 dw LIdle1Monster0916599 dw LIdle2Monster09166006603RIdle1Monster092: equ $4000 + (168*128) + (000/2) - 1286604RIdle2Monster092: equ $4000 + (168*128) + (016/2) - 1286606LIdle1Monster092: equ $4000 + (168*128) + (048/2) - 1286607LIdle2Monster092: equ $4000 + (168*128) + (032/2) - 1286609Monster092Move: 6610Monster092Idle:6611 db 7 6612 db 2 6613 dw RIdle1Monster0926614 dw RIdle2Monster0926615 6616 dw LIdle1Monster0926617 dw LIdle2Monster0926618Monster092AttackPatternLeft:6619Monster092AttackPatternRight:6620 db ShootProjectile,WaitImpactProjectile66216624RIdle1Monster093: equ $4000 + (168*128) + (064/2) - 1286625RIdle2Monster093: equ $4000 + (168*128) + (080/2) - 1286627LIdle1Monster093: equ $4000 + (168*128) + (112/2) - 1286628LIdle2Monster093: equ $4000 + (168*128) + (096/2) - 1286630Monster093Move: 6631Monster093Idle:6632 db 7 6633 db 2 6634 dw RIdle1Monster0936635 dw RIdle2Monster0936636 6637 dw LIdle1Monster0936638 dw LIdle2Monster0936639Monster093AttackPatternLeft:6640Monster093AttackPatternRight:6641 db ShootProjectile,WaitImpactProjectile66426645RIdle1Monster094: equ $4000 + (168*128) + (128/2) - 1286646RIdle2Monster094: equ $4000 + (168*128) + (144/2) - 1286648LIdle1Monster094: equ $4000 + (168*128) + (176/2) - 1286649LIdle2Monster094: equ $4000 + (168*128) + (160/2) - 1286651Monster094Move: 6652Monster094Idle:6653 db 7 6654 db 2 6655 dw RIdle1Monster0946656 dw RIdle2Monster0946657 6658 dw LIdle1Monster0946659 dw LIdle2Monster0946660Monster094AttackPatternLeft:6661Monster094AttackPatternRight:6662 db ShootProjectile,WaitImpactProjectile66636666RIdle1Monster095: equ $4000 + (096*128) + (048/2) - 128 6667RIdle2Monster095: equ $4000 + (096*128) + (064/2) - 128 6668RIdle3Monster095: equ $4000 + (096*128) + (080/2) - 128 6669RAttack1Monster095: equ $4000 + (096*128) + (096/2) - 128 6670RAttack2Monster095: equ $4000 + (096*128) + (112/2) - 128 6671RAttack3Monster095: equ $4000 + (096*128) + (144/2) - 128 6673LIdle1Monster095: equ $4000 + (128*128) + (048/2) - 128 6674LIdle2Monster095: equ $4000 + (128*128) + (032/2) - 128 6675LIdle3Monster095: equ $4000 + (128*128) + (016/2) - 128 6676LAttack1Monster095: equ $4000 + (128*128) + (000/2) - 128 6677LAttack2Monster095: equ $4000 + (032*128) + (224/2) - 128 6678LAttack3Monster095: equ $4000 + (096*128) + (192/2) - 128 6680Monster095Move: 6681Monster095Idle:6682 db 5 6683 db 4 6684 dw RIdle1Monster0956685 dw RIdle2Monster0956686 dw RIdle3Monster0956687 dw RIdle2Monster0956688 6689 dw LIdle1Monster0956690 dw LIdle2Monster0956691 dw LIdle3Monster0956692 dw LIdle2Monster0956693Monster095AttackPatternRight:6694 db 000,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,000,InitiateAttack6695Monster095AttackPatternLeft:6696 db 000,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,000,InitiateAttack6697Monster095AttackPatternLeftUp:6698 db 002,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,006,InitiateAttack6699Monster095AttackPatternLeftDown:6700 db 004,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,008,InitiateAttack6701Monster095AttackPatternRightUp:6702 db 008,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,004,InitiateAttack6703Monster095AttackPatternRightDown:6704 db 006,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,002,InitiateAttack67056708RIdle1Monster096: equ $4000 + (000*128) + (000/2) - 128 6709RIdle2Monster096: equ $4000 + (000*128) + (032/2) - 128 6710RIdle3Monster096: equ $4000 + (000*128) + (064/2) - 128 6711RAttack1Monster096: equ $4000 + (000*128) + (096/2) - 128 6712RAttack2Monster096: equ $4000 + (000*128) + (128/2) - 128 6714LIdle1Monster096: equ $4000 + (032*128) + (032/2) - 128 6715LIdle2Monster096: equ $4000 + (032*128) + (000/2) - 128 6716LIdle3Monster096: equ $4000 + (000*128) + (224/2) - 128 6717LAttack1Monster096: equ $4000 + (000*128) + (192/2) - 128 6718LAttack2Monster096: equ $4000 + (000*128) + (160/2) - 128 6720Monster096Move: 6721Monster096Idle:6722 db 7 6723 db 4 6724 dw RIdle1Monster0966725 dw RIdle2Monster0966726 dw RIdle3Monster0966727 dw RIdle2Monster0966728 6729 dw LIdle1Monster0966730 dw LIdle2Monster0966731 dw LIdle3Monster0966732 dw LIdle2Monster0966733Monster096AttackPatternRight:6734 db 000,AnimateAttack | dw RAttack1Monster096 | db 003,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 007,InitiateAttack6735Monster096AttackPatternLeft:6736 db 000,AnimateAttack | dw LAttack1Monster096 | db 007,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 003,InitiateAttack6737Monster096AttackPatternLeftUp:6738 db 000,AnimateAttack | dw LAttack1Monster096 | db 002,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 006,InitiateAttack6739Monster096AttackPatternLeftDown:6740 db 000,AnimateAttack | dw LAttack1Monster096 | db 004,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 008,InitiateAttack6741Monster096AttackPatternRightUp:6742 db 000,AnimateAttack | dw RAttack1Monster096 | db 008,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 004,InitiateAttack6743Monster096AttackPatternRightDown:6744 db 000,AnimateAttack | dw RAttack1Monster096 | db 006,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 002,InitiateAttack67456748RIdle1Monster097: equ $4000 + (128*128) + (160/2) - 128 6749RIdle2Monster097: equ $4000 + (128*128) + (176/2) - 128 6750RIdle3Monster097: equ $4000 + (128*128) + (192/2) - 128 6752LIdle1Monster097: equ $4000 + (128*128) + (240/2) - 128 6753LIdle2Monster097: equ $4000 + (128*128) + (224/2) - 128 6754LIdle3Monster097: equ $4000 + (128*128) + (208/2) - 128 6756Monster097Move: 6757Monster097Idle:6758 db 3 6759 db 3 6760 dw RIdle1Monster0976761 dw RIdle2Monster0976762 dw RIdle3Monster0976763 6764 dw LIdle1Monster0976765 dw LIdle2Monster0976766 dw LIdle3Monster09767676770RIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6771RIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6772RIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6773RIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6775LIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6776LIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6777LIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6778LIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6780Monster098Move: 6781Monster098Idle:6782 db 3 6783 db 5 6784 dw RIdle1Monster0986785 dw RIdle2Monster0986786 dw RIdle3Monster0986787 dw RIdle4Monster0986788 dw RIdle2Monster0986789 6790 dw LIdle1Monster0986791 dw LIdle2Monster0986792 dw LIdle3Monster0986793 dw LIdle4Monster0986794 dw LIdle2Monster09867956798RIdle1Monster099: equ $4000 + (128*128) + (064/2) - 128 6799RIdle2Monster099: equ $4000 + (128*128) + (080/2) - 128 6800RIdle3Monster099: equ $4000 + (128*128) + (096/2) - 128 6802LIdle1Monster099: equ $4000 + (128*128) + (144/2) - 128 6803LIdle2Monster099: equ $4000 + (128*128) + (128/2) - 128 6804LIdle3Monster099: equ $4000 + (128*128) + (112/2) - 128 6806Monster099Move: 6807Monster099Idle:6808 db 3 6809 db 4 6810 dw RIdle1Monster0996811 dw RIdle2Monster0996812 dw RIdle3Monster0996813 dw RIdle2Monster0996814 6815 dw LIdle1Monster0996816 dw LIdle2Monster0996817 dw LIdle3Monster0996818 dw LIdle2Monster09968196822RIdle1Monster100: equ $4000 + (240*128) + (160/2) - 128 6823RIdle2Monster100: equ $4000 + (240*128) + (176/2) - 128 6825LIdle1Monster100: equ $4000 + (240*128) + (208/2) - 128 6826LIdle2Monster100: equ $4000 + (240*128) + (192/2) - 128 6828Monster100Move: 6829Monster100Idle:6830 db 7 6831 db 2 6832 dw RIdle1Monster1006833 dw RIdle2Monster1006834 6835 dw LIdle1Monster1006836 dw LIdle2Monster10068376840RIdle1Monster101: equ $4000 + (032*128) + (064/2) - 128 6841RIdle2Monster101: equ $4000 + (032*128) + (112/2) - 128 6842RIdle3Monster101: equ $4000 + (032*128) + (160/2) - 128 6843RAttack1Monster101: equ $4000 + (064*128) + (000/2) - 128 6845LIdle1Monster101: equ $4000 + (064*128) + (192/2) - 128 6846LIdle2Monster101: equ $4000 + (064*128) + (144/2) - 128 6847LIdle3Monster101: equ $4000 + (064*128) + (096/2) - 128 6848LAttack1Monster101: equ $4000 + (064*128) + (048/2) - 128 6850Monster101Move: 6851Monster101Idle:6852 db 4 6853 db 3 6854 dw RIdle1Monster1016855 dw RIdle2Monster1016856 dw RIdle3Monster1016857 6858 dw LIdle1Monster1016859 dw LIdle2Monster1016860 dw LIdle3Monster1016861Monster101AttackPatternRight:6862 db AnimateAttack | dw RIdle2Monster101 | db 003,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,007,InitiateAttack6863Monster101AttackPatternLeft:6864 db AnimateAttack | dw LIdle2Monster101 | db 007,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,003,InitiateAttack6865Monster101AttackPatternLeftUp:6866 db AnimateAttack | dw LIdle2Monster101 | db 008,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,004,InitiateAttack6867Monster101AttackPatternLeftDown:6868 db AnimateAttack | dw LIdle2Monster101 | db 006,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,002,InitiateAttack6869Monster101AttackPatternRightUp:6870 db AnimateAttack | dw RIdle2Monster101 | db 002,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,006,InitiateAttack6871Monster101AttackPatternRightDown:6872 db AnimateAttack | dw RIdle2Monster101 | db 004,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,008,InitiateAttack68806883RIdle1Monster102: equ $4000 + (000*128) + (000/2) - 128 6884RIdle2Monster102: equ $4000 + (000*128) + (032/2) - 128 6885Rattack1Monster102: equ $4000 + (000*128) + (064/2) - 128 6886Rattack2Monster102: equ $4000 + (000*128) + (112/2) - 128 6888LIdle1Monster102: equ $4000 + (040*128) + (032/2) - 128 6889LIdle2Monster102: equ $4000 + (040*128) + (000/2) - 128 6890Lattack1Monster102: equ $4000 + (000*128) + (208/2) - 128 6891Lattack2Monster102: equ $4000 + (000*128) + (160/2) - 128 6893Monster102Move:6894Monster102Idle:6895 db 5 6896 db 2 6897 dw RIdle1Monster1026898 dw RIdle2Monster1026899 6900 dw LIdle1Monster1026901 dw LIdle2Monster1026902Monster102AttackPatternRight:6903 db AnimateAttack | dw RIdle1Monster102 | db 003,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 007,InitiateAttack6904Monster102AttackPatternRightUp:6905 db AnimateAttack | dw RIdle1Monster102 | db 008,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 004,InitiateAttack6906Monster102AttackPatternRightDown:6907 db AnimateAttack | dw RIdle1Monster102 | db 006,128+48,AnimateAttack | dw Rattack2Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 002,InitiateAttack6908Monster102AttackPatternLeft:6909 db AnimateAttack | dw LIdle1Monster102 | db 000,007,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,003,000,InitiateAttack6910Monster102AttackPatternLeftUp:6911 db AnimateAttack | dw LIdle1Monster102 | db 000,002,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,006,000,InitiateAttack6912Monster102AttackPatternLeftDown:6913 db AnimateAttack | dw LIdle1Monster102 | db 000,004,128+48,AnimateAttack | dw Lattack2Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,008,000,InitiateAttack69146917RIdle1Monster103: equ $4000 + (080*128) + (000/2) - 128 6918RIdle2Monster103: equ $4000 + (080*128) + (048/2) - 128 6919Rattack1Monster103: equ $4000 + (080*128) + (096/2) - 128 6920Rattack2Monster103: equ $4000 + (080*128) + (144/2) - 128 6922LIdle1Monster103: equ $4000 + (128*128) + (160/2) - 128 6923LIdle2Monster103: equ $4000 + (128*128) + (112/2) - 128 6924Lattack1Monster103: equ $4000 + (128*128) + (064/2) - 128 6925Lattack2Monster103: equ $4000 + (128*128) + (000/2) - 128 6927Monster103Move:6928Monster103Idle:6929 db 5 6930 db 2 6931 dw RIdle1Monster1036932 dw RIdle2Monster1036933 6934 dw LIdle1Monster1036935 dw LIdle2Monster1036936Monster103AttackPatternRight:6937 db AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,InitiateAttack6938Monster103AttackPatternRightUp:6939 db AnimateAttack | dw RIdle2Monster103 | db 008,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 004,InitiateAttack6940Monster103AttackPatternRightDown:6941 db AnimateAttack | dw RIdle2Monster103 | db 006,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 002,InitiateAttack6942Monster103AttackPatternLeft:6943 db AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,InitiateAttack6944Monster103AttackPatternLeftUp:6945 db AnimateAttack | dw LIdle2Monster103 | db 002,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 006,InitiateAttack6946Monster103AttackPatternLeftDown:6947 db AnimateAttack | dw LIdle2Monster103 | db 004,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 008,InitiateAttack69486951RIdle1Monster104: equ $4000 + (040*128) + (064/2) - 128 6952RIdle2Monster104: equ $4000 + (040*128) + (096/2) - 128 6953Rattack1Monster104: equ $4000 + (040*128) + (128/2) - 128 6955LIdle1Monster104: equ $4000 + (040*128) + (224/2) - 128 6956LIdle2Monster104: equ $4000 + (040*128) + (192/2) - 128 6957Lattack1Monster104: equ $4000 + (040*128) + (160/2) - 128 6959Monster104Move:6960Monster104Idle:6961 db 5 6962 db 2 6963 dw RIdle1Monster1046964 dw RIdle2Monster1046965 6966 dw LIdle1Monster1046967 dw LIdle2Monster1046968Monster104AttackPatternRight:6969 db 000,AnimateAttack | dw Rattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster104 | db WaitImpactProjectile6970Monster104AttackPatternLeft:6971 db 000,AnimateAttack | dw Lattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster104 | db WaitImpactProjectile69736976RIdle1Monster105: equ $4000 + (176*128) + (000/2) - 128 6977RIdle2Monster105: equ $4000 + (176*128) + (048/2) - 128 6978Rattack1Monster105: equ $4000 + (080*128) + (208/2) - 128 6980LIdle1Monster105: equ $4000 + (176*128) + (144/2) - 128 6981LIdle2Monster105: equ $4000 + (176*128) + (096/2) - 128 6982Lattack1Monster105: equ $4000 + (128*128) + (208/2) - 128 6984Monster105Move:6985Monster105Idle:6986 db 5 6987 db 2 6988 dw RIdle1Monster1056989 dw RIdle2Monster1056990 6991 dw LIdle1Monster1056992 dw LIdle2Monster1056993Monster105AttackPatternRight:6994 db AnimateAttack | dw RIdle2Monster105 | db 003,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 007,InitiateAttack6995Monster105AttackPatternRightUp:6996 db AnimateAttack | dw RIdle2Monster105 | db 008,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 004,InitiateAttack6997Monster105AttackPatternRightDown:6998 db AnimateAttack | dw RIdle2Monster105 | db 006,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 002,InitiateAttack6999Monster105AttackPatternLeft:7000 db AnimateAttack | dw LIdle2Monster105 | db 007,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 003,InitiateAttack7001Monster105AttackPatternLeftUp:7002 db AnimateAttack | dw LIdle2Monster105 | db 002,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 006,InitiateAttack7003Monster105AttackPatternLeftDown:7004 db AnimateAttack | dw LIdle2Monster105 | db 004,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 008,InitiateAttack70057008RIdle1Monster106: equ $4000 + (040*128) + (000/2) - 128 7009RIdle2Monster106: equ $4000 + (040*128) + (048/2) - 128 7010Rattack1Monster106: equ $4000 + (120*128) + (160/2) - 128 7012LIdle1Monster106: equ $4000 + (040*128) + (208/2) - 128 7013LIdle2Monster106: equ $4000 + (040*128) + (160/2) - 128 7014Lattack1Monster106: equ $4000 + (120*128) + (208/2) - 128 7016Monster106Move:7017Monster106Idle:7018 db 5 7019 db 2 7020 dw RIdle1Monster1067021 dw RIdle2Monster1067022 7023 dw LIdle1Monster1067024 dw LIdle2Monster1067025Monster106AttackPatternRight:7026 db AnimateAttack | dw RIdle2Monster106 | db 003,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 007,InitiateAttack7027Monster106AttackPatternRightUp:7028 db AnimateAttack | dw RIdle2Monster106 | db 008,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 004,InitiateAttack7029Monster106AttackPatternRightDown:7030 db AnimateAttack | dw RIdle2Monster106 | db 006,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 002,InitiateAttack7031Monster106AttackPatternLeft:7032 db AnimateAttack | dw LIdle2Monster106 | db 007,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 003,InitiateAttack7033Monster106AttackPatternLeftUp:7034 db AnimateAttack | dw LIdle2Monster106 | db 002,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 006,InitiateAttack7035Monster106AttackPatternLeftDown:7036 db AnimateAttack | dw LIdle2Monster106 | db 004,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 008,InitiateAttack70377041RIdle1Monster107: equ $4000 + (080*128) + (000/2) - 128 7042RIdle2Monster107: equ $4000 + (080*128) + (048/2) - 128 7043Rattack1Monster107: equ $4000 + (120*128) + (000/2) - 128 7045LIdle1Monster107: equ $4000 + (080*128) + (208/2) - 128 7046LIdle2Monster107: equ $4000 + (080*128) + (160/2) - 128 7047Lattack1Monster107: equ $4000 + (120*128) + (048/2) - 128 7049Monster107Move:7050Monster107Idle:7051 db 5 7052 db 2 7053 dw RIdle1Monster1077054 dw RIdle2Monster1077055 7056 dw LIdle1Monster1077057 dw LIdle2Monster1077058Monster107AttackPatternRight:7059 db AnimateAttack | dw RIdle2Monster107 | db 003,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 007,InitiateAttack7060Monster107AttackPatternRightUp:7061 db AnimateAttack | dw RIdle2Monster107 | db 008,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 004,InitiateAttack7062Monster107AttackPatternRightDown:7063 db AnimateAttack | dw RIdle2Monster107 | db 006,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 002,InitiateAttack7064Monster107AttackPatternLeft:7065 db AnimateAttack | dw LIdle2Monster107 | db 007,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 003,InitiateAttack7066Monster107AttackPatternLeftUp:7067 db AnimateAttack | dw LIdle2Monster107 | db 002,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 006,InitiateAttack7068Monster107AttackPatternLeftDown:7069 db AnimateAttack | dw LIdle2Monster107 | db 004,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 008,InitiateAttack70707073RIdle1Monster108: equ $4000 + (040*128) + (096/2) - 128 7074RIdle2Monster108: equ $4000 + (080*128) + (096/2) - 128 7075Rattack1Monster108: equ $4000 + (160*128) + (000/2) - 128 7077LIdle1Monster108: equ $4000 + (040*128) + (128/2) - 128 7078LIdle2Monster108: equ $4000 + (080*128) + (128/2) - 128 7079Lattack1Monster108: equ $4000 + (160*128) + (048/2) - 128 7081Monster108Move:7082Monster108Idle:7083 db 5 7084 db 2 7085 dw RIdle1Monster1087086 dw RIdle2Monster1087087 7088 dw LIdle1Monster1087089 dw LIdle2Monster1087090Monster108AttackPatternRight:7091 db AnimateAttack | dw RIdle2Monster108 | db 003,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,007,InitiateAttack7092Monster108AttackPatternRightUp:7093 db AnimateAttack | dw RIdle2Monster108 | db 008,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,004,InitiateAttack7094Monster108AttackPatternRightDown:7095 db AnimateAttack | dw RIdle2Monster108 | db 006,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,002,InitiateAttack7096Monster108AttackPatternLeft:7097 db AnimateAttack | dw LIdle2Monster108 | db 007,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,003,InitiateAttack7098Monster108AttackPatternLeftUp:7099 db AnimateAttack | dw LIdle2Monster108 | db 002,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,006,InitiateAttack7100Monster108AttackPatternLeftDown:7101 db AnimateAttack | dw LIdle2Monster108 | db 004,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,008,InitiateAttack71027105RIdle1Monster109: equ $4000 + (000*128) + (000/2) - 128 7106RIdle2Monster109: equ $4000 + (000*128) + (032/2) - 128 7107Rattack1Monster109: equ $4000 + (000*128) + (064/2) - 128 7108Rattack2Monster109: equ $4000 + (000*128) + (096/2) - 128 7110LIdle1Monster109: equ $4000 + (000*128) + (224/2) - 128 7111LIdle2Monster109: equ $4000 + (000*128) + (192/2) - 128 7112Lattack1Monster109: equ $4000 + (000*128) + (160/2) - 128 7113Lattack2Monster109: equ $4000 + (000*128) + (128/2) - 128 7115Monster109Move:7116Monster109Idle:7117 db 5 7118 db 2 7119 dw RIdle1Monster1097120 dw RIdle2Monster1097121 7122 dw LIdle1Monster1097123 dw LIdle2Monster1097124Monster109AttackPatternRight:7125 db 000,AnimateAttack | dw Rattack1Monster109 | db 000,000,AnimateAttack | dw Rattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw RIdle1Monster109 | db WaitImpactProjectile7126Monster109AttackPatternLeft:7127 db 000,AnimateAttack | dw Lattack1Monster109 | db 000,000,AnimateAttack | dw Lattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw LIdle1Monster109 | db WaitImpactProjectile71297132RIdle1Monster110: equ $4000 + (200*128) + (032/2) - 128 7133RIdle2Monster110: equ $4000 + (200*128) + (000/2) - 128 7135LIdle1Monster110: equ $4000 + (200*128) + (064/2) - 128 7136LIdle2Monster110: equ $4000 + (200*128) + (096/2) - 128 7138Monster110Move:7139 db 4 7140 db 1 7141 dw RIdle2Monster1107142 7143 dw LIdle2Monster1107144Monster110Idle:7145 db 12 7146 db 2 7147 dw RIdle1Monster1107148 dw RIdle2Monster1107149 7150 dw LIdle1Monster1107151 dw LIdle2Monster1107152Monster110AttackPatternRight:7153 db AnimateAttack | dw RIdle2Monster110 | db 000,AnimateAttack | dw RIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile7154Monster110AttackPatternLeft:7155 db AnimateAttack | dw LIdle2Monster110 | db 000,AnimateAttack | dw LIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile715771617163RIdle1Monster111: equ $4000 + (160*128) + (064/2) - 128 7164RIdle2Monster111: equ $4000 + (160*128) + (096/2) - 128 7165RIdle3Monster111: equ $4000 + (160*128) + (128/2) - 128 7167LIdle1Monster111: equ $4000 + (160*128) + (224/2) - 128 7168LIdle2Monster111: equ $4000 + (160*128) + (192/2) - 128 7169LIdle3Monster111: equ $4000 + (160*128) + (160/2) - 128 7171Monster111Move:7172Monster111Idle:7173 db 05 7174 db 3 7175 dw RIdle1Monster1117176 dw RIdle2Monster1117177 dw RIdle3Monster1117178 7179 dw LIdle1Monster1117180 dw LIdle2Monster1117181 dw LIdle3Monster11171837186RIdle1Monster112: equ $4000 + (192*128) + (064/2) - 128 7187RIdle2Monster112: equ $4000 + (192*128) + (096/2) - 128 7188RAttack1Monster112: equ $4000 + (192*128) + (128/2) - 128 7190LIdle1Monster112: equ $4000 + (192*128) + (224/2) - 128 7191LIdle2Monster112: equ $4000 + (192*128) + (192/2) - 128 7192LAttack1Monster112: equ $4000 + (192*128) + (160/2) - 128 7194Monster112Move:7195Monster112Idle:7196 db 06 7197 db 2 7198 dw RIdle1Monster1127199 dw RIdle2Monster1127200 7201 dw LIdle1Monster1127202 dw LIdle2Monster1127203Monster112AttackPatternRight:7204 db AnimateAttack | dw RAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile7205Monster112AttackPatternLeft:7206 db AnimateAttack | dw LAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile72087211RIdle1Monster113: equ $4000 + (224*128) + (064/2) - 128 7212RIdle2Monster113: equ $4000 + (224*128) + (096/2) - 128 7213RAttack1Monster113: equ $4000 + (224*128) + (128/2) - 128 7215LIdle1Monster113: equ $4000 + (224*128) + (224/2) - 128 7216LIdle2Monster113: equ $4000 + (224*128) + (192/2) - 128 7217LAttack1Monster113: equ $4000 + (224*128) + (160/2) - 128 7219Monster113Move:7220Monster113Idle:7221 db 09 7222 db 2 7223 dw RIdle1Monster1137224 dw RIdle2Monster1137225 7226 dw LIdle1Monster1137227 dw LIdle2Monster1137228Monster113AttackPatternRight:7229 db AnimateAttack | dw RAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile7230Monster113AttackPatternLeft:7231 db AnimateAttack | dw LAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile72337236RIdle1Monster114: equ $4000 + (176*128) + (000/2) - 128 7237RIdle2Monster114: equ $4000 + (176*128) + (032/2) - 128 7239LIdle1Monster114: equ $4000 + (216*128) + (032/2) - 128 7240LIdle2Monster114: equ $4000 + (216*128) + (000/2) - 128 7242Monster114Move:7243Monster114Idle:7244 db 08 7245 db 2 7246 dw RIdle1Monster1147247 dw RIdle2Monster1147248 7249 dw LIdle1Monster1147250 dw LIdle2Monster11472527255RIdle1Monster115: equ $4000 + (120*128) + (096/2) - 128 7256RIdle2Monster115: equ $4000 + (120*128) + (128/2) - 128 7257RAttack1Monster115: equ $4000 + (184*128) + (128/2) - 128 7259LIdle1Monster115: equ $4000 + (152*128) + (128/2) - 128 7260LIdle2Monster115: equ $4000 + (152*128) + (096/2) - 128 7261LAttack1Monster115: equ $4000 + (216*128) + (128/2) - 128 7263Monster115Move:7264Monster115Idle:7265 db 06 7266 db 2 7267 dw RIdle1Monster1157268 dw RIdle2Monster1157269 7270 dw LIdle1Monster1157271 dw LIdle2Monster1157272Monster115AttackPatternRight:7273 db AnimateAttack | dw RAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile7274Monster115AttackPatternLeft:7275 db AnimateAttack | dw LAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile72777280RIdle1Monster116: equ $4000 + (160*128) + (160/2) - 128 7281RIdle2Monster116: equ $4000 + (160*128) + (192/2) - 128 7282RAttack1Monster116: equ $4000 + (160*128) + (224/2) - 128 7284LIdle1Monster116: equ $4000 + (192*128) + (224/2) - 128 7285LIdle2Monster116: equ $4000 + (192*128) + (192/2) - 128 7286LAttack1Monster116: equ $4000 + (192*128) + (160/2) - 128 7288Monster116Move:7289Monster116Idle:7290 db 06 7291 db 2 7292 dw RIdle1Monster1167293 dw RIdle2Monster1167294 7295 dw LIdle1Monster1167296 dw LIdle2Monster1167297Monster116AttackPatternRight:7298 db AnimateAttack | dw RAttack1Monster116 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7299Monster116AttackPatternRightUp:7300 db AnimateAttack | dw RAttack1Monster116 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7301Monster116AttackPatternRightDown:7302 db AnimateAttack | dw RAttack1Monster116 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7303Monster116AttackPatternLeft:7304 db AnimateAttack | dw LAttack1Monster116 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7305Monster116AttackPatternLeftUp:7306 db AnimateAttack | dw LAttack1Monster116 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7307Monster116AttackPatternLeftDown:7308 db AnimateAttack | dw LAttack1Monster116 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73107313RIdle1Monster117: equ $4000 + (000*128) + (000/2) - 128 7314RIdle2Monster117: equ $4000 + (000*128) + (032/2) - 128 7315RIdle3Monster117: equ $4000 + (000*128) + (064/2) - 128 7316RAttack1Monster117: equ $4000 + (000*128) + (096/2) - 128 7318LIdle1Monster117: equ $4000 + (000*128) + (224/2) - 128 7319LIdle2Monster117: equ $4000 + (000*128) + (192/2) - 128 7320LIdle3Monster117: equ $4000 + (000*128) + (160/2) - 128 7321LAttack1Monster117: equ $4000 + (000*128) + (128/2) - 128 7323Monster117Move:7324Monster117Idle:7325 db 04 7326 db 3 7327 dw RIdle1Monster1177328 dw RIdle2Monster1177329 dw RIdle3Monster1177330 7331 dw LIdle1Monster1177332 dw LIdle2Monster1177333 dw LIdle3Monster1177334Monster117AttackPatternRight:7335 db AnimateAttack | dw RAttack1Monster117 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7336Monster117AttackPatternRightUp:7337 db AnimateAttack | dw RAttack1Monster117 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7338Monster117AttackPatternRightDown:7339 db AnimateAttack | dw RAttack1Monster117 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7340Monster117AttackPatternLeft:7341 db AnimateAttack | dw LAttack1Monster117 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7342Monster117AttackPatternLeftUp:7343 db AnimateAttack | dw LAttack1Monster117 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7344Monster117AttackPatternLeftDown:7345 db AnimateAttack | dw LAttack1Monster117 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73477350RIdle1Monster118: equ $4000 + (064*128) + (000/2) - 128 7351RIdle2Monster118: equ $4000 + (064*128) + (032/2) - 128 7352RAttack1Monster118: equ $4000 + (064*128) + (064/2) - 128 7354LIdle1Monster118: equ $4000 + (064*128) + (160/2) - 128 7355LIdle2Monster118: equ $4000 + (064*128) + (128/2) - 128 7356LAttack1Monster118: equ $4000 + (064*128) + (096/2) - 128 7358Monster118Move:7359Monster118Idle:7360 db 06 7361 db 2 7362 dw RIdle1Monster1187363 dw RIdle2Monster1187364 7365 dw LIdle1Monster1187366 dw LIdle2Monster1187367Monster118AttackPatternRight:7368 db AnimateAttack | dw RAttack1Monster118 | db 003 | db ShowBeingHitSprite,000,000,000,007,InitiateAttack7369Monster118AttackPatternRightUp:7370 db AnimateAttack | dw RAttack1Monster118 | db 002 | db ShowBeingHitSprite,000,000,000,006,InitiateAttack7371Monster118AttackPatternRightDown:7372 db AnimateAttack | dw RAttack1Monster118 | db 004 | db ShowBeingHitSprite,000,000,000,008,InitiateAttack7373Monster118AttackPatternLeft:7374 db AnimateAttack | dw LAttack1Monster118 | db 007 | db ShowBeingHitSprite,000,000,000,003,InitiateAttack7375Monster118AttackPatternLeftUp:7376 db AnimateAttack | dw LAttack1Monster118 | db 008 | db ShowBeingHitSprite,000,000,000,004,InitiateAttack7377Monster118AttackPatternLeftDown:7378 db AnimateAttack | dw LAttack1Monster118 | db 006 | db ShowBeingHitSprite,000,000,000,002,InitiateAttack73807383RIdle1Monster119: equ $4000 + (032*128) + (000/2) - 128 7384RIdle2Monster119: equ $4000 + (032*128) + (032/2) - 128 7385RAttack1Monster119: equ $4000 + (032*128) + (064/2) - 128 7386RAttack2Monster119: equ $4000 + (032*128) + (096/2) - 128 7388LIdle1Monster119: equ $4000 + (032*128) + (224/2) - 128 7389LIdle2Monster119: equ $4000 + (032*128) + (192/2) - 128 7390LAttack1Monster119: equ $4000 + (032*128) + (160/2) - 128 7391LAttack2Monster119: equ $4000 + (032*128) + (128/2) - 128 7393Monster119Move:7394Monster119Idle:7395 db 06 7396 db 2 7397 dw RIdle1Monster1197398 dw RIdle2Monster1197399 7400 dw LIdle1Monster1197401 dw LIdle2Monster1197402Monster119AttackPatternRight:7403 db AnimateAttack | dw RAttack1Monster119 | db 000,000,000,AnimateAttack | dw RAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile7404Monster119AttackPatternLeft:7405 db AnimateAttack | dw LAttack1Monster119 | db 000,000,000,AnimateAttack | dw LAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile74077410RIdle1Monster120: equ $4000 + (064*128) + (192/2) - 128 7411RIdle2Monster120: equ $4000 + (064*128) + (224/2) - 128 7412RAttack1Monster120: equ $4000 + (096*128) + (000/2) - 128 7414LIdle1Monster120: equ $4000 + (096*128) + (096/2) - 128 7415LIdle2Monster120: equ $4000 + (096*128) + (064/2) - 128 7416LAttack1Monster120: equ $4000 + (096*128) + (032/2) - 128 7418Monster120Move:7419Monster120Idle:7420 db 06 7421 db 2 7422 dw RIdle1Monster1207423 dw RIdle2Monster1207424 7425 dw LIdle1Monster1207426 dw LIdle2Monster1207427Monster120AttackPatternRight:7428 db AnimateAttack | dw RAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile7429Monster120AttackPatternLeft:7430 db AnimateAttack | dw LAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile74327435RIdle1Monster121: equ $4000 + (128*128) + (000/2) - 128 7436RIdle2Monster121: equ $4000 + (128*128) + (048/2) - 128 7437RIdle3Monster121: equ $4000 + (128*128) + (096/2) - 128 7439LIdle1Monster121: equ $4000 + (192*128) + (096/2) - 128 7440LIdle2Monster121: equ $4000 + (192*128) + (048/2) - 128 7441LIdle3Monster121: equ $4000 + (192*128) + (000/2) - 128 7443Monster121Move:7444Monster121Idle:7445 db 04 7446 db 4 7447 dw RIdle1Monster1217448 dw RIdle2Monster1217449 dw RIdle1Monster1217450 dw RIdle3Monster1217451 7452 dw LIdle1Monster1217453 dw LIdle2Monster1217454 dw LIdle1Monster1217455 dw LIdle3Monster121745774607462RIdle1Monster122: equ $4000 + (096*128) + (128/2) - 128 7463RIdle2Monster122: equ $4000 + (096*128) + (144/2) - 128 7464RIdle3Monster122: equ $4000 + (096*128) + (160/2) - 128 7465RIdle4Monster122: equ $4000 + (096*128) + (176/2) - 128 7467LIdle1Monster122: equ $4000 + (096*128) + (240/2) - 128 7468LIdle2Monster122: equ $4000 + (096*128) + (224/2) - 128 7469LIdle3Monster122: equ $4000 + (096*128) + (208/2) - 128 7470LIdle4Monster122: equ $4000 + (096*128) + (192/2) - 128 7472Monster122Move:7473Monster122Idle:7474 db 5 7475 db 6 7476 dw RIdle1Monster1227477 dw RIdle2Monster1227478 dw RIdle3Monster1227479 dw RIdle4Monster1227480 dw RIdle3Monster1227481 dw RIdle2Monster1227482 7483 dw LIdle1Monster1227484 dw LIdle2Monster1227485 dw LIdle3Monster1227486 dw LIdle4Monster1227487 dw LIdle3Monster1227488 dw LIdle2Monster1227489Monster122AttackPatternRight:7490 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 003,000,ShowBeingHitSprite,007,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7491Monster122AttackPatternRightUp:7492 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 002,000,ShowBeingHitSprite,006,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7493Monster122AttackPatternRightDown:7494 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 004,000,ShowBeingHitSprite,008,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7495Monster122AttackPatternLeft:7496 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 007,000,ShowBeingHitSprite,003,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7497Monster122AttackPatternLeftUp:7498 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 008,000,ShowBeingHitSprite,004,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7499Monster122AttackPatternLeftDown:7500 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 006,000,ShowBeingHitSprite,002,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack75017504RIdle1Monster123: equ $4000 + (128*128) + (144/2) - 128 7505RIdle2Monster123: equ $4000 + (128*128) + (160/2) - 128 7506RIdle3Monster123: equ $4000 + (128*128) + (176/2) - 128 7507RIdle4Monster123: equ $4000 + (128*128) + (192/2) - 128 7509LIdle1Monster123: equ $4000 + (160*128) + (144/2) - 128 7510LIdle2Monster123: equ $4000 + (128*128) + (240/2) - 128 7511LIdle3Monster123: equ $4000 + (128*128) + (224/2) - 128 7512LIdle4Monster123: equ $4000 + (128*128) + (208/2) - 128 7514Monster123Move:7515Monster123Idle:7516 db 04 7517 db 6 7518 dw RIdle1Monster1237519 dw RIdle2Monster1237520 dw RIdle3Monster1237521 dw RIdle4Monster1237522 dw RIdle3Monster1237523 dw RIdle2Monster1237524 7525 dw LIdle1Monster1237526 dw LIdle2Monster1237527 dw LIdle3Monster1237528 dw LIdle4Monster1237529 dw LIdle3Monster1237530 dw LIdle2Monster12375327535RIdle1Monster124: equ $4000 + (000*128) + (224/2) - 128 7536RIdle2Monster124: equ $4000 + (000*128) + (240/2) - 128 7538LIdle1Monster124: equ $4000 + (032*128) + (240/2) - 128 7539LIdle2Monster124: equ $4000 + (032*128) + (224/2) - 128 7541Monster124Move:7542Monster124Idle:7543 db 08 7544 db 2 7545 dw RIdle1Monster1247546 dw RIdle2Monster1247547 7548 dw LIdle1Monster1247549 dw LIdle2Monster12475517554RIdle1Monster125: equ $4000 + (184*128) + (128/2) - 128 7555RIdle2Monster125: equ $4000 + (184*128) + (144/2) - 128 7556Rattack1Monster125: equ $4000 + (184*128) + (160/2) - 128 7558LIdle1Monster125: equ $4000 + (184*128) + (208/2) - 128 7559LIdle2Monster125: equ $4000 + (184*128) + (192/2) - 128 7560Lattack1Monster125: equ $4000 + (184*128) + (176/2) - 128 7562Monster125Move:7563Monster125Idle:7564 db 07 7565 db 2 7566 dw RIdle1Monster1257567 dw RIdle2Monster1257568 7569 dw LIdle1Monster1257570 dw LIdle2Monster1257571Monster125AttackPatternRight:7572 db AnimateAttack | dw RAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile7573Monster125AttackPatternLeft:7574 db AnimateAttack | dw LAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile757575857587RIdle1Monster126: equ $4000 + (192*128) + (176/2) - 128 7588RIdle2Monster126: equ $4000 + (192*128) + (192/2) - 128 7590LIdle1Monster126: equ $4000 + (192*128) + (224/2) - 128 7591LIdle2Monster126: equ $4000 + (192*128) + (208/2) - 128 7593Monster126Move:7594Monster126Idle:7595 db 08 7596 db 2 7597 dw RIdle1Monster1267598 dw RIdle2Monster1267599 7600 dw LIdle1Monster1267601 dw LIdle2Monster12676027605RIdle1Monster127: equ $4000 + (000*128) + (000/2) - 128 7606RIdle2Monster127: equ $4000 + (000*128) + (032/2) - 128 7607RIdle3Monster127: equ $4000 + (000*128) + (064/2) - 128 7608RAttack1Monster127: equ $4000 + (000*128) + (096/2) - 128 7609RAttack2Monster127: equ $4000 + (000*128) + (128/2) - 128 7610RAttack3Monster127: equ $4000 + (000*128) + (160/2) - 128 7612LIdle1Monster127: equ $4000 + (048*128) + (128/2) - 128 7613LIdle2Monster127: equ $4000 + (048*128) + (096/2) - 128 7614LIdle3Monster127: equ $4000 + (048*128) + (064/2) - 128 7615LAttack1Monster127: equ $4000 + (048*128) + (032/2) - 128 7616LAttack2Monster127: equ $4000 + (048*128) + (000/2) - 128 7617LAttack3Monster127: equ $4000 + (000*128) + (208/2) - 128 7619Monster127Move:7620Monster127Idle:7621 db 06 7622 db 4 7623 dw RIdle1Monster1277624 dw RIdle2Monster1277625 dw RIdle3Monster1277626 dw RIdle2Monster1277627 7628 dw LIdle1Monster1277629 dw LIdle2Monster1277630 dw LIdle3Monster1277631 dw LIdle2Monster1277633Monster127AttackPatternRight:7634 db 000,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 000,InitiateAttack7635Monster127AttackPatternRightUp:7636 db 008,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 004,InitiateAttack7637Monster127AttackPatternRightDown:7638 db 006,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 002,InitiateAttack7639Monster127AttackPatternLeft:7640 db 000,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 000,InitiateAttack7641Monster127AttackPatternLeftUp:7642 db 002,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 006,InitiateAttack7643Monster127AttackPatternLeftDown:7644 db 004,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 008,InitiateAttack76477650RIdle1Monster128: equ $4000 + (096*128) + (000/2) - 128 7651RIdle2Monster128: equ $4000 + (096*128) + (016/2) - 128 7652RIdle3Monster128: equ $4000 + (096*128) + (032/2) - 128 7654LIdle1Monster128: equ $4000 + (096*128) + (080/2) - 128 7655LIdle2Monster128: equ $4000 + (096*128) + (064/2) - 128 7656LIdle3Monster128: equ $4000 + (096*128) + (048/2) - 128 7658Monster128Move:7659 db 08 7660 db 1 7661 dw RIdle2Monster1287662 7663 dw LIdle2Monster1287664Monster128Idle:7665 db 08 7666 db 4 7667 dw RIdle1Monster1287668 dw RIdle2Monster1287669 dw RIdle3Monster1287670 dw RIdle2Monster1287671 7672 dw LIdle1Monster1287673 dw LIdle2Monster1287674 dw LIdle3Monster1287675 dw LIdle2Monster1287676Monster128AttackPatternRight:7677 db AnimateAttack | dw RIdle2Monster128 | db 003 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 007,InitiateAttack7678Monster128AttackPatternRightUp:7679 db AnimateAttack | dw RIdle2Monster128 | db 002 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 006,InitiateAttack7680Monster128AttackPatternRightDown:7681 db AnimateAttack | dw RIdle2Monster128 | db 004 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 008,InitiateAttack7682Monster128AttackPatternLeft:7683 db AnimateAttack | dw LIdle2Monster128 | db 007 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 003,InitiateAttack7684Monster128AttackPatternLeftUp:7685 db AnimateAttack | dw LIdle2Monster128 | db 008 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 004,InitiateAttack7686Monster128AttackPatternLeftDown:7687 db AnimateAttack | dw LIdle2Monster128 | db 006 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 002,InitiateAttack76897692RIdle1Monster129: equ $4000 + (096*128) + (224/2) - 128 7693RIdle2Monster129: equ $4000 + (136*128) + (192/2) - 128 7694RAttack1Monster129: equ $4000 + (136*128) + (224/2) - 128 7696LIdle1Monster129: equ $4000 + (176*128) + (224/2) - 128 7697LIdle2Monster129: equ $4000 + (176*128) + (192/2) - 128 7698LAttack1Monster129: equ $4000 + (176*128) + (160/2) - 128 7700Monster129Move:7701 db 04 7702 db 2 7703 dw RIdle1Monster1297704 dw RIdle2Monster1297705 7706 dw LIdle1Monster1297707 dw LIdle2Monster1297708Monster129Idle:7709 db 08 7710 db 2 7711 dw RIdle1Monster1297712 dw RIdle2Monster1297713 7714 dw LIdle1Monster1297715 dw LIdle2Monster1297716Monster129AttackPatternRight:7717 db AnimateAttack | dw RAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile7718Monster129AttackPatternLeft:7719 db AnimateAttack | dw LAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile 77207723RIdle1Monster130: equ $4000 + (176*128) + (000/2) - 128 7724RIdle2Monster130: equ $4000 + (176*128) + (016/2) - 128 7725RIdle3Monster130: equ $4000 + (176*128) + (032/2) - 128 7726RAttack1Monster130: equ $4000 + (176*128) + (048/2) - 128 7728LIdle1Monster130: equ $4000 + (176*128) + (144/2) - 128 7729LIdle2Monster130: equ $4000 + (176*128) + (128/2) - 128 7730LIdle3Monster130: equ $4000 + (176*128) + (112/2) - 128 7731LAttack1Monster130: equ $4000 + (176*128) + (080/2) - 128 7733Monster130Move:7734Monster130Idle:7735 db 05 7736 db 4 7737 dw RIdle1Monster1307738 dw RIdle2Monster1307739 dw RIdle3Monster1307740 dw RIdle2Monster1307741 7742 dw LIdle1Monster1307743 dw LIdle2Monster1307744 dw LIdle3Monster1307745 dw LIdle2Monster1307746Monster130AttackPatternRight:7747 db AnimateAttack | dw RIdle1Monster130 | db 003,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,007,InitiateAttack7748Monster130AttackPatternRightUp:7749 db AnimateAttack | dw RIdle1Monster130 | db 002,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,006,InitiateAttack7750Monster130AttackPatternRightDown:7751 db AnimateAttack | dw RIdle1Monster130 | db 004,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,008,InitiateAttack7752Monster130AttackPatternLeft:7753 db AnimateAttack | dw LIdle1Monster130 | db 007,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,003,InitiateAttack7754Monster130AttackPatternLeftUp:7755 db AnimateAttack | dw LIdle1Monster130 | db 008,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,004,InitiateAttack7756Monster130AttackPatternLeftDown:7757 db AnimateAttack | dw LIdle1Monster130 | db 006,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,002,InitiateAttack77597762RIdle1Monster131: equ $4000 + (216*128) + (000/2) - 128 7763RIdle2Monster131: equ $4000 + (216*128) + (016/2) - 128 7764RIdle3Monster131: equ $4000 + (216*128) + (032/2) - 128 7765RAttack1Monster131: equ $4000 + (216*128) + (048/2) - 128 7766RAttack2Monster131: equ $4000 + (216*128) + (064/2) - 128 7768LIdle1Monster131: equ $4000 + (216*128) + (144/2) - 128 7769LIdle2Monster131: equ $4000 + (216*128) + (128/2) - 128 7770LIdle3Monster131: equ $4000 + (216*128) + (112/2) - 128 7771LAttack1Monster131: equ $4000 + (216*128) + (096/2) - 128 7772LAttack2Monster131: equ $4000 + (216*128) + (080/2) - 128 7774Monster131Move:7775Monster131Idle:7776 db 05 7777 db 4 7778 dw RIdle1Monster1317779 dw RIdle2Monster1317780 dw RIdle3Monster1317781 dw RIdle2Monster1317782 7783 dw LIdle1Monster1317784 dw LIdle2Monster1317785 dw LIdle3Monster1317786 dw LIdle2Monster1317787Monster131AttackPatternRight:7788 db AnimateAttack | dw RIdle1Monster131 | db 003,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 007,InitiateAttack7789Monster131AttackPatternRightUp:7790 db AnimateAttack | dw RIdle1Monster131 | db 002,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 006,InitiateAttack7791Monster131AttackPatternRightDown:7792 db AnimateAttack | dw RIdle1Monster131 | db 004,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 008,InitiateAttack7793Monster131AttackPatternLeft:7794 db AnimateAttack | dw LIdle1Monster131 | db 007,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 003,InitiateAttack7795Monster131AttackPatternLeftUp:7796 db AnimateAttack | dw LIdle1Monster131 | db 008,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 004,InitiateAttack7797Monster131AttackPatternLeftDown:7798 db AnimateAttack | dw LIdle1Monster131 | db 006,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 002,InitiateAttack78067809RIdle1Monster132: equ $4000 + (136*128) + (000/2) - 128 7810RIdle2Monster132: equ $4000 + (136*128) + (016/2) - 128 7811RAttack1Monster132: equ $4000 + (136*128) + (032/2) - 128 7812RAttack2Monster132: equ $4000 + (136*128) + (064/2) - 128 7814LIdle1Monster132: equ $4000 + (136*128) + (176/2) - 128 7815LIdle2Monster132: equ $4000 + (136*128) + (160/2) - 128 7816LAttack1Monster132: equ $4000 + (136*128) + (128/2) - 128 7817LAttack2Monster132: equ $4000 + (136*128) + (096/2) - 128 7819Monster132Move:7820Monster132Idle:7821 db 08 7822 db 2 7823 dw RIdle1Monster1327824 dw RIdle2Monster1327825 7826 dw LIdle1Monster1327827 dw LIdle2Monster1327828Monster132AttackPatternRight:7829 db AnimateAttack | dw RIdle1Monster132 | db 000,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,000,InitiateAttack7830Monster132AttackPatternRightUp:7831 db AnimateAttack | dw RIdle1Monster132 | db 008,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,004,InitiateAttack7832Monster132AttackPatternRightDown:7833 db AnimateAttack | dw RIdle1Monster132 | db 006,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,002,InitiateAttack7834Monster132AttackPatternLeft:7835 db AnimateAttack | dw LIdle1Monster132 | db 000,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,000,InitiateAttack7836Monster132AttackPatternLeftUp:7837 db AnimateAttack | dw LIdle1Monster132 | db 002,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,006,InitiateAttack7838Monster132AttackPatternLeftDown:7839 db AnimateAttack | dw LIdle1Monster132 | db 004,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,008,InitiateAttack78417844RIdle1Monster133: equ $4000 + (096*128) + (096/2) - 128 7845RIdle2Monster133: equ $4000 + (096*128) + (112/2) - 128 7846RAttack1Monster133: equ $4000 + (096*128) + (128/2) - 128 7848LIdle1Monster133: equ $4000 + (096*128) + (208/2) - 128 7849LIdle2Monster133: equ $4000 + (096*128) + (192/2) - 128 7850LAttack1Monster133: equ $4000 + (096*128) + (160/2) - 128 7852Monster133Move:7853Monster133Idle:7854 db 08 7855 db 2 7856 dw RIdle1Monster1337857 dw RIdle2Monster1337858 7859 dw LIdle1Monster1337860 dw LIdle2Monster1337861Monster133AttackPatternRight:7862 db AnimateAttack | dw RIdle1Monster133 | db 000,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,000,InitiateAttack7863Monster133AttackPatternRightUp:7864 db AnimateAttack | dw RIdle1Monster133 | db 008,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,004,InitiateAttack7865Monster133AttackPatternRightDown:7866 db AnimateAttack | dw RIdle1Monster133 | db 006,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,002,InitiateAttack7867Monster133AttackPatternLeft:7868 db AnimateAttack | dw LIdle1Monster133 | db 000,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,000,InitiateAttack7869Monster133AttackPatternLeftUp:7870 db AnimateAttack | dw LIdle1Monster133 | db 002,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,006,InitiateAttack7871Monster133AttackPatternLeftDown:7872 db AnimateAttack | dw LIdle1Monster133 | db 004,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,008,InitiateAttack78747877RIdle1Monster134: equ $4000 + (192*128) + (240/2) - 128 7878RIdle2Monster134: equ $4000 + (224*128) + (144/2) - 128 7879RAttack1Monster134: equ $4000 + (224*128) + (160/2) - 128 7881LIdle1Monster134: equ $4000 + (224*128) + (240/2) - 128 7882LIdle2Monster134: equ $4000 + (224*128) + (224/2) - 128 7883LAttack1Monster134: equ $4000 + (224*128) + (192/2) - 128 7885Monster134Move:7886Monster134Idle:7887 db 08 7888 db 2 7889 dw RIdle1Monster1347890 dw RIdle2Monster1347891 7892 dw LIdle1Monster1347893 dw LIdle2Monster1347894Monster134AttackPatternRight:7895 db AnimateAttack | dw RIdle1Monster134 | db 000,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,000,InitiateAttack7896Monster134AttackPatternRightUp:7897 db AnimateAttack | dw RIdle1Monster134 | db 008,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,004,InitiateAttack7898Monster134AttackPatternRightDown:7899 db AnimateAttack | dw RIdle1Monster134 | db 006,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,002,InitiateAttack7900Monster134AttackPatternLeft:7901 db AnimateAttack | dw LIdle1Monster134 | db 000,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,000,InitiateAttack7902Monster134AttackPatternLeftUp:7903 db AnimateAttack | dw LIdle1Monster134 | db 002,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,006,InitiateAttack7904Monster134AttackPatternLeftDown:7905 db AnimateAttack | dw LIdle1Monster134 | db 004,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,008,InitiateAttack79077910RIdle1Monster135: equ $4000 + (080*128) + (000/2) - 128 7911RIdle2Monster135: equ $4000 + (080*128) + (032/2) - 128 7912RIdle3Monster135: equ $4000 + (080*128) + (064/2) - 128 7913RIdle4Monster135: equ $4000 + (080*128) + (096/2) - 128 7914RIdle5Monster135: equ $4000 + (080*128) + (128/2) - 128 7915RIdle6Monster135: equ $4000 + (080*128) + (160/2) - 128 7916RAttack1Monster135: equ $4000 + (080*128) + (192/2) - 128 7918LIdle1Monster135: equ $4000 + (128*128) + (192/2) - 128 7919LIdle2Monster135: equ $4000 + (128*128) + (160/2) - 128 7920LIdle3Monster135: equ $4000 + (128*128) + (128/2) - 128 7921LIdle4Monster135: equ $4000 + (128*128) + (096/2) - 128 7922LIdle5Monster135: equ $4000 + (128*128) + (064/2) - 128 7923LIdle6Monster135: equ $4000 + (128*128) + (032/2) - 128 7924LAttack1Monster135: equ $4000 + (128*128) + (000/2) - 128 7926Monster135Move:7927Monster135Idle:7928 db 02 7929 db 6 7930 dw RIdle1Monster1357931 dw RIdle2Monster1357932 dw RIdle3Monster1357933 dw RIdle4Monster1357934 dw RIdle5Monster1357935 dw RIdle6Monster1357936 7937 dw LIdle1Monster1357938 dw LIdle2Monster1357939 dw LIdle3Monster1357940 dw LIdle4Monster1357941 dw LIdle5Monster1357942 dw LIdle6Monster1357943Monster135AttackPatternRight:7944 db AnimateAttack | dw RIdle1Monster135 | db 003,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 007,InitiateAttack7945Monster135AttackPatternRightUp:7946 db AnimateAttack | dw RIdle1Monster135 | db 008,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 004,InitiateAttack7947Monster135AttackPatternRightDown:7948 db AnimateAttack | dw RIdle1Monster135 | db 006,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 002,InitiateAttack7949Monster135AttackPatternLeft:7950 db AnimateAttack | dw LIdle1Monster135 | db 007,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 003,InitiateAttack7951Monster135AttackPatternLeftUp:7952 db AnimateAttack | dw LIdle1Monster135 | db 008,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 004,InitiateAttack7953Monster135AttackPatternLeftDown:7954 db AnimateAttack | dw LIdle1Monster135 | db 006,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 002,InitiateAttack79567959RIdle1Monster136: equ $4000 + (136*128) + (000/2) - 128 7960RIdle2Monster136: equ $4000 + (184*128) + (000/2) - 128 7961RIdle3Monster136: equ $4000 + (184*128) + (016/2) - 128 7962RAttack1Monster136: equ $4000 + (136*128) + (016/2) - 128 7963RAttack2Monster136: equ $4000 + (136*128) + (032/2) - 128 7964RAttack3Monster136: equ $4000 + (136*128) + (048/2) - 128 7965RAttack4Monster136: equ $4000 + (136*128) + (064/2) - 128 7967LIdle1Monster136: equ $4000 + (136*128) + (144/2) - 128 7968LIdle2Monster136: equ $4000 + (184*128) + (048/2) - 128 7969LIdle3Monster136: equ $4000 + (184*128) + (032/2) - 128 7970LAttack1Monster136: equ $4000 + (136*128) + (128/2) - 128 7971LAttack2Monster136: equ $4000 + (136*128) + (112/2) - 128 7972LAttack3Monster136: equ $4000 + (136*128) + (096/2) - 128 7973LAttack4Monster136: equ $4000 + (136*128) + (080/2) - 128 7975Monster136Move:7976Monster136Idle:7977 db 06 7978 db 4 7979 dw RIdle1Monster1367980 dw RIdle2Monster1367981 dw RIdle1Monster1367982 dw RIdle3Monster1367983 7984 dw LIdle1Monster1367985 dw LIdle2Monster1367986 dw LIdle1Monster1367987 dw LIdle3Monster1367988Monster136AttackPatternRight:7989 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 003,003,ShowBeingHitSprite,000,007,007,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7990Monster136AttackPatternRightUp:7991 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 002,002,ShowBeingHitSprite,000,006,006,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7992Monster136AttackPatternRightDown:7993 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 004,004,ShowBeingHitSprite,000,008,008,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7994Monster136AttackPatternLeft:7995 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 007,007,ShowBeingHitSprite,000,003,003,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7996Monster136AttackPatternLeftUp:7997 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 008,008,ShowBeingHitSprite,000,004,004,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7998Monster136AttackPatternLeftDown:7999 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 006,006,ShowBeingHitSprite,000,002,002,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack80018004RIdle1Monster137: equ $4000 + (088*128) + (192/2) - 128 8005RIdle2Monster137: equ $4000 + (144*128) + (192/2) - 128 8006RIdle3Monster137: equ $4000 + (200*128) + (192/2) - 128 8008LIdle1Monster137: equ $4000 + (088*128) + (224/2) - 128 8009LIdle2Monster137: equ $4000 + (144*128) + (224/2) - 128 8010LIdle3Monster137: equ $4000 + (200*128) + (224/2) - 128 8012Monster137Move:8013Monster137Idle:8014 db 05 8015 db 3 8016 dw RIdle1Monster1378017 dw RIdle2Monster1378018 dw RIdle3Monster1378019 8020 dw LIdle1Monster1378021 dw LIdle2Monster1378022 dw LIdle3Monster13780248027RIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8028RIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8029RIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8030RIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8031RIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8032RIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8034LIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8035LIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8036LIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8037LIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8038LIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8039LIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8041Monster138Move:8042Monster138Idle:8043 db 02 8044 db 6 8045 dw RIdle6Monster1388046 dw RIdle1Monster1388047 dw RIdle2Monster1388048 dw RIdle3Monster1388049 dw RIdle4Monster1388050 dw RIdle5Monster1388051 8052 dw LIdle6Monster1388053 dw LIdle1Monster1388054 dw LIdle2Monster1388055 dw LIdle3Monster1388056 dw LIdle4Monster1388057 dw LIdle5Monster13880598062RIdle1Monster139: equ $4000 + (096*128) + (000/2) - 128 8063RIdle2Monster139: equ $4000 + (096*128) + (032/2) - 128 8064RIdle3Monster139: equ $4000 + (096*128) + (064/2) - 128 8065RIdle4Monster139: equ $4000 + (096*128) + (096/2) - 128 8066RIdle5Monster139: equ $4000 + (096*128) + (128/2) - 128 8067RIdle6Monster139: equ $4000 + (096*128) + (160/2) - 128 8068RIdle7Monster139: equ $4000 + (136*128) + (000/2) - 128 8069RIdle8Monster139: equ $4000 + (136*128) + (032/2) - 128 8070Rattack1Monster139: equ $4000 + (136*128) + (064/2) - 128 8072LIdle1Monster139: equ $4000 + (176*128) + (160/2) - 128 8073LIdle2Monster139: equ $4000 + (176*128) + (128/2) - 128 8074LIdle3Monster139: equ $4000 + (176*128) + (096/2) - 128 8075LIdle4Monster139: equ $4000 + (176*128) + (064/2) - 128 8076LIdle5Monster139: equ $4000 + (176*128) + (032/2) - 128 8077LIdle6Monster139: equ $4000 + (176*128) + (000/2) - 128 8078LIdle7Monster139: equ $4000 + (216*128) + (160/2) - 128 8079LIdle8Monster139: equ $4000 + (216*128) + (128/2) - 128 8080Lattack1Monster139: equ $4000 + (216*128) + (080/2) - 128 8082Monster139Move:8083Monster139Idle:8084 db 02 8085 db 8 8086 dw RIdle1Monster1398087 dw RIdle2Monster1398088 dw RIdle3Monster1398089 dw RIdle4Monster1398090 dw RIdle5Monster1398091 dw RIdle6Monster1398092 dw RIdle7Monster1398093 dw RIdle8Monster1398094 8095 dw LIdle1Monster1398096 dw LIdle2Monster1398097 dw LIdle3Monster1398098 dw LIdle4Monster1398099 dw LIdle5Monster1398100 dw LIdle6Monster1398101 dw LIdle7Monster1398102 dw LIdle8Monster1398103Monster139AttackPatternRight:8104 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8105Monster139AttackPatternRightUp:8106 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8107Monster139AttackPatternRightDown:8108 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8109Monster139AttackPatternLeft:8110 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8111Monster139AttackPatternLeftUp:8112 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8113Monster139AttackPatternLeftDown:8114 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack81158118RIdle1Monster140: equ $4000 + (000*128) + (000/2) - 128 8119RIdle2Monster140: equ $4000 + (000*128) + (032/2) - 128 8120RIdle3Monster140: equ $4000 + (000*128) + (064/2) - 128 8121RAttack1Monster140: equ $4000 + (000*128) + (096/2) - 128 8122RAttack2Monster140: equ $4000 + (000*128) + (160/2) - 128 8124LIdle1Monster140: equ $4000 + (040*128) + (192/2) - 128 8125LIdle2Monster140: equ $4000 + (040*128) + (160/2) - 128 8126LIdle3Monster140: equ $4000 + (040*128) + (128/2) - 128 8127LAttack1Monster140: equ $4000 + (040*128) + (064/2) - 128 8128LAttack2Monster140: equ $4000 + (040*128) + (000/2) - 128 8130Monster140Move:8131Monster140Idle:8132 db 04 8133 db 4 8134 dw RIdle1Monster1408135 dw RIdle3Monster1408136 dw RIdle2Monster1408137 dw RIdle3Monster1408138 8139 dw LIdle1Monster1408140 dw LIdle3Monster1408141 dw LIdle2Monster1408142 dw LIdle3Monster1408143Monster140AttackPatternRight:8144 db AnimateAttack | dw RIdle1Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,000,InitiateAttack8145Monster140AttackPatternRightUp:8146 db AnimateAttack | dw RIdle1Monster140 | db 008,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,004,InitiateAttack8147Monster140AttackPatternRightDown:8148 db AnimateAttack | dw RIdle1Monster140 | db 006,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,002,InitiateAttack8149Monster140AttackPatternLeft:8150 db AnimateAttack | dw LIdle1Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,000,InitiateAttack8151Monster140AttackPatternLeftUp:8152 db AnimateAttack | dw LIdle1Monster140 | db 002,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,006,InitiateAttack8153Monster140AttackPatternLeftDown:8154 db AnimateAttack | dw LIdle1Monster140 | db 004,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,008,InitiateAttack81568159RIdle1Monster141: equ $4000 + (068*128) + (000/2) - 128 8160RIdle2Monster141: equ $4000 + (068*128) + (064/2) - 128 8162LIdle1Monster141: equ $4000 + (068*128) + (192/2) - 128 8163LIdle2Monster141: equ $4000 + (068*128) + (128/2) - 128 8165Monster141Move:8166Monster141Idle:8167 db 04 8168 db 2 8169 dw RIdle1Monster1418170 dw RIdle2Monster1418171 8172 dw LIdle1Monster1418173 dw LIdle2Monster14181758178RIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8179RIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8180RIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8182LIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8183LIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8184LIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8186Monster142Move:8187Monster142Idle:8188 db 06 8189 db 3 8190 dw RIdle1Monster1428191 dw RIdle2Monster1428192 dw RIdle3Monster1428193 8194 dw LIdle1Monster1428195 dw LIdle2Monster1428196 dw LIdle3Monster14281988201RIdle1Monster143: equ $4000 + (176*128) + (000/2) - 128 8202RIdle2Monster143: equ $4000 + (176*128) + (016/2) - 128 8203RIdle3Monster143: equ $4000 + (176*128) + (032/2) - 128 8204RAttack1Monster143: equ $4000 + (176*128) + (048/2) - 128 8206LIdle1Monster143: equ $4000 + (176*128) + (112/2) - 128 8207LIdle2Monster143: equ $4000 + (176*128) + (096/2) - 128 8208LIdle3Monster143: equ $4000 + (176*128) + (080/2) - 128 8209LAttack1Monster143: equ $4000 + (176*128) + (064/2) - 128 8211Monster143Move:8212Monster143Idle:8213 db 06 8214 db 4 8215 dw RIdle1Monster1438216 dw RIdle2Monster1438217 dw RIdle1Monster1438218 dw RIdle3Monster1438219 8220 dw LIdle1Monster1438221 dw LIdle2Monster1438222 dw LIdle1Monster1438223 dw LIdle3Monster1438224Monster143AttackPatternRight:8225 db AnimateAttack | dw RAttack1Monster143 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8226Monster143AttackPatternRightUp:8227 db AnimateAttack | dw RAttack1Monster143 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8228Monster143AttackPatternRightDown:8229 db AnimateAttack | dw RAttack1Monster143 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8230Monster143AttackPatternLeft:8231 db AnimateAttack | dw LAttack1Monster143 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8232Monster143AttackPatternLeftUp:8233 db AnimateAttack | dw LAttack1Monster143 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8234Monster143AttackPatternLeftDown:8235 db AnimateAttack | dw LAttack1Monster143 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack82378240RIdle1Monster144: equ $4000 + (216*128) + (032/2) - 128 8241RIdle2Monster144: equ $4000 + (216*128) + (048/2) - 128 8242RAttack1Monster144: equ $4000 + (216*128) + (064/2) - 128 8244LIdle1Monster144: equ $4000 + (216*128) + (112/2) - 128 8245LIdle2Monster144: equ $4000 + (216*128) + (096/2) - 128 8246LAttack1Monster144: equ $4000 + (216*128) + (080/2) - 128 8248Monster144Move:8249Monster144Idle:8250 db 08 8251 db 2 8252 dw RIdle1Monster1448253 dw RIdle2Monster1448254 8255 dw LIdle1Monster1448256 dw LIdle2Monster1448257Monster144AttackPatternRight:8258 db AnimateAttack | dw Rattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile8259Monster144AttackPatternLeft:8260 db AnimateAttack | dw Lattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile82628265RIdle1Monster145: equ $4000 + (216*128) + (128/2) - 128 8266RIdle2Monster145: equ $4000 + (216*128) + (144/2) - 128 8267RIdle3Monster145: equ $4000 + (216*128) + (160/2) - 128 8268RAttack1Monster145: equ $4000 + (216*128) + (176/2) - 128 8270LIdle1Monster145: equ $4000 + (216*128) + (240/2) - 128 8271LIdle2Monster145: equ $4000 + (216*128) + (224/2) - 128 8272LIdle3Monster145: equ $4000 + (216*128) + (208/2) - 128 8273LAttack1Monster145: equ $4000 + (216*128) + (192/2) - 128 8275Monster145Move:8276Monster145Idle:8277 db 06 8278 db 3 8279 dw RIdle1Monster1458280 dw RIdle2Monster1458281 dw RIdle3Monster1458282 8283 dw LIdle1Monster1458284 dw LIdle2Monster1458285 dw LIdle3Monster1458286Monster145AttackPatternRight:8287 db AnimateAttack | dw RAttack1Monster145 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8288Monster145AttackPatternRightUp:8289 db AnimateAttack | dw RAttack1Monster145 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8290Monster145AttackPatternRightDown:8291 db AnimateAttack | dw RAttack1Monster145 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8292Monster145AttackPatternLeft:8293 db AnimateAttack | dw LAttack1Monster145 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8294Monster145AttackPatternLeftUp:8295 db AnimateAttack | dw LAttack1Monster145 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8296Monster145AttackPatternLeftDown:8297 db AnimateAttack | dw LAttack1Monster145 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack83018304RIdle1Monster146: equ $4000 + (176*128) + (128/2) - 128 8305RIdle2Monster146: equ $4000 + (176*128) + (144/2) - 128 8306RIdle3Monster146: equ $4000 + (176*128) + (160/2) - 128 8308LIdle1Monster146: equ $4000 + (176*128) + (208/2) - 128 8309LIdle2Monster146: equ $4000 + (176*128) + (192/2) - 128 8310LIdle3Monster146: equ $4000 + (176*128) + (176/2) - 128 8312Monster146Move:8313Monster146Idle:8314 db 06 8315 db 3 8316 dw RIdle1Monster1468317 dw RIdle2Monster1468318 dw RIdle3Monster1468319 8320 dw LIdle1Monster1468321 dw LIdle2Monster1468322 dw LIdle3Monster14683248327RIdle1Monster147: equ $4000 + (216*128) + (160/2) - 128 8328RIdle2Monster147: equ $4000 + (216*128) + (176/2) - 128 8329RIdle3Monster147: equ $4000 + (216*128) + (192/2) - 128 8331LIdle1Monster147: equ $4000 + (216*128) + (240/2) - 128 8332LIdle2Monster147: equ $4000 + (216*128) + (224/2) - 128 8333LIdle3Monster147: equ $4000 + (216*128) + (208/2) - 128 8335Monster147Move:8336Monster147Idle:8337 db 06 8338 db 3 8339 dw RIdle1Monster1478340 dw RIdle2Monster1478341 dw RIdle3Monster1478342 8343 dw LIdle1Monster1478344 dw LIdle2Monster1478345 dw LIdle3Monster14783478350RIdle1Monster148: equ $4000 + (176*128) + (224/2) - 128 8351RIdle2Monster148: equ $4000 + (176*128) + (240/2) - 128 8353LIdle1Monster148: equ $4000 + (216*128) + (000/2) - 128 8354LIdle2Monster148: equ $4000 + (216*128) + (016/2) - 128 8356Monster148Move:8357Monster148Idle:8358 db 06 8359 db 2 8360 dw RIdle1Monster1488361 dw RIdle2Monster1488362 8363 dw LIdle1Monster1488364 dw LIdle2Monster14883668369RIdle1Monster149: equ $4000 + (048*128) + (160/2) - 128 8370RIdle2Monster149: equ $4000 + (048*128) + (176/2) - 128 8371RIdle3Monster149: equ $4000 + (048*128) + (192/2) - 128 8372RAttack1Monster149: equ $4000 + (048*128) + (208/2) - 128 8373RAttack2Monster149: equ $4000 + (048*128) + (224/2) - 128 8374RAttack3Monster149: equ $4000 + (048*128) + (240/2) - 128 8376LIdle1Monster149: equ $4000 + (072*128) + (240/2) - 128 8377LIdle2Monster149: equ $4000 + (072*128) + (224/2) - 128 8378LIdle3Monster149: equ $4000 + (072*128) + (208/2) - 128 8379LAttack1Monster149: equ $4000 + (072*128) + (192/2) - 128 8380LAttack2Monster149: equ $4000 + (072*128) + (176/2) - 128 8381LAttack3Monster149: equ $4000 + (072*128) + (160/2) - 128 8383Monster149Move:8384Monster149Idle:8385 db 06 8386 db 3 8387 dw RIdle1Monster1498388 dw RIdle2Monster1498389 dw RIdle3Monster1498390 8391 dw LIdle1Monster1498392 dw LIdle2Monster1498393 dw LIdle3Monster1498395Monster149AttackPatternRight:8396 db AnimateAttack | dw Rattack1Monster149 | db 000,000,000,AnimateAttack | dw Rattack2Monster149 | db 000,000,000,AnimateAttack | dw Rattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile8397Monster149AttackPatternLeft:8398 db AnimateAttack | dw Lattack1Monster149 | db 000,000,000,AnimateAttack | dw Lattack2Monster149 | db 000,000,000,AnimateAttack | dw Lattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile84008403RIdle1Monster150: equ $4000 + (208*128) + (128/2) - 128 8404RAttack1Monster150: equ $4000 + (208*128) + (160/2) - 128 8406LIdle1Monster150: equ $4000 + (208*128) + (144/2) - 128 8407LAttack1Monster150: equ $4000 + (208*128) + (176/2) - 128 8409Monster150Move:8410 db 04 8411 db 2 8412 dw RAttack1Monster1508413 dw LAttack1Monster1508414 8415 dw LAttack1Monster1508416 dw RAttack1Monster1508418Monster150Idle:8419 db 10 8420 db 2 8421 dw RIdle1Monster1508422 dw LIdle1Monster1508423 8424 dw LIdle1Monster1508425 dw RIdle1Monster1508427Monster150AttackPatternRight:8428 db AnimateAttack | dw Rattack1Monster150 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8429Monster150AttackPatternLeft:8430 db AnimateAttack | dw LAttack1Monster150 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8431Monster150AttackPatternLeftUp:8432 db AnimateAttack | dw LAttack1Monster150 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8433Monster150AttackPatternLeftDown:8434 db AnimateAttack | dw LAttack1Monster150 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8435Monster150AttackPatternRightUp:8436 db AnimateAttack | dw Rattack1Monster150 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8437Monster150AttackPatternRightDown:8438 db AnimateAttack | dw Rattack1Monster150 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack84408443RIdle1Monster151: equ $4000 + (232*128) + (128/2) - 128 8444RIdle2Monster151: equ $4000 + (232*128) + (144/2) - 128 8446LIdle1Monster151: equ $4000 + (232*128) + (176/2) - 128 8447LIdle2Monster151: equ $4000 + (232*128) + (160/2) - 128 8449Monster151Move:8450Monster151Idle:8451 db 06 8452 db 2 8453 dw RIdle1Monster1518454 dw RIdle2Monster1518455 8456 dw LIdle1Monster1518457 dw LIdle2Monster15184598462RIdle1Monster152: equ $4000 + (208*128) + (192/2) - 128 8463RIdle2Monster152: equ $4000 + (208*128) + (208/2) - 128 8465LIdle1Monster152: equ $4000 + (208*128) + (240/2) - 128 8466LIdle2Monster152: equ $4000 + (208*128) + (224/2) - 128 8468Monster152Move:8469 db 04 8470 db 2 8471 dw RIdle1Monster1528472 dw RIdle2Monster1528473 8474 dw LIdle1Monster1528475 dw LIdle2Monster1528477Monster152Idle:8478 db 08 8479 db 3 8480 dw RIdle1Monster1528481 dw RIdle1Monster1528482 dw RIdle2Monster1528483 8484 dw LIdle1Monster1528485 dw LIdle1Monster1528486 dw LIdle2Monster1528488Monster152AttackPatternRight:8489 db AnimateAttack | dw RIdle2Monster152 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8490Monster152AttackPatternLeft:8491 db AnimateAttack | dw LIdle2Monster152 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8492Monster152AttackPatternLeftUp:8493 db AnimateAttack | dw LIdle2Monster152 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8494Monster152AttackPatternLeftDown:8495 db AnimateAttack | dw LIdle2Monster152 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8496Monster152AttackPatternRightUp:8497 db AnimateAttack | dw RIdle2Monster152 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8498Monster152AttackPatternRightDown:8499 db AnimateAttack | dw RIdle2Monster152 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack85018504RIdle1Monster153: equ $4000 + (208*128) + (000/2) - 128 8505RIdle2Monster153: equ $4000 + (208*128) + (016/2) - 128 8506RIdle3Monster153: equ $4000 + (208*128) + (032/2) - 128 8507RAttack1Monster153: equ $4000 + (208*128) + (048/2) - 128 8509LIdle1Monster153: equ $4000 + (208*128) + (112/2) - 128 8510LIdle2Monster153: equ $4000 + (208*128) + (096/2) - 128 8511LIdle3Monster153: equ $4000 + (208*128) + (080/2) - 128 8512LAttack1Monster153: equ $4000 + (208*128) + (064/2) - 128 8514Monster153Move:8515Monster153Idle:8516 db 06 8517 db 4 8518 dw RIdle1Monster1538519 dw RIdle2Monster1538520 dw RIdle3Monster1538521 dw RIdle2Monster1538522 8523 dw LIdle1Monster1538524 dw LIdle2Monster1538525 dw LIdle3Monster1538526 dw LIdle2Monster1538528Monster153AttackPatternRight:8529 db AnimateAttack | dw Rattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle2Monster153 | db WaitImpactProjectile8530Monster153AttackPatternLeft:8531 db AnimateAttack | dw Lattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle2Monster153 | db WaitImpactProjectile85328535RIdle1Monster154: equ $4000 + (168*128) + (192/2) - 128 8536RIdle2Monster154: equ $4000 + (168*128) + (208/2) - 128 8538LIdle1Monster154: equ $4000 + (168*128) + (240/2) - 128 8539LIdle2Monster154: equ $4000 + (168*128) + (224/2) - 128 8541Monster154Move:8542Monster154Idle:8543 db 09 8544 db 2 8545 dw RIdle1Monster1548546 dw RIdle2Monster1548547 8548 dw LIdle1Monster1548549 dw LIdle2Monster15485518554RIdle1Monster155: equ $4000 + (232*128) + (192/2) - 128 8555RIdle2Monster155: equ $4000 + (232*128) + (208/2) - 128 8557LIdle1Monster155: equ $4000 + (232*128) + (240/2) - 128 8558LIdle2Monster155: equ $4000 + (232*128) + (224/2) - 128 8560Monster155Move:8561Monster155Idle:8562 db 08 8563 db 2 8564 dw RIdle1Monster1558565 dw RIdle2Monster1558566 8567 dw LIdle1Monster1558568 dw LIdle2Monster15585708573RIdle1Monster156: equ $4000 + (160*128) + (160/2) - 128 8574RIdle2Monster156: equ $4000 + (160*128) + (192/2) - 128 8576LIdle1Monster156: equ $4000 + (192*128) + (144/2) - 128 8577LIdle2Monster156: equ $4000 + (160*128) + (224/2) - 128 8579Monster156Move:8580Monster156Idle:8581 db 08 8582 db 2 8583 dw RIdle1Monster1568584 dw RIdle2Monster1568585 8586 dw LIdle1Monster1568587 dw LIdle2Monster15685898592RIdle1Monster157: equ $4000 + (136*128) + (112/2) - 128 8593RIdle2Monster157: equ $4000 + (136*128) + (128/2) - 128 8594RIdle3Monster157: equ $4000 + (136*128) + (144/2) - 128 8595RIdle4Monster157: equ $4000 + (136*128) + (160/2) - 128 8596RAttack1Monster157: equ $4000 + (136*128) + (176/2) - 128 8598LIdle1Monster157: equ $4000 + (216*128) + (064/2) - 128 8599LIdle2Monster157: equ $4000 + (216*128) + (048/2) - 128 8600LIdle3Monster157: equ $4000 + (216*128) + (032/2) - 128 8601LIdle4Monster157: equ $4000 + (216*128) + (016/2) - 128 8602LAttack1Monster157: equ $4000 + (216*128) + (000/2) - 128 8604Monster157Move:8605Monster157Idle:8606 db 04 8607 db 4 8608 dw RIdle1Monster1578609 dw RIdle2Monster1578610 dw RIdle4Monster1578611 dw RIdle3Monster1578612 8613 dw LIdle1Monster1578614 dw LIdle2Monster1578615 dw LIdle4Monster1578616 dw LIdle3Monster1578617Monster157AttackPatternRight:8618 db AnimateAttack | dw RAttack1Monster157 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8619Monster157AttackPatternLeft:8620 db AnimateAttack | dw LAttack1Monster157 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8621Monster157AttackPatternLeftUp:8622 db AnimateAttack | dw LAttack1Monster157 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8623Monster157AttackPatternLeftDown:8624 db AnimateAttack | dw LAttack1Monster157 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8625Monster157AttackPatternRightUp:8626 db AnimateAttack | dw RAttack1Monster157 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8627Monster157AttackPatternRightDown:8628 db AnimateAttack | dw RAttack1Monster157 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack8630 8631 8632 86338636RIdle1Monster158: equ $4000 + (224*128) + (000/2) - 128 8637RIdle2Monster158: equ $4000 + (224*128) + (032/2) - 128 8638RIdle3Monster158: equ $4000 + (224*128) + (064/2) - 128 8639RAttack1Monster158: equ $4000 + (224*128) + (096/2) - 128 8641LIdle1Monster158: equ $4000 + (224*128) + (224/2) - 128 8642LIdle2Monster158: equ $4000 + (224*128) + (192/2) - 128 8643LIdle3Monster158: equ $4000 + (224*128) + (160/2) - 128 8644LAttack1Monster158: equ $4000 + (224*128) + (128/2) - 128 8646Monster158Move:8647Monster158Idle:8648 db 04 8649 db 4 8650 dw RIdle1Monster1588651 dw RIdle2Monster1588652 dw RIdle1Monster1588653 dw RIdle3Monster1588654 8655 dw LIdle1Monster1588656 dw LIdle2Monster1588657 dw LIdle1Monster1588658 dw LIdle3Monster1588659Monster158AttackPatternRight:8660 db AnimateAttack | dw RAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8661Monster158AttackPatternLeft:8662 db AnimateAttack | dw LAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8663 86658668RIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8669RAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8671LIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8672LAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8674Monster159Move:8675Monster159Idle:8676 db 10 8677 db 2 8678 dw RIdle1Monster1598679 dw RAttack1Monster1598680 8681 dw LIdle1Monster1598682 dw LAttack1Monster1598683Monster159AttackPatternRight:8684 db AnimateAttack | dw RAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8685Monster159AttackPatternLeft:8686 db AnimateAttack | dw LAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8687 86888691RIdle1Monster160: equ $4000 + (200*128) + (192/2) - 128 8692RIdle2Monster160: equ $4000 + (200*128) + (208/2) - 128 8694LIdle1Monster160: equ $4000 + (200*128) + (240/2) - 128 8695LIdle2Monster160: equ $4000 + (200*128) + (224/2) - 128 8697Monster160Move:8698Monster160Idle:8699 db 08 8700 db 2 8701 dw RIdle1Monster1608702 dw RIdle2Monster1608703 8704 dw LIdle1Monster1608705 dw LIdle2Monster16087078710RIdle1Monster161: equ $4000 + (184*128) + (064/2) - 128 8711RIdle2Monster161: equ $4000 + (184*128) + (080/2) - 128 8713LIdle1Monster161: equ $4000 + (184*128) + (112/2) - 128 8714LIdle2Monster161: equ $4000 + (184*128) + (096/2) - 128 8716Monster161Move:8717Monster161Idle:8718 db 08 8719 db 2 8720 dw RIdle1Monster1618721 dw RIdle2Monster1618722 8723 dw LIdle1Monster1618724 dw LIdle2Monster16187268729RIdle1Monster162: equ $4000 + (232*128) + (000/2) - 128 8730RIdle2Monster162: equ $4000 + (232*128) + (016/2) - 128 8732LIdle1Monster162: equ $4000 + (232*128) + (048/2) - 128 8733LIdle2Monster162: equ $4000 + (232*128) + (032/2) - 128 8735Monster162Move:8736Monster162Idle:8737 db 08 8738 db 2 8739 dw RIdle1Monster1628740 dw RIdle2Monster1628741 8742 dw LIdle1Monster1628743 dw LIdle2Monster16287458748RIdle1Monster163: equ $4000 + (208*128) + (064/2) - 128 8749RIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8750RIdle3Monster163: equ $4000 + (232*128) + (064/2) - 128 8751RIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8753LIdle1Monster163: equ $4000 + (232*128) + (064/2) - 128 8754LIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8755LIdle3Monster163: equ $4000 + (208*128) + (064/2) - 128 8756LIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8758Monster163Move:8759Monster163Idle:8760 db 05 8761 db 4 8762 dw RIdle1Monster1638763 dw RIdle2Monster1638764 dw RIdle3Monster1638765 dw RIdle4Monster1638766 8767 dw LIdle1Monster1638768 dw LIdle2Monster1638769 dw LIdle3Monster1638770 dw LIdle4Monster16387728775RIdle1Monster164: equ $4000 + (208*128) + (096/2) - 128 8776RIdle2Monster164: equ $4000 + (208*128) + (112/2) - 128 8777RIdle3Monster164: equ $4000 + (208*128) + (128/2) - 128 8778RAttack1Monster164: equ $4000 + (208*128) + (144/2) - 128 8780LIdle1Monster164: equ $4000 + (208*128) + (240/2) - 128 8781LIdle2Monster164: equ $4000 + (208*128) + (224/2) - 128 8782LIdle3Monster164: equ $4000 + (208*128) + (208/2) - 128 8783LAttack1Monster164: equ $4000 + (208*128) + (176/2) - 128 8785Monster164Move:8786Monster164Idle:8787 db 04 8788 db 4 8789 dw RIdle1Monster1648790 dw RIdle2Monster1648791 dw RIdle3Monster1648792 dw RIdle2Monster1648793 8794 dw LIdle1Monster1648795 dw LIdle2Monster1648796 dw LIdle3Monster1648797 dw LIdle2Monster1648799Monster164AttackPatternRight:8800 db AnimateAttack | dw RIdle1Monster164 | db 000,003,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,007,000,InitiateAttack8801Monster164AttackPatternRightUp:8802 db AnimateAttack | dw RIdle1Monster164 | db 000,002,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,006,000,InitiateAttack8803Monster164AttackPatternRightDown:8804 db AnimateAttack | dw RIdle1Monster164 | db 000,004,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,008,000,InitiateAttack8805Monster164AttackPatternLeft:8806 db AnimateAttack | dw LIdle1Monster164 | db 000,007,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,003,000,InitiateAttack8807Monster164AttackPatternLeftUp:8808 db AnimateAttack | dw LIdle1Monster164 | db 000,008,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,004,000,InitiateAttack8809Monster164AttackPatternLeftDown:8810 db AnimateAttack | dw LIdle1Monster164 | db 000,006,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,002,000,InitiateAttack88128815RIdle1Monster165: equ $4000 + (000*128) + (000/2) - 128 8816RIdle2Monster165: equ $4000 + (000*128) + (032/2) - 128 8818LIdle1Monster165: equ $4000 + (000*128) + (096/2) - 128 8819LIdle2Monster165: equ $4000 + (000*128) + (064/2) - 128 8821Monster165Move:8822Monster165Idle:8823 db 08 8824 db 2 8825 dw RIdle1Monster1658826 dw RIdle2Monster1658827 8828 dw LIdle1Monster1658829 dw LIdle2Monster16588318834RIdle1Monster166: equ $4000 + (048*128) + (048/2) - 128 8835RIdle2Monster166: equ $4000 + (048*128) + (064/2) - 128 8836RIdle3Monster166: equ $4000 + (048*128) + (080/2) - 128 8837RIdle4Monster166: equ $4000 + (048*128) + (096/2) - 128 8839LIdle1Monster166: equ $4000 + (048*128) + (160/2) - 128 8840LIdle2Monster166: equ $4000 + (048*128) + (144/2) - 128 8841LIdle3Monster166: equ $4000 + (048*128) + (128/2) - 128 8842LIdle4Monster166: equ $4000 + (048*128) + (112/2) - 128 8844Monster166Move:8845Monster166Idle:8846 db 04 8847 db 6 8848 dw RIdle1Monster1668849 dw RIdle2Monster1668850 dw RIdle3Monster1668851 dw RIdle4Monster1668852 dw RIdle3Monster1668853 dw RIdle2Monster1668854 8855 dw LIdle1Monster1668856 dw LIdle2Monster1668857 dw LIdle3Monster1668858 dw LIdle4Monster1668859 dw LIdle3Monster1668860 dw LIdle2Monster16688628865RIdle1Monster167: equ $4000 + (024*128) + (000/2) - 128 8866RIdle2Monster167: equ $4000 + (024*128) + (016/2) - 128 8867RIdle3Monster167: equ $4000 + (024*128) + (032/2) - 128 8869LIdle1Monster167: equ $4000 + (024*128) + (080/2) - 128 8870LIdle2Monster167: equ $4000 + (024*128) + (064/2) - 128 8871LIdle3Monster167: equ $4000 + (024*128) + (048/2) - 128 8873Monster167Move:8874Monster167Idle:8875 db 03 8876 db 4 8877 dw RIdle3Monster1678878 dw RIdle2Monster1678879 dw RIdle1Monster1678880 dw RIdle2Monster1678881 8882 dw LIdle3Monster1678883 dw LIdle2Monster1678884 dw LIdle1Monster1678885 dw LIdle2Monster16788878890RIdle1Monster168: equ $4000 + (064*128) + (000/2) - 128 8891RIdle2Monster168: equ $4000 + (064*128) + (016/2) - 128 8892RIdle3Monster168: equ $4000 + (064*128) + (032/2) - 128 8893RIdle4Monster168: equ $4000 + (064*128) + (048/2) - 128 8894RIdle5Monster168: equ $4000 + (064*128) + (064/2) - 128 8895RAttack1Monster168: equ $4000 + (064*128) + (080/2) - 128 8896RAttack2Monster168: equ $4000 + (064*128) + (096/2) - 128 8898LIdle1Monster168: equ $4000 + (064*128) + (208/2) - 128 8899LIdle2Monster168: equ $4000 + (064*128) + (192/2) - 128 8900LIdle3Monster168: equ $4000 + (064*128) + (176/2) - 128 8901LIdle4Monster168: equ $4000 + (064*128) + (160/2) - 128 8902LIdle5Monster168: equ $4000 + (064*128) + (144/2) - 128 8903LAttack1Monster168: equ $4000 + (064*128) + (128/2) - 128 8904LAttack2Monster168: equ $4000 + (064*128) + (112/2) - 128 8906Monster168Move:8907Monster168Idle:8908 db 03 8909 db 5 8910 dw RIdle1Monster1688911 dw RIdle2Monster1688912 dw RIdle3Monster1688913 dw RIdle4Monster1688914 dw RIdle5Monster1688915 8916 dw LIdle1Monster1688917 dw LIdle2Monster1688918 dw LIdle3Monster1688919 dw LIdle4Monster1688920 dw LIdle5Monster1688921Monster168AttackPatternRight:8922 db AnimateAttack | dw RAttack1Monster168 | db 000,000,000,AnimateAttack | dw RAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8923Monster168AttackPatternLeft:8924 db AnimateAttack | dw LAttack1Monster168 | db 000,000,000,AnimateAttack | dw LAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8925 89268929RIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8930RIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8931RIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8932RIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8933RIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8934RIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8935RIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8936RIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8938LIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8939LIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8940LIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8941LIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8942LIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8943LIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8944LIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8945LIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8947Monster169Move:8948Monster169Idle:8949 db 01 8950 db 20 8951 dw RIdle1Monster1698952 dw RIdle1Monster1698953 dw RIdle1Monster1698954 dw RIdle1Monster1698955 dw RIdle1Monster1698956 dw RIdle2Monster1698957 dw RIdle3Monster1698958 dw RIdle4Monster1698959 dw RIdle5Monster1698960 dw RIdle6Monster1698961 dw RIdle7Monster1698962 dw RIdle8Monster1698963 dw RIdle8Monster1698964 dw RIdle7Monster1698965 dw RIdle6Monster1698966 dw RIdle5Monster1698967 dw RIdle4Monster1698968 dw RIdle3Monster1698969 dw RIdle2Monster1698970 dw RIdle1Monster1698971 8972 dw RIdle1Monster1698973 dw RIdle1Monster1698974 dw RIdle1Monster1698975 dw RIdle1Monster1698976 dw RIdle1Monster1698977 dw RIdle2Monster1698978 dw RIdle3Monster1698979 dw RIdle4Monster1698980 dw RIdle5Monster1698981 dw RIdle6Monster1698982 dw RIdle7Monster1698983 dw RIdle8Monster1698984 dw RIdle8Monster1698985 dw RIdle7Monster1698986 dw RIdle6Monster1698987 dw RIdle5Monster1698988 dw RIdle4Monster1698989 dw RIdle3Monster1698990 dw RIdle2Monster1698991 dw RIdle1Monster16989938996RIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 8997RIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 8999LIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 9000LIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 9002Monster170Move:9003Monster170Idle:9004 db 04 9005 db 2 9006 dw RIdle1Monster1709007 dw RIdle2Monster1709008 9009 dw LIdle1Monster1709010 dw LIdle2Monster17090129015RIdle1Monster171: equ $4000 + (096*128) + (000/2) - 128 9016RIdle2Monster171: equ $4000 + (096*128) + (016/2) - 128 9018LIdle1Monster171: equ $4000 + (096*128) + (032/2) - 128 9019LIdle2Monster171: equ $4000 + (064*128) + (240/2) - 128 9021Monster171Move:9022Monster171Idle:9023 db 06 9024 db 2 9025 dw RIdle1Monster1719026 dw RIdle2Monster1719027 9028 dw LIdle1Monster1719029 dw LIdle2Monster17190319034RIdle1Monster172: equ $4000 + (048*128) + (176/2) - 128 9035RIdle2Monster172: equ $4000 + (048*128) + (192/2) - 128 9037LIdle1Monster172: equ $4000 + (048*128) + (208/2) - 128 9038LIdle2Monster172: equ $4000 + (048*128) + (224/2) - 128 9040Monster172Move:9041Monster172Idle:9042 db 06 9043 db 2 9044 dw RIdle1Monster1729045 dw RIdle2Monster1729046 9047 dw LIdle1Monster1729048 dw LIdle2Monster17290509053RIdle1Monster173: equ $4000 + (144*128) + (160/2) - 128 9054RIdle2Monster173: equ $4000 + (144*128) + (176/2) - 128 9056LIdle1Monster173: equ $4000 + (144*128) + (208/2) - 128 9057LIdle2Monster173: equ $4000 + (144*128) + (192/2) - 128 9059Monster173Move:9060Monster173Idle:9061 db 06 9062 db 2 9063 dw RIdle1Monster1739064 dw RIdle2Monster1739065 9066 dw LIdle1Monster1739067 dw LIdle2Monster17390699072RIdle1Monster174: equ $4000 + (024*128) + (096/2) - 128 9073RIdle2Monster174: equ $4000 + (024*128) + (128/2) - 128 9074RIdle3Monster174: equ $4000 + (024*128) + (160/2) - 128 9075RAttack1Monster174: equ $4000 + (024*128) + (192/2) - 128 9076RAttack2Monster174: equ $4000 + (024*128) + (224/2) - 128 9078LIdle1Monster174: equ $4000 + (144*128) + (128/2) - 128 9079LIdle2Monster174: equ $4000 + (144*128) + (096/2) - 128 9080LIdle3Monster174: equ $4000 + (144*128) + (064/2) - 128 9081LAttack1Monster174: equ $4000 + (144*128) + (032/2) - 128 9082LAttack2Monster174: equ $4000 + (144*128) + (000/2) - 128 9084Monster174Move:9085Monster174Idle:9086 db 04 9087 db 4 9088 dw RIdle1Monster1749089 dw RIdle2Monster1749090 dw RIdle3Monster1749091 dw RIdle2Monster1749092 9093 dw LIdle1Monster1749094 dw LIdle2Monster1749095 dw LIdle3Monster1749096 dw LIdle2Monster1749098Monster174AttackPatternRight:9099 db AnimateAttack | dw RIdle1Monster174 | db 000,003,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,007,InitiateAttack9100Monster174AttackPatternRightUp:9101 db AnimateAttack | dw RIdle1Monster174 | db 000,008,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,004,InitiateAttack9102Monster174AttackPatternRightDown:9103 db AnimateAttack | dw RIdle1Monster174 | db 000,006,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,002,InitiateAttack9105Monster174AttackPatternLeft:9106 db AnimateAttack | dw LIdle1Monster174 | db 000,007,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,003,InitiateAttack9107Monster174AttackPatternLeftUp:9108 db AnimateAttack | dw LIdle1Monster174 | db 000,002,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,006,InitiateAttack9109Monster174AttackPatternLeftDown:9110 db AnimateAttack | dw LIdle1Monster174 | db 000,004,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,008,InitiateAttack91129115RIdle1Monster175: equ $4000 + (088*128) + (128/2) - 128 9116RIdle2Monster175: equ $4000 + (088*128) + (160/2) - 128 9118LIdle1Monster175: equ $4000 + (088*128) + (192/2) - 128 9119LIdle2Monster175: equ $4000 + (088*128) + (224/2) - 128 9121Monster175Move:9122Monster175Idle:9123 db 06 9124 db 2 9125 dw RIdle1Monster1759126 dw RIdle2Monster1759127 9128 dw LIdle1Monster1759129 dw LIdle2Monster17591319134RIdle1Monster176: equ $4000 + (000*128) + (128/2) - 128 9135RIdle2Monster176: equ $4000 + (000*128) + (144/2) - 128 9136RIdle3Monster176: equ $4000 + (000*128) + (160/2) - 128 9137RAttack1Monster176: equ $4000 + (000*128) + (176/2) - 128 9139LIdle1Monster176: equ $4000 + (000*128) + (240/2) - 128 9140LIdle2Monster176: equ $4000 + (000*128) + (224/2) - 128 9141LIdle3Monster176: equ $4000 + (000*128) + (208/2) - 128 9142LAttack1Monster176: equ $4000 + (000*128) + (192/2) - 128 9144Monster176Move:9145Monster176Idle:9146 db 04 9147 db 4 9148 dw RIdle1Monster1769149 dw RIdle2Monster1769150 dw RIdle1Monster1769151 dw RIdle3Monster1769152 9153 dw LIdle1Monster1769154 dw LIdle2Monster1769155 dw LIdle1Monster1769156 dw LIdle3Monster1769158Monster176AttackPatternRight:9159 db AnimateAttack | dw RIdle1Monster176 | db 003,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,007,InitiateAttack9160Monster176AttackPatternRightUp:9161 db AnimateAttack | dw RIdle1Monster176 | db 008,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,004,InitiateAttack9162Monster176AttackPatternRightDown:9163 db AnimateAttack | dw RIdle1Monster176 | db 006,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,002,InitiateAttack9165Monster176AttackPatternLeft:9166 db AnimateAttack | dw LIdle1Monster176 | db 007,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,003,InitiateAttack9167Monster176AttackPatternLeftUp:9168 db AnimateAttack | dw LIdle1Monster176 | db 002,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,006,InitiateAttack9169Monster176AttackPatternLeftDown:9170 db AnimateAttack | dw LIdle1Monster176 | db 004,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,008,InitiateAttack91729175RIdle1Monster177: equ $4000 + (120*128) + (000/2) - 128 9176RIdle2Monster177: equ $4000 + (120*128) + (016/2) - 128 9178LIdle1Monster177: equ $4000 + (120*128) + (048/2) - 128 9179LIdle2Monster177: equ $4000 + (120*128) + (032/2) - 128 9181Monster177Move:9182Monster177Idle:9183 db 06 9184 db 2 9185 dw RIdle1Monster1779186 dw RIdle2Monster1779187 9188 dw LIdle1Monster1779189 dw LIdle2Monster17791919194RIdle1Monster178: equ $4000 + (064*128) + (224/2) - 128 9195RIdle2Monster178: equ $4000 + (064*128) + (240/2) - 128 9196RAttack1Monster178: equ $4000 + (184*128) + (128/2) - 128 9198LIdle1Monster178: equ $4000 + (184*128) + (176/2) - 128 9199LIdle2Monster178: equ $4000 + (184*128) + (160/2) - 128 9200LAttack1Monster178: equ $4000 + (184*128) + (144/2) - 128 9202Monster178Move:9203Monster178Idle:9204 db 04 9205 db 2 9206 dw RIdle1Monster1789207 dw RIdle2Monster1789208 9209 dw LIdle1Monster1789210 dw LIdle2Monster1789212Monster178AttackPatternRight:9213 db AnimateAttack | dw RIdle1Monster178 | db 003,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,007,InitiateAttack9214Monster178AttackPatternRightUp:9215 db AnimateAttack | dw RIdle1Monster178 | db 008,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,004,InitiateAttack9216Monster178AttackPatternRightDown:9217 db AnimateAttack | dw RIdle1Monster178 | db 006,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,002,InitiateAttack9219Monster178AttackPatternLeft:9220 db AnimateAttack | dw LIdle1Monster178 | db 007,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,003,InitiateAttack9221Monster178AttackPatternLeftUp:9222 db AnimateAttack | dw LIdle1Monster178 | db 002,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,006,InitiateAttack9223Monster178AttackPatternLeftDown:9224 db AnimateAttack | dw LIdle1Monster178 | db 004,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,008,InitiateAttack92279230RIdle1Monster179: equ $4000 + (120*128) + (064/2) - 128 9231RIdle2Monster179: equ $4000 + (120*128) + (080/2) - 128 9233LIdle1Monster179: equ $4000 + (120*128) + (112/2) - 128 9234LIdle2Monster179: equ $4000 + (120*128) + (096/2) - 128 9236Monster179Move:9237Monster179Idle:9238 db 06 9239 db 2 9240 dw RIdle1Monster1799241 dw RIdle2Monster1799242 9243 dw LIdle1Monster1799244 dw LIdle2Monster17992469249RIdle1Monster180: equ $4000 + (184*128) + (000/2) - 128 9250RIdle2Monster180: equ $4000 + (184*128) + (016/2) - 128 9252LIdle1Monster180: equ $4000 + (184*128) + (048/2) - 128 9253LIdle2Monster180: equ $4000 + (184*128) + (032/2) - 128 9255Monster180Move:9256Monster180Idle:9257 db 06 9258 db 2 9259 dw RIdle1Monster1809260 dw RIdle2Monster1809261 9262 dw LIdle1Monster1809263 dw LIdle2Monster18092659268RIdle1Monster181: equ $4000 + (184*128) + (064/2) - 128 9269RIdle2Monster181: equ $4000 + (184*128) + (080/2) - 128 9271LIdle1Monster181: equ $4000 + (184*128) + (112/2) - 128 9272LIdle2Monster181: equ $4000 + (184*128) + (096/2) - 128 9274Monster181Move:9275Monster181Idle:9276 db 06 9277 db 2 9278 dw RIdle1Monster1819279 dw RIdle2Monster1819280 9281 dw LIdle1Monster1819282 dw LIdle2Monster18192849287RIdle1Monster182: equ $4000 + (080*128) + (000/2) - 128 9288RIdle2Monster182: equ $4000 + (080*128) + (048/2) - 128 9289RIdle3Monster182: equ $4000 + (080*128) + (096/2) - 128 9290RIdle4Monster182: equ $4000 + (080*128) + (144/2) - 128 9292LIdle1Monster182: equ $4000 + (216*128) + (144/2) - 128 9293LIdle2Monster182: equ $4000 + (216*128) + (096/2) - 128 9294LIdle3Monster182: equ $4000 + (216*128) + (048/2) - 128 9295LIdle4Monster182: equ $4000 + (216*128) + (000/2) - 128 9297Monster182Move:9298Monster182Idle:9299 db 03 9300 db 4 9301 dw RIdle1Monster1829302 dw RIdle2Monster1829303 dw RIdle3Monster1829304 dw RIdle4Monster1829305 9306 dw LIdle1Monster1829307 dw LIdle2Monster1829308 dw LIdle3Monster1829309 dw LIdle4Monster18293119314RIdle1Monster183: equ $4000 + (000*128) + (000/2) - 128 9315RIdle2Monster183: equ $4000 + (000*128) + (032/2) - 128 9316RIdle3Monster183: equ $4000 + (000*128) + (064/2) - 128 9317RIdle4Monster183: equ $4000 + (000*128) + (096/2) - 128 9318RIdle5Monster183: equ $4000 + (000*128) + (128/2) - 128 9319RIdle6Monster183: equ $4000 + (000*128) + (160/2) - 128 9320RAttack1Monster183: equ $4000 + (000*128) + (192/2) - 128 9322LIdle1Monster183: equ $4000 + (040*128) + (192/2) - 128 9323LIdle2Monster183: equ $4000 + (040*128) + (160/2) - 128 9324LIdle3Monster183: equ $4000 + (040*128) + (128/2) - 128 9325LIdle4Monster183: equ $4000 + (040*128) + (096/2) - 128 9326LIdle5Monster183: equ $4000 + (040*128) + (064/2) - 128 9327LIdle6Monster183: equ $4000 + (040*128) + (032/2) - 128 9328LAttack1Monster183: equ $4000 + (040*128) + (000/2) - 128 9330Monster183Move:9331Monster183Idle:9332 db 03 9333 db 8 9334 dw RIdle1Monster1839335 dw RIdle2Monster1839336 dw RIdle3Monster1839337 dw RIdle4Monster1839338 dw RIdle5Monster1839339 dw RIdle6Monster1839340 dw RIdle3Monster1839341 dw RIdle4Monster1839342 9343 dw LIdle1Monster1839344 dw LIdle2Monster1839345 dw LIdle3Monster1839346 dw LIdle4Monster1839347 dw LIdle5Monster1839348 dw LIdle6Monster1839349 dw LIdle3Monster1839350 dw LIdle4Monster1839352Monster183AttackPatternRight:9353 db AnimateAttack | dw Rattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile9354Monster183AttackPatternLeft:9355 db AnimateAttack | dw Lattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile93579360RIdle1Monster184: equ $4000 + (120*128) + (000/2) - 128 9361RIdle2Monster184: equ $4000 + (120*128) + (032/2) - 128 9362RIdle3Monster184: equ $4000 + (120*128) + (064/2) - 128 9364LIdle1Monster184: equ $4000 + (120*128) + (160/2) - 128 9365LIdle2Monster184: equ $4000 + (120*128) + (128/2) - 128 9366LIdle3Monster184: equ $4000 + (120*128) + (096/2) - 128 9368Monster184Move:9369Monster184Idle:9370 db 04 9371 db 4 9372 dw RIdle1Monster1849373 dw RIdle2Monster1849374 dw RIdle3Monster1849375 dw RIdle2Monster1849376 9377 dw LIdle1Monster1849378 dw LIdle2Monster1849379 dw LIdle3Monster1849380 dw LIdle2Monster18493829385RIdle1Monster185: equ $4000 + (168*128) + (000/2) - 128 9386RIdle2Monster185: equ $4000 + (168*128) + (032/2) - 128 9387RIdle3Monster185: equ $4000 + (168*128) + (064/2) - 128 9389LIdle1Monster185: equ $4000 + (168*128) + (160/2) - 128 9390LIdle2Monster185: equ $4000 + (168*128) + (128/2) - 128 9391LIdle3Monster185: equ $4000 + (168*128) + (096/2) - 128 9393Monster185Move:9394Monster185Idle:9395 db 04 9396 db 4 9397 dw RIdle1Monster1859398 dw RIdle2Monster1859399 dw RIdle3Monster1859400 dw RIdle2Monster1859401 9402 dw LIdle1Monster1859403 dw LIdle2Monster1859404 dw LIdle3Monster1859405 dw LIdle2Monster18594079410RIdle1Monster186: equ $4000 + (120*128) + (192/2) - 128 9411RIdle2Monster186: equ $4000 + (120*128) + (224/2) - 128 9412RIdle3Monster186: equ $4000 + (000*128) + (224/2) - 128 9414LIdle1Monster186: equ $4000 + (168*128) + (224/2) - 128 9415LIdle2Monster186: equ $4000 + (168*128) + (192/2) - 128 9416LIdle3Monster186: equ $4000 + (048*128) + (224/2) - 128 9418Monster186Move:9419Monster186Idle:9420 db 04 9421 db 4 9422 dw RIdle1Monster1869423 dw RIdle2Monster1869424 dw RIdle3Monster1869425 dw RIdle2Monster1869426 9427 dw LIdle1Monster1869428 dw LIdle2Monster1869429 dw LIdle3Monster1869430 dw LIdle2Monster18694329435RIdle1Monster187: equ $4000 + (208*128) + (000/2) - 128 9436RIdle2Monster187: equ $4000 + (208*128) + (032/2) - 128 9437RIdle3Monster187: equ $4000 + (208*128) + (064/2) - 128 9439LIdle1Monster187: equ $4000 + (208*128) + (160/2) - 128 9440LIdle2Monster187: equ $4000 + (208*128) + (128/2) - 128 9441LIdle3Monster187: equ $4000 + (208*128) + (096/2) - 128 9443Monster187Move:9444Monster187Idle:9445 db 03 9446 db 4 9447 dw RIdle1Monster1879448 dw RIdle2Monster1879449 dw RIdle3Monster1879450 dw RIdle2Monster1879451 9452 dw LIdle1Monster1879453 dw LIdle2Monster1879454 dw LIdle3Monster1879455 dw LIdle2Monster1879463MSXHeroes.asm 1236 ds $c000-$,$ff1237dephase12391242BattleMonsterSpriteSheet1Block: equ $551243phase $40001244 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1.SC5",7,208 * 128 1245 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1Bottom48Lines.SC5",7,048 * 128 1246 ds $c000-$,$ff1247dephase12491252BattleMonsterSpriteSheet2Block: equ $571253phase $40001254 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2.SC5",7,208 * 128 1255 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2Bottom48Lines.SC5",7,048 * 128 1256 ds $c000-$,$ff1257dephase12591262BattleMonsterSpriteSheet3Block: equ $591263phase $40001264 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3.SC5",7,208 * 128 1265 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3Bottom48Lines.SC5",7,048 * 128 1266 ds $c000-$,$ff1267dephase12691272BattleMonsterSpriteSheet4Block: equ $5b1273phase $40001274 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4.SC5",7,208 * 128 1275 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4Bottom48Lines.SC5",7,048 * 128 1276 ds $c000-$,$ff1277dephase12791282BattleMonsterSpriteSheet5Block: equ $5d1283phase $40001284 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5.SC5",7,208 * 128 1285 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5Bottom48Lines.SC5",7,048 * 128 1286 ds $c000-$,$ff1287dephase12891292BattleMonsterSpriteSheet6Block: equ $5f1293phase $40001294 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6.SC5",7,208 * 128 1295 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6Bottom48Lines.SC5",7,048 * 128 1296 ds $c000-$,$ff1297dephase12991302BattleMonsterSpriteSheet7Block: equ $611303phase $40001304 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7.SC5",7,208 * 128 1305 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7Bottom48Lines.SC5",7,048 * 128 1306 ds $c000-$,$ff1307dephase13091312BattleMonsterSpriteSheet8Block: equ $631313phase $40001314 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8.SC5",7,208 * 128 1315 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8Bottom48Lines.SC5",7,048 * 128 1316 ds $c000-$,$ff1317dephase13191322CampaignSelectBlock: equ $651323phase $40001324 incbin "..\grapx\TitleScreen\CampaignSelect.SC5",7,212 * 128 1325 ds $c000-$,$ff1326dephase13281331VictoryBlock: equ $671332GentleWinterMiniMapsBlock: equ $671333phase $40001334 incbin "..\grapx\Battlefield\Victory.SC5",7,207 * 128 1335 incbin "..\grapx\hud\GentleWinterMiniMaps.SC5",7,048 * 128 1336 ds $c000-$,$ff1337dephase13391342DefeatBlock: equ $691343phase $40001344 incbin "..\grapx\Battlefield\Defeat.SC5",7,207 * 128 1345 ds $c000-$,$ff1346dephase13481351RetreatBlock: equ $6b1352phase $40001353 incbin "..\grapx\Battlefield\Retreat.SC5",7,117 * 128 1354 ds $8000-$,$ff1355dephase13571360TitleScreenCodeblock: equ $6c1361phase $80001362 TitleScreenCode.asm1HandleTitleScreenCode:2 jp InsertMouseCode389ResetBuildings: db 1, 0, 0, 0, 0, 0, 0, 011InsertMousePalette:12 incbin"..\grapx\TitleScreen\InsertMousePalette.pl"13InsertMouseCode:14 ld a,(MOUSIDBuffer)15 inc a16 jp z,TitleScreenCode17 18 call screenoff20 ld a,421 ld (GameStatus),a 22 ld a,123 ld (activepage),a25 ld hl,ClearPage1And226 call DoCopy27 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady28 call docopy29 30 call SetVButton 31 call SetInsertMouseGraphics 32 call SetInsertMouseText33 xor a34 ld (activepage),a 35 call SetInsertMouseGraphics 36 call SetInsertMouseText37 ld hl,InsertMousePalette38 call SetPalette39 call SetSpatInCastle40 call SetInterruptHandler 42 call screenon43 .engine:44 halt45 ld a,(framecounter)46 inc a47 ld (framecounter),a48 call CheckMouse50 call SwapAndSetPage 51 call PopulateControls 5358 ld a,(NewPrContr)59 bit 5,a 60 jp nz,TitleScreenCode6268 69 ld ix,GenericButtonTable70 call CheckButtonInteractionControlsNotOnInt71 call .CheckButtonClicked 73 ld ix,GenericButtonTable74 call ScenarioSelectCode.SetGenericButtons 76 jp .engine78.CheckButtonClicked:79 ret nc80 pop af81 jp TitleScreenCode83SetInsertMouseText:84 call SetInsertMouseFontPage0Y212 86 ld b,093+00 87 ld c,031+00 88 ld hl,TextInsertMouse189 call SetText 91 ld b,080+00 92 ld c,152+00 93 ld hl,TextInsertMouse294 call SetText 95 ret97TextInsertMouse1:98 db "Mouse not detected",25599TextInsertMouse2:100 db " For optimal experience,",254101 db "please connect a mouse...",255103SetInsertMouseFontPage0Y212: 104 ld hl,$4000 + (000*128) + (000/2) - 128105 ld de,$0000 + (212*128) + (000/2) - 128106 ld bc,$0000 + (006*256) + (256/2)107 ld a,CastleOverviewFontBlock 108 jp CopyRamToVramCorrectedWithoutActivePageSetting 110SetVButton:111 ld hl,SetVButtonTable-2112 ld de,GenericButtonTable-2113 ld bc,2+(GenericButtonTableLenghtPerButton*01)114 ldir115 ret117SetVButtonTableGfxBlock: db PlayerStartTurnBlock118SetVButtonTableAmountOfButtons: db 01119SetVButtonTable: 120 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 122.Button1Ytop: equ 146123.Button1YBottom: equ .Button1Ytop + 019124.Button1XLeft: equ 184125.Button1XRight: equ .Button1XLeft + 020128ClearPage1And2:129 db 000,000,000,000 130 db 000,000,000,000 131 db 000,001,000,002 132 db 13+13*16,000,$C0 134SetInsertMouseGraphics:135 ld hl,$4000 + (000*128) + (000/2) - 128136 ld de,$0000 + (024*128) + (048/2) - 128137 ld bc,$0000 + (148*256) + (162/2)138 ld a,ScrollBlock 139 call CopyRamToVramCorrectedCastleOverview 141 ld hl,$4000 + (139*128) + (044/2) - 128142 ld de,$0000 + ((024+53)*128) + ((020+58)/2) - 128143 ld bc,$0000 + (060*256) + (104/2)144 ld a,DefeatBlock 145 call CopyRamToVramCorrectedCastleOverview 147 ld hl,$4000 + (000*128) + (000/2) - 128148 ld de,$0000 + ((024+18)*128) + ((020+60)/2) - 128149 ld bc,$0000 + (112*256) + (106/2)150 ld a,InsertMouseBlock 151 jp CopyRamToVramCorrectedCastleOverview 153CheckMouse:154156 ld a,(framecounter)157 and 63158 ret nz160 ld a,(slot.page12rom) 161 out ($a8),a 162 ld a,Loaderblock 163 call block12 164 ld hl,CHMOUS165 jp (hl)168TitleScreenPalette:169 incbin"..\grapx\TitleScreen\TitleScreenPalette.pl"170TitleScreenCode:172 ld a,$98173 ld (PutLetter+copytype),a176 ld a,SongTitle177 ld (ChangeSong?),a178 179 call screenoff181 ld a,4182 ld (GameStatus),a 183 ld a,1184 ld (activepage),a185 call SetTitleScreenGraphics186 xor a187 ld (activepage),a 188 call SetTitleScreenGraphics189 ld hl,TitleScreenPalette190 call SetPalette191 call SetSpatInCastle192 call SetInterruptHandler 193 call SetTitleScreenButtons194 xor a195 ld (framecounter),a198 .engine:201204 halt205 ld a,(framecounter)206 inc a207 ld (framecounter),a208 call screenonAfter3Frames209 call CheckMouse210 call SwapAndSetPage 211 call PopulateControls 213219 220 ld ix,GenericButtonTable221 call CheckButtonInteractionControlsNotOnInt222 call .CheckButtonClicked 224 ld ix,GenericButtonTable225 call ScenarioSelectCode.SetGenericButtons 227 jp .engine229.CheckButtonClicked:230 ret nc232 ld a,b233 cp 1234 jp z,.CollectionPressed235 cp 2236 jp z,.OptionsPressed237 cp 3238 jp z,.LoadGamePressed239 cp 4240 jp z,.CampaignPressed241244 .NewGamePressed:245 pop af246 jp ScenarioSelectCode248 .CampaignPressed:249 pop af250 jp CampaignSelectCode252 .LoadGamePressed:253 pop af254 jp LoadGameSelectCode256 .OptionsPressed:257 ret259 .CollectionPressed:260 ret265SetTitleScreenButtons:266 ld hl,TitleScreenButtonTable-2267 ld de,GenericButtonTable-2268 ld bc,2+(GenericButtonTableLenghtPerButton*5)269 ldir270 ret272TitleScreenButton1Ytop: equ 128273TitleScreenButton1YBottom: equ TitleScreenButton1Ytop + 014274TitleScreenButton1XLeft: equ 094275TitleScreenButton1XRight: equ TitleScreenButton1XLeft + 070277TitleScreenButton2Ytop: equ 143278TitleScreenButton2YBottom: equ TitleScreenButton2Ytop + 016279TitleScreenButton2XLeft: equ 098280TitleScreenButton2XRight: equ TitleScreenButton2XLeft + 062282TitleScreenButton3Ytop: equ 159283TitleScreenButton3YBottom: equ TitleScreenButton3Ytop + 015284TitleScreenButton3XLeft: equ 092285TitleScreenButton3XRight: equ TitleScreenButton3XLeft + 072287TitleScreenButton4Ytop: equ 175288TitleScreenButton4YBottom: equ TitleScreenButton4Ytop + 016289TitleScreenButton4XLeft: equ 104290TitleScreenButton4XRight: equ TitleScreenButton4XLeft + 050292TitleScreenButton5Ytop: equ 191293TitleScreenButton5YBottom: equ TitleScreenButton5Ytop + 015294TitleScreenButton5XLeft: equ 094295TitleScreenButton5XRight: equ TitleScreenButton5XLeft + 068297TitleScreenButtonTableGfxBlock: db TitleScreenButtonsBlock298TitleScreenButtonTableAmountOfButtons: db 5299TitleScreenButtonTable: 300if promo?301 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop+10,TitleScreenButton1YBottom+10,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + ((TitleScreenButton1Ytop+10)*128) + (TitleScreenButton1XLeft/2) - 128 302 db %0100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop+10,TitleScreenButton2YBottom+10,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + ((TitleScreenButton2Ytop+10)*128) + (TitleScreenButton2XLeft/2) - 128 303 db %1100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128304 db %0100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128305 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128306else307 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop,TitleScreenButton1YBottom,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + (TitleScreenButton1Ytop*128) + (TitleScreenButton1XLeft/2) - 128 308 db %1100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop,TitleScreenButton2YBottom,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + (TitleScreenButton2Ytop*128) + (TitleScreenButton2XLeft/2) - 128 309 db %1100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128310if OptionsAvailable?311 db %1100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128312else313 db %0100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128314endif315if CollectionOptionAvailable?316 db %1100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128317else318 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128319endif320endif322DeactivateAllHeroesAndCastles:323 ld a,255324 ld (pl1hero1y+HeroStatus),a325 ld (pl1hero2y+HeroStatus),a326 ld (pl1hero3y+HeroStatus),a327 ld (pl1hero4y+HeroStatus),a328 ld (pl1hero5y+HeroStatus),a329 ld (pl1hero6y+HeroStatus),a330 ld (pl1hero7y+HeroStatus),a331 ld (pl1hero8y+HeroStatus),a333 ld (pl2hero1y+HeroStatus),a334 ld (pl2hero2y+HeroStatus),a335 ld (pl2hero3y+HeroStatus),a336 ld (pl2hero4y+HeroStatus),a337 ld (pl2hero5y+HeroStatus),a338 ld (pl2hero6y+HeroStatus),a339 ld (pl2hero7y+HeroStatus),a340 ld (pl2hero8y+HeroStatus),a342 ld (pl3hero1y+HeroStatus),a343 ld (pl3hero2y+HeroStatus),a344 ld (pl3hero3y+HeroStatus),a345 ld (pl3hero4y+HeroStatus),a346 ld (pl3hero5y+HeroStatus),a347 ld (pl3hero6y+HeroStatus),a348 ld (pl3hero7y+HeroStatus),a349 ld (pl3hero8y+HeroStatus),a351 ld (pl4hero1y+HeroStatus),a352 ld (pl4hero2y+HeroStatus),a353 ld (pl4hero3y+HeroStatus),a354 ld (pl4hero4y+HeroStatus),a355 ld (pl4hero5y+HeroStatus),a356 ld (pl4hero6y+HeroStatus),a357 ld (pl4hero7y+HeroStatus),a358 ld (pl4hero8y+HeroStatus),a360 ld a,255361 ld (Castle1+CastlePlayer),a362 ld (Castle2+CastlePlayer),a363 ld (Castle3+CastlePlayer),a364 ld (Castle4+CastlePlayer),a365 ret367CampaignSelectCode:368 ld a,1369 ld (CampaignMode?),a371 call screenoff372 call DeactivateAllHeroesAndCastles 374 ld a,4375 ld (GameStatus),a 376 ld a,1377 ld (activepage),a378379 ld (ScenarioPage),a380 ld (ScenarioSelected),a381 382 xor a383 ld (LitScenarioButtonInWhichPage?),a384 ld (AmountOfMapsVisibleInCurrentPage),a385 ld hl,0386 ld (WorldPointer),hl387 388 ld a,2389 ld (Difficulty),a 390 ld a,255391 ld (player1StartingTown),a392 ld (player2StartingTown),a393 ld (player3StartingTown),a394 ld (player4StartingTown),a395 396 ld hl,TavernHeroesReset397 ld de,TavernHeroesTable398 ld bc,EndTavernHeroesReset-TavernHeroesReset399 ldir400 401 ld hl,ListOfUnlockedHeroes-1402 .FreeNextHero:403 inc hl404 ld a,(hl)405 or a406 jr z,.EndFreeAllUnlockedHeroes407 cp 255408 jr z,.FreeNextHero409 res 7,(hl)410 jr .FreeNextHero411 .EndFreeAllUnlockedHeroes:412 413 call SetCampaignSelectGraphics414 xor a415 ld (activepage),a 416 call SetCampaignSelectGraphics417 ld hl,InGamePalette418 call SetPalette419 call SetSpatInCastle420 call SetInterruptHandler 421 call SetCampaignSelectButtons422 call SetFontPage0Y212 424 call SetAmountOfCampaignButtons425 call SetAmountOfCampaignPageButtons426 call SetPage1ButtonConstantlyLit427 ld b,28428430 xor a431 ld (framecounter),a432 .engine:433 ld a,(framecounter)434 inc a435 ld (framecounter),a436437 call screenonAfter3Frames438 call CheckMouse439 call SwapAndSetPage 440 call PopulateControls 442448 449 ld ix,GenericButtonTable450 call CheckButtonInteractionControlsNotOnInt451 call CheckCampaignSelectButtonClicked 453 ld ix,GenericButtonTable454 call ScenarioSelectCode.SetGenericButtons 457 call SetNamesInCampaignButtons458 call SetVButtonsNextToNames459 call SetTextPage123ButtonsCampaign460 jp .engine462SetTextPage123ButtonsCampaign:463 ld a,(AmountOfCampaignsFinished)464 cp 11-1465 ret c467 ld b,035-6 468 ld c,176 469 ld hl,TextPage1470 call SetText 472 ld b,069-6 473 ld c,176 474 ld hl,TextPage2475 call SetText 477 ld a,(AmountOfCampaignsFinished)478 cp 21-1479 ret c481 ld b,103-6 482 ld c,176 483 ld hl,TextPage3484 call SetText 485 ret487SetVButtonsNextToNames:488 ld a,(AmountOfMapsVisibleInCurrentPage)489 cp 11490 jr c,.EndCheckMaxMapsInCurrentPageCheck491 ld a,10492 .EndCheckMaxMapsInCurrentPageCheck:494 ld b,a495 ld de,$0000 + (028*128) + (120/2) - 128497 .loop:498 ld hl,13*128499 add hl,de500 ex de,hl502 push de503 push bc504 call .SetVbutton505 pop bc506 pop de507 djnz .loop509 510 ld a,(AmountOfMapsVisibleInCurrentPage)511 cp 11512 jp c,.SetNoVbutton514 515 ld a,(ScenarioPage)516 dec a517519 ld b,0520 jr z,.PageFound521 dec a522 ld b,10523 jr z,.PageFound524 ld b,20525 .PageFound:526 ld a,(ScenarioSelected)528 529 ret531 .PageButtonConstantlyLit:532 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128534.SetVbutton:535 ld hl,$4000 + (123*128) + (000/2) - 128536 ld bc,$0000 + (013*256) + (014/2)537 ld a,ScenarioSelectButtonsBlock 538 jp CopyRamToVramCorrectedCastleOverview 540.SetNoVbutton:541 ld hl,$4000 + (123*128) + (014/2) - 128542 ld bc,$0000 + (013*256) + (014/2)543 ld a,ScenarioSelectButtonsBlock 544 jp CopyRamToVramCorrectedCastleOverview 555EndCampaignScreenEngine:556563574585596 call FadeOutMusic597 call SetTempisr 598 call SetSpatInGame599 xor a600 ld (GameStatus),a 601 ret605611 612615 616622DoSetCampaignHeroesCastlesResources:623 ld a,(CampaignSelected)624 ld d,0625 ld e,a626 ld hl,CampaignInfoLenght627 call MultiplyHlWithDE 628 ld de,Campaign01629 add hl,de631 632 ld de,player1StartingTown633 ld bc,4634 ldir635 636 ld de,TavernHeroesPlayer1637 ld bc,10638 ldir639 640 ld de,amountofplayers641 ld bc,5642 ldir643 644 ld de,ResourcesPlayer1645 ld bc,10646 ldir647 648 ld de,Castle1+CastlePlayer649 ld bc,1650 ldir651 ld de,Castle2+CastlePlayer652 ld bc,1653 ldir654 ld de,Castle3+CastlePlayer655 ld bc,1656 ldir657 ld de,Castle4+CastlePlayer658 ld bc,1659 ldir660 ld de,DaysToCompleteCampaign661 ld bc,1662 ldir663 ld de,CampaignText 664 ld bc,CampaignTextLenght665 ldir666 667 ld de,pl1hero1y668 ld bc,lenghtherotable669 ldir670 ld de,pl2hero1y671 ld bc,lenghtherotable672 ldir673 ld de,pl3hero1y674 ld bc,lenghtherotable675 ldir676 ld de,pl4hero1y677 ld bc,lenghtherotable678 ldir680 call ScenarioSelectCode.SetStartingTown 682 683 ld ix,pl1hero1y684 ld iy,Castle1685 call .SetYX 686 ld ix,pl2hero1y687 ld iy,Castle2688 call .SetYX 689 ld ix,pl3hero1y690 ld iy,Castle3691 call .SetYX 692 ld ix,pl4hero1y693 ld iy,Castle4694 call .SetYX 695 ret697 .SetYX:698 ld a,(ix+HeroStatus) 699 cp 255700 ret z702 ld a,(iy+CastleY) 703 dec a704 ld (ix+HeroY),a 705 ld a,(iy+Castlex) 706 inc a707 inc a708 ld (ix+HeroX),a 709 ret726CheckCampaignSelectButtonClicked:727 ret nc729 ld a,b730 cp 6731 jp nc,.ScenarioPressed732 cp 3733 jp nc,.Page123Pressed734 cp 2735 jr z,.BeginPressed736739 .BackPressed:740 pop af741 jp TitleScreenCode743 .BeginPressed:744 ld hl,(WorldPointer)745 ld a,h746 or l747 ret z749 pop af750 jp EndCampaignScreenEngine752 .ScenarioPressed:753 ld a,(ScenarioPage)754 ld (LitScenarioButtonInWhichPage?),a755 ld a,15756 sub b757 ld (ScenarioSelected),a760761 ld a,(ScenarioPage)762 dec a763 ld b,0764 jr z,.PageFound1765 dec a766 ld b,10767 jr z,.PageFound1768 ld b,20769 .PageFound1:770 ld a,(ScenarioSelected)771 add a,b 772 ld (CampaignSelected),a774 .LightCurrentActiveScenarioButton:775 776 ld a,(AmountOfMapsVisibleInCurrentPage)777 cp 11778 jr c,.EndCheckMaxMapsInCurrentPageCheck779 ld a,10780 .EndCheckMaxMapsInCurrentPageCheck:782 ld d,0783 ld e,a784 ld hl,GenericButtonTableLenghtPerButton785 call MultiplyHlWithDE 786 push hl787 pop bc789 ld hl,CampaignSelectButtonTable790 ld de,GenericButtonTable791792 ldir794 795 ld a,(ScenarioSelected)796 ld d,0797 ld e,a798 ld hl,GenericButtonTableLenghtPerButton799 call MultiplyHlWithDE 800 ld de,GenericButtonTable+1801 add hl,de802 ex de,hl803 ld hl,.ScenarioButtonConstantlyLit804 ld bc,4805 ldir807 808 ld a,(ScenarioPage)809 dec a810 ld b,0811 jr z,.PageFound812 dec a813 ld b,10814 jr z,.PageFound815 ld b,20816 .PageFound:817 ld a,(ScenarioSelected)818 add a,b 819 ld d,0820 ld e,a821 ld hl,LenghtMapData822 call MultiplyHlWithDE 823 ld de,GentleMaps824 add hl,de825 ld (WorldPointer),hl826 827 828 call .SetSelectedCampaignNameRightTopOfScreen829832 .SetSelectedCampaignNameRightTopOfScreen:833 call ClearCampaignNameAndDescriptionRightTopOfScreen834 ld b,152 835 ld c,021 837 ld hl,(WorldPointer)838 ld de,ScenarioNameAddress+4839 add hl,de841 call SetText 843 844 ld b,149 845 ld c,036 846 inc hl847 call SetText 848 jp SwapAndSetPage 850 .ScenarioButtonConstantlyLit:851 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 128852 .ScenarioButtonNormallyLit:853 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 128867 .Page123Pressed:868 ld b,3869 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+1870 jr z,.ScenarioPageFound871 cp 4872 ld b,2873 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+1874 jr z,.ScenarioPageFound875 ld b,1876 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+1877 .ScenarioPageFound:878 ld a,(ScenarioPage)879 cp b880 ret z881 ld a,b882 ld (ScenarioPage),a884 push de885 call SetAmountOfCampaignPageButtons886 pop de887 ld hl,.PageButtonConstantlyLit888 ld bc,4889 ldir891 892 ld hl,CampaignSelectButtonTable-2893 ld de,GenericButtonTable-2894 ld bc,2+(GenericButtonTableLenghtPerButton*10)895 ldir897 ld a,(ScenarioPage)898 ld b,a899 ld a,(LitScenarioButtonInWhichPage?)900 cp b901 call z,.LightCurrentActiveScenarioButton902 jp SetAmountOfCampaignButtons904 .PageButtonConstantlyLit:905 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128907screenonAfter3Frames:908 ld a,(framecounter)909 and 3910 ret nz911 jp screenon913LoadGameSelectCode:914 call screenoff915LoadGameSelectCodeSkipScreenOff:918 ld a,$98919 ld (PutLetter+copytype),a922 ld a,4923 ld (GameStatus),a 924 ld a,1925 ld (activepage),a 926 call SetLoadGameGraphics927 call SetNamesInLoadGameButtons928 xor a929 ld (activepage),a930 ld a,255931 ld (SaveGameSelected),a 932 call SetLoadGameGraphics933 call SetNamesInLoadGameButtons935937 ld hl,InGamePalette938 call SetPalette939 call SetSpatInCastle940 call SetInterruptHandler 942 call SetLoadGameSelectButtons944 call SetFontPage0Y212 946950 xor a951 ld (framecounter),a953 .engine:954 ld a,(framecounter)955 inc a956 ld (framecounter),a957958 call screenonAfter3Frames959960 call SwapAndSetPage 961 call PopulateControls 963 964 ld ix,GenericButtonTable965 call CheckButtonInteractionControlsNotOnInt966 call .CheckSaveGameButtonClicked 968 ld ix,GenericButtonTable969 call ScenarioSelectCode.SetGenericButtons 972 call SetNamesInLoadGameButtons973 jp .engine975 .EndTitleScreenEngine:976982 call FadeOutMusic983 call SetTempisr 984 call SetSpatInGame985 xor a986 ld (GameStatus),a 987 ret989.CheckSaveGameButtonClicked: 990 ret nc992 ld a,b993 cp 3994 jp z,.LoadButtonPressed995 cp 2996 jp z,.BackButtonPressed997 cp 1998 jp z,.DeleteButtonPressed1000 .SaveGamePressed:1001 ld a,13 1002 sub b1003 add a,a1004 add a,a 1005 di1006 ld ($6100),a 1008 ld a,($4000+HeroMove)1009 cp 2551010 ret z1012 ld a,13 1013 sub b1014 ld (SaveGameSelected),a 1016 call SetLoadGameSelectButtons 1018 1019 ld a,(SaveGameSelected)1020 ld d,01021 ld e,a1022 ld hl,GenericButtonTableLenghtPerButton1023 call MultiplyHlWithDE 1024 ld de,GenericButtonTable+11025 add hl,de1026 ex de,hl1027 ld hl,.ScenarioButtonConstantlyLit1028 ld bc,41029 ldir1030 ret1032 .LoadButtonPressed:1033 ld a,(SaveGameSelected) 1034 cp 2551035 ret z1037 pop af1038 ld a,11039 ld (LoadSaveData?),a1041 ld a,(SaveGameSelected) 1042 add a,a1043 add a,a 1044 di1045 ld ($6100),a 1046 ld hl,(WorldPointer-StartSaveGameData+$4000)1047 ld (WorldPointer),hl1048 jp .EndTitleScreenEngine1050 .BackButtonPressed:1051 pop af1052 jp TitleScreenCode1053 ret1055 .DeleteButtonPressed:1056 ld a,(SaveGameSelected) 1057 cp 2551058 ret z1059 pop af1060 jp ConfirmDeleteFileCOde1062 .SetDifficulty:1063 ld a,b1064 ld (Difficulty),a1065 call SetDifficultyButtonConstantlyLit1066 ret1068 ld a,%1100 00111069 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 1070 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 1072 .ScenarioButtonConstantlyLit:1073 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1281074 .ScenarioButtonNormallyLit:1075 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1281086DeleteFileWindowDX: equ 030 + 261087DeleteFileWindowDY: equ 0631088DeleteFileWindowNX: equ 1441089DeleteFileWindowNY: equ 0511090ConfirmDeleteFileCOde:1091 call SetConfirmDeleteFileButtons1092 call SetConfirmDeleteFileGraphics 1093 call SetConfirmDeleteFileGraphics2 1094 call SwapAndSetPage 1095 call SetConfirmDeleteFileGraphics 1096 call SetConfirmDeleteFileGraphics2 1098 .engine: 1099 call SwapAndSetPage 1100 call PopulateControls 11021107 ld a,(NewPrContr)1108 bit 5,a 1109 jp nz,LoadGameSelectCodeSkipScreenOff1111 ld ix,GenericButtonTable1112 call CheckButtonInteractionControlsNotOnInt1114 call .CheckButtonClicked 1116 ld ix,GenericButtonTable1117 call ScenarioSelectCode.SetGenericButtons 1119 call .CheckClickOutOfWindow 1121 halt1122 jp .engine1124 .CheckClickOutOfWindow:1125 ld a,(NewPrContr)1126 bit 4,a 1127 ret z1129 ld a,(spat+0) 1130 cp DeleteFileWindowDY1131 jr c,.NotOutOfWindow1132 cp DeleteFileWindowDY+DeleteFileWindowNY1133 jr nc,.NotOutOfWindow1134 1135 ld a,(spat+1) 1136 add a,061137 cp DeleteFileWindowDX1138 jr c,.NotOutOfWindow1139 cp DeleteFileWindowDX+DeleteFileWindowNX1140 ret c1141 .NotOutOfWindow:1142 pop af1143 jp LoadGameSelectCodeSkipScreenOff1146 .CheckButtonClicked:1147 ret nc1148 pop af 1149 ld a,b1150 cp 1 1151 jp z,LoadGameSelectCodeSkipScreenOff1152 1155 ld a,(SaveGameSelected) 1156 add a,a1157 add a,a 1158 di1159 ld ($6100),a 1161 1162 ld hl,$40001163 call SectorErase 1164 call CheckEraseDonePage11165 jp LoadGameSelectCodeSkipScreenOff1167CheckEraseDonePage1:1168 ld hl,4000H 1169 ld a,0FFH 1170 .Erase_Wait:1171 cp (hl) 1172 ret z 1173 jr .Erase_Wait 1175SetConfirmDeleteFileButtons:1176 ld hl,SetConfirmDeleteFileuButtonTable-21177 ld de,GenericButtonTable-21178 ld bc,2+(GenericButtonTableLenghtPerButton*02)1179 ldir1180 ret1182SetConfirmDeleteFileuButtonTableGfxBlock: db RetreatBlock1183SetConfirmDeleteFileuButtonTableAmountOfButtons: db 021184SetConfirmDeleteFileuButtonTable: 1186 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1187 1188 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1190.Button1Ytop: equ 0881191.Button1YBottom: equ .Button1Ytop + 0191192.Button1XLeft: equ 048 + 261193.Button1XRight: equ .Button1XLeft + 0201195.Button2Ytop: equ 0891196.Button2YBottom: equ .Button2Ytop + 0181197.Button2XLeft: equ 048+090 + 261198.Button2XRight: equ .Button2XLeft + 0201200SetConfirmDeleteFileGraphics:1201 ld hl,$4000 + (050*128) + (000/2) - 1281202 ld de,$0000 + (063*128) + (056/2) - 1281203 ld bc,$0000 + (051*256) + (144/2)1204 ld a,DiskMenuBlock 1205 jp CopyRamToVramCorrectedCastleOverview 1207SetConfirmDeleteFileGraphics2:1208 ld hl,$4000 + (000*128) + (144/2) - 1281209 ld de,$0000 + (071*128) + (106/2) - 1281210 ld bc,$0000 + (005*256) + (040/2)1211 ld a,DiskMenuBlock 1212 jp CopyRamToVramCorrectedCastleOverview 12271228SetNamesInLoadGameButtons:1229 ld b,10 1230 ld a,000 1231 ld c,050+(0*13) 1232 .loop:1233 push af1234 push bc1235 call .SetName1236 pop bc1237 ld a,c1238 add a,131239 ld c,a 1240 pop af1241 inc a 1242 djnz .loop1243 ei1244 ret1246 .SetName:1247 add a,a1248 add a,a 1249 di1250 ld ($6100),a 1252 ld a,(amountofplayers-StartSaveGameData+$4000)1253 ld d,a 1254 ld hl,(WorldPointer-StartSaveGameData+$4000)1256 ld a,($4000+HeroMove)1257 cp 2551258 ret z1260 ld a,(slot.page12rom) 1261 out ($a8),a 1262 ld a,Loaderblock 1263 call block12 1265 push de1267 ld de,ScenarioNameAddress+2 1268 add hl,de1269 push bc1270 ld b,211 1271 call SetText 1272 pop bc1274 inc hl 1275 push bc1276 ld b,025 1277 call SetText 1278 pop bc1280 pop de1282 ld h,000 1283 ld l,d 1284 push bc1285 ld b,190 1286 call SetNumber16BitCastle1288 ld a,(DayOfMonthTientallen)1289 ld hl,101290 ld d,01291 ld e,a1292 call MultiplyHlWithDE 1293 ld a,(DayOfMonthEenheden)1294 ld e,a1295 ld d,01296 add hl,de1298 pop bc1299 push bc1300 ld b,124 1301 call SetNumber16BitCastle1303 ld hl,.TextSlash1304 pop bc1305 push bc1306 ld a,(PutLetter+dx)1307 ld b,a 1308 call SetText 1310 ld a,(MonthTientallen)1311 ld hl,101312 ld d,01313 ld e,a1314 call MultiplyHlWithDE 1315 ld a,(MonthEenheden)1316 ld e,a1317 ld d,01318 add hl,de1319 pop bc1320 push bc1321 ld a,(PutLetter+dx)1322 ld b,a 1323 call SetNumber16BitCastle1325 ld hl,.TextSlash1326 pop bc1327 push bc1328 ld a,(PutLetter+dx)1329 ld b,a 1330 call SetText 1332 ld a,(YearTientallen)1333 ld hl,101334 ld d,01335 ld e,a1336 call MultiplyHlWithDE 1337 ld a,(YearEenheden)1338 ld e,a1339 ld d,01340 add hl,de1341 ld de,1980 1342 add hl,de1344 pop bc1345 push bc1346 ld a,(PutLetter+dx)1347 ld b,a 1348 call SetNumber16BitCastle1349 pop bc 1350 ret1352.TextSlash: db "/",2551359SetLoadGameSelectButtons:1360 ld hl,LoadGameSelectButtonTable-21361 ld de,GenericButtonTable-21362 ld bc,2+(GenericButtonTableLenghtPerButton*13)1363 ldir1364 ret1366 1367LoadGameSelectButton1Ytop: equ 047 + (0*13)1368LoadGameSelectButton1YBottom: equ LoadGameSelectButton1Ytop + 0111369LoadGameSelectButton1XLeft: equ 0221370LoadGameSelectButton1XRight: equ LoadGameSelectButton1XLeft + 0961372LoadGameSelectButton2Ytop: equ 047 + (1*13)1373LoadGameSelectButton2YBottom: equ LoadGameSelectButton2Ytop + 0111374LoadGameSelectButton2XLeft: equ 0221375LoadGameSelectButton2XRight: equ LoadGameSelectButton2XLeft + 0961377LoadGameSelectButton3Ytop: equ 047 + (2*13)1378LoadGameSelectButton3YBottom: equ LoadGameSelectButton3Ytop + 0111379LoadGameSelectButton3XLeft: equ 0221380LoadGameSelectButton3XRight: equ LoadGameSelectButton3XLeft + 0961382LoadGameSelectButton4Ytop: equ 047 + (3*13)1383LoadGameSelectButton4YBottom: equ LoadGameSelectButton4Ytop + 0111384LoadGameSelectButton4XLeft: equ 0221385LoadGameSelectButton4XRight: equ LoadGameSelectButton4XLeft + 0961387LoadGameSelectButton5Ytop: equ 047 + (4*13)1388LoadGameSelectButton5YBottom: equ LoadGameSelectButton5Ytop + 0111389LoadGameSelectButton5XLeft: equ 0221390LoadGameSelectButton5XRight: equ LoadGameSelectButton5XLeft + 0961392LoadGameSelectButton6Ytop: equ 047 + (5*13)1393LoadGameSelectButton6YBottom: equ LoadGameSelectButton6Ytop + 0111394LoadGameSelectButton6XLeft: equ 0221395LoadGameSelectButton6XRight: equ LoadGameSelectButton6XLeft + 0961397LoadGameSelectButton7Ytop: equ 047 + (6*13)1398LoadGameSelectButton7YBottom: equ LoadGameSelectButton7Ytop + 0111399LoadGameSelectButton7XLeft: equ 0221400LoadGameSelectButton7XRight: equ LoadGameSelectButton7XLeft + 0961402LoadGameSelectButton8Ytop: equ 047 + (7*13)1403LoadGameSelectButton8YBottom: equ LoadGameSelectButton8Ytop + 0111404LoadGameSelectButton8XLeft: equ 0221405LoadGameSelectButton8XRight: equ LoadGameSelectButton8XLeft + 0961407LoadGameSelectButton9Ytop: equ 047 + (8*13)1408LoadGameSelectButton9YBottom: equ LoadGameSelectButton9Ytop + 0111409LoadGameSelectButton9XLeft: equ 0221410LoadGameSelectButton9XRight: equ LoadGameSelectButton9XLeft + 0961412LoadGameSelectButton10Ytop: equ 047 + (9*13)1413LoadGameSelectButton10YBottom: equ LoadGameSelectButton10Ytop + 0111414LoadGameSelectButton10XLeft: equ 0221415LoadGameSelectButton10XRight: equ LoadGameSelectButton10XLeft + 0961417 1418LoadGameSelectButton11Ytop: equ 1911419LoadGameSelectButton11YBottom: equ LoadGameSelectButton11Ytop + 0151420LoadGameSelectButton11XLeft: equ 1061421LoadGameSelectButton11XRight: equ LoadGameSelectButton11XLeft + 0181423LoadGameSelectButton12Ytop: equ 1911424LoadGameSelectButton12YBottom: equ LoadGameSelectButton12Ytop + 0151425LoadGameSelectButton12XLeft: equ 1321426LoadGameSelectButton12XRight: equ LoadGameSelectButton12XLeft + 0181428LoadGameSelectButton13Ytop: equ 1911429LoadGameSelectButton13YBottom: equ LoadGameSelectButton13Ytop + 0151430LoadGameSelectButton13XLeft: equ 2161431LoadGameSelectButton13XRight: equ LoadGameSelectButton13XLeft + 0221433LoadGameSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock 1434LoadGameSelectButtonTableAmountOfButtons: db 131435LoadGameSelectButtonTable: 1437 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton1Ytop,LoadGameSelectButton1YBottom,LoadGameSelectButton1XLeft,LoadGameSelectButton1XRight | dw $0000 + (LoadGameSelectButton1Ytop*128) + (LoadGameSelectButton1XLeft/2) - 128 1438 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton2Ytop,LoadGameSelectButton2YBottom,LoadGameSelectButton2XLeft,LoadGameSelectButton2XRight | dw $0000 + (LoadGameSelectButton2Ytop*128) + (LoadGameSelectButton2XLeft/2) - 128 1439 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton3Ytop,LoadGameSelectButton3YBottom,LoadGameSelectButton3XLeft,LoadGameSelectButton3XRight | dw $0000 + (LoadGameSelectButton3Ytop*128) + (LoadGameSelectButton3XLeft/2) - 1281440 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton4Ytop,LoadGameSelectButton4YBottom,LoadGameSelectButton4XLeft,LoadGameSelectButton4XRight | dw $0000 + (LoadGameSelectButton4Ytop*128) + (LoadGameSelectButton4XLeft/2) - 1281441 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton5Ytop,LoadGameSelectButton5YBottom,LoadGameSelectButton5XLeft,LoadGameSelectButton5XRight | dw $0000 + (LoadGameSelectButton5Ytop*128) + (LoadGameSelectButton5XLeft/2) - 1281442 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton6Ytop,LoadGameSelectButton6YBottom,LoadGameSelectButton6XLeft,LoadGameSelectButton6XRight | dw $0000 + (LoadGameSelectButton6Ytop*128) + (LoadGameSelectButton6XLeft/2) - 1281443 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton7Ytop,LoadGameSelectButton7YBottom,LoadGameSelectButton7XLeft,LoadGameSelectButton7XRight | dw $0000 + (LoadGameSelectButton7Ytop*128) + (LoadGameSelectButton7XLeft/2) - 1281444 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton8Ytop,LoadGameSelectButton8YBottom,LoadGameSelectButton8XLeft,LoadGameSelectButton8XRight | dw $0000 + (LoadGameSelectButton8Ytop*128) + (LoadGameSelectButton8XLeft/2) - 1281445 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton9Ytop,LoadGameSelectButton9YBottom,LoadGameSelectButton9XLeft,LoadGameSelectButton9XRight | dw $0000 + (LoadGameSelectButton9Ytop*128) + (LoadGameSelectButton9XLeft/2) - 1281446 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton10Ytop,LoadGameSelectButton10YBottom,LoadGameSelectButton10XLeft,LoadGameSelectButton10XRight | dw $0000 + (LoadGameSelectButton10Ytop*128) + (LoadGameSelectButton10XLeft/2) - 1281448 1449 db %1100 0011 | dw $4000 + (122*128) + (028/2) - 128 | dw $4000 + (122*128) + (046/2) - 128 | dw $4000 + (122*128) + (064/2) - 128 | db LoadGameSelectButton11Ytop,LoadGameSelectButton11YBottom,LoadGameSelectButton11XLeft,LoadGameSelectButton11XRight | dw $0000 + (LoadGameSelectButton11Ytop*128) + (LoadGameSelectButton11XLeft/2) - 1281450 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db LoadGameSelectButton12Ytop,LoadGameSelectButton12YBottom,LoadGameSelectButton12XLeft,LoadGameSelectButton12XRight | dw $0000 + (LoadGameSelectButton12Ytop*128) + (LoadGameSelectButton12XLeft/2) - 1281451 db %1100 0011 | dw $4000 + (137*128) + (000/2) - 128 | dw $4000 + (137*128) + (022/2) - 128 | dw $4000 + (137*128) + (044/2) - 128 | db LoadGameSelectButton13Ytop,LoadGameSelectButton13YBottom,LoadGameSelectButton13XLeft,LoadGameSelectButton13XRight | dw $0000 + (LoadGameSelectButton13Ytop*128) + (LoadGameSelectButton13XLeft/2) - 1281453ScenarioSelectCode:1454 xor a1455 ld (CampaignMode?),a1457 call screenoff1458 call DeactivateAllHeroesAndCastles 1460 ld a,41461 ld (GameStatus),a 1462 ld a,11463 ld (activepage),a14641465 ld (ScenarioPage),a1466 ld (ScenarioSelected),a1467 ld a,21468 ld (Difficulty),a 1469 ld a,2551470 ld (player1StartingTown),a1471 ld (player2StartingTown),a1472 ld (player3StartingTown),a1473 ld (player4StartingTown),a1474 1475 ld hl,TavernHeroesReset1476 ld de,TavernHeroesTable1477 ld bc,EndTavernHeroesReset-TavernHeroesReset1478 ldir1479 1480 ld hl,ListOfUnlockedHeroes-11481 .FreeNextHero:1482 inc hl1483 ld a,(hl)1484 or a1485 jr z,.EndFreeAllUnlockedHeroes1486 cp 2551487 jr z,.FreeNextHero1488 res 7,(hl)1489 jr .FreeNextHero1490 .EndFreeAllUnlockedHeroes:1491 1492 call SetScenarioSelectGraphics1493 xor a1494 ld (activepage),a 1495 call SetScenarioSelectGraphics1496 ld hl,InGamePalette1497 call SetPalette1498 call SetSpatInCastle1499 call SetInterruptHandler 1500 call SetScenarioSelectButtons1502 call SetFontPage0Y212 1504 call SetAmountOfScenarioButtons1505 call SetAmountOfScenarioPageButtons1506 call SetPage1ButtonConstantlyLit1507 call SetDifficultyButtonConstantlyLit1508 ld b,281509 call .ScenarioPressed1510 xor a1511 ld (framecounter),a1512 .engine:1513 ld a,(framecounter)1514 inc a1515 ld (framecounter),a15161517 call screenonAfter3Frames1518 call CheckMouse1519 call SwapAndSetPage 1520 call PopulateControls 15221531 1532 ld ix,GenericButtonTable1533 call CheckButtonInteractionControlsNotOnInt1534 call .CheckScenarioSelectButtonClicked 1536 ld ix,GenericButtonTable1537 call .SetGenericButtons 1540 call SetNamesInScenarioButtons1541 call SetTextPage123Buttons1542 call SetTextHumanOrCPUButtons1543 call SetTextStartingTownButtons1544 call CheckRightClickDifficulty1545 call CheckRightClickTownAllignment1546 jp .engine1548 .EndTitleScreenEngine:1549 call .SortHumanCPUOFFPlayersAndTown 1550 call .SetAmountOfPlayers1551 call .SetStartingTown1552 call .SetStartingResources1553 call .SetStartingHeroes1554 call .SetTavernHeroes1555 call FadeOutMusic1556 call SetTempisr 1557 call SetSpatInGame1558 xor a1559 ld (GameStatus),a 1560 ret1562.SetTavernHeroes:1563 call .SetMaxAmountOfTavernSlots 1564 ld hl,ListOfUnlockedHeroes 1565 ld a,r1566 call .IncreaseLoop 1568 ld iy,TavernHeroesPlayer11570 .FillSlotsLoop:1571 push iy1572 call .SetTavernHeroesSlot1573 pop iy1574 inc iy1575 djnz .FillSlotsLoop1576 ret1578 .SetTavernHeroesSlot:1579 call .SetTavernHeroLoop1580 ld de,TavernHeroTableLenght+11581 add iy,de1582 call .SetTavernHeroLoop1584 ld a,(amountofplayers)1585 cp 21586 ret z1588 ld de,TavernHeroTableLenght+11589 add iy,de1590 call .SetTavernHeroLoop1592 ld a,(amountofplayers)1593 cp 31594 ret z1596 ld de,TavernHeroTableLenght+11597 add iy,de1598 call .SetTavernHeroLoop1599 ret1601 .SetMaxAmountOfTavernSlots:1602 1603 call .CheckAmountOfUnlockedHeroes 1605 ld a,(amountofplayers)1606 ld b,a1607 ld a,c1608 sub a,b1609 ld b,01610 ld c,a 1612 ld a,(amountofplayers)1613 ld d,01614 ld e,a 1615 call DivideBCbyDE 1617 ld a,c1618 cp 81619 jr c,.EndCheckOverFlow1620 ld a,71621 .EndCheckOverFlow:1622 ld b,a 1623 ret1625 .CheckAmountOfUnlockedHeroes: 1626 ld hl,ListOfUnlockedHeroes1627 ld c,0 1628 .CheckAmountOfUnlockedHeroesLoop:1629 ld a,(hl)1630 or a1631 ret z1632 inc c1633 inc hl1634 jr .CheckAmountOfUnlockedHeroesLoop1636 .StartOfList:1637 ld hl,ListOfUnlockedHeroes1639 .SetTavernHeroLoop: 1640 ld a,(hl)1641 or a1642 jr z,.StartOfList1643 bit 7,(hl)1644 jr z,.TavernHeroFound1645 call .IncreaseListWithRandomAmount 1646 jr .SetTavernHeroLoop1647 .TavernHeroFound:1648 ld a,(hl)1649 set 7,(hl) 1650 ld (iy),a 1651 .IncreaseListWithRandomAmount: 1652 ld a,r1653 and 15 1655 .IncreaseLoop: 1656 push af1657 inc hl1658 ld a,(hl)1659 or a 1660 jr nz,.EndCheckEndOfList1661 ld hl,ListOfUnlockedHeroes1662 .EndCheckEndOfList:1663 pop af1664 dec a1665 jr nz,.IncreaseLoop1666 ret1668.SetStartingHeroes:1669 ld ix,pl1hero1y1670 ld iy,Castle11671 ld a,(player1StartingTown) 1672 call .SetStartingHeroForThisPlayer1673 ld ix,pl2hero1y1674 ld iy,Castle21675 ld a,(player2StartingTown) 1676 call .SetStartingHeroForThisPlayer1678 ld a,(amountofplayers)1679 cp 21680 ret z1682 ld ix,pl3hero1y1683 ld iy,Castle31684 ld a,(player3StartingTown) 1685 call .SetStartingHeroForThisPlayer1687 ld a,(amountofplayers)1688 cp 31689 ret z1691 ld ix,pl4hero1y1692 ld iy,Castle41693 ld a,(player4StartingTown) 1694 call .SetStartingHeroForThisPlayer1695 ret1697 .SetStartingHeroForThisPlayer:1698 push ix1699 ld b,a1700 add a,a1701 add a,b 1702 ld d,01703 ld e,a1704 ld ix,ListOfHeroAddressesAndAmounts-31705 add ix,de1707 1708 ld e,(ix+2) 1709 ld d,0 1710 ld a,r1711 ld b,01712 ld c,a 1713 call DivideBCbyDE 1715 ld e,(ix)1716 ld d,(ix+1) 1717 add hl,de1718 1719 bit 7,(hl) 1720 jr z,.EndCheckPickRandomHero1721 1723 .PickRandomHeroWithoutCastle:1724 ld a,r1725 and 31 1727 ld hl,HeroesWithoutCastle17291736 ld d,01737 ld e,a1738 add hl,de1739 bit 7,(hl) 1740 jr nz,.PickRandomHeroWithoutCastle1741 .EndCheckPickRandomHero:1742 ld b,(hl) 1743 set 7,(hl) 17451748 pop ix1749 call .SetHero1750 ret1752 .SetHero:1753 push bc 1754 call .ClearHeroSlot1755 call .SetYX 1756 pop bc 1757 call .SetHeroSpecificInfo1758 call .SetManaAndMovementToMax 1759 ret1761 .SetManaAndMovementToMax:1762 call SetHeroMaxMovementPoints.IxAlreadySet1763 ld (ix+HeroMove),a 1765 ld de,ItemIntelligencePointsTable1766 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet1767 push ix1768 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1769 pop ix1770 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1771 ld l,(ix+HeroTotalMana+0)1772 ld h,(ix+HeroTotalMana+1)1773 ld (ix+HeroMana+0),l1774 ld (ix+HeroMana+1),h1775 ret1777 .SetHeroSpecificInfo: 1779 ld hl,HeroAddressesAdol-heroAddressesLenght1780 ld de,heroAddressesLenght 1781 .loop3:1782 add hl,de1783 djnz .loop31784 ld (ix+HeroSpecificInfo+0),l1785 ld (ix+HeroSpecificInfo+1),h1787 1788 ld de,HeroInfoSkill1789 add hl,de1790 ld a,(hl)1791 ld (ix+HeroSkills),a1793 1794 inc hl 1795 ld a,(hl)1796 dec a1797 ld b,01798 ld c,a1799 ld de,111800 call DivideBCbyDE 1802 add hl,hl 1803 add hl,hl 1804 ld de,.HeroSkillPerClassTable1805 add hl,de1806 ld a,(hl)1807 ld (ix+HeroStatAttack),a1808 inc hl1809 ld a,(hl)1810 ld (ix+HeroStatDefense),a1811 inc hl1812 ld a,(hl)1813 ld (ix+HeroStatKnowledge),a1814 inc hl1815 ld a,(hl)1816 ld (ix+HeroStatSpellDamage),a1818 1819 ld a,(iy+CastleLevel1Units) 1820 ld (ix+HeroUnits),a1821 ld l,(iy+CastleLevel1UnitsAvail) 1822 ld h,(iy+CastleLevel1UnitsAvail+1)1823 ld (ix+HeroUnits+1),l1824 ld (ix+HeroUnits+2),h1826 ld a,(iy+CastleLevel2Units) 1827 ld (ix+HeroUnits+3),a1828 ld l,(iy+CastleLevel2UnitsAvail) 1829 ld h,(iy+CastleLevel2UnitsAvail+1)1830 ld (ix+HeroUnits+4),l1831 ld (ix+HeroUnits+5),h1832 ret1834 .HeroSkillPerClassTable:18351836 db 2,1,1,1 1837 db 3,1,1,0 1838 db 1,3,1,0 1839 db 1,2,1,1 1840 1841 db 1,2,1,1 1842 db 1,1,2,1 1843 db 2,1,1,1 1844 1845 db 0,0,3,2 1846 db 1,0,1,3 1847 db 0,1,2,2 1848 db 1,1,2,1 1850 .ClearHeroSlot:1851 ld hl,EmptyHeroRecruitedAtTavern1852 push ix1853 pop de1854 ld bc,lenghtherotable-2 1855 ldir1856 ret1858 .SetYX:1859 ld a,(iy+CastleY) 1860 dec a1861 ld (ix+HeroY),a 1862 ld a,(iy+Castlex) 1863 inc a1864 inc a1865 ld (ix+HeroX),a 1866 ret1869.SetStartingResources:1870 ld a,(Difficulty)1871 dec a1872 ld hl,.ResourcesEasy1873 jr z,.DifficultyFound1874 dec a1875 ld hl,.ResourcesNormal1876 jr z,.DifficultyFound1877 dec a1878 ld hl,.ResourcesHard1879 jr z,.DifficultyFound1880 dec a1881 ld hl,.ResourcesExpert1882 jr z,.DifficultyFound18831884 ld hl,.ResourcesImpossible18851886 1887 .DifficultyFound:1888 push hl1889 ld de,ResourcesPlayer11890 call .SetResources1891 pop hl1892 push hl1893 ld de,ResourcesPlayer21894 call .SetResources1895 pop hl1896 push hl1897 ld de,ResourcesPlayer31898 call .SetResources1899 pop hl1900 push hl1901 ld de,ResourcesPlayer41902 call .SetResources1903 pop hl1904 ret1906 .SetResources:1907 ld bc,101908 ldir1909 ret1910 1911 .ResourcesEasy: dw 30000, 30,30,15,151912 .ResourcesNormal: dw 20000, 20,20,10,101913 .ResourcesHard: dw 15000, 15,15,07,071914 .ResourcesExpert: dw 10000, 10,10,04,041915 .ResourcesImpossible: dw 00000, 00,00,00,001918.SetStartingTown:1919 1920 ld hl,player1StartingTown1921 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1922 ld de,Castle1+CastleName1923 ld bc,InfoTownLenght1924 ldir 1926 ld hl,player2StartingTown1927 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1928 ld de,Castle2+CastleName1929 ld bc,InfoTownLenght1930 ldir 1932 ld hl,player3StartingTown1933 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1934 ld de,Castle3+CastleName1935 ld bc,InfoTownLenght1936 ldir 1938 ld hl,player4StartingTown1939 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1940 ld de,Castle4+CastleName1941 ld bc,InfoTownLenght1942 ldir 1944 1945 ld hl,player1StartingTown1946 call .ChangeTownInCaseRandomIsSelected1947 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1948 ld de,Castle1+CastleName1949 ld bc,InfoTownLenght1950 ldir 1952 ld hl,player2StartingTown1953 call .ChangeTownInCaseRandomIsSelected1954 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1955 ld de,Castle2+CastleName1956 ld bc,InfoTownLenght1957 ldir 1959 ld hl,player3StartingTown1960 ld a,(amountofplayers)1961 cp 31962 call nc,.ChangeTownInCaseRandomIsSelected1963 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1964 ld de,Castle3+CastleName1965 ld bc,InfoTownLenght1966 ldir 1968 ld hl,player4StartingTown1969 ld a,(amountofplayers)1970 cp 41971 call nc,.ChangeTownInCaseRandomIsSelected1972 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1973 ld de,Castle4+CastleName1974 ld bc,InfoTownLenght1975 ldir 1976 1977 ld de,Castle1+CastleLevel1978 call .ResetAllBuildings1979 ld de,Castle2+CastleLevel1980 call .ResetAllBuildings1981 ld de,Castle3+CastleLevel1982 call .ResetAllBuildings1983 ld de,Castle4+CastleLevel1984 call .ResetAllBuildings1985 ret1987 .ChangeTownInCaseRandomIsSelected:1988 ld a,(hl)1989 or a1990 ret nz1992 .SetRandomTown:1993 1994 ld a,(TotalAmountOfUnlockedTowns)1995 ld e,a1996 ld d,0 1997 ld a,r1998 ld b,01999 ld c,a 2000 push hl2001 call DivideBCbyDE 2003 ld a,l2004 inc a 2005 pop hl2006 ld b,a 2007 2008 ld a,(player1StartingTown)2009 cp b2010 jr z,.SetRandomTown2011 ld a,(player2StartingTown)2012 cp b2013 jr z,.SetRandomTown2014 ld a,(player3StartingTown)2015 cp b2016 jr z,.SetRandomTown2017 ld a,(player4StartingTown)2018 cp b2019 jr z,.SetRandomTown2021 ld (hl),b2022 ld a,b 2023 ret2025 .ResetAllBuildings:2026 ld hl,ResetBuildings2027 ld bc,82028 ldir2029 ret2031.SetAmountOfPlayers:2032 ld a,22033 ld (amountofplayers),a2035 ld ix,(WorldPointer)2036 ld a,(ix+ScenarioNameAddress)2037 cp "2"2038 ret z2039 2040 ld a,(player3human?) 2041 cp 22042 ret z2043 ld a,32044 ld (amountofplayers),a2046 ld ix,(WorldPointer)2047 ld a,(ix+ScenarioNameAddress)2048 cp "3"2049 ret z 2051 ld a,(player4human?) 2052 cp 22053 ret z2054 ld a,42055 ld (amountofplayers),a2056 ret2058.SortHumanCPUOFFPlayersAndTown:2059 2060 ld a,(player4human?) 2061 cp 22062 jr z,.EndCheckMovePlayer4Up2063 ld a,(player3human?) 2064 cp 22065 jr z,.MovePlayer4Up2066 .EndCheckMovePlayer4Up:2068 2069 ld a,(player3human?) 2070 cp 22071 jr z,.EndCheckMovePlayer3Up2072 ld a,(player2human?) 2073 cp 22074 jr z,.MovePlayer3Up2075 .EndCheckMovePlayer3Up:2077 2078 ld a,(player2human?) 2079 cp 22080 jr z,.EndCheckMovePlayer2Up2081 ld a,(player1human?) 2082 cp 22083 jr z,.MovePlayer2Up2084 .EndCheckMovePlayer2Up:2085 ret2087 .MovePlayer2Up: 2088 ld a,(player2human?) 2089 ld (player1human?),a 2090 ld a,22091 ld (player2human?),a 2093 ld a,(player2StartingTown) 2094 ld (player1StartingTown),a 2095 jp .SortHumanCPUOFFPlayersAndTown2097 .MovePlayer3Up: 2098 ld a,(player3human?) 2099 ld (player2human?),a 2100 ld a,22101 ld (player3human?),a 2103 ld a,(player3StartingTown) 2104 ld (player2StartingTown),a 2105 jp .SortHumanCPUOFFPlayersAndTown2107 .MovePlayer4Up: 2108 ld a,(player4human?) 2109 ld (player3human?),a 2110 ld a,22111 ld (player4human?),a 2113 ld a,(player4StartingTown) 2114 ld (player3StartingTown),a 2115 jp .SortHumanCPUOFFPlayersAndTown2120.CheckScenarioSelectButtonClicked: 2121 ret nc2123 ld a,b2124 cp 192125 jp nc,.ScenarioPressed2126 cp 162127 jp nc,.Page123Pressed2128 cp 142129 jp z,.BackPressed2130 cp 152131 jp z,.BeginPressed2132 cp 102133 jp nc,.HumanOrCPUPressed2134 cp 062135 jp nc,.StartingTownPressed2137 .DifficultyPressed:2138 ld b,12139 cp 52140 jr z,.SetDifficulty2141 ld b,22142 cp 42143 jr z,.SetDifficulty2144 ld b,32145 cp 32146 jr z,.SetDifficulty2147 ld b,42148 cp 22149 jr z,.SetDifficulty2150 ld b,52151 .SetDifficulty:2152 ld a,b2153 ld (Difficulty),a2154 call SetDifficultyButtonConstantlyLit2155 ret2157 .StartingTownPressed:21582159 cp 92160 ld hl,player1StartingTown2161 jr z,.StartingTownFound2162 cp 82163 ld hl,player2StartingTown2164 jr z,.StartingTownFound2165 cp 72166 ld hl,player3StartingTown2167 jr z,.StartingTownFound2168 ld hl,player4StartingTown2169 .StartingTownFound:2170 ld a,(hl)2171 inc a2172 ld (hl),a2173 2174 2175 ld b,0 2176 ld a,(player1StartingTown)2177 cp (hl)2178 jr nz,.EndCheckInUseByPlayer12179 inc b2180 .EndCheckInUseByPlayer1:2181 ld a,(player2StartingTown)2182 cp (hl)2183 jr nz,.EndCheckInUseByPlayer22184 inc b2185 .EndCheckInUseByPlayer2:2186 ld a,(player3StartingTown)2187 cp (hl)2188 jr nz,.EndCheckInUseByPlayer32189 inc b2190 .EndCheckInUseByPlayer3:2191 ld a,(player4StartingTown)2192 cp (hl)2193 jr nz,.EndCheckInUseByPlayer42194 inc b2195 .EndCheckInUseByPlayer4:2196 bit 0,b2197 jr z,.StartingTownFound 2200 ld a,(TotalAmountOfUnlockedTowns)2201 inc a2202 cp (hl)2204 ret nz2205 ld (hl),02206 ret2208 .HumanOrCPUPressed:22092210 cp 132211 ld hl,player1human?2212 jr z,.HumanOrCPUPPressed2213 cp 122214 ld hl,player2human?2215 jr z,.HumanOrCPUPPressed2216 cp 112217 ld hl,player3human?2218 jr z,.HumanOrCPUPPressed2219 ld hl,player4human?2221 .HumanOrCPUPPressed:2222 2223 ld a,(hl) 2224 dec a2225 jr nz,.EndCheckCurrentButtonPressedIsHuman2226 2227 ld c,1 2228 call .CheckAmountOfButtonsCPUorHuman2229 ld a,b 2230 cp 1 2231 ret z2232 .EndCheckCurrentButtonPressedIsHuman:2234 2235 ld a,(hl) 2236 or a2237 jr nz,.EndCheckCurrentButtonPressedIsCPU2238 2239 ld c,1 2240 call .CheckAmountOfButtonsCPUorHuman2241 ld a,b 2242 cp 2 2243 jr nc,.EndCheckCurrentButtonPressedIsCPU2244 2245 ld c,0 2246 call .CheckAmountOfButtonsCPUorHuman2247 ld a,b 2248 cp 2 2249 jr nc,.EndCheckCurrentButtonPressedIsCPU2250 ld (hl),1 2251 ret2252 .EndCheckCurrentButtonPressedIsCPU:2254 ld a,(hl)2255 dec a2256 ld (hl),a2257 cp 2552258 ret nz2259 ld (hl),2 2260 ld a,%1100 00112261 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 2262 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 2263 ld ix,(WorldPointer)2264 ld a,(ix+ScenarioNameAddress)2265 cp "2"2266 ret z2267 ld a,%1100 00112268 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2269 ld ix,(WorldPointer)2270 ld a,(ix+ScenarioNameAddress)2271 cp "3"2272 ret z2273 ld a,%1100 00112274 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2275 ret2277 .CheckAmountOfButtonsCPUorHuman:2278 ld b,0 2279 ld a,(player1human?)2280 cp c2281 jr nz,.EndCheckButtonPlayer12282 inc b2283 .EndCheckButtonPlayer1:2284 ld a,(player2human?)2285 cp c2286 jr nz,.EndCheckButtonPlayer22287 inc b2288 .EndCheckButtonPlayer2:2289 2290 ld ix,(WorldPointer)2291 ld a,(ix+ScenarioNameAddress)2292 cp "2"2293 ret z 2295 ld a,(player3human?)2296 cp c2297 jr nz,.EndCheckButtonPlayer32298 inc b2299 .EndCheckButtonPlayer3:2301 ld ix,(WorldPointer)2302 ld a,(ix+ScenarioNameAddress)2303 cp "3"2304 ret z2306 ld a,(player4human?)2307 cp c2308 ret nz2309 inc b2310 ret2312 .BackPressed:2313 pop af2314 jp TitleScreenCode2316 .BeginPressed:2317 pop af2318 jp .EndTitleScreenEngine2320 .Page123Pressed:2321 ld b,32322 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+12323 jr z,.ScenarioPageFound2324 cp 172325 ld b,22326 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+12327 jr z,.ScenarioPageFound2328 ld b,12329 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+12330 .ScenarioPageFound:2331 ld a,(ScenarioPage)2332 cp b2333 ret z2334 ld a,b2335 ld (ScenarioPage),a2337 push de2338 call SetAmountOfScenarioPageButtons2339 pop de2340 ld hl,.PageButtonConstantlyLit2341 ld bc,42342 ldir2344 2345 ld hl,ScenarioSelectButtonTable-22346 ld de,GenericButtonTable-22347 ld bc,2+(GenericButtonTableLenghtPerButton*10)2348 ldir2350 ld a,(ScenarioPage)2351 ld b,a2352 ld a,(LitScenarioButtonInWhichPage?)2353 cp b2354 jp nz,SetAmountOfScenarioButtons2355 call .LightCurrentActiveScenarioButton2356 jp SetAmountOfScenarioButtons2358 .PageButtonConstantlyLit:2359 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1282361 .ScenarioPressed:2362 ld a,(ScenarioPage)2363 ld (LitScenarioButtonInWhichPage?),a2364 ld a,282365 sub b2366 ld (ScenarioSelected),a2368 .LightCurrentActiveScenarioButton:2369 2370 ld a,(AmountOfMapsVisibleInCurrentPage)2371 cp 112372 jr c,.EndCheckMaxMapsInCurrentPageCheck2373 ld a,102374 .EndCheckMaxMapsInCurrentPageCheck:2376 ld d,02377 ld e,a2378 ld hl,GenericButtonTableLenghtPerButton2379 call MultiplyHlWithDE 2380 push hl2381 pop bc2383 ld hl,ScenarioSelectButtonTable2384 ld de,GenericButtonTable23852386 ldir2388 2389 ld a,(ScenarioSelected)2390 ld d,02391 ld e,a2392 ld hl,GenericButtonTableLenghtPerButton2393 call MultiplyHlWithDE 2394 ld de,GenericButtonTable+12395 add hl,de2396 ex de,hl2397 ld hl,.ScenarioButtonConstantlyLit2398 ld bc,42399 ldir2401 2402 ld a,(ScenarioPage)2403 dec a2404 ld b,02405 jr z,.PageFound2406 dec a2407 ld b,102408 jr z,.PageFound2409 ld b,202410 .PageFound:2411 ld a,(ScenarioSelected)2412 add a,b 2413 ld d,02414 ld e,a2415 ld hl,LenghtMapData2416 call MultiplyHlWithDE 2417 ld de,GentleMaps2418 add hl,de2419 ld (WorldPointer),hl2420 2421 2422 call PutMiniMapScenarioSelectScreen2423 call PutMiniMapScenarioSelectScreen2425 2426 call .SetSelectedScenarioNameRightTopOfScreen2427 call .SetSelectedScenarioNameRightTopOfScreen2429 2430 call .SetMaxAmountOfPlayerButtons2431 call .SetMaxAmountOfPlayerButtons2433 ld a,1 2434 ld (player1human?),a2435 xor a 2436 ld (player2human?),a2437 ld (player1StartingTown),a2438 ld (player2StartingTown),a2439 ld (player3StartingTown),a2440 ld (player4StartingTown),a2441 ret2443 .SetMaxAmountOfPlayerButtons:2444 ld a,%1100 00112445 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*15),a 2446 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*16),a 2447 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 2448 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 2450 call ClearPlayerButtons2451 call PutPlayer1and2Buttons2453 xor a 2454 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 2455 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 2456 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2457 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2458 2459 ld ix,(WorldPointer)2460 ld a,22461 ld (amountofplayers),a2462 ld a,2 2463 ld (player3human?),a2464 ld (player4human?),a2465 ld a,(ix+ScenarioNameAddress)2466 cp "2"2467 jp z,.SetTextInPlayerButtons2469 call PutPlayer3Buttons2470 ld a,%1100 00112471 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 2472 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2474 ld a,32475 ld (amountofplayers),a2476 xor a 2477 ld (player3human?),a2478 ld a,(ix+ScenarioNameAddress)2479 cp "3"2480 jp z,.SetTextInPlayerButtons2482 call PutPlayer4Buttons2483 ld a,%1100 00112484 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 2485 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2486 ld a,42487 ld (amountofplayers),a2488 xor a 2489 ld (player4human?),a2490 2491 .SetTextInPlayerButtons:2492 call SetTextHumanOrCPUButtons2493 call SetTextStartingTownButtons2494 jp SwapAndSetPage 2496 .SetSelectedScenarioNameRightTopOfScreen:2497 call ClearScenarioNameRightTopOfScreen2498 ld b,158 2499 ld c,021 2501 ld hl,(WorldPointer)2502 ld de,ScenarioNameAddress+42503 add hl,de2505 call SetText 2506 jp SwapAndSetPage 2508 .ScenarioButtonConstantlyLit:2509 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1282510 .ScenarioButtonNormallyLit:2511 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1282513 2514 2516.SetGenericButtons: 2517 ld a,(ix+GenericButtonGfxBlock)2518 ld (ButtonGfxBlockCopy),a2520 ld b,(ix+GenericButtonAmountOfButtons)2521 .loop:2522 push bc2523 call .Setbutton2524 pop bc2525 ld de,GenericButtonTableLenghtPerButton2526 add ix,de2528 djnz .loop2529 ret2531 .Setbutton:2532 bit 7,(ix+GenericButtonStatus)2533 ret z 2535 bit 0,(ix+GenericButtonStatus) 2536 res 0,(ix+GenericButtonStatus) 2537 jr nz,.goCopyButton2538 bit 1,(ix+GenericButtonStatus)2539 res 1,(ix+GenericButtonStatus)2540 ret z 2541 .goCopyButton:2543 ld l,(ix+GenericButton_SYSX_Ontouched)2544 ld h,(ix+GenericButton_SYSX_Ontouched+1)2545 bit 6,(ix+GenericButtonStatus)2546 jr nz,.go 2548 ld l,(ix+GenericButton_SYSX_MovedOver)2549 ld h,(ix+GenericButton_SYSX_MovedOver+1)2550 bit 5,(ix+GenericButtonStatus)2551 jr nz,.go 2553 ld l,(ix+GenericButton_SYSX_Clicked)2554 ld h,(ix+GenericButton_SYSX_Clicked+1)2555 .go:2557 2558 ld e,(ix+GenericButton_DYDX)2559 ld d,(ix+GenericButton_DYDX+1)2561 ld a,(ix+GenericButtonYbottom)2562 sub a,(ix+GenericButtonYtop)2563 ld b,a 2564 ld a,(ix+GenericButtonXright)2565 sub a,(ix+GenericButtonXleft)2566 srl a 2567 ld c,a 2570 ld a,(ButtonGfxBlockCopy)25722574 ld de,$8000 + ((212+16)*128) + (000/2) - 128 2575 call CopyRamToVramCorrectedWithoutActivePageSetting 2577 ld a,(activepage)2578 xor 12579 ld (CopyCastleButton2+dPage),a2581 ld a,(ix+GenericButtonXleft)2582 ld (CopyCastleButton2+dx),a2583 ld a,(ix+GenericButtonYtop)2584 ld (CopyCastleButton2+dy),a2586 ld a,(ix+GenericButtonYbottom)2587 sub a,(ix+GenericButtonYtop)2588 ld (CopyCastleButton2+ny),a2590 ld a,(ix+GenericButtonXright)2591 sub a,(ix+GenericButtonXleft)2592 ld (CopyCastleButton2+nx),a2594 ld a,212+162595 ld (CopyCastleButton2+sy),a2597 ld hl,CopyCastleButton22598 call docopy2600 ld a,2122601 ld (CopyCastleButton2+sy),a2603 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2604 call docopy2605 ret2607TavernHeroesReset:2608db 255 | .TavernHeroesPlayer1: db 001,000,000,000,000,000,000,000,000,0002609db 255 | .TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0002610db 255 | .TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0002611db 255 | .TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0002612EndTavernHeroesReset:2613 2614CoordinatesEasyButton: db 157,157+17, 159,159+20, "  Difficulty: Easy" ,254,254,"Players start with:",254,"   30.000 Gold",254,"   30 Wood",254,"   30 Ore",254,"   15 Gems",254,"   15 Rubies",2552615CoordinatesNormalButton: db 174,174+17, 159,159+20, " Difficulty: Normal" ,254,254,"Players start with:",254,"   20.000 Gold",254,"   20 Wood",254,"   20 Ore",254,"   10 Gems",254,"   10 Rubies",2552616CoordinatesHardButton: db 191,191+17, 159,159+20, "  Difficulty: Hard" ,254,254,"Players start with:",254,"   15.000 Gold",254,"   15 Wood",254,"   15 Ore",254,"   7 Gems",254,"   7 Rubies",2552617CoordinatesExpertButton: db 208,208+17, 159,159+20, " Difficulty: Expert" ,254,254,"Players start with:",254,"   10.000 Gold",254,"   10 Wood",254,"   10 Ore",254,"   4 Gems",254,"   4 Rubies",2552618CoordinatesImpossibleButton: db 225,225+17, 159,159+20, "Difficulty: Impossible",254,254,"Players start with:",254,"   0 Gold",254,"   0 Wood",254,"   0 Ore",254,"   0 Gems",254,"   0 Rubies",2552620CoordinatesCastle1Button: db 186,186+56, 102,102+122621CoordinatesCastle2Button: db 186,186+56, 114,114+122622CoordinatesCastle3Button: db 186,186+56, 126,126+122623CoordinatesCastle4Button: db 186,186+56, 138,138+122625CheckRightClickTownAllignment:2626 ld a,(NewPrContr)2627 bit 5,a 2628 ret z2630 ld ix,CoordinatesCastle1Button2631 ld hl,player1StartingTown2632 ld de,player1human? 2633 call CheckMouseOverRegion2634 bit 0,b2635 jp nz,.SetTownAllignmentWindow2637 ld ix,CoordinatesCastle2Button2638 ld hl,player2StartingTown2639 ld de,player2human? 2640 call CheckMouseOverRegion2641 bit 0,b2642 jp nz,.SetTownAllignmentWindow2644 ld ix,CoordinatesCastle3Button2645 ld hl,player3StartingTown2646 ld de,player3human? 2647 call CheckMouseOverRegion2648 bit 0,b2649 jp nz,.SetTownAllignmentWindow2651 ld ix,CoordinatesCastle4Button2652 ld hl,player4StartingTown2653 ld de,player4human? 2654 call CheckMouseOverRegion2655 bit 0,b2656 ret z2658 .SetTownAllignmentWindow: 2659 ld a,(hl)2660 or a2661 ret z2663 ld a,(de) 2664 cp 22665 ret z2666 2667 push hl 2669 ld hl,$4000 + (055*128) + (092/2) - 1282670 ld de,$0000 + (026*128) + (028/2) - 1282671 ld bc,$0000 + (117*256) + (164/2)2672 ld a,ScenarioSelectButtonsBlock 2673 call CopyRamToVramCorrectedCastleOverview 2675 ld hl,.TextTownAllignment2676 ld b,051 2677 ld c,032 2678 call SetText 2680 ld hl,.TextAssociatedCreatures2681 ld b,071 2682 ld c,043 2683 call SetText 2685 pop hl 2686 ld a,(hl)2687 call SetTextStartingTownButtons.SetTownNameInHl2688 push hl2689 pop iy 2690 ld b,118 2691 ld c,032 2692 call SetText 2694 ld a,(iy+13) 2695 ld (StartingTownLevel1Unit),a2696 ld a,(iy+14) 2697 ld (StartingTownLevel2Unit),a2698 ld a,(iy+15) 2699 ld (StartingTownLevel3Unit),a2700 ld a,(iy+16) 2701 ld (StartingTownLevel4Unit),a2702 ld a,(iy+17) 2703 ld (StartingTownLevel5Unit),a2704 ld a,(iy+18) 2705 ld (StartingTownLevel6Unit),a2707 ld hl,DisplayTownAllignmentAssociatedCreatures2708 call EnterSpecificRoutineHeroOverviewCode2710 ld hl,DisplayMonsterNames2711 call EnterSpecificRoutineInCastleOverviewCode2713 ld a,42714 ld (GameStatus),a 2716 jp WaitKeyPressToGoBackToGame22723.TextTownAllignment: db "Town Allignment:",2552724.TextAssociatedCreatures: db "Associated Creatures:",2552726CheckRightClickDifficulty:2727 ld a,(NewPrContr)2728 bit 5,a 2729 ret z2731 ld ix,CoordinatesEasyButton2732 call CheckMouseOverRegion2733 bit 0,b2734 jp nz,.SetDifficultyWindow2735 ld ix,CoordinatesNormalButton2736 call CheckMouseOverRegion2737 bit 0,b2738 jp nz,.SetDifficultyWindow2739 ld ix,CoordinatesHardButton2740 call CheckMouseOverRegion2741 bit 0,b2742 jp nz,.SetDifficultyWindow2743 ld ix,CoordinatesExpertButton2744 call CheckMouseOverRegion2745 bit 0,b2746 jp nz,.SetDifficultyWindow2747 ld ix,CoordinatesImpossibleButton2748 call CheckMouseOverRegion2749 bit 0,b2750 ret z2752 .SetDifficultyWindow: 2753 ld hl,$4000 + (055*128) + (000/2) - 1282754 ld de,$0000 + (083*128) + (120/2) - 1282755 ld bc,$0000 + (068*256) + (092/2)2756 ld a,ScenarioSelectButtonsBlock 2757 call CopyRamToVramCorrectedCastleOverview 2759 ld de,42760 add ix,de2761 push ix2762 pop hl2763 ld b,129 2764 ld c,089 2765 call SetText 2768 jp WaitKeyPressToGoBackToGame22769 2770CheckMouseOverRegion:2771 res 0,b2773 ld a,(spat+1) 2775 add a,062777 cp (ix)2778 ret c2779 cp (ix+1)2780 ret nc2782 ld a,(spat+0) 2783 cp (ix+2)2784 ret c2785 cp (ix+3)2786 ret nc2788 set 0,b2789 ret2791WaitKeyPressToGoBackToGame2:2792 call SwapAndSetPage 2793 .loop:2794 call PopulateControls 2795 27962800 ld a,(NewPrContr)2801 bit 5,a 2802 jr nz,.End2803 ld a,(NewPrContr)2804 bit 4,a 2805 jr z,.loop2807 .End:2808 xor a2809 ld (NewPrContr),a2811 ld a,(activepage) 2812 or a2813 ld hl,.RestorePage02814 jp z,docopy2815 ld hl,.RestorePage12816 jp docopy2818.RestorePage0:2819 db 000,000,000,0012820 db 000,000,000,0002821 db 000,001,191,0002822 db 000,000,$d0 2823.RestorePage1:2824 db 000,000,000,0002825 db 000,000,000,0012826 db 000,001,191,0002827 db 000,000,$d0 2830SetTextStartingTownButtons:2831 ld a,(player1human?)2832 cp 2 2833 jr z,.EndSetTextStartingTownPlayer12834 ld a,(player1StartingTown)2835 call .SetTownNameInHl2836 ld b,189 2837 ld c,106 2838 call SetText 2839 .EndSetTextStartingTownPlayer1:2841 ld a,(player2human?)2842 cp 2 2843 jr z,.EndSetTextStartingTownPlayer22844 ld a,(player2StartingTown)2845 call .SetTownNameInHl2846 ld b,189 2847 ld c,118 2848 call SetText 2849 .EndSetTextStartingTownPlayer2:2851 ld ix,(WorldPointer)2852 ld a,(ix+ScenarioNameAddress)2853 cp "2"2854 ret z2856 ld a,(player3human?)2857 cp 2 2858 jr z,.EndSetTextStartingTownPlayer32859 ld a,(player3StartingTown)2860 call .SetTownNameInHl2861 ld b,189 2862 ld c,130 2863 call SetText 2864 .EndSetTextStartingTownPlayer3:2866 ld a,(ix+ScenarioNameAddress)2867 cp "3"2868 ret z2870 ld a,(player4human?)2871 cp 2 2872 ret z2873 ld a,(player4StartingTown)2874 call .SetTownNameInHl2875 ld b,189 2876 ld c,142 2877 call SetText 2878 ret2880 .SetTownNameInHlAndLdEHL:2881 ld e,(hl)2882 jr .go2884 .SetTownNameInHl:2885 ld e,a2887 .go:2888 ld d,02889 ld hl,InfoTownLenght2890 call MultiplyHlWithDE 2891 ld de,InfoTownRandom2892 add hl,de 2893 ret2895InfoTownLenght: equ InfoTown1-InfoTownRandom2896InfoTownRandom: db "Random      ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2897InfoTown1: db "Drasle's Den",255,DragonSlayerUnitLevel1Number, DragonSlayerUnitLevel2Number, DragonSlayerUnitLevel3Number, DragonSlayerUnitLevel4Number, DragonSlayerUnitLevel5Number, DragonSlayerUnitLevel6Number | dw DragonSlayerUnitLevel1Growth, DragonSlayerUnitLevel2Growth, DragonSlayerUnitLevel3Growth, DragonSlayerUnitLevel4Growth, DragonSlayerUnitLevel5Growth, DragonSlayerUnitLevel6Growth2898InfoTown2: db "Castlevania ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2899InfoTown3: db "Junker HQ   ",255,SDSnatcherUnitLevel1Number, SDSnatcherUnitLevel2Number, SDSnatcherUnitLevel3Number, SDSnatcherUnitLevel4Number, SDSnatcherUnitLevel5Number, SDSnatcherUnitLevel6Number | dw SDSnatcherUnitLevel1Growth, SDSnatcherUnitLevel2Growth, SDSnatcherUnitLevel3Growth, SDSnatcherUnitLevel4Growth, SDSnatcherUnitLevel5Growth, SDSnatcherUnitLevel6Growth2900InfoTown4: db "Usas        ",255,UsasUnitLevel1Number, UsasUnitLevel2Number, UsasUnitLevel3Number, UsasUnitLevel4Number, UsasUnitLevel5Number, UsasUnitLevel6Number | dw UsasUnitLevel1Growth, UsasUnitLevel2Growth, UsasUnitLevel3Growth, UsasUnitLevel4Growth, UsasUnitLevel5Growth, UsasUnitLevel6Growth2901InfoTown5: db "Goemon      ",255,GoemonUnitLevel1Number, GoemonUnitLevel2Number, GoemonUnitLevel3Number, GoemonUnitLevel4Number, GoemonUnitLevel5Number, GoemonUnitLevel6Number | dw GoemonUnitLevel1Growth, GoemonUnitLevel2Growth, GoemonUnitLevel3Growth, GoemonUnitLevel4Growth, GoemonUnitLevel5Growth, GoemonUnitLevel6Growth29022903InfoTown6: db "Ys3         ",255,Ys3UnitLevel1Number, Ys3UnitLevel2Number, Ys3UnitLevel3Number, Ys3UnitLevel4Number, Ys3UnitLevel5Number, Ys3UnitLevel6Number | dw Ys3UnitLevel1Growth, Ys3UnitLevel2Growth, Ys3UnitLevel3Growth, Ys3UnitLevel4Growth, Ys3UnitLevel5Growth, Ys3UnitLevel6Growth2904InfoTown7: db "Psycho World",255,PsychoWorldUnitLevel1Number, PsychoWorldUnitLevel2Number, PsychoWorldUnitLevel3Number, PsychoWorldUnitLevel4Number, PsychoWorldUnitLevel5Number, PsychoWorldUnitLevel6Number | dw PsychoWorldUnitLevel1Growth, PsychoWorldUnitLevel2Growth, PsychoWorldUnitLevel3Growth, PsychoWorldUnitLevel4Growth, PsychoWorldUnitLevel5Growth, PsychoWorldUnitLevel6Growth2905InfoTown8: db "King Kong   ",255,KingKongUnitLevel1Number, KingKongUnitLevel2Number, KingKongUnitLevel3Number, KingKongUnitLevel4Number, KingKongUnitLevel5Number, KingKongUnitLevel6Number | dw KingKongUnitLevel1Growth, KingKongUnitLevel2Growth, KingKongUnitLevel3Growth, KingKongUnitLevel4Growth, KingKongUnitLevel5Growth, KingKongUnitLevel6Growth2906InfoTown9: db "Golvellius  ",255,GolvelliusUnitLevel1Number, GolvelliusUnitLevel2Number, GolvelliusUnitLevel3Number, GolvelliusUnitLevel4Number, GolvelliusUnitLevel5Number, GolvelliusUnitLevel6Number | dw GolvelliusUnitLevel1Growth, GolvelliusUnitLevel2Growth, GolvelliusUnitLevel3Growth, GolvelliusUnitLevel4Growth, GolvelliusUnitLevel5Growth, GolvelliusUnitLevel6Growth2907InfoTown10: db "Contra Den 1",255,ContraGroupAUnitLevel1Number, ContraGroupAUnitLevel2Number, ContraGroupAUnitLevel3Number, ContraGroupAUnitLevel4Number, ContraGroupAUnitLevel5Number, ContraGroupAUnitLevel6Number | dw ContraGroupAUnitLevel1Growth, ContraGroupAUnitLevel2Growth, ContraGroupAUnitLevel3Growth, ContraGroupAUnitLevel4Growth, ContraGroupAUnitLevel5Growth, ContraGroupAUnitLevel6Growth2908InfoTown11: db "Contra Den 2",255,ContraGroupBUnitLevel1Number, ContraGroupBUnitLevel2Number, ContraGroupBUnitLevel3Number, ContraGroupBUnitLevel4Number, ContraGroupBUnitLevel5Number, ContraGroupBUnitLevel6Number | dw ContraGroupBUnitLevel1Growth, ContraGroupBUnitLevel2Growth, ContraGroupBUnitLevel3Growth, ContraGroupBUnitLevel4Growth, ContraGroupBUnitLevel5Growth, ContraGroupBUnitLevel6Growth29092910InfoTown12: db "Akanbe Den 1",255,AkanbeDragonGroupAUnitLevel1Number, AkanbeDragonGroupAUnitLevel2Number, AkanbeDragonGroupAUnitLevel3Number, AkanbeDragonGroupAUnitLevel4Number, AkanbeDragonGroupAUnitLevel5Number, AkanbeDragonGroupAUnitLevel6Number | dw AkanbeDragonGroupAUnitLevel1Growth, AkanbeDragonGroupAUnitLevel2Growth, AkanbeDragonGroupAUnitLevel3Growth, AkanbeDragonGroupAUnitLevel4Growth, AkanbeDragonGroupAUnitLevel5Growth, AkanbeDragonGroupAUnitLevel6Growth2911InfoTown13: db "Akanbe Den 2",255,AkanbeDragonGroupBUnitLevel1Number, AkanbeDragonGroupBUnitLevel2Number, AkanbeDragonGroupBUnitLevel3Number, AkanbeDragonGroupBUnitLevel4Number, AkanbeDragonGroupBUnitLevel5Number, AkanbeDragonGroupBUnitLevel6Number | dw AkanbeDragonGroupBUnitLevel1Growth, AkanbeDragonGroupBUnitLevel2Growth, AkanbeDragonGroupBUnitLevel3Growth, AkanbeDragonGroupBUnitLevel4Growth, AkanbeDragonGroupBUnitLevel5Growth, AkanbeDragonGroupBUnitLevel6Growth2912InfoTown14: db "YieArKungFu ",255,YieArKungFuUnitLevel1Number, YieArKungFuUnitLevel2Number, YieArKungFuUnitLevel3Number, YieArKungFuUnitLevel4Number, YieArKungFuUnitLevel5Number, YieArKungFuUnitLevel6Number | dw YieArKungFuUnitLevel1Growth, YieArKungFuUnitLevel2Growth, YieArKungFuUnitLevel3Growth, YieArKungFuUnitLevel4Growth, YieArKungFuUnitLevel5Growth, YieArKungFuUnitLevel6Growth2913InfoTown15: db "Bubble Den 1",255,BubbleBobbleGroupAUnitLevel1Number, BubbleBobbleGroupAUnitLevel2Number, BubbleBobbleGroupAUnitLevel3Number, BubbleBobbleGroupAUnitLevel4Number, BubbleBobbleGroupAUnitLevel5Number, BubbleBobbleGroupAUnitLevel6Number | dw BubbleBobbleGroupAUnitLevel1Growth, BubbleBobbleGroupAUnitLevel2Growth, BubbleBobbleGroupAUnitLevel3Growth, BubbleBobbleGroupAUnitLevel4Growth, BubbleBobbleGroupAUnitLevel5Growth, BubbleBobbleGroupAUnitLevel6Growth2914InfoTown16: db "Bubble Den 2",255,BubbleBobbleGroupBUnitLevel1Number, BubbleBobbleGroupBUnitLevel2Number, BubbleBobbleGroupBUnitLevel3Number, BubbleBobbleGroupBUnitLevel4Number, BubbleBobbleGroupBUnitLevel5Number, BubbleBobbleGroupBUnitLevel6Number | dw BubbleBobbleGroupBUnitLevel1Growth, BubbleBobbleGroupBUnitLevel2Growth, BubbleBobbleGroupBUnitLevel3Growth, BubbleBobbleGroupBUnitLevel4Growth, BubbleBobbleGroupBUnitLevel5Growth, BubbleBobbleGroupBUnitLevel6Growth2915InfoTown17: db "Cloud Palace",255,ChukaTaisenUnitLevel1Number, ChukaTaisenUnitLevel2Number, ChukaTaisenUnitLevel3Number, ChukaTaisenUnitLevel4Number, ChukaTaisenUnitLevel5Number, ChukaTaisenUnitLevel6Number | dw ChukaTaisenUnitLevel1Growth, ChukaTaisenUnitLevel2Growth, ChukaTaisenUnitLevel3Growth, ChukaTaisenUnitLevel4Growth, ChukaTaisenUnitLevel5Growth, ChukaTaisenUnitLevel6Growth291629182925ListOfHeroAddressesAndAmounts:2926 dw DragonSlayer4Heroes | db DragonSlayer4HeroesAmount2927 dw CastlevaniaHeroes | db CastlevaniaHeroesAmount2928 dw SDSnatcherHeroes | db SDSnatcherHeroesAmount2929 dw UsasHeroes | db UsasHeroesAmount2930 dw GoemonHeroes | db GoemonHeroesAmount2931 dw Ys3Heroes | db Ys3HeroesAmount2932 dw PsychoWorldHeroes | db PsychoWorldHeroesAmount2933 dw KingKongHeroes | db KingKongHeroesAmount2934 dw GolvelliusHeroes | db GolvelliusHeroesAmount2935 dw ContraGroupAHeroes | db ContraGroupAHeroesAmount2936 dw ContraGroupBHeroes | db ContraGroupBHeroesAmount29372938 dw AkanbeDragonGroupAHeroes | db AkanbeDragonGroupAHeroesAmount2939 dw AkanbeDragonGroupBHeroes | db AkanbeDragonGroupBHeroesAmount2940 dw YieArKungFuHeroes | db YieArKungFuHeroesAmount2941 dw BubbleBobbleGroupAHeroes | db BubbleBobbleGroupAHeroesAmount2942 dw BubbleBobbleGroupBHeroes | db BubbleBobbleGroupBHeroesAmount2943 dw ChukaTaisenHeroes | db ChukaTaisenHeroesAmount2945SetTextHumanOrCPUButtons:2946 ld c,106 2947 ld hl,player1human?2948 call .SetTextHumanOrCPU2950 ld c,118 2951 ld hl,player2human?2952 call .SetTextHumanOrCPU2954 ld ix,(WorldPointer)2955 ld a,(ix+ScenarioNameAddress)2956 cp "2"2957 ret z2959 ld c,130 2960 ld hl,player3human?2961 call .SetTextHumanOrCPU2963 ld a,(ix+ScenarioNameAddress)2964 cp "3"2965 ret z2967 ld c,142 2968 ld hl,player4human?29692972 .SetTextHumanOrCPU:2973 ld a,(hl)2974 or a2975 jp z,.PlayerCPU2976 dec a2977 jp z,.PlayerHuman29782980 .PlayerOFF:2981 ld b,166 2982 ld hl,TextOFF2983 jp SetText 2985 .PlayerCPU:2986 ld b,166 2987 ld hl,TextCPU2988 jp SetText 2990 .PlayerHuman:2991 ld b,161 2992 ld hl,TextHuman2993 jp SetText 2996TextHuman: db "Human",2552997TextCPU: db "CPU",2552998TextOFF: db "OFF",2553000SetTextPage123Buttons:3001 ld a,(AmountOfMapsUnlocked)3002 cp 113003 ret c3005 ld b,035 3006 ld c,176 3007 ld hl,TextPage13008 call SetText 3010 ld b,069 3011 ld c,176 3012 ld hl,TextPage23013 call SetText 3015 ld a,(AmountOfMapsUnlocked)3016 cp 213017 ret c3019 ld b,103 3020 ld c,176 3021 ld hl,TextPage33022 call SetText 3023 ret3025TextPage1: db "Page 1",2553026TextPage2: db "Page 2",2553027TextPage3: db "Page 3",2553029ScenarioNameAddress: equ 153030SetNamesInScenarioButtons:3031 ld b,020 3032 ld c,046 3034 ld hl,GentleMaps+ScenarioNameAddress3035 ld de,LenghtMapData*103037 ld a,(ScenarioPage)3038 dec a3039 jr z,.PageFound3040 add hl,de3041 dec a3042 jr z,.PageFound3043 add hl,de3044 .PageFound:3046 ld a,(AmountOfMapsVisibleInCurrentPage)3047 cp 113048 jr c,.loop3049 ld a,103051 .loop:3052 push af3053 push hl3054 push bc3055 call SetText 3056 pop bc3057 push bc3058 ld b,383059 inc hl3060 call SetText 3061 pop bc3062 push bc3063 ld b,533064 inc hl3065 call SetText 3066 pop bc3067 pop hl3068 ld a,c3069 add a,133070 ld c,a3071 ld de,LenghtMapData3072 add hl,de3073 pop af3074 dec a3075 jr nz,.loop3076 ret3078SetNamesInCampaignButtons:3079 ld b,020 3080 ld c,046 3082 ld hl,GentleMaps+ScenarioNameAddress+43083 ld de,LenghtMapData*103085 ld a,(ScenarioPage)3086 dec a3087 jr z,.PageFound3088 add hl,de3089 dec a3090 jr z,.PageFound3091 add hl,de3092 .PageFound:3094 ld a,(AmountOfMapsVisibleInCurrentPage)3095 cp 113096 jr c,.loop3097 ld a,103099 .loop:3100 push af3101 push hl3102 push bc3103 call SetText 3104 pop bc3105 pop hl3106 ld a,c3107 add a,133108 ld c,a3109 ld de,LenghtMapData3110 add hl,de3111 pop af3112 dec a3113 jr nz,.loop3114 ret3116SetScenarioSelectButtons:3117 ld hl,ScenarioSelectButtonTable-23118 ld de,GenericButtonTable-23119 ld bc,2+(GenericButtonTableLenghtPerButton*28)3120 ldir3121 ret3123SetCampaignSelectButtons:3124 ld hl,CampaignSelectButtonTable-23125 ld de,GenericButtonTable-23126 ld bc,2+(GenericButtonTableLenghtPerButton*15)3127 ldir3128 ret3130SetPage1ButtonConstantlyLit:3131 ld hl,.PageButtonConstantlyLit3132 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+13133 ld bc,43134 ldir3135 ret3136 .PageButtonConstantlyLit:3137 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1283139SetDifficultyButtonConstantlyLit:3140 ld hl,ScenarioSelectButtonTable.DifficultyButtons3141 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*233142 ld bc,GenericButtonTableLenghtPerButton*53143 ldir3145 ld a,(Difficulty)3146 dec a3147 ld hl,.DifficultyEasyConstantlyLit3148 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*23+13149 jr z,.SetDifficultyButtonConstantlyLit3150 dec a3151 ld hl,.DifficultyNormalConstantlyLit3152 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*24+13153 jr z,.SetDifficultyButtonConstantlyLit3154 dec a3155 ld hl,.DifficultyHardConstantlyLit3156 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*25+13157 jr z,.SetDifficultyButtonConstantlyLit3158 dec a3159 ld hl,.DifficultyExpertConstantlyLit3160 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*26+13161 jr z,.SetDifficultyButtonConstantlyLit3162 dec a3163 ld hl,.DifficultyImpossibleConstantlyLit3164 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*27+13165 jr z,.SetDifficultyButtonConstantlyLit3166 .SetDifficultyButtonConstantlyLit:3167 ld bc,43168 ldir3170 call .SetDifficultyText3171 call .SetDifficultyText3172 ret3173 .SetDifficultyText:3174 ld a,(Difficulty)3175 dec a3176 ld b,192 3177 ld hl,TextEasy3178 jr z,.DifficultyFound3179 dec a3180 ld b,188 3181 ld hl,TextNormal3182 jr z,.DifficultyFound3183 dec a3184 ld b,192 3185 ld hl,TextHard3186 jr z,.DifficultyFound3187 dec a3188 ld b,189 3189 ld hl,TextExpert3190 jr z,.DifficultyFound3191 dec a3192 ld b,181 3193 ld hl,TextImpossible3194 jr z,.DifficultyFound3197 .DifficultyFound:3198 push bc3199 push hl3200 call ClearDifficultyTextGraphics3201 pop hl3202 pop bc3203 ld c,179 3204 call SetText 3205 jp SwapAndSetPage 3207 .DifficultyEasyConstantlyLit:3208 dw $4000 + (022*128) + (016/2) - 128, $4000 + (022*128) + (016/2) - 1283209 .DifficultyNormalConstantlyLit:3210 dw $4000 + (022*128) + (066/2) - 128, $4000 + (022*128) + (066/2) - 1283211 .DifficultyHardConstantlyLit:3212 dw $4000 + (022*128) + (118/2) - 128, $4000 + (022*128) + (118/2) - 1283213 .DifficultyExpertConstantlyLit:3214 dw $4000 + (022*128) + (168/2) - 128, $4000 + (022*128) + (168/2) - 1283215 .DifficultyImpossibleConstantlyLit:3216 dw $4000 + (022*128) + (220/2) - 128, $4000 + (022*128) + (220/2) - 1283218TextEasy: db "Easy",2553219TextNormal: db "Normal",2553220TextHard: db "Hard",2553221TextExpert: db "Expert",2553222TextImpossible: db "Impossible",2553224SetAmountOfCampaignPageButtons:32253226 ld a,(AmountOfMapsUnlocked)3227 push af3229 ld a,(AmountOfCampaignsFinished)3230 inc a3231 ld (AmountOfMapsUnlocked),a3233 call SetAmountOfScenarioPageButtons3235 pop af3236 ld (AmountOfMapsUnlocked),a3237 ret3239SetAmountOfScenarioPageButtons:3240 ld hl,.PageButtonsNormal3241 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*103242 ld bc,53243 ldir3244 ld hl,.PageButtonsNormal3245 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*113246 ld bc,53247 ldir3248 ld hl,.PageButtonsNormal3249 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*123250 ld bc,53251 ldir3253 ld a,(AmountOfMapsUnlocked)3254 cp 213255 ret nc 3256 cp 113257 jr nc,.LockPage3 3258 3259 .LockPage12And3: 3260 xor a 3261 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*10),a3262 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*11),a3263 .LockPage3:3264 xor a 3265 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*12),a3266 ret3268 .PageButtonsNormal:3269 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 1283271SetAmountOfCampaignButtons:3272 call ClearCampaignButtonGraphics3273 call SwapAndSetPage 3274 call ClearCampaignButtonGraphics3275 3276 .go:3277 ld a,%1100 00113278 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*0),a3279 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3280 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3281 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3282 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3283 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3284 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3285 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3286 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3287 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3289 ld a,(ScenarioPage)3290 dec a3291 ld b,03292 jr z,.PageFound3293 dec a3294 ld b,103295 jr z,.PageFound3296 ld b,203297 .PageFound:330033033306330933133318 ld a,(AmountOfCampaignsFinished)3319 inc a 3320 sub b3321 ld (AmountOfMapsVisibleInCurrentPage),a3322 dec a3323 jr z,.UpToScenario1Unlocked3324 dec a3325 jr z,.UpToScenario2Unlocked3326 dec a3327 jr z,.UpToScenario3Unlocked3328 dec a3329 jr z,.UpToScenario4Unlocked3330 dec a3331 jr z,.UpToScenario5Unlocked3332 dec a3333 jr z,.UpToScenario6Unlocked3334 dec a3335 jr z,.UpToScenario7Unlocked3336 dec a3337 jr z,.UpToScenario8Unlocked3338 dec a3339 jr z,.UpToScenario9Unlocked3340 ret3342 .UpToScenario1Unlocked:3343 xor a3344 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3345 .UpToScenario2Unlocked:3346 xor a3347 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3348 .UpToScenario3Unlocked:3349 xor a3350 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3351 .UpToScenario4Unlocked:3352 xor a3353 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3354 .UpToScenario5Unlocked:3355 xor a3356 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3357 .UpToScenario6Unlocked:3358 xor a3359 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3360 .UpToScenario7Unlocked:3361 xor a3362 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3363 .UpToScenario8Unlocked:3364 xor a3365 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3366 .UpToScenario9Unlocked:3367 xor a3368 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3369 ret3371SetAmountOfScenarioButtons:3372 call ClearScenarioButtonGraphics3373 call SwapAndSetPage 3374 call ClearScenarioButtonGraphics3375 3376 .go:3377 ld a,%1100 00113378 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*0),a3379 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3380 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3381 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3382 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3383 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3384 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3385 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3386 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3387 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3389 ld a,(ScenarioPage)3390 dec a3391 ld b,03392 jr z,.PageFound3393 dec a3394 ld b,103395 jr z,.PageFound3396 ld b,203397 .PageFound:3398 ld a,(AmountOfMapsUnlocked)3399 sub b3400 ld (AmountOfMapsVisibleInCurrentPage),a3401 dec a3402 jr z,.UpToScenario1Unlocked3403 dec a3404 jr z,.UpToScenario2Unlocked3405 dec a3406 jr z,.UpToScenario3Unlocked3407 dec a3408 jr z,.UpToScenario4Unlocked3409 dec a3410 jr z,.UpToScenario5Unlocked3411 dec a3412 jr z,.UpToScenario6Unlocked3413 dec a3414 jr z,.UpToScenario7Unlocked3415 dec a3416 jr z,.UpToScenario8Unlocked3417 dec a3418 jr z,.UpToScenario9Unlocked3419 ret3421 .UpToScenario1Unlocked:3422 xor a3423 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3424 .UpToScenario2Unlocked:3425 xor a3426 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3427 .UpToScenario3Unlocked:3428 xor a3429 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3430 .UpToScenario4Unlocked:3431 xor a3432 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3433 .UpToScenario5Unlocked:3434 xor a3435 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3436 .UpToScenario6Unlocked:3437 xor a3438 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3439 .UpToScenario7Unlocked:3440 xor a3441 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3442 .UpToScenario8Unlocked:3443 xor a3444 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3445 .UpToScenario9Unlocked:3446 xor a3447 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3448 ret3450 3451ScenarioSelectButton1Ytop: equ 043 + (0*13)3452ScenarioSelectButton1YBottom: equ ScenarioSelectButton1Ytop + 0113453ScenarioSelectButton1XLeft: equ 0503454ScenarioSelectButton1XRight: equ ScenarioSelectButton1XLeft + 0963456ScenarioSelectButton2Ytop: equ 043 + (1*13)3457ScenarioSelectButton2YBottom: equ ScenarioSelectButton2Ytop + 0113458ScenarioSelectButton2XLeft: equ 0503459ScenarioSelectButton2XRight: equ ScenarioSelectButton2XLeft + 0963461ScenarioSelectButton3Ytop: equ 043 + (2*13)3462ScenarioSelectButton3YBottom: equ ScenarioSelectButton3Ytop + 0113463ScenarioSelectButton3XLeft: equ 0503464ScenarioSelectButton3XRight: equ ScenarioSelectButton3XLeft + 0963466ScenarioSelectButton4Ytop: equ 043 + (3*13)3467ScenarioSelectButton4YBottom: equ ScenarioSelectButton4Ytop + 0113468ScenarioSelectButton4XLeft: equ 0503469ScenarioSelectButton4XRight: equ ScenarioSelectButton4XLeft + 0963471ScenarioSelectButton5Ytop: equ 043 + (4*13)3472ScenarioSelectButton5YBottom: equ ScenarioSelectButton5Ytop + 0113473ScenarioSelectButton5XLeft: equ 0503474ScenarioSelectButton5XRight: equ ScenarioSelectButton5XLeft + 0963476ScenarioSelectButton6Ytop: equ 043 + (5*13)3477ScenarioSelectButton6YBottom: equ ScenarioSelectButton6Ytop + 0113478ScenarioSelectButton6XLeft: equ 0503479ScenarioSelectButton6XRight: equ ScenarioSelectButton6XLeft + 0963481ScenarioSelectButton7Ytop: equ 043 + (6*13)3482ScenarioSelectButton7YBottom: equ ScenarioSelectButton7Ytop + 0113483ScenarioSelectButton7XLeft: equ 0503484ScenarioSelectButton7XRight: equ ScenarioSelectButton7XLeft + 0963486ScenarioSelectButton8Ytop: equ 043 + (7*13)3487ScenarioSelectButton8YBottom: equ ScenarioSelectButton8Ytop + 0113488ScenarioSelectButton8XLeft: equ 0503489ScenarioSelectButton8XRight: equ ScenarioSelectButton8XLeft + 0963491ScenarioSelectButton9Ytop: equ 043 + (8*13)3492ScenarioSelectButton9YBottom: equ ScenarioSelectButton9Ytop + 0113493ScenarioSelectButton9XLeft: equ 0503494ScenarioSelectButton9XRight: equ ScenarioSelectButton9XLeft + 0963496ScenarioSelectButton10Ytop: equ 043 + (9*13)3497ScenarioSelectButton10YBottom: equ ScenarioSelectButton10Ytop + 0113498ScenarioSelectButton10XLeft: equ 0503499ScenarioSelectButton10XRight: equ ScenarioSelectButton10XLeft + 0963500 3501ScenarioSelectButton11Ytop: equ 1733502ScenarioSelectButton11YBottom: equ ScenarioSelectButton11Ytop + 0113503ScenarioSelectButton11XLeft: equ 0323504ScenarioSelectButton11XRight: equ ScenarioSelectButton11XLeft + 0323506ScenarioSelectButton12Ytop: equ 1733507ScenarioSelectButton12YBottom: equ ScenarioSelectButton12Ytop + 0113508ScenarioSelectButton12XLeft: equ 0663509ScenarioSelectButton12XRight: equ ScenarioSelectButton12XLeft + 0323511ScenarioSelectButton13Ytop: equ 1733512ScenarioSelectButton13YBottom: equ ScenarioSelectButton13Ytop + 0113513ScenarioSelectButton13XLeft: equ 1003514ScenarioSelectButton13XRight: equ ScenarioSelectButton13XLeft + 0323515 3516ScenarioSelectButton14Ytop: equ 1913517ScenarioSelectButton14YBottom: equ ScenarioSelectButton14Ytop + 0153518ScenarioSelectButton14XLeft: equ 1063519ScenarioSelectButton14XRight: equ ScenarioSelectButton14XLeft + 0203521ScenarioSelectButton15Ytop: equ 1913522ScenarioSelectButton15YBottom: equ ScenarioSelectButton15Ytop + 0153523ScenarioSelectButton15XLeft: equ 1323524ScenarioSelectButton15XRight: equ ScenarioSelectButton15XLeft + 0183525 3526ScenarioSelectButton16Ytop: equ 103 + (0*12)3527ScenarioSelectButton16YBottom: equ ScenarioSelectButton16Ytop + 0113528ScenarioSelectButton16XLeft: equ 1583529ScenarioSelectButton16XRight: equ ScenarioSelectButton16XLeft + 0283531ScenarioSelectButton17Ytop: equ 103 + (1*12)3532ScenarioSelectButton17YBottom: equ ScenarioSelectButton17Ytop + 0113533ScenarioSelectButton17XLeft: equ 1583534ScenarioSelectButton17XRight: equ ScenarioSelectButton17XLeft + 0283536ScenarioSelectButton18Ytop: equ 103 + (2*12)3537ScenarioSelectButton18YBottom: equ ScenarioSelectButton18Ytop + 0113538ScenarioSelectButton18XLeft: equ 1583539ScenarioSelectButton18XRight: equ ScenarioSelectButton18XLeft + 0283541ScenarioSelectButton19Ytop: equ 103 + (3*12)3542ScenarioSelectButton19YBottom: equ ScenarioSelectButton19Ytop + 0113543ScenarioSelectButton19XLeft: equ 1583544ScenarioSelectButton19XRight: equ ScenarioSelectButton19XLeft + 0283545 3546ScenarioSelectButton20Ytop: equ 103 + (0*12)3547ScenarioSelectButton20YBottom: equ ScenarioSelectButton20Ytop + 0113548ScenarioSelectButton20XLeft: equ 1863549ScenarioSelectButton20XRight: equ ScenarioSelectButton20XLeft + 0563551ScenarioSelectButton21Ytop: equ 103 + (1*12)3552ScenarioSelectButton21YBottom: equ ScenarioSelectButton21Ytop + 0113553ScenarioSelectButton21XLeft: equ 1863554ScenarioSelectButton21XRight: equ ScenarioSelectButton21XLeft + 0563556ScenarioSelectButton22Ytop: equ 103 + (2*12)3557ScenarioSelectButton22YBottom: equ ScenarioSelectButton22Ytop + 0113558ScenarioSelectButton22XLeft: equ 1863559ScenarioSelectButton22XRight: equ ScenarioSelectButton22XLeft + 0563561ScenarioSelectButton23Ytop: equ 103 + (3*12)3562ScenarioSelectButton23YBottom: equ ScenarioSelectButton23Ytop + 0113563ScenarioSelectButton23XLeft: equ 1863564ScenarioSelectButton23XRight: equ ScenarioSelectButton23XLeft + 0563565 3566ScenarioSelectButton24Ytop: equ 1603567ScenarioSelectButton24YBottom: equ ScenarioSelectButton24Ytop + 0183568ScenarioSelectButton24XLeft: equ 1583569ScenarioSelectButton24XRight: equ ScenarioSelectButton24XLeft + 0163571ScenarioSelectButton25Ytop: equ 1603572ScenarioSelectButton25YBottom: equ ScenarioSelectButton25Ytop + 0183573ScenarioSelectButton25XLeft: equ 1743574ScenarioSelectButton25XRight: equ ScenarioSelectButton25XLeft + 0183576ScenarioSelectButton26Ytop: equ 1603577ScenarioSelectButton26YBottom: equ ScenarioSelectButton26Ytop + 0183578ScenarioSelectButton26XLeft: equ 1923579ScenarioSelectButton26XRight: equ ScenarioSelectButton26XLeft + 0163581ScenarioSelectButton27Ytop: equ 1603582ScenarioSelectButton27YBottom: equ ScenarioSelectButton27Ytop + 0183583ScenarioSelectButton27XLeft: equ 2083584ScenarioSelectButton27XRight: equ ScenarioSelectButton27XLeft + 0183586ScenarioSelectButton28Ytop: equ 1603587ScenarioSelectButton28YBottom: equ ScenarioSelectButton28Ytop + 0183588ScenarioSelectButton28XLeft: equ 2263589ScenarioSelectButton28XRight: equ ScenarioSelectButton28XLeft + 0163591ScenarioSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock3592ScenarioSelectButtonTableAmountOfButtons: db 283593ScenarioSelectButtonTable: 3595 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton1Ytop,ScenarioSelectButton1YBottom,ScenarioSelectButton1XLeft,ScenarioSelectButton1XRight | dw $0000 + (ScenarioSelectButton1Ytop*128) + (ScenarioSelectButton1XLeft/2) - 128 3596 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton2Ytop,ScenarioSelectButton2YBottom,ScenarioSelectButton2XLeft,ScenarioSelectButton2XRight | dw $0000 + (ScenarioSelectButton2Ytop*128) + (ScenarioSelectButton2XLeft/2) - 128 3597 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton3Ytop,ScenarioSelectButton3YBottom,ScenarioSelectButton3XLeft,ScenarioSelectButton3XRight | dw $0000 + (ScenarioSelectButton3Ytop*128) + (ScenarioSelectButton3XLeft/2) - 1283598 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton4Ytop,ScenarioSelectButton4YBottom,ScenarioSelectButton4XLeft,ScenarioSelectButton4XRight | dw $0000 + (ScenarioSelectButton4Ytop*128) + (ScenarioSelectButton4XLeft/2) - 1283599 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton5Ytop,ScenarioSelectButton5YBottom,ScenarioSelectButton5XLeft,ScenarioSelectButton5XRight | dw $0000 + (ScenarioSelectButton5Ytop*128) + (ScenarioSelectButton5XLeft/2) - 1283600 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton6Ytop,ScenarioSelectButton6YBottom,ScenarioSelectButton6XLeft,ScenarioSelectButton6XRight | dw $0000 + (ScenarioSelectButton6Ytop*128) + (ScenarioSelectButton6XLeft/2) - 1283601 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton7Ytop,ScenarioSelectButton7YBottom,ScenarioSelectButton7XLeft,ScenarioSelectButton7XRight | dw $0000 + (ScenarioSelectButton7Ytop*128) + (ScenarioSelectButton7XLeft/2) - 1283602 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton8Ytop,ScenarioSelectButton8YBottom,ScenarioSelectButton8XLeft,ScenarioSelectButton8XRight | dw $0000 + (ScenarioSelectButton8Ytop*128) + (ScenarioSelectButton8XLeft/2) - 1283603 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton9Ytop,ScenarioSelectButton9YBottom,ScenarioSelectButton9XLeft,ScenarioSelectButton9XRight | dw $0000 + (ScenarioSelectButton9Ytop*128) + (ScenarioSelectButton9XLeft/2) - 1283604 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton10Ytop,ScenarioSelectButton10YBottom,ScenarioSelectButton10XLeft,ScenarioSelectButton10XRight | dw $0000 + (ScenarioSelectButton10Ytop*128) + (ScenarioSelectButton10XLeft/2) - 1283605 3606 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton11Ytop,ScenarioSelectButton11YBottom,ScenarioSelectButton11XLeft,ScenarioSelectButton11XRight | dw $0000 + (ScenarioSelectButton11Ytop*128) + (ScenarioSelectButton11XLeft/2) - 1283607 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton12Ytop,ScenarioSelectButton12YBottom,ScenarioSelectButton12XLeft,ScenarioSelectButton12XRight | dw $0000 + (ScenarioSelectButton12Ytop*128) + (ScenarioSelectButton12XLeft/2) - 1283608 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton13Ytop,ScenarioSelectButton13YBottom,ScenarioSelectButton13XLeft,ScenarioSelectButton13XRight | dw $0000 + (ScenarioSelectButton13Ytop*128) + (ScenarioSelectButton13XLeft/2) - 1283609 3610 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db ScenarioSelectButton14Ytop,ScenarioSelectButton14YBottom,ScenarioSelectButton14XLeft,ScenarioSelectButton14XRight | dw $0000 + (ScenarioSelectButton14Ytop*128) + (ScenarioSelectButton14XLeft/2) - 1283611 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db ScenarioSelectButton15Ytop,ScenarioSelectButton15YBottom,ScenarioSelectButton15XLeft,ScenarioSelectButton15XRight | dw $0000 + (ScenarioSelectButton15Ytop*128) + (ScenarioSelectButton15XLeft/2) - 1283612 3613 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton16Ytop,ScenarioSelectButton16YBottom,ScenarioSelectButton16XLeft,ScenarioSelectButton16XRight | dw $0000 + (ScenarioSelectButton16Ytop*128) + (ScenarioSelectButton16XLeft/2) - 1283614 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton17Ytop,ScenarioSelectButton17YBottom,ScenarioSelectButton17XLeft,ScenarioSelectButton17XRight | dw $0000 + (ScenarioSelectButton17Ytop*128) + (ScenarioSelectButton17XLeft/2) - 1283615 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton18Ytop,ScenarioSelectButton18YBottom,ScenarioSelectButton18XLeft,ScenarioSelectButton18XRight | dw $0000 + (ScenarioSelectButton18Ytop*128) + (ScenarioSelectButton18XLeft/2) - 1283616 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton19Ytop,ScenarioSelectButton19YBottom,ScenarioSelectButton19XLeft,ScenarioSelectButton19XRight | dw $0000 + (ScenarioSelectButton19Ytop*128) + (ScenarioSelectButton19XLeft/2) - 1283617 3618 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton20Ytop,ScenarioSelectButton20YBottom,ScenarioSelectButton20XLeft,ScenarioSelectButton20XRight | dw $0000 + (ScenarioSelectButton20Ytop*128) + (ScenarioSelectButton20XLeft/2) - 1283619 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton21Ytop,ScenarioSelectButton21YBottom,ScenarioSelectButton21XLeft,ScenarioSelectButton21XRight | dw $0000 + (ScenarioSelectButton21Ytop*128) + (ScenarioSelectButton21XLeft/2) - 1283620 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton22Ytop,ScenarioSelectButton22YBottom,ScenarioSelectButton22XLeft,ScenarioSelectButton22XRight | dw $0000 + (ScenarioSelectButton22Ytop*128) + (ScenarioSelectButton22XLeft/2) - 1283621 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton23Ytop,ScenarioSelectButton23YBottom,ScenarioSelectButton23XLeft,ScenarioSelectButton23XRight | dw $0000 + (ScenarioSelectButton23Ytop*128) + (ScenarioSelectButton23XLeft/2) - 1283622 3623 .DifficultyButtons:3624 db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (016/2) - 128 | dw $4000 + (022*128) + (032/2) - 128 | db ScenarioSelectButton24Ytop,ScenarioSelectButton24YBottom,ScenarioSelectButton24XLeft,ScenarioSelectButton24XRight | dw $0000 + (ScenarioSelectButton24Ytop*128) + (ScenarioSelectButton24XLeft/2) - 1283625 db %1100 0011 | dw $4000 + (022*128) + (048/2) - 128 | dw $4000 + (022*128) + (066/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | db ScenarioSelectButton25Ytop,ScenarioSelectButton25YBottom,ScenarioSelectButton25XLeft,ScenarioSelectButton25XRight | dw $0000 + (ScenarioSelectButton25Ytop*128) + (ScenarioSelectButton25XLeft/2) - 1283626 db %1100 0011 | dw $4000 + (022*128) + (102/2) - 128 | dw $4000 + (022*128) + (118/2) - 128 | dw $4000 + (022*128) + (134/2) - 128 | db ScenarioSelectButton26Ytop,ScenarioSelectButton26YBottom,ScenarioSelectButton26XLeft,ScenarioSelectButton26XRight | dw $0000 + (ScenarioSelectButton26Ytop*128) + (ScenarioSelectButton26XLeft/2) - 1283627 db %1100 0011 | dw $4000 + (022*128) + (150/2) - 128 | dw $4000 + (022*128) + (168/2) - 128 | dw $4000 + (022*128) + (186/2) - 128 | db ScenarioSelectButton27Ytop,ScenarioSelectButton27YBottom,ScenarioSelectButton27XLeft,ScenarioSelectButton27XRight | dw $0000 + (ScenarioSelectButton27Ytop*128) + (ScenarioSelectButton27XLeft/2) - 1283628 db %1100 0011 | dw $4000 + (022*128) + (204/2) - 128 | dw $4000 + (022*128) + (220/2) - 128 | dw $4000 + (022*128) + (236/2) - 128 | db ScenarioSelectButton28Ytop,ScenarioSelectButton28YBottom,ScenarioSelectButton28XLeft,ScenarioSelectButton28XRight | dw $0000 + (ScenarioSelectButton28Ytop*128) + (ScenarioSelectButton28XLeft/2) - 1283634 3635CampaignSelectButton1Ytop: equ 043 + (0*13)3636CampaignSelectButton1YBottom: equ CampaignSelectButton1Ytop + 0113637CampaignSelectButton1XLeft: equ 0183638CampaignSelectButton1XRight: equ CampaignSelectButton1XLeft + 0963640CampaignSelectButton2Ytop: equ 043 + (1*13)3641CampaignSelectButton2YBottom: equ CampaignSelectButton2Ytop + 0113642CampaignSelectButton2XLeft: equ 0183643CampaignSelectButton2XRight: equ CampaignSelectButton2XLeft + 0963645CampaignSelectButton3Ytop: equ 043 + (2*13)3646CampaignSelectButton3YBottom: equ CampaignSelectButton3Ytop + 0113647CampaignSelectButton3XLeft: equ 0183648CampaignSelectButton3XRight: equ CampaignSelectButton3XLeft + 0963650CampaignSelectButton4Ytop: equ 043 + (3*13)3651CampaignSelectButton4YBottom: equ CampaignSelectButton4Ytop + 0113652CampaignSelectButton4XLeft: equ 0183653CampaignSelectButton4XRight: equ CampaignSelectButton4XLeft + 0963655CampaignSelectButton5Ytop: equ 043 + (4*13)3656CampaignSelectButton5YBottom: equ CampaignSelectButton5Ytop + 0113657CampaignSelectButton5XLeft: equ 0183658CampaignSelectButton5XRight: equ CampaignSelectButton5XLeft + 0963660CampaignSelectButton6Ytop: equ 043 + (5*13)3661CampaignSelectButton6YBottom: equ CampaignSelectButton6Ytop + 0113662CampaignSelectButton6XLeft: equ 0183663CampaignSelectButton6XRight: equ CampaignSelectButton6XLeft + 0963665CampaignSelectButton7Ytop: equ 043 + (6*13)3666CampaignSelectButton7YBottom: equ CampaignSelectButton7Ytop + 0113667CampaignSelectButton7XLeft: equ 0183668CampaignSelectButton7XRight: equ CampaignSelectButton7XLeft + 0963670CampaignSelectButton8Ytop: equ 043 + (7*13)3671CampaignSelectButton8YBottom: equ CampaignSelectButton8Ytop + 0113672CampaignSelectButton8XLeft: equ 0183673CampaignSelectButton8XRight: equ CampaignSelectButton8XLeft + 0963675CampaignSelectButton9Ytop: equ 043 + (8*13)3676CampaignSelectButton9YBottom: equ CampaignSelectButton9Ytop + 0113677CampaignSelectButton9XLeft: equ 0183678CampaignSelectButton9XRight: equ CampaignSelectButton9XLeft + 0963680CampaignSelectButton10Ytop: equ 043 + (9*13)3681CampaignSelectButton10YBottom: equ CampaignSelectButton10Ytop + 0113682CampaignSelectButton10XLeft: equ 0183683CampaignSelectButton10XRight: equ CampaignSelectButton10XLeft + 0963684 3685CampaignSelectButton11Ytop: equ 1733686CampaignSelectButton11YBottom: equ CampaignSelectButton11Ytop + 0113687CampaignSelectButton11XLeft: equ 032-63688CampaignSelectButton11XRight: equ CampaignSelectButton11XLeft + 0323690CampaignSelectButton12Ytop: equ 1733691CampaignSelectButton12YBottom: equ CampaignSelectButton12Ytop + 0113692CampaignSelectButton12XLeft: equ 066-63693CampaignSelectButton12XRight: equ CampaignSelectButton12XLeft + 0323695CampaignSelectButton13Ytop: equ 1733696CampaignSelectButton13YBottom: equ CampaignSelectButton13Ytop + 0113697CampaignSelectButton13XLeft: equ 100-63698CampaignSelectButton13XRight: equ CampaignSelectButton13XLeft + 0323699 3700CampaignSelectButton14Ytop: equ 1913701CampaignSelectButton14YBottom: equ CampaignSelectButton14Ytop + 0153702CampaignSelectButton14XLeft: equ 1063703CampaignSelectButton14XRight: equ CampaignSelectButton14XLeft + 0203705CampaignSelectButton15Ytop: equ 1913706CampaignSelectButton15YBottom: equ CampaignSelectButton15Ytop + 0153707CampaignSelectButton15XLeft: equ 1323708CampaignSelectButton15XRight: equ CampaignSelectButton15XLeft + 0183710CampaignSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock3711CampaignSelectButtonTableAmountOfButtons: db 153712CampaignSelectButtonTable: 3714 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton1Ytop,CampaignSelectButton1YBottom,CampaignSelectButton1XLeft,CampaignSelectButton1XRight | dw $0000 + (CampaignSelectButton1Ytop*128) + (CampaignSelectButton1XLeft/2) - 128 3715 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton2Ytop,CampaignSelectButton2YBottom,CampaignSelectButton2XLeft,CampaignSelectButton2XRight | dw $0000 + (CampaignSelectButton2Ytop*128) + (CampaignSelectButton2XLeft/2) - 128 3716 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton3Ytop,CampaignSelectButton3YBottom,CampaignSelectButton3XLeft,CampaignSelectButton3XRight | dw $0000 + (CampaignSelectButton3Ytop*128) + (CampaignSelectButton3XLeft/2) - 1283717 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton4Ytop,CampaignSelectButton4YBottom,CampaignSelectButton4XLeft,CampaignSelectButton4XRight | dw $0000 + (CampaignSelectButton4Ytop*128) + (CampaignSelectButton4XLeft/2) - 1283718 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton5Ytop,CampaignSelectButton5YBottom,CampaignSelectButton5XLeft,CampaignSelectButton5XRight | dw $0000 + (CampaignSelectButton5Ytop*128) + (CampaignSelectButton5XLeft/2) - 1283719 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton6Ytop,CampaignSelectButton6YBottom,CampaignSelectButton6XLeft,CampaignSelectButton6XRight | dw $0000 + (CampaignSelectButton6Ytop*128) + (CampaignSelectButton6XLeft/2) - 1283720 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton7Ytop,CampaignSelectButton7YBottom,CampaignSelectButton7XLeft,CampaignSelectButton7XRight | dw $0000 + (CampaignSelectButton7Ytop*128) + (CampaignSelectButton7XLeft/2) - 1283721 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton8Ytop,CampaignSelectButton8YBottom,CampaignSelectButton8XLeft,CampaignSelectButton8XRight | dw $0000 + (CampaignSelectButton8Ytop*128) + (CampaignSelectButton8XLeft/2) - 1283722 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton9Ytop,CampaignSelectButton9YBottom,CampaignSelectButton9XLeft,CampaignSelectButton9XRight | dw $0000 + (CampaignSelectButton9Ytop*128) + (CampaignSelectButton9XLeft/2) - 1283723 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton10Ytop,CampaignSelectButton10YBottom,CampaignSelectButton10XLeft,CampaignSelectButton10XRight | dw $0000 + (CampaignSelectButton10Ytop*128) + (CampaignSelectButton10XLeft/2) - 1283724 3725 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton11Ytop,CampaignSelectButton11YBottom,CampaignSelectButton11XLeft,CampaignSelectButton11XRight | dw $0000 + (CampaignSelectButton11Ytop*128) + (CampaignSelectButton11XLeft/2) - 1283726 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton12Ytop,CampaignSelectButton12YBottom,CampaignSelectButton12XLeft,CampaignSelectButton12XRight | dw $0000 + (CampaignSelectButton12Ytop*128) + (CampaignSelectButton12XLeft/2) - 1283727 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton13Ytop,CampaignSelectButton13YBottom,CampaignSelectButton13XLeft,CampaignSelectButton13XRight | dw $0000 + (CampaignSelectButton13Ytop*128) + (CampaignSelectButton13XLeft/2) - 1283728 3729 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db CampaignSelectButton14Ytop,CampaignSelectButton14YBottom,CampaignSelectButton14XLeft,CampaignSelectButton14XRight | dw $0000 + (CampaignSelectButton14Ytop*128) + (CampaignSelectButton14XLeft/2) - 1283730 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db CampaignSelectButton15Ytop,CampaignSelectButton15YBottom,CampaignSelectButton15XLeft,CampaignSelectButton15XRight | dw $0000 + (CampaignSelectButton15Ytop*128) + (CampaignSelectButton15XLeft/2) - 1283733PutPlayer4Buttons:3734 ld hl,$4000 + (139*128) + (158/2) - 1283735 ld de,$0000 + (139*128) + (158/2) - 1283736 ld bc,$0000 + (011*256) + (084/2)3737 ld a,ScenarioSelectBlock 3738 jp CopyRamToVramCorrectedCastleOverview 3740PutPlayer1and2Buttons:3741 ld hl,$4000 + (103*128) + (158/2) - 1283742 ld de,$0000 + (103*128) + (158/2) - 1283743 ld bc,$0000 + (023*256) + (084/2)3744 ld a,ScenarioSelectBlock 3745 jp CopyRamToVramCorrectedCastleOverview 3747PutPlayer3Buttons:3748 ld hl,$4000 + (127*128) + (158/2) - 1283749 ld de,$0000 + (127*128) + (158/2) - 1283750 ld bc,$0000 + (011*256) + (084/2)3751 ld a,ScenarioSelectBlock 3752 jp CopyRamToVramCorrectedCastleOverview 3754ClearPlayerButtons:3755 ld hl,$4000 + (075*128) + (024/2) - 1283756 ld de,$0000 + (103*128) + (158/2) - 1283757 ld bc,$0000 + (047*256) + (084/2)3758 ld a,ScenarioSelectBlock 3759 jp CopyRamToVramCorrectedCastleOverview 3761ClearScenarioNameRightTopOfScreen:3762 ld hl,$4000 + (019*128) + (158/2) - 1283763 ld de,$0000 + (019*128) + (158/2) - 1283764 ld bc,$0000 + (009*256) + (088/2)3765 ld a,ScenarioSelectBlock 3766 jp CopyRamToVramCorrectedCastleOverview 3768ClearCampaignNameAndDescriptionRightTopOfScreen:3769 ld hl,$4000 + (019*128) + (148/2) - 1283770 ld de,$0000 + (019*128) + (148/2) - 1283771 ld bc,$0000 + (166*256) + (098/2)3772 ld a,CampaignSelectBlock 3773 jp CopyRamToVramCorrectedCastleOverview 3775ClearDifficultyTextGraphics:3776 ld hl,$4000 + (179*128) + (168/2) - 1283777 ld de,$0000 + (179*128) + (168/2) - 1283778 ld bc,$0000 + (006*256) + (068/2)3779 ld a,ScenarioSelectBlock 3780 jp CopyRamToVramCorrectedCastleOverview 3782ClearScenarioButtonGraphics:3783 ld hl,$4000 + (043*128) + (020/2) - 1283784 ld de,$0000 + (043*128) + (020/2) - 1283785 ld bc,$0000 + (128*256) + (126/2)3786 ld a,ScenarioSelectBlock 3787 jp CopyRamToVramCorrectedCastleOverview 3789ClearCampaignButtonGraphics:3790 ld hl,$4000 + (040*128) + (018/2) - 1283791 ld de,$0000 + (040*128) + (018/2) - 1283792 ld bc,$0000 + (131*256) + (116/2)3793 ld a,CampaignSelectBlock 3794 jp CopyRamToVramCorrectedCastleOverview 3796SetLoadGameGraphics:3797 ld hl,$4000 + (000*128) + (000/2) - 1283798 ld de,$0000 + (000*128) + (000/2) - 1283799 ld bc,$0000 + (212*256) + (256/2)3800 ld a,LoadGameBlock 3801 jp CopyRamToVramCorrectedCastleOverview 3803SetScenarioSelectGraphics:3804 ld hl,$4000 + (000*128) + (000/2) - 1283805 ld de,$0000 + (000*128) + (000/2) - 1283806 ld bc,$0000 + (212*256) + (256/2)3807 ld a,ScenarioSelectBlock 3808 jp CopyRamToVramCorrectedCastleOverview 3810SetFontPage0Y212: 3811 ld hl,$4000 + (000*128) + (000/2) - 1283812 ld de,$0000 + (212*128) + (000/2) - 1283813 ld bc,$0000 + (006*256) + (256/2)3814 ld a,CastleOverviewFontBlock 3815 jp CopyRamToVramCorrectedWithoutActivePageSetting 3817SetCampaignSelectGraphics:3818 ld hl,$4000 + (000*128) + (000/2) - 1283819 ld de,$0000 + (000*128) + (000/2) - 1283820 ld bc,$0000 + (212*256) + (256/2)3821 ld a,CampaignSelectBlock 3822 jp CopyRamToVramCorrectedCastleOverview 3824SetTitleScreenGraphics:3825 ld hl,$4000 + (000*128) + (000/2) - 1283826 ld de,$0000 + (000*128) + (000/2) - 1283827 ld bc,$0000 + (212*256) + (256/2)3828 ld a,TitleScreenGraphicsBlock 3829 jp CopyRamToVramCorrectedCastleOverview 3832MSXHeroes.asm 1363 ds $c000-$,$ff1364dephase13661369BattleMonsterSpriteSheet9Block: equ $6d1370phase $40001371 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9.SC5",7,208 * 128 1372 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9Bottom48Lines.SC5",7,048 * 128 1373 ds $c000-$,$ff1374dephase13761379BattleMonsterSpriteSheet10Block: equ $6f1380phase $40001381 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10.SC5",7,208 * 128 1382 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10Bottom48Lines.SC5",7,048 * 128 1383 ds $c000-$,$ff1384dephase13861389BattleMonsterSpriteSheet11Block: equ $711390phase $40001391 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11.SC5",7,208 * 128 1392 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11Bottom48Lines.SC5",7,048 * 128 1393 ds $c000-$,$ff1394dephase13961399BattleMonsterSpriteSheet12Block: equ $731400phase $40001401 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12.SC5",7,208 * 128 1402 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12Bottom48Lines.SC5",7,048 * 128 1403 ds $c000-$,$ff1404dephase14061409BattleMonsterSpriteSheet13Block: equ $751410phase $40001411 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13.SC5",7,208 * 128 1412 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13Bottom48Lines.SC5",7,048 * 128 1413 ds $c000-$,$ff1414dephase14161419BattleMonsterSpriteSheet14Block: equ $771420phase $40001421 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14.SC5",7,208 * 128 1422 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14Bottom48Lines.SC5",7,048 * 128 1423 ds $c000-$,$ff1424dephase14261429BattleMonsterSpriteSheet15Block: equ $791430phase $40001431 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15.SC5",7,208 * 128 1432 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15Bottom48Lines.SC5",7,048 * 128 1433 ds $c000-$,$ff1434dephase14361439BattleMonsterSpriteSheet16Block: equ $7b1440phase $40001441 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16.SC5",7,208 * 128 1442 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16Bottom48Lines.SC5",7,048 * 128 1443 ds $c000-$,$ff1444dephase14461449DiskMenuBlock: equ $7d1450phase $40001451 incbin "..\grapx\DiskMenu\DiskMenu.SC5",7,134 * 128 1452 ds $c000-$,$ff1453dephase14551458BattleMonsterSpriteSheet18Block: equ $7f1459phase $400014601462 ds $c000-$,$ff1463dephase14651468CastleOverviewBlock: equ $811469phase $40001470 incbin "..\grapx\CastleOverview\CastleOverview.SC5",7,212 * 128 1471 ds $c000-$,$ff1472dephase14741477RecruitCreatures4MonstersBlock: equ $831478phase $40001479 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster1.SC5",7,30 * 128 1480 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster2.SC5",7,30 * 128 1481 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster3.SC5",7,30 * 128 1482 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster4.SC5",7,30 * 128 1483 ds $8000-$,$ff1484dephase14861489SpellAnimations16Block: equ $841490phase $40001491 incbin "..\grapx\BattleField\SpellAnimations16.SC5",7,128 * 128 1492 ds $8000-$,$ff1493dephase14951498ScenarioSelectButtonsBlock: equ $851499TitleScreenButtonsBlock: equ $851500phase $40001501 incbin "..\grapx\TitleScreen\ScenarioSelectButtons.SC5",7,172 * 128 1502 incbin "..\grapx\TitleScreen\TitleScreenButtons.SC5",7,76 * 128 1503 ds $c000-$,$ff1504dephase15061509ScenarioSelectBlock: equ $871510phase $40001511 incbin "..\grapx\TitleScreen\ScenarioSelect.SC5",7,212 * 128 1512 ds $c000-$,$ff1513dephase15151518SpellAnimations15Block: equ $891519phase $40001520 incbin "..\grapx\BattleField\SpellAnimations15.SC5",7,128 * 128 1521 ds $8000-$,$ff1522dephase15241527TilesGentleBlock: equ $8a1528phase $40001529 incbin "..\grapx\tilesheets\TilesGentle.SC5",7,208 * 128 1530 incbin "..\grapx\tilesheets\TilesGentleBottom48Lines.SC5",7,48 * 128 1531 ds $c000-$,$ff1532dephase15341537TilesGentleDesertBlock: equ $8c1538phase $40001539 incbin "..\grapx\tilesheets\TilesGentleDesert.SC5",7,208 * 128 1540 incbin "..\grapx\tilesheets\TilesGentleDesertBottom48Lines.SC5",7,48 * 128 1541 ds $c000-$,$ff1542dephase15441547TilesGentleAutumnBlock: equ $8e1548phase $40001549 incbin "..\grapx\tilesheets\TilesGentleAutumn.SC5",7,208 * 128 1550 incbin "..\grapx\tilesheets\TilesGentleAutumnBottom48Lines.SC5",7,48 * 128 1551 ds $c000-$,$ff1552dephase15541557TilesGentleWinterBlock: equ $901558phase $40001559 incbin "..\grapx\tilesheets\TilesGentleWinter.SC5",7,208 * 128 1560 incbin "..\grapx\tilesheets\TilesGentleWinterBottom48Lines.SC5",7,48 * 128 1561 ds $c000-$,$ff1562dephase15641567TilesGentleJungleBlock: equ $921568phase $40001569 incbin "..\grapx\tilesheets\TilesGentleJungle.SC5",7,208 * 128 1570 incbin "..\grapx\tilesheets\TilesGentleJungleBottom48Lines.SC5",7,48 * 128 1571 ds $c000-$,$ff1572dephase15741577TilesGentleCaveBlock: equ $941578phase $40001579 incbin "..\grapx\tilesheets\TilesGentleCave.SC5",7,208 * 128 1580 incbin "..\grapx\tilesheets\TilesGentleCaveBottom48Lines.SC5",7,48 * 128 1581 ds $c000-$,$ff1582dephase15841587GentleDesertMap01MapBlock: equ $961588GentleDesertMap01ObjectLayerMapBlock: equ $961589GentleDesertMap02MapBlock: equ $961590GentleDesertMap02ObjectLayerMapBlock: equ $961591GentleDesertMap03MapBlock: equ $961592GentleDesertMap03ObjectLayerMapBlock: equ $961593GentleDesertMap04MapBlock: equ $961594GentleDesertMap04ObjectLayerMapBlock: equ $961596phase $40001597GentleDesertMap01Map:1598 incbin "..\maps\GentleDesertMap01.map.pck"1599GentleDesertMap01ObjectLayerMap:1600 incbin "..\maps\GentleDesertMap01objects.map.pck"1601GentleDesertMap02Map:1602 incbin "..\maps\GentleDesertMap02.map.pck"1603GentleDesertMap02ObjectLayerMap:1604 incbin "..\maps\GentleDesertMap02objects.map.pck"1605GentleDesertMap03Map:1606 incbin "..\maps\GentleDesertMap03.map.pck"1607GentleDesertMap03ObjectLayerMap:1608 incbin "..\maps\GentleDesertMap03objects.map.pck"1609GentleDesertMap04Map:1610 incbin "..\maps\GentleDesertMap04.map.pck"1611GentleDesertMap04ObjectLayerMap:1612 incbin "..\maps\GentleDesertMap04objects.map.pck"1613 ds $8000-$,$ff1614dephase16161619GentleWinterMap01MapBlock: equ $971620GentleWinterMap01ObjectLayerMapBlock: equ $971621GentleWinterMap02MapBlock: equ $971622GentleWinterMap02ObjectLayerMapBlock: equ $971623GentleWinterMap03MapBlock: equ $971624GentleWinterMap03ObjectLayerMapBlock: equ $971625GentleDesertMap05MapBlock: equ $971626GentleDesertMap05ObjectLayerMapBlock: equ $971628phase $40001629GentleDesertMap05Map:1630 incbin "..\maps\GentleDesertMap05.map.pck"1631GentleDesertMap05ObjectLayerMap:1632 incbin "..\maps\GentleDesertMap05objects.map.pck"1633GentleWinterMap01Map:1634 incbin "..\maps\GentleWinterMap01.map.pck"1635GentleWinterMap01ObjectLayerMap:1636 incbin "..\maps\GentleWinterMap01objects.map.pck"1637GentleWinterMap02Map:1638 incbin "..\maps\GentleWinterMap02.map.pck"1639GentleWinterMap02ObjectLayerMap:1640 incbin "..\maps\GentleWinterMap02objects.map.pck"1641GentleWinterMap03Map:1642 incbin "..\maps\GentleWinterMap03.map.pck"1643GentleWinterMap03ObjectLayerMap:1644 incbin "..\maps\GentleWinterMap03objects.map.pck"1645 ds $8000-$,$ff1646dephase16481651GentleWinterMap04MapBlock: equ $981652GentleWinterMap04ObjectLayerMapBlock: equ $981653GentleWinterMap05MapBlock: equ $981654GentleWinterMap05ObjectLayerMapBlock: equ $981655GentleMap01MapBlock: equ $981656GentleMap01ObjectLayerMapBlock: equ $981657phase $40001658GentleWinterMap04Map:1659 incbin "..\maps\GentleWinterMap04.map.pck"1660GentleWinterMap04ObjectLayerMap:1661 incbin "..\maps\GentleWinterMap04objects.map.pck"1662GentleWinterMap05Map:1663 incbin "..\maps\GentleWinterMap05.map.pck"1664GentleWinterMap05ObjectLayerMap:1665 incbin "..\maps\GentleWinterMap05objects.map.pck"1666GentleMap01Map:1667 incbin "..\maps\GentleMap01.map.pck"1668GentleMap01ObjectLayerMap:1669 incbin "..\maps\GentleMap01objects.map.pck"1670 ds $8000-$,$ff1671dephase16731676GentleJungleMap01MapBlock: equ $991677GentleJungleMap01ObjectLayerMapBlock: equ $991678GentleJungleMap02MapBlock: equ $991679GentleJungleMap02ObjectLayerMapBlock: equ $991680GentleJungleMap03MapBlock: equ $991681GentleJungleMap03ObjectLayerMapBlock: equ $991683phase $40001684GentleJungleMap01Map:1685 incbin "..\maps\GentleJungleMap01.map.pck"1686GentleJungleMap01ObjectLayerMap:1687 incbin "..\maps\GentleJungleMap01objects.map.pck"1688GentleJungleMap02Map:1689 incbin "..\maps\GentleJungleMap02.map.pck"1690GentleJungleMap02ObjectLayerMap:1691 incbin "..\maps\GentleJungleMap02objects.map.pck"1692GentleJungleMap03Map:1693 incbin "..\maps\GentleJungleMap03.map.pck"1694GentleJungleMap03ObjectLayerMap:1695 incbin "..\maps\GentleJungleMap03objects.map.pck"1696 ds $8000-$,$ff1697dephase16991702GentleJungleMap04MapBlock: equ $9a1703GentleJungleMap04ObjectLayerMapBlock: equ $9a1704GentleJungleMap05MapBlock: equ $9a1705GentleJungleMap05ObjectLayerMapBlock: equ $9a1707phase $40001708GentleJungleMap04Map:1709 incbin "..\maps\GentleJungleMap04.map.pck"1710GentleJungleMap04ObjectLayerMap:1711 incbin "..\maps\GentleJungleMap04objects.map.pck"1712GentleJungleMap05Map:1713 incbin "..\maps\GentleJungleMap05.map.pck"1714GentleJungleMap05ObjectLayerMap:1715 incbin "..\maps\GentleJungleMap05objects.map.pck"1716 ds $8000-$,$ff1717dephase17191722GentleAutumnMap01MapBlock: equ $9b1723GentleAutumnMap01ObjectLayerMapBlock: equ $9b1724GentleAutumnMap02MapBlock: equ $9b1725GentleAutumnMap02ObjectLayerMapBlock: equ $9b1726GentleAutumnMap03MapBlock: equ $9b1727GentleAutumnMap03ObjectLayerMapBlock: equ $9b1729phase $40001730GentleAutumnMap01Map:1731 incbin "..\maps\GentleAutumnMap01.map.pck"1732GentleAutumnMap01ObjectLayerMap:1733 incbin "..\maps\GentleAutumnMap01objects.map.pck"1734GentleAutumnMap02Map:1735 incbin "..\maps\GentleAutumnMap02.map.pck"1736GentleAutumnMap02ObjectLayerMap:1737 incbin "..\maps\GentleAutumnMap02objects.map.pck"1738GentleAutumnMap03Map:1739 incbin "..\maps\GentleAutumnMap03.map.pck"1740GentleAutumnMap03ObjectLayerMap:1741 incbin "..\maps\GentleAutumnMap03objects.map.pck"1742 ds $8000-$,$ff1743dephase17451748GentleAutumnMap04MapBlock: equ $9c1749GentleAutumnMap04ObjectLayerMapBlock: equ $9c1750GentleAutumnMap05MapBlock: equ $9c1751GentleAutumnMap05ObjectLayerMapBlock: equ $9c1752GentleCaveMap01MapBlock: equ $9c1753GentleCaveMap01ObjectLayerMapBlock: equ $9c1755phase $40001756GentleAutumnMap04Map:1757 incbin "..\maps\GentleAutumnMap04.map.pck"1758GentleAutumnMap04ObjectLayerMap:1759 incbin "..\maps\GentleAutumnMap04objects.map.pck"1760GentleAutumnMap05Map:1761 incbin "..\maps\GentleAutumnMap05.map.pck"1762GentleAutumnMap05ObjectLayerMap:1763 incbin "..\maps\GentleAutumnMap05objects.map.pck"1764GentleCaveMap01Map:1765 incbin "..\maps\GentleCaveMap01.map.pck"1766GentleCaveMap01ObjectLayerMap:1767 incbin "..\maps\GentleCaveMap01objects.map.pck"1768 ds $8000-$,$ff1769dephase17711774GentleCaveMap02MapBlock: equ $9d1775GentleCaveMap02ObjectLayerMapBlock: equ $9d1776GentleCaveMap03MapBlock: equ $9d1777GentleCaveMap03ObjectLayerMapBlock: equ $9d1778GentleCaveMap04MapBlock: equ $9d1779GentleCaveMap04ObjectLayerMapBlock: equ $9d1780GentleCaveMap05MapBlock: equ $9d1781GentleCaveMap05ObjectLayerMapBlock: equ $9d1783phase $40001785GentleCaveMap02Map:1786 incbin "..\maps\GentleCaveMap02.map.pck"1787GentleCaveMap02ObjectLayerMap:1788 incbin "..\maps\GentleCaveMap02objects.map.pck"1789GentleCaveMap03Map:1790 incbin "..\maps\GentleCaveMap03.map.pck"1791GentleCaveMap03ObjectLayerMap:1792 incbin "..\maps\GentleCaveMap03objects.map.pck"1793GentleCaveMap04Map:1794 incbin "..\maps\GentleCaveMap04.map.pck"1795GentleCaveMap04ObjectLayerMap:1796 incbin "..\maps\GentleCaveMap04objects.map.pck"1797GentleCaveMap05Map:1798 incbin "..\maps\GentleCaveMap05.map.pck"1799GentleCaveMap05ObjectLayerMap:1800 incbin "..\maps\GentleCaveMap05objects.map.pck"1801 ds $8000-$,$ff1802dephase18041807GentleMap02MapBlock: equ $9e1808GentleMap02ObjectLayerMapBlock: equ $9e1809GentleMap03MapBlock: equ $9e1810GentleMap03ObjectLayerMapBlock: equ $9e1811GentleMap04MapBlock: equ $9e1812GentleMap04ObjectLayerMapBlock: equ $9e1813GentleMap05MapBlock: equ $9e1814GentleMap05ObjectLayerMapBlock: equ $9e1816phase $40001817GentleMap02Map:1818 incbin "..\maps\GentleMap02.map.pck"1819GentleMap02ObjectLayerMap:1820 incbin "..\maps\GentleMap02objects.map.pck"1821GentleMap03Map:1822 incbin "..\maps\GentleMap03.map.pck"1823GentleMap03ObjectLayerMap:1824 incbin "..\maps\GentleMap03objects.map.pck"1825GentleMap04Map:1826 incbin "..\maps\GentleMap04.map.pck"1827GentleMap04ObjectLayerMap:1828 incbin "..\maps\GentleMap04objects.map.pck"1829GentleMap05Map:1830 incbin "..\maps\GentleMap05.map.pck"1831GentleMap05ObjectLayerMap:1832 incbin "..\maps\GentleMap05objects.map.pck"1833 ds $8000-$,$ff1834dephase18361839BattleFieldWinterBlock: equ $9f1840phase $40001841 incbin "..\grapx\BattleField\BattleFieldWinter.SC5",7,212 * 128 1842 ds $c000-$,$ff1843dephase18451848BattleFieldDesertBlock: equ $a11849phase $40001850 incbin "..\grapx\BattleField\BattleFieldDesert.SC5",7,212 * 128 1851 ds $c000-$,$ff1852dephase18541857BattleFieldCaveBlock: equ $a31858phase $40001859 incbin "..\grapx\BattleField\BattleFieldCave.SC5",7,212 * 128 1860 ds $c000-$,$ff1861dephase18631866BattleFieldGentleBlock: equ $a51867phase $40001868 incbin "..\grapx\BattleField\BattleFieldGentle.SC5",7,212 * 128 1869 ds $c000-$,$ff1870dephase18721875BattleFieldAutumnBlock: equ $a71876phase $40001877 incbin "..\grapx\BattleField\BattleFieldAutumn.SC5",7,212 * 128 1878 ds $c000-$,$ff1879dephase18811884BattleFieldJungleBlock: equ $a91885phase $40001886 incbin "..\grapx\BattleField\BattleFieldJungle.SC5",7,212 * 128 1887 ds $c000-$,$ff1888dephase18901893SpellAnimationsBlock: equ $ab1894phase $40001895 incbin "..\grapx\BattleField\SpellAnimations1.SC5",7,212 * 128 1896 ds $c000-$,$ff1897dephase18991902SpellAnimations2Block: equ $ad1903phase $40001904 incbin "..\grapx\BattleField\SpellAnimations2.SC5",7,192 * 128 1905 incbin "..\grapx\BattleField\SpellAnimations2bottom64lines.SC5",7,064 * 128 1906 ds $c000-$,$ff1907dephase19091912SpellAnimations3Block: equ $af1913phase $40001914 incbin "..\grapx\BattleField\SpellAnimations3.SC5",7,128 * 128 1915 ds $8000-$,$ff1916dephase19181921SpellAnimations4Block: equ $b01922phase $40001923 incbin "..\grapx\BattleField\SpellAnimations4.SC5",7,128 * 128 1924 ds $8000-$,$ff1925dephase19271930SpellAnimations5Block: equ $b11931phase $40001932 incbin "..\grapx\BattleField\SpellAnimations5.SC5",7,128 * 128 1933 ds $8000-$,$ff1934dephase19361939SpellAnimations6Block: equ $b21940phase $40001941 incbin "..\grapx\BattleField\SpellAnimations6.SC5",7,128 * 128 1942 ds $8000-$,$ff1943dephase19451948SpellAnimations7Block: equ $b31949phase $40001950 incbin "..\grapx\BattleField\SpellAnimations7.SC5",7,128 * 128 1951 ds $8000-$,$ff1952dephase19541957SpellAnimations8Block: equ $b41958phase $40001959 incbin "..\grapx\BattleField\SpellAnimations8.SC5",7,128 * 128 1960 ds $8000-$,$ff1961dephase19631966SpellAnimations9Block: equ $b51967phase $40001968 incbin "..\grapx\BattleField\SpellAnimations9.SC5",7,128 * 128 1969 ds $8000-$,$ff1970dephase19721975SpellAnimations10Block: equ $b61976phase $40001977 incbin "..\grapx\BattleField\SpellAnimations10.SC5",7,128 * 128 1978 ds $8000-$,$ff1979dephase19811984SpellAnimations11Block: equ $b71985phase $40001986 incbin "..\grapx\BattleField\SpellAnimations11.SC5",7,128 * 128 1987 ds $8000-$,$ff1988dephase19901993SpellAnimations12Block: equ $b81994phase $40001995 incbin "..\grapx\BattleField\SpellAnimations12.SC5",7,128 * 128 1996 ds $8000-$,$ff1997dephase19992002SpellAnimations13Block: equ $b92003phase $40002004 incbin "..\grapx\BattleField\SpellAnimations13.SC5",7,128 * 128 2005 ds $8000-$,$ff2006dephase20082011SpellAnimations14Block: equ $ba2012phase $40002013 incbin "..\grapx\BattleField\SpellAnimations14.SC5",7,128 * 128 2014 ds $8000-$,$ff2015dephase20172020GentleAutumnMiniMapsBlock: equ $bb2021GentleCaveMiniMapsBlock: equ $bb2022GentleDesertMiniMapsBlock: equ $bb2023GentleJungleMiniMapsBlock: equ $bb2024GentleMiniMapsBlock: equ $bb2025phase $40002026 incbin "..\grapx\hud\GentleAutumnMiniMaps.SC5",7,48 * 128 2027 incbin "..\grapx\hud\GentleCaveMiniMaps.SC5",7,048 * 128 2028 incbin "..\grapx\hud\GentleDesertMiniMaps.SC5",7,048 * 128 2029 incbin "..\grapx\hud\GentleJungleMiniMaps.SC5",7,048 * 128 2030 incbin "..\grapx\hud\GentleMiniMaps.SC5",7,048 * 128 2031 ds $c000-$,$ff2032dephase20342035RomSize: equ 8*1024*1024 2036RomBlockSize: equ 16*1024 2037RomStartAddress: equ $40002039usas2sfx1repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize2040 phase $00002041 incbin "msxlegendssfx.rep"2042 dephase2043 DS RomBlockSize- $ and (RomBlockSize-1),-1 2045usas2repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize2046 phase $00002047 incbin "msxlegends.rep"2048 dephase2049 DS RomBlockSize- $ and (RomBlockSize-1),-1 2051LoadGameBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize2052 phase $40002053 incbin "..\grapx\TitleScreen\LoadGame.SC5",7,212 * 128 2054 dephase2055 DS RomBlockSize- $ and (RomBlockSize-1),-1 2057SaveGameBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize2058 phase $40002059 incbin "..\grapx\DiskMenu\SaveGame.SC5",7,192 * 128 2060 dephase2061 DS RomBlockSize- $ and (RomBlockSize-1),-1 2063CampaignInfoblock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize2064 phase $40002065 CampaignInfo.asm1CampaignInfoLenght: equ Campaign02-Campaign012CampaignTextLenght: equ 3445Campaign01:6.StartingTowns: db 001,002,000,000 7.TavernHeroes: db 006,008,010,039,041,000,000,000,000,0008.Players: db 2,1,0,2,2 9.StartingResources:10.Gold: dw 2000011.Wood: dw 2012.Ore: dw 2013.Gems: dw 1014.Rubies: dw 1015.Castle1Player: db 116.Castle2Player: db 217.Castle3Player: db 25518.Castle4Player: db 25519.DaysToCompleteCampaign: db 4*3020.CampaignText: db "Find Pochi in the northern castle",2552122.P1hero1y: db 123.P1hero1x: db 124.P1hero1xp: dw 0 25.P1hero1move: db 20,2026.P1hero1mana: dw 10,1027.P1hero1manarec:db 5 28.P1hero1status: db 2 29.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 30.P1Hero1StatAttack: db 131.P1Hero1StatDefense: db 232.P1Hero1StatKnowledge: db 1 33.P1Hero1StatSpellDamage: db 1 34.P1HeroSkills: db 10,0,0,0,0,035.P1HeroLevel: db 136.P1EarthSpells: db %0000 0000 37.P1FireSpells: db %0000 000038.P1AirSpells: db %0000 000039.P1WaterSpells: db %0000 000040.P1AllSchoolsSpells: db %0000 000041.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 42.P1HeroSpecificInfo: dw HeroAddressesDrasle143.P1HeroDYDX: dw $ffff 45.P2hero1y: db 146.P2hero1x: db 147.P2hero1xp: dw 0 48.P2hero1move: db 20,2049.P2hero1mana: dw 10,1050.P2hero1manarec:db 5 51.P2hero1status: db 255 52.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw SDSnatcherUnitLevel1Growth | db SDSnatcherUnitLevel2Number | dw SDSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 53.P2Hero1StatAttack: db 154.P2Hero1StatDefense: db 255.P2Hero1StatKnowledge: db 1 56.P2Hero1StatSpellDamage: db 1 57.P2HeroSkills: db 01,0,0,0,0,058.P2HeroLevel: db 159.P2EarthSpells: db %0000 0000 60.P2FireSpells: db %0000 000061.P2AirSpells: db %0000 000062.P2WaterSpells: db %0000 000063.P2AllSchoolsSpells: db %0000 000064.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 65.P2HeroSpecificInfo: dw HeroAddressesSnatcher66.P2HeroDYDX: dw $ffff 68.P3hero1y: db 169.P3hero1x: db 170.P3hero1xp: dw 0 71.P3hero1move: db 20,2072.P3hero1mana: dw 10,1073.P3hero1manarec:db 5 74.P3hero1status: db 255 75.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 76.P3Hero1StatAttack: db 177.P3Hero1StatDefense: db 278.P3Hero1StatKnowledge: db 1 79.P3Hero1StatSpellDamage: db 1 80.P3HeroSkills: db 16,0,0,0,0,081.P3HeroLevel: db 182.P3EarthSpells: db %0000 0000 83.P3FireSpells: db %0000 000084.P3AirSpells: db %0000 000085.P3WaterSpells: db %0000 000086.P3AllSchoolsSpells: db %0000 000087.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 88.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont89.P3HeroDYDX: dw $ffff 91.P4hero1y: db 192.P4hero1x: db 193.P4hero1xp: dw 0 94.P4hero1move: db 20,2095.P4hero1mana: dw 10,1096.P4hero1manarec:db 5 97.P4hero1status: db 255 98.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 99.P4Hero1StatAttack: db 1100.P4Hero1StatDefense: db 2101.P4Hero1StatKnowledge: db 1 102.P4Hero1StatSpellDamage: db 1 103.P4HeroSkills: db 10,0,0,0,0,0104.P4HeroLevel: db 1105.P4EarthSpells: db %0000 0000 106.P4FireSpells: db %0000 0000107.P4AirSpells: db %0000 0000108.P4WaterSpells: db %0000 0000109.P4AllSchoolsSpells: db %0000 0000110.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 111.P4HeroSpecificInfo: dw HeroAddressesSnake2112.P4HeroDYDX: dw $ffff 116117Campaign02:118.StartingTowns: db 001,003,002,000 119.TavernHeroes: db 039,041,004,026,006,008,010,000,000,000120.Players: db 3,1,0,0,2 121.StartingResources:122.Gold: dw 20000123.Wood: dw 20124.Ore: dw 20125.Gems: dw 10126.Rubies: dw 10127.Castle1Player: db 1128.Castle2Player: db 2129.Castle3Player: db 3130.Castle4Player: db 255131.DaysToCompleteCampaign: db 4*30132.CampaignText: db "Reclaim the captured fortresses  ",255133134.P1hero1y: db 1135.P1hero1x: db 1136.P1hero1xp: dw 0 137.P1hero1move: db 20,20138.P1hero1mana: dw 10,10139.P1hero1manarec:db 5 140.P1hero1status: db 255 141.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 142.P1Hero1StatAttack: db 1143.P1Hero1StatDefense: db 2144.P1Hero1StatKnowledge: db 1 145.P1Hero1StatSpellDamage: db 1 146.P1HeroSkills: db 10,0,0,0,0,0147.P1HeroLevel: db 1148.P1EarthSpells: db %0000 0000 149.P1FireSpells: db %0000 0000150.P1AirSpells: db %0000 0000151.P1WaterSpells: db %0000 0000152.P1AllSchoolsSpells: db %0000 0000153.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 154.P1HeroSpecificInfo: dw HeroAddressesSnake2155.P1HeroDYDX: dw $ffff 157.P2hero1y: db 1158.P2hero1x: db 1159.P2hero1xp: dw 0 160.P2hero1move: db 20,20161.P2hero1mana: dw 10,10162.P2hero1manarec:db 5 163.P2hero1status: db 2 164.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw SDSnatcherUnitLevel1Growth | db SDSnatcherUnitLevel2Number | dw SDSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 165.P2Hero1StatAttack: db 1166.P2Hero1StatDefense: db 2167.P2Hero1StatKnowledge: db 1 168.P2Hero1StatSpellDamage: db 1 169.P2HeroSkills: db 01,0,0,0,0,0170.P2HeroLevel: db 1171.P2EarthSpells: db %0000 0000 172.P2FireSpells: db %0000 0000173.P2AirSpells: db %0000 0000174.P2WaterSpells: db %0000 0000175.P2AllSchoolsSpells: db %0000 0000176.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 177.P2HeroSpecificInfo: dw HeroAddressesSnatcher178.P2HeroDYDX: dw $ffff 180.P3hero1y: db 1181.P3hero1x: db 1182.P3hero1xp: dw 0 183.P3hero1move: db 20,20184.P3hero1mana: dw 10,10185.P3hero1manarec:db 5 186.P3hero1status: db 2 187.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 188.P3Hero1StatAttack: db 1189.P3Hero1StatDefense: db 2190.P3Hero1StatKnowledge: db 1 191.P3Hero1StatSpellDamage: db 1 192.P3HeroSkills: db 16,0,0,0,0,0193.P3HeroLevel: db 1194.P3EarthSpells: db %0000 0000 195.P3FireSpells: db %0000 0000196.P3AirSpells: db %0000 0000197.P3WaterSpells: db %0000 0000198.P3AllSchoolsSpells: db %0000 0000199.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 200.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont201.P3HeroDYDX: dw $ffff 203.P4hero1y: db 1204.P4hero1x: db 1205.P4hero1xp: dw 0 206.P4hero1move: db 20,20207.P4hero1mana: dw 10,10208.P4hero1manarec:db 5 209.P4hero1status: db 255 210.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 211.P4Hero1StatAttack: db 1212.P4Hero1StatDefense: db 2213.P4Hero1StatKnowledge: db 1 214.P4Hero1StatSpellDamage: db 1 215.P4HeroSkills: db 10,0,0,0,0,0216.P4HeroLevel: db 1217.P4EarthSpells: db %0000 0000 218.P4FireSpells: db %0000 0000219.P4AirSpells: db %0000 0000220.P4WaterSpells: db %0000 0000221.P4AllSchoolsSpells: db %0000 0000222.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 223.P4HeroSpecificInfo: dw HeroAddressesSnake2224.P4HeroDYDX: dw $ffff 228229Campaign03: 230.StartingTowns: db 004,002,000,000 231.TavernHeroes: db 047,019,000,000,000,000,000,000,000,000232.Players: db 2,1,0,2,2 233.StartingResources:234.Gold: dw 20000235.Wood: dw 20236.Ore: dw 20237.Gems: dw 10238.Rubies: dw 10239.Castle1Player: db 1240.Castle2Player: db 2241.Castle3Player: db 255242.Castle4Player: db 255243.DaysToCompleteCampaign: db 4*30244.CampaignText: db "  Break Trevor Belmont's curse   ",255245246.P1hero1y: db 1247.P1hero1x: db 1248.P1hero1xp: dw 0 249.P1hero1move: db 20,20250.P1hero1mana: dw 10,10251.P1hero1manarec:db 5 252.P1hero1status: db 255 253.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 254.P1Hero1StatAttack: db 1255.P1Hero1StatDefense: db 2256.P1Hero1StatKnowledge: db 1 257.P1Hero1StatSpellDamage: db 1 258.P1HeroSkills: db 10,0,0,0,0,0259.P1HeroLevel: db 1260.P1EarthSpells: db %0000 0000 261.P1FireSpells: db %0000 0000262.P1AirSpells: db %0000 0000263.P1WaterSpells: db %0000 0000264.P1AllSchoolsSpells: db %0000 0000265.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 266.P1HeroSpecificInfo: dw HeroAddressesSnake2267.P1HeroDYDX: dw $ffff 269.P2hero1y: db 1270.P2hero1x: db 1271.P2hero1xp: dw 0 272.P2hero1move: db 20,20273.P2hero1mana: dw 10,10274.P2hero1manarec:db 5 275.P2hero1status: db 2 276.P2Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 277.P2Hero1StatAttack: db 1278.P2Hero1StatDefense: db 2279.P2Hero1StatKnowledge: db 1 280.P2Hero1StatSpellDamage: db 1 281.P2HeroSkills: db 01,0,0,0,0,0282.P2HeroLevel: db 1283.P2EarthSpells: db %0000 0000 284.P2FireSpells: db %0000 0000285.P2AirSpells: db %0000 0000286.P2WaterSpells: db %0000 0000287.P2AllSchoolsSpells: db %0000 0000288.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 289.P2HeroSpecificInfo: dw HeroAddressesTrevorBelmont290.P2HeroDYDX: dw $ffff 292.P3hero1y: db 1293.P3hero1x: db 1294.P3hero1xp: dw 0 295.P3hero1move: db 20,20296.P3hero1mana: dw 10,10297.P3hero1manarec:db 5 298.P3hero1status: db 255 299.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 300.P3Hero1StatAttack: db 1301.P3Hero1StatDefense: db 2302.P3Hero1StatKnowledge: db 1 303.P3Hero1StatSpellDamage: db 1 304.P3HeroSkills: db 16,0,0,0,0,0305.P3HeroLevel: db 1306.P3EarthSpells: db %0000 0000 307.P3FireSpells: db %0000 0000308.P3AirSpells: db %0000 0000309.P3WaterSpells: db %0000 0000310.P3AllSchoolsSpells: db %0000 0000311.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 312.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont313.P3HeroDYDX: dw $ffff 315.P4hero1y: db 1316.P4hero1x: db 1317.P4hero1xp: dw 0 318.P4hero1move: db 20,20319.P4hero1mana: dw 10,10320.P4hero1manarec:db 5 321.P4hero1status: db 255 322.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 323.P4Hero1StatAttack: db 1324.P4Hero1StatDefense: db 2325.P4Hero1StatKnowledge: db 1 326.P4Hero1StatSpellDamage: db 1 327.P4HeroSkills: db 10,0,0,0,0,0328.P4HeroLevel: db 1329.P4EarthSpells: db %0000 0000 330.P4FireSpells: db %0000 0000331.P4AirSpells: db %0000 0000332.P4WaterSpells: db %0000 0000333.P4AllSchoolsSpells: db %0000 0000334.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 335.P4HeroSpecificInfo: dw HeroAddressesSnake2336.P4HeroDYDX: dw $ffff 340341Campaign04: 342.StartingTowns: db 005,001,003,002 343.TavernHeroes: db 002,028,015,030,032,000,000,000,000,000344.Players: db 3,1,0,0,2 345.StartingResources:346.Gold: dw 20000347.Wood: dw 20348.Ore: dw 20349.Gems: dw 10350.Rubies: dw 10351.Castle1Player: db 1352.Castle2Player: db 2353.Castle3Player: db 3354.Castle4Player: db 1355.DaysToCompleteCampaign: db 4*30356.CampaignText: db "  Overthrow the dark alliance    ",255357358.P1hero1y: db 1359.P1hero1x: db 1360.P1hero1xp: dw 0 361.P1hero1move: db 20,20362.P1hero1mana: dw 10,10363.P1hero1manarec:db 5 364.P1hero1status: db 255 365.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 366.P1Hero1StatAttack: db 1367.P1Hero1StatDefense: db 2368.P1Hero1StatKnowledge: db 1 369.P1Hero1StatSpellDamage: db 1 370.P1HeroSkills: db 10,0,0,0,0,0371.P1HeroLevel: db 1372.P1EarthSpells: db %0000 0000 373.P1FireSpells: db %0000 0000374.P1AirSpells: db %0000 0000375.P1WaterSpells: db %0000 0000376.P1AllSchoolsSpells: db %0000 0000377.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 378.P1HeroSpecificInfo: dw HeroAddressesSnake2379.P1HeroDYDX: dw $ffff 381.P2hero1y: db 1382.P2hero1x: db 1383.P2hero1xp: dw 0 384.P2hero1move: db 20,20385.P2hero1mana: dw 10,10386.P2hero1manarec:db 5 387.P2hero1status: db 2 388.P2Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db DragonSlayerUnitLevel3Number | dw DragonSlayerUnitLevel3Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 389.P2Hero1StatAttack: db 1390.P2Hero1StatDefense: db 2391.P2Hero1StatKnowledge: db 1 392.P2Hero1StatSpellDamage: db 1 393.P2HeroSkills: db 01,0,0,0,0,0394.P2HeroLevel: db 1395.P2EarthSpells: db %0000 0000 396.P2FireSpells: db %0000 0000397.P2AirSpells: db %0000 0000398.P2WaterSpells: db %0000 0000399.P2AllSchoolsSpells: db %0000 0000400.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 401.P2HeroSpecificInfo: dw HeroAddressesPochi402.P2HeroDYDX: dw $ffff 404.P3hero1y: db 1405.P3hero1x: db 1406.P3hero1xp: dw 0 407.P3hero1move: db 20,20408.P3hero1mana: dw 10,10409.P3hero1manarec:db 5 410.P3hero1status: db 2 411.P3Hero1Units: db SdSnatcherUnitLevel1Number | dw SdSnatcherUnitLevel1Growth*2 | db SdSnatcherUnitLevel2Number | dw SdSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 412.P3Hero1StatAttack: db 1413.P3Hero1StatDefense: db 2414.P3Hero1StatKnowledge: db 1 415.P3Hero1StatSpellDamage: db 1 416.P3HeroSkills: db 16,0,0,0,0,0417.P3HeroLevel: db 1418.P3EarthSpells: db %0000 0000 419.P3FireSpells: db %0000 0000420.P3AirSpells: db %0000 0000421.P3WaterSpells: db %0000 0000422.P3AllSchoolsSpells: db %0000 0000423.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 424.P3HeroSpecificInfo: dw HeroAddressesGillianSeed425.P3HeroDYDX: dw $ffff 427.P4hero1y: db 1428.P4hero1x: db 1429.P4hero1xp: dw 0 430.P4hero1move: db 20,20431.P4hero1mana: dw 10,10432.P4hero1manarec:db 5 433.P4hero1status: db 255 434.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 435.P4Hero1StatAttack: db 1436.P4Hero1StatDefense: db 2437.P4Hero1StatKnowledge: db 1 438.P4Hero1StatSpellDamage: db 1 439.P4HeroSkills: db 10,0,0,0,0,0440.P4HeroLevel: db 1441.P4EarthSpells: db %0000 0000 442.P4FireSpells: db %0000 0000443.P4AirSpells: db %0000 0000444.P4WaterSpells: db %0000 0000445.P4AllSchoolsSpells: db %0000 0000446.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 447.P4HeroSpecificInfo: dw HeroAddressesSnake2448.P4HeroDYDX: dw $ffff 452453Campaign05: 454.StartingTowns: db 006,003,002,005 455.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000456.Players: db 4,1,0,0,0 457.StartingResources:458.Gold: dw 20000459.Wood: dw 20460.Ore: dw 20461.Gems: dw 10462.Rubies: dw 10463.Castle1Player: db 1464.Castle2Player: db 2465.Castle3Player: db 3466.Castle4Player: db 4467.DaysToCompleteCampaign: db 4*30468.CampaignText: db "   Restore peace to Felghana     ",255469470.P1hero1y: db 1471.P1hero1x: db 1472.P1hero1xp: dw 4600473.P1hero1move: db 20,20474.P1hero1mana: dw 20,20475.P1hero1manarec:db 5 476.P1hero1status: db 2 477.P1Hero1Units: db Ys3UnitLevel1Number | dw Ys3UnitLevel1Growth | db Ys3UnitLevel2Number | dw Ys3UnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 478.P1Hero1StatAttack: db 3479.P1Hero1StatDefense: db 2480.P1Hero1StatKnowledge: db 2 481.P1Hero1StatSpellDamage: db 2 482.P1HeroSkills: db 1,5,8,0,0,0483.P1HeroLevel: db 5484.P1EarthSpells: db %0000 0000 485.P1FireSpells: db %0000 0000486.P1AirSpells: db %0000 0000487.P1WaterSpells: db %0000 0000488.P1AllSchoolsSpells: db %0000 0000489.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 490.P1HeroSpecificInfo: dw HeroAddressesAdol491.P1HeroDYDX: dw $ffff 493.P2hero1y: db 1494.P2hero1x: db 1495.P2hero1xp: dw 0 496.P2hero1move: db 20,20497.P2hero1mana: dw 10,10498.P2hero1manarec:db 5 499.P2hero1status: db 2 500.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw 005 | db SDSnatcherUnitLevel1Number | dw 006 | db SDSnatcherUnitLevel1Number | dw 004 | db SDSnatcherUnitLevel1Number | dw 002 | db SDSnatcherUnitLevel1Number | dw 005 | db SDSnatcherUnitLevel1Number | dw 008 501.P2Hero1StatAttack: db 1502.P2Hero1StatDefense: db 2503.P2Hero1StatKnowledge: db 1 504.P2Hero1StatSpellDamage: db 1 505.P2HeroSkills: db 01,0,0,0,0,0506.P2HeroLevel: db 1507.P2EarthSpells: db %0000 0000 508.P2FireSpells: db %0000 0000509.P2AirSpells: db %0000 0000510.P2WaterSpells: db %0000 0000511.P2AllSchoolsSpells: db %0000 0000512.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 513.P2HeroSpecificInfo: dw HeroAddressesRandomHajile514.P2HeroDYDX: dw $ffff 516.P3hero1y: db 1517.P3hero1x: db 1518.P3hero1xp: dw 0 519.P3hero1move: db 20,20520.P3hero1mana: dw 10,10521.P3hero1manarec:db 5 522.P3hero1status: db 2 523.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 524.P3Hero1StatAttack: db 1525.P3Hero1StatDefense: db 2526.P3Hero1StatKnowledge: db 1 527.P3Hero1StatSpellDamage: db 1 528.P3HeroSkills: db 16,0,0,0,0,0529.P3HeroLevel: db 1530.P3EarthSpells: db %0000 0000 531.P3FireSpells: db %0000 0000532.P3AirSpells: db %0000 0000533.P3WaterSpells: db %0000 0000534.P3AllSchoolsSpells: db %0000 0000535.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 536.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont537.P3HeroDYDX: dw $ffff 539.P4hero1y: db 1540.P4hero1x: db 1541.P4hero1xp: dw 0 542.P4hero1move: db 20,20543.P4hero1mana: dw 10,10544.P4hero1manarec:db 5 545.P4hero1status: db 2 546.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 547.P4Hero1StatAttack: db 1548.P4Hero1StatDefense: db 2549.P4Hero1StatKnowledge: db 1 550.P4Hero1StatSpellDamage: db 1 551.P4HeroSkills: db 10,0,0,0,0,0552.P4HeroLevel: db 1553.P4EarthSpells: db %0000 0000 554.P4FireSpells: db %0000 0000555.P4AirSpells: db %0000 0000556.P4WaterSpells: db %0000 0000557.P4AllSchoolsSpells: db %0000 0000558.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 559.P4HeroSpecificInfo: dw HeroAddressesGoemon2560.P4HeroDYDX: dw $ffff 568569Campaign06: 570.StartingTowns: db 007,006,000,000 571.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000572.Players: db 2,1,0,2,2 573.StartingResources:574.Gold: dw 20000575.Wood: dw 20576.Ore: dw 20577.Gems: dw 10578.Rubies: dw 10579.Castle1Player: db 1580.Castle2Player: db 2581.Castle3Player: db 255582.Castle4Player: db 255583.DaysToCompleteCampaign: db 100584.CampaignText: db "Find the castle guarded by Adol  ",255585586.P1hero1y: db 1587.P1hero1x: db 1588.P1hero1xp: dw 4600589.P1hero1move: db 20,20590.P1hero1mana: dw 10,10591.P1hero1manarec:db 5 592.P1hero1status: db 2 593.P1Hero1Units: db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+1 | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+2 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 594.P1Hero1StatAttack: db 4595.P1Hero1StatDefense: db 2596.P1Hero1StatKnowledge: db 1 597.P1Hero1StatSpellDamage: db 2 598.P1HeroSkills: db 1,5,8,0,0,0599.P1HeroLevel: db 5600.P1EarthSpells: db %0000 0000 601.P1FireSpells: db %0000 0000602.P1AirSpells: db %0000 0000603.P1WaterSpells: db %0000 0000604.P1AllSchoolsSpells: db %0000 0001605.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 606.P1HeroSpecificInfo: dw HeroAddressesPsychoWorld607.P1HeroDYDX: dw $ffff 609.P2hero1y: db 1610.P2hero1x: db 1611.P2hero1xp: dw 0 612.P2hero1move: db 20,20613.P2hero1mana: dw 10,10614.P2hero1manarec:db 5 615.P2hero1status: db 2 616.P2Hero1Units: db Ys3UnitLevel1Number | dw Ys3UnitLevel1Growth | db Ys3UnitLevel2Number | dw Ys3UnitLevel2Growth | db Ys3UnitLevel3Number | dw Ys3UnitLevel3Growth | db Ys3UnitLevel4Number | dw 1 | db Ys3UnitLevel4Number | dw 001 | db Ys3UnitLevel4Number | dw 002 617.P2Hero1StatAttack: db 1618.P2Hero1StatDefense: db 2619.P2Hero1StatKnowledge: db 1 620.P2Hero1StatSpellDamage: db 1 621.P2HeroSkills: db 01,0,0,0,0,0622.P2HeroLevel: db 1623.P2EarthSpells: db %0000 0000 624.P2FireSpells: db %0000 0000625.P2AirSpells: db %0000 0000626.P2WaterSpells: db %0000 0000627.P2AllSchoolsSpells: db %0000 0000628.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 629.P2HeroSpecificInfo: dw HeroAddressesAdol630.P2HeroDYDX: dw $ffff 632.P3hero1y: db 1633.P3hero1x: db 1634.P3hero1xp: dw 0 635.P3hero1move: db 20,20636.P3hero1mana: dw 10,10637.P3hero1manarec:db 5 638.P3hero1status: db 255 639.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 640.P3Hero1StatAttack: db 1641.P3Hero1StatDefense: db 2642.P3Hero1StatKnowledge: db 1 643.P3Hero1StatSpellDamage: db 1 644.P3HeroSkills: db 16,0,0,0,0,0645.P3HeroLevel: db 1646.P3EarthSpells: db %0000 0000 647.P3FireSpells: db %0000 0000648.P3AirSpells: db %0000 0000649.P3WaterSpells: db %0000 0000650.P3AllSchoolsSpells: db %0000 0000651.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 652.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont653.P3HeroDYDX: dw $ffff 655.P4hero1y: db 1656.P4hero1x: db 1657.P4hero1xp: dw 0 658.P4hero1move: db 20,20659.P4hero1mana: dw 10,10660.P4hero1manarec:db 5 661.P4hero1status: db 255 662.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 663.P4Hero1StatAttack: db 1664.P4Hero1StatDefense: db 2665.P4Hero1StatKnowledge: db 1 666.P4Hero1StatSpellDamage: db 1 667.P4HeroSkills: db 10,0,0,0,0,0668.P4HeroLevel: db 1669.P4EarthSpells: db %0000 0000 670.P4FireSpells: db %0000 0000671.P4AirSpells: db %0000 0000672.P4WaterSpells: db %0000 0000673.P4AllSchoolsSpells: db %0000 0000674.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 675.P4HeroSpecificInfo: dw HeroAddressesGoemon2676.P4HeroDYDX: dw $ffff 679680Campaign07: 681.StartingTowns: db 008,007,004,000 682.TavernHeroes: db 000,000,000,000,000,000,000,000,019,047683.Players: db 2,1,0,2,2 684.StartingResources:685.Gold: dw 20000686.Wood: dw 20687.Ore: dw 20688.Gems: dw 10689.Rubies: dw 10690.Castle1Player: db 1691.Castle2Player: db 2692.Castle3Player: db 255693.Castle4Player: db 255694.DaysToCompleteCampaign: db 80695.CampaignText: db "  Confront Lucia at her castle   ",255696697.P1hero1y: db 1698.P1hero1x: db 1699.P1hero1xp: dw 0 700.P1hero1move: db 20,20701.P1hero1mana: dw 10,10702.P1hero1manarec:db 5 703.P1hero1status: db 2 704.P1Hero1Units: db KingKongUnitLevel6Number | dw 1 | db 0 | dw 0 | db 0 | dw 0 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 705.P1Hero1StatAttack: db 1706.P1Hero1StatDefense: db 2707.P1Hero1StatKnowledge: db 1 708.P1Hero1StatSpellDamage: db 1 709.P1HeroSkills: db 10,0,0,0,0,0710.P1HeroLevel: db 1711.P1EarthSpells: db %0000 0000 712.P1FireSpells: db %0000 0000713.P1AirSpells: db %0000 0000714.P1WaterSpells: db %0000 0000715.P1AllSchoolsSpells: db %0000 0000716.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 717.P1HeroSpecificInfo: dw HeroAddressesMitchell718.P1HeroDYDX: dw $ffff 720.P2hero1y: db 1721.P2hero1x: db 1722.P2hero1xp: dw 0 723.P2hero1move: db 20,20724.P2hero1mana: dw 10,10725.P2hero1manarec:db 5 726.P2hero1status: db 2 727.P2Hero1Units: db PsychoWorldUnitLevel6Number | dw 1 | db PsychoWorldUnitLevel5Number | dw 1 | db 000 | dw 000 | db 000 | dw 000 | db PsychoWorldUnitLevel1Number | dw 0040 | db PsychoWorldUnitLevel1Number | dw 003 728.P2Hero1StatAttack: db 1729.P2Hero1StatDefense: db 2730.P2Hero1StatKnowledge: db 1 731.P2Hero1StatSpellDamage: db 1 732.P2HeroSkills: db 01,0,0,0,0,0733.P2HeroLevel: db 1734.P2EarthSpells: db %0000 0000 735.P2FireSpells: db %0000 0000736.P2AirSpells: db %0000 0000737.P2WaterSpells: db %0000 0000738.P2AllSchoolsSpells: db %0000 0000739.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 740.P2HeroSpecificInfo: dw HeroAddressesPsychoWorld741.P2HeroDYDX: dw $ffff 743.P3hero1y: db 1744.P3hero1x: db 1745.P3hero1xp: dw 0 746.P3hero1move: db 20,20747.P3hero1mana: dw 10,10748.P3hero1manarec:db 5 749.P3hero1status: db 255 750.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 751.P3Hero1StatAttack: db 1752.P3Hero1StatDefense: db 2753.P3Hero1StatKnowledge: db 1 754.P3Hero1StatSpellDamage: db 1 755.P3HeroSkills: db 16,0,0,0,0,0756.P3HeroLevel: db 1757.P3EarthSpells: db %0000 0000 758.P3FireSpells: db %0000 0000759.P3AirSpells: db %0000 0000760.P3WaterSpells: db %0000 0000761.P3AllSchoolsSpells: db %0000 0000762.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 763.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont764.P3HeroDYDX: dw $ffff 766.P4hero1y: db 1767.P4hero1x: db 1768.P4hero1xp: dw 0 769.P4hero1move: db 20,20770.P4hero1mana: dw 10,10771.P4hero1manarec:db 5 772.P4hero1status: db 255 773.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 774.P4Hero1StatAttack: db 1775.P4Hero1StatDefense: db 2776.P4Hero1StatKnowledge: db 1 777.P4Hero1StatSpellDamage: db 1 778.P4HeroSkills: db 10,0,0,0,0,0779.P4HeroLevel: db 1780.P4EarthSpells: db %0000 0000 781.P4FireSpells: db %0000 0000782.P4AirSpells: db %0000 0000783.P4WaterSpells: db %0000 0000784.P4AllSchoolsSpells: db %0000 0000785.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 786.P4HeroSpecificInfo: dw HeroAddressesGoemon2787.P4HeroDYDX: dw $ffff 797798Campaign08: 799.StartingTowns: db 009,008,000,000 800.TavernHeroes: db 043,000,000,000,000,000,000,000,000,000801.Players: db 2,1,0,2,2 802.StartingResources:803.Gold: dw 20000804.Wood: dw 20805.Ore: dw 20806.Gems: dw 10807.Rubies: dw 10808.Castle1Player: db 1809.Castle2Player: db 2810.Castle3Player: db 255811.Castle4Player: db 255812.DaysToCompleteCampaign: db 60813.CampaignText: db "Prevent the artifact activation  ",255814815.P1hero1y: db 1816.P1hero1x: db 1817.P1hero1xp: dw 0 818.P1hero1move: db 20,20819.P1hero1mana: dw 10,10820.P1hero1manarec:db 5 821.P1hero1status: db 2 822.P1Hero1Units: db GolvelliusUnitLevel1Number | dw 10 | db GolvelliusUnitLevel2Number | dw 6 | db GolvelliusUnitLevel5Number | dw 2 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 823.P1Hero1StatAttack: db 1824.P1Hero1StatDefense: db 2825.P1Hero1StatKnowledge: db 1 826.P1Hero1StatSpellDamage: db 1 827.P1HeroSkills: db 10,0,0,0,0,0828.P1HeroLevel: db 1829.P1EarthSpells: db %0000 0000 830.P1FireSpells: db %0000 0000831.P1AirSpells: db %0000 0000832.P1WaterSpells: db %0000 0000833.P1AllSchoolsSpells: db %0000 0000834.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 835.P1HeroSpecificInfo: dw HeroAddressesGolvellius836.P1HeroDYDX: dw $ffff 838.P2hero1y: db 1839.P2hero1x: db 1840.P2hero1xp: dw 0 841.P2hero1move: db 20,20842.P2hero1mana: dw 10,10843.P2hero1manarec:db 5 844.P2hero1status: db 2 845.P2Hero1Units: db KingKongUnitLevel6Number | dw 1 | db 0 | dw 0 | db KingKongUnitLevel3Number | dw 010 | db KingKongUnitLevel3Number | dw 010 | db 000 | dw 000 | db KingKongUnitLevel5Number | dw 003 846.P2Hero1StatAttack: db 1847.P2Hero1StatDefense: db 2848.P2Hero1StatKnowledge: db 1 849.P2Hero1StatSpellDamage: db 1 850.P2HeroSkills: db 10,0,0,0,0,0851.P2HeroLevel: db 1852.P2EarthSpells: db %0000 0000 853.P2FireSpells: db %0000 0000854.P2AirSpells: db %0000 0000855.P2WaterSpells: db %0000 0000856.P2AllSchoolsSpells: db %0000 0000857.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 858.P2HeroSpecificInfo: dw HeroAddressesMitchell859.P2HeroDYDX: dw $ffff 861.P3hero1y: db 1862.P3hero1x: db 1863.P3hero1xp: dw 0 864.P3hero1move: db 20,20865.P3hero1mana: dw 10,10866.P3hero1manarec:db 5 867.P3hero1status: db 255 868.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 869.P3Hero1StatAttack: db 1870.P3Hero1StatDefense: db 2871.P3Hero1StatKnowledge: db 1 872.P3Hero1StatSpellDamage: db 1 873.P3HeroSkills: db 16,0,0,0,0,0874.P3HeroLevel: db 1875.P3EarthSpells: db %0000 0000 876.P3FireSpells: db %0000 0000877.P3AirSpells: db %0000 0000878.P3WaterSpells: db %0000 0000879.P3AllSchoolsSpells: db %0000 0000880.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 881.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont882.P3HeroDYDX: dw $ffff 884.P4hero1y: db 1885.P4hero1x: db 1886.P4hero1xp: dw 0 887.P4hero1move: db 20,20888.P4hero1mana: dw 10,10889.P4hero1manarec:db 5 890.P4hero1status: db 255 891.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 892.P4Hero1StatAttack: db 1893.P4Hero1StatDefense: db 2894.P4Hero1StatKnowledge: db 1 895.P4Hero1StatSpellDamage: db 1 896.P4HeroSkills: db 10,0,0,0,0,0897.P4HeroLevel: db 1898.P4EarthSpells: db %0000 0000 899.P4FireSpells: db %0000 0000900.P4AirSpells: db %0000 0000901.P4WaterSpells: db %0000 0000902.P4AllSchoolsSpells: db %0000 0000903.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 904.P4HeroSpecificInfo: dw HeroAddressesGoemon2905.P4HeroDYDX: dw $ffff 912913Campaign09: 914.StartingTowns: db 010,001,000,000 915.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000916.Players: db 2,1,0,2,2 917.StartingResources:918.Gold: dw 20000919.Wood: dw 20920.Ore: dw 20921.Gems: dw 10922.Rubies: dw 10923.Castle1Player: db 1924.Castle2Player: db 2925.Castle3Player: db 255926.Castle4Player: db 255927.DaysToCompleteCampaign: db 75928.CampaignText: db "Find a safe trail to Drasle's Den",255929930.P1hero1y: db 1931.P1hero1x: db 1932.P1hero1xp: dw 0 933.P1hero1move: db 20,20934.P1hero1mana: dw 10,10935.P1hero1manarec:db 5 936.P1hero1status: db 2 937.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 938.P1Hero1StatAttack: db 1939.P1Hero1StatDefense: db 2940.P1Hero1StatKnowledge: db 1 941.P1Hero1StatSpellDamage: db 1 942.P1HeroSkills: db 10,0,0,0,0,0943.P1HeroLevel: db 1944.P1EarthSpells: db %0000 0000 945.P1FireSpells: db %0000 0000946.P1AirSpells: db %0000 0000947.P1WaterSpells: db %0000 0000948.P1AllSchoolsSpells: db %0000 0000949.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 950.P1HeroSpecificInfo: dw HeroAddressesBillRizer951.P1HeroDYDX: dw $ffff 953.P2hero1y: db 1954.P2hero1x: db 1955.P2hero1xp: dw 0 956.P2hero1move: db 20,20957.P2hero1mana: dw 10,10958.P2hero1manarec:db 5 959.P2hero1status: db 2 960.P2Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db DragonSlayerUnitLevel3Number | dw DragonSlayerUnitLevel3Growth | db DragonSlayerUnitLevel4Number | dw DragonSlayerUnitLevel4Growth | db DragonSlayerUnitLevel5Number | dw DragonSlayerUnitLevel5Growth | db 000 | dw 000 961.P2Hero1StatAttack: db 1962.P2Hero1StatDefense: db 2963.P2Hero1StatKnowledge: db 1 964.P2Hero1StatSpellDamage: db 1 965.P2HeroSkills: db 10,0,0,0,0,0966.P2HeroLevel: db 1967.P2EarthSpells: db %0000 0000 968.P2FireSpells: db %0000 0000969.P2AirSpells: db %0000 0000970.P2WaterSpells: db %0000 0000971.P2AllSchoolsSpells: db %0000 0000972.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 973.P2HeroSpecificInfo: dw HeroAddressesPochi974.P2HeroDYDX: dw $ffff 976.P3hero1y: db 1977.P3hero1x: db 1978.P3hero1xp: dw 0 979.P3hero1move: db 20,20980.P3hero1mana: dw 10,10981.P3hero1manarec:db 5 982.P3hero1status: db 255 983.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 984.P3Hero1StatAttack: db 1985.P3Hero1StatDefense: db 2986.P3Hero1StatKnowledge: db 1 987.P3Hero1StatSpellDamage: db 1 988.P3HeroSkills: db 16,0,0,0,0,0989.P3HeroLevel: db 1990.P3EarthSpells: db %0000 0000 991.P3FireSpells: db %0000 0000992.P3AirSpells: db %0000 0000993.P3WaterSpells: db %0000 0000994.P3AllSchoolsSpells: db %0000 0000995.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 996.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont997.P3HeroDYDX: dw $ffff 999.P4hero1y: db 11000.P4hero1x: db 11001.P4hero1xp: dw 0 1002.P4hero1move: db 20,201003.P4hero1mana: dw 10,101004.P4hero1manarec:db 5 1005.P4hero1status: db 255 1006.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1007.P4Hero1StatAttack: db 11008.P4Hero1StatDefense: db 21009.P4Hero1StatKnowledge: db 1 1010.P4Hero1StatSpellDamage: db 1 1011.P4HeroSkills: db 10,0,0,0,0,01012.P4HeroLevel: db 11013.P4EarthSpells: db %0000 0000 1014.P4FireSpells: db %0000 00001015.P4AirSpells: db %0000 00001016.P4WaterSpells: db %0000 00001017.P4AllSchoolsSpells: db %0000 00001018.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1019.P4HeroSpecificInfo: dw HeroAddressesGoemon21020.P4HeroDYDX: dw $ffff 10241025Campaign10: 1026.StartingTowns: db 002,011,005,004 1027.TavernHeroes: db 002,019,030,032,047,015,028,000,000,0001028.Players: db 2,1,0,2,2 1029.StartingResources:1030.Gold: dw 025001031.Wood: dw 101032.Ore: dw 101033.Gems: dw 051034.Rubies: dw 051035.Castle1Player: db 11036.Castle2Player: db 21037.Castle3Player: db 11038.Castle4Player: db 11039.DaysToCompleteCampaign: db 551040.CampaignText: db "Recruit a team to stop Bill Rizer",25510411042.P1hero1y: db 11043.P1hero1x: db 11044.P1hero1xp: dw 0 1045.P1hero1move: db 20,201046.P1hero1mana: dw 10,101047.P1hero1manarec:db 5 1048.P1hero1status: db 255 1049.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1050.P1Hero1StatAttack: db 11051.P1Hero1StatDefense: db 21052.P1Hero1StatKnowledge: db 1 1053.P1Hero1StatSpellDamage: db 1 1054.P1HeroSkills: db 10,0,0,0,0,01055.P1HeroLevel: db 11056.P1EarthSpells: db %0000 0000 1057.P1FireSpells: db %0000 00001058.P1AirSpells: db %0000 00001059.P1WaterSpells: db %0000 00001060.P1AllSchoolsSpells: db %0000 00001061.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1062.P1HeroSpecificInfo: dw HeroAddressesBillRizer1063.P1HeroDYDX: dw $ffff 1065.P2hero1y: db 11066.P2hero1x: db 11067.P2hero1xp: dw 0 1068.P2hero1move: db 20,201069.P2hero1mana: dw 80,801070.P2hero1manarec:db 5 1071.P2hero1status: db 2 1072.P2Hero1Units: db ContraGroupBUnitLevel1Number | dw ContraGroupBUnitLevel1Growth | db ContraGroupBUnitLevel2Number | dw ContraGroupBUnitLevel2Growth | db ContraGroupBUnitLevel3Number | dw 002 | db ContraGroupBUnitLevel4Number | dw 002 | db ContraGroupBUnitLevel5Number | dw 002 | db ContraGroupBUnitLevel6Number | dw 003 1073.P2Hero1StatAttack: db 61074.P2Hero1StatDefense: db 71075.P2Hero1StatKnowledge: db 8 1076.P2Hero1StatSpellDamage: db 11 1077.P2HeroSkills: db 10,0,0,0,0,01078.P2HeroLevel: db 151079.P2EarthSpells: db %0000 1111 1080.P2FireSpells: db %0000 11111081.P2AirSpells: db %0000 11111082.P2WaterSpells: db %0000 11111083.P2AllSchoolsSpells: db %0000 11111084.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1085.P2HeroSpecificInfo: dw HeroAddressesBillRizer1086.P2HeroDYDX: dw $ffff 1088.P3hero1y: db 11089.P3hero1x: db 11090.P3hero1xp: dw 0 1091.P3hero1move: db 20,201092.P3hero1mana: dw 10,101093.P3hero1manarec:db 5 1094.P3hero1status: db 255 1095.P3Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db DragonSlayerUnitLevel3Number | dw DragonSlayerUnitLevel3Growth | db DragonSlayerUnitLevel4Number | dw DragonSlayerUnitLevel4Growth | db DragonSlayerUnitLevel5Number | dw DragonSlayerUnitLevel5Growth | db 000 | dw 000 1096.P3Hero1StatAttack: db 11097.P3Hero1StatDefense: db 21098.P3Hero1StatKnowledge: db 1 1099.P3Hero1StatSpellDamage: db 1 1100.P3HeroSkills: db 10,0,0,0,0,01101.P3HeroLevel: db 11102.P3EarthSpells: db %0000 0000 1103.P3FireSpells: db %0000 00001104.P3AirSpells: db %0000 00001105.P3WaterSpells: db %0000 00001106.P3AllSchoolsSpells: db %0000 00001107.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1108.P3HeroSpecificInfo: dw HeroAddressesPochi1109.P3HeroDYDX: dw $ffff 1111.P4hero1y: db 11112.P4hero1x: db 11113.P4hero1xp: dw 0 1114.P4hero1move: db 20,201115.P4hero1mana: dw 10,101116.P4hero1manarec:db 5 1117.P4hero1status: db 255 1118.P4Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1119.P4Hero1StatAttack: db 11120.P4Hero1StatDefense: db 21121.P4Hero1StatKnowledge: db 1 1122.P4Hero1StatSpellDamage: db 1 1123.P4HeroSkills: db 16,0,0,0,0,01124.P4HeroLevel: db 11125.P4EarthSpells: db %0000 0000 1126.P4FireSpells: db %0000 00001127.P4AirSpells: db %0000 00001128.P4WaterSpells: db %0000 00001129.P4AllSchoolsSpells: db %0000 00001130.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1131.P4HeroSpecificInfo: dw HeroAddressesSimonBelmont1132.P4HeroDYDX: dw $ffff 11371138Campaign11: 1139.StartingTowns: db 004,005,009,000 1140.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0001141.Players: db 3,1,0,0,2 1142.StartingResources:1143.Gold: dw 65001144.Wood: dw 201145.Ore: dw 151146.Gems: dw 101147.Rubies: dw 081148.Castle1Player: db 11149.Castle2Player: db 21150.Castle3Player: db 31151.Castle4Player: db 2551152.DaysToCompleteCampaign: db 901153.CampaignText: db "Capture the two vital strongholds",25511541155.P1hero1y: db 11156.P1hero1x: db 11157.P1hero1xp: dw 0 1158.P1hero1move: db 20,201159.P1hero1mana: dw 10,101160.P1hero1manarec:db 5 1161.P1hero1status: db 2 1162.P1Hero1Units: db UsasUnitLevel1Number | dw UsasUnitLevel1Growth | db UsasUnitLevel2Number | dw UsasUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1163.P1Hero1StatAttack: db 11164.P1Hero1StatDefense: db 21165.P1Hero1StatKnowledge: db 1 1166.P1Hero1StatSpellDamage: db 1 1167.P1HeroSkills: db 10,0,0,0,0,01168.P1HeroLevel: db 11169.P1EarthSpells: db %0000 0000 1170.P1FireSpells: db %0000 00001171.P1AirSpells: db %0000 00001172.P1WaterSpells: db %0000 00001173.P1AllSchoolsSpells: db %0000 00001174.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1175.P1HeroSpecificInfo: dw HeroAddressesFray1176.P1HeroDYDX: dw $ffff 1178.P2hero1y: db 11179.P2hero1x: db 11180.P2hero1xp: dw 0 1181.P2hero1move: db 20,201182.P2hero1mana: dw 80,801183.P2hero1manarec:db 5 1184.P2hero1status: db 2 1185.P2Hero1Units: db GoemonUnitLevel1Number | dw 001 | db GoemonUnitLevel2Number | dw 001 | db GoemonUnitLevel3Number | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1186.P2Hero1StatAttack: db 61187.P2Hero1StatDefense: db 71188.P2Hero1StatKnowledge: db 8 1189.P2Hero1StatSpellDamage: db 11 1190.P2HeroSkills: db 10,0,0,0,0,01191.P2HeroLevel: db 151192.P2EarthSpells: db %0000 1111 1193.P2FireSpells: db %0000 11111194.P2AirSpells: db %0000 11111195.P2WaterSpells: db %0000 11111196.P2AllSchoolsSpells: db %0000 11111197.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1198.P2HeroSpecificInfo: dw HeroAddressesLatok1199.P2HeroDYDX: dw $ffff 1201.P3hero1y: db 11202.P3hero1x: db 11203.P3hero1xp: dw 0 1204.P3hero1move: db 20,201205.P3hero1mana: dw 10,101206.P3hero1manarec:db 5 1207.P3hero1status: db 2 1208.P3Hero1Units: db GolvelliusUnitLevel1Number | dw 001 | db GolvelliusUnitLevel2Number | dw 001 | db GolvelliusUnitLevel5Number | dw 01 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1209.P3Hero1StatAttack: db 11210.P3Hero1StatDefense: db 21211.P3Hero1StatKnowledge: db 1 1212.P3Hero1StatSpellDamage: db 1 1213.P3HeroSkills: db 10,0,0,0,0,01214.P3HeroLevel: db 11215.P3EarthSpells: db %0000 0000 1216.P3FireSpells: db %0000 00001217.P3AirSpells: db %0000 00001218.P3WaterSpells: db %0000 00001219.P3AllSchoolsSpells: db %0000 00001220.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1221.P3HeroSpecificInfo: dw HeroAddressesUndeadline11222.P3HeroDYDX: dw $ffff 1224.P4hero1y: db 11225.P4hero1x: db 11226.P4hero1xp: dw 0 1227.P4hero1move: db 20,201228.P4hero1mana: dw 10,101229.P4hero1manarec:db 5 1230.P4hero1status: db 255 1231.P4Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1232.P4Hero1StatAttack: db 11233.P4Hero1StatDefense: db 21234.P4Hero1StatKnowledge: db 1 1235.P4Hero1StatSpellDamage: db 1 1236.P4HeroSkills: db 16,0,0,0,0,01237.P4HeroLevel: db 11238.P4EarthSpells: db %0000 0000 1239.P4FireSpells: db %0000 00001240.P4AirSpells: db %0000 00001241.P4WaterSpells: db %0000 00001242.P4AllSchoolsSpells: db %0000 00001243.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1244.P4HeroSpecificInfo: dw HeroAddressesSimonBelmont1245.P4HeroDYDX: dw $ffff 12491250Campaign12: 1251.StartingTowns: db 010,008,011,009 1252.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0251253.Players: db 4,1,0,0,0 1254.StartingResources:1255.Gold: dw 100001256.Wood: dw 201257.Ore: dw 201258.Gems: dw 101259.Rubies: dw 101260.Castle1Player: db 11261.Castle2Player: db 21262.Castle3Player: db 31263.Castle4Player: db 41264.DaysToCompleteCampaign: db 1101265.CampaignText: db "    Defeat the southern foes     ",25512661267.P1hero1y: db 11268.P1hero1x: db 11269.P1hero1xp: dw 0 1270.P1hero1move: db 20,201271.P1hero1mana: dw 10,101272.P1hero1manarec:db 5 1273.P1hero1status: db 2 1274.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1275.P1Hero1StatAttack: db 11276.P1Hero1StatDefense: db 21277.P1Hero1StatKnowledge: db 1 1278.P1Hero1StatSpellDamage: db 1 1279.P1HeroSkills: db 10,0,0,0,0,01280.P1HeroLevel: db 11281.P1EarthSpells: db %0000 0000 1282.P1FireSpells: db %0000 00001283.P1AirSpells: db %0000 00001284.P1WaterSpells: db %0000 00001285.P1AllSchoolsSpells: db %0000 00001286.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1287.P1HeroSpecificInfo: dw HeroAddressesSnake11288.P1HeroDYDX: dw $ffff 1290.P2hero1y: db 11291.P2hero1x: db 11292.P2hero1xp: dw 0 1293.P2hero1move: db 20,201294.P2hero1mana: dw 80,801295.P2hero1manarec:db 5 1296.P2hero1status: db 2 1297.P2Hero1Units: db GolvelliusUnitLevel1Number | dw 018 | db GolvelliusUnitLevel2Number | dw 024 | db GolvelliusUnitLevel5Number | dw 09 | db 000 | dw 000 | db GolvelliusUnitLevel4Number | dw 020 | db 000 | dw 000 1298.P2Hero1StatAttack: db 61299.P2Hero1StatDefense: db 71300.P2Hero1StatKnowledge: db 8 1301.P2Hero1StatSpellDamage: db 11 1302.P2HeroSkills: db 10,0,0,0,0,01303.P2HeroLevel: db 151304.P2EarthSpells: db %0000 1111 1305.P2FireSpells: db %0000 11111306.P2AirSpells: db %0000 11111307.P2WaterSpells: db %0000 11111308.P2AllSchoolsSpells: db %0000 11111309.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1310.P2HeroSpecificInfo: dw HeroAddressesBigBoss1311.P2HeroDYDX: dw $ffff 1313.P3hero1y: db 11314.P3hero1x: db 11315.P3hero1xp: dw 0 1316.P3hero1move: db 20,201317.P3hero1mana: dw 10,101318.P3hero1manarec:db 5 1319.P3hero1status: db 255 1320.P3Hero1Units: db GolvelliusUnitLevel1Number | dw 001 | db GolvelliusUnitLevel2Number | dw 001 | db GolvelliusUnitLevel5Number | dw 01 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1321.P3Hero1StatAttack: db 11322.P3Hero1StatDefense: db 21323.P3Hero1StatKnowledge: db 1 1324.P3Hero1StatSpellDamage: db 1 1325.P3HeroSkills: db 10,0,0,0,0,01326.P3HeroLevel: db 11327.P3EarthSpells: db %0000 0000 1328.P3FireSpells: db %0000 00001329.P3AirSpells: db %0000 00001330.P3WaterSpells: db %0000 00001331.P3AllSchoolsSpells: db %0000 00001332.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1333.P3HeroSpecificInfo: dw HeroAddressesUndeadline11334.P3HeroDYDX: dw $ffff 1336.P4hero1y: db 11337.P4hero1x: db 11338.P4hero1xp: dw 0 1339.P4hero1move: db 20,201340.P4hero1mana: dw 10,101341.P4hero1manarec:db 5 1342.P4hero1status: db 2 1343.P4Hero1Units: db KingKongUnitLevel6Number | dw 006 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db KingKongUnitLevel5Number | dw 007 1344.P4Hero1StatAttack: db 11345.P4Hero1StatDefense: db 21346.P4Hero1StatKnowledge: db 1 1347.P4Hero1StatSpellDamage: db 1 1348.P4HeroSkills: db 16,0,0,0,0,01349.P4HeroLevel: db 11350.P4EarthSpells: db %0000 0000 1351.P4FireSpells: db %0000 00001352.P4AirSpells: db %0000 00001353.P4WaterSpells: db %0000 00001354.P4AllSchoolsSpells: db %0000 00001355.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1356.P4HeroSpecificInfo: dw HeroAddressesUltraBox1357.P4HeroDYDX: dw $ffff 13591360Campaign13: 1361.StartingTowns: db 010,003,000,000 1362.TavernHeroes: db 000,009,007,000,000,000,000,000,000,0001363.Players: db 2,1,0,2,2 1364.StartingResources:1365.Gold: dw 100001366.Wood: dw 201367.Ore: dw 201368.Gems: dw 101369.Rubies: dw 101370.Castle1Player: db 11371.Castle2Player: db 21372.Castle3Player: db 2551373.Castle4Player: db 2551374.DaysToCompleteCampaign: db 1101375.CampaignText: db "    Crush the sorcerer Dino      ",25513761377.P1hero1y: db 11378.P1hero1x: db 11379.P1hero1xp: dw 0 1380.P1hero1move: db 20,201381.P1hero1mana: dw 10,101382.P1hero1manarec:db 5 1383.P1hero1status: db 255 1384.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1385.P1Hero1StatAttack: db 11386.P1Hero1StatDefense: db 21387.P1Hero1StatKnowledge: db 1 1388.P1Hero1StatSpellDamage: db 1 1389.P1HeroSkills: db 10,0,0,0,0,01390.P1HeroLevel: db 11391.P1EarthSpells: db %0000 0000 1392.P1FireSpells: db %0000 00001393.P1AirSpells: db %0000 00001394.P1WaterSpells: db %0000 00001395.P1AllSchoolsSpells: db %0000 00001396.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1397.P1HeroSpecificInfo: dw HeroAddressesSnake11398.P1HeroDYDX: dw $ffff 1400.P2hero1y: db 11401.P2hero1x: db 11402.P2hero1xp: dw 0 1403.P2hero1move: db 20,201404.P2hero1mana: dw 80,801405.P2hero1manarec:db 5 1406.P2hero1status: db 2 1407.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw 018 | db SDSnatcherUnitLevel2Number | dw 014 | db SDSnatcherUnitLevel5Number | dw 09 | db 000 | dw 000 | db SDSnatcherUnitLevel4Number | dw 010 | db SDSnatcherUnitLevel6Number | dw 010 1408.P2Hero1StatAttack: db 61409.P2Hero1StatDefense: db 71410.P2Hero1StatKnowledge: db 8 1411.P2Hero1StatSpellDamage: db 11 1412.P2HeroSkills: db 10,0,0,0,0,01413.P2HeroLevel: db 151414.P2EarthSpells: db %0000 1111 1415.P2FireSpells: db %0000 11111416.P2AirSpells: db %0000 11111417.P2WaterSpells: db %0000 11111418.P2AllSchoolsSpells: db %0000 11111419.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1420.P2HeroSpecificInfo: dw HeroAddressesUndeadline31421.P2HeroDYDX: dw $ffff 1423.P3hero1y: db 11424.P3hero1x: db 11425.P3hero1xp: dw 0 1426.P3hero1move: db 20,201427.P3hero1mana: dw 10,101428.P3hero1manarec:db 5 1429.P3hero1status: db 255 1430.P3Hero1Units: db GolvelliusUnitLevel1Number | dw 001 | db GolvelliusUnitLevel2Number | dw 001 | db GolvelliusUnitLevel5Number | dw 01 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1431.P3Hero1StatAttack: db 11432.P3Hero1StatDefense: db 21433.P3Hero1StatKnowledge: db 1 1434.P3Hero1StatSpellDamage: db 1 1435.P3HeroSkills: db 10,0,0,0,0,01436.P3HeroLevel: db 11437.P3EarthSpells: db %0000 0000 1438.P3FireSpells: db %0000 00001439.P3AirSpells: db %0000 00001440.P3WaterSpells: db %0000 00001441.P3AllSchoolsSpells: db %0000 00001442.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1443.P3HeroSpecificInfo: dw HeroAddressesUndeadline11444.P3HeroDYDX: dw $ffff 1446.P4hero1y: db 11447.P4hero1x: db 11448.P4hero1xp: dw 0 1449.P4hero1move: db 20,201450.P4hero1mana: dw 10,101451.P4hero1manarec:db 5 1452.P4hero1status: db 255 1453.P4Hero1Units: db KingKongUnitLevel6Number | dw 006 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db KingKongUnitLevel5Number | dw 007 1454.P4Hero1StatAttack: db 11455.P4Hero1StatDefense: db 21456.P4Hero1StatKnowledge: db 1 1457.P4Hero1StatSpellDamage: db 1 1458.P4HeroSkills: db 16,0,0,0,0,01459.P4HeroLevel: db 11460.P4EarthSpells: db %0000 0000 1461.P4FireSpells: db %0000 00001462.P4AirSpells: db %0000 00001463.P4WaterSpells: db %0000 00001464.P4AllSchoolsSpells: db %0000 00001465.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1466.P4HeroSpecificInfo: dw HeroAddressesUltraBox1467.P4HeroDYDX: dw $ffff 14711472Campaign14: 1473.StartingTowns: db 012,011,010,009 1474.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0001475.Players: db 4,1,0,0,0 1476.StartingResources:1477.Gold: dw 100001478.Wood: dw 201479.Ore: dw 201480.Gems: dw 101481.Rubies: dw 101482.Castle1Player: db 11483.Castle2Player: db 21484.Castle3Player: db 31485.Castle4Player: db 41486.DaysToCompleteCampaign: db 801487.CampaignText: db "Triumph over the three kingdoms  ",25514891490.P1hero1y: db 11491.P1hero1x: db 11492.P1hero1xp: dw 0 1493.P1hero1move: db 20,201494.P1hero1mana: dw 10,101495.P1hero1manarec:db 5 1496.P1hero1status: db 2 1497.P1Hero1Units: db AkanbeDragonGroupAUnitLevel1Number | dw AkanbeDragonGroupAUnitLevel1Growth | db AkanbeDragonGroupAUnitLevel2Number | dw AkanbeDragonGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1498.P1Hero1StatAttack: db 11499.P1Hero1StatDefense: db 21500.P1Hero1StatKnowledge: db 1 1501.P1Hero1StatSpellDamage: db 1 1502.P1HeroSkills: db 10,0,0,0,0,01503.P1HeroLevel: db 11504.P1EarthSpells: db %0000 0000 1505.P1FireSpells: db %0000 00001506.P1AirSpells: db %0000 00001507.P1WaterSpells: db %0000 00001508.P1AllSchoolsSpells: db %0000 00001509.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1510.P1HeroSpecificInfo: dw HeroAddressesAshguine1511.P1HeroDYDX: dw $ffff 1513.P2hero1y: db 11514.P2hero1x: db 11515.P2hero1xp: dw 0 1516.P2hero1move: db 20,201517.P2hero1mana: dw 80,801518.P2hero1manarec:db 5 1519.P2hero1status: db 2 1520.P2Hero1Units: db ContraGroupBUnitLevel1Number | dw ContraGroupBUnitLevel1Growth | db ContraGroupBUnitLevel2Number | dw ContraGroupBUnitLevel2Growth | db ContraGroupBUnitLevel3Number | dw ContraGroupBUnitLevel3Growth | db ContraGroupBUnitLevel4Number | dw 020 | db 000 | dw 000 | db 000 | dw 000 1521.P2Hero1StatAttack: db 61522.P2Hero1StatDefense: db 71523.P2Hero1StatKnowledge: db 8 1524.P2Hero1StatSpellDamage: db 11 1525.P2HeroSkills: db 10,0,0,0,0,01526.P2HeroLevel: db 151527.P2EarthSpells: db %0000 1111 1528.P2FireSpells: db %0000 11111529.P2AirSpells: db %0000 11111530.P2WaterSpells: db %0000 11111531.P2AllSchoolsSpells: db %0000 11111532.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1533.P2HeroSpecificInfo: dw HeroAddressesRuth1534.P2HeroDYDX: dw $ffff 1536.P3hero1y: db 11537.P3hero1x: db 11538.P3hero1xp: dw 0 1539.P3hero1move: db 20,201540.P3hero1mana: dw 10,101541.P3hero1manarec:db 5 1542.P3hero1status: db 2 1543.P3Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel6Number | dw 08 | db 000 | dw 000 | db 000 | dw 000 | db ContraGroupAUnitLevel5Number | dw 005 | db ContraGroupAUnitLevel6Number | dw 002 1544.P3Hero1StatAttack: db 11545.P3Hero1StatDefense: db 21546.P3Hero1StatKnowledge: db 1 1547.P3Hero1StatSpellDamage: db 1 1548.P3HeroSkills: db 10,0,0,0,0,01549.P3HeroLevel: db 11550.P3EarthSpells: db %0000 0000 1551.P3FireSpells: db %0000 00001552.P3AirSpells: db %0000 00001553.P3WaterSpells: db %0000 00001554.P3AllSchoolsSpells: db %0000 00001555.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1556.P3HeroSpecificInfo: dw HeroAddressesYoungNoble1557.P3HeroDYDX: dw $ffff 1559.P4hero1y: db 11560.P4hero1x: db 11561.P4hero1xp: dw 0 1562.P4hero1move: db 20,201563.P4hero1mana: dw 10,101564.P4hero1manarec:db 5 1565.P4hero1status: db 2 1566.P4Hero1Units: db KingKongUnitLevel4Number | dw 006 | db GolvelliusUnitLevel5Number | dw 013 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db KingKongUnitLevel3Number | dw 007 1567.P4Hero1StatAttack: db 11568.P4Hero1StatDefense: db 21569.P4Hero1StatKnowledge: db 1 1570.P4Hero1StatSpellDamage: db 1 1571.P4HeroSkills: db 16,0,0,0,0,01572.P4HeroLevel: db 11573.P4EarthSpells: db %0000 0000 1574.P4FireSpells: db %0000 00001575.P4AirSpells: db %0000 00001576.P4WaterSpells: db %0000 00001577.P4AllSchoolsSpells: db %0000 00001578.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1579.P4HeroSpecificInfo: dw HeroAddressesPocky1580.P4HeroDYDX: dw $ffff 15841585Campaign15: 1586.StartingTowns: db 012,011,010,009 1587.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0001588.Players: db 4,1,0,0,0 1589.StartingResources:1590.Gold: dw 100001591.Wood: dw 201592.Ore: dw 201593.Gems: dw 101594.Rubies: dw 101595.Castle1Player: db 11596.Castle2Player: db 21597.Castle3Player: db 31598.Castle4Player: db 41599.DaysToCompleteCampaign: db 801600.CampaignText: db "Liberate three kingdoms from evil",25516011602.P1hero1y: db 11603.P1hero1x: db 11604.P1hero1xp: dw 0 1605.P1hero1move: db 20,201606.P1hero1mana: dw 10,101607.P1hero1manarec:db 5 1608.P1hero1status: db 2 1609.P1Hero1Units: db AkanbeDragonGroupAUnitLevel1Number | dw AkanbeDragonGroupAUnitLevel1Growth | db AkanbeDragonGroupAUnitLevel2Number | dw AkanbeDragonGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1610.P1Hero1StatAttack: db 11611.P1Hero1StatDefense: db 21612.P1Hero1StatKnowledge: db 1 1613.P1Hero1StatSpellDamage: db 1 1614.P1HeroSkills: db 10,0,0,0,0,01615.P1HeroLevel: db 11616.P1EarthSpells: db %0000 0000 1617.P1FireSpells: db %0000 00001618.P1AirSpells: db %0000 00001619.P1WaterSpells: db %0000 00001620.P1AllSchoolsSpells: db %0000 00001621.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1622.P1HeroSpecificInfo: dw HeroAddressesLoganSerios1623.P1HeroDYDX: dw $ffff 1625.P2hero1y: db 11626.P2hero1x: db 11627.P2hero1xp: dw 0 1628.P2hero1move: db 20,201629.P2hero1mana: dw 80,801630.P2hero1manarec:db 5 1631.P2hero1status: db 2 1632.P2Hero1Units: db 162 | dw 28 | db 163 | dw 32 | db 000 | dw 000 | db 000 | dw 000 | db 163 | dw 030 | db 000 | dw 000 1633.P2Hero1StatAttack: db 61634.P2Hero1StatDefense: db 71635.P2Hero1StatKnowledge: db 8 1636.P2Hero1StatSpellDamage: db 11 1637.P2HeroSkills: db 10,0,0,0,0,01638.P2HeroLevel: db 151639.P2EarthSpells: db %0000 1111 1640.P2FireSpells: db %0000 11111641.P2AirSpells: db %0000 11111642.P2WaterSpells: db %0000 11111643.P2AllSchoolsSpells: db %0000 11111644.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1645.P2HeroSpecificInfo: dw HeroAddressesAshguine1646.P2HeroDYDX: dw $ffff 1648.P3hero1y: db 11649.P3hero1x: db 11650.P3hero1xp: dw 0 1651.P3hero1move: db 20,201652.P3hero1mana: dw 10,101653.P3hero1manarec:db 5 1654.P3hero1status: db 2 1655.P3Hero1Units: db 161 | dw 11 | db 161 | dw 10 | db 161 | dw 040 | db 160 | dw 010 | db 160 | dw 015 | db 160 | dw 022 1656.P3Hero1StatAttack: db 11657.P3Hero1StatDefense: db 21658.P3Hero1StatKnowledge: db 1 1659.P3Hero1StatSpellDamage: db 1 1660.P3HeroSkills: db 10,0,0,0,0,01661.P3HeroLevel: db 11662.P3EarthSpells: db %0000 0000 1663.P3FireSpells: db %0000 00001664.P3AirSpells: db %0000 00001665.P3WaterSpells: db %0000 00001666.P3AllSchoolsSpells: db %0000 00001667.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1668.P3HeroSpecificInfo: dw HeroAddressesKelesisTheCook1669.P3HeroDYDX: dw $ffff 1671.P4hero1y: db 11672.P4hero1x: db 11673.P4hero1xp: dw 0 1674.P4hero1move: db 20,201675.P4hero1mana: dw 10,101676.P4hero1manarec:db 5 1677.P4hero1status: db 2 1678.P4Hero1Units: db 164 | dw 016 | db 000 | dw 000 | db 000 | dw 000 | db 164 | dw 002 | db 164 | dw 020 | db 164 | dw 003 1679.P4Hero1StatAttack: db 11680.P4Hero1StatDefense: db 21681.P4Hero1StatKnowledge: db 1 1682.P4Hero1StatSpellDamage: db 1 1683.P4HeroSkills: db 16,0,0,0,0,01684.P4HeroLevel: db 11685.P4EarthSpells: db %0000 0000 1686.P4FireSpells: db %0000 00001687.P4AirSpells: db %0000 00001688.P4WaterSpells: db %0000 00001689.P4AllSchoolsSpells: db %0000 00001690.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1691.P4HeroSpecificInfo: dw HeroAddressesLolo1692.P4HeroDYDX: dw $ffff 16971698Campaign16: 1699.StartingTowns: db 012,007,012,002 1700.TavernHeroes: db 036,000,038,000,000,000,000,000,000,0001701.Players: db 4,1,0,0,0 1702.StartingResources:1703.Gold: dw 100001704.Wood: dw 201705.Ore: dw 201706.Gems: dw 101707.Rubies: dw 101708.Castle1Player: db 11709.Castle2Player: db 21710.Castle3Player: db 31711.Castle4Player: db 41712.DaysToCompleteCampaign: db 801713.CampaignText: db "  Partner to claim three forts   ",25517141715.P1hero1y: db 11716.P1hero1x: db 11717.P1hero1xp: dw 0 1718.P1hero1move: db 20,201719.P1hero1mana: dw 10,101720.P1hero1manarec:db 5 1721.P1hero1status: db 255 1722.P1Hero1Units: db 166 | dw 10 | db 000 | dw 000 | db 166 | dw 015 | db 000 | dw 000 | db 166 | dw 020 | db 166 | dw 030 1723.P1Hero1StatAttack: db 11724.P1Hero1StatDefense: db 21725.P1Hero1StatKnowledge: db 1 1726.P1Hero1StatSpellDamage: db 1 1727.P1HeroSkills: db 10,0,0,0,0,01728.P1HeroLevel: db 11729.P1EarthSpells: db %0000 0000 1730.P1FireSpells: db %0000 00001731.P1AirSpells: db %0000 00001732.P1WaterSpells: db %0000 00001733.P1AllSchoolsSpells: db %0000 00001734.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1735.P1HeroSpecificInfo: dw HeroAddressesKelesisTheCook1736.P1HeroDYDX: dw $ffff 1738.P2hero1y: db 11739.P2hero1x: db 11740.P2hero1xp: dw 0 1741.P2hero1move: db 20,201742.P2hero1mana: dw 80,801743.P2hero1manarec:db 5 1744.P2hero1status: db 2 1745.P2Hero1Units: db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+1 | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+2 | db 000 | dw 000 | db 000 | dw 000 | db PsychoWorldUnitLevel6Number | dw 010 1746.P2Hero1StatAttack: db 61747.P2Hero1StatDefense: db 71748.P2Hero1StatKnowledge: db 8 1749.P2Hero1StatSpellDamage: db 11 1750.P2HeroSkills: db 10,0,0,0,0,01751.P2HeroLevel: db 151752.P2EarthSpells: db %0000 1111 1753.P2FireSpells: db %0000 11111754.P2AirSpells: db %0000 11111755.P2WaterSpells: db %0000 11111756.P2AllSchoolsSpells: db %0000 11111757.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1758.P2HeroSpecificInfo: dw HeroAddressesPsychoWorld1759.P2HeroDYDX: dw $ffff 1761.P3hero1y: db 11762.P3hero1x: db 11763.P3hero1xp: dw 0 1764.P3hero1move: db 20,201765.P3hero1mana: dw 10,101766.P3hero1manarec:db 5 1767.P3hero1status: db 2 1768.P3Hero1Units: db Ys3UnitLevel1Number | dw Ys3UnitLevel1Growth | db Ys3UnitLevel2Number | dw Ys3UnitLevel2Growth | db Ys3UnitLevel3Number | dw 010 | db Ys3UnitLevel4Number | dw 09 | db Ys3UnitLevel5Number | dw 11 | db Ys3UnitLevel6Number | dw 6 1769.P3Hero1StatAttack: db 11770.P3Hero1StatDefense: db 21771.P3Hero1StatKnowledge: db 1 1772.P3Hero1StatSpellDamage: db 1 1773.P3HeroSkills: db 10,0,0,0,0,01774.P3HeroLevel: db 11775.P3EarthSpells: db %0000 0000 1776.P3FireSpells: db %0000 00001777.P3AirSpells: db %0000 00001778.P3WaterSpells: db %0000 00001779.P3AllSchoolsSpells: db %0000 00001780.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1781.P3HeroSpecificInfo: dw HeroAddressesAdol1782.P3HeroDYDX: dw $ffff 1784.P4hero1y: db 11785.P4hero1x: db 11786.P4hero1xp: dw 0 1787.P4hero1move: db 20,201788.P4hero1mana: dw 10,101789.P4hero1manarec:db 5 1790.P4hero1status: db 2 1791.P4Hero1Units: db 169 | dw 016 | db 169 | dw 027 | db 169 | dw 030 | db 000 | dw 000 | db 169 | dw 020 | db 169 | dw 003 1792.P4Hero1StatAttack: db 11793.P4Hero1StatDefense: db 21794.P4Hero1StatKnowledge: db 1 1795.P4Hero1StatSpellDamage: db 1 1796.P4HeroSkills: db 16,0,0,0,0,01797.P4HeroLevel: db 11798.P4EarthSpells: db %0000 0000 1799.P4FireSpells: db %0000 00001800.P4AirSpells: db %0000 00001801.P4WaterSpells: db %0000 00001802.P4AllSchoolsSpells: db %0000 00001803.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1804.P4HeroSpecificInfo: dw HeroAddressesLoganSerios1805.P4HeroDYDX: dw $ffff 18081809Campaign17: 1810.StartingTowns: db 013,012,011,010 1811.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0001812.Players: db 4,1,0,0,0 1813.StartingResources:1814.Gold: dw 100001815.Wood: dw 201816.Ore: dw 201817.Gems: dw 101818.Rubies: dw 101819.Castle1Player: db 11820.Castle2Player: db 21821.Castle3Player: db 31822.Castle4Player: db 41823.DaysToCompleteCampaign: db 751824.CampaignText: db " Crush the three wicked druids   ",25518251826.P1hero1y: db 11827.P1hero1x: db 11828.P1hero1xp: dw 0 1829.P1hero1move: db 20,201830.P1hero1mana: dw 10,101831.P1hero1manarec:db 5 1832.P1hero1status: db 2 1833.P1Hero1Units: db AkanbeDragonGroupBUnitLevel1Number | dw 10 | db AkanbeDragonGroupBUnitLevel2Number | dw 006 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1834.P1Hero1StatAttack: db 11835.P1Hero1StatDefense: db 21836.P1Hero1StatKnowledge: db 1 1837.P1Hero1StatSpellDamage: db 1 1838.P1HeroSkills: db 10,0,0,0,0,01839.P1HeroLevel: db 11840.P1EarthSpells: db %0000 0000 1841.P1FireSpells: db %0000 00001842.P1AirSpells: db %0000 00001843.P1WaterSpells: db %0000 00001844.P1AllSchoolsSpells: db %0000 00001845.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1846.P1HeroSpecificInfo: dw HeroAddressesYoungNoble1847.P1HeroDYDX: dw $ffff 1849.P2hero1y: db 501850.P2hero1x: db 501851.P2hero1xp: dw 0 1852.P2hero1move: db 20,201853.P2hero1mana: dw 80,801854.P2hero1manarec:db 5 1855.P2hero1status: db 2 1856.P2Hero1Units: db 166 | dw 10 | db 000 | dw 000 | db 166 | dw 015 | db 000 | dw 000 | db 166 | dw 020 | db 166 | dw 020 1857.P2Hero1StatAttack: db 61858.P2Hero1StatDefense: db 71859.P2Hero1StatKnowledge: db 8 1860.P2Hero1StatSpellDamage: db 11 1861.P2HeroSkills: db 10,0,0,0,0,01862.P2HeroLevel: db 151863.P2EarthSpells: db %0000 1111 1864.P2FireSpells: db %0000 11111865.P2AirSpells: db %0000 11111866.P2WaterSpells: db %0000 11111867.P2AllSchoolsSpells: db %0000 11111868.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1869.P2HeroSpecificInfo: dw HeroAddressesDruid1870.P2HeroDYDX: dw $ffff 1872.P3hero1y: db 11873.P3hero1x: db 11874.P3hero1xp: dw 0 1875.P3hero1move: db 20,201876.P3hero1mana: dw 10,101877.P3hero1manarec:db 5 1878.P3hero1status: db 2 1879.P3Hero1Units: db 167 | dw 21 | db 168 | dw 40 | db 161 | dw 030 | db 168 | dw 010 | db 160 | dw 015 | db 180 | dw 022 1880.P3Hero1StatAttack: db 11881.P3Hero1StatDefense: db 21882.P3Hero1StatKnowledge: db 1 1883.P3Hero1StatSpellDamage: db 1 1884.P3HeroSkills: db 10,0,0,0,0,01885.P3HeroLevel: db 11886.P3EarthSpells: db %0000 0000 1887.P3FireSpells: db %0000 00001888.P3AirSpells: db %0000 00001889.P3WaterSpells: db %0000 00001890.P3AllSchoolsSpells: db %0000 00001891.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1892.P3HeroSpecificInfo: dw HeroAddressesDruid1893.P3HeroDYDX: dw $ffff 1895.P4hero1y: db 11896.P4hero1x: db 11897.P4hero1xp: dw 0 1898.P4hero1move: db 20,201899.P4hero1mana: dw 10,101900.P4hero1manarec:db 5 1901.P4hero1status: db 2 1902.P4Hero1Units: db 170 | dw 006 | db 170 | dw 017 | db 170 | dw 001 | db 170 | dw 001 | db 170 | dw 010 | db 170 | dw 003 1903.P4Hero1StatAttack: db 11904.P4Hero1StatDefense: db 21905.P4Hero1StatKnowledge: db 1 1906.P4Hero1StatSpellDamage: db 1 1907.P4HeroSkills: db 16,0,0,0,0,01908.P4HeroLevel: db 11909.P4EarthSpells: db %0000 0000 1910.P4FireSpells: db %0000 00001911.P4AirSpells: db %0000 00001912.P4WaterSpells: db %0000 00001913.P4AllSchoolsSpells: db %0000 00001914.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1915.P4HeroSpecificInfo: dw HeroAddressesDruid1916.P4HeroDYDX: dw $ffff 19211922Campaign18: 1923.StartingTowns: db 008,001,002,000 1924.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0001925.Players: db 3,1,0,0,2 1926.StartingResources:1927.Gold: dw 005001928.Wood: dw 051929.Ore: dw 051930.Gems: dw 021931.Rubies: dw 021932.Castle1Player: db 11933.Castle2Player: db 21934.Castle3Player: db 31935.Castle4Player: db 2551936.DaysToCompleteCampaign: db 801937.CampaignText: db "  Capture the two strongholds    ",25519381939.P1hero1y: db 11940.P1hero1x: db 11941.P1hero1xp: dw 46001942.P1hero1move: db 20,201943.P1hero1mana: dw 20,201944.P1hero1manarec:db 5 1945.P1hero1status: db 2 1946.P1Hero1Units: db KingKongUnitLevel5Number | dw 03 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1947.P1Hero1StatAttack: db 31948.P1Hero1StatDefense: db 21949.P1Hero1StatKnowledge: db 2 1950.P1Hero1StatSpellDamage: db 2 1951.P1HeroSkills: db 1,5,8,0,0,01952.P1HeroLevel: db 51953.P1EarthSpells: db %0000 0000 1954.P1FireSpells: db %0000 00001955.P1AirSpells: db %0000 00001956.P1WaterSpells: db %0000 00001957.P1AllSchoolsSpells: db %0000 00001958.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1959.P1HeroSpecificInfo: dw HeroAddressesPocky1960.P1HeroDYDX: dw $ffff 1962.P2hero1y: db 501963.P2hero1x: db 501964.P2hero1xp: dw 0 1965.P2hero1move: db 20,201966.P2hero1mana: dw 80,801967.P2hero1manarec:db 5 1968.P2hero1status: db 2 1969.P2Hero1Units: db 171 | dw 10 | db 171 | dw 010 | db 172 | dw 025 | db 171 | dw 200 | db 171 | dw 020 | db 171 | dw 020 1970.P2Hero1StatAttack: db 61971.P2Hero1StatDefense: db 71972.P2Hero1StatKnowledge: db 8 1973.P2Hero1StatSpellDamage: db 11 1974.P2HeroSkills: db 10,0,0,0,0,01975.P2HeroLevel: db 151976.P2EarthSpells: db %0000 1111 1977.P2FireSpells: db %0000 11111978.P2AirSpells: db %0000 11111979.P2WaterSpells: db %0000 11111980.P2AllSchoolsSpells: db %0000 11111981.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1982.P2HeroSpecificInfo: dw HeroAddressesYoungNoble1983.P2HeroDYDX: dw $ffff 1985.P3hero1y: db 11986.P3hero1x: db 11987.P3hero1xp: dw 0 1988.P3hero1move: db 20,201989.P3hero1mana: dw 10,101990.P3hero1manarec:db 5 1991.P3hero1status: db 2 1992.P3Hero1Units: db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 173 | dw 060 | db 000 | dw 000 | db 000 | dw 000 1993.P3Hero1StatAttack: db 11994.P3Hero1StatDefense: db 21995.P3Hero1StatKnowledge: db 1 1996.P3Hero1StatSpellDamage: db 1 1997.P3HeroSkills: db 10,0,0,0,0,01998.P3HeroLevel: db 11999.P3EarthSpells: db %0000 0000 2000.P3FireSpells: db %0000 00002001.P3AirSpells: db %0000 00002002.P3WaterSpells: db %0000 00002003.P3AllSchoolsSpells: db %0000 00002004.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2005.P3HeroSpecificInfo: dw HeroAddressesPippols2006.P3HeroDYDX: dw $ffff 2008.P4hero1y: db 12009.P4hero1x: db 12010.P4hero1xp: dw 0 2011.P4hero1move: db 20,202012.P4hero1mana: dw 10,102013.P4hero1manarec:db 5 2014.P4hero1status: db 255 2015.P4Hero1Units: db 170 | dw 006 | db 170 | dw 017 | db 170 | dw 001 | db 170 | dw 001 | db 170 | dw 010 | db 170 | dw 003 2016.P4Hero1StatAttack: db 12017.P4Hero1StatDefense: db 22018.P4Hero1StatKnowledge: db 1 2019.P4Hero1StatSpellDamage: db 1 2020.P4HeroSkills: db 16,0,0,0,0,02021.P4HeroLevel: db 12022.P4EarthSpells: db %0000 0000 2023.P4FireSpells: db %0000 00002024.P4AirSpells: db %0000 00002025.P4WaterSpells: db %0000 00002026.P4AllSchoolsSpells: db %0000 00002027.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2028.P4HeroSpecificInfo: dw HeroAddressesDruid2029.P4HeroDYDX: dw $ffff 20322033Campaign19: 2034.StartingTowns: db 007,006,005,004 2035.TavernHeroes: db 011,022,034,045,016,070,069,071,072,0732036.Players: db 4,1,0,0,0 2037.StartingResources:2038.Gold: dw 100002039.Wood: dw 202040.Ore: dw 202041.Gems: dw 102042.Rubies: dw 102043.Castle1Player: db 12044.Castle2Player: db 22045.Castle3Player: db 32046.Castle4Player: db 42047.DaysToCompleteCampaign: db 1002048.CampaignText: db " Consolidate the four kingdoms   ",25520492050.P1hero1y: db 12051.P1hero1x: db 12052.P1hero1xp: dw 0 2053.P1hero1move: db 20,202054.P1hero1mana: dw 10,102055.P1hero1manarec:db 5 2056.P1hero1status: db 2 2057.P1Hero1Units: db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+1 | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+2 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2058.P1Hero1StatAttack: db 12059.P1Hero1StatDefense: db 22060.P1Hero1StatKnowledge: db 1 2061.P1Hero1StatSpellDamage: db 1 2062.P1HeroSkills: db 10,0,0,0,0,02063.P1HeroLevel: db 12064.P1EarthSpells: db %0000 0000 2065.P1FireSpells: db %0000 00002066.P1AirSpells: db %0000 00002067.P1WaterSpells: db %0000 00002068.P1AllSchoolsSpells: db %0000 00002069.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2070.P1HeroSpecificInfo: dw HeroAddressesLolo2071.P1HeroDYDX: dw $ffff 2073.P2hero1y: db 502074.P2hero1x: db 502075.P2hero1xp: dw 0 2076.P2hero1move: db 20,202077.P2hero1mana: dw 80,802078.P2hero1manarec:db 5 2079.P2hero1status: db 2 2080.P2Hero1Units: db 174 | dw 10 | db 174 | dw 010 | db 174 | dw 005 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2081.P2Hero1StatAttack: db 62082.P2Hero1StatDefense: db 72083.P2Hero1StatKnowledge: db 8 2084.P2Hero1StatSpellDamage: db 11 2085.P2HeroSkills: db 10,0,0,0,0,02086.P2HeroLevel: db 152087.P2EarthSpells: db %0000 1111 2088.P2FireSpells: db %0000 11112089.P2AirSpells: db %0000 11112090.P2WaterSpells: db %0000 11112091.P2AllSchoolsSpells: db %0000 11112092.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2093.P2HeroSpecificInfo: dw HeroAddressesHeiwaAndButako2094.P2HeroDYDX: dw $ffff 2096.P3hero1y: db 12097.P3hero1x: db 12098.P3hero1xp: dw 0 2099.P3hero1move: db 20,202100.P3hero1mana: dw 10,102101.P3hero1manarec:db 5 2102.P3hero1status: db 2 2103.P3Hero1Units: db 175 | dw 060 | db 000 | dw 000 | db 000 | dw 000 | db 173 | dw 020 | db 000 | dw 000 | db 175 | dw 060 2104.P3Hero1StatAttack: db 12105.P3Hero1StatDefense: db 22106.P3Hero1StatKnowledge: db 1 2107.P3Hero1StatSpellDamage: db 1 2108.P3HeroSkills: db 10,0,0,0,0,02109.P3HeroLevel: db 12110.P3EarthSpells: db %0000 0000 2111.P3FireSpells: db %0000 00002112.P3AirSpells: db %0000 00002113.P3WaterSpells: db %0000 00002114.P3AllSchoolsSpells: db %0000 00002115.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2116.P3HeroSpecificInfo: dw HeroAddressesLuka2117.P3HeroDYDX: dw $ffff 2119.P4hero1y: db 12120.P4hero1x: db 12121.P4hero1xp: dw 0 2122.P4hero1move: db 20,202123.P4hero1mana: dw 10,102124.P4hero1manarec:db 5 2125.P4hero1status: db 2 2126.P4Hero1Units: db 176 | dw 016 | db 176 | dw 027 | db 176 | dw 021 | db 176 | dw 031 | db 176 | dw 040 | db 176 | dw 053 2127.P4Hero1StatAttack: db 12128.P4Hero1StatDefense: db 22129.P4Hero1StatKnowledge: db 1 2130.P4Hero1StatSpellDamage: db 1 2131.P4HeroSkills: db 16,0,0,0,0,02132.P4HeroLevel: db 12133.P4EarthSpells: db %0000 0000 2134.P4FireSpells: db %0000 00002135.P4AirSpells: db %0000 00002136.P4WaterSpells: db %0000 00002137.P4AllSchoolsSpells: db %0000 00002138.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2139.P4HeroSpecificInfo: dw HeroAddressesArmoredSnatcher2140.P4HeroDYDX: dw $ffff 21442145Campaign20: 2146.StartingTowns: db 001,002,012,013 2147.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0002148.Players: db 4,1,0,0,0 2149.StartingResources:2150.Gold: dw 150002151.Wood: dw 202152.Ore: dw 202153.Gems: dw 102154.Rubies: dw 102155.Castle1Player: db 12156.Castle2Player: db 22157.Castle3Player: db 32158.Castle4Player: db 42159.DaysToCompleteCampaign: db 1002160.CampaignText: db "  Go head-to-head with Lolo      ",25521612162.P1hero1y: db 12163.P1hero1x: db 12164.P1hero1xp: dw 0 2165.P1hero1move: db 20,202166.P1hero1mana: dw 10,102167.P1hero1manarec:db 5 2168.P1hero1status: db 2 2169.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2170.P1Hero1StatAttack: db 12171.P1Hero1StatDefense: db 22172.P1Hero1StatKnowledge: db 1 2173.P1Hero1StatSpellDamage: db 1 2174.P1HeroSkills: db 10,0,0,0,0,02175.P1HeroLevel: db 12176.P1EarthSpells: db %0000 0000 2177.P1FireSpells: db %0000 00002178.P1AirSpells: db %0000 00002179.P1WaterSpells: db %0000 00002180.P1AllSchoolsSpells: db %0000 00002181.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2182.P1HeroSpecificInfo: dw HeroAddressesPippols2183.P1HeroDYDX: dw $ffff 2185.P2hero1y: db 502186.P2hero1x: db 502187.P2hero1xp: dw 0 2188.P2hero1move: db 20,202189.P2hero1mana: dw 80,802190.P2hero1manarec:db 5 2191.P2hero1status: db 2 2192.P2Hero1Units: db 177 | dw 40 | db 178 | dw 030 | db 000 | dw 000 | db 179 | dw 020 | db 000 | dw 000 | db 178 | dw 060 2193.P2Hero1StatAttack: db 62194.P2Hero1StatDefense: db 72195.P2Hero1StatKnowledge: db 8 2196.P2Hero1StatSpellDamage: db 11 2197.P2HeroSkills: db 10,0,0,0,0,02198.P2HeroLevel: db 152199.P2EarthSpells: db %0000 1111 2200.P2FireSpells: db %0000 11112201.P2AirSpells: db %0000 11112202.P2WaterSpells: db %0000 11112203.P2AllSchoolsSpells: db %0000 11112204.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2205.P2HeroSpecificInfo: dw HeroAddressesLolo2206.P2HeroDYDX: dw $ffff 2208.P3hero1y: db 12209.P3hero1x: db 12210.P3hero1xp: dw 0 2211.P3hero1move: db 20,202212.P3hero1mana: dw 10,102213.P3hero1manarec:db 5 2214.P3hero1status: db 255 2215.P3Hero1Units: db 175 | dw 060 | db 000 | dw 000 | db 000 | dw 000 | db 173 | dw 020 | db 000 | dw 000 | db 175 | dw 060 2216.P3Hero1StatAttack: db 12217.P3Hero1StatDefense: db 22218.P3Hero1StatKnowledge: db 1 2219.P3Hero1StatSpellDamage: db 1 2220.P3HeroSkills: db 10,0,0,0,0,02221.P3HeroLevel: db 12222.P3EarthSpells: db %0000 0000 2223.P3FireSpells: db %0000 00002224.P3AirSpells: db %0000 00002225.P3WaterSpells: db %0000 00002226.P3AllSchoolsSpells: db %0000 00002227.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2228.P3HeroSpecificInfo: dw HeroAddressesAce2229.P3HeroDYDX: dw $ffff 2231.P4hero1y: db 12232.P4hero1x: db 12233.P4hero1xp: dw 0 2234.P4hero1move: db 20,202235.P4hero1mana: dw 10,102236.P4hero1manarec:db 5 2237.P4hero1status: db 255 2238.P4Hero1Units: db 176 | dw 016 | db 176 | dw 027 | db 176 | dw 021 | db 176 | dw 031 | db 176 | dw 040 | db 176 | dw 053 2239.P4Hero1StatAttack: db 12240.P4Hero1StatDefense: db 22241.P4Hero1StatKnowledge: db 1 2242.P4Hero1StatSpellDamage: db 1 2243.P4HeroSkills: db 16,0,0,0,0,02244.P4HeroLevel: db 12245.P4EarthSpells: db %0000 0000 2246.P4FireSpells: db %0000 00002247.P4AirSpells: db %0000 00002248.P4WaterSpells: db %0000 00002249.P4AllSchoolsSpells: db %0000 00002250.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2251.P4HeroSpecificInfo: dw HeroAddressesRandomHajile2252.P4HeroDYDX: dw $ffff 22552256Campaign21: 2257.StartingTowns: db 014,013,012,011 2258.TavernHeroes: db 057,048,039,060,000,061,062,063,064,0002259.Players: db 2,1,0,2,2 2260.StartingResources:2261.Gold: dw 150002262.Wood: dw 202263.Ore: dw 202264.Gems: dw 102265.Rubies: dw 102266.Castle1Player: db 12267.Castle2Player: db 22268.Castle3Player: db 12269.Castle4Player: db 12270.DaysToCompleteCampaign: db 752271.CampaignText: db " Storm Randar's unaware castle   ",25522722273.P1hero1y: db 12274.P1hero1x: db 12275.P1hero1xp: dw 0 2276.P1hero1move: db 20,202277.P1hero1mana: dw 10,102278.P1hero1manarec:db 5 2279.P1hero1status: db 255 2280.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2281.P1Hero1StatAttack: db 12282.P1Hero1StatDefense: db 22283.P1Hero1StatKnowledge: db 1 2284.P1Hero1StatSpellDamage: db 1 2285.P1HeroSkills: db 10,0,0,0,0,02286.P1HeroLevel: db 12287.P1EarthSpells: db %0000 0000 2288.P1FireSpells: db %0000 00002289.P1AirSpells: db %0000 00002290.P1WaterSpells: db %0000 00002291.P1AllSchoolsSpells: db %0000 00002292.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2293.P1HeroSpecificInfo: dw HeroAddressesPippols2294.P1HeroDYDX: dw $ffff 2296.P2hero1y: db 502297.P2hero1x: db 502298.P2hero1xp: dw 0 2299.P2hero1move: db 20,202300.P2hero1mana: dw 80,802301.P2hero1manarec:db 5 2302.P2hero1status: db 2 2303.P2Hero1Units: db 011 | dw 70 | db 018 | dw 030 | db 000 | dw 000 | db 027 | dw 013 | db 000 | dw 000 | db 027 | dw 050 2304.P2Hero1StatAttack: db 62305.P2Hero1StatDefense: db 72306.P2Hero1StatKnowledge: db 8 2307.P2Hero1StatSpellDamage: db 11 2308.P2HeroSkills: db 10,0,0,0,0,02309.P2HeroLevel: db 152310.P2EarthSpells: db %0000 1111 2311.P2FireSpells: db %0000 11112312.P2AirSpells: db %0000 11112313.P2WaterSpells: db %0000 11112314.P2AllSchoolsSpells: db %0000 11112315.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2316.P2HeroSpecificInfo: dw HeroAddressesRandar2317.P2HeroDYDX: dw $ffff 2319.P3hero1y: db 12320.P3hero1x: db 12321.P3hero1xp: dw 0 2322.P3hero1move: db 20,202323.P3hero1mana: dw 10,102324.P3hero1manarec:db 5 2325.P3hero1status: db 255 2326.P3Hero1Units: db 175 | dw 060 | db 000 | dw 000 | db 000 | dw 000 | db 173 | dw 020 | db 000 | dw 000 | db 175 | dw 060 2327.P3Hero1StatAttack: db 12328.P3Hero1StatDefense: db 22329.P3Hero1StatKnowledge: db 1 2330.P3Hero1StatSpellDamage: db 1 2331.P3HeroSkills: db 10,0,0,0,0,02332.P3HeroLevel: db 12333.P3EarthSpells: db %0000 0000 2334.P3FireSpells: db %0000 00002335.P3AirSpells: db %0000 00002336.P3WaterSpells: db %0000 00002337.P3AllSchoolsSpells: db %0000 00002338.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2339.P3HeroSpecificInfo: dw HeroAddressesAce2340.P3HeroDYDX: dw $ffff 2342.P4hero1y: db 12343.P4hero1x: db 12344.P4hero1xp: dw 0 2345.P4hero1move: db 20,202346.P4hero1mana: dw 10,102347.P4hero1manarec:db 5 2348.P4hero1status: db 255 2349.P4Hero1Units: db 176 | dw 016 | db 176 | dw 027 | db 176 | dw 021 | db 176 | dw 031 | db 176 | dw 040 | db 176 | dw 053 2350.P4Hero1StatAttack: db 12351.P4Hero1StatDefense: db 22352.P4Hero1StatKnowledge: db 1 2353.P4Hero1StatSpellDamage: db 1 2354.P4HeroSkills: db 16,0,0,0,0,02355.P4HeroLevel: db 12356.P4EarthSpells: db %0000 0000 2357.P4FireSpells: db %0000 00002358.P4AirSpells: db %0000 00002359.P4WaterSpells: db %0000 00002360.P4AllSchoolsSpells: db %0000 00002361.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2362.P4HeroSpecificInfo: dw HeroAddressesRandomHajile2363.P4HeroDYDX: dw $ffff 23662367Campaign22: 2368.StartingTowns: db 006,002,008,012 2369.TavernHeroes: db 048,049,000,000,000,000,000,000,000,0002370.Players: db 4,1,0,0,0 2371.StartingResources:2372.Gold: dw 150002373.Wood: dw 202374.Ore: dw 202375.Gems: dw 102376.Rubies: dw 102377.Castle1Player: db 12378.Castle2Player: db 22379.Castle3Player: db 32380.Castle4Player: db 42381.DaysToCompleteCampaign: db 752382.CampaignText: db "Reclaim the Three Sunken Spires  ",25523832384.P1hero1y: db 12385.P1hero1x: db 12386.P1hero1xp: dw 0 2387.P1hero1move: db 20,202388.P1hero1mana: dw 10,102389.P1hero1manarec:db 5 2390.P1hero1status: db 255 2391.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2392.P1Hero1StatAttack: db 12393.P1Hero1StatDefense: db 22394.P1Hero1StatKnowledge: db 1 2395.P1Hero1StatSpellDamage: db 1 2396.P1HeroSkills: db 10,0,0,0,0,02397.P1HeroLevel: db 12398.P1EarthSpells: db %0000 0000 2399.P1FireSpells: db %0000 00002400.P1AirSpells: db %0000 00002401.P1WaterSpells: db %0000 00002402.P1AllSchoolsSpells: db %0000 00002403.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2404.P1HeroSpecificInfo: dw HeroAddressesPippols2405.P1HeroDYDX: dw $ffff 2407.P2hero1y: db 502408.P2hero1x: db 502409.P2hero1xp: dw 0 2410.P2hero1move: db 20,202411.P2hero1mana: dw 80,802412.P2hero1manarec:db 5 2413.P2hero1status: db 2 2414.P2Hero1Units: db CastleVaniaUnitLevel1Number | dw 100 | db CastleVaniaUnitLevel2Number | dw 060 | db 000 | dw 000 | db CastleVaniaUnitLevel1Number | dw 005 | db CastleVaniaUnitLevel1Number | dw 006 | db 000 | dw 000 2415.P2Hero1StatAttack: db 62416.P2Hero1StatDefense: db 72417.P2Hero1StatKnowledge: db 8 2418.P2Hero1StatSpellDamage: db 11 2419.P2HeroSkills: db 10,0,0,0,0,02420.P2HeroLevel: db 152421.P2EarthSpells: db %0000 1111 2422.P2FireSpells: db %0000 11112423.P2AirSpells: db %0000 11112424.P2WaterSpells: db %0000 11112425.P2AllSchoolsSpells: db %0000 11112426.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2427.P2HeroSpecificInfo: dw HeroAddressesSimonBelmont2428.P2HeroDYDX: dw $ffff 2430.P3hero1y: db 12431.P3hero1x: db 12432.P3hero1xp: dw 0 2433.P3hero1move: db 20,202434.P3hero1mana: dw 10,102435.P3hero1manarec:db 5 2436.P3hero1status: db 2 2437.P3Hero1Units: db CastleVaniaUnitLevel3Number | dw 30 | db CastleVaniaUnitLevel4Number | dw 30 | db 000 | dw 000 | db 000 | dw 000 | db CastleVaniaUnitLevel1Number | dw 005 | db CastleVaniaUnitLevel1Number | dw 003 2438.P3Hero1StatAttack: db 12439.P3Hero1StatDefense: db 22440.P3Hero1StatKnowledge: db 1 2441.P3Hero1StatSpellDamage: db 1 2442.P3HeroSkills: db 10,0,0,0,0,02443.P3HeroLevel: db 12444.P3EarthSpells: db %0000 0000 2445.P3FireSpells: db %0000 00002446.P3AirSpells: db %0000 00002447.P3WaterSpells: db %0000 00002448.P3AllSchoolsSpells: db %0000 00002449.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2450.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont2451.P3HeroDYDX: dw $ffff 2453.P4hero1y: db 12454.P4hero1x: db 12455.P4hero1xp: dw 0 2456.P4hero1move: db 20,202457.P4hero1mana: dw 10,102458.P4hero1manarec:db 5 2459.P4hero1status: db 2 2460.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 2461.P4Hero1StatAttack: db 12462.P4Hero1StatDefense: db 22463.P4Hero1StatKnowledge: db 1 2464.P4Hero1StatSpellDamage: db 1 2465.P4HeroSkills: db 16,0,0,0,0,02466.P4HeroLevel: db 12467.P4EarthSpells: db %0000 0000 2468.P4FireSpells: db %0000 00002469.P4AirSpells: db %0000 00002470.P4WaterSpells: db %0000 00002471.P4AllSchoolsSpells: db %0000 00002472.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2473.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont2474.P4HeroDYDX: dw $ffff 24792480Campaign23: 2481.StartingTowns: db 006,002,008,012 2482.TavernHeroes: db 050,052,000,000,000,000,000,000,000,0002483.Players: db 3,1,0,0,2 2484.StartingResources:2485.Gold: dw 150002486.Wood: dw 202487.Ore: dw 202488.Gems: dw 102489.Rubies: dw 102490.Castle1Player: db 12491.Castle2Player: db 22492.Castle3Player: db 32493.Castle4Player: db 2552494.DaysToCompleteCampaign: db 752495.CampaignText: db "Confront Ruika, the fierce ninja ",25524962497.P1hero1y: db 12498.P1hero1x: db 12499.P1hero1xp: dw 0 2500.P1hero1move: db 20,202501.P1hero1mana: dw 10,102502.P1hero1manarec:db 5 2503.P1hero1status: db 255 2504.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2505.P1Hero1StatAttack: db 12506.P1Hero1StatDefense: db 22507.P1Hero1StatKnowledge: db 1 2508.P1Hero1StatSpellDamage: db 1 2509.P1HeroSkills: db 10,0,0,0,0,02510.P1HeroLevel: db 12511.P1EarthSpells: db %0000 0000 2512.P1FireSpells: db %0000 00002513.P1AirSpells: db %0000 00002514.P1WaterSpells: db %0000 00002515.P1AllSchoolsSpells: db %0000 00002516.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2517.P1HeroSpecificInfo: dw HeroAddressesPippols2518.P1HeroDYDX: dw $ffff 2520.P2hero1y: db 502521.P2hero1x: db 502522.P2hero1xp: dw 0 2523.P2hero1move: db 20,202524.P2hero1mana: dw 80,802525.P2hero1manarec:db 5 2526.P2hero1status: db 255 2527.P2Hero1Units: db 187 | dw 02 | db 187 | dw 010 | db 000 | dw 000 | db 000 | dw 000 | db 187 | dw 010 | db 187 | dw 010 2528.P2Hero1StatAttack: db 62529.P2Hero1StatDefense: db 72530.P2Hero1StatKnowledge: db 8 2531.P2Hero1StatSpellDamage: db 11 2532.P2HeroSkills: db 10,0,0,0,0,02533.P2HeroLevel: db 152534.P2EarthSpells: db %0000 1111 2535.P2FireSpells: db %0000 11112536.P2AirSpells: db %0000 11112537.P2WaterSpells: db %0000 11112538.P2AllSchoolsSpells: db %0000 11112539.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2540.P2HeroSpecificInfo: dw HeroAddressesUndeadline22541.P2HeroDYDX: dw $ffff 2543.P3hero1y: db 12544.P3hero1x: db 12545.P3hero1xp: dw 0 2546.P3hero1move: db 20,202547.P3hero1mana: dw 10,102548.P3hero1manarec:db 5 2549.P3hero1status: db 2 2550.P3Hero1Units: db 187 | dw 2 | db 187 | dw 3 | db 000 | dw 000 | db 000 | dw 000 | db 187 | dw 5 | db 187 | dw 6 2551.P3Hero1StatAttack: db 12552.P3Hero1StatDefense: db 22553.P3Hero1StatKnowledge: db 1 2554.P3Hero1StatSpellDamage: db 1 2555.P3HeroSkills: db 10,0,0,0,0,02556.P3HeroLevel: db 12557.P3EarthSpells: db %0000 0000 2558.P3FireSpells: db %0000 00002559.P3AirSpells: db %0000 00002560.P3WaterSpells: db %0000 00002561.P3AllSchoolsSpells: db %0000 00002562.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2563.P3HeroSpecificInfo: dw HeroAddressesUndeadline22564.P3HeroDYDX: dw $ffff 2566.P4hero1y: db 12567.P4hero1x: db 12568.P4hero1xp: dw 0 2569.P4hero1move: db 20,202570.P4hero1mana: dw 10,102571.P4hero1manarec:db 5 2572.P4hero1status: db 255 2573.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 2574.P4Hero1StatAttack: db 12575.P4Hero1StatDefense: db 22576.P4Hero1StatKnowledge: db 1 2577.P4Hero1StatSpellDamage: db 1 2578.P4HeroSkills: db 16,0,0,0,0,02579.P4HeroLevel: db 12580.P4EarthSpells: db %0000 0000 2581.P4FireSpells: db %0000 00002582.P4AirSpells: db %0000 00002583.P4WaterSpells: db %0000 00002584.P4AllSchoolsSpells: db %0000 00002585.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2586.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont2587.P4HeroDYDX: dw $ffff 25912592Campaign24: 2593.StartingTowns: db 003,013,014,012 2594.TavernHeroes: db 051,053,055,000,000,000,000,000,000,0002595.Players: db 3,1,0,0,2 2596.StartingResources:2597.Gold: dw 150002598.Wood: dw 202599.Ore: dw 202600.Gems: dw 102601.Rubies: dw 102602.Castle1Player: db 12603.Castle2Player: db 22604.Castle3Player: db 32605.Castle4Player: db 2552606.DaysToCompleteCampaign: db 752607.CampaignText: db "Shut down the rogue AI snatcher  ",25526082609.P1hero1y: db 12610.P1hero1x: db 12611.P1hero1xp: dw 0 2612.P1hero1move: db 20,202613.P1hero1mana: dw 10,102614.P1hero1manarec:db 5 2615.P1hero1status: db 255 2616.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2617.P1Hero1StatAttack: db 12618.P1Hero1StatDefense: db 22619.P1Hero1StatKnowledge: db 1 2620.P1Hero1StatSpellDamage: db 1 2621.P1HeroSkills: db 10,0,0,0,0,02622.P1HeroLevel: db 12623.P1EarthSpells: db %0000 0000 2624.P1FireSpells: db %0000 00002625.P1AirSpells: db %0000 00002626.P1WaterSpells: db %0000 00002627.P1AllSchoolsSpells: db %0000 00002628.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2629.P1HeroSpecificInfo: dw HeroAddressesPippols2630.P1HeroDYDX: dw $ffff 2632.P2hero1y: db 502633.P2hero1x: db 502634.P2hero1xp: dw 0 2635.P2hero1move: db 20,202636.P2hero1mana: dw 80,802637.P2hero1manarec:db 5 2638.P2hero1status: db 2 2639.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw 30 | db SDSnatcherUnitLevel2Number | dw 31 | db SDSnatcherUnitLevel3Number | dw 12 | db SDSnatcherUnitLevel4Number | dw 15 | db SDSnatcherUnitLevel5Number | dw 17 | db SDSnatcherUnitLevel6Number | dw 005 2640.P2Hero1StatAttack: db 62641.P2Hero1StatDefense: db 72642.P2Hero1StatKnowledge: db 8 2643.P2Hero1StatSpellDamage: db 11 2644.P2HeroSkills: db 10,0,0,0,0,02645.P2HeroLevel: db 152646.P2EarthSpells: db %0000 1111 2647.P2FireSpells: db %0000 11112648.P2AirSpells: db %0000 11112649.P2WaterSpells: db %0000 11112650.P2AllSchoolsSpells: db %0000 11112651.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2652.P2HeroSpecificInfo: dw HeroAddressesSnatcher2653.P2HeroDYDX: dw $ffff 2655.P3hero1y: db 12656.P3hero1x: db 12657.P3hero1xp: dw 0 2658.P3hero1move: db 20,202659.P3hero1mana: dw 10,102660.P3hero1manarec:db 5 2661.P3hero1status: db 255 2662.P3Hero1Units: db SDSnatcherUnitLevel1Number | dw 30 | db SDSnatcherUnitLevel2Number | dw 31 | db SDSnatcherUnitLevel3Number | dw 12 | db SDSnatcherUnitLevel4Number | dw 15 | db SDSnatcherUnitLevel5Number | dw 17 | db SDSnatcherUnitLevel6Number | dw 020 2663.P3Hero1StatAttack: db 12664.P3Hero1StatDefense: db 22665.P3Hero1StatKnowledge: db 1 2666.P3Hero1StatSpellDamage: db 1 2667.P3HeroSkills: db 10,0,0,0,0,02668.P3HeroLevel: db 12669.P3EarthSpells: db %0000 0000 2670.P3FireSpells: db %0000 00002671.P3AirSpells: db %0000 00002672.P3WaterSpells: db %0000 00002673.P3AllSchoolsSpells: db %0000 00002674.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2675.P3HeroSpecificInfo: dw HeroAddressesSnatcher2676.P3HeroDYDX: dw $ffff 2678.P4hero1y: db 12679.P4hero1x: db 12680.P4hero1xp: dw 0 2681.P4hero1move: db 20,202682.P4hero1mana: dw 10,102683.P4hero1manarec:db 5 2684.P4hero1status: db 255 2685.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 2686.P4Hero1StatAttack: db 12687.P4Hero1StatDefense: db 22688.P4Hero1StatKnowledge: db 1 2689.P4Hero1StatSpellDamage: db 1 2690.P4HeroSkills: db 16,0,0,0,0,02691.P4HeroLevel: db 12692.P4EarthSpells: db %0000 0000 2693.P4FireSpells: db %0000 00002694.P4AirSpells: db %0000 00002695.P4WaterSpells: db %0000 00002696.P4AllSchoolsSpells: db %0000 00002697.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2698.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont2699.P4HeroDYDX: dw $ffff 270227042705Campaign25: 2706.StartingTowns: db 005,008,004,012 2707.TavernHeroes: db 018,025,030,037,041,046,061,062,063,0002708.Players: db 3,1,0,0,2 2709.StartingResources:2710.Gold: dw 150002711.Wood: dw 202712.Ore: dw 202713.Gems: dw 102714.Rubies: dw 102715.Castle1Player: db 12716.Castle2Player: db 22717.Castle3Player: db 32718.Castle4Player: db 2552719.DaysToCompleteCampaign: db 602720.CampaignText: db "Foil Hank Mitchell's evil plans  ",25527212722.P1hero1y: db 12723.P1hero1x: db 12724.P1hero1xp: dw 0 2725.P1hero1move: db 20,202726.P1hero1mana: dw 10,102727.P1hero1manarec:db 5 2728.P1hero1status: db 255 2729.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2730.P1Hero1StatAttack: db 12731.P1Hero1StatDefense: db 22732.P1Hero1StatKnowledge: db 1 2733.P1Hero1StatSpellDamage: db 1 2734.P1HeroSkills: db 10,0,0,0,0,02735.P1HeroLevel: db 12736.P1EarthSpells: db %0000 0000 2737.P1FireSpells: db %0000 00002738.P1AirSpells: db %0000 00002739.P1WaterSpells: db %0000 00002740.P1AllSchoolsSpells: db %0000 00002741.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2742.P1HeroSpecificInfo: dw HeroAddressesPippols2743.P1HeroDYDX: dw $ffff 2745.P2hero1y: db 502746.P2hero1x: db 502747.P2hero1xp: dw 0 2748.P2hero1move: db 20,202749.P2hero1mana: dw 80,802750.P2hero1manarec:db 5 2751.P2hero1status: db 2 2752.P2Hero1Units: db 181 | dw 070 | db 181 | dw 81 | db 181 | dw 72 | db 181 | dw 65 | db 181 | dw 57 | db 181 | dw 045 2753.P2Hero1StatAttack: db 62754.P2Hero1StatDefense: db 72755.P2Hero1StatKnowledge: db 8 2756.P2Hero1StatSpellDamage: db 11 2757.P2HeroSkills: db 10,0,0,0,0,02758.P2HeroLevel: db 152759.P2EarthSpells: db %0000 1111 2760.P2FireSpells: db %0000 11112761.P2AirSpells: db %0000 11112762.P2WaterSpells: db %0000 11112763.P2AllSchoolsSpells: db %0000 11112764.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2765.P2HeroSpecificInfo: dw HeroAddressesMitchell2766.P2HeroDYDX: dw $ffff 2768.P3hero1y: db 12769.P3hero1x: db 12770.P3hero1xp: dw 0 2771.P3hero1move: db 20,202772.P3hero1mana: dw 10,102773.P3hero1manarec:db 5 2774.P3hero1status: db 255 2775.P3Hero1Units: db SDSnatcherUnitLevel1Number | dw 30 | db SDSnatcherUnitLevel2Number | dw 31 | db SDSnatcherUnitLevel3Number | dw 12 | db SDSnatcherUnitLevel4Number | dw 15 | db SDSnatcherUnitLevel5Number | dw 17 | db SDSnatcherUnitLevel6Number | dw 020 2776.P3Hero1StatAttack: db 12777.P3Hero1StatDefense: db 22778.P3Hero1StatKnowledge: db 1 2779.P3Hero1StatSpellDamage: db 1 2780.P3HeroSkills: db 10,0,0,0,0,02781.P3HeroLevel: db 12782.P3EarthSpells: db %0000 0000 2783.P3FireSpells: db %0000 00002784.P3AirSpells: db %0000 00002785.P3WaterSpells: db %0000 00002786.P3AllSchoolsSpells: db %0000 00002787.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2788.P3HeroSpecificInfo: dw HeroAddressesSnatcher2789.P3HeroDYDX: dw $ffff 2791.P4hero1y: db 12792.P4hero1x: db 12793.P4hero1xp: dw 0 2794.P4hero1move: db 20,202795.P4hero1mana: dw 10,102796.P4hero1manarec:db 5 2797.P4hero1status: db 255 2798.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 2799.P4Hero1StatAttack: db 12800.P4Hero1StatDefense: db 22801.P4Hero1StatKnowledge: db 1 2802.P4Hero1StatSpellDamage: db 1 2803.P4HeroSkills: db 16,0,0,0,0,02804.P4HeroLevel: db 12805.P4EarthSpells: db %0000 0000 2806.P4FireSpells: db %0000 00002807.P4AirSpells: db %0000 00002808.P4WaterSpells: db %0000 00002809.P4AllSchoolsSpells: db %0000 00002810.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2811.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont2812.P4HeroDYDX: dw $ffff 28152816Campaign26: 2817.StartingTowns: db 014,008,004,012 2818.TavernHeroes: db 046,061,062,063,000,018,025,030,037,0412819.Players: db 3,1,0,0,2 2820.StartingResources:2821.Gold: dw 180002822.Wood: dw 252823.Ore: dw 252824.Gems: dw 152825.Rubies: dw 152826.Castle1Player: db 12827.Castle2Player: db 22828.Castle3Player: db 32829.Castle4Player: db 2552830.DaysToCompleteCampaign: db 702831.CampaignText: db "Foil Hank Mitchell's evil plans  ",25528322833.P1hero1y: db 12834.P1hero1x: db 12835.P1hero1xp: dw 0 2836.P1hero1move: db 20,202837.P1hero1mana: dw 10,102838.P1hero1manarec:db 5 2839.P1hero1status: db 255 2840.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2841.P1Hero1StatAttack: db 12842.P1Hero1StatDefense: db 22843.P1Hero1StatKnowledge: db 1 2844.P1Hero1StatSpellDamage: db 1 2845.P1HeroSkills: db 10,0,0,0,0,02846.P1HeroLevel: db 12847.P1EarthSpells: db %0000 0000 2848.P1FireSpells: db %0000 00002849.P1AirSpells: db %0000 00002850.P1WaterSpells: db %0000 00002851.P1AllSchoolsSpells: db %0000 00002852.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2853.P1HeroSpecificInfo: dw HeroAddressesPippols2854.P1HeroDYDX: dw $ffff 2856.P2hero1y: db 502857.P2hero1x: db 502858.P2hero1xp: dw 0 2859.P2hero1move: db 20,202860.P2hero1mana: dw 80,802861.P2hero1manarec:db 5 2862.P2hero1status: db 2 2863.P2Hero1Units: db 112 | dw 003 | db 158 | dw 02 | db 112 | dw 04 | db 158 | dw 3 | db 112 | dw 4 | db 158 | dw 06 2864.P2Hero1StatAttack: db 62865.P2Hero1StatDefense: db 72866.P2Hero1StatKnowledge: db 8 2867.P2Hero1StatSpellDamage: db 11 2868.P2HeroSkills: db 10,0,0,0,0,02869.P2HeroLevel: db 152870.P2EarthSpells: db %0000 1111 2871.P2FireSpells: db %0000 11112872.P2AirSpells: db %0000 11112873.P2WaterSpells: db %0000 11112874.P2AllSchoolsSpells: db %0000 11112875.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2876.P2HeroSpecificInfo: dw HeroAddressesMitchell2877.P2HeroDYDX: dw $ffff 2879.P3hero1y: db 12880.P3hero1x: db 12881.P3hero1xp: dw 0 2882.P3hero1move: db 20,202883.P3hero1mana: dw 10,102884.P3hero1manarec:db 5 2885.P3hero1status: db 255 2886.P3Hero1Units: db SDSnatcherUnitLevel1Number | dw 30 | db SDSnatcherUnitLevel2Number | dw 31 | db SDSnatcherUnitLevel3Number | dw 12 | db SDSnatcherUnitLevel4Number | dw 15 | db SDSnatcherUnitLevel5Number | dw 17 | db SDSnatcherUnitLevel6Number | dw 020 2887.P3Hero1StatAttack: db 12888.P3Hero1StatDefense: db 22889.P3Hero1StatKnowledge: db 1 2890.P3Hero1StatSpellDamage: db 1 2891.P3HeroSkills: db 10,0,0,0,0,02892.P3HeroLevel: db 12893.P3EarthSpells: db %0000 0000 2894.P3FireSpells: db %0000 00002895.P3AirSpells: db %0000 00002896.P3WaterSpells: db %0000 00002897.P3AllSchoolsSpells: db %0000 00002898.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2899.P3HeroSpecificInfo: dw HeroAddressesSnatcher2900.P3HeroDYDX: dw $ffff 2902.P4hero1y: db 12903.P4hero1x: db 12904.P4hero1xp: dw 0 2905.P4hero1move: db 20,202906.P4hero1mana: dw 10,102907.P4hero1manarec:db 5 2908.P4hero1status: db 255 2909.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 2910.P4Hero1StatAttack: db 12911.P4Hero1StatDefense: db 22912.P4Hero1StatKnowledge: db 1 2913.P4Hero1StatSpellDamage: db 1 2914.P4HeroSkills: db 16,0,0,0,0,02915.P4HeroLevel: db 12916.P4EarthSpells: db %0000 0000 2917.P4FireSpells: db %0000 00002918.P4AirSpells: db %0000 00002919.P4WaterSpells: db %0000 00002920.P4AllSchoolsSpells: db %0000 00002921.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2922.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont2923.P4HeroDYDX: dw $ffff 29252926Campaign27: 2927.StartingTowns: db 010,011,009,012 2928.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0722929.Players: db 4,1,0,0,0 2930.StartingResources:2931.Gold: dw 180002932.Wood: dw 252933.Ore: dw 252934.Gems: dw 152935.Rubies: dw 152936.Castle1Player: db 12937.Castle2Player: db 22938.Castle3Player: db 32939.Castle4Player: db 42940.DaysToCompleteCampaign: db 402941.CampaignText: db " Defeat Big Boss and Grey Fox    ",25529422943.P1hero1y: db 12944.P1hero1x: db 12945.P1hero1xp: dw 0 2946.P1hero1move: db 20,202947.P1hero1mana: dw 10,102948.P1hero1manarec:db 5 2949.P1hero1status: db 2 2950.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 2951.P1Hero1StatAttack: db 12952.P1Hero1StatDefense: db 22953.P1Hero1StatKnowledge: db 1 2954.P1Hero1StatSpellDamage: db 1 2955.P1HeroSkills: db 10,0,0,0,0,02956.P1HeroLevel: db 12957.P1EarthSpells: db %0000 0000 2958.P1FireSpells: db %0000 00002959.P1AirSpells: db %0000 00002960.P1WaterSpells: db %0000 00002961.P1AllSchoolsSpells: db %0000 00002962.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2963.P1HeroSpecificInfo: dw HeroAddressesBillRizer2964.P1HeroDYDX: dw $ffff 2966.P2hero1y: db 502967.P2hero1x: db 502968.P2hero1xp: dw 0 2969.P2hero1move: db 20,202970.P2hero1mana: dw 80,802971.P2hero1manarec:db 5 2972.P2hero1status: db 2 2973.P2Hero1Units: db 090 | dw 013 | db 091 | dw 10 | db 092 | dw 14 | db 090 | dw 23 | db 090 | dw 24 | db 090 | dw 06 2974.P2Hero1StatAttack: db 62975.P2Hero1StatDefense: db 72976.P2Hero1StatKnowledge: db 8 2977.P2Hero1StatSpellDamage: db 11 2978.P2HeroSkills: db 10,0,0,0,0,02979.P2HeroLevel: db 152980.P2EarthSpells: db %0000 1111 2981.P2FireSpells: db %0000 11112982.P2AirSpells: db %0000 11112983.P2WaterSpells: db %0000 11112984.P2AllSchoolsSpells: db %0000 11112985.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 2986.P2HeroSpecificInfo: dw HeroAddressesBigBoss2987.P2HeroDYDX: dw $ffff 2989.P3hero1y: db 12990.P3hero1x: db 12991.P3hero1xp: dw 0 2992.P3hero1move: db 20,202993.P3hero1mana: dw 10,102994.P3hero1manarec:db 5 2995.P3hero1status: db 2 2996.P3Hero1Units: db 093 | dw 06 | db 093 | dw 5 | db 093 | dw 2 | db 093 | dw 2 | db 093 | dw 3 | db 094 | dw 12 2997.P3Hero1StatAttack: db 12998.P3Hero1StatDefense: db 22999.P3Hero1StatKnowledge: db 1 3000.P3Hero1StatSpellDamage: db 1 3001.P3HeroSkills: db 10,0,0,0,0,03002.P3HeroLevel: db 13003.P3EarthSpells: db %0000 0000 3004.P3FireSpells: db %0000 00003005.P3AirSpells: db %0000 00003006.P3WaterSpells: db %0000 00003007.P3AllSchoolsSpells: db %0000 00003008.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3009.P3HeroSpecificInfo: dw HeroAddressesGreyFox3010.P3HeroDYDX: dw $ffff 3012.P4hero1y: db 13013.P4hero1x: db 13014.P4hero1xp: dw 0 3015.P4hero1move: db 20,203016.P4hero1mana: dw 10,103017.P4hero1manarec:db 5 3018.P4hero1status: db 255 3019.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 3020.P4Hero1StatAttack: db 13021.P4Hero1StatDefense: db 23022.P4Hero1StatKnowledge: db 1 3023.P4Hero1StatSpellDamage: db 1 3024.P4HeroSkills: db 16,0,0,0,0,03025.P4HeroLevel: db 13026.P4EarthSpells: db %0000 0000 3027.P4FireSpells: db %0000 00003028.P4AirSpells: db %0000 00003029.P4WaterSpells: db %0000 00003030.P4AllSchoolsSpells: db %0000 00003031.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3032.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont3033.P4HeroDYDX: dw $ffff 30363037Campaign28: 3038.StartingTowns: db 014,013,012,011 3039.TavernHeroes: db 001,005,009,000,000,000,000,000,000,0723040.Players: db 4,1,0,0,0 3041.StartingResources:3042.Gold: dw 180003043.Wood: dw 253044.Ore: dw 253045.Gems: dw 153046.Rubies: dw 153047.Castle1Player: db 13048.Castle2Player: db 23049.Castle3Player: db 33050.Castle4Player: db 43051.DaysToCompleteCampaign: db 653052.CampaignText: db "  Repossess two besieged towns   ",25530533054.P1hero1y: db 13055.P1hero1x: db 13056.P1hero1xp: dw 0 3057.P1hero1move: db 20,203058.P1hero1mana: dw 10,103059.P1hero1manarec:db 5 3060.P1hero1status: db 2 3061.P1Hero1Units: db YieArKungFuUnitLevel1Number | dw YieArKungFuUnitLevel1Growth | db YieArKungFuUnitLevel2Number | dw YieArKungFuUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 3062.P1Hero1StatAttack: db 13063.P1Hero1StatDefense: db 23064.P1Hero1StatKnowledge: db 1 3065.P1Hero1StatSpellDamage: db 1 3066.P1HeroSkills: db 10,0,0,0,0,03067.P1HeroLevel: db 13068.P1EarthSpells: db %0000 0000 3069.P1FireSpells: db %0000 00003070.P1AirSpells: db %0000 00003071.P1WaterSpells: db %0000 00003072.P1AllSchoolsSpells: db %0000 00003073.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3074.P1HeroSpecificInfo: dw HeroAddressesUndeadline23075.P1HeroDYDX: dw $ffff 3077.P2hero1y: db 503078.P2hero1x: db 503079.P2hero1xp: dw 0 3080.P2hero1move: db 20,203081.P2hero1mana: dw 80,803082.P2hero1manarec:db 5 3083.P2hero1status: db 2 3084.P2Hero1Units: db 165 | dw 043 | db 000 | dw 000 | db 165 | dw 44 | db 000 | dw 000 | db 165 | dw 34 | db 000 | dw 000 3085.P2Hero1StatAttack: db 63086.P2Hero1StatDefense: db 73087.P2Hero1StatKnowledge: db 8 3088.P2Hero1StatSpellDamage: db 11 3089.P2HeroSkills: db 10,0,0,0,0,03090.P2HeroLevel: db 153091.P2EarthSpells: db %0000 1111 3092.P2FireSpells: db %0000 11113093.P2AirSpells: db %0000 11113094.P2WaterSpells: db %0000 11113095.P2AllSchoolsSpells: db %0000 11113096.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3097.P2HeroSpecificInfo: dw HeroAddressesPampas3098.P2HeroDYDX: dw $ffff 3100.P3hero1y: db 13101.P3hero1x: db 13102.P3hero1xp: dw 0 3103.P3hero1move: db 20,203104.P3hero1mana: dw 10,103105.P3hero1manarec:db 5 3106.P3hero1status: db 2 3107.P3Hero1Units: db 170 | dw 08 | db 170 | dw 7 | db 170 | dw 4 | db 179 | dw 72 | db 170 | dw 4 | db 170 | dw 13 3108.P3Hero1StatAttack: db 13109.P3Hero1StatDefense: db 23110.P3Hero1StatKnowledge: db 1 3111.P3Hero1StatSpellDamage: db 1 3112.P3HeroSkills: db 10,0,0,0,0,03113.P3HeroLevel: db 13114.P3EarthSpells: db %0000 0000 3115.P3FireSpells: db %0000 00003116.P3AirSpells: db %0000 00003117.P3WaterSpells: db %0000 00003118.P3AllSchoolsSpells: db %0000 00003119.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3120.P3HeroSpecificInfo: dw HeroAddressesSelene3121.P3HeroDYDX: dw $ffff 3123.P4hero1y: db 13124.P4hero1x: db 13125.P4hero1xp: dw 0 3126.P4hero1move: db 20,203127.P4hero1mana: dw 10,103128.P4hero1manarec:db 5 3129.P4hero1status: db 255 3130.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 3131.P4Hero1StatAttack: db 13132.P4Hero1StatDefense: db 23133.P4Hero1StatKnowledge: db 1 3134.P4Hero1StatSpellDamage: db 1 3135.P4HeroSkills: db 16,0,0,0,0,03136.P4HeroLevel: db 13137.P4EarthSpells: db %0000 0000 3138.P4FireSpells: db %0000 00003139.P4AirSpells: db %0000 00003140.P4WaterSpells: db %0000 00003141.P4AllSchoolsSpells: db %0000 00003142.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3143.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont3144.P4HeroDYDX: dw $ffff 31473148Campaign29: 3149.StartingTowns: db 015,013,000,000 3150.TavernHeroes: db 000,000,000,000,000,000,000,000,000,0003151.Players: db 2,1,0,2,2 3152.StartingResources:3153.Gold: dw 000003154.Wood: dw 03155.Ore: dw 03156.Gems: dw 03157.Rubies: dw 03158.Castle1Player: db 13159.Castle2Player: db 23160.Castle3Player: db 2553161.Castle4Player: db 2553162.DaysToCompleteCampaign: db 603163.CampaignText: db "    Defeat Doctor Pettrovich     ",25531643165.P1hero1y: db 13166.P1hero1x: db 13167.P1hero1xp: dw 0 3168.P1hero1move: db 20,203169.P1hero1mana: dw 10,103170.P1hero1manarec:db 5 3171.P1hero1status: db 2 3172.P1Hero1Units: db BubbleBobbleGroupAUnitLevel1Number | dw BubbleBobbleGroupAUnitLevel1Growth | db BubbleBobbleGroupAUnitLevel2Number | dw BubbleBobbleGroupAUnitLevel2Growth | db BubbleBobbleGroupAUnitLevel3Number | dw 004 | db BubbleBobbleGroupAUnitLevel4Number | dw 002 | db 000 | dw 000 | db 000 | dw 000 3173.P1Hero1StatAttack: db 13174.P1Hero1StatDefense: db 23175.P1Hero1StatKnowledge: db 1 3176.P1Hero1StatSpellDamage: db 1 3177.P1HeroSkills: db 10,0,0,0,0,03178.P1HeroLevel: db 13179.P1EarthSpells: db %0000 0000 3180.P1FireSpells: db %0000 00003181.P1AirSpells: db %0000 00003182.P1WaterSpells: db %0000 00003183.P1AllSchoolsSpells: db %0000 00003184.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3185.P1HeroSpecificInfo: dw HeroAddressesPixy3186.P1HeroDYDX: dw $ffff 3188.P2hero1y: db 503189.P2hero1x: db 503190.P2hero1xp: dw 0 3191.P2hero1move: db 20,203192.P2hero1mana: dw 80,803193.P2hero1manarec:db 5 3194.P2hero1status: db 2 3195.P2Hero1Units: db 001 | dw 023 | db 001 | dw 015 | db 002 | dw 007 | db 002 | dw 009 | db 003 | dw 18 | db 004 | dw 011 3196.P2Hero1StatAttack: db 63197.P2Hero1StatDefense: db 73198.P2Hero1StatKnowledge: db 8 3199.P2Hero1StatSpellDamage: db 11 3200.P2HeroSkills: db 10,0,0,0,0,03201.P2HeroLevel: db 153202.P2EarthSpells: db %0000 1111 3203.P2FireSpells: db %0000 11113204.P2AirSpells: db %0000 11113205.P2WaterSpells: db %0000 11113206.P2AllSchoolsSpells: db %0000 11113207.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3208.P2HeroSpecificInfo: dw HeroAddressesDrPettrovich3209.P2HeroDYDX: dw $ffff 3211.P3hero1y: db 13212.P3hero1x: db 13213.P3hero1xp: dw 0 3214.P3hero1move: db 20,203215.P3hero1mana: dw 10,103216.P3hero1manarec:db 5 3217.P3hero1status: db 255 3218.P3Hero1Units: db 170 | dw 08 | db 170 | dw 7 | db 170 | dw 4 | db 179 | dw 72 | db 170 | dw 4 | db 170 | dw 13 3219.P3Hero1StatAttack: db 13220.P3Hero1StatDefense: db 23221.P3Hero1StatKnowledge: db 1 3222.P3Hero1StatSpellDamage: db 1 3223.P3HeroSkills: db 10,0,0,0,0,03224.P3HeroLevel: db 13225.P3EarthSpells: db %0000 0000 3226.P3FireSpells: db %0000 00003227.P3AirSpells: db %0000 00003228.P3WaterSpells: db %0000 00003229.P3AllSchoolsSpells: db %0000 00003230.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3231.P3HeroSpecificInfo: dw HeroAddressesSelene3232.P3HeroDYDX: dw $ffff 3234.P4hero1y: db 13235.P4hero1x: db 13236.P4hero1xp: dw 0 3237.P4hero1move: db 20,203238.P4hero1mana: dw 10,103239.P4hero1manarec:db 5 3240.P4hero1status: db 255 3241.P4Hero1Units: db CastleVaniaUnitLevel5Number | dw 010 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 2 | db CastleVaniaUnitLevel6Number | dw 1 | db CastleVaniaUnitLevel6Number | dw 001 | db CastleVaniaUnitLevel5Number | dw 010 3242.P4Hero1StatAttack: db 13243.P4Hero1StatDefense: db 23244.P4Hero1StatKnowledge: db 1 3245.P4Hero1StatSpellDamage: db 1 3246.P4HeroSkills: db 16,0,0,0,0,03247.P4HeroLevel: db 13248.P4EarthSpells: db %0000 0000 3249.P4FireSpells: db %0000 00003250.P4AirSpells: db %0000 00003251.P4WaterSpells: db %0000 00003252.P4AllSchoolsSpells: db %0000 00003253.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3254.P4HeroSpecificInfo: dw HeroAddressesRichterBelmont3255.P4HeroDYDX: dw $ffff 32593260Campaign30: 3261.StartingTowns: db 016,017,013,010 3262.TavernHeroes: db 010,008,006,004,026,039,041,000,000,0003263.Players: db 4,1,0,0,0 3264.StartingResources:3265.Gold: dw 000003266.Wood: dw 03267.Ore: dw 03268.Gems: dw 03269.Rubies: dw 03270.Castle1Player: db 13271.Castle2Player: db 23272.Castle3Player: db 33273.Castle4Player: db 43274.DaysToCompleteCampaign: db 1203275.CampaignText: db "  Siege the final three palaces  ",25532763277.P1hero1y: db 13278.P1hero1x: db 13279.P1hero1xp: dw 0 3280.P1hero1move: db 20,203281.P1hero1mana: dw 10,103282.P1hero1manarec:db 5 3283.P1hero1status: db 255 3284.P1Hero1Units: db BubbleBobbleGroupAUnitLevel1Number | dw BubbleBobbleGroupAUnitLevel1Growth | db BubbleBobbleGroupAUnitLevel2Number | dw BubbleBobbleGroupAUnitLevel2Growth | db BubbleBobbleGroupAUnitLevel3Number | dw 004 | db BubbleBobbleGroupAUnitLevel4Number | dw 002 | db 000 | dw 000 | db 000 | dw 000 3285.P1Hero1StatAttack: db 13286.P1Hero1StatDefense: db 23287.P1Hero1StatKnowledge: db 1 3288.P1Hero1StatSpellDamage: db 1 3289.P1HeroSkills: db 10,0,0,0,0,03290.P1HeroLevel: db 13291.P1EarthSpells: db %0000 0000 3292.P1FireSpells: db %0000 00003293.P1AirSpells: db %0000 00003294.P1WaterSpells: db %0000 00003295.P1AllSchoolsSpells: db %0000 00003296.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3297.P1HeroSpecificInfo: dw HeroAddressesPixy3298.P1HeroDYDX: dw $ffff 3300.P2hero1y: db 503301.P2hero1x: db 503302.P2hero1xp: dw 0 3303.P2hero1move: db 20,203304.P2hero1mana: dw 80,803305.P2hero1manarec:db 5 3306.P2hero1status: db 2 3307.P2Hero1Units: db 007 | dw 023 | db 008 | dw 015 | db 000 | dw 000 | db 000 | dw 000 | db 007 | dw 28 | db 008 | dw 014 3308.P2Hero1StatAttack: db 63309.P2Hero1StatDefense: db 73310.P2Hero1StatKnowledge: db 8 3311.P2Hero1StatSpellDamage: db 11 3312.P2HeroSkills: db 10,0,0,0,0,03313.P2HeroLevel: db 153314.P2EarthSpells: db %0000 1111 3315.P2FireSpells: db %0000 11113316.P2AirSpells: db %0000 11113317.P2WaterSpells: db %0000 11113318.P2AllSchoolsSpells: db %0000 11113319.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3320.P2HeroSpecificInfo: dw HeroAddressesSkooter3321.P2HeroDYDX: dw $ffff 3323.P3hero1y: db 13324.P3hero1x: db 13325.P3hero1xp: dw 0 3326.P3hero1move: db 20,203327.P3hero1mana: dw 10,103328.P3hero1manarec:db 5 3329.P3hero1status: db 2 3330.P3Hero1Units: db 022 | dw 38 | db 022 | dw 27 | db 022 | dw 45 | db 022 | dw 52 | db 022 | dw 64 | db 022 | dw 53 3331.P3Hero1StatAttack: db 13332.P3Hero1StatDefense: db 23333.P3Hero1StatKnowledge: db 1 3334.P3Hero1StatSpellDamage: db 1 3335.P3HeroSkills: db 10,0,0,0,0,03336.P3HeroLevel: db 13337.P3EarthSpells: db %0000 0000 3338.P3FireSpells: db %0000 00003339.P3AirSpells: db %0000 00003340.P3WaterSpells: db %0000 00003341.P3AllSchoolsSpells: db %0000 00003342.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3343.P3HeroSpecificInfo: dw HeroAddressesThiharis3344.P3HeroDYDX: dw $ffff 3346.P4hero1y: db 13347.P4hero1x: db 13348.P4hero1xp: dw 0 3349.P4hero1move: db 20,203350.P4hero1mana: dw 10,103351.P4hero1manarec:db 5 3352.P4hero1status: db 2 3353.P4Hero1Units: db 34 | dw 030 | db 39 | dw 5 | db 41 | dw 32 | db 48 | dw 4 | db 55 | dw 031 | db 68 | dw 3 3354.P4Hero1StatAttack: db 13355.P4Hero1StatDefense: db 23356.P4Hero1StatKnowledge: db 1 3357.P4Hero1StatSpellDamage: db 1 3358.P4HeroSkills: db 16,0,0,0,0,03359.P4HeroLevel: db 13360.P4EarthSpells: db %0000 0000 3361.P4FireSpells: db %0000 00003362.P4AirSpells: db %0000 00003363.P4WaterSpells: db %0000 00003364.P4AllSchoolsSpells: db %0000 00003365.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 3366.P4HeroSpecificInfo: dw HeroAddressesSpaceExplorer013367.P4HeroDYDX: dw $ffff 3371endCampaignInfo:MSXHeroes.asm 2066 dephase2067 DS RomBlockSize- $ and (RomBlockSize-1),-1 20692070ds $4000,-1207420782080SaveDataBlock1: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2081 ds $10000,$ff2082SaveDataBlock2: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2083 ds $10000,$ff2084SaveDataBlock3: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2085 ds $10000,$ff2086SaveDataBlock4: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2087 ds $10000,$ff2088SaveDataBlock5: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2089 ds $10000,$ff2090SaveDataBlock6: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2091 ds $10000,$ff2092SaveDataBlock7: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2093 ds $10000,$ff2094SaveDataBlock8: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2095 ds $10000,$ff2096SaveDataBlock9: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2097 ds $10000,$ff2098SaveDataBlock10: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2099 ds $10000,$ff2100SaveDataBlock11: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 2101 db 0 2102 DS RomBlockSize- $ and (RomBlockSize-1),-1 2109endRom:2110 ds $800000 - endRom + $4000,$ff2111