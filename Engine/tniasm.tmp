MSXHeroes.asm1 fname "MSXHeroes.rom"2 org $40003MSXHeroes:47 dw "AB",init,0,0,0,0,0,0,"ASCII16X"811memInit: 12 phase $c0001315initMem: 16 call whereAmI 17 ld (romSlot),a18 ld hl,$000019 call findRam 20 ld (page0ram),a21 ld hl,$400022 call findRam 23 ld (page1ram),a24 ld hl,$800025 call findRam 26 ld (page2ram),a27 28 29 and $0330 add a,a31 add a,a32 ld b,a33 ld a,(page1ram)34 and $0335 or b36 add a,a37 add a,a38 ld b,a39 ld a,(page0ram)40 and $0341 or b42 ld b,a43 call $13844 and $c045 or b46 ld b,a47 ld (slot.ram),a48 49 and $f350 ld c,a51 ld a,(romSlot)52 and $0353 add a,a54 add a,a55 or c56 ld (slot.page1rom),a57 58 ld a,b59 and $cf60 ld c,a61 ld a,(romSlot)62 and $0363 add a,a64 add a,a65 add a,a66 add a,a67 or c68 ld (slot.page2rom),a69 70 ld a,b71 and $c372 ld c,a73 ld a,(romSlot)74 and $0375 ld b,a76 add a,a77 add a,a78 or b79 add a,a80 add a,a81 or c82 ld (slot.page12rom),a83 84 ld a,(romSlot)85 ld h,$8086 call $2487 88 ld a,(page1ram)89 ld h,$4090 call $2491 92 ld a,(romSlot)93 ld h,$4094 call $2495 96 ld b,397 ld de,.enaRam98 ld hl,$3ffd99 push hl100.ramOn: 101 push bc102 push de103 push hl104 ld a,(de)105 ld e,a106 ld a,(page0ram)107 call $14108 pop hl109 pop de110 pop bc111 inc de112 inc hl113 djnz .ramOn114 ld a,(page0ram)115 push af116 pop iy117 pop ix118 ld (tempStack),sp119 jp $1c121.done: 122 ld sp,(tempStack)123 ret125.enaRam: 126 jp .done128searchSlot: db 0129searchAddress: dw 0130tempStack: dw 0131page0ram: db 0132page1ram: db 0133page2ram: db 0134romSlot: db 0135138whereAmI: 139 call $138140 rrca141 rrca142 and $03143 ld c,a144 ld b,0145 ld hl,$fcc1146 add hl,bc147 or (hl)148 ld c,a149 inc hl150 inc hl151 inc hl152 inc hl153 ld a,(hl)154 and $0c155 or c156 ret157161findRam: 162 ld bc,4 *256+ 0163 ld (searchAddress),hl164 ld hl,$fcc1165.primary.loop: 166 push bc167 push hl168 ld a,(hl)169 bit 7,a170 jr nz,.secondary171 ld a,c172 call .check173.primary.next: 174 pop hl175 pop bc176 ld a,(searchSlot)177 ret c178 inc hl179 inc c180 djnz .primary.loop181 ld a,-1 182 ld (searchSlot),a183 ret185.secondary: 186 and $80187 or c188 ld b,4189.sec.loop: 190 push bc191 call .check192 pop bc193 jr c,.primary.next194 add a,4195 djnz .sec.loop196 jr .primary.next198.check: 199 ld (searchSlot),a200 call .read201 ld b,a202 cpl203 ld c,a204 call .write205 call .read206 cp c207 jr nz,.noram208 cpl209 call .write210 call .read211 cp b212 jr nz,.noram213 ld a,(searchSlot)214 scf215 ret216.noram: 217 ld a,(searchSlot)218 or a219 ret221.read: 222 push bc223 push hl224 ld a,(searchSlot)225 ld hl,(searchAddress)226 call $0c227 pop hl228 pop bc229 ret231.write: 232 push bc233 push hl234 ld e,a235 ld a,(searchSlot)236 ld hl,(searchAddress)237 call $14238 pop hl239 pop bc240 ret242initMem.length: equ $-initMem243 dephase244248249init:250 ld a,13 251 ld ($f3e9),a 252 ld ($f3ea),a 253 ld ($f3eb),a 255 ld a,13 256 di257 out ($99),a258 ld a,16+128259 out ($99),a260 xor a261 out ($9a),a262 ei263 out ($9a),a265 ld a,5 266 call $5f268 ld a,($180) 269 ld (TurboOn?),a271EXTROM: equ 0015fh272REDCLK: equ 001f5h274 ld c,$7 275 ld ix,REDCLK276 call EXTROM 277 ld (DayOfMonthEenheden),a279 ld c,$8 280 ld ix,REDCLK281 call EXTROM 282 ld (DayOfMonthTientallen),a284 ld c,$9 285 ld ix,REDCLK286 call EXTROM 287 ld (MonthEenheden),a289 ld c,$a 290 ld ix,REDCLK291 call EXTROM 292 ld (MonthTientallen),a294 ld c,$b 295 ld ix,REDCLK296 call EXTROM 297 ld (YearEenheden),a299 ld c,$c 300 ld ix,REDCLK301 call EXTROM 302 ld (YearTientallen),a304308312 ld a,($2d) 313 ld (ComputerID),a315316 ld hl,$F3DF317 ld de,VDP_0318 ld bc,8319 ldir321 ld hl,$FFE7322 ld de,VDP_8323 ld bc,30324 ldir325326 ld sp,$ff00327329 ld a,(VDP_8+1) 330 and %1111 1101 331 or %1000 0000 332 ld (VDP_8+1),a333 di334 out ($99),a335 ld a,9+128336 ei337 out ($99),a339340 ld a,(vdp_8)341 or 32 343 ld (vdp_8),a344 di345 out ($99),a346 ld a,8+128347 ei348 out ($99),a350 xor a351 ld (vdp_8+15),a352 di353 out ($99),a354 ld a,23+128355 ei356 out ($99),a358 di359 im 1360 ld bc,initMem.length361 ld de,initMem362 ld hl,memInit363 ldir364 call initMem366 xor a 367 ld (memblocks.1),a368 ld ($6000),a369 inc a370 ld (memblocks.2),a371 ld ($7000),a373374 ld hl,tempisr375 ld de,$38376 ld bc,6377 ldir379380 ld a,(vdp_0+1)381 or 2 382 ld (vdp_0+1),a383 di384 out ($99),a385 ld a,1+128386 ei387 out ($99),a388390 ld hl,engine391 ld de,engaddr392 ld bc,enlength 393 ldir395 ld hl,enginepage3 396 ld de,enginepage3addr 397 ld bc,enginepage3length 398 ldir400if MusicOn?401 call VGMRePlay402endif404 jp InitiateGame406 407tempisr: 408 push af409 in a,($99) 410 pop af411 ei 412 ret414417enginepage3:418 enginepage3.asm1phase $c0003StartAtTitleScreen?: equ 04StartOfTurnMessageOn?: equ 15MusicOn?: equ 16Music50PercentSpeed?: equ 08Promo?: equ 09CollectionOptionAvailable?: equ 010UnlimitedBuildsPerTurn?: equ 011DisplayNumbers1to6?: equ 013ShowNewlyBoughtBuildingFadingIn?: db 114DiskMenuClicked?: db 016StopSong: equ 25517TitleSong: equ 118CastleSong: equ 120BattleSong: equ 621WorldSong: equ 22426WorldPointer: dw GentleDesertMap022731InitiateGame:32 ld hl,CHMOUS33 call ExecuteLoaderRoutine 3540 ld a,141 ld (whichplayernowplaying?),a 4344 ld hl,pl1hero1y45 ld (plxcurrentheroAddress),hl46 ld (CurrentCursorSpriteCharacter),hl47 call SpriteInitialize 49 ld a,250 ld (PlayerThatGetsAttacked),a51 ld hl,pl2hero1y5253 ld (HeroThatGetsAttacked),hl 54 ld a,15558 call LoadSamplesAndPlaySong05963 if StartAtTitleScreen?64 call TitleScreen65 endif67StartGame:6869 call LoadWorldMapAndObjectLayerMap 70 ld hl,FindAndSetCastles 71 call ExecuteLoaderRoutine72 ld hl,PlaceHeroesInCastles 73 call ExecuteLoaderRoutine74 ld hl,ConvertMonstersObjectLayer 75 call ExecuteLoaderRoutine76 ld hl,ShuffleCastleMageGuildSpells 77 call ExecuteLoaderRoutine78 xor a79 ld (framecounter),a81 ld a,WorldSong82 ld (ChangeSong?),a869196103 .WhenExitingCombat:104 call CenterMousePointer105 call SetScreenOff106 call LoadWorldTiles 107 call SetMapPalette108 call SetBattleScreenBlock109 call LoadAllObjectsInVram 110 call SetScreenOff111 call LoadHud 114118 call SetInterruptHandler 119 call SetAllSpriteCoordinatesInPage2 120 call SetAllHeroPosesInVram 121 call InitiatePlayerTurn 122 call ClearMapPage0AndMapPage1123 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady124 call DoCopy126128138145148152161162 jp LevelEngine169CurrentSongBeingPlayed: db 0170LoadSamplesAndPlaySong0:171 ld a,(RePlayer_playing)172 and a173 ret nz175 ld a,0176 ld (CurrentSongBeingPlayed),a177 call RePlayer_Stop178 ld bc,0 179 ld a,usas2repBlock 180 ld hl,$8000+1181 call RePlayer_Play 182 call RePlayer_Tick 183 ret185SoundData: equ $8000186VGMRePlay:187 ld a,(slot.page12rom) 188 out ($a8),a189 ei190 191 ld a,FormatOPL4_ID192 call RePlayer_Detect 193 call RePlayerSFX_Initialize194 ld a,MusicOn? 195 and A196 ret z197 ld bc,0 198 ld a,usas2repBlock 199 ld hl,$8000+1200 call RePlayer_Play 201 call RePlayer_Tick202 call RePlayer_Stop203 ret205Main_Loop:206 halt207 call RePlayer_Tick208 jp Main_Loop 210RePlayer.asm14 MoonSound.asm16MoonSound_FM_BASE: equ 0C4H7MoonSound_STATUS: equ MoonSound_FM_BASE8MoonSound_FM1_ADDRESS: equ MoonSound_FM_BASE9MoonSound_FM1_DATA: equ MoonSound_FM_BASE + 110MoonSound_FM2_ADDRESS: equ MoonSound_FM_BASE + 211MoonSound_FM2_DATA: equ MoonSound_FM_BASE + 312MoonSound_WAVE_BASE: equ 07EH13MoonSound_WAVE_ADDRESS: equ MoonSound_WAVE_BASE14MoonSound_WAVE_DATA: equ MoonSound_WAVE_BASE + 11617MoonSound_Detect:18 call MoonSound_ReadStatusRegister 19 call MoonSound_ReadStatusRegister20 and a21 ret nz22 ld de,0503H23 call MoonSound_WriteFM2Register 24 ld a,02H25 call MoonSound_ReadWaveRegister 26 and 11100000B27 xor 00100000B28 ret nz29 ld de,0210H30 call MoonSound_WriteWaveRegister 31 scf32 ret34MoonSound_JumpTable:35 jp MoonSound_Process36 jp MoonSound_Mute37 jp MoonSound_Restore3942MoonSound_Process:43MoonSound_Process_Loop:44 ld a,(hl)45 inc hl46 add a,a47 jr nc,MoonSound_Process_FM48 jp p,MoonSound_WriteWave4950 cp ($c1 << 1) and ($ff)51 jp c,MoonSound_Call52 jp z,MoonSound_Return5354 cp ($c3 << 1) and ($ff)55 jp c,MoonSound_Jump56 jp z,MoonSound_WaitLoad5758 sub ($c4 << 1) and ($ff)59 jr z,MoonSound_WriteMemory60 rrca61 ret62MoonSound_Process_FM:63 jp p,MoonSound_WriteFM164 jp MoonSound_WriteFM26668MoonSound_WriteFM1:69 xor 80H - 270 ld c,MoonSound_FM1_DATA71 jp MoonSound_WriteBlock7375MoonSound_WriteFM2:76 xor 100H - 277 ld c,MoonSound_FM2_DATA78 jp MoonSound_WriteBlock8082MoonSound_WriteWave:83 xor 80H - 284 ld c,MoonSound_WAVE_DATA85 jp MoonSound_WriteBlock8788MoonSound_WaitLoad:89 in a,(MoonSound_STATUS)90 and 00000010B91 jr nz,MoonSound_WaitLoad92 jp MoonSound_Process_Loop9495MoonSound_WriteMemory:96 ld c,(hl)97 inc hl98 ld b,(hl)99 inc hl100 call MoonSound_WriteWaveMemory101 jp MoonSound_Process_Loop103106MoonSound_WriteBlock:107 ld e,a108 ld d,0109 ld iy,MoonSound_WriteBlock_Unrolled110 add iy,de111 sla e112 add iy,de113 jp (iy)114MoonSound_WriteBlock_Unrolled:115116 dec c | outi | inc c | outi117 dec c | outi | inc c | outi118 dec c | outi | inc c | outi119 dec c | outi | inc c | outi120 dec c | outi | inc c | outi121 dec c | outi | inc c | outi122 dec c | outi | inc c | outi123 dec c | outi | inc c | outi124 dec c | outi | inc c | outi125 dec c | outi | inc c | outi126 dec c | outi | inc c | outi127 dec c | outi | inc c | outi128 dec c | outi | inc c | outi129 dec c | outi | inc c | outi130 dec c | outi | inc c | outi131 dec c | outi | inc c | outi133 dec c | outi | inc c | outi134 dec c | outi | inc c | outi135 dec c | outi | inc c | outi136 dec c | outi | inc c | outi137 dec c | outi | inc c | outi138 dec c | outi | inc c | outi139 dec c | outi | inc c | outi140 dec c | outi | inc c | outi141 dec c | outi | inc c | outi142 dec c | outi | inc c | outi143 dec c | outi | inc c | outi144 dec c | outi | inc c | outi145 dec c | outi | inc c | outi146 dec c | outi | inc c | outi147 dec c | outi | inc c | outi148 dec c | outi | inc c | outi150 dec c | outi | inc c | outi151 dec c | outi | inc c | outi152 dec c | outi | inc c | outi153 dec c | outi | inc c | outi154 dec c | outi | inc c | outi155 dec c | outi | inc c | outi156 dec c | outi | inc c | outi157 dec c | outi | inc c | outi158 dec c | outi | inc c | outi159 dec c | outi | inc c | outi160 dec c | outi | inc c | outi161 dec c | outi | inc c | outi162 dec c | outi | inc c | outi163 dec c | outi | inc c | outi164 dec c | outi | inc c | outi165 dec c | outi | inc c | outi167 dec c | outi | inc c | outi168 dec c | outi | inc c | outi169 dec c | outi | inc c | outi170 dec c | outi | inc c | outi171 dec c | outi | inc c | outi172 dec c | outi | inc c | outi173 dec c | outi | inc c | outi174 dec c | outi | inc c | outi175 dec c | outi | inc c | outi176 dec c | outi | inc c | outi177 dec c | outi | inc c | outi178 dec c | outi | inc c | outi179 dec c | outi | inc c | outi180 dec c | outi | inc c | outi181 dec c | outi | inc c | outi182 dec c | outi | inc c | outi183184 jp MoonSound_Process_Loop186187MoonSound_Jump:188189 ld e,(hl)190 inc hl191 ld d,(hl)192 inc hl193 ld a,(RePlayer_currentBank)194 add a,(hl)195 inc hl196 add hl,de197 ld (RePlayer_currentBank),a198199 ld (7000H),a200 jp MoonSound_Process_Loop202204MoonSound_Call:205206 ld e,(hl)207 inc hl208 ld d,(hl)209 inc hl210 ld b,(hl)211 inc hl212 ld a,(RePlayer_currentBank)213214 ld (ix + 0),l215 ld (ix + 1),h216 ld (ix + 2),a217 inc ix218 inc ix219 inc ix220 add hl,de221 add a,b222 ld (RePlayer_currentBank),a223224 ld (7000H),a225 jp MoonSound_Process_Loop227229MoonSound_Return:230232 dec ix233 dec ix234 dec ix235 ld l,(ix + 0)236 ld h,(ix + 1)237 ld a,(ix + 2)238 ld (RePlayer_currentBank),a239240 ld (7000H),a241 jp MoonSound_Process_Loop243MoonSound_Mute:244 ld a,0BDH245 call MoonSound_ReadFM1Register246 and 11100000B247 ld e,a248 ld d,0BDH249 call MoonSound_WriteFM1Register250 ld b,9251MoonSound_MuteFM1_Loop:252 ld a,0B9H253 sub b254 ld d,a255 call MoonSound_ReadFM1Register256 and 11011111B257 ld e,a258 call MoonSound_WriteFM1Register259 djnz MoonSound_MuteFM1_Loop260 ld b,9261MoonSound_MuteFM2_Loop:262 ld a,0B9H263 sub b264 ld d,a265 call MoonSound_ReadFM2Register266 and 11011111B267 ld e,a268 call MoonSound_WriteFM2Register269 djnz MoonSound_MuteFM2_Loop270 ld b,24271MoonSound_MuteWave_Loop:272 ld a,80H273 sub b274 ld d,a275 call MoonSound_ReadWaveRegister276 and 00111111B277 or 01000000B278 ld e,a279 call MoonSound_WriteWaveRegister280 djnz MoonSound_MuteWave_Loop281 ret283MoonSound_Restore:284 ret286288MoonSound_WriteFM1Register:289 ld a,d290 out (MoonSound_FM1_ADDRESS),a291 nop 292 ld a,e293 out (MoonSound_FM1_DATA),a294 ret296298MoonSound_ReadFM1Register:299 out (MoonSound_FM1_ADDRESS),a300 nop 301 nop302 in a,(MoonSound_FM1_DATA)303 ret305307MoonSound_WriteFM2Register:308 ld a,d309 out (MoonSound_FM2_ADDRESS),a310 nop 311 ld a,e312 out (MoonSound_FM2_DATA),a313 ret315317MoonSound_ReadFM2Register:318 out (MoonSound_FM2_ADDRESS),a319 nop 320 nop321 in a,(MoonSound_FM2_DATA)322 ret324326MoonSound_WriteWaveRegister:327 ld a,d328 out (MoonSound_WAVE_ADDRESS),a329 cp (ix) 330 ld a,e331 out (MoonSound_WAVE_DATA),a332 ret334336MoonSound_ReadWaveRegister:337 out (MoonSound_WAVE_ADDRESS),a338 cp (ix) 339 nop340 in a,(MoonSound_WAVE_DATA)341 ret343344MoonSound_ReadStatusRegister:345 in a,(MoonSound_STATUS)346 ret348350MoonSound_WriteWaveMemory:351 ld a,06H352 out (MoonSound_WAVE_ADDRESS),a353 dec bc354 inc b355 inc c356 ld a,b357 ld b,c358 ld c,MoonSound_WAVE_DATA359MoonSound_WriteMemory_Loop:360 otir361 dec a362 jr nz,MoonSound_WriteMemory_Loop363 ret364RePlayer.asm5 RePlayerSFX.asm14RePlayerSFX_CHANNEL_COUNT: equ 26RePlayerSFX_Initialize:7 ld de,48 ld ix,RePlayerSFX_channels9 ld b,RePlayerSFX_CHANNEL_COUNT10RePlayerSFX_Initialize_Loop:11 ld (ix + 0),SFX_nop and 0FFH12 ld (ix + 1),SFX_nop >> 813 ld (ix + 2),usas2sfx1repBlock14 ld (ix + 3),115 add ix,de16 djnz RePlayerSFX_Initialize_Loop17 ret1923RePlayerSFX_PlayCh1: 24 ld iy,RePlayerSFX_channels25 di26 ld (iy + 0),c27 ld (iy + 1),b28 ld (iy + 2),usas2sfx1repBlock29 ei30 ld (iy + 3),131 ret3337RePlayerSFX_PlayCh2:38 ld iy,RePlayerSFX_channels + 439 di40 ld (iy + 0),c41 ld (iy + 1),b42 ld (iy + 2),usas2sfx2repBlock43 ei44 ld (iy + 3),145 ret47RePlayerSFX_Tick:48 ld a,(RePlayer_currentBank)49 push af50 ld ix,RePlayerSFX_channels51 ld b,RePlayerSFX_CHANNEL_COUNT52RePlayerSFX_Tick_Loop:53 dec (ix + 3)54 jr nz,RePlayerSFX_Tick_Next55 push bc56 ld l,(ix + 0)57 ld h,(ix + 1)58 ld a,(ix + 2)59 ld (RePlayer_currentBank),a6061 ld (7000H),a62 call RePlayer_Process63 ld (ix + 3),a64 ld a,(RePlayer_currentBank)65 ld (ix + 0),l66 ld (ix + 1),h67 ld (ix + 2),a68 pop bc69RePlayerSFX_Tick_Next:70 inc ix71 inc ix72 inc ix73 inc ix74 djnz RePlayerSFX_Tick_Loop75 pop af76 ld (RePlayer_currentBank),a7778 ld (7000H),a79 ret81RePlayerSFX_channels:82 ds RePlayerSFX_CHANNEL_COUNT * 48485SFX_nop: equ 8001H + 4 * 086SFX_click: equ 8001H + 4 * 187SFX_HeroWalking: equ 8001H + 4 * 188SFX_jump: equ 8001H + 4 * 289SFX_land: equ 8001H + 4 * 390SFX_coin: equ 8001H + 4 * 491SFX_meditate: equ 8001H + 4 * 492SFX_dash: equ 8001H + 4 * 593SFX_punch: equ 8001H + 4 * 694SFX_bouncingback: equ 8001H + 4 * 795SFX_beinghit: equ 8001H + 4 * 896SFX_test9: equ 8001H + 4 * 997SFX_shoot1: equ 8001H + 4 * 1098SFX_shoot2: equ 8001H + 4 * 1199SFX_enemyhit: equ 8001H + 4 * 11100SFX_shoot3: equ 8001H + 4 * 12101SFX_enemyexplosionsmall: equ 8001H + 4 * 12102SFX_shoot4: equ 8001H + 4 * 13103SFX_enemyexplosionbig: equ 8001H + 4 * 13104SFX_bossdemonshoot: equ 8001H + 4 * 13105SFX_arrow: equ 8001H + 4 * 14106SFX_roll: equ 8001H + 4 * 15107SFX_test16: equ 8001H + 4 * 16108SFX_bossdemoncleaveattack: equ 8001H + 4 * 16109SFX_test17: equ 8001H + 4 * 17110SFX_bossdemonbeinghit: equ 8001H + 4 * 17111SFX_test18: equ 8001H + 4 * 18112SFX_bossdemondead: equ 8001H + 4 * 18113RePlayer.asm7RePlayer_STACK_CAPACITY: equ 1288FormatOPL4_ID: equ 11012RePlayer_Detect:13 call RePlayer_Detect_Format14 jp c,RePlayer_SetJumpTable15 jp RePlayer_ClearJumpTable1719RePlayer_Detect_Format:2022 cp FormatOPL4_ID23 jp z,FormatOPL4_Detect2426 and a27 ret29FormatOPL4_Detect:30 call MoonSound_Detect31 ld hl,MoonSound_JumpTable32 ret3436RePlayer_SetJumpTable:37 ld de,RePlayer_Process38 ld bc,3 * 339 ldir40 ret4243RePlayer_ClearJumpTable:44 ld hl,RePlayer_Process45 ld de,RePlayer_Process + 146 ld bc,3 * 3 - 147 ld (hl),0C9H 48 ldir49 ret5153RePlayer_Play:54 add hl,bc55 add hl,bc56 add hl,bc57 add hl,bc58 ld b,a59 xor a60 ld (RePlayer_playing),a61 ld a,b62 ld ix,RePlayer_stack6364 ld (ix + 0),l65 ld (ix + 1),h66 ld (ix + 2),a67 inc ix68 inc ix69 inc ix70 ld a,171 ld (ix),a72 ld (RePlayer_stackPointer),ix73 ld (RePlayer_playing),a74 ret76RePlayer_Stop:77 xor a78 ld (RePlayer_playing),a79 call RePlayer_Mute80 ret82RePlayer_Resume:83 call RePlayer_Restore84 ld a,185 ld (RePlayer_playing),a86 ret8894RePlayer_Tick:95 ld a,(slot.page12rom) 96 out ($a8),a98 call RePlayerSFX_Tick100 ld a,(ChangeSong?)101 or a102 jr nz,.ChangeSong103 .DontChangeSong:105 ld a,(RePlayer_playing)106 and a107 ret z108 ld ix,(RePlayer_stackPointer)109 dec (ix)110 ret nz111 ld a,(RePlayer_currentBank)112 push af113114 dec ix115 dec ix116 dec ix117 ld l,(ix + 0)118 ld h,(ix + 1)119 ld a,(ix + 2)120 ld (RePlayer_currentBank),a121122 ld (7000H),a123 call RePlayer_Process124 ld b,a125 ld a,(RePlayer_currentBank)126127 ld (ix + 0),l128 ld (ix + 1),h129 ld (ix + 2),a130 inc ix131 inc ix132 inc ix133 ld (ix),b134 ld (RePlayer_stackPointer),ix135 pop af136 ld (RePlayer_currentBank),a137138 ld (7000H),a139 ret141 .ChangeSong:142 ld hl,CurrentSongBeingPlayed143 cp (hl)144 jr z,.DontChangeSong146 or a147 jp m,.StopSong149 150 cp WorldSong151 jr nz,.EndCheckRandomizeWorldSong152 ld a,r153 and 3154 add a,2156 cp BattleSong157 jr z,.battlesoundfoundbutnotinbattle159 cp 7160 jr c,.EndCheckRandomizeWorldSong161 .battlesoundfoundbutnotinbattle:162 ld a,1163 .EndCheckRandomizeWorldSong:164 166 ld (CurrentSongBeingPlayed),a167 ld c,a168 ld b,0169 push bc170 call RePlayer_Stop171 pop bc 173 ld a,usas2repBlock 174 ld hl,$8000+1175 call RePlayer_Play 177 xor a178 ld (ChangeSong?),a179 ret181 .StopSong:182 call RePlayer_Stop183 xor a184 ld (ChangeSong?),a185 ret186 189203220228240252RePlayer_playing:253 db 0254RePlayer_stackPointer:255 dw RePlayer_stack256RePlayer_stack:257 ds RePlayer_STACK_CAPACITY * 3 + 1258RePlayer_Process:259 db 0C9H, 0, 0260RePlayer_Mute:261 db 0C9H, 0, 0262RePlayer_Restore:263 db 0C9H, 0, 0264enginepage3.asm213ShortestPathTileHandlerQueue:214 ds 2*169,0216 ds 12,255 217ShortestPathBuffer: 218 ds 11 * 12,255220 ds 12,255 222CheckNormalRouteShortestPath:223224 di225227 ld a,(ix+HeroY) 228 ld (movementpath+0),a 229 ld a,(ix+HeroX) 230 ld (movementpath+1),a 231 xor a232 ld (movementpath+2),a 233 ld (movementpath+3),a 235 ld a,(ix+HeroY) 236 cp 6237 jp c,CheckReverseRoute238239 cp 128-6240 jp nc,CheckReverseRoute241 ld a,(ix+HeroX) 242 cp 6243 jp c,CheckReverseRoute244245 cp 128-6246 jp nc,CheckReverseRoute248 249 ld a,(mouseclickx) 250 sub a,(ix+HeroX) 251 jp p,.EndCheckNegativeX252 neg253 .EndCheckNegativeX:254 cp 6255 jp nc,CheckReverseRoute257 ld a,(mouseclicky) 258 sub a,(ix+HeroY) 259 jp p,.EndCheckNegativeY260 neg261 .EndCheckNegativeY:262 cp 6263 jp nc,CheckReverseRoute265 266 call setspritecharacter.SetMappositionMousePointsTo267 ld a,(hl)269 cp 16270 jr c,.noobstacle271 cp 24272 jp c,CheckReverseRoute 273 cp UnwalkableTerrainPieces 274 jp nc,CheckReverseRoute 275 .noobstacle:277 279 ld a,(ix+HeroY) 280 sub a,5-1 281 ld h,0282 ld l,a283 ld de,(maplenght)284 call MultiplyHlWithDE 285 ld de,mapdata286 add hl,de287 289 ld a,(ix+HeroX) 290 sub a,5291 ld e,a292 ld d,0293 add hl,de294 297 298 ld a,11 299 ld de,ShortestPathBuffer300 .CopyColumn:301 ld b,11 302 .CopyRow:303 ex af,af'304 ld a,(hl)306 cp 16307 jr c,.noobstacle2308 cp 24309 jr c,.obstacle2 310 cp UnwalkableTerrainPieces 311 jr c,.noobstacle2 312 313 .obstacle2:314 ld a,200315 jp .ForeGroundFound 316 317 .noobstacle2:318 xor a320323 .ForeGroundFound:324 ld (de),a325 ex af,af'326 inc hl327 inc de328 djnz .CopyRow329 ld bc,128-11 330 add hl,bc331 inc de 332 dec a333 jp nz,.CopyColumn334 335 340 ld hl,ShortestPathBuffer+5+(5*12) 341 ld (hl),64 342 ld (ShortestPathTileHandlerQueue),hl 343 ld a,1 344 ld (.SelfModifyingCodeDistanceNumber),a345 ld b,1 346 ld c,0 348 ld ix,ShortestPathTileHandlerQueue 349 ld iy,ShortestPathTileHandlerQueue 351 .HandleTileLoop:352 call .HandleTile353 inc ix354 inc ix355 ld l,(ix)356 ld h,(ix+1) 357 djnz .HandleTileLoop359 ld a,(.SelfModifyingCodeDistanceNumber)360 inc a 361 ld (.SelfModifyingCodeDistanceNumber),a362 ld a,c363 or a364 ld b,a365 ld c,0366 jp nz,.HandleTileLoop368 .End:369 xor a370 ld (ShortestPathBuffer+5+(5*12)),a 371 372 ld ix,(plxcurrentheroAddress)374 375 ld a,(mouseclickx) 376 ld h,0377 ld l,a378 ld a,(ix+HeroX) 379 sub a,5380 ld d,0381 ld e,a382 or a383 sbc hl,de 384 push hl386 ld a,(mouseclicky) 387 ld h,0388 ld l,a389 ld a,(ix+HeroY) 390 sub a,5391 ld d,0392 ld e,a393 or a394 sbc hl,de 395 ld de,12 396 call MultiplyHlWithDE 397 pop de398 add hl,de399 ld de,ShortestPathBuffer400 add hl,de 401 ld a,(hl) 402 or a403406 jp z,CheckReverseRoute407 jp m,CheckReverseRoute411 add a,a 412 ld d,0413 ld e,a414 ld ix,movementpath415 add ix,de416 417 ld (ix+2),0 418 ld (ix+3),0 420 .NextStepLoop:421 ex af,af'422 call .FindDirectionForThisStep423 ex af,af'424 ld (ix),b 425 ld (ix+1),c 426 dec ix427 dec ix 428 sub a,2429 jp nz,.NextStepLoop430 ret432 .FindDirectionForThisStep:433 ld a,(hl) 434 dec a 436 ld b,+0 437 ld c,+1 438 dec hl 439 cp (hl) 440 ret z442443 ld c,-1 444 inc hl445 inc hl 446 cp (hl) 447 ret z449450 dec b451 ld c,+0 452 ld de,11453 add hl,de 454 cp (hl) 455 ret z457 ld b,+1 459 ld de,-24460 add hl,de 461 cp (hl) 462 ret z464466 inc c467 dec hl 468 cp (hl) 469 ret z471472 ld c,-1 473 inc hl474 inc hl 475 cp (hl) 476 ret z478 ld b,-1 480 ld de,24481 add hl,de 482 cp (hl) 483 ret z485486 ld c,+1 487 dec hl488 dec hl 491 ret493 .HandleTile:494 495 ld de,-13496 add hl,de 497 ld a,(hl)498 or a499 call z,.MarkTileAndPutInQueue500 501 inc hl 502 ld a,(hl)503 or a504 call z,.MarkTileAndPutInQueue506 inc hl 507 ld a,(hl)508 or a509 call z,.MarkTileAndPutInQueue511 ld de,10512 add hl,de 513 ld a,(hl)514 or a515 call z,.MarkTileAndPutInQueue517 inc hl 518 inc hl 519 ld a,(hl)520 or a521 call z,.MarkTileAndPutInQueue523 add hl,de 524 ld a,(hl)525 or a526 call z,.MarkTileAndPutInQueue528 inc hl 529 ld a,(hl)530 or a531 call z,.MarkTileAndPutInQueue533 inc hl 534 ld a,(hl)535 or a536 ret nz538 .MarkTileAndPutInQueue:539 inc iy540 inc iy 541 ld (iy),l542 ld (iy+1),h 543 .SelfModifyingCodeDistanceNumber: equ $+1544 ld (hl),255545 inc c 546 ret553TitleScreen:554 ld a,(slot.page12rom) 555 out ($a8),a 556 ld a,TitleScreenCodeblock 557 call block34 558 jp HandleTitleScreenCode560ExecuteLoaderRoutine:561 ld a,(slot.page1rom) 562 out ($a8),a 563 ld a,Loaderblock 564 call block12 565 jp (hl)567CenterMousePointer:568 ld a,106569 ld (spat+0),a570 ld (spat+4),a571 ld (spat+8),a572 ld a,104573 ld (spat+1),a574 ld (spat+5),a575 ld (spat+9),a576 ret578CopyRamToVram: 579 ld (AddressToWriteFrom),bc580 ld (NXAndNY),de582 ld a,(activepage) 583 or a584 jp nz,CopyRamToVramCorrectedCastleOverview.SetAddress2585 ld de,$8000586 add hl,de 587 jp CopyRamToVramCorrectedCastleOverview.SetAddress2589CopyRamToVramCorrectedWithoutActivePageSetting:590 ex af,af' 592 in a,($a8) 593 push af594 ld a,(memblocks.1)595 push af596 ld a,(memblocks.2)597 push af599 ld a,(slot.page12rom) 600 out ($a8),a 601 ex af,af'602 call block1234 604 ld (AddressToWriteFrom),hl605 ld (NXAndNY),bc606 ld (AddressToWriteTo),de607 call CopyRamToVramCorrectedCastleOverview.AddressesSet609 pop af610 call block34611 pop af612 call block12613 pop af614 out ($a8),a 615 ret617AreWeWritingToVram?: db 0618CopyRamToVramCorrectedCastleOverview:619 ex af,af' 621 in a,($a8) 622 push af623 ld a,(memblocks.1)624 push af625 ld a,(memblocks.2)626 push af628 ld a,(slot.page12rom) 629 out ($a8),a 630 ex af,af'631 call block1234 633 call .go 635 pop af636 call block34637 pop af638 call block12639 pop af640 out ($a8),a 641 ret643 .go:644 ld (AddressToWriteFrom),hl645 ld (NXAndNY),bc647 ld a,(activepage) 648 or a649 ld hl,$0000650 jr nz,.SetAddress 651 ld hl,$8000652 .SetAddress:653 add hl,de654 .SetAddress2:655 ld (AddressToWriteTo),hl656 .AddressesSet:657 ld c,$98 658 ld de,128 660 .loop:661 call .WriteOneLine662 ld a,(NXAndNY+1)663 dec a664 ld (NXAndNY+1),a665 jp nz,.loop666 ret668 .WriteOneLine:669 ld hl,(AddressToWriteTo) 670 add hl,de 671 ld (AddressToWriteTo),hl673 ld a,1674 ld (AreWeWritingToVram?),a676 xor a 679 call SetVdp_Write 681 ld hl,(AddressToWriteFrom) 682 add hl,de 683 ld (AddressToWriteFrom),hl684 ld a,(NXAndNY)685688 ld b,a689 otir691 xor a692 ld (AreWeWritingToVram?),a694 ret696701CopyRamToVramPage3ForBattleEngine:702704 in a,($a8) 705 push af706 ld a,(memblocks.1)707 push af708 ld a,(memblocks.2)709 push af710 ld a,(slot.page12rom) 711 out ($a8),a 713 ld a,(BlockToReadFrom)715 call block1234 717 call .go 719 pop af720 call block34721 pop af722 call block12723 pop af724 out ($a8),a 725 ret727 .go:728 ld c,$98 729 ld de,128 731 .loop:732 call .WriteOneLine733 ld a,(NXAndNY+1)734 dec a735 ld (NXAndNY+1),a736 jp nz,.loop737 ret739 .WriteOneLine:740 ld a,1741 ld hl,(AddressToWriteTo) 742 add hl,de 743 ld (AddressToWriteTo),hl744 di745 call SetVdp_WriteWithoutDisablingOrEnablingInt 747 ld hl,(AddressToWriteFrom) 748 add hl,de 749 ld (AddressToWriteFrom),hl750 ld a,(NXAndNY)751 ld b,a752 otir753 ei754 ret757764769771773775BattleTextPointer: dw 255776BattleRound: db 255777SetBattleText?: db 255 778BattleText8: db 255 | dw 255 | db 255 ,"           ",255 779BattleText7: db 255 | dw 255 | db 255 ,"           ",255 780BattleText6: db 255 | dw 255 | db 255 ,"           ",255 781BattleText5: db 255 | dw 255 | db 255 ,"           ",255 782BattleText4: db 255 | dw 255 | db 255 ,"           ",255 783BattleText3: db 255 | dw 255 | db 255 ,"           ",255 784BattleText2: db 255 | dw 255 | db 255 ,"           ",255 785BattleText1: db 255 | dw 255 | db 255 ,"           ",255 786BattleTextQ: db 255 | dw 255 | db 255 ,"           ",255 789RemoveDeadMonstersNeutralMonster?: ds 1790AddressOfMonsterAmountHerocollidedWithOnMap: ds 2792FightGuardTowerMonster?: ds 1793GuardTowerMonsterLevel: ds 1794MonsterHerocollidedWithOnMap: ds 1795XAddressOfMonsterHerocollidedWithOnMap: ds 1796MonsterHerocollidedWithOnMapAmount: ds 1798MonsterMovementPathPointer: db 0799MonsterMovementAmountOfSteps: db 0800MonsterMovementPath: ds LenghtMonsterMovementPathTable801LenghtMonsterMovementPathTable: equ 50803ShowExplosionSprite?: db 0804ExplosionSpriteStep: ds 1806LeftOrRightPlayerLostEntireArmy?: ds 1807809MonsterThatIsRetaliating: ds 2810MonsterThatIsBeingAttacked: ds 2811MonsterThatIsBeingAttackedX: ds 1812MonsterThatIsBeingAttackedNX: ds 1813MonsterThatIsBeingAttackedY: ds 1814MonsterThatIsBeingAttackedNY: ds 1816AEOSpellDamage: ds 2817MonsterThatWasDamagedPreviousCheck: ds 2818CursorXWhereSpellWasCast: ds 1819CursorYWhereSpellWasCast: ds 1821SpellAnimationStep: ds 1822SpellAnimationSpeed: ds 2823SpellAnimationGfxBlock: ds 1825ActiveMonsterAttackingDirection: ds 1826IsCursorOnATile?: db 1827WasCursorOnATilePreviousFrame?: db 1828IsCursorOnATileThisFrame?: db 1829Wait1FrameBeforeWePutGridTile?: db 0830SpellExplanationDisplayed?: db 0831SpellSelected?: db 0 832CastSpell?: db 0 833SpellBookButtonPressed?: db 0834SelectedElementInSpellBook: db 0 835LeftPlayerAlreadyCastSpellThisRound?: ds 1836RightPlayerAlreadyCastSpellThisRound?: ds 1837WaitButtonPressed?: db 0838AutoCombatButtonPressed?: db 0839DefendButtonPressed?: db 0840RetreatButtonPressed?: db 0841SurrenderButtonPressed?: db 0842ShootProjectile?: db 0843IsThereAnyEnemyRightNextToActiveMonster?: db 0844MayRangedAttackBeRetaliated?: ds 1845SetMonsterInBattleFieldGrid?: db 1846LenghtBattleField: equ 28847HeightBattleField: equ 09848MovementLenghtMonsters: equ 8849RepairAmountAboveMonster?: db 1850AmountMonsterBeforeBeingAttacked: ds 2852BufferCursorSpriteChar: ds 2853BufferCursorSpriteCol: ds 2855ListOfMonstersToPut:856 857ListOfMonstersToPutMonster1: db 001 | dw 100 | db 012 + (01*08), 056 + (00*16) + 16858ListOfMonstersToPutMonster2: db 002 | dw 500 | db 012 + (00*08), 056 + (01*16) + 16859ListOfMonstersToPutMonster3: db 003 | dw 600 | db 012 + (00*08), 056 + (03*16) + 16860ListOfMonstersToPutMonster4: db 004 | dw 700 | db 012 + (01*08), 056 + (04*16) + 16861ListOfMonstersToPutMonster5: db 005 | dw 800 | db 012 + (01*08), 056 + (06*16) + 16862ListOfMonstersToPutMonster6: db 006 | dw 900 | db 012 + (00*08), 056 + (07*16) + 16864ListOfMonstersToPutMonster7: db 001 | dw 001 | db 012 + (27*08), 056 + (00*16) + 16865ListOfMonstersToPutMonster8: db 000 | dw 000 | db 012 + (26*08), 056 + (01*16) + 16866ListOfMonstersToPutMonster9: db 007 | dw 610 | db 012 + (26*08), 056 + (03*16) + 16867ListOfMonstersToPutMonster10: db 007 | dw 001 | db 012 + (27*08), 056 + (04*16) + 16868ListOfMonstersToPutMonster11: db 007 | dw 810 | db 012 + (25*08), 056 + (06*16) + 16869ListOfMonstersToPutMonster12: db 007 | dw 910 | db 012 + (26*08), 056 + (07*16) + 16871 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 255872BattleFieldGrid: 873 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000874 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255875 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000876 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255877 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000878 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255879 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 880 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255881882EndBattleFieldGrid:883 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 255885BlockToReadFrom: ds 1886AddressToWriteTo: ds 2887AddressToWriteFrom: ds 2888NXAndNY: ds 2890RepairARowOf12PixelsFromBottomOfPage2ToPage3:891 db 0,0,188+16,2892 db 0,0,172+16,3893 db 0,1,12,0894 db 0,0,$d0 896TransparantImageBattle:897 db 000,000,000,3898 db 100,000,100,255899 db 000,000,000,0900 db 0,%0000 0000,$98902TransparantImageBattleRecoverySprite:903 db 000,000,000,3904 db 100,000,100,255905 db 000,000,000,0906 db 0,%0000 0000,$98907 908EraseMonster:909 db 000,000,000,2910 db 000,000,000,255911 db 000,000,000,0912 db 0,%0000 0000,$d0914PutMonsterAmountOnBattleField:915 db 240,000,249,255916 db 000,000,000,255917 db 000,000,007,000918 db 0,%0000 0000,$98920ClearMonsterAmountOnBattleField:921 db 240,000,249,255922 db 000,000,000,255923 db 000,000,007,000924 db 0,%0000 0000,$d0926SmoothCornerPutMonsterAmount:927 db 240,000,249,000928 db 001,000,249,000929 db 001,000,007,000930 db 0,%0000 0000,$90932MonstersSortedOnSpeed:933 dw Monster1 934 dw Monster2 935 dw Monster3 936 dw Monster4 937 dw Monster5 938 dw Monster6 939 dw Monster7 940 dw Monster8 941 dw Monster9 942 dw Monster10 943 dw Monster11 944 .LastMonster:945 dw Monster12 947OrderOfMonstersFromHighToLow:948 dw Monster0 949 dw Monster1 950 dw Monster2 951 dw Monster3 952 dw Monster4 953 dw Monster5 954 dw Monster6 955 dw Monster7 956 dw Monster8 957 dw Monster9 958 dw Monster10 959 dw Monster11 960 dw Monster12 961 dw Monster13 963BrokenArrow?: ds 1 965NeutralEnemyDied?: db 0966SwitchToNextMonster?: db 0967MoVeMonster?: db 0968MonsterMovingRight?: db 0969MonsterAttackingRight?: db 0970MonsterAnimationSpeed: db 0971MonsterAnimationStep: db 0972AttackMonster?: db 0973HandleRetaliation?: db 0974MonsterDied?: db 0975MoveMonsterToY: ds 1976MoveMonsterToX: ds 1977978CurrentActiveMonster: db 1979TotalAmountOfMonstersOnBattleField: equ 1 + 12 981CasualtiesOverviewCopy:982 db 020,000,212+16,000983 db 068,000,144,000984 db 132,000,022,000985 db 000,000,$d0 987MonsterY: equ 0988MonsterX: equ MonsterY+1989MonsterYPrevious: equ MonsterX+1990MonsterXPrevious: equ MonsterYPrevious+1991MonsterSYSX: equ MonsterXPrevious+1992MonsterBlock: equ MonsterSYSX+2993MonsterNY: equ MonsterBlock+1994MonsterNX: equ MonsterNY+1995MonsterNumber: equ MonsterNX+1996MonsterNYPrevious: equ MonsterNumber+1997MonsterNXPrevious: equ MonsterNYPrevious+1998MonsterAmount: equ MonsterNXPrevious+1999MonsterHP: equ MonsterAmount+21000MonsterStatus: equ MonsterHP+11001MonsterStatusEffect1: equ MonsterStatus+11002MonsterStatusEffect2: equ MonsterStatusEffect1+11003MonsterStatusEffect3: equ MonsterStatusEffect2+11004MonsterStatusEffect4: equ MonsterStatusEffect3+11005MonsterStatusEffect5: equ MonsterStatusEffect4+11006LenghtMonsterTable: equ Monster1-Monster01008AmountOfStatusEffects: equ 51009MonsterStatusEnabled: equ 01010MonsterStatusWaiting: equ 11011MonsterStatusDefending: equ 21012MonsterStatusTurnEnded: equ 310161017Monster0:1018.y: db 070 + (00*16) - 641019.x: db 0241020.yprevious: db 070 + (00*16) - 641021.xprevious: db 0241022.SYSXinROM: dw $4000 + (017*128) + (000/2) - 1281023.RomBlock: db BattleFieldObjectsBlock1024.ny: db 20 + 11025.nx: db 161026.Number: db 0001027.nyprevious: db 20 + 11028.nxprevious: db 161029.amount: dw 101030.hp: db 101031.status: db 0 1032.statusEffect1: db 0 1033.statusEffect2: db 0 1034.statusEffect3: db 0 1035.statusEffect4: db 0 1036.statusEffect5: db 0 1039Monster1:1040.y: ds 11041.x: ds 11042.yprevious: ds 11043.xprevious: ds 11044.SYSXinROM: ds 21045.RomBlock: ds 11046.ny: ds 11047.nx: ds 11048.Number: ds 11049.nyprevious: ds 11050.nxprevious: ds 11051.amount: ds 21052.hp: ds 11053.status: db 0 1054.statusEffect1: db 0 1055.statusEffect2: db 0 1056.statusEffect3: db 0 1057.statusEffect4: db 0 1058.statusEffect5: db 0 1071Monster2:1072.y: ds 11073.x: ds 11074.yprevious: ds 11075.xprevious: ds 11076.SYSXinROM: ds 21077.RomBlock: ds 11078.ny: ds 11079.nx: ds 11080.Number: ds 11081.nyprevious: ds 11082.nxprevious: ds 11083.amount: ds 21084.hp: ds 11085.status: db 0 1086.statusEffect1: db 0 1087.statusEffect2: db 0 1088.statusEffect3: db 0 1089.statusEffect4: db 0 1090.statusEffect5: db 0 1092Monster3:1093.y: db 056 + (03*16) - 16 - 81094.x: db 012 + (04*08)1095.yprevious: db 056 + (03*16) - 16 - 81096.xprevious: db 012 + (04*08)1097.SYSXinROM: dw 0001098.RomBlock: db 0001099.ny: db 16 + 81100.nx: db 161101.Number: db 003 1102.nyprevious: db 16 + 81103.nxprevious: db 161104.amount: dw 6771105.hp: db 101106.status: db 0 1107.statusEffect1: db 0 1108.statusEffect2: db 0 1109.statusEffect3: db 0 1110.statusEffect4: db 0 1111.statusEffect5: db 0 1113Monster4:1114.y: db 056 + (00*16) - 321115.x: db 012 + (11*08)1116.yprevious: db 056 + (00*16) - 321117.xprevious: db 012 + (11*08)1118.SYSXinROM: dw 0001119.RomBlock: db 0001120.ny: db 321121.nx: db 161122.Number: db 004 1123.nyprevious: db 321124.nxprevious: db 161125.amount: dw 8231126.hp: db 101127.status: db 0 1128.statusEffect1: db 0 1129.statusEffect2: db 0 1130.statusEffect3: db 0 1131.statusEffect4: db 0 1132.statusEffect5: db 0 1134Monster5:1135.y: db 056 + (08*16) - 16 - 41136.x: db 012 + (01*08)1137.yprevious: db 056 + (08*16) - 16 - 41138.xprevious: db 012 + (01*08)1139.SYSXinROM: dw 0001140.RomBlock: db 0001141.ny: db 16 + 41142.nx: db 161143.Number: db 005 1144.nyprevious: db 16 + 41145.nxprevious: db 161146.amount: dw 9991147.hp: db 101148.status: db 0 1149.statusEffect1: db 0 1150.statusEffect2: db 0 1151.statusEffect3: db 0 1152.statusEffect4: db 0 1153.statusEffect5: db 0 1155Monster6:1156.y: db 056 + (01*16) - 64 - 41157.x: db 012 + (20*08)1158.yprevious: db 056 + (01*16) - 64 - 41159.xprevious: db 012 + (20*08)1160.SYSXinROM: dw 0001161.RomBlock: db 0001162.ny: db 64 + 41163.nx: db 641164.Number: db 006 1165.nyprevious: db 64 + 41166.nxprevious: db 641167.amount: dw 471168.hp: db 011169.status: db 0 1170.statusEffect1: db 0 1171.statusEffect2: db 0 1172.statusEffect3: db 0 1173.statusEffect4: db 0 1174.statusEffect5: db 0 11761178Monster7:1179.y: db 056 + (03*16) - 64 - 41180.x: db 012 + (10*08)1181.yprevious: db 056 + (0*16) - 64 - 41182.xprevious: db 012 + (10*08)1183.SYSXinROM: dw 0001184.RomBlock: db 0001185.ny: db 64 + 41186.nx: db 561187.Number: db 002 1188.nyprevious: db 64 + 41189.nxprevious: db 561190.amount: dw 21191.hp: db 101192.status: db 0 1193.statusEffect1: db 0 1194.statusEffect2: db 0 1195.statusEffect3: db 0 1196.statusEffect4: db 0 1197.statusEffect5: db 0 1199Monster8:1200.y: db 056 + (02*16) - 32 1201.x: db 012 + (17*08) 1202.yprevious: db 056 + (02*16) - 32 1203.xprevious: db 012 + (17*08) 1204.SYSXinROM: dw 0001205.RomBlock: db 0001206.ny: db 321207.nx: db 161208.Number: db 007 1209.nyprevious: db 321210.nxprevious: db 161211.amount: dw 9801212.hp: db 101213.status: db 0 1214.statusEffect1: db 0 1215.statusEffect2: db 0 1216.statusEffect3: db 0 1217.statusEffect4: db 0 1218.statusEffect5: db 0 1220Monster9:1221.y: db 056 + (06*16) - 321222.x: db 012 + (27*08)1223.yprevious: db 056 + (06*16) - 321224.xprevious: db 012 + (27*08)1225.SYSXinROM: dw 0001226.RomBlock: db 0001227.ny: db 321228.nx: db 161229.Number: db 004 1230.nyprevious: db 321231.nxprevious: db 161232.amount: dw 5551233.hp: db 101234.status: db 0 1235.statusEffect1: db 0 1236.statusEffect2: db 0 1237.statusEffect3: db 0 1238.statusEffect4: db 0 1239.statusEffect5: db 0 1241Monster10:1242.y: db 056 + (07*16) - 16 - 81243.x: db 012 + (22*08)1244.yprevious: db 056 + (07*16) - 16 - 81245.xprevious: db 012 + (22*08)1246.SYSXinROM: dw 0001247.RomBlock: db 0001248.ny: db 16 + 81249.nx: db 161250.Number: db 003 1251.nyprevious: db 16 + 81252.nxprevious: db 161253.amount: dw 3331254.hp: db 101255.status: db 0 1256.statusEffect1: db 0 1257.statusEffect2: db 0 1258.statusEffect3: db 0 1259.statusEffect4: db 0 1260.statusEffect5: db 0 1262Monster11:1263.y: db 056 + (08*16) - 16 - 41264.x: db 012 + (21*08)1265.yprevious: db 056 + (08*16) - 16 - 41266.xprevious: db 012 + (21*08)1267.SYSXinROM: dw 0001268.RomBlock: db 0001269.ny: db 16 + 41270.nx: db 161271.Number: db 005 1272.nyprevious: db 16 + 41273.nxprevious: db 161274.amount: dw 8231275.hp: db 101276.status: db 0 1277.statusEffect1: db 0 1278.statusEffect2: db 0 1279.statusEffect3: db 0 1280.statusEffect4: db 0 1281.statusEffect5: db 0 1283Monster12:1284.y: db 056 + (07*16) - 16 - 41285.x: db 012 + (10*08)1286.yprevious: db 056 + (07*16) - 16 - 41287.xprevious: db 012 + (10*08)1288.SYSXinROM: dw 0001289.RomBlock: db 0001290.ny: db 16 + 41291.nx: db 161292.Number: db 005 1293.nyprevious: db 16 + 41294.nxprevious: db 161295.amount: dw 9001296.hp: db 101297.status: db 0 1298.statusEffect1: db 0 1299.statusEffect2: db 0 1300.statusEffect3: db 0 1301.statusEffect4: db 0 1302.statusEffect5: db 0 13041306Monster13:1307.y: db 0401308.x: db 1401309.yprevious: db 1001310.xprevious: db 1401311.SYSXinROM: dw 0001312.RomBlock: db 0001313.ny: db 641314.nx: db 561315.Number: db 0011316.nyprevious: db 641317.nxprevious: db 561318.amount: dw 101319.hp: db 101320.status: db 0 1321.statusEffect1: db 0 1322.statusEffect2: db 0 1323.statusEffect3: db 0 1324.statusEffect4: db 0 1325.statusEffect5: db 0 1327Monster14:1328.y: db 0401329.x: db 2001330.yprevious: db 1001331.xprevious: db 2001332.SYSXinROM: dw 0001333.RomBlock: db 0001334.ny: db 641335.nx: db 401336.Number: db 0011337.nyprevious: db 641338.nxprevious: db 401339.amount: dw 101340.hp: db 101341.status: db 0 1342.statusEffect1: db 0 1343.statusEffect2: db 0 1344.statusEffect3: db 0 1345.statusEffect4: db 0 1346.statusEffect5: db 0 1348ClearMapPage0AndMapPage1:1349 ld hl,mappage01350 ld (hl),101351 ld de,mappage0+11352 ld bc,TilesPerColumn*TilesPerRow * 2 - 11353 ldir1354 ret13561361CopyPage0To1:1362 db 0,0,0,01363 db 0,0,0,11364 db 0,1,0,11365 db 0,0,$d0 1366CopyPage1To0:1367 db 0,0,0,11368 db 0,0,0,01369 db 0,1,212,01370 db 0,0,$d0 1372CopyPage0To1PlayingField:1373 db 0,0,0,01374 db 0,0,0,11375 db 0,1,212,01376 db 0,0,$d0 13791380TextNumber: 1381db "31456",2551383HeroOverViewFirstWindowButtonOffSX: equ 0001384HeroOverViewFirstWindowButtonOffSY: equ 1221385HeroOverViewFirstWindowButtonMouseOverSX: equ 0001386HeroOverViewFirstWindowButtonMouseOverSY: equ 1331387HeroOverViewFirstWindowButtonMouseClickedSX: equ 0001388HeroOverViewFirstWindowButtonMouseClickedSY: equ 1441390HeroOverViewFirstWindowButton1DX: equ HeroOverViewFirstWindowchoicesDX + 0081391HeroOverViewFirstWindowButton1DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (0 * 14)1392HeroOverViewFirstWindowButton2DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (1 * 14)1393HeroOverViewFirstWindowButton3DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (2 * 14)1394HeroOverViewFirstWindowButton4DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (3 * 14)1395HeroOverViewFirstWindowButton5DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (4 * 14)1396HeroOverViewFirstWindowButton6DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (5 * 14) 1398ButtonTableLenght: equ 91399HeroOverviewWindowButton_de: equ 01400HeroOverviewWindowButtonStatus: equ 21401HeroOverviewWindowButtonYtop: equ 31402HeroOverviewWindowButtonYbottom: equ 41403HeroOverviewWindowButtonXleft: equ 51404HeroOverviewWindowButtonXright: equ 61405TextAddress: equ 71406Buttonnynx: equ 71407HeroOverviewWindowAmountOfButtons:equ -11409HeroOverviewFirstWindowButtonTableAmountOfButtons: db 51410HeroOverviewFirstWindowButtonTable: 1411 dw $0000 + (HeroOverViewFirstWindowButton1DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton1DY,HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton11412 dw $0000 + (HeroOverViewFirstWindowButton2DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton21413 dw $0000 + (HeroOverViewFirstWindowButton3DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton31414 dw $0000 + (HeroOverViewFirstWindowButton4DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton41415 dw $0000 + (HeroOverViewFirstWindowButton5DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton6DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton51417HeroOverViewSkillsButtonOffSX: equ 0961418HeroOverViewSkillsButtonOffSY: equ 139-11419HeroOverViewSkillsButtonMouseOverSX: equ 0961420HeroOverViewSkillsButtonMouseOverSY: equ 150-11421HeroOverViewSkillsButtonMouseClickedSX: equ 0961422HeroOverViewSkillsButtonMouseClickedSY: equ 161-11424HeroOverViewSkillsButton1DX: equ HeroOverViewSkillsWindowDX + 0081425HeroOverViewSkillsButton1DY: equ HeroOverViewSkillsWindowDY + 025 + (0 * 14)1426HeroOverViewSkillsButton2DY: equ HeroOverViewSkillsWindowDY + 025 + (1 * 14)1427HeroOverViewSkillsButton3DY: equ HeroOverViewSkillsWindowDY + 025 + (2 * 14)1428HeroOverViewSkillsButton4DY: equ HeroOverViewSkillsWindowDY + 025 + (3 * 14)1429HeroOverViewSkillsButton5DY: equ HeroOverViewSkillsWindowDY + 025 + (4 * 14)1430HeroOverViewSkillsButton6DY: equ HeroOverViewSkillsWindowDY + 025 + (5 * 14) 1431HeroOverViewSkillsButton7DY: equ HeroOverViewSkillsWindowDY + 025 + (6 * 14) 1432HeroOverViewSkillsButton8DY: equ HeroOverViewSkillsWindowDY + 025 + (7 * 14) 1433HeroOverViewSkillsButtonNX: equ 1341435HeroOverviewSkillsButtonTableAmountOfButtons: db 61436HeroOverviewSkillsButtonTable: 1437 dw $0000 + (HeroOverViewSkillsButton1DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton1DY,HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton11438 dw $0000 + (HeroOverViewSkillsButton2DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton21439 dw $0000 + (HeroOverViewSkillsButton3DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton31440 dw $0000 + (HeroOverViewSkillsButton4DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton41441 dw $0000 + (HeroOverViewSkillsButton5DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton51442 dw $0000 + (HeroOverViewSkillsButton6DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton7DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton61446HeroOverViewSpellBookButton1OffSX: equ 1921447HeroOverViewSpellBookButton1OffSY: equ 0001448HeroOverViewSpellBookButton1MouseOverSX: equ 2021449HeroOverViewSpellBookButton1MouseOverSY: equ 0001450HeroOverViewSpellBookButton1MouseClickedSX: equ 2121451HeroOverViewSpellBookButton1MouseClickedSY: equ 0001453HeroOverViewSpellBookButton2OffSX: equ 1921454HeroOverViewSpellBookButton2OffSY: equ 0351455HeroOverViewSpellBookButton2MouseOverSX: equ 2021456HeroOverViewSpellBookButton2MouseOverSY: equ 0351457HeroOverViewSpellBookButton2MouseClickedSX: equ 2121458HeroOverViewSpellBookButton2MouseClickedSY: equ 0351460HeroOverViewSpellBookButton3OffSX: equ 1921461HeroOverViewSpellBookButton3OffSY: equ 0641462HeroOverViewSpellBookButton3MouseOverSX: equ 2021463HeroOverViewSpellBookButton3MouseOverSY: equ 0641464HeroOverViewSpellBookButton3MouseClickedSX: equ 2121465HeroOverViewSpellBookButton3MouseClickedSY: equ 0641467HeroOverViewSpellBookButton4OffSX: equ 1921468HeroOverViewSpellBookButton4OffSY: equ 0871469HeroOverViewSpellBookButton4MouseOverSX: equ 2021470HeroOverViewSpellBookButton4MouseOverSY: equ 0871471HeroOverViewSpellBookButton4MouseClickedSX: equ 2121472HeroOverViewSpellBookButton4MouseClickedSY: equ 0871475HeroOverViewSpellBookButton1DX: equ HeroOverViewSpellBookWindowDX + 0161476HeroOverViewSpellBookButton1DY: equ HeroOverViewSpellBookWindowDY + 0241477HeroOverViewSpellBookButton2DX: equ HeroOverViewSpellBookWindowDX + 0141478HeroOverViewSpellBookButton2DY: equ HeroOverViewSpellBookWindowDY + 0581479HeroOverViewSpellBookButton3DX: equ HeroOverViewSpellBookWindowDX + 0121480HeroOverViewSpellBookButton3DY: equ HeroOverViewSpellBookWindowDY + 0861481HeroOverViewSpellBookButton4DX: equ HeroOverViewSpellBookWindowDX + 0101482HeroOverViewSpellBookButton4DY: equ HeroOverViewSpellBookWindowDY + 1081483HeroOverViewSpellBookButton5DX: equ HeroOverViewSpellBookWindowDX + 0081484HeroOverViewSpellBookButton5DY: equ HeroOverViewSpellBookWindowDY + 143 1487HeroOverviewSpellBookButtonTableAmountOfButtons: db 31488HeroOverviewSpellBookButtonTable_Earth: 1490 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1491 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1492 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1494HeroOverviewSpellBookButtonTableAmountOfButtons_Fire: db 31495HeroOverviewSpellBookButtonTable_Fire: 1496 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)14971498 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1499 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1501HeroOverviewSpellBookButtonTableAmountOfButtons_Air: db 31502HeroOverviewSpellBookButtonTable_Air: 1503 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1504 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)15051506 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1508HeroOverviewSpellBookButtonTableAmountOfButtons_Water: db 31509HeroOverviewSpellBookButtonTable_Water: 1510 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1511 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1512 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)15131515HeroOverviewSpellBookButtonTable_Earth_Activated: 1516 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1517HeroOverviewSpellBookButtonTable_Fire_Activated: 1518 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1519HeroOverviewSpellBookButtonTable_Air_Activated: 1520 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1521HeroOverviewSpellBookButtonTable_Water_Activated: 1522 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1524ButtonTableSpellBookSYSX_Earth_Activated:1525 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1281526 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1281527 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1281529ButtonTableSpellBookSYSX_Fire_Activated:1530 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1281531 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1281532 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1281534ButtonTableSpellBookSYSX_Air_Activated:1535 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1281536 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1281537 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1281539ButtonTableSpellBookSYSX_Water_Activated:1540 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1281541 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1281542 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1281544BattleSpellBookButtonTableAmountOfButtons_Water: db 41545BattleSpellBookButtonTable: 1546 dw $0000 + (BattleSpellBookButton1DY*128) + (BattleSpellBookButton1DX/2) | db %1000 0011, BattleSpellBookButton1DY,BattleSpellBookButton2DY,BattleSpellBookButton1DX,BattleSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1547 dw $0000 + (BattleSpellBookButton2DY*128) + (BattleSpellBookButton2DX/2) | db %1000 0011, BattleSpellBookButton2DY,BattleSpellBookButton3DY,BattleSpellBookButton2DX,BattleSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1548 dw $0000 + (BattleSpellBookButton3DY*128) + (BattleSpellBookButton3DX/2) | db %1000 0011, BattleSpellBookButton3DY,BattleSpellBookButton4DY,BattleSpellBookButton3DX,BattleSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1549 dw $0000 + (BattleSpellBookButton4DY*128) + (BattleSpellBookButton4DX/2) | db %1000 0011, BattleSpellBookButton4DY,BattleSpellBookButton5DY,BattleSpellBookButton4DX,BattleSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1551BattleSpellBookButton1DX: equ SpellBookX + 0161552BattleSpellBookButton1DY: equ SpellBookY + 0241553BattleSpellBookButton2DX: equ SpellBookX + 0141554BattleSpellBookButton2DY: equ SpellBookY + 0581555BattleSpellBookButton3DX: equ SpellBookX + 0121556BattleSpellBookButton3DY: equ SpellBookY + 0861557BattleSpellBookButton4DX: equ SpellBookX + 0101558BattleSpellBookButton4DY: equ SpellBookY + 1081559BattleSpellBookButton5DX: equ SpellBookX + 0081560BattleSpellBookButton5DY: equ SpellBookY + 143 1564HeroOverViewSpellIconButton1DX: equ HeroOverViewSpellBookWindowDX + 0401565HeroOverViewSpellIconButton1DY: equ HeroOverViewSpellBookWindowDY + 0501567HeroOverViewSpellIconButton2DX: equ HeroOverViewSpellBookWindowDX + 0701568HeroOverViewSpellIconButton2DY: equ HeroOverViewSpellBookWindowDY + 0541570HeroOverViewSpellIconButton3DX: equ HeroOverViewSpellBookWindowDX + 0381571HeroOverViewSpellIconButton3DY: equ HeroOverViewSpellBookWindowDY + 0951573HeroOverViewSpellIconButton4DX: equ HeroOverViewSpellBookWindowDX + 0681574HeroOverViewSpellIconButton4DY: equ HeroOverViewSpellBookWindowDY + 0991576HeroOverViewSpellIconButton5DX: equ HeroOverViewSpellBookWindowDX + 1081577HeroOverViewSpellIconButton5DY: equ HeroOverViewSpellBookWindowDY + 0541579HeroOverViewSpellIconButton6DX: equ HeroOverViewSpellBookWindowDX + 1381580HeroOverViewSpellIconButton6DY: equ HeroOverViewSpellBookWindowDY + 0501582HeroOverViewSpellIconButton7DX: equ HeroOverViewSpellBookWindowDX + 1101583HeroOverViewSpellIconButton7DY: equ HeroOverViewSpellBookWindowDY + 0991585HeroOverViewSpellIconButton8DX: equ HeroOverViewSpellBookWindowDX + 1401586HeroOverViewSpellIconButton8DY: equ HeroOverViewSpellBookWindowDY + 09515891591HeroOverViewArmyIconButton1OffSX: equ 1561592HeroOverViewArmyIconButton1OffSY: equ 0211593HeroOverViewArmyIconButton1MouseOverSX: equ 1741594HeroOverViewArmyIconButton1MouseOverSY: equ 0211595HeroOverViewArmyIconButtonMouseClickedSX: equ 1921596HeroOverViewArmyIconButtonMouseClickedSY: equ 0211598HeroOverViewArmyIconButton2OffSX: equ 1561599HeroOverViewArmyIconButton2OffSY: equ 0211600HeroOverViewArmyIconButton2MouseOverSX: equ 1741601HeroOverViewArmyIconButton2MouseOverSY: equ 0211603HeroOverViewArmyIconButton3OffSX: equ 1561604HeroOverViewArmyIconButton3OffSY: equ 0211605HeroOverViewArmyIconButton3MouseOverSX: equ 1741606HeroOverViewArmyIconButton3MouseOverSY: equ 0211608HeroOverViewArmyIconButton4OffSX: equ 1561609HeroOverViewArmyIconButton4OffSY: equ 0211610HeroOverViewArmyIconButton4MouseOverSX: equ 1741611HeroOverViewArmyIconButton4MouseOverSY: equ 0211613HeroOverViewArmyIconButton5OffSX: equ 1561614HeroOverViewArmyIconButton5OffSY: equ 0211615HeroOverViewArmyIconButton5MouseOverSX: equ 1741616HeroOverViewArmyIconButton5MouseOverSY: equ 0211618HeroOverViewArmyIconButton6OffSX: equ 1561619HeroOverViewArmyIconButton6OffSY: equ 0211620HeroOverViewArmyIconButton6MouseOverSX: equ 1741621HeroOverViewArmyIconButton6MouseOverSY: equ 0211623HeroOverViewArmyIconButton1DX: equ HeroOverViewArmyWindowDX + 0301624HeroOverViewArmyIconButton1DY: equ HeroOverViewArmyWindowDY + 0271626HeroOverViewArmyIconButton2DX: equ HeroOverViewArmyWindowDX + 0501627HeroOverViewArmyIconButton2DY: equ HeroOverViewArmyWindowDY + 0271629HeroOverViewArmyIconButton3DX: equ HeroOverViewArmyWindowDX + 0701630HeroOverViewArmyIconButton3DY: equ HeroOverViewArmyWindowDY + 0271632HeroOverViewArmyIconButton4DX: equ HeroOverViewArmyWindowDX + 0901633HeroOverViewArmyIconButton4DY: equ HeroOverViewArmyWindowDY + 0271635HeroOverViewArmyIconButton5DX: equ HeroOverViewArmyWindowDX + 1101636HeroOverViewArmyIconButton5DY: equ HeroOverViewArmyWindowDY + 0271638HeroOverViewArmyIconButton6DX: equ HeroOverViewArmyWindowDX + 1301639HeroOverViewArmyIconButton6DY: equ HeroOverViewArmyWindowDY + 0271641HeroOverviewArmyIconButtonTableLenghtPerIcon: equ HeroOverviewArmyIconButtonTable.endlenght-HeroOverviewArmyIconButtonTable1642HeroOverviewArmyIconButtonTableAmountOfButtons: db 61643HeroOverviewArmyIconButtonTable: 1644 dw $0000 + (HeroOverViewArmyIconButton1DY*128) + (HeroOverViewArmyIconButton1DX/2) | db %1000 0011, HeroOverViewArmyIconButton1DY,HeroOverViewArmyIconButton1DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton1DX,HeroOverViewArmyIconButton1DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1645 .endlenght:1646 dw $0000 + (HeroOverViewArmyIconButton2DY*128) + (HeroOverViewArmyIconButton2DX/2) | db %1000 0011, HeroOverViewArmyIconButton2DY,HeroOverViewArmyIconButton2DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton2DX,HeroOverViewArmyIconButton2DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1647 dw $0000 + (HeroOverViewArmyIconButton3DY*128) + (HeroOverViewArmyIconButton3DX/2) | db %1000 0011, HeroOverViewArmyIconButton3DY,HeroOverViewArmyIconButton3DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton3DX,HeroOverViewArmyIconButton3DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1648 dw $0000 + (HeroOverViewArmyIconButton4DY*128) + (HeroOverViewArmyIconButton4DX/2) | db %1000 0011, HeroOverViewArmyIconButton4DY,HeroOverViewArmyIconButton4DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton4DX,HeroOverViewArmyIconButton4DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1649 dw $0000 + (HeroOverViewArmyIconButton5DY*128) + (HeroOverViewArmyIconButton5DX/2) | db %1000 0011, HeroOverViewArmyIconButton5DY,HeroOverViewArmyIconButton5DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton5DX,HeroOverViewArmyIconButton5DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1650 dw $0000 + (HeroOverViewArmyIconButton6DY*128) + (HeroOverViewArmyIconButton6DX/2) | db %1000 0011, HeroOverViewArmyIconButton6DY,HeroOverViewArmyIconButton6DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton6DX,HeroOverViewArmyIconButton6DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1652ButtonTableArmyIconsSYSX:1653 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281654 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281655 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281657 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281658 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281659 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281661 dw $4000 + (HeroOverViewArmyIconButton3OffSY*128) + (HeroOverViewArmyIconButton3OffSX/2) - 1281662 dw $4000 + (HeroOverViewArmyIconButton3MouseOverSY*128) + (HeroOverViewArmyIconButton3MouseOverSX/2) - 1281663 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281665 dw $4000 + (HeroOverViewArmyIconButton4OffSY*128) + (HeroOverViewArmyIconButton4OffSX/2) - 1281666 dw $4000 + (HeroOverViewArmyIconButton4MouseOverSY*128) + (HeroOverViewArmyIconButton4MouseOverSX/2) - 1281667 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281669 dw $4000 + (HeroOverViewArmyIconButton5OffSY*128) + (HeroOverViewArmyIconButton5OffSX/2) - 1281670 dw $4000 + (HeroOverViewArmyIconButton5MouseOverSY*128) + (HeroOverViewArmyIconButton5MouseOverSX/2) - 1281671 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281673 dw $4000 + (HeroOverViewArmyIconButton6OffSY*128) + (HeroOverViewArmyIconButton6OffSX/2) - 1281674 dw $4000 + (HeroOverViewArmyIconButton6MouseOverSY*128) + (HeroOverViewArmyIconButton6MouseOverSX/2) - 1281675 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 12816791681CastleButtonsDY: equ 179 1682CopyCastleButton:1683 db 012,0,212,11684 db 008,0,CastleButtonsDY,2551685 db 040,0,031,01686 db 0,%0000 0000,$981687 1688CastleOverviewWindowButton1Ytop: equ CastleButtonsDY1689CastleOverviewWindowButton1YBottom: equ CastleButtonsDY + 311690CastleOverviewWindowButton1XLeft: equ 0081691CastleOverviewWindowButton1XRight: equ CastleOverviewWindowButton1XLeft + 401693CastleOverviewWindowButton2Ytop: equ CastleButtonsDY1694CastleOverviewWindowButton2YBottom: equ CastleButtonsDY + 311695CastleOverviewWindowButton2XLeft: equ 0481696CastleOverviewWindowButton2XRight: equ CastleOverviewWindowButton2XLeft + 401698CastleOverviewWindowButton3Ytop: equ CastleButtonsDY1699CastleOverviewWindowButton3YBottom: equ CastleButtonsDY + 311700CastleOverviewWindowButton3XLeft: equ 0881701CastleOverviewWindowButton3XRight: equ CastleOverviewWindowButton3XLeft + 401703CastleOverviewWindowButton4Ytop: equ CastleButtonsDY1704CastleOverviewWindowButton4YBottom: equ CastleButtonsDY + 311705CastleOverviewWindowButton4XLeft: equ 1281706CastleOverviewWindowButton4XRight: equ CastleOverviewWindowButton4XLeft + 401708CastleOverviewWindowButton5Ytop: equ CastleButtonsDY1709CastleOverviewWindowButton5YBottom: equ CastleButtonsDY + 311710CastleOverviewWindowButton5XLeft: equ 1681711CastleOverviewWindowButton5XRight: equ CastleOverviewWindowButton5XLeft + 401713CastleOverviewWindowButton6Ytop: equ CastleButtonsDY1714CastleOverviewWindowButton6YBottom: equ CastleButtonsDY + 311715CastleOverviewWindowButton6XLeft: equ 2081716CastleOverviewWindowButton6XRight: equ CastleOverviewWindowButton6XLeft + 401719CastleOverviewWindowButtonStatus: equ 01720CastleOverviewWindowButton_dx: equ 11721CastleOverviewWindowButton_SYSX_Ontouched: equ 21722CastleOverviewWindowButton_SYSX_MovedOver: equ 41723CastleOverviewWindowButton_SYSX_Clicked: equ 61724CastleOverviewWindowButtonYtop: equ 81725CastleOverviewWindowButtonYbottom: equ 91726CastleOverviewWindowButtonXleft: equ 101727CastleOverviewWindowButtonXright: equ 111730CastleOverviewButtonTableLenghtPerButton: equ CastleOverviewButtonTable.endlenght-CastleOverviewButtonTable1731CastleOverviewButtonTableAmountOfButtons: db 61732CastleOverviewButtonTable: 1733 db %1100 0011 | db CastleOverviewWindowButton1XLeft | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (031*128) + (000/2) - 128 | dw $4000 + (062*128) + (000/2) - 128 | db CastleOverviewWindowButton1Ytop,CastleOverviewWindowButton1YBottom,CastleOverviewWindowButton1XLeft,CastleOverviewWindowButton1XRight1734 .endlenght:1735 db %1010 0011 | db CastleOverviewWindowButton2XLeft | dw $4000 + (000*128) + (040/2) - 128 | dw $4000 + (031*128) + (040/2) - 128 | dw $4000 + (062*128) + (040/2) - 128 | db CastleOverviewWindowButton2Ytop,CastleOverviewWindowButton2YBottom,CastleOverviewWindowButton2XLeft,CastleOverviewWindowButton2XRight1736 db %1001 0011 | db CastleOverviewWindowButton3XLeft | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (031*128) + (080/2) - 128 | dw $4000 + (062*128) + (080/2) - 128 | db CastleOverviewWindowButton3Ytop,CastleOverviewWindowButton3YBottom,CastleOverviewWindowButton3XLeft,CastleOverviewWindowButton3XRight1737 db %1100 0011 | db CastleOverviewWindowButton4XLeft | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (031*128) + (120/2) - 128 | dw $4000 + (062*128) + (120/2) - 128 | db CastleOverviewWindowButton4Ytop,CastleOverviewWindowButton4YBottom,CastleOverviewWindowButton4XLeft,CastleOverviewWindowButton4XRight1738 db %1100 0011 | db CastleOverviewWindowButton5XLeft | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (031*128) + (160/2) - 128 | dw $4000 + (062*128) + (160/2) - 128 | db CastleOverviewWindowButton5Ytop,CastleOverviewWindowButton5YBottom,CastleOverviewWindowButton5XLeft,CastleOverviewWindowButton5XRight1739 db %1100 0011 | db CastleOverviewWindowButton6XLeft | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (031*128) + (200/2) - 128 | dw $4000 + (062*128) + (200/2) - 128 | db CastleOverviewWindowButton6Ytop,CastleOverviewWindowButton6YBottom,CastleOverviewWindowButton6XLeft,CastleOverviewWindowButton6XRight17411743SingleBuildButton1Ytop: equ 1681744SingleBuildButton1YBottom: equ SingleBuildButton1Ytop + 0091745SingleBuildButton1XLeft: equ 1801746SingleBuildButton1XRight: equ SingleBuildButton1XLeft+0721748SingleBuildButtonTableAmountOfButtons: db 11749SingleBuildButtonTable: 1750 db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 128 | db SingleBuildButton1Ytop,SingleBuildButton1YBottom,SingleBuildButton1XLeft,SingleBuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 17531754WhichBuildingWasClicked?: ds 11755SetTextBuilding: db 11756PutWhichBuildText: ds 21758CopyBuildButton:1759 db 000,0,212,11760 db 004,0,042,2551761 db 050,0,038,01762 db 0,%0000 0000,$981764CopyBuildButtonImage:1765 db 050,0,212,11766 db 004,0,042,2551767 db 050,0,033,01768 db 0,%0000 0000,$981769 1770BuildButton1Ytop: equ 0421771BuildButton1YBottom: equ BuildButton1Ytop + 0381772BuildButton1XLeft: equ 0041773BuildButton1XRight: equ BuildButton1XLeft+501775BuildButton2Ytop: equ 0421776BuildButton2YBottom: equ BuildButton2Ytop + 0381777BuildButton2XLeft: equ 0641778BuildButton2XRight: equ BuildButton2XLeft+501780BuildButton3Ytop: equ 0421781BuildButton3YBottom: equ BuildButton3Ytop + 0381782BuildButton3XLeft: equ 1241783BuildButton3XRight: equ BuildButton3XLeft+501785BuildButton4Ytop: equ 0921786BuildButton4YBottom: equ BuildButton4Ytop + 0381787BuildButton4XLeft: equ 0041788BuildButton4XRight: equ BuildButton4XLeft+501790BuildButton5Ytop: equ 0921791BuildButton5YBottom: equ BuildButton5Ytop + 0381792BuildButton5XLeft: equ 0641793BuildButton5XRight: equ BuildButton5XLeft+501795BuildButton6Ytop: equ 0921796BuildButton6YBottom: equ BuildButton6Ytop + 0381797BuildButton6XLeft: equ 1241798BuildButton6XRight: equ BuildButton6XLeft+501800BuildButton7Ytop: equ 1421801BuildButton7YBottom: equ BuildButton7Ytop + 0381802BuildButton7XLeft: equ 0041803BuildButton7XRight: equ BuildButton7XLeft+501805BuildButton8Ytop: equ 1421806BuildButton8YBottom: equ BuildButton8Ytop + 0381807BuildButton8XLeft: equ 0641808BuildButton8XRight: equ BuildButton8XLeft+501810BuildButton9Ytop: equ 1421811BuildButton9YBottom: equ BuildButton9Ytop + 0381812BuildButton9XLeft: equ 1241813BuildButton9XRight: equ BuildButton9XLeft+501816BuildButtonStatus: equ 01817BuildButton_SYSX_Ontouched: equ 11818BuildButton_SYSX_MovedOver: equ 31819BuildButton_SYSX_Clicked: equ 51820BuildButtonYtop: equ 71821BuildButtonYbottom: equ 81822BuildButtonXleft: equ 91823BuildButtonXright: equ 101824BuildButtonImage_SYSX: equ 111826BuildButtonTableLenghtPerButton: equ BuildButtonTable.endlenght-BuildButtonTable1827BuildButtonTableAmountOfButtons: db 91828BuildButtonTable: 1829 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton1Ytop,BuildButton1YBottom,BuildButton1XLeft,BuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 1830 .endlenght:1831 db %1010 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton2Ytop,BuildButton2YBottom,BuildButton2XLeft,BuildButton2XRight | dw $4000 + (076*128) + (050/2) - 128 | 1832 db %1001 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton3Ytop,BuildButton3YBottom,BuildButton3XLeft,BuildButton3XRight | dw $4000 + (076*128) + (100/2) - 128 | 1833 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton4Ytop,BuildButton4YBottom,BuildButton4XLeft,BuildButton4XRight | dw $4000 + (076*128) + (150/2) - 128 | 1834 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton5Ytop,BuildButton5YBottom,BuildButton5XLeft,BuildButton5XRight | dw $4000 + (076*128) + (200/2) - 128 | 1835 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton6Ytop,BuildButton6YBottom,BuildButton6XLeft,BuildButton6XRight | dw $4000 + (114*128) + (000/2) - 128 | 1836 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton7Ytop,BuildButton7YBottom,BuildButton7XLeft,BuildButton7XRight | dw $4000 + (114*128) + (050/2) - 128 | 1837 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton8Ytop,BuildButton8YBottom,BuildButton8XLeft,BuildButton8XRight | dw $4000 + (114*128) + (100/2) - 128 | 1838 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton9Ytop,BuildButton9YBottom,BuildButton9XLeft,BuildButton9XRight | dw $4000 + (114*128) + (150/2) - 128 | 18401853SelectedCastleRecruitLevelUnit: ds 11854SelectedCastleRecruitUnitWindow: ds 11855SelectedCastleRecruitLevelUnitAmountAvailable: dw 0001856SelectedCastleRecruitLevelUnitRecruitAmount: dw 0001857SelectedCastleRecruitLevelUnitTotalGoldCost: dw 0001858SelectedCastleRecruitLevelUnitTotalCostGems: ds 21859SelectedCastleRecruitLevelUnitTotalCostRubies: ds 218601861RecruitButton1Ytop: equ 0641862RecruitButton1YBottom: equ RecruitButton1Ytop + 0091863RecruitButton1XLeft: equ 0061864RecruitButton1XRight: equ RecruitButton1XLeft+0761866RecruitButton2Ytop: equ 0641867RecruitButton2YBottom: equ RecruitButton2Ytop + 0091868RecruitButton2XLeft: equ 0901869RecruitButton2XRight: equ RecruitButton2XLeft+0761871RecruitButton3Ytop: equ 0641872RecruitButton3YBottom: equ RecruitButton3Ytop + 0091873RecruitButton3XLeft: equ 1741874RecruitButton3XRight: equ RecruitButton3XLeft+0761876RecruitButton4Ytop: equ 1201877RecruitButton4YBottom: equ RecruitButton4Ytop + 0091878RecruitButton4XLeft: equ 0061879RecruitButton4XRight: equ RecruitButton4XLeft + 0761881RecruitButton5Ytop: equ 1201882RecruitButton5YBottom: equ RecruitButton5Ytop + 0091883RecruitButton5XLeft: equ 0901884RecruitButton5XRight: equ RecruitButton5XLeft+0761886RecruitButton6Ytop: equ 1201887RecruitButton6YBottom: equ RecruitButton6Ytop + 0091888RecruitButton6XLeft: equ 1741889RecruitButton6XRight: equ RecruitButton6XLeft+0761893RecruitButtonStatus: equ 01894RecruitButton_SYSX_Ontouched: equ 11895RecruitButton_SYSX_MovedOver: equ 31896RecruitButton_SYSX_Clicked: equ 51897RecruitButtonYtop: equ 71898RecruitButtonYbottom: equ 81899RecruitButtonXleft: equ 91900RecruitButtonXright: equ 101901RecruitButton_DYDX: equ 111903RecruitButtonTableLenghtPerButton: equ RecruitButtonTable.endlenght-RecruitButtonTable1904RecruitButtonTableAmountOfButtons: db 91905RecruitButtonTable: 1906 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton1Ytop,RecruitButton1YBottom,RecruitButton1XLeft,RecruitButton1XRight | dw $0000 + (RecruitButton1Ytop*128) + (RecruitButton1XLeft/2) - 128 1907 .endlenght:1908 db %1010 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton2Ytop,RecruitButton2YBottom,RecruitButton2XLeft,RecruitButton2XRight | dw $0000 + (RecruitButton2Ytop*128) + (RecruitButton2XLeft/2) - 128 1909 db %1001 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton3Ytop,RecruitButton3YBottom,RecruitButton3XLeft,RecruitButton3XRight | dw $0000 + (RecruitButton3Ytop*128) + (RecruitButton3XLeft/2) - 1281910 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton4Ytop,RecruitButton4YBottom,RecruitButton4XLeft,RecruitButton4XRight | dw $0000 + (RecruitButton4Ytop*128) + (RecruitButton4XLeft/2) - 128 1911 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton5Ytop,RecruitButton5YBottom,RecruitButton5XLeft,RecruitButton5XRight | dw $0000 + (RecruitButton5Ytop*128) + (RecruitButton5XLeft/2) - 128 1912 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton6Ytop,RecruitButton6YBottom,RecruitButton6XLeft,RecruitButton6XRight | dw $0000 + (RecruitButton6Ytop*128) + (RecruitButton6XLeft/2) - 128 19141919RecruitButtonMAXYtop: equ 0921920RecruitButtonMAXYBottom: equ RecruitButtonMAXYtop + 0181921RecruitButtonMAXXLeft: equ 1141922RecruitButtonMAXXRight: equ RecruitButtonMAXXLeft + 0261924RecruitButtonBUYYtop: equ 0721925RecruitButtonBUYYBottom: equ RecruitButtonBUYYtop + 0181926RecruitButtonBUYXLeft: equ 1141927RecruitButtonBUYXRight: equ RecruitButtonBUYXLeft + 0261929RecruitButtonPLUSYtop: equ 0841930RecruitButtonPLUSYBottom: equ RecruitButtonPLUSYtop + 0141931RecruitButtonPLUSXLeft: equ 0961932RecruitButtonPLUSXRight: equ RecruitButtonPLUSXLeft + 0141934RecruitButtonMINUSYtop: equ 0841935RecruitButtonMINUSYBottom: equ RecruitButtonMINUSYtop + 0141936RecruitButtonMINUSXLeft: equ 1441937RecruitButtonMINUSXRight: equ RecruitButtonMINUSXLeft + 0141939AmountOfButtons: equ -119401950RecruitButtonMAXBUYTableLenghtPerButton: equ RecruitButtonMAXBUYTable.endlenght-RecruitButtonMAXBUYTable1951RecruitButtonMAXBUYTableAmountOfButtons: db 41952RecruitButtonMAXBUYTable: 1953 db %1100 0011 | dw $4000 + (027*128) + (152/2) - 128 | dw $4000 + (027*128) + (178/2) - 128 | dw $4000 + (027*128) + (204/2) - 128 | db RecruitButtonMAXYtop,RecruitButtonMAXYBottom,RecruitButtonMAXXLeft,RecruitButtonMAXXRight | dw $0000 + (RecruitButtonMAXYtop*128) + (RecruitButtonMAXXLeft/2) - 128 1954 .endlenght:1955 db %1100 0011 | dw $4000 + (045*128) + (162/2) - 128 | dw $4000 + (045*128) + (188/2) - 128 | dw $4000 + (045*128) + (214/2) - 128 | db RecruitButtonBUYYtop,RecruitButtonBUYYBottom,RecruitButtonBUYXLeft,RecruitButtonBUYXRight | dw $0000 + (RecruitButtonBUYYtop*128) + (RecruitButtonBUYXLeft/2) - 128 1956 db %1100 0011 | dw $4000 + (072*128) + (222/2) - 128 | dw $4000 + (086*128) + (222/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonPLUSYtop,RecruitButtonPLUSYBottom,RecruitButtonPLUSXLeft,RecruitButtonPLUSXRight | dw $0000 + (RecruitButtonPLUSYtop*128) + (RecruitButtonPLUSXLeft/2) - 128 1957 db %1100 0011 | dw $4000 + (072*128) + (236/2) - 128 | dw $4000 + (086*128) + (236/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonMINUSYtop,RecruitButtonMINUSYBottom,RecruitButtonMINUSXLeft,RecruitButtonMINUSXRight | dw $0000 + (RecruitButtonMINUSYtop*128) + (RecruitButtonMINUSXLeft/2) - 128 19591961GenericButtonGfxBlock: equ -21962GenericButtonAmountOfButtons: equ -11963GenericButtonStatus: equ 01964GenericButton_SYSX_Ontouched: equ 11965GenericButton_SYSX_MovedOver: equ 31966GenericButton_SYSX_Clicked: equ 51967GenericButtonYtop: equ 71968GenericButtonYbottom: equ 81969GenericButtonXleft: equ 91970GenericButtonXright: equ 101971GenericButton_DYDX: equ 111972GenericButton_NYNX: equ 131974ButtonGfxBlockCopy: ds 11976GenericButtonTableLenghtPerButton: equ GenericButtonTable.endlenght-GenericButtonTable1977GenericButtonTableGfxBlock: ds 11978GenericButtonTableAmountOfButtons: ds 11979GenericButtonTable: 1980 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1981 .endlenght:1982 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1983 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1984 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1985 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1986 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1987 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1988 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1989 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1990 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1991 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1992 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1993 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1994 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1995 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1997 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1998 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 1999 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2000 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2001 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2002 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2003 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2004 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2005 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2006 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2007 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2008 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2009 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 20122014GenericButtonTable2GfxBlock: ds 12015GenericButtonTable2AmountOfButtons: ds 12016GenericButtonTable2: 2017 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2018 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2019 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2020 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2021 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2022 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2024 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2025 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2026 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2027 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2028 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2029 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 20312033GenericButtonTable3GfxBlock: db Hero20x11PortraitsBlock2034GenericButtonTable3AmountOfButtons: db 122035GenericButtonTable3: 2037 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (000/2) - 128 | dw $4000 + ((128+25+76)*128) + (020/2) - 128 | dw $4000 + ((128+25+76)*128) + (040/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 2038 db %1100 0011 | dw $4000 + (018*128) + (000/2) - 128 | dw $4000 + (018*128) + (020/2) - 128 | dw $4000 + (018*128) + (040/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 2039 db %1100 0011 | dw $4000 + (018*128) + (060/2) - 128 | dw $4000 + (018*128) + (080/2) - 128 | dw $4000 + (018*128) + (100/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1282040 db %1100 0011 | dw $4000 + (139*128) + (096/2) - 128 | dw $4000 + (139*128) + (116/2) - 128 | dw $4000 + (139*128) + (136/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1282041 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (060/2) - 128 | dw $4000 + ((128+25+76)*128) + (080/2) - 128 | dw $4000 + ((128+25+76)*128) + (100/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1282042 2043 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (120/2) - 128 | dw $4000 + ((128+25+76)*128) + (140/2) - 128 | dw $4000 + ((128+25+76)*128) + (160/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1282044 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1282045 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1282046 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1282047 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (180/2) - 128 | dw $4000 + ((128+25+76)*128) + (200/2) - 128 | dw $4000 + ((128+25+76)*128) + (220/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1282048 2049 db %1100 0011 | dw $4000 + (048*128) + (240/2) - 128 | dw $4000 + (064*128) + (240/2) - 128 | dw $4000 + (080*128) + (240/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1282050 2051 db %1100 0011 | dw $4000 + (000*128) + (240/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1282053 2054.Button1Ytop: equ 0552055.Button1YBottom: equ .Button1Ytop + 0112056.Button1XLeft: equ 2062057.Button1XRight: equ .Button1XLeft + 0202059.Button2Ytop: equ 0662060.Button2YBottom: equ .Button2Ytop + 0112061.Button2XLeft: equ 2062062.Button2XRight: equ .Button2XLeft + 0202064.Button3Ytop: equ 0772065.Button3YBottom: equ .Button3Ytop + 0112066.Button3XLeft: equ 2062067.Button3XRight: equ .Button3XLeft + 0202069.Button4Ytop: equ 0882070.Button4YBottom: equ .Button4Ytop + 0112071.Button4XLeft: equ 2062072.Button4XRight: equ .Button4XLeft + 0202074.Button5Ytop: equ 0992075.Button5YBottom: equ .Button5Ytop + 0112076.Button5XLeft: equ 2062077.Button5XRight: equ .Button5XLeft + 0202079 2080.Button6Ytop: equ 0552081.Button6YBottom: equ .Button6Ytop + 0112082.Button6XLeft: equ 2302083.Button6XRight: equ .Button6XLeft + 0202085.Button7Ytop: equ 0662086.Button7YBottom: equ .Button7Ytop + 0112087.Button7XLeft: equ 2302088.Button7XRight: equ .Button7XLeft + 0202090.Button8Ytop: equ 0772091.Button8YBottom: equ .Button8Ytop + 0112092.Button8XLeft: equ 2302093.Button8XRight: equ .Button8XLeft + 0202095.Button9Ytop: equ 0882096.Button9YBottom: equ .Button9Ytop + 0112097.Button9XLeft: equ 2302098.Button9XRight: equ .Button9XLeft + 0202100.Button10Ytop: equ 0992101.Button10YBottom: equ .Button10Ytop + 0112102.Button10XLeft: equ 2302103.Button10XRight: equ .Button10XLeft + 0202105 2106.Button11Ytop: equ 1102107.Button11YBottom: equ .Button11Ytop + 0162108.Button11XLeft: equ 2082109.Button11XRight: equ .Button11XLeft + 0162111 2112.Button12Ytop: equ 1102113.Button12YBottom: equ .Button12Ytop + 0162114.Button12XLeft: equ 2322115.Button12XRight: equ .Button12XLeft + 01621262129MarketPlaceResourceNeeded: ds 12130MarketPlaceResourceToTrade: ds 12132CopyCastleButton2:2133 db 000,0,212,12134 db 100,0,100,2552135 db 020,0,030,02136 db 0,%0000 0000,$982143HeroOverViewInventoryIconButton1OffSX: equ 1462144HeroOverViewInventoryIconButton1OffSY: equ 0002145HeroOverViewInventoryIconButton1MouseOverSX: equ 1462146HeroOverViewInventoryIconButton1MouseOverSY: equ 0202147HeroOverViewInventoryIconButtonMouseClickedSX: equ 2202148HeroOverViewInventoryIconButtonMouseClickedSY: equ 2362150HeroOverViewInventoryIconButton2OffSX: equ 1462151HeroOverViewInventoryIconButton2OffSY: equ 0402152HeroOverViewInventoryIconButton2MouseOverSX: equ 1462153HeroOverViewInventoryIconButton2MouseOverSY: equ 0602155HeroOverViewInventoryIconButton3OffSX: equ 1462156HeroOverViewInventoryIconButton3OffSY: equ 0802157HeroOverViewInventoryIconButton3MouseOverSX: equ 1462158HeroOverViewInventoryIconButton3MouseOverSY: equ 1002160HeroOverViewInventoryIconButton4OffSX: equ 0002161HeroOverViewInventoryIconButton4OffSY: equ 1562162HeroOverViewInventoryIconButton4MouseOverSX: equ 0002163HeroOverViewInventoryIconButton4MouseOverSY: equ 1762165HeroOverViewInventoryIconButton5OffSX: equ 1462166HeroOverViewInventoryIconButton5OffSY: equ 0002167HeroOverViewInventoryIconButton5MouseOverSX: equ 1462168HeroOverViewInventoryIconButton5MouseOverSY: equ 0202170HeroOverViewInventoryIconButton6OffSX: equ 1462171HeroOverViewInventoryIconButton6OffSY: equ 0002172HeroOverViewInventoryIconButton6MouseOverSX: equ 1462173HeroOverViewInventoryIconButton6MouseOverSY: equ 0202175HeroOverViewInventoryIconButton7OffSX: equ 1462176HeroOverViewInventoryIconButton7OffSY: equ 0002177HeroOverViewInventoryIconButton7MouseOverSX: equ 1462178HeroOverViewInventoryIconButton7MouseOverSY: equ 0202180HeroOverViewInventoryIconButton8OffSX: equ 1462181HeroOverViewInventoryIconButton8OffSY: equ 0002182HeroOverViewInventoryIconButton8MouseOverSX: equ 1462183HeroOverViewInventoryIconButton8MouseOverSY: equ 0202185HeroOverViewInventoryIconButton9OffSX: equ 0202186HeroOverViewInventoryIconButton9OffSY: equ 0282187HeroOverViewInventoryIconButton9MouseOverSX: equ 0202188HeroOverViewInventoryIconButton9MouseOverSY: equ 02821892190HeroOverViewInventoryIconButton10OffSX: equ 0002191HeroOverViewInventoryIconButton10OffSY: equ 1562192HeroOverViewInventoryIconButton10MouseOverSX: equ 0002193HeroOverViewInventoryIconButton10MouseOverSY: equ 1762195HeroOverViewInventoryIconButton11OffSX: equ 1462196HeroOverViewInventoryIconButton11OffSY: equ 0002197HeroOverViewInventoryIconButton11MouseOverSX: equ 1462198HeroOverViewInventoryIconButton11MouseOverSY: equ 0202200HeroOverViewInventoryIconButton12OffSX: equ 1462201HeroOverViewInventoryIconButton12OffSY: equ 0002202HeroOverViewInventoryIconButton12MouseOverSX: equ 1462203HeroOverViewInventoryIconButton12MouseOverSY: equ 0202205HeroOverViewInventoryIconButton13OffSX: equ 1462206HeroOverViewInventoryIconButton13OffSY: equ 0002207HeroOverViewInventoryIconButton13MouseOverSX: equ 1462208HeroOverViewInventoryIconButton13MouseOverSY: equ 0202210HeroOverViewInventoryIconButton14OffSX: equ 1462211HeroOverViewInventoryIconButton14OffSY: equ 0002212HeroOverViewInventoryIconButton14MouseOverSX: equ 1462213HeroOverViewInventoryIconButton14MouseOverSY: equ 0202215HeroOverViewInventoryIconButton15OffSX: equ 0202216HeroOverViewInventoryIconButton15OffSY: equ 0282217HeroOverViewInventoryIconButton15MouseOverSX: equ 0202218HeroOverViewInventoryIconButton15MouseOverSY: equ 0282222ButtonTableInventoryIconsSYSX:2223 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282224 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282225 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282227 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282228 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282229 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282231 dw $4000 + (HeroOverViewInventoryIconButton3OffSY*128) + (HeroOverViewInventoryIconButton3OffSX/2) - 1282232 dw $4000 + (HeroOverViewInventoryIconButton3MouseOverSY*128) + (HeroOverViewInventoryIconButton3MouseOverSX/2) - 1282233 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282235 dw $4000 + (HeroOverViewInventoryIconButton4OffSY*128) + (HeroOverViewInventoryIconButton4OffSX/2) - 1282236 dw $4000 + (HeroOverViewInventoryIconButton4MouseOverSY*128) + (HeroOverViewInventoryIconButton4MouseOverSX/2) - 1282237 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282239 dw $4000 + (HeroOverViewInventoryIconButton5OffSY*128) + (HeroOverViewInventoryIconButton5OffSX/2) - 1282240 dw $4000 + (HeroOverViewInventoryIconButton5MouseOverSY*128) + (HeroOverViewInventoryIconButton5MouseOverSX/2) - 1282241 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282243 dw $4000 + (HeroOverViewInventoryIconButton6OffSY*128) + (HeroOverViewInventoryIconButton6OffSX/2) - 1282244 dw $4000 + (HeroOverViewInventoryIconButton6MouseOverSY*128) + (HeroOverViewInventoryIconButton6MouseOverSX/2) - 1282245 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282247 dw $4000 + (HeroOverViewInventoryIconButton7OffSY*128) + (HeroOverViewInventoryIconButton7OffSX/2) - 1282248 dw $4000 + (HeroOverViewInventoryIconButton7MouseOverSY*128) + (HeroOverViewInventoryIconButton7MouseOverSX/2) - 1282249 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282251 dw $4000 + (HeroOverViewInventoryIconButton8OffSY*128) + (HeroOverViewInventoryIconButton8OffSX/2) - 1282252 dw $4000 + (HeroOverViewInventoryIconButton8MouseOverSY*128) + (HeroOverViewInventoryIconButton8MouseOverSX/2) - 1282253 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282255 dw $4000 + (HeroOverViewInventoryIconButton9OffSY*128) + (HeroOverViewInventoryIconButton9OffSX/2) - 1282256 dw $4000 + (HeroOverViewInventoryIconButton9MouseOverSY*128) + (HeroOverViewInventoryIconButton9MouseOverSX/2) - 1282257 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 12822582259 dw $4000 + (HeroOverViewInventoryIconButton10OffSY*128) + (HeroOverViewInventoryIconButton10OffSX/2) - 1282260 dw $4000 + (HeroOverViewInventoryIconButton10MouseOverSY*128) + (HeroOverViewInventoryIconButton10MouseOverSX/2) - 1282261 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282263 dw $4000 + (HeroOverViewInventoryIconButton11OffSY*128) + (HeroOverViewInventoryIconButton11OffSX/2) - 1282264 dw $4000 + (HeroOverViewInventoryIconButton11MouseOverSY*128) + (HeroOverViewInventoryIconButton11MouseOverSX/2) - 1282265 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282267 dw $4000 + (HeroOverViewInventoryIconButton12OffSY*128) + (HeroOverViewInventoryIconButton12OffSX/2) - 1282268 dw $4000 + (HeroOverViewInventoryIconButton12MouseOverSY*128) + (HeroOverViewInventoryIconButton12MouseOverSX/2) - 1282269 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282271 dw $4000 + (HeroOverViewInventoryIconButton13OffSY*128) + (HeroOverViewInventoryIconButton13OffSX/2) - 1282272 dw $4000 + (HeroOverViewInventoryIconButton13MouseOverSY*128) + (HeroOverViewInventoryIconButton13MouseOverSX/2) - 1282273 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282275 dw $4000 + (HeroOverViewInventoryIconButton14OffSY*128) + (HeroOverViewInventoryIconButton14OffSX/2) - 1282276 dw $4000 + (HeroOverViewInventoryIconButton14MouseOverSY*128) + (HeroOverViewInventoryIconButton14MouseOverSX/2) - 1282277 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282279 dw $4000 + (HeroOverViewInventoryIconButton15OffSY*128) + (HeroOverViewInventoryIconButton15OffSX/2) - 1282280 dw $4000 + (HeroOverViewInventoryIconButton15MouseOverSY*128) + (HeroOverViewInventoryIconButton15MouseOverSX/2) - 1282281 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282284HeroOverViewInventoryIconButton1DX: equ HeroOverViewInventoryWindowDX + 0202285HeroOverViewInventoryIconButton1DY: equ HeroOverViewInventoryWindowDY + 0282287HeroOverViewInventoryIconButton2DX: equ HeroOverViewInventoryWindowDX + 0642288HeroOverViewInventoryIconButton2DY: equ HeroOverViewInventoryWindowDY + 0282290HeroOverViewInventoryIconButton3DX: equ HeroOverViewInventoryWindowDX + 1082291HeroOverViewInventoryIconButton3DY: equ HeroOverViewInventoryWindowDY + 0282293HeroOverViewInventoryIconButton4DX: equ HeroOverViewInventoryWindowDX + 0202294HeroOverViewInventoryIconButton4DY: equ HeroOverViewInventoryWindowDY + 0532296HeroOverViewInventoryIconButton5DX: equ HeroOverViewInventoryWindowDX + 0642297HeroOverViewInventoryIconButton5DY: equ HeroOverViewInventoryWindowDY + 0532299HeroOverViewInventoryIconButton6DX: equ HeroOverViewInventoryWindowDX + 1082300HeroOverViewInventoryIconButton6DY: equ HeroOverViewInventoryWindowDY + 0532302HeroOverViewInventoryIconButton7DX: equ HeroOverViewInventoryWindowDX + 0202303HeroOverViewInventoryIconButton7DY: equ HeroOverViewInventoryWindowDY + 0782305HeroOverViewInventoryIconButton8DX: equ HeroOverViewInventoryWindowDX + 0642306HeroOverViewInventoryIconButton8DY: equ HeroOverViewInventoryWindowDY + 0782308HeroOverViewInventoryIconButton9DX: equ HeroOverViewInventoryWindowDX + 1082309HeroOverViewInventoryIconButton9DY: equ HeroOverViewInventoryWindowDY + 07823102311HeroOverViewInventoryIconButton10DX: equ HeroOverViewInventoryWindowDX + 0082312HeroOverViewInventoryIconButton10DY: equ HeroOverViewInventoryWindowDY + 1012314HeroOverViewInventoryIconButton11DX: equ HeroOverViewInventoryWindowDX + 0302315HeroOverViewInventoryIconButton11DY: equ HeroOverViewInventoryWindowDY + 1012317HeroOverViewInventoryIconButton12DX: equ HeroOverViewInventoryWindowDX + 0522318HeroOverViewInventoryIconButton12DY: equ HeroOverViewInventoryWindowDY + 1012320HeroOverViewInventoryIconButton13DX: equ HeroOverViewInventoryWindowDX + 0742321HeroOverViewInventoryIconButton13DY: equ HeroOverViewInventoryWindowDY + 1012323HeroOverViewInventoryIconButton14DX: equ HeroOverViewInventoryWindowDX + 0962324HeroOverViewInventoryIconButton14DY: equ HeroOverViewInventoryWindowDY + 1012326HeroOverViewInventoryIconButton15DX: equ HeroOverViewInventoryWindowDX + 1182327HeroOverViewInventoryIconButton15DY: equ HeroOverViewInventoryWindowDY + 1012329HeroOverviewInventoryIconButtonTableLenghtPerIcon: equ HeroOverviewInventoryIconButtonTable.endlenght-HeroOverviewInventoryIconButtonTable2330HeroOverviewInventoryIconButtonTableAmountOfButtons: db 9 + 62331HeroOverviewInventoryIconButtonTable: 2332 dw $0000 + (HeroOverViewInventoryIconButton1DY*128) + (HeroOverViewInventoryIconButton1DX/2) | db %1000 0011, HeroOverViewInventoryIconButton1DY,HeroOverViewInventoryIconButton1DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton1DX,HeroOverViewInventoryIconButton1DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2333 .endlenght:2334 dw $0000 + (HeroOverViewInventoryIconButton2DY*128) + (HeroOverViewInventoryIconButton2DX/2) | db %1000 0011, HeroOverViewInventoryIconButton2DY,HeroOverViewInventoryIconButton2DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton2DX,HeroOverViewInventoryIconButton2DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2335 dw $0000 + (HeroOverViewInventoryIconButton3DY*128) + (HeroOverViewInventoryIconButton3DX/2) | db %1000 0011, HeroOverViewInventoryIconButton3DY,HeroOverViewInventoryIconButton3DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton3DX,HeroOverViewInventoryIconButton3DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2336 dw $0000 + (HeroOverViewInventoryIconButton4DY*128) + (HeroOverViewInventoryIconButton4DX/2) | db %1000 0011, HeroOverViewInventoryIconButton4DY,HeroOverViewInventoryIconButton4DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton4DX,HeroOverViewInventoryIconButton4DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2337 dw $0000 + (HeroOverViewInventoryIconButton5DY*128) + (HeroOverViewInventoryIconButton5DX/2) | db %1000 0011, HeroOverViewInventoryIconButton5DY,HeroOverViewInventoryIconButton5DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton5DX,HeroOverViewInventoryIconButton5DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2338 dw $0000 + (HeroOverViewInventoryIconButton6DY*128) + (HeroOverViewInventoryIconButton6DX/2) | db %1000 0011, HeroOverViewInventoryIconButton6DY,HeroOverViewInventoryIconButton6DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton6DX,HeroOverViewInventoryIconButton6DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2339 dw $0000 + (HeroOverViewInventoryIconButton7DY*128) + (HeroOverViewInventoryIconButton7DX/2) | db %1000 0011, HeroOverViewInventoryIconButton7DY,HeroOverViewInventoryIconButton7DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton7DX,HeroOverViewInventoryIconButton7DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2340 dw $0000 + (HeroOverViewInventoryIconButton8DY*128) + (HeroOverViewInventoryIconButton8DX/2) | db %1000 0011, HeroOverViewInventoryIconButton8DY,HeroOverViewInventoryIconButton8DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton8DX,HeroOverViewInventoryIconButton8DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2341 dw $0000 + (HeroOverViewInventoryIconButton9DY*128) + (HeroOverViewInventoryIconButton9DX/2) | db %1000 0011, HeroOverViewInventoryIconButton9DY,HeroOverViewInventoryIconButton9DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton9DX,HeroOverViewInventoryIconButton9DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2343 dw $0000 + (HeroOverViewInventoryIconButton10DY*128) + (HeroOverViewInventoryIconButton10DX/2) | db %1000 0011, HeroOverViewInventoryIconButton10DY,HeroOverViewInventoryIconButton10DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton10DX,HeroOverViewInventoryIconButton10DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2344 dw $0000 + (HeroOverViewInventoryIconButton11DY*128) + (HeroOverViewInventoryIconButton11DX/2) | db %1000 0011, HeroOverViewInventoryIconButton11DY,HeroOverViewInventoryIconButton11DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton11DX,HeroOverViewInventoryIconButton11DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2345 dw $0000 + (HeroOverViewInventoryIconButton12DY*128) + (HeroOverViewInventoryIconButton12DX/2) | db %1000 0011, HeroOverViewInventoryIconButton12DY,HeroOverViewInventoryIconButton12DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton12DX,HeroOverViewInventoryIconButton12DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2346 dw $0000 + (HeroOverViewInventoryIconButton13DY*128) + (HeroOverViewInventoryIconButton13DX/2) | db %1000 0011, HeroOverViewInventoryIconButton13DY,HeroOverViewInventoryIconButton13DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton13DX,HeroOverViewInventoryIconButton13DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2347 dw $0000 + (HeroOverViewInventoryIconButton14DY*128) + (HeroOverViewInventoryIconButton14DX/2) | db %1000 0011, HeroOverViewInventoryIconButton14DY,HeroOverViewInventoryIconButton14DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton14DX,HeroOverViewInventoryIconButton14DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2348 dw $0000 + (HeroOverViewInventoryIconButton15DY*128) + (HeroOverViewInventoryIconButton15DX/2) | db %1000 0011, HeroOverViewInventoryIconButton15DY,HeroOverViewInventoryIconButton15DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton15DX,HeroOverViewInventoryIconButton15DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2357HeroOverviewSpellIconButtonTableAmountOfButtons: db 82358HeroOverviewSpellIconButtonTable_Earth: 2359 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2360 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2361 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2362 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2364 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2365 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2366 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2367 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2369db 8 2370HeroOverviewSpellIconButtonTable_Fire: 2371 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2372 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2373 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2374 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2376 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2377 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2378 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2379 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2382db 8 2383HeroOverviewSpellIconButtonTable_Air: 2384 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2385 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2386 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2387 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2389 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2390 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2391 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2392 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2394db 8 2395HeroOverviewSpellIconButtonTable_Water: 2396 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2397 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2398 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2399 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2401 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2402 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2403 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2404 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2406db 8 2407BattleSpellIconButtons: 2408 dw $0000 + (BattleSpellIconButton1DY*128) + (BattleSpellIconButton1DX/2) | db %1000 0011, BattleSpellIconButton1DY,BattleSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton1DX,BattleSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2409 dw $0000 + (BattleSpellIconButton2DY*128) + (BattleSpellIconButton2DX/2) | db %1000 0011, BattleSpellIconButton2DY,BattleSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton2DX,BattleSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2410 dw $0000 + (BattleSpellIconButton3DY*128) + (BattleSpellIconButton3DX/2) | db %1000 0011, BattleSpellIconButton3DY,BattleSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton3DX,BattleSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2411 dw $0000 + (BattleSpellIconButton4DY*128) + (BattleSpellIconButton4DX/2) | db %1000 0011, BattleSpellIconButton4DY,BattleSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton4DX,BattleSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2413 dw $0000 + (BattleSpellIconButton5DY*128) + (BattleSpellIconButton5DX/2) | db %1000 0011, BattleSpellIconButton5DY,BattleSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton5DX,BattleSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2414 dw $0000 + (BattleSpellIconButton6DY*128) + (BattleSpellIconButton6DX/2) | db %1000 0011, BattleSpellIconButton6DY,BattleSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton6DX,BattleSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2415 dw $0000 + (BattleSpellIconButton7DY*128) + (BattleSpellIconButton7DX/2) | db %1000 0011, BattleSpellIconButton7DY,BattleSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton7DX,BattleSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2416 dw $0000 + (BattleSpellIconButton8DY*128) + (BattleSpellIconButton8DX/2) | db %1000 0011, BattleSpellIconButton8DY,BattleSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton8DX,BattleSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2418BattleSpellIconButton1DX: equ SpellBookX + 0402419BattleSpellIconButton1DY: equ SpellBookY + 0502420BattleSpellIconButton2DX: equ SpellBookX + 0702421BattleSpellIconButton2DY: equ SpellBookY + 0542422BattleSpellIconButton3DX: equ SpellBookX + 0382423BattleSpellIconButton3DY: equ SpellBookY + 0952424BattleSpellIconButton4DX: equ SpellBookX + 0682425BattleSpellIconButton4DY: equ SpellBookY + 0992426BattleSpellIconButton5DX: equ SpellBookX + 1082427BattleSpellIconButton5DY: equ SpellBookY + 0542428BattleSpellIconButton6DX: equ SpellBookX + 1382429BattleSpellIconButton6DY: equ SpellBookY + 0502430BattleSpellIconButton7DX: equ SpellBookX + 1102431BattleSpellIconButton7DY: equ SpellBookY + 0992432BattleSpellIconButton8DX: equ SpellBookX + 1402433BattleSpellIconButton8DY: equ SpellBookY + 0952437ButtonTableSpellIconsEarthSYSX:2438 dw $4000 + (HeroOverViewSpellIconButton1OffSY*128) + (HeroOverViewSpellIconButton1OffSX/2) - 1282439 dw $4000 + (HeroOverViewSpellIconButton1MouseOverSY*128) + (HeroOverViewSpellIconButton1MouseOverSX/2) - 1282440 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282442 dw $4000 + (HeroOverViewSpellIconButton2OffSY*128) + (HeroOverViewSpellIconButton2OffSX/2) - 1282443 dw $4000 + (HeroOverViewSpellIconButton2MouseOverSY*128) + (HeroOverViewSpellIconButton2MouseOverSX/2) - 1282444 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282446 dw $4000 + (HeroOverViewSpellIconButton3OffSY*128) + (HeroOverViewSpellIconButton3OffSX/2) - 1282447 dw $4000 + (HeroOverViewSpellIconButton3MouseOverSY*128) + (HeroOverViewSpellIconButton3MouseOverSX/2) - 1282448 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282450 dw $4000 + (HeroOverViewSpellIconButton4OffSY*128) + (HeroOverViewSpellIconButton4OffSX/2) - 1282451 dw $4000 + (HeroOverViewSpellIconButton4MouseOverSY*128) + (HeroOverViewSpellIconButton4MouseOverSX/2) - 1282452 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282454 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282455 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282456 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282458 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282459 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282460 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282462 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282463 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282464 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282466 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282467 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282468 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282470ButtonTableSpellIconsFireSYSX:2471 dw $4000 + (HeroOverViewSpellIconButton5OffSY*128) + (HeroOverViewSpellIconButton5OffSX/2) - 1282472 dw $4000 + (HeroOverViewSpellIconButton5MouseOverSY*128) + (HeroOverViewSpellIconButton5MouseOverSX/2) - 1282473 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282475 dw $4000 + (HeroOverViewSpellIconButton6OffSY*128) + (HeroOverViewSpellIconButton6OffSX/2) - 1282476 dw $4000 + (HeroOverViewSpellIconButton6MouseOverSY*128) + (HeroOverViewSpellIconButton6MouseOverSX/2) - 1282477 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282479 dw $4000 + (HeroOverViewSpellIconButton7OffSY*128) + (HeroOverViewSpellIconButton7OffSX/2) - 1282480 dw $4000 + (HeroOverViewSpellIconButton7MouseOverSY*128) + (HeroOverViewSpellIconButton7MouseOverSX/2) - 1282481 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282483 dw $4000 + (HeroOverViewSpellIconButton8OffSY*128) + (HeroOverViewSpellIconButton8OffSX/2) - 1282484 dw $4000 + (HeroOverViewSpellIconButton8MouseOverSY*128) + (HeroOverViewSpellIconButton8MouseOverSX/2) - 1282485 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282487 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282488 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282489 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282491 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282492 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282493 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282495 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282496 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282497 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282499 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282500 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282501 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282503ButtonTableSpellIconsAirSYSX:2504 dw $4000 + (HeroOverViewSpellIconButton9OffSY*128) + (HeroOverViewSpellIconButton9OffSX/2) - 1282505 dw $4000 + (HeroOverViewSpellIconButton9MouseOverSY*128) + (HeroOverViewSpellIconButton9MouseOverSX/2) - 1282506 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282508 dw $4000 + (HeroOverViewSpellIconButton10OffSY*128) + (HeroOverViewSpellIconButton10OffSX/2) - 1282509 dw $4000 + (HeroOverViewSpellIconButton10MouseOverSY*128) + (HeroOverViewSpellIconButton10MouseOverSX/2) - 1282510 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282512 dw $4000 + (HeroOverViewSpellIconButton11OffSY*128) + (HeroOverViewSpellIconButton11OffSX/2) - 1282513 dw $4000 + (HeroOverViewSpellIconButton11MouseOverSY*128) + (HeroOverViewSpellIconButton11MouseOverSX/2) - 1282514 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282516 dw $4000 + (HeroOverViewSpellIconButton12OffSY*128) + (HeroOverViewSpellIconButton12OffSX/2) - 1282517 dw $4000 + (HeroOverViewSpellIconButton12MouseOverSY*128) + (HeroOverViewSpellIconButton12MouseOverSX/2) - 1282518 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282520 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282521 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282522 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282524 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282525 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282526 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282528 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282529 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282530 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282532 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282533 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282534 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282536ButtonTableSpellIconsWaterSYSX:2537 dw $4000 + (HeroOverViewSpellIconButton13OffSY*128) + (HeroOverViewSpellIconButton13OffSX/2) - 1282538 dw $4000 + (HeroOverViewSpellIconButton13MouseOverSY*128) + (HeroOverViewSpellIconButton13MouseOverSX/2) - 1282539 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282541 dw $4000 + (HeroOverViewSpellIconButton14OffSY*128) + (HeroOverViewSpellIconButton14OffSX/2) - 1282542 dw $4000 + (HeroOverViewSpellIconButton14MouseOverSY*128) + (HeroOverViewSpellIconButton14MouseOverSX/2) - 1282543 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282545 dw $4000 + (HeroOverViewSpellIconButton15OffSY*128) + (HeroOverViewSpellIconButton15OffSX/2) - 1282546 dw $4000 + (HeroOverViewSpellIconButton15MouseOverSY*128) + (HeroOverViewSpellIconButton15MouseOverSX/2) - 1282547 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282549 dw $4000 + (HeroOverViewSpellIconButton16OffSY*128) + (HeroOverViewSpellIconButton16OffSX/2) - 1282550 dw $4000 + (HeroOverViewSpellIconButton16MouseOverSY*128) + (HeroOverViewSpellIconButton16MouseOverSX/2) - 1282551 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282553 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282554 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282555 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282557 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282558 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282559 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282561 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282562 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282563 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282565 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282566 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282567 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282570HeroOverViewSpellIconButton1OffSX: equ 2242571HeroOverViewSpellIconButton1OffSY: equ 0002572HeroOverViewSpellIconButton1MouseOverSX: equ 2402573HeroOverViewSpellIconButton1MouseOverSY: equ 0002574HeroOverViewSpellIconButtonMouseClickedSX: equ 1922575HeroOverViewSpellIconButtonMouseClickedSY: equ 1502577HeroOverViewSpellIconButton2OffSX: equ 2242578HeroOverViewSpellIconButton2OffSY: equ 0162579HeroOverViewSpellIconButton2MouseOverSX: equ 2402580HeroOverViewSpellIconButton2MouseOverSY: equ 0162582HeroOverViewSpellIconButton3OffSX: equ 2242583HeroOverViewSpellIconButton3OffSY: equ 0322584HeroOverViewSpellIconButton3MouseOverSX: equ 2402585HeroOverViewSpellIconButton3MouseOverSY: equ 0322587HeroOverViewSpellIconButton4OffSX: equ 2242588HeroOverViewSpellIconButton4OffSY: equ 0482589HeroOverViewSpellIconButton4MouseOverSX: equ 2402590HeroOverViewSpellIconButton4MouseOverSY: equ 0482592HeroOverViewSpellIconButton5OffSX: equ 2242593HeroOverViewSpellIconButton5OffSY: equ 0642594HeroOverViewSpellIconButton5MouseOverSX: equ 2402595HeroOverViewSpellIconButton5MouseOverSY: equ 0642597HeroOverViewSpellIconButton6OffSX: equ 2242598HeroOverViewSpellIconButton6OffSY: equ 0802599HeroOverViewSpellIconButton6MouseOverSX: equ 2402600HeroOverViewSpellIconButton6MouseOverSY: equ 0802602HeroOverViewSpellIconButton7OffSX: equ 2242603HeroOverViewSpellIconButton7OffSY: equ 0962604HeroOverViewSpellIconButton7MouseOverSX: equ 2402605HeroOverViewSpellIconButton7MouseOverSY: equ 0962607HeroOverViewSpellIconButton8OffSX: equ 2242608HeroOverViewSpellIconButton8OffSY: equ 1122609HeroOverViewSpellIconButton8MouseOverSX: equ 2402610HeroOverViewSpellIconButton8MouseOverSY: equ 1122612HeroOverViewSpellIconButton9OffSX: equ 2242613HeroOverViewSpellIconButton9OffSY: equ 1282614HeroOverViewSpellIconButton9MouseOverSX: equ 2402615HeroOverViewSpellIconButton9MouseOverSY: equ 1282617HeroOverViewSpellIconButton10OffSX: equ 2242618HeroOverViewSpellIconButton10OffSY: equ 1442619HeroOverViewSpellIconButton10MouseOverSX: equ 2402620HeroOverViewSpellIconButton10MouseOverSY: equ 1442622HeroOverViewSpellIconButton11OffSX: equ 2242623HeroOverViewSpellIconButton11OffSY: equ 1602624HeroOverViewSpellIconButton11MouseOverSX: equ 2402625HeroOverViewSpellIconButton11MouseOverSY: equ 1602627HeroOverViewSpellIconButton12OffSX: equ 2242628HeroOverViewSpellIconButton12OffSY: equ 1762629HeroOverViewSpellIconButton12MouseOverSX: equ 2402630HeroOverViewSpellIconButton12MouseOverSY: equ 1762634HeroOverViewSpellIconButton13OffSX: equ 0002635HeroOverViewSpellIconButton13OffSY: equ 1842636HeroOverViewSpellIconButton13MouseOverSX: equ 0162637HeroOverViewSpellIconButton13MouseOverSY: equ 1842639HeroOverViewSpellIconButton14OffSX: equ 0322640HeroOverViewSpellIconButton14OffSY: equ 1842641HeroOverViewSpellIconButton14MouseOverSX: equ 0482642HeroOverViewSpellIconButton14MouseOverSY: equ 1842644HeroOverViewSpellIconButton15OffSX: equ 0642645HeroOverViewSpellIconButton15OffSY: equ 1842646HeroOverViewSpellIconButton15MouseOverSX: equ 0802647HeroOverViewSpellIconButton15MouseOverSY: equ 1842649HeroOverViewSpellIconButton16OffSX: equ 0962650HeroOverViewSpellIconButton16OffSY: equ 1842651HeroOverViewSpellIconButton16MouseOverSX: equ 1122652HeroOverViewSpellIconButton16MouseOverSY: equ 1842656HeroOverViewSpellIconButton17OffSX: equ 1282657HeroOverViewSpellIconButton17OffSY: equ 1842658HeroOverViewSpellIconButton17MouseOverSX: equ 1442659HeroOverViewSpellIconButton17MouseOverSY: equ 1842661HeroOverViewSpellIconButton18OffSX: equ 1602662HeroOverViewSpellIconButton18OffSY: equ 1842663HeroOverViewSpellIconButton18MouseOverSX: equ 1762664HeroOverViewSpellIconButton18MouseOverSY: equ 1842666HeroOverViewSpellIconButton19OffSX: equ 1922667HeroOverViewSpellIconButton19OffSY: equ 1842668HeroOverViewSpellIconButton19MouseOverSX: equ 2082669HeroOverViewSpellIconButton19MouseOverSY: equ 1842671HeroOverViewSpellIconButton20OffSX: equ 1922672HeroOverViewSpellIconButton20OffSY: equ 1682673HeroOverViewSpellIconButton20MouseOverSX: equ 2082674HeroOverViewSpellIconButton20MouseOverSY: equ 1682677ButtonTableSpellBookSYSX_Earth:26782682 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282683 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282684 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1282686 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282687 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282688 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282690 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282691 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282692 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282694ButtonTableSpellBookSYSX_Fire:2695 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282696 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282697 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 12826992703 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282704 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282705 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282707 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282708 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282709 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282711ButtonTableSpellBookSYSX_Air:2712 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282713 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282714 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1282716 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282717 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282718 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 12827202724 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282725 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282726 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282728ButtonTableSpellBookSYSX_Water:2729 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282730 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282731 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1282733 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282734 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282735 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1282737 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282738 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282739 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282741 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282742 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282743 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282745ActivatedSkillsButton: ds 227462748SetSkillsDescription?: db 12749MenuOptionSelected?: db 02750MenuOptionSelected?Backup: db 2552751MenuOptionSelected?BackupLastFrame: db 2552753PreviousButtonClicked: ds 12754PreviousButtonClickedIX: ds 22755AreWeInTavern1OrRecruit2?: ds 12757PreviousButton2Clicked: ds 12758PreviousButton2ClickedIX: ds 22761LenghtTextSkillsDescription: equ EndFirstLine-TextSkillsWindowButton12762TextSkillsWindowButton1: 2763 db "                                 ",2552764EndFirstLine:2765 db "                                 ",2542766 db "                                 ",2542767 db "                                 ",2552768TextSkillsWindowButton2: 2769 db "                                 ",255 2770 db "                                 ",2542771 db "                                 ",2542772 db "                                 ",2552773TextSkillsWindowButton3: 2774 db "                                 ",255 2775 db "                                 ",2542776 db "                                 ",2542777 db "                                 ",2552778TextSkillsWindowButton4: 2779 db "                                 ",255 2780 db "                                 ",2542781 db "                                 ",2542782 db "                                 ",2552783TextSkillsWindowButton5: 2784 db "                                 ",255 2785 db "                                 ",2542786 db "                                 ",2542787 db "                                 ",2552788TextSkillsWindowButton6: 2789 db "                                 ",255 2790 db "                                 ",2542791 db "                                 ",2542792 db "                                 ",2552794ButtonOff: equ 02795ButtonMouseOver: equ 22796ButtonOMouseClicked: equ 42797ButtonTableSYSX:2798 dw $4000 + (HeroOverViewFirstWindowButtonOffSY*128) + (HeroOverViewFirstWindowButtonOffSX/2) - 1282799 dw $4000 + (HeroOverViewFirstWindowButtonMouseOverSY*128) + (HeroOverViewFirstWindowButtonMouseOverSX/2) - 1282800 dw $4000 + (HeroOverViewFirstWindowButtonMouseClickedSY*128) + (HeroOverViewFirstWindowButtonMouseClickedSX/2) - 1282802ButtonTableSkillsSYSX:2803 dw $4000 + (HeroOverViewSkillsButtonOffSY*128) + (HeroOverViewSkillsButtonOffSX/2) - 1282804 dw $4000 + (HeroOverViewSkillsButtonMouseOverSY*128) + (HeroOverViewSkillsButtonMouseOverSX/2) - 1282805 dw $4000 + (HeroOverViewSkillsButtonMouseClickedSY*128) + (HeroOverViewSkillsButtonMouseClickedSX/2) - 1282807BCStored: ds 22808TextAddresspointer: ds 22809TextPointer: ds 22810TextDX: ds 12812PutLetter:2813 db 000,000,212,000 2814 db 010,000,010,001 2815 db 005,000,005,000 2816 db 000,000,$98 2818EnterHeroOverviewMenu:2819 ld a,12820 ld (GameStatus),a 2822 ld a,(slot.page12rom) 2823 out ($a8),a 2825 ld a,HeroOverviewCodeBlock 2826 call block12 2828 xor a2829 ld (MenuOptionSelected?),a2830 ld a,2552831 ld (MenuOptionSelected?Backup),a 2832 ld (MenuOptionSelected?BackupLastFrame),a2834 xor a2835 ld (SetHeroOverViewMenu?),a2838 call HeroOverviewCode28392845 xor a2846 ld (GameStatus),a 2848 ld hl,CursorBoots2849 ld (CurrentCursorSpriteCharacter),hl2851 call ClearMapPage0AndMapPage1 2853 ld a,(slot.page1rom) 2854 out ($a8),a 2856 xor a2857 ld (vblankintflag),a2858 2859 ld (putmovementstars?),a2860 ld (mouseclickx),a 2861 ld (mouseclicky),a 2870 ld a,%0001 00002871 ld (ControlsOnInterrupt),a2872 ret2874SetSpatInCastle:2875 ld hl,SpatInCastle2876 ld de,spat + (3*4)2877 ld bc,13*42878 ldir2879 ret2881SetSpatInGame:2882 ld hl,SpatInGame2883 ld de,spat + (3*4)2884 ld bc,13*42885 ldir2886 ret2888ChangeSong?: db 02889ReloadAllObjectsInVram?: db 0 2890SetNewBuilding?: db 0 2891EnterCastle:2892 ld a,StopSong2893 ld (ChangeSong?),a2895 ld a,22896 ld (GameStatus),a 2898 in a,($a8) 2899 push af 2900 ld a,(memblocks.1)2901 push af2903 ld a,(slot.page12rom) 2904 out ($a8),a 2906 ld a,CastleOverviewCodeBlock 2907 call block1234 2909 call SetSpatInCastle2911 call CastleOverviewCode29122918 ld a,StopSong2919 ld (ChangeSong?),a2920 halt 2922 call SetSpatInGame2924 pop af2925 call block12 2926 pop af2927 out ($a8),a 2929 xor a2930 ld (GameStatus),a 2931 ld (vblankintflag),a2932 2933 ld (putmovementstars?),a2934 ld (mouseclickx),a 2935 ld (mouseclicky),a 2936 ld (framecounter),a29372938 ld (movehero?),a 29392945 ld a,%0001 00002946 ld (ControlsOnInterrupt),a2948 call SetTempisr 2950 ld a,(mappointery)2951 ld b,a2952 ld a,(mappointerx)2953 ld c,a2954 push bc 2955 2956 call SetScreenOff2958 ld a,(ReloadAllObjectsInVram?) 2959 or a2960 call nz,LoadAllObjectsInVram 2961 xor a2962 ld (ReloadAllObjectsInVram?),a 2964 ld hl,InGamePalette2965 call SetPalette2966 call LoadHud 2967 call SetInterruptHandler 2968 call SetAllSpriteCoordinatesInPage2 2969 call SetAllHeroPosesInVram 2970 call InitiatePlayerTurn 2971 call ClearMapPage0AndMapPage12972 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2973 call DoCopy29742975 call CenterMousePointer2977 ld hl,02978 ld (CurrentCursorSpriteCharacter),hl2980 pop bc 2981 ld a,b2982 ld (mappointery),a2983 ld a,c2984 ld (mappointerx),a2986 ld a,WorldSong2987 ld (ChangeSong?),a2989 jp LevelEngine2991SwapAndSetPage:2992 ld a,(activepage) 2993 xor 1 2994 ld (activepage),a 2995 jp SetPageSpecial 2997SwapButDontSetPage:2998 ld a,(activepage) 2999 xor 1 3000 ld (activepage),a 3001 ret3003EnterCombat:3004 ld a,StopSong3005 ld (ChangeSong?),a3007 ld a,33008 ld (GameStatus),a 3010 in a,($a8) 3011 push af 3012 ld a,(memblocks.1)3013 push af3015 ld a,(slot.page12rom) 3016 out ($a8),a 3018 ld a,BattleCodeBlock 3019 call block1234 3021 call SetSpatInCastle3022 call InitiateBattle3023 halt 3024 call SetSpatInGame3026 pop af3027 call block12 3028 pop af3029 out ($a8),a 3031 xor a3032 ld (GameStatus),a 3033 ld (vblankintflag),a3034 3035 ld (putmovementstars?),a3036 ld (mouseclickx),a 3037 ld (mouseclicky),a 3038 ld (framecounter),a3039 ld (movehero?),a 3041 xor a 3042 di3043 out ($99),a3044 ld a,23+1283045 ei3046 out ($99),a3048 call SetTempisr 3050 ld a,WorldSong3051 ld (ChangeSong?),a3053 jp StartGame.WhenExitingCombat3055SetAllSpriteCoordinatesInPage2:3056 ld hl,0*128+(000/2) - 128 3057 ld (pl1hero1y+HeroDYDX),hl3058 ld hl,0*128+(016/2) - 128 3059 ld (pl1hero2y+HeroDYDX),hl3060 ld hl,0*128+(032/2) - 128 3061 ld (pl1hero3y+HeroDYDX),hl3062 ld hl,0*128+(048/2) - 128 3063 ld (pl1hero4y+HeroDYDX),hl3064 ld hl,0*128+(064/2) - 128 3065 ld (pl1hero5y+HeroDYDX),hl3066 ld hl,0*128+(080/2) - 128 3067 ld (pl1hero6y+HeroDYDX),hl3068 ld hl,0*128+(096/2) - 128 3069 ld (pl1hero7y+HeroDYDX),hl3070 ld hl,0*128+(112/2) - 128 3071 ld (pl1hero8y+HeroDYDX),hl3072 3073 ld hl,0*128+(128/2) - 128 3074 ld (pl2hero1y+HeroDYDX),hl3075 ld hl,0*128+(144/2) - 128 3076 ld (pl2hero2y+HeroDYDX),hl3077 ld hl,0*128+(160/2) - 128 3078 ld (pl2hero3y+HeroDYDX),hl3079 ld hl,0*128+(176/2) - 128 3080 ld (pl2hero4y+HeroDYDX),hl3081 ld hl,0*128+(192/2) - 128 3082 ld (pl2hero5y+HeroDYDX),hl3083 ld hl,0*128+(208/2) - 128 3084 ld (pl2hero6y+HeroDYDX),hl3085 ld hl,0*128+(224/2) - 128 3086 ld (pl2hero7y+HeroDYDX),hl3087 ld hl,0*128+(240/2) - 128 3088 ld (pl2hero8y+HeroDYDX),hl3089 3090 ld hl,32*128+(000/2) - 128 3091 ld (pl3hero1y+HeroDYDX),hl3092 ld hl,32*128+(016/2) - 128 3093 ld (pl3hero2y+HeroDYDX),hl3094 ld hl,32*128+(032/2) - 128 3095 ld (pl3hero3y+HeroDYDX),hl3096 ld hl,32*128+(048/2) - 128 3097 ld (pl3hero4y+HeroDYDX),hl3098 ld hl,32*128+(064/2) - 128 3099 ld (pl3hero5y+HeroDYDX),hl3100 ld hl,32*128+(080/2) - 128 3101 ld (pl3hero6y+HeroDYDX),hl3102 ld hl,32*128+(096/2) - 128 3103 ld (pl3hero7y+HeroDYDX),hl3104 ld hl,32*128+(112/2) - 128 3105 ld (pl3hero8y+HeroDYDX),hl3106 3107 ld hl,32*128+(128/2) - 128 3108 ld (pl4hero1y+HeroDYDX),hl3109 ld hl,32*128+(144/2) - 128 3110 ld (pl4hero2y+HeroDYDX),hl3111 ld hl,32*128+(160/2) - 128 3112 ld (pl4hero3y+HeroDYDX),hl3113 ld hl,32*128+(176/2) - 128 3114 ld (pl4hero4y+HeroDYDX),hl3115 ld hl,32*128+(192/2) - 128 3116 ld (pl4hero5y+HeroDYDX),hl3117 ld hl,32*128+(208/2) - 128 3118 ld (pl4hero6y+HeroDYDX),hl3119 ld hl,32*128+(224/2) - 128 3120 ld (pl4hero7y+HeroDYDX),hl3121 ld hl,32*128+(240/2) - 128 3122 ld (pl4hero8y+HeroDYDX),hl3123 ret3125LoadAllObjectsInVram: 3126 ld hl,$4000 + (000*128) + (000/2) - 1283127 ld (AddressToWriteFrom),hl3128 ld de,$0000 + (064*128) + (000/2) - 128 3129 ld (AddressToWriteTo),de 3130 ld bc,$0000 + (192*256) + (256/2)3131 ld (NXAndNY),bc3132 ld a,World1ObjectsBlock 3133 ld (BlockToReadFrom),a3134 jp CopyRamToVramPage3ForBattleEngine 3136SetMapPalette:3137 ld a,(ix+7) 3138 ld (InGamePalette),a3139 ld a,(ix+8) 3140 ld (InGamePalette+1),a3141 ld a,(ix+9) 3142 ld (InGamePalette+2),a3143 ld a,(ix+10) 3144 ld (InGamePalette+3),a3146 ld hl,InGamePalette3147 jp SetPalette 3149SetBattleScreenBlock:3150 ld a,(ix+11) 3151 ld (BattleGraphicsBlock),a3152 ret3154CastleOverviewPalette:31553156 incbin"..\grapx\CastleOverview\CastleOverview.pl"31573159LoadHud:3160 ld a,13161 ld (activepage),a 3163 ld hl,$4000 + (000*128) + (000/2) - 1283164 ld de,$0000 + (000*128) + (000/2) - 1283165 ld bc,$0000 + (212*256) + (256/2)3166 ld a,HudNewBlock 3167 call CopyRamToVramCorrectedCastleOverview 31693172 ld hl,LoadMiniMap 3173 call ExecuteLoaderRoutine3175 call RepairDecorationEdgesHud3177 ld hl,SetCastlesInMiniMap 3178 call ExecuteLoaderRoutine3180 ld hl,CopyPage0To13181 call docopy3183 ld hl,CopyMovementArrows1 3184 call docopy3185 ld hl,CopyMovementArrows2 3186 call docopy3187 ld hl,CopyMovementBlackArrows1 3188 call docopy3189 ld hl,CopyMovementBlackArrows2 3190 call docopy31923200 ret3202CopyMovementArrows1:3203 db 10,0,13,03204 db 96,0,222,03205 db 160,0,10,03206 db 0,0,$d03208CopyMovementArrows2:3209 db 10,0,23,03210 db 96,0,246,03211 db 160,0,10,03212 db 0,0,$d03214CopyMovementBlackArrows1:3215 db 10,0,33,03216 db 96,0,222,13217 db 160,0,10,03218 db 0,0,$d03220CopyMovementBlackArrows2:3221 db 10,0,43,03222 db 96,0,246,13223 db 160,0,10,03224 db 0,0,$d03227RepairDecorationEdgesHud: 3228 ld hl,$4000 + (005*128) + (202/2) - 1283229 ld de,256*005 + 202 3230 ld bc,$0000 + (005*256) + (050/2)3231 ld a,HudNewBlock 3232 exx3233 ex af,af'3234 ld hl,CopyTransparantImageEXX3235 call EnterSpecificRoutineInCastleOverviewCode3237 ld hl,$4000 + (050*128) + (202/2) - 1283238 ld de,256*050 + 202 3239 ld bc,$0000 + (003*256) + (050/2)3240 ld a,HudNewBlock 3241 exx3242 ex af,af'3243 ld hl,CopyTransparantImageEXX3244 jp EnterSpecificRoutineInCastleOverviewCode3246LoadWorldTiles:3247 ld ix,(WorldPointer)3248 3249 ld a,(slot.page1rom) 3250 out ($a8),a 3251 ld a,Loaderblock 3252 call block12 3254 ld hl,$4000 + (000*128) + (000/2) - 1283255 ld (AddressToWriteFrom),hl3256 ld de,$8000 + (000*128) + (000/2) - 128 3257 ld (AddressToWriteTo),de 3258 ld bc,$0000 + (000*256) + (256/2)3259 ld (NXAndNY),bc3260 ld a,(ix+6) 3261 ld (BlockToReadFrom),a3262 jp CopyRamToVramPage3ForBattleEngine 3266LoadWorldMapAndObjectLayerMap:3267 ld ix,(WorldPointer)3268 3269 ld a,(slot.page1rom) 3270 out ($a8),a 3271 ld a,Loaderblock 3272 call block12 3274 ld l,(ix+4) 3275 ld h,(ix+5) 3276 push hl3277 ld a,(ix+3) 3278 push af3279 ld a,(ix+0) 3280 ld l,(ix+1) 3281 ld h,(ix+2)3282 32833284 call block12 3286 ld a,1 3287 out ($fe),a 3288 3289 ld de,$80003290 call Depack32923293 pop af3294 call block12 3296 ld a,2 3297 out ($fe),a 3299 pop hl3300 ld de,$80003301 call Depack3302 ret3304CopyTilePiece:3305 db 0,0,0,33306 db XMiniMap,0,YMiniMap,03307 db 1,0,1,03308 db 0,%0000 0000,$983309 3310InGamePalette:3311 incbin"..\grapx\tilesheets\PaletteGentleCave.pl"33123319SetInterruptHandler:3320 di3321 ld hl,InterruptHandler 3322 ld ($38+1),hl 3323 ld a,$c3 3324 ld ($38),a3325 3326 ld a,(VDP_0) 3327 and %1110 111133283329 ld (VDP_0),a 3330 out ($99),a3331 ld a,1283332 ei3333 out ($99),a3334 ret3336 3337SetTempisr: 33383339 di3340 ld hl,.tempisr3341 ld de,$383342 ld bc,63343 ldir3344 ei3345 ret3347.tempisr:3348 push af3349 in a,($99) 3350 pop af3351 ei 3352 ret3354sprcoladdr: equ $74003355sprattaddr: equ $76003356sprcharaddr: equ $78003357SpriteInitialize:3358 ld a,(vdp_0+1)3359 or 2 3360 di3361 out ($99),a3362 ld a,1+1283363 ei3364 out ($99),a3366 ld a,%1110 11113367 ld (vdp_0+5),a3368 di33693370 out ($99),a 3371 ld a,5+1283372 out ($99),a33733374 ld a,%0000 0000 3375 ld (vdp_8+3),a3376 out ($99),a3377 ld a,11+1283378 out ($99),a3379 33803381 ld a,%0000 11113382 ld (vdp_0+6),a33833384 out ($99),a 3385 ld a,6+1283386 ei3387 out ($99),a3388 ret3390SetPage: 3391 di3392 out ($99),a3393 ld a,2+1283394 ei3395 out ($99),a3396 ret34003407block12: 3408 di3409 ld (memblocks.1),a3410 ld ($6000),a3411 ei3412 ret3414block34: 3415 di3416 ld (memblocks.2),a3417 ld ($7000),a3418 ei3419 ret3421block1234: 3422 di3423 ld (memblocks.1),a3424 ld ($6000),a3425 inc a3426 ld (memblocks.2),a3427 ld ($7000),a3428 ei3429 ret3431TinyCopyWhichFunctionsAsWaitVDPReady:3432 db 0,0,0,03433 db 0,0,0,03434 db 1,0,1,03435 db 0,%0000 0000,$983437BuildingFadeIn:3438 db 0,0,0,13439 db 0,0,0,23440 db 1,0,1,03441 db 0,%0000 0000,$983443DoCopy:3444 ld a,323445 di3446 out ($99),a3447 ld a,17+1283448 ei3449 out ($99),a3450 ld c,$9b3451.vdpready:3452 ld a,23453 di3454 out ($99),a3455 ld a,15+1283456 out ($99),a3457 in a,($99)3458 rra3459 ld a,03460 out ($99),a3461 ld a,15+1283462 ei3463 out ($99),a3464 jr c,.vdpready34663470 dw $a3ed,$a3ed,$a3ed,$a3ed3471 dw $a3ed,$a3ed,$a3ed,$a3ed3472 dw $a3ed,$a3ed,$a3ed,$a3ed3473 dw $a3ed,$a3ed,$a3ed3474 ret3476currentpage: ds 13477sprcoltableaddress: ds 23478spratttableaddress: ds 23479sprchatableaddress: ds 23480invissprcoltableaddress: ds 23481invisspratttableaddress: ds 23482invissprchatableaddress: ds 23484SetPalette:3485 xor a3486 di3487 out ($99),a3488 ld a,16+1283489 out ($99),a3490 ld bc,$209A3491 otir3492 ei3493 ret34953498SetVdp_Read: rlc h3499 rla3500 rlc h3501 rla3502 srl h3503 srl h3504 di3505 out ($99),a 3506 ld a,14+1283507 out ($99),a3508 ld a,l 3510 out ($99),a3511 ld a,h 3512 ei 3513 out ($99),a3514 ret3515 35163519SetVdp_Write: 35203521 rlc h3522 rla3523 rlc h3524 rla3525 srl h3526 srl h3527 di3528 out ($99),a 3529 ld a,14+1283530 out ($99),a35313533 ld a,l 3535 out ($99),a3536 ld a,h 3537 or 64 3538 ei3539 out ($99),a 3540 ret35423545SetVdp_WriteWithoutDisablingOrEnablingInt: 35463547 rlc h3548 rla3549 rlc h3550 rla3551 srl h3552 srl h3553 out ($99),a 3554 ld a,14+1283555 out ($99),a35563558 ld a,l 3560 out ($99),a3561 ld a,h 3562 or 64 3563 out ($99),a 3564 ret3566Depack: 3567 inc hl 3568 inc hl 3569 inc hl3570 inc hl3572 ld a,1283573 3574 exx3575 ld de,13576 exx3577 3578.depack_loop:3579 call .getbits3580 jr c,.output_compressed 3581 ldi 3583 jr .depack_loop3584 35853586.output_compressed:3587 ld c,(hl) 3588 inc hl 3590.output_match:3591 ld b,03592 bit 7,c3593 jr z,.output_match1 3595 call .getbits3596 call .rlbgetbits3597 call .rlbgetbits3598 call .rlbgetbits3600 jr c,.output_match1 3601 res 7,c 3602.output_match1:3603 inc bc3604 36053607 exx 3608 ld h,d3609 ld l,e 3610 ld b,e 36123613.get_gamma_value_size:3614 exx3615 call .getbits3616 exx3617 jr nc,.get_gamma_value_size_end 3618 inc b 3619 jr .get_gamma_value_size 3621.get_gamma_value_bits:3622 exx3623 call .getbits3624 exx3625 3626 adc hl,hl 3627.get_gamma_value_size_end:3628 djnz .get_gamma_value_bits 3630.get_gamma_value_end:3631 inc hl 3632 exx 3633 3634 ret c36353637 push hl 3639 exx3640 push hl 3641 exx3643 ld h,d3644 ld l,e 3645 sbc hl,bc 3647 pop bc 3649 ldir 3651 pop hl 3653 jr .depack_loop3655.rlbgetbits:3656 rl b3657.getbits:3658 add a,a3659 ret nz3660 ld a,(hl)3661 inc hl3662 rla3663 ret 36653666freezecontrols?: db 036673672PopulateControls:3673 ld a,(freezecontrols?)3674 or a3675 jp nz,.freezecontrols36773679 3680 ld a,15 3681 di3682 out ($a0),a3683 ld a,$8f3684 out ($a1),a3685 ld a,14 3686 out ($a0),a3687 ei3688 in a,($a2)3689 cpl3690 and $3f 3691 ld c,a3693 ld de,$04F03694 3695 in a,($aa)3696 and e3697 or 63698 out ($aa),a3699 in a,($a9)3700 cpl3701 and $20 3702 rlca 3703 or c3704 ld c,a 3705 3706 in a,($aa) 3707 and e3708 or d3709 out ($aa),a3710 in a,($a9)3711 cpl3712 and d 3713 ld b,a3714 in a,($aa)3715 and e3716 or 83717 out ($aa),a3718 in a,($a9)3719 cpl 3720 and $F1 3721 rlca 3722 or b 3723 rla 3724 rla 3725 rla 3726 ld b,a3727 rla 3728 rla 3729 rla 3730 and d 3731 or b 3732 or c 3733 3734 ld b,a3735 ld hl,Controls3736 ld a,(hl)3737 xor b3738 and b3739 ld (NewPrContr),a3740 ld (hl),b37423746 ret3748.freezecontrols:3749 xor a3750 ld (Controls),a3751 ld (NewPrContr),a3752 ret3754PopulateControlsOnInterrupt: 3755 ld a,15 3757 out ($a0),a3758 ld a,$8f3759 out ($a1),a3760 ld a,14 3761 out ($a0),a37623763 in a,($a2)3764 cpl3765 and $3f 3766 ld c,a3768 ld de,$04F03769 3770 in a,($aa)3771 and e3772 or 63773 out ($aa),a3774 in a,($a9)3775 cpl3776 and $20 3777 rlca 3778 or c3779 ld c,a 3780 3781 in a,($aa) 3782 and e3783 or d3784 out ($aa),a3785 in a,($a9)3786 cpl3787 and d 3788 ld b,a3789 in a,($aa)3790 and e3791 or 83792 out ($aa),a3793 in a,($a9)3794 cpl 3795 and $F1 3796 rlca 3797 or b 3798 rla 3799 rla 3800 rla 3801 ld b,a3802 rla 3803 rla 3804 rla 3805 and d 3806 or b 3807 or c 3808 3809 ld b,a3810 ld hl,ControlsOnInterrupt3811 ld a,(hl)3812 xor b3813 and b3814 ld (NewPrControlsOnInterrupt),a3815 ld (hl),b3817 ld a,(keys+6)3818 bit 1,a 3819 ret nz3821 ld a,(ControlsOnInterrupt)3822 and %1111 00003823 ld (ControlsOnInterrupt),a3824 ret3826SetScreenOff:3827 ld a,(vdp_0+1) 3828 and %1011 11113829 jr SetScreenon.go3831SetScreenon:3832 ld a,(vdp_0+1) 3833 or %0100 00003834 .go:3835 ld (vdp_0+1),a3836 di3837 out ($99),a3838 ld a,1+1283839 ei3840 out ($99),a3841 ret3843outix384:3844 call outix2563845 jp outix1283846outix352:3847 call outix2563848 jp outix963849outix320:3850 call outix2563851 jp outix643852outix288:3853 call outix2563854 jp outix323855outix256: 3856 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3857outix250: 3858 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3859outix224:3860 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3861outix208: 3862 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3863outix192: 3864 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi3865outix176: 3866 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3867outix160:3868 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3869outix144: 3870 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3871outix128: 3872 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3873outix112:3874 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3875outix96: 3876 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3877outix80: 3878 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi3879outix64: 3880 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3881outix48:3882 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3883outix32: 3884 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 3885outix16: 3886 outi outi outi outi outi outi outi outi3887outix8: 3888 outi outi outi outi outi outi outi outi 3889 ret 3898Scroll: 3899 ld iy,(plxcurrentheroAddress)3900 ld b,6 3901 .CheckEmptyOpenSlotLoop:3902 ld a,(iy+HeroInventory+9) 3903 cp 453904 jr z,.EmptySlotFound3905 inc iy3906 djnz .CheckEmptyOpenSlotLoop3907 ret3908 .EmptySlotFound: 3909 ld a,33910 ld (ScrollFound?),a 3911 xor a3912 ld (movehero?),a3913 ld (hl),a 3914 inc hl3915 ld a,(hl) 3916 ld (hl),0 3917 sub 192-46 3918 ld (iy+HeroInventory+9),a3919 cp 463920 jp z,.Level1Scroll3921 cp 473922 jp z,.Level2Scroll3923 cp 483924 jp z,.Level3Scroll3926 .Level4Scroll:3927 call .AddSpellSchoolToSpellLevel 3928 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3929 ret z 3930 ld c,a 3932 3933 ld a,65 3934 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3935 ret z 3936 ld a,61 3937 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3938 ret z 3939 ld a,49 3940 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3941 ret z 3942 ld a,53 3943 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3944 ret z 3945 ld a,57 3946 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3947 ret z 3948 ld a,c 3949 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3951 .Level3Scroll:3952 call .AddSpellSchoolToSpellLevel 3953 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3954 ret z 3955 ld c,a 3957 3958 ld a,52 3959 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3960 ret z 3961 ld a,64 3962 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3963 ret z 3964 ld a,60 3965 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3966 ret z 3967 ld a,48 3968 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3969 ret z 3970 ld a,56 3971 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3972 ret z 3973 ld a,c 3974 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3976 .Level2Scroll:3977 call .AddSpellSchoolToSpellLevel 3978 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3979 ret z 3980 ld c,a 3982 3983 ld a,59 3984 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3985 ret z 3986 ld a,63 3987 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3988 ret z 3989 ld a,55 3990 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3991 ret z 3992 ld a,51 3993 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3994 ret z 3995 ld a,47 3996 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 3997 ret z 3998 ld a,c 3999 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4001 .Level1Scroll:4002 call .AddSpellSchoolToSpellLevel 4003 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4004 ret z 4005 ld c,a 4007 4008 ld a,62 4009 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4010 ret z 4011 ld a,58 4012 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4013 ret z 4014 ld a,54 4015 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4016 ret z 4017 ld a,50 4018 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4019 ret z 4020 ld a,46 4021 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4022 ret z 4023 ld a,c 4024 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4026 .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell: 4027 ld (iy+HeroInventory+9),a4028 ld (SpellScrollInventoryNumber),a 4030 ld b,0 4031 cp (ix+HeroInventory+9)4032 call z,.ScrollFound4033 cp (ix+HeroInventory+10)4034 call z,.ScrollFound4035 cp (ix+HeroInventory+11)4036 call z,.ScrollFound4037 cp (ix+HeroInventory+12)4038 call z,.ScrollFound4039 cp (ix+HeroInventory+13)4040 call z,.ScrollFound4041 cp (ix+HeroInventory+14)4042 call z,.ScrollFound4044 dec b 4045 ret nz4046 4047 4048 cp 46 4049 jr z,.CheckEarthLevel14050 cp 47 4051 jr z,.CheckEarthLevel24052 cp 48 4053 jr z,.CheckEarthLevel34054 cp 49 4055 jr z,.CheckEarthLevel44057 cp 50 4058 jr z,.CheckFireLevel14059 cp 51 4060 jr z,.CheckFireLevel24061 cp 52 4062 jr z,.CheckFireLevel34063 cp 53 4064 jr z,.CheckFireLevel44066 cp 54 4067 jr z,.CheckAirLevel14068 cp 55 4069 jr z,.CheckAirLevel24070 cp 56 4071 jr z,.CheckAirLevel34072 cp 57 4073 jr z,.CheckAirLevel44075 cp 58 4076 jr z,.CheckWaterLevel14077 cp 59 4078 jr z,.CheckWaterLevel24079 cp 60 4080 jr z,.CheckWaterLevel34081 cp 61 4082 jr z,.CheckWaterLevel44084 cp 62 4085 jr z,.CheckAllSchoolsLevel14086 cp 63 4087 jr z,.CheckAllSchoolsLevel24088 cp 64 4089 jr z,.CheckAllSchoolsLevel34090 cp 65 4091 jr z,.CheckAllSchoolsLevel44093 .CheckEarthLevel1:4094 bit 0,(ix+HeroEarthSpells) 4095 ret4096 .CheckEarthLevel2:4097 bit 1,(ix+HeroEarthSpells) 4098 ret4099 .CheckEarthLevel3:4100 bit 2,(ix+HeroEarthSpells) 4101 ret4102 .CheckEarthLevel4:4103 bit 3,(ix+HeroEarthSpells) 4104 ret4106 .CheckFireLevel1:4107 bit 0,(ix+HeroFireSpells) 4108 ret4109 .CheckFireLevel2:4110 bit 1,(ix+HeroFireSpells) 4111 ret4112 .CheckFireLevel3:4113 bit 2,(ix+HeroFireSpells) 4114 ret4115 .CheckFireLevel4:4116 bit 3,(ix+HeroFireSpells) 4117 ret4119 .CheckAirLevel1:4120 bit 0,(ix+HeroAirSpells) 4121 ret4122 .CheckAirLevel2:4123 bit 1,(ix+HeroAirSpells) 4124 ret4125 .CheckAirLevel3:4126 bit 2,(ix+HeroAirSpells) 4127 ret4128 .CheckAirLevel4:4129 bit 3,(ix+HeroAirSpells) 4130 ret4132 .CheckWaterLevel1:4133 bit 0,(ix+HeroWaterSpells) 4134 ret4135 .CheckWaterLevel2:4136 bit 1,(ix+HeroWaterSpells) 4137 ret4138 .CheckWaterLevel3:4139 bit 2,(ix+HeroWaterSpells) 4140 ret4141 .CheckWaterLevel4:4142 bit 3,(ix+HeroWaterSpells) 4143 ret4145 .CheckAllSchoolsLevel1:4146 bit 0,(ix+HeroAllSchoolsSpells) 4147 ret4148 .CheckAllSchoolsLevel2:4149 bit 1,(ix+HeroAllSchoolsSpells) 4150 ret4151 .CheckAllSchoolsLevel3:4152 bit 2,(ix+HeroAllSchoolsSpells) 4153 ret4154 .CheckAllSchoolsLevel4:4155 bit 3,(ix+HeroAllSchoolsSpells) 4156 ret4158 .ScrollFound:4159 inc b 4160 ret4162 .AddSpellSchoolToSpellLevel: 4163 ld ix,(plxcurrentheroAddress)4164 ld d,04165 ld e,(ix+HeroMove)4166 ld hl,(Date)4167 add hl,de4168 push hl4169 pop bc4170 ld de,5 4171 call DivideBCbyDE 4172 ld a,l 4173 add a,a4174 add a,a 4175 add a,(iy+HeroInventory+9) 4176 ret4183ListOfUnlockedMonstersLevel1:4184 db 160 4185 db 130 4186 db 167 4187 db 170 4188 db 145 4189 db 147 4190 db 148 4191 db 163 4192 db 166 4193 db 164 4194 db 177 4195 db 182 4196 db 188 4197 db 191 4198 db 000 4199ListOfUnlockedMonstersLevel2:4200 db 161 4201 db 129 4202 db 131 4203 db 136 4204 db 171 4206 db 139 4207 db 144 4208 db 146 4209 db 150 4210 db 153 4211 db 154 4212 db 165 4213 db 173 4214 db 175 4215 db 178 4216 db 180 4217 db 185 4218 db 186 4219 db 190 4220 db 187 4221 db 000 4222ListOfUnlockedMonstersLevel3:4223 db 162 4224 db 128 4225 db 134 4226 db 169 4227 db 141 4228 db 142 4229 db 149 4230 db 151 4231 db 152 4232 db 168 4233 db 143 4234 db 174 4235 db 179 4236 db 181 4237 db 183 4238 db 184 4239 db 156 4240 db 189 4241 db 000 4242ListOfUnlockedMonstersLevel4:42434245 db 132 4246 db 172 4247 db 140 4248 db 135 4249 db 138 4250 db 176 4251 db 159 4252 db 155 4253 db 000 4254ListOfUnlockedMonstersLevel5:42554257 db 133 4258 db 158 4259 db 157 4260 db 137 4261 db 000 4262 db 000 4263ListOfUnlockedMonstersLevel6:4264 db 255 4265 db 000 4267MonsterLevel1Pointer: dw ListOfUnlockedMonstersLevel14268MonsterLevel2Pointer: dw ListOfUnlockedMonstersLevel24269MonsterLevel3Pointer: dw ListOfUnlockedMonstersLevel34270MonsterLevel4Pointer: dw ListOfUnlockedMonstersLevel44271MonsterLevel5Pointer: dw ListOfUnlockedMonstersLevel54272MonsterLevel6Pointer: dw ListOfUnlockedMonstersLevel64274TotalAmountOfUnlockedTowns: db 17 4276ListOfUnlockedHeroes:4277DragonSlayer4HeroesAmount: equ CastlevaniaHeroes-DragonSlayer4Heroes4278DragonSlayer4Heroes:42794280db 04 4281db 06 4282db 08 4283db 10 4284db 26 4285db 39 4286db 41 4288CastlevaniaHeroesAmount: equ SDSnatcherHeroes-CastlevaniaHeroes4289CastlevaniaHeroes:42904291db 28 4292db 30 4293db 32 4295SDSnatcherHeroesAmount: equ UsasHeroes-SDSnatcherHeroes4296SDSnatcherHeroes:42974298db 21 4299db 22 4300db 23 4301db 57 4302db 58 4303db 59 4304db 60 4306UsasHeroesAmount: equ GoemonHeroes-UsasHeroes4307UsasHeroes:43084309db 19 4310db 47 4312GoemonHeroesAmount: equ Ys3Heroes-GoemonHeroes4313GoemonHeroes: 4315db 02 4316db 15 4318Ys3HeroesAmount: equ PsychoWorldHeroes-Ys3Heroes4319Ys3Heroes:43204321db 01 4323PsychoWorldHeroesAmount: equ KingKongHeroes-PsychoWorldHeroes4324PsychoWorldHeroes:43254326db 13 4328KingKongHeroesAmount: equ ContraGroupAHeroes-KingKongHeroes4329KingKongHeroes:43304331db 20 4333ContraGroupAHeroesAmount: equ ContraGroupBHeroes-ContraGroupAHeroes4334ContraGroupAHeroes:43354336db 25 4338ContraGroupBHeroesAmount: equ GolvelliusHeroes-ContraGroupBHeroes4339ContraGroupBHeroes:43404341db 72 4343GolvelliusHeroesAmount: equ HeroesWithoutCastle-GolvelliusHeroes4344GolvelliusHeroes:43454346db 24 4347db 43 4349HeroesWithoutCastle:43504351db 03 4352db 05 4353db 17 43554356db 07 4357db 09 4358db 18 4359db 27 4360db 29 4361db 31 4362db 33 4363db 35 4364db 37 43664367db 12 4368db 16 4369db 14 43714372db 11 43744375db 34 43774378db 36 4379db 38 43814382db 40 43844385db 42 43874388db 44 43904391db 45 43934394db 46 43964397db 48 4398db 49 44004401db 50 4402db 52 44044405db 51 4406db 53 4407db 55 44094410db 54 4411db 56 44134414db 61 44164417db 62 44194420db 63 44224423db 64 44254426db 65 44284429db 66 44314432db 67 44344435db 68 4436db 69 4437db 70 4438db 71 44404441db 73 44434444db 74 4445db 75 44474448db 76 4450EndListHeroes:4451db 00 445344604461YieArKungFuHeroesAmount: equ 14462YieArKungFuHeroes:4463BubbleBobbleGroupAHeroesAmount: equ 14464BubbleBobbleGroupAHeroes:4465BubbleBobbleGroupBHeroesAmount: equ 14466BubbleBobbleGroupBHeroes:4467AkanbeDragonGroupAHeroesAmount: equ 14468AkanbeDragonGroupAHeroes:4469AkanbeDragonGroupBHeroesAmount: equ 14470AkanbeDragonGroupBHeroes:4471ChukaTaisenHeroesAmount: equ 14472ChukaTaisenHeroes:44744480db 255 4483HeroInfoName: equ 04484HeroInfoClass: equ HeroInfoName+184485HeroInfoSpriteBlock: equ HeroInfoClass+134486HeroInfoSYSX: equ HeroInfoSpriteBlock+1 4487HeroInfoPortrait10x18SYSX: equ HeroInfoSYSX+24488HeroButton20x11SYSX: equ HeroInfoPortrait10x18SYSX+24489HeroInfoPortrait16x30SYSX: equ HeroButton20x11SYSX+24490HeroInfoSkill: equ HeroInfoPortrait16x30SYSX+24491HeroInfoNumber: equ HeroInfoSkill+14493SkillInLevelUpSlot1: db 14494SkillInLevelUpSlot2: db 14495PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?: ds 14496PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?: ds 14498 4502heroAddressesLenght: equ HeroAddressesGoemon1 - HeroAddressesAdol 4503HeroAddressesAdol: db "Adol",255,"             ","Knight      ",255,AdolSpriteBlock| dw HeroSYSXAdol,HeroPortrait10x18SYSXAdol,HeroButton20x11SYSXAdol,HeroPortrait16x30SYSXAdol | db 01 | db 001 |4504HeroAddressesGoemon1: db "Goemon",255,"           ","Barbarian   ",255,Goemon1SpriteBlock| dw HeroSYSXGoemon1,HeroPortrait10x18SYSXGoemon1,HeroButton20x11SYSXGoemon1,HeroPortrait16x30SYSXGoemon1 | db 04 | db 002 |4505HeroAddressesPixy: db "Faerie Pixie",255,"     ","Shieldbearer",255,PixySpriteBlock| dw HeroSYSXPixy,HeroPortrait10x18SYSXPixy,HeroButton20x11SYSXPixy,HeroPortrait16x30SYSXPixy | db 07 | db 003 |4506HeroAddressesDrasle1: db "Royas Worzen",255,"     ","Overlord    ",255,Drasle1SpriteBlock| dw HeroSYSXDrasle1,HeroPortrait10x18SYSXDrasle1,HeroButton20x11SYSXDrasle1,HeroPortrait16x30SYSXDrasle1 | db 10 | db 004 |4507HeroAddressesLatok: db "Latok",255,"            ","Alchemist   ",255,LatokSpriteBlock| dw HeroSYSXLatok,HeroPortrait10x18SYSXLatok,HeroButton20x11SYSXLatok,HeroPortrait16x30SYSXLatok | db 13 | db 005 |4508HeroAddressesDrasle2: db "Lyll Worzen",255,"      ","Sage        ",255,Drasle2SpriteBlock| dw HeroSYSXDrasle2,HeroPortrait10x18SYSXDrasle2,HeroButton20x11SYSXDrasle2,HeroPortrait16x30SYSXDrasle2 | db 16 | db 006 |4509HeroAddressesSnake1: db "Snake",255,"            ","Ranger      ",255,Snake1SpriteBlock| dw HeroSYSXSnake1,HeroPortrait10x18SYSXSnake1,HeroButton20x11SYSXSnake1,HeroPortrait16x30SYSXSnake1 | db 19 | db 007 |4510HeroAddressesDrasle3: db "Maia Worzen",255,"      ","Wizzard     ",255,Drasle3SpriteBlock| dw HeroSYSXDrasle3,HeroPortrait10x18SYSXDrasle3,HeroButton20x11SYSXDrasle3,HeroPortrait16x30SYSXDrasle3 | db 22 | db 008 |4512HeroAddressesSnake2: db "Solid Snake",255,"      ","Battle Mage ",255,Snake2SpriteBlock| dw HeroSYSXSnake2,HeroPortrait10x18SYSXSnake2,HeroButton20x11SYSXSnake2,HeroPortrait16x30SYSXSnake2 | db 25 | db 009 |4513HeroAddressesDrasle4: db "Xemn Worzen",255,"      ","Scholar     ",255,Drasle4SpriteBlock| dw HeroSYSXDrasle4,HeroPortrait10x18SYSXDrasle4,HeroButton20x11SYSXDrasle4,HeroPortrait16x30SYSXDrasle4 | db 28 | db 010 |4514HeroAddressesAshguine: db "Ashguine",255,"         ","Necromancer ",255,AshguineSpriteBlock| dw HeroSYSXAshguine,HeroPortrait10x18SYSXAshguine,HeroButton20x11SYSXAshguine,HeroPortrait16x30SYSXAshguine | db 31 | db 011 |4515HeroAddressesUndeadline1: db "Leon",255,"             ","Knight      ",255,Undeadline1SpriteBlock| dw HeroSYSXUndeadline1,HeroPortrait10x18SYSXUndeadline1,HeroButton20x11SYSXUndeadline1,HeroPortrait16x30SYSXUndeadline1 | db 01 | db 012 |4516HeroAddressesPsychoWorld: db "Lucia",255,"            ","Barbarian   ",255,PsychoWorldSpriteBlock| dw HeroSYSXPsychoWorld,HeroPortrait10x18SYSXPsychoWorld,HeroButton20x11SYSXPsychoWorld,HeroPortrait16x30SYSXPsychoWorld | db 04 | db 013 |4517HeroAddressesUndeadline2: db "Ruika",255,"            ","Shieldbearer",255,Undeadline2SpriteBlock| dw HeroSYSXUndeadline2,HeroPortrait10x18SYSXUndeadline2,HeroButton20x11SYSXUndeadline2,HeroPortrait16x30SYSXUndeadline2 | db 07 | db 014 |4518HeroAddressesGoemon2: db "Ebisumaru",255,"        ","Overlord    ",255,Goemon2SpriteBlock| dw HeroSYSXGoemon2,HeroPortrait10x18SYSXGoemon2,HeroButton20x11SYSXGoemon2,HeroPortrait16x30SYSXGoemon2 | db 10 | db 015 |4519HeroAddressesUndeadline3: db "Dino",255,"             ","Alchemist   ",255,Undeadline3SpriteBlock| dw HeroSYSXUndeadline3,HeroPortrait10x18SYSXUndeadline3,HeroButton20x11SYSXUndeadline3,HeroPortrait16x30SYSXUndeadline3 | db 13 | db 016 |4521HeroAddressesFray: db "Fray",255,"             ","Sage        ",255,FraySpriteBlock| dw HeroSYSXFray,HeroPortrait10x18SYSXFray,HeroButton20x11SYSXFray,HeroPortrait16x30SYSXFray | db 16 | db 017 |4522HeroAddressesBlackColor: db "Black color",255,"      ","Ranger      ",255,BlackColorSpriteBlock| dw HeroSYSXBlackColor,HeroPortrait10x18SYSXBlackColor,HeroButton20x11SYSXBlackColor,HeroPortrait16x30SYSXBlackColor | db 19 | db 018 |4523HeroAddressesWit: db "Wit",255,"              ","Wizzard     ",255,WitSpriteBlock| dw HeroSYSXWit,HeroPortrait10x18SYSXWit,HeroButton20x11SYSXWit,HeroPortrait16x30SYSXWit | db 22 | db 019 |4524HeroAddressesMitchell: db "Dr. Hank Mitchell",255, "Battle Mage ",255,MitchellSpriteBlock| dw HeroSYSXMitchell,HeroPortrait10x18SYSXMitchell,HeroButton20x11SYSXMitchell,HeroPortrait16x30SYSXMitchell | db 25 | db 020 |4525HeroAddressesJanJackGibson: db "Jan Jack Gibson",255,"  ","Scholar     ",255,JanJackGibsonSpriteBlock| dw HeroSYSXJanJackGibson,HeroPortrait10x18SYSXJanJackGibson,HeroButton20x11SYSXJanJackGibson,HeroPortrait16x30SYSXJanJackGibson | db 28 | db 021 |4526HeroAddressesGillianSeed: db "Gillian Seed",255,"     ","Necromancer ",255,GillianSeedSpriteBlock| dw HeroSYSXGillianSeed,HeroPortrait10x18SYSXGillianSeed,HeroButton20x11SYSXGillianSeed,HeroPortrait16x30SYSXGillianSeed | db 31 | db 022 |4527HeroAddressesSnatcher: db "Snatcher",255,"         ","Knight      ",255,SnatcherSpriteBlock| dw HeroSYSXSnatcher,HeroPortrait10x18SYSXSnatcher,HeroButton20x11SYSXSnatcher,HeroPortrait16x30SYSXSnatcher | db 01 | db 023 |4528HeroAddressesGolvellius: db "Kelesis",255,"          ","Barbarian   ",255,GolvelliusSpriteBlock| dw HeroSYSXGolvellius,HeroPortrait10x18SYSXGolvellius,HeroButton20x11SYSXGolvellius,HeroPortrait16x30SYSXGolvellius | db 04 | db 024 |4530HeroAddressesBillRizer: db "Bill Rizer",255,"       ","Shieldbearer",255,BillRizerSpriteBlock| dw HeroSYSXBillRizer,HeroPortrait10x18SYSXBillRizer,HeroButton20x11SYSXBillRizer,HeroPortrait16x30SYSXBillRizer | db 07 | db 025 |4531HeroAddressesPochi: db "Pochi Worzen",255,"     ","Overlord    ",255,PochiSpriteBlock| dw HeroSYSXPochi,HeroPortrait10x18SYSXPochi,HeroButton20x11SYSXPochi,HeroPortrait16x30SYSXPochi | db 10 | db 026 |4532HeroAddressesGreyFox: db "Grey Fox",255,"         ","Alchemist   ",255,GreyFoxSpriteBlock| dw HeroSYSXGreyFox,HeroPortrait10x18SYSXGreyFox,HeroButton20x11SYSXGreyFox,HeroPortrait16x30SYSXGreyFox | db 13 | db 027 |4533HeroAddressesTrevorBelmont: db "Trevor Belmont",255,"   ","Sage        ",255,TrevorBelmontSpriteBlock| dw HeroSYSXTrevorBelmont,HeroPortrait10x18SYSXTrevorBelmont,HeroButton20x11SYSXTrevorBelmont,HeroPortrait16x30SYSXTrevorBelmont | db 16 | db 028 |4534HeroAddressesBigBoss: db "Big Boss",255,"         ","Ranger      ",255,BigBossSpriteBlock| dw HeroSYSXBigBoss,HeroPortrait10x18SYSXBigBoss,HeroButton20x11SYSXBigBoss,HeroPortrait16x30SYSXBigBoss | db 19 | db 029 |4535HeroAddressesSimonBelmont: db "Simon Belmont",255,"    ","Wizzard     ",255,SimonBelmontSpriteBlock | dw HeroSYSXSimonBelmont,HeroPortrait10x18SYSXSimonBelmont,HeroButton20x11SYSXSimonBelmont,HeroPortrait16x30SYSXSimonBelmont | db 22 | db 030 |4536HeroAddressesDrPettrovich: db "Doctor Pettrovich",255, "Battle Mage ",255,DrPettrovichSpriteBlock | dw HeroSYSXDrPettrovich,HeroPortrait10x18SYSXDrPettrovich,HeroButton20x11SYSXDrPettrovich,HeroPortrait16x30SYSXDrPettrovich | db 25 | db 031 |4537HeroAddressesRichterBelmont: db "Richter Belmont",255,"  ","Necromancer ",255,RichterBelmontSpriteBlock| dw HeroSYSXRichterBelmont,HeroPortrait10x18SYSXRichterBelmont,HeroButton20x11SYSXRichterBelmont,HeroPortrait16x30SYSXRichterBelmont | db 31 | db 032 |4539HeroAddressesUltraBox: db "Ultrabox",255,"         ","Scholar     ",255,UltraboxSpriteBlock| dw HeroSYSXUltrabox,HeroPortrait10x18SYSXUltrabox,HeroButton20x11SYSXUltrabox,HeroPortrait16x30SYSXUltrabox | db 28 | db 033 |4540HeroAddressesLoganSerios: db "Logan Serios",255,"     ","Knight      ",255,LoganSeriosSpriteBlock| dw HeroSYSXLoganSerios,HeroPortrait10x18SYSXLoganSerios,HeroButton20x11SYSXLoganSerios,HeroPortrait16x30SYSXLoganSerios | db 01 | db 034 |4541HeroAddressesHollyWhite: db "Holly White",255,"      ","Barbarian   ",255,HollyWhiteSpriteBlock| dw HeroSYSXHollyWhite,HeroPortrait10x18SYSXHollyWhite,HeroButton20x11SYSXHollyWhite,HeroPortrait16x30SYSXHollyWhite | db 04 | db 035 |4542HeroAddressesMercies: db "Mercies ",255,"         ","Shieldbearer",255,MerciesSpriteBlock| dw HeroSYSXMercies,HeroPortrait10x18SYSXMercies,HeroButton20x11SYSXMercies,HeroPortrait16x30SYSXMercies | db 07 | db 036 |4543HeroAddressesNatashaRomanenko:db "Nastasha",255,"         ","Overlord    ",255,NatashaRomanenkoSpriteBlock | dw HeroSYSXNatashaRomanenko,HeroPortrait10x18SYSXNatashaRomanenko,HeroButton20x11SYSXNatashaRomanenko,HeroPortrait16x30SYSXNatashaRomanenko | db 10 | db 037 |4544HeroAddressesRuth: db "Ruth ",255,"            ","Alchemist   ",255,RuthSpriteBlock| dw HeroSYSXRuth,HeroPortrait10x18SYSXRuth,HeroButton20x11SYSXRuth,HeroPortrait16x30SYSXRuth | db 13 | db 038 |4545HeroAddressesGeera: db "Geera Worzen",255,"     ","Sage        ",255,GeeraSpriteBlock| dw HeroSYSXGeera,HeroPortrait10x18SYSXGeera,HeroButton20x11SYSXGeera,HeroPortrait16x30SYSXGeera | db 16 | db 039 |4546HeroAddressesYoungNoble: db "Young Noble",255,"      ","Ranger      ",255,YoungNobleSpriteBlock| dw HeroSYSXYoungNoble,HeroPortrait10x18SYSXYoungNoble,HeroButton20x11SYSXYoungNoble,HeroPortrait16x30SYSXYoungNoble | db 19 | db 040 |4548HeroAddressesDawel: db "Dawel Worzen",255,"     ","Wizzard     ",255,DawelSpriteBlock| dw HeroSYSXDawel,HeroPortrait10x18SYSXDawel,HeroButton20x11SYSXDawel,HeroPortrait16x30SYSXDawel | db 22 | db 041 |4549HeroAddressesPocky: db "Pocky",255,"            ","Battle Mage ",255,PockySpriteBlock| dw HeroSYSXPocky,HeroPortrait10x18SYSXPocky,HeroButton20x11SYSXPocky,HeroPortrait16x30SYSXPocky | db 25 | db 042 |4550HeroAddressesKelesisTheCook: db "Kelesis The Cook",255," ","Scholar     ",255,KelesisTheCookSpriteBlock| dw HeroSYSXKelesisTheCook,HeroPortrait10x18SYSXKelesisTheCook,HeroButton20x11SYSXKelesisTheCook,HeroPortrait16x30SYSXKelesisTheCook | db 28 | db 043 |4551HeroAddressesLolo: db "Lolo",255,"             ","Necromancer ",255,LoloSpriteBlock| dw HeroSYSXLolo,HeroPortrait10x18SYSXLolo,HeroButton20x11SYSXLolo,HeroPortrait16x30SYSXLolo | db 31 | db 044 |4552HeroAddressesPippols: db "Pippols",255,"          ","Knight      ",255,PippolsSpriteBlock| dw HeroSYSXPippols,HeroPortrait10x18SYSXPippols,HeroButton20x11SYSXPippols,HeroPortrait16x30SYSXPippols | db 01 | db 045 |4553HeroAddressesRandar: db "Randar",255,"           ","Barbarian   ",255,RandarSpriteBlock| dw HeroSYSXRandar,HeroPortrait10x18SYSXRandar,HeroButton20x11SYSXRandar,HeroPortrait16x30SYSXRandar | db 04 | db 046 |4554HeroAddressesCles: db "Cles",255,"             ","Shieldbearer",255,ClesSpriteBlock| dw HeroSYSXCles,HeroPortrait10x18SYSXCles,HeroButton20x11SYSXCles,HeroPortrait16x30SYSXCles | db 07 | db 047 |4555HeroAddressesLuice: db "Luice",255,"            ","Overlord    ",255,LuiceSpriteBlock| dw HeroSYSXLuice,HeroPortrait10x18SYSXLuice,HeroButton20x11SYSXLuice,HeroPortrait16x30SYSXLuice | db 10 | db 048 |4557HeroAddressesDick: db "Dick",255,"             ","Alchemist   ",255,DickSpriteBlock| dw HeroSYSXDick,HeroPortrait10x18SYSXDick,HeroButton20x11SYSXDick,HeroPortrait16x30SYSXDick | db 13 | db 049 |4558HeroAddressesAphrodite: db "Aphrodite",255,"        ","Sage        ",255,AphroditeSpriteBlock| dw HeroSYSXAphrodite,HeroPortrait10x18SYSXAphrodite,HeroButton20x11SYSXAphrodite,HeroPortrait16x30SYSXAphrodite | db 16 | db 050 |4559HeroAddressesTienRen: db "Tien Ren",255,"         ","Ranger      ",255,TienRenSpriteBlock| dw HeroSYSXTienRen,HeroPortrait10x18SYSXTienRen,HeroButton20x11SYSXTienRen,HeroPortrait16x30SYSXTienRen | db 19 | db 051 |4560HeroAddressesPopolon: db "Popolon",255,"          ","Wizzard     ",255,PopolonSpriteBlock| dw HeroSYSXPopolon,HeroPortrait10x18SYSXPopolon,HeroButton20x11SYSXPopolon,HeroPortrait16x30SYSXPopolon | db 22 | db 052 |4561HeroAddressesHoMei: db "Ho Mei",255,"           ","Battle Mage ",255,HoMeiSpriteBlock| dw HeroSYSXHoMei,HeroPortrait10x18SYSXHoMei,HeroButton20x11SYSXHoMei,HeroPortrait16x30SYSXHoMei | db 25 | db 053 |4562HeroAddressesPriestessKi: db "Priestess Ki",255,"     ","Scholar     ",255,PriestessKiSpriteBlock| dw HeroSYSXPriestessKi,HeroPortrait10x18SYSXPriestessKi,HeroButton20x11SYSXPriestessKi,HeroPortrait16x30SYSXPriestessKi | db 28 | db 054 |4563HeroAddressesMeiHong: db "Mei Hong",255,"         ","Necromancer ",255,MeiHongSpriteBlock| dw HeroSYSXMeiHong,HeroPortrait10x18SYSXMeiHong,HeroButton20x11SYSXMeiHong,HeroPortrait16x30SYSXMeiHong | db 31 | db 055 |4564HeroAddressesPrinceGilgamesh: db "Prince Gilgamesh",255," ","Knight      ",255,PrinceGilgameshSpriteBlock| dw HeroSYSXPrinceGilgamesh,HeroPortrait10x18SYSXPrinceGilgamesh,HeroButton20x11SYSXPrinceGilgamesh,HeroPortrait16x30SYSXPrinceGilgamesh | db 01 | db 056 |4566HeroAddressesRandomHajile: db "Random Hajile",255,"    ","Barbarian   ",255,RandomHajileSpriteBlock| dw HeroSYSXRandomHajile,HeroPortrait10x18SYSXRandomHajile,HeroButton20x11SYSXRandomHajile,HeroPortrait16x30SYSXRandomHajile | db 04 | db 057 |4567HeroAddressesBensonCunningham:db "Benson Cunningham",255, "Shieldbearer",255,BensonCunninghamSpriteBlock| dw HeroSYSXBensonCunningham,HeroPortrait10x18SYSXBensonCunningham,HeroButton20x11SYSXBensonCunningham,HeroPortrait16x30SYSXBensonCunningham | db 07 | db 058 |4568HeroAddressesJamieSeed: db "Jamie Seed",255,"       ","Overlord    ",255,JamieSeedSpriteBlock| dw HeroSYSXJamieSeed,HeroPortrait10x18SYSXJamieSeed,HeroButton20x11SYSXJamieSeed,HeroPortrait16x30SYSXJamieSeed | db 10 | db 059 |4569HeroAddressesArmoredSnatcher: db "Armored Snatcher",255," ","Alchemist   ",255,ArmoredSnatcherSpriteBlock| dw HeroSYSXArmoredSnatcher,HeroPortrait10x18SYSXArmoredSnatcher,HeroButton20x11SYSXArmoredSnatcher,HeroPortrait16x30SYSXArmoredSnatcher | db 13 | db 060 |4570HeroAddressesDruid: db "Druid",255,"            ","Sage        ",255,DruidSpriteBlock| dw HeroSYSXDruid,HeroPortrait10x18SYSXDruid,HeroButton20x11SYSXDruid,HeroPortrait16x30SYSXDruid | db 16 | db 061 |4571HeroAddressesJeddaChef: db "Jedda Chef",255,"       ","Ranger      ",255,JeddaChefSpriteBlock| dw HeroSYSXJeddaChef,HeroPortrait10x18SYSXJeddaChef,HeroButton20x11SYSXJeddaChef,HeroPortrait16x30SYSXJeddaChef | db 19 | db 062 |4572HeroAddressesMomotaru: db "Momotaru",255,"         ","Wizzard     ",255,MomotaruSpriteBlock| dw HeroSYSXMomotaru,HeroPortrait10x18SYSXMomotaru,HeroButton20x11SYSXMomotaru,HeroPortrait16x30SYSXMomotaru | db 22 | db 063 |4573HeroAddressesLuka: db "Luka",255,"             ","Battle Mage ",255,LukaSpriteBlock| dw HeroSYSXLuka,HeroPortrait10x18SYSXLuka,HeroButton20x11SYSXLuka,HeroPortrait16x30SYSXLuka | db 25 | db 064 |4575HeroAddressesHeiwaAndButako: db "Heiwa and Butako",255," ","Scholar     ",255,HeiwaAndButakoSpriteBlock| dw HeroSYSXHeiwaAndButako,HeroPortrait10x18SYSXHeiwaAndButako,HeroButton20x11SYSXHeiwaAndButako,HeroPortrait16x30SYSXHeiwaAndButako | db 28 | db 065 |4576HeroAddressesAce: db "Ace",255,"              ","Necromancer ",255,AceSpriteBlock| dw HeroSYSXAce,HeroPortrait10x18SYSXAce,HeroButton20x11SYSXAce,HeroPortrait16x30SYSXAce | db 31 | db 066 |4577HeroAddressesSpaceExplorer01: db "Space Explorer 01",255, "Knight      ",255,SpaceExplorer01SpriteBlock| dw HeroSYSXSpaceExplorer01,HeroPortrait10x18SYSXSpaceExplorer01,HeroButton20x11SYSXSpaceExplorer01,HeroPortrait16x30SYSXSpaceExplorer01 | db 01 | db 067 |4578HeroAddressesFern: db "Feru",255,"             ","Barbarian   ",255,FernSpriteBlock| dw HeroSYSXFern,HeroPortrait10x18SYSXFern,HeroButton20x11SYSXFern,HeroPortrait16x30SYSXFern | db 04 | db 068 |4579HeroAddressesHorn: db "Horn",255,"             ","Shieldbearer",255,HornSpriteBlock| dw HeroSYSXHorn,HeroPortrait10x18SYSXHorn,HeroButton20x11SYSXHorn,HeroPortrait16x30SYSXHorn | db 07 | db 069 |4580HeroAddressesPixie: db "Pixie",255,"            ","Overlord    ",255,PixieSpriteBlock| dw HeroSYSXPixie,HeroPortrait10x18SYSXPixie,HeroButton20x11SYSXPixie,HeroPortrait16x30SYSXPixie | db 10 | db 070 |4581HeroAddressesFreyaJerbain: db "Freya Jerbain",255,"    ","Alchemist   ",255,FreyaJerbainSpriteBlock| dw HeroSYSXFreyaJerbain,HeroPortrait10x18SYSXFreyaJerbain,HeroButton20x11SYSXFreyaJerbain,HeroPortrait16x30SYSXFreyaJerbain | db 13 | db 071 |4582HeroAddressesLanceBean: db "Lance Bean",255,"       ","Sage        ",255,LanceBeanSpriteBlock| dw HeroSYSXLanceBean,HeroPortrait10x18SYSXLanceBean,HeroButton20x11SYSXLanceBean,HeroPortrait16x30SYSXLanceBean | db 16 | db 072 |4584HeroAddressesThiharis: db "Thiharis",255,"         ","Ranger      ",255,ThiharisSpriteBlock| dw HeroSYSXThiharis,HeroPortrait10x18SYSXThiharis,HeroButton20x11SYSXThiharis,HeroPortrait16x30SYSXThiharis | db 19 | db 073 |4585HeroAddressesPampas: db "Pampas",255,"           ","Wizzard     ",255,PampasSpriteBlock| dw HeroSYSXPampas,HeroPortrait10x18SYSXPampas,HeroButton20x11SYSXPampas,HeroPortrait16x30SYSXPampas | db 22 | db 074 |4586HeroAddressesSelene: db "Selene",255,"           ","Battle Mage ",255,SeleneSpriteBlock| dw HeroSYSXSelene,HeroPortrait10x18SYSXSelene,HeroButton20x11SYSXSelene,HeroPortrait16x30SYSXSelene | db 25 | db 075 |4587HeroAddressesSkooter: db "Skooter",255,"          ","Scholar     ",255,SkooterSpriteBlock| dw HeroSYSXSkooter,HeroPortrait10x18SYSXSkooter,HeroButton20x11SYSXSkooter,HeroPortrait16x30SYSXSkooter | db 28 | db 076 |4593HeroSYSXAdol: equ $4000+(000*128)+((64+000)/2)-128 4594HeroSYSXGoemon1: equ $4000+(000*128)+((64+128)/2)-128 4595HeroSYSXPixy: equ $4000+(032*128)+((64+000)/2)-128 4596HeroSYSXDrasle1: equ $4000+(032*128)+((64+128)/2)-128 4597HeroSYSXLatok: equ $4000+(064*128)+((64+000)/2)-128 4598HeroSYSXDrasle2: equ $4000+(064*128)+((64+128)/2)-128 4599HeroSYSXSnake1: equ $4000+(096*128)+((64+000)/2)-128 4600HeroSYSXDrasle3: equ $4000+(096*128)+((64+128)/2)-128 4601HeroSYSXSnake2: equ $4000+(000*128)+((64+000)/2)-128 4602HeroSYSXDrasle4: equ $4000+(000*128)+((64+128)/2)-128 4603HeroSYSXAshguine: equ $4000+(032*128)+((64+000)/2)-128 4604HeroSYSXUndeadline1: equ $4000+(032*128)+((64+128)/2)-128 4605HeroSYSXPsychoWorld: equ $4000+(064*128)+((64+000)/2)-128 4606HeroSYSXUndeadline2: equ $4000+(064*128)+((64+128)/2)-128 4607HeroSYSXGoemon2: equ $4000+(096*128)+((64+000)/2)-128 4608HeroSYSXUndeadline3: equ $4000+(096*128)+((64+128)/2)-128 4610HeroSYSXFray: equ $4000+(000*128)+((64+000)/2)-128 4611HeroSYSXBlackColor: equ $4000+(000*128)+((64+128)/2)-128 4612HeroSYSXWit: equ $4000+(032*128)+((64+000)/2)-128 4613HeroSYSXMitchell: equ $4000+(032*128)+((64+128)/2)-128 4614HeroSYSXJanJackGibson:equ $4000+(064*128)+((64+000)/2)-128 4615HeroSYSXGillianSeed: equ $4000+(064*128)+((64+128)/2)-128 4616HeroSYSXSnatcher: equ $4000+(096*128)+((64+000)/2)-128 4617HeroSYSXGolvellius: equ $4000+(096*128)+((64+128)/2)-128 4618HeroSYSXBillRizer: equ $4000+(000*128)+((64+000)/2)-128 4619HeroSYSXPochi: equ $4000+(000*128)+((64+128)/2)-128 4620HeroSYSXGreyFox: equ $4000+(032*128)+((64+000)/2)-128 4621HeroSYSXTrevorBelmont:equ $4000+(032*128)+((64+128)/2)-128 4622HeroSYSXBigBoss: equ $4000+(064*128)+((64+000)/2)-128 4623HeroSYSXSimonBelmont: equ $4000+(064*128)+((64+128)/2)-128 4624HeroSYSXDrPettrovich: equ $4000+(096*128)+((64+000)/2)-128 4625HeroSYSXRichterBelmont:equ $4000+(096*128)+((64+128)/2)-128 4627HeroSYSXUltrabox: equ $4000+(000*128)+((64+000)/2)-128 4628HeroSYSXLoganSerios: equ $4000+(000*128)+((64+128)/2)-128 4629HeroSYSXHollyWhite: equ $4000+(032*128)+((64+000)/2)-128 4630HeroSYSXMercies: equ $4000+(032*128)+((64+128)/2)-128 4631HeroSYSXNatashaRomanenko: equ $4000+(064*128)+((64+000)/2)-128 4632HeroSYSXRuth: equ $4000+(064*128)+((64+128)/2)-128 4633HeroSYSXGeera: equ $4000+(096*128)+((64+000)/2)-128 4634HeroSYSXYoungNoble: equ $4000+(096*128)+((64+128)/2)-128 4635HeroSYSXDawel: equ $4000+(000*128)+((64+000)/2)-128 4636HeroSYSXPocky: equ $4000+(000*128)+((64+128)/2)-128 4637HeroSYSXKelesisTheCook: equ $4000+(032*128)+((64+000)/2)-128 4638HeroSYSXLolo: equ $4000+(032*128)+((64+128)/2)-128 4639HeroSYSXPippols: equ $4000+(064*128)+((64+000)/2)-128 4640HeroSYSXRandar: equ $4000+(064*128)+((64+128)/2)-128 4641HeroSYSXCles: equ $4000+(096*128)+((64+000)/2)-128 4642HeroSYSXLuice: equ $4000+(096*128)+((64+128)/2)-128 4644HeroSYSXDick: equ $4000+(000*128)+((64+000)/2)-128 4645HeroSYSXAphrodite: equ $4000+(000*128)+((64+128)/2)-128 4646HeroSYSXTienRen: equ $4000+(032*128)+((64+000)/2)-128 4647HeroSYSXPopolon: equ $4000+(032*128)+((64+128)/2)-128 4648HeroSYSXHoMei: equ $4000+(064*128)+((64+000)/2)-128 4649HeroSYSXPriestessKi: equ $4000+(064*128)+((64+128)/2)-128 4650HeroSYSXMeiHong: equ $4000+(096*128)+((64+000)/2)-128 4651HeroSYSXPrinceGilgamesh: equ $4000+(096*128)+((64+128)/2)-128 4652HeroSYSXRandomHajile: equ $4000+(000*128)+((64+000)/2)-128 4653HeroSYSXBensonCunningham: equ $4000+(000*128)+((64+128)/2)-128 4654HeroSYSXJamieSeed: equ $4000+(032*128)+((64+000)/2)-128 4655HeroSYSXArmoredSnatcher: equ $4000+(032*128)+((64+128)/2)-128 4656HeroSYSXDruid: equ $4000+(064*128)+((64+000)/2)-128 4657HeroSYSXMomotaru: equ $4000+(064*128)+((64+128)/2)-128 4658HeroSYSXLuka: equ $4000+(096*128)+((64+000)/2)-128 4659HeroSYSXHeiwaAndButako: equ $4000+(096*128)+((64+128)/2)-128 4661HeroSYSXAce: equ $4000+(000*128)+((64+000)/2)-128 4662HeroSYSXSpaceExplorer01: equ $4000+(000*128)+((64+128)/2)-128 4663HeroSYSXFern: equ $4000+(032*128)+((64+000)/2)-128 4664HeroSYSXHorn: equ $4000+(032*128)+((64+128)/2)-128 4665HeroSYSXPixie: equ $4000+(064*128)+((64+000)/2)-128 4666HeroSYSXFreyaJerbain: equ $4000+(064*128)+((64+128)/2)-128 4667HeroSYSXLanceBean: equ $4000+(096*128)+((64+000)/2)-128 4668HeroSYSXThiharis: equ $4000+(096*128)+((64+128)/2)-128 4669HeroSYSXPampas: equ $4000+(000*128)+((64+000)/2)-128 4670HeroSYSXSelene: equ $4000+(000*128)+((64+128)/2)-128 4671HeroSYSXSkooter: equ $4000+(032*128)+((64+000)/2)-128 4672HeroSYSXJeddaChef: equ $4000+(032*128)+((64+128)/2)-128 4678469847174736474747604761HeroPortrait16x30SYSXAdol: equ $8000+(000*128)+(000/2)-128 4762HeroPortrait16x30SYSXGoemon1: equ $8000+(000*128)+(016/2)-128 4763HeroPortrait16x30SYSXPixy: equ $8000+(000*128)+(032/2)-128 4764HeroPortrait16x30SYSXDrasle1: equ $8000+(000*128)+(048/2)-128 4765HeroPortrait16x30SYSXLatok: equ $8000+(000*128)+(064/2)-128 4766HeroPortrait16x30SYSXDrasle2: equ $8000+(000*128)+(080/2)-128 4767HeroPortrait16x30SYSXSnake1: equ $8000+(000*128)+(096/2)-128 4768HeroPortrait16x30SYSXDrasle3: equ $8000+(000*128)+(112/2)-128 4769HeroPortrait16x30SYSXSnake2: equ $8000+(000*128)+(128/2)-128 4770HeroPortrait16x30SYSXDrasle4: equ $8000+(000*128)+(144/2)-128 4771HeroPortrait16x30SYSXAshguine: equ $8000+(000*128)+(160/2)-128 4772HeroPortrait16x30SYSXUndeadline1: equ $8000+(000*128)+(176/2)-128 4773HeroPortrait16x30SYSXPsychoWorld: equ $8000+(000*128)+(192/2)-128 4774HeroPortrait16x30SYSXUndeadline2: equ $8000+(000*128)+(208/2)-128 4775HeroPortrait16x30SYSXGoemon2: equ $8000+(000*128)+(224/2)-128 4776HeroPortrait16x30SYSXUndeadline3: equ $8000+(000*128)+(240/2)-128 4778HeroPortrait16x30SYSXFray: equ $8000+(030*128)+(000/2)-128 4779HeroPortrait16x30SYSXBlackColor: equ $8000+(030*128)+(016/2)-128 4780HeroPortrait16x30SYSXWit: equ $8000+(030*128)+(032/2)-128 4781HeroPortrait16x30SYSXMitchell: equ $8000+(030*128)+(048/2)-128 4782HeroPortrait16x30SYSXJanJackGibson:equ $8000+(030*128)+(064/2)-128 4783HeroPortrait16x30SYSXGillianSeed: equ $8000+(030*128)+(080/2)-128 4784HeroPortrait16x30SYSXSnatcher: equ $8000+(030*128)+(096/2)-128 4785HeroPortrait16x30SYSXGolvellius: equ $8000+(030*128)+(112/2)-128 4786HeroPortrait16x30SYSXBillRizer: equ $8000+(030*128)+(128/2)-128 4787HeroPortrait16x30SYSXPochi: equ $8000+(030*128)+(144/2)-128 4788HeroPortrait16x30SYSXGreyFox: equ $8000+(030*128)+(160/2)-128 4789HeroPortrait16x30SYSXTrevorBelmont:equ $8000+(030*128)+(176/2)-128 4790HeroPortrait16x30SYSXBigBoss: equ $8000+(030*128)+(192/2)-128 4791HeroPortrait16x30SYSXSimonBelmont: equ $8000+(030*128)+(208/2)-128 4792HeroPortrait16x30SYSXDrPettrovich: equ $8000+(030*128)+(224/2)-128 4793HeroPortrait16x30SYSXRichterBelmont:equ $8000+(030*128)+(240/2)-128 4795HeroPortrait16x30SYSXUltrabox: equ $8000+(060*128)+(000/2)-128 4796HeroPortrait16x30SYSXLoganSerios: equ $8000+(060*128)+(016/2)-128 4797HeroPortrait16x30SYSXHollyWhite: equ $8000+(060*128)+(032/2)-128 4798HeroPortrait16x30SYSXMercies: equ $8000+(060*128)+(048/2)-128 4799HeroPortrait16x30SYSXNatashaRomanenko:equ $8000+(060*128)+(064/2)-128 4800HeroPortrait16x30SYSXRuth: equ $8000+(060*128)+(080/2)-128 4801HeroPortrait16x30SYSXGeera: equ $8000+(060*128)+(096/2)-128 4802HeroPortrait16x30SYSXyoungNoble: equ $8000+(060*128)+(112/2)-128 4803HeroPortrait16x30SYSXDawel: equ $8000+(060*128)+(128/2)-128 4804HeroPortrait16x30SYSXPocky: equ $8000+(060*128)+(144/2)-128 4805HeroPortrait16x30SYSXKelesisTheCook:equ $8000+(060*128)+(160/2)-128 4806HeroPortrait16x30SYSXLolo: equ $8000+(060*128)+(176/2)-128 4807HeroPortrait16x30SYSXPippols: equ $8000+(060*128)+(192/2)-128 4808HeroPortrait16x30SYSXRandar: equ $8000+(060*128)+(208/2)-128 4809HeroPortrait16x30SYSXCles: equ $8000+(060*128)+(224/2)-128 4810HeroPortrait16x30SYSXLuice: equ $8000+(060*128)+(240/2)-128 4812HeroPortrait16x30SYSXDick: equ $8000+(090*128)+(000/2)-128 4813HeroPortrait16x30SYSXAphrodite: equ $8000+(090*128)+(016/2)-128 4814HeroPortrait16x30SYSXTienRen: equ $8000+(090*128)+(032/2)-128 4815HeroPortrait16x30SYSXPopolon: equ $8000+(090*128)+(048/2)-128 4816HeroPortrait16x30SYSXHoMei: equ $8000+(090*128)+(064/2)-128 4817HeroPortrait16x30SYSXPriestessKi: equ $8000+(090*128)+(080/2)-128 4818HeroPortrait16x30SYSXMeiHong: equ $8000+(090*128)+(096/2)-128 4819HeroPortrait16x30SYSXPrinceGilgamesh: equ $8000+(090*128)+(112/2)-128 4820HeroPortrait16x30SYSXRandomHajile: equ $8000+(090*128)+(128/2)-128 4821HeroPortrait16x30SYSXBensonCunningham: equ $8000+(090*128)+(144/2)-128 4822HeroPortrait16x30SYSXJamieSeed: equ $8000+(090*128)+(160/2)-128 4823HeroPortrait16x30SYSXArmoredSnatcher: equ $8000+(090*128)+(176/2)-128 4824HeroPortrait16x30SYSXDruid: equ $8000+(090*128)+(192/2)-128 4826HeroPortrait16x30SYSXMomotaru: equ $8000+(090*128)+(208/2)-128 4827HeroPortrait16x30SYSXLuka: equ $8000+(090*128)+(224/2)-128 4828HeroPortrait16x30SYSXHeiwaAndButako: equ $8000+(090*128)+(240/2)-128 4829HeroPortrait16x30SYSXAce: equ $8000+(120*128)+(000/2)-128 4830HeroPortrait16x30SYSXSpaceExplorer01: equ $8000+(120*128)+(016/2)-128 4831HeroPortrait16x30SYSXFern: equ $8000+(120*128)+(032/2)-128 4832HeroPortrait16x30SYSXHorn: equ $8000+(120*128)+(048/2)-128 4833HeroPortrait16x30SYSXPixie: equ $8000+(120*128)+(064/2)-128 4834HeroPortrait16x30SYSXFreyaJerbain: equ $8000+(120*128)+(080/2)-128 4835HeroPortrait16x30SYSXLanceBean: equ $8000+(120*128)+(096/2)-128 4836HeroPortrait16x30SYSXThiharis: equ $8000+(120*128)+(112/2)-128 4837HeroPortrait16x30SYSXPampas: equ $8000+(120*128)+(128/2)-128 4838HeroPortrait16x30SYSXSelene: equ $8000+(120*128)+(144/2)-128 4839HeroPortrait16x30SYSXSkooter: equ $8000+(120*128)+(160/2)-128 4840HeroPortrait16x30SYSXJeddaChef: equ $8000+(120*128)+(176/2)-128 4842Difficulty: ds 1 4843ScenarioPage: ds 14844ScenarioSelected: ds 14845LitScenarioButtonInWhichPage?: ds 14846AmountOfMapsVisibleInCurrentPage: ds 14847PlayerWhoLostAHeroInBattle?: ds 14848PlayerLostHeroInBattle?: db 04849AmountOfMapsUnlocked: 4850if promo?4851db 34852else4853db 304854endif4855QuickTipsNumber: db StartOfGameQuickTips-24857ds 400 4862endenginepage3:4863dephase4864enginepage3length: Equ $-enginepage34866variables: org $c000+enginepage3length4867slot: 48684878.ram: rb 14879.page1rom: rb 14880.page2rom: rb 14881.page12rom: rb 14883memblocks:4884.1: rb 14885.2: rb 14887Replayer_Currentbank: equ $-1488948924895VDP_0: rb 84896VDP_8: rb 304898DayOfMonthEenheden: rb 14899DayOfMonthTientallen: rb 14900MonthEenheden: rb 14901MonthTientallen: rb 14902YearEenheden: rb 1 4903YearTientallen: rb 1 4904ComputerID: rb 1 4906TurboOn?: rb 1 4908engaddr: equ $03e4909loader.address: equ $80004910enginepage3addr: equ $c0004912sx: equ 04913sy: equ 24914spage: equ 34915dx: equ 44916dy: equ 64917dpage: equ 7 4918nx: equ 84919ny: equ 104920clr: equ 124921copydirection: equ 134922copytype: equ 144924framecounter: rb 14926Controls: rb 14927NewPrContr: rb 14928oldControls: rb 14930ControlsOnInterrupt: rb 14931NewPrControlsOnInterrupt: rb 14933BattleGraphicsBlock: rb 14935endenginepage3variables: equ $+enginepage3length4936org variables4938MSXHeroes.asm 420423engine:424phase engaddr425 engine.asm1LevelEngine:312 call HandleAIWorldMap13 call DisplayDiskMenu 14 call DisplayHeroLevelUp 15 call DisplayScrollFound 16 call DisplayChestFound 17 call DisplayLearningStone 18 call DisplaySpireOfWisdom 19 call DisplayGuardTowerReward 20 call DisplayStartOfTurnMessage 21 call DisplayEnemyStatsRightClick 22 call DisplayEnemyHeroStatsRightClick 23 call CheckEnterTradeMenuBetween2FriendlyHeroes24 call GoCheckEnterHeroOverviewMenu 26 call PopulateControls 27 call PopulateKeyMatrix 28 call scrollscreen 29 call MiniMapSquareIconInteraction30 call movehero 31 call SetHeroPoseInVram 32 call buildupscreen 33 call MoveMiniMapSquareIcon35 call CheckEnterCastle 37 ld ix,(plxcurrentheroAddress)38 ld a,(ix+HeroStatus)39 cp 25540 jr z,.EndHeroChecks 41 call SetHeroMaxMovementPoints 42 call CheckHeroLevelUp 43 call CheckHeroCollidesWithEnemyHero 44 call CheckHeroPicksUpItem45 call AnimateHeroes 46 call CheckEnterCombat47 .EndHeroChecks:48 call CheckHeroCollidesWithMonster 5052 call putbottomobjects53 call putbottomcastles54 call putbottomheroes 55 call puttopobjects56 call puttopheroes 57 call puttopcastles58 call putmovementstars60 call HandleHud 61 call CheckPlayerEliminated 6369 ld a,(framecounter)70 inc a71 ld (framecounter),a73 ld a,(PreviousVblankIntFlag)74 ld b,a76 ld hl,vblankintflag 77 ld a,(hl)78 ld (PreviousVblankIntFlag),a80 ld a,b 81 ld hl,vblankintflag 82 .checkflag:83 cp (hl)84 jr nc,.checkflag85 ld (hl),08788 ld a,(framecounter)89 cp 290 call z,SetScreenOn9296104 105108111 jp LevelEngine119137138 di139 ld (memblocks.1),a140 ld ($6000),a141 ei142 ret144145 di146 ld (memblocks.2),a147 ld ($7000),a148 ei149 ret151152 di153 ld (memblocks.1),a154 ld ($6000),a155 inc a156 ld (memblocks.2),a157 ld ($7000),a158 ei159 ret163165Write2FlashObjectLayer:166 ld a,(slot.page1rom) 167 out ($a8),a169 ld a,0 170 ld (6100H),a 175 176 ld hl,$4000177 call SectorErase 179 180 ld a,2 181 ld (page1bank),a182 out ($fe),a 184 call WriteObjectLayerFirst8KB186 ld a,(slot.page2rom) 187 out ($a8),a189192 ld a,0 193 ld ($7100+$4000),a 195 196 ld a,2 197 ld (page2bank),a198 out ($fd),a 203208 call WriteObjectLayerSecond8KB209 .kut3: jp .kut3 210 ret212CheckEraseDone:213 ld hl,4000H 214 ld a,0FFH 215 Erase_Wait:216 cp (hl) 217 ret z 218 jr Erase_Wait 220SectorErase: 221 ld a,$aa222 ld ($4aaa),a224 ld a,$55225 ld ($4555),a227 ld a,$80228 ld ($4aaa),a230 ld a,$aa231 ld ($4aaa),a233 ld a,$55234 ld ($4555),a236 ld a,$30237 ld (hl),a238 ret240WriteObjectLayerFirst8KB: 241 ld hl,$8000 242 ld de,$4000 243 ld bc,$2000 245 .loop:246 ld a,$AA 247 ld ($4AAA),a248 ld a,$55249 ld ($4555),a250 ld a,$A0 251 ld ($4AAA),a253 ldi 254 jp pe,.loop255 ret257WriteObjectLayerSecond8KB: 258 ld hl,$6000 259 ld de,$a000 260 ld bc,$2000 262 .loop:263 ld a,$AA 264 ld ($8AAA),a265 ld a,$55266 ld ($8555),a267 ld a,$A0 268 ld ($8AAA),a270 ldi 271 jp pe,.loop272 ret288vblankintflag2: ds 1289PreviousVblankIntFlag: db 1290page1bank: ds 1291page2bank: ds 1292vblank:293 push bc294 push de295 push hl296 push ix297 push iy298 exx299 ex af,af'300 push af301 push bc302 push de303 push hl307315 316 ld a,(LockMiniMapOn?)317 or a318 jr z,.EndCheckSlowdown319324 ld a,(ControlsOnInterrupt)325 and %0000 1111326 jr z,.EndCheckSlowdown328 ld a,(vblankintflag2)329 inc a 330 ld (vblankintflag2),a 331 and 15332 jr nz,.skip333 .EndCheckSlowdown:334 336 call PopulateControlsOnInterrupt 337 call PopulateKeyMatrix 338 call MovePointer 339 call MiniMapSquareIconInteractionOnInterrupt340 .skip:342345 ld a,(memblocks.1) 346 push af347 ld a,(memblocks.2) 348 push af349 in a,($a8) 350 push af 352 if Music50PercentSpeed?353 ld a,(vblankintflag)354 bit 0,a355 call z,RePlayer_Tick 356 else357 call RePlayer_Tick 358 endif360 ld a,(slot.page1rom) 361 out ($a8),a363 ld a,1 364 out ($fe),a 366371 call checktriggermapscreen 373378 call checktriggerhud 380 ld a,2 381 out ($fe),a 383 ld a,(AreWeWritingToVram?)384 or a385 call z,setspritecharacter 387 ld a,(page1bank) 388 out ($fe),a 390 pop af391 out ($a8),a 392 pop af393 ld ($7000),a 394 pop af395 ld ($6000),a 396 397 ld a,(AreWeWritingToVram?)398 or a399 call z,putsprite 401 ld a,(vblankintflag)402 inc a 403 ld (vblankintflag),a 405 pop hl 406 pop de 407 pop bc 408 pop af 409 ex af,af' 410 exx411 pop iy 412 pop ix 413 pop hl 414 pop de 415 pop bc 416 pop af 417 ei418 ret420CurrentLineIntHeight: ds 1421CastleInterruptHandler:422 push af423 424 ld a,1 425 out ($99),a426 ld a,15+128427 out ($99),a428 in a,($99) 429 rrca430 jp c,LineintCastleScreen 431 432 xor a 433 out ($99),a434 ld a,15+128435 out ($99),a436 in a,($99) 437 rlca438 jp c,VblankCastleScreen439 440 pop af 441 ei442 ret444VblankCastleScreen:445 push hl446 push bc448 ld a,(CurrentLineIntHeight)449 cp FirstLineintHeightCastleMagicGuild450 jr z,.SkipSettingPaletteOnVblank452 ld hl,InGamePalette453 call SetPaletteOnInterrupt454 .SkipSettingPaletteOnVblank:456 pop bc457 pop hl458 jp vblank460LineintFlag: ds 1461LineintCastleScreen:462 push hl463 push bc465 ld a,(LineintFlag)466 inc a467 ld (LineintFlag),a469 ld a,(AreWeInTavern1OrRecruit2?)470 dec a471 ld a,(CurrentLineIntHeight)472 jr nz,.EndCheckTavern473 cp FirstLineintHeightCastleTavern474 jp z,.FirstLineIntCastleTavernScreen475 cp SecondLineintHeightCastleTavern476 jp z,.SecondLineIntCastleTavernScreen477 .EndCheckTavern:479 cp FirstLineintHeightCastleRecruit480 jr z,.FirstLineIntCastleRecruitScreen481 cp SecondLineintHeightCastleRecruit482 jr z,.SecondLineIntCastleRecruitScreen484 cp FirstLineintHeightCastleMagicGuild485 jr z,.FirstLineIntCastleMagicGuildScreen486 cp SecondLineintHeightCastleMagicGuild487 jr z,.SecondLineIntCastleMagicGuildScreen489 cp FirstLineintHeightCastleMarket490 jp z,.LineIntCastlemarketScreen491 cp SecondLineintHeightCastleMarket492 jp z,.LineIntCastlemarketScreen493 cp ThirdLineintHeightCastleMarket494 jp z,.LineIntCastlemarketScreen496 ld hl,CastleOverviewPalette497 call SetPaletteOnInterrupt499 pop bc500 pop hl502 pop af 503 ei504 ret 506 .SecondLineIntCastleRecruitScreen:507 ld a,2 508 out ($99),a509 ld a,15+128 510 out ($99),a511 512.Waitline: 513 in a,($99) 514 and %0010 0000 515 jr z,.Waitline516 517 ld hl,InGamePalette518 call SetPaletteOnInterrupt520 ld a,FirstLineintHeightCastleRecruit521 ld (CurrentLineIntHeight),a522 out ($99),a523 ld a,19+128 524 out ($99),a 526 pop bc527 pop hl529 pop af 530 ei531 ret 533 .FirstLineIntCastleRecruitScreen:534 ld hl,CastleOverviewPalette535 call SetPaletteOnInterrupt537 ld a,SecondLineintHeightCastleRecruit538 ld (CurrentLineIntHeight),a539 out ($99),a540 ld a,19+128 541 out ($99),a 543 pop bc544 pop hl546 pop af 547 ei548 ret 550 .FirstLineIntCastleMagicGuildScreen:551 ld hl,InGamePalette552 call SetPaletteOnInterrupt554 ld a,SecondLineintHeightCastleMagicGuild555 ld (CurrentLineIntHeight),a556 out ($99),a557 ld a,19+128 558 out ($99),a 560 pop bc561 pop hl563 pop af 564 ei565 ret 567 .SecondLineIntCastleMagicGuildScreen:568 ld hl,CastleOverviewPalette569 call SetPaletteOnInterrupt571 ld a,FirstLineintHeightCastleMagicGuild572 ld (CurrentLineIntHeight),a573 out ($99),a574 ld a,19+128 575 out ($99),a 577 pop bc578 pop hl580 pop af 581 ei582 ret 584 .LineIntCastlemarketScreen:585 ld hl,CastleOverviewPalette586 call SetPaletteOnInterrupt588 pop bc589 pop hl591 pop af 592 ei593 ret 595 .FirstLineIntCastleTavernScreen:596 ld hl,CastleOverviewPalette597 call SetPaletteOnInterrupt599 ld a,SecondLineintHeightCastleTavern600 ld (CurrentLineIntHeight),a601 out ($99),a602 ld a,19+128 603 out ($99),a 605 pop bc606 pop hl608 pop af 609 ei610 ret 612 .SecondLineIntCastleTavernScreen:613 ld hl,InGamePalette614 call SetPaletteOnInterrupt616 ld a,FirstLineintHeightCastleTavern617 ld (CurrentLineIntHeight),a618 out ($99),a619 ld a,19+128 620 out ($99),a 622 pop bc623 pop hl625 pop af 626 ei627 ret 629SetPaletteOnInterrupt:630 xor a631 out ($99),a632 ld a,16+128633 out ($99),a634 ld c,$9a635 outi | outi | outi | outi | outi | outi | outi | outi636 outi | outi | outi | outi | outi | outi | outi | outi637 outi | outi | outi | outi | outi | outi | outi | outi638 outi | outi | outi | outi | outi | outi | outi | outi639 ret641vblankintflag: db 0642643InterruptHandler:644 push af646 xor a 647 out ($99),a648 ld a,15+128649 out ($99),a650 in a,($99) 651 rlca652 jp c,vblank 653 654 pop af 655 ei656 ret658DisplayDiskMenu:659 ld a,(DiskMenuClicked?)660 dec a661 ret m662 ld (DiskMenuClicked?),a663 jp nz,DisableScrollScreen665 ld a,1666 ld (GameStatus),a 667 call ClearMapPage0AndMapPage1 669 ld hl,DisplayDiskMenuCOde670 call EnterSpecificRoutineInExtraRoutines672 ld a,3 673 ld (SetHeroArmyAndStatusInHud?),a674 ret676HandleAIWorldMap:677 call checkcurrentplayerhuman 678 ret nz679 680 ld hl,EndTurn681 jp EnterSpecificRoutineInCastleOverviewCode 682 ret684CheckPlayerEliminated:685 ld hl,CheckIfAPlayerGotEliminated686 jp EnterSpecificRoutineInExtraRoutines687 688EnterCombat?: db 0689CheckEnterCombat:690 ld a,(EnterCombat?)691 dec a692 ret m693 ld (EnterCombat?),a694 pop af 695 jp EnterCombat696 697AnimateHeroes:698 ld a,(movehero?)699 or a 700 ret nz702 ld a,(framecounter)703 and 3704 ret nz705 ld ix,(plxcurrentheroAddress) 706 ld e,(ix+HeroSpecificInfo+0) 707 ld d,(ix+HeroSpecificInfo+1)708 push de709 pop ix 710 ld a,(ix+HeroinfoSYSX+0) 711 xor 8712 ld (ix+HeroinfoSYSX+0),a 713 ret715DivideBCbyDE:716721Div16:722 ld hl,0723 ld a,b724 ld b,8725Div16_Loop1:726 rla727 adc hl,hl728 sbc hl,de729 jr nc,Div16_NoAdd1730 add hl,de731Div16_NoAdd1:732 djnz Div16_Loop1733 rla734 cpl735 ld b,a736 ld a,c737 ld c,b738 ld b,8739Div16_Loop2:740 rla741 adc hl,hl742 sbc hl,de743 jr nc,Div16_NoAdd2744 add hl,de745Div16_NoAdd2:746 djnz Div16_Loop2747 rla748 cpl749 ld b,c750 ld c,a751 ret753MultiplyHlWithDE:754 push hl755 pop bc756761Mult16:762 ld a,b763 ld b,16764Mult16_Loop:765 add hl,hl766 sla c767 rla768 jr nc,Mult16_NoAdd769 add hl,de770Mult16_NoAdd:771 djnz Mult16_Loop772 ret774EnemyHeroThatPointerIsOn: ds 2775DisplayEnemyHeroStatsRightClick?: db 0776DisplayEnemyHeroStatsRightClick:777 ld a,(DisplayEnemyHeroStatsRightClick?)778 dec a779 ret m780 ld (DisplayEnemyHeroStatsRightClick?),a781 jp nz,DisableScrollScreen 783 call ClearMapPage0AndMapPage1 785 ld a,1786 ld (GameStatus),a 788 ld hl,DisplayEnemyHeroStatsWindowCode789 jp EnterSpecificRoutineHeroOverviewCode791DisplayEnemyStatsRightClick?: db 0792DisplayEnemyStatsRightClick:793 ld a,(DisplayEnemyStatsRightClick?)794 dec a795 ret m796 ld (DisplayEnemyStatsRightClick?),a797 jp nz,DisableScrollScreen 799 call ClearMapPage0AndMapPage1 800 ld hl,ShowEnemyStats801 ld a,(MonsterHerocollidedWithOnMap)802 cp 128803 jp nc,EnterSpecificRoutineInBattleCode805 ld hl,ShowItemStats806 jp EnterSpecificRoutineInExtraRoutines808809MiniMapSquareIconInteraction:810 ld a,(SetMiniMap?)811 dec a812 ret m813 ld (SetMiniMap?),a815 ld a,(spat+1) 816 sub 200817 ret c 818 ld b,a819 add a,a 820 add a,b 821 cp 117822 jr c,.EndCheckOverFlowX823 ld a,116824 .EndCheckOverFlowX:825 ld (mappointerx),a827 ld a,(spat+0) 828 sub 9829 jr nc,.notcarry830 xor a831 .notcarry:832 ld b,a833 add a,a 834 add a,b 835 cp 117836 jr c,.EndCheckOverFlowY837 ld a,116838 .EndCheckOverFlowY:839 ld (mappointery),a840 ret842SetMiniMap?: db 0843LockMiniMapOn?: db 0 844MiniMapSquareIconInteractionOnInterrupt:845 ld a,(GameStatus) 846 or a847 ret nz848853 ld a,(ControlsOnInterrupt)854 bit 4,a 855 jr z,.LockOff856 857 ld a,(spat+0) 858 cp 48859 jr c,.endCheckWithinYRange860 ld a,(LockMiniMapOn?)861 or a862 ret z864 ld a,48865 ld (spat+0),a 866 ld (spat+4),a 867 ld (spat+8),a 868 .endCheckWithinYRange:870 ld a,(spat+1) 871 cp 200872 jr nc,.endCheckWithinXRange873 ld a,(LockMiniMapOn?)874 or a875 ret z877 ld a,200878 ld (spat+1),a 879 ld (spat+5),a 880 ld (spat+9),a 881 .endCheckWithinXRange:883 ld a,1884 ld (LockMiniMapOn?),a885 ld (SetMiniMap?),a886 ret888 .LockOff:889 xor a890 ld (LockMiniMapOn?),a891 ret893897MoveMiniMapSquareIcon:898 ld a,(mappointery)899 ld e,a900 ld c,3901 call Div8902 add a,004903 ld (spat+60),a 905 ld a,(mappointerx)906 ld e,a907 ld c,3908 call Div8909 add a,196910 ld (spat+61),a 911 ret913918Div8:919 xor a920 ld b,8921Div8_Loop:922 rl e923 rla924 sub c925 jr nc,Div8_NoAdd926 add a,c927Div8_NoAdd:928 djnz Div8_Loop929 ld b,a930 ld a,e931 rla932 cpl933 ret935Backdrop:936 ld a,r937 .in:938 di939 out ($99),a940 ld a,7+128941 ei942 out ($99),a 943 ret947WhichHudButtonClicked?: db 0948checktriggerhud:949 ld a,(GameStatus) 950 or a951 ret nz953961 ld ix,GenericButtonTable3962 call .CheckButtonMouseInteractionGenericButtons963 call CheckIfHeroButtonShouldRemainLit964 ret966969975976.CheckButtonMouseInteractionGenericButtons:977 ld b,(ix+GenericButtonAmountOfButtons)978 ld de,GenericButtonTableLenghtPerButton980 .loop:981 call .check982 add ix,de983 djnz .loop984 ret985 986 .check:988990 991 ld a,(spat+0) 992 cp (ix+GenericButtonYtop)993 jr c,.NotOverButton994 cp (ix+GenericButtonYbottom)995 jr nc,.NotOverButton996 ld a,(spat+1) 998 add a,06999 1000 cp (ix+GenericButtonXleft)1001 jr c,.NotOverButton1002 cp (ix+GenericButtonXright)1003 jr nc,.NotOverButton1004 10061012 ld a,(ControlsOnInterrupt)1013 bit 4,a 1014 jr nz,.MouseOverButtonAndSpacePressed1015 bit 4,(ix+GenericButtonStatus) 1016 jr nz,.MenuOptionSelected 1017 .MouseHoverOverButton:1018 ld (ix+GenericButtonStatus),%1010 00111019 ret1021 .MouseOverButtonAndSpacePressed:1022 bit 4,(ix+GenericButtonStatus) 1023 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit1024 ld a,(NewPrControlsOnInterrupt)1025 bit 4,a 1026 jr z,.MouseHoverOverButton1028 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:1029 ld (ix+GenericButtonStatus),%1001 00111030 ret1031 1032 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:1033 ld (ix+GenericButtonStatus),%1001 00111034 ret1036 .NotOverButton:1037 bit 4,(ix+GenericButtonStatus) 1038 jr nz,.buttonIsStillLit1039 bit 5,(ix+GenericButtonStatus) 1040 ret z1041 .buttonIsStillLit:1042 ld (ix+GenericButtonStatus),%1100 00111043 ret1045 .MenuOptionSelected:1046 pop af 1047 ld (ix+GenericButtonStatus),%1010 001110481049 1050 ld a,b1051 ld (WhichHudButtonClicked?),a 1052 ret1063SetTotalManaHero:10641069 ld de,ItemIntelligencePointsTable1070 ld hl,SetAdditionalStatFromInventoryItemsInHL 1071 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1072 .SetAdditionalStatFromInventoryItemsInHLDone:1073 ld e,(ix+HeroStatKnowledge)1074 ld d,01075 add hl,de 1077 add hl,hl 1078 push hl1079 pop de1080 add hl,hl 1081 add hl,hl 1082 add hl,de 1083 ld (ix+HeroTotalMana+0),l1084 ld (ix+HeroTotalMana+1),h1085 1086 ld a,022 1087 cp (ix+HeroSkills+0)1088 jr z,.HeroHasBasicIntelligence1089 cp (ix+HeroSkills+1)1090 jr z,.HeroHasBasicIntelligence1091 cp (ix+HeroSkills+2)1092 jr z,.HeroHasBasicIntelligence1093 cp (ix+HeroSkills+3)1094 jr z,.HeroHasBasicIntelligence1095 cp (ix+HeroSkills+4)1096 jr z,.HeroHasBasicIntelligence1097 cp (ix+HeroSkills+5)1098 jr z,.HeroHasBasicIntelligence1100 ld a,023 1101 cp (ix+HeroSkills+0)1102 jr z,.HeroHasAdvancedIntelligence1103 cp (ix+HeroSkills+1)1104 jr z,.HeroHasAdvancedIntelligence1105 cp (ix+HeroSkills+2)1106 jr z,.HeroHasAdvancedIntelligence1107 cp (ix+HeroSkills+3)1108 jr z,.HeroHasAdvancedIntelligence1109 cp (ix+HeroSkills+4)1110 jr z,.HeroHasAdvancedIntelligence1111 cp (ix+HeroSkills+5)1112 jr z,.HeroHasAdvancedIntelligence1114 ld a,024 1115 cp (ix+HeroSkills+0)1116 jr z,.HeroHasExpertIntelligence1117 cp (ix+HeroSkills+1)1118 jr z,.HeroHasExpertIntelligence1119 cp (ix+HeroSkills+2)1120 jr z,.HeroHasExpertIntelligence1121 cp (ix+HeroSkills+3)1122 jr z,.HeroHasExpertIntelligence1123 cp (ix+HeroSkills+4)1124 jr z,.HeroHasExpertIntelligence1125 cp (ix+HeroSkills+5)1126 jr z,.HeroHasExpertIntelligence1127 ret1129 1130 .HeroHasBasicIntelligence:1131 ld c,(ix+HeroTotalMana+0)1132 ld b,(ix+HeroTotalMana+1)1133 ld de,41134 call DivideBCbyDE 1135 ld l,(ix+HeroTotalMana+0)1136 ld h,(ix+HeroTotalMana+1)1137 add hl,bc1138 ld (ix+HeroTotalMana+0),l1139 ld (ix+HeroTotalMana+1),h1140 ret1142 1143 .HeroHasAdvancedIntelligence:1144 ld c,(ix+HeroTotalMana+0)1145 ld b,(ix+HeroTotalMana+1)1146 ld de,21147 call DivideBCbyDE 1148 ld l,(ix+HeroTotalMana+0)1149 ld h,(ix+HeroTotalMana+1)1150 add hl,bc1151 ld (ix+HeroTotalMana+0),l1152 ld (ix+HeroTotalMana+1),h1153 ret1155 1156 .HeroHasExpertIntelligence:1157 ld l,(ix+HeroTotalMana+0)1158 ld h,(ix+HeroTotalMana+1)1159 add hl,hl 1160 ld (ix+HeroTotalMana+0),l1161 ld (ix+HeroTotalMana+1),h1162 ret1164SetHeroMaxMovementPoints:1165 ld ix,(plxcurrentheroAddress)1166 .IxAlreadySet:1167 ld b,0 1168 call .CheckMovementSpeedBonusForLogistics1169 ld c,0 1170 call .CheckMovementSpeedBonusForPlanesWalkers1171 ld d,0 1172 call .CheckMovementSpeedBonusForGripfast1174 ld a,201175 add a,b1176 add a,c1177 add a,d1178 ld (ix+HeroTotalMove),a1179 ret1181 .CheckMovementSpeedBonusForPlanesWalkers:1182 ld a,(ix+HeroInventory+4) 1183 cp 022 1184 ret nz1185 ld c,3 1186 ret1188 .CheckMovementSpeedBonusForGripfast:1189 ld a,(ix+HeroInventory+5) 1190 cp 025 1191 ret nz1192 ld d,2 1193 ret1195 .CheckMovementSpeedBonusForLogistics:1196 ld a,(ix+HeroSkills+0)1197 call .CheckSkil1198 ld a,(ix+HeroSkills+1)1199 call .CheckSkil1200 ld a,(ix+HeroSkills+2)1201 call .CheckSkil1202 ld a,(ix+HeroSkills+3)1203 call .CheckSkil1204 ld a,(ix+HeroSkills+4)1205 call .CheckSkil1206 ld a,(ix+HeroSkills+5)1207 call .CheckSkil1208 ret1210 .CheckSkil:1211 cp 19 1212 jr z,.BasicLogisticsFound1213 cp 20 1214 jr z,.AdvancedLogisticsFound1215 cp 21 1216 jr z,.ExpertLogisticsFound1217 ret1219 .BasicLogisticsFound:1220 ld b,2 1221 ret1222 .AdvancedLogisticsFound:1223 ld b,4 1224 ret1225 .ExpertLogisticsFound:1226 ld b,6 1227 ret1229SetText: 1230 ld a,2121231 ld (PutLetter+sy),a 1232 ld a,(GameStatus) 1233 cp 31234 jr nz,.GoSetText1235 ld a,2501236 ld (PutLetter+sy),a 1237 .GoSetText:1238 1240 ld a,61241 ld (PutLetter+ny),a 1243 ld a,b1244 ld (PutLetter+dx),a 1245 ld (TextDX),a1246 ld a,c1247 ld (PutLetter+dy),a 1248 ld (TextAddresspointer),hl 12491255 ld a,(activepage) 1256.SelfModifyingCodeSetTextInCurrentPage: equ $+11257 xor 1 1258 ld (PutLetter+dPage),a 1260 ld de,-11261 ld (TextPointer),de 1262 .NextLetter:1263 ld de,(TextPointer)1264 inc de1265 ld (TextPointer),de 1267 ld hl,(TextAddresspointer)12691271 add hl,de1273 ld a,(hl) 1274 cp 255 1275 ret z1276 cp 254 1277 jp z,.NextLine1278 cp TextSpace 1279 jp z,.Space1280 cp TextPercentageSymbol 1281 jp z,.TextPercentageSymbol1282 cp TextPlusSymbol 1283 jp z,.TextPlusSymbol1284 cp TextMinusSymbol 1285 jp z,.TextMinusSymbol1286 cp TextApostrofeSymbol 1287 jp z,.TextApostrofeSymbol1288 cp TextColonSymbol 1289 jp z,.TextColonSymbol1290 cp TextSlashSymbol 1291 jp z,.TextSlashSymbol1292 cp TextQuestionMarkSymbol 1293 jp z,.TextQuestionMarkSymbol1294 cp TextCommaSymbol 1295 jp z,.TextCommaSymbol1296 cp TextDotSymbol 1297 jp z,.TextDotSymbol1298 cp TextOpeningParenthesisSymbol 1299 jp z,.TextOpeningParenthesisSymbol1300 cp TextClosingParenthesisSymbol 1301 jp z,.TextClosingParenthesisSymbol1303 cp TextNumber0+101304 jr c,.Number1306 sub $411307 ld hl,.TextCoordinateTable 1308 add a,a 1309 ld d,01310 ld e,a1312 add hl,de1313 1314 .GoPutLetter:1315 ld a,(hl) 1316 ld (PutLetter+sx),a 1317 inc hl1318 ld a,(hl) 1319 ld (PutLetter+nx),a 1321 ld hl,PutLetter1322 call DoCopy1324 ld hl,PutLetter+nx 1325 ld a,(PutLetter+dx) 1326 add a,(hl) 1327 inc a 1328 ld (PutLetter+dx),a 1329 1330 jp .NextLetter1332 .Number:1333 sub TextNumber0 1334 add a,a 1335 ld d,01336 ld e,a 1338 ld hl,.TextNumberSymbolsSXNX1339 add hl,de1340 jr .GoPutLetter1341 1342 .TextPercentageSymbol:1343 ld hl,.TextPercentageSymbolSXNX 1344 jr .GoPutLetter1346 .TextPlusSymbol:1347 ld hl,.TextPlusSymbolSXNX 1348 jr .GoPutLetter1350 .TextMinusSymbol:1351 ld hl,.TextMinusSymbolSXNX 1352 jr .GoPutLetter1354 .TextApostrofeSymbol:1355 ld hl,.TextApostrofeSymbolSXNX 1356 jr .GoPutLetter1358 .TextColonSymbol:1359 ld hl,.TextColonSymbolSXNX 1360 jr .GoPutLetter1362 .TextSlashSymbol:1363 ld hl,.TextSlashSymbolSXNX 1364 jr .GoPutLetter1366 .TextQuestionMarkSymbol:1367 ld hl,.TextQuestionMarkSymbolSXNX 1368 jr .GoPutLetter1370 .TextCommaSymbol:1371 ld hl,.TextCommaSymbolSXNX 1372 jr .GoPutLetter1374 .TextDotSymbol:1375 ld hl,.TextDotSymbolSXNX 1376 jr .GoPutLetter1378 .TextOpeningParenthesisSymbol:1379 ld hl,.TextOpeningParenthesisSymbolSXNX 1380 jr .GoPutLetter1382 .TextClosingParenthesisSymbol:1383 ld hl,.TextClosingParenthesisSymbolSXNX 1384 jr .GoPutLetter1386 .Space:1387 ld a,(PutLetter+dx) 1388 add a,51389 ld (PutLetter+dx),a 1390 jp .NextLetter1392 .NextLine:1393 ld a,(PutLetter+dy) 1394 add a,71395 ld (PutLetter+dy),a 1396 ld a,(TextDX)1397 ld (PutLetter+dx),a 1398 jp .NextLetter14001401.TextNumberSymbolsSXNX: db 171,4, 175,2, 177,4, 181,3, 184,3, 187,3, 191,3, 195,4, 199,3, 203,3, 158,4 1402.TextSlashSymbolSXNX: db 158+49,4 1403.TextPercentageSymbolSXNX: db 162+49,4 1404.TextPlusSymbolSXNX: db 166+49,5 1405.TextMinusSymbolSXNX: db 169+49,5 1406.TextApostrofeSymbolSXNX: db 053,1 1407.TextColonSymbolSXNX: db 008,1 1408.TextQuestionMarkSymbolSXNX: db 223,3 1409.TextCommaSymbolSXNX: db 226,2 1410.TextDotSymbolSXNX: db 207,1 1411.TextOpeningParenthesisSymbolSXNX: db 133,2 1412.TextClosingParenthesisSymbolSXNX: db 134,2 14141415.TextCoordinateTable: db 084,3, 087,3, 090,3, 093,3, 096,3, 099,3, 102,4, 107,3, 110,3, 113,3, 116,4, 120,3, 123,5, 129,4, 133,3, 136,3, 139,3, 142,3, 145,3, 148,3, 151,3, 154,3, 157,5, 162,3, 165,3, 168,314161417ds 121418.TextCoordinateTableSmall: db 000,4, 004,3, 007,3, 010,3, 013,3, 016,2, 019,3, 022,3, 025,1, 026,2, 028,3, 032,1, 033,5, 038,3, 042,3, 046,3, 050,3, 054,2, 057,3, 060,2, 062,3, 065,3, 068,5, 073,3, 076,3, 080,41420SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0:14211422 ld de,10001423 call CompareHLwithDE1424 jr c,.NumberIsSmallerThan10001425 1427 add hl,de1428 ld de,100001429 call CompareHLwithDE1430 jr c,.NumberIsSmallerThan100001431 1433 add hl,de1434 push bc1435 push iy1436 call SetNumber16BitCastle.ConvertToDecimal16bit1437 ld iy,TextNumber1438 ld (iy+2),"k"1439 ld (iy+3),2551440 pop iy1441 pop bc1442 ld hl,TextNumber1443 jp SetText1445 .NumberIsSmallerThan10000:1446 add hl,de1447 push bc1448 push iy1449 call SetNumber16BitCastle.ConvertToDecimal16bit1451 ld iy,TextNumber1452 ld a,(iy+1)1453 ld (iy+2),a1454 ld (iy+1),"."1455 ld (iy+3),"k"1456 ld (iy+4),2551458 pop iy1459 pop bc1461 ld hl,TextNumber1462 jp SetText1464 .NumberIsSmallerThan1000:1465 add hl,de1466 1467SetNumber16BitCastleSkipIfAmountIs0:1468 ld a,h1469 cp l1470 ret z1472SetNumber16BitCastle: 1473 push bc1474 push iy1475 call .ConvertToDecimal16bit1476 pop iy1477 pop bc1479 ld hl,TextNumber1480 jp SetText1482 .ConvertToDecimal16bit:1483 ld iy,TextNumber1484 ld e,0 1486 .Check10000Folds:1487 ld d,$30 1489 .Loop10000Fold:1490 or a1491 ld bc,100001492 sbc hl,bc 1493 jr c,.Set10000Fold1494 inc d1495 jr .Loop10000Fold1497 .Set10000Fold:1498 ld a,d1499 cp $301500 jr z,.EndSet10000Fold 1501 ld e,1 1502 ld (iy),d 1503 inc iy1504 .EndSet10000Fold:1506 add hl,bc1508 .Check1000Folds:1509 ld d,$30 1511 .Loop1000Fold:1512 or a1513 ld bc,10001514 sbc hl,bc 1515 jr c,.Set1000Fold1516 inc d1517 jr .Loop1000Fold1519 .Set1000Fold:1520 bit 0,e1521 jr nz,.DoSet1000Fold 1522 ld a,d1523 cp $301524 jr z,.EndSet1000Fold 1525 ld e,1 1526 .DoSet1000Fold:1527 ld (iy),d 1528 inc iy1529 .EndSet1000Fold:1531 add hl,bc1533 .Check100Folds:1534 ld d,$30 1536 .Loop100Fold:1537 or a1538 ld bc,1001539 sbc hl,bc 1540 jr c,.Set100Fold1541 inc d1542 jr .Loop100Fold1544 .Set100Fold:1545 bit 0,e1546 jr nz,.DoSet100Fold 1547 ld a,d1548 cp $301549 jr nz,.DoSet100Fold 1551 ld a,(PutLetter+dx) 1552 add a,41553 ld (PutLetter+dx),a 1556 jr .EndSet100Fold 1558 .DoSet100Fold:1559 ld e,1 1560 ld (iy),d 1561 inc iy1562 .EndSet100Fold:1564 add hl,bc1566 .Check10Folds:1567 ld d,$30 1569 .Loop10Fold:1570 or a1571 ld bc,101572 sbc hl,bc 1573 jr c,.Set10Fold1574 inc d1575 jr .Loop10Fold1577 .Set10Fold:1578 bit 0,e1579 jr nz,.DoSet10Fold1580 ld a,d1581 cp $301582 jr nz,.DoSet10Fold 1584 ld a,(PutLetter+dx) 1585 add a,31586 ld (PutLetter+dx),a 1588 jr .EndSet10Fold 1590 .DoSet10Fold:1591 ld e,1 1592 ld (iy),d 1593 inc iy1594 .EndSet10Fold:1596 .Check1Fold:1597 ld bc,10 + $301598 add hl,bc1599 16001601 ld (iy),l 1602 ld (iy+1),255 1603 ret1613HeroXPTable:1614 dw 01000 1615 dw 02000 1616 dw 03200 1617 dw 04600 1618 dw 06200 1619 dw 08000 1620 dw 10000 1621 dw 12200 1622 dw 14700 1623 dw 17500 1624 dw 20600 1625 dw 24320 1626 dw 28784 1627 dw 34140 1628 dw 40567 1629 dw 48279 1630 dw 57533 1631 dw 65535 1633CheckHeroLevelUp:1634 ld a,(HeroLevelUp?) 1635 or a1636 ret nz1637 1638 ld ix,(plxcurrentheroAddress)1639 ld a,(ix+HeroLevel) 1640 cp 181641 ret z1643 add a,a1644 ld d,01645 ld e,a1646 ld hl,HeroXPTable-21647 add hl,de1648 ld e,(hl)1649 inc hl1650 ld d,(hl) 1651 1652 ld l,(ix+HeroXp+0) 1653 ld h,(ix+HeroXp+1)1654 or a1655 sbc hl,de1656 ret c1658 inc (ix+HeroLevel) 1659 ld a,31660 ld (HeroLevelUp?),a 1661 ret1663UpdateHUd:1664 ld hl,UpdateHudCode1665 jp EnterSpecificRoutineInCastleOverviewCode1667HeroLevelUp?: db 01668DisplayHeroLevelUp:1669 ld a,(HeroLevelUp?)1670 dec a1671 ret m1672 ld (HeroLevelUp?),a1673 jp nz,DisableScrollScreen1675 ld a,11676 ld (GameStatus),a 1677 call ClearMapPage0AndMapPage1 1679 ld hl,HeroLevelUpCode1680 jp EnterSpecificRoutineInCastleOverviewCode1682DisplayGuardTowerReward?: db 01683GuardTowerReward: ds 21684DisplayGuardTowerReward:1685 ld a,(DisplayGuardTowerReward?)1686 dec a1687 ret m1688 ld (DisplayGuardTowerReward?),a1689 jp nz,DisableScrollScreen1691 ld a,11692 ld (GameStatus),a 1693 call ClearMapPage0AndMapPage1 1695 ld hl,DisplayGuardTowerRewardCOde1696 call EnterSpecificRoutineInBattleCode1697 jp UpdateHUd1699DisplaySpireOfWisdom?: db 01700DisplaySpireOfWisdom:1701 ld a,(DisplaySpireOfWisdom?)1702 dec a1703 ret m1704 ld (DisplaySpireOfWisdom?),a1705 jp nz,DisableScrollScreen1707 ld a,11708 ld (GameStatus),a 1709 call ClearMapPage0AndMapPage1 1711 ld hl,DisplaySpireOfWisdomCOde1712 call EnterSpecificRoutineInExtraRoutines1713 jp UpdateHUd1715DisplayLearningStone?: db 01716DisplayLearningStone:1717 ld a,(DisplayLearningStone?)1718 dec a1719 ret m1720 ld (DisplayLearningStone?),a1721 jp nz,DisableScrollScreen1723 ld a,11724 ld (GameStatus),a 1725 call ClearMapPage0AndMapPage1 1727 ld hl,DisplayLearningStoneCOde1728 jp EnterSpecificRoutineInCastleOverviewCode1729 1730ChestFound?: db 01731BigChest?: ds 11732DisplayChestFound:1733 ld a,(ChestFound?)1734 dec a1735 ret m1736 ld (ChestFound?),a1737 jp nz,DisableScrollScreen1739 ld a,11740 ld (GameStatus),a 1741 call ClearMapPage0AndMapPage1 1743 ld hl,DisplayChestCode1744 jp EnterSpecificRoutineInCastleOverviewCode1746ScrollFound?: db 01747SpellScrollInventoryNumber: ds 1 1748DisplayScrollFound:1749 ld a,(ScrollFound?)1750 dec a1751 ret m1752 ld (ScrollFound?),a1753 jp nz,DisableScrollScreen1755 ld a,11756 ld (GameStatus),a 1757 call ClearMapPage0AndMapPage1 1759 ld hl,DisplayScrollCode1760 jp EnterSpecificRoutineInCastleOverviewCode1762CastleCodeSetAdditionalStatFromInventoryItemsInHL:1763 jp EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1765DisplayStartOfTurnMessage?: db 31766DisplayQuickTips?: db 11767Date: dw 0 1768DisplayStartOfTurnMessage:1769 if StartOfTurnMessageOn?1770 else1771 ret1772 endif1774 ld a,(DisplayStartOfTurnMessage?)1775 dec a1776 ret m1777 ld (DisplayStartOfTurnMessage?),a1778 ret nz1780 ld a,11781 ld (GameStatus),a 1782 call ClearMapPage0AndMapPage1 1784 ld hl,DisplayStartOfTurnMessageCode1785 call EnterSpecificRoutineInCastleOverviewCode1787 ld a,(DisplayQuickTips?)1788 or a1789 ret z1791 ld a,11792 ld (GameStatus),a 1794 ld hl,DisplayQuickTipsCode1795 jp EnterSpecificRoutineInCastleOverviewCode1797DisableScrollScreen:1798 ld a,11799 ld (DisableScrollScreen?),a1800 ret1801EnableScrollScreen:1802 xor a1803 ld (DisableScrollScreen?),a1804 ld (freezecontrols?),a1805 ret1807HandleHud: 1808 ld hl,HudCode1809 jp EnterSpecificRoutineInCastleOverviewCode1811EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters:1812 ld (.SelfModifyingCodeRoutine),hl1814 ld a,(memblocks.1) 1815 push af1816 ld a,(memblocks.2) 1817 push af1818 in a,($a8) 1819 push af 1821 ld a,(slot.page12rom) 1822 out ($a8),a1824 ld a,CastleOverviewCodeBlock 1825 call block1234 1827 .SelfModifyingCodeRoutine: equ $+11828 call $ffff1830 pop af1831 out ($a8),a 1832 pop af1833 call block34 1834 pop af1835 call block12 1836 ret1838EnterSpecificRoutineHeroOverviewCode:1839 ld (.SelfModifyingCodeRoutine),hl1841 ld a,(memblocks.1) 1842 push af1843 ld a,(memblocks.2) 1844 push af1845 in a,($a8) 1846 push af 1848 ld a,(slot.page12rom) 1849 out ($a8),a1851 ld a,HeroOverviewCodeBlock 1852 call block1234 1854 .SelfModifyingCodeRoutine: equ $+11855 call $ffff1857 pop af1858 out ($a8),a 1859 pop af1860 call block34 1861 pop af1862 call block12 1864 xor a1865 ld (vblankintflag),a1866 ld (GameStatus),a 1867 ld hl,01868 ld (CurrentCursorSpriteCharacter),hl1869 call EnableScrollScreen1870 ret1872EnterSpecificRoutineInExtraRoutines:1873 ld (.SelfModifyingCodeRoutine),hl1875 ld a,(memblocks.1) 1876 push af1877 ld a,(memblocks.2) 1878 push af1879 in a,($a8) 1880 push af 1882 ld a,(slot.page12rom) 1883 out ($a8),a1885 ld a,ExtraRoutinesCodeBlock 1886 call block1234 1888 .SelfModifyingCodeRoutine: equ $+11889 call $ffff1891 pop af1892 out ($a8),a 1893 pop af1894 call block34 1895 pop af1896 call block12 1898 xor a1899 ld (vblankintflag),a1900 ld (GameStatus),a 1901 ld hl,01902 ld (CurrentCursorSpriteCharacter),hl1903 call EnableScrollScreen1904 ret1906EnterSpecificRoutineInCastleOverviewCode:1907 ld (.SelfModifyingCodeRoutine),hl1909 ld a,(memblocks.1) 1910 push af1911 ld a,(memblocks.2) 1912 push af1913 in a,($a8) 1914 push af 1916 ld a,(slot.page12rom) 1917 out ($a8),a1919 ld a,CastleOverviewCodeBlock 1920 call block1234 1922 .SelfModifyingCodeRoutine: equ $+11923 call $ffff1925 pop af1926 out ($a8),a 1927 pop af1928 call block34 1929 pop af1930 call block12 1932 xor a1933 ld (vblankintflag),a1934 ld (GameStatus),a 1935 ld hl,01936 ld (CurrentCursorSpriteCharacter),hl1937 call EnableScrollScreen1938 ret1940EnterSpecificRoutineInBattleCode:1941 ld (.SelfModifyingCodeRoutine),hl1943 ld a,(memblocks.1) 1944 push af1945 ld a,(memblocks.2) 1946 push af1947 in a,($a8) 1948 push af 1950 ld a,(slot.page12rom) 1951 out ($a8),a1953 ld a,BattleCodeBlock 1954 call block12 1956 .SelfModifyingCodeRoutine: equ $+11957 call $ffff1959 pop af1960 out ($a8),a 1961 pop af1962 call block34 1963 pop af1964 call block12 1966 xor a1967 ld (vblankintflag),a1968 ld (GameStatus),a 1969 ld hl,01970 ld (CurrentCursorSpriteCharacter),hl1971 call EnableScrollScreen1972 ret1974HeroWeTradeWith: ds 21975HeroCollidesWithFriendlyHero?: ds 11976CheckEnterTradeMenuBetween2FriendlyHeroes:19771984 ld a,(HeroCollidesWithFriendlyHero?)1985 dec a1986 ret m1987 ld (HeroCollidesWithFriendlyHero?),a1988 jp nz,DisableScrollScreen198919911992 ld a,11993 ld (GameStatus),a 1995 ld hl,TradeMenuCode1996 call EnterSpecificRoutineInCastleOverviewCode1998 xor a1999 ld (vblankintflag),a2000 ld (putmovementstars?),a 2001 ld (mouseclickx),a 2002 ld (mouseclicky),a 2003 ld (framecounter),a2004 ld (movehero?),a 2005 call ClearMapPage0AndMapPage1 2006 ld hl,CursorBoots2007 ld (CurrentCursorSpriteCharacter),hl2008 ret2013CheckHeroCollidesWithFriendlyHero: 2014 ld ix,(plxcurrentheroAddress)2015 20162017 ld a,(whichplayernowplaying?) | cp 1 | ld iy,pl1hero1y | jp z,.CheckHeroTouchesFriendlyHero2018 ld a,(whichplayernowplaying?) | cp 2 | ld iy,pl2hero1y | jp z,.CheckHeroTouchesFriendlyHero2019 ld a,(whichplayernowplaying?) | cp 3 | ld iy,pl3hero1y | jp z,.CheckHeroTouchesFriendlyHero2020 ld a,(whichplayernowplaying?) | cp 4 | ld iy,pl4hero1y | jp z,.CheckHeroTouchesFriendlyHero2021 ret2023 .CheckHeroTouchesFriendlyHero: 2024 ld b,amountofheroesperplayer2025 .checkpointerFriendlyloop:2026 push ix2027 pop hl2028 push iy2029 pop de2030 call CompareHLwithDE2031 jr z,.endcheck12033 ld a,(iy+HeroStatus) 2034 cp 255 2035 jr z,.endcheck1 2036 cp 254 2037 jr z,.endcheck12039 ld a,(ix+HeroY)2040 cp (iy+HeroY)2041 jr nz,.endcheck12043 ld a,(ix+HeroX)2044 cp (iy+HeroX)2045 jr z,.HeroTouchesFriendlyHero2046 .endcheck1:2047 ld de,lenghtherotable2048 add iy,de2049 djnz .checkpointerFriendlyloop2050 ret2052 .HeroTouchesFriendlyHero:2053 ld (HeroWeTradeWith),iy 2054 scf2055 ret2057SetMappositionHero: 2058 ld ix,(plxcurrentheroAddress)2060 2061 ld a,(ix+HeroY)2062 inc a 2065 ld de,(maplenght)2066 ld h,02067 ld l,a2068 call MultiplyHlWithDE 2073 ld bc,mapdata 2074 add hl,bc2075 ld c,(ix+HeroX)2076 ld b,02077 add hl,bc 20822089 ret2091CheckHeroCollidesWithGuardTower:2092 ld a,2 2093 ld (page1bank),a2094 out ($fe),a 2096 ld a,(RemoveDeadMonstersNeutralMonster?)2097 or a2098 jp nz,CheckHeroCollidesWithMonster.RemoveDeadMonstersNeutralMonster2100 ld ix,(plxcurrentheroAddress)2101 ld a,(ix+HeroStatus)2102 cp 2552103 ret z2105 Call SetMappositionHero 2107 ld a,(hl)2108 cp 762109 ret nz2111 inc hl 2112 ld a,(hl)2113 ld (MonsterHerocollidedWithOnMapAmount),a2114 or a2115 ret z2117 inc hl 2118 ld a,(hl)2119 sub 1912120 ld (GuardTowerMonsterLevel),a2121 dec hl2122 xor a2123 ld (movehero?),a2124 ld (FightGuardTowerMonster?),a2126 push hl2127 ld a,12128 ld (GameStatus),a 2129 call ClearMapPage0AndMapPage1 2130 ld hl,DisplayGuardTowerCOde2131 call EnterSpecificRoutineInBattleCode2132 pop hl2134 ld a,(FightGuardTowerMonster?)2135 or a2136 ret z2137 2138 dec hl2139 xor a 2140 jp CheckHeroCollidesWithMonster.NormalMonster2142CheckHeroCollidesWithMonster:2143 ld a,2 2144 ld (page1bank),a2145 out ($fe),a 2147 ld a,(RemoveDeadMonstersNeutralMonster?)2148 or a2149 jr nz,.RemoveDeadMonstersNeutralMonster2151 ld ix,(plxcurrentheroAddress)2152 ld a,(ix+HeroStatus)2153 cp 2552154 ret z2156 Call SetMappositionHero 2158 ld a,(hl)2159 cp 1922160 ret nc 2161 cp 76 2162 jr z,.CheckIfGuardTowerJustDied2163 cp 1282164 ret c 2166 .NormalMonster:2167 ld (MonsterHerocollidedWithOnMap),a2168 ld a,l2169 ld (XAddressOfMonsterHerocollidedWithOnMap),a2171 ld a,(NeutralEnemyDied?)2172 or a2173 jr nz,.ThisEnemyJustDied2175 inc hl2176 ld (AddressOfMonsterAmountHerocollidedWithOnMap),hl2177 ld a,(hl)2178 ld (MonsterHerocollidedWithOnMapAmount),a2180 ld hl,02181 ld (HeroThatGetsAttacked),hl 2182 jp EnterCombat2184 .RemoveDeadMonstersNeutralMonster:2185 ld hl,(AddressOfMonsterAmountHerocollidedWithOnMap)2186 ld (hl),a 2187 xor a2188 ld (RemoveDeadMonstersNeutralMonster?),a 2189 ret2191 .ThisEnemyJustDied:2192 .CheckIfGuardTowerJustDied:2193 ld a,(NeutralEnemyDied?)2194 or a2195 ret z2197 xor a2198 ld (NeutralEnemyDied?),a2200 inc hl 2201 ld (hl),a 2202 dec hl2204 ld a,(hl)2205 cp 762206 jr z,.GuardTowerDied2207 ld (hl),0 2209 or a2210 sbc hl,de 2211 ld a,(hl)2213 cp 1922214 ret c2215 ld (hl),0 2216 ret2218 .GuardTowerDied: 2219 inc hl2220 inc hl2222 ld d,02223 ld a,(hl) 2224 sub 191 2225 ld e,a2226 ld (hl),0 2227 inc hl2228 ld a,(hl) 2229 ld (hl),0 2231 sub 191 2232 ld h,02233 ld l,a2234 call MultiplyHlWithDE 2235 ld de,2502236 call MultiplyHlWithDE 2237 ld (GuardTowerReward),hl22392248225622642271 ld a,52272 ld (DisplayGuardTowerReward?),a2273 ret2275SetResourcesCurrentPlayerinIX:2276 ld a,(whichplayernowplaying?)2277 .PlayerAlreadySetInA:2278 ld ix,ResourcesPlayer12279 cp 12280 ret z2281 ld ix,ResourcesPlayer22282 cp 22283 ret z2284 ld ix,ResourcesPlayer32285 cp 32286 ret z2287 ld ix,ResourcesPlayer422882290 ret2292CheckHeroPicksUpItem:2293 Call SetMappositionHero 2295 ld a,2 2296 ld (page1bank),a2297 out ($fe),a 2299 ld a,(hl)2300 or a2301 ret z2302 cp 1282303 ret nc 2305 2306 push af2307 call SetResourcesCurrentPlayerinIX 2308 ld a,32309 ld (SetResources?),a2310 ld (ChangeManaAndMovement?),a 2311 pop af2313 cp 652314 jp z,.TreasureChestBig2315 cp 662316 jp z,.TreasureChestSmall2317 cp 672318 jp z,.Wood2319 cp 682320 jp z,.Ore2321 cp 692322 jp z,.Gems2323 cp 702324 jp z,.Rubies2325 cp 712326 jp z,.Gold2327 cp 722328 jp z,.WaterWell2329 cp 732330 jp z,.LearningStone2331 cp 742332 jp z,.SpireOfWisdom2333 cp 752334 jp z,Scroll2335 cp 76 2336 ret z 2338.InventoryItems:2339 2340 sub 832341 ld c,a2342 ld ix,(plxcurrentheroAddress)2344 .CheckAll9SlotsLoop:2345 sub 52346 jr c,.AppropriateInvventorySlotFound2347 inc ix 2348 jr .CheckAll9SlotsLoop2350 .SetItemInExtraSlots:2351 ld ix,(plxcurrentheroAddress)2352 ld b,6 2354 .loop:2355 ld a,(ix+HeroInventory+9)2356 cp 045 2357 jr z,.SetItem2358 inc ix2359 djnz .loop2360 ret2361 2362 .SetItem:2363 ld (ix+HeroInventory+9),c2364 jr .EndInventoryPickupRoutineAndUpdateHud2366 .AppropriateInvventorySlotFound:2367 ld a,(ix+HeroInventory+0)2368 cp 45 2369 jp nz,.SetItemInExtraSlots 2370 ld (ix+HeroInventory+0),c2371 .EndInventoryPickupRoutineAndUpdateHud:2372 xor a2373 ld (movehero?),a2374 ld (hl),a 2375 ld a,32376 ld (SetHeroArmyAndStatusInHud?),a2377 call SetHeroMaxMovementPoints2378 jp SetTotalManaHero239624102417.WaterWell:2418 ld ix,(plxcurrentheroAddress)2419 ld a,(ix+HeroTotalMove)2420 cp (ix+HeroMove)2421 ld (ix+HeroMove),a2422 ret z2423 xor a2424 ld (movehero?),a 2426 ld e,(ix+HeroSpecificInfo+0) 2427 ld d,(ix+HeroSpecificInfo+1)2428 push de2429 pop ix 2430 2431 ld a,(ix+HeroinfoSYSX+0) 2432 and %0100 1000 2433 or a,128 + (096 / 2) 2434 xor 82435 ld (ix+HeroinfoSYSX+0),a 2436 ret2438.SpireOfWisdom:2439 call .CheckSpireOfWisdomAlreadyVisited2440 ret nz2442 xor a2443 ld (movehero?),a2444 ld a,32445 ld (DisplaySpireOfWisdom?),a2446 ret2448.CheckSpireOfWisdomAlreadyVisited:2449 ld ix,(plxcurrentheroAddress)2451 inc hl2452 ld a,(hl) 2453 sub 1922454 jr z,.SpireOfWisdom12455 dec a2456 jr z,.SpireOfWisdom22457 dec a2458 jr z,.SpireOfWisdom32459 dec a2460 jr z,.SpireOfWisdom42461 dec a2462 jr z,.SpireOfWisdom524632465 2466 .SpireOfWisdom6:2467 bit 4,(ix+HeroAirSpells)2468 ret nz2469 set 4,(ix+HeroAirSpells)2470 ret2471 .SpireOfWisdom5:2472 bit 5,(ix+HeroAirSpells)2473 ret nz2474 set 5,(ix+HeroAirSpells)2475 ret2476 .SpireOfWisdom4:2477 bit 6,(ix+HeroAirSpells)2478 ret nz2479 set 6,(ix+HeroAirSpells)2480 ret2481 .SpireOfWisdom3:2482 bit 7,(ix+HeroAirSpells)2483 ret nz2484 set 7,(ix+HeroAirSpells)2485 ret2486 .SpireOfWisdom2:2487 bit 4,(ix+HeroFireSpells)2488 ret nz2489 set 4,(ix+HeroFireSpells)2490 ret2491 .SpireOfWisdom1:2492 bit 5,(ix+HeroFireSpells)2493 ret nz2494 set 5,(ix+HeroFireSpells)2495 ret2497.LearningStone:2498 call .CheckLearningStoneAlreadyVisited2499 ret nz2501 xor a2502 ld (movehero?),a2503 ld a,32504 ld (DisplayLearningStone?),a2505 ret2507.CheckLearningStoneAlreadyVisited:2508 ld ix,(plxcurrentheroAddress)2510 inc hl2511 ld a,(hl) 2512 sub 1922513 jr z,.LearningStone12514 dec a2515 jr z,.LearningStone22516 dec a2517 jr z,.LearningStone32518 dec a2519 jr z,.LearningStone42520 dec a2521 jr z,.LearningStone525222524 2525 .LearningStone6:2526 bit 6,(ix+HeroFireSpells)2527 ret nz2528 set 6,(ix+HeroFireSpells)2529 ret2530 .LearningStone5:2531 bit 7,(ix+HeroFireSpells)2532 ret nz2533 set 7,(ix+HeroFireSpells)2534 ret2535 .LearningStone4:2536 bit 4,(ix+HeroEarthSpells)2537 ret nz2538 set 4,(ix+HeroEarthSpells)2539 ret2540 .LearningStone3:2541 bit 5,(ix+HeroEarthSpells)2542 ret nz2543 set 5,(ix+HeroEarthSpells)2544 ret2545 .LearningStone2:2546 bit 6,(ix+HeroEarthSpells)2547 ret nz2548 set 6,(ix+HeroEarthSpells)2549 ret2550 .LearningStone1:2551 bit 7,(ix+HeroEarthSpells)2552 ret nz2553 set 7,(ix+HeroEarthSpells)2554 ret2556.TreasureChestSmall:2557 xor a2558 ld (movehero?),a2559 ld (hl),a 2560 ld a,32561 ld (ChestFound?),a2562 ld a,02563 ld (BigChest?),a2564 ret2566.TreasureChestBig:2567 xor a2568 ld (movehero?),a2569 ld (hl),a 2570 ld a,32571 ld (ChestFound?),a2572 ld a,12573 ld (BigChest?),a2574 ret2576.Gold:2577 xor a2578 ld (movehero?),a2579 ld (hl),a 2580 ld de,5002581 ld l,(ix+0) 2582 ld h,(ix+1)2583 add hl,de2584 ld (ix+0),l2585 ld (ix+1),h 2586 ret2588.Wood:2589 xor a2590 ld (movehero?),a2591 ld (hl),a 2592 ld de,52593 ld l,(ix+2) 2594 ld h,(ix+3)2595 add hl,de2596 ld (ix+2),l2597 ld (ix+3),h 2598 ret2600.Ore:2601 xor a2602 ld (movehero?),a2603 ld (hl),a 2604 ld de,52605 ld l,(ix+4) 2606 ld h,(ix+5)2607 add hl,de2608 ld (ix+4),l2609 ld (ix+5),h 2610 ret2612.Gems:2613 xor a2614 ld (movehero?),a2615 ld (hl),a 2616 ld de,52617 ld l,(ix+6) 2618 ld h,(ix+7)2619 add hl,de2620 ld (ix+6),l2621 ld (ix+7),h 2622 ret2624.Rubies:2625 xor a2626 ld (movehero?),a2627 ld (hl),a 2628 ld de,52629 ld l,(ix+8) 2630 ld h,(ix+9)2631 add hl,de2632 ld (ix+8),l2633 ld (ix+9),h 2634 ret2636NXAndNY10x18HeroPortraits: equ 018*256 + (010/2) 2637NXAndNY14x9HeroPortraits: equ 009*256 + (014/2) 2638DYDXHeroWindow10x18InHud: equ 132*128 + (204/2) - 128 2639DYDXFirstHeroWindow14x9InHud: equ 067*128 + (208/2) - 128 2640DYDXSecondHeroWindow14x9InHud: equ 078*128 + (208/2) - 128 2641DYDXThirdHeroWindow14x9InHud: equ 089*128 + (208/2) - 128 2644SetResources?: db 32645SetHeroArmyAndStatusInHud?: db 32647CheckEnterCastle:2648 ld a,(PlayerLostHeroInBattle?)2649 or a2650 ret nz2652 ld a,(EnterCastle?)2653 or a2654 ret z2655 xor a2656 ld (EnterCastle?),a2657 pop af 2658 ld iy,(WhichCastleIsPointerPointingAt?)2659 jp EnterCastle2661CheckHeroEntersCastle:2662 ld ix,(plxcurrentheroAddress)2663 ld iy,Castle12664 call .GoCheck2665 ld iy,Castle22666 call .GoCheck2667 ld iy,Castle32668 call .GoCheck2669 ld iy,Castle42670 call .GoCheck2671 ret2673 .GoCheck:2674 ld a,(iy+CastleY) 2675 dec a2676 cp (ix+Heroy)2677 ret nz2678 ld a,(iy+CastleX)2679 inc a2680 inc a2681 cp (ix+Herox)2682 ret nz2684 ld a,(whichplayernowplaying?) 2685 cp (iy+CastlePlayer)2686 jr nz,.TakeOverCastle 2688 ld a,(PlayerLostHeroInBattle?)2689 or a2690 ret nz2692 ld a,(ix+HeroStatus) 2693 cp 0022694 ret z 2695 cp 2542696 ret z 2698 2699 ld (ix+HeroStatus),002 2700 2701 pop af 2702 pop af 2704 2705 ld e,(ix+HeroSpecificInfo+0) 2706 ld d,(ix+HeroSpecificInfo+1)2707 push de2708 pop ix 2709 2710 ld a,(ix+HeroinfoSYSX+0) 2711 and %0100 1000 2712 or a,128 + (064 / 2) 2713 xor 82714 ld (ix+HeroinfoSYSX+0),a2716 jp EnterCastle2717 2718.TakeOverCastle: 2719 push af2720 ld a,(iy+CastlePlayer)2721 ld (PlayerWhoLostAHeroInBattle?),a2722 inc a2723 jr z,.NeutralCastleFound 2724 ld a,32725 ld (PlayerLostHeroInBattle?),a2726 .NeutralCastleFound:2727 pop af2728 2729 ld (iy+CastlePlayer),a2730 pop af 2731 ret2732 2733 2734CheckHeroCollidesWithEnemyHero:2735 ld ix,(plxcurrentheroAddress)2736 27372738 ld de,lenghtherotable2739 ld hl,lenghtherotable*(amountofheroesperplayer-1)2740 ld a,(whichplayernowplaying?) | cp 1 | ld a,1 | ld bc,pl1hero8y | ld iy,pl1hero1y | call nz,.CheckHeroTouchesEnemyHero2741 ld a,(whichplayernowplaying?) | cp 2 | ld a,2 | ld bc,pl2hero8y | ld iy,pl2hero1y | call nz,.CheckHeroTouchesEnemyHero2742 ld a,(whichplayernowplaying?) | cp 3 | ld a,3 | ld bc,pl3hero8y | ld iy,pl3hero1y | call nz,.CheckHeroTouchesEnemyHero2743 ld a,(whichplayernowplaying?) | cp 4 | ld a,4 | ld bc,pl4hero8y | ld iy,pl4hero1y | call nz,.CheckHeroTouchesEnemyHero2744 ret2746 .CheckHeroTouchesEnemyHero: 2747 ld (PlayerThatGetsAttacked),a2748 ld (LastHeroForPlayerThatGetsAttacked),bc2749 ld b,amountofheroesperplayer2750 .checkpointerenemyloop:2751 ld a,(iy+HeroStatus) 2752 inc a 2753 jp z,.endcheck1 2755 ld a,(ix+HeroY)2756 cp (iy+HeroY)2757 jp nz,.endcheck12759 ld a,(ix+HeroX)2760 cp (iy+HeroX)2761 jp z,.HeroTouchesEnemyHero2762 .endcheck1:2763 add iy,de2764 or a2765 sbc hl,de 2766 djnz .checkpointerenemyloop2767 ret2769 .HeroTouchesEnemyHero:2770 ld (HeroThatGetsAttacked),iy 2771 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl2772 pop af2773 pop af 2774 jp EnterCombat2776LastHeroForPlayerThatGetsAttacked: ds 22777PlayerThatGetsAttacked: ds 12778HeroThatGetsAttacked: ds 227792780AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked: ds 22782CheckIfHeroButtonShouldRemainLit: 2783 ld a,(currentherowindowclicked)2784 2785 cp 12786 ld ix,ButtonHeroWindow1 2787 ld hl,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2788 jr z,.checkherobutton2790 cp 22791 ld ix,ButtonHeroWindow2 2792 ld hl,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2793 jr z,.checkherobutton2795 cp 32796 ld ix,ButtonHeroWindow3 2797 ld hl,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2798 ret nz2799 2800 .checkherobutton: 2801 ld a,(ix+ButtonLit?) 2802 or a2803 ret z 2805 bit 4,(hl) 2806 ret nz2807 2808 ld (hl),%1010 0011 2809 ret2811CompareHLwithDE:2812 or a2813 sbc hl,de2814 ret2816ButtonLit?: equ 0 2817ButtonHeroWindow1: db 02818ButtonHeroWindow2: db 02819ButtonHeroWindow3: db 02820ButtonCastleWindow1: db 02821ButtonCastleWindow2: db 02822ButtonCastleWindow3: db 02824CastleWindownY: equ 102825CastleWindownX: equ 202826HerowindowNY: equ 102827HerowindowNX: equ 142829centrescreenforthisCastle:2830 ld a,TilesPerColumn2831 ld b,a2832 ld a,(mapheight)2833 sub a,b2834 ld b,a2836 ld a,TilesPerRow2837 ld c,a2838 ld a,(maplenght)2839 sub a,c2840 ld c,a2841 2842 ld a,(ix+CastleY) 2843 sub a,TilesPerColumn/2 - 12844 jp nc,.notoutofscreentop2845 xor a2846.notoutofscreentop: 2847 ld (mappointery),a2849 cp b2850 jp c,.notoutofscreenbottom2851 ld a,b2852 ld (mappointery),a2853.notoutofscreenbottom: 2854 2855 ld a,(ix+CastleX) 2856 sub a,TilesPerRow/22857 jp nc,.notoutofscreenleft2858 xor a2859.notoutofscreenleft: 2860 ld (mappointerx),a2862 cp c2863 jp c,.notoutofscreenright2864 ld a,c2865 ld (mappointerx),a2866.notoutofscreenright: 2867 ret2869ActivateFirstActiveHeroForCurrentPlayer:2870 xor a2871 ld (herowindowpointer),a 2872 ld (CastleWindowPointer),a 2873 ld (currentherowindowclicked),a 2875 call SetHero1ForCurrentPlayerInIX2876 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime28782879 ld (plxcurrentheroAddress),ix 2880 call FirstHeroWindowClicked 2881 xor a2882 ld (SetHeroOverViewMenu?),a2884 InitiatePlayerTurn:2885 ld a,2 2886 ld (ButtonHeroWindow1+ButtonLit?),a2887 ld (ButtonHeroWindow2+ButtonLit?),a2888 ld (ButtonHeroWindow3+ButtonLit?),a2890 ld (ButtonCastleWindow1+ButtonLit?),a2891 ld (ButtonCastleWindow2+ButtonLit?),a2892 ld (ButtonCastleWindow3+ButtonLit?),a28942898 ld ix,(plxcurrentheroAddress)2899 call centrescreenforthishero.GoCenter2900 ld a,(ix+HeroStatus) 2901 cp 254 2902 jr z,ActivateFirstActiveHeroForCurrentPlayer2903 cp 255 2904 call z,CenterScreenOnPlayersCastleAndNoActiveHero2905 2906 2907 2908 ld a,3 2909 ld (SetHeroesInWindows?),a 2910 ld (SetCastlesInWindows?),a 2911 ld (SetHeroArmyAndStatusInHud?),a2912 ld (SetResources?),a2913 ld a,42914 ld (ChangeManaAndMovement?),a 2916 call CheckIfCurrentPlayerIsDisabled 2917 ret nc2918 call SetNextPlayersTurn 2919 jp ActivateFirstActiveHeroForCurrentPlayer2921CheckIfCurrentPlayerIsDisabled: 2922 ld a,(whichplayernowplaying?) 2923 ld ix,Castle1 | cp (ix+CastlePlayer) | ret z2924 ld ix,Castle2 | cp (ix+CastlePlayer) | ret z2925 ld ix,Castle3 | cp (ix+CastlePlayer) | ret z2926 ld ix,Castle4 | cp (ix+CastlePlayer) | ret z2928 call SetHero1ForCurrentPlayerInIX 2930 ld b,72931 .loop:2932 ld a,(ix+HeroStatus)2933 cp 1 2934 ret z2935 ld de,lenghtherotable2936 add ix,de2937 djnz .loop2939 scf 2940 ret2942 2943SetNextPlayersTurn:2944 ld a,(amountofplayers) 2945 ld b,a2946 ld a,(whichplayernowplaying?)2947 cp b2948 jp nz,.endchecklastplayer2949 xor a2950 .endchecklastplayer: 2951 inc a2952 ld (whichplayernowplaying?),a2953 ret2955CenterScreenOnPlayersCastleAndNoActiveHero:2956 ld a,0 2957 ld (ButtonHeroWindow1+ButtonLit?),a2958CenterScreenOnPlayersCastle: 2959 call SetCastleUsingCastleWindowPointerInIX2960 jp centrescreenforthisCastle2962SetCastleUsingCastleWindowPointerInIX:2963 ld a,(CastleWindowPointer) 2964 ld c,a 2965 ld a,(whichplayernowplaying?)2966 ld b,AmountOfCastles2967 ld ix,Castle12968 ld de,LenghtCastleTable2969 .SearchLoop:2970 cp (ix+CastlePlayer)2971 jp z,.CastleFound2972 add ix,de2973 djnz .SearchLoop2974 2975 pop af2976 ret2978 .CastleFound:2979 dec c2980 ret m2981 add ix,de2982 djnz .SearchLoop2983 2984 pop af2985 ret2987 .SearchNextCastle: 2988 add ix,de2989 cp (ix+CastlePlayer)2990 ret z 2991 djnz .SearchNextCastle2992 2993 pop af2994 ret 2997ThirdHeroWindowClicked:2998 call SetHero1ForCurrentPlayerInIX2999 call SetHeroForWindow3DeterminedByHeroWindowPointerInIX3000 3001 ld a,(ix+HeroStatus) 3002 cp 255 3003 ret z 3005 ld a,33006 ld (currentherowindowclicked),a 3007 jp centrescreenforthishero3009SecondHeroWindowClicked:3010 call SetHero1ForCurrentPlayerInIX3011 call SetHeroForWindow2DeterminedByHeroWindowPointerInIX3012 3013 ld a,(ix+HeroStatus) 3014 cp 255 3015 ret z 3017 ld a,23018 ld (currentherowindowclicked),a 3019 jp centrescreenforthishero3021FirstHeroWindowClicked: 3022 call SetHero1ForCurrentPlayerInIX3023 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX3024 3025 ld a,(ix+HeroStatus) 3026 cp 255 3027 ret z 3029 ld a,13030 ld (currentherowindowclicked),a 3031 jp centrescreenforthishero3033CenterScreenForCurrentHero:3034 ld ix,(plxcurrentheroAddress)3035 jp centrescreenforthishero.GoCenter3036 3037centrescreenforthishero:3038 ld a,2 3039 ld (ButtonHeroWindow1+ButtonLit?),a3040 ld (ButtonHeroWindow2+ButtonLit?),a3041 ld (ButtonHeroWindow3+ButtonLit?),a3042 ld a,33043 ld (SetHeroArmyAndStatusInHud?),a3045 ld hl,(plxcurrentheroAddress)3046 push hl3047 ld (plxcurrentheroAddress),ix3049 ld a,(mappointery)3050 ld b,a3051 ld a,(mappointerx)3052 ld c,a3053 push bc3055 call .GoCenter3057 pop bc3058 3059 ld hl,(plxcurrentheroAddress)3060 pop de3061 xor a3062 sbc hl,de3063 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3065 ld a,(mappointery)3066 ld h,a3067 ld a,(mappointerx)3068 ld l,a3069 xor a3070 sbc hl,bc3071 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3073 ld a,23074 ld (SetHeroOverViewMenu?),a 3075 xor a3076 ld (freezecontrols?),a3077 ret3079 .AnotherHeroIsSelectedOrMappointerIsDifferent:3080 xor a3081 ld (putmovementstars?),a3082 ld (mouseclickx),a 3083 ld (mouseclicky),a 3084 ld (movementpathpointer),a3085 ld (movehero?),a3086 ret30883089.GoCenter:3091 ld a,TilesPerColumn3092 ld b,a3093 ld a,(mapheight)3094 sub a,b3095 ld b,a3097 ld a,TilesPerRow3098 ld c,a3099 ld a,(maplenght)3100 sub a,c3101 ld c,a3102 3103 ld a,(ix+HeroY) 3104 sub a,TilesPerColumn/2 - 13105 jp nc,.notoutofscreentop3106 xor a3107.notoutofscreentop: 3108 ld (mappointery),a3110 cp b3111 jp c,.notoutofscreenbottom3112 ld a,b3113 ld (mappointery),a3114.notoutofscreenbottom: 3115 3116 ld a,(ix+HeroX) 3117 sub a,TilesPerRow/23118 jp nc,.notoutofscreenleft3119 xor a3120.notoutofscreenleft: 3121 ld (mappointerx),a3123 cp c3124 jp c,.notoutofscreenright3125 ld a,c3126 ld (mappointerx),a3127.notoutofscreenright: 3128 ret3130CheckHeroArrowUp:3131 ld a,(herowindowpointer)3132 sub a,13133 ret c3134 ld (herowindowpointer),a3136 call SetHero1ForCurrentPlayerInIX3137 call SetHeroUsingHeroWindowPointer3138 call FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime3140 ld a,33141 ld (SetHeroesInWindows?),a 3142 ld (ChangeManaAndMovement?),a3144 ld a,2 3145 ld (ButtonHeroWindow1+ButtonLit?),a3146 ld (ButtonHeroWindow2+ButtonLit?),a3147 ld (ButtonHeroWindow3+ButtonLit?),a3149 ld a,(currentherowindowclicked)3150 inc a3151 ld (currentherowindowclicked),a3152 ret3154CheckCastleArrowUp:3155 ld a,(CastleWindowPointer)3156 sub a,13157 ret c3158 ld (CastleWindowPointer),a3160 ld a,33161 ld (SetCastlesInWindows?),a 3162 3163 ld a,2 3164 ld (ButtonCastleWindow1+ButtonLit?),a3165 ld (ButtonCastleWindow2+ButtonLit?),a3166 ld (ButtonCastleWindow3+ButtonLit?),a 3167 ret3169CheckHeroArrowDown:3170 3184 ld a,(herowindowpointer)3185 add a,13186 cp 63187 ret nc3188 ld (herowindowpointer),a3190 call SetHero1ForCurrentPlayerInIX3191 call SetHeroUsingHeroWindowPointer3192 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime3194 ld a,33195 ld (SetHeroesInWindows?),a 3196 ld (ChangeManaAndMovement?),a3198 ld a,2 3199 ld (ButtonHeroWindow1+ButtonLit?),a3200 ld (ButtonHeroWindow2+ButtonLit?),a3201 ld (ButtonHeroWindow3+ButtonLit?),a3203 ld a,(currentherowindowclicked)3204 dec a3205 ld (currentherowindowclicked),a3206 ret3208CheckCastleArrowDown:3209 ld a,(CastleWindowPointer)3210 add a,13211 cp 43212 ret nc3213 ld (CastleWindowPointer),a3215 ld a,33216 ld (SetCastlesInWindows?),a 3217 3218 ld a,2 3219 ld (ButtonCastleWindow1+ButtonLit?),a3220 ld (ButtonCastleWindow2+ButtonLit?),a3221 ld (ButtonCastleWindow3+ButtonLit?),a 3222 ret3224movehero:3225 ld a,(movehero?)3226 or a 3227 jp z,CheckHeroEntersCastle 3228 call .GoMove3229 call CheckHeroCollidesWithGuardTower 3230 jp CenterScreenForCurrentHero3232 .GoMove:3233 ld a,(movementpathpointer)3234 add a,23235 ld (movementpathpointer),a3236 3237 ld e,a3238 ld d,03239 ld hl,movementpath3240 add hl,de3241 3242 ld b,(hl) 3243 inc hl3244 ld c,(hl) 3245 ld a,b3246 or c3247 jp nz,.domovehero3248 3249 .endmovement:3250 xor a3251 ld (movehero?),a 3252 ret3253 3254 .domovehero:3255 ld ix,(plxcurrentheroAddress)32563257 3258 ld a,(ix+HeroMove)3259 sub a,1 3260 jr c,.endmovement3261 ld (ix+HeroMove),a32633272 ld a,33273 ld (ChangeManaAndMovement?),a3275 ld a,(ix+HeroY)3276 add a,b 3277 ld (ix+HeroY),a3278 ld a,(ix+Herox)3279 add a,c 3280 ld (ix+HeroX),a3282 push ix3283 push bc3284 call CheckHeroCollidesWithFriendlyHero 3285 pop bc3286 pop ix3287 jp nc,.animate 3289 3290 ld a,(ix+HeroY)3291 sub a,b 3292 ld (ix+HeroY),a3293 ld a,(ix+Herox)3294 sub a,c 3295 ld (ix+HeroX),a3297 ld a,33298 ld (HeroCollidesWithFriendlyHero?),a3299 ld a,13300 ld (ChangeManaAndMovement?),a 3301 jp .endmovement3302 3303 .animate:3304 push bc3305 ld bc,SFX_HeroWalking3306 call RePlayerSFX_PlayCh1 3307 pop bc3309 ld (ix+HeroStatus),001 3310 ld e,(ix+HeroSpecificInfo+0) 3311 ld d,(ix+HeroSpecificInfo+1)3312 push de3313 pop ix 3315 3316 ld a,c3317 or a 3318 jp m,.HeroMovesLeft3319 dec a3320 jr z,.HereMovesRight3321 ld a,b 3322 or a 3323 jp m,.HeroMovesUp3324 dec a3325 ret nz3326 3327 .HeroMovesDown:33283329 ld a,(ix+HeroinfoSYSX+0) 3330 and %0100 1000 3331 or a,128 + (064 / 2) 3332 xor 833333334 ld (ix+HeroinfoSYSX+0),a3335 ret3336 3337 .HeroMovesUp:33383339 ld a,(ix+HeroinfoSYSX+0) 3340 and %0100 1000 3341 or a,128 + (096 / 2) 3342 xor 833433344 ld (ix+HeroinfoSYSX+0),a 3345 ret3347 .HereMovesRight:33483349 ld a,(ix+HeroinfoSYSX+0) 3350 and %0100 1000 3351 or a,128 + (000 / 2) 3352 xor 833533354 ld (ix+HeroinfoSYSX+0),a 3355 ret3356 3357 .HeroMovesLeft:33583359 ld a,(ix+HeroinfoSYSX+0) 3360 and %0100 1000 3361 or a,128 + (032 / 2) 3362 xor 833633364 ld (ix+HeroinfoSYSX+0),a 3365 ret3367SetAllHeroPosesInVram: 3368 ld a,(slot.page1rom) 3369 out ($a8),a 3371 ld ix,pl1hero1y | call SetHeroPoseInVram.go3372 ld ix,pl1hero2y | call SetHeroPoseInVram.go3373 ld ix,pl1hero3y | call SetHeroPoseInVram.go3374 ld ix,pl1hero4y | call SetHeroPoseInVram.go3375 ld ix,pl1hero5y | call SetHeroPoseInVram.go3376 ld ix,pl1hero6y | call SetHeroPoseInVram.go3377 ld ix,pl1hero7y | call SetHeroPoseInVram.go3378 ld ix,pl1hero8y | call SetHeroPoseInVram.go3380 ld ix,pl2hero1y | call SetHeroPoseInVram.go3381 ld ix,pl2hero2y | call SetHeroPoseInVram.go3382 ld ix,pl2hero3y | call SetHeroPoseInVram.go3383 ld ix,pl2hero4y | call SetHeroPoseInVram.go3384 ld ix,pl2hero5y | call SetHeroPoseInVram.go3385 ld ix,pl2hero6y | call SetHeroPoseInVram.go3386 ld ix,pl2hero7y | call SetHeroPoseInVram.go3387 ld ix,pl2hero8y | call SetHeroPoseInVram.go3389 ld ix,pl3hero1y | call SetHeroPoseInVram.go3390 ld ix,pl3hero2y | call SetHeroPoseInVram.go3391 ld ix,pl3hero3y | call SetHeroPoseInVram.go3392 ld ix,pl3hero4y | call SetHeroPoseInVram.go3393 ld ix,pl3hero5y | call SetHeroPoseInVram.go3394 ld ix,pl3hero6y | call SetHeroPoseInVram.go3395 ld ix,pl3hero7y | call SetHeroPoseInVram.go3396 ld ix,pl3hero8y | call SetHeroPoseInVram.go3398 ld ix,pl4hero1y | call SetHeroPoseInVram.go3399 ld ix,pl4hero2y | call SetHeroPoseInVram.go3400 ld ix,pl4hero3y | call SetHeroPoseInVram.go3401 ld ix,pl4hero4y | call SetHeroPoseInVram.go 3402 ld ix,pl4hero5y | call SetHeroPoseInVram.go 3403 ld ix,pl4hero6y | call SetHeroPoseInVram.go 3404 ld ix,pl4hero7y | call SetHeroPoseInVram.go3405 ld ix,pl4hero8y | call SetHeroPoseInVram.go3406 ret3407 3408NXAndNY16x32HeroSprites: equ 032*256 + (016/2) 3409SetHeroPoseInVram:3410 ld a,(slot.page1rom) 3411 out ($a8),a 3413 ld ix,(plxcurrentheroAddress)3414 .go:34153418 push ix3419 ld c,(ix+HeroSpecificInfo+0) 3420 ld b,(ix+HeroSpecificInfo+1)3421 push bc3422 pop ix3423 ld c,(ix+HeroinfoSYSX+0) 3424 ld b,(ix+HeroinfoSYSX+1) 3425 pop ix3427 ld l,(ix+HeroDYDX+0)3428 ld h,(ix+HeroDYDX+1) 3429 ld de,NXAndNY16x32HeroSprites 34333434 ld (AddressToWriteFrom),bc3435 ld (NXAndNY),de3436 ld (AddressToWriteTo),hl3438 3439 ld e,(ix+HeroSpecificInfo+0) 3440 ld d,(ix+HeroSpecificInfo+1)3441 push de3442 pop ix3444 ld a,(ix+HeroInfoSpriteBlock) 3446 call block12 3449 ld c,$98 3450 ld de,128 3451 di3453 .loop:3454 call .WriteOneLine3455 ld a,(NXAndNY+1)3456 dec a3457 ld (NXAndNY+1),a3458 jp nz,.loop3459 ei3460 ret3462 .WriteOneLine:34633464 ld a,1 3465 ld hl,(AddressToWriteTo) 3466 add hl,de 3467 ld (AddressToWriteTo),hl3468 call SetVdp_WriteWithoutDisablingOrEnablingInt 3470 ld hl,(AddressToWriteFrom) 3471 add hl,de 3472 ld (AddressToWriteFrom),hl3473 ld a,(NXAndNY)3474 ld b,a3475 otir3476 ret3478RemainingMovementPointsHero: db 63479putmovementstars:3480 ld a,(putmovementstars?)3481 or a3482 ret z3484 ld a,(movementpath+0) 3485 inc a3486 ld (ystar),a3487 ld a,(movementpath+1) 3488 ld (xstar),a3490 ld hl,movementpath+23491 3492 ld ix,(plxcurrentheroAddress)3493 ld a,(ix+HeroMove)3494 inc a3495 ld (RemainingMovementPointsHero),a3496 xor a3497 ld (putstar+sPage),a3498 3499 .loop:3500 ld b,(hl) 3501 ld a,(ystar)3502 add a,b3503 ld (ystar),a3504 inc hl3505 ld c,(hl) 3506 ld a,(xstar)3507 add a,c3508 ld (xstar),a3510 ld a,c3511 or b3512 ret z3514 call FindArrowDirection3515 ld (putstar+sx),a3516 3518 ld a,(RemainingMovementPointsHero)3519 dec a3520 ld (RemainingMovementPointsHero),a3521 jr nz,.EndCheckOutOfMovementPoints3522 ld a,13523 ld (putstar+sPage),a3524 .EndCheckOutOfMovementPoints:3526 push hl3527 call doputstar3528 pop hl3529 inc hl3530 jp .loop3532doputstar:3533 ld a,(activepage) 3534 or a3535 ld hl,mappage13536 jp z,.mirrorpageset3537 ld hl,mappage03538.mirrorpageset:3540 ld a,(mappointerx)3541 ld b,a3542 ld a,(xstar) 3543 sub a,b3544 ret c 3545 cp TilesPerRow3546 ret nc 3548 ld d,03549 ld e,a 3550 3551 add a,a 3552 add a,a 3553 add a,a 3554 add a,a 3557 add a,buildupscreenXoffset+3 3558 3559 ld (putstar+dx),a3561 ld a,(mappointery)3562 ld b,a3563 ld a,(ystar) 3564 sub a,b3565 ret c 3566 cp TilesPerColumn3567 ret nc 3568 ld b,a 3569 add a,a 3570 add a,a 3571 add a,a 3572 add a,a 3575 add a,buildupscreenYoffset+4 3577 ld (putstar+dy),a35793582 add hl,de3583 3584 3585 3588 push hl3589 ld de,TilesPerRow3590 ld h,03591 ld l,b3592 call MultiplyHlWithDE 3593 pop de3594 add hl,de35973607 ld a,(hl)3608 ld (hl),255360936113612 cp amountoftransparantpieces3613 jp c,.behindtree3614 cp 2543615 jp nc,.behindheroorcastle3617 ld a,2223618 ld (putstar+sy),a3619 ld hl,putstar3620 jp docopy3621.behindtree:3622.behindheroorcastle:3623 ld a,2463624 ld (putstar+sy),a3625 ld hl,putstar3626 jp docopy36273629putstar:3630 db 0,0,212,03631 db 255,0,255,03632 db 10,0,10,03633 db 0,%0000 0000,$98 3635FindArrowDirection:3636 3637 bit 7,c3638 jp nz,.ArrowLeft3639 bit 0,c3640 jp nz,.ArrowRight3641 bit 7,b3642 jp nz,.ArrowUpConfirmed3644 .ArrowDownConfirmed:3645 call .CheckNextStep 3646 bit 7,c3647 ld a,13*10 + 86 3648 ret nz3649 bit 0,c3650 ld a,12*10 + 86 3651 ret nz3652 ld a,5*10 + 863653 ret3655 .ArrowUpConfirmed:3656 call .CheckNextStep 3657 bit 7,c3658 ld a,15*10 + 86 3659 ret nz3660 bit 0,c3661 ld a,10*10 + 86 3662 ret nz3663 ld a,1*10 + 863664 ret3666 .ArrowRight:3667 bit 7,b3668 jp nz,.ArrowRightUpConfirmed3669 bit 0,b3670 jp z,.ArrowRightConfirmed3672 .ArrowRightDownConfirmed:3673 call .CheckNextStep 3674 ld a,c3675 or b3676 ld a,4*10 + 863677 ret z3678 bit 0,b3679 ld a,03*10 + 86 3680 ret z3681 bit 0,c3682 ld a,05*10 + 86 3683 ret z3684 ld a,4*10 + 863685 ret3687 .ArrowRightUpConfirmed:3688 call .CheckNextStep 3689 ld a,c3690 or b3691 ld a,2*10 + 863692 ret z3693 bit 7,b3694 ld a,03*10 + 86 3695 ret z3696 bit 0,c3697 ld a,01*10 + 86 3698 ret z3699 ld a,2*10 + 863700 ret3701 3702 .ArrowRightConfirmed:3703 call .CheckNextStep 3704 bit 7,b3705 ld a,09*10 + 86 3706 ret nz3707 bit 0,b3708 ld a,11*10 + 86 3709 ret nz3710 ld a,3*10 + 863711 ret3713 .ArrowLeft:3714 bit 7,b3715 jp nz,.ArrowLeftUpConfirmed3716 bit 0,b3717 jp z,.ArrowLeftConfirmed3719 .ArrowLeftDownConfirmed:3720 call .CheckNextStep 3721 ld a,c3722 or b3723 ld a,6*10 + 863724 ret z3725 bit 0,b3726 ld a,07*10 + 86 3727 ret z3728 bit 7,c3729 ld a,05*10 + 86 3730 ret z3731 ld a,6*10 + 863732 ret3734 .ArrowLeftUpConfirmed:3735 call .CheckNextStep 3736 ld a,c3737 or b3738 ld a,8*10 + 863739 ret z3740 bit 7,b3741 ld a,07*10 + 86 3742 ret z3743 bit 7,c3744 ld a,01*10 + 86 3745 ret z3746 ld a,8*10 + 863747 ret3749 .ArrowLeftConfirmed:3750 call .CheckNextStep 3751 bit 7,b3752 ld a,16*10 + 86 3753 ret nz3754 bit 0,b3755 ld a,14*10 + 86 3756 ret nz3757 ld a,7*10 + 863758 ret3760 .CheckNextStep:3761 inc hl3762 ld b,(hl) 3763 inc hl3764 ld c,(hl) 3765 dec hl3766 dec hl3767 ret3769EnterCastle?: db 03770CheckEnterHeroCastle:3771 ld hl,(CurrentCursorSpriteCharacter)3772 ld de,CursorEnterCastle3773 call CompareHLwithDE3774 ret nz 3776 ld a,13777 ld (EnterCastle?),a3778 pop af 3779 ret3781SetHeroOverViewMenu?: db 03782CheckEnterHeroOverviewMenu: 3783 ld hl,(CurrentCursorSpriteCharacter)3784 ld de,CursorHand3785 call CompareHLwithDE3786 ret nz 3788 ld ix,(plxcurrentheroAddress)3789 ld a,(ix+HeroStatus)3790 cp 2553791 ret z 3793 ld a,13794 ld (SetHeroOverViewMenu?),a3795 pop af 3796 ret3798GoCheckEnterHeroOverviewMenu:3799 ld a,(SetHeroOverViewMenu?)3800 dec a3801 ret m3802 ld (SetHeroOverViewMenu?),a3803 jp nz,DisableScrollScreen 3804 jp EnterHeroOverviewMenu 380638113817checktriggermapscreen:3818 ld a,(GameStatus) 3819 or a3820 ret nz38223826 ld a,(spat+1) 3827 cp SX_Hud 3828 ret nc 38303835 ld a,(NewPrControlsOnInterrupt)3836 bit 4,a 3837 ret z3839 call checkcurrentplayerhuman 3840 ret z 3842 ld a,(movehero?)3843 or a3844 jr z,.EndCheckStopHeroMovement 3845 xor a3846 ld (movehero?),a 3847 ret3848 .EndCheckStopHeroMovement:3850 call CheckEnterHeroOverviewMenu3851 call CheckEnterHeroCastle3853 .initputstars: 3854 ld ix,(plxcurrentheroAddress)3855 ld a,(ix+HeroStatus) 3856 or a3857 ret m 3859 ld a,13860 ld (putmovementstars?),a3862 3863 ld a,(mouseclickx) 3864 ld d,a3865 ld a,(mouseclicky) 3866 ld e,a3868 3869 ld a,(spat+1) 3872 sub a,63874 and %1111 00003875 srl a 3876 srl a 3877 srl a 3878 srl a 3879 ld b,a 3880 ld a,(mappointerx)3881 add a,b3882 ld (mouseclickx),a 3883 ld c,a3885 ld a,(spat) 3886 sub a,18 3887 jp nc,.notcarry23888 xor a3889 .notcarry2:3890 and %1111 00003891 srl a 3892 srl a 3893 srl a 3894 srl a 3895 ld b,a 3896 ld a,(mappointery)3897 add a,b3898 ld (mouseclicky),a 3899 3900 3901 cp e3902 jp nz,CheckNormalRouteShortestPath3903 ld a,c3904 cp d3905 jp nz,CheckNormalRouteShortestPath3907 3908 xor a3909 ld (putmovementstars?),a3910 ld (movementpathpointer),a3911 ld (mouseclickx),a 3912 ld (mouseclicky),a 3913 ld a,13914 ld (movehero?),a3915 ret 3917CheckNormalRoute:3918 ld a,(ix+HeroY) 3919 ld (movementpath+0),a 3920 ld (heroymirror),a3921 ld a,(ix+HeroX) 3922 ld (movementpath+1),a 3923 ld (heroxmirror),a3925 ld hl,movementpath+2 3927 .loop:39283929 call GetTileNrAtHeroMirrorYX3930 cp 163931 jr c,.noobstacle3932 cp 243933 jr c,.obstacle3934 cp UnwalkableTerrainPieces 3935 jr c,.noobstacle3936.obstacle:3937 dec hl3938 dec hl3939 ld c,03940 ld d,03941 jr .EndSetVerticalMovement3943.noobstacle:39443945 3946 ld a,(mouseclickx)3947 ld e,a3948 ld a,(heroxmirror)3949 cp e3950 ld c,0 3951 jp z,.EndSetHorizontalMovement3952 ld c,1 3953 jp c,.EndSetHorizontalMovement3954 ld c,-1 3955 .EndSetHorizontalMovement:3957 ld a,(mouseclicky)3958 ld e,a3959 ld a,(heroymirror)3960 cp e3961 ld d,0 3962 jp z,.EndSetVerticalMovement3963 ld d,1 3964 jp c,.EndSetVerticalMovement3965 ld d,-1 3966 .EndSetVerticalMovement:3968 ld (hl),d 3969 inc hl3970 ld (hl),c 3971 inc hl3973 ld a,c3974 or d3975 ret z39773981 ld a,(heroxmirror)3982 add a,c3983 ld (heroxmirror),a3984 ld a,(heroymirror)3985 add a,d3986 ld (heroymirror),a3987 jp .loop3989InvertReverseRoute:3990 ld a,(ix+HeroY) 3991 ld (movementpath+0),a 3992 ld a,(ix+HeroX) 3993 ld (movementpath+1),a 3995 ld de,movementpath+2 3997 dec hl 3998 dec hl 3999 dec hl 4000 dec hl 4002 call .loop4003 dec de4004 dec de4005 xor a4006 ld (de),a 4007 inc de 4008 ld (de),a 4009 ret4011 .loop:4012 ld a,(hl) 4013 cp 1284014 ret z4015 neg4016 ld (de),a 4017 4018 inc hl 4019 inc de 4021 ld a,(hl) 4022 neg4023 ld (de),a 4025 dec hl 4026 dec hl 4027 dec hl 4028 inc de 4029 jr .loop4031CheckReverseRoute:4032 ld a,(mouseclicky)4033 ld (movementpathReverse+0),a 4034 ld (heroymirror),a4035 ld a,(mouseclickx)4036 ld (movementpathReverse+1),a 4037 ld (heroxmirror),a4038 ld hl,movementpathReverse+2 4040 .loop:40414042 call GetTileNrAtHeroMirrorYX4043 cp 164044 jr c,.noobstacle4045 cp 244046 jp c,CheckNormalRoute4047 cp UnwalkableTerrainPieces 4048 jp nc,CheckNormalRoute4049 .noobstacle:40504051 4052 ld a,(ix+HeroX) 4053 ld e,a4054 ld a,(heroxmirror)4055 cp e4056 ld c,0 4057 jp z,.EndSetHorizontalMovement4058 ld c,1 4059 jp c,.EndSetHorizontalMovement4060 ld c,-1 4061 .EndSetHorizontalMovement:4063 ld a,(ix+HeroY) 4064 ld e,a4065 ld a,(heroymirror)4066 cp e4067 ld d,0 4068 jp z,.EndSetVerticalMovement4069 ld d,1 4070 jp c,.EndSetVerticalMovement4071 ld d,-1 4072 .EndSetVerticalMovement:4074 ld (hl),d 4075 inc hl4076 ld (hl),c 4077 inc hl4079 ld a,c4080 or d4081 jp z,InvertReverseRoute4083 ld a,(heroxmirror)4084 add a,c4085 ld (heroxmirror),a4086 ld a,(heroymirror)4087 add a,d4088 ld (heroymirror),a4089 jp .loop4091GetTileNrAtHeroMirrorYX:4092 push hl4093 4095 ld a,(heroymirror)4096 inc a4097 ld l,a4098 ld h,04099 ld de,(maplenght)4100 call MultiplyHlWithDE 4101 ld de,mapdata4102 add hl,de4103 4105 ld a,(heroxmirror)4106 ld e,a4107 ld d,04108 add hl,de4109 4111 ld a,(hl) 4112 pop hl4113 ret41154122puttopcastles:4123 ld hl,Castle14124 call .doputcastletop4125 ld hl,Castle24126 call .doputcastletop4127 ld hl,Castle34128 call .doputcastletop4129 ld hl,Castle441304132.doputcastletop:4133 xor a4134 ld (putcastle+sx),a4135 ld a,(hl) 4136 or a4137 ret z 4138 sub a,34139 ld (TempVariableCastleY),a4140 inc hl4141 ld a,(hl) 4142 inc a4143 ld (TempVariableCastleX),a4144 call putbottomcastles.puttwopieces4146 ld a,(putcastle+sx)4147 add a,164148 ld (putcastle+sx),a4149 ld a,(TempVariableCastleY)4150 inc a4151 ld (TempVariableCastleY),a4152 ld a,(TempVariableCastleX)4153 sub a,24154 ld (TempVariableCastleX),a4155 call putbottomcastles.putthreepieces4156ret4157 ld a,(putcastle+sx)4158 add a,164159 ld (putcastle+sx),a4160 ld a,(TempVariableCastleY)4161 inc a4162 ld (TempVariableCastleY),a4163 ld a,(TempVariableCastleX)4164 sub a,24165 ld (TempVariableCastleX),a4166 call putbottomcastles.PutOnePiece4167 ld a,(putcastle+sx)4168 add a,164169 ld (putcastle+sx),a4170 ld a,(TempVariableCastleX)4171 add a,24172 ld (TempVariableCastleX),a4173 call putbottomcastles.PutOnePiece4174 ret4176putbottomcastles:4177 ld hl,Castle14178 call .doputcastle4179 ld hl,Castle24180 call .doputcastle4181 ld hl,Castle34182 call .doputcastle4183 ld hl,Castle441844186.doputcastle:4187 ld a,(hl) 4188 or a4189 ret z 4190 dec a4191 ld (TempVariableCastleY),a4192 inc hl4193 ld a,(hl) 4194 ld (TempVariableCastleX),a4196 ld a,0804197 ld (putcastle+sx),a4198 call .PutOnePiece4199 4200 ld a,(TempVariableCastleX)4201 add a,24202 ld (TempVariableCastleX),a4203 ld a,0964204 ld (putcastle+sx),a4205 call .PutOnePiece4206 4207 ld a,(TempVariableCastleX)4208 sub a,24209 ld (TempVariableCastleX),a4210 4211 ld a,1124212 ld (putcastle+sx),a4213 ld a,(TempVariableCastleY)4214 inc a4215 ld (TempVariableCastleY),a4217.putthreepieces:4218 call .PutOnePiece4219 ld a,(putcastle+sx)4220 add a,164221 ld (putcastle+sx),a4222 ld a,(TempVariableCastleX)4223 inc a4224 ld (TempVariableCastleX),a4225.puttwopieces:4226 call .PutOnePiece4227 ld a,(putcastle+sx)4228 add a,164229 ld (putcastle+sx),a4230 ld a,(TempVariableCastleX)4231 inc a4232 ld (TempVariableCastleX),a4233.PutOnePiece:4234 ld a,(activepage) 4235 or a4236 ld hl,mappage14237 jp z,.mirrorpageset4238 ld hl,mappage04239.mirrorpageset:4241 ld a,(mappointerx)4242 ld b,a4243 ld a,(TempVariableCastleX)4244 sub a,b4245 ret c4246 cp TilesPerRow4247 ret nc4249 ld d,04250 ld e,a 4251 4252 add a,a 4253 add a,a 4254 add a,a 4255 add a,a 4257 add a,buildupscreenXoffset 4259 ld (putcastle+dx),a4261 ld a,(mappointery)4262 ld b,a4263 ld a,(TempVariableCastleY) 4264 sub a,b4265 ret c 4266 cp TilesPerColumn4267 ret nc 4269 ld b,a 4270 add a,a 4271 add a,a 4272 add a,a 4273 add a,a 4275 add a,buildupscreenYoffset 4277 ld (putcastle+dy),a42794282 add hl,de4283 4284 4285 4287 push hl4288 ld de,TilesPerRow4289 ld h,04290 ld l,b4291 call MultiplyHlWithDE 4292 pop de4293 add hl,de429643014307 ld (hl),25543084310 ld hl,putcastle4311 jp docopy4313putbottomheroes:4314 ld hl,doputheros.WaterTileFoundBottomHero4315 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4317 ld a,(activepage) 4318 or a4319 ld hl,mappage14320 jr z,.mirrorpageset4321 ld hl,mappage04322.mirrorpageset:4323 ld (doputheros.SelfModifyingCodeSetPointerInMapToHero),hl4325 ld a,164326 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4327 ld a,14328 ld (doputheros.SelfModifyingCodeAddYToHero),a4329 jp doputheros4331puttopheroes:4332 ld hl,doputheros.WaterTileFoundTopHero4333 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4334 4335 xor a4336 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4337 ld (doputheros.SelfModifyingCodeAddYToHero),a4339doputheros: 4340 ld hl,256*00 + 000 | ld ix,pl1hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4341 ld hl,256*00 + 016 | ld ix,pl1hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4342 ld hl,256*00 + 032 | ld ix,pl1hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4343 ld hl,256*00 + 048 | ld ix,pl1hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4344 ld hl,256*00 + 064 | ld ix,pl1hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4345 ld hl,256*00 + 080 | ld ix,pl1hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4346 ld hl,256*00 + 096 | ld ix,pl1hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4347 ld hl,256*00 + 112 | ld ix,pl1hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4349 ld hl,256*00 + 128 | ld ix,pl2hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4350 ld hl,256*00 + 144 | ld ix,pl2hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4351 ld hl,256*00 + 160 | ld ix,pl2hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4352 ld hl,256*00 + 176 | ld ix,pl2hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4353 ld hl,256*00 + 192 | ld ix,pl2hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4354 ld hl,256*00 + 208 | ld ix,pl2hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4355 ld hl,256*00 + 224 | ld ix,pl2hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4356 ld hl,256*00 + 240 | ld ix,pl2hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4358 ld hl,256*32 + 000 | ld ix,pl3hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4359 ld hl,256*32 + 016 | ld ix,pl3hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4360 ld hl,256*32 + 032 | ld ix,pl3hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4361 ld hl,256*32 + 048 | ld ix,pl3hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4362 ld hl,256*32 + 064 | ld ix,pl3hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4363 ld hl,256*32 + 080 | ld ix,pl3hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4364 ld hl,256*32 + 096 | ld ix,pl3hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4365 ld hl,256*32 + 112 | ld ix,pl3hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4367 ld hl,256*32 + 128 | ld ix,pl4hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4368 ld hl,256*32 + 144 | ld ix,pl4hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4369 ld hl,256*32 + 160 | ld ix,pl4hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4370 ld hl,256*32 + 176 | ld ix,pl4hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4371 ld hl,256*32 + 192 | ld ix,pl4hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4372 ld hl,256*32 + 208 | ld ix,pl4hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4373 ld hl,256*32 + 224 | ld ix,pl4hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4374 ld hl,256*32 + 240 | ld ix,pl4hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4375 ret43764385.doputhero:4386 ld a,(mappointery) 4387 ld b,a4388 ld a,(ix+HeroY) 4389 .SelfModifyingCodeAddYToHero: equ $+14390 add a,0004391 sub a,b4392 ret c 4393 cp TilesPerColumn4394 ret nc 4395 ld c,a 4397 ld a,(mappointerx) 4398 ld b,a4399 ld a,(ix+HeroX) 4400 sub a,b4401 ret c 4402 cp TilesPerRow4403 ret nc 4405 ld d,04406 ld e,a 4407 4408 add a,a 4409 add a,a 4410 add a,a 4411 add a,a 4412 add a,buildupscreenXoffset 4413 ld (putherotopbottom+dx),a 4415 ld a,c 4416 add a,a 4417 add a,a 4418 add a,a 4419 add a,a 4420 add a,buildupscreenYoffset 4421 ld (putherotopbottom+dy),a 4423 ld a,l 4424 ld (putherotopbottom+sx),a 4426 ld a,h 4427 .SelfModifyingCodeAddYToSYHero: equ $+14428 add a,0004429 ld (putherotopbottom+sy),a 4430 4431 .SelfModifyingCodeSetPointerInMapToHero: equ $+14432 ld hl,00004433 add hl,de 4434 4436 push hl4437 ld de,TilesPerRow4438 ld h,04439 ld l,c4440 call MultiplyHlWithDE 4441 pop de4442 add hl,de4443 4444 4446 44474457 ld a,(hl) 4458 cp 254 4459 call z,.behindheroandtree 4460 ld (hl),255 4461 cp amountoftransparantpieces 4462 jp nc,.notbehindtree 4463 ld (hl),254 4464 cp non_see_throughpieces 4465 ret c 4467.FirstWaterpiece: equ 584468 cp .FirstWaterpiece 4469 .SelfmodifyingCodeWaterTileJumpAddress: equ $+14470 jp nc,$ffff4472 4473 ld d,a 4474 ld hl,putherotopbottom4475 call docopy 44774482 4483 ld a,d 4484 add a,a 4485 ld e,a4486 ld d,04487 ld hl,mirrortransparentpieces-324488 add hl,de 4489 .WaterTileEntry:4490 ld a,(hl)4491 ld (putbackgroundoverhero+sy),a4492 inc hl 4493 ld a,(hl)4494 ld (putbackgroundoverhero+sx),a4495 4496 ld a,(putherotopbottom+dy)4497 ld (putbackgroundoverhero+dy),a4498 ld a,(putherotopbottom+dx)4499 ld (putbackgroundoverhero+dx),a4500 ld hl,putbackgroundoverhero4501 jp docopy 4503 .WaterTileFoundTopHero:4504 4505 ld hl,putherotopbottom4506 jp docopy 4508 .WaterTileFoundBottomHero:4509 ld hl,putherotopbottom4510 call docopy 4511 ld hl,.WaterTile4512 jr .WaterTileEntry4514 .WaterTile: db 080,2404516 .notbehindtree:4517 ld hl,putherotopbottom4518 jp docopy 4520 .behindheroandtree: 4522 push hl4523 ld a,(putherotopbottom+dx)4525 sub a,buildupscreenXoffset 4527 srl a 4528 srl a 4529 srl a 4530 srl a 4531 ld b,a 4537 ld a,(putherotopbottom+dy)4539 sub a,buildupscreenYoffset 4541 srl a 4542 srl a 4543 srl a 4544 srl a 4545 ld c,a 45474549 ld hl,mapdata4550 ld de,(mappointerx)4551 ld a,e4552 add a,b4553 ld e,a4554 add hl,de4555 4556 4557 4558 ld a,(mappointery)4559 add a,c45614562 push hl4563 ld de,(maplenght)4564 ld h,04565 ld l,a4566 call MultiplyHlWithDE 4567 pop de4568 add hl,de456945734582 ld a,(hl) 4584 pop hl4585 ret4587SetHero1ForCurrentPlayerInIX: 4588 ld a,(whichplayernowplaying?)4589 dec a4590 ld ix,pl1hero1y4591 ret z4592 dec a4593 ld ix,pl2hero1y4594 ret z4595 dec a4596 ld ix,pl3hero1y4597 ret z4598 ld ix,pl4hero1y4599 ret4601SetHeroUsingHeroWindowPointer: 4602 ld de,lenghtherotable4604 ld a,(herowindowpointer)4605 or a4606 ret z4607 ld b,a4608 .loop:4609 add ix,de4610 djnz .loop 4611 ret4613FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime:4614 ld a,(ix+HeroStatus) 4615 cp 2544616 ret nz4617 ld de,-lenghtherotable4618 add ix,de4619 ld a,(herowindowpointer)4620 sub a,14621 jp c,CheckHeroArrowDown4622 ld (herowindowpointer),a4623 jp FindHeroThatIsNotInCastle 4625FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime:4626 ld a,(ix+HeroStatus) 4627 cp 2544628 ret nz4629 ld de,lenghtherotable4630 add ix,de4631 ld a,(herowindowpointer)4632 add a,14633 cp 84634 ret nc4635 ld (herowindowpointer),a4636 jp FindHeroThatIsNotInCastle4637 4638FindHeroThatIsNotInCastle:4639 ld a,(ix+HeroStatus) 4640 cp 2544641 ret nz4642 add ix,de4643 jp FindHeroThatIsNotInCastle 4645SetHeroForWindow1DeterminedByHeroWindowPointerInIX:4646 call SetHeroUsingHeroWindowPointer 4647 jp FindHeroThatIsNotInCastle4648 4649SetHeroForWindow2DeterminedByHeroWindowPointerInIX:4650 call SetHeroUsingHeroWindowPointer 4651 call FindHeroThatIsNotInCastle4652 add ix,de4653 jp FindHeroThatIsNotInCastle4655SetHeroForWindow3DeterminedByHeroWindowPointerInIX:4656 call SetHeroUsingHeroWindowPointer 4657 call FindHeroThatIsNotInCastle4658 add ix,de4659 call FindHeroThatIsNotInCastle4660 add ix,de4661 jp FindHeroThatIsNotInCastle4663ChangeManaAndMovement?: db 34664herowindowpointer: db 0 4665SetHeroesInWindows?: db 3 4666CastleWindowPointer: db 0 4667SetCastlesInWindows?: db 34669checkcurrentplayerhuman: 4671 ld a,(whichplayernowplaying?)4672 ld hl,player1human?4673 ld b,44674.loop:4675 dec a4676 jp z,.playerfound4677 inc hl4678 djnz .loop4679.playerfound:4680 or (hl) 4686 ret46874689MOUSIDBuffer: ds 1 4690MSEPRTBuffer: ds 1 4692MOUSID: ds 1 4693MSEPRT: ds 1 46954696MovePointer: 4697 ld a,(GameStatus) 4698 cp 44699 jr z,.EndCheckFreezePointer4700 call checkcurrentplayerhuman 4701 ret z4702 .EndCheckFreezePointer:4704 ld a,(MOUSID)4705 or a4706 jp z,ReadOutKeyboardAndMovePointer4707 470847134719RDPADL:4720 LD DE,(MSEPRT)4721 LD A,15 4722 CALL RD_PSG4723 AND %1000 1111 4724 OR E 4725 LD E,A47274728 ld a,(GameStatus) 4729 cp 24730 ld h,240 4731 ld l,000 4732 jr nc,.XBorderSet4733 ld h,xcoorspriteright 4734 ld l,xcoordinateStartPlayfield 4735 .XBorderSet:47374738 LD B,40 4739 LD C,20 4740 CALL RPDL.24741 CALL RPDL.04742 LD c,A 47444745 jp m,.MoveLeft47464747 .MoveRight:4748 ld a,(spat+1)4749 add a,c4750 jr c,.SetRightBorder4751 cp h 4752 jr c,.SetxRight4753 .SetRightBorder:4754 ld a,h 4755 .SetxRight:4756 ld (spat+1),a4757 ld (spat+5),a4758 ld (spat+9),a4759 jp .EndMoveLeft 476047624763 .MoveLeft:4764 ld a,(spat+1)4765 add a,c4766 jr nc,.SetLeftBorder4767 cp l4768 jr nc,.SetXLeft 4769 .SetLeftBorder:4770 ld a,l 4771 .SetXLeft:4772 ld (spat+1),a4773 ld (spat+5),a4774 ld (spat+9),a4775 .EndMoveLeft:477647784779 ld a,(GameStatus) 4780 cp 34781 ld h,016 4782 ld l,218 4783 jr z,.YBorderSet4785 cp 24786 ld h,000 4787 ld l,1964788 jr nc,.YBorderSet4790 ld h,ycoordinateStartPlayfield4791 ld l,ycoorspritebottom4792 .YBorderSet:47944795 LD B,40 4796 LD C,20 4797 CALL RPDL.14798 CALL RPDL.04799 LD c,A 48014802 jp m,.MoveUp48034804 .MoveDown:4805 ld a,(spat+0)4806 add a,c4807 jr c,.SetDownBorder4808 cp l4809 jr c,.SetYDown4810 .SetDownBorder:4811 ld a,l 4812 .SetYDown:4813 cp 2164814 jr z,.Y216Found4815 ld (spat+0),a4816 ld (spat+4),a4817 ld (spat+8),a4818 jp .EndMoveUp 481948214822 .MoveUp:4823 ld a,(spat+0)4824 add a,c4825 jr nc,.SetUpBorder4826 cp h4827 jr nc,.SetYUp 4828 .SetUpBorder:4829 ld a,h 4830 .SetYUp:4832 cp 2164833 jp nz,.EndCheck2164834 .Y216Found:4835 ld a,2154836 .EndCheck216:4838 ld (spat+0),a4839 ld (spat+4),a4840 ld (spat+8),a4841 .EndMoveUp:48424844 EI 4845 RET 4846 4847RPDL.0: RLCA 4848 RLCA 4849 RLCA 4850 RLCA 4851 LD D,A4852 CALL RPDL.14853 OR D4854 NEG 4855 RET 4856 4857RPDL.1: LD B,74858 LD C,64859RPDL.2: LD A,154860 CALL WR_PSG4861 LD A,(MSEPRT)4862 AND $304863 XOR E4864 LD E,A4865DLYCAL: CALL DLY_M24866 LD A,144867 CALL RD_PSG4868 AND $0F4869 RET 4870 48714873DLY_M2: DJNZ DLY_M24874 RET 48754883 4884RD_PSG: DI 4885 OUT ($A0),A4886 NOP 4887 NOP 4888 IN A,($A2)4889 EI 4890 RET 4891WR_PSG: DI 4892 OUT ($A0),A4893 LD A,E4894 OUT ($A1),A4895 EI 4896 RET 4914movecursory: 4915 ex af,af'4916 ld a,(GameStatus) 4918 ld e,016 4919 cp 34920 ld d,212-16 + 6 +16 4921 jr z,.XBorderSet4923 ld e,0004924 cp 24925 ld d,212-164926 jr nc,.XBorderSet4927 ld d,ycoorspritebottom4928 ld e,ycoordinateStartPlayfield4929 .XBorderSet:4930 ex af,af'4933 ld hl,spat+0 4934 or a 4935 jp m,.up4936 .down:4937 add a,(hl)4938 jp c,.outofscreenbottom4939 cp d4940 jp c,.sety4941 .outofscreenbottom:4942 ld a,d4943 jp .sety4944 .up:4945 add a,(hl)4947 ret nc4949 cp e 4951 jp nc,.sety4952 ld a,e4953 .sety:4954 ld (hl),a4955 ret4957movecursorx:4958 ex af,af'4959 ld a,(GameStatus) 4960 cp 24961 ld d,256-164962 ld e,0004963 jr nc,.XBorderSet4964 ld d,xcoorspriteright4965 ld e,xcoordinateStartPlayfield4966 .XBorderSet:4967 ex af,af'4968 4969 ld hl,spat+1 4970 or a 4971 jp m,.left4972 .right:4973 add a,(hl)4974 jp c,.outofscreenright4975 cp d 4976 jp c,.setx4977 .outofscreenright:4978 ld a,d 4979 jp .setx4980 .left:4981 add a,(hl)4982 ret nc4983 4984 cp e 4986 jp nc,.setx4987 ld a,e 4988 .setx:4989 ld (hl),a4990 ret4992PopulateKeyMatrix:4993 in a,($aa)4994 and %111100004995 ld d,a4996 ld c,$a94997 ld b,114998 ld hl,keys + 114999.Loop: ld a,d5000 or b5001 out ($aa),a5002 ind5003 jp nz,.Loop5004 ld a,d5005 out ($aa),a5006 ind5007 ret5008 50095011keys: equ $fbe55012ReadOutKeyboardAndMovePointer:50135018 ld a,(ControlsOnInterrupt)5019 ld bc,0 50215022.right:5023 bit 3,a 5024 jp z,.down5025 inc b5026.down:5027 bit 1,a 5028 jp z,.up5029 inc c5030.up:5031 bit 0,a 5032 jp z,.left5033 dec c5034.left:5035 bit 2,a 5036 jp z,.end5037 dec b5038.end:5040 ld a,(keys+6)5041 bit 0,a 5042 jp nz,.endcheckshift5043 ld a,b5044 add a,a5045 ld b,a5046 ld a,c5047 add a,a5048 ld c,a5049.endcheckshift:5051 ld a,b5052 add a,a5053 call movecursorx 5054 ld a,c5055 add a,a5056 call movecursory 5058 ld a,(spat+0)5059 cp 2165060 jp nz,.EndCheck216 5061 ld a,2155062 ld (spat+0),a5063 .EndCheck216:5064 ld (spat+4),a5065 ld (spat+8),a5066 ld a,(spat+1)5067 ld (spat+5),a5068 ld (spat+9),a5069 ret5071ycoordinateStartPlayfield: equ 045072xcoordinateStartPlayfield: equ 065073ycoorspritebottom: equ 1805074xcoorspriteright: equ 2395076GameStatus: db 0 5077SX_Hud: equ 196 5078spritecharacter: db 255 5079setspritecharacter: 5080 ld a,(GameStatus) 5081 or a5082 jr z,.Ingame5083 dec a5084 jr z,.HeroOverview5085 dec a5086 jr z,.CastleOverview5087 dec a5088 jr z,.Battle5090 .Battle:5091 ld a,(slot.page12rom) 5092 out ($a8),a5093 ld a,BattleCodeBlock5094 ld ($6000),a 5095 ld a,BattleCodePage2Block5096 ld ($7000),a 5098 ld a,(ShowExplosionSprite?) 5099 or a5100 call nz,HandleExplosionSprite5101 ld a,(ShootProjectile?)5102 or a5103 call nz,HandleProjectileSprite5105 5106 ld a,(LeftOrRightPlayerLostEntireArmy?)5107 or a5108 jr z,.SelfModifyingCodeSpriteCharacterBattle-15109 ld hl,CursorHand5110 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl5111 ld hl,SpriteColCursorSprites5112 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5113 5114 .SelfModifyingCodeSpriteCharacterBattle: Equ $+15115 ld hl,CursorHand5116 jp .setcharacter5118 .CastleOverview:5119 ld hl,SpriteColPoiterInCastleSprite5120 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5121 ld hl,CursorPointerIncastle5122 jp .setcharacter5124 .HeroOverview:5125 ld hl,CursorHand5126 jp .setcharacter5128 .Ingame:5129 ld hl,SpriteColCursorSprites5130 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5131 ld a,(LockMiniMapOn?)5132 or a5133 ld hl,CursorHand5134 jp nz,.setcharacter51355140 ld a,(ControlsOnInterrupt)5141 bit 2,a 5142 jr z,.EndCheckShowScrollArrowLeft5143 ld a,(spat+1) 5144 cp xcoordinateStartPlayfield5145 jp z,.ShowScrollArrowLeft 5146 .EndCheckShowScrollArrowLeft:51485153 ld a,(ControlsOnInterrupt)5154 bit 3,a 5155 jr z,.EndCheckShowScrollArrowRight5156 ld a,(spat+1) 5157 cp xcoorspriteright5158 jp z,.ShowScrollArrowRight 5159 .EndCheckShowScrollArrowRight:51615166 ld a,(ControlsOnInterrupt)5167 bit 0,a 5168 jr z,.EndCheckShowScrollArrowTop5169 ld a,(spat) 5170 cp ycoordinateStartPlayfield51725173 jp z,.ShowScrollArrowTop 5174 .EndCheckShowScrollArrowTop:51765181 ld a,(ControlsOnInterrupt)5182 bit 1,a 5183 jr z,.EndCheckShowScrollArrowBottom5184 ld a,(spat) 5185 cp ycoorspritebottom 5186 jp z,.ShowScrollArrowBottom 5187 .EndCheckShowScrollArrowBottom:51895193 ld a,(spat+1) 5194 cp SX_Hud 5195 jp nc,.MousepointInHud 519852015202 ld a,(spat+1) 5203 add a,addxtomouseDiagonalPointer 5204 and %1111 00005205 srl a 5206 srl a 5207 srl a 5208 srl a 5209 ld l,a5210 ld a,(mappointerx)5211 add a,l5212 ld l,a5213 ld (mouseposx),a5215 ld a,(spat) 5217 add a,addytomouseDiagonalPointer 5219 jp c,.notcarry25220 xor a5221.notcarry2:5222 and %1111 00005223 srl a 5224 srl a 5225 srl a 5226 srl a 5227 ld h,a5228 ld a,(mappointery)5229 add a,h5230 ld h,a5231 ld (mouseposy),a52325234 ld de,lenghtherotable5235 ld a,(whichplayernowplaying?) | cp 1 | ld ix,pl1hero1y | call .checkpointeronhero 5236 ld a,(whichplayernowplaying?) | cp 2 | ld ix,pl2hero1y | call .checkpointeronhero 5237 ld a,(whichplayernowplaying?) | cp 3 | ld ix,pl3hero1y | call .checkpointeronhero 5238 ld a,(whichplayernowplaying?) | cp 4 | ld ix,pl4hero1y | call .checkpointeronhero 5239 .EndCheckPointerOnHero:5241 call .CheckPointerOnCastle 5242 call .checkpointeroncreature 5244 ld ix,(plxcurrentheroAddress)5245 ld a,(ix+HeroStatus)5246 cp 2555247 ld hl,CursorHand5248 jp z,.setcharacter 5250 call .checkpointeritem 5251 jp .shoe 5254 .CheckPointerOnCastle:5255 call .SetMappositionMousePointsTo 5257 ld a,(hl) 5258 cp 2545259 jr z,.PointerOnCentreOfCastle5261 sbc hl,de5262 ld a,(hl) 5263 cp 2545264 ret nz5266 .PointerOnEntranceOfCastle: 5267 call .SetCastleEntranceMousePointsToInIX5268 call .CheckFriendlyCastle5269 jr z,.FriendlyCastleShowCursorWalkingBoots5271 .EnemyCastle:5272 pop af 5274 ld ix,(plxcurrentheroAddress)5275 ld a,(ix+HeroStatus)5276 cp 2555277 ld hl,CursorHand5278 jp z,.setcharacter 5280 ld hl,CursorSwords5281 jp .setcharacter5283 .FriendlyCastleShowCursorWalkingBoots:5284 pop af 5286 ld ix,(plxcurrentheroAddress)5287 ld a,(ix+HeroStatus)5288 cp 2555289 ld hl,CursorHand5290 jp z,.setcharacter 5292 ld hl,CursorWalkingBoots5293 jp .setcharacter5294 5295 .PointerOnCentreOfCastle: 5296 call .SetCastleCentreMousePointsToInIX5297 call .CheckFriendlyCastle5298 ret nz 5300 .FriendlyCastle:5301 ld (WhichCastleIsPointerPointingAt?),ix5302 pop af 5303 ld hl,CursorEnterCastle5304 jp .setcharacter5306 .CheckFriendlyCastle:5307 ld a,(whichplayernowplaying?)5308 cp (ix+CastlePlayer)5309 ret5311 .SetCastleCentreMousePointsToInIX:5312 ld ix,Castle1 | call .check | ret z5313 ld ix,Castle2 | call .check | ret z5314 ld ix,Castle3 | call .check | ret z5315 ld ix,Castle45316 ret5317 .check:5318 ld a,(mouseposx) 5319 dec a5320 cp (ix+CastleX)5321 ret nz5322 ld a,(mouseposy) 5323 inc a5324 cp (ix+CastleY)5325 ret5327 .SetCastleEntranceMousePointsToInIX:5328 ld ix,Castle1 | call .check2 | ret z5329 ld ix,Castle2 | call .check2 | ret z5330 ld ix,Castle3 | call .check2 | ret z5331 ld ix,Castle45332 ret5333 .check2:5334 ld a,(mouseposx) 5335 dec a5336 dec a5337 cp (ix+CastleX)5338 ret nz5339 ld a,(mouseposy) 5340 inc a5341 dec a5342 cp (ix+CastleY)5343 ret5345 .checkpointeritem:5346 call .SetMappositionMousePointsTo 5347 ld a,(hl)5348 cp 1285349 ret nc 5351 cp 64 5352 ret z53545355 or a5356 ret z5358 pop af 53605365 ld a,(NewPrControlsOnInterrupt)5366 bit 5,a 5367 jr nz,.TrigBPressed5369 ld hl,CursorWalkingBoots5370 jp .setcharacter5372 .checkpointeroncreature:5373 call .SetMappositionMousePointsTo 5375 ld a,(hl)5376 cp 1925377 ret nc 5380 cp 1285381 ret c 5383 pop af 53855390 ld a,(NewPrControlsOnInterrupt)5391 bit 5,a 5392 jr nz,.TrigBPressed5394 ld ix,(plxcurrentheroAddress)5395 ld a,(ix+HeroStatus)5396 cp 2555397 ld hl,CursorHand5398 jp z,.setcharacter 5400 ld hl,CursorSwords5401 jp .setcharacter5403 .TrigBPressed:5404 ld a,35405 ld (DisplayEnemyStatsRightClick?),a5407 ld a,(hl) 5408 ld (MonsterHerocollidedWithOnMap),a5409 ld a,l5410 ld (XAddressOfMonsterHerocollidedWithOnMap),a5411 inc hl 5412 ld a,(hl) 5413 ld (MonsterHerocollidedWithOnMapAmount),a5414 ret5416 .SetMappositionMousePointsTo: 541954245428 ld a,(mouseposy) 54305432 ld de,(maplenght)5433 ld h,05434 ld l,a5435 call MultiplyHlWithDE 5436 ld bc,mapdata 5438 add hl,bc54395441 .SetX:5442 ld a,(mouseposx)5443 ld c,a5444 ld b,05445 add hl,bc5446 ret5448.checkpointeronhero: 5449 jp z,.checkpointerfriend5450 jp .checkpointerenemy5452 5453 .checkpointerenemy:5454 ld b,amountofheroesperplayer5455 .checkpointerenemyloop:5456 5457 ld a,h 5459 dec a5461 cp (ix+HeroY) 5462 jp nz,.endcheck15463 ld a,l 5464 cp (ix+HeroX) 5465 jp nz,.endcheck15466 ld a,(ix+HeroStatus) 5467 or a5468 jp p,.pointeronenemyhero5469 5470 .endcheck1:5471 add ix,de 5472 djnz .checkpointerenemyloop5473 ret5475 .pointeronenemyhero:5476 pop af 54785483 ld a,(NewPrControlsOnInterrupt)5484 bit 5,a 5485 jr nz,.TrigBPressedEnemyHero5487 ld ix,(plxcurrentheroAddress)5488 ld a,(ix+HeroStatus)5489 cp 2555490 ld hl,CursorHand5491 jp z,.setcharacter 5493 ld hl,CursorSwords5494 jp .setcharacter5495 5497 .TrigBPressedEnemyHero:5498 ld a,35499 ld (DisplayEnemyHeroStatsRightClick?),a5500 ld (EnemyHeroThatPointerIsOn),ix5501 ret5504 .checkpointerfriend: 5505 ld b,amountofheroesperplayer5506 .CheckPointerFriendlyHeroLoop:5507 ld a,h 5509 dec a5511 cp (ix+HeroY) 5512 jp nz,.endcheck25513 ld a,l 5514 cp (ix+HeroX) 5515 jp nz,.endcheck25516 ld a,(ix+HeroStatus) 5517 or a5518 jp p,.PointerIsOnFriendlyHero5519 .endcheck2:5520 add ix,de 5521 djnz .CheckPointerFriendlyHeroLoop5522 ret5524 .PointerIsOnFriendlyHero:5525 pop af 5527 ld hl,(plxcurrentheroAddress)5528 push ix 5529 pop bc5530 xor a5531 sbc hl,bc5532 ld hl,CursorHand5533 jp z,.setcharacter5534 ld hl,CursorSwitchingArrows5535 jp .setcharacter5537.MousepointInHud: 5538 ld hl,CursorHand5539 jp .setcharacter5541.shoe:5542 ld hl,CursorBoots5543 jp .setcharacter5544 5545.ShowScrollArrowBottom:5546 ld hl,CursorArrowDown5547 jp .setcharacter5549.ShowScrollArrowTop:5550 ld hl,CursorArrowUp5551 jp .setcharacter5553.ShowScrollArrowRight:55545559 ld a,(ControlsOnInterrupt)5560 bit 0,a 5561 jr z,.EndCheckShowScrollArrowTopAndRight5562 ld a,(spat) 5563 cp ycoordinateStartPlayfield5564 jp z,.ShowScrollArrowTopAndRight 5565 .EndCheckShowScrollArrowTopAndRight:55675572 ld a,(ControlsOnInterrupt)5573 bit 1,a 5574 jr z,.EndCheckShowScrollArrowBottomAndRight5575 ld a,(spat) 5576 cp ycoorspritebottom5577 jp z,.ShowScrollArrowBottomAndRight5578 .EndCheckShowScrollArrowBottomAndRight:5580.right:5581 ld hl,CursorArrowRight5582 jp .setcharacter5584.ShowScrollArrowTopAndRight:5585 ld hl,CursorArrowRightUp5586 jp .setcharacter5588.ShowScrollArrowBottomAndRight:5589 ld hl,CursorArrowRightDown5590 jp .setcharacter5592.ShowScrollArrowLeft:55935598 ld a,(ControlsOnInterrupt)5599 bit 0,a 5600 jr z,.EndCheckShowScrollArrowTopAndLeft5601 ld a,(spat) 5602 cp ycoordinateStartPlayfield5603 jp z,.ShowScrollArrowTopAndLeft 5604 .EndCheckShowScrollArrowTopAndLeft:56075612 ld a,(ControlsOnInterrupt)5613 bit 1,a 5614 jr z,.EndCheckShowScrollArrowBottomAndLeft5615 ld a,(spat) 5616 cp ycoorspritebottom 5617 jp z,.ShowScrollArrowBottomAndLeft 5618 .EndCheckShowScrollArrowBottomAndLeft:5620.left:5621 ld hl,CursorArrowLeft5622 jp .setcharacter5624.ShowScrollArrowTopAndLeft:5625 ld hl,CursorArrowLeftUp 5626 jp .setcharacter5628.ShowScrollArrowBottomAndLeft:5629 ld hl,CursorArrowDownLeft5630 jp .setcharacter5632.setcharacter: 5633 ld de,(CurrentCursorSpriteCharacter)5634 call CompareHLwithDE 5635 ret z5636 add hl,de5637 ld (CurrentCursorSpriteCharacter),hl5638 .CastleEntry:5639 56405641 xor a 5642 ld hl,sprcharaddr 5643 call SetVdp_Write5645 ld hl,(CurrentCursorSpriteCharacter)5646 5647 ld c,$985648 call outix96 56515653 xor a 5654 ld hl,sprcoladdr 5655 call SetVdp_Write5656 ld c,$985658 .SelfModifyingCodeSpriteColors: equ $+15659 ld hl,SpriteColCursorSprites5660 56615663 5664 call outix48 56675669 xor a 5670 ld hl,sprcharaddr+(3*32) 5671 call SetVdp_Write5673 ld hl,SpriteCharMapSprites5674 ld c,$985675 call outix208 5676 call outix208 5678 xor a 5679 ld hl,sprcoladdr+(3*16) 5680 call SetVdp_Write5681 ld c,$985683 ld hl,SpriteColMapSprites5684 call outix208 5685 ret5688CurrentCursorSpriteCharacter: dw CursorHand5690CursorArrowUp: equ SpriteCharCursorSprites + (00 * 32*3)5691CursorArrowRightUp: equ SpriteCharCursorSprites + (01 * 32*3)5692CursorArrowRight: equ SpriteCharCursorSprites + (02 * 32*3)5693CursorArrowRightDown: equ SpriteCharCursorSprites + (03 * 32*3)5694CursorArrowDown: equ SpriteCharCursorSprites + (04 * 32*3)5695CursorArrowDownLeft: equ SpriteCharCursorSprites + (05 * 32*3)5696CursorArrowLeft: equ SpriteCharCursorSprites + (06 * 32*3)5697CursorArrowLeftUp: equ SpriteCharCursorSprites + (07 * 32*3)5698CursorSwitchingArrows: equ SpriteCharCursorSprites + (08 * 32*3)5699CursorBoots: equ SpriteCharCursorHandDiagonal 5700CursorWalkingBoots: equ SpriteCharCursorSprites + (10 * 32*3)5701CursorHand: equ SpriteCharCursorSprites + (11 * 32*3)5702CursorSwords: equ SpriteCharCursorSprites + (12 * 32*3)5703CursorEnterCastle: equ SpriteCharCursorSprites + (13 * 32*3)5704CursorProhibitionSign: equ SpriteProhibitionSignChar5705CursorBowAndArrow: equ SpriteBowAndArrowChar5706CursorBrokenArrow: equ SpriteBowAndArrowChar + (01 * 32*3)5707CursorPointerIncastle: equ SpritePoiterInCastleChar5709CursorBootsOld: equ SpriteCharCursorSprites + (09 * 32*3)5712CursorSwordLeftUp: equ SpriteCharSword8DirectionsSprites + (00 * 32*3)5713CursorSwordLeftDown: equ SpriteCharSword8DirectionsSprites + (01 * 32*3)5714CursorSwordRightUp: equ SpriteCharSword8DirectionsSprites + (02 * 32*3)5715CursorSwordRightDown: equ SpriteCharSword8DirectionsSprites + (03 * 32*3)5716CursorSwordRight: equ SpriteCharSword8DirectionsSprites + (04 * 32*3)5717CursorSwordLeft: equ SpriteCharSword8DirectionsSprites + (05 * 32*3)5718CursorSwordUp: equ SpriteCharSword8DirectionsSprites + (06 * 32*3)5719CursorSwordDown: equ SpriteCharSword8DirectionsSprites + (07 * 32*3)5721colorlightgreen: equ 015722colormidgreen: equ 025723colorblue: equ 045724colorlightbrown: equ 055725colormiddlebrown: equ 065726colordarkbrown: equ 075727colordarkred: equ 085728colorred: equ 095729colorsnowishwhite: equ 105730colorpink: equ 115731colorwhite: equ 125732colorblack: equ 135733colordarklightgrey: equ 145734colordarkDarkgrey: equ 155737SpriteCharCursorHandDiagonal:5738 incbin "../sprites/sprconv FOR SINGLE SPRITES/HandPointerDiagonal.spr",0,32*3 * 15741SpriteCharCursorSprites:5742 incbin "../sprites/sprconv FOR SINGLE SPRITES/CursorSprites.spr",0,32*3 * 145743SpriteProhibitionSignChar:5744 ../sprites/ProhibitionSign.tgs.gen16 db %000000007 db %000000118 db %000011009 db %0001000010 db %0010001111 db %0010010012 db %0100100113 db %0100101014 db %0100110015 db %0100100016 db %0010000117 db %0010001118 db %0001000019 db %0000110020 db %0000001121 db %0000000022 db %0000000023 db %1100000024 db %0011000025 db %0000100026 db %1100010027 db %1000010028 db %0001001029 db %0011001030 db %0101001031 db %1001001032 db %0010010033 db %1100010034 db %0000100035 db %0011000036 db %1100000037 db %000000003943 db %0000000044 db %0000000045 db %0000001046 db %0000111147 db %0001110048 db %0001100049 db %0011000050 db %0011000051 db %0011000152 db %0011001153 db %0001111054 db %0001110055 db %0000110056 db %0000000057 db %0000000058 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %1110000063 db %0011000064 db %0011100065 db %0110110066 db %1100110067 db %1000110068 db %0000110069 db %0000100070 db %0001100071 db %0011000072 db %0000000073 db %0000000074 db %000000007678 db %0000000079 db %0000000080 db %0000000181 db %0000000082 db %0000000083 db %0000000084 db %0000000085 db %0000000186 db %0000001087 db %0000010088 db %0000000089 db %0000000090 db %0000001191 db %0000001192 db %0000000093 db %0000000094 db %0000000095 db %0000000096 db %1100000097 db %0001000098 db %0000100099 db %01000000100 db %10000000101 db %00000000102 db %00000000103 db %00000000104 db %00010000105 db %00100000106 db %11000000107 db %11000000108 db %00000000109 db %00000000111engine.asm5745SpriteProhibitionSignColor:5746 ../sprites/ProhibitionSign.tcs.gen12 db $003 db $0D4 db $0D5 db $006 db $0D7 db $0D8 db $0D9 db $0D10 db $0D11 db $0D12 db $0D13 db $0D14 db $0D15 db $0D16 db $0D17 db $0020 db $0021 db $0022 db $0A23 db $0924 db $0925 db $0926 db $0927 db $0928 db $0929 db $0930 db $0931 db $0932 db $0933 db $0034 db $0035 db $0038 db $0039 db $0040 db $0B41 db $0842 db $0843 db $0B44 db $0B45 db $0B46 db $0B47 db $0B48 db $0A49 db $0B50 db $0B51 db $0852 db $0053 db $0054engine.asm5747SpriteCharSword8DirectionsSprites:5748 ../sprites/Swords8Directions.tgs.gen16 db %000000007 db %011110008 db %011111009 db %0111001010 db %0100000111 db %0010000012 db %0001000013 db %0000100014 db %0000010015 db %0000001016 db %0000000117 db %0000000018 db %0000001119 db %0000001120 db %0000000121 db %0000000022 db %0000000023 db %0000000024 db %0000000025 db %0000000026 db %0000000027 db %1000000028 db %0100010029 db %0010111030 db %0001001031 db %0011101032 db %1111110033 db %1110110034 db %1111011035 db %0011001136 db %1100101037 db %000001003944 db %0000000045 db %0000000046 db %0011100047 db %0011110048 db %0011001049 db %0001100150 db %0000110051 db %0000011052 db %0000001153 db %0000000154 db %0000000055 db %0000000056 db %0000000057 db %0000000158 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %0000000063 db %0000000064 db %0000000065 db %0000000066 db %1000000067 db %0100010068 db %0110010069 db %1111010070 db %1110100071 db %0101000072 db %0010100073 db %1100110074 db %0000010075 db %000000007782 db %0000000083 db %0111100084 db %0111110085 db %0111111086 db %0111111187 db %0011111188 db %0001111189 db %0000111190 db %0000011191 db %0000001192 db %0000000193 db %0000000094 db %0000001195 db %0000001096 db %0000000197 db %0000000098 db %0000000099 db %00000000100 db %00000000101 db %00000000102 db %00000000103 db %10000000104 db %11000100105 db %11101010106 db %11110010107 db %11111010108 db %11110100109 db %11101100110 db %11010010111 db %00110001112 db %11001010113 db %00000100115120 db %00000000121 db %00000001122 db %00000011123 db %00000011124 db %00000000125 db %00000001126 db %00000010127 db %00000100128 db %00001000129 db %00010000130 db %00100000131 db %01000001132 db %01110010133 db %01111100134 db %01111000135 db %00000000136 db %00000100137 db %11001010138 db %00110011139 db %11110110140 db %11101100141 db %11111100142 db %00111010143 db %00010010144 db %00101110145 db %01000100146 db %10000000147 db %00000000148 db %00000000149 db %00000000150 db %00000000151 db %00000000153158 db %00000000159 db %00000000160 db %00000001161 db %00000000162 db %00000000163 db %00000000164 db %00000001165 db %00000011166 db %00000110167 db %00001100168 db %00011001169 db %00110010170 db %00111100171 db %00111000172 db %00000000173 db %00000000174 db %00000000175 db %00000100176 db %11001100177 db %00101000178 db %01010000179 db %11101000180 db %11110100181 db %01100100182 db %01000100183 db %10000000184 db %00000000185 db %00000000186 db %00000000187 db %00000000188 db %00000000189 db %00000000191196 db %00000000197 db %00000001198 db %00000010199 db %00000011200 db %00000000201 db %00000001202 db %00000011203 db %00000111204 db %00001111205 db %00011111206 db %00111111207 db %01111111208 db %01111110209 db %01111100210 db %01111000211 db %00000000212 db %00000100213 db %11001010214 db %00110001215 db %11010010216 db %11101100217 db %11110100218 db %11111010219 db %11110010220 db %11101010221 db %11000100222 db %10000000223 db %00000000224 db %00000000225 db %00000000226 db %00000000227 db %00000000229234 db %00000000235 db %00000000236 db %00000000237 db %00000000238 db %00000000239 db %00000001240 db %00100010241 db %01110100242 db %01001000243 db %01011100244 db %00111111245 db %00110111246 db %01101111247 db %11001100248 db %01010011249 db %00100000250 db %00000000251 db %00011110252 db %00111110253 db %01001110254 db %10000010255 db %00000100256 db %00001000257 db %00010000258 db %00100000259 db %01000000260 db %10000000261 db %00000000262 db %11000000263 db %11000000264 db %10000000265 db %00000000267272 db %00000000273 db %00000000274 db %00000000275 db %00000000276 db %00000000277 db %00000000278 db %00000001279 db %00100010280 db %00100110281 db %00101111282 db %00010111283 db %00001010284 db %00010100285 db %00110011286 db %00100000287 db %00000000288 db %00000000289 db %00000000290 db %00011100291 db %00111100292 db %01001100293 db %10011000294 db %00110000295 db %01100000296 db %11000000297 db %10000000298 db %00000000299 db %00000000300 db %00000000301 db %10000000302 db %00000000303 db %00000000305310 db %00000000311 db %00000000312 db %00000000313 db %00000000314 db %00000000315 db %00000001316 db %00100011317 db %01010111318 db %01001111319 db %01011111320 db %00101111321 db %00110111322 db %01001011323 db %10001100324 db %01010011325 db %00100000326 db %00000000327 db %00011110328 db %00111110329 db %01111110330 db %11111110331 db %11111100332 db %11111000333 db %11110000334 db %11100000335 db %11000000336 db %10000000337 db %00000000338 db %11000000339 db %01000000340 db %10000000341 db %00000000343348 db %00100000349 db %01010011350 db %11001100351 db %01101111352 db %00110111353 db %00111111354 db %01011100355 db %01001000356 db %01110100357 db %00100010358 db %00000001359 db %00000000360 db %00000000361 db %00000000362 db %00000000363 db %00000000364 db %00000000365 db %10000000366 db %11000000367 db %11000000368 db %00000000369 db %10000000370 db %01000000371 db %00100000372 db %00010000373 db %00001000374 db %00000100375 db %10000010376 db %01001110377 db %00111110378 db %00011110379 db %00000000381386 db %00000000387 db %00100000388 db %00110011389 db %00010100390 db %00001010391 db %00010111392 db %00101111393 db %00100110394 db %00100010395 db %00000001396 db %00000000397 db %00000000398 db %00000000399 db %00000000400 db %00000000401 db %00000000402 db %00000000403 db %00000000404 db %10000000405 db %00000000406 db %00000000407 db %00000000408 db %10000000409 db %11000000410 db %01100000411 db %00110000412 db %10011000413 db %01001100414 db %00111100415 db %00011100416 db %00000000417 db %00000000419424 db %00100000425 db %01010011426 db %10001100427 db %01001011428 db %00110111429 db %00101111430 db %01011111431 db %01001111432 db %01010111433 db %00100011434 db %00000001435 db %00000000436 db %00000000437 db %00000000438 db %00000000439 db %00000000440 db %00000000441 db %10000000442 db %01000000443 db %11000000444 db %00000000445 db %10000000446 db %11000000447 db %11100000448 db %11110000449 db %11111000450 db %11111100451 db %11111110452 db %01111110453 db %00111110454 db %00011110455 db %00000000457462 db %00000000463 db %00001110464 db %00011110465 db %00110100466 db %00101000467 db %11111111468 db %01011000469 db %10011000470 db %10011111471 db %11111111472 db %00101000473 db %00110100474 db %00011110475 db %00001110476 db %00000000477 db %00000000478 db %00000000479 db %00000000480 db %00000000481 db %00000000482 db %00000000483 db %11111110484 db %00000001485 db %00000000486 db %11111111487 db %11111110488 db %00000000489 db %00000000490 db %00000000491 db %00000000492 db %00000000493 db %00000000495500 db %00000000501 db %00000000502 db %00000100503 db %00001000504 db %00010000505 db %00010000506 db %10110000507 db %11110111508 db %11110111509 db %00010000510 db %00010000511 db %00001000512 db %00000100513 db %00000000514 db %00000000515 db %00000000516 db %00000000517 db %00000000518 db %00000000519 db %00000000520 db %00000000521 db %00000000522 db %00000000523 db %11111111524 db %11111110525 db %00000000526 db %00000000527 db %00000000528 db %00000000529 db %00000000530 db %00000000531 db %00000000533538 db %00000000539 db %00001110540 db %00011010541 db %00110100542 db %00101000543 db %11101111544 db %00001111545 db %00001111546 db %00001111547 db %11101111548 db %00101000549 db %00110100550 db %00011010551 db %00001110552 db %00000000553 db %00000000554 db %00000000555 db %00000000556 db %00000000557 db %00000000558 db %00000000559 db %11111110560 db %11111111561 db %11111111562 db %11111111563 db %11111110564 db %00000000565 db %00000000566 db %00000000567 db %00000000568 db %00000000569 db %00000000571576 db %00000000577 db %00000000578 db %00000000579 db %00000000580 db %00000000581 db %00000000582 db %01111111583 db %10000000584 db %00000000585 db %11111111586 db %01111111587 db %00000000588 db %00000000589 db %00000000590 db %00000000591 db %00000000592 db %00000000593 db %00000000594 db %01110000595 db %01111000596 db %00101100597 db %00010100598 db %11111111599 db %00011001600 db %00011001601 db %11111010602 db %11111111603 db %00010100604 db %00101100605 db %01111000606 db %01110000607 db %00000000609614 db %00000000615 db %00000000616 db %00000000617 db %00000000618 db %00000000619 db %00000000620 db %00000000621 db %00000000622 db %11111111623 db %01111111624 db %00000000625 db %00000000626 db %00000000627 db %00000000628 db %00000000629 db %00000000630 db %00000000631 db %00000000632 db %00000000633 db %00100000634 db %00010000635 db %00001000636 db %00001000637 db %00001111638 db %11101111639 db %11101101640 db %00001000641 db %00001000642 db %00010000643 db %00100000644 db %00000000645 db %00000000647652 db %00000000653 db %00000000654 db %00000000655 db %00000000656 db %00000000657 db %00000000658 db %01111111659 db %11111111660 db %11111111661 db %11111111662 db %01111111663 db %00000000664 db %00000000665 db %00000000666 db %00000000667 db %00000000668 db %00000000669 db %00000000670 db %01110000671 db %01011000672 db %00101100673 db %00010100674 db %11110111675 db %11110000676 db %11110000677 db %11110000678 db %11110111679 db %00010100680 db %00101100681 db %01011000682 db %01110000683 db %00000000685690 db %00000010691 db %00000100692 db %00000100693 db %00000100694 db %00000100695 db %00000100696 db %00000100697 db %00000100698 db %00000100699 db %01100100700 db %01110100701 db %01101111702 db %00110111703 db %00011100704 db %00000110705 db %00000101706 db %10000000707 db %11000000708 db %11000000709 db %11000000710 db %11000000711 db %11000000712 db %11000000713 db %11000000714 db %11000000715 db %11001100716 db %11011100717 db %11101100718 db %11011000719 db %01110000720 db %01000000721 db %11000000723728 db %00000001729 db %00000001730 db %00000001731 db %00000001732 db %00000001733 db %00000001734 db %00000001735 db %00000001736 db %00000001737 db %00000001738 db %00100001739 db %00010000740 db %00001111741 db %00000011742 db %00000001743 db %00000011744 db %00000000745 db %10000000746 db %10000000747 db %10000000748 db %10000000749 db %10000000750 db %10000000751 db %10000000752 db %10000000753 db %10000000754 db %10001000755 db %00010000756 db %11100000757 db %10000000758 db %10000000759 db %10000000761766 db %00000011767 db %00000111768 db %00000111769 db %00000111770 db %00000111771 db %00000111772 db %00000111773 db %00000111774 db %00000111775 db %01100111776 db %01010111777 db %01101111778 db %00110000779 db %00011100780 db %00000100781 db %00000100782 db %10000000783 db %11000000784 db %11000000785 db %11000000786 db %11000000787 db %11000000788 db %11000000789 db %11000000790 db %11000000791 db %11001100792 db %11010100793 db %11101100794 db %00011000795 db %01110000796 db %01000000797 db %01000000799804 db %00000111805 db %00000100806 db %00011100807 db %00110111808 db %01101111809 db %01110100810 db %01100100811 db %00000100812 db %00000100813 db %00000100814 db %00000100815 db %00000100816 db %00000100817 db %00000100818 db %00000100819 db %00000010820 db %01000000821 db %11000000822 db %01110000823 db %11011000824 db %11101100825 db %11011100826 db %11001100827 db %11000000828 db %11000000829 db %11000000830 db %11000000831 db %11000000832 db %11000000833 db %11000000834 db %11000000835 db %10000000837842 db %00000011843 db %00000011844 db %00000011845 db %00001111846 db %00010000847 db %00100001848 db %00000001849 db %00000001850 db %00000001851 db %00000001852 db %00000001853 db %00000001854 db %00000001855 db %00000001856 db %00000001857 db %00000001858 db %10000000859 db %00000000860 db %10000000861 db %11100000862 db %00010000863 db %10001000864 db %10000000865 db %10000000866 db %10000000867 db %10000000868 db %10000000869 db %10000000870 db %10000000871 db %10000000872 db %10000000873 db %00000000875880 db %00000100881 db %00000100882 db %00011100883 db %00110000884 db %01101111885 db %01010111886 db %01100111887 db %00000111888 db %00000111889 db %00000111890 db %00000111891 db %00000111892 db %00000111893 db %00000111894 db %00000111895 db %00000011896 db %01000000897 db %01000000898 db %01110000899 db %00011000900 db %11101100901 db %11010100902 db %11001100903 db %11000000904 db %11000000905 db %11000000906 db %11000000907 db %11000000908 db %11000000909 db %11000000910 db %11000000911 db %10000000912engine.asm5749SpriteBowAndArrowChar:5750 incbin "../sprites/sprconv FOR SINGLE SPRITES/BowAndArrow.spr",0,32*3 * 025751SpritePoiterInCastleChar:5752 incbin "../sprites/sprconv FOR SINGLE SPRITES/PointerInCastle.spr",0,32*3 * 015754SpriteColPoiterInCastleSprite:5755 ds 16,colorlightbrown| ds 16,colormiddlebrown+64 | ds 16,colorwhite+645756SpriteColCursorSprites:5757 ds 16,colorlightgreen| ds 16,colormidgreen+64 | ds 16,colorwhite+645759SpriteCharMapSprites:5760 ../sprites/MapCornerLeftTop.tgs.gen12 db 873 db 924 db 2085 db 966 db 647 db 648 db 1289 db 12810 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 19219 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 25235 db 24036 db 16037 db 19238 db 12839 db 12840 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5761 ../sprites/MapCornerRightTop.tgs.gen12 db 33 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 23419 db 5820 db 1121 db 422 db 223 db 224 db 125 db 126 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 6351 db 1552 db 753 db 354 db 155 db 156 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5762 ../sprites/MapCornerLeftBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 12811 db 12812 db 6413 db 12814 db 3215 db 22416 db 24817 db 25418 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 12845 db 6446 db 19247 db 4848 db 17249 db 16350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 19266engine.asm5763 ../sprites/MapCornerRightBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 127 db 128 db 229 db 130 db 431 db 732 db 3133 db 12734 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 161 db 262 db 363 db 1264 db 5365 db 19766engine.asm5764 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5765 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5766 ../sprites/MiniMapSquareIcon.tgs.gen15sprite0tgs:6 db %000000017 db %000000018 db %000000019 db %0000000110 db %0000000111 db %0000000112 db %0000000113 db %0000000114 db %0000000115 db %0000000016 db %0000000017 db %0000000018 db %0000000019 db %0000000020 db %0000000021 db %0000000022 db %1111111123 db %0000000124 db %0000000125 db %0000000126 db %0000000127 db %0000000128 db %0000000129 db %0000000130 db %1111111131 db %0000000032 db %0000000033 db %0000000034 db %0000000035 db %0000000036 db %0000000037 db %0000000039engine.asm5767SpriteColMapSprites:5768 ../sprites/MapCornerLeftTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7924 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5769 ../sprites/MapCornerRightTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7824 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5770 ../sprites/MapCornerLeftBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5771 ../sprites/MapCornerRightBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5772 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5773 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5774 ../sprites/MiniMapSquareIcon.tcs.gen1 db colorwhite2 db colorwhite3 db colorwhite4 db colorwhite5 db colorwhite6 db colorwhite7 db colorwhite8 db colorwhite9 db colorwhite10 db colorwhite11 db colorwhite12 db colorwhite13 db colorwhite14 db colorwhite15 db colorwhite16 db colorwhiteengine.asm5775 5776putsprite:5777 xor a 5778 ld hl,sprattaddr 5779 call SetVdp_Write5780 ld hl,spat 5781 ld c,$985782 call outix128 5783 ret5785spat: 5786 db 100,100,00,0 ,100,100,04,0 ,100,100,08,0 ,004,006,12,05787 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05788 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05789 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05791 db 230,230,64,0 ,230,230,68,0 ,230,230,72,0 ,230,230,76,05792 db 230,230,80,0 ,230,230,84,0 ,230,230,88,0 ,230,230,92,05793 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05794 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05796SpatInCastle: 5797 db 230,230,00,05798 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05799 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05800 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05802SpatInGame: 5803 db 004,006,12,05804 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05805 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05806 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05808DisableScrollScreen?: db 05809scrollscreen: 5810 ld a,(DisableScrollScreen?)5811 or a5812 ret nz5814 call checkcurrentplayerhuman 5815 ret z 58175822 ld a,(Controls)5823 ld d,a 5824 ld bc,0 58265830 ld a,(keys+6)5831 bit 1,a 5832 jp nz,.EndCheckCTRL5833 5834 ld a,(Controls) 5835 and %1111 00005836 ld (Controls),a5838 bit 2,d 5839 jr z,.EndCheckCTRLAndLeft 5840 dec b5841 .EndCheckCTRLAndLeft:5843 bit 3,d 5844 jr z,.EndCheckCTRLAndRight5845 inc b5846 .EndCheckCTRLAndRight:5848 bit 0,d 5849 jr z,.EndCheckCTRLAndUp5850 dec c5851 .EndCheckCTRLAndUp:5853 bit 1,d 5854 jr z,.endcheck5855 inc c5856 jp .endcheck5857 .EndCheckCTRL:5859 .left: 5860 ld a,(spat+1) 5861 cp xcoordinateStartPlayfield5862 jr nz,.right5863 bit 2,d 5864 jr z,.right5865 dec b5867 .right: 5868 cp xcoorspriteright5869 jr nz,.up5870 bit 3,d 5871 jr z,.up5872 inc b5874 .up: 5875 ld a,(spat) 5876 cp ycoordinateStartPlayfield58775878 jr nz,.down5879 bit 0,d 5880 jr z,.down5881 dec c5883 .down: 5884 cp ycoorspritebottom5885 jr nz,.endcheck5886 bit 1,d 5887 jr z,.endcheck5888 inc c5889 .endcheck:5891 ld a,(maplenght) 5892 sub a,TilesPerRow-1 5893 ld d,a5894 ld a,(mapheight)5895 sub a,TilesPerColumn-15896 ld e,a5898 call .ScrollMap5899 ld a,(keys+6)5900 bit 0,a 5901 ret nz5903 .ScrollMap:5904 ld a,(mappointerx)5905 add a,b 5906 cp d 5907 jp nc,.endmovex5908 ld (mappointerx),a5909 .endmovex:5911 ld a,(mappointery)5912 add a,c 5913 cp e 5914 ret nc5915 ld (mappointery),a 5916 ret 5918SetPageSpecial: 5919 ld a,0*32+315920 jr z,.setpage5921 ld a,1*32+315922 .setpage: 5923 di5924 out ($99),a5925 ld a,2+1285926 ei5927 out ($99),a5928 ret5930buildupscreenYoffset: equ 55931buildupscreenXoffset: equ 65932TilesPerColumn: equ 1259335934TilesPerRow: equ 1259355936mapdata: equ $80005938maplenght: dw 1285939mapheight: db 1285941mappage0:5942 ds TilesPerColumn*TilesPerRow,2555943mappage1:5944 ds TilesPerColumn*TilesPerRow,2555946putbottomobjects:5947 Call SetMapposition 5949 ld a,(activepage)5950 or a5951 ld de,mappage1 5952 jr z,.mirrorpageset5953 ld de,mappage0 5954 .mirrorpageset:5956 ld a,buildupscreenYoffset 5957 ld (Copy16x16Tile+dy),a5959 ld bc,TilesPerColumn*256 + 16 5960 .loop:5961 push bc5962 ld a,buildupscreenXoffset 5963 ld (Copy16x16Tile+dx),a 5964 call PutRowBottomObjects 5966 ld a,(Copy16x16Tile+dy) 5967 add a,c5968 ld (Copy16x16Tile+dy),a 5970 ld bc,128 - 12 5971 add hl,bc 5973 pop bc5974 djnz .loop5975 ret5976 ret5978PutRowBottomObjects:5979 ld b,TilesPerRow 5980 .loop:5981 call PutBottomObjectFromObjectLayer 5982 inc hl 5983 inc de 5985 ld a,(Copy16x16Tile+dx)5986 add a,c5987 ld (Copy16x16Tile+dx),a5989 djnz .loop5990 ret5992PutBottomObjectFromObjectLayer: 5993 ld a,2 5994 ld (page1bank),a5995 out ($fe),a 5997 ld a,2 5998 ld (Copy16x16Tile+sPage),a5999 ld a,$98 6000 ld (Copy16x16Tile+copytype),a6002 ld a,(hl)6003 or a6004 ret z6005 cp 1926006 ret nc 6008 ld a,2556009 ld (de),a 6010 ld a,(hl)6011 jp PutTile.go6013PutTopObjects:6014 Call SetMapposition 6016 ld a,(activepage)6017 or a6018 ld de,mappage1 6019 jr z,.mirrorpageset6020 ld de,mappage0 6021 .mirrorpageset:6023 ld a,buildupscreenYoffset 6024 ld (Copy16x16Tile+dy),a6026 ld bc,TilesPerColumn*256 + 16 6027 .loop:6028 push bc6029 ld a,buildupscreenXoffset 6030 ld (Copy16x16Tile+dx),a 6031 call PutRowTopObjects 6033 ld a,(Copy16x16Tile+dy) 6034 add a,c6035 ld (Copy16x16Tile+dy),a 6037 ld bc,128 - 12 6038 add hl,bc 6040 pop bc6041 djnz .loop6042 ret6044PutRowTopObjects:6045 ld b,TilesPerRow 6046 .loop:6047 call PutTopObjectFromObjectLayer 6048 inc hl 6049 inc de 6051 ld a,(Copy16x16Tile+dx)6052 add a,c6053 ld (Copy16x16Tile+dx),a6055 djnz .loop6056 ret6058PutTopObjectFromObjectLayer: 6059 ld a,2 6060 ld (page1bank),a6061 out ($fe),a 6063 ld a,2 6064 ld (Copy16x16Tile+sPage),a6065 ld a,$98 6066 ld (Copy16x16Tile+copytype),a6068 ld a,(hl)6070 if DisplayNumbers1to6?6071 cp 1926072 else6073 cp 192+6 6074 endif 6075 ret c 6077 ld a,2556078 ld (de),a 6079 ld a,(hl)6080 jp PutTile.go6082SetMapposition: 6083 ld a,(mappointery) 6086 ld de,(maplenght)6087 ld h,06088 ld l,a6089 call MultiplyHlWithDE 6093 ld de,mapdata 6094 add hl,de6095 ld de,(mappointerx)6096 add hl,de 609961026110 ret6112buildupscreen:6113 Call SetMapposition 6115 ld a,(activepage) 6116 ld (Copy16x16Tile+dpage),a 6117 ld (putherotopbottom+dpage),a6118 ld (putcastle+dpage),a6119 ld (putbackgroundoverhero+dpage),a6120 ld (putstar+dpage),a61216123 ld (putlettre+dpage),a6124 xor 1 6125 ld (activepage),a 6126 ld de,mappage1 6127 jr z,.mirrorpageset6128 ld de,mappage0 6129 .mirrorpageset:6130 call SetPageSpecial 6132 ex de,hl 6133 ld a,buildupscreenYoffset 6134 ld (Copy16x16Tile+dy),a6136 ld bc,TilesPerColumn*256 + 16 6137 .loop:6138 push bc6139 ld a,buildupscreenXoffset 6140 ld (Copy16x16Tile+dx),a 6141 call putrow 6143 ld a,(Copy16x16Tile+dy) 6144 add a,c6145 ld (Copy16x16Tile+dy),a 6147 ld bc,128 - 12 6148 ex de,hl6149 add hl,bc 6150 ex de,hl6152 pop bc6153 djnz .loop6154 ret6156putrow: 6157 ld b,TilesPerRow 6158.loop:6159 call PutTile 6161 inc hl6162 inc de6164 ld a,(Copy16x16Tile+dx)6165 add a,c6166 ld (Copy16x16Tile+dx),a6168 djnz .loop6169 ret6171PutTile: 6172 ld a,1 6173 ld (page1bank),a6174 out ($fe),a 6176 ld a,3 6177 ld (Copy16x16Tile+sPage),a6178 ld a,$d0 6179 ld (Copy16x16Tile+copytype),a6181 ld a,(de) 6182 cp (hl) 6183 ret z 6184 ld (hl),a6186 .go:6187 exx 6188 ld e,a 6189 add a,a 6190 add a,a 6191 add a,a 6192 add a,a 6193 ld (Copy16x16Tile+sx),a6194 6196 6197 ld a,e6198 ld d,-16199.setsy:6200 sub a,166201 inc d6202 jp nc,.setsy6203 ld a,d6204 add a,a 6205 add a,a 6206 add a,a 6207 add a,a 6208 ld (Copy16x16Tile+sy),a6209 6211 ld hl,Copy16x16Tile6212 call docopy6213 exx6214 ret6216Copy16x16Tile:6217 db 255,000,255,0036218 db 255,000,255,0006219 db 016,000,016,0006220 db 000,000,$d0 6222BackupImagePage0Ready?: db 0 6223FreeToUseFastCopy0: 6224 db 000,000,000,000 6225 db 000,000,000,000 6226 db 000,000,000,000 6227 db 000,%0000 0000,$D0 6229BackupImagePage1Ready?: db 0 6230FreeToUseFastCopy1: 6231 db 000,000,000,000 6232 db 000,000,000,000 6233 db 000,000,000,000 6234 db 000,%0000 0000,$D0 623662426248ScreenOff:6249 ld a,(VDP_0+1) 6250 and %1011 11116251 di6252 out ($99),a6253 ld a,1+1286254 ei6255 out ($99),a6256 ret6258ScreenOn:6259 ld a,(VDP_0+1) 6260 or %0100 00006261 di6262 out ($99),a6263 ld a,1+1286264 ei6265 out ($99),a6266 ret6268activepage: db 06269mappointerx: dw 06270mappointery: db 06271heroymirror: ds 16272heroxmirror: ds 16274non_see_throughpieces: equ 16 6275amountoftransparantpieces: equ 64 6276UnwalkableTerrainPieces: equ 149 6278mirrortransparentpieces: 6280 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 048,128, 080,144, 048,160, 080,128, 064,176, 064,192, 064,224, 064,2406281 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 064,128, 064,144, 064,160, 080,160, 080,176, 080,192, 048,224, 048,2406282 db 080,000, 080,016, 080,032, 080,048, 080,064, 080,080, 080,096, 080,1126284putbackgroundoverhero:6285 db 16,0,64,36286 db 255,0,255,06287 db 16,0,16,06288 db 0,%0000 0000,$98 62896291putherotopbottom:6292 db 224,0,0,26293 db 96,0,96,06294 db 16,0,16,06295 db 0,%0000 0000,$98 6297putcastle:6298 db 255,0,208,36299 db 255,0,255,06300 db 16,0,16,06301 db 0,%0000 0000,$98 63026304putlettre:6305 db 0,0,212,16306 db 40,0,40,06307 db 16,0,5,06308 db 0,%0000 0000,$98 63106316mouseposy: ds 16317mouseposx: ds 16318mouseclicky: ds 16319mouseclickx: ds 16320addxtomouse: equ 86321addxtomouseDiagonalPointer: equ -663226323addytomouse: equ 46324addytomouseDiagonalPointer: equ -26326HeroTotalManaBeforeLevelingUp: ds 16327amountofheroesperplayer: equ 86328plxcurrentheroAddress: dw pl1hero1y6329lenghtherotable: equ pl1hero2y-pl1hero1y6331HeroY: equ 06332HeroX: equ 16333HeroXp: equ 26334HeroMove: equ 46335HeroTotalMove: equ 56336HeroMana: equ 66337HeroTotalMana: equ 86338HeroManarec: equ 106339HeroStatus: equ 11 6340HeroUnits: equ 12 6341HeroStatAttack: equ 306342HeroStatDefense: equ 316343HeroStatKnowledge: equ 326344HeroStatSpellDamage: equ 336345HeroSkills: equ 346346HeroLevel: equ 406347HeroEarthSpells: equ 416348HeroFireSpells: equ 426349HeroAirSpells: equ 436350HeroWaterSpells: equ 446351HeroAllSchoolsSpells: equ 456352HeroInventory: equ 46 6353HeroSpecificInfo: equ 616354HeroDYDX: equ 63 6355lenghtinventorytable: equ 9 + 663566357EmptyHeroRecruitedAtTavern:6358.heroy: ds 16359.herox: ds 16360.heroxp: dw 0006361.heromove: db 20,206362.heromana: dw 10,106363.heromanarec:db 5 6364.herostatus: db 2 6365.HeroUnits: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6366.HeroStatAttack: db 16367.HeroStatDefense: db 16368.HeroStatKnowledge: db 1 6369.HeroStatSpellDamage: db 1 6370.HeroSkills: db 0,0,0,0,0,06371.HeroLevel: db 16372.EarthSpells: db %0000 0000 6373.FireSpells: db %0000 0000 6374.AirSpells: db %0000 0000 6375.WaterSpells: db %0000 0000 6376.AllSchoolsSpells: db %0000 0000 6377.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6378.HeroSpecificInfo: ds 263796381pl1hero1y: db 36382pl1hero1x: db 36383pl1hero1xp: dw 0 6384pl1hero1move: db 20,206385pl1hero1mana: dw 50,106386pl1hero1manarec:db 5 6387pl1hero1status: db 2 6390Pl1Hero1Units: db ContraGroupBUnitLevel1Number | dw 150 | db ContraGroupBUnitLevel2Number | dw 130 | db 000 | dw 000 | db ContraGroupBUnitLevel4Number | dw 130 | db ContraGroupBUnitLevel5Number | dw 100 | db ContraGroupBUnitLevel6Number | dw 100 6391Pl1Hero1StatAttack: db 06392Pl1Hero1StatDefense: db 06393Pl1Hero1StatKnowledge: db 1 6394Pl1Hero1StatSpellDamage: db 9 6397.HeroSkills: db 13,0,0,0,0,06398.HeroLevel: db 16399.EarthSpells: db %0000 0000 6400.FireSpells: db %0000 00006401.AirSpells: db %0000 00006402.WaterSpells: db %0000 00006403.AllSchoolsSpells: db %0000 000064046407.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6408.HeroSpecificInfo: dw HeroAddressesSnake16409.HeroDYDX: dw $ffff 6412 6418pl1hero2y: db $1c6419pl1hero2x: db $336420pl1hero2xp: dw 00006421pl1hero2move: db 06,206422pl1hero2mana: dw 10,106423pl1hero2manarec:db 5 6424pl1hero2status: db 255 6425Pl1Hero2Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6426.HeroStatAttack: db 16427.HeroStatDefense: db 16428.HeroStatKnowledge: db 1 6429.HeroStatSpellDamage: db 1 6430.HeroSkills: db 31,0,0,0,0,06431.HeroLevel: db 16432.EarthSpells: db %0000 0000 6433.FireSpells: db %0000 00006434.AirSpells: db %0000 00006435.WaterSpells: db %0000 00006436.AllSchoolsSpells: db %0000 00006437.Inventory: db 045,045,045,045,045,045,045,045,044, 016,027,033,043,038,0396438.HeroSpecificInfo: db 255,2556439.HeroDYDX: dw $ffff 6441pl1hero3y: db 01 6442pl1hero3x: db 036443pl1hero3xp: dw 00006444pl1hero3move: db 20,206445pl1hero3mana: dw 10,106446pl1hero3manarec:db 5 6447pl1hero3status: db 255 6448Pl1Hero3Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6449.HeroStatAttack: db 16450.HeroStatDefense: db 16451.HeroStatKnowledge: db 1 6452.HeroStatSpellDamage: db 1 6453.HeroSkills: db 8,30,24,0,0,06454.HeroLevel: db 16455.EarthSpells: db %0000 0000 6456.FireSpells: db %0000 00006457.AirSpells: db %0000 00006458.WaterSpells: db %0000 00006459.AllSchoolsSpells: db %0000 00006460.Inventory: ds lenghtinventorytable,0456461.HeroSpecificInfo: db 255,2556462.HeroDYDX: dw $ffff 6464pl1hero4y: db 00 6465pl1hero4x: db 00 6466pl1hero4xp: dw 00006467pl1hero4move: db 20,206468pl1hero4mana: dw 10,206469pl1hero4manarec:db 5 6470pl1hero4status: db 255 6471Pl1Hero4Units: db 006 | dw 010 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6472.HeroStatAttack: db 16473.HeroStatDefense: db 16474.HeroStatKnowledge: db 1 6475.HeroStatSpellDamage: db 1 6476.HeroSkills: db 33,10,1,0,0,06477.HeroLevel: db 16478.EarthSpells: db %0000 0001 6479.FireSpells: db %0000 00016480.AirSpells: db %0000 00016481.WaterSpells: db %0000 00016482.AllSchoolsSpells: db %0000 00016483.Inventory: ds lenghtinventorytable,0456484.HeroSpecificInfo: db 255,2556485.HeroDYDX: dw $ffff 6487pl1hero5y: db 00 6488pl1hero5x: db 01 6489pl1hero5xp: dw 00006490pl1hero5move: db 20,206491pl1hero5mana: dw 10,206492pl1hero5manarec:db 5 6493pl1hero5status: db 255 6494Pl1Hero5Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6495.HeroStatAttack: db 16496.HeroStatDefense: db 16497.HeroStatKnowledge: db 1 6498.HeroStatSpellDamage: db 1 6499.HeroSkills: db 33,10,1,0,0,06500.HeroLevel: db 16501.EarthSpells: db %0000 0001 6502.FireSpells: db %0000 00016503.AirSpells: db %0000 00016504.WaterSpells: db %0000 00016505.AllSchoolsSpells: db %0000 00016506.Inventory: ds lenghtinventorytable,0456507.HeroSpecificInfo: db 255,2556508.HeroDYDX: dw $ffff 6510pl1hero6y: db 00 6511.pl1hero6x: db 02 6512.pl1hero6xp: dw 00006513.pl1hero6move: db 20,206514.pl1hero6mana: dw 10,206515.pl1hero6manarec:db 5 6516.pl1hero6status: db 255 6517.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6518.HeroStatAttack: db 16519.HeroStatDefense: db 16520.HeroStatKnowledge: db 1 6521.HeroStatSpellDamage: db 1 6522.HeroSkills: db 33,10,1,0,0,186523.HeroLevel: db 16524.EarthSpells: db %0000 0001 6525.FireSpells: db %0000 00016526.AirSpells: db %0000 00016527.WaterSpells: db %0000 00016528.AllSchoolsSpells: db %0000 00016529.Inventory: ds lenghtinventorytable,0456530.HeroSpecificInfo: db 255,2556531.HeroDYDX: dw $ffff 6533pl1hero7y: db 00 6534.pl1hero6x: db 03 6535.pl1hero6xp: dw 00006536.pl1hero6move: db 20,206537.pl1hero6mana: dw 10,206538.pl1hero6manarec:db 5 6539.pl1hero6status: db 255 6540.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6541.HeroStatAttack: db 16542.HeroStatDefense: db 16543.HeroStatKnowledge: db 1 6544.HeroStatSpellDamage: db 1 6545.HeroSkills: db 33,10,1,0,0,186546.HeroLevel: db 16547.EarthSpells: db %0000 0001 6548.FireSpells: db %0000 00016549.AirSpells: db %0000 00016550.WaterSpells: db %0000 00016551.AllSchoolsSpells: db %0000 00016552.Inventory: ds lenghtinventorytable,0456553.HeroSpecificInfo: db 255,2556554.HeroDYDX: dw $ffff 6556pl1hero8y: db 00 6557.pl1hero6x: db 04 6558.pl1hero6xp: dw 00006559.pl1hero6move: db 20,206560.pl1hero6mana: dw 10,206561.pl1hero6manarec:db 5 6562.pl1hero6status: db 255 6563.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6564.HeroStatAttack: db 16565.HeroStatDefense: db 16566.HeroStatKnowledge: db 1 6567.HeroStatSpellDamage: db 1 6568.HeroSkills: db 33,10,1,0,0,186569.HeroLevel: db 16570.EarthSpells: db %0000 0001 6571.FireSpells: db %0000 00016572.AirSpells: db %0000 00016573.WaterSpells: db %0000 00016574.AllSchoolsSpells: db %0000 00016575.Inventory: ds lenghtinventorytable,0456576.HeroSpecificInfo: db 255,2556577.HeroDYDX: dw $ffff 6579pl1hero9y: db 00 6580.pl1hero6x: db 00 6581.pl1hero6xp: dw 00006582.pl1hero6move: db 00,006583.pl1hero6mana: dw 00,006584.pl1hero6manarec:db 0 6585.pl1hero6status: db 255 65876588pl2hero1y: db 36589pl2hero1x: db 665906591pl2hero1xp: dw 00006592pl2hero1move: db 20,206593pl2hero1mana: dw 50,106594pl2hero1manarec:db 5 6595pl2hero1status: db 1 6598Pl2Hero1Units: db 1 | dw 001 | db 001 | dw 010 | db 001 | dw 100 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6599.HeroStatAttack: db 06600.HeroStatDefense: db 06601.HeroStatKnowledge: db 1 6602.HeroStatSpellDamage: db 1 6603.HeroSkills: db 13,0,0,0,0,06604.HeroLevel: db 16605.EarthSpells: db %0000 1111 6606.FireSpells: db %0000 11116607.AirSpells: db %0000 11116608.WaterSpells: db %0000 11116609.AllSchoolsSpells: db %0000 111166106611.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,0456612.HeroSpecificInfo: dw HeroAddressesDrasle16613.HeroDYDX: dw $ffff 6617pl2hero2y: db 00 6618.pl1hero2x: db 04 6619.pl1hero6xp: dw 00006620.pl1hero6move: db 20,206621.pl1hero6mana: dw 10,206622.pl1hero6manarec:db 5 6623.pl1hero6status: db 1 6624.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6625.HeroStatAttack: db 16626.HeroStatDefense: db 16627.HeroStatKnowledge: db 1 6628.HeroStatSpellDamage: db 1 6629.HeroSkills: db 33,10,1,0,0,186630.HeroLevel: db 16631.EarthSpells: db %0000 0001 6632.FireSpells: db %0000 00016633.AirSpells: db %0000 00016634.WaterSpells: db %0000 00016635.AllSchoolsSpells: db %0000 00016636.Inventory: ds lenghtinventorytable,0456637.HeroSpecificInfo: dw HeroAddressesDrasle26638.HeroDYDX: dw $ffff 66416642pl2hero3y: ds lenghtherotable,2556643pl2hero4y: ds lenghtherotable,2556644pl2hero5y: ds lenghtherotable,2556645pl2hero6y: ds lenghtherotable,2556646pl2hero7y: ds lenghtherotable,2556647pl2hero8y: ds lenghtherotable,2556649pl2hero9y: db 00 6650.pl1hero6x: db 00 6651.pl1hero6xp: dw 00006652.pl1hero6move: db 00,006653.pl1hero6mana: dw 00,006654.pl1hero6manarec:db 0 6655.pl1hero6status: db 255 66576658pl3hero1y: db 806659pl3hero1x: db 406660pl3hero1xp: dw 00006661pl3hero1move: db 20,206662pl3hero1mana: dw 20,206663pl3hero1manarec:db 2 6664pl3hero1status: db 255 6665Pl3Hero1Units: db 033 | dw 103 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6666.HeroStatAttack: db 16667.HeroStatDefense: db 16668.HeroStatKnowledge: db 1 6669.HeroStatSpellDamage: db 1 6670.HeroSkills: db 33,10,1,0,18,06671.HeroLevel: db 16672.EarthSpells: db %0000 0000 6673.FireSpells: db %0000 00006674.AirSpells: db %0000 00006675.WaterSpells: db %0000 00006676.AllSchoolsSpells: db %0000 00006677.Inventory: ds lenghtinventorytable,0456678.HeroSpecificInfo: dw HeroAddressesGolvellius6679.HeroDYDX: dw $ffff 6681pl3hero2y: ds lenghtherotable,2556682pl3hero3y: ds lenghtherotable,2556683pl3hero4y: ds lenghtherotable,2556684pl3hero5y: ds lenghtherotable,2556685pl3hero6y: ds lenghtherotable,2556686pl3hero7y: ds lenghtherotable,2556687pl3hero8y: ds lenghtherotable,2556689pl3hero9y: db 00 6690.pl1hero6x: db 00 6691.pl1hero6xp: dw 00006692.pl1hero6move: db 00,006693.pl1hero6mana: dw 00,006694.pl1hero6manarec:db 0 6695.pl1hero6status: db 255 66976698pl4hero1y: db 1006699pl4hero1x: db 1006700pl4hero1xp: dw 00006701pl4hero1move: db 10,206702pl4hero1mana: dw 10,206703pl4hero1manarec:db 2 6704pl4hero1status: db 255 6705Pl4Hero1Units: db 053 | dw 001 | db 065 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6706.HeroStatAttack: db 16707.HeroStatDefense: db 16708.HeroStatKnowledge: db 1 6709.HeroStatSpellDamage: db 1 6710.HeroSkills: db 33,10,1,0,0,06711.HeroLevel: db 16712.EarthSpells: db %0000 0000 6713.FireSpells: db %0000 00006714.AirSpells: db %0000 00006715.WaterSpells: db %0000 00006716.AllSchoolsSpells: db %0000 00006717.Inventory: ds lenghtinventorytable,0456718.HeroSpecificInfo: dw HeroAddressesDrasle16719.HeroDYDX: dw $ffff 6721pl4hero2y: ds lenghtherotable,2556722pl4hero3y: ds lenghtherotable,2556723pl4hero4y: ds lenghtherotable,2556724pl4hero5y: ds lenghtherotable,2556725pl4hero6y: ds lenghtherotable,2556726pl4hero7y: ds lenghtherotable,2556727pl4hero8y: ds lenghtherotable,2556729pl4hero9y: db 00 6730.pl1hero6x: db 00 6731.pl1hero6xp: dw 00006732.pl1hero6move: db 00,006733.pl1hero6mana: dw 00,006734.pl1hero6manarec:db 0 6735.pl1hero6status: db 255 67376739CastleY: equ 06740CastleX: equ CastleY+16741CastlePlayer: equ CastleX+16742CastleLevel: equ CastlePlayer+16743CastleTavern: equ CastleLevel+16744CastleMarket: equ CastleTavern+16745CastleMageGuildLevel: equ CastleMarket+16746CastleBarracksLevel: equ CastleMageGuildLevel+16747CastleSawmillLevel: equ CastleBarracksLevel+16748CastleMineLevel: equ CastleSawmillLevel+16749AlreadyBuiltThisTurn?: equ CastleMineLevel+16750CastleName: equ AlreadyBuiltThisTurn?+16751CastleLevel1Units: equ CastleName+136752CastleLevel2Units: equ CastleLevel1Units+16753CastleLevel3Units: equ CastleLevel2Units+16754CastleLevel4Units: equ CastleLevel3Units+16755CastleLevel5Units: equ CastleLevel4Units+16756CastleLevel6Units: equ CastleLevel5Units+16757CastleLevel1UnitsAvail: equ CastleLevel6Units+16758CastleLevel2UnitsAvail: equ CastleLevel1UnitsAvail+26759CastleLevel3UnitsAvail: equ CastleLevel2UnitsAvail+26760CastleLevel4UnitsAvail: equ CastleLevel3UnitsAvail+26761CastleLevel5UnitsAvail: equ CastleLevel4UnitsAvail+26762CastleLevel6UnitsAvail: equ CastleLevel5UnitsAvail+26764AmountOfCastles: equ 46765LenghtCastleTable: equ Castle2-Castle16766 6768Castle1: db 255, 255, 255, 6, 1, 1, 0, 6, 0, 0, 0, "Outer Heave1",255, CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth6769Castle2: db 255, 255, 255, 1, 1, 1, 0, 6, 0, 0, 0, "Outer Heave1",255, usasUnitLevel1Number, usasUnitLevel2Number, usasUnitLevel3Number, usasUnitLevel4Number, usasUnitLevel5Number, usasUnitLevel6Number | dw usasUnitLevel1Growth, usasUnitLevel2Growth, usasUnitLevel3Growth, usasUnitLevel4Growth, usasUnitLevel5Growth, usasUnitLevel6Growth6770Castle3: db 255, 255, 255, 1, 1, 1, 0, 6, 0, 0, 0, "Outer Heave1",255, sdsnatcherUnitLevel1Number, sdsnatcherUnitLevel2Number, sdsnatcherUnitLevel3Number, sdsnatcherUnitLevel4Number, sdsnatcherUnitLevel5Number, sdsnatcherUnitLevel6Number | dw sdsnatcherUnitLevel1Growth, sdsnatcherUnitLevel2Growth, sdsnatcherUnitLevel3Growth, sdsnatcherUnitLevel4Growth, sdsnatcherUnitLevel5Growth, sdsnatcherUnitLevel6Growth6771Castle4: db 255, 255, 255, 1, 1, 1, 0, 6, 0, 0, 0, "Outer Heave1",255, psychoworldUnitLevel1Number, psychoworldUnitLevel2Number, psychoworldUnitLevel3Number, psychoworldUnitLevel4Number, psychoworldUnitLevel5Number, psychoworldUnitLevel6Number | dw psychoworldUnitLevel1Growth, psychoworldUnitLevel2Growth, psychoworldUnitLevel3Growth, psychoworldUnitLevel4Growth, psychoworldUnitLevel5Growth, psychoworldUnitLevel6Growth6772Castle5: db 255, 255, 25567736774WhichCastleIsPointerPointingAt?: ds 26775TempVariableCastleY: ds 16776TempVariableCastleX: ds 16778TavernHeroesTable:6779TavernHero1: equ 0 | TavernHero2: equ 1 | TavernHero3: equ 26780TavernHeroTableLenght: equ TavernHeroesPlayer2-TavernHeroesPlayer1-16781db 255 | TavernHeroesPlayer1: db 076,000,000,000,000,000,000,000,000,0006782db 255 | TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0006783db 255 | TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0006784db 255 | TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0006786AmountOfResourcesOffered: ds 26787AmountOfResourcesRequired: ds 26788CheckRequirementsWhichBuilding?: ds 26789ResourcesPlayer1:6790.Gold: dw 20000 6791.Wood: dw 20 6792.Ore: dw 20 6793.Gems: dw 10 6794.Rubies: dw 10 6795ResourcesPlayer2:6796.Gold: dw 20000 6797.Wood: dw 20 6798.Ore: dw 20 6799.Gems: dw 10 6800.Rubies: dw 10 6801ResourcesPlayer3:6802.Gold: dw 50006803.Wood: dw 3006804.Ore: dw 1006805.Gems: dw 606806.Rubies: dw 306807ResourcesPlayer4:6808.Gold: dw 50006809.Wood: dw 3006810.Ore: dw 1006811.Gems: dw 606812.Rubies: dw 306814 6815Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 16816Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 16817Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 06818Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 06820StartingTownLevel1Unit: ds 16821StartingTownLevel2Unit: ds 16822StartingTownLevel3Unit: ds 16823StartingTownLevel4Unit: ds 16824StartingTownLevel5Unit: ds 16825StartingTownLevel6Unit: ds 16827player1StartingTown: db 255 6828player2StartingTown: db 255 6829player3StartingTown: db 255 6830player4StartingTown: db 255 6832amountofplayers: db 36833player1human?: db 1 6834player2human?: db 16835player3human?: db 16836player4human?: db 26837whichplayernowplaying?: db 16839movementpathpointer: ds 1 6840movehero?: ds 16841movementspeed: ds 16843putmovementstars?: db 06844movementpath: ds 48*2 6845 db 128,1286846movementpathReverse: ds 48*2 6847ystar: ds 16848xstar: ds 16850currentherowindowclicked: db 16852MSXHeroes.asm 426endengine:427dephase428enlength: Equ $-engine430433 ds $c000-$,$ff 435436 ds $4000438439 ds $4000441444Loaderblock: equ $04445phase $4000446 loader.asm116243547LenghtMapData: equ GentleAutumnMap01-GentleMap0348GentleMaps:50GentleMap03: db GentleMap03MapBlock | dw GentleMap03Map | db GentleMap03ObjectLayerMapBlock | dw GentleMap03ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (100/2) - 128 | db "2",255,"S",255,"Pochi is Lost         ",255,"Icy gusts battered the",254,"Worzen residence.     ",254,"Pochi, their loyal    ",254,"dragon-dog, went      ",254,"missing. Royas, the   ",254,"youngest, stood quiet,",254,"his brow furrowed as  ",254,"he stretched out      ",254,"telepathically.       ",254,"Pochi's message was   ",254,"faint, echoing from an",254,"unfamiliar, oppressive",254,"place - the ominous   ",254,"castle in the north.  ",254,"'Pochi needs us',     ",254,"Royas finally declared",254,"with a firm voice.    ",254, 254,"Will the Worzen family",254,"rescue their beloved  ",254,"companion?            ",25551GentleAutumnMap01: db GentleAutumnMap01MapBlock | dw GentleAutumnMap01Map | db GentleAutumnMap01ObjectLayerMapBlock | dw GentleAutumnMap01ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (000/2) - 128 | db "3",255,"M",255,"Crossroads of Courage ",255,"An urgent plea pierces",254,"the Worzen home.      ",254,"Two fallen fortresses ",254,"cry for aid:          ",254,"Castlevania, overrun  ",254,"by ghouls and skeletal",254,"horrors, and Castle   ",254,"Junker HQ, swarming   ",254,"with the infamous     ",254,"Snatchers.            ",254,"The Worzen family,    ",254,"known for their       ",254,"unwavering courage and",254,"diverse skills, stands",254,"at the precipice of a ",254,"perilous choice.      ",254, 254,"Can you forge a unique",254,"strategy to reclaim   ",254,"both fortresses?      ",254,"                      ",255 52GentleDesertMap03: db GentleDesertMap03MapBlock | dw GentleDesertMap03Map | db GentleDesertMap03ObjectLayerMapBlock | dw GentleDesertMap03ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (100/2) - 128 | db "2",255,"M",255,"Whispers in the Sand  ",255,"Scorching sand lashed ",254,"Wit's face as he and  ",254,"Cles, his companion,  ",254,"stalked towards the   ",254,"mirage shimmering in  ",254,"the distance.         ",254,"Rumors echoed: Trevor ",254,"Belmont, the hero,    ",254,"lost to darkness.     ",254, 254,"Their goal: reach the ",254,"castle, infiltrate its",254,"defenses, and somehow ",254,"confront Trevor.      ",254,"Not to subdue, but to ",254,"help the once renowned",254,"vampire hunter, now   ",254,"consumed by darkness. ",254,"                      ",254,"                      ",254,"                      ",25553GentleWinterMap05: db GentleWinterMap05MapBlock | dw GentleWinterMap05Map | db GentleWinterMap05ObjectLayerMapBlock | dw GentleWinterMap05ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (200/2) - 128 | db "4",255,"S",255,"An Arctic Alliance    ",255,"Frigid plains erupt in",254,"war. Goemon and       ",254,"Ebisumaru, blades     ",254,"drawn, stand with the ",254,"Belmonts against an   ",254,"unholy alliance:      ",254,"Junker HQ have joined ",254,"forces with the       ",254,"Worzen's arcane might.",254, 254,"You, wielding Goemon's",254,"agility, Ebisumaru's  ",254,"flames, and the       ",254,"Belmonts' whips, must ",254,"overcome this dark    ",254,"pact in a desperate   ",254,"fight for supremacy.  ",254,"Will your alliance    ",254,"triumph, or will the  ",254,"frozen lands succumb  ",254,"to a new power?       ",25554GentleMap04: db GentleMap04MapBlock | dw GentleMap04Map | db GentleMap04ObjectLayerMapBlock | dw GentleMap04ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (150/2) - 128 | db "4",255,"M",255,"Felghana's Champion   ",255,"In the rugged terrain ",254,"of Felghana, Adol sets",254,"out on a daring quest.",254,"With sword in hand, he",254,"faces three formidable",254,"foes, each guarding a ",254,"mighty fortress. The  ",254,"fate of the land rests",254,"on his shoulders as he",254,"storms through enemy  ",254,"lines.                ",254,"                      ",254,"Adol's determination  ",254,"and courage shine as  ",254,"he presses forward,   ",254,"conquering one castle ",254,"after another,        ",254,"bringing peace to the ",254,"war-torn realm.       ",254,"                      ",254, 25555GentleCaveMap01: db GentleCaveMap01MapBlock | dw GentleCaveMap01Map | db GentleCaveMap01ObjectLayerMapBlock | dw GentleCaveMap01ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (000/2) - 128 | db "2",255,"M",255,"Mildew and Moonlight  ",255,"In the depths of the  ",254,"earth, Lucia, a       ",254,"formidable sorcerer,  ",254,"embarks on a quest to ",254,"uncover ancient       ",254,"secrets.              ",254,"Descending into       ",254,"cavernous depths she  ",254,"seeks the lost castle ",254,"guarded by the        ",254,"legendary Adol.       ",254, 254,"Armed with powerful   ",254,"magic, she navigates  ",254,"treacherous passages, ",254,"overcoming fierce     ",254,"guardians to reach her",254,"elusive goal.         ",254,"                      ",254,"                      ",254,"                      ",25556GentleJungleMap05: db GentleJungleMap05MapBlock | dw GentleJungleMap05Map | db GentleJungleMap05ObjectLayerMapBlock | dw GentleJungleMap05ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (200/2) - 128 | db "3",255,"M",255,"A Jungle Expedition   ",255,"In the dense, murky   ",254,"jungle, Dr. Hank      ",254,"Mitchell ventures     ",254,"forth, navigating     ",254,"treacherous swamps and",254,"overgrown paths.      ",254,"His mission: to reach ",254,"the formidable castle ",254,"guarded by the        ",254,"sorceress Lucia.      ",254,"                      ",254,"Meanwhile, Lucia      ",254,"senses his approach   ",254,"and prepares her      ",254,"defenses, weaving     ",254,"spells to thwart his  ",254,"advance.              ",254, 254,"                      ",254,"                      ",254,"                      ",25557GentleAutumnMap02: db GentleAutumnMap02MapBlock | dw GentleAutumnMap02Map | db GentleAutumnMap02ObjectLayerMapBlock | dw GentleAutumnMap02ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (050/2) - 128 | db "2",255,"M",255,"The Valley of Doom    ",255,"In the heart of the   ",254,"Valley of Doom,       ",254,"Kelesis embarks on a  ",254,"perilous quest. With  ",254,"just two months to    ",254,"reach Dr. Hank        ",254,"Mitchell's castle, the",254,"stakes are high.      ",254, 254,"A powerful magical    ",254,"artifact, hidden      ",254,"within the castle's   ",254,"depths, is due to be  ",254,"activated by the next ",254,"full moon. This would ",254,"have catastrophic     ",254,"consequences, plunging",254,"the entire kingdom    ",254,"into darkness and     ",254,"chaos.                ",254,"                      ",25558GentleJungleMap02: db GentleJungleMap02MapBlock | dw GentleJungleMap02Map | db GentleJungleMap02ObjectLayerMapBlock | dw GentleJungleMap02ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (050/2) - 128 | db "2",255,"M",255,"A Jungle Retreat      ",255,"Bill Rizer ventures   ",254,"through the dense     ",254,"jungle, seeking an    ",254,"escape to Drasle's    ",254,"Den.                  ",254,"He stumbles upon a    ",254,"hidden cave, hopeful  ",254,"for safe passage.     ",254,"Inside, he encounters ",254,"Pochi, the family     ",254,"dragon-dog, whose     ",254,"warm welcome is       ",254,"uncertain.            ",254,"With cautious steps,  ",254,"Bill approaches,      ",254,"hoping for friendship ",254,"amidst the uncertainty",254,"of the jungle's       ",254,"depths.               ",254, 254,"                      ",25559GentleWinterMap03: db GentleWinterMap03MapBlock | dw GentleWinterMap03Map | db GentleWinterMap03ObjectLayerMapBlock | dw GentleWinterMap03ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (100/2) - 128 | db "4",255,"S",255,"Rally Against Rizer   ",255,"Amidst the towering   ",254,"walls of an armed     ",254,"fortress, Bill Rizer, ",254,"wielding his army,    ",254,"prepares for battle.  ",254,"                      ",254,"You assemble a team   ",254,"of MSX legends to     ",254,"counter his forces.   ",254,"Together you          ",254,"strategize to breach  ",254,"the fortress and      ",254,"confront Bill Rizer.  ",254, 254,"Choose your heroes    ",254,"wisely and prepare for",254,"the ultimate showdown.",254,"Victory or defeat     ",254,"awaits within the     ",254,"fortress's walls.     ",254,"                      ",25561GentleAutumnMap03: db GentleAutumnMap03MapBlock | dw GentleAutumnMap03Map | db GentleAutumnMap03ObjectLayerMapBlock | dw GentleAutumnMap03ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (100/2) - 128 | db "3",255,"L",255,"Into the Fray         ",255,"Fray, a spirited young",254,"sorceress, sets out   ",254,"from her humble home  ",254,"in search of          ",254,"adventure.            ",254, 254,"Her quest?            ",254,"To conquer the two    ",254,"formidable castles    ",254,"that loom over her    ",254,"realm like ancient    ",254,"guardians.            ",254,"                      ",254,"As Fray's quest       ",254,"unfolds, she embraces ",254,"the unknown with      ",254,"courage and           ",254,"determination, ready  ",254,"to conquer whatever   ",254,"obstacles stand in her",254,"path.                 ",25562GentleJungleMap04: db GentleJungleMap04MapBlock | dw GentleJungleMap04Map | db GentleJungleMap04ObjectLayerMapBlock | dw GentleJungleMap04ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (150/2) - 128 | db "4",255,"L",255,"The Soldier's Path    ",255,"Solid Snake traverses ",254,"rugged terrain and    ",254,"encounters perilous   ",254,"obstacles. Along the  ",254,"way, he marches       ",254,"toward the castle in  ",254,"the northwest, to form",254,"a powerful alliance.  ",254, 254,"As he unites with the ",254,"castle's forces, Solid",254,"Snake leads the charge",254,"against the foes in   ",254,"the southern castles, ",254,"using his tactical    ",254,"prowess and combat    ",254,"skills to secure      ",254,"victory and bring     ",254,"peace to the land.    ",254,"                      ",254,"                      ",25563GentleCaveMap05: db GentleCaveMap05MapBlock | dw GentleCaveMap05Map | db GentleCaveMap05ObjectLayerMapBlock | dw GentleCaveMap05ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (200/2) - 128 | db "2",255,"M",255,"Where East Meets West ",255,"A formidable sorcerer ",254,"named Dino reigns with",254,"dark power.           ",254,"His tyranny threatens ",254,"the land.             ",254,"                      ",254,"Only by launching a   ",254,"coordinated assault   ",254,"from both the west and",254,"east can he be        ",254,"defeated.             ",254, 254,"Two heroes arise.     ",254,"                      ",254,"Get ready to confront ",254,"Dino's might.         ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25564GentleWinterMap04: db GentleWinterMap04MapBlock | dw GentleWinterMap04Map | db GentleWinterMap04ObjectLayerMapBlock | dw GentleWinterMap04ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (150/2) - 128 | db "4",255,"M",255,"Three Reigns Fallen   ",255,"In a realm not yet    ",254,"touched by the sun's  ",254,"descent, Ashguine, the",254,"formidable warrior,   ",254,"embarks on a conquest ",254,"that will echo through",254,"history. With each    ",254,"step, he lays claim to",254,"three kingdoms, his   ",254,"blade a beacon of     ",254,"relentless            ",254,"determination.        ",254, 254,"As the day unfolds,   ",254,"the kingdoms tremble, ",254,"unaware of the force  ",254,"that approaches,      ",254,"destined to reshape   ",254,"their destiny with the",254,"singular might of one ",254,"determined soul.      ",25565GentleDesertMap01: db GentleDesertMap01MapBlock | dw GentleDesertMap01Map | db GentleDesertMap01ObjectLayerMapBlock | dw GentleDesertMap01ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (000/2) - 128 | db "4",255,"L",255,"Prince Logan's Odyssey",255,"In the realm of       ",254,"Isrenhasa, Prince     ",254,"Logan embarks on a    ",254,"perilous quest to save",254,"his kingdom from      ",254,"darkness.             ",254,"He sets forth to free ",254,"two kingdoms ensnared ",254,"by sinister forces.   ",254,"Prince Logan must     ",254,"unlock the secrets of ",254,"ancient magic to      ",254,"restore peace to his  ",254,"world.                ",254,"With each step, he    ",254,"draws closer to       ",254,"fulfilling his destiny",254,"and vanquishing the   ",254,"shadows that threaten ",254,"to consume Isrenhasa. ",254, 25566GentleMap05: db GentleMap05MapBlock | dw GentleMap05Map | db GentleMap05ObjectLayerMapBlock | dw GentleMap05ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (200/2) - 128 | db "4",255,"L",255,"Chronicles of Herzog  ",255,"In a strategic        ",254,"alliance, Mercies and ",254,"Ruth unite to broaden ",254,"their dominion.       ",254,"Together, they aim to ",254,"seize three pivotal   ",254,"fortresses.           ",254,"With synchronized     ",254,"tactics and unyielding",254,"determination, they   ",254,"march towards victory.",254, 254,"As allies turned      ",254,"champions, they forge ",254,"an indomitable force, ",254,"unstoppable in their  ",254,"pursuit of territorial",254,"supremacy.            ",254,"                      ",254,"                      ",254,"                      ",25567GentleAutumnMap05: db GentleAutumnMap05MapBlock | dw GentleAutumnMap05Map | db GentleAutumnMap05ObjectLayerMapBlock | dw GentleAutumnMap05ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (200/2) - 128 | db "4",255,"M",255,"Reign of the Druid    ",255,"In a land of forgotten",254,"kingdoms, the Young   ",254,"Noble, lost and alone,",254,"stumbles upon four    ",254,"abandoned castles.    ",254, 254,"Amidst the ruins, he  ",254,"learns of an evil     ",254,"druid's reign of      ",254,"darkness.             ",254,"                      ",254,"With courage as his   ",254,"only weapon, he       ",254,"confronts the         ",254,"malevolent foe,       ",254,"determined to restore ",254,"light to the forsaken ",254,"realm.                ",254,"                      ",254,"                      ",254,"                      ",25568GentleWinterMap02: db GentleWinterMap02MapBlock | dw GentleWinterMap02Map | db GentleWinterMap02ObjectLayerMapBlock | dw GentleWinterMap02ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (050/2) - 128 | db "2",255,"M",255,"Pocky's Castle Crusade",255,"In the mystical world ",254,"of Pocky and Rocky,   ",254,"our brave hero, Pocky,",254,"embarks on a daring   ",254,"quest to conquer a    ",254,"towering castle       ",254,"shrouded in darkness. ",254,"                      ",254,"Armed with his trusty ",254,"broomstick and        ",254,"unwavering            ",254,"determination, Pocky  ",254,"faces treacherous     ",254,"traps and fierce foes.",254,"                      ",254,"Will Pocky emerge as a",254,"true hero, revered by ",254,"all who dwell in the  ",254,"realm?                ",254,"                      ",254, 25569GentleMap01: db GentleMap01MapBlock | dw GentleMap01Map | db GentleMap01ObjectLayerMapBlock | dw GentleMap01ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (000/2) - 128 | db "4",255,"L",255,"Lololand              ",255,"In the whimsical land ",254,"of Eggerland, our hero",254,"Lolo embarks on a     ",254,"grand adventure.      ",254, 254,"With a gleam in his   ",254,"eye and a puzzle-     ",254,"solving mind, he sets ",254,"out to explore the    ",254,"vast kingdom.         ",254,"Along the way, he     ",254,"encounters mischievous",254,"creatures and tricky  ",254,"traps, but Lolo's     ",254,"determination never   ",254,"wavers. With a mix of ",254,"wit and charm, he     ",254,"outsmarts every       ",254,"challenge, leaving a  ",254,"trail of laughter in  ",254,"his wake.             ",25570GentleCaveMap03: db GentleCaveMap03MapBlock | dw GentleCaveMap03Map | db GentleCaveMap03ObjectLayerMapBlock | dw GentleCaveMap03ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (100/2) - 128 | db "2",255,"M",255,"Comical Cavern Clash  ",255,"In the depths of a    ",254,"mysterious cave,      ",254,"Pippols and Lolo      ",254,"engage in a friendly  ",254,"competition.          ",254,"Armed with creativity,",254,"they gather creatures ",254,"far and wide to build ",254,"their armies.         ",254, 254,"Pippols recruits      ",254,"mighty dwarves and    ",254,"mischievous goblins,  ",254,"while Lolo enlists    ",254,"brave adventurers and ",254,"cunning monsters.     ",254,"                      ",254,"As their armies grow, ",254,"so does the excitement",254,"of the impending      ",254,"showdown.             ",25572GentleJungleMap01: db GentleJungleMap01MapBlock | dw GentleJungleMap01Map | db GentleJungleMap01ObjectLayerMapBlock | dw GentleJungleMap01ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (000/2) - 128 | db "4",255,"L",255,"Randar's Last Stand   ",255,"You, the valiant      ",254,"player, command a trio",254,"of mighty fortresses, ",254,"brimming with heroes  ",254,"itching for adventure.",254,"                      ",254,"With just four months ",254,"on the clock, the race",254,"is on to amass the    ",254,"most eccentric army   ",254,"imaginable and storm  ",254,"Randar's unsuspecting ",254,"stronghold.           ",254, 254,"Get ready to conquer  ",254,"with a grin in this   ",254,"uproarious clash of   ",254,"castles.              ",254,"                      ",254,"                      ",254,"                      ",25573GentleDesertMap02: db GentleDesertMap02MapBlock | dw GentleDesertMap02Map | db GentleDesertMap02ObjectLayerMapBlock | dw GentleDesertMap02ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (050/2) - 128 | db "4",255,"L",255,"A Desert Blood Moon   ",255,"The desert sun beat   ",254,"down on Luice and     ",254,"Dick, two adventurers ",254,"as mismatched as      ",254,"flip-flops on a camel.",254,"                      ",254,"Their mission: retake ",254,"the Three Sunken      ",254,"Spires, glorious      ",254,"sandcastles stolen by ",254,"the nefarious Belmont ",254,"family.               ",254,"                      ",254,"Through trials and    ",254,"triumphs, Luice and   ",254,"Dick prove that even  ",254,"in the harshest of    ",254,"landscapes,           ",254,"friendship and bravery",254,"prevail.              ",254, 25574GentleWinterMap01: db GentleWinterMap01MapBlock | dw GentleWinterMap01Map | db GentleWinterMap01ObjectLayerMapBlock | dw GentleWinterMap01ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (000/2) - 128 | db "2",255,"M",255,"A Beloved Journey     ",255,"Popolon and Aphrodite ",254,"embark on a frosty    ",254,"adventure, seeking the",254,"coveted Emerald Gloves",254,"hidden in the icy     ",254,"realm.                ",254,"Through snowstorms and",254,"perilous cliffs, they ",254,"press on, facing      ",254,"challenges and        ",254,"adversaries.          ",254, 254,"But the final showdown",254,"awaits as they        ",254,"approach the Gloves.  ",254,"                      ",254,"Ruika, the mighty     ",254,"ninja warrior stands  ",254,"in their way, ready to",254,"unleash her full      ",254,"might.                ",25575GentleAutumnMap04: db GentleAutumnMap04MapBlock | dw GentleAutumnMap04Map | db GentleAutumnMap04ObjectLayerMapBlock | dw GentleAutumnMap04ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (150/2) - 128 | db "2",255,"S",255,"Amber Skies, Rogue AI ",255,"In the golden hues of ",254,"autumn, amidst the    ",254,"rustling leaves of    ",254,"Illusion City, Tien   ",254,"Ren, Ho Mei, and Mei  ",254,"Hong embark on a      ",254,"daring mission.       ",254, 254,"Armed with their      ",254,"trusty snatchers, they",254,"confront a rogue AI   ",254,"snatcher threatening  ",254,"the city's peace.     ",254,"                      ",254,"Can they restore order",254,"to Illusion City and  ",254,"protect it from the   ",254,"chaos within, amidst  ",254,"the enchanting beauty ",254,"of the autumn         ",254,"landscape?            ",2557677GentleDesertMap04: db GentleDesertMap04MapBlock | dw GentleDesertMap04Map | db GentleDesertMap04ObjectLayerMapBlock | dw GentleDesertMap04ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (150/2) - 128 | db "2",255,"S",255,"Dragons' Deliverance  ",255,"In a race against the ",254,"clock, you embark on a",254,"daring mission to stop",254,"Dr. Hank Mitchell's   ",254,"sinister plans.       ",254, 254,"With just two months  ",254,"on the clock, the fate",254,"of mythical dragons   ",254,"hangs in the balance  ",254,"within the confines of",254,"his menacing castle.  ",254,"                      ",254,"You set out to        ",254,"confront the nefarious",254,"Dr. Mitchell and      ",254,"liberate the captive  ",254,"creatures before it's ",254,"too late.             ",254,"                      ",254,"The clock is ticking..",25578GentleCaveMap04: db GentleCaveMap04MapBlock | dw GentleCaveMap04Map | db GentleCaveMap04ObjectLayerMapBlock | dw GentleCaveMap04ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (150/2) - 128 | db "2",255,"M",255,"Hunting Dr. Mitchell  ",255,"In pursuit of Dr. Hank",254,"Mitchell, you delve   ",254,"into the labyrinthine ",254,"cave system.          ",254,"Confronting him in his",254,"fortress, you discover",254,"his upgraded dragon   ",254,"army.                 ",254,"                      ",254,"You prepare to thwart ",254,"his sinister plans    ",254,"once more.            ",254,"                      ",254,"Time is of the essence",254,"as you brace for the  ",254,"ultimate showdown to  ",254,"safeguard the realm   ",254,"from his tyranny.     ",254,"                      ",254,"                      ",254, 25579GentleJungleMap03: db GentleJungleMap03MapBlock | dw GentleJungleMap03Map | db GentleJungleMap03ObjectLayerMapBlock | dw GentleJungleMap03ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (100/2) - 128 | db "3",255,"M",255,"Heart of the Jungle   ",255,"Bill Rizer, amidst the",254,"dense jungle foliage, ",254,"faces his ultimate    ",254,"challenge. With laser ",254,"precision, he battles ",254,"through swarms of     ",254,"enemies.              ",254,"                      ",254,"The air thickens with ",254,"anticipation as he    ",254,"approaches two        ",254,"fortresses, guarded by",254,"the formidable        ",254,"adversaries Big Boss  ",254,"and Grey Fox.         ",254,"                      ",254,"Victory is within     ",254,"reach as Bill's       ",254,"indomitable spirit    ",254,"drives him onward.    ",254, 25580GentleMap02: db GentleMap02MapBlock | dw GentleMap02Map | db GentleMap02ObjectLayerMapBlock | dw GentleMap02ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (050/2) - 128 | db "3",255,"M",255,"Dawn of the Ninja     ",255,"In the shadowy veil of",254,"night, Ninja Ruika    ",254,"rallies her skilled   ",254,"warriors, sworn to    ",254,"reclaim two pillaged  ",254,"towns.                ",254,"                      ",254,"With swift precision, ",254,"they traverse rugged  ",254,"terrain, their resolve",254,"unyielding.           ",254, 254,"Amidst the whispering ",254,"winds, their mission  ",254,"is clear: restore     ",254,"peace to the ravaged  ",254,"lands.                ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25581GentleDesertMap05: db GentleDesertMap05MapBlock | dw GentleDesertMap05Map | db GentleDesertMap05ObjectLayerMapBlock | dw GentleDesertMap05ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (200/2) - 128 | db "2",255,"S",255,"Pixy's Bubble Symphony",255,"In the heart of the   ",254,"scorching desert, Pixy",254,"embarks on her daring ",254,"quest, accompanied by ",254,"the whimsical         ",254,"creatures from the    ",254,"magical realm of      ",254,"Bubble Bobble.        ",254,"                      ",254,"She sets her sights on",254,"the castle to the     ",254,"south, where the      ",254,"nefarious Doctor      ",254,"Pettrovich awaits.    ",254, 254,"Can she conquer the   ",254,"castle and restore    ",254,"peace to the desert   ",254,"realm?                ",254,"                      ",254,"                      ",25582GentleCaveMap02: db GentleCaveMap02MapBlock | dw GentleCaveMap02Map | db GentleCaveMap02ObjectLayerMapBlock | dw GentleCaveMap02ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (050/2) - 128 | db "4",255,"L",255,"A Worzen Family Epic  ",255,"In the depths of the  ",254,"cave dwellings, the   ",254,"Worzen family, under  ",254,"your leadership, faces",254,"relentless adversaries",254,"to reclaim their      ",254,"throne.               ",254,"                      ",254,"With every strike and ",254,"spell, they fight on, ",254,"determined to triumph ",254,"in three palaces and  ",254,"restore their rightful",254,"rule.                 ",254,"                      ",254,"Victory hangs in the  ",254,"balance as they press ",254,"forward, unwavering in",254,"their resolve.        ",254,"                      ",254, 25584899398 99MiniMapBlock: equ 12 100MiniMapAddress: equ 13101 102103XMiniMap: equ 203104YMiniMap: equ 005105LoadMiniMap:106 ld ix,(WorldPointer)107 ld l,(ix+MiniMapAddress) 108 ld h,(ix+MiniMapAddress+1) 109 ld de,$0000 + (YMiniMap*128) + (XMiniMap/2) - 128110 ld bc,$0000 + (048*256) + (050/2)111 ld a,(ix+MiniMapBlock) 112 jp CopyRamToVramCorrectedCastleOverview 114XMiniMapScenarioSelectScreen: equ 174115YMiniMapScenarioSelectScreen: equ 033116PutMiniMapScenarioSelectScreen:117 ld ix,(WorldPointer)118 ld l,(ix+MiniMapAddress) 119 ld h,(ix+MiniMapAddress+1) 120 ld de,$0000 + (YMiniMapScenarioSelectScreen*128) + (XMiniMapScenarioSelectScreen/2) - 128121 ld bc,$0000 + (048*256) + (050/2)122 ld a,(ix+MiniMapBlock) 123 call CopyRamToVramCorrectedCastleOverview 124 halt125 ld ix,(WorldPointer)126 call SetMapPalette127 jp SwapAndSetPage 129ShuffleCastleMageGuildSpells: 130 ld a,r131 and 3132 ld hl,.Castle1Spells133 jr z,.SpellsFound134 dec a135 ld hl,.Castle2Spells136 jr z,.SpellsFound137 dec a138 ld hl,.Castle3Spells139 jr z,.SpellsFound140141 ld hl,.Castle4Spells142144 .SpellsFound:145 ld de,Castle1Spells146 ld bc,4*4 147 ldir148 ret150 151.Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 1152.Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 1153.Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 0154.Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 0155.Castle5Spells: db % 0 1 0 1, % 1 0 1 0, % 0 0 1 1, % 1 1 0 0156.Castle6Spells: db % 1 0 1 0, % 0 1 0 1, % 1 0 0 1, % 0 1 1 0157.Castle7Spells: db % 0 1 0 1, % 1 0 1 0, % 1 1 0 0, % 0 0 1 1158.Castle8Spells: db % 1 0 1 0, % 0 1 0 1, % 0 1 1 0, % 1 0 0 1160SetCastlesInMiniMap:161 ld ix,Castle1162 call .SetCastle163 ld ix,Castle2164 call .SetCastle165 ld ix,Castle3166 call .SetCastle167 ld ix,Castle4168 call .SetCastle169 ret171 .SetCastle:172174 ld a,(ix+CastleX)175 cp 255176 ret z177 ld h,0178 ld l,a179 ld de,3 180 call MultiplyHlWithDE 181 push hl182 pop bc183 ld de,8 184 call DivideBCbyDE 185 push bc186 187 ld l,(ix+CastleY)188 ld h,0189 ld de,3 190 call MultiplyHlWithDE 191 push hl192 pop bc193 ld de,8 194 call DivideBCbyDE 196 pop de197 ld a,c198 add YMiniMap-2199 ld d,a201 ld a,e202 add XMiniMap-1203 ld e,a204 205 ld hl,$4000 + (071*128) + (212/2) - 128206207 ld bc,$0000 + (004*256) + (004/2)208 ld a,HudNewBlock 209 exx210 ex af,af'211 ld hl,CopyTransparantImageEXX212 jp EnterSpecificRoutineInCastleOverviewCode214ConvertMonstersObjectLayer:215 218 220 221 ld hl,$8000-1223 .loopAndXorA:224 xor a225 .loop:226 inc hl227 bit 6,h 228 ret nz230 or (hl)231 jp z,.loop232 233 .Check:234 cp 7235 jr nc,.loopAndXorA237 dec a238 jp z,.Level1Monster239 dec a240 jr z,.Level2Monster241 dec a242 jr z,.Level3Monster243 dec a244 jr z,.Level4Monster245 dec a246 jr z,.Level5Monster248 .Level6Monster:249 ld de,(MonsterLevel6Pointer)250 ld a,(de)251 cp 255252 jr z,.Level5Monster253 call .ConvertLevelToMonster254 jr nz,.SetMonsterLevel6Pointer255 ld de,ListOfUnlockedMonstersLevel6256 .SetMonsterLevel6Pointer:257 ld (MonsterLevel6Pointer),de258 jp .loopAndXorA260 .Level5Monster:261 ld de,(MonsterLevel5Pointer)262 ld a,(de)263 cp 255264 jr z,.Level4Monster265 call .ConvertLevelToMonster266 jr nz,.SetMonsterLevel5Pointer267 ld de,ListOfUnlockedMonstersLevel5268 .SetMonsterLevel5Pointer:269 ld (MonsterLevel5Pointer),de270 jp .loopAndXorA272 .Level4Monster:273 ld de,(MonsterLevel4Pointer)274 ld a,(de)275 cp 255276 jr z,.Level3Monster277 call .ConvertLevelToMonster278 jr nz,.SetMonsterLevel4Pointer279 ld de,ListOfUnlockedMonstersLevel4280 .SetMonsterLevel4Pointer:281 ld (MonsterLevel4Pointer),de282 jp .loopAndXorA284 .Level3Monster:285 ld de,(MonsterLevel3Pointer)286 call .ConvertLevelToMonster287 jr nz,.SetMonsterLevel3Pointer288 ld de,ListOfUnlockedMonstersLevel3289 .SetMonsterLevel3Pointer:290 ld (MonsterLevel3Pointer),de291 jp .loopAndXorA293 .Level2Monster:294 ld de,(MonsterLevel2Pointer)295 call .ConvertLevelToMonster296 jr nz,.SetMonsterLevel2Pointer297 ld de,ListOfUnlockedMonstersLevel2298 .SetMonsterLevel2Pointer:299 ld (MonsterLevel2Pointer),de300 jp .loopAndXorA301 302 .Level1Monster:303 ld de,(MonsterLevel1Pointer)304 call .ConvertLevelToMonster305 jr nz,.SetMonsterLevel1Pointer306 ld de,ListOfUnlockedMonstersLevel1307 .SetMonsterLevel1Pointer:308 ld (MonsterLevel1Pointer),de309 jp .loopAndXorA311 .ConvertLevelToMonster:312 ld a,(de)313 ld (hl),a314 cp 160 315 jr nc,.EndCheck1Or2TilesInSize316 ld bc,-128317 add hl,bc318 add a,64+6 319 ld (hl),a320 sbc hl,bc321 322 .EndCheck1Or2TilesInSize:323 inc de324 ld a,(de)325 or a326 ret328CastleTileNr: equ 254329Number1Tile: equ 192330FindAndSetCastles: 331 ld a,255332 ld (Castle1+CastlePlayer),a 333 ld (Castle2+CastlePlayer),a334 ld (Castle3+CastlePlayer),a335 ld (Castle4+CastlePlayer),a336 ld (Castle1+CastleY),a 337 ld (Castle2+CastleY),a338 ld (Castle3+CastleY),a339 ld (Castle4+CastleY),a340 ld (Castle1+CastleX),a 341 ld (Castle2+CastleX),a342 ld (Castle3+CastleX),a343 ld (Castle4+CastleX),a345 348 350 351 ld hl,$8000-1352 .SetCastleTileNrAndGoloop:353 ld a,CastleTileNr354 .loop:355 inc hl356 bit 6,h 357 ret nz358 cp (hl)359 jr nz,.loop361 ld a,l 362 and 127363 dec a364 ld e,a 366 push hl367 push hl368 pop bc370 inc hl 371 ld a,(hl)372 sub a,Number1Tile-1373 374 cp 1375 ld iy,player1human? 376 ld ix,Castle1377 jr z,.CastleNrFound378 cp 2379 ld iy,player2human? 380 ld ix,Castle2 381 jr z,.CastleNrFound382 cp 3383 ld iy,player3human? 384 ld ix,Castle3385 jr z,.CastleNrFound386 ld iy,player4human? 387 ld ix,Castle4388 .CastleNrFound:389 390 ld (ix+CastlePlayer),a391 ld a,(iy)392 cp 2 393 jr nz,.EndCheckPlayerOff394 ld (ix+CastlePlayer),255 395 .EndCheckPlayerOff:397 ld (ix+CastleX),e398 ld (hl),0 400 ld de,128401 call DivideBCbyDE 402 403 ld a,c 404 inc a405 ld (ix+CastleY),a 407 pop hl408 jp .SetCastleTileNrAndGoloop410PlaceHeroesInCastles: 411 ld ix,Castle1412 ld iy,pl1hero1y413 call .SetHeroInCastle415 ld ix,Castle2416 ld iy,pl2hero1y417 call .SetHeroInCastle419 ld a,(amountofplayers)420 cp 2421 ret z423 ld ix,Castle3424 ld iy,pl3hero1y425 call .SetHeroInCastle427 ld a,(amountofplayers)428 cp 3429 ret z431 ld ix,Castle4432 ld iy,pl4hero1y433 call .SetHeroInCastle434 ret436 .SetHeroInCastle:437 ld a,(ix+CastleY)438 dec a439 ld (iy+HeroY),a440 ld a,(ix+CastleX)441 add a,2442 ld (iy+HeroX),a443 ld (iy+HeroStatus),2 444 ret446447CHMOUS: 448 call .go449 LD a,(MOUSIDBuffer)450 LD (MOUSID),A451 LD a,(MSEPRTBuffer)452 LD (MSEPRT),A453 ret454 .go:456 CALL .MOUSIN457 LD A,$10 458 LD (MSEPRTBuffer),A459 CALL .CHMS.0460 JP NC,.MOUSIN461 LD A,$60 462 LD (MSEPRTBuffer),A463 CALL .CHMS.0464 JP NC,.MOUSIN465 466 XOR A 467 LD (MOUSIDBuffer),A468470 RET 471 472 473.MOUSIN: LD A,255474 LD (MOUSIDBuffer),A475 LD HL,DLY_M2 486 EI 487 RET 488 489.CHMS.0: LD B,40 490.CHMS.1: PUSH BC491 CALL .RDPADL492 LD A,H 493 CP 1 494 JP NZ,.CHMS.2495 LD A,L 496 CP 1497 JP NZ,.CHMS.2498 POP BC499 DJNZ .CHMS.1500 SCF 501 RET 502.CHMS.2: POP BC 503 AND A 504 RET 507510.RDPADL: PUSH BC511 PUSH DE512 513 LD DE,(MSEPRTBuffer)514 LD A,15 515 CALL RD_PSG516 AND %10001111 517 OR E 518 LD E,A519 520521 LD B,40 522 LD C,20 523 CALL .RPDL.2524 CALL .RPDL.0525 LD H,A526 527528 CALL .RPDL.1529 CALL .RPDL.0530 LD L,A531 532 EI 533 POP DE534 POP BC535 RET 536 537.RPDL.0: RLCA 538 RLCA 539 RLCA 540 RLCA 541 LD D,A542 CALL .RPDL.1543 OR D544 NEG 545 RET 546 547.RPDL.1: LD B,7548 LD C,6549.RPDL.2: LD A,15550 CALL WR_PSG551 LD A,(MSEPRTBuffer)552 AND $30553 XOR E554 LD E,A555.DLYCAL: CALL DLY_M2556 LD A,14557 CALL RD_PSG558 AND $0F559 RET 560MSXHeroes.asm 447endLoader:448 ds $8000-$,$ff 449dephase451454InsertMouseBlock: equ $05455phase $4000456 incbin "..\grapx\TitleScreen\InsertMouse.SC5",7,112 * 128 457 ds $8000-$,$ff458dephase460AdolSpriteBlock: equ HeroesSpritesBlock1461Goemon1SpriteBlock: equ HeroesSpritesBlock1462PixySpriteBlock: equ HeroesSpritesBlock1463Drasle1SpriteBlock: equ HeroesSpritesBlock1464LatokSpriteBlock: equ HeroesSpritesBlock1465Drasle2SpriteBlock: equ HeroesSpritesBlock1466Snake1SpriteBlock: equ HeroesSpritesBlock1467Drasle3SpriteBlock: equ HeroesSpritesBlock1469Snake2SpriteBlock: equ HeroesSpritesBlock2470Drasle4SpriteBlock: equ HeroesSpritesBlock2471AshguineSpriteBlock: equ HeroesSpritesBlock2472Undeadline1SpriteBlock: equ HeroesSpritesBlock2473PsychoWorldSpriteBlock: equ HeroesSpritesBlock2474Undeadline2SpriteBlock: equ HeroesSpritesBlock2475Goemon2SpriteBlock: equ HeroesSpritesBlock2476Undeadline3SpriteBlock: equ HeroesSpritesBlock2478FraySpriteBlock: equ HeroesSpritesBlock3479BlackColorSpriteBlock: equ HeroesSpritesBlock3480WitSpriteBlock: equ HeroesSpritesBlock3481MitchellSpriteBlock: equ HeroesSpritesBlock3482JanJackGibsonSpriteBlock: equ HeroesSpritesBlock3483GillianSeedSpriteBlock: equ HeroesSpritesBlock3484SnatcherSpriteBlock: equ HeroesSpritesBlock3485GolvelliusSpriteBlock: equ HeroesSpritesBlock3487BillRizerSpriteBlock: equ HeroesSpritesBlock4488PochiSpriteBlock: equ HeroesSpritesBlock4489GreyFoxSpriteBlock: equ HeroesSpritesBlock4490TrevorBelmontSpriteBlock: equ HeroesSpritesBlock4491BigBossSpriteBlock: equ HeroesSpritesBlock4492SimonBelmontSpriteBlock: equ HeroesSpritesBlock4493DrPettrovichSpriteBlock: equ HeroesSpritesBlock4494RichterBelmontSpriteBlock: equ HeroesSpritesBlock4496UltraBoxSpriteBlock: equ HeroesSpritesBlock5497LoganSeriosSpriteBlock: equ HeroesSpritesBlock5498HollyWhiteSpriteBlock: equ HeroesSpritesBlock5499MerciesSpriteBlock: equ HeroesSpritesBlock5500NatashaRomanenkoSpriteBlock: equ HeroesSpritesBlock5501RuthSpriteBlock: equ HeroesSpritesBlock5502GeeraSpriteBlock: equ HeroesSpritesBlock5503YoungNobleSpriteBlock: equ HeroesSpritesBlock5505DawelSpriteBlock: equ HeroesSpritesBlock6506PockySpriteBlock: equ HeroesSpritesBlock6507KelesisTheCookSpriteBlock: equ HeroesSpritesBlock6508LoloSpriteBlock: equ HeroesSpritesBlock6509PippolsSpriteBlock: equ HeroesSpritesBlock6510RandarSpriteBlock: equ HeroesSpritesBlock6511ClesSpriteBlock: equ HeroesSpritesBlock6512LuiceSpriteBlock: equ HeroesSpritesBlock6514DickSpriteBlock: equ HeroesSpritesBlock7515AphroditeSpriteBlock: equ HeroesSpritesBlock7516TienRenSpriteBlock: equ HeroesSpritesBlock7517PopolonSpriteBlock: equ HeroesSpritesBlock7518HoMeiSpriteBlock: equ HeroesSpritesBlock7519PriestessKiSpriteBlock: equ HeroesSpritesBlock7520MeiHongSpriteBlock: equ HeroesSpritesBlock7521PrinceGilgameshSpriteBlock: equ HeroesSpritesBlock7523RandomHajileSpriteBlock: equ HeroesSpritesBlock8524BensonCunninghamSpriteBlock: equ HeroesSpritesBlock8525JamieSeedSpriteBlock: equ HeroesSpritesBlock8526ArmoredSnatcherSpriteBlock: equ HeroesSpritesBlock8527DruidSpriteBlock: equ HeroesSpritesBlock8528MomotaruSpriteBlock: equ HeroesSpritesBlock8529LukaSpriteBlock: equ HeroesSpritesBlock8530HeiwaAndButakoSpriteBlock: equ HeroesSpritesBlock8532AceSpriteBlock: equ HeroesSpritesBlock9533SpaceExplorer01SpriteBlock: equ HeroesSpritesBlock9534FernSpriteBlock: equ HeroesSpritesBlock9535HornSpriteBlock: equ HeroesSpritesBlock9536PixieSpriteBlock: equ HeroesSpritesBlock9537FreyaJerbainSpriteBlock: equ HeroesSpritesBlock9538LanceBeanSpriteBlock: equ HeroesSpritesBlock9539ThiharisSpriteBlock: equ HeroesSpritesBlock9541PampasSpriteBlock: equ HeroesSpritesBlock10542SeleneSpriteBlock: equ HeroesSpritesBlock10543SkooterSpriteBlock: equ HeroesSpritesBlock10544JeddaChefSpriteBlock: equ HeroesSpritesBlock10546549HeroesSpritesBlock1: equ $06550HeroesSpritesBlock2: equ HeroesSpritesBlock1 + 1551phase $4000552 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1.SC5",7,208 * 128 553 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1Bottom48Lines.SC5",7,48 * 128 554 ds $c000-$,$ff555dephase557560HeroesSpritesBlock3: equ HeroesSpritesBlock1 + 2561HeroesSpritesBlock4: equ HeroesSpritesBlock1 + 3562phase $4000563 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2.SC5",7,208 * 128 564 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2Bottom48Lines.SC5",7,48 * 128 565 ds $c000-$,$ff566dephase568571HeroesSpritesBlock5: equ HeroesSpritesBlock1 + 4572HeroesSpritesBlock6: equ HeroesSpritesBlock1 + 5573phase $4000574 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3.SC5",7,208 * 128 575 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3Bottom48Lines.SC5",7,48 * 128 576 ds $c000-$,$ff577dephase579582HeroesSpritesBlock7: equ HeroesSpritesBlock1 + 6583HeroesSpritesBlock8: equ HeroesSpritesBlock1 + 7584phase $4000585 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4.SC5",7,208 * 128 586 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4Bottom48Lines.SC5",7,48 * 128 587 ds $c000-$,$ff588dephase590593HeroesSpritesBlock9: equ HeroesSpritesBlock1 + 8594HeroesSpritesBlock10: equ HeroesSpritesBlock1 + 9595phase $4000596 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet5.SC5",7,192 * 128 597 ds $c000-$,$ff598dephase600603Enemy14x14PortraitsBlock: equ $10604phase $4000605 incbin "..\grapx\MonsterSprites\14x14Portraits.SC5",7,212 * 128 606 ds $c000-$,$ff607dephase609612Hero10x18PortraitsBlock: equ $12613phase $4000614 incbin "..\grapx\HeroesSprites\10x18Portraits.SC5",7,72 * 128 615 ds $8000-$,$ff616dephase618621phase $8000622QuickTipsBlock: equ $13623 QuickTips.asm1TextQuickTip1: db "As the kingdom's network of",2542 db "marketplaces in towns expands,",2543 db "the scales of fortune tilt",2544 db "increasingly in favor of the",2545 db "player, unveiling a more",2546 db "exquisite advantage.",2558TextQuickTip2: db "Using a keyboard ?",2549 db "Press and hold the Shift key to",25410 db "double the pointer's speed,",25411 db "and hold the Ctrl key to scroll",25412 db "directly through the map.",25514TextQuickTip3: db "Pressing the right mouse button",25415 db "or 'm' on your keyboard lets you",25416 db "close the window you're",25417 db "in or exit the castle screen.",25519TextQuickTip4:20 db "When a hero retreats from",25421 db "battle, they halt their",25422 db "contribution of experience to the",25423 db "enemy. Be assured, they shall",25424 db "soon embark on a graceful",25425 db "journey back to your tavern.",25527TextQuickTip5:28 db "Recruit a second hero early. They",25429 db "can take care of gathering",25430 db "supplies, allowing your main hero",25431 db "to explore and fight freely. Down",25432 db "the line, use a chain of heroes",25433 db "to move troops around super fast.",25535TextQuickTip6:36 db "Ensure your gold income outpaces",25437 db "expenses without leaving yourself",25438 db "defenseless early on. Swiftly",25439 db "acquire a capital. They're",25440 db "invaluable and boost troop",25441 db "production.",25543TextQuickTip7:44 db "The game favors centralization.",25445 db "Avoid building anything except",25446 db "town hall and city hall in",25447 db "secondary towns. These buildings",25448 db "are crucial for generating gold",25449 db "and nothing else.",25551TextQuickTip8:52 db "The Speed stat dictates both",25453 db "movement and turn order, making",25454 db "Earthbound a potent combat spell.",25455 db "A hero skilled in Earth Magic",25456 db "can cripple entire armies with",25457 db "a single cast.",25559TextQuickTip9:60 db "Melee units are crucial for",25461 db "engaging ranged units effectively,",25462 db "as ranged units are significantly",25463 db "weaker in close combat.",25464 db "Additionally, ranged units deal",25465 db "reduced damage from long range.",25567TextQuickTip10:68 db "Range penalty is a 50% reduction",25469 db "of damage for ranged attacks.",25470 db "It occurs when the target is",25471 db "further than 8 hexes from the",25472 db "shooter.",25574TextQuickTip11:75 db "Heroes ending their turn in a",25476 db "town with a Mage Guild will",25477 db "have their Spell Points fully",25478 db "restored by the start of their",25479 db "next turn.",25580 81TextQuickTip12:82 db "Every hero can learn level 1",25483 db "spells. Develop basic, advanced,",25484 db "and expert wisdom to gain",25485 db "access to level 2, 3, and 4",25486 db "spells.",25587 88TextQuickTip13:89 db "Although you can have up to 8",25490 db "heroes, consider carefully before",25491 db "recruiting more heroes.",25492 db "Usually, two or three suffice,",25493 db "but more may be necessary later",25494 db "on. Use your judgment wisely.",25596TextQuickTip14:97 db "You can build a town quickly by",25498 db "purchasing creature barracks for",25499 db "early combat or focus on",254100 db "upgrading to a Capitol for faster",254101 db "income and securing a stronger",254102 db "late game position.",255104TextQuickTip15:105 db "The creatures possessing the",254106 db "highest movement speed can opt",254107 db "to act first or wait until the",254108 db "end of their turn during combat.",255109 110TextQuickTip16:111 db "Strategically develop heroes.",254112 db "Warriors focus on non-magical",254113 db "skills, avoiding wisdom,",254114 db "while wizards prioritize magic.",255116TextQuickTip17:117 db "Sacrifice a pawn, win the game:",254118 db "Single units can serve as",254119 db "expendable buffers, absorbing",254120 db "hits for your main army and",254121 db "thereby shielding it from",254122 db "retaliatory strikes.",255123 124TextQuickTip18:125 db "Sacrifice a pawn, win the game:",254126 db "Single units can serve as",254127 db "expendable buffers, absorbing",254128 db "hits for your main army and",254129 db "thereby shielding it from",254130 db "retaliatory strikes.",255131 132TextQuickTip19:133 db "Access details about enemy",254134 db "stacks, items, and objects by",254135 db "right-clicking on the adventure",254136 db "map or pressing 'm' on your",254137 db "keyboard.",255139TextQuickTip20:140 db "You can check an enemy's level",254141 db "and size by right-clicking on",254142 db "them or pressing 'm'.",254143 db "The size order is:",254144 db "a few, several, many, numerous,",254145 db "a horde, and countless.",255147TextQuickTip21:148 db "In the cadence of combat,",254149 db "defending creatures with matched",254150 db "speed may claim the first step",254151 db "in battle on their turn,",254152 db "preceding their attacking",254153 db "counterparts.",255155TextQuickTip22:156 db "Consider the map size and ",254157 db "distance to opponents as crucial",254158 db "factors in determining whether",254159 db "to pursue an early or late game",254160 db "victory.",255162TextQuickTip23:163 db "The Armorer skill strengthens your",254164 db "creatures, reducing physical blows",254165 db "from both melee and ranged",254166 db "attackers. However, magical",254167 db "attacks from enemy heroes still",254168 db "pierce these defenses.",255170TextQuickTip24:171 db "A unit's speed indicates how",254172 db "many hexagonal tiles it can",254173 db "traverse on the battlefield,",254174 db "starting from the leftmost tile",254175 db "the unit occupies.",255177TextQuickTip25:178 db "Transferring army units between",254179 db "heroes deducts one movement",254180 db "point from the initiating hero.",254181 db "However, swapping units inside",254182 db "a castle does not consume a",254183 db "movement point.",255185TextQuickTip26:186 db "When an attacking unit's attack",254187 db "surpasses the defending unit's",254188 db "defense, it gains a 5% damage",254189 db "bonus per point difference,",254190 db "up to 300%.",255192TextQuickTip27:193 db "When a defending unit's defense",254194 db "exceeds the attacker's attack,",254195 db "the attacker suffers a 2.5%",254196 db "damage penalty per point deficit,",254197 db "up to 30%.",255199TextQuickTip28:200 db "A creature may opt to defend",254201 db "during its phase, gaining a 20%",254202 db "bonus to its defense rating",254203 db "(after accounting for item",254204 db "bonuses and spell effects) and",254205 db "forfeits the remainder of its turn.",255207TextQuickTip29:208 db "During combat, the spell",254209 db "duration can be determined",254210 db "using the formula:",254211 db "spell duration equals spell",254212 db "damage divided by 3, plus 2.",255213 214TextQuickTip30:215 db "Retreating is cost-free, yet",254216 db "you forfeit all creatures.",254217 db "Surrendering incurs a fee, but",254218 db "your creatures remain intact.",254219 db "The Hero can be rehired upon",254220 db "returning to the tavern.",255222TextQuickTip31:223 db "When your hero finds a scroll",254224 db "on the world map, they gain the",254225 db "capability to cast the spell it",254226 db "contains, even without the",254227 db "wisdom skill typically needed.",255229TextQuickTip32:230 db "Occupying the defending hero slot",254231 db "in a castle grants +1 defense.",254232 db "Additionally, if castle walls exist,",254233 db "the hero's defense increases by",254234 db "+5.",255235 236TextQuickTip33:237 db "Scattered among scrolls are",254238 db "special universal spells not",254239 db "teachable within mage guilds.",255241TextQuickTip34:242 db "The HUD shows your heroes'",254243 db "available movement points next",254244 db "to their hero portrait on the",254245 db "left, and their total mana",254246 db "points on the right.",255248249StartOfGameQuickTips: equ 35251TextQuickTip35:252 db "You can double-click on a",254253 db "location on the adventure map",254254 db "to move there. When your hero's",254255 db "movement points are depleted,",254256 db "click the hourglass to end your",254257 db "turn and recharge.",255259TextQuickTip36:260 db "Enter your castle by clicking its",254261 db "center or double-clicking the",254262 db "castle icon in the HUD.",254263 db "Begin constructing new structures",254264 db "to define your expanding empire.",255266TextQuickTip37:267 db "You're limited to constructing one",254268 db "building per turn. Plan ahead to",254269 db "decide whether to focus on",254270 db "generating income, enhancing",254271 db "magic, or summoning creatures.",255273TextQuickTip38:274 db "Can't find your hero ?",254275 db "Clicking the hero icon in the HUD",254276 db "will focus the screen on your",254277 db "hero's location. Clicking the castle",254278 db "icon will do the same for your",254279 db "castle.",255281TextQuickTip39:282 db "On the adventure map, you can",254283 db "gather resources necessary for",254284 db "constructing specific buildings.",254285 db "Additionally, you may stumble",254286 db "upon potent artifacts and scrolls",254287 db "that enhance your hero's prowess.",255289TextQuickTip40:290 db "Clicking on your hero or double-",254291 db "clicking your hero's icon in the",254292 db "HUD will open the hero menu,",254293 db "allowing you to access your",254294 db "hero's skills, inventory, army",254295 db "arrangement, spells, and stats.",255297TextQuickTip41:298 db "Each hero belongs to a specific",254299 db "class. This class determines their",254300 db "starting set of primary skills and",254301 db "influences the probability of",254302 db "acquiring new primary and",254303 db "secondary skills as they level up.",255305TextQuickTip42:306 db "In the hero menu's army window,",254307 db "you can rearrange and split your",254308 db "units. This allows you to create",254309 db "tactical formations, like using",254310 db "melee units as a shield for your",254311 db "ranged attackers.",255313TextQuickTip43:314 db "Prioritize information.",254315 db "Before engaging in combat,",254316 db "right-click on enemies to view",254317 db "their size and level. This crucial",254318 db "intel helps you estimate your",254319 db "odds of success.",255321TextQuickTip44:322 db "Combat follows a turn-based",254323 db "system, wherein each creature",254324 db "has the option to move, attack",254325 db "if within range, defend for a",254326 db "+20% defense bonus, or opt to",254327 db "delay their action until later.",255329TextQuickTip45:330 db "Each hero belongs to one of 3",254331 db "categories: Might, Adventure, or",254332 db "Wizardry.",254333 db "Plan your city's structures",254334 db "strategically to best complement",254335 db "their strengths.",255337TextQuickTip46:338 db "When your foe's forces are",254339 db "dwindling in combat, make a",254340 db "concerted effort to eliminate them",254341 db "in one decisive assault, leaving",254342 db "no chance for retreat.",255344TextQuickTip47:345 db "Defeating a hero grants you",254346 db "access to their equipment,",254347 db "expanding your arsenal.",254348 db "But remember, only what you can",254349 db "physically hold becomes yours.",255351TextQuickTip48:352 db "Creatures require a hero's",254353 db "guidance to be recruited. If your",254354 db "main hero is unavailable, consider",254355 db "acquiring another hero solely for",254356 db "the purpose of transporting these",254357 db "creatures.",255359TextQuickTip49:360 db "Upon obtaining a scroll, the game",254361 db "endeavors to assist your hero",254362 db "by granting them a scroll",254363 db "corresponding to a spell they",254364 db "haven't yet obtained or learned.",255366TextQuickTip50:367 db "A creature's damage is its actual",254368 db "offensive output during combat.",254369 db "However, its attack and defense",254370 db "serve as modifiers that determine",254371 db "the extent to which its damage",254372 db "increases or decreases.",255374LastQuickTip: equ 50379MSXHeroes.asm624 ds $c000-$,$ff625dephase627630Hero20x11PortraitsBlock: equ $14631phase $4000632 incbin "..\grapx\HeroesSprites\20x11Portraits.SC5",7,208 * 128 633 incbin "..\grapx\HeroesSprites\20x11PortraitsBottom48lines.SC5",7,048 * 128 634 ds $c000-$,$ff635dephase637640TitleScreenGraphicsBlock: equ $16641phase $4000642if Promo?643 incbin "..\grapx\TitleScreen\TitleScreenPromo.SC5",7,212 * 128 644else645 incbin "..\grapx\TitleScreen\TitleScreen.SC5",7,212 * 128 646endif647 ds $c000-$,$ff648dephase650653World1ObjectsBlock: equ $18654phase $4000655 incbin "..\grapx\tilesheets\world1Objects.SC5",7+(64*128),144 * 128 656 incbin "..\grapx\tilesheets\world1ObjectsBottom48Lines.SC5",7,48 * 128 657 ds $c000-$,$ff658dephase660663HeroOverviewGraphicsBlock: equ $1a664phase $4000665 incbin "..\grapx\HeroOverview\HeroOverviewGraphics.SC5",7,171 * 128 666 ds $c000-$,$ff667dephase669672HeroOverviewCodeBlock: equ $1c673phase $4000674 HeroOverviewCode.asm113HeroOverViewFirstWindowchoicesSX: equ 00014HeroOverViewFirstWindowchoicesSY: equ 00015HeroOverViewFirstWindowchoicesDX: equ 058 - 0516HeroOverViewFirstWindowchoicesDY: equ 03717HeroOverViewFirstWindowchoicesNX: equ 10618HeroOverViewFirstWindowchoicesNY: equ 12220HeroOverViewFirstWindowButtonNY: equ 01121HeroOverViewFirstWindowButtonNX: equ 0902325HeroOverViewSkillsWindowSX: equ 10626HeroOverViewSkillsWindowSY: equ 00027HeroOverViewSkillsWindowDX: equ 03028HeroOverViewSkillsWindowDY: equ 02529HeroOverViewSkillsWindowNX: equ 15030HeroOverViewSkillsWindowNY: equ 139-132HeroOverViewSkillsWindowButtonNY: equ 01133HeroOverViewSkillsWindowButtonNX: equ 1343537HeroOverViewStatusWindowSX: equ 00038HeroOverViewStatusWindowSY: equ 00039HeroOverViewStatusWindowDX: equ 02840HeroOverViewStatusWindowDY: equ 04041HeroOverViewStatusWindowNX: equ 15042HeroOverViewStatusWindowNY: equ 1164446HeroOverViewSpellBookWindowSX: equ 00047HeroOverViewSpellBookWindowSY: equ 00048HeroOverViewSpellBookWindowDX: equ 00649HeroOverViewSpellBookWindowDY: equ 00950HeroOverViewSpellBookWindowNX: equ 19251HeroOverViewSpellBookWindowNY: equ 18453HeroOverViewSpellBookWindowButton1NY: equ 035 - 154HeroOverViewSpellBookWindowButton1NX: equ 01055HeroOverViewSpellBookWindowButton2NY: equ 029 - 156HeroOverViewSpellBookWindowButton2NX: equ 01057HeroOverViewSpellBookWindowButton3NY: equ 023 - 158HeroOverViewSpellBookWindowButton3NX: equ 01059HeroOverViewSpellBookWindowButton4NY: equ 03560HeroOverViewSpellBookWindowButton4NX: equ 01062HeroOverViewSpellIconWindowButtonNY: equ 01663HeroOverViewSpellIconWindowButtonNX: equ 01665HeroOverViewInventoryIconWindowButtonNY: equ 02066HeroOverViewInventoryIconWindowButtonNX: equ 0206971HeroOverViewSpellBackdropSX: equ 19272HeroOverViewSpellBackdropSY: equ 12273HeroOverViewSpell1backdropDY: equ HeroOverViewSpellBookWindowDY + 04474HeroOverViewSpell1backdropDX: equ HeroOverViewSpellBookWindowDX + 03475HeroOverViewSpellbackdropNX: equ 02876HeroOverViewSpellbackdropNY: equ 02878HeroOverViewSpell2backdropDY: equ HeroOverViewSpellBookWindowDY + 04879HeroOverViewSpell2backdropDX: equ HeroOverViewSpellBookWindowDX + 06480HeroOverViewSpell3backdropDY: equ HeroOverViewSpellBookWindowDY + 08981HeroOverViewSpell3backdropDX: equ HeroOverViewSpellBookWindowDX + 03282HeroOverViewSpell4backdropDY: equ HeroOverViewSpellBookWindowDY + 09383HeroOverViewSpell4backdropDX: equ HeroOverViewSpellBookWindowDX + 06284HeroOverViewSpell5backdropDY: equ HeroOverViewSpellBookWindowDY + 04885HeroOverViewSpell5backdropDX: equ HeroOverViewSpellBookWindowDX + 10286HeroOverViewSpell6backdropDY: equ HeroOverViewSpellBookWindowDY + 04487HeroOverViewSpell6backdropDX: equ HeroOverViewSpellBookWindowDX + 13288HeroOverViewSpell7backdropDY: equ HeroOverViewSpellBookWindowDY + 09389HeroOverViewSpell7backdropDX: equ HeroOverViewSpellBookWindowDX + 10490HeroOverViewSpell8backdropDY: equ HeroOverViewSpellBookWindowDY + 08991HeroOverViewSpell8backdropDX: equ HeroOverViewSpellBookWindowDX + 1349394Spell01IconSX: equ 22495Spell01IconSY: equ 00096Spell02IconSX: equ 22497Spell02IconSY: equ 01698Spell03IconSX: equ 22499Spell03IconSY: equ 032100Spell04IconSX: equ 224101Spell04IconSY: equ 048102103Spell05IconSX: equ 224104Spell05IconSY: equ 064105Spell06IconSX: equ 224106Spell06IconSY: equ 080107Spell07IconSX: equ 224108Spell07IconSY: equ 096109Spell08IconSX: equ 224110Spell08IconSY: equ 112111112Spell09IconSX: equ 224113Spell09IconSY: equ 128114Spell10IconSX: equ 224115Spell10IconSY: equ 144116Spell11IconSX: equ 224117Spell11IconSY: equ 160118Spell12IconSX: equ 224119Spell12IconSY: equ 176120121Spell13IconSX: equ 000122Spell13IconSY: equ 184123Spell14IconSX: equ 032124Spell14IconSY: equ 184125Spell15IconSX: equ 064126Spell15IconSY: equ 184127Spell16IconSX: equ 096128Spell16IconSY: equ 184129130Spell17IconSX: equ 128131Spell17IconSY: equ 184132Spell18IconSX: equ 160133Spell18IconSY: equ 184134Spell19IconSX: equ 192135Spell19IconSY: equ 184136Spell20IconSX: equ 192137Spell20IconSY: equ 168140Spell1DY: equ HeroOverViewSpellBookWindowDY + 050141Spell1DX: equ HeroOverViewSpellBookWindowDX + 040142Spell2DY: equ HeroOverViewSpellBookWindowDY + 054143Spell2DX: equ HeroOverViewSpellBookWindowDX + 070144Spell3DY: equ HeroOverViewSpellBookWindowDY + 095145Spell3DX: equ HeroOverViewSpellBookWindowDX + 038146Spell4DY: equ HeroOverViewSpellBookWindowDY + 099147Spell4DX: equ HeroOverViewSpellBookWindowDX + 068148Spell5DY: equ HeroOverViewSpellBookWindowDY + 054149Spell5DX: equ HeroOverViewSpellBookWindowDX + 108150Spell6DY: equ HeroOverViewSpellBookWindowDY + 050151Spell6DX: equ HeroOverViewSpellBookWindowDX + 138152Spell7DY: equ HeroOverViewSpellBookWindowDY + 099153Spell7DX: equ HeroOverViewSpellBookWindowDX + 110154Spell8DY: equ HeroOverViewSpellBookWindowDY + 095155Spell8DX: equ HeroOverViewSpellBookWindowDX + 140157SpellIconNX: equ 016158SpellIconNY: equ 016160162HeroOverViewInventoryWindowSX: equ 000163HeroOverViewInventoryWindowSY: equ 000164HeroOverViewInventoryWindowDX: equ 030165HeroOverViewInventoryWindowDY: equ 024166HeroOverViewInventoryWindowNX: equ 146167HeroOverViewInventoryWindowNY: equ 156169InventoryItemNY: equ 020170InventoryItemNx: equ 020171172InventoryItem01DY: equ HeroOverViewInventoryWindowDY + 028173InventoryItem01Dx: equ HeroOverViewInventoryWindowDX + 020174InventoryItem02DY: equ HeroOverViewInventoryWindowDY + 028175InventoryItem02Dx: equ HeroOverViewInventoryWindowDX + 064176InventoryItem03DY: equ HeroOverViewInventoryWindowDY + 028177InventoryItem03Dx: equ HeroOverViewInventoryWindowDX + 108179InventoryItem04DY: equ HeroOverViewInventoryWindowDY + 053180InventoryItem04Dx: equ HeroOverViewInventoryWindowDX + 020181InventoryItem05DY: equ HeroOverViewInventoryWindowDY + 053182InventoryItem05Dx: equ HeroOverViewInventoryWindowDX + 064183InventoryItem06DY: equ HeroOverViewInventoryWindowDY + 053184InventoryItem06Dx: equ HeroOverViewInventoryWindowDX + 108186InventoryItem07DY: equ HeroOverViewInventoryWindowDY + 078187InventoryItem07Dx: equ HeroOverViewInventoryWindowDX + 020188InventoryItem08DY: equ HeroOverViewInventoryWindowDY + 078189InventoryItem08Dx: equ HeroOverViewInventoryWindowDX + 064190InventoryItem09DY: equ HeroOverViewInventoryWindowDY + 078191InventoryItem09Dx: equ HeroOverViewInventoryWindowDX + 108192193InventoryItem10DY: equ HeroOverViewInventoryWindowDY + 101194InventoryItem10Dx: equ HeroOverViewInventoryWindowDX + 008195InventoryItem11DY: equ HeroOverViewInventoryWindowDY + 101196InventoryItem11Dx: equ HeroOverViewInventoryWindowDX + 030197InventoryItem12DY: equ HeroOverViewInventoryWindowDY + 101198InventoryItem12Dx: equ HeroOverViewInventoryWindowDX + 052199InventoryItem13DY: equ HeroOverViewInventoryWindowDY + 101200InventoryItem13Dx: equ HeroOverViewInventoryWindowDX + 074201InventoryItem14DY: equ HeroOverViewInventoryWindowDY + 101202InventoryItem14Dx: equ HeroOverViewInventoryWindowDX + 096203InventoryItem15DY: equ HeroOverViewInventoryWindowDY + 101204InventoryItem15Dx: equ HeroOverViewInventoryWindowDX + 118206ScrollIconNR: equ 46207InventoryIconTableSYSX: 208 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 209 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 128210 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 211 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 128212 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 213 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 128214 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 215 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 128216 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 217 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 128219 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 220 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 128221 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 222 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 128223 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 224 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 128225 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 226 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 128227 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 228 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 128230 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 231 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 128232 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 233 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 128234 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 235 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 128236 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 237 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 128238 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 239 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 128241 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 242 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 128243 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 244 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 128245 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 246 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 128247 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 248 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 128249 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 250 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 128252 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 253 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 128254 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 255 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 128256 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 257 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 128258 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 259 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 128260 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 261 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 128263 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 264 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 128265 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 266 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 128267 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 268 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 128269 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 270 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 128271 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 272 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 128276 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 277 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 128278 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 279 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 128280 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 281 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 128282 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 283 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 128284 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 285 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 128287 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 288 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 128289 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 290 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 128291 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 292 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 128293 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 294 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 128295 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 296 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 128298 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 299 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 128300 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 301 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 128302 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 303 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 128304 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 305 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 128306 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 307 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 128309 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 310 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 128312 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 313 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 128315InventoryItem00ButtonOffSY: equ 000 316InventoryItem00ButtonOffSX: equ 146317InventoryItem00MouseOverSY: equ 020318InventoryItem00MouseOverSX: equ 146319InventoryItem01ButtonOffSY: equ 000 320InventoryItem01ButtonOffSX: equ 166321InventoryItem01MouseOverSY: equ 020322InventoryItem01MouseOverSX: equ 166323InventoryItem02ButtonOffSY: equ 000 324InventoryItem02ButtonOffSX: equ 186325InventoryItem02MouseOverSY: equ 020326InventoryItem02MouseOverSX: equ 186327InventoryItem03ButtonOffSY: equ 000 328InventoryItem03ButtonOffSX: equ 206329InventoryItem03MouseOverSY: equ 020330InventoryItem03MouseOverSX: equ 206331InventoryItem04ButtonOffSY: equ 000 332InventoryItem04ButtonOffSX: equ 226333InventoryItem04MouseOverSY: equ 020334InventoryItem04MouseOverSX: equ 226336InventoryItem05ButtonOffSY: equ 040 337InventoryItem05ButtonOffSX: equ 146338InventoryItem05MouseOverSY: equ 060339InventoryItem05MouseOverSX: equ 146340InventoryItem06ButtonOffSY: equ 040 341InventoryItem06ButtonOffSX: equ 166342InventoryItem06MouseOverSY: equ 060343InventoryItem06MouseOverSX: equ 166344InventoryItem07ButtonOffSY: equ 040 345InventoryItem07ButtonOffSX: equ 186346InventoryItem07MouseOverSY: equ 060347InventoryItem07MouseOverSX: equ 186348InventoryItem08ButtonOffSY: equ 040 349InventoryItem08ButtonOffSX: equ 206350InventoryItem08MouseOverSY: equ 060351InventoryItem08MouseOverSX: equ 206352InventoryItem09ButtonOffSY: equ 040 353InventoryItem09ButtonOffSX: equ 226354InventoryItem09MouseOverSY: equ 060355InventoryItem09MouseOverSX: equ 226357InventoryItem10ButtonOffSY: equ 080 358InventoryItem10ButtonOffSX: equ 146359InventoryItem10MouseOverSY: equ 100360InventoryItem10MouseOverSX: equ 146361InventoryItem11ButtonOffSY: equ 080 362InventoryItem11ButtonOffSX: equ 166363InventoryItem11MouseOverSY: equ 100364InventoryItem11MouseOverSX: equ 166365InventoryItem12ButtonOffSY: equ 080 366InventoryItem12ButtonOffSX: equ 186367InventoryItem12MouseOverSY: equ 100368InventoryItem12MouseOverSX: equ 186369InventoryItem13ButtonOffSY: equ 080 370InventoryItem13ButtonOffSX: equ 206371InventoryItem13MouseOverSY: equ 100372InventoryItem13MouseOverSX: equ 206373InventoryItem14ButtonOffSY: equ 080 374InventoryItem14ButtonOffSX: equ 226375InventoryItem14MouseOverSY: equ 100376InventoryItem14MouseOverSX: equ 226378InventoryItem15ButtonOffSY: equ 156 379InventoryItem15ButtonOffSX: equ 000380InventoryItem15MouseOverSY: equ 176381InventoryItem15MouseOverSX: equ 000382InventoryItem16ButtonOffSY: equ 156 383InventoryItem16ButtonOffSX: equ 020384InventoryItem16MouseOverSY: equ 176385InventoryItem16MouseOverSX: equ 020386InventoryItem17ButtonOffSY: equ 156 387InventoryItem17ButtonOffSX: equ 040388InventoryItem17MouseOverSY: equ 176389InventoryItem17MouseOverSX: equ 040390InventoryItem18ButtonOffSY: equ 156 391InventoryItem18ButtonOffSX: equ 060392InventoryItem18MouseOverSY: equ 176393InventoryItem18MouseOverSX: equ 060394InventoryItem19ButtonOffSY: equ 156 395InventoryItem19ButtonOffSX: equ 080396InventoryItem19MouseOverSY: equ 176397InventoryItem19MouseOverSX: equ 080399InventoryItem20ButtonOffSY: equ 156 400InventoryItem20ButtonOffSX: equ 100401InventoryItem20MouseOverSY: equ 176402InventoryItem20MouseOverSX: equ 100403InventoryItem21ButtonOffSY: equ 156 404InventoryItem21ButtonOffSX: equ 120405InventoryItem21MouseOverSY: equ 176406InventoryItem21MouseOverSX: equ 120407InventoryItem22ButtonOffSY: equ 156 408InventoryItem22ButtonOffSX: equ 140409InventoryItem22MouseOverSY: equ 176410InventoryItem22MouseOverSX: equ 140411InventoryItem23ButtonOffSY: equ 156 412InventoryItem23ButtonOffSX: equ 160413InventoryItem23MouseOverSY: equ 176414InventoryItem23MouseOverSX: equ 160415InventoryItem24ButtonOffSY: equ 156 416InventoryItem24ButtonOffSX: equ 180417InventoryItem24MouseOverSY: equ 176418InventoryItem24MouseOverSX: equ 180420InventoryItem25ButtonOffSY: equ 156 421InventoryItem25ButtonOffSX: equ 200422InventoryItem25MouseOverSY: equ 176423InventoryItem25MouseOverSX: equ 200424InventoryItem26ButtonOffSY: equ 156 425InventoryItem26ButtonOffSX: equ 220426InventoryItem26MouseOverSY: equ 176427InventoryItem26MouseOverSX: equ 220428InventoryItem27ButtonOffSY: equ 196 429InventoryItem27ButtonOffSX: equ 000430InventoryItem27MouseOverSY: equ 216431InventoryItem27MouseOverSX: equ 000432InventoryItem28ButtonOffSY: equ 196 433InventoryItem28ButtonOffSX: equ 020434InventoryItem28MouseOverSY: equ 216435InventoryItem28MouseOverSX: equ 020436InventoryItem29ButtonOffSY: equ 196 437InventoryItem29ButtonOffSX: equ 040438InventoryItem29MouseOverSY: equ 216439InventoryItem29MouseOverSX: equ 040441InventoryItem30ButtonOffSY: equ 196 442InventoryItem30ButtonOffSX: equ 060443InventoryItem30MouseOverSY: equ 216444InventoryItem30MouseOverSX: equ 060445InventoryItem31ButtonOffSY: equ 196 446InventoryItem31ButtonOffSX: equ 080447InventoryItem31MouseOverSY: equ 216448InventoryItem31MouseOverSX: equ 080449InventoryItem32ButtonOffSY: equ 196 450InventoryItem32ButtonOffSX: equ 100451InventoryItem32MouseOverSY: equ 216452InventoryItem32MouseOverSX: equ 100453InventoryItem33ButtonOffSY: equ 196 454InventoryItem33ButtonOffSX: equ 120455InventoryItem33MouseOverSY: equ 216456InventoryItem33MouseOverSX: equ 120457InventoryItem34ButtonOffSY: equ 196 458InventoryItem34ButtonOffSX: equ 140459InventoryItem34MouseOverSY: equ 216460InventoryItem34MouseOverSX: equ 140462InventoryItem35ButtonOffSY: equ 196 463InventoryItem35ButtonOffSX: equ 160464InventoryItem35MouseOverSY: equ 216465InventoryItem35MouseOverSX: equ 160466InventoryItem36ButtonOffSY: equ 196 467InventoryItem36ButtonOffSX: equ 180468InventoryItem36MouseOverSY: equ 216469InventoryItem36MouseOverSX: equ 180470InventoryItem37ButtonOffSY: equ 196 471InventoryItem37ButtonOffSX: equ 200472InventoryItem37MouseOverSY: equ 216473InventoryItem37MouseOverSX: equ 200474InventoryItem38ButtonOffSY: equ 196 475InventoryItem38ButtonOffSX: equ 220476InventoryItem38MouseOverSY: equ 216477InventoryItem38MouseOverSX: equ 220478InventoryItem39ButtonOffSY: equ 236 479InventoryItem39ButtonOffSX: equ 000480InventoryItem39MouseOverSY: equ 236481InventoryItem39MouseOverSX: equ 020483InventoryItem40ButtonOffSY: equ 236 484InventoryItem40ButtonOffSX: equ 040485InventoryItem40MouseOverSY: equ 120486InventoryItem40MouseOverSX: equ 146487InventoryItem41ButtonOffSY: equ 236 488InventoryItem41ButtonOffSX: equ 060489InventoryItem41MouseOverSY: equ 120490InventoryItem41MouseOverSX: equ 166491InventoryItem42ButtonOffSY: equ 236 492InventoryItem42ButtonOffSX: equ 080493InventoryItem42MouseOverSY: equ 120494InventoryItem42MouseOverSX: equ 186495InventoryItem43ButtonOffSY: equ 236 496InventoryItem43ButtonOffSX: equ 100497InventoryItem43MouseOverSY: equ 120498InventoryItem43MouseOverSX: equ 206499InventoryItem44ButtonOffSY: equ 236 500InventoryItem44ButtonOffSX: equ 120501InventoryItem44MouseOverSY: equ 120502InventoryItem44MouseOverSX: equ 226504InventoryItem45ButtonOffSY: equ 236 505InventoryItem45ButtonOffSX: equ 200506InventoryItem45MouseOverSY: equ 236507InventoryItem45MouseOverSX: equ 180509InventoryItem46ButtonOffSY: equ 236 510InventoryItem46ButtonOffSX: equ 140511InventoryItem46MouseOverSY: equ 236512InventoryItem46MouseOverSX: equ 160514516HeroOverViewArmyWindowSX: equ 000517HeroOverViewArmyWindowSY: equ 000518HeroOverViewArmyWindowDX: equ 024519HeroOverViewArmyWindowDY: equ 040520HeroOverViewArmyWindowNX: equ 156521HeroOverViewArmyWindowNY: equ 067 523HeroOverViewArmyIconWindowButtonNY: equ 030524HeroOverViewArmyIconWindowButtonNX: equ 018528DisplayEnemyHeroStatsWindowCode:529 call .SetHeroOverViewArmyWindow 530 call .Set16x30HeroIcon 531 ld ix,(EnemyHeroThatPointerIsOn)532 call SetArmyIconsAndAmount.army 534 call SwapAndSetPage 535 call .SetHeroOverViewArmyWindow 536 call .Set16x30HeroIcon 537 ld ix,(EnemyHeroThatPointerIsOn)538 call SetArmyIconsAndAmount.army 539 540 .engine:541 call PopulateControls 543 ld a,(Controls)544 bit 5,a 545 ret nz547 call CheckEndHeroOverviewArmy 548 halt549 jp .engine551.Set16x30HeroIcon:552 ld ix,(EnemyHeroThatPointerIsOn)554 555 ld l,(ix+HeroSpecificInfo+0) 556 ld h,(ix+HeroSpecificInfo+1)557 push hl558 pop ix560 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 561 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 562 ld bc,$4000563 xor a564 sbc hl,bc566 ld bc,NXAndNY16x30HeroIcon567 ld a,Hero16x30PortraitsBlock 568 ld de,DYDX16x30HeroIconArmyWindow 569 jp CopyRamToVramCorrectedCastleOverview 571 575577579584.SetHeroOverViewArmyWindow:585 ld hl,$4000 + (066*128) + (HeroOverViewArmyWindowSX/2) -128586 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)587 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)588 ld a,ArmyGraphicsBlock589 jp CopyRamToVramCorrectedCastleOverview 592HeroOverviewArmyWindowCode:593 ld a,3 594 ld (SetHeroArmyAndStatusInHud?),a596600 call SetHeroOverViewArmyWindow 601 call Set16x30HeroIcon 602 call SetArmyIconsAndAmount 603 call UpdateHUd604 ld a,1605 ld (GameStatus),a 606 call SwapAndSetPage 607 call SetHeroOverViewArmyWindow 608 call Set16x30HeroIcon 609 call SetArmyIconsAndAmount 610 call UpdateHUd611 ld a,1612 ld (GameStatus),a 613 614 .engine:615 call PopulateControls 617 ld a,(Controls)618 bit 5,a 619 ret nz621 ld ix,HeroOverviewArmyIconButtonTable622 ld iy,ButtonTableArmyIconsSYSX623 call CheckButtonMouseInteraction625 ld a,(MenuOptionSelected?)626 or a627 jp nz,.ButtonPressed628630 call MarkLastPressedButtonArmy 633 ld ix,HeroOverviewArmyIconButtonTable634 call SetButtonStatusAndText4 635 call SetArmyIconsAndAmount 638 call SwapAndSetPage 639 call CheckEndHeroOverviewArmy 640 halt641 jp .engine643 .ButtonPressed:644 ld (MenuOptionSelected?Backup),a646 xor a647 ld (MenuOptionSelected?),a648650 ld (ix+HeroOverviewWindowButtonStatus),%1000 0011651652 jp HeroOverviewArmyWindowCode654MarkLastPressedButtonArmy: 655 ld a,(MenuOptionSelected?Backup) 656 cp 255 657 ret z658 ld a,(MenuOptionSelected?BackupLastFrame)659 cp 255660 jr z,.Set662 ld b,a663 ld a,(MenuOptionSelected?Backup) 664 cp b665 jr nz,.DifferentButtonPressed667 ld b,a668 ld a,6669 sub a,b671 ld ix,HeroOverviewArmyIconButtonTable672 ld de,HeroOverviewArmyIconButtonTableLenghtPerIcon673 .loop:674 jr z,.Found675 add ix,de676 dec a677 jr .loop678 .Found: 680681 push ix682 ld a,(MenuOptionSelected?Backup) 683 ld b,a684 ld a,6685 sub a,b 686 ld ix,(plxcurrentheroAddress)687 ld d,0688 ld e,a689 add ix,de 690 add ix,de 691 add ix,de 693 ld a,(ix+HeroUnits+1) 694 cp (ix+HeroUnits+2) 695 pop ix696 jp z,.end697699 ld (ix+2),%0100 0011 700 .Set:701 ld a,(MenuOptionSelected?Backup) 702 ld (MenuOptionSelected?BackupLastFrame),a703 ret705 .DifferentButtonPressed:706710711 ld a,(MenuOptionSelected?Backup) 712 ld b,a713 ld a,6714 sub a,b 715 ld ix,(plxcurrentheroAddress)716 ld d,0717 ld e,a718 add ix,de 719 add ix,de 720 add ix,de 722 ld a,(ix+HeroUnits+1) 723 or (ix+HeroUnits+2) 724 jp nz,.EndCheck1725 727 728 ld a,(MenuOptionSelected?BackupLastFrame) 729 ld b,a730 ld a,6731 sub a,b 732 ld ix,(plxcurrentheroAddress)733 ld d,0734 ld e,a735 add ix,de 736 add ix,de 737 add ix,de 738 ld l,(ix+HeroUnits+1) 739 ld h,(ix+HeroUnits+2) 740 dec hl741 ld (ix+HeroUnits+1),l 742 ld (ix+HeroUnits+2),h 743 ld c,(ix+HeroUnits+0) 745 ld a,(ix+HeroUnits+1) 746 or (ix+HeroUnits+2) 747 jr nz,.EndCheckZero748 ld (ix+HeroUnits+0),0 749 .EndCheckZero:750 752 753 ld a,(MenuOptionSelected?Backup)754 ld b,a755 ld a,6756 sub a,b 757 ld ix,(plxcurrentheroAddress)758 ld d,0759 ld e,a 760 add ix,de 761 add ix,de 762 add ix,de 764 ld (ix+HeroUnits+0),c 765 ld (ix+HeroUnits+1),1 766 ld (ix+HeroUnits+2),0 767 jp .end768 769 .EndCheck1:771772 ld a,(MenuOptionSelected?Backup) 773 ld b,a774 ld a,6775 sub a,b 776 ld ix,(plxcurrentheroAddress)777 ld d,0778 ld e,a779 add ix,de 780 add ix,de 781 add ix,de 783 ld c,(ix+HeroUnits+0) 785 ld a,(MenuOptionSelected?BackupLastFrame) 786 ld b,a787 ld a,6788 sub a,b 789 ld ix,(plxcurrentheroAddress)790 ld d,0791 ld e,a792 add ix,de 793 add ix,de 794 add ix,de 796 ld a,(ix+HeroUnits+0) 798 cp c799 jp nz,.EndCheck2801 802 ld (ix+HeroUnits+0),0 803 ld l,(ix+HeroUnits+1) 804 ld h,(ix+HeroUnits+2) 806 ld (ix+HeroUnits+1),0 807 ld (ix+HeroUnits+2),0 809 ld a,(MenuOptionSelected?Backup) 810 ld b,a811 ld a,6812 sub a,b 813 ld ix,(plxcurrentheroAddress)814 ld d,0815 ld e,a816 add ix,de 817 add ix,de 818 add ix,de819 ld e,(ix+HeroUnits+1) 820 ld d,(ix+HeroUnits+2) 821 add hl,de823 ld (ix+HeroUnits+1),l 824 ld (ix+HeroUnits+2),h 825 jp .end826 .EndCheck2:829831832 push iy834 ld a,(MenuOptionSelected?Backup) 835 ld b,a836 ld a,6837 sub a,b 838 ld ix,(plxcurrentheroAddress)839 ld d,0840 ld e,a841 add ix,de 842 add ix,de 843 add ix,de 845 ld a,(MenuOptionSelected?BackupLastFrame)846 ld b,a847 ld a,6848 sub a,b849 ld iy,(plxcurrentheroAddress)850 ld d,0851 ld e,a852 add iy,de853 add iy,de854 add iy,de856 ld a,(ix+HeroUnits+0) 857 ld b,(ix+HeroUnits+1) 858 ld c,(ix+HeroUnits+2) 860 ld d,(iy+HeroUnits+0) 861 ld e,(iy+HeroUnits+1) 862 ld h,(iy+HeroUnits+2) 864 ld (ix+HeroUnits+0),d 865 ld (ix+HeroUnits+1),e 866 ld (ix+HeroUnits+2),h 868 ld (iy+HeroUnits+0),a 869 ld (iy+HeroUnits+1),b 870 ld (iy+HeroUnits+2),c 872 pop iy874 .end:875 xor a876 ld (MenuOptionSelected?),a877 ld a,255878 ld (MenuOptionSelected?Backup),a 879 ld (MenuOptionSelected?BackupLastFrame),a880 pop af 881 jp HeroOverviewArmyWindowCode 901NXAndNY16x30HeroIcon: equ 030*256 + (016/2) 902DYDX16x30HeroIconArmyWindow: equ (HeroOverViewArmyWindowDY+28)*128 + ((HeroOverViewArmyWindowDX+10)/2) - 128 904Set16x30HeroIcon:905 ld ix,(plxcurrentheroAddress)907 908 ld l,(ix+HeroSpecificInfo+0) 909 ld h,(ix+HeroSpecificInfo+1)910 push hl911 pop ix913 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 914 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 915 ld bc,$4000916 xor a917 sbc hl,bc919 ld bc,NXAndNY16x30HeroIcon920 ld a,Hero16x30PortraitsBlock 921 ld de,DYDX16x30HeroIconArmyWindow 922 jp CopyRamToVramCorrectedCastleOverview 924 928930932937SetAddressHeroPortrait16x30SYSXinBC:938 ld l,(ix+HeroSpecificInfo+0) 939 ld h,(ix+HeroSpecificInfo+1)940 push hl941 pop ix943 ld c,(ix+HeroInfoPortrait16x30SYSX+0) 944 ld b,(ix+HeroInfoPortrait16x30SYSX+1) 945948 ret950SetArmyIconsAndAmount:951 ld ix,(plxcurrentheroAddress)953 call .army954957 .amount:958 ld l,(ix+HeroUnits+01)959 ld h,(ix+HeroUnits+02)960 ld b,HeroOverViewArmyWindowDX + 031 + 2961 ld c,HeroOverViewArmyWindowDY + 056962 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0964 ld l,(ix+HeroUnits+04)965 ld h,(ix+HeroUnits+05)966 ld b,HeroOverViewArmyWindowDX + 051 + 2967 ld c,HeroOverViewArmyWindowDY + 056968 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0970 ld l,(ix+HeroUnits+07)971 ld h,(ix+HeroUnits+08)972 ld b,HeroOverViewArmyWindowDX + 071 + 2973 ld c,HeroOverViewArmyWindowDY + 056974 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0976 ld l,(ix+HeroUnits+10)977 ld h,(ix+HeroUnits+11)978 ld b,HeroOverViewArmyWindowDX + 091 + 2979 ld c,HeroOverViewArmyWindowDY + 056980 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0982 ld l,(ix+HeroUnits+13)983 ld h,(ix+HeroUnits+14)984 ld b,HeroOverViewArmyWindowDX + 111 + 2985 ld c,HeroOverViewArmyWindowDY + 056986 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0988 ld l,(ix+HeroUnits+16)989 ld h,(ix+HeroUnits+17)990 ld b,HeroOverViewArmyWindowDX + 131 + 2991 ld c,HeroOverViewArmyWindowDY + 056992 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0993 ret995 .army:996 ld a,(ix+HeroUnits+00) 997 call .SetSYSX998 ld de,DYDXUnit1WindowInHud14x24 999 call CopyTransparantImageHeroOverviewCode 1001 ld a,(ix+HeroUnits+03) 1002 call .SetSYSX1003 ld de,DYDXUnit2WindowInHud14x24 1004 call CopyTransparantImageHeroOverviewCode 1006 ld a,(ix+HeroUnits+06) 1007 call .SetSYSX1008 ld de,DYDXUnit3WindowInHud14x24 1009 call CopyTransparantImageHeroOverviewCode 1011 ld a,(ix+HeroUnits+09) 1012 call .SetSYSX1013 ld de,DYDXUnit4WindowInHud14x24 1014 call CopyTransparantImageHeroOverviewCode 1016 ld a,(ix+HeroUnits+12) 1017 call .SetSYSX1018 ld de,DYDXUnit5WindowInHud14x24 1019 call CopyTransparantImageHeroOverviewCode 1021 ld a,(ix+HeroUnits+15) 1022 call .SetSYSX1023 ld de,DYDXUnit6WindowInHud14x24 1024 call CopyTransparantImageHeroOverviewCode 1025 ret1027 .SetSYSX: 1028 cp 1801029 jr c,.EndCheckOverFlow1030 sub 1801031 ld l,a1032 ld a,Enemy14x24PortraitsBlockPart2 1033 jr .EntryPart21035 .EndCheckOverFlow:1036 ld l,a1037 ld a,Enemy14x24PortraitsBlock 1038 .EntryPart2:1039 ld h,01040 add hl,hl 1041 ld de,UnitSYSXTable14x24Portraits1042 add hl,de1043 ld c,(hl)1044 inc hl1045 ld b,(hl) 1046 push bc1047 pop hl1049 ld bc,NXAndNY14x24CharaterPortraits1050 ret1052DisplayTownAllignmentAssociatedCreatures:1053 ld a,(StartingTownLevel1Unit)1054 call SetArmyIconsAndAmount.SetSYSX1055 ld de,DYDXUnit1TownAllignment 1056 call CopyTransparantImageHeroOverviewCode 1058 ld a,(StartingTownLevel2Unit)1059 call SetArmyIconsAndAmount.SetSYSX1060 ld de,DYDXUnit2TownAllignment 1061 call CopyTransparantImageHeroOverviewCode 1063 ld a,(StartingTownLevel3Unit)1064 call SetArmyIconsAndAmount.SetSYSX1065 ld de,DYDXUnit3TownAllignment 1066 call CopyTransparantImageHeroOverviewCode 1068 ld a,(StartingTownLevel4Unit)1069 call SetArmyIconsAndAmount.SetSYSX1070 ld de,DYDXUnit4TownAllignment 1071 call CopyTransparantImageHeroOverviewCode 1073 ld a,(StartingTownLevel5Unit)1074 call SetArmyIconsAndAmount.SetSYSX1075 ld de,DYDXUnit5TownAllignment 1076 call CopyTransparantImageHeroOverviewCode 1078 ld a,(StartingTownLevel6Unit)1079 call SetArmyIconsAndAmount.SetSYSX1080 ld de,DYDXUnit6TownAllignment 1081 call CopyTransparantImageHeroOverviewCode 1082 ret1084NXAndNY14x24CharaterPortraits: equ 024*256 + (014/2) 1085DYDXUnit1WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+32)1086DYDXUnit2WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+52)1087DYDXUnit3WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+72)1088DYDXUnit4WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+92)1089DYDXUnit5WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+112)1090DYDXUnit6WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+132)1092DYDXUnit1TownAllignment: equ 256*(056) + (051)1093DYDXUnit2TownAllignment: equ 256*(056) + (103)1094DYDXUnit3TownAllignment: equ 256*(056) + (155)1095DYDXUnit4TownAllignment: equ 256*(100) + (051)1096DYDXUnit5TownAllignment: equ 256*(100) + (103)1097DYDXUnit6TownAllignment: equ 256*(100) + (155)1100 1101UnitSYSXTable14x24Portraits: 1102 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1281103 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-1281104 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-1281105 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-1281106 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-1281107 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-1281108 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-1281110 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-1281111 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-1281112 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-1281113 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-1281116CopyTransparantImageHeroOverviewCode: 11171118 push af1119 ld a,b1120 ld (CopyCastleButton2+ny),a1121 ld a,c1122 add a,a1123 ld (CopyCastleButton2+nx),a1124 pop af1126 push de1127 ld de,$8000 + (212*128) + (000/2) - 128 1128 call CopyRamToVramCorrectedWithoutActivePageSetting 1129 pop de1131 ld a,(activepage)1132 xor 11133 ld (CopyCastleButton2+dPage),a1135 ld a,d1136 ld (CopyCastleButton2+dy),a1137 ld a,e1138 ld (CopyCastleButton2+dx),a1140 ld hl,CopyCastleButton21141 call docopy1143 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1144 jp docopy11471157HeroOverviewInventoryWindowCode:1158 call SetHeroOverViewInventoryWindow 1159 call SetInventoryIcons 1160 call UpdateHUd1161 ld a,11162 ld (GameStatus),a 1163 call SwapAndSetPage 1164 call SetHeroOverViewInventoryWindow 1165 call SetInventoryIcons 1166 call CreateInventoryListForCurrHero 1167 call UpdateHUd1168 ld a,11169 ld (GameStatus),a 1171 .engine:1172 call PopulateControls 1173 call SetTotalManaHero1175 ld a,(Controls)1176 bit 5,a 1177 ret nz1179 ld ix,HeroOverviewInventoryIconButtonTable1180 ld iy,ButtonTableInventoryIconsSYSX1181 call CheckButtonMouseInteraction1182 ld a,(MenuOptionSelected?)1183 or a1184 jp nz,.InventoryIconPressed11861187 call SetTextInventoryItem 1189 call MarkLastPressedButton 1190 ld ix,HeroOverviewInventoryIconButtonTable1191 call SetButtonStatusAndText3 1195 call SwapAndSetPage 1196 call CheckEndHeroOverviewInventory 1197 halt1198 jp .engine1200 .InventoryIconPressed:1201 ld (MenuOptionSelected?Backup),a1203 xor a1204 ld (MenuOptionSelected?),a12051206 ld a,31207 ld (SetSkillsDescription?),a 1208 ld (ix+HeroOverviewWindowButtonStatus),%1000 00111209 jp HeroOverviewInventoryWindowCode1215MarkLastPressedButton: 1216 ld a,(MenuOptionSelected?Backup) 1217 cp 255 1218 ret z1219 ld a,(MenuOptionSelected?BackupLastFrame)1220 cp 2551221 jr z,.Set1223 ld b,a1224 ld a,(MenuOptionSelected?Backup) 1225 cp b1226 jr nz,.DifferentButtonPressed1228 ld b,a1229 ld a,151230 sub a,b1231 12321233 push af1234 ld ix,(plxcurrentheroAddress)1235 ld d,01236 ld e,a1237 add ix,de 1238 ld a,(ix+HeroInventory) 1240 cp 0451241 jr nz,.NotEmpty1242 ld a,2551243 ld (MenuOptionSelected?Backup),a 1244 ld (MenuOptionSelected?BackupLastFrame),a1245 pop af1246 ret1247 .NotEmpty:1248 pop af1252 ld ix,HeroOverviewInventoryIconButtonTable1253 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1254 .loop:1255 jr z,.Found1256 add ix,de1257 dec a1258 jr .loop1260 .Found: 1261 ld (ix+2),%0100 0011 1263 .Set:1264 ld a,(MenuOptionSelected?Backup) 1265 ld (MenuOptionSelected?BackupLastFrame),a1266 ret1268 .DifferentButtonPressed:126912741275 ld a,(MenuOptionSelected?Backup) 1276 cp 71277 jr c,.EndCheck11278 ld a,(MenuOptionSelected?BackupLastFrame)1279 cp 71280 jr nc,.UnableToSwapItems1281 .EndCheck1:12831284 ld a,(MenuOptionSelected?Backup) 1285 cp 71286 jr nc,.MenuOptionSelected?BackupLastFrame_GoesToSlot1to91287 ld a,(MenuOptionSelected?BackupLastFrame)1288 cp 15 - 91289 jp c,SwapInventoryItems 12911292 .MenuOptionSelected?Backup_GoesToSlot1to9:1293 ld a,(MenuOptionSelected?BackupLastFrame)1294 ld c,a1295 ld a,(MenuOptionSelected?Backup) 1296 jr .go1298 .MenuOptionSelected?BackupLastFrame_GoesToSlot1to9:1299 ld a,(MenuOptionSelected?Backup) 1300 ld c,a1301 ld a,(MenuOptionSelected?BackupLastFrame)13021304 .go:1305 ld b,a1306 ld a,151307 sub a,b 1308 ld ix,(plxcurrentheroAddress)1309 ld d,01310 ld e,a1311 add ix,de 1312 ld a,(ix+HeroInventory) 1313 cp 046 1314 jp nc,.UnableToSwapItems 1315 1316 sub 51317 ld b,151318 jr c,.InventorySlotFound 1319 sub 51320 ld b,141321 jr c,.InventorySlotFound 1322 sub 51323 ld b,131324 jr c,.InventorySlotFound 1325 sub 51326 ld b,121327 jr c,.InventorySlotFound 1328 sub 51329 ld b,111330 jr c,.InventorySlotFound 1331 sub 51332 ld b,101333 jr c,.InventorySlotFound 1334 sub 51335 ld b,091336 jr c,.InventorySlotFound 1337 sub 51338 ld b,081339 jr c,.InventorySlotFound 1340 sub 51341 ld b,071342 jr c,.InventorySlotFound 1344 jp SwapInventoryItems 1346 .InventorySlotFound: 1347 ld a,c1348 cp b1349 jp nz,.UnableToSwapItems13501351 jp SwapInventoryItems 1353 .UnableToSwapItems:1354 ld a,(MenuOptionSelected?Backup) 1355 ld b,a1356 ld a,151357 sub a,b1358 13591365 ld ix,HeroOverviewInventoryIconButtonTable1366 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1367 .loop2:1368 jr z,.Found21369 add ix,de1370 dec a1371 jr .loop21373 .Found2: 1374 ld (ix+2),%1000 0011 1375 ld a,(MenuOptionSelected?Backup) 1376 ld (MenuOptionSelected?BackupLastFrame),a1377 ret1379SwapInventoryItems: 1380 push iy1382 ld a,(MenuOptionSelected?Backup) 1383 ld b,a1384 ld a,151385 sub a,b 1386 ld ix,(plxcurrentheroAddress)1387 ld d,01388 ld e,a1389 add ix,de 1391 ld a,(MenuOptionSelected?BackupLastFrame)1392 ld b,a1393 ld a,151394 sub a,b1395 ld iy,(plxcurrentheroAddress)1396 ld d,01397 ld e,a1398 add iy,de 1400 ld b,(iy+HeroInventory) 1401 ld a,(ix+HeroInventory) 1402 ld (iy+HeroInventory),a 1403 ld (ix+HeroInventory),b 1405 pop iy1407 xor a1408 ld (MenuOptionSelected?),a1409 ld a,2551410 ld (MenuOptionSelected?Backup),a 1411 ld (MenuOptionSelected?BackupLastFrame),a1413 pop af 1414 ld a,11415 ld (SetSkillsDescription?),a 1416 jp HeroOverviewInventoryWindowCode 1418SetTextInventoryItem: 1419 ld a,(SetSkillsDescription?)1420 dec a1421 ret z1422 ld (SetSkillsDescription?),a 1424 ld a,(MenuOptionSelected?Backup) 1425 ld b,a1426 ld a,151427 sub a,b1428 1429 ld ix,(plxcurrentheroAddress)1430 ld d,01431 ld e,a1432 add ix,de 1433 ld a,(ix+HeroInventory) 1434 1435 ld ix,InventoryDescriptionList1436 add a,a 1437 ld e,a1438 add ix,de1439 ld l,(ix)1440 ld h,(ix+1)1441 .SetText:1443 ld b,HeroOverViewSpellBookWindowDX + 030 + 11444 ld c,HeroOverViewSpellBookWindowDY + 159 - 161445 jp SetText1447InventoryDescriptionList:1448 dw DescriptionSword1, DescriptionSword2, DescriptionSword3, DescriptionSword4, DescriptionSword51449 dw DescriptionArmor1, DescriptionArmor2, DescriptionArmor3, DescriptionArmor4, DescriptionArmor51450 dw DescriptionShield1, DescriptionShield2, DescriptionShield3, DescriptionShield4, DescriptionShield51451 dw DescriptionHelmet1, DescriptionHelmet2, DescriptionHelmet3, DescriptionHelmet4, DescriptionHelmet51452 dw DescriptionBoots1, DescriptionBoots2, DescriptionBoots3, DescriptionBoots4, DescriptionBoots51453 dw DescriptionGloves1, DescriptionGloves2, DescriptionGloves3, DescriptionGloves4, DescriptionGloves51454 dw DescriptionRing1, DescriptionRing2, DescriptionRing3, DescriptionRing4, DescriptionRing51455 dw DescriptionNecklace1, DescriptionNecklace2, DescriptionNecklace3, DescriptionNecklace4, DescriptionNecklace51456 dw DescriptionRobe1, DescriptionRobe2, DescriptionRobe3, DescriptionRobe4, DescriptionRobe51457 dw DescriptionEmpty1458 dw DescriptionScrollEarth1, DescriptionScrollEarth2, DescriptionScrollEarth3, DescriptionScrollEarth41459 dw DescriptionScrollFire1, DescriptionScrollFire2, DescriptionScrollFire3, DescriptionScrollFire41460 dw DescriptionScrollAir1, DescriptionScrollAir2, DescriptionScrollAir3, DescriptionScrollAir41461 dw DescriptionScrollWater1, DescriptionScrollWater2, DescriptionScrollWater3, DescriptionScrollWater41462 dw DescriptionScrollUniversal1, DescriptionScrollUniversal2, DescriptionScrollUniversal3, DescriptionScrollUniversal41464 1465DescriptionSword1: db "Dagger Time",254 | DaggerTimeAttack: equ 1 1466 db "Attack +",DaggerTimeAttack+$30,2551468 1469DescriptionSword2: db "Sword of Bahrain",254 | SwordOfBahrainAttack: equ 21470 db "Attack +2",2551472 1473DescriptionSword3: db "Hell Slayer",254 | HellSlayerAttack: equ 5 | HellSlayerDefence: equ -21474 db "Attack +5",2541475 db "Defense -2",2551477 1478DescriptionSword4: db "The Butterfly",254 | ButterflyAttack: equ 1 | ButterflyDefence: equ 1 | ButterflyIntelligence: equ 1 | ButterflySpellDamage: equ 11479 db "All primary attributes",2541480 db "+1",2551482 1483DescriptionSword5: db "swiftblade",254 | SwiftbladeAttack: equ 5 | SwiftbladeUnitSpeed: equ 11484 db "Attack + 5",2541485 db "Unit movement speed +1",2551487 1488DescriptionArmor1: db "Regalia Di Pleb",254 | RegaliaDiPlebDefence: equ 1 | RegaliaDiPlebUnitSpeed: equ 11489 db "Defense +1",2541490 db "Unit movement speed +1",2551492 1493DescriptionArmor2: db "Young Blood's Armor",254 | YoungBloodsArmorDefence: equ 21494 db "Defense +2",2551496 1497DescriptionArmor3: db "The Juggernaut",254 | TheJuggernautDefence: equ 4 | TheJuggernautUnitSpeed: equ -11498 db "Defense +4",2541499 db "Unit movement speed - 1",2551501 1502DescriptionArmor4: db "Yojimbo the Ronin",254 | YojumboTheRoninDefence: equ 41503 db "Defense +4",2541504 db "-2.5% enemy spell damage",2551506 1507DescriptionArmor5: db "Caesar's Chestplate",254 | CeasarsChestplateDefence: equ 5 | CaesarsChestplateUnitHp: equ 21508 db "Defense +5",2541509 db "Max hp units +2",2551511 1512DescriptionShield1: db "Greenleaf Shield",254 | GreenleafShieldDefence: equ 11513 db "Defense +1",2551515 1516DescriptionShield2: db "Wooden shield",254 | WoodenShieldDefence: equ 21517 db "Defense +2",2551519 1520 db "Defense +3",2541521DescriptionShield3: db "The Bram Stoker",254 | TheBramStokerDefence: equ 21522 db "Defense +2",2551523 db "-5% enemy spell damage",2551525 1526DescriptionShield4: db "Impenetrable shield",254 | ImpenetrableShieldDefence: equ 41527 db "Defense +4",2551529 1530DescriptionShield5: db "Hallowed Roundel",254 | TrainingShieldDefence: equ 51531 db "Defense +5",2551533 1534DescriptionHelmet1: db "Yatta Shi-ne",254 | YattaShiNeDefence: equ 1 | YattaShiNeSpellDamage: equ 11535 db "Spell power +1",2541536 db "Defense +1",2551538 1539DescriptionHelmet2: db "Fire hood",2541540 db "Spell power +2",254 | FireHoodSpellDamage: equ 21541 db "+2.5% spell damage",2551543 1544DescriptionHelmet3: db "Cerebro",2541545 db "Intelligence +3",255 | CerebroIntelligence: equ 31547 1548DescriptionHelmet4: db "The Viridescent",254 | TheViridescentDefence: equ 3 | TheViridescentUnitHp: equ 31549 db "Defense +3",2541550 db "Max hp units +3",2551552 1553DescriptionHelmet5: db "Pikemen's Helmet",254 | PikemensHelmetDefence: equ 5 | PikemensHelmetUnitSpeed: equ 11554 db "Defense +5",2541555 db "Unit movement speed +1",2551557 1558DescriptionBoots1: db "Shadow Tramper",254 | ShadowTramperUnitSpeed: equ 11559 db "Unit movement speed +1",2551561 1562DescriptionBoots2: db "Dusk Rover",2541563 db "-2.5% enemy spell damage",2551565 1566DescriptionBoots3: db "Planeswalkers",2541567 db "+3 max movement points",2541568 db "for hero on worldmap",2551570 1571DescriptionBoots4: db "Knight's Night Slippers",2541572 db "-7.5% enemy spell damage",2551574 1575DescriptionBoots5: db "Sturdy Boots",254 | SturdyBootsUnitSpeed: equ 31576 db "Unit movement speed +3",2551578 1579DescriptionGloves1: db "Gripfast",2541580 db "+2 max movement points",2541581 db "for hero on worldmap",2551583 1584DescriptionGloves2: db "Iron Hand",254 | IronHandUnitSpeed: equ -11585 db "-5% enemy spell damage",2541586 db "Unit movement speed -1",2551588 1589DescriptionGloves3: db "Elk Skin Gloves",254 | ElkSkinGlovesUnitHp: equ 2 | ElkSkinGlovesAttack: equ 21590 db "Attack +2",2541591 db "Max hp units +2",2551593 1594DescriptionGloves4: db "Venomous gauntlet",2541595 db "+7.5% spell damage",2551597 1598DescriptionGloves5: db "Emerald Gloves",254 | EmeraldGlovesIntelligence: equ 51599 db "Intelligence +5",2551601 1602DescriptionRing1: db "Small Ring",254 | SmallRingSpellDamage: equ 11603 db "Spell power +1",2551605 1606DescriptionRing2: db "Cyclops",254 | CyclopsIntelligence: equ 21607 db "Intelligence +2",2551609 1610DescriptionRing3: db "Scarlet Ring",254 | ScarletRingAttack: equ 1 | ScarletRingDefence: equ 1 | ScarletRingIntelligence: equ 1 | ScarletRingSpellPower: equ 1 1611 db "All primary attributes",2541612 db "+1",2551614 1615DescriptionRing4: db "Bronze Ring",2541616 db "-7.5% enemy spell damage",2551618 1619DescriptionRing5: db "Hypnotising Ring",2541620 db "-10% enemy spell damage",2551622 1623DescriptionNecklace1: db "The Blue Topaz",2541624 db "-2.5% enemy spell damage",2551626 1627DescriptionNecklace2: db "Good Luck Charm",2541628 db "+5% spell damage",2551630 1631DescriptionNecklace3: db "Negligee of Teeth",254 | NegligeeOfTeethIntelligence: equ 1 | NegligeeOfTeethSpellPower: equ 21632 db "Intelligence +1",2541633 db "Spell power +2",2551635 1636DescriptionNecklace4: db "Skull of the Unborn",2541637 db "Increases Necromancy",2541638 db "skill by 10%",2551640 1641DescriptionNecklace5: db "The Choker",254 | TheChokerSpellPower: equ 61642 db "Spell power +6",2551644 1645DescriptionRobe1: db "The King's Garment",2541646 db "Increases wealth by",2541647 db "125 gold per day",2551649 1650DescriptionRobe2: db "Priest's Cope",254 | PriestsCopeIntelligence: equ 2 1651 db "-2.5% enemy spell damage",2541652 db "Intelligence +2",2551654 1655DescriptionRobe3: db "Enchanted Robe",254 | EnchantedRobeSpellPower: equ 31656 db "Spell power +3",2551658 1659DescriptionRobe4: db "Rural Vest",254 | RuralVestUnitHp: equ 41660 db "Max hp units +4",2551662 1663DescriptionRobe5: db "Labcoat",254 | LabCoatSpellPower: equ 7 | LabcoatUnitHp: equ -21664 db "Spell power +7",2541665 db "Max hp units -2",2551667 1668DescriptionEmpty: db 2551670 1671DescriptionScrollEarth1: db "SpellScroll: Earthbound",2551672DescriptionScrollEarth2: db "SpellScroll: Plate Armor",2551673DescriptionScrollEarth3: db "SpellScroll: Resurrection",2551674DescriptionScrollEarth4: db "SpellScroll: Earthshock",2551676DescriptionScrollFire1: db "SpellScroll: Curse",2551677DescriptionScrollFire2: db "SpellScroll: Blinding Fog",2551678DescriptionScrollFire3: db "SpellScroll: Implosion",2551679DescriptionScrollFire4: db "SpellScroll: Sunstrike",2551681DescriptionScrollAir1: db "SpellScroll: Haste",2551682DescriptionScrollAir2: db "SpellScroll: ShieldBreaker",2551683DescriptionScrollAir3: db "SpellScroll: Claw Back",2551684DescriptionScrollAir4: db "SpellScroll: Spell Bubble",2551686DescriptionScrollWater1: db "SpellScroll: Cure",2551687DescriptionScrollWater2: db "SpellScroll: Ice Peak",2551688DescriptionScrollWater3: db "SpellScroll: Hypnosis",2551689DescriptionScrollWater4: db "SpellScroll: Frost Ring",2551691DescriptionScrollUniversal1: db "SpellScroll: Magic Arrows",2551692DescriptionScrollUniversal2: db "SpellScroll: Frenzy",2551693DescriptionScrollUniversal3: db "SpellScroll: Teleport",2551694DescriptionScrollUniversal4: db "SpellScroll: Primal Instinct",2551696CreateInventoryListForCurrHero: 1697 ld ix,(plxcurrentheroAddress)1698 ld iy,ButtonTableInventoryIconsSYSX1700 ld b,9+6 1702 .loop:1703 ld a,(ix+HeroInventory) 1704 call CheckScrollIcon 1705 add a,a 1706 add a,a 1707 ld d,01708 ld e,a1709 ld hl,InventoryIconTableSYSX1710 add hl,de1711 ld a,(hl)1712 ld (iy+0),a 1713 inc hl1714 ld a,(hl)1715 ld (iy+1),a 1716 inc hl1717 ld a,(hl)1718 ld (iy+2),a 1719 inc hl1720 ld a,(hl)1721 ld (iy+3),a 1722 ld de,61723 add iy,de 1724 inc ix 1725 djnz .loop1726 ret1728CheckScrollIcon:1729 cp ScrollIconNR1730 ret c1731 ld a,ScrollIconNR1732 ret1734SetInventoryIcons:1735 ld ix,(plxcurrentheroAddress)1737 call .SetIconHLBCandA1738 ld de,$0000 + (InventoryItem01DY*128) + (InventoryItem01DX/2)1739 call CopyRamToVramCorrectedCastleOverview 1741 call .SetIconHLBCandA 1742 ld de,$0000 + (InventoryItem02DY*128) + (InventoryItem02DX/2)1743 call CopyRamToVramCorrectedCastleOverview 1745 call .SetIconHLBCandA 1746 ld de,$0000 + (InventoryItem03DY*128) + (InventoryItem03DX/2)1747 call CopyRamToVramCorrectedCastleOverview 1749 call .SetIconHLBCandA 1750 ld de,$0000 + (InventoryItem04DY*128) + (InventoryItem04DX/2)1751 call CopyRamToVramCorrectedCastleOverview 1753 call .SetIconHLBCandA 1754 ld de,$0000 + (InventoryItem05DY*128) + (InventoryItem05DX/2)1755 call CopyRamToVramCorrectedCastleOverview 1757 call .SetIconHLBCandA 1758 ld de,$0000 + (InventoryItem06DY*128) + (InventoryItem06DX/2)1759 call CopyRamToVramCorrectedCastleOverview 1761 call .SetIconHLBCandA 1762 ld de,$0000 + (InventoryItem07DY*128) + (InventoryItem07DX/2)1763 call CopyRamToVramCorrectedCastleOverview 1765 call .SetIconHLBCandA 1766 ld de,$0000 + (InventoryItem08DY*128) + (InventoryItem08DX/2)1767 call CopyRamToVramCorrectedCastleOverview 1769 call .SetIconHLBCandA 1770 ld de,$0000 + (InventoryItem09DY*128) + (InventoryItem09DX/2)1771 call CopyRamToVramCorrectedCastleOverview 1773 1774 call .SetIconHLBCandA 1775 ld de,$0000 + (InventoryItem10DY*128) + (InventoryItem10DX/2)1776 call CopyRamToVramCorrectedCastleOverview 1778 call .SetIconHLBCandA 1779 ld de,$0000 + (InventoryItem11DY*128) + (InventoryItem11DX/2)1780 call CopyRamToVramCorrectedCastleOverview 1782 call .SetIconHLBCandA 1783 ld de,$0000 + (InventoryItem12DY*128) + (InventoryItem12DX/2)1784 call CopyRamToVramCorrectedCastleOverview 1786 call .SetIconHLBCandA 1787 ld de,$0000 + (InventoryItem13DY*128) + (InventoryItem13DX/2)1788 call CopyRamToVramCorrectedCastleOverview 1790 call .SetIconHLBCandA 1791 ld de,$0000 + (InventoryItem14DY*128) + (InventoryItem14DX/2)1792 call CopyRamToVramCorrectedCastleOverview 1794 call .SetIconHLBCandA 1795 ld de,$0000 + (InventoryItem15DY*128) + (InventoryItem15DX/2)1796 call CopyRamToVramCorrectedCastleOverview 1797 ret1799 .SetIconHLBCandA:1800 ld a,(ix+HeroInventory) 1801 call CheckScrollIcon 1802 add a,a 1803 add a,a 1804 ld iy,InventoryIconTableSYSX1805 ld d,01806 ld e,a1807 add iy,de1808 ld l,(iy)1809 ld h,(iy+1)1810 inc ix1811 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1812 ld a,InventoryGraphicsBlock1813 ret1816PlaceWaterSpellsInSpellBook:1817 ld ix,(plxcurrentheroAddress)1819 1820 xor a1821 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1822 ld a,58 1823 call CheckSpellScrollAvailable 1824 jr z,.PlaceWaterSpellLevel11825 bit 0,(ix+HeroWaterSpells)1826 jr z,.EndPlaceWaterSpell11827 .PlaceWaterSpellLevel1:1828 ld a,%1000 00111829 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1830 1831 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281832 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1833 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1834 ld a,SpellBookGraphicsBlock 1835 call CopyRamToVramCorrectedCastleOverview 1836 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1281837 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1838 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1839 ld a,SpellBookGraphicsBlock 1840 call CopyRamToVramCorrectedCastleOverview 1841 .EndPlaceWaterSpell1:1843 xor a1844 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1845 ld a,59 1846 call CheckSpellScrollAvailable 1847 jr z,.PlaceWaterSpellLevel21848 bit 1,(ix+HeroWaterSpells)1849 jr z,.EndPlaceWaterSpell21850 .PlaceWaterSpellLevel2:1851 ld a,%1000 00111852 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1853 1854 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281855 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1856 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1857 ld a,SpellBookGraphicsBlock 1858 call CopyRamToVramCorrectedCastleOverview 1859 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1281860 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1861 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1862 ld a,SpellBookGraphicsBlock 1863 call CopyRamToVramCorrectedCastleOverview 1864 .EndPlaceWaterSpell2:1866 xor a1867 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1868 ld a,60 1869 call CheckSpellScrollAvailable 1870 jr z,.PlaceWaterSpellLevel31871 bit 2,(ix+HeroWaterSpells)1872 jr z,.EndPlaceWaterSpell31873 .PlaceWaterSpellLevel3: 1874 ld a,%1000 00111875 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1876 1877 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281878 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1879 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1880 ld a,SpellBookGraphicsBlock 1881 call CopyRamToVramCorrectedCastleOverview 1882 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1281883 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1884 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1885 ld a,SpellBookGraphicsBlock 1886 call CopyRamToVramCorrectedCastleOverview 1887 .EndPlaceWaterSpell3:1889 xor a1890 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1891 ld a,61 1892 call CheckSpellScrollAvailable 1893 jr z,.PlaceWaterSpellLevel41894 bit 3,(ix+HeroWaterSpells)1895 jr z,.EndPlaceWaterSpell41896 .PlaceWaterSpellLevel4: 1897 ld a,%1000 00111898 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1899 1900 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281901 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)1902 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1903 ld a,SpellBookGraphicsBlock 1904 call CopyRamToVramCorrectedCastleOverview 1905 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1281906 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)1907 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1908 ld a,SpellBookGraphicsBlock 1909 call CopyRamToVramCorrectedCastleOverview 1910 .EndPlaceWaterSpell4:1911 jp PlaceAllSpellSchoolSpellsInSpellBook1913PlaceAirSpellsInSpellBook:1914 ld ix,(plxcurrentheroAddress)1916 1917 xor a1918 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1919 ld a,54 1920 call CheckSpellScrollAvailable 1921 jr z,.PlaceAirSpellLevel11922 bit 0,(ix+HeroAirSpells)1923 jr z,.EndPlaceAirSpell11924 .PlaceAirSpellLevel1:1925 ld a,%1000 00111926 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1927 1928 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281929 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1930 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1931 ld a,SpellBookGraphicsBlock 1932 call CopyRamToVramCorrectedCastleOverview 1933 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1281934 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1935 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1936 ld a,SpellBookGraphicsBlock 1937 call CopyRamToVramCorrectedCastleOverview 1938 .EndPlaceAirSpell1:1940 xor a1941 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1942 ld a,55 1943 call CheckSpellScrollAvailable 1944 jr z,.PlaceAirSpellLevel21945 bit 1,(ix+HeroAirSpells)1946 jr z,.EndPlaceAirSpell21947 .PlaceAirSpellLevel2:1948 ld a,%1000 00111949 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1951 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281952 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1953 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1954 ld a,SpellBookGraphicsBlock 1955 call CopyRamToVramCorrectedCastleOverview 1956 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1281957 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1958 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1959 ld a,SpellBookGraphicsBlock 1960 call CopyRamToVramCorrectedCastleOverview 1961 .EndPlaceAirSpell2:1963 xor a1964 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1965 ld a,56 1966 call CheckSpellScrollAvailable 1967 jr z,.PlaceAirSpellLevel31968 bit 2,(ix+HeroAirSpells)1969 jr z,.EndPlaceAirSpell31970 .PlaceAirSpellLevel3:1971 ld a,%1000 00111972 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1974 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281975 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1976 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1977 ld a,SpellBookGraphicsBlock 1978 call CopyRamToVramCorrectedCastleOverview 1979 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1281980 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1981 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1982 ld a,SpellBookGraphicsBlock 1983 call CopyRamToVramCorrectedCastleOverview 1984 .EndPlaceAirSpell3:1986 xor a1987 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1988 ld a,57 1989 call CheckSpellScrollAvailable 1990 jr z,.PlaceAirSpellLevel41991 bit 3,(ix+HeroAirSpells)1992 jr z,.EndPlaceAirSpell41993 .PlaceAirSpellLevel4:1994 ld a,%1000 00111995 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1997 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281998 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)1999 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2000 ld a,SpellBookGraphicsBlock 2001 call CopyRamToVramCorrectedCastleOverview 2002 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282003 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2004 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2005 ld a,SpellBookGraphicsBlock 2006 call CopyRamToVramCorrectedCastleOverview 2007 .EndPlaceAirSpell4:2008 jp PlaceAllSpellSchoolSpellsInSpellBook2009 2010PlaceFireSpellsInSpellBook:2011 ld ix,(plxcurrentheroAddress)2013 2014 xor a2015 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2016 ld a,50 2017 call CheckSpellScrollAvailable 2018 jr z,.PlaceFireSpellLevel12019 bit 0,(ix+HeroFireSpells)2020 jr z,.EndPlaceFireSpell12021 .PlaceFireSpellLevel1:2022 ld a,%1000 00112023 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2024 2025 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282026 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2027 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2028 ld a,SpellBookGraphicsBlock 2029 call CopyRamToVramCorrectedCastleOverview 2030 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282031 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2032 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2033 ld a,SpellBookGraphicsBlock 2034 call CopyRamToVramCorrectedCastleOverview 2035 .EndPlaceFireSpell1:2037 xor a2038 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2039 ld a,51 2040 call CheckSpellScrollAvailable 2041 jr z,.PlaceFireSpellLevel22042 bit 1,(ix+HeroFireSpells)2043 jr z,.EndPlaceFireSpell22044 .PlaceFireSpellLevel2:2045 ld a,%1000 00112046 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2047 2048 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282049 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2050 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2051 ld a,SpellBookGraphicsBlock 2052 call CopyRamToVramCorrectedCastleOverview 2053 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282054 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2055 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2056 ld a,SpellBookGraphicsBlock 2057 call CopyRamToVramCorrectedCastleOverview 2058 .EndPlaceFireSpell2:2060 xor a2061 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2062 ld a,52 2063 call CheckSpellScrollAvailable 2064 jr z,.PlaceFireSpellLevel32065 bit 2,(ix+HeroFireSpells)2066 jr z,.EndPlaceFireSpell32067 .PlaceFireSpellLevel3:2068 ld a,%1000 00112069 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2070 2071 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282072 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2073 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2074 ld a,SpellBookGraphicsBlock 2075 call CopyRamToVramCorrectedCastleOverview 2076 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282077 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2078 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2079 ld a,SpellBookGraphicsBlock 2080 call CopyRamToVramCorrectedCastleOverview 2081 .EndPlaceFireSpell3:2083 xor a2084 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2085 ld a,53 2086 call CheckSpellScrollAvailable 2087 jr z,.PlaceFireSpellLevel42088 bit 3,(ix+HeroFireSpells)2089 jr z,.EndPlaceFireSpell42090 .PlaceFireSpellLevel4:2091 ld a,%1000 00112092 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2094 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282095 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2096 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2097 ld a,SpellBookGraphicsBlock 2098 call CopyRamToVramCorrectedCastleOverview 2099 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282100 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2101 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2102 ld a,SpellBookGraphicsBlock 2103 call CopyRamToVramCorrectedCastleOverview 2104 .EndPlaceFireSpell4:2105 jp PlaceAllSpellSchoolSpellsInSpellBook2108CheckSpellScrollAvailable: 2109 cp (ix+HeroInventory+9)2110 ret z2111 cp (ix+HeroInventory+10)2112 ret z2113 cp (ix+HeroInventory+11)2114 ret z2115 cp (ix+HeroInventory+12)2116 ret z2117 cp (ix+HeroInventory+13)2118 ret z2119 cp (ix+HeroInventory+14)2120 ret2121 2122PlaceEarthSpellsInSpellBook:2123 ld ix,(plxcurrentheroAddress)2125 2126 xor a2127 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2128 ld a,46 2129 call CheckSpellScrollAvailable 2130 jr z,.PlaceEarthSpellLevel12131 bit 0,(ix+HeroEarthSpells)2132 jr z,.EndPlaceEarthSpell12133 .PlaceEarthSpellLevel1:2134 ld a,%1000 00112135 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2136 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282137 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2138 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2139 ld a,SpellBookGraphicsBlock 2140 call CopyRamToVramCorrectedCastleOverview 2141 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282142 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2143 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2144 ld a,SpellBookGraphicsBlock 2145 call CopyRamToVramCorrectedCastleOverview 2146 .EndPlaceEarthSpell1:2148 xor a2149 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2150 ld a,47 2151 call CheckSpellScrollAvailable 2152 jr z,.PlaceEarthSpellLevel22153 bit 1,(ix+HeroEarthSpells)2154 jr z,.EndPlaceEarthSpell22155 .PlaceEarthSpellLevel2:2156 ld a,%1000 00112157 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2158 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282159 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2160 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2161 ld a,SpellBookGraphicsBlock 2162 call CopyRamToVramCorrectedCastleOverview 2163 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282164 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2165 ld bc,$0000 + (SpellIconNY* 256) + (SpellIconNX/2)2166 ld a,SpellBookGraphicsBlock 2167 call CopyRamToVramCorrectedCastleOverview 2168 .EndPlaceEarthSpell2:2170 xor a2171 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2172 ld a,48 2173 call CheckSpellScrollAvailable 2174 jr z,.PlaceEarthSpellLevel32175 bit 2,(ix+HeroEarthSpells)2176 jr z,.EndPlaceEarthSpell32177 .PlaceEarthSpellLevel3:2178 ld a,%1000 00112179 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2180 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282181 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2182 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2183 ld a,SpellBookGraphicsBlock 2184 call CopyRamToVramCorrectedCastleOverview 2185 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282186 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2187 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2188 ld a,SpellBookGraphicsBlock 2189 call CopyRamToVramCorrectedCastleOverview 2190 .EndPlaceEarthSpell3:2192 xor a2193 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2194 ld a,49 2195 call CheckSpellScrollAvailable 2196 jr z,.PlaceEarthSpellLevel42197 bit 3,(ix+HeroEarthSpells)2198 jr z,.EndPlaceEarthSpell42199 .PlaceEarthSpellLevel4:2200 ld a,%1000 00112201 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2202 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282203 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2204 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2205 ld a,SpellBookGraphicsBlock 2206 call CopyRamToVramCorrectedCastleOverview 2207 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282208 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2209 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2210 ld a,SpellBookGraphicsBlock 2211 call CopyRamToVramCorrectedCastleOverview 2212 .EndPlaceEarthSpell4:2213 jp PlaceAllSpellSchoolSpellsInSpellBook2215PlaceAllSpellSchoolSpellsInSpellBook:2216 ld ix,(plxcurrentheroAddress)2217 2218 2219 xor a2220 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2221 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2222 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2223 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2224 ld a,62 2225 call CheckSpellScrollAvailable 2226 jr z,.PlaceUniversalSpellLevel12227 bit 0,(ix+HeroAllSchoolsSpells)2228 jr z,.EndPlaceAllSchoolsSpell1 2229 .PlaceUniversalSpellLevel1:2230 ld a,%1000 00112231 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2232 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2233 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2234 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2235 2236 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282237 ld de,$0000 + (HeroOverViewSpell5backdropDY*128) + (HeroOverViewSpell5backdropDX/2)2238 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2239 ld a,SpellBookGraphicsBlock 2240 call CopyRamToVramCorrectedCastleOverview 2241 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282242 ld de,$0000 + (Spell5DY*128) + (Spell5DX/2)2243 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2244 ld a,SpellBookGraphicsBlock 2245 call CopyRamToVramCorrectedCastleOverview 2246 .EndPlaceAllSchoolsSpell1:2248 xor a2249 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2250 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2251 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2252 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2253 ld a,63 2254 call CheckSpellScrollAvailable 2255 jr z,.PlaceUniversalSpellLevel22256 bit 1,(ix+HeroAllSchoolsSpells)2257 jr z,.EndPlaceAllSchoolsSpell2 2258 .PlaceUniversalSpellLevel2:2259 ld a,%1000 00112260 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2261 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2262 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2263 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2265 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282266 ld de,$0000 + (HeroOverViewSpell6backdropDY*128) + (HeroOverViewSpell6backdropDX/2)2267 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2268 ld a,SpellBookGraphicsBlock 2269 call CopyRamToVramCorrectedCastleOverview 2270 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282271 ld de,$0000 + (Spell6DY*128) + (Spell6DX/2)2272 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2273 ld a,SpellBookGraphicsBlock 2274 call CopyRamToVramCorrectedCastleOverview 2275 .EndPlaceAllSchoolsSpell2:2277 xor a2278 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2279 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2280 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2281 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2282 ld a,64 2283 call CheckSpellScrollAvailable 2284 jr z,.PlaceUniversalSpellLevel32285 bit 2,(ix+HeroAllSchoolsSpells)2286 jr z,.EndPlaceAllSchoolsSpell3 2287 .PlaceUniversalSpellLevel3:2288 ld a,%1000 00112289 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2290 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2291 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2292 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2294 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282295 ld de,$0000 + (HeroOverViewSpell7backdropDY*128) + (HeroOverViewSpell7backdropDX/2)2296 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2297 ld a,SpellBookGraphicsBlock 2298 call CopyRamToVramCorrectedCastleOverview 2299 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282300 ld de,$0000 + (Spell7DY*128) + (Spell7DX/2)2301 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2302 ld a,SpellBookGraphicsBlock 2303 call CopyRamToVramCorrectedCastleOverview 2304 .EndPlaceAllSchoolsSpell3:2306 xor a2307 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2308 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2309 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2310 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2311 ld a,65 2312 call CheckSpellScrollAvailable 2313 jr z,.PlaceUniversalSpellLevel42314 bit 3,(ix+HeroAllSchoolsSpells)2315 jr z,.EndPlaceAllSchoolsSpell42316 .PlaceUniversalSpellLevel4:2317 ld a,%1000 00112318 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2319 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2320 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2321 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2323 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282324 ld de,$0000 + (HeroOverViewSpell8backdropDY*128) + (HeroOverViewSpell8backdropDX/2)2325 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2326 ld a,SpellBookGraphicsBlock 2327 call CopyRamToVramCorrectedCastleOverview 2328 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282329 ld de,$0000 + (Spell8DY*128) + (Spell8DX/2)2330 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2331 ld a,SpellBookGraphicsBlock 2332 call CopyRamToVramCorrectedCastleOverview 2333 .EndPlaceAllSchoolsSpell4:2334 ret2337HeroOverviewSpellBookWindowCode_Water:23382339 call SetHeroOverViewSpellBookWindow 2340 call ClearWhiteWindow2341 call ActivateButton_Water2342 call PlaceWaterSpellsInSpellBook2343 call SwapAndSetPage 2344 call SetHeroOverViewSpellBookWindow 2345 call ClearWhiteWindow2346 call ActivateButton_Water2347 call PlaceWaterSpellsInSpellBook2349 .engine:2350 call PopulateControls 2352 ld a,(Controls)2353 bit 5,a 2354 ret nz2355 2356 ld ix,HeroOverviewSpellBookButtonTable_Water2357 ld iy,ButtonTableSpellBookSYSX_Water2358 call CheckButtonMouseInteraction2359 ld a,(MenuOptionSelected?)2360 or a2361 jp nz,.ElementalButtonPressed2363 call CheckEndHeroOverviewSpellBook 2365 ld ix,HeroOverviewSpellBookButtonTable_Water2366 call SetButtonStatusAndText2 23712374 ld ix,HeroOverviewSpellIconButtonTable_Water2375 ld iy,ButtonTableSpellIconsWaterSYSX2376 call CheckButtonMouseInteraction2378 ld a,(MenuOptionSelected?)2379 or a2380 jp nz,.SpellIconPressed23822384 call SetSpellExplanation_Water 2386 ld ix,HeroOverviewSpellIconButtonTable_Water2387 call SetButtonStatusAndText2 23892392 2393 call SwapAndSetPage 2395 halt2396 jp .engine2398 .ElementalButtonPressed:2399 cp 1 2400 jp z,AirSelected2401 cp 2 2402 jp z,FireSelected2403 cp 3 2404 jp z,EarthSelected2405 ret2409 .SpellIconPressed:2410 ld (MenuOptionSelected?Backup),a2411 xor a2412 ld (MenuOptionSelected?),a24132414 ld a,32415 ld (SetSkillsDescription?),a 2416 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112417 jp HeroOverviewSpellBookWindowCode_Water2439HeroOverviewSpellBookWindowCode_Air:24402441 call SetHeroOverViewSpellBookWindow 2442 call ClearWhiteWindow2443 call ActivateButton_Air2444 call PlaceAirSpellsInSpellBook2445 call SwapAndSetPage 2446 call SetHeroOverViewSpellBookWindow 2447 call ClearWhiteWindow2448 call ActivateButton_Air2449 call PlaceAirSpellsInSpellBook2451 .engine:2452 call PopulateControls 2454 ld a,(Controls)2455 bit 5,a 2456 ret nz2457 2458 ld ix,HeroOverviewSpellBookButtonTable_Air2459 ld iy,ButtonTableSpellBookSYSX_Air2460 call CheckButtonMouseInteraction2461 ld a,(MenuOptionSelected?)2462 or a2463 jp nz,.ElementalButtonPressed2465 call CheckEndHeroOverviewSpellBook 2467 ld ix,HeroOverviewSpellBookButtonTable_Air2468 call SetButtonStatusAndText2 24722475 ld ix,HeroOverviewSpellIconButtonTable_Air2476 ld iy,ButtonTableSpellIconsAirSYSX2477 call CheckButtonMouseInteraction2479 ld a,(MenuOptionSelected?)2480 or a2481 jp nz,.SpellIconPressed24832485 call SetSpellExplanation_Air 2487 ld ix,HeroOverviewSpellIconButtonTable_Air2488 call SetButtonStatusAndText2 24902493 call SwapAndSetPage 2495 halt2496 jp .engine2498 .ElementalButtonPressed:2499 cp 1 2500 jp z,WaterSelected2501 cp 2 2502 jp z,FireSelected2503 cp 3 2504 jp z,EarthSelected2505 ret2506 2510 .SpellIconPressed:2511 ld (MenuOptionSelected?Backup),a2512 xor a2513 ld (MenuOptionSelected?),a25142515 ld a,32516 ld (SetSkillsDescription?),a 2517 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112518 jp HeroOverviewSpellBookWindowCode_Air2521 2522 2523 2524 2525 2526 2527 2528HeroOverviewSpellBookWindowCode_Fire:25292530 call SetHeroOverViewSpellBookWindow 2531 call ClearWhiteWindow2532 call ActivateButton_Fire2533 call PlaceFireSpellsInSpellBook2534 call SwapAndSetPage 2535 call SetHeroOverViewSpellBookWindow 2536 call ClearWhiteWindow2537 call ActivateButton_Fire2538 call PlaceFireSpellsInSpellBook2540 .engine:2541 call PopulateControls 2543 ld a,(Controls)2544 bit 5,a 2545 ret nz2546 2547 ld ix,HeroOverviewSpellBookButtonTable_Fire2548 ld iy,ButtonTableSpellBookSYSX_Fire2549 call CheckButtonMouseInteraction2550 ld a,(MenuOptionSelected?)2551 or a2552 jp nz,.ElementalButtonPressed2554 call CheckEndHeroOverviewSpellBook 2556 ld ix,HeroOverviewSpellBookButtonTable_Fire2557 call SetButtonStatusAndText2 25632566 ld ix,HeroOverviewSpellIconButtonTable_Fire2567 ld iy,ButtonTableSpellIconsFireSYSX2568 call CheckButtonMouseInteraction2570 ld a,(MenuOptionSelected?)2571 or a2572 jp nz,.SpellIconPressed25742576 call SetSpellExplanation_Fire 2578 ld ix,HeroOverviewSpellIconButtonTable_Fire2579 call SetButtonStatusAndText2 25812586 call SwapAndSetPage 2588 halt2589 jp .engine2591 .ElementalButtonPressed:2592 cp 1 2593 jp z,WaterSelected2594 cp 2 2595 jp z,AirSelected2596 cp 3 2597 jp z,EarthSelected2598 ret2607 .SpellIconPressed:2608 ld (MenuOptionSelected?Backup),a2609 xor a2610 ld (MenuOptionSelected?),a26112612 ld a,32613 ld (SetSkillsDescription?),a 2614 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112615 jp HeroOverviewSpellBookWindowCode_Fire2633HeroOverviewSpellBookWindowCode_Earth:263626392640 call SetHeroOverViewSpellBookWindow 2641 call ClearWhiteWindow2642 call ActivateButton_Earth 2643 call PlaceEarthSpellsInSpellBook 2644 call SwapAndSetPage 2645 call SetHeroOverViewSpellBookWindow 2646 call ClearWhiteWindow2647 call ActivateButton_Earth2648 call PlaceEarthSpellsInSpellBook 2650 .engine:2651 call PopulateControls 2653 ld a,(Controls)2654 bit 5,a 2655 ret nz2657 ld ix,HeroOverviewSpellBookButtonTable_Earth2658 ld iy,ButtonTableSpellBookSYSX_Earth2659 call CheckButtonMouseInteraction2660 ld a,(MenuOptionSelected?)2661 or a2662 jp nz,.ElementalButtonPressed2664 call CheckEndHeroOverviewSpellBook 2666 ld ix,HeroOverviewSpellBookButtonTable_Earth2667 call SetButtonStatusAndText2 26702673 ld ix,HeroOverviewSpellIconButtonTable_Earth2674 ld iy,ButtonTableSpellIconsEarthSYSX2675 call CheckButtonMouseInteraction2677 ld a,(MenuOptionSelected?)2678 or a2679 jp nz,.SpellIconPressed26812683 call SetSpellExplanation_Earth 2685 ld ix,HeroOverviewSpellIconButtonTable_Earth2686 call SetButtonStatusAndText2 268826912695269927012714 call SwapAndSetPage 2716 halt2717 jp .engine2723 .SpellIconPressed:2724 ld (MenuOptionSelected?Backup),a2725 xor a2726 ld (MenuOptionSelected?),a27272728 ld a,32729 ld (SetSkillsDescription?),a 2730 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112731 jp HeroOverviewSpellBookWindowCode_Earth2733 .ElementalButtonPressed:2734 cp 1 2735 jp z,WaterSelected2736 cp 2 2737 jp z,AirSelected2738 cp 3 2739 jp z,FireSelected2740 ret2742ClearWhiteWindow:2743 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+28)/2) -1282744 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2745 ld bc,$0000 + (18*256) + (20/2)2746 ld a,SpellBookGraphicsBlock2747 jp CopyRamToVramCorrectedCastleOverview 2749SetWhiteWindow:2750 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+008)/2) -1282751 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2752 ld bc,$0000 + (18*256) + (20/2)2753 ld a,SpellBookGraphicsBlock2754 jp CopyRamToVramCorrectedCastleOverview 2756SpellDescriptions:2758.DescriptionEarth4: db "Earthbound",2542759 db "Reduces the speed of the selected",2542760 db "enemy unit by 50%",2552762.DescriptionEarth3: db "Plate Armor",2542763 db "Increases the defense of the selected",2542764 db "friendly unit by 5.",2552766.DescriptionEarth2: db "Resurrection",2542767 db "Revives a segment of deceased",2542768 db "friendly living creatures.",2552770.DescriptionEarth1: db "Earthshock",2542771 db "Deals damage to all creatures in target",2542772 db "and adjacent hexes.",2552775.DescriptionFire4: db "Curse",2542776 db "Causes the selected enemy unit to deal",2542777 db "-3 damage when attacking.",2552779.DescriptionFire3: db "Blinding Fog",2542780 db "Target ranged unit deals 50% less",2542781 db "damage.",2552783.DescriptionFire2: db "Implosion",2542784 db "Deals damage to enemy unit and",2542785 db "adjecent units.",2552787.DescriptionFire1: db "Sunstrike",2542788 db "Calls down a solar beam to incinerate",2542789 db "a single enemy unit.",2552791.Descriptionair4: db "Haste",2542792 db "Increases the speed of the selected",2542793 db "friendly unit by 3.",2552795.Descriptionair3: db "Shieldbreaker",2542796 db "Reduces the defense of the selected ",2542797 db "enemy unit by 4.",2552799.Descriptionair2: db "Claw Back",2542800 db "Target allied unit has unlimited",2542801 db "retaliations each round.",2552803.Descriptionair1: db "Spell Bubble",2542804 db "Target friendly unit has a 75% chance",2542805 db "to deflect a single enemy spell.",2552808.Descriptionwater4: db "Cure",2542809 db "Dissipates all harmful spell effects",2542810 db "while restoring a set amount of HP.",2552812.Descriptionwater3: db "Ice Peak",2542813 db "Conjures an ice shard from the ground,",2542814 db "impaling a single enemy.",2552816.Descriptionwater2: db "Hypnosis",2542817 db "Enemy unit cant attack until attacked,",2542818 db "dispelled or effect wears off.",2552821.Descriptionwater1: db "Frost Ring",2542822 db "Causes damage to all units adjacent to",2542823 db "the central hex.",2552826.DescriptionAllSpellSchools4: db "magic arrows",2542827 db "Unleashes a relentless volley of arrows",2542828 db "at a single enemy unit.",2552830.DescriptionAllSpellSchools3: db "Frenzy",2542831 db "Friendly unit's damage increases by 5",2542832 db "while its defense decreases by 5.",2552834.DescriptionAllSpellSchools2: db "Teleport",2542835 db "Instantaneously displaces an allied",2542836 db "troop to an an unoccupied space.",2552838.DescriptionAllSpellSchools1: db "Primal Instinct",2542839 db "Friendly unit receives +3 damage,",2542840 db "+3 defense and +3 speed.",2552843SetSpellExplanation_Water:2844 ld a,(SetSkillsDescription?)2845 dec a2846 ret z2847 ld (SetSkillsDescription?),a 2849 call .GoSetText2850 call .SetSpellIcon2851 call .SetCost28522853 ret2855 .SetDamage:2856 ld a,(MenuOptionSelected?Backup)2857 cp 1 2858 ld b,DamageAllSpellSchools12859 jp z,DamageAmountFound2860 cp 2 2861 ld b,DamageAllSpellSchools22862 jp z,DamageAmountFound2863 cp 3 2864 ld b,DamageAllSpellSchools32865 jp z,DamageAmountFound2866 cp 4 2867 ld b,DamageAllSpellSchools42868 jp z,DamageAmountFound2870 cp 5 2871 ld b,DamageWaterSpell12872 jp z,DamageAmountFound2873 cp 6 2874 ld b,DamageWaterSpell22875 jp z,DamageAmountFound2876 cp 7 2877 ld b,DamageWaterSpell32878 jp z,DamageAmountFound2879 ld b,DamageWaterSpell42880 jp DamageAmountFound2882 .SetCost:2883 ld a,(MenuOptionSelected?Backup) 2884 cp 1 2885 ld b,CostAllSpellSchools12886 jp z,CostAmountFound2887 cp 2 2888 ld b,CostAllSpellSchools22889 jp z,CostAmountFound2890 cp 3 2891 ld b,CostAllSpellSchools32892 jp z,CostAmountFound2893 cp 4 2894 ld b,CostAllSpellSchools42895 jp z,CostAmountFound2897 cp 5 2898 ld b,CostWaterSpell12899 jp z,CostAmountFound2900 cp 6 2901 ld b,CostWaterSpell22902 jp z,CostAmountFound2903 cp 7 2904 ld b,CostWaterSpell32905 jp z,CostAmountFound2906 ld b,CostWaterSpell42907 jp CostAmountFound2909 .SetSpellIcon:2910 call SetWhiteWindow2912 ld a,(MenuOptionSelected?Backup)2914 cp 1 2915 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282916 jp z,.SetIcon2917 cp 2 2918 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282919 jp z,.SetIcon2920 cp 3 2921 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282922 jp z,.SetIcon2923 cp 42924 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282925 jp z,.SetIcon 2926 cp 5 2927 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282928 jp z,.SetIcon2929 cp 6 2930 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282931 jp z,.SetIcon2932 cp 7 2933 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282934 jp z,.SetIcon2935 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282936 .SetIcon:2937 2938 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)2939 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2940 ld a,SpellBookGraphicsBlock 2941 jp CopyRamToVramCorrectedCastleOverview 2943 .GoSetText:2944 ld a,(MenuOptionSelected?Backup)2946 cp 1 2947 ld hl,SpellDescriptions.DescriptionAllSpellSchools12948 jp z,.SetText2949 cp 2 2950 ld hl,SpellDescriptions.DescriptionAllSpellSchools22951 jp z,.SetText2952 cp 3 2953 ld hl,SpellDescriptions.DescriptionAllSpellSchools32954 jp z,.SetText2955 cp 42956 ld hl,SpellDescriptions.DescriptionAllSpellSchools42957 jp z,.SetText2960 cp 5 2961 ld hl,SpellDescriptions.Descriptionwater12962 jp z,.SetText2963 cp 6 2964 ld hl,SpellDescriptions.Descriptionwater22965 jp z,.SetText2966 cp 7 2967 ld hl,SpellDescriptions.Descriptionwater32968 jp z,.SetText2969 ld hl,SpellDescriptions.Descriptionwater42970 .SetText:2972 ld b,HeroOverViewSpellBookWindowDX + 0302973 ld c,HeroOverViewSpellBookWindowDY + 1592974 jp SetText2983SetSpellExplanation_Air:2984 ld a,(SetSkillsDescription?)2985 dec a2986 ret z2987 ld (SetSkillsDescription?),a 2989 call .GoSetText2990 call .SetSpellIcon2991 call .SetCost29922993 ret2995 .SetDamage:2996 ld a,(MenuOptionSelected?Backup)2997 cp 1 2998 ld b,DamageAllSpellSchools12999 jp z,DamageAmountFound3000 cp 2 3001 ld b,DamageAllSpellSchools23002 jp z,DamageAmountFound3003 cp 3 3004 ld b,DamageAllSpellSchools33005 jp z,DamageAmountFound3006 cp 4 3007 ld b,DamageAllSpellSchools43008 jp z,DamageAmountFound3010 cp 5 3011 ld b,DamageAirSpell13012 jp z,DamageAmountFound3013 cp 6 3014 ld b,DamageAirSpell23015 jp z,DamageAmountFound3016 cp 7 3017 ld b,DamageAirSpell33018 jp z,DamageAmountFound3019 ld b,DamageAirSpell43020 jp DamageAmountFound3022 .SetCost:3023 ld a,(MenuOptionSelected?Backup) 3024 cp 1 3025 ld b,CostAllSpellSchools13026 jp z,CostAmountFound3027 cp 2 3028 ld b,CostAllSpellSchools23029 jp z,CostAmountFound3030 cp 3 3031 ld b,CostAllSpellSchools33032 jp z,CostAmountFound3033 cp 4 3034 ld b,CostAllSpellSchools43035 jp z,CostAmountFound3037 cp 5 3038 ld b,CostAirSpell13039 jp z,CostAmountFound3040 cp 6 3041 ld b,CostAirSpell23042 jp z,CostAmountFound3043 cp 7 3044 ld b,CostAirSpell33045 jp z,CostAmountFound3046 ld b,CostAirSpell43047 jp CostAmountFound3049 .SetSpellIcon:3050 call SetWhiteWindow3052 ld a,(MenuOptionSelected?Backup)3054 cp 1 3055 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283056 jp z,.SetIcon3057 cp 2 3058 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283059 jp z,.SetIcon3060 cp 3 3061 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283062 jp z,.SetIcon3063 cp 43064 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283065 jp z,.SetIcon3066 3067 cp 5 3068 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283069 jp z,.SetIcon3070 cp 6 3071 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283072 jp z,.SetIcon3073 cp 7 3074 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283075 jp z,.SetIcon3076 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283077 .SetIcon:3078 3079 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3080 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3081 ld a,SpellBookGraphicsBlock 3082 jp CopyRamToVramCorrectedCastleOverview 3084 .GoSetText:3085 ld a,(MenuOptionSelected?Backup)3087 cp 1 3088 ld hl,SpellDescriptions.DescriptionAllSpellSchools13089 jp z,.SetText3090 cp 2 3091 ld hl,SpellDescriptions.DescriptionAllSpellSchools23092 jp z,.SetText3093 cp 3 3094 ld hl,SpellDescriptions.DescriptionAllSpellSchools33095 jp z,.SetText3096 cp 43097 ld hl,SpellDescriptions.DescriptionAllSpellSchools43098 jp z,.SetText3100 cp 5 3101 ld hl,SpellDescriptions.DescriptionAir13102 jp z,.SetText3103 cp 6 3104 ld hl,SpellDescriptions.DescriptionAir23105 jp z,.SetText3106 cp 7 3107 ld hl,SpellDescriptions.DescriptionAir33108 jp z,.SetText3109 ld hl,SpellDescriptions.DescriptionAir43110 .SetText:3112 ld b,HeroOverViewSpellBookWindowDX + 0303113 ld c,HeroOverViewSpellBookWindowDY + 1593114 jp SetText3141SetSpellExplanation_Fire:3142 ld a,(SetSkillsDescription?)3143 dec a3144 ret z3145 ld (SetSkillsDescription?),a 3147 call .GoSetText3148 call .SetSpellIcon3149 call .SetCost31503151 ret3153 .SetDamage:3154 ld a,(MenuOptionSelected?Backup)3155 cp 1 3156 ld b,DamageAllSpellSchools13157 jp z,DamageAmountFound3158 cp 2 3159 ld b,DamageAllSpellSchools23160 jp z,DamageAmountFound3161 cp 3 3162 ld b,DamageAllSpellSchools33163 jp z,DamageAmountFound3164 cp 4 3165 ld b,DamageAllSpellSchools43166 jp z,DamageAmountFound3168 cp 5 3169 ld b,DamageFireSpell13170 jp z,DamageAmountFound3171 cp 6 3172 ld b,DamageFireSpell23173 jp z,DamageAmountFound3174 cp 7 3175 ld b,DamageFireSpell33176 jp z,DamageAmountFound3177 ld b,DamageFireSpell43178 jp DamageAmountFound3180 .SetCost:3181 ld a,(MenuOptionSelected?Backup) 3182 cp 1 3183 ld b,CostAllSpellSchools13184 jp z,CostAmountFound3185 cp 2 3186 ld b,CostAllSpellSchools23187 jp z,CostAmountFound3188 cp 3 3189 ld b,CostAllSpellSchools33190 jp z,CostAmountFound3191 cp 4 3192 ld b,CostAllSpellSchools43193 jp z,CostAmountFound3195 cp 5 3196 ld b,CostFireSpell13197 jp z,CostAmountFound3198 cp 6 3199 ld b,CostFireSpell23200 jp z,CostAmountFound3201 cp 7 3202 ld b,CostFireSpell33203 jp z,CostAmountFound3204 ld b,CostFireSpell43205 jp CostAmountFound3207 .SetSpellIcon:3208 call SetWhiteWindow3210 ld a,(MenuOptionSelected?Backup)3211 cp 1 3212 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283213 jp z,.SetIcon3214 cp 2 3215 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283216 jp z,.SetIcon3217 cp 3 3218 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283219 jp z,.SetIcon3220 cp 43221 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283222 jp z,.SetIcon3223 cp 5 3224 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283225 jp z,.SetIcon3226 cp 6 3227 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283228 jp z,.SetIcon3229 cp 7 3230 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283231 jp z,.SetIcon3232 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283233 .SetIcon:3234 3235 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3236 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3237 ld a,SpellBookGraphicsBlock 3238 jp CopyRamToVramCorrectedCastleOverview 3240 .GoSetText:3241 ld a,(MenuOptionSelected?Backup)3242 cp 1 3243 ld hl,SpellDescriptions.DescriptionAllSpellSchools13244 jp z,.SetText3245 cp 2 3246 ld hl,SpellDescriptions.DescriptionAllSpellSchools23247 jp z,.SetText3248 cp 3 3249 ld hl,SpellDescriptions.DescriptionAllSpellSchools33250 jp z,.SetText3251 cp 43252 ld hl,SpellDescriptions.DescriptionAllSpellSchools43253 jp z,.SetText3255 cp 5 3256 ld hl,SpellDescriptions.DescriptionFire13257 jp z,.SetText3258 cp 6 3259 ld hl,SpellDescriptions.DescriptionFire23260 jp z,.SetText3261 cp 7 3262 ld hl,SpellDescriptions.DescriptionFire33263 jp z,.SetText3264 cp 83265 ld hl,SpellDescriptions.DescriptionFire43266 jp z,.SetText3267 .SetText:3269 ld b,HeroOverViewSpellBookWindowDX + 0303270 ld c,HeroOverViewSpellBookWindowDY + 1593271 jp SetText3289DamageAmountFound:3290 ld a,b3291 or a3292 ret z3294 ld b,HeroOverViewSpellBookWindowDX + 1683295 ld c,HeroOverViewSpellBookWindowDY + 1733296 push iy3297 ld l,a3298 ld h,03299 call SetNumber16BitCastle3300 pop iy3302 ld b,HeroOverViewSpellBookWindowDX + 1323303 ld c,HeroOverViewSpellBookWindowDY + 1733304 ld hl,.TextDamage3305 jp SetText3306 .TextDamage: db "Damage:",2553308CostAmountFound:3309 ld a,b3310 or a3311 ret z3312 ld b,HeroOverViewSpellBookWindowDX + 1743313 ld c,HeroOverViewSpellBookWindowDY + 1593314 push iy3315 ld l,a3316 ld h,03317 call SetNumber16BitCastle3318 pop iy3320 ld b,HeroOverViewSpellBookWindowDX + 1483321 ld c,HeroOverViewSpellBookWindowDY + 1593322 ld hl,.TextCost3323 jp SetText3324 .TextCost: db "Cost:",2553326333333363349SetSpellExplanation_Earth: 3350 ld a,(SetSkillsDescription?)3351 dec a3352 ret z3353 ld (SetSkillsDescription?),a 3355 call .GoSetText3356 call .SetSpellIcon3357 call .SetCost33583359 ret3361 .SetDamage:3362 ld a,(MenuOptionSelected?Backup)3363 cp 1 3364 ld b,DamageAllSpellSchools13365 jp z,DamageAmountFound3366 cp 2 3367 ld b,DamageAllSpellSchools23368 jp z,DamageAmountFound3369 cp 3 3370 ld b,DamageAllSpellSchools33371 jp z,DamageAmountFound3372 cp 4 3373 ld b,DamageAllSpellSchools43374 jp z,DamageAmountFound3376 cp 5 3377 ld b,DamageEarthSpell13378 jp z,DamageAmountFound3379 cp 6 3380 ld b,DamageEarthSpell23381 jp z,DamageAmountFound3382 cp 7 3383 ld b,DamageEarthSpell33384 jp z,DamageAmountFound3385 ld b,DamageEarthSpell43386 jp DamageAmountFound3388 .SetCost:3389 ld a,(MenuOptionSelected?Backup) 3390 cp 1 3391 ld b,CostAllSpellSchools13392 jp z,CostAmountFound3393 cp 2 3394 ld b,CostAllSpellSchools23395 jp z,CostAmountFound3396 cp 3 3397 ld b,CostAllSpellSchools33398 jp z,CostAmountFound3399 cp 4 3400 ld b,CostAllSpellSchools43401 jp z,CostAmountFound3403 cp 5 3404 ld b,CostEarthSpell13405 jp z,CostAmountFound3406 cp 6 3407 ld b,CostEarthSpell23408 jp z,CostAmountFound3409 cp 7 3410 ld b,CostEarthSpell33411 jp z,CostAmountFound3412 ld b,CostEarthSpell43413 jp CostAmountFound3416 .SetSpellIcon:3417 call SetWhiteWindow3419 ld a,(MenuOptionSelected?Backup)3420 cp 1 3421 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283422 jp z,.SetIcon3423 cp 2 3424 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283425 jp z,.SetIcon3426 cp 3 3427 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283428 jp z,.SetIcon3429 cp 43430 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283431 jp z,.SetIcon3432 3433 cp 5 3434 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283435 jp z,.SetIcon3436 cp 6 3437 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283438 jp z,.SetIcon3439 cp 7 3440 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283441 jp z,.SetIcon3442 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283443 .SetIcon:3444 3445 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3446 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3447 ld a,SpellBookGraphicsBlock 3448 jp CopyRamToVramCorrectedCastleOverview 3450 .GoSetText:3451 ld a,(MenuOptionSelected?Backup)3453 cp 1 3454 ld hl,SpellDescriptions.DescriptionAllSpellSchools13455 jp z,.SetText3456 cp 2 3457 ld hl,SpellDescriptions.DescriptionAllSpellSchools23458 jp z,.SetText3459 cp 3 3460 ld hl,SpellDescriptions.DescriptionAllSpellSchools33461 jp z,.SetText3462 cp 43463 ld hl,SpellDescriptions.DescriptionAllSpellSchools43464 jp z,.SetText3466 cp 5 3467 ld hl,SpellDescriptions.DescriptionEarth13468 jp z,.SetText3469 cp 6 3470 ld hl,SpellDescriptions.DescriptionEarth23471 jp z,.SetText3472 cp 7 3473 ld hl,SpellDescriptions.DescriptionEarth33474 jp z,.SetText3475 ld hl,SpellDescriptions.DescriptionEarth43476 .SetText:3478 ld b,HeroOverViewSpellBookWindowDX + 0303479 ld c,HeroOverViewSpellBookWindowDY + 1593480 jp SetText3482DamageAllSpellSchools4: equ 103483DamageAllSpellSchools3: equ 03484DamageAllSpellSchools2: equ 03485DamageAllSpellSchools1: equ 03487DamageEarthSpell4: equ 03488DamageEarthSpell3: equ 03489DamageEarthSpell2: equ 03490DamageEarthSpell1: equ 503492DamageFireSpell4: equ 03493DamageFireSpell3: equ 03494DamageFireSpell2: equ 153495DamageFireSpell1: equ 203497DamageAirSpell4: equ 03498DamageAirSpell3: equ 03499DamageAirSpell2: equ 03500DamageAirSpell1: equ 03502DamageWaterSpell4: equ 03503DamageWaterSpell3: equ 303504DamageWaterSpell2: equ 03505DamageWaterSpell1: equ 303507EarthSelected:3508 xor a3509 ld (MenuOptionSelected?),a 3510 jp HeroOverviewSpellBookWindowCode_Earth3512FireSelected:3513 xor a3514 ld (MenuOptionSelected?),a 3515 jp HeroOverviewSpellBookWindowCode_Fire3517AirSelected:3518 xor a3519 ld (MenuOptionSelected?),a 3520 jp HeroOverviewSpellBookWindowCode_Air3521 3522WaterSelected:3523 xor a3524 ld (MenuOptionSelected?),a 3525 jp HeroOverviewSpellBookWindowCode_Water3529ResetStatusSpellBookButtons: 35303537 ret3539ActivateButton_Earth:3540 ld ix,HeroOverviewSpellBookButtonTable_Earth_Activated3541 ld iy,ButtonTableSpellBookSYSX_Earth_Activated3542 jr SetElementalButton3544ActivateButton_Fire:3545 ld ix,HeroOverviewSpellBookButtonTable_Fire_Activated3546 ld iy,ButtonTableSpellBookSYSX_Fire_Activated3547 jr SetElementalButton3549ActivateButton_Air:3550 ld ix,HeroOverviewSpellBookButtonTable_Air_Activated3551 ld iy,ButtonTableSpellBookSYSX_Air_Activated3552 jr SetElementalButton3554ActivateButton_Water:3555 ld ix,HeroOverviewSpellBookButtonTable_Water_Activated3556 ld iy,ButtonTableSpellBookSYSX_Water_Activated3557 jr SetElementalButton3559SetElementalButton:3560 ld l,(iy+ButtonOMouseClicked)3561 ld h,(iy+ButtonOMouseClicked+1)3562 3563 ld e,(ix+HeroOverviewWindowButton_de)3564 ld d,(ix+HeroOverviewWindowButton_de+1)3566 ld c,(ix+Buttonnynx)3567 ld b,(ix+Buttonnynx+1)3569 ld a,SpellBookGraphicsBlock 3570 call CopyRamToVramCorrectedCastleOverview 3571 ret3574HeroOverviewStatusWindowCode:3575 call SetHeroOverViewStatusWindow 3576 call SetStatusTextAttack3577 call SwapAndSetPage 3578 call SetHeroOverViewStatusWindow 3579 call SetStatusTextAttack3581 .engine:3582 call PopulateControls 35843589 ld a,(Controls)3590 bit 5,a 3591 ret nz3593 call CheckEndHeroOverviewStatus 3594 halt3595 jp .engine3597HeroOverviewSkillsWindowCode:3598 call SetHeroSkillsInTable3600 ld a, %1000 0011 3601 ld (HeroOverviewSkillsButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3602 ld (HeroOverviewSkillsButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3603 ld (HeroOverviewSkillsButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3604 ld (HeroOverviewSkillsButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3605 ld (HeroOverviewSkillsButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3606 ld (HeroOverviewSkillsButtonTable + 5*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3608 call SetHeroOverViewSkillsWindow 3610 ld ix,HeroOverviewSkillsButtonTable3611 ld iy,ButtonTableSkillsSYSX3612 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3613 call SetButtonStatusAndText 3614 call SwapAndSetPage 3615 call SetHeroOverViewSkillsWindow 3617 .engine:3618 call PopulateControls 3620 ld a,(Controls)3621 bit 5,a 3622 ret nz3624 ld ix,HeroOverviewSkillsButtonTable3625 ld iy,ButtonTableSkillsSYSX3627 call CheckButtonMouseInteraction3628 ld a,(MenuOptionSelected?)3629 or a3630 jp nz,.MenuOptionSelected3632 call SetSkillExplanation 3633 call CheckEndHeroOverviewSkills 3634 ld ix,HeroOverviewSkillsButtonTable3635 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3636 call SetButtonStatusAndText 3637 call SwapAndSetPage 3638 3639 halt3640 jp .engine3642 .MenuOptionSelected:3643 xor a3644 ld (MenuOptionSelected?),a3645 ld (ActivatedSkillsButton),ix3646 ld a,33647 ld (SetSkillsDescription?),a 3648 jp HeroOverviewSkillsWindowCode3650TextLevel:3651 db "Level",2553652SetTextNameHeroAndLevel:3653 ld ix,(plxcurrentheroAddress)3654 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013655 ld c,HeroOverViewFirstWindowchoicesDY + 0083656 ld l,(ix+HeroSpecificInfo+0) 3657 ld h,(ix+HeroSpecificInfo+1)3658 call SetText3660 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013661 ld c,HeroOverViewFirstWindowchoicesDY + 0323662 ld hl,TextLevel3663 call SetText 3665 ld b,HeroOverViewFirstWindowchoicesDx + 050 - 0013666 ld c,HeroOverViewFirstWindowchoicesDY + 0323667 ld a,(ix+HeroLevel) 3668 ld l,a3669 ld h,03670 call SetNumber16BitCastle 3672 ld l,(ix+HeroSpecificInfo+0)3673 ld h,(ix+HeroSpecificInfo+1)3674 ld de,HeroInfoClass3675 add hl,de 3676 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013677 ld c,HeroOverViewFirstWindowchoicesDY + 0163678 jp SetText 3680DYDX16x30HeroIconAtHeroOverview: equ (HeroOverViewFirstWindowchoicesDY+10)*128 + ((HeroOverViewFirstWindowchoicesDX+10)/2) - 128 3681Set16x30HeroIconAtHeroOverviewCode:3682 ld ix,(plxcurrentheroAddress)3684 3685 ld l,(ix+HeroSpecificInfo+0) 3686 ld h,(ix+HeroSpecificInfo+1)3687 push hl3688 pop ix3690 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3691 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3692 ld bc,$40003693 xor a3694 sbc hl,bc3696 ld bc,NXAndNY16x30HeroIcon3697 ld a,Hero16x30PortraitsBlock 3698 ld de,DYDX16x30HeroIconAtHeroOverview 3699 jp CopyRamToVramCorrectedCastleOverview 3702 3706370837103715HeroOverviewCode:3716call screenon3718 ld a,33719 ld (SetHeroArmyAndStatusInHud?),a3721 ld a, %1000 0011 3722 ld (HeroOverviewFirstWindowButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3723 ld (HeroOverviewFirstWindowButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3724 ld (HeroOverviewFirstWindowButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3725 ld (HeroOverviewFirstWindowButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3726 ld (HeroOverviewFirstWindowButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a37303733 call SetHeroOverViewFirstWindow 3734 call Set16x30HeroIconAtHeroOverviewCode3735 call SetTextNameHeroAndLevel 3737 ld ix,HeroOverviewFirstWindowButtonTable3738 ld iy,ButtonTableSYSX3739 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3740 call SetButtonStatusAndText 3742 call SwapAndSetPage 3743 call SetHeroOverViewFirstWindow 3744 call Set16x30HeroIconAtHeroOverviewCode3745 call SetTextNameHeroAndLevel 37473752 ld a,%0001 00003753 ld (Controls),a 3755 .engine: 3756 call PopulateControls 37583763 ld a,(Controls)3764 bit 5,a 3765 ret nz3767 ld ix,HeroOverviewFirstWindowButtonTable3768 ld iy,ButtonTableSYSX3769 call CheckButtonMouseInteraction3771 ld a,(MenuOptionSelected?)3772 or a3773 jr nz,.MenuOptionSelected3775 call CheckEndHeroOverviewFirstWindow 3777 ld ix,HeroOverviewFirstWindowButtonTable3778 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3779 call SetButtonStatusAndText 3780 call SwapAndSetPage 37823783 jp .engine3785 .MenuOptionSelected:3786 cp 1 3787 jr z,.StatusSelected3788 cp 2 3789 jr z,.SpellBookSelected3790 cp 3 3791 jr z,.ArmySelected3792 cp 4 3793 jr z,.InventorySelected3794 cp 5 3795 jr z,.SkillsSelected3797 xor a3798 ld (MenuOptionSelected?),a3799 ret3801 .InventorySelected:3802 xor a3803 ld (MenuOptionSelected?),a 3804 jp HeroOverviewInventoryWindowCode3806 .StatusSelected:3807 xor a3808 ld (MenuOptionSelected?),a 3809 jp HeroOverviewStatusWindowCode3811 .ArmySelected:3812 xor a3813 ld (MenuOptionSelected?),a3814 jp HeroOverviewArmyWindowCode3816 .SpellBookSelected:3817 xor a3818 ld (MenuOptionSelected?),a 3819 jp HeroOverviewSpellBookWindowCode_Earth3820 3821 .SkillsSelected:3822 xor a3823 ld (MenuOptionSelected?),a 3824 jp HeroOverviewSkillsWindowCode3827SetStatusTextAttack:3828 ld ix,(plxcurrentheroAddress)3830 ld de,ItemAttackPointsTable3831 ld hl,SetAdditionalStatFromInventoryItemsInHL 3832 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3833 ld e,(ix+HeroStatAttack) 3834 ld d,03835 add hl,de3836 ld b,HeroOverViewStatusWindowDX + 056 + 004-33837 ld c,HeroOverViewStatusWindowDY + 0343838 call SetNumber16BitCastle3840 ld de,ItemDefencePointsTable3841 ld hl,SetAdditionalStatFromInventoryItemsInHL 3842 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3843 ld e,(ix+HeroStatDefense)3844 ld d,03845 add hl,de3847 bit 7,h 3848 jr z,.SetDefense3849 ld hl,03850 .SetDefense:3852 ld b,HeroOverViewStatusWindowDX + 067 + 004 -23853 ld c,HeroOverViewStatusWindowDY + 0343854 call SetNumber16BitCastle3856 ld de,ItemIntelligencePointsTable3857 ld hl,SetAdditionalStatFromInventoryItemsInHL 3858 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3859 ld e,(ix+HeroStatKnowledge)3860 ld d,03861 add hl,de 3862 ld b,HeroOverViewStatusWindowDX + 075 + 004 +23863 ld c,HeroOverViewStatusWindowDY + 0343864 call SetNumber16BitCastle3866 ld de,ItemSpellDamagePointsTable3867 ld hl,SetAdditionalStatFromInventoryItemsInHL 3868 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3869 ld e,(ix+HeroStatSpelldamage)3870 ld d,03871 add hl,de3872 ld b,HeroOverViewStatusWindowDX + 084 + 004 +53873 ld c,HeroOverViewStatusWindowDY + 0343874 call SetNumber16BitCastle3876 ld a,(ix+HeroLevel)3877 ld b,HeroOverViewStatusWindowDX + 0913878 ld c,HeroOverViewStatusWindowDY + 0453879 ld h,03880 ld l,a3881 call SetNumber16BitCastle3883 ld a,(ix+HeroLevel) 3884 cp 183885 ld hl,57533 3886 jr z,.XpSet3887 3888 ld l,(ix+HeroXp)3889 ld h,(ix+HeroXp+1)3890 .XpSet:3891 ld b,HeroOverViewStatusWindowDX + 0683892 ld c,HeroOverViewStatusWindowDY + 0593893 call SetNumber16BitCastle3895 ld a,(PutLetter+dx) 3896 add a,43897 ld b,a 3898 ld c,HeroOverViewStatusWindowDY + 059 3899 ld hl,TextSlash3900 call SetText3902 ld a,(ix+HeroLevel) 3903 cp 183904 ld hl,57533 3905 jr z,.XpMaxSet3906 3907 ld a,(ix+HeroLevel) 3908 add a,a3909 ld d,03910 ld e,a3911 ld hl,HeroXPTable-23912 add hl,de3913 ld e,(hl)3914 inc hl3915 ld d,(hl) 3916 ex de,hl3917 .XpMaxSet:3918 ld a,(PutLetter+dx) 3919 add a,43920 ld b,a 3921 ld c,HeroOverViewStatusWindowDY + 0593922 call SetNumber16BitCastle3924 ld a,(ix+HeroMove)3925 ld b,HeroOverViewStatusWindowDX + 1043926 ld c,HeroOverViewStatusWindowDY + 0733927 ld h,03928 ld l,a3929 call SetNumber16BitCastle3931 ld a,(ix+HeroTotalMove)3932 ld b,HeroOverViewStatusWindowDX + 1243933 ld c,HeroOverViewStatusWindowDY + 0733934 ld h,03935 ld l,a3936 call SetNumber16BitCastle3938 ld b,HeroOverViewStatusWindowDX + 0933939 ld c,HeroOverViewStatusWindowDY + 0873940 ld l,(ix+HeroMana+0)3941 ld h,(ix+HeroMana+1)3942 call SetNumber16BitCastle3944 call SetTotalManaHero3946 ld b,HeroOverViewStatusWindowDX + 1163947 ld c,HeroOverViewStatusWindowDY + 0873948 ld l,(ix+HeroTotalMana+0)3949 ld h,(ix+HeroTotalMana+1)3950 call SetNumber16BitCastle3952 ld a,(ix+HeroManarec)3953 ld b,HeroOverViewStatusWindowDX + 0983954 ld c,HeroOverViewStatusWindowDY + 1013955 ld h,03956 ld l,a3957 call SetNumber16BitCastle3958 ret3960TextSlash: db "/",2553964CheckEndHeroOverviewArmy:3965 ld a,(NewPrContr)3966 bit 4,a 3967 ret z3969 ld a,(spat+0) 3970 cp HeroOverViewArmyWindowDY3971 jr c,.NotOverHeroOverViewArmyWindow3972 cp HeroOverViewArmyWindowDY+HeroOverViewArmyWindowNY3973 jr nc,.NotOverHeroOverViewArmyWindow3974 3975 ld a,(spat+1) 3977 add a,063979 cp HeroOverViewArmyWindowDX3980 jr c,.NotOverHeroOverViewArmyWindow3981 cp HeroOverViewArmyWindowDX+HeroOverViewArmyWindowNX3982 ret c3984 .NotOverHeroOverViewArmyWindow:3985 pop af3986 ret 3988CheckEndHeroOverviewInventory:3989 ld a,(NewPrContr)3990 bit 4,a 3991 ret z3993 ld a,(spat+0) 3994 cp HeroOverViewInventoryWindowDY3995 jr c,.NotOverHeroOverViewInventoryWindow3996 cp HeroOverViewInventoryWindowDY+HeroOverViewInventoryWindowNY3997 jr nc,.NotOverHeroOverViewInventoryWindow3998 3999 ld a,(spat+1) 4001 add a,064003 cp HeroOverViewInventoryWindowDX4004 jr c,.NotOverHeroOverViewInventoryWindow4005 cp HeroOverViewInventoryWindowDX+HeroOverViewInventoryWindowNX4006 ret c4008 .NotOverHeroOverViewInventoryWindow:4009 pop af4010 ret 4012CheckEndHeroOverviewSpellBook:4013 ld a,(NewPrContr)4014 bit 4,a 4015 ret z4017 ld a,(spat+0) 4018 cp HeroOverViewSpellBookWindowDY4019 jr c,.NotOverHeroOverViewSpellBookWindow4020 cp HeroOverViewSpellBookWindowDY+HeroOverViewSpellBookWindowNY4021 jr nc,.NotOverHeroOverViewSpellBookWindow4022 4023 ld a,(spat+1) 4025 add a,064027 cp HeroOverViewSpellBookWindowDX4028 jr c,.NotOverHeroOverViewSpellBookWindow4029 cp HeroOverViewSpellBookWindowDX+HeroOverViewSpellBookWindowNX4030 ret c4032 .NotOverHeroOverViewSpellBookWindow:4033 pop af4034 ret 4036CheckEndHeroOverviewStatus:4037 ld a,(NewPrContr)4038 bit 4,a 4039 ret z4041 ld a,(spat+0) 4042 cp HeroOverViewStatusWindowDY4043 jr c,.NotOverHeroOverViewStatusWindow4044 cp HeroOverViewStatusWindowDY+HeroOverViewStatusWindowNY4045 jr nc,.NotOverHeroOverViewStatusWindow4046 4047 ld a,(spat+1) 4049 add a,064051 cp HeroOverViewStatusWindowDX4052 jr c,.NotOverHeroOverViewStatusWindow4053 cp HeroOverViewStatusWindowDX+HeroOverViewStatusWindowNX4054 ret c4056 .NotOverHeroOverViewStatusWindow:4057 pop af4058 ret 4060CheckEndHeroOverviewSkills:4061 ld a,(NewPrContr)4062 bit 4,a 4063 ret z4065 ld a,(spat+0) 4066 cp HeroOverViewSkillsWindowDY4067 jr c,.NotOverHeroOverViewSkillsWindow4068 cp HeroOverViewSkillsWindowDY+HeroOverViewSkillsWindowNY4069 jr nc,.NotOverHeroOverViewSkillsWindow4070 4071 ld a,(spat+1) 4073 add a,064075 cp HeroOverViewSkillsWindowDX4076 jr c,.NotOverHeroOverViewSkillsWindow4077 cp HeroOverViewSkillsWindowDX+HeroOverViewSkillsWindowNX4078 ret c4080 .NotOverHeroOverViewSkillsWindow:4081 pop af4082 ret 4084CheckEndHeroOverviewFirstWindow: 4085 ld a,(NewPrContr)4086 bit 4,a 4087 ret z4089 ld a,(spat+0) 4090 cp HeroOverViewFirstWindowchoicesDY4091 jr c,.NotOverHeroOverViewFirstWindowChoices4092 cp HeroOverViewFirstWindowchoicesDY+HeroOverViewFirstWindowchoicesNY4093 jr nc,.NotOverHeroOverViewFirstWindowChoices4094 4095 ld a,(spat+1) 4097 add a,064099 cp HeroOverViewFirstWindowchoicesDX4100 jr c,.NotOverHeroOverViewFirstWindowChoices4101 cp HeroOverViewFirstWindowchoicesDX+HeroOverViewFirstWindowchoicesNX4102 ret c4104 .NotOverHeroOverViewFirstWindowChoices:4105 pop af4106 ret 4108SetHeroSkillsInTable:4109 ld ix,(plxcurrentheroAddress)4111 ld a,(ix+HeroSkills+0)4112 ld de,TextSkillsWindowButton14113 call .SetheroSkill4115 ld a,(ix+HeroSkills+1)4116 ld de,TextSkillsWindowButton24117 call .SetheroSkill4119 ld a,(ix+HeroSkills+2)4120 ld de,TextSkillsWindowButton34121 call .SetheroSkill4123 ld a,(ix+HeroSkills+3)4124 ld de,TextSkillsWindowButton44125 call .SetheroSkill4127 ld a,(ix+HeroSkills+4)4128 ld de,TextSkillsWindowButton54129 call .SetheroSkill4131 ld a,(ix+HeroSkills+5)4132 ld de,TextSkillsWindowButton64133 call .SetheroSkill4134 ret4136 .SetheroSkill:4137 ld l,a4138 ld h,04139 add hl,hl 4140 add hl,hl 4141 add hl,hl 4142 push hl4143 add hl,hl 4144 add hl,hl 4145 add hl,hl 4146 add hl,hl 4147 pop bc4148 add hl,bc 4150 ld bc,SkillEmpty4151 add hl,bc4152 ld bc,LenghtSkillDescription4153 ldir4154 ret4157CheckButtonMouseInteraction:4158 ld b,(ix+HeroOverviewWindowAmountOfButtons)4159 ld de,ButtonTableLenght4161 .loop:4162 call .check4163 add ix,de4164 djnz .loop4165 ret4166 4167 .check:4168 ld a,(ix+HeroOverviewWindowButtonStatus)4169 or a4170 ret z4171 4172 ld a,(spat+0) 4173 cp (ix+HeroOverviewWindowButtonYtop)4174 jr c,.NotOverButton4175 cp (ix+HeroOverviewWindowButtonYbottom)4176 jr nc,.NotOverButton4177 ld a,(spat+1) 4179 add a,064181 cp (ix+HeroOverviewWindowButtonXleft)4182 jr c,.NotOverButton4183 cp (ix+HeroOverviewWindowButtonXright)4184 jr nc,.NotOverButton4185 4192 ld a,(Controls)4193 bit 4,a 4194 jr nz,.MouseOverButtonAndSpacePressed4195 bit 5,(ix+HeroOverviewWindowButtonStatus) 4196 jr nz,MenuOptionSelected 4197 .MouseHoverOverButton:4198 ld (ix+HeroOverviewWindowButtonStatus),%0100 00114199 ret4201 .MouseOverButtonAndSpacePressed:4202 bit 5,(ix+HeroOverviewWindowButtonStatus) 4203 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit4204 ld a,(NewPrContr)4205 bit 4,a 4206 jr z,.MouseHoverOverButton4208 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:4209 ld (ix+HeroOverviewWindowButtonStatus),%0010 00114210 ret4211 4212 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:4213 ld (ix+HeroOverviewWindowButtonStatus),%0010 00114214 ret4216 .NotOverButton:4217 bit 5,(ix+HeroOverviewWindowButtonStatus) 4218 jr nz,.buttonIsStillLit4219 bit 6,(ix+HeroOverviewWindowButtonStatus) 4220 ret z4221 .buttonIsStillLit:4222 ld (ix+HeroOverviewWindowButtonStatus),%1000 00114223 ret4225MenuOptionSelected:4226 ld a,b 4227 ld (MenuOptionSelected?),a4228 pop af 4229 ret4231SetButtonStatusAndText4:42324236 ld (BCStored),bc4238 ld b,(ix+HeroOverviewWindowAmountOfButtons)4239 .loop:4240 push bc4241 call .Setbutton4242 pop bc4243 ld de,ButtonTableLenght4244 add ix,de4247 ld de,6 4248 add iy,de4251 djnz .loop4252 ret4254 .Setbutton:4255 bit 0,(ix+HeroOverviewWindowButtonStatus)4256 jr nz,.bit0isSet4257 bit 1,(ix+HeroOverviewWindowButtonStatus)4258 ret z4259 4260 .bit1isSet:4261 res 1,(ix+HeroOverviewWindowButtonStatus)4262 jr .goCopyButton4263 .bit0isSet:4264 res 0,(ix+HeroOverviewWindowButtonStatus) 4265 .goCopyButton:4267 bit 7,(ix+HeroOverviewWindowButtonStatus)4268 ld l,(iy+ButtonOff)4269 ld h,(iy+ButtonOff+1)4270 jr nz,.go 4271 bit 6,(ix+HeroOverviewWindowButtonStatus)4272 ld l,(iy+ButtonMouseOver)4273 ld h,(iy+ButtonMouseOver+1)4274 jr nz,.go 4276 ld l,(iy+ButtonOMouseClicked)4277 ld h,(iy+ButtonOMouseClicked+1)4278 .go:4279 4280 ld e,(ix+HeroOverviewWindowButton_de)4281 ld d,(ix+HeroOverviewWindowButton_de+1)4282 ld bc,(BCStored)4284 ld c,(ix+Buttonnynx)4285 ld b,(ix+Buttonnynx+1)4287 ld a,ArmyGraphicsBlock 4288 call CopyRamToVramCorrectedCastleOverview 4289 ret4291SetButtonStatusAndText3:42924296 ld (BCStored),bc4298 ld b,(ix+HeroOverviewWindowAmountOfButtons)4299 .loop:4300 push bc4301 call .Setbutton4302 pop bc4303 ld de,ButtonTableLenght4304 add ix,de4307 ld de,6 4308 add iy,de4311 djnz .loop4312 ret4314 .Setbutton:4315 bit 0,(ix+HeroOverviewWindowButtonStatus)4316 jr nz,.bit0isSet4317 bit 1,(ix+HeroOverviewWindowButtonStatus)4318 ret z4319 4320 .bit1isSet:4321 res 1,(ix+HeroOverviewWindowButtonStatus)4322 jr .goCopyButton4323 .bit0isSet:4324 res 0,(ix+HeroOverviewWindowButtonStatus) 4325 .goCopyButton:4327 bit 7,(ix+HeroOverviewWindowButtonStatus)4328 ld l,(iy+ButtonOff)4329 ld h,(iy+ButtonOff+1)4330 jr nz,.go 4331 bit 6,(ix+HeroOverviewWindowButtonStatus)4332 ld l,(iy+ButtonMouseOver)4333 ld h,(iy+ButtonMouseOver+1)4334 jr nz,.go 4336 ld l,(iy+ButtonOMouseClicked)4337 ld h,(iy+ButtonOMouseClicked+1)4338 .go:4339 4340 ld e,(ix+HeroOverviewWindowButton_de)4341 ld d,(ix+HeroOverviewWindowButton_de+1)4342 ld bc,(BCStored)4344 ld c,(ix+Buttonnynx)4345 ld b,(ix+Buttonnynx+1)4347 ld a,InventoryGraphicsBlock 4348 call CopyRamToVramCorrectedCastleOverview 4349 ret4351SetButtonStatusAndText2: 4356 ld (BCStored),bc4358 ld b,(ix+HeroOverviewWindowAmountOfButtons)4359 .loop:4360 push bc4361 call .Setbutton4362 pop bc4363 ld de,ButtonTableLenght4364 add ix,de4367 ld de,6 4368 add iy,de4371 djnz .loop4372 ret4374 .Setbutton:4375 bit 0,(ix+HeroOverviewWindowButtonStatus)4376 jr nz,.bit0isSet4377 bit 1,(ix+HeroOverviewWindowButtonStatus)4378 ret z4379 4380 .bit1isSet:4381 res 1,(ix+HeroOverviewWindowButtonStatus)4382 jr .goCopyButton4383 .bit0isSet:4384 res 0,(ix+HeroOverviewWindowButtonStatus) 4385 .goCopyButton:4387 bit 7,(ix+HeroOverviewWindowButtonStatus)4388 ld l,(iy+ButtonOff)4389 ld h,(iy+ButtonOff+1)4390 jr nz,.go 4391 bit 6,(ix+HeroOverviewWindowButtonStatus)4392 ld l,(iy+ButtonMouseOver)4393 ld h,(iy+ButtonMouseOver+1)4394 jr nz,.go 4396 ld l,(iy+ButtonOMouseClicked)4397 ld h,(iy+ButtonOMouseClicked+1)4398 .go:4399 4400 ld e,(ix+HeroOverviewWindowButton_de)4401 ld d,(ix+HeroOverviewWindowButton_de+1)4402 ld bc,(BCStored)4404 ld c,(ix+Buttonnynx)4405 ld b,(ix+Buttonnynx+1)4407 ld a,SpellBookGraphicsBlock 4408 call CopyRamToVramCorrectedCastleOverview 4409 ret4411SetButtonStatusAndText: 44154419 ld (BCStored),bc4421 ld b,(ix+HeroOverviewWindowAmountOfButtons)4422 .loop:4423 push bc4424 call .Setbutton4425 pop bc4426 ld de,ButtonTableLenght4427 add ix,de4428 djnz .loop4429 ret4431 .Setbutton:4432 bit 0,(ix+HeroOverviewWindowButtonStatus)4433 jr nz,.bit0isSet4434 bit 1,(ix+HeroOverviewWindowButtonStatus)4435 ret z4436 4437 .bit1isSet:4438 res 1,(ix+HeroOverviewWindowButtonStatus)4439 jr .goCopyButton4440 .bit0isSet:4441 res 0,(ix+HeroOverviewWindowButtonStatus) 4442 .goCopyButton:4444 bit 7,(ix+HeroOverviewWindowButtonStatus)4445 ld l,(iy+ButtonOff)4446 ld h,(iy+ButtonOff+1)4447 jr nz,.go 4448 bit 6,(ix+HeroOverviewWindowButtonStatus)4449 ld l,(iy+ButtonMouseOver)4450 ld h,(iy+ButtonMouseOver+1)4451 jr nz,.go 4453 ld l,(iy+ButtonOMouseClicked)4454 ld h,(iy+ButtonOMouseClicked+1)4455 .go:4456 4457 ld e,(ix+HeroOverviewWindowButton_de)4458 ld d,(ix+HeroOverviewWindowButton_de+1)4459 ld bc,(BCStored)4461 ld a,HeroOverviewGraphicsBlock 4462 call CopyRamToVramCorrectedCastleOverview 4463 44644465 4466SetTextInButton:4467 ld l,(ix+TextAddress)4468 ld h,(ix+TextAddress+1) 4471 ld a,(ix+HeroOverviewWindowButtonYtop)4472 add a,444734474 ld c,a4475 ld a,(ix+HeroOverviewWindowButtonXleft)4476 add a,344774478 ld b,a4479 jp SetText4481SetSkillExplanation:4482 ld a,(SetSkillsDescription?)4483 dec a4484 ret z4485 ld (SetSkillsDescription?),a 4486 4487 ld ix,(ActivatedSkillsButton)4488 ld b,0374489 ld c,1384490 ld l,(ix+TextAddress)4491 ld h,(ix+TextAddress+1) 4492 ld de,LenghtTextSkillsDescription4493 add hl,de4494 jp SetText4496TextPlusSymbol: equ $2b4497TextMinusSymbol: equ $2d4498TextPercentageSymbol: equ $254499TextSpace: equ $204500TextNumber0: equ $304501TextApostrofeSymbol: equ $274502TextColonSymbol: equ $3a4503TextSlashSymbol: equ $2f4504TextQuestionMarkSymbol: equ $3f4505TextCommaSymbol: equ $2c4506TextDotSymbol: equ $2e4507TextOpeningParenthesisSymbol: equ $284508TextClosingParenthesisSymbol: equ $294510TextFirstWindowChoicesButton1: db "Skills",2554511TextFirstWindowChoicesButton2: db "Inventory",2554512TextFirstWindowChoicesButton3: db "Army",2554513TextFirstWindowChoicesButton4: db "Spell Book",2554514TextFirstWindowChoicesButton5: db "Status",2554516LenghtSkillDescription: equ SkillArcheryAdvanced-SkillArcheryBasic4517SkillEmpty:4518 db "                                 ",255 4519 db "                                 ",2544520 db "                                 ",2544521 db "                                 ",2554522SkillArcheryBasic:4523 db "Basic Archery                    ",255 4524 db "Basic Archery                    ",2544525 db "The ranged Attack damage of your ",2544526 db "units is increased by 10%        ",2554527SkillArcheryAdvanced:4528 db "Advanced Archery                 ",2554529 db "Advanced Archery                 ",2544530 db "The ranged Attack damage of your ",2544531 db "units is increased by 20%        ",2554532SkillArcheryExpert:4533 db "Expert Archery                   ",2554534 db "Expert Archery                   ",2544535 db "The ranged Attack damage of your ",2544536 db "units is increased by 50%        ",2554537SkillOffenceBasic:4538 db "Basic Offence                    ",255 4539 db "Basic Offence                    ",2544540 db "The hand to hand damage of your  ",2544541 db "units is increased by 10%        ",2554542SkillOffenceAdvanced:4543 db "Advanced Offence                 ",2554544 db "Advanced Offence                 ",2544545 db "The hand to hand damage of your  ",2544546 db "units is increased by 20%        ",2554547SkillOffenceExpert:4548 db "Expert Offence                   ",2554549 db "Expert Offence                   ",2544550 db "The hand to hand damage of your  ",2544551 db "units is increased by 30%        ",25545524553SkillArmourerBasic:4554 db "Basic Armorer                    ",255 4555 db "Basic Armorer                    ",2544556 db "Damage inflicted on your army is ",2544557 db "reduced by 5%                    ",2554558SkillArmourerAdvanced:4559 db "Advanced Armorer                 ",2554560 db "Advanced Armorer                 ",2544561 db "Damage inflicted on your army is ",2544562 db "reduced by 10%                   ",2554563SkillArmourerExpert:4564 db "Expert Armorer                   ",2554565 db "Expert Armorer                   ",2544566 db "Damage inflicted on your army is ",2544567 db "reduced by 15%                   ",2554568SkillResistanceBasic:4569 db "Basic Resistance                 ",255 4570 db "Basic Resistance                 ",2544571 db "Grants your units a 10% chance to",2544572 db "block individual targeted spells ",2554573SkillResistanceAdvanced:4574 db "Advanced Resistance              ",2554575 db "Advanced Resistance              ",2544576 db "Grants your units a 15% chance to",2544577 db "block individual targeted spells ",2554578SkillResistanceExpert:4579 db "Expert Resistance                ",2554580 db "Expert Resistance                ",2544581 db "Grants your units a 20% chance to",2544582 db "block individual targeted spells ",2554594SkillEstatesBasic:4595 db "Basic Estates                    ",255 4596 db "Basic Estates                    ",2544597 db "Your hero generates an extra 125 ",2544598 db "Gold per day.                    ",2554599SkillEstatesAdvanced:4600 db "Advanced Estates                 ",2554601 db "Advanced Estates                 ",2544602 db "Your hero generates an extra 250 ",2544603 db "Gold per day.                    ",2554604SkillEstatesExpert:4605 db "Expert Estates                   ",2554606 db "Expert Estates                   ",2544607 db "Your hero generates an extra 500 ",2544608 db "Gold per day.                    ",2554609SkillLearningBasic:4610 db "Basic Learning                   ",255 4611 db "Basic Learning                   ",2544612 db "Your hero's accumulated          ",2544613 db "experience is amplified by 10%   ",2554614SkillLearningAdvanced:4615 db "Advanced Learning                ",2554616 db "Advanced Learning                ",2544617 db "Your hero's accumulated          ",2544618 db "experience is amplified by 20%   ",2554619SkillLearningExpert:4620 db "Expert Learning                  ",2554621 db "Expert Learning                  ",2544622 db "Your hero's accumulated          ",2544623 db "experience is amplified by 30%   ",2554624SkillLogisticsBasic:4625 db "Basic Logistics                  ",255 4626 db "Basic Logistics                  ",2544627 db "An additional 10% is added to    ",2544628 db "your hero's land movement range. ",2554629SkillLogisticsAdvanced:4630 db "Advanced Logistics               ",2554631 db "Advanced Logistics               ",2544632 db "An additional 20% is added to    ",2544633 db "your hero's land movement range. ",2554634SkillLogisticsExpert:4635 db "Expert Logistics                 ",2554636 db "Expert Logistics                 ",2544637 db "An additional 30% is added to    ",2544638 db "your hero's land movement range. ",2554643SkillIntelligenceBasic:4644 db "Basic Intelligence               ",255 4645 db "Basic Intelligence               ",2544646 db "Boosts your hero's maximum spell ",2544647 db "points by 25%                    ",2554648SkillIntelligenceAdvanced:4649 db "Advanced Intelligence            ",2554650 db "Advanced Intelligence            ",2544651 db "Boosts your hero's maximum spell ",2544652 db "points by 50%                    ",2554653SkillIntelligenceExpert:4654 db "Expert Intelligence              ",2554655 db "Expert Intelligence              ",2544656 db "Boosts your hero's maximum spell ",2544657 db "points by 100%                   ",2554658SkillSorceryBasic:4659 db "Basic Sorcery                    ",255 4660 db "Basic Sorcery                    ",2544661 db "An additional 5% is added to     ",2544662 db "your hero's spell damage.        ",2554663SkillSorceryAdvanced:4664 db "Advanced Sorcery                 ",2554665 db "Advanced Sorcery                 ",2544666 db "An additional 10% is added to    ",2544667 db "your hero's spell damage.        ",2554668SkillSorceryExpert:4669 db "Expert Sorcery                   ",2554670 db "Expert Sorcery                   ",2544671 db "An additional 15% is added to    ",2544672 db "your hero's spell damage.        ",2554673SkillWisdomBasic:4674 db "Basic Wisdom                     ",255 4675 db "Basic Wisdom                     ",2544676 db "Your hero is capable of learning ",2544677 db "spells of level 2 and lower.     ",2554678SkillWisdomAdvanced:4679 db "Advanced Wisdom                  ",2554680 db "Advanced Wisdom                  ",2544681 db "Your hero is capable of learning ",2544682 db "spells of level 3 and lower.     ",2554683SkillWisdomExpert:4684 db "Expert Wisdom                    ",2554685 db "Expert Wisdom                    ",2544686 db "Your hero is capable of learning ",2544687 db "all spells.                      ",2554689SkillNecromancyBasic:4690 db "Basic Necromancy                 ",255 4691 db "Basic Necromancy                 ",2544692 db "Revives 10% of enemy creatures   ",2544693 db "that have fallen in battle.      ",2554694SkillNecromancyAdvanced:4695 db "Advanced Necromancy              ",2554696 db "Advanced Necromancy              ",2544697 db "Revives 20% of enemy creatures   ",2544698 db "that have fallen in battle.      ",2554699SkillNecromancyExpert:4700 db "Expert Necromancy                ",2554701 db "Expert Necromancy                ",2544702 db "Revives 1/3 of enemy creatures   ",2544703 db "that have fallen in battle.      ",25547064713 4714SetHeroOverViewFirstWindow:4715 ld hl,$4000 + (HeroOverViewFirstWindowchoicesSY*128) + (HeroOverViewFirstWindowchoicesSX/2) -1284716 ld de,$0000 + (HeroOverViewFirstWindowchoicesDY*128) + (HeroOverViewFirstWindowchoicesDX/2)4717 ld bc,$0000 + (HeroOverViewFirstWindowchoicesNY*256) + (HeroOverViewFirstWindowchoicesNX/2)4718 ld a,HeroOverviewGraphicsBlock 4719 jp CopyRamToVramCorrectedCastleOverview 4721SetHeroOverViewSkillsWindow:4722 ld hl,$4000 + (HeroOverViewSkillsWindowSY*128) + (HeroOverViewSkillsWindowSX/2) -1284723 ld de,$0000 + (HeroOverViewSkillsWindowDY*128) + (HeroOverViewSkillsWindowDX/2)4724 ld bc,$0000 + (HeroOverViewSkillsWindowNY*256) + (HeroOverViewSkillsWindowNX/2)4725 ld a,HeroOverviewGraphicsBlock 4726 jp CopyRamToVramCorrectedCastleOverview 4728SetHeroOverViewStatusWindow:4729 ld hl,$4000 + (HeroOverViewStatusWindowSY*128) + (HeroOverViewStatusWindowSX/2) -1284730 ld de,$0000 + (HeroOverViewStatusWindowDY*128) + (HeroOverViewStatusWindowDX/2)4731 ld bc,$0000 + (HeroOverViewStatusWindowNY*256) + (HeroOverViewStatusWindowNX/2)4732 ld a,HeroOverviewStatusGraphicsBlock4733 jp CopyRamToVramCorrectedCastleOverview 4735SetHeroOverViewSpellBookWindow:4736 ld hl,$4000 + (HeroOverViewSpellBookWindowSY*128) + (HeroOverViewSpellBookWindowSX/2) -1284737 ld de,$0000 + (HeroOverViewSpellBookWindowDY*128) + (HeroOverViewSpellBookWindowDX/2)4738 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4739 ld a,SpellBookGraphicsBlock4740 jp CopyRamToVramCorrectedCastleOverview 4742SetHeroOverViewInventoryWindow:4743 ld hl,$4000 + (HeroOverViewInventoryWindowSY*128) + (HeroOverViewInventoryWindowSX/2) -1284744 ld de,$0000 + (HeroOverViewInventoryWindowDY*128) + (HeroOverViewInventoryWindowDX/2)4745 ld bc,$0000 + (HeroOverViewInventoryWindowNY*256) + (HeroOverViewInventoryWindowNX/2)4746 ld a,InventoryGraphicsBlock4747 jp CopyRamToVramCorrectedCastleOverview 4749SetHeroOverViewArmyWindow:4750 ld hl,$4000 + (HeroOverViewArmyWindowSY*128) + (HeroOverViewArmyWindowSX/2) -1284751 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)4752 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)4753 ld a,ArmyGraphicsBlock4754 jp CopyRamToVramCorrectedCastleOverview 4757MSXHeroes.asm675 ds $8000-$,$ff676dephase678681HeroOverviewStatusGraphicsBlock: equ $1d682phase $4000683 incbin "..\grapx\HeroOverview\StatusWindow.SC5",7,116 * 128 684 ds $c000-$,$ff685dephase687690SpellBookGraphicsBlock: equ $1f691phase $4000692 incbin "..\grapx\HeroOverview\SpellBook.SC5",7,200 * 128 693 ds $c000-$,$ff694dephase696699InventoryGraphicsBlock: equ $21700phase $4000701 incbin "..\grapx\HeroOverview\Inventory.SC5",7,208 * 128 702 incbin "..\grapx\HeroOverview\InventoryBottom48Lines.SC5",7,48 * 128 703 ds $c000-$,$ff704dephase706709ArmyGraphicsBlock: equ $23710phase $4000711 incbin "..\grapx\HeroOverview\Army.SC5",7,133 * 128 712 ds $c000-$,$ff713dephase715718HeroArmyTransferGraphicsBlock: equ $25719phase $4000720 incbin "..\grapx\HeroOverview\HeroArmyTransfer.SC5",7,137 * 128 721 ds $c000-$,$ff722dephase724727Hero16x30PortraitsBlock: equ $27728phase $4000729 incbin "..\grapx\HeroesSprites\16x30Portraits.SC5",7,150 * 128 730 ds $c000-$,$ff731dephase733736Enemy14x24PortraitsBlock: equ $29737phase $4000738 incbin "..\grapx\MonsterSprites\14x24Portraits.SC5",7,208 * 128 739 incbin "..\grapx\MonsterSprites\14x24PortraitsBottom48lines.SC5",7,032 * 128 740 ds $c000-$,$ff741dephase743746Enemy14x24PortraitsBlockPart2: equ $2b747phase $4000748 incbin "..\grapx\MonsterSprites\14x24PortraitsPart2.SC5",7,24 * 128 749 ds $8000-$,$ff750dephase752755IndividualBuildingsBlock: equ $2c756phase $4000757 incbin "..\grapx\CastleOverview\IndividualBuildings.SC5",7,188 * 128 758 ds $c000-$,$ff759dephase761764IndividualBuildingsPage2Block: equ $2e765phase $4000766 incbin "..\grapx\CastleOverview\IndividualBuildingsPage2.SC5",7,142 * 128 767 ds $c000-$,$ff768dephase770773ButtonsBlock: equ $30774phase $4000775 incbin "..\grapx\CastleOverview\Buttons.SC5",7,093 * 128 776 ds $c000-$,$ff777dephase779782BuildBlock: equ $32783phase $4000784 incbin "..\grapx\CastleOverview\build.SC5",7,212 * 128 785 ds $c000-$,$ff786dephase788791ButtonsBuildBlock: equ $34792phase $4000793 incbin "..\grapx\CastleOverview\ButtonsBuild.SC5",7,166 * 128 794 ds $c000-$,$ff795dephase797800RecruitCreaturesBlock: equ $36801phase $4000802 incbin "..\grapx\CastleOverview\RecruitCreatures.SC5",7,212 * 128 803 ds $c000-$,$ff804dephase806809ButtonsRecruitBlock: equ $38810phase $4000811 incbin "..\grapx\CastleOverview\ButtonsRecruitCreatures.SC5",7,139 * 128 812 ds $c000-$,$ff813dephase815818MagicGuildBlock: equ $3a819phase $4000820 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",7,25 * 128 821 incbin "..\grapx\CastleOverview\MagicGuild.SC5",25 * 128 + 7,154 * 128 822 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",179 * 128 + 7,33 * 128 823 ds $c000-$,$ff824dephase826829ChamberOfCommerceBlock: equ $3c830phase $4000831 incbin "..\grapx\CastleOverview\ChamberOfCommerce.SC5",7,80 * 128 832 incbin "..\grapx\CastleOverview\ChamberOfCommerceCastlePalette.SC5",80 * 128 + 7,132 * 128 833 ds $c000-$,$ff834dephase836839ChamberOfCommerceButtonsBlock: equ $3e840phase $4000841 incbin "..\grapx\CastleOverview\ButtonsChamberOfCommerce.SC5",7,152 * 128 842 ds $c000-$,$ff843dephase845848TavernBlock: equ $40849phase $4000850 incbin "..\grapx\CastleOverview\Tavern.SC5",7,131 * 128 851 incbin "..\grapx\CastleOverview\TavernCastlePalette.SC5",131 * 128 + 7,32 * 128 852 incbin "..\grapx\CastleOverview\Tavern.SC5",163 * 128 + 7,049 * 128 853 ds $c000-$,$ff854dephase856859CastleOverviewCodeBlock: equ $42860CastleOverviewFontBlock: equ $42861phase $4000862 incbin "..\grapx\CastleOverview\font.SC5",7,6 * 128 863 CastleOverviewCode.asm11928ShowRecruitWindowForSelectedUnit: 29 xor a 30 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 31 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 32 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 33 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 34 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 35 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 36 ld a,%1100 001137 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 38 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 39 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 40 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 42 call .SetUnit 44 45 ld hl,$4000 + (047*128) + (000/2) - 12846 ld de,$0000 + (032*128) + (048/2) - 12847 ld bc,$0000 + (084*256) + (162/2)48 ld a,ButtonsRecruitBlock 49 call CopyRamToVramCorrectedCastleOverview 51 call SetCastleOverViewFontPage0Y212 53 call .army54 call .name55 call .cost56 call .Gemscost57 call .Rubiescost59 call .amountavailable60 call .recruitamount61 ret63.TotalRubiescost:64 ld a,(SelectedCastleRecruitLevelUnit)65 ld b,063+123 66 ld c,083 67 ld de,$0000 + (078*128) + ((074+97)/2) - 128 68 call .SetTotalRubiescost69 ret71.TotalGemscost:72 ld a,(SelectedCastleRecruitLevelUnit)73 ld b,063+123 74 ld c,083 75 ld de,$0000 + (078*128) + ((074+97)/2) - 128 76 call .SetTotalGemscost77 ret79 .SetTotalGemscost:80 push de81 call SetGemsCostSelectedCreatureInHL82 ld a,h83 or l84 jr z,.Zero 86 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)87 push bc88 call MultiplyHlWithDE89 pop bc91 call SetNumber16BitCastle 92 93 94 ld hl,$4000 + (000*128) + (228/2) - 1289596 pop de97 ld bc,$0000 + (013*256) + (014/2)98 ld a,ButtonsRecruitBlock 99 jp CopyRamToVramCorrectedCastleOverview 101 .SetTotalRubiescost:102 push de103 call SetRubiesCostSelectedCreatureInHL105 ld a,h106 or l107 jr z,.Zero 109 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)110 push bc111 call MultiplyHlWithDE112 pop bc114 call SetNumber16BitCastle 115 116 117 ld hl,$4000 + (000*128) + (242/2) - 128118119 pop de120 ld bc,$0000 + (013*256) + (014/2)121 ld a,ButtonsRecruitBlock 122 jp CopyRamToVramCorrectedCastleOverview 124 .Zero: 125 pop de126 ret128.totalcost:129 ld hl,(SelectedCastleRecruitLevelUnitTotalGoldCost)130 ld b,177131 ld c,071 132 jp SetNumber16BitCastle134.Rubiescost:135 ld a,(SelectedCastleRecruitLevelUnit)136 ld b,063+6 137 ld c,083 138 ld de,$0000 + (078*128) + (052/2) - 128 139 call SetAvailableRecruitArmy.SetRubiescost141.Gemscost:142 ld a,(SelectedCastleRecruitLevelUnit)143 ld b,063+6 144 ld c,083 145 ld de,$0000 + (078*128) + (052/2) - 128 146 jp SetAvailableRecruitArmy.SetGemscost148.cost:149 ld a,(SelectedCastleRecruitLevelUnit)150 ld b,072 151 ld c,071 153 call SetCostSelectedCreatureInHL 154 call SetNumber16BitCastle155 ret156 157.name:158 ld a,(SelectedCastleRecruitLevelUnit)159 ld b,125 160 ld c,038 162 call SetMonsterTableInIXCastleOverview 164 push ix165 pop hl166 ld de,MonsterTableName167 add hl,de168 call SetText170 171 ld a,CastleOverviewCodeBlock 172 call block1234 173 ret175.recruitamount:176 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)177 ld b,177178 ld c,103 179 jp SetNumber16BitCastle181.amountavailable:182 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)183 ld b,090184 ld c,103 185 jp SetNumber16BitCastle187.army:188 ld a,(SelectedCastleRecruitLevelUnit)189 call SetDefendingHeroArmyAndAmount.SetSYSX 190 ld de,050*256 + 120 191 call CopyTransparantImage 192 ret194.SetUnit:195 ld hl,SelectedCastleRecruitLevelUnit196 ld a,b 197 ld (SelectedCastleRecruitUnitWindow),a198 199 cp 6200 ld c,(iy+CastleLevel1Units+00)201 ld (hl),c202 ld e,(iy+CastleLevel1UnitsAvail+00)203 ld d,(iy+CastleLevel1UnitsAvail+01)204 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de205 ret z206 cp 5207 ld c,(iy+CastleLevel1Units+01)208 ld (hl),c209 ld e,(iy+CastleLevel1UnitsAvail+02)210 ld d,(iy+CastleLevel1UnitsAvail+03)211 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de212 ret z213 cp 4214 ld c,(iy+CastleLevel1Units+02)215 ld (hl),c216 ld e,(iy+CastleLevel1UnitsAvail+04)217 ld d,(iy+CastleLevel1UnitsAvail+05)218 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de219 ret z220 cp 3221 ld c,(iy+CastleLevel1Units+03)222 ld (hl),c223 ld e,(iy+CastleLevel1UnitsAvail+06)224 ld d,(iy+CastleLevel1UnitsAvail+07)225 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de226 ret z227 cp 2228 ld c,(iy+CastleLevel1Units+04)229 ld (hl),c230 ld e,(iy+CastleLevel1UnitsAvail+08)231 ld d,(iy+CastleLevel1UnitsAvail+09)232 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de233 ret z234235 ld c,(iy+CastleLevel1Units+05)236 ld (hl),c237 ld e,(iy+CastleLevel1UnitsAvail+10)238 ld d,(iy+CastleLevel1UnitsAvail+11)239 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de240241 ret254DisplayMonsterNames:255 ld a,(StartingTownLevel1Unit)256 ld b,058+(0*48) 257 ld c,086 258 call .SetMonsterName259 ld a,(StartingTownLevel2Unit)260 ld b,062+(1*48) 261 ld c,086 262 call .SetMonsterName263 ld a,(StartingTownLevel3Unit)264 ld b,066+(2*48) 265 ld c,086 266 call .SetMonsterName268 ld a,(StartingTownLevel4Unit)269 ld b,058+(0*48) 270 ld c,130 271 call .SetMonsterName272 ld a,(StartingTownLevel5Unit)273 ld b,062+(1*48) 274 ld c,130 275 call .SetMonsterName276 ld a,(StartingTownLevel6Unit)277 ld b,066+(2*48) 278 ld c,130 282 .SetMonsterName:283 call SetMonsterTableInIXCastleOverview 284 push ix285 pop hl286 ld de,MonsterTableName287 add hl,de289 call CenterHeroNameHasGainedALevel290 jp SetText294SetAvailableRecruitArmy:295 call SetCastleOverViewFontPage0Y212 297 call .army298 call .NamesAndAmount299 call .cost300 call .Gemscost301 call .Rubiescost302 call .attack303 call .defense304 call .HP305 call .SetBrownRecruitBarIf0UnitsAvailable306 call .SetInactiveWindowIfUnavailable307 ret309.SetBrownRecruitBarIf0UnitsAvailable:310 ld a,(iy+CastleLevel1UnitsAvail+00)311 or (iy+CastleLevel1UnitsAvail+01)312 call z,.Level1Units0Available314 ld a,(iy+CastleLevel2UnitsAvail+00)315 or (iy+CastleLevel2UnitsAvail+01)316 call z,.Level2Units0Available318 ld a,(iy+CastleLevel3UnitsAvail+00)319 or (iy+CastleLevel3UnitsAvail+01)320 call z,.Level3Units0Available322 ld a,(iy+CastleLevel4UnitsAvail+00)323 or (iy+CastleLevel4UnitsAvail+01)324 call z,.Level4Units0Available326 ld a,(iy+CastleLevel5UnitsAvail+00)327 or (iy+CastleLevel5UnitsAvail+01)328 call z,.Level5Units0Available330 ld a,(iy+CastleLevel6UnitsAvail+00)331 or (iy+CastleLevel6UnitsAvail+01)332 call z,.Level6Units0Available333 ret335 .Level1Units0Available:336 ld hl,$4000 + (063*128) + (162/2) - 128337 ld de,$0000 + ((034+30)*128) + ((005+001)/2) - 128 338 ld bc,$0000 + (009*256) + (076/2)339 ld a,ButtonsRecruitBlock 340 call CopyRamToVramCorrectedCastleOverview 341 xor a 342 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 343 ret344 345 .Level2Units0Available:346 ld hl,$4000 + (063*128) + (162/2) - 128347 ld de,$0000 + ((034+30)*128) + ((089+001)/2) - 128 348 ld bc,$0000 + (009*256) + (076/2)349 ld a,ButtonsRecruitBlock 350 call CopyRamToVramCorrectedCastleOverview 351 xor a 352 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 353 ret355 .Level3Units0Available:356 ld hl,$4000 + (063*128) + (162/2) - 128357 ld de,$0000 + ((034+30)*128) + ((173+001)/2) - 128 358 ld bc,$0000 + (009*256) + (076/2)359 ld a,ButtonsRecruitBlock 360 call CopyRamToVramCorrectedCastleOverview 361 xor a 362 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 363 ret365 .Level4Units0Available:366 ld hl,$4000 + (063*128) + (162/2) - 128367 ld de,$0000 + ((090+30)*128) + ((005+001)/2) - 128 368 ld bc,$0000 + (009*256) + (076/2)369 ld a,ButtonsRecruitBlock 370 call CopyRamToVramCorrectedCastleOverview 371 xor a 372 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 373 ret375 .Level5Units0Available:376 ld hl,$4000 + (063*128) + (162/2) - 128377 ld de,$0000 + ((090+30)*128) + ((089+001)/2) - 128 378 ld bc,$0000 + (009*256) + (076/2)379 ld a,ButtonsRecruitBlock 380 call CopyRamToVramCorrectedCastleOverview 381 xor a 382 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 383 ret385 .Level6Units0Available:386 ld hl,$4000 + (063*128) + (162/2) - 128387 ld de,$0000 + ((090+30)*128) + ((173+001)/2) - 128 388 ld bc,$0000 + (009*256) + (076/2)389 ld a,ButtonsRecruitBlock 390 call CopyRamToVramCorrectedCastleOverview 391 xor a 392 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 393 ret395 396.SetInactiveWindowIfUnavailable:397 ld a,(iy+CastleBarracksLevel+00)398 cp 6399 ret z400 cp 5401 jr z,.Level6UnitsUnavailable402 cp 4403 jr z,.Level5UnitsUnavailable404 cp 3405 jr z,.Level4UnitsUnavailable406 cp 2407 jr z,.Level3UnitsUnavailable409 .Level2UnitsUnavailable:410 ld hl,$4000 + (000*128) + (076/2) - 128411 ld de,$0000 + ((034-09)*128) + ((089+001)/2) - 128 412 ld bc,$0000 + (047*256) + (076/2)413 ld a,ButtonsRecruitBlock 414 call CopyRamToVramCorrectedCastleOverview 415 xor a 416 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 418 .Level3UnitsUnavailable:419 ld hl,$4000 + (000*128) + (076/2) - 128420 ld de,$0000 + ((034-09)*128) + ((173+001)/2) - 128 421 ld bc,$0000 + (047*256) + (076/2)422 ld a,ButtonsRecruitBlock 423 call CopyRamToVramCorrectedCastleOverview 424 xor a 425 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 427 .Level4UnitsUnavailable:428 ld hl,$4000 + (000*128) + (076/2) - 128429 ld de,$0000 + ((090-09)*128) + ((005+001)/2) - 128 430 ld bc,$0000 + (047*256) + (076/2)431 ld a,ButtonsRecruitBlock 432 call CopyRamToVramCorrectedCastleOverview 433 xor a 434 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 436 .Level5UnitsUnavailable:437 ld hl,$4000 + (000*128) + (076/2) - 128438 ld de,$0000 + ((090-09)*128) + ((089+001)/2) - 128 439 ld bc,$0000 + (047*256) + (076/2)440 ld a,ButtonsRecruitBlock 441 call CopyRamToVramCorrectedCastleOverview 442 xor a 443 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 445 .Level6UnitsUnavailable:446 ld hl,$4000 + (000*128) + (076/2) - 128447 ld de,$0000 + ((090-09)*128) + ((173+001)/2) - 128 448 ld bc,$0000 + (047*256) + (076/2)449 ld a,ButtonsRecruitBlock 450 call CopyRamToVramCorrectedCastleOverview 451 xor a 452 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 453 ret455.Rubiescost:456 ld a,(iy+CastleLevel1Units+00)457 ld b,005+45 458 ld c,043 459 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 460 call .SetRubiescost462 ld a,(iy+CastleLevel1Units+01)463 ld b,089+45 464 ld c,043 465 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 466 call .SetRubiescost468 ld a,(iy+CastleLevel1Units+02)469 ld b,173+45 470 ld c,043 471 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 472 call .SetRubiescost474 ld a,(iy+CastleLevel1Units+03)475 ld b,005+45 476 ld c,099 477 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 478 call .SetRubiescost480 ld a,(iy+CastleLevel1Units+04)481 ld b,089+45 482 ld c,099 483 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 484 call .SetRubiescost486 ld a,(iy+CastleLevel1Units+05)487 ld b,173+45 488 ld c,099 489 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 490 call .SetRubiescost491 ret493 .SetRubiescost:494 push de495 call SetRubiesCostSelectedCreatureInHL496 ld a,h497 or l498 jr z,.Zero 500 call SetNumber16BitCastle501 502 503 ld hl,$4000 + (000*128) + (242/2) - 128504505 pop de506 ld bc,$0000 + (013*256) + (014/2)507 ld a,ButtonsRecruitBlock 508 jp CopyRamToVramCorrectedCastleOverview 510.Gemscost:511 ld a,(iy+CastleLevel1Units+00)512 ld b,005+45 513 ld c,043 514 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 515 call .SetGemscost517 ld a,(iy+CastleLevel1Units+01)518 ld b,089+45 519 ld c,043 520 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 521 call .SetGemscost523 ld a,(iy+CastleLevel1Units+02)524 ld b,173+45 525 ld c,043 526 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 527 call .SetGemscost529 ld a,(iy+CastleLevel1Units+03)530 ld b,005+45 531 ld c,099 532 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 533 call .SetGemscost535 ld a,(iy+CastleLevel1Units+04)536 ld b,089+45 537 ld c,099 538 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 539 call .SetGemscost541 ld a,(iy+CastleLevel1Units+05)542 ld b,173+45 543 ld c,099 544 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 545 call .SetGemscost546 ret548 .SetGemscost:549 push de550 call SetGemsCostSelectedCreatureInHL551 ld a,h552 or l553 jr z,.Zero 555 call SetNumber16BitCastle556 557 558 ld hl,$4000 + (000*128) + (228/2) - 128559560 pop de561 ld bc,$0000 + (013*256) + (014/2)562 ld a,ButtonsRecruitBlock 563 jp CopyRamToVramCorrectedCastleOverview 565 .Zero: 566 pop de567 ret570 .attack:571 ld a,(iy+CastleLevel1Units+00)572 ld b,083-14 573 ld c,038 574 call .SetAttack576 ld a,(iy+CastleLevel1Units+01)577 ld b,167-14 578 ld c,038 579 call .SetAttack581 ld a,(iy+CastleLevel1Units+02)582 ld b,251-14 583 ld c,038 584 call .SetAttack586 ld a,(iy+CastleLevel1Units+03)587 ld b,083-14 588 ld c,038+56 589 call .SetAttack591 ld a,(iy+CastleLevel1Units+04)592 ld b,167-14 593 ld c,038+56 594 call .SetAttack596 ld a,(iy+CastleLevel1Units+05)597 ld b,251-14 598 ld c,038+56 599 call .SetAttack 600 ret602 .SetAttack:603 call SetAttackSelectedCreatureInHL 604 call SetNumber16BitCastle605 ret606 607 .defense:608 ld a,(iy+CastleLevel1Units+00)609 ld b,083-14 610 ld c,047 611 call .SetDefense613 ld a,(iy+CastleLevel1Units+01)614 ld b,167-14 615 ld c,047 616 call .SetDefense618 ld a,(iy+CastleLevel1Units+02)619 ld b,251-14 620 ld c,047 621 call .SetDefense623 ld a,(iy+CastleLevel1Units+03)624 ld b,083-14 625 ld c,047+56 626 call .SetDefense628 ld a,(iy+CastleLevel1Units+04)629 ld b,167-14 630 ld c,047+56 631 call .SetDefense633 ld a,(iy+CastleLevel1Units+05)634 ld b,251-14 635 ld c,047+56 636 call .SetDefense 637 ret639 .SetDefense:640 call SetDefenseSelectedCreatureInHL 641 call SetNumber16BitCastle642 ret644 .HP:645 ld a,(iy+CastleLevel1Units+00)646 ld b,083-14 647 ld c,056 648 call .SetHP650 ld a,(iy+CastleLevel1Units+01)651 ld b,167-14 652 ld c,056 653 call .SetHP655 ld a,(iy+CastleLevel1Units+02)656 ld b,251-14 657 ld c,056 658 call .SetHP660 ld a,(iy+CastleLevel1Units+03)661 ld b,083-14 662 ld c,056+56 663 call .SetHP665 ld a,(iy+CastleLevel1Units+04)666 ld b,167-14 667 ld c,056+56 668 call .SetHP670 ld a,(iy+CastleLevel1Units+05)671 ld b,251-14 672 ld c,056+56 673 call .SetHP 674 ret676 .SetHP:677 call SetHPSelectedCreatureInHL 678 call SetNumber16BitCastle679 ret680 681 .cost:682 ld a,(iy+CastleLevel1Units+00)683 ld b,005+023 684 ld c,055 685 call .SetCost687 ld a,(iy+CastleLevel1Units+01)688 ld b,089+023 689 ld c,055 690 call .SetCost692 ld a,(iy+CastleLevel1Units+02)693 ld b,173+023 694 ld c,055 695 call .SetCost697 ld a,(iy+CastleLevel1Units+03)698 ld b,005+023 699 ld c,111 700 call .SetCost702 ld a,(iy+CastleLevel1Units+04)703 ld b,089+023 704 ld c,111 705 call .SetCost707 ld a,(iy+CastleLevel1Units+05)708 ld b,173+023 709 ld c,111 710 call .SetCost711 ret713 .SetCost:714 call SetCostSelectedCreatureInHL 716 call SetNumber16BitCastle717 ret718 719 .setname:720 ret721 722 .NamesAndAmount:723 ld a,(iy+CastleLevel1Units+00)724 ld b,007 725 ld c,027 726 ld l,(iy+CastleLevel1UnitsAvail+00)727 ld h,(iy+CastleLevel1UnitsAvail+01) 728 call .SetNameAndAmount730 ld a,(iy+CastleLevel1Units+01)731 ld b,091 732 ld c,027 733 ld l,(iy+CastleLevel1UnitsAvail+02)734 ld h,(iy+CastleLevel1UnitsAvail+03) 735 call .SetNameAndAmount737 ld a,(iy+CastleLevel1Units+02)738 ld b,175 739 ld c,027 740 ld l,(iy+CastleLevel1UnitsAvail+04)741 ld h,(iy+CastleLevel1UnitsAvail+05) 742 call .SetNameAndAmount744 ld a,(iy+CastleLevel1Units+03)745 ld b,007 746 ld c,083 747 ld l,(iy+CastleLevel1UnitsAvail+06)748 ld h,(iy+CastleLevel1UnitsAvail+07)749 call .SetNameAndAmount751 ld a,(iy+CastleLevel1Units+04)752 ld b,091 753 ld c,083 754 ld l,(iy+CastleLevel1UnitsAvail+08)755 ld h,(iy+CastleLevel1UnitsAvail+09)756 call .SetNameAndAmount758 ld a,(iy+CastleLevel1Units+05)759 ld b,175 760 ld c,083 761 ld l,(iy+CastleLevel1UnitsAvail+10)762 ld h,(iy+CastleLevel1UnitsAvail+11)763 call .SetNameAndAmount764 ret766 .SetNameAndAmount:767 push hl 769 call SetMonsterTableInIXCastleOverview 771 push ix772 pop hl773 ld de,MonsterTableName774 add hl,de776 push bc777 call SetText778 pop bc780 ld a,(PutLetter+dx) 781 ld b,a782 783 ld hl,.TextSemiColon784 push bc785 call SetText786 pop bc788 ld a,(PutLetter+dx) 789 add a,3790 ld b,a791 pop hl 792 call SetNumber16BitCastle794 795 ld a,CastleOverviewCodeBlock 796 call block1234 797 ret799.TextSemiColon: db ":",255800 801.army:802 ld a,(iy+CastleLevel1Units) 803 call SetDefendingHeroArmyAndAmount.SetSYSX 804 ld de,DYDXUnit1Window 805 call CopyTransparantImage 807 ld a,(iy+CastleLevel2Units) 808 call SetDefendingHeroArmyAndAmount.SetSYSX 809 ld de,DYDXUnit2Window 810 call CopyTransparantImage 812 ld a,(iy+CastleLevel3Units) 813 call SetDefendingHeroArmyAndAmount.SetSYSX 814 ld de,DYDXUnit3Window 815 call CopyTransparantImage 817 ld a,(iy+CastleLevel4Units) 818 call SetDefendingHeroArmyAndAmount.SetSYSX 819 ld de,DYDXUnit4Window 820 call CopyTransparantImage 822 ld a,(iy+CastleLevel5Units) 823 call SetDefendingHeroArmyAndAmount.SetSYSX 824 ld de,DYDXUnit5Window 825 call CopyTransparantImage 827 ld a,(iy+CastleLevel6Units) 828 call SetDefendingHeroArmyAndAmount.SetSYSX 829 ld de,DYDXUnit6Window 830 call CopyTransparantImage 831 ret833DYDXUnit1Window: equ 038*256 + 008+1 834DYDXUnit2Window: equ 038*256 + 092+1 835DYDXUnit3Window: equ 038*256 + 176+1 836DYDXUnit4Window: equ 094*256 + 008+1 837DYDXUnit5Window: equ 094*256 + 092+1 838DYDXUnit6Window: equ 094*256 + 176+1 840SetCostSelectedCreatureInHL: 841 call SetMonsterTableInIXCastleOverview 842 ld h,0843 ld l,(ix+MonsterTableCostGold)845 add hl,hl 846 push hl847 add hl,hl 848 add hl,hl 849 pop de850 add hl,de 852 853 ld a,CastleOverviewCodeBlock 854 call block1234 855 ret857SetGemsCostSelectedCreatureInHL:858 call SetMonsterTableInIXCastleOverview 859 ld h,0860 ld l,(ix+MonsterTableCostGems)862 res 7,l 863 res 6,l864 res 5,l866 867 ld a,CastleOverviewCodeBlock 868 call block1234 869 ret871SetRubiesCostSelectedCreatureInHL:872 call SetMonsterTableInIXCastleOverview 873 ld h,0874 ld l,(ix+MonsterTableCostRubies)876 877 ld a,CastleOverviewCodeBlock 878 call block1234 879 ret881SetHPSelectedCreatureInHL:882 call SetMonsterTableInIXCastleOverview 883 ld h,0884 ld l,(ix+MonsterTableHp)886 887 ld a,CastleOverviewCodeBlock 888 call block1234 889 ret891SetAttackSelectedCreatureInHL:892 call SetMonsterTableInIXCastleOverview 893 ld h,0894 ld l,(ix+MonsterTableAttack)896 897 ld a,CastleOverviewCodeBlock 898 call block1234 899 ret901SetDefenseSelectedCreatureInHL:902 call SetMonsterTableInIXCastleOverview 903 ld h,0904 ld l,(ix+MonsterTableDefense)906 907 ld a,CastleOverviewCodeBlock 908 call block1234 909 ret911SetGrowthSelectedCreatureInHL:912 call SetMonsterTableInIXCastleOverview 913 ld h,0914 ld l,(ix+MonsterTableGrowth)916 917 ld a,CastleOverviewCodeBlock 918 call block1234 919 ret921SetMonsterTableInIXCastleOverview: 922 ld h,0923 ld l,a 924 925 ld a,MonsterAddressesForBattle1Block926 call block34 928 push bc929 ld ix,Monster001Table-LengthMonsterAddressesTable 930 ld de,LengthMonsterAddressesTable931 call MultiplyHlWithDE 932 push hl933 pop de934 add ix,de 935 pop bc936 ret938SettavernHeroSkill:939 ld a,HeroOverviewCodeBlock 940 call block34 942 ld a,(ix+TavernHero1)943 ld b,004+04 944 ld c,043+44 945 call .SetHeroSkill947 ld a,(ix+TavernHero2)948 ld b,090+04 949 ld c,043+44 950 call .SetHeroSkill952 ld a,(ix+TavernHero3)953 ld b,176+04 954 ld c,043+44 955 call .SetHeroSkill957 ld a,CastleOverviewCodeBlock 958 call block1234 959 ret961 .SetHeroSkill:962 or a963 ret z965 push ix 966 push bc967 ld b,a968 ld ix,HeroAddressesAdol-heroAddressesLenght969 ld de,heroAddressesLenght970 .loop:971 add ix,de972 djnz .loop973 pop bc974 975 ld a,(ix+HeroInfoSkill) 976 ld l,a977 ld h,0978 add hl,hl 979 add hl,hl 980 add hl,hl 981 push hl982 add hl,hl 983 add hl,hl 984 add hl,hl 985 add hl,hl 986 pop de987 add hl,de 988 ld de,SkillEmpty+$4000989 add hl,de991 call SetText 992 pop ix 993 ret995SetTextBuildingWhenClicked:996 ld a,(SetTextBuilding)997 dec a998 ret z999 ld (SetTextBuilding),a1001 call ClearTextBuildWindow1002 call SetSingleBuildButtonColor1003 call SetCastleOverViewFontPage0Y212 1005 ld hl,(PutWhichBuildText)1006 ld b,1821007 ld c,0471008 jp SetText101110191027SetTradingHeroesInventoryIcons:1028 ld ix,(plxcurrentheroAddress)1029 ld de,9 1030 add ix,de1032 1033 call .SetIconHLBCandA 1034 ld de,$0000 + (076*128) + (036/2)1035 call CopyRamToVramCorrectedCastleOverview 1037 call .SetIconHLBCandA 1038 ld de,$0000 + (076*128) + (058/2)1039 call CopyRamToVramCorrectedCastleOverview 1041 call .SetIconHLBCandA 1042 ld de,$0000 + (076*128) + (080/2)1043 call CopyRamToVramCorrectedCastleOverview 1045 call .SetIconHLBCandA 1046 ld de,$0000 + (076*128) + (102/2)1047 call CopyRamToVramCorrectedCastleOverview 1049 call .SetIconHLBCandA 1050 ld de,$0000 + (076*128) + (124/2)1051 call CopyRamToVramCorrectedCastleOverview 1053 call .SetIconHLBCandA 1054 ld de,$0000 + (076*128) + (146/2)1055 call CopyRamToVramCorrectedCastleOverview 1057 ld ix,(HeroWeTradeWith) 1058 ld de,9 1059 add ix,de1061 1062 call .SetIconHLBCandA 1063 ld de,$0000 + (140*128) + (036/2)1064 call CopyRamToVramCorrectedCastleOverview 1066 call .SetIconHLBCandA 1067 ld de,$0000 + (140*128) + (058/2)1068 call CopyRamToVramCorrectedCastleOverview 1070 call .SetIconHLBCandA 1071 ld de,$0000 + (140*128) + (080/2)1072 call CopyRamToVramCorrectedCastleOverview 1074 call .SetIconHLBCandA 1075 ld de,$0000 + (140*128) + (102/2)1076 call CopyRamToVramCorrectedCastleOverview 1078 call .SetIconHLBCandA 1079 ld de,$0000 + (140*128) + (124/2)1080 call CopyRamToVramCorrectedCastleOverview 1082 call .SetIconHLBCandA 1083 ld de,$0000 + (140*128) + (146/2)1084 call CopyRamToVramCorrectedCastleOverview 1085 ret1087 .SetIconHLBCandA:1088 ld a,(ix+HeroInventory) 1089 call .CheckScrollIcon 1090 add a,a 1091 add a,a 1092 ld iy,.InventoryIconTableSYSX1093 ld d,01094 ld e,a1095 add iy,de1096 ld l,(iy)1097 ld h,(iy+1)1098 inc ix1099 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1100 ld a,InventoryGraphicsBlock1101 ret1102 1103 .CheckScrollIcon:1104 cp ScrollIconNR1105 ret c1106 ld a,ScrollIconNR1107 ret 1109.InventoryIconTableSYSX: 1110 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 1111 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 1281112 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 1113 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 1281114 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 1115 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 1281116 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 1117 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 1281118 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 1119 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 1281121 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 1122 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 1281123 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 1124 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 1281125 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 1126 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 1281127 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 1128 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 1281129 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 1130 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 1281132 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 1133 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 1281134 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 1135 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 1281136 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 1137 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 1281138 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 1139 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 1281140 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 1141 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 1281143 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 1144 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 1281145 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 1146 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 1281147 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 1148 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 1281149 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 1150 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 1281151 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 1152 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 1281154 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 1155 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 1281156 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 1157 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 1281158 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 1159 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 1281160 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 1161 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 1281162 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 1163 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 1281165 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 1166 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 1281167 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 1168 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 1281169 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 1170 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 1281171 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 1172 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 1281173 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 1174 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 1281178 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 1179 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 1281180 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 1181 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 1281182 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 1183 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 1281184 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 1185 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 1281186 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 1187 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 1281189 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 1190 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 1281191 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 1192 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 1281193 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 1194 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 1281195 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 1196 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 1281197 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 1198 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 1281200 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 1201 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 1281202 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 1203 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 1281204 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 1205 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 1281206 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 1207 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 1281208 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 1209 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 1281211 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 1212 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 1281214 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 1215 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 1281221UpdateHudCode:1222 ld a,31223 ld (SetHeroArmyAndStatusInHud?),a 1224 call SetHeroArmyAndStatusInHud 1225 ret1227HudCode:1228 call checkcurrentplayerhuman 1229 ret z1231 call SetHeroArmyAndStatusInHud 1232 call SetCastlesInWindows 1233 call SetResources1235 1238 call .CheckButtonClicked 1240 call checkcurrentplayerhuman 1241 ret z1243 call SetHeroesInWindows 1245 call SetManaAndMovementBars 1247 ld ix,GenericButtonTable31248 call SetGenericButtons 1250 ret1252.CheckButtonClicked: 1253 ld a,(WhichHudButtonClicked?)1254 or a1255 ret z1256 ld b,a1257 xor a1258 ld (WhichHudButtonClicked?),a1260 ld a,b1261 cp 121262 jp z,CheckHeroArrowUp1263 cp 111264 jp z,FirstHeroWindowClicked1265 cp 101266 jp z,SecondHeroWindowClicked1267 cp 091268 jp z,ThirdHeroWindowClicked1269 cp 081270 jp z,CheckHeroArrowDown1272 cp 071273 jp z,CheckCastleArrowUp1274 cp 061275 jp z,FirstCastleWindowClicked1276 cp 051277 jp z,SecondCastleWindowClicked1278 cp 041279 jp z,ThirdCastleWindowClicked1280 cp 031281 jp z,CheckCastleArrowDown1282 cp 021283 jp z,EndTurn1284 cp 011285 jp z,DiskMenu1286 ret1288DiskMenu:1289 ld a,31290 ld (DiskMenuClicked?),a 1291 ret1293EndTurn:1294 ld a,21295 ld (DisplayStartOfTurnMessage?),a1297 call SetHero1ForCurrentPlayerInIX1299 1300 ld b,amountofheroesperplayer 1301 .loop:1303 1304 ld l,(ix+HeroTotalMana+0)1305 ld h,(ix+HeroTotalMana+1) 1306 ld e,(ix+HeroMana+0)1307 ld d,(ix+HeroMana+1)1308 or a1309 sbc hl,de1310 jr c,.EndSetMana1311 1312 ld l,(ix+HeroMana+0)1313 ld h,(ix+HeroMana+1)1314 ld d,01315 ld e,(ix+HeroManarec+0)1316 add hl,de 1317 ld e,(ix+HeroTotalMana+0)1318 ld d,(ix+HeroTotalMana+1) 1319 sbc hl,de1320 jp c,.nooverflowmana1321 ld l,(ix+HeroTotalMana+0)1322 ld h,(ix+HeroTotalMana+1) 1323 jr .SetMana1324 .nooverflowmana:1325 add hl,de1326 .SetMana:1327 ld (ix+HeroMana+0),l1328 ld (ix+HeroMana+1),h1329 .EndSetMana:1331 ld a,(ix+HeroTotalMove) 1332 ld (ix+HeroMove),a 1333 ld de,lenghtherotable1334 add ix,de 1335 djnz .loop1337 call SetNextPlayersTurnAndCheckPlayerEliminated1338 1339 ld hl,(Date) 1340 ld a,h1341 or l1342 jr z,.EndCheckNoIncomeDay1 1343 call AddCastlesIncomeToPlayer 1344 call AddCastlesSawmillResources 1345 call AddCastlesMineResources 1346 call AddEstatesIncomeToPlayer 1347 call AddKingsGarmentIncomeToPlayer 1348 .EndCheckNoIncomeDay1:1350 call ActivateFirstActiveHeroForCurrentPlayer1351 xor a1352 ld (SetHeroOverViewMenu?),a 1353 ret1355IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn:1356 ld hl,(Date)1357 inc hl1358 ld (Date),hl1359 call AddCreaturesToPools 1360 call SetAndRotateTavernHeroes 1361 call RefillManaHeroesInCastles 1362 jp ClearAlreadyBuiltThisTurnCastles1364SetNextPlayersTurnAndCheckPlayerEliminated:1365 call SetNextPlayersTurn1367 ld a,(whichplayernowplaying?) 1368 dec a1369 call z,IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn1371 ld a,(whichplayernowplaying?) 1372 ld b,a1373 dec a1374 ld hl,pl1hero1y+HeroStatus 1375 jr z,.PlayerFound1376 dec a1377 ld hl,pl2hero1y+HeroStatus 1378 jr z,.PlayerFound1379 dec a1380 ld hl,pl3hero1y+HeroStatus 1381 jr z,.PlayerFound13821383 ld hl,pl4hero1y+HeroStatus 1386 .PlayerFound:1387 ld a,(hl) 1388 inc a 1389 ret nz1390 1391 ld a,(Castle1+CastlePlayer)1392 cp b1393 ret z1394 ld a,(Castle2+CastlePlayer)1395 cp b1396 ret z1397 ld a,(Castle3+CastlePlayer)1398 cp b1399 ret z1400 ld a,(Castle4+CastlePlayer)1401 cp b1402 ret z1403 1404 jr SetNextPlayersTurnAndCheckPlayerEliminated1406AddCreaturesToPools: 1408 ld bc,(Date)1409 ld de,7 1410 call DivideBCbyDE 1411 ld a,h 1412 or l1413 ret nz1415 ld ix,Castle11416 call .AddCreatures1417 ld ix,Castle21418 call .AddCreatures1419 ld ix,Castle31420 call .AddCreatures1421 ld ix,Castle41422 call .AddCreatures1423 ret1424 1425 .AddCreatures:1426 ld a,(ix+CastleBarracksLevel)1427 or a1428 ret z1429 dec a1430 jp z,.BarracksLevel11431 dec a1432 jp z,.BarracksLevel21433 dec a1434 jp z,.BarracksLevel31435 dec a1436 jp z,.BarracksLevel41437 dec a1438 jp z,.BarracksLevel51440 .BarracksLevel6:1441 ld a,(ix+CastleLevel6Units)1442 push ix1443 call SetGrowthSelectedCreatureInHL 1444 pop ix 1445 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1446 ld e,(ix+CastleLevel6UnitsAvail)1447 ld d,(ix+CastleLevel6UnitsAvail+1)1448 add hl,de1449 ld (ix+CastleLevel6UnitsAvail),l1450 ld (ix+CastleLevel6UnitsAvail+1),h1452 .BarracksLevel5:1453 ld a,(ix+CastleLevel5Units)1454 push ix1455 call SetGrowthSelectedCreatureInHL 1456 pop ix1457 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1458 ld e,(ix+CastleLevel5UnitsAvail)1459 ld d,(ix+CastleLevel5UnitsAvail+1)1460 add hl,de1461 ld (ix+CastleLevel5UnitsAvail),l1462 ld (ix+CastleLevel5UnitsAvail+1),h1464 .BarracksLevel4:1465 ld a,(ix+CastleLevel4Units)1466 push ix1467 call SetGrowthSelectedCreatureInHL 1468 pop ix1469 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1470 ld e,(ix+CastleLevel4UnitsAvail)1471 ld d,(ix+CastleLevel4UnitsAvail+1)1472 add hl,de1473 ld (ix+CastleLevel4UnitsAvail),l1474 ld (ix+CastleLevel4UnitsAvail+1),h1476 .BarracksLevel3:1477 ld a,(ix+CastleLevel3Units)1478 push ix1479 call SetGrowthSelectedCreatureInHL 1480 pop ix1481 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1482 ld e,(ix+CastleLevel3UnitsAvail)1483 ld d,(ix+CastleLevel3UnitsAvail+1)1484 add hl,de1485 ld (ix+CastleLevel3UnitsAvail),l1486 ld (ix+CastleLevel3UnitsAvail+1),h1488 .BarracksLevel2:1489 ld a,(ix+CastleLevel2Units)1490 push ix1491 call SetGrowthSelectedCreatureInHL 1492 pop ix1493 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1494 ld e,(ix+CastleLevel2UnitsAvail)1495 ld d,(ix+CastleLevel2UnitsAvail+1)1496 add hl,de1497 ld (ix+CastleLevel2UnitsAvail),l1498 ld (ix+CastleLevel2UnitsAvail+1),h1500 .BarracksLevel1:1501 ld a,(ix+CastleLevel1Units)1502 push ix1503 call SetGrowthSelectedCreatureInHL 1504 pop ix1505 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1506 ld e,(ix+CastleLevel1UnitsAvail)1507 ld d,(ix+CastleLevel1UnitsAvail+1)1508 add hl,de1509 ld (ix+CastleLevel1UnitsAvail),l1510 ld (ix+CastleLevel1UnitsAvail+1),h1511 ret1513.Apply50or100PercentAddedGrowthForCitadelOrCapitol:1514 ld a,(ix+CastleLevel)1515 cp 4 1516 ld de,02 1517 jp z,SetChestText.ApplyPercentBasedBoost1518 cp 5 1519 ld de,01 1520 jp nc,SetChestText.ApplyPercentBasedBoost1521 ret1523SetManaAndMovementToMax:1524 call SetHeroMaxMovementPoints.IxAlreadySet1525 ld (ix+HeroMove),a 1527 ld de,ItemIntelligencePointsTable1528 push ix1529 call SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 1530 pop ix1531 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1533 ld l,(ix+HeroTotalMana+0)1534 ld h,(ix+HeroTotalMana+1)1535 ld (ix+HeroMana+0),l1536 ld (ix+HeroMana+1),h1537 ret1539ClearAlreadyBuiltThisTurnCastles:1540 xor a1541 ld (Castle1+AlreadyBuiltThisTurn?),a1542 ld (Castle2+AlreadyBuiltThisTurn?),a1543 ld (Castle3+AlreadyBuiltThisTurn?),a1544 ld (Castle4+AlreadyBuiltThisTurn?),a1545 ret1548RefillManaHeroesInCastles:1549 ld ix,pl1hero1y1550 call .RefillThisPlayer1551 ld ix,pl2hero1y1552 call .RefillThisPlayer1553 ld ix,pl3hero1y1554 call .RefillThisPlayer1555 ld ix,pl4hero1y15561558 .RefillThisPlayer:1559 ld b,amountofheroesperplayer1560 ld de,lenghtherotable1561 1562 .loop:1563 ld a,(ix+HeroStatus) 1564 cp 21565 jr z,.Refill1566 cp 2541567 jr z,.Refill1568 add ix,de1569 djnz .loop 1570 ret1572 .Refill:1573 ld l,(ix+HeroTotalMana+0)1574 ld h,(ix+HeroTotalMana+1) 1575 ld (ix+HeroMana+0),l1576 ld (ix+HeroMana+1),h1577 djnz .loop 1578 ret1580SetAndRotateTavernHeroes: 1581 ld hl,TavernHeroesPlayer1+11582 ld de,TavernHeroesPlayer11583 ld bc,TavernHeroesPlayer1+TavernHeroTableLenght-21584 call .RotateForThisPlayer 1585 ld hl,TavernHeroesPlayer2+11586 ld de,TavernHeroesPlayer21587 ld bc,TavernHeroesPlayer2+TavernHeroTableLenght-21588 call .RotateForThisPlayer 1589 ld hl,TavernHeroesPlayer3+11590 ld de,TavernHeroesPlayer31591 ld bc,TavernHeroesPlayer3+TavernHeroTableLenght-21592 call .RotateForThisPlayer 1593 ld hl,TavernHeroesPlayer4+11594 ld de,TavernHeroesPlayer41595 ld bc,TavernHeroesPlayer4+TavernHeroTableLenght-21596 call .RotateForThisPlayer 1597 ret1599 .RotateForThisPlayer:1600 push bc1601 ld a,(de) 1602 ex af,af' 1603 ld bc,TavernHeroTableLenght-11604 ldir1605 1606 1607 pop hl1608 .loop:1609 ld a,(hl)1610 or a1611 jr nz,.HeroFound1612 dec hl1613 jr .loop1615 .HeroFound:1616 inc hl1617 ex af,af' 1618 ld (hl),a1619 ret1621AddKingsGarmentIncomeToPlayer:1622 call SetHero1ForCurrentPlayerInIX1624 ld b,amountofheroesperplayer1625 .loop:1626 push ix1627 call .CheckSkill1628 pop ix1629 1630 ld de,lenghtherotable1631 add ix,de 1632 djnz .loop1633 ret1634 1635 .CheckSkill:1636 ld a,(ix+HeroStatus) 1637 cp 2551638 ret z 1639 ld a,(ix+Heroy)1640 cp 255 1641 ret z 1643 ld a,(ix+HeroInventory+8) 1644 cp 040 1645 ret nz1647 call SetResourcesCurrentPlayerinIX 1648 1649 ld l,(ix+0)1650 ld h,(ix+1)1651 ld de,1251652 add hl,de1653 ret c1654 ld (ix+0),l1655 ld (ix+1),h1656 ret1658AddEstatesIncomeToPlayer: 1659 call SetHero1ForCurrentPlayerInIX1661 ld c,amountofheroesperplayer1662 .loop:1663 ld b,6 1664 push ix1665 call .CheckSkill1666 pop ix1667 1668 ld de,lenghtherotable1669 add ix,de 1670 dec c1671 jr nz,.loop1672 ret1673 1674 .CheckSkill:1675 ld a,(ix+HeroStatus) 1676 cp 2551677 ret z 1678 ld a,(ix+Heroy)1679 cp 255 1680 ret z 1682 ld a,(ix+HeroSkills)1683 cp 131684 ld de,1251685 jr z,.EstatesFound 1686 cp 141687 ld de,2501688 jr z,.EstatesFound 1689 cp 151690 ld de,5001691 jr z,.EstatesFound 1693 inc ix 1694 djnz .CheckSkill1695 ret1697.EstatesFound:1698 call SetResourcesCurrentPlayerinIX 1699 1700 ld l,(ix+0)1701 ld h,(ix+1)1702 add hl,de1703 ret c1704 ld (ix+0),l1705 ld (ix+1),h1706 ret1708AddCastlesMineResources: 1709 call SetResourcesCurrentPlayerinIX 1711 ld iy,Castle11712 call .CheckCastle1713 ld iy,Castle21714 call .CheckCastle1715 ld iy,Castle31716 call .CheckCastle1717 ld iy,Castle41718 call .CheckCastle1719 ret1721 .CheckCastle:1722 ld a,(whichplayernowplaying?) 1723 cp (iy+CastlePlayer) 1724 ret nz 1726 ld a,(iy+CastleMineLevel) 1727 or a1728 ret z1729 cp 11730 ld de,0001 1731 ld bc,000 1732 ld hl,000 1733 jr z,.MineLevelFound1734 cp 21735 ld de,0002 1736 ld bc,001 1737 ld hl,000 1738 jr z,.MineLevelFound1739 ld de,0003 1740 ld bc,001 1741 ld hl,001 1742 .MineLevelFound:1744 push de1745 1746 ld e,(ix+8)1747 ld d,(ix+9)1748 add hl,de1749 pop de1750 ret c1751 ld (ix+8),l1752 ld (ix+9),h1754 1755 ld l,(ix+6)1756 ld h,(ix+7)1757 add hl,bc1758 ret c1759 ld (ix+6),l1760 ld (ix+7),h1762 1763 ld l,(ix+4)1764 ld h,(ix+5)1765 add hl,de1766 ret c1767 ld (ix+4),l1768 ld (ix+5),h1769 ret1771AddCastlesSawmillResources: 1772 call SetResourcesCurrentPlayerinIX 1774 ld iy,Castle11775 call .CheckCastle1776 ld iy,Castle21777 call .CheckCastle1778 ld iy,Castle31779 call .CheckCastle1780 ld iy,Castle41781 call .CheckCastle1782 ret1784 .CheckCastle:1785 ld a,(whichplayernowplaying?) 1786 cp (iy+CastlePlayer) 1787 ret nz 1789 ld a,(iy+CastleSawmillLevel) 1790 or a1791 ret z1792 cp 11793 ld de,0001 1794 jr z,.SawmillLevelFound1795 cp 21796 ld de,0002 1797 jr z,.SawmillLevelFound1798 ld de,0003 1799 .SawmillLevelFound:1801 1802 ld l,(ix+2)1803 ld h,(ix+3)1804 add hl,de1805 ret c1806 ld (ix+2),l1807 ld (ix+3),h1808 ret1810AddCastlesIncomeToPlayer: 1811 call SetResourcesCurrentPlayerinIX 1813 ld iy,Castle11814 call .CheckCastle1815 ld iy,Castle21816 call .CheckCastle1817 ld iy,Castle31818 call .CheckCastle1819 ld iy,Castle41820 call .CheckCastle1821 ret1823 .CheckCastle:1824 ld a,(whichplayernowplaying?) 1825 cp (iy+CastlePlayer) 1826 ret nz 1828 ld a,(iy+CastleLevel) 1829 cp 11830 ld de,500 1831 jr z,.CastleLevelFound1832 cp 21833 ld de,1000 1834 jr z,.CastleLevelFound1835 cp 31836 ld de,2000 1837 jr z,.CastleLevelFound1838 cp 41839 ld de,3000 1840 jr z,.CastleLevelFound1841 ld de,4000 1842 .CastleLevelFound:1844 1845 ld l,(ix+0)1846 ld h,(ix+1)1847 add hl,de1848 ret c1849 ld (ix+0),l1850 ld (ix+1),h1851 ret1853SetResources:1854 ld a,(SetResources?)1855 dec a1856 ret z1857 ld (SetResources?),a1859 call SetCastleOverViewFontPage0Y212 1860 call ClearResourcesHud1861 call SetResourcesCurrentPlayerinIX1863 1864 ld b,229 1865 ld c,204 1866 ld l,(ix+0)1867 ld h,(ix+1)1868 call SetNumber16BitCastle 1870 ld b,032+004 1871 ld c,204 1872 ld l,(ix+2)1873 ld h,(ix+3)1874 call SetNumber16BitCastle 1876 ld b,078+004 1877 ld c,204 1878 ld l,(ix+4)1879 ld h,(ix+5)1880 call SetNumber16BitCastle 1882 ld b,124+004 1883 ld c,204 1884 ld l,(ix+6)1885 ld h,(ix+7)1886 call SetNumber16BitCastle 1888 ld b,169+004 1889 ld c,204 1890 ld l,(ix+8)1891 ld h,(ix+9)1892 call SetNumber16BitCastle 1893 ret1895ClearResourcesHud: 1896 1897 ld hl,$4000 + (204*128) + (032/2) - 1281898 ld de,$0000 + (204*128) + (032/2) - 1281899 ld bc,$0000 + (005*256) + (224/2)1900 ld a,HudNewBlock 1901 jp CopyRamToVramCorrectedCastleOverview 1903SetHeroArmyAndStatusInHud:1904 call checkcurrentplayerhuman 1905 ret z1907 ld a,(SetHeroArmyAndStatusInHud?)1908 dec a1909 ret z1910 ld (SetHeroArmyAndStatusInHud?),a1912 call ClearHeroStatsAndArmyUnitsAmount1913 ld ix,(plxcurrentheroAddress)1914 ld a,(ix+HeroStatus)1915 cp 2551916 ret z 1918 call SetCastleOverViewFontPage0Y212 1919 call SetArmyUnits1920 call SetArmyUnitsAmount1921 call SetHeroPortrait10x181922 call SetHeroStats1923 ret1925ClearHeroStatsAndArmyUnitsAmount:1926 ld hl,$4000 + (122*128) + (202/2) - 1281927 ld de,$0000 + (122*128) + (202/2) - 1281928 ld bc,$0000 + (075*256) + (052/2)1929 ld a,HudNewBlock 1930 jp CopyRamToVramCorrectedCastleOverview 1932SetHeroStats:1933 ld ix,(plxcurrentheroAddress)1935 ld de,ItemAttackPointsTable1936 call SetAdditionalStatFromInventoryItemsInHL1937 ld e,(ix+HeroStatAttack) 1938 ld d,01939 add hl,de1940 ld b,216+001 1941 ld c,145 1942 call SetNumber16BitCastle1944 ld de,ItemDefencePointsTable1945 call SetAdditionalStatFromInventoryItemsInHL1946 ld e,(ix+HeroStatDefense) 1947 ld d,01948 add hl,de1949 1950 bit 7,h 1951 jr z,.SetDefense1952 ld hl,01953 .SetDefense:1954 1955 ld b,225+001 1956 ld c,145 1957 call SetNumber16BitCastle1959 ld de,ItemIntelligencePointsTable1960 call SetAdditionalStatFromInventoryItemsInHL1961 ld e,(ix+HeroStatKnowledge) 1962 ld d,01963 add hl,de1964 ld b,234+001 1965 ld c,145 1966 call SetNumber16BitCastle1968 ld de,ItemSpellDamagePointsTable1969 call SetAdditionalStatFromInventoryItemsInHL1970 ld e,(ix+HeroStatSpelldamage) 1971 ld d,01972 add hl,de1973 ld b,243+001 1974 ld c,145 1975 call SetNumber16BitCastle1976 ret1978SetAdditionalStatFromInventoryItemsInHL:1979 ld ix,(plxcurrentheroAddress)1980 .IxAlreadySet:1982 ld b,05 1983 ld c,0 1984 ld hl,0 1986 call .loop 1987 call .loop 1988 call .loop 1989 call .loop 1990 call .loop 1991 call .loop 1992 call .loop 1993 call .loop 1994 call .loop 1995 ld ix,(plxcurrentheroAddress)1996 ret1998 .loop:1999 call .Check2000 inc de 2001 inc c 2002 djnz .loop2004 inc ix2005 ld b,05 2006 ret2008 .Check:2009 ld a,(ix+HeroInventory+0) 2010 cp c 2011 ret nz2012 ld a,(de) 2013 push bc2014 ld b,02016 or a2017 jp p,.positive2018 dec b2019 .positive:2021 ld c,a2022 add hl,bc2023 pop bc2024 ret 2026ItemSpellDamagePointsTable:20272028 db 02029 db 02030 db 02031 db ButterflySpellDamage 2032 db 020332034 db 02035 db 02036 db 02037 db 02038 db 020392040 db 02041 db 02042 db 02043 db 02044 db 020452046 db YattaShiNeSpellDamage 2047 db FireHoodSpellDamage 2048 db 02049 db 02050 db 020512052 db 02053 db 02054 db 02055 db 02056 db 020572058 db 02059 db 02060 db 02061 db 02062 db 020632064 db SmallRingSpellDamage 2065 db 02066 db ScarletRingSpellPower 2067 db 02068 db 020692070 db 02071 db 02072 db NegligeeOfTeethSpellPower 2073 db 02074 db TheChokerSpellPower 2076 db 02077 db 02078 db EnchantedRobeSpellPower 2079 db 02080 db LabCoatSpellPower 2081 2082ItemIntelligencePointsTable:20832084 db 02085 db 02086 db 02087 db ButterflyIntelligence 2088 db 020892090 db 02091 db 02092 db 02093 db 02094 db 020952096 db 02097 db 02098 db 02099 db 02100 db 021012102 db 02103 db 02104 db CerebroIntelligence 2105 db 02106 db 021072108 db 02109 db 02110 db 02111 db 02112 db 021132114 db 02115 db 02116 db 02117 db 02118 db EmeraldGlovesIntelligence 2120 db 02121 db CyclopsIntelligence 2122 db ScarletRingSpellPower 2123 db 02124 db 021252126 db 02127 db 02128 db NegligeeOfTeethIntelligence 2129 db 02130 db 021312132 db 02133 db PriestsCopeIntelligence 2134 db 02135 db 02136 db 02137 2138ItemDefencePointsTable:21392140 db 02141 db 02142 db HellSlayerDefence 2143 db ButterflyDefence 2144 db 021452146 db RegaliaDiPlebDefence 2147 db YoungBloodsArmorDefence 2148 db TheJuggernautDefence 2149 db YojumboTheRoninDefence 2150 db CeasarsChestplateDefence 2152 db GreenLeafShieldDefence 2153 db WoodenShieldDefence 2154 db TheBramStokerDefence 2155 db ImpenetrableShieldDefence 2156 db TrainingShieldDefence 2158 db YattaShiNeDefence 2159 db 02160 db 02161 db TheViridescentDefence 2162 db PikemensHelmetDefence 2164 db 02165 db 02166 db 02167 db 02168 db 021692170 db 02171 db 02172 db 02173 db 02174 db 021752176 db 02177 db 02178 db ScarletRingDefence 2179 db 02180 db 021812182 db 02183 db 02184 db 02185 db 02186 db 021872188 db 02189 db 02190 db 02191 db 02192 db 02193 2194ItemAttackPointsTable:21952196 db DaggerTimeAttack 2197 db SwordOfBahrainAttack2198 db HellSlayerAttack2199 db ButterflyAttack2200 db SwiftbladeAttack2202 db 02203 db 02204 db 02205 db 02206 db 022072208 db 02209 db 02210 db 02211 db 02212 db 022132214 db 02215 db 02216 db 02217 db 02218 db 022192220 db 02221 db 02222 db 02223 db 02224 db 022252226 db 02227 db 02228 db ElkSkinGlovesAttack 2229 db 02230 db 022312232 db 02233 db 02234 db ScarletRingAttack 2235 db 02236 db 022372238 db 02239 db 02240 db 02241 db 02242 db 022432244 db 02245 db 02246 db 02247 db 02248 db 02250ItemUnitSpeedPointsTable:22512252 db 02253 db 02254 db 02255 db 02256 db SwiftbladeUnitSpeed2258 db RegaliaDiPlebUnitSpeed2259 db 02260 db TheJuggernautUnitSpeed2261 db 02262 db 022632264 db 02265 db 02266 db 02267 db 02268 db 022692270 db 02271 db 02272 db 02273 db 02274 db PikemensHelmetUnitSpeed2276 db ShadowTramperUnitSpeed2277 db 02278 db 02279 db 02280 db SturdyBootsUnitSpeed2282 db 02283 db IronHandUnitSpeed2284 db 02285 db 02286 db 022872288 db 02289 db 02290 db 02291 db 02292 db 022932294 db 02295 db 02296 db 02297 db 02298 db 022992300 db 02301 db 02302 db 02303 db 02304 db 02306ItemUnitHpPointsTable:23072308 db 02309 db 02310 db 02311 db 02312 db 023132314 db 02315 db 02316 db 02317 db 02318 db CaesarsChestplateUnitHp2320 db 02321 db 02322 db 02323 db 02324 db 023252326 db 02327 db 02328 db 02329 db TheViridescentUnitHp2330 db 023312332 db 02333 db 02334 db 02335 db 02336 db 023372338 db 02339 db 02340 db ElkSkinGlovesUnitHp2341 db 02342 db 023432344 db 02345 db 02346 db 02347 db 02348 db 023492350 db 02351 db 02352 db 02353 db 02354 db 023552356 db 02357 db 02358 db 02359 db RuralVestUnitHp2360 db LabcoatUnitHp2363SetHeroPortrait10x18:2364 ld ix,(plxcurrentheroAddress)2365 ld c,(ix+HeroSpecificInfo+0) 2366 ld b,(ix+HeroSpecificInfo+1)2367 push bc2368 pop ix2369 ld a,Hero10x18PortraitsBlock 2370 ld l,(ix+HeroInfoPortrait10x18SYSX+0) 2371 ld h,(ix+HeroInfoPortrait10x18SYSX+1) 2372 ld de,DYDXHeroWindow10x18InHud 2373 ld bc,NXAndNY10x18HeroPortraits 2374 call CopyRamToVramCorrectedCastleOverview 2375 ret2377HeroPortrait10x18SYSXAdol: equ $4000+(000*128)+(000/2)-128 2378HeroPortrait10x18SYSXGoemon1: equ $4000+(000*128)+(010/2)-128 2379HeroPortrait10x18SYSXPixy: equ $4000+(000*128)+(020/2)-128 2380HeroPortrait10x18SYSXDrasle1: equ $4000+(000*128)+(030/2)-128 2381HeroPortrait10x18SYSXLatok: equ $4000+(000*128)+(040/2)-128 2382HeroPortrait10x18SYSXDrasle2: equ $4000+(000*128)+(050/2)-128 2383HeroPortrait10x18SYSXSnake1: equ $4000+(000*128)+(060/2)-128 2384HeroPortrait10x18SYSXDrasle3: equ $4000+(000*128)+(070/2)-128 2386HeroPortrait10x18SYSXSnake2: equ $4000+(000*128)+(080/2)-128 2387HeroPortrait10x18SYSXDrasle4: equ $4000+(000*128)+(090/2)-128 2388HeroPortrait10x18SYSXAshguine: equ $4000+(000*128)+(100/2)-128 2389HeroPortrait10x18SYSXUndeadline1: equ $4000+(000*128)+(110/2)-128 2390HeroPortrait10x18SYSXPsychoWorld: equ $4000+(000*128)+(120/2)-128 2391HeroPortrait10x18SYSXUndeadline2: equ $4000+(000*128)+(130/2)-128 2392HeroPortrait10x18SYSXGoemon2: equ $4000+(000*128)+(140/2)-128 2393HeroPortrait10x18SYSXUndeadline3: equ $4000+(000*128)+(150/2)-128 2395HeroPortrait10x18SYSXFray: equ $4000+(000*128)+(160/2)-128 2396HeroPortrait10x18SYSXBlackColor: equ $4000+(000*128)+(170/2)-128 2397HeroPortrait10x18SYSXWit: equ $4000+(000*128)+(180/2)-128 2398HeroPortrait10x18SYSXMitchell: equ $4000+(000*128)+(190/2)-128 2399HeroPortrait10x18SYSXJanJackGibson:equ $4000+(000*128)+(200/2)-128 2400HeroPortrait10x18SYSXGillianSeed: equ $4000+(000*128)+(210/2)-128 2401HeroPortrait10x18SYSXSnatcher: equ $4000+(000*128)+(220/2)-128 2402HeroPortrait10x18SYSXGolvellius: equ $4000+(000*128)+(230/2)-128 2404HeroPortrait10x18SYSXBillRizer: equ $4000+(000*128)+(240/2)-128 2405HeroPortrait10x18SYSXPochi: equ $4000+(018*128)+(000/2)-128 2406HeroPortrait10x18SYSXGreyFox: equ $4000+(018*128)+(010/2)-128 2407HeroPortrait10x18SYSXTrevorBelmont:equ $4000+(018*128)+(020/2)-128 2408HeroPortrait10x18SYSXBigBoss: equ $4000+(018*128)+(030/2)-128 2409HeroPortrait10x18SYSXSimonBelmont: equ $4000+(018*128)+(040/2)-128 2410HeroPortrait10x18SYSXDrPettrovich: equ $4000+(018*128)+(050/2)-128 2411HeroPortrait10x18SYSXRichterBelmont:equ $4000+(018*128)+(060/2)-128 2413HeroPortrait10x18SYSXUltrabox: equ $4000+(018*128)+(070/2)-128 2414HeroPortrait10x18SYSXLoganSerios: equ $4000+(018*128)+(080/2)-128 2415HeroPortrait10x18SYSXHollyWhite: equ $4000+(018*128)+(090/2)-128 2416HeroPortrait10x18SYSXMercies: equ $4000+(018*128)+(100/2)-128 2417HeroPortrait10x18SYSXNatashaRomanenko: equ $4000+(018*128)+(110/2)-128 2418HeroPortrait10x18SYSXRuth: equ $4000+(018*128)+(120/2)-128 2419HeroPortrait10x18SYSXGeera: equ $4000+(018*128)+(130/2)-128 2420HeroPortrait10x18SYSXYoungNoble: equ $4000+(018*128)+(140/2)-128 2422HeroPortrait10x18SYSXDawel: equ $4000+(018*128)+(150/2)-128 2423HeroPortrait10x18SYSXPocky: equ $4000+(018*128)+(160/2)-128 2424HeroPortrait10x18SYSXKelesisTheCook: equ $4000+(018*128)+(170/2)-128 2425HeroPortrait10x18SYSXLolo: equ $4000+(018*128)+(180/2)-128 2426HeroPortrait10x18SYSXPippols: equ $4000+(018*128)+(190/2)-128 2427HeroPortrait10x18SYSXRandar: equ $4000+(018*128)+(200/2)-128 2428HeroPortrait10x18SYSXCles: equ $4000+(018*128)+(210/2)-128 2429HeroPortrait10x18SYSXLuice: equ $4000+(018*128)+(220/2)-128 2431HeroPortrait10x18SYSXDick: equ $4000+(018*128)+(230/2)-128 2432HeroPortrait10x18SYSXAphrodite: equ $4000+(018*128)+(240/2)-128 2433HeroPortrait10x18SYSXTienRen: equ $4000+(036*128)+(000/2)-128 2434HeroPortrait10x18SYSXPopolon: equ $4000+(036*128)+(010/2)-128 2435HeroPortrait10x18SYSXHoMei: equ $4000+(036*128)+(020/2)-128 2436HeroPortrait10x18SYSXPriestessKi: equ $4000+(036*128)+(030/2)-128 2437HeroPortrait10x18SYSXMeiHong: equ $4000+(036*128)+(040/2)-128 2438HeroPortrait10x18SYSXPrinceGilgamesh: equ $4000+(036*128)+(050/2)-128 2439HeroPortrait10x18SYSXRandomHajile: equ $4000+(036*128)+(060/2)-128 2440HeroPortrait10x18SYSXBensonCunningham: equ $4000+(036*128)+(070/2)-128 2441HeroPortrait10x18SYSXJamieSeed: equ $4000+(036*128)+(080/2)-128 2442HeroPortrait10x18SYSXArmoredSnatcher: equ $4000+(036*128)+(090/2)-128 2443HeroPortrait10x18SYSXDruid: equ $4000+(036*128)+(100/2)-128 2445HeroPortrait10x18SYSXMomotaru: equ $4000+(036*128)+(110/2)-128 2446HeroPortrait10x18SYSXLuka: equ $4000+(036*128)+(120/2)-128 2447HeroPortrait10x18SYSXHeiwaAndButako: equ $4000+(036*128)+(130/2)-128 2448HeroPortrait10x18SYSXAce: equ $4000+(036*128)+(140/2)-128 2449HeroPortrait10x18SYSXSpaceExplorer01: equ $4000+(036*128)+(150/2)-128 2450HeroPortrait10x18SYSXFern: equ $4000+(036*128)+(160/2)-128 2451HeroPortrait10x18SYSXHorn: equ $4000+(036*128)+(170/2)-128 2452HeroPortrait10x18SYSXPixie: equ $4000+(036*128)+(180/2)-128 2453HeroPortrait10x18SYSXFreyaJerbain: equ $4000+(036*128)+(190/2)-128 2454HeroPortrait10x18SYSXLanceBean: equ $4000+(036*128)+(200/2)-128 2455HeroPortrait10x18SYSXThiharis: equ $4000+(036*128)+(210/2)-128 2456HeroPortrait10x18SYSXPampas: equ $4000+(036*128)+(220/2)-128 2457HeroPortrait10x18SYSXSelene: equ $4000+(036*128)+(230/2)-128 2458HeroPortrait10x18SYSXSkooter: equ $4000+(036*128)+(240/2)-128 2459HeroPortrait10x18SYSXJeddaChef: equ $4000+(054*128)+(000/2)-128 2467SetArmyUnits:2468 ld a,(ix+HeroUnits+00) 2469 call SetDefendingHeroArmyAndAmount.SetSYSX 2470 ld de,DYDXUnit1WindowInHud 2471 call CopyTransparantImage 2473 ld a,(ix+HeroUnits+03) 2474 call SetDefendingHeroArmyAndAmount.SetSYSX 2475 ld de,DYDXUnit2WindowInHud 2476 call CopyTransparantImage 2478 ld a,(ix+HeroUnits+06) 2479 call SetDefendingHeroArmyAndAmount.SetSYSX 2480 ld de,DYDXUnit3WindowInHud 2481 call CopyTransparantImage 2483 ld a,(ix+HeroUnits+09) 2484 call SetDefendingHeroArmyAndAmount.SetSYSX 2485 ld de,DYDXUnit4WindowInHud 2486 call CopyTransparantImage 2488 ld a,(ix+HeroUnits+12) 2489 call SetDefendingHeroArmyAndAmount.SetSYSX 2490 ld de,DYDXUnit5WindowInHud 2491 call CopyTransparantImage 2493 ld a,(ix+HeroUnits+15) 2494 call SetDefendingHeroArmyAndAmount.SetSYSX 2495 ld de,DYDXUnit6WindowInHud 2496 call CopyTransparantImage 2497 ret2499NXAndNY14x14CharaterPortraits: equ 014*256 + (014/2) 2500DYDXUnit1WindowInHud: equ 153*256 + 204 2501DYDXUnit2WindowInHud: equ 153*256 + 220 2502DYDXUnit3WindowInHud: equ 153*256 + 236 2503DYDXUnit4WindowInHud: equ 176*256 + 204 2504DYDXUnit5WindowInHud: equ 176*256 + 220 2505DYDXUnit6WindowInHud: equ 176*256 + 236 2507SetArmyUnitsAmount:2508 ld l,(ix+HeroUnits+01)2509 ld h,(ix+HeroUnits+02)2510 ld b,204 + 12511 ld c,1692512 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02514 ld l,(ix+HeroUnits+04)2515 ld h,(ix+HeroUnits+05)2516 ld b,220 + 12517 ld c,1692518 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02520 ld l,(ix+HeroUnits+07)2521 ld h,(ix+HeroUnits+08)2522 ld b,236 + 12523 ld c,1692524 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02526 ld l,(ix+HeroUnits+10)2527 ld h,(ix+HeroUnits+11)2528 ld b,204 + 12529 ld c,1922530 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02532 ld l,(ix+HeroUnits+13)2533 ld h,(ix+HeroUnits+14)2534 ld b,220 + 12535 ld c,1922536 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02538 ld l,(ix+HeroUnits+16)2539 ld h,(ix+HeroUnits+17)2540 ld b,236 + 12541 ld c,1922542 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02543 ret2545SetManaAndMovementBars:2546 ld a,(ChangeManaAndMovement?)2547 dec a2548 ret z2549 ld (ChangeManaAndMovement?),a2551 call EraseManaandMovementBars2552 call .PutManaandMovementBars25532556 ret2558.PutManaandMovementBars:2559 call SetHero1ForCurrentPlayerInIX2560 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2562 ld de,$0000 + (067*128) + (226/2) - 1282563 ld hl,$0000 + (067*128) + (204/2) - 1282564 call .PutManaAndMovement 2566 ld de,$0000 + (078*128) + (226/2) - 1282567 ld hl,$0000 + (078*128) + (204/2) - 1282568 call .PutManaAndMovement 2570 ld de,$0000 + (089*128) + (226/2) - 1282571 ld hl,$0000 + (089*128) + (204/2) - 1282572 call .PutManaAndMovement 2573 ret2575 .PutManaAndMovement:2576 ld a,(ix+HeroStatus) 2577 cp 255 2578 ret z2579 cp 254 2580 jp nz,.EndCheckInCastle2581 2582 ld bc,lenghtherotable2583 add ix,bc 2584 jp .PutManaAndMovement2585 .EndCheckInCastle:2586 push hl2587 call PutManaBar 2588 pop de2589 call PutMovementBar 2590 ld bc,lenghtherotable2591 add ix,bc 2592 ret2594 PutManaBar:2595 exx2597 2598 ld l,(ix+HeroMana+0) 2599 ld h,(ix+HeroMana+1) 2600 ld de,102601 call MultiplyHlWithDE 2603 push hl2604 pop bc2605 ld e,(ix+HeroTotalMana+0) 2606 ld d,(ix+HeroTotalMana+1) 2607 call DivideBCbyDE 2609 ld a,c2610 or a2611 ld bc,$4000 + ((107+25+76)*128) + (042/2) - 1282612 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02613 dec a2614 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282615 jr z,.EndSearchPercentageMovement2616 dec a2617 ld bc,$4000 + ((107+25+76)*128) + (038/2) - 1282618 jr z,.EndSearchPercentageMovement2619 dec a2620 ld bc,$4000 + ((107+25+76)*128) + (036/2) - 1282621 jr z,.EndSearchPercentageMovement2622 dec a2623 ld bc,$4000 + ((107+25+76)*128) + (034/2) - 1282624 jr z,.EndSearchPercentageMovement2625 dec a2626 ld bc,$4000 + ((107+25+76)*128) + (032/2) - 1282627 jr z,.EndSearchPercentageMovement2628 dec a2629 ld bc,$4000 + ((107+25+76)*128) + (030/2) - 1282630 jr z,.EndSearchPercentageMovement2631 dec a2632 ld bc,$4000 + ((107+25+76)*128) + (028/2) - 1282633 jr z,.EndSearchPercentageMovement2634 dec a2635 ld bc,$4000 + ((107+25+76)*128) + (026/2) - 1282636 jr z,.EndSearchPercentageMovement2637 dec a2638 ld bc,$4000 + ((107+25+76)*128) + (024/2) - 1282639 jr z,.EndSearchPercentageMovement2640 ld bc,$4000 + ((107+25+76)*128) + (022/2) - 1282641 jr .EndSearchPercentageMovement2643 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2644 ld a,(ix+HeroMana+0) 2645 ld h,(ix+HeroMana+1) 2646 or h2647 jr z,.EndSearchPercentageMovement2648 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282650 .EndSearchPercentageMovement:2651 push bc2652 exx2653 pop hl2654 ld bc,$0000 + (010*256) + (002/2)2655 ld a,Hero20x11PortraitsBlock 2656 call CopyRamToVramCorrectedCastleOverview 2657 ret2659 PutMovementBar:2660 exx2661 2662 ld h,02663 ld l,(ix+HeroMove) 2664 ld de,102665 call MultiplyHlWithDE 2667 push hl2668 pop bc2669 ld d,02670 ld e,(ix+HeroTotalMove) 2671 call DivideBCbyDE 2673 ld a,c2674 or a2675 ld bc,$4000 + ((107+25+76)*128) + (020/2) - 1282676 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02677 dec a2678 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282679 jr z,.EndSearchPercentageMovement2680 dec a2681 ld bc,$4000 + ((107+25+76)*128) + (016/2) - 1282682 jr z,.EndSearchPercentageMovement2683 dec a2684 ld bc,$4000 + ((107+25+76)*128) + (014/2) - 1282685 jr z,.EndSearchPercentageMovement2686 dec a2687 ld bc,$4000 + ((107+25+76)*128) + (012/2) - 1282688 jr z,.EndSearchPercentageMovement2689 dec a2690 ld bc,$4000 + ((107+25+76)*128) + (010/2) - 1282691 jr z,.EndSearchPercentageMovement2692 dec a2693 ld bc,$4000 + ((107+25+76)*128) + (008/2) - 1282694 jr z,.EndSearchPercentageMovement2695 dec a2696 ld bc,$4000 + ((107+25+76)*128) + (006/2) - 1282697 jr z,.EndSearchPercentageMovement2698 dec a2699 ld bc,$4000 + ((107+25+76)*128) + (004/2) - 1282700 jr z,.EndSearchPercentageMovement2701 dec a2702 ld bc,$4000 + ((107+25+76)*128) + (002/2) - 1282703 jr z,.EndSearchPercentageMovement2704 ld bc,$4000 + ((107+25+76)*128) + (000/2) - 1282705 jr .EndSearchPercentageMovement2707 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2708 ld a,(ix+HeroMove) 2709 and a2710 jr z,.EndSearchPercentageMovement2711 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282713 .EndSearchPercentageMovement:2714 push bc2715 exx2716 pop hl2717 ld bc,$0000 + (010*256) + (002/2)2718 ld a,Hero20x11PortraitsBlock 2719 call CopyRamToVramCorrectedCastleOverview 2720 ret2722EraseManaandMovementBars:2723 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282724 ld de,$0000 + (067*128) + (204/2) - 1282725 ld bc,$0000 + (010*256) + (002/2)2726 ld a,Hero20x11PortraitsBlock 2727 call CopyRamToVramCorrectedCastleOverview 2729 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282730 ld de,$0000 + (078*128) + (204/2) - 1282731 ld bc,$0000 + (010*256) + (002/2)2732 ld a,Hero20x11PortraitsBlock 2733 call CopyRamToVramCorrectedCastleOverview 2735 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282736 ld de,$0000 + (089*128) + (204/2) - 1282737 ld bc,$0000 + (010*256) + (002/2)2738 ld a,Hero20x11PortraitsBlock 2739 call CopyRamToVramCorrectedCastleOverview 2741 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282742 ld de,$0000 + (067*128) + (226/2) - 1282743 ld bc,$0000 + (010*256) + (002/2)2744 ld a,Hero20x11PortraitsBlock 2745 call CopyRamToVramCorrectedCastleOverview 2747 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282748 ld de,$0000 + (078*128) + (226/2) - 1282749 ld bc,$0000 + (010*256) + (002/2)2750 ld a,Hero20x11PortraitsBlock 2751 call CopyRamToVramCorrectedCastleOverview 2753 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282754 ld de,$0000 + (089*128) + (226/2) - 1282755 ld bc,$0000 + (010*256) + (002/2)2756 ld a,Hero20x11PortraitsBlock 2757 call CopyRamToVramCorrectedCastleOverview 2758 ret27612763SetCastlesInWindows: 2764 ld a,(SetCastlesInWindows?)2765 dec a2766 ret z2767 ld (SetCastlesInWindows?),a2769 call ClearCastleButtons 2771 call SetCastleUsingCastleWindowPointerInIX2772 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2773 call .setCastlewindow2775 call SetCastleUsingCastleWindowPointerInIX2776 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2777 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2778 call .setCastlewindow2780 call SetCastleUsingCastleWindowPointerInIX2781 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2782 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2783 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2784 jp .setCastlewindow2786 .setCastlewindow:2787 2789 ld hl,CastleButtonGrassLand2790 2799 2800 ld bc,72801 ldir2802 ret2804CastleButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (156/2) - 128 | dw $4000 + ((139+25+76)*128) + (176/2) - 128 | dw $4000 + ((139+25+76)*128) + (196/2) - 1282805CastleButtonGrassLand: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (000/2) - 128 | dw $4000 + ((117+25+76)*128) + (020/2) - 128 | dw $4000 + ((117+25+76)*128) + (040/2) - 1282806CastleButtonSwamp: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (060/2) - 128 | dw $4000 + ((117+25+76)*128) + (080/2) - 128 | dw $4000 + ((117+25+76)*128) + (100/2) - 1282807CastleButtonHell: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (120/2) - 128 | dw $4000 + ((117+25+76)*128) + (140/2) - 128 | dw $4000 + ((117+25+76)*128) + (160/2) - 1282808CastleButtonSnow: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (180/2) - 128 | dw $4000 + ((117+25+76)*128) + (200/2) - 128 | dw $4000 + ((117+25+76)*128) + (220/2) - 1282810ClearCastleButtons:2811 ld hl,CastleButton20x11SYSXEmpty2812 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2813 ld bc,72814 ldir2816 ld hl,CastleButton20x11SYSXEmpty2817 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2818 ld bc,72819 ldir2821 ld hl,CastleButton20x11SYSXEmpty2822 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2823 ld bc,72824 ldir2825 ret2828ThirdCastleWindowClicked:2829 call SetCastleUsingCastleWindowPointerInIX2830 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2831 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2832 jp GoCenterAndCheckEnter2833 2834SecondCastleWindowClicked:2835 call SetCastleUsingCastleWindowPointerInIX2836 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2837 jp GoCenterAndCheckEnter2839FirstCastleWindowClicked:2840 call SetCastleUsingCastleWindowPointerInIX28412843 GoCenterAndCheckEnter: 2844 ld a,(mappointery)2845 ld b,a2846 ld a,(mappointerx)2847 ld c,a2848 push bc 2849 2850 call centrescreenforthisCastle2852 pop bc2853 2854 ld a,(mappointery)2855 ld h,a2856 ld a,(mappointerx)2857 ld l,a2858 xor a2859 sbc hl,bc2860 ret nz2862 ld (WhichCastleIsPointerPointingAt?),ix2863 ld a,12864 ld (EnterCastle?),a2865 ret28672869SetHeroesInWindows:2870 ld a,(SetHeroesInWindows?)2871 dec a2872 ret z2873 ld (SetHeroesInWindows?),a2875 call ClearHeroButtons 2876 call SetHero1ForCurrentPlayerInIX2877 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2879 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2880 call .setherowindow2881 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2882 call .setherowindow2883 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2885 .setherowindow:2886 ld a,(ix+HeroStatus) 2887 cp 2552888 ret z2889 cp 254 2890 jp nz,.EndCheckInCastle2891 2892 ld bc,lenghtherotable2893 add ix,bc 2894 jp .setherowindow2895 .EndCheckInCastle:2897 ld c,(ix+HeroSpecificInfo+0) 2898 ld b,(ix+HeroSpecificInfo+1)2899 push bc2900 pop iy2901 ld l,(iy+HeroButton20x11SYSX+0) 2902 ld h,(iy+HeroButton20x11SYSX+1) 2904 ld bc,72905 ldir2907 ld de,lenghtherotable2908 add ix,de 2909 ret2911ClearHeroButtons:2912 ld hl,HeroButton20x11SYSXEmpty2913 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2914 ld bc,72915 ldir2917 ld hl,HeroButton20x11SYSXEmpty2918 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2919 ld bc,72920 ldir2922 ld hl,HeroButton20x11SYSXEmpty2923 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2924 ld bc,72925 ldir2926 ret2928HeroButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (096/2) - 128 | dw $4000 + ((139+25+76)*128) + (116/2) - 128 | dw $4000 + ((139+25+76)*128) + (136/2) - 1282930HeroButton20x11SYSXAdol: db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (020/2) - 128 | dw $4000 + (000*128) + (040/2) - 1282931HeroButton20x11SYSXGoemon1: db %1100 0011 | dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (000*128) + (100/2) - 1282932HeroButton20x11SYSXPixy: db %1100 0011 | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (000*128) + (160/2) - 1282933HeroButton20x11SYSXDrasle1: db %1100 0011 | dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (000*128) + (220/2) - 1282935HeroButton20x11SYSXLatok: db %1100 0011 | dw $4000 + (011*128) + (000/2) - 128 | dw $4000 + (011*128) + (020/2) - 128 | dw $4000 + (011*128) + (040/2) - 1282936HeroButton20x11SYSXDrasle2: db %1100 0011 | dw $4000 + (011*128) + (060/2) - 128 | dw $4000 + (011*128) + (080/2) - 128 | dw $4000 + (011*128) + (100/2) - 1282937HeroButton20x11SYSXSnake1: db %1100 0011 | dw $4000 + (011*128) + (120/2) - 128 | dw $4000 + (011*128) + (140/2) - 128 | dw $4000 + (011*128) + (160/2) - 1282938HeroButton20x11SYSXDrasle3: db %1100 0011 | dw $4000 + (011*128) + (180/2) - 128 | dw $4000 + (011*128) + (200/2) - 128 | dw $4000 + (011*128) + (220/2) - 1282940HeroButton20x11SYSXSnake2: db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (020/2) - 128 | dw $4000 + (022*128) + (040/2) - 1282941HeroButton20x11SYSXDrasle4: db %1100 0011 | dw $4000 + (022*128) + (060/2) - 128 | dw $4000 + (022*128) + (080/2) - 128 | dw $4000 + (022*128) + (100/2) - 1282942HeroButton20x11SYSXAshguine: db %1100 0011 | dw $4000 + (022*128) + (120/2) - 128 | dw $4000 + (022*128) + (140/2) - 128 | dw $4000 + (022*128) + (160/2) - 1282943HeroButton20x11SYSXUndeadline1: db %1100 0011 | dw $4000 + (022*128) + (180/2) - 128 | dw $4000 + (022*128) + (200/2) - 128 | dw $4000 + (022*128) + (220/2) - 1282945HeroButton20x11SYSXPsychoWorld: db %1100 0011 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (033*128) + (020/2) - 128 | dw $4000 + (033*128) + (040/2) - 1282946HeroButton20x11SYSXUndeadline2: db %1100 0011 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (033*128) + (080/2) - 128 | dw $4000 + (033*128) + (100/2) - 1282947HeroButton20x11SYSXGoemon2: db %1100 0011 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (033*128) + (140/2) - 128 | dw $4000 + (033*128) + (160/2) - 1282948HeroButton20x11SYSXUndeadline3: db %1100 0011 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (033*128) + (200/2) - 128 | dw $4000 + (033*128) + (220/2) - 1282950HeroButton20x11SYSXFray: db %1100 0011 | dw $4000 + (044*128) + (000/2) - 128 | dw $4000 + (044*128) + (020/2) - 128 | dw $4000 + (044*128) + (040/2) - 1282951HeroButton20x11SYSXBlackColor: db %1100 0011 | dw $4000 + (044*128) + (060/2) - 128 | dw $4000 + (044*128) + (080/2) - 128 | dw $4000 + (044*128) + (100/2) - 1282952HeroButton20x11SYSXWit: db %1100 0011 | dw $4000 + (044*128) + (120/2) - 128 | dw $4000 + (044*128) + (140/2) - 128 | dw $4000 + (044*128) + (160/2) - 1282953HeroButton20x11SYSXMitchell: db %1100 0011 | dw $4000 + (044*128) + (180/2) - 128 | dw $4000 + (044*128) + (200/2) - 128 | dw $4000 + (044*128) + (220/2) - 1282955HeroButton20x11SYSXJanJackGibson: db %1100 0011 | dw $4000 + (055*128) + (000/2) - 128 | dw $4000 + (055*128) + (020/2) - 128 | dw $4000 + (055*128) + (040/2) - 1282956HeroButton20x11SYSXGillianSeed: db %1100 0011 | dw $4000 + (055*128) + (060/2) - 128 | dw $4000 + (055*128) + (080/2) - 128 | dw $4000 + (055*128) + (100/2) - 1282957HeroButton20x11SYSXSnatcher: db %1100 0011 | dw $4000 + (055*128) + (120/2) - 128 | dw $4000 + (055*128) + (140/2) - 128 | dw $4000 + (055*128) + (160/2) - 1282958HeroButton20x11SYSXGolvellius: db %1100 0011 | dw $4000 + (055*128) + (180/2) - 128 | dw $4000 + (055*128) + (200/2) - 128 | dw $4000 + (055*128) + (220/2) - 1282960HeroButton20x11SYSXBillRizer: db %1100 0011 | dw $4000 + (066*128) + (000/2) - 128 | dw $4000 + (066*128) + (020/2) - 128 | dw $4000 + (066*128) + (040/2) - 1282961HeroButton20x11SYSXPochi: db %1100 0011 | dw $4000 + (066*128) + (060/2) - 128 | dw $4000 + (066*128) + (080/2) - 128 | dw $4000 + (066*128) + (100/2) - 1282962HeroButton20x11SYSXGreyFox: db %1100 0011 | dw $4000 + (066*128) + (120/2) - 128 | dw $4000 + (066*128) + (140/2) - 128 | dw $4000 + (066*128) + (160/2) - 1282963HeroButton20x11SYSXTrevorBelmont: db %1100 0011 | dw $4000 + (066*128) + (180/2) - 128 | dw $4000 + (066*128) + (200/2) - 128 | dw $4000 + (066*128) + (220/2) - 1282965HeroButton20x11SYSXBigBoss: db %1100 0011 | dw $4000 + (077*128) + (000/2) - 128 | dw $4000 + (077*128) + (020/2) - 128 | dw $4000 + (077*128) + (040/2) - 1282966HeroButton20x11SYSXSimonBelmont: db %1100 0011 | dw $4000 + (077*128) + (060/2) - 128 | dw $4000 + (077*128) + (080/2) - 128 | dw $4000 + (077*128) + (100/2) - 1282967HeroButton20x11SYSXDrPettrovich: db %1100 0011 | dw $4000 + (077*128) + (120/2) - 128 | dw $4000 + (077*128) + (140/2) - 128 | dw $4000 + (077*128) + (160/2) - 1282968HeroButton20x11SYSXRichterBelmont: db %1100 0011 | dw $4000 + (077*128) + (180/2) - 128 | dw $4000 + (077*128) + (200/2) - 128 | dw $4000 + (077*128) + (220/2) - 1282970HeroButton20x11SYSXUltrabox: db %1100 0011 | dw $4000 + (088*128) + (000/2) - 128 | dw $4000 + (088*128) + (020/2) - 128 | dw $4000 + (088*128) + (040/2) - 1282971HeroButton20x11SYSXLoganSerios: db %1100 0011 | dw $4000 + (088*128) + (060/2) - 128 | dw $4000 + (088*128) + (080/2) - 128 | dw $4000 + (088*128) + (100/2) - 1282972HeroButton20x11SYSXHollyWhite: db %1100 0011 | dw $4000 + (088*128) + (120/2) - 128 | dw $4000 + (088*128) + (140/2) - 128 | dw $4000 + (088*128) + (160/2) - 1282973HeroButton20x11SYSXMercies: db %1100 0011 | dw $4000 + (088*128) + (180/2) - 128 | dw $4000 + (088*128) + (200/2) - 128 | dw $4000 + (088*128) + (220/2) - 1282975HeroButton20x11SYSXNatashaRomanenko:db %1100 0011 | dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (020/2) - 128 | dw $4000 + (099*128) + (040/2) - 1282976HeroButton20x11SYSXRuth: db %1100 0011 | dw $4000 + (099*128) + (060/2) - 128 | dw $4000 + (099*128) + (080/2) - 128 | dw $4000 + (099*128) + (100/2) - 1282977HeroButton20x11SYSXGeera: db %1100 0011 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (140/2) - 128 | dw $4000 + (099*128) + (160/2) - 1282978HeroButton20x11SYSXYoungNoble: db %1100 0011 | dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (200/2) - 128 | dw $4000 + (099*128) + (220/2) - 1282980HeroButton20x11SYSXDawel: db %1100 0011 | dw $4000 + (110*128) + (000/2) - 128 | dw $4000 + (110*128) + (020/2) - 128 | dw $4000 + (110*128) + (040/2) - 1282981HeroButton20x11SYSXPocky: db %1100 0011 | dw $4000 + (110*128) + (060/2) - 128 | dw $4000 + (110*128) + (080/2) - 128 | dw $4000 + (110*128) + (100/2) - 1282982HeroButton20x11SYSXKelesisTheCook: db %1100 0011 | dw $4000 + (110*128) + (120/2) - 128 | dw $4000 + (110*128) + (140/2) - 128 | dw $4000 + (110*128) + (160/2) - 1282983HeroButton20x11SYSXLolo: db %1100 0011 | dw $4000 + (110*128) + (180/2) - 128 | dw $4000 + (110*128) + (200/2) - 128 | dw $4000 + (110*128) + (220/2) - 1282985HeroButton20x11SYSXPippols: db %1100 0011 | dw $4000 + (121*128) + (000/2) - 128 | dw $4000 + (121*128) + (020/2) - 128 | dw $4000 + (121*128) + (040/2) - 1282986HeroButton20x11SYSXRandar: db %1100 0011 | dw $4000 + (121*128) + (060/2) - 128 | dw $4000 + (121*128) + (080/2) - 128 | dw $4000 + (121*128) + (100/2) - 1282987HeroButton20x11SYSXCles: db %1100 0011 | dw $4000 + (121*128) + (120/2) - 128 | dw $4000 + (121*128) + (140/2) - 128 | dw $4000 + (121*128) + (160/2) - 1282988HeroButton20x11SYSXLuice: db %1100 0011 | dw $4000 + (121*128) + (180/2) - 128 | dw $4000 + (121*128) + (200/2) - 128 | dw $4000 + (121*128) + (220/2) - 1282990HeroButton20x11SYSXDick: db %1100 0011 | dw $4000 + (132*128) + (000/2) - 128 | dw $4000 + (132*128) + (020/2) - 128 | dw $4000 + (132*128) + (040/2) - 1282991HeroButton20x11SYSXAphrodite: db %1100 0011 | dw $4000 + (132*128) + (060/2) - 128 | dw $4000 + (132*128) + (080/2) - 128 | dw $4000 + (132*128) + (100/2) - 1282992HeroButton20x11SYSXTienRen: db %1100 0011 | dw $4000 + (132*128) + (120/2) - 128 | dw $4000 + (132*128) + (140/2) - 128 | dw $4000 + (132*128) + (160/2) - 1282993HeroButton20x11SYSXPopolon: db %1100 0011 | dw $4000 + (132*128) + (180/2) - 128 | dw $4000 + (132*128) + (200/2) - 128 | dw $4000 + (132*128) + (220/2) - 1282995HeroButton20x11SYSXHoMei: db %1100 0011 | dw $4000 + (143*128) + (000/2) - 128 | dw $4000 + (143*128) + (020/2) - 128 | dw $4000 + (143*128) + (040/2) - 1282996HeroButton20x11SYSXPriestessKi: db %1100 0011 | dw $4000 + (143*128) + (060/2) - 128 | dw $4000 + (143*128) + (080/2) - 128 | dw $4000 + (143*128) + (100/2) - 1282997HeroButton20x11SYSXMeiHong: db %1100 0011 | dw $4000 + (143*128) + (120/2) - 128 | dw $4000 + (143*128) + (140/2) - 128 | dw $4000 + (143*128) + (160/2) - 1282998HeroButton20x11SYSXPrinceGilgamesh: db %1100 0011 | dw $4000 + (143*128) + (180/2) - 128 | dw $4000 + (143*128) + (200/2) - 128 | dw $4000 + (143*128) + (220/2) - 1283000HeroButton20x11SYSXRandomHajile: db %1100 0011 | dw $4000 + (154*128) + (000/2) - 128 | dw $4000 + (154*128) + (020/2) - 128 | dw $4000 + (154*128) + (040/2) - 1283001HeroButton20x11SYSXBensonCunningham: db %1100 0011 | dw $4000 + (154*128) + (060/2) - 128 | dw $4000 + (154*128) + (080/2) - 128 | dw $4000 + (154*128) + (100/2) - 1283002HeroButton20x11SYSXJamieSeed: db %1100 0011 | dw $4000 + (154*128) + (120/2) - 128 | dw $4000 + (154*128) + (140/2) - 128 | dw $4000 + (154*128) + (160/2) - 1283003HeroButton20x11SYSXArmoredSnatcher: db %1100 0011 | dw $4000 + (154*128) + (180/2) - 128 | dw $4000 + (154*128) + (200/2) - 128 | dw $4000 + (154*128) + (220/2) - 1283005HeroButton20x11SYSXDruid: db %1100 0011 | dw $4000 + (165*128) + (000/2) - 128 | dw $4000 + (165*128) + (020/2) - 128 | dw $4000 + (165*128) + (040/2) - 1283006HeroButton20x11SYSXMomotaru: db %1100 0011 | dw $4000 + (165*128) + (060/2) - 128 | dw $4000 + (165*128) + (080/2) - 128 | dw $4000 + (165*128) + (100/2) - 1283007HeroButton20x11SYSXLuka: db %1100 0011 | dw $4000 + (165*128) + (120/2) - 128 | dw $4000 + (165*128) + (140/2) - 128 | dw $4000 + (165*128) + (160/2) - 1283008HeroButton20x11SYSXHeiwaAndButako: db %1100 0011 | dw $4000 + (165*128) + (180/2) - 128 | dw $4000 + (165*128) + (200/2) - 128 | dw $4000 + (165*128) + (220/2) - 1283010HeroButton20x11SYSXAce: db %1100 0011 | dw $4000 + (176*128) + (000/2) - 128 | dw $4000 + (176*128) + (020/2) - 128 | dw $4000 + (176*128) + (040/2) - 1283011HeroButton20x11SYSXSpaceExplorer01: db %1100 0011 | dw $4000 + (176*128) + (060/2) - 128 | dw $4000 + (176*128) + (080/2) - 128 | dw $4000 + (176*128) + (100/2) - 1283012HeroButton20x11SYSXFern: db %1100 0011 | dw $4000 + (176*128) + (120/2) - 128 | dw $4000 + (176*128) + (140/2) - 128 | dw $4000 + (176*128) + (160/2) - 1283013HeroButton20x11SYSXHorn: db %1100 0011 | dw $4000 + (176*128) + (180/2) - 128 | dw $4000 + (176*128) + (200/2) - 128 | dw $4000 + (176*128) + (220/2) - 1283015HeroButton20x11SYSXPixie: db %1100 0011 | dw $4000 + (187*128) + (000/2) - 128 | dw $4000 + (187*128) + (020/2) - 128 | dw $4000 + (187*128) + (040/2) - 1283016HeroButton20x11SYSXFreyaJerbain: db %1100 0011 | dw $4000 + (187*128) + (060/2) - 128 | dw $4000 + (187*128) + (080/2) - 128 | dw $4000 + (187*128) + (100/2) - 1283017HeroButton20x11SYSXLanceBean: db %1100 0011 | dw $4000 + (187*128) + (120/2) - 128 | dw $4000 + (187*128) + (140/2) - 128 | dw $4000 + (187*128) + (160/2) - 1283018HeroButton20x11SYSXThiharis: db %1100 0011 | dw $4000 + (187*128) + (180/2) - 128 | dw $4000 + (187*128) + (200/2) - 128 | dw $4000 + (187*128) + (220/2) - 1283020HeroButton20x11SYSXPampas: db %1100 0011 | dw $4000 + (198*128) + (060/2) - 128 | dw $4000 + (198*128) + (080/2) - 128 | dw $4000 + (198*128) + (220/2) - 1283021HeroButton20x11SYSXSelene: db %1100 0011 | dw $4000 + (198*128) + (120/2) - 128 | dw $4000 + (198*128) + (140/2) - 128 | dw $4000 + (198*128) + (040/2) - 1283022HeroButton20x11SYSXSkooter: db %1100 0011 | dw $4000 + (198*128) + (180/2) - 128 | dw $4000 + (198*128) + (200/2) - 128 | dw $4000 + (198*128) + (100/2) - 1283023HeroButton20x11SYSXJeddaChef: db %1100 0011 | dw $4000 + (240*128) + (000/2) - 128 | dw $4000 + (240*128) + (020/2) - 128 | dw $4000 + (240*128) + (160/2) - 1283026HeroLevelUpCode:30273028 ld ix,(plxcurrentheroAddress)3029 ld a,(ix+HeroTotalMana)3030 ld (HeroTotalManaBeforeLevelingUp),a3032 ld a,r3033 ld (framecounter),a 3035 ld a,255 3036 ld (PreviousButtonClicked),a 3037 ld ix,GenericButtonTable3038 ld (PreviousButtonClickedIX),ix3040 call SetLevelUpButtons3041 call IncreasePrimairySkill3043 call SetLevelUpGraphics 3044 call SetLevelUpHeroIcon3045 call SetPrimairySkillUpIcon 3046 call SetLevelUpText3047 call SwapAndSetPage 3048 call SetLevelUpGraphics 3049 call SetLevelUpHeroIcon3050 call SetPrimairySkillUpIcon 3051 call SetLevelUpText3053 .engine: 3054 call SwapAndSetPage 3055 call PopulateControls 30573066 3067 ld ix,GenericButtonTable3068 call CheckButtonMouseInteractionGenericButtons3070 call .CheckButtonClicked 3074 3075 ld ix,(PreviousButtonClickedIX) 3076 ld a,(ix+GenericButtonStatus)3077 push af3078 ld a,(PreviousButtonClicked)3079 cp 2553080 jr z,.EndMarkButton 3081 ld (ix+GenericButtonStatus),%1010 00113082 .EndMarkButton:3083 3086 ld ix,GenericButtonTable3087 call SetGenericButtons 3090 3091 pop af3092 ld ix,(PreviousButtonClickedIX) 3093 ld (ix+GenericButtonStatus),a3094 30983100 halt3101 jp .engine3103 .CheckButtonClicked:3104 ret nc3105 ld a,%1100 00113106 ld (GenericButtonTable),a 3108 ld a,b3109 cp 3 3110 jr z,.VButton3111 ld (PreviousButtonClicked),a3112 ld (PreviousButtonClickedIX),ix3113 cp 2 3114 jr z,.LeftSkillButton3115 3116 .RightSkillButton: 3117 ld a,(SkillInLevelUpSlot2)3118 jp SetLevelUpHeroSkillsInTable3120 .LeftSkillButton:3121 ld a,(SkillInLevelUpSlot1)3122 jp SetLevelUpHeroSkillsInTable3123 3124 .VButton:3125 pop af 3126 ld a,(PreviousButtonClicked)3127 cp 2 3128 jr z,.AddSkillOnTheLeft3130 .AddSkillOnTheRight:3131 ld ix,(plxcurrentheroAddress) 3132 ld a,(SkillInLevelUpSlot2)3133 ld b,a3134 ld a,(PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?)3135 jp AddThisSkillToHero3137 .AddSkillOnTheLeft:3138 ld ix,(plxcurrentheroAddress) 3139 ld a,(SkillInLevelUpSlot1)3140 ld b,a3141 ld a,(PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?)3142 jp AddThisSkillToHero3144SetLevelUpHeroSkillsInTable:3145 ex af,af'3146 ld a,HeroOverviewCodeBlock 3147 call block34 3149 ex af,af'3150 ld de,TextSkillsWindowButton13151 call .SetheroSkill3153 ld a,CastleOverviewCodeBlock 3154 call block1234 3156 ld hl,$4000 + (147*128) + (006/2) - 1283157 ld de,$0000 + (162*128) + (028/2) - 1283158 ld bc,$0000 + (020*256) + (148/2)3159 ld a,LevelUpBlock 3160 call CopyRamToVramCorrectedCastleOverview 3162 ld b,030 3163 ld c,162 3164 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3165 call SetText 3166 call SwapAndSetPage 3168 ld hl,$4000 + (147*128) + (006/2) - 1283169 ld de,$0000 + (162*128) + (028/2) - 1283170 ld bc,$0000 + (020*256) + (148/2)3171 ld a,LevelUpBlock 3172 call CopyRamToVramCorrectedCastleOverview 3174 ld b,030 3175 ld c,162 3176 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3177 jp SetText 3179 .SetheroSkill:3180 ld l,a3181 ld h,03182 add hl,hl 3183 add hl,hl 3184 add hl,hl 3185 push hl3186 add hl,hl 3187 add hl,hl 3188 add hl,hl 3189 add hl,hl 3190 pop bc3191 add hl,bc 3192 ld bc,SkillEmpty+$40003193 add hl,bc3194 ld bc,LenghtSkillDescription3195 ldir3196 ret3206AddThisSkillToHero:3207 call .goAdd3208 call SetTotalManaHero3209 ld a,(HeroTotalManaBeforeLevelingUp)3210 ld b,a3211 ld a,(ix+HeroTotalMana)3212 sub a,b 3213 add a,(ix+HeroMana) 3214 ld (ix+HeroMana),a3215 ret3217 .goAdd:3218 cp 13219 jr z,.HeroSlot13220 cp 23221 jr z,.HeroSlot23222 cp 33223 jr z,.HeroSlot33224 cp 43225 jr z,.HeroSlot43226 cp 53227 jr z,.HeroSlot53228 cp 63229 jr z,.HeroSlot63230 3231 .SkillShouldBePlacedInaFreeSlot:3232 xor a3233 cp (ix+HeroSkills+1)3234 jr z,.HeroSlot23235 cp (ix+HeroSkills+2)3236 jr z,.HeroSlot33237 cp (ix+HeroSkills+3)3238 jr z,.HeroSlot43239 cp (ix+HeroSkills+4)3240 jr z,.HeroSlot53242 .HeroSlot6:3243 ld (ix+HeroSkills+5),b3244 ret3245 .HeroSlot5:3246 ld (ix+HeroSkills+4),b3247 ret3248 .HeroSlot4:3249 ld (ix+HeroSkills+3),b3250 ret3251 .HeroSlot3:3252 ld (ix+HeroSkills+2),b3253 ret3254 .HeroSlot2:3255 ld (ix+HeroSkills+1),b3256 ret3257 .HeroSlot1:3258 ld (ix+HeroSkills+0),b3259 ret 3272SetLevelUpButtons:3273 ld hl,LevelUpButtonTable-23274 ld de,GenericButtonTable-23275 ld bc,2+(GenericButtonTableLenghtPerButton*03)3276 ldir3278 call .SetButtons3280 ld a,(SkillInLevelUpSlot1)3281 ld hl,SkillInLevelUpSlot23282 cp (hl)3283 ret nz3285 ld a,863286 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXleft),a3287 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXleft),a3288 ld a,86+303289 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXright),a3290 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXright),a3291 ret3294 .SetButtons:3296 ld ix,(plxcurrentheroAddress) 3298 ld a,(ix+HeroSkills+0) 3302 exx3303 ld hl,SkillInLevelUpSlot13304 ld bc,PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?3305 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*01+13306 exx3308 cp 133309 jp c,.SetLeftButtonMightRightButtonAdventureOrWizzardry3310 cp 223311 jp c,.SetLeftButtonAdventureRightButtonWizzardryOrMight3312 jp .SetLeftButtonWizzardryRightButtonMightOrAdventure3314 .SetLeftButtonWizzardryRightButtonMightOrAdventure:3315 call SetButtonWizzardry3316 exx3317 ld hl,SkillInLevelUpSlot23318 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3319 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13320 exx3321 ld a,r3322 and 13323 jp z,SetButtonMight3324 jp SetButtonAdventure3326 .SetLeftButtonMightRightButtonAdventureOrWizzardry:3327 call SetButtonMight3328 exx3329 ld hl,SkillInLevelUpSlot23330 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3331 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13332 exx3333 ld a,r3334 and 13335 jp z,SetButtonAdventure3336 jp SetButtonWizzardry3338 .SetLeftButtonAdventureRightButtonWizzardryOrMight:3339 call SetButtonAdventure3340 exx3341 ld hl,SkillInLevelUpSlot23342 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3343 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13344 exx3345 ld a,r3346 and 13347 jp z,SetButtonWizzardry3348 jp SetButtonMight3350SetSkillButton: 3351 inc b 3352 ld a,b3353 exx3354 ld (hl),a 3355 exx3356 ld a,c3357 exx3358 ld (bc),a3359 push de3360 exx3361 pop de3362 ld bc,63363 ldir3364 ret3366CheckAmountOfExpertSkills_Wizzardry:3367 ld b,0 3368 ld a,24 3369 call SearchExpertSkill3370 ld a,27 3371 call SearchExpertSkill3372 ld a,30 3373 call SearchExpertSkill3374 ld a,33 3375 call SearchExpertSkill3376 ret3378CheckAmountOfExpertSkills_Adventure:3379 ld b,0 3380 ld a,15 3381 call SearchExpertSkill3382 ld a,18 3383 call SearchExpertSkill3384 ld a,21 3385 call SearchExpertSkill3386 ret3390SetButtonWizzardry:3391 call IsItPossibleToLevelOrSetAWizzardrySkill?3392 jp c,SetButtonAdventure 3394 call CheckAmountOfExpertSkills_Wizzardry3395 ld a,b3396 cp 43397 jp z,SetButtonAdventure 3399 ld a,r3400 and 33401 jr z,.Intelligence3402 dec a3403 jr z,.Sorcery3404 dec a3405 jr z,.Wisdom3407 .Necromancy:3408 call IsItPossibleToLevelOrSetNecromancy?3409 jr c,.Wisdom 3411 ld b,31 3412 call CheckSkillAvailable 3413 jr c,.Wisdom 3414 ld hl,ButtonNecromancy3415 jp SetSkillButton3417 .Wisdom:3418 call IsItPossibleToLevelOrSetWisdom?3419 jr c,.Sorcery 3421 ld b,28 3422 call CheckSkillAvailable 3423 jr c,.Sorcery 3424 ld hl,ButtonWisdom3425 jp SetSkillButton3427 .Sorcery:3428 call IsItPossibleToLevelOrSetSorcery?3429 jr c,.Intelligence 3431 ld b,25 3432 call CheckSkillAvailable 3433 jr c,.Intelligence 3434 ld hl,ButtonSorcery3435 jp SetSkillButton3437 .Intelligence: 3438 call IsItPossibleToLevelOrSetIntelligence?3439 jr c,.Necromancy 3441 ld b,22 3442 call CheckSkillAvailable 3443 jr c,.Necromancy 3444 ld hl,ButtonIntelligence3445 jp SetSkillButton34473448SetButtonAdventure:3449 call IsItPossibleToLevelOrSetAnAdventureSkill?3450 jp c,SetButtonMight 3452 call CheckAmountOfExpertSkills_Adventure3453 ld a,b3454 cp 33455 jp z,SetButtonMight 3457 ld a,r3458 and 33459 jr z,.Estates3460 dec a3461 jr z,.Learning3462 dec a3463 jr z,.Logistics3465 .Learning:3466 call IsItPossibleToLevelOrSetLearning?3467 jr c,.Logistics 3469 ld b,16 3470 call CheckSkillAvailable 3471 jr c,.Logistics 3472 ld hl,ButtonLearning3473 jp SetSkillButton3475 .Logistics:3476 call IsItPossibleToLevelOrSetLogistics?3477 jr c,.Estates 3479 ld b,19 3480 call CheckSkillAvailable 3481 jr c,.Estates 3482 ld hl,ButtonLogistics3483 jp SetSkillButton3484 3485 .Estates:3486 call IsItPossibleToLevelOrSetEstates?3487 jr c,.Learning 3489 ld b,13 3490 call CheckSkillAvailable 3491 jr c,.Learning 3492 ld hl,ButtonEstates3493 jp SetSkillButton3496CheckAmountOfExpertSkills_Might:3497 ld b,0 3498 ld a,03 3499 call SearchExpertSkill3500 ld a,06 3501 call SearchExpertSkill3502 ld a,09 3503 call SearchExpertSkill3504 ld a,12 3505 call SearchExpertSkill3506 ret3508SearchExpertSkill:3509 cp (ix+HeroSkills+0) 3510 jr z,.ExpertSkillFound3511 cp (ix+HeroSkills+1) 3512 jr z,.ExpertSkillFound3513 cp (ix+HeroSkills+2) 3514 jr z,.ExpertSkillFound3515 cp (ix+HeroSkills+3) 3516 jr z,.ExpertSkillFound3517 cp (ix+HeroSkills+4) 3518 jr z,.ExpertSkillFound3519 cp (ix+HeroSkills+5) 3520 jr z,.ExpertSkillFound3521 ret3522 .ExpertSkillFound:3523 inc b3524 ret35263527IsItPossibleToLevelOrSetAMightSkill?: 3528 xor a3529 call CheckSkill 3530 ld a,1 3531 call CheckSkill 3532 ld a,2 3533 call CheckSkill 3535 ld a,4 3536 call CheckSkill 3537 ld a,5 3538 call CheckSkill 3540 ld a,7 3541 call CheckSkill 3542 ld a,8 3543 call CheckSkill 3545 ld a,10 3546 call CheckSkill 3547 ld a,11 3548 call CheckSkill 3550 scf3551 ret35533554IsItPossibleToLevelOrSetAnAdventureSkill?: 3555 xor a3556 call CheckSkill 3557 ld a,13 3558 call CheckSkill 3559 ld a,14 3560 call CheckSkill 3562 ld a,16 3563 call CheckSkill 3564 ld a,17 3565 call CheckSkill 3567 ld a,19 3568 call CheckSkill 3569 ld a,20 3570 call CheckSkill 3572 scf3573 ret35753576IsItPossibleToLevelOrSetAWizzardrySkill?: 3577 xor a3578 call CheckSkill 3579 ld a,22 3580 call CheckSkill 3581 ld a,23 3582 call CheckSkill 3584 ld a,25 3585 call CheckSkill 3586 ld a,26 3587 call CheckSkill 3589 ld a,28 3590 call CheckSkill 3591 ld a,29 3592 call CheckSkill 3594 ld a,31 3595 call CheckSkill 3596 ld a,32 3597 call CheckSkill 3599 scf3600 ret3601 3602IsItPossibleToLevelOrSetNecromancy?:3603 xor a3604 call CheckSkill 3605 ld a,31 3606 call CheckSkill 3607 ld a,32 3608 call CheckSkill 3610 scf3611 ret3613IsItPossibleToLevelOrSetWisdom?:3614 xor a3615 call CheckSkill 3616 ld a,28 3617 call CheckSkill 3618 ld a,29 3619 call CheckSkill 3621 scf3622 ret3624IsItPossibleToLevelOrSetSorcery?:3625 xor a3626 call CheckSkill 3627 ld a,25 3628 call CheckSkill 3629 ld a,26 3630 call CheckSkill 3632 scf3633 ret3635IsItPossibleToLevelOrSetIntelligence?:3636 xor a3637 call CheckSkill 3638 ld a,22 3639 call CheckSkill 3640 ld a,23 3641 call CheckSkill 3643 scf3644 ret3646IsItPossibleToLevelOrSetLogistics?:3647 xor a3648 call CheckSkill 3649 ld a,19 3650 call CheckSkill 3651 ld a,20 3652 call CheckSkill 3654 scf3655 ret3657IsItPossibleToLevelOrSetLearning?:3658 xor a3659 call CheckSkill 3660 ld a,16 3661 call CheckSkill 3662 ld a,17 3663 call CheckSkill 3665 scf3666 ret3668IsItPossibleToLevelOrSetEstates?:3669 xor a3670 call CheckSkill 3671 ld a,13 3672 call CheckSkill 3673 ld a,14 3674 call CheckSkill 3676 scf3677 ret3679IsItPossibleToLevelOrSetResistance?:3680 xor a3681 call CheckSkill 3682 ld a,10 3683 call CheckSkill 3684 ld a,11 3685 call CheckSkill 3687 scf3688 ret3690IsItPossibleToLevelOrSetArmourer?:3691 xor a3692 call CheckSkill 3693 ld a,7 3694 call CheckSkill 3695 ld a,8 3696 call CheckSkill 3698 scf3699 ret3701IsItPossibleToLevelOrSetOffence?:3702 xor a3703 call CheckSkill 3704 ld a,4 3705 call CheckSkill 3706 ld a,5 3707 call CheckSkill 3709 scf3710 ret3712IsItPossibleToLevelOrSetArchery?:3713 xor a3714 call CheckSkill 3715 ld a,1 3716 call CheckSkill 3717 ld a,2 3718 call CheckSkill 3720 scf3721 ret3723CheckSkill:3724 cp (ix+HeroSkills+0) 3725 jr z,.SkillFound3726 cp (ix+HeroSkills+1) 3727 jr z,.SkillFound3728 cp (ix+HeroSkills+2) 3729 jr z,.SkillFound3730 cp (ix+HeroSkills+3) 3731 jr z,.SkillFound3732 cp (ix+HeroSkills+4) 3733 jr z,.SkillFound3734 cp (ix+HeroSkills+5) 3735 jr z,.SkillFound3736 ret3737 .SkillFound:3738 pop bc 3739 ret37413742SetButtonMight:3743 call IsItPossibleToLevelOrSetAMightSkill?3744 jp c,SetButtonWizzardry 3745 3746 call CheckAmountOfExpertSkills_Might3747 ld a,b3748 cp 43749 jp z,SetButtonWizzardry 3750 3751 ld a,r3752 and 33753 jr z,.Archery3754 dec a3755 jr z,.Offence3756 dec a3757 jr z,.Armourer3759 .Resistance:3760 call IsItPossibleToLevelOrSetResistance?3761 jr c,.Armourer 3763 ld b,10 3764 call CheckSkillAvailable 3765 jr c,.Armourer 3766 ld hl,ButtonResistance3767 jp SetSkillButton3769 .Armourer:3770 call IsItPossibleToLevelOrSetArmourer?3771 jr c,.Offence 3772 3773 ld b,07 3774 call CheckSkillAvailable 3775 jr c,.Offence 3776 ld hl,ButtonArmourer3777 jp SetSkillButton3779 .Offence:3780 call IsItPossibleToLevelOrSetOffence?3781 jr c,.Archery 3783 ld b,04 3784 call CheckSkillAvailable 3785 jr c,.Archery 3786 ld hl,ButtonOffence3787 jp SetSkillButton3788 3789 .Archery:3790 call IsItPossibleToLevelOrSetArchery?3791 jr c,.Resistance 3793 ld b,01 3794 call CheckSkillAvailable 3795 jr c,.Resistance 3796 ld hl,ButtonArchery3797 jp SetSkillButton38003801ButtonArchery: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 1283802ButtonOffence: dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 1283803ButtonArmourer: dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (066*128) + (060/2) - 1283804ButtonResistance: dw $4000 + (000*128) + (090/2) - 128 | dw $4000 + (033*128) + (090/2) - 128 | dw $4000 + (066*128) + (090/2) - 12838053806ButtonEstates: dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (066*128) + (120/2) - 1283807ButtonLearning: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (033*128) + (150/2) - 128 | dw $4000 + (066*128) + (150/2) - 1283808ButtonLogistics: dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (066*128) + (180/2) - 12838093810ButtonIntelligence:dw $4000 + (000*128) + (210/2) - 128 | dw $4000 + (033*128) + (210/2) - 128 | dw $4000 + (066*128) + (210/2) - 1283811ButtonSorcery: dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (030/2) - 128 | dw $4000 + (099*128) + (060/2) - 1283812ButtonWisdom: dw $4000 + (099*128) + (090/2) - 128 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (150/2) - 1283813ButtonNecromancy: dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (210/2) - 128 | dw $4000 + (132*128) + (000/2) - 1283815CheckSkillAvailable:3816 3817 ld a,(ix+HeroSkills+0) 3818 ld c,1 3819 cp b3820 ret z3821 ld a,(ix+HeroSkills+1) 3822 ld c,2 3823 cp b3824 ret z3825 ld a,(ix+HeroSkills+2) 3826 ld c,3 3827 cp b3828 ret z3829 ld a,(ix+HeroSkills+3) 3830 ld c,4 3831 cp b3832 ret z3833 ld a,(ix+HeroSkills+4) 3834 ld c,5 3835 cp b3836 ret z3837 ld a,(ix+HeroSkills+5) 3838 ld c,6 3839 cp b3840 ret z3841 3842 inc b3843 ld a,(ix+HeroSkills+0) 3844 ld c,1 3845 cp b3846 ret z3847 ld a,(ix+HeroSkills+1) 3848 ld c,2 3849 cp b3850 ret z3851 ld a,(ix+HeroSkills+2) 3852 ld c,3 3853 cp b3854 ret z3855 ld a,(ix+HeroSkills+3) 3856 ld c,4 3857 cp b3858 ret z3859 ld a,(ix+HeroSkills+4) 3860 ld c,5 3861 cp b3862 ret z3863 ld a,(ix+HeroSkills+5) 3864 ld c,6 3865 cp b3866 ret z3867 3868 inc b3869 ld a,(ix+HeroSkills+0) 3870 cp b3871 jr z,.ExpertSkillAlreadyLearned3872 ld a,(ix+HeroSkills+1) 3873 cp b3874 jr z,.ExpertSkillAlreadyLearned3875 ld a,(ix+HeroSkills+2) 3876 cp b3877 jr z,.ExpertSkillAlreadyLearned3878 ld a,(ix+HeroSkills+3) 3879 cp b3880 jr z,.ExpertSkillAlreadyLearned3881 ld a,(ix+HeroSkills+4) 3882 cp b3883 jr z,.ExpertSkillAlreadyLearned3884 ld a,(ix+HeroSkills+5) 3885 cp b3886 jr z,.ExpertSkillAlreadyLearned3887 dec b3888 dec b3889 dec b3890 ld c,7 3891 or a 3892 ret3894 .ExpertSkillAlreadyLearned:3895 scf3896 ret3899390639113919LevelUpButtonTableGfxBlock: db SecondarySkillsButtonsBlock3920LevelUpButtonTableAmountOfButtons: db 33921LevelUpButtonTable: 3924 db %0100 0011 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 3925 3926 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 3927 3928 db %1100 0011 | dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1283930.Button1Ytop: equ 1373931.Button1YBottom: equ .Button1Ytop + 0193932.Button1XLeft: equ 1563933.Button1XRight: equ .Button1XLeft + 0203935.Button2Ytop: equ 1113936.Button2YBottom: equ .Button2Ytop + 0333937.Button2XLeft: equ 0623938.Button2XRight: equ .Button2XLeft + 0303940.Button3Ytop: equ 1113941.Button3YBottom: equ .Button3Ytop + 0333942.Button3XLeft: equ 1123943.Button3XRight: equ .Button3XLeft + 0303945SetLevelUpHeroIcon:3946 ld ix,(plxcurrentheroAddress) 3947 ld l,(ix+HeroSpecificInfo+0) 3948 ld h,(ix+HeroSpecificInfo+1)3949 push hl3950 pop ix3951 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3952 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3953 ld bc,$40003954 xor a3955 sbc hl,bc3956 ld de,$0000 + (034*128) + (094/2) - 1283957 ld bc,NXAndNY16x30HeroIcon3958 ld a,Hero16x30PortraitsBlock 3959 jp CopyRamToVramCorrectedCastleOverview 3961TextLevelUp2:3962 db "has gained a level",2553963TextLevelUp3:3964 db "level",2553965TextLevelUp5a:3966 db "  Attack + 1",2553967TextLevelUp5b:3968 db "  Defense + 1",2553969TextLevelUp5c:3970 db " Knowledge + 1",2553971TextLevelUp5d:3972 db "Spell Power + 1",2553973TextLevelUp6:3974 db "or",2553975 3976CenterHeroNameHasGainedALevel:3977 ld d,0 3978 push hl3979 .loop:3980 ld a,(hl)3981 cp 2553982 jr z,.EndNameFound3983 inc d3984 inc hl3985 dec b3986 dec b3987 jr .loop3988 .EndNameFound:3989 pop hl3990 ret3991 3992SetLevelUpText:3993 call SetCastleOverViewFontPage0Y212 3995 ld ix,(plxcurrentheroAddress) 3997 ld b,032+(17*2) 3998 ld c,022+00 3999 ld l,(ix+HeroSpecificInfo+0) 4000 ld h,(ix+HeroSpecificInfo+1)4001 call CenterHeroNameHasGainedALevel4002 call SetText 4004 ld a,(PutLetter+dx) 4005 add a,54006 4007 ld b,a 4008 ld c,022+00 4009 ld hl,TextLevelUp24010 call SetText 4012 4013 ld b,073-00 4014 ld c,071+00 4015 ld hl,TextLevelUp34016 call SetText 4018 ld a,(ix+HeroLevel) 4019 ld l,a4020 ld h,04021 ld b,094-00 4022 ld c,071+00 4023 call SetNumber16BitCastle4024 4025 ld l,(ix+HeroSpecificInfo+0) 4026 ld h,(ix+HeroSpecificInfo+1)4027 ld de,HeroInfoClass4028 add hl,de4030 ld a,(PutLetter+dx) 4031 add a,54032 ld b,a 4033 ld c,071+00 4034 call SetText 4036 call SetPrimairySkillLevelUpInA4037 or a4038 ld hl,TextLevelUp5a 4039 jr z,.PrimairySkillUpFound4040 dec a4041 ld hl,TextLevelUp5b 4042 jr z,.PrimairySkillUpFound4043 dec a4044 ld hl,TextLevelUp5c 4045 jr z,.PrimairySkillUpFound4046 ld hl,TextLevelUp5d 4047 .PrimairySkillUpFound: 4048 ld b,072+00 4049 ld c,102+00 4050 call SetText 4052 ld b,099+00 4053 ld c,125+00 4054 ld hl,TextLevelUp64055 call SetText 4057 ld a,(SkillInLevelUpSlot1)4058 ld l,a4059 ld h,04060 add hl,hl 4061 push hl4062 pop bc4063 add hl,hl 4064 add hl,hl 4065 push hl4066 pop de4067 add hl,hl 4068 add hl,de 4069 add hl,bc 4070 ld de,SkillTextEmpty4071 add hl,de4073 ld a,(SkillInLevelUpSlot1)4074 ld b,a4075 ld a,(SkillInLevelUpSlot2)4076 cp b4077 ld b,(062+112)/2 4078 jp z,.SkillsAreTheSame4079 4080 ld b,062+00 4081 ld c,145+00 4082 call SetText 4084 ld a,(SkillInLevelUpSlot2)4085 ld l,a4086 ld h,04087 add hl,hl 4088 push hl4089 pop bc4090 add hl,hl 4091 add hl,hl 4092 push hl4093 pop de4094 add hl,hl 4095 add hl,de 4096 add hl,bc 4097 ld de,SkillTextEmpty4098 add hl,de4099 ld b,112+00 4101 .SkillsAreTheSame:4102 ld c,145+00 4103 call SetText 4104 ret4106SkillTextEmpty:4107 db "            ",254 4108 db "            ",2554109SkillTextArcheryBasic:4110 db "Basic       ",254 4111 db "Archery     ",2554112SkillTextArcheryAdvanced:4113 db "Advanced    ",2544114 db "Archery     ",2554115SkillTextArcheryExpert:4116 db "Expert      ",2544117 db "Archery     ",2554118SkillTextOffenceBasic:4119 db "Basic       ",254 4120 db "Offence     ",2554121SkillTextOffenceAdvanced:4122 db "Advanced    ",2544123 db "Offence     ",2554124SkillTextOffenceExpert:4125 db "Expert      ",2544126 db "Offence     ",2554127SkillTextArmourerBasic:4128 db "Basic       ",254 4129 db "Armorer     ",2554130SkillTextArmourerAdvanced:4131 db "Advanced    ",2544132 db "Armorer     ",2554133SkillTextArmourerExpert:4134 db "Expert      ",2544135 db "Armorer     ",2554136SkillTextresistanceBasic:4137 db "Basic       ",254 4138 db "Resistance  ",2554139SkillTextresistanceAdvanced:4140 db "Advanced    ",2544141 db "Resistance  ",2554142SkillTextresistanceExpert:4143 db "Expert      ",2544144 db "Resistance  ",2554145SkillTextestatesBasic:4146 db "Basic       ",254 4147 db "Estates     ",2554148SkillTextestatesAdvanced:4149 db "Advanced    ",2544150 db "Estates     ",2554151SkillTextestatesExpert:4152 db "Expert      ",2544153 db "Estates     ",2554154SkillTextlearningBasic:4155 db "Basic       ",254 4156 db "Learning    ",2554157SkillTextlearningAdvanced:4158 db "Advanced    ",2544159 db "Learning    ",2554160SkillTextlearningExpert:4161 db "Expert      ",2544162 db "Learning    ",2554163SkillTextlogisticsBasic:4164 db "Basic       ",254 4165 db "Logistics   ",2554166SkillTextlogisticsAdvanced:4167 db "Advanced    ",2544168 db "Logistics   ",2554169SkillTextlogisticsExpert:4170 db "Expert      ",2544171 db "Logistics   ",2554172SkillTextintelligenceBasic:4173 db "Basic       ",254 4174 db "Intelligence",2554175SkillTextintelligenceAdvanced:4176 db "Advanced    ",2544177 db "Intelligence",2554178SkillTextintelligenceExpert:4179 db "Expert      ",2544180 db "Intelligence",2554181SkillTextsorceryBasic:4182 db "Basic       ",254 4183 db "Sorcery     ",2554184SkillTextsorceryAdvanced:4185 db "Advanced    ",2544186 db "Sorcery     ",2554187SkillTextsorceryExpert:4188 db "Expert      ",2544189 db "Sorcery     ",2554190SkillTextwisdomBasic:4191 db "Basic       ",254 4192 db "Wisdom      ",2554193SkillTextwisdomAdvanced:4194 db "Advanced    ",2544195 db "Wisdom      ",2554196SkillTextwisdomExpert:4197 db "Expert      ",2544198 db "Wisdom      ",2554199SkillTextnecromancyBasic:4200 db "Basic       ",254 4201 db "Necromancy  ",2554202SkillTextnecromancyAdvanced:4203 db "Advanced    ",2544204 db "Necromancy  ",2554205SkillTextnecromancyExpert:4206 db "Expert      ",2544207 db "Necromancy  ",2554209SetLevelUpGraphics:4210 ld hl,$4000 + (000*128) + (000/2) - 128 4211 ld de,$0000 + (015*128) + (022/2) - 1284212 ld bc,$0000 + (173*256) + (160/2)4213 ld a,LevelUpBlock 4214 jp CopyRamToVramCorrectedCastleOverview 4216SetPrimairySkillUpIcon:4217 call SetPrimairySkillLevelUpInA4218 or a 4219 ld hl,$4000 + (132*128) + (090/2) - 128 4220 jr z,.PrimairySkillUpFound4221 dec a 4222 ld hl,$4000 + (132*128) + (106/2) - 128 4223 jr z,.PrimairySkillUpFound4224 dec a 4225 ld hl,$4000 + (132*128) + (122/2) - 128 4226 jr z,.PrimairySkillUpFound4227 ld hl,$4000 + (132*128) + (138/2) - 128 4228 .PrimairySkillUpFound: 4230 ld de,$0000 + (081*128) + (094/2) - 1284231 ld bc,$0000 + (016*256) + (016/2)4232 ld a,SecondarySkillsButtonsBlock 4233 jp CopyRamToVramCorrectedCastleOverview 4235IncreasePrimairySkill:4236 ld a,34237 ld (SetHeroArmyAndStatusInHud?),a4239 call SetPrimairySkillLevelUpInA4240 or a 4241 jr z,.AttackUp4242 dec a 4243 jr z,.DefenseUp4244 dec a 4245 jr z,.KnowledgeUp4247 .SpellDamageUp: 4248 inc (ix+HeroStatSpellDamage)4249 ret4250 .KnowledgeUp:4251 inc (ix+HeroStatKnowledge)4252 ret4253 .DefenseUp:4254 inc (ix+HeroStatDefense)4255 ret4256 .AttackUp:4257 inc (ix+HeroStatAttack)4258 ret4260PrimairySkillLevelUpMight:4261 db 0,1,0,1,0,1,2,34262PrimairySkillLevelUpAdventure:4263 db 0,1,2,3,0,1,2,34264PrimairySkillLevelUpWizzardry:4265 db 2,3,2,3,2,3,0,14267SetPrimairySkillLevelUpInA:4268 ld ix,(plxcurrentheroAddress) 4270 ld a,(ix+HeroSkills+0) 4272 cp 134273 ld hl,PrimairySkillLevelUpMight4274 jp c,.ClassFound4275 cp 224276 ld hl,PrimairySkillLevelUpAdventure4277 jp c,.ClassFound4278 ld hl,PrimairySkillLevelUpWizzardry4279 .ClassFound:4281 ld a,(framecounter)4282 and 74283 ld d,04284 ld e,a4285 add hl,de4286 ld a,(hl)4287 ret4294DisplayChestCode:4295call ScreenOn4296 ld a,255 4297 ld (PreviousButtonClicked),a 4298 ld ix,GenericButtonTable4299 ld (PreviousButtonClickedIX),ix4301 call SetChestButtons4302 4303 call SetChestGraphics 4304 call SetChestText4305 call SwapAndSetPage 4306 call SetChestGraphics 4307 call SetChestText4309 .engine: 4310 call SwapAndSetPage 4311 call PopulateControls 43134322 4323 ld ix,GenericButtonTable4324 call CheckButtonMouseInteractionGenericButtons4326 call .CheckButtonClicked 4330 4331 ld ix,(PreviousButtonClickedIX) 4332 ld a,(ix+GenericButtonStatus)4333 push af4334 ld a,(PreviousButtonClicked)4335 cp 2554336 jr z,.EndMarkButton 4337 ld (ix+GenericButtonStatus),%1010 00114338 .EndMarkButton:4339 4342 ld ix,GenericButtonTable4343 call SetGenericButtons 4346 4347 pop af4348 ld ix,(PreviousButtonClickedIX) 4349 ld (ix+GenericButtonStatus),a4350 43564358 halt4359 jp .engine4361 .CheckButtonClicked:4362 ret nc4363 ld a,%1100 00114364 ld (GenericButtonTable),a 4366 ld a,b4367 cp 3 4368 jr z,.VButton4369 ld (PreviousButtonClicked),a4370 ld (PreviousButtonClickedIX),ix4371 cp 2 4372 jr z,.MoneyButton4373 4374 .XPButton: 4375 ret4377 .MoneyButton:4378 ret4379 4380 .VButton:4381 pop af 4382 ld a,(PreviousButtonClicked)4383 cp 2 4384 jr z,.AddMoney4386 .AddXp:4387 ld ix,(plxcurrentheroAddress) 4389 ld a,(BigChest?)4390 or a4391 ld hl,750 4392 jr z,.SetAmountOfXp 4393 ld hl,1000 4394 .SetAmountOfXp:43974398 call SetChestText.AddXPBoostFromLearning 4399 4401 ld e,(ix+HeroXp+0)4402 ld d,(ix+HeroXp+1)4403 add hl,de4404 ret c4405 ld (ix+HeroXp+0),l4406 ld (ix+HeroXp+1),h4407 ret4409 .AddMoney:4410 call SetResourcesCurrentPlayerinIX 4411 4412 ld a,(BigChest?)4413 or a4414 ld de,1000 4415 jr z,.SetAmountOfGold 4416 ld de,1500 4417 .SetAmountOfGold: 4418 4419 ld l,(ix+0)4420 ld h,(ix+1)4421 add hl,de4422 ret c4423 ld (ix+0),l4424 ld (ix+1),h4425 ld a,34426 ld (SetResources?),a 4427 ret 4429SetChestButtons:4430 ld hl,ChestButtonTable-24431 ld de,GenericButtonTable-24432 ld bc,2+(GenericButtonTableLenghtPerButton*03)4433 ldir4434 ret4436ChestButtonTableGfxBlock: db PlayerStartTurnBlock4437ChestButtonTableAmountOfButtons: db 34438ChestButtonTable: 4441 db %0100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4442 4443 db %1100 0011 | dw $4000 + (000*128) + (184/2) - 128 | dw $4000 + (032*128) + (184/2) - 128 | dw $4000 + (064*128) + (184/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 4444 4445 db %1100 0011 | dw $4000 + (000*128) + (216/2) - 128 | dw $4000 + (032*128) + (216/2) - 128 | dw $4000 + (064*128) + (216/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1284447.Button1Ytop: equ 1574448.Button1YBottom: equ .Button1Ytop + 0194449.Button1XLeft: equ 1644450.Button1XRight: equ .Button1XLeft + 0204452.Button2Ytop: equ 1374453.Button2YBottom: equ .Button2Ytop + 0324454.Button2XLeft: equ 0584455.Button2XRight: equ .Button2XLeft + 0324457.Button3Ytop: equ 1374458.Button3YBottom: equ .Button3Ytop + 0324459.Button3XLeft: equ 1164460.Button3XRight: equ .Button3XLeft + 0324463TextChest1:4464 db "Chest",2554465TextChest2:4466 db "Having scoured the land you stumble",2544467 db "upon hidden treasure: The choice lies",2544468 db "between claiming the gold or bestowing",2544469 db "it upon peasants for enlightenment.",2554470TextChest3:4471 db "Which do you choose ?",2554472TextChest4:4473 db "or",2554475 4476SetChestText:4477 call SetCastleOverViewFontPage0Y212 4479 ld b,093+00 4480 ld c,022+00 4481 ld hl,TextChest14482 call SetText 4484 ld b,025+00 4485 ld c,032+00 4486 ld hl,TextChest24487 call SetText 4489 ld b,061+00 4490 ld c,130+00 4491 ld hl,TextChest34492 call SetText 4494 ld b,097+00 4495 ld c,151+00 4496 ld hl,TextChest44497 call SetText 4499 ld a,(BigChest?)4500 or a4501 ld hl,1000 4502 jr z,.SetAmountOfGold 4503 ld hl,1500 4504 .SetAmountOfGold:4505 ld b,065+00 4506 ld c,171+00 4507 call SetNumber16BitCastle4509 ld a,(BigChest?)4510 or a4511 ld hl,750 4512 jr z,.SetAmountOfXp 4513 ld hl,1000 4514 .SetAmountOfXp:4516 ld ix,(plxcurrentheroAddress) 4517 call .AddXPBoostFromLearning 4518 4520 4521 ld b,121+00 4522 ld c,171+00 4523 call SetNumber16BitCastle4524 ret4528.AddXPBoostFromLearning: 4529 ld a,(ix+HeroSkills+0)4530 call .CheckSkillLearning4531 ld a,(ix+HeroSkills+1)4532 call .CheckSkillLearning4533 ld a,(ix+HeroSkills+2)4534 call .CheckSkillLearning4535 ld a,(ix+HeroSkills+3)4536 call .CheckSkillLearning4537 ld a,(ix+HeroSkills+4)4538 call .CheckSkillLearning4539 ld a,(ix+HeroSkills+5)4540 call .CheckSkillLearning4541 ret4543 .CheckSkillLearning:4544 cp 16 4545 jr z,.BasicLearningFound4546 cp 17 4547 jr z,.AdvancedLearningFound4548 cp 18 4549 jr z,.ExpertLearningFound4550 ret4552 .BasicLearningFound:4553 ld de,10 4554 jp .ApplyPercentBasedBoost4556 .AdvancedLearningFound:4557 ld de,5 4558 jp .ApplyPercentBasedBoost4560 .ExpertLearningFound:4561 ld de,10 4562 call .ApplyPercentBasedBoost4563 add hl,bc 4564 add hl,bc 4565 ret4567.ApplyPercentBasedBoost:4568 push hl 4569 4570 push hl4571 pop bc45724573 call DivideBCbyDE 4575 pop hl4576 add hl,bc 4577 ret4580SetChestGraphics:4581 ld hl,$4000 + (000*128) + (000/2) - 128 4582 ld de,$0000 + (015*128) + (016/2) - 1284583 ld bc,$0000 + (168*256) + (174/2)4584 ld a,ChestBlock 4585 call CopyRamToVramCorrectedCastleOverview 4587 ld a,(BigChest?)4588 or a4589 ret nz 4591 ld hl,$4000 + (000*128) + (174/2) - 128 4592 ld de,$0000 + (064*128) + (074/2) - 1284593 ld bc,$0000 + (062*256) + (058/2)4594 ld a,ChestBlock 4595 jp CopyRamToVramCorrectedCastleOverview 4598DisplayLearningStoneCOde:4599 call SetScrollVButton4600 4601 call SetLearningStoneGraphics 4602 call SetLearningStoneText4603 call SwapAndSetPage 4604 call SetLearningStoneGraphics 4605 call SetLearningStoneText4607 ld ix,(plxcurrentheroAddress) 4608 ld hl,10004609 call .AddXPBoostFromLearning 4611 ld e,(ix+HeroXp+0)4612 ld d,(ix+HeroXp+1)4613 add hl,de4614 jp c,DisplayScrollCode.engine4615 ld (ix+HeroXp+0),l4616 ld (ix+HeroXp+1),h4617 jp DisplayScrollCode.engine4619.AddXPBoostFromLearning: 4620 ld a,(ix+HeroSkills+0)4621 call .CheckSkillLearning4622 ld a,(ix+HeroSkills+1)4623 call .CheckSkillLearning4624 ld a,(ix+HeroSkills+2)4625 call .CheckSkillLearning4626 ld a,(ix+HeroSkills+3)4627 call .CheckSkillLearning4628 ld a,(ix+HeroSkills+4)4629 call .CheckSkillLearning4630 ld a,(ix+HeroSkills+5)4631 call .CheckSkillLearning4632 ret4634 .CheckSkillLearning:4635 cp 16 4636 jr z,.BasicLearningFound4637 cp 17 4638 jr z,.AdvancedLearningFound4639 cp 18 4640 jr z,.ExpertLearningFound4641 ret4643 .BasicLearningFound:4644 ld de,10 4645 jp .ApplyPercentBasedBoost4647 .AdvancedLearningFound:4648 ld de,5 4649 jp .ApplyPercentBasedBoost4651 .ExpertLearningFound:4652 ld de,10 4653 call .ApplyPercentBasedBoost4654 add hl,bc 4655 add hl,bc 4656 ret4658.ApplyPercentBasedBoost:4659 push hl 4660 4661 push hl4662 pop bc46634664 call DivideBCbyDE 4666 pop hl4667 add hl,bc 4668 ret4670SetLearningStoneText:4671 call SetCastleOverViewFontPage0Y212 4673 ld b,077+00 4674 ld c,031+00 4675 ld hl,TextLearningStone14676 call SetText 4678 ld b,030+00 4679 ld c,114+00 4680 ld hl,TextLearningStone24681 call SetText 4683 ld b,083+00 4684 ld c,160+00 4685 ld hl,TextLearningStone34686 call SetText 4688 ld ix,(plxcurrentheroAddress) 4689 ld hl,10004690 call DisplayLearningStoneCOde.AddXPBoostFromLearning 4691 ld b,092+00 4692 ld c,160+00 4693 jp SetNumber16BitCastle4695TextLearningStone1:4696 db "Learning Stone",2554697TextLearningStone2:4698 db "Peering into the learning stone,",2544699 db "you are amazed to see answers to",2544700 db "questions you have pondered for",2544701 db "years. The stone abruptly stills,",2544702 db "but the realization washes over",2544703 db "you - you have learned much.",2554704TextLearningStone3:4705 db "+     XP",2554707DisplayScrollCode:4708 call SetScrollVButton4709 4710 call SetScrollGraphics 4711 call SetScrollText4712 call SwapAndSetPage 4713 call SetScrollGraphics 4714 call SetScrollText4716 .engine: 4717 call SwapAndSetPage 4718 call PopulateControls 47204725 ld a,(NewPrContr)4726 bit 5,a 4727 ret nz4729 4730 ld ix,GenericButtonTable4731 call CheckButtonMouseInteractionGenericButtons4733 call .CheckButtonClicked 4735 ld ix,GenericButtonTable4736 call SetGenericButtons 4738 call .CheckEndWindow 4740 halt4741 jp .engine4743 .CheckButtonClicked:4744 ret nc4745 pop af4746 ret4748 .CheckEndWindow:4749 ld a,(NewPrContr)4750 bit 4,a 4751 ret z4753 ld a,(spat+0) 4754 cp 024 4755 jr c,.Exit4756 cp 024+148 4757 jr nc,.Exit4758 4759 ld a,(spat+1) 4761 add a,064763 cp 020 4764 jr c,.Exit4765 cp 020+162 4766 ret c4768 .Exit:4769 pop af4770 ret4773SetScrollVButton:4774 ld hl,SetScrollVButtonTable-24775 ld de,GenericButtonTable-24776 ld bc,2+(GenericButtonTableLenghtPerButton*01)4777 ldir4778 ret4780SetScrollVButtonTableGfxBlock: db PlayerStartTurnBlock4781SetScrollVButtonTableAmountOfButtons: db 014782SetScrollVButtonTable: 4783 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4785.Button1Ytop: equ 1464786.Button1YBottom: equ .Button1Ytop + 0194787.Button1XLeft: equ 1544788.Button1XRight: equ .Button1XLeft + 0204791TextScroll1:4792 db "Ancient scroll discovered",2554793TextScroll2:4794 db "Unearthing an ancient scroll, you",2544795 db "imbue your spellbook with its",2544796 db "mystic spell.",2554797TextScroll3:4798 db "Hypnotism",2554800EarthSpellLevel1: db "  Earthbound   ",2554801EarthSpellLevel2: db "  Plate Armor  ",2554802EarthSpellLevel3: db " Resurrection  ",2554803EarthSpellLevel4: db "  Earthshock   ",2554804FireSpellLevel1: db "    Curse      ",2554805FireSpellLevel2: db " Blinding Fog  ",2554806FireSpellLevel3: db "   Implosion   ",2554807FireSpellLevel4: db "   Sunstrike   ",2554808AirSpellLevel1: db "    Haste      ",2554809AirSpellLevel2: db " ShieldBreaker ",2554810AirSpellLevel3: db "   Claw Back   ",2554811AirSpellLevel4: db " Spell Bubble  ",2554812WaterSpellLevel1: db "     Cure      ",2554813WaterSpellLevel2: db "   Ice Peak    ",2554814WaterSpellLevel3: db "   Hypnosis    ",2554815WaterSpellLevel4: db "   Frost Ring  ",2554816UniversalSpellLevel1: db " Magic Arrows  ",2554817UniversalSpellLevel2: db "    Frenzy     ",2554818UniversalSpellLevel3: db "   Teleport    ",2554819UniversalSpellLevel4: db "Primal Instinct",2554821 4822SetScrollText:4823 call SetCastleOverViewFontPage0Y212 4825 ld b,053+00 4826 ld c,031+00 4827 ld hl,TextScroll14828 call SetText 4830 ld b,030+00 4831 ld c,041+00 4832 ld hl,TextScroll24833 call SetText 4835 ld a,(SpellScrollInventoryNumber) 4836 sub a,464837 ld h,04838 ld l,a4839 ld de,164840 call MultiplyHlWithDE 4841 ld de,EarthSpellLevel14842 add hl,de4844 ld b,073+00 4845 ld c,147+00 4847 call SetText 4848 ret4851SetLearningStoneGraphics:4852 ld hl,$4000 + (000*128) + (000/2) - 1284853 ld de,$0000 + (024*128) + (020/2) - 1284854 ld bc,$0000 + (148*256) + (162/2)4855 ld a,ScrollBlock 4856 call CopyRamToVramCorrectedCastleOverview 4858 ld hl,$4000 + (139*128) + (044/2) - 1284859 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1284860 ld bc,$0000 + (060*256) + (104/2)4861 ld a,DefeatBlock 4862 call CopyRamToVramCorrectedCastleOverview 4864 ld hl,$4000 + (000*128) + (210/2) - 1284865 ld de,$0000 + ((024+19)*128) + ((020+60)/2) - 1284866 ld bc,$0000 + (068*256) + (038/2)4867 ld a,DefeatBlock 4868 jp CopyRamToVramCorrectedCastleOverview 4870SetScrollGraphics:4871 ld hl,$4000 + (000*128) + (000/2) - 1284872 ld de,$0000 + (024*128) + (020/2) - 1284873 ld bc,$0000 + (148*256) + (162/2)4874 ld a,ScrollBlock 4875 jp CopyRamToVramCorrectedCastleOverview 4877DisplayQuickTipsCode:4878 call SetQuickTipsButtons4879 halt4880 halt4881 halt4882 halt4883 call SetPlayerStartTurnGraphics 4885 if Promo?4886 ld a,(QuickTipsNumber)4887 inc a4888 cp LastQuickTip4889 jr nz,.EndCheckLastQuickTip4890 xor a4891 .EndCheckLastQuickTip:4892 ld (QuickTipsNumber),a4893 else4894 ld a,r4895 endif4897 push af 4898 call SetQuickTipsText4899 call SwapAndSetPage 4900 call SetPlayerStartTurnGraphics 4901 pop af 4902 call SetQuickTipsText4904 .engine: 4905 call SwapAndSetPage 4906 call PopulateControls 49084913 ld a,(NewPrContr)4914 bit 5,a 4915 ret nz4917 4918 ld ix,GenericButtonTable4919 call CheckButtonMouseInteractionGenericButtons4921 call .CheckButtonClicked 4923 ld ix,GenericButtonTable4924 call SetGenericButtons 4926 call .CheckEndWindow 4928 halt4929 jp .engine4931 .CheckButtonClicked:4932 ret nc4934 ld a,(DisplayQuickTips?)4935 xor 14936 ld (DisplayQuickTips?),a4937 ld hl,QuicktipsOff4938 jr z,.SetQuicktipsOnOff4939 ld hl,QuicktipsOn4940 .SetQuicktipsOnOff:4941 ld de,GenericButtonTable+14942 ld bc,64943 ldir4944 ret4946 .CheckEndWindow:4947 ld a,(NewPrContr)4948 bit 4,a 4949 ret z4951 ld a,(spat+0) 4952 cp 046 4953 jr c,.Exit4954 cp 046+095 4955 jr nc,.Exit4956 4957 ld a,(spat+1) 4959 add a,064961 cp 030 4962 jr c,.Exit4963 cp 030+144 4964 ret c4966 .Exit:4967 pop af4968 ret4970TextDidYouKnow: db "Did you know ?",2554971TextShowTipsAtStart: db "Show tips at start of turn ?",2554973ListOfQuickTips: 4974 dw TextQuickTip1 ,TextQuickTip2 ,TextQuickTip3 ,TextQuickTip4 ,TextQuickTip5 ,TextQuickTip6 ,TextQuickTip7 ,TextQuickTip8 ,TextQuickTip9 ,TextQuickTip104975 dw TextQuickTip11,TextQuickTip12,TextQuickTip13,TextQuickTip14,TextQuickTip15,TextQuickTip16,TextQuickTip17,TextQuickTip18,TextQuickTip19,TextQuickTip204976 dw TextQuickTip21,TextQuickTip22,TextQuickTip23,TextQuickTip24,TextQuickTip25,TextQuickTip26,TextQuickTip27,TextQuickTip28,TextQuickTip29,TextQuickTip304977 dw TextQuickTip31,TextQuickTip32,TextQuickTip33,TextQuickTip34,TextQuickTip35,TextQuickTip36,TextQuickTip37,TextQuickTip38,TextQuickTip39,TextQuickTip404978 dw TextQuickTip41,TextQuickTip42,TextQuickTip43,TextQuickTip44,TextQuickTip45,TextQuickTip46,TextQuickTip47,TextQuickTip48,TextQuickTip49,TextQuickTip504979 4980TotalAmountOfQuickTips: equ 504983SetQuickTipsText:49844985 push af 4987 ld b,069+00 4988 ld c,053+00 4989 ld hl,TextDidYouKnow4990 call SetText 4992 ld a,QuickTipsBlock 4993 call block34 4995 pop af 4996 ld b,04997 ld c,a4998 ld de,TotalAmountOfQuickTips 4999 call DivideBCbyDE 5000 add hl,hl5001 ld de,ListOfQuickTips5002 add hl,de5003 ld e,(hl)5004 inc hl5005 ld d,(hl)5006 ex de,hl50085010 ld b,038+00 5011 ld c,064+00 5012 call SetText 5014 ld b,047+00 5015 ld c,115+00 5016 ld hl,TextShowTipsAtStart 5017 call SetText 5019 ld a,CastleOverviewCodeBlock 5020 call block1234 5021 ret5023SetQuickTipsButtons:5024 ld hl,QuickTipsButtonTable-25025 ld de,GenericButtonTable-25026 ld bc,2+(GenericButtonTableLenghtPerButton*01)5027 ldir5028 ret5030QuicktipsOn: dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 1285031QuicktipsOff: dw $4000 + (057*128) + (158/2) - 128 | dw $4000 + (069*128) + (158/2) - 128 | dw $4000 + (081*128) + (158/2) - 1285033QuickTipsButtonTableGfxBlock: db PlayerStartTurnBlock5034QuickTipsButtonTableAmountOfButtons: db 015035QuickTipsButtonTable: 5036 db %1100 0011 | dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5038.Button1Ytop: equ 1225039.Button1YBottom: equ .Button1Ytop + 0125040.Button1XLeft: equ 0965041.Button1XRight: equ .Button1XLeft + 0145048CopyInactivePageToActivePage:5049 ld a,(activepage)5050 or a5051 ld hl,CopyPage1To05052 jp z,DoCopy5053 ld hl,CopyPage0To1PlayingField5054 jp DoCopy5055 5057DisplayStartOfTurnMessageCode:5058call ScreenOn5059 call SetPlayerStartTurnVButton5060 5061 call SetPlayerStartTurnGraphics 5062 call SetPlayerStartTurnText5063 call CopyInactivePageToActivePage50655069 .engine: 5070 call SwapAndSetPage 5071 call PopulateControls 50735078 ld a,(Controls)5079 bit 5,a 5080 ret nz5082 5083 ld ix,GenericButtonTable5084 call CheckButtonMouseInteractionGenericButtons5086 call .CheckButtonClicked 5088 ld ix,GenericButtonTable5089 call SetGenericButtons 50915093 halt5094 jp .engine5096 .CheckButtonClicked:5097 ret nc5098 pop af5099 ret5101TextDate: db "Day:   Week:   Month:",2555102TextPlayerTurn: db "Player  's turn",2555104SetPlayerStartTurnText:5105 call SetCastleOverViewFontPage0Y212 5107 ld b,056+00 5108 ld c,053+00 5109 ld hl,TextDate 5110 call SetText 5112 5113 ld bc,(Date)5114 ld de,7 5115 call DivideBCbyDE 5116 inc hl 5117 ld b,069+04 5118 ld c,053+00 5119 call SetNumber16BitCastle5121 5122 ld bc,(Date)5123 ld de,7 5124 call DivideBCbyDE 5126 5127 ld de,4 5128 call DivideBCbyDE 5129 push bc 5130 inc hl5131 ld b,104+04 5132 ld c,053+00 5133 call SetNumber16BitCastle5135 5136 pop hl5137 inc hl5138 ld b,142+04 5139 ld c,053+00 5140 call SetNumber16BitCastle5142 ld b,075+00 5143 ld c,091+00 5144 ld hl,TextPlayerTurn 5145 call SetText 5147 ld a,(whichplayernowplaying?)5148 ld h,05149 ld l,a5150 ld b,095+06 5151 ld c,091+00 5152 call SetNumber16BitCastle5153 ret5155SetPlayerStartTurnGraphics:5156 ld hl,$4000 + (000*128) + (000/2) - 1285157 ld de,$0000 + (046*128) + (030/2) - 1285158 ld bc,$0000 + (095*256) + (144/2)5159 ld a,PlayerStartTurnBlock 5160 jp CopyRamToVramCorrectedCastleOverview 5162SetPlayerStartTurnVButton:5163 ld hl,PlayerStartTurnVButtonTable-25164 ld de,GenericButtonTable-25165 ld bc,2+(GenericButtonTableLenghtPerButton*01)5166 ldir5167 ret5169PlayerStartTurnVButtonTableGfxBlock: db PlayerStartTurnBlock5170PlayerStartTurnVButtonTableAmountOfButtons: db 015171PlayerStartTurnVButtonTable: 5172 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5174.Button1Ytop: equ 1145175.Button1YBottom: equ .Button1Ytop + 0195176.Button1XLeft: equ 0925177.Button1XRight: equ .Button1XLeft + 0205182TradeMenuCode:5183 ld a,3 5185 ld (ChangeManaAndMovement?),a 5187 ld a,255 5188 ld (PreviousButtonClicked),a5189 ld (PreviousButton2Clicked),a5190 5191 ld ix,GenericButtonTable5192 ld (PreviousButtonClickedIX),ix5194 ld ix,GenericButtonTable25195 ld (PreviousButton2ClickedIX),ix5197 call SetTradingHeroesArmyButtons5198 call SetTradingHeroesInventoryButtons5199 call SetHeroArmyTransferGraphics 5200 call SetTradingHeroesAndArmy5201 call SetTradingHeroesInventoryIcons5202 call SwapAndSetPage 5203 call SetHeroArmyTransferGraphics 5204 call SetTradingHeroesAndArmy5205 call SetTradingHeroesInventoryIcons5207 .engine: 5208 call SwapAndSetPage 5209 call PopulateControls 52115216 ld a,(Controls)5217 bit 5,a 5218 ret nz5220 call UpdateHUd5221 ld a,15222 ld (GameStatus),a 5224 5225 ld ix,GenericButtonTable25226 call CheckButtonMouseInteractionGenericButtons5228 call .CheckButtonClickedTradingHeroesInventory 5230 5231 ld ix,(PreviousButton2ClickedIX) 5232 ld a,(ix+GenericButtonStatus)5233 push af5234 ld a,(PreviousButton2Clicked)5235 cp 2555236 jr z,.EndMarkButton2 5237 ld (ix+GenericButtonStatus),%1010 00115238 .EndMarkButton2:5239 5241 ld ix,GenericButtonTable25242 call SetGenericButtons 5244 5245 pop af5246 ld ix,(PreviousButton2ClickedIX) 5247 ld (ix+GenericButtonStatus),a5248 5253 5254 ld ix,GenericButtonTable 5255 call CheckButtonMouseInteractionGenericButtons5257 call .CheckButtonClickedTradingHeroesArmy 5259 5260 ld ix,(PreviousButtonClickedIX) 5261 ld a,(ix+GenericButtonStatus)5262 push af5263 ld a,(PreviousButtonClicked)5264 cp 2555265 jr z,.EndMarkButton 5266 ld (ix+GenericButtonStatus),%1001 00115267 .EndMarkButton:5268 5270 ld ix,GenericButtonTable5271 call SetGenericButtons 5273 5274 pop af5275 ld ix,(PreviousButtonClickedIX) 5276 ld (ix+GenericButtonStatus),a5277 5284 call CheckEndTradeMenuWindow 5286 halt5287 jp .engine5291.CheckButtonClickedTradingHeroesInventory:5292 ret nc 5294 ld a,2555295 ld (PreviousButtonClicked),a5298 5303 5304 ld a,(PreviousButton2Clicked)5305 cp b5306 jr nz,.EndCheck1b5307 ld a,2555308 ld (PreviousButton2Clicked),a5309 ret5310 .EndCheck1b:5312 5313 ld a,(PreviousButton2Clicked)5314 cp 255 5315 jr nz,.EndCheck2b5317 ld a,b 5318 cp 65319 jp nc,.CheckTradingHero 5321 .CheckHeroWeTradeWith:5322 push ix5323 ld ix,(HeroWeTradeWith) 5324 ld a,65325 sub a,b 5326 ld d,05327 ld e,a5328 add ix,de 5330 ld a,(ix+HeroInventory+9) 5331 cp 045 5332 pop ix5333 ret z5334 jp .HighlightNewButton2 5335 5336 .CheckTradingHero: 5337 push ix5338 ld ix,(plxcurrentheroAddress) 5339 ld a,125340 sub a,b 5341 ld d,05342 ld e,a5343 add ix,de 5345 ld a,(ix+HeroInventory+9) 5346 cp 045 5347 pop ix5348 ret z5349 jp .HighlightNewButton2 5350 .EndCheck2b:5352 5353 ld d,b 5354 call .SetInventorySlotOfHeroInIX 5355 ld c,(ix+HeroInventory+9) 5357 ld a,(PreviousButton2Clicked)5358 ld d,a5359 call .SetInventorySlotOfHeroInIX 5360 ld d,(ix+HeroInventory+9) 5361 ld (ix+HeroInventory+9),c 5362 ld c,d5364 ld d,b 5365 call .SetInventorySlotOfHeroInIX 5366 ld (ix+HeroInventory+9),c 5368 pop af5369 jp TradeMenuCode5371 .HighlightNewButton2:5372 ld a,b 5373 ld (PreviousButton2Clicked),a5374 ld (PreviousButton2ClickedIX),ix5375 ret5377.SetInventorySlotOfHeroInIX:5378 ld a,d5379 cp 75380 jp nc,.TradingHero 5382 .HeroWeTradeWith:5383 ld ix,(HeroWeTradeWith) 5384 ld a,65385 sub a,d5386 ld d,05387 ld e,a5388 add ix,de 5389 ret5390 5391 .TradingHero: 5392 ld ix,(plxcurrentheroAddress) 5393 ld a,125394 sub a,d5395 ld d,05396 ld e,a5397 add ix,de 5398 ret5401.CheckButtonClickedTradingHeroesArmy: 5402 ret nc 5404 ld a,2555405 ld (PreviousButton2Clicked),a5407 5412 5413 ld a,(PreviousButtonClicked)5414 cp b5415 jr nz,.EndCheck15416 ld a,2555417 ld (PreviousButtonClicked),a5418 ret5419 .EndCheck1:5421 5422 ld a,(PreviousButtonClicked)5423 cp 255 5424 jr nz,.EndCheck25426 ld a,b 5427 cp 85428 jp c,.CheckVisitingHero 5430 .CheckDefendingHero:5431 ld c,254 5432 push bc5433 push ix54345435 ld ix,(plxcurrentheroAddress) 5437 pop ix5438 pop bc54395441 ld a,b 5442 cp 145443 jp z,.HighlightNewButton 5445 ld b,a5446 ld a,135447 sub a,b 5448 ld d,05449 ld e,a5451 ld c,254 5452 push bc5453 push ix5454 push de54555456 ld ix,(plxcurrentheroAddress) 5457 pop de5459 add ix,de 5460 add ix,de 5461 add ix,de 5463 ld a,(ix+HeroUnits+1) 5464 cp (ix+HeroUnits+2) 5465 pop ix5466 pop bc5467 ret z5468 5469 jp .HighlightNewButton 5470 5471 .CheckVisitingHero:5472 ld c,002 5473 push bc5474 push ix54755476 ld ix,(HeroWeTradeWith) 5477 pop ix5478 pop bc54795481 ld a,b 5482 cp 075483 jp z,.HighlightNewButton 5485 ld b,a5486 ld a,065487 sub a,b 5488 ld d,05489 ld e,a5491 ld c,002 5492 push bc5493 push ix5494 push de54955496 ld ix,(HeroWeTradeWith) 5497 pop de5499 add ix,de 5500 add ix,de 5501 add ix,de 5503 ld a,(ix+HeroUnits+1) 5504 cp (ix+HeroUnits+2) 5505 pop ix5506 pop bc5507 ret z5508 5509 jp .HighlightNewButton 5510 .EndCheck2:5512 55145516552255245527553055325534 ld c,002 5535 push bc5536 push ix55375538 ld ix,(HeroWeTradeWith) 5540 pop ix5541 pop bc55425543 ld c,254 5544 push bc5545 push ix55465547 ld ix,(plxcurrentheroAddress) 5549 pop ix5550 pop bc55515553 ld a,(PreviousButtonClicked)5554 cp 014 5555 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero5556 ld a,b 5557 cp 7 5558 jr z,.SwapVisitingHeroWithDefendingHero5559 .EndCheckPreviousButtonClickedWasDefendingHero:5560 5561 ld a,(PreviousButtonClicked)5562 cp 007 5563 jr nz,.EndCheck45564 ld a,b 5565 cp 014 5566 jr nz,.EndCheck45568 .SwapVisitingHeroWithDefendingHero:5569 ld c,002 5570 push bc5571 push ix55725573 ld ix,(HeroWeTradeWith) 5575 push ix 5576 ld c,254 5578 ld ix,(plxcurrentheroAddress) 5580 ld (ix+HeroStatus),002 5581 pop ix 5582 ld (ix+HeroStatus),254 5583 pop ix5584 pop bc5585 pop af 5587 jp .ExitVisitingAndDefendingArmyRoutine5588 .EndCheck4:55905592 ld a,(PreviousButtonClicked)5593 cp 014 5594 jr nz,.EndCheck55595 ld a,b 5596 cp 7 5597 jr nz,.EndCheck55598 5599 .ChangeDefendingHeroIntoVisitingHero:5600 ld c,254 5601 push bc5602 push ix56035604 ld ix,(plxcurrentheroAddress) 5606 ld (ix+HeroStatus),002 5607 pop ix5608 pop bc 5609 pop af 5610 jp .ExitVisitingAndDefendingArmyRoutine5611 .EndCheck5:56135615 ld a,(PreviousButtonClicked)5616 cp 007 5617 jr nz,.EndCheck65618 ld a,b 5619 cp 014 5620 jr nz,.EndCheck65622 .ChangeVisitingHeroIntoDefendingHero:5623 ld c,002 5624 push bc5625 push ix56265627 ld ix,(HeroWeTradeWith) 5629 ld (ix+HeroStatus),254 5630 pop ix5631 pop bc 5632 pop af 5633 jp .ExitVisitingAndDefendingArmyRoutine5634 .EndCheck6:56365637 ld a,(PreviousButtonClicked) 5638 cp 014 5639 jr nz,.EndCheck75640 ld a,2555641 ld (PreviousButtonClicked),a5642 ret5643 .EndCheck7:56455646 ld a,(PreviousButtonClicked) 5647 cp 007 5648 jr nz,.EndCheck85649 ld a,2555650 ld (PreviousButtonClicked),a5651 ret5652 .EndCheck8:56545656 ld a,b 5657 cp 14 5658 jp z,.ResetButtons5659 cp 07 5660 jp z,.ResetButtons5661 ld a,(PreviousButtonClicked)5662 cp 14 5663 jp z,.ResetButtons5664 cp 07 5665 jp z,.ResetButtons56675669 ld a,b 5670 cp 85671 jp nc,.EndCheck95672 ld a,(PreviousButtonClicked)5673 cp 85674 jp nc,.EndCheck95676 ld a,065677 sub a,b 5678 ld d,05679 ld e,a5681 ld c,002 5682 push bc5683 push ix5684 push de56855686 ld ix,(HeroWeTradeWith) 5688 pop de5690 add ix,de 5691 add ix,de 5692 add ix,de 5694 ld a,(ix+HeroUnits+1) 5695 or (ix+HeroUnits+2) 5696 pop ix5697 pop bc5698 jp nz,.EndCheck95699 5701 5702 ld a,(PreviousButtonClicked)5703 ld c,a5704 ld a,065705 sub a,c5706 ld d,05707 ld e,a5709 ld c,002 5710 push bc5711 push ix5712 push de57135714 ld ix,(HeroWeTradeWith) 5716 pop de5718 add ix,de 5719 add ix,de 5720 add ix,de 5722 ld l,(ix+HeroUnits+1) 5723 ld h,(ix+HeroUnits+2) 5724 dec hl5725 ld (ix+HeroUnits+1),l 5726 ld (ix+HeroUnits+2),h 5727 ld l,(ix+HeroUnits+0) 5729 ld a,(ix+HeroUnits+1) 5730 or (ix+HeroUnits+2) 5731 jr nz,.EndCheckZero5732 ld (ix+HeroUnits+0),0 5733 .EndCheckZero:5734 pop ix5735 pop bc5736 5738 5739 ld a,065740 sub a,b 5741 ld d,05742 ld e,a5744 ld c,002 5745 push bc5746 push ix5747 push de57485749 ld ix,(HeroWeTradeWith) 5751 pop de5753 add ix,de 5754 add ix,de 5755 add ix,de 5757 ld (ix+HeroUnits+0),l 5758 ld (ix+HeroUnits+1),1 5759 ld (ix+HeroUnits+2),0 5760 pop ix5761 pop bc5762 5764 pop af 5765 jp .ExitVisitingAndDefendingArmyRoutine5766 .EndCheck9:57685769 ld a,b 5770 cp 85771 jp c,.EndCheck9b5772 ld a,(PreviousButtonClicked)5773 cp 85774 jp c,.EndCheck9b5776 ld a,135777 sub a,b 5778 ld d,05779 ld e,a5781 ld c,254 5782 push bc5783 push ix5784 push de57855786 ld ix,(plxcurrentheroAddress) 5788 pop de5790 add ix,de 5791 add ix,de 5792 add ix,de 5794 ld a,(ix+HeroUnits+1) 5795 or (ix+HeroUnits+2) 5796 pop ix5797 pop bc5798 jp nz,.EndCheck9b5799 5801 5802 ld a,(PreviousButtonClicked)5803 ld c,a5804 ld a,135805 sub a,c5806 ld d,05807 ld e,a5809 ld c,254 5810 push bc5811 push ix5812 push de58135814 ld ix,(plxcurrentheroAddress) 5816 pop de5818 add ix,de 5819 add ix,de 5820 add ix,de 5822 ld l,(ix+HeroUnits+1) 5823 ld h,(ix+HeroUnits+2) 5824 dec hl5825 ld (ix+HeroUnits+1),l 5826 ld (ix+HeroUnits+2),h 5827 ld l,(ix+HeroUnits+0) 5829 ld a,(ix+HeroUnits+1) 5830 or (ix+HeroUnits+2) 5831 jr nz,.EndCheckZerob5832 ld (ix+HeroUnits+0),0 5833 .EndCheckZerob:5834 pop ix5835 pop bc5836 5838 5839 ld a,135840 sub a,b 5841 ld d,05842 ld e,a5844 ld c,254 5845 push bc5846 push ix5847 push de58485849 ld ix,(plxcurrentheroAddress) 5851 pop de5853 add ix,de 5854 add ix,de 5855 add ix,de 5857 ld (ix+HeroUnits+0),l 5858 ld (ix+HeroUnits+1),1 5859 ld (ix+HeroUnits+2),0 5860 pop ix5861 pop bc5862 5864 pop af 5865 jp .ExitVisitingAndDefendingArmyRoutine5866 .EndCheck9b:58695871 ld a,b 5872 cp 85873 jp nc,.EndCheck105874 ld a,(PreviousButtonClicked)5875 cp 85876 jp nc,.EndCheck105878 ld a,065879 sub a,b 5880 ld d,05881 ld e,a5883 ld c,002 5884 push bc5885 push ix5886 push de58875888 ld ix,(HeroWeTradeWith) 5890 pop de5892 add ix,de 5893 add ix,de 5894 add ix,de 5896 ld l,(ix+HeroUnits+0) 5897 pop ix5898 pop bc5900 ld a,(PreviousButtonClicked)5901 ld c,a5902 ld a,065903 sub a,c 5904 ld d,05905 ld e,a5907 ld c,002 5908 push bc5909 push ix5910 push de59115912 ld ix,(HeroWeTradeWith) 5914 pop de5916 add ix,de 5917 add ix,de 5918 add ix,de 5920 ld a,(ix+HeroUnits+0) 5921 cp l5922 jp nz,.EndCheck10WithPopIXandBC5924 ld (ix+HeroUnits+0),0 5925 ld l,(ix+HeroUnits+1) 5926 ld h,(ix+HeroUnits+2) 5928 ld (ix+HeroUnits+1),0 5929 ld (ix+HeroUnits+2),0 5930 5931 5932 pop ix5933 pop bc5934 5935 ld a,065936 sub a,b 5937 ld d,05938 ld e,a5940 ld c,002 5941 push bc5942 push ix5943 push de59445945 ld ix,(HeroWeTradeWith) 5947 pop de5949 add ix,de 5950 add ix,de 5951 add ix,de 5953 ld e,(ix+HeroUnits+1) 5954 ld d,(ix+HeroUnits+2) 5955 add hl,de5957 ld (ix+HeroUnits+1),l 5958 ld (ix+HeroUnits+2),h 5960 pop ix5961 pop bc 5962 pop af 5963 jp .ExitVisitingAndDefendingArmyRoutine5965 .EndCheck10WithPopIXandBC:5966 pop ix5967 pop bc5968 .EndCheck10:59705971 ld a,b 5972 cp 85973 jp c,.EndCheck10b5974 ld a,(PreviousButtonClicked)5975 cp 85976 jp c,.EndCheck10b5978 ld a,135979 sub a,b 5980 ld d,05981 ld e,a5983 ld c,254 5984 push bc5985 push ix5986 push de59875988 ld ix,(plxcurrentheroAddress) 5990 pop de5992 add ix,de 5993 add ix,de 5994 add ix,de 5996 ld l,(ix+HeroUnits+0) 5997 pop ix5998 pop bc6001 ld a,(PreviousButtonClicked)6002 ld c,a6003 ld a,136004 sub a,c 6005 ld d,06006 ld e,a6008 ld c,254 6009 push bc6010 push ix6011 push de60126013 ld ix,(plxcurrentheroAddress) 6014 pop de6016 add ix,de 6017 add ix,de 6018 add ix,de 6020 ld a,(ix+HeroUnits+0) 6021 cp l6022 jp nz,.EndCheck10bWithPopIXandBC6024 ld (ix+HeroUnits+0),0 6025 ld l,(ix+HeroUnits+1) 6026 ld h,(ix+HeroUnits+2) 6028 ld (ix+HeroUnits+1),0 6029 ld (ix+HeroUnits+2),0 6030 6031 6032 pop ix6033 pop bc6034 6035 ld a,136036 sub a,b 6037 ld d,06038 ld e,a6040 ld c,254 6041 push bc6042 push ix6043 push de60446045 ld ix,(plxcurrentheroAddress) 6046 pop de6048 add ix,de 6049 add ix,de 6050 add ix,de 6052 ld e,(ix+HeroUnits+1) 6053 ld d,(ix+HeroUnits+2) 6054 add hl,de6056 ld (ix+HeroUnits+1),l 6057 ld (ix+HeroUnits+2),h 6059 pop ix6060 pop bc 6061 pop af 6062 jp .ExitVisitingAndDefendingArmyRoutine6064 .EndCheck10bWithPopIXandBC:6065 pop ix6066 pop bc6067 .EndCheck10b:60696072 ld c,002 6073 push bc6074 push ix60756076 ld ix,(HeroWeTradeWith) 6077 pop ix6078 pop bc60796081 ld c,254 6082 push bc6083 push ix60846085 ld ix,(plxcurrentheroAddress) 6086 pop ix6087 pop bc60886091 6092 ld c,002 6093 push bc6094 push ix60956096 ld ix,(HeroWeTradeWith) 6097 call CheckHeroHasAtLeast2CreatureSlotsFilled6098 pop ix6099 pop bc6100 jp c,.EndCheck11 6103 6104 ld a,b 6105 cp 86106 jp c,.EndCheck116108 6109 ld a,136110 sub a,b 6111 ld d,06112 ld e,a6114 ld c,254 6115 push bc6116 push ix6117 push de61186119 ld ix,(plxcurrentheroAddress) 6120 pop de6122 add ix,de 6123 add ix,de 6124 add ix,de 6126 ld a,(ix+HeroUnits+1) 6127 or (ix+HeroUnits+2) 6128 pop ix6129 pop bc6130 jp nz,.EndCheck116131 6133 6134 ld a,(PreviousButtonClicked)6135 ld c,a6136 ld a,066137 sub a,c6138 ld d,06139 ld e,a6141 ld c,002 6142 push bc6143 push ix6144 push de61456146 ld ix,(HeroWeTradeWith) 6147 pop de6149 add ix,de 6150 add ix,de 6151 add ix,de 6153 ld a,(ix+HeroUnits+0) 6154 ex af,af'6155 ld l,(ix+HeroUnits+1) 6156 ld h,(ix+HeroUnits+2) 6158 ld (ix+HeroUnits+0),0 6159 ld (ix+HeroUnits+1),0 6160 ld (ix+HeroUnits+2),0 6162 pop ix6163 pop bc6165 ld a,136166 sub a,b 6167 ld d,06168 ld e,a6170 ld c,254 6171 push bc6172 push ix6173 push de61746175 ld ix,(plxcurrentheroAddress) 6176 pop de6178 add ix,de 6179 add ix,de 6180 add ix,de 6182 ex af,af'6183 ld (ix+HeroUnits+0),a 6184 ld (ix+HeroUnits+1),l 6185 ld (ix+HeroUnits+2),h 6187 pop ix6188 pop bc6189 pop af 6190 jp .ExitVisitingAndDefendingArmyRoutine6191 6192 .EndCheck11:61946200 6201 ld c,254 6202 push bc6203 push ix62046205 ld ix,(plxcurrentheroAddress) 6206 call CheckHeroHasAtLeast2CreatureSlotsFilled6207 pop ix6208 pop bc6209 jp c,.EndCheck11b 6212 6213 ld a,b 6214 cp 86215 jp nc,.EndCheck11b6217 6218 ld a,066219 sub a,b 6220 ld d,06221 ld e,a6223 ld c,002 6224 push bc6225 push ix6226 push de62276228 ld ix,(HeroWeTradeWith) 6229 pop de6231 add ix,de 6232 add ix,de 6233 add ix,de 6235 ld a,(ix+HeroUnits+1) 6236 or (ix+HeroUnits+2) 6237 pop ix6238 pop bc6239 jp nz,.EndCheck11b6240 6242 6243 ld a,(PreviousButtonClicked)6244 ld c,a6245 ld a,136246 sub a,c6247 ld d,06248 ld e,a6250 ld c,254 6251 push bc6252 push ix6253 push de62546255 ld ix,(plxcurrentheroAddress) 6256 pop de6258 add ix,de 6259 add ix,de 6260 add ix,de 6262 ld a,(ix+HeroUnits+0) 6263 ex af,af'6264 ld l,(ix+HeroUnits+1) 6265 ld h,(ix+HeroUnits+2) 6267 ld (ix+HeroUnits+0),0 6268 ld (ix+HeroUnits+1),0 6269 ld (ix+HeroUnits+2),0 6271 pop ix6272 pop bc6274 ld a,066275 sub a,b 6276 ld d,06277 ld e,a6279 ld c,002 6280 push bc6281 push ix6282 push de62836284 ld ix,(HeroWeTradeWith) 6285 pop de6287 add ix,de 6288 add ix,de 6289 add ix,de 6291 ex af,af'6292 ld (ix+HeroUnits+0),a 6293 ld (ix+HeroUnits+1),l 6294 ld (ix+HeroUnits+2),h 6296 pop ix6297 pop bc6298 pop af 6299 jp .ExitVisitingAndDefendingArmyRoutine6300 6301 .EndCheck11b:63036305 6306 ld c,002 6307 push bc6308 push ix63096310 ld ix,(HeroWeTradeWith) 6311 call CheckHeroHasAtLeast2CreatureSlotsFilled6312 pop ix6313 pop bc6314 jp c,.EndCheck12 6317 6318 ld a,b 6319 cp 86320 jp c,.EndCheck126322 6323 ld a,(PreviousButtonClicked)6324 ld c,a6325 ld a,066326 sub a,c6327 ld d,06328 ld e,a6330 ld c,002 6331 push bc6332 push ix6333 push de63346335 ld ix,(HeroWeTradeWith) 6336 pop de6338 add ix,de 6339 add ix,de 6340 add ix,de 6341 ld l,(ix+HeroUnits+0) 6342 pop ix6343 pop bc6344 6345 ld a,136346 sub a,b 6347 ld d,06348 ld e,a6350 ld c,254 6351 push bc6352 push ix6353 push de63546355 ld ix,(plxcurrentheroAddress) 6356 pop de6358 add ix,de 6359 add ix,de 6360 add ix,de 6361 ld a,(ix+HeroUnits+0) 6362 cp l6363 pop ix6364 pop bc6365 jp nz,.EndCheck126366 6368 6369 ld a,(PreviousButtonClicked)6370 ld c,a6371 ld a,066372 sub a,c6373 ld d,06374 ld e,a6376 ld c,002 6377 push bc6378 push ix6379 push de63806381 ld ix,(HeroWeTradeWith) 6382 pop de6384 add ix,de 6385 add ix,de 6386 add ix,de 6388 ld l,(ix+HeroUnits+1) 6389 ld h,(ix+HeroUnits+2) 6391 ld (ix+HeroUnits+0),0 6392 ld (ix+HeroUnits+1),0 6393 ld (ix+HeroUnits+2),0 6395 pop ix6396 pop bc6398 ld a,136399 sub a,b 6400 ld d,06401 ld e,a6403 ld c,254 6404 push bc6405 push ix6406 push de64076408 ld ix,(plxcurrentheroAddress) 6409 pop de6411 add ix,de 6412 add ix,de 6413 add ix,de 6415 ld e,(ix+HeroUnits+1) 6416 ld d,(ix+HeroUnits+2) 6417 add hl,de6418 ld (ix+HeroUnits+1),l 6419 ld (ix+HeroUnits+2),h 6421 pop ix6422 pop bc6423 pop af 6424 jp .ExitVisitingAndDefendingArmyRoutine6425 6426 .EndCheck12:6427 64286430 ld c,254 6431 push bc6432 push ix64336434 ld ix,(plxcurrentheroAddress) 6435 call CheckHeroHasAtLeast2CreatureSlotsFilled6436 pop ix6437 pop bc6438 jp c,.EndCheck12b 6441 6442 ld a,b 6443 cp 86444 jp nc,.EndCheck12b6446 6447 ld a,(PreviousButtonClicked)6448 ld c,a6449 ld a,136450 sub a,c6451 ld d,06452 ld e,a6454 ld c,254 6455 push bc6456 push ix6457 push de64586459 ld ix,(plxcurrentheroAddress) 6460 pop de6462 add ix,de 6463 add ix,de 6464 add ix,de 6465 ld l,(ix+HeroUnits+0) 6466 pop ix6467 pop bc6468 6469 ld a,066470 sub a,b 6471 ld d,06472 ld e,a6474 ld c,002 6475 push bc6476 push ix6477 push de64786479 ld ix,(HeroWeTradeWith) 6480 pop de6482 add ix,de 6483 add ix,de 6484 add ix,de 6485 ld a,(ix+HeroUnits+0) 6486 cp l6487 pop ix6488 pop bc6489 jp nz,.EndCheck12b6490 6492 6493 ld a,(PreviousButtonClicked)6494 ld c,a6495 ld a,136496 sub a,c6497 ld d,06498 ld e,a6500 ld c,254 6501 push bc6502 push ix6503 push de65046505 ld ix,(plxcurrentheroAddress) 6506 pop de6508 add ix,de 6509 add ix,de 6510 add ix,de 6512 ld l,(ix+HeroUnits+1) 6513 ld h,(ix+HeroUnits+2) 6515 ld (ix+HeroUnits+0),0 6516 ld (ix+HeroUnits+1),0 6517 ld (ix+HeroUnits+2),0 6519 pop ix6520 pop bc6522 ld a,066523 sub a,b 6524 ld d,06525 ld e,a6527 ld c,002 6528 push bc6529 push ix6530 push de65316532 ld ix,(HeroWeTradeWith) 6533 pop de6535 add ix,de 6536 add ix,de 6537 add ix,de 6539 ld e,(ix+HeroUnits+1) 6540 ld d,(ix+HeroUnits+2) 6541 add hl,de6542 ld (ix+HeroUnits+1),l 6543 ld (ix+HeroUnits+2),h 6545 pop ix6546 pop bc6547 pop af 6548 jp .ExitVisitingAndDefendingArmyRoutine6549 6550 .EndCheck12b:65526554 6555 ld a,b 6556 call .SetHeroUnitsInIX6558 ld a,(ix+HeroUnits+0) 6559 ex af,af'6560 ld l,(ix+HeroUnits+1) 6561 ld h,(ix+HeroUnits+2) 6563 ld a,l6564 or h6565 jp z,.ResetButtons 6566 exx6568 ld a,(PreviousButtonClicked) 6569 call .SetHeroUnitsInIX6571 ld a,(ix+HeroUnits+0) 6572 ex af,af'6573 ld (ix+HeroUnits+0),a 6574 ld l,(ix+HeroUnits+1) 6575 ld h,(ix+HeroUnits+2) 6577 ld a,l6578 or h6579 jp z,.ResetButtons 6581 exx6582 ld (ix+HeroUnits+1),l 6583 ld (ix+HeroUnits+2),h 6585 ld a,b 6586 call .SetHeroUnitsInIX6587 ex af,af'6588 ld (ix+HeroUnits+0),a 6589 exx6590 ld (ix+HeroUnits+1),l 6591 ld (ix+HeroUnits+2),h 6592 6593 pop af 6594 jp .ExitVisitingAndDefendingArmyRoutine6595 6596 .EndCheck13:6597 6598 .HighlightNewButton:6599 ld a,b 6600 ld (PreviousButtonClicked),a6601 ld (PreviousButtonClickedIX),ix6602 ret6604 .ResetButtons:6605 ld a,255 6606 ld (PreviousButtonClicked),a6607 ret6609.SetHeroUnitsInIX:6610 cp 86611 jp c,.VisitingHero6613 .DefendingHero:6614 ld c,a6615 ld a,136616 sub a,c 6617 ld d,06618 ld e,a6620 ld c,254 6621 push bc6622 push de66236624 ld ix,(plxcurrentheroAddress) 6625 pop de6626 pop bc6627 add ix,de 6628 add ix,de 6629 add ix,de 6630 ret6631 6632 .VisitingHero: 6633 ld c,a6634 ld a,066635 sub a,c 6636 ld d,06637 ld e,a6639 ld c,002 6640 push bc6641 push de66426643 ld ix,(HeroWeTradeWith) 6644 pop de6645 pop bc6646 add ix,de 6647 add ix,de 6648 add ix,de 6649 ret6652.ExitVisitingAndDefendingArmyRoutine: 6653 ld a,255 6654 ld (PreviousButtonClicked),a6655 call SetCastleOverViewFontPage0Y212 6663 call SetHeroArmyTransferGraphics 6664 call SetTradingHeroesAndArmy6665 call SetTradingHeroesInventoryIcons6666 call SwapAndSetPage 6667 call SetHeroArmyTransferGraphics 6668 call SetTradingHeroesInventoryIcons6669 call SetTradingHeroesAndArmy6670 jp .engine6729CheckEndTradeMenuWindow:6730 ld a,(NewPrContr)6731 bit 4,a 6732 ret z6734 ld a,(spat+0) 6735 cp 030 6736 jr c,.Exit6737 cp 030+137 6738 jr nc,.Exit6739 6740 ld a,(spat+1) 6742 add a,066744 cp 024 6745 jr c,.Exit6746 cp 024+156 6747 ret c6749 .Exit:6750 pop af6751 ret6760SetTradingHeroesInventoryButtons:6761 ld hl,TradingHeroesInventoryButtonTable-26762 ld de,GenericButtonTable2-26763 ld bc,2+(GenericButtonTableLenghtPerButton*12)6764 ldir6766 .CreateInventoryListTradingHeroes: 6767 ld ix,(plxcurrentheroAddress)6768 ld de,9 6769 add ix,de6771 ld iy,GenericButtonTable2+16772 ld b,6 6773 call .loop6776 ld ix,(HeroWeTradeWith)6777 ld de,9 6778 add ix,de6780 ld b,6 6781 .loop:6782 ld a,(ix+HeroInventory) 6783 call SetTradingHeroesInventoryIcons.CheckScrollIcon 6784 add a,a 6785 add a,a 6786 ld d,06787 ld e,a6788 ld hl,SetTradingHeroesInventoryIcons.InventoryIconTableSYSX6789 add hl,de6790 ld a,(hl)6791 ld (iy+0),a6792 inc hl6793 ld a,(hl)6794 ld (iy+1),a6795 inc hl6796 ld a,(hl)6797 ld (iy+2),a6798 inc hl6799 ld a,(hl)6800 ld (iy+3),a6801 ld de,GenericButtonTableLenghtPerButton6802 add iy,de 6803 inc ix 6804 djnz .loop6805 ret6809TradingHeroesInventoryButtonTableGfxBlock: db InventoryGraphicsBlock6810TradingHeroesInventoryButtonTableAmountOfButtons: db 126811TradingHeroesInventoryButtonTable: 6813 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 6814 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 6815 db %1100 0011 | dw $4000 + (021*128) + (170/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1286816 db %1100 0011 | dw $4000 + (180*128) + (100/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1286817 db %1100 0011 | dw $4000 + (050*128) + (050/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1286818 db %1100 0011 | dw $4000 + (060*128) + (060/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1286820 db %1100 0011 | dw $4000 + (040*128) + (040/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1286821 db %1100 0011 | dw $4000 + (030*128) + (030/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1286822 db %1100 0011 | dw $4000 + (020*128) + (020/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1286823 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1286824 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1286825 db %1100 0011 | dw $4000 + (056*128) + (176/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1286827.Button1Ytop: equ 0776828.Button1YBottom: equ .Button1Ytop + 0206829.Button1XLeft: equ 0366830.Button1XRight: equ .Button1XLeft + 0206832.Button2Ytop: equ 0776833.Button2YBottom: equ .Button2Ytop + 0206834.Button2XLeft: equ 0586835.Button2XRight: equ .Button2XLeft + 0206837.Button3Ytop: equ 0776838.Button3YBottom: equ .Button3Ytop + 0206839.Button3XLeft: equ 0806840.Button3XRight: equ .Button3XLeft + 0206842.Button4Ytop: equ 0776843.Button4YBottom: equ .Button4Ytop + 0206844.Button4XLeft: equ 1026845.Button4XRight: equ .Button4XLeft + 0206847.Button5Ytop: equ 0776848.Button5YBottom: equ .Button5Ytop + 0206849.Button5XLeft: equ 1246850.Button5XRight: equ .Button5XLeft + 0206852.Button6Ytop: equ 0776853.Button6YBottom: equ .Button6Ytop + 0206854.Button6XLeft: equ 1466855.Button6XRight: equ .Button6XLeft + 0206859.Button7Ytop: equ 1416860.Button7YBottom: equ .Button7Ytop + 0206861.Button7XLeft: equ 0366862.Button7XRight: equ .Button7XLeft + 0206864.Button8Ytop: equ 1416865.Button8YBottom: equ .Button8Ytop + 0206866.Button8XLeft: equ 0586867.Button8XRight: equ .Button8XLeft + 0206869.Button9Ytop: equ 1416870.Button9YBottom: equ .Button9Ytop + 0206871.Button9XLeft: equ 0806872.Button9XRight: equ .Button9XLeft + 0206874.Button10Ytop: equ 1416875.Button10YBottom: equ .Button10Ytop + 0206876.Button10XLeft: equ 1026877.Button10XRight: equ .Button10XLeft + 0206879.Button11Ytop: equ 1416880.Button11YBottom: equ .Button11Ytop + 0206881.Button11XLeft: equ 1246882.Button11XRight: equ .Button11XLeft + 0206884.Button12Ytop: equ 1416885.Button12YBottom: equ .Button12Ytop + 0206886.Button12XLeft: equ 1466887.Button12XRight: equ .Button12XLeft + 0206896SetTradingHeroesArmyButtons:6897 ld hl,TradingHeroesButtonTable-26898 ld de,GenericButtonTable-26899 ld bc,2+(GenericButtonTableLenghtPerButton*14)6900 ldir6901 ret6903TradingHeroesButtonTableGfxBlock: db HeroArmyTransferGraphicsBlock6904TradingHeroesButtonTableAmountOfButtons: db 146905TradingHeroesButtonTable: 6907 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 6908 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 6909 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1286910 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1286911 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1286912 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1286913 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1286915 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1286916 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1286917 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1286918 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1286919 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1286920 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1286921 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1286923.Button1Ytop: equ 0386924.Button1YBottom: equ .Button1Ytop + 0346925.Button1XLeft: equ 0326926.Button1XRight: equ .Button1XLeft + 0206928.Button2Ytop: equ 0406929.Button2YBottom: equ .Button2Ytop + 0306930.Button2XLeft: equ 0546931.Button2XRight: equ .Button2XLeft + 0186933.Button3Ytop: equ 0406934.Button3YBottom: equ .Button3Ytop + 0306935.Button3XLeft: equ 0746936.Button3XRight: equ .Button3XLeft + 0186938.Button4Ytop: equ 0406939.Button4YBottom: equ .Button4Ytop + 0306940.Button4XLeft: equ 0946941.Button4XRight: equ .Button4XLeft + 0186943.Button5Ytop: equ 0406944.Button5YBottom: equ .Button5Ytop + 0306945.Button5XLeft: equ 1146946.Button5XRight: equ .Button5XLeft + 0186948.Button6Ytop: equ 0406949.Button6YBottom: equ .Button6Ytop + 0306950.Button6XLeft: equ 1346951.Button6XRight: equ .Button6XLeft + 0186953.Button7Ytop: equ 0406954.Button7YBottom: equ .Button7Ytop + 0306955.Button7XLeft: equ 1546956.Button7XRight: equ .Button7XLeft + 0186960.Button8Ytop: equ 1026961.Button8YBottom: equ .Button8Ytop + 0346962.Button8XLeft: equ 0326963.Button8XRight: equ .Button8XLeft + 0206965.Button9Ytop: equ 1046966.Button9YBottom: equ .Button9Ytop + 0306967.Button9XLeft: equ 0546968.Button9XRight: equ .Button9XLeft + 0186970.Button10Ytop: equ 1046971.Button10YBottom: equ .Button10Ytop + 0306972.Button10XLeft: equ 0746973.Button10XRight: equ .Button10XLeft + 0186975.Button11Ytop: equ 1046976.Button11YBottom: equ .Button11Ytop + 0306977.Button11XLeft: equ 0946978.Button11XRight: equ .Button11XLeft + 0186980.Button12Ytop: equ 1046981.Button12YBottom: equ .Button12Ytop + 0306982.Button12XLeft: equ 1146983.Button12XRight: equ .Button12XLeft + 0186985.Button13Ytop: equ 1046986.Button13YBottom: equ .Button13Ytop + 0306987.Button13XLeft: equ 1346988.Button13XRight: equ .Button13XLeft + 0186990.Button14Ytop: equ 1046991.Button14YBottom: equ .Button14Ytop + 0306992.Button14XLeft: equ 1546993.Button14XRight: equ .Button14XLeft + 0187014SetTradingHeroesAndArmy:7015 call SetCastleOverViewFontPage0Y212 7017 call SetActiveTradingHero7018 call SetHeroWhoGetsTradeWith7019 call SetActiveTradingHeroArmyAndAmount7020 call SetHeroWhoGetsTradeWithArmyAndAmount7021 ret7029SetActiveTradingHero: 7030 ld ix,(plxcurrentheroAddress)7031 ld de,$0000 + (040*128) + (034/2) - 1287032 jp DoSetVisitingOrDefendingHero7033 7034SetHeroWhoGetsTradeWith: 7035 ld ix,(HeroWeTradeWith) 7036 ld de,$0000 + (104*128) + (034/2) - 1287037 jp DoSetVisitingOrDefendingHero7043SetActiveTradingHeroArmyAndAmount:7044 ld ix,(plxcurrentheroAddress)7047 call .army70487051 .amount:7052 ld l,(ix+HeroUnits+01)7053 ld h,(ix+HeroUnits+02)7054 ld b,0567055 ld c,0617056 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07058 ld l,(ix+HeroUnits+04)7059 ld h,(ix+HeroUnits+05)7060 ld b,0767061 ld c,0617062 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07064 ld l,(ix+HeroUnits+07)7065 ld h,(ix+HeroUnits+08)7066 ld b,0967067 ld c,0617068 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07070 ld l,(ix+HeroUnits+10)7071 ld h,(ix+HeroUnits+11)7072 ld b,1167073 ld c,0617074 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07076 ld l,(ix+HeroUnits+13)7077 ld h,(ix+HeroUnits+14)7078 ld b,1367079 ld c,0617080 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07082 ld l,(ix+HeroUnits+16)7083 ld h,(ix+HeroUnits+17)7084 ld b,1567085 ld c,0617086 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07087 ret7089 .army:7090 ld a,(ix+HeroUnits+00) 7091 call SetDefendingHeroArmyAndAmount.SetSYSX 7092 ld de,.DYDXDefendingHeroUnit1 7093 call CopyTransparantImage 7095 ld a,(ix+HeroUnits+03) 7096 call SetDefendingHeroArmyAndAmount.SetSYSX 7097 ld de,.DYDXDefendingHeroUnit2 7098 call CopyTransparantImage 7100 ld a,(ix+HeroUnits+06) 7101 call SetDefendingHeroArmyAndAmount.SetSYSX 7102 ld de,.DYDXDefendingHeroUnit3 7103 call CopyTransparantImage 7105 ld a,(ix+HeroUnits+09) 7106 call SetDefendingHeroArmyAndAmount.SetSYSX 7107 ld de,.DYDXDefendingHeroUnit4 7108 call CopyTransparantImage 7110 ld a,(ix+HeroUnits+12) 7111 call SetDefendingHeroArmyAndAmount.SetSYSX 7112 ld de,.DYDXDefendingHeroUnit5 7113 call CopyTransparantImage 7115 ld a,(ix+HeroUnits+15) 7116 call SetDefendingHeroArmyAndAmount.SetSYSX 7117 ld de,.DYDXDefendingHeroUnit6 7118 call CopyTransparantImage 7119 ret7121.DYDXDefendingHeroUnit1: equ 044*256 + 056 7122.DYDXDefendingHeroUnit2: equ 044*256 + 076 7123.DYDXDefendingHeroUnit3: equ 044*256 + 096 7124.DYDXDefendingHeroUnit4: equ 044*256 + 116 7125.DYDXDefendingHeroUnit5: equ 044*256 + 136 7126.DYDXDefendingHeroUnit6: equ 044*256 + 156 7128SetHeroWhoGetsTradeWithArmyAndAmount:7129 ld ix,(HeroWeTradeWith)7132 call .army71337136 .amount:7137 ld l,(ix+HeroUnits+01)7138 ld h,(ix+HeroUnits+02)7139 ld b,0567140 ld c,1257141 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07143 ld l,(ix+HeroUnits+04)7144 ld h,(ix+HeroUnits+05)7145 ld b,0767146 ld c,1257147 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07149 ld l,(ix+HeroUnits+07)7150 ld h,(ix+HeroUnits+08)7151 ld b,0967152 ld c,1257153 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07155 ld l,(ix+HeroUnits+10)7156 ld h,(ix+HeroUnits+11)7157 ld b,1167158 ld c,1257159 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07161 ld l,(ix+HeroUnits+13)7162 ld h,(ix+HeroUnits+14)7163 ld b,1367164 ld c,1257165 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07167 ld l,(ix+HeroUnits+16)7168 ld h,(ix+HeroUnits+17)7169 ld b,1567170 ld c,1257171 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07172 ret7174 .army:7175 ld a,(ix+HeroUnits+00) 7176 call SetDefendingHeroArmyAndAmount.SetSYSX 7177 ld de,.DYDXVisitingHeroUnit1 7178 call CopyTransparantImage 7180 ld a,(ix+HeroUnits+03) 7181 call SetDefendingHeroArmyAndAmount.SetSYSX 7182 ld de,.DYDXVisitingHeroUnit2 7183 call CopyTransparantImage 7185 ld a,(ix+HeroUnits+06) 7186 call SetDefendingHeroArmyAndAmount.SetSYSX 7187 ld de,.DYDXVisitingHeroUnit3 7188 call CopyTransparantImage 7190 ld a,(ix+HeroUnits+09) 7191 call SetDefendingHeroArmyAndAmount.SetSYSX 7192 ld de,.DYDXVisitingHeroUnit4 7193 call CopyTransparantImage 7195 ld a,(ix+HeroUnits+12) 7196 call SetDefendingHeroArmyAndAmount.SetSYSX 7197 ld de,.DYDXVisitingHeroUnit5 7198 call CopyTransparantImage 7200 ld a,(ix+HeroUnits+15) 7201 call SetDefendingHeroArmyAndAmount.SetSYSX 7202 ld de,.DYDXVisitingHeroUnit6 7203 call CopyTransparantImage 7204 ret7206.DYDXVisitingHeroUnit1: equ 108*256 + 056 7207.DYDXVisitingHeroUnit2: equ 108*256 + 076 7208.DYDXVisitingHeroUnit3: equ 108*256 + 096 7209.DYDXVisitingHeroUnit4: equ 108*256 + 116 7210.DYDXVisitingHeroUnit5: equ 108*256 + 136 7211.DYDXVisitingHeroUnit6: equ 108*256 + 156 7241ExitVisitingAndDefendingArmyRoutine: 7242 ld a,255 7243 ld (PreviousButtonClicked),a7244 call SetCastleOverViewFontPage0Y212 7246 call SetVisitingAndDefendingHeroesAndArmyWindow 7247 call SetVisitingAndDefendingHeroesAndArmy7248 call SwapAndSetPage 7249 call SetVisitingAndDefendingHeroesAndArmyWindow 7250 call SetVisitingAndDefendingHeroesAndArmy7252 ld a,(AreWeInTavern1OrRecruit2?)7253 dec a7254 jp z,CastleOverviewTavernCode.engine7255 jp CastleOverviewRecruitCode.engine7258FirstLineintHeightCastleTavern: equ 1257259SecondLineintHeightCastleTavern: equ 16072617263SetCastleTavernInterruptHandler:7264 di7265 ld hl,CastleInterruptHandler 7266 ld ($38+1),hl 7267 ld a,$c3 7268 ld ($38),a7269 7270 ld a,(VDP_0) 7271 or 16 7272 ld (VDP_0),a 7273 out ($99),a7274 ld a,1287275 out ($99),a7277 ld a,FirstLineintHeightCastleTavern7278 ld (CurrentLineIntHeight),a7279 out ($99),a7280 ld a,19+128 7281 ei7282 out ($99),a 7283 ret7285CastleOverviewTavernCode:7286 call SetScreenOff7288 ld a,17289 ld (AreWeInTavern1OrRecruit2?),a7291 ld a,255 7292 ld (PreviousButtonClicked),a7293 ld ix,GenericButtonTable7294 ld (PreviousButtonClickedIX),ix7296 call SetTavernButtons7297 call SetDefendingAndVisitingHeroButtons7299 ld hl,InGamePalette7300 call SetPalette7302 xor a7303 ld (activepage),a 7304 7305 ld a,%1100 00117306 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 7307 xor a7308 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 7309 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 7310 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 7311 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 7312 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 7314 ld a,1327315 call SetExitButtonHeight7316 7317 call SetTavernGraphics 7318 call SetResourcesPlayer7319 call SetVisitingAndDefendingHeroesAndArmy7320 call SetTavernHeroes7322 ld hl,CopyPage1To07323 call docopy7325 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady7326 call docopy7328 call SetCastleTavernInterruptHandler7329 7330 .engine:7331 call SwapAndSetPage 7332 call PopulateControls 73347339 ld a,(Controls)7340 bit 5,a 7341 jp nz,CastleOverviewCode7343 7344 ld ix,CastleOverviewButtonTable 7345 call CheckButtonMouseInteractionCastle7347 ld ix,CastleOverviewButtonTable7348 call SetCastleButtons 7351 7352 ld ix,GenericButtonTable 7353 call CheckButtonMouseInteractionGenericButtons7355 call .CheckButtonClickedVisitingAndDefendingHeroesAndArmy 7357 7358 ld ix,(PreviousButtonClickedIX) 7359 ld a,(ix+GenericButtonStatus)7360 push af7361 ld a,(PreviousButtonClicked)7362 cp 2557363 jr z,.EndMarkButton 7364 ld (ix+GenericButtonStatus),%1001 00117365 .EndMarkButton:7366 7368 ld ix,GenericButtonTable7369 call SetGenericButtons 7371 7372 pop af7373 ld ix,(PreviousButtonClickedIX) 7374 ld (ix+GenericButtonStatus),a7375 7378 7380 7381 ld ix,GenericButtonTable2 7382 call CheckButtonMouseInteractionGenericButtons7383 call .CheckTavernButtonClicked 7385 ld ix,GenericButtonTable27386 call SetGenericButtons 7389 call WaitVblank7390 call SetScreenOn7391 jp .engine7393.CheckButtonClickedVisitingAndDefendingHeroesAndArmy: 7394 ret nc 7396 7401 7402 ld a,(PreviousButtonClicked)7403 cp b7404 jr nz,.EndCheck17405 ld a,2557406 ld (PreviousButtonClicked),a7407 ret7408 .EndCheck1:7410 7411 ld a,(PreviousButtonClicked)7412 cp 255 7413 jr nz,.EndCheck27415 ld a,b 7416 cp 87417 jp c,.CheckVisitingHero 7419 .CheckDefendingHero:7420 ld c,254 7421 push bc7422 push ix7423 call SetVisitingOrDefendingHeroInIX 7424 pop ix7425 pop bc7426 ret c 7428 ld a,b 7429 cp 147430 jp z,.HighlightNewButton 7432 ld b,a7433 ld a,137434 sub a,b 7435 ld d,07436 ld e,a7438 ld c,254 7439 push bc7440 push ix7441 push de7442 call SetVisitingOrDefendingHeroInIX 7443 pop de7445 add ix,de 7446 add ix,de 7447 add ix,de 7449 ld a,(ix+HeroUnits+1) 7450 cp (ix+HeroUnits+2) 7451 pop ix7452 pop bc7453 ret z7454 7455 jp .HighlightNewButton 7456 7457 .CheckVisitingHero:7458 ld c,002 7459 push bc7460 push ix7461 call SetVisitingOrDefendingHeroInIX 7462 pop ix7463 pop bc7464 ret c 7466 ld a,b 7467 cp 077468 jp z,.HighlightNewButton 7470 ld b,a7471 ld a,067472 sub a,b 7473 ld d,07474 ld e,a7476 ld c,002 7477 push bc7478 push ix7479 push de7480 call SetVisitingOrDefendingHeroInIX 7481 pop de7483 add ix,de 7484 add ix,de 7485 add ix,de 7487 ld a,(ix+HeroUnits+1) 7488 cp (ix+HeroUnits+2) 7489 pop ix7490 pop bc7491 ret z7492 7493 jp .HighlightNewButton 7494 .EndCheck2:7496 74987500750675087511751475167518 ld c,002 7519 push bc7520 push ix7521 call SetVisitingOrDefendingHeroInIX 7522 pop ix7523 pop bc7524 jr c,.EndCheck47525 ld c,254 7526 push bc7527 push ix7528 call SetVisitingOrDefendingHeroInIX 7529 pop ix7530 pop bc7531 jr c,.EndCheck47532 7533 ld a,(PreviousButtonClicked)7534 cp 014 7535 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero7536 ld a,b 7537 cp 7 7538 jr z,.SwapVisitingHeroWithDefendingHero7539 .EndCheckPreviousButtonClickedWasDefendingHero:7540 7541 ld a,(PreviousButtonClicked)7542 cp 007 7543 jr nz,.EndCheck47544 ld a,b 7545 cp 014 7546 jr nz,.EndCheck47548 .SwapVisitingHeroWithDefendingHero:7549 ld c,002 7550 push bc7551 push ix7552 call SetVisitingOrDefendingHeroInIX 7553 push ix 7554 ld c,254 7555 call SetVisitingOrDefendingHeroInIX 7556 ld (ix+HeroStatus),002 7557 pop ix 7558 ld (ix+HeroStatus),254 7559 pop ix7560 pop bc7561 pop af 7563 jp ExitVisitingAndDefendingArmyRoutine7564 .EndCheck4:75667568 ld a,(PreviousButtonClicked)7569 cp 014 7570 jr nz,.EndCheck57571 ld a,b 7572 cp 7 7573 jr nz,.EndCheck57574 7575 .ChangeDefendingHeroIntoVisitingHero:7576 ld c,254 7577 push bc7578 push ix7579 call SetVisitingOrDefendingHeroInIX 7580 ld (ix+HeroStatus),002 7581 pop ix7582 pop bc 7583 pop af 7584 jp ExitVisitingAndDefendingArmyRoutine7585 .EndCheck5:75877589 ld a,(PreviousButtonClicked)7590 cp 007 7591 jr nz,.EndCheck67592 ld a,b 7593 cp 014 7594 jr nz,.EndCheck67596 .ChangeVisitingHeroIntoDefendingHero:7597 ld c,002 7598 push bc7599 push ix7600 call SetVisitingOrDefendingHeroInIX 7601 ld (ix+HeroStatus),254 7602 pop ix7603 pop bc 7604 pop af 7605 jp ExitVisitingAndDefendingArmyRoutine7606 .EndCheck6:76087609 ld a,(PreviousButtonClicked) 7610 cp 014 7611 jr nz,.EndCheck77612 ld a,2557613 ld (PreviousButtonClicked),a7614 ret7615 .EndCheck7:76177618 ld a,(PreviousButtonClicked) 7619 cp 007 7620 jr nz,.EndCheck87621 ld a,2557622 ld (PreviousButtonClicked),a7623 ret7624 .EndCheck8:76267628 ld a,b 7629 cp 14 7630 jp z,.ResetButtons7631 cp 07 7632 jp z,.ResetButtons7633 ld a,(PreviousButtonClicked)7634 cp 14 7635 jp z,.ResetButtons7636 cp 07 7637 jp z,.ResetButtons76397642 ld a,b 7643 cp 87644 jp nc,.EndCheck97645 ld a,(PreviousButtonClicked)7646 cp 87647 jp nc,.EndCheck97649 ld a,067650 sub a,b 7651 ld d,07652 ld e,a7654 ld c,002 7655 push bc7656 push ix7657 push de7658 call SetVisitingOrDefendingHeroInIX 7659 pop de7661 add ix,de 7662 add ix,de 7663 add ix,de 7665 ld a,(ix+HeroUnits+1) 7666 or (ix+HeroUnits+2) 7667 pop ix7668 pop bc7669 jp nz,.EndCheck97670 7672 7673 ld a,(PreviousButtonClicked)7674 ld c,a7675 ld a,067676 sub a,c7677 ld d,07678 ld e,a7680 ld c,002 7681 push bc7682 push ix7683 push de7684 call SetVisitingOrDefendingHeroInIX 7685 pop de7687 add ix,de 7688 add ix,de 7689 add ix,de 7691 ld l,(ix+HeroUnits+1) 7692 ld h,(ix+HeroUnits+2) 7693 dec hl7694 ld (ix+HeroUnits+1),l 7695 ld (ix+HeroUnits+2),h 7696 ld l,(ix+HeroUnits+0) 7698 ld a,(ix+HeroUnits+1) 7699 or (ix+HeroUnits+2) 7700 jr nz,.EndCheckZero7701 ld (ix+HeroUnits+0),0 7702 .EndCheckZero:7703 pop ix7704 pop bc7705 7707 7708 ld a,067709 sub a,b 7710 ld d,07711 ld e,a7713 ld c,002 7714 push bc7715 push ix7716 push de7717 call SetVisitingOrDefendingHeroInIX 7718 pop de7720 add ix,de 7721 add ix,de 7722 add ix,de 7724 ld (ix+HeroUnits+0),l 7725 ld (ix+HeroUnits+1),1 7726 ld (ix+HeroUnits+2),0 7727 pop ix7728 pop bc7729 7731 pop af 7732 jp ExitVisitingAndDefendingArmyRoutine7733 .EndCheck9:77357736 ld a,b 7737 cp 87738 jp c,.EndCheck9b7739 ld a,(PreviousButtonClicked)7740 cp 87741 jp c,.EndCheck9b7743 ld a,137744 sub a,b 7745 ld d,07746 ld e,a7748 ld c,254 7749 push bc7750 push ix7751 push de7752 call SetVisitingOrDefendingHeroInIX 7753 pop de7755 add ix,de 7756 add ix,de 7757 add ix,de 7759 ld a,(ix+HeroUnits+1) 7760 or (ix+HeroUnits+2) 7761 pop ix7762 pop bc7763 jp nz,.EndCheck9b7764 7766 7767 ld a,(PreviousButtonClicked)7768 ld c,a7769 ld a,137770 sub a,c7771 ld d,07772 ld e,a7774 ld c,254 7775 push bc7776 push ix7777 push de7778 call SetVisitingOrDefendingHeroInIX 7779 pop de7781 add ix,de 7782 add ix,de 7783 add ix,de 7785 ld l,(ix+HeroUnits+1) 7786 ld h,(ix+HeroUnits+2) 7787 dec hl7788 ld (ix+HeroUnits+1),l 7789 ld (ix+HeroUnits+2),h 7790 ld l,(ix+HeroUnits+0) 7792 ld a,(ix+HeroUnits+1) 7793 or (ix+HeroUnits+2) 7794 jr nz,.EndCheckZerob7795 ld (ix+HeroUnits+0),0 7796 .EndCheckZerob:7797 pop ix7798 pop bc7799 7801 7802 ld a,137803 sub a,b 7804 ld d,07805 ld e,a7807 ld c,254 7808 push bc7809 push ix7810 push de7811 call SetVisitingOrDefendingHeroInIX 7812 pop de7814 add ix,de 7815 add ix,de 7816 add ix,de 7818 ld (ix+HeroUnits+0),l 7819 ld (ix+HeroUnits+1),1 7820 ld (ix+HeroUnits+2),0 7821 pop ix7822 pop bc7823 7825 pop af 7826 jp ExitVisitingAndDefendingArmyRoutine7827 .EndCheck9b:78307832 ld a,b 7833 cp 87834 jp nc,.EndCheck107835 ld a,(PreviousButtonClicked)7836 cp 87837 jp nc,.EndCheck107839 ld a,067840 sub a,b 7841 ld d,07842 ld e,a7844 ld c,002 7845 push bc7846 push ix7847 push de7848 call SetVisitingOrDefendingHeroInIX 7849 pop de7851 add ix,de 7852 add ix,de 7853 add ix,de 7855 ld l,(ix+HeroUnits+0) 7856 pop ix7857 pop bc7859 ld a,(PreviousButtonClicked)7860 ld c,a7861 ld a,067862 sub a,c 7863 ld d,07864 ld e,a7866 ld c,002 7867 push bc7868 push ix7869 push de7870 call SetVisitingOrDefendingHeroInIX 7871 pop de7873 add ix,de 7874 add ix,de 7875 add ix,de 7877 ld a,(ix+HeroUnits+0) 7878 cp l7879 jp nz,.EndCheck10WithPopIXandBC7881 ld (ix+HeroUnits+0),0 7882 ld l,(ix+HeroUnits+1) 7883 ld h,(ix+HeroUnits+2) 7885 ld (ix+HeroUnits+1),0 7886 ld (ix+HeroUnits+2),0 7887 7888 7889 pop ix7890 pop bc7891 7892 ld a,067893 sub a,b 7894 ld d,07895 ld e,a7897 ld c,002 7898 push bc7899 push ix7900 push de7901 call SetVisitingOrDefendingHeroInIX 7902 pop de7904 add ix,de 7905 add ix,de 7906 add ix,de 7908 ld e,(ix+HeroUnits+1) 7909 ld d,(ix+HeroUnits+2) 7910 add hl,de7912 ld (ix+HeroUnits+1),l 7913 ld (ix+HeroUnits+2),h 7915 pop ix7916 pop bc 7917 pop af 7918 jp ExitVisitingAndDefendingArmyRoutine7920 .EndCheck10WithPopIXandBC:7921 pop ix7922 pop bc7923 .EndCheck10:79257926 ld a,b 7927 cp 87928 jp c,.EndCheck10b7929 ld a,(PreviousButtonClicked)7930 cp 87931 jp c,.EndCheck10b7933 ld a,137934 sub a,b 7935 ld d,07936 ld e,a7938 ld c,254 7939 push bc7940 push ix7941 push de7942 call SetVisitingOrDefendingHeroInIX 7943 pop de7945 add ix,de 7946 add ix,de 7947 add ix,de 7949 ld l,(ix+HeroUnits+0) 7950 pop ix7951 pop bc7954 ld a,(PreviousButtonClicked)7955 ld c,a7956 ld a,137957 sub a,c 7958 ld d,07959 ld e,a7961 ld c,254 7962 push bc7963 push ix7964 push de7965 call SetVisitingOrDefendingHeroInIX 7966 pop de7968 add ix,de 7969 add ix,de 7970 add ix,de 7972 ld a,(ix+HeroUnits+0) 7973 cp l7974 jp nz,.EndCheck10bWithPopIXandBC7976 ld (ix+HeroUnits+0),0 7977 ld l,(ix+HeroUnits+1) 7978 ld h,(ix+HeroUnits+2) 7980 ld (ix+HeroUnits+1),0 7981 ld (ix+HeroUnits+2),0 7982 7983 7984 pop ix7985 pop bc7986 7987 ld a,137988 sub a,b 7989 ld d,07990 ld e,a7992 ld c,254 7993 push bc7994 push ix7995 push de7996 call SetVisitingOrDefendingHeroInIX 7997 pop de7999 add ix,de 8000 add ix,de 8001 add ix,de 8003 ld e,(ix+HeroUnits+1) 8004 ld d,(ix+HeroUnits+2) 8005 add hl,de8007 ld (ix+HeroUnits+1),l 8008 ld (ix+HeroUnits+2),h 8010 pop ix8011 pop bc 8012 pop af 8013 jp ExitVisitingAndDefendingArmyRoutine8015 .EndCheck10bWithPopIXandBC:8016 pop ix8017 pop bc8018 .EndCheck10b:80208023 ld c,002 8024 push bc8025 push ix8026 call SetVisitingOrDefendingHeroInIX 8027 pop ix8028 pop bc8029 jp c,.EndCheck12b8031 ld c,254 8032 push bc8033 push ix8034 call SetVisitingOrDefendingHeroInIX 8035 pop ix8036 pop bc8037 jp c,.EndCheck12b8038 8040 8041 ld c,002 8042 push bc8043 push ix8044 call SetVisitingOrDefendingHeroInIX 8045 call CheckHeroHasAtLeast2CreatureSlotsFilled8046 pop ix8047 pop bc8048 jp c,.EndCheck11 8051 8052 ld a,b 8053 cp 88054 jp c,.EndCheck118056 8057 ld a,138058 sub a,b 8059 ld d,08060 ld e,a8062 ld c,254 8063 push bc8064 push ix8065 push de8066 call SetVisitingOrDefendingHeroInIX 8067 pop de8069 add ix,de 8070 add ix,de 8071 add ix,de 8073 ld a,(ix+HeroUnits+1) 8074 or (ix+HeroUnits+2) 8075 pop ix8076 pop bc8077 jp nz,.EndCheck118078 8080 8081 ld a,(PreviousButtonClicked)8082 ld c,a8083 ld a,068084 sub a,c8085 ld d,08086 ld e,a8088 ld c,002 8089 push bc8090 push ix8091 push de8092 call SetVisitingOrDefendingHeroInIX 8093 pop de8095 add ix,de 8096 add ix,de 8097 add ix,de 8099 ld a,(ix+HeroUnits+0) 8100 ex af,af'8101 ld l,(ix+HeroUnits+1) 8102 ld h,(ix+HeroUnits+2) 8104 ld (ix+HeroUnits+0),0 8105 ld (ix+HeroUnits+1),0 8106 ld (ix+HeroUnits+2),0 8108 pop ix8109 pop bc8111 ld a,138112 sub a,b 8113 ld d,08114 ld e,a8116 ld c,254 8117 push bc8118 push ix8119 push de8120 call SetVisitingOrDefendingHeroInIX 8121 pop de8123 add ix,de 8124 add ix,de 8125 add ix,de 8127 ex af,af'8128 ld (ix+HeroUnits+0),a 8129 ld (ix+HeroUnits+1),l 8130 ld (ix+HeroUnits+2),h 8132 pop ix8133 pop bc8134 pop af 8135 jp ExitVisitingAndDefendingArmyRoutine8136 8137 .EndCheck11:81398141 ld c,254 8142 push bc8143 push ix8144 call SetVisitingOrDefendingHeroInIX 8145 call CheckHeroHasAtLeast2CreatureSlotsFilled8146 pop ix8147 pop bc8148 jp c,.EndCheck11b 8151 8152 ld a,b 8153 cp 88154 jp nc,.EndCheck11b8156 8157 ld a,068158 sub a,b 8159 ld d,08160 ld e,a8162 ld c,002 8163 push bc8164 push ix8165 push de8166 call SetVisitingOrDefendingHeroInIX 8167 pop de8169 add ix,de 8170 add ix,de 8171 add ix,de 8173 ld a,(ix+HeroUnits+1) 8174 or (ix+HeroUnits+2) 8175 pop ix8176 pop bc8177 jp nz,.EndCheck11b8178 8180 8181 ld a,(PreviousButtonClicked)8182 ld c,a8183 ld a,138184 sub a,c8185 ld d,08186 ld e,a8188 ld c,254 8189 push bc8190 push ix8191 push de8192 call SetVisitingOrDefendingHeroInIX 8193 pop de8195 add ix,de 8196 add ix,de 8197 add ix,de 8199 ld a,(ix+HeroUnits+0) 8200 ex af,af'8201 ld l,(ix+HeroUnits+1) 8202 ld h,(ix+HeroUnits+2) 8204 ld (ix+HeroUnits+0),0 8205 ld (ix+HeroUnits+1),0 8206 ld (ix+HeroUnits+2),0 8208 pop ix8209 pop bc8211 ld a,068212 sub a,b 8213 ld d,08214 ld e,a8216 ld c,002 8217 push bc8218 push ix8219 push de8220 call SetVisitingOrDefendingHeroInIX 8221 pop de8223 add ix,de 8224 add ix,de 8225 add ix,de 8227 ex af,af'8228 ld (ix+HeroUnits+0),a 8229 ld (ix+HeroUnits+1),l 8230 ld (ix+HeroUnits+2),h 8232 pop ix8233 pop bc8234 pop af 8235 jp ExitVisitingAndDefendingArmyRoutine8236 8237 .EndCheck11b:82398241 8242 ld c,002 8243 push bc8244 push ix8245 call SetVisitingOrDefendingHeroInIX 8246 call CheckHeroHasAtLeast2CreatureSlotsFilled8247 pop ix8248 pop bc8249 jp c,.EndCheck12 8252 8253 ld a,b 8254 cp 88255 jp c,.EndCheck128257 8258 ld a,(PreviousButtonClicked)8259 ld c,a8260 ld a,068261 sub a,c8262 ld d,08263 ld e,a8265 ld c,002 8266 push bc8267 push ix8268 push de8269 call SetVisitingOrDefendingHeroInIX 8270 pop de8272 add ix,de 8273 add ix,de 8274 add ix,de 8275 ld l,(ix+HeroUnits+0) 8276 pop ix8277 pop bc8278 8279 ld a,138280 sub a,b 8281 ld d,08282 ld e,a8284 ld c,254 8285 push bc8286 push ix8287 push de8288 call SetVisitingOrDefendingHeroInIX 8289 pop de8291 add ix,de 8292 add ix,de 8293 add ix,de 8294 ld a,(ix+HeroUnits+0) 8295 cp l8296 pop ix8297 pop bc8298 jp nz,.EndCheck128299 8301 8302 ld a,(PreviousButtonClicked)8303 ld c,a8304 ld a,068305 sub a,c8306 ld d,08307 ld e,a8309 ld c,002 8310 push bc8311 push ix8312 push de8313 call SetVisitingOrDefendingHeroInIX 8314 pop de8316 add ix,de 8317 add ix,de 8318 add ix,de 8320 ld l,(ix+HeroUnits+1) 8321 ld h,(ix+HeroUnits+2) 8323 ld (ix+HeroUnits+0),0 8324 ld (ix+HeroUnits+1),0 8325 ld (ix+HeroUnits+2),0 8327 pop ix8328 pop bc8330 ld a,138331 sub a,b 8332 ld d,08333 ld e,a8335 ld c,254 8336 push bc8337 push ix8338 push de8339 call SetVisitingOrDefendingHeroInIX 8340 pop de8342 add ix,de 8343 add ix,de 8344 add ix,de 8346 ld e,(ix+HeroUnits+1) 8347 ld d,(ix+HeroUnits+2) 8348 add hl,de8349 ld (ix+HeroUnits+1),l 8350 ld (ix+HeroUnits+2),h 8352 pop ix8353 pop bc8354 pop af 8355 jp ExitVisitingAndDefendingArmyRoutine8356 8357 .EndCheck12:8358 83598361 ld c,254 8362 push bc8363 push ix8364 call SetVisitingOrDefendingHeroInIX 8365 call CheckHeroHasAtLeast2CreatureSlotsFilled8366 pop ix8367 pop bc8368 jp c,.EndCheck12b 8371 8372 ld a,b 8373 cp 88374 jp nc,.EndCheck12b8376 8377 ld a,(PreviousButtonClicked)8378 ld c,a8379 ld a,138380 sub a,c8381 ld d,08382 ld e,a8384 ld c,254 8385 push bc8386 push ix8387 push de8388 call SetVisitingOrDefendingHeroInIX 8389 pop de8391 add ix,de 8392 add ix,de 8393 add ix,de 8394 ld l,(ix+HeroUnits+0) 8395 pop ix8396 pop bc8397 8398 ld a,068399 sub a,b 8400 ld d,08401 ld e,a8403 ld c,002 8404 push bc8405 push ix8406 push de8407 call SetVisitingOrDefendingHeroInIX 8408 pop de8410 add ix,de 8411 add ix,de 8412 add ix,de 8413 ld a,(ix+HeroUnits+0) 8414 cp l8415 pop ix8416 pop bc8417 jp nz,.EndCheck12b8418 8420 8421 ld a,(PreviousButtonClicked)8422 ld c,a8423 ld a,138424 sub a,c8425 ld d,08426 ld e,a8428 ld c,254 8429 push bc8430 push ix8431 push de8432 call SetVisitingOrDefendingHeroInIX 8433 pop de8435 add ix,de 8436 add ix,de 8437 add ix,de 8439 ld l,(ix+HeroUnits+1) 8440 ld h,(ix+HeroUnits+2) 8442 ld (ix+HeroUnits+0),0 8443 ld (ix+HeroUnits+1),0 8444 ld (ix+HeroUnits+2),0 8446 pop ix8447 pop bc8449 ld a,068450 sub a,b 8451 ld d,08452 ld e,a8454 ld c,002 8455 push bc8456 push ix8457 push de8458 call SetVisitingOrDefendingHeroInIX 8459 pop de8461 add ix,de 8462 add ix,de 8463 add ix,de 8465 ld e,(ix+HeroUnits+1) 8466 ld d,(ix+HeroUnits+2) 8467 add hl,de8468 ld (ix+HeroUnits+1),l 8469 ld (ix+HeroUnits+2),h 8471 pop ix8472 pop bc8473 pop af 8474 jp ExitVisitingAndDefendingArmyRoutine8475 8476 .EndCheck12b:84788481 8482 ld a,b 8483 cp 8 8484 jp c,.EndCheckbothSlotsClickedBelongToDefendingHero8485 ld a,(PreviousButtonClicked)8486 cp 88487 jp nc,.Swap8488 .EndCheckbothSlotsClickedBelongToDefendingHero:8490 8491 ld a,b 8492 cp 8 8493 jp nc,.EndCheckbothSlotsClickedBelongToVisitingHero8494 ld a,(PreviousButtonClicked)8495 cp 88496 jp c,.Swap8497 .EndCheckbothSlotsClickedBelongToVisitingHero:8499 8500 ld c,002 8501 push bc8502 push de8503 call SetVisitingOrDefendingHeroInIX 8504 pop de8505 pop bc8506 jp c,.ResetButtons 8507 8508 ld c,254 8509 push bc8510 push de8511 call SetVisitingOrDefendingHeroInIX 8512 pop de8513 pop bc8514 jp c,.ResetButtons 8521 .Swap:8522 ld a,b 8523 call .SetHeroUnitsInIX8525 ld a,(ix+HeroUnits+0) 8526 ex af,af'8527 ld l,(ix+HeroUnits+1) 8528 ld h,(ix+HeroUnits+2) 8530 ld a,l8531 or h8532 jp z,.ResetButtons 8533 exx8535 ld a,(PreviousButtonClicked) 8536 call .SetHeroUnitsInIX8538 ld a,(ix+HeroUnits+0) 8539 ex af,af'8540 ld (ix+HeroUnits+0),a 8541 ld l,(ix+HeroUnits+1) 8542 ld h,(ix+HeroUnits+2) 8544 ld a,l8545 or h8546 jp z,.ResetButtons 8548 exx8549 ld (ix+HeroUnits+1),l 8550 ld (ix+HeroUnits+2),h 8552 ld a,b 8553 call .SetHeroUnitsInIX8554 ex af,af'8555 ld (ix+HeroUnits+0),a 8556 exx8557 ld (ix+HeroUnits+1),l 8558 ld (ix+HeroUnits+2),h 8559 8560 pop af 8561 jp ExitVisitingAndDefendingArmyRoutine8562 8563 .EndCheck13:8564 8565 .HighlightNewButton:8566 ld a,b 8567 ld (PreviousButtonClicked),a8568 ld (PreviousButtonClickedIX),ix8569 ret8571 .ResetButtons:8572 ld a,255 8573 ld (PreviousButtonClicked),a8574 ret8576.SetHeroUnitsInIX:8577 cp 88578 jp c,.VisitingHero8580 .DefendingHero:8581 ld c,a8582 ld a,138583 sub a,c 8584 ld d,08585 ld e,a8587 ld c,254 8588 push bc8589 push de8590 call SetVisitingOrDefendingHeroInIX 8591 pop de8592 pop bc8593 add ix,de 8594 add ix,de 8595 add ix,de 8596 ret8597 8598 .VisitingHero: 8599 ld c,a8600 ld a,068601 sub a,c 8602 ld d,08603 ld e,a8605 ld c,002 8606 push bc8607 push de8608 call SetVisitingOrDefendingHeroInIX 8609 pop de8610 pop bc8611 add ix,de 8612 add ix,de 8613 add ix,de 8614 ret8622.CheckTavernButtonClicked: 8623 ret nc8625 ld a,002 8626 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8627 ld c,002 8628 push bc 8629 call SetVisitingOrDefendingHeroInIX 8630 pop bc 8631 jr c,.go 8633 ld a,254 8634 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8635 ld c,254 8636 push bc 8637 call SetVisitingOrDefendingHeroInIX 8638 pop bc 8639 ret nc 8640 .go:8642 ld a,b8643 cp 38644 jr z,.TavernButton1Pressed8645 cp 28646 jr z,.TavernButton2Pressed86478650 .TavernButton3Pressed:8651 push ix8652 call SetTavernHeroesTablePlayerinIX8653 ld a,(ix+TavernHero3) 8654 pop ix8655 call .SetHeroStats 8656 push ix8657 call SetTavernHeroesTablePlayerinIX8658 ld (ix+TavernHero3),000 8659 pop ix8660 jp .HeroRecruited8662 .TavernButton2Pressed:8663 push ix8664 call SetTavernHeroesTablePlayerinIX8665 ld a,(ix+TavernHero2) 8666 pop ix8667 call .SetHeroStats 8668 push ix8669 call SetTavernHeroesTablePlayerinIX8670 ld (ix+TavernHero2),000 8671 pop ix8672 jp .HeroRecruited8674 .TavernButton1Pressed:8675 push ix8676 call SetTavernHeroesTablePlayerinIX8677 ld a,(ix+TavernHero1) 8678 pop ix8679 call .SetHeroStats 8680 push ix8681 call SetTavernHeroesTablePlayerinIX8682 ld (ix+TavernHero1),000 8683 pop ix8684 jp .HeroRecruited8686 .HeroRecruited:8687 call SetResourcesPlayer8688 call SetVisitingAndDefendingHeroesAndArmy8689 call SetTavernHeroes8690 call SetTavernButtons8691 ld ix,GenericButtonTable28692 call SetGenericButtons 8694 call SwapAndSetPage 8696 call SetResourcesPlayer8697 call SetVisitingAndDefendingHeroesAndArmy8698 call SetTavernHeroes8699 call SetTavernButtons8700 ld ix,GenericButtonTable28701 call SetGenericButtons 8702 pop af 8703 jp CastleOverviewTavernCode.engine8705 .SetHeroStats: 8706 push af 8707 call .CheckIsHeroAHeroThatHasFled?8708 call SetEmptyHeroSlotForCurrentPlayerInIX8709 call .ClearHeroSlot 8710 call .SetYX 8711 pop af 8713 8714 ld b,a 8715 ld hl,HeroAddressesAdol-heroAddressesLenght8716 ld de,heroAddressesLenght 8717 .loop2:8718 add hl,de8719 djnz .loop28720 ld (ix+HeroSpecificInfo+0),l8721 ld (ix+HeroSpecificInfo+1),h8722 8723 8724 ld de,HeroInfoSkill8725 add hl,de8726 ld a,(hl)8727 ld (ix+HeroSkills),a8728 8729 8730 inc hl 8731 ld a,(hl)8732 dec a8733 ld b,08734 ld c,a8735 ld de,118736 call DivideBCbyDE 8738 add hl,hl 8739 add hl,hl 8740 ld de,.HeroSkillPerClassTable8741 add hl,de8742 ld a,(hl)8743 ld (ix+HeroStatAttack),a8744 inc hl8745 ld a,(hl)8746 ld (ix+HeroStatDefense),a8747 inc hl8748 ld a,(hl)8749 ld (ix+HeroStatKnowledge),a8750 inc hl8751 ld a,(hl)8752 ld (ix+HeroStatSpellDamage),a8753 8754 8755 ld a,(iy+CastleLevel1Units) 8756 ld (ix+HeroUnits),a8758 8759 call SetManaAndMovementToMax 8760 ret8761 8762 .HeroSkillPerClassTable:87638764 db 2,1,1,1 8765 db 3,1,1,0 8766 db 1,3,1,0 8767 db 1,2,1,1 8768 8769 db 1,2,1,1 8770 db 1,1,2,1 8771 db 2,1,1,1 8772 8773 db 0,0,3,2 8774 db 1,0,1,3 8775 db 0,1,2,2 8776 db 1,1,2,1 8777 8778 .Reduce2000Gold:8779 call SetResourcesCurrentPlayerinIX 8781 ld l,(ix+0)8782 ld h,(ix+1) 8783 ld de,20008784 xor a8785 sbc hl,de8786 ld (ix+0),l8787 ld (ix+1),h 8788 ret8790 .ClearHeroSlot:8791 ld hl,EmptyHeroRecruitedAtTavern8792 push ix8793 pop de8794 ld bc,lenghtherotable-2 8795 ldir8796 ret8798 .SetYX:8799 ld a,(iy+CastleY) 8800 dec a8801 ld (ix+HeroY),a 8802 ld a,(iy+Castlex) 8803 inc a8804 inc a8805 ld (ix+HeroX),a 8806 ret8811.CheckIsHeroAHeroThatHasFled?:8812 ld c,a 8813 ld b,amountofheroesperplayer8814 ld a,(whichplayernowplaying?)8815 cp 1 | ld ix,pl1hero1y | jr z,.GoFindHero8816 cp 2 | ld ix,pl2hero1y | jr z,.GoFindHero8817 cp 3 | ld ix,pl3hero1y | jr z,.GoFindHero8818 cp 4 | ld ix,pl4hero1y | jr z,.GoFindHero8820 .GoFindHero:8821 ld l,(ix+HeroSpecificInfo+0) 8822 ld h,(ix+HeroSpecificInfo+1)8823 ld de,HeroInfoNumber8824 add hl,de8825 ld a,(hl) 8826 cp c8827 jr z,.HeroFound8828 ld de,lenghtherotable8829 add ix,de8830 djnz .GoFindHero8831 ret8833 .HeroFound:8834 8836 ld a,(ix+HeroUnits)8837 cp UnitWhenRetreated8838 jr nz,.EndCheckRetreated8839 ld a,(iy+CastleLevel1Units) 8840 ld (ix+HeroUnits),a8841 ld (ix+HeroUnits+1),18842 .EndCheckRetreated:8843 8844 pop af 8846 ld a,(EmptyHeroRecruitedAtTavern+HeroStatus)8847 ld (ix+heroStatus),a 8849 8850 call SetManaAndMovementToMax 8852 call .SetYX8853 call .FaceHeroLookingDown8854 call .Reduce2000Gold 8856 pop af8857 ret 8859 .FaceHeroLookingDown:8860 8861 ld e,(ix+HeroSpecificInfo+0) 8862 ld d,(ix+HeroSpecificInfo+1)8863 push de8864 pop ix 8866 ld a,(ix+HeroinfoSYSX+0) 8867 and %0100 1000 8868 or a,128 + (064 / 2) 8869 xor 88870 ld (ix+HeroinfoSYSX+0),a8871 ret8876CheckHeroHasAtLeast2CreatureSlotsFilled:8877 ld b,0 8878 ld a,(ix+HeroUnits+1) 8879 or (ix+HeroUnits+2) 8880 jr z,.DefendingHeroCreatureSlot1Empty8881 inc b8882 .DefendingHeroCreatureSlot1Empty:8883 ld a,(ix+HeroUnits+4) 8884 or (ix+HeroUnits+5) 8885 jr z,.DefendingHeroCreatureSlot2Empty8886 inc b8887 .DefendingHeroCreatureSlot2Empty:8888 ld a,(ix+HeroUnits+7) 8889 or (ix+HeroUnits+8) 8890 jr z,.DefendingHeroCreatureSlot3Empty8891 inc b8892 .DefendingHeroCreatureSlot3Empty:8893 ld a,(ix+HeroUnits+10) 8894 or (ix+HeroUnits+11) 8895 jr z,.DefendingHeroCreatureSlot4Empty8896 inc b8897 .DefendingHeroCreatureSlot4Empty:8898 ld a,(ix+HeroUnits+13) 8899 or (ix+HeroUnits+14) 8900 jr z,.DefendingHeroCreatureSlot5Empty8901 inc b8902 .DefendingHeroCreatureSlot5Empty:8903 ld a,(ix+HeroUnits+16) 8904 or (ix+HeroUnits+17) 8905 jr z,.DefendingHeroCreatureSlot6Empty8906 inc b8907 .DefendingHeroCreatureSlot6Empty:8908 ld a,b8909 cp 28910 ret8912SetEmptyHeroSlotForCurrentPlayerInIX:8913 ld b,amountofheroesperplayer8914 ld a,(whichplayernowplaying?)8915 cp 1 | ld ix,pl1hero1y | jr z,.GoFindEmptySlotLoop8916 cp 2 | ld ix,pl2hero1y | jr z,.GoFindEmptySlotLoop8917 cp 3 | ld ix,pl3hero1y | jr z,.GoFindEmptySlotLoop8918 cp 4 | ld ix,pl4hero1y | jr z,.GoFindEmptySlotLoop8920 .GoFindEmptySlotLoop:8921 ld a,(ix+HeroStatus)8922 cp 2558923 ret z8924 ld de,lenghtherotable8925 add ix,de8926 djnz .GoFindEmptySlotLoop8928 pop af 8929 pop af 8930 pop af 8931 ret8933SetTavernHeroes:8934 call SetTavernHeroesTablePlayerinIX8935 call SettavernHeroIcons8936 call SettavernHeroNames8937 call SettavernHeroClass8938 call SettavernHeroSkill8939 call EraseTavernHeroWindowWhenUnavailable8940 ret8942SetTavernHeroesTablePlayerinIX:8943 ld a,(whichplayernowplaying?)8944 ld ix,TavernHeroesPlayer18945 cp 18946 ret z8947 ld ix,TavernHeroesPlayer28948 cp 28949 ret z8950 ld ix,TavernHeroesPlayer38951 cp 38952 ret z8953 ld ix,TavernHeroesPlayer489548956 ret8958EraseTavernHeroWindowWhenUnavailable:8959 ld a,(ix+TavernHero1)8960 or a8961 ld de,$0000 + (045*128) + (006/2) - 1288962 call z,.EraseWindow8963 ld a,(ix+TavernHero2)8964 or a8965 ld de,$0000 + (045*128) + (092/2) - 1288966 call z,.EraseWindow8967 ld a,(ix+TavernHero3)8968 or a8969 ld de,$0000 + (045*128) + (178/2) - 1288970 call z,.EraseWindow8971 ret8973 .EraseWindow:8974 ld hl,$4000 + (055*128) + (180/2) - 1288975 ld bc,$0000 + (070*256) + (072/2)8976 ld a,BuildBlock 8977 jp CopyRamToVramCorrectedCastleOverview 8998TextClass: db "Class:",2558999SettavernHeroClass:9000 ld hl,TextClass9001 ld b,004+28 9002 ld c,048+02 9003 call SetText 9005 ld hl,TextClass9006 ld b,090+28 9007 ld c,048+02 9008 call SetText 9010 ld hl,TextClass9011 ld b,176+28 9012 ld c,048+02 9013 call SetText 9015 ld a,(ix+TavernHero1)9016 ld b,004+28 9017 ld c,058+00 9018 call .SetHeroClass9020 ld a,(ix+TavernHero2)9021 ld b,090+28 9022 ld c,058+00 9023 call .SetHeroClass9025 ld a,(ix+TavernHero3)9026 ld b,176+28 9027 ld c,058+00 9028 call .SetHeroClass9029 ret9031 .SetHeroClass:9032 or a9033 ret z9035 push bc9037 ld b,a9038 ld hl,HeroAddressesAdol-heroAddressesLenght+HeroInfoClass9039 ld de,heroAddressesLenght9040 .loop:9041 add hl,de9042 djnz .loop9044 pop bc9045 9046 call SetText 9047 ret9051SettavernHeroNames:9052 9053 ld hl,$4000 + (034*128) + (004/2) - 1289054 ld de,$0000 + (034*128) + (004/2) - 1289055 ld bc,$0000 + (007*256) + (248/2)9056 ld a,TavernBlock 9057 call CopyRamToVramCorrectedCastleOverview 9059 ld a,(ix+TavernHero1)9060 ld b,004+06+(17*2) 9061 ld c,035+00 9062 call .SetHeroName9064 ld a,(ix+TavernHero2)9065 ld b,090+06+(17*2) 9066 ld c,035+00 9067 call .SetHeroName9069 ld a,(ix+TavernHero3)9070 ld b,176+06+(17*2) 9071 ld c,035+00 9072 call .SetHeroName9073 ret9075 .SetHeroName:9076 or a9077 ret z9079 push bc9081 ld b,a9082 ld hl,HeroAddressesAdol-heroAddressesLenght9083 ld de,heroAddressesLenght9084 .loop:9085 add hl,de9086 djnz .loop9088 pop bc9090 call CenterHeroNameHasGainedALevel9091 call SetText 9092 ret9093 9094SettavernHeroIcons: 9095 ld a,(ix+TavernHero1)9096 ld de,DYDX16x30HeroIconTavernWindow19097 call .SetHeroIcon9098 ld a,(ix+TavernHero2)9099 ld de,DYDX16x30HeroIconTavernWindow29100 call .SetHeroIcon9101 ld a,(ix+TavernHero3)9102 ld de,DYDX16x30HeroIconTavernWindow39103 call .SetHeroIcon9104 ret9105 9106 .SetHeroIcon:9107 or a9108 ret z9110 push ix 9111 push de 9112 ld b,a9113 ld ix,HeroAddressesAdol-heroAddressesLenght9114 ld de,heroAddressesLenght9115 .loop:9116 add ix,de9117 djnz .loop9119 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9120 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9121 ld bc,$40009122 xor a9123 sbc hl,bc9125 pop de 9126 pop ix 9127 ld bc,NXAndNY16x30HeroIcon9128 ld a,Hero16x30PortraitsBlock 9129 jp CopyRamToVramCorrectedCastleOverview 9131DYDX16x30HeroIconTavernWindow1: equ $0000 + (047*128) + (008/2) - 1289132DYDX16x30HeroIconTavernWindow2: equ $0000 + (047*128) + (094/2) - 1289133DYDX16x30HeroIconTavernWindow3: equ $0000 + (047*128) + (180/2) - 1289136SetVisitingAndDefendingHeroesAndArmy:9137 call SetVisitingHero9138 call SetDefendingHero9139 call SetVisitingHeroArmyAndAmount9140 call SetDefendingHeroArmyAndAmount9141 ret9143SetDefendingHeroArmyAndAmount:9144 ld c,254 9145 call SetVisitingOrDefendingHeroInIX 9146 ret c9148 call .army91499152 .amount:9153 ld l,(ix+HeroUnits+01)9154 ld h,(ix+HeroUnits+02)9155 ld b,0299156 ld c,1979157 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09159 ld l,(ix+HeroUnits+04)9160 ld h,(ix+HeroUnits+05)9161 ld b,0459162 ld c,1979163 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09165 ld l,(ix+HeroUnits+07)9166 ld h,(ix+HeroUnits+08)9167 ld b,0619168 ld c,1979169 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09171 ld l,(ix+HeroUnits+10)9172 ld h,(ix+HeroUnits+11)9173 ld b,0779174 ld c,1979175 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09177 ld l,(ix+HeroUnits+13)9178 ld h,(ix+HeroUnits+14)9179 ld b,0939180 ld c,1979181 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09183 ld l,(ix+HeroUnits+16)9184 ld h,(ix+HeroUnits+17)9185 ld b,1099186 ld c,1979187 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09188 ret9190 .army:9191 ld a,(ix+HeroUnits+00) 9192 call .SetSYSX 9193 ld de,DYDXDefendingHeroUnit1 9194 call CopyTransparantImage 9196 ld a,(ix+HeroUnits+03) 9197 call .SetSYSX 9198 ld de,DYDXDefendingHeroUnit2 9199 call CopyTransparantImage 9201 ld a,(ix+HeroUnits+06) 9202 call .SetSYSX 9203 ld de,DYDXDefendingHeroUnit3 9204 call CopyTransparantImage 9206 ld a,(ix+HeroUnits+09) 9207 call .SetSYSX 9208 ld de,DYDXDefendingHeroUnit4 9209 call CopyTransparantImage 9211 ld a,(ix+HeroUnits+12) 9212 call .SetSYSX 9213 ld de,DYDXDefendingHeroUnit5 9214 call CopyTransparantImage 9216 ld a,(ix+HeroUnits+15) 9217 call .SetSYSX 9218 ld de,DYDXDefendingHeroUnit6 9219 call CopyTransparantImage 9220 ret9222 .SetSYSX: 9223 ld h,09224 ld l,a9225 add hl,hl 9226 ld de,UnitSYSXTable14x14Portraits9227 add hl,de9228 ld c,(hl)9229 inc hl9230 ld b,(hl) 9231 push bc9232 pop hl9234 ld a,Enemy14x14PortraitsBlock 9235 ld bc,NXAndNY14x14CharaterPortraits9236 ret9238 9239UnitSYSXTable14x14Portraits: 9240 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1289241 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-1289242 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-1289243 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-1289244 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-1289245 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-1289246 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-1289248 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-1289249 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-1289250 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-1289251 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-1289253DYDXDefendingHeroUnit1: equ 256*181 + 028 9254DYDXDefendingHeroUnit2: equ 256*181 + 044 9255DYDXDefendingHeroUnit3: equ 256*181 + 060 9256DYDXDefendingHeroUnit4: equ 256*181 + 076 9257DYDXDefendingHeroUnit5: equ 256*181 + 092 9258DYDXDefendingHeroUnit6: equ 256*181 + 108 9260SetVisitingHeroArmyAndAmount:9261 ld c,002 9262 call SetVisitingOrDefendingHeroInIX 9263 ret c9265 call .army92669269 .amount:9270 ld l,(ix+HeroUnits+01)9271 ld h,(ix+HeroUnits+02)9272 ld b,1579273 ld c,1979274 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09276 ld l,(ix+HeroUnits+04)9277 ld h,(ix+HeroUnits+05)9278 ld b,1739279 ld c,1979280 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09282 ld l,(ix+HeroUnits+07)9283 ld h,(ix+HeroUnits+08)9284 ld b,1899285 ld c,1979286 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09288 ld l,(ix+HeroUnits+10)9289 ld h,(ix+HeroUnits+11)9290 ld b,2059291 ld c,1979292 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09294 ld l,(ix+HeroUnits+13)9295 ld h,(ix+HeroUnits+14)9296 ld b,2219297 ld c,1979298 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09300 ld l,(ix+HeroUnits+16)9301 ld h,(ix+HeroUnits+17)9302 ld b,2379303 ld c,1979304 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09305 ret9307 .army:9308 ld a,(ix+HeroUnits+00) 9309 call SetDefendingHeroArmyAndAmount.SetSYSX 9310 ld de,DYDXVisitingHeroUnit1 9311 call CopyTransparantImage 9313 ld a,(ix+HeroUnits+03) 9314 call SetDefendingHeroArmyAndAmount.SetSYSX 9315 ld de,DYDXVisitingHeroUnit2 9316 call CopyTransparantImage 9318 ld a,(ix+HeroUnits+06) 9319 call SetDefendingHeroArmyAndAmount.SetSYSX 9320 ld de,DYDXVisitingHeroUnit3 9321 call CopyTransparantImage 9323 ld a,(ix+HeroUnits+09) 9324 call SetDefendingHeroArmyAndAmount.SetSYSX 9325 ld de,DYDXVisitingHeroUnit4 9326 call CopyTransparantImage 9328 ld a,(ix+HeroUnits+12) 9329 call SetDefendingHeroArmyAndAmount.SetSYSX 9330 ld de,DYDXVisitingHeroUnit5 9331 call CopyTransparantImage 9333 ld a,(ix+HeroUnits+15) 9334 call SetDefendingHeroArmyAndAmount.SetSYSX 9335 ld de,DYDXVisitingHeroUnit6 9336 call CopyTransparantImage 9337 ret9339DYDXVisitingHeroUnit1: equ 256*181 + 156 9340DYDXVisitingHeroUnit2: equ 256*181 + 172 9341DYDXVisitingHeroUnit3: equ 256*181 + 188 9342DYDXVisitingHeroUnit4: equ 256*181 + 204 9343DYDXVisitingHeroUnit5: equ 256*181 + 220 9344DYDXVisitingHeroUnit6: equ 256*181 + 236 9346SetVisitingOrDefendingHeroInIX: 9347 ld a,(whichplayernowplaying?)9348 cp 1 | ld ix,pl1hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9349 cp 2 | ld ix,pl2hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9350 cp 3 | ld ix,pl3hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9351 cp 4 | ld ix,pl4hero1y | jr z,.CheckHeroVisitingOrDefendingCastle 9353 .CheckHeroVisitingOrDefendingCastle:9354 ld b,amountofheroesperplayer9355 .loop:9356 call .DoCheckHero 9357 ld de,lenghtherotable9358 add ix,de 9359 djnz .loop9360 add ix,de 9361 scf 9362 ret9364 .DoCheckHero:9365 ld a,(iy+CastleY) 9366 dec a9367 cp (ix+Heroy)9368 ret nz9369 ld a,(iy+CastleX)9370 inc a9371 inc a9372 cp (ix+Herox)9373 ret nz9374 ld a,(ix+HeroStatus) 9375 cp c 9376 ret nz9378 pop bc 9379 ret9381SetDefendingHero:9382 ld c,254 9383 call SetVisitingOrDefendingHeroInIX 9385 ld de,$0000 + (176*128) + (004/2) - 1289386 jp c,SetNoHeroVisitingOrDefendingCastle9387 ld de,DYDX16x30HeroIconAtDefendingHeroWindow9388 jp DoSetVisitingOrDefendingHero9389 9390SetVisitingHero: 9391 ld c,002 9392 call SetVisitingOrDefendingHeroInIX 9394 ld de,$0000 + (176*128) + (132/2) - 1289395 jp c,SetNoHeroVisitingOrDefendingCastle9396 ld de,DYDX16x30HeroIconAtVisitingHeroWindow9397 jp DoSetVisitingOrDefendingHero9399SetNoHeroVisitingOrDefendingCastle:9400 ld hl,$4000 + (013*128) + (230/2) - 1289401 ld bc,$0000 + (028*256) + (020/2)9402 ld a,ButtonsRecruitBlock 9403 jp CopyRamToVramCorrectedCastleOverview 9405DoSetVisitingOrDefendingHero:9406 9407 ld l,(ix+HeroSpecificInfo+0) 9408 ld h,(ix+HeroSpecificInfo+1)9409 push hl9410 pop ix9412 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9413 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9414 ld bc,$40009415 xor a9416 sbc hl,bc9418 ld bc,NXAndNY16x30HeroIcon9419 ld a,Hero16x30PortraitsBlock 9420 jp CopyRamToVramCorrectedCastleOverview 9422DYDX16x30HeroIconAtVisitingHeroWindow: equ $0000 + (176*128) + (134/2) - 1289423DYDX16x30HeroIconAtDefendingHeroWindow: equ $0000 + (176*128) + (006/2) - 1289425SetDefendingAndVisitingHeroButtons:9426 ld hl,DefendingAndVisitingHeroButtonTable-29427 ld de,GenericButtonTable-29428 ld bc,2+(GenericButtonTableLenghtPerButton*14)9429 ldir9430 ret9432DefendingAndVisitingHeroButtonTableGfxBlock: db ButtonsRecruitBlock9433DefendingAndVisitingHeroButtonTableAmountOfButtons: db 149434DefendingAndVisitingHeroButtonTable: 9436 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9437 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 9438 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1289439 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1289440 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1289441 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1289442 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1289444 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1289445 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1289446 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1289447 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1289448 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1289449 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1289450 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1289452.Button1Ytop: equ 1749453.Button1YBottom: equ .Button1Ytop + 0349454.Button1XLeft: equ 0049455.Button1XRight: equ .Button1XLeft + 0209457.Button2Ytop: equ 1769458.Button2YBottom: equ .Button2Ytop + 0309459.Button2XLeft: equ 0279460.Button2XRight: equ .Button2XLeft + 0169462.Button3Ytop: equ 1769463.Button3YBottom: equ .Button3Ytop + 0309464.Button3XLeft: equ 0439465.Button3XRight: equ .Button3XLeft + 0169467.Button4Ytop: equ 1769468.Button4YBottom: equ .Button4Ytop + 0309469.Button4XLeft: equ 0599470.Button4XRight: equ .Button4XLeft + 0169472.Button5Ytop: equ 1769473.Button5YBottom: equ .Button5Ytop + 0309474.Button5XLeft: equ 0759475.Button5XRight: equ .Button5XLeft + 0169477.Button6Ytop: equ 1769478.Button6YBottom: equ .Button6Ytop + 0309479.Button6XLeft: equ 0919480.Button6XRight: equ .Button6XLeft + 0169482.Button7Ytop: equ 1769483.Button7YBottom: equ .Button7Ytop + 0309484.Button7XLeft: equ 1079485.Button7XRight: equ .Button7XLeft + 0169489.Button8Ytop: equ 1749490.Button8YBottom: equ .Button8Ytop + 0349491.Button8XLeft: equ 004 + 1289492.Button8XRight: equ .Button8XLeft + 0209494.Button9Ytop: equ 1769495.Button9YBottom: equ .Button9Ytop + 0309496.Button9XLeft: equ 027 + 1289497.Button9XRight: equ .Button9XLeft + 0169499.Button10Ytop: equ 1769500.Button10YBottom: equ .Button10Ytop + 0309501.Button10XLeft: equ 043 + 1289502.Button10XRight: equ .Button10XLeft + 0169504.Button11Ytop: equ 1769505.Button11YBottom: equ .Button11Ytop + 0309506.Button11XLeft: equ 059 + 1289507.Button11XRight: equ .Button11XLeft + 0169509.Button12Ytop: equ 1769510.Button12YBottom: equ .Button12Ytop + 0309511.Button12XLeft: equ 075 + 1289512.Button12XRight: equ .Button12XLeft + 0169514.Button13Ytop: equ 1769515.Button13YBottom: equ .Button13Ytop + 0309516.Button13XLeft: equ 091 + 1289517.Button13XRight: equ .Button13XLeft + 0169519.Button14Ytop: equ 1769520.Button14YBottom: equ .Button14Ytop + 0309521.Button14XLeft: equ 107 + 1289522.Button14XRight: equ .Button14XLeft + 0169539SetTavernButtons:9540 ld hl,TavernButtonTable-29541 ld de,GenericButtonTable2-29542 ld bc,2+(GenericButtonTableLenghtPerButton*3)9543 ldir9545 call .SetRedButtonsIfPlayerHasInsufficientFunds9546 call .SetBrownButtonIfHeroIsAlreadyRecruited9547 ret9549 .SetBrownButtonIfHeroIsAlreadyRecruited:9550 call SetTavernHeroesTablePlayerinIX9551 ld a,(ix+TavernHero1) 9552 or a9553 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*0)9554 call z,.AlreadyRecruitedSetBrown9556 ld a,(ix+TavernHero2) 9557 or a9558 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*1)9559 call z,.AlreadyRecruitedSetBrown9561 ld a,(ix+TavernHero3) 9562 or a9563 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*2)9564 call z,.AlreadyRecruitedSetBrown9565 ret9567 .AlreadyRecruitedSetBrown:9568 ld hl,.BrownButton9569 ld bc,69570 ldir9571 ret9573 .BrownButton:9574 dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 1289575 9576 .SetRedButtonsIfPlayerHasInsufficientFunds:9577 call SetResourcesCurrentPlayerinIX9579 9580 ld l,(ix+0)9581 ld h,(ix+1) 9582 ld de,20009583 xor a9584 sbc hl,de9585 ret nc9586 9587 ld hl,TavernButtonTableWhenNotEnoughCash9588 ld de,GenericButtonTable29589 ld bc,GenericButtonTableLenghtPerButton*39590 ldir9591 ret9599TavernButton1Ytop: equ 1189600TavernButton1YBottom: equ TavernButton1Ytop + 0099601TavernButton1XLeft: equ 0049602TavernButton1XRight: equ TavernButton1XLeft + 0769604TavernButton2Ytop: equ 1189605TavernButton2YBottom: equ TavernButton2Ytop + 0099606TavernButton2XLeft: equ 0909607TavernButton2XRight: equ TavernButton2XLeft + 0769609TavernButton3Ytop: equ 1189610TavernButton3YBottom: equ TavernButton3Ytop + 0099611TavernButton3XLeft: equ 1769612TavernButton3XRight: equ TavernButton3XLeft + 0769614TavernButtonTableLenghtPerButton: equ TavernButtonTable.endlenght-TavernButtonTable9615TavernButtonTableGfxBlock: db ButtonsRecruitBlock9616TavernButtonTableAmountOfButtons: db 39617TavernButtonTable: 9618 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9619 .endlenght:9620 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9621 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289623TavernButtonTableWhenNotEnoughCash: 9624 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9625 .endlenght:9626 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9627 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289635FirstLineintHeightCastleMarket: equ 0749636SecondLineintHeightCastleMarket: equ 1179637ThirdLineintHeightCastleMarket: equ 1599638SetCastleMarketInterruptHandler:9639 di9640 ld hl,CastleInterruptHandler 9641 ld ($38+1),hl 9642 ld a,$c3 9643 ld ($38),a9644 9645 ld a,(VDP_0) 9646 or 16 9647 ld (VDP_0),a 9648 out ($99),a9649 ld a,1289650 out ($99),a9652 ld a,FirstLineintHeightCastleMarket9653 ld (CurrentLineIntHeight),a9654 out ($99),a9655 ld a,19+128 9656 ei9657 out ($99),a 9658 ret9660SetCastleMarketInterruptSecondLine:9661 ld a,SecondLineintHeightCastleMarket9662 ld (CurrentLineIntHeight),a9663 out ($99),a9664 ld a,19+128 9665 ei9666 out ($99),a 9667 ret9669SetCastleMarketInterruptThirdLine:9670 ld a,ThirdLineintHeightCastleMarket9671 ld (CurrentLineIntHeight),a9672 out ($99),a9673 ld a,19+128 9674 ei9675 out ($99),a 9676 ret9678CastleOverviewMarketPlaceCode:9679 call SetScreenOff9681 call SetMarketPlaceButtons9683 ld a,255 9684 ld (PreviousButtonClicked),a9685 ld (PreviousButton2Clicked),a9686 ld ix,GenericButtonTable9687 ld (PreviousButtonClickedIX),ix9688 ld (PreviousButton2ClickedIX),ix9690 ld hl,InGamePalette9691 call SetPalette9693 xor a9694 ld (activepage),a 9695 9696 ld a,%1100 00119697 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 9698 xor a9699 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 9700 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 9701 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 9702 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 9703 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 9705 call SetMarketPlaceGraphics 9706 call SetResourcesPlayer9708 ld hl,CopyPage1To09709 call docopy9711 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9712 call docopy9714 call SetCastleMarketInterruptHandler9715 9716 .engine:9717 call SwapAndSetPage 9718 call PopulateControls 97209725 ld a,(Controls)9726 bit 5,a 9727 jp nz,CastleOverviewCode9729 9730 ld ix,CastleOverviewButtonTable 9731 call CheckButtonMouseInteractionCastle9733 ld ix,CastleOverviewButtonTable9734 call SetCastleButtons 9737 9738 ld ix,GenericButtonTable 9739 call CheckButtonMouseInteractionGenericButtons9740 call .CheckButtonClicked 9744 9745 ld ix,(PreviousButtonClickedIX) 9746 ld a,(ix+GenericButtonStatus)9747 push af9748 ld a,(PreviousButtonClicked)9749 cp 2559750 jr z,.EndMarkButton 9751 ld (ix+GenericButtonStatus),%1010 00119752 .EndMarkButton:9753 9755 9756 ld ix,(PreviousButton2ClickedIX) 9757 ld a,(ix+GenericButtonStatus)9758 push af9759 ld a,(PreviousButton2Clicked)9760 cp 2559761 jr z,.EndMarkButton2 9762 ld (ix+GenericButtonStatus),%1010 00119763 .EndMarkButton2:9764 9770 ld ix,GenericButtonTable9771 call SetGenericButtons 9774 9775 pop af9776 ld ix,(PreviousButton2ClickedIX) 9777 ld (ix+GenericButtonStatus),a9778 9780 9781 pop af9782 ld ix,(PreviousButtonClickedIX) 9783 ld (ix+GenericButtonStatus),a9784 9789 97919792 call SetScreenOn9793 jp .engine9795.CheckButtonClicked: 9796 ret nc9798 ld a,b 9799 cp 9 9800 jp nc,.WhichResourceDoYouNeedClicked9801 cp 4 9802 jp nc,.WhichResourceWillYouTradeClicked9803 cp 39804 jp z,.PlusButtonPressed9805 cp 29806 jp z,.BuyButtonPressed9807 cp 19808 jp z,.MinusButtonPressed9809 ret9810 9811 .BuyButtonPressed:9812 9813 call SetResourcesCurrentPlayerinIX9814 ld a,(MarketPlaceResourceNeeded)9815 cp 09 9816 jr z,.IXPointsToResourceNeededCheckOverflow9817 inc ix9818 inc ix9819 cp 13 9820 jr z,.IXPointsToResourceNeededCheckOverflow9821 inc ix9822 inc ix9823 cp 12 9824 jr z,.IXPointsToResourceNeededCheckOverflow9825 inc ix9826 inc ix9827 cp 11 9828 jr z,.IXPointsToResourceNeededCheckOverflow9829 inc ix9830 inc ix9831 cp 10 9832 jr z,.IXPointsToResourceNeededCheckOverflow9834 .IXPointsToResourceNeededCheckOverflow:9835 ld l,(ix+0)9836 ld h,(ix+1) 9837 ld de,(AmountOfResourcesOffered)9838 add hl,de 9839 ret c9840 9842 9843 call SetResourcesCurrentPlayerinIX9844 ld a,(MarketPlaceResourceToTrade) 9845 cp 04 9846 jr z,.IXPointsToResourceRequired9847 inc ix9848 inc ix9849 cp 08 9850 jr z,.IXPointsToResourceRequired9851 inc ix9852 inc ix9853 cp 07 9854 jr z,.IXPointsToResourceRequired9855 inc ix9856 inc ix9857 cp 06 9858 jr z,.IXPointsToResourceRequired9859 inc ix9860 inc ix9861 cp 05 9862 jr z,.IXPointsToResourceRequired9864 .IXPointsToResourceRequired:9865 ld l,(ix+0)9866 ld h,(ix+1) 9867 ld de,(AmountOfResourcesRequired)9868 xor a9869 sbc hl,de 9870 ret c9871 ld (ix+0),l9872 ld (ix+1),h 9875 9876 call SetResourcesCurrentPlayerinIX9877 ld a,(MarketPlaceResourceNeeded)9878 cp 09 9879 jr z,.IXPointsToResourceNeeded9880 inc ix9881 inc ix9882 cp 13 9883 jr z,.IXPointsToResourceNeeded9884 inc ix9885 inc ix9886 cp 12 9887 jr z,.IXPointsToResourceNeeded9888 inc ix9889 inc ix9890 cp 11 9891 jr z,.IXPointsToResourceNeeded9892 inc ix9893 inc ix9894 cp 10 9895 jr z,.IXPointsToResourceNeeded9897 .IXPointsToResourceNeeded:9898 ld l,(ix+0)9899 ld h,(ix+1) 9900 ld de,(AmountOfResourcesOffered)9901 add hl,de 9902 ld (ix+0),l9903 ld (ix+1),h 9906 call SetResourcesPlayer9907 call SwapAndSetPage 9908 call SetResourcesPlayer9909 ret9910 9911 .WoodNeeded:9912 inc ix9913 inc ix 9914 ret9915 9916 .MinusButtonPressed:9917 call .SetTradeCostInHL 9918 ld e,(hl)9919 inc hl9920 ld d,(hl) 9921 inc hl9922 ld c,(hl)9923 inc hl9924 ld b,(hl) 9926 9927 ld hl,(AmountOfResourcesOffered)9928 xor a9929 sbc hl,de9930 ret z9931 ld (AmountOfResourcesOffered),hl9932 ld hl,(AmountOfResourcesRequired)9933 xor a9934 sbc hl,bc9935 ld (AmountOfResourcesRequired),hl9937 call .ClearAmountsOfferedAndRequired9938 call .SetTotalAmountOfferedVSRequired9939 call SwapAndSetPage 9940 call .ClearAmountsOfferedAndRequired9941 call .SetTotalAmountOfferedVSRequired9942 ret9943 9944 .PlusButtonPressed:9945 call .SetTradeCostInHL 9946 ld e,(hl)9947 inc hl9948 ld d,(hl) 9949 inc hl9950 ld c,(hl)9951 inc hl9952 ld b,(hl) 9954 9955 ld hl,(AmountOfResourcesRequired)9956 add hl,bc9957 ret c9959 ld hl,(AmountOfResourcesOffered)9960 add hl,de9961 ret c9962 ld (AmountOfResourcesOffered),hl9963 ld hl,(AmountOfResourcesRequired)9964 add hl,bc9965 ld (AmountOfResourcesRequired),hl9967 call .ClearAmountsOfferedAndRequired9968 call .SetTotalAmountOfferedVSRequired9969 call SwapAndSetPage 9970 call .ClearAmountsOfferedAndRequired9971 call .SetTotalAmountOfferedVSRequired9972 ret9974 .ClearAmountsOfferedAndRequired:9975 ld hl,$4000 + (131*128) + (052/2) - 1289976 ld de,$0000 + (147*128) + (054/2) - 1289977 ld bc,$0000 + (006*256) + (036/2)9978 ld a,ChamberOfCommerceButtonsBlock 9979 call CopyRamToVramCorrectedCastleOverview 9981 ld hl,$4000 + (131*128) + (052/2) - 1289982 ld de,$0000 + (147*128) + (170/2) - 1289983 ld bc,$0000 + (006*256) + (036/2)9984 ld a,ChamberOfCommerceButtonsBlock 9985 call CopyRamToVramCorrectedCastleOverview 9986 ret9987 9988 .WhichResourceWillYouTradeClicked:9989 ld (PreviousButton2Clicked),a 9990 ld (PreviousButton2ClickedIX),ix 9991 9992 ld (MarketPlaceResourceToTrade),a9994 call SetCastleOverViewFontPage0Y212 9996 ld a,%1100 0011 9997 ld (GenericButtonTable+10*GenericButtonTableLenghtPerButton),a 9998 ld (GenericButtonTable+11*GenericButtonTableLenghtPerButton),a 9999 ld (GenericButtonTable+12*GenericButtonTableLenghtPerButton),a 10000 10001 .EntryPointWhenClickedOnWhichResourceDoYouNeed:10002 call .SetIcanOfferYouWindow10003 call .SetIconResourceNeeded10004 call .SetIconResourceToTrade10005 call .SetTextResourceNeeded10006 call .SetTextResourceToTrade10007 call .SetCost10008 call .SetTotalAmountOfferedVSRequired10009 call SwapAndSetPage 10010 call .SetIcanOfferYouWindow10011 call .SetIconResourceNeeded10012 call .SetIconResourceToTrade10013 call .SetTextResourceNeeded10014 call .SetTextResourceToTrade10015 call .SetCost10016 call .SetTotalAmountOfferedVSRequired10017 ret10019 .SetTotalAmountOfferedVSRequired:10020 ld b,054 10021 ld c,147 10022 ld hl,(AmountOfResourcesOffered)10023 call SetNumber16BitCastle 10025 ld b,181 10026 ld c,147 10027 ld hl,(AmountOfResourcesRequired)10028 call SetNumber16BitCastle 10029 ret10031 .SetCost:10032 call .SetTradeCostInHL10033 10034 ld e,(hl)10035 inc hl10036 ld d,(hl)10037 ld (AmountOfResourcesOffered),de10038 inc hl10039 ld e,(hl)10040 inc hl10041 ld d,(hl)10042 ld (AmountOfResourcesRequired),de10044 ld b,069+005 10045 ld c,128 10046 ld hl,(AmountOfResourcesOffered)10047 call SetNumber16BitCastle 10049 ld b,167 10050 ld c,128 10051 ld hl,(AmountOfResourcesRequired)10052 call SetNumber16BitCastle 10053 ret1005510066.TextCostRequireWoodTradeStone: dw 0001,000710067.TextCostRequireWoodTradeGems: dw 0001,000310068.TextCostRequireWoodTradeGold: dw 0001,166710069.TextCostRequireGemTradeStone: dw 0001,001310070.TextCostRequireGemTradeGems: dw 0001,000710071.TextCostRequireGemTradeGold: dw 0001,333310072.TextCostRequireGoldTradeWood: dw 0037,000110073.TextCostRequireGoldTradeRuby: dw 0075,000110074.TextCostRequireGoldTradeGold: dw 0001,00011007510076.TextCostRequireWoodTradeStone2: dw 0001,000510077.TextCostRequireWoodTradeGems2: dw 0001,000310078.TextCostRequireWoodTradeGold2: dw 0001,125010079.TextCostRequireGemTradeStone2: dw 0001,001010080.TextCostRequireGemTradeGems2: dw 0001,000510081.TextCostRequireGemTradeGold2: dw 0001,250010082.TextCostRequireGoldTradeWood2: dw 0050,000110083.TextCostRequireGoldTradeRuby2: dw 0100,000110084.TextCostRequireGoldTradeGold2: dw 0001,00011008510086.TextCostRequireWoodTradeStone3: dw 0001,000410087.TextCostRequireWoodTradeGems3: dw 0001,000210088.TextCostRequireWoodTradeGold3: dw 0001,100010089.TextCostRequireGemTradeStone3: dw 0001,000810090.TextCostRequireGemTradeGems3: dw 0001,000410091.TextCostRequireGemTradeGold3: dw 0001,200010092.TextCostRequireGoldTradeWood3: dw 0062,000110093.TextCostRequireGoldTradeRuby3: dw 0125,000110094.TextCostRequireGoldTradeGold3: dw 0001,000110098 .SetTradeCostInHL:10099 call .DoSetTradeCost10100 call .SetAmountOfMarketPlacesInB 10101 ld a,b10102 or a10103 ret z10104 cp 310105 jr c,.loop10106 ld b,2 10107 .loop:10108 ld de,3610109 add hl,de10110 djnz .loop10111 ret10112 10113 .SetAmountOfMarketPlacesInB:10114 ld a,(whichplayernowplaying?)10115 ld b,-1 10116 ld ix,Castle1 | cp (ix+CastlePlayer) | call z,.check10117 ld ix,Castle2 | cp (ix+CastlePlayer) | call z,.check10118 ld ix,Castle3 | cp (ix+CastlePlayer) | call z,.check10119 ld ix,Castle4 | cp (ix+CastlePlayer) | call z,.check10120 ret10122 .check:10123 bit 0,(ix+CastleMarket)10124 ret z10125 inc b10126 ret10128 10129 .DoSetTradeCost:10130 ld a,(MarketPlaceResourceNeeded)10131 cp 12 10132 jp nc,.RequireWoodOrStone10133 cp 10 10134 jp nc,.RequireGemsOrRubies10136 .RequireGold:10137 ld a,(MarketPlaceResourceToTrade) 10138 cp 07 10139 ld hl,.TextCostRequireGoldTradeWood10140 ret nc10141 cp 05 10142 ld hl,.TextCostRequireGoldTradeRuby10143 ret nc10144 ld hl,.TextCostRequireGoldTradeGold10145 ret 10146 10147 .RequireGemsOrRubies:10148 ld a,(MarketPlaceResourceToTrade) 10149 cp 07 10150 ld hl,.TextCostRequireGemTradeStone10151 ret nc10152 cp 05 10153 ld hl,.TextCostRequireGemTradeGems10154 ret nc10155 ld hl,.TextCostRequireGemTradeGold10156 ret10157 10158 .RequireWoodOrStone:10159 ld a,(MarketPlaceResourceToTrade) 10160 cp 07 10161 ld hl,.TextCostRequireWoodTradeStone10162 ret nc10163 cp 05 10164 ld hl,.TextCostRequireWoodTradeGems10165 ret nc10166 ld hl,.TextCostRequireWoodTradeGold10167 ret10169 .SetTextResourceNeeded:10170 ld a,(MarketPlaceResourceNeeded)10171 call .SetTextResourceInHL10172 ld b,12710173 ld c,12810174 jp SetText10176 .SetTextResourceToTrade:10177 ld a,(MarketPlaceResourceToTrade)10178 call .SetTextResourceInHL10179 ld b,22710180 ld c,12810181 jp SetText10183 .SetTextResourceInHL:10184 ld hl,.TextWood10185 cp 1310186 ret z10187 cp 810188 ret z10190 ld hl,.TextStone10191 cp 1210192 ret z10193 cp 710194 ret z10196 ld hl,.TextGems10197 cp 1110198 ret z10199 cp 610200 ret z10202 ld hl,.TextRubies10203 cp 1010204 ret z10205 cp 510206 ret z10208 ld hl,.TextGold1020910213 ret10215.TextWood: db "wood",25510216.TextStone: db "stone",25510217.TextGems: db "gems",25510218.TextRubies: db "rubies",25510219.TextGold: db "gold",25510221 10222 .SetIcanOfferYouWindow:10223 ld hl,$4000 + (109*128) + (000/2) - 12810224 ld de,$0000 + (123*128) + (000/2) - 12810225 ld bc,$0000 + (043*256) + (256/2)10226 ld a,ChamberOfCommerceButtonsBlock 10227 call CopyRamToVramCorrectedCastleOverview 10228 jp SetCastleMarketInterruptThirdLine10230 .SetIconResourceNeeded:10231 ld a,(MarketPlaceResourceNeeded)10232 call .SetResourceInHL 1023310234 ld de,$0000 + (138*128) + (024/2) - 12810235 ld bc,$0000 + (022*256) + (028/2)10236 ld a,ChamberOfCommerceButtonsBlock 10237 jp CopyRamToVramCorrectedCastleOverview 10239 .SetIconResourceToTrade:10240 ld a,(MarketPlaceResourceToTrade)10241 call .SetResourceInHL1024210243 ld de,$0000 + (138*128) + (206/2) - 12810244 ld bc,$0000 + (022*256) + (028/2)10245 ld a,ChamberOfCommerceButtonsBlock 10246 jp CopyRamToVramCorrectedCastleOverview 10248 .SetResourceInHL:10249 ld hl,$4000 + (000*128) + (000/2) - 128 10250 cp 1310251 ret z10252 cp 810253 ret z10255 ld hl,$4000 + (000*128) + (028/2) - 128 10256 cp 1210257 ret z10258 cp 710259 ret z10261 ld hl,$4000 + (000*128) + (056/2) - 128 10262 cp 1110263 ret z10264 cp 610265 ret z10267 ld hl,$4000 + (000*128) + (084/2) - 128 10268 cp 1010269 ret z10270 cp 510271 ret z10273 ld hl,$4000 + (000*128) + (112/2) - 128 10278 ret10280 10281 .WhichResourceDoYouNeedClicked:10282 ld (PreviousButtonClicked),a 10283 ld (PreviousButtonClickedIX),ix10284 10285 ld (MarketPlaceResourceNeeded),a10287 ld a,(GenericButtonTable+10*GenericButtonTableLenghtPerButton) 10288 bit 7,a 10289 jp nz,.EntryPointWhenClickedOnWhichResourceDoYouNeed10290 10291 ld a,(GenericButtonTable+5*GenericButtonTableLenghtPerButton) 10292 bit 7,a10293 ret nz10294 10295 ld a,%1100 0011 10296 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a 10297 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a 10298 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a 10299 ld (GenericButtonTable+8*GenericButtonTableLenghtPerButton),a 10300 ld (GenericButtonTable+9*GenericButtonTableLenghtPerButton),a 10301 10302 call .SetWhichResourceWillYouTradeWindow10303 call SwapAndSetPage 10304 .SetWhichResourceWillYouTradeWindow:10305 ld hl,$4000 + (066*128) + (000/2) - 12810306 ld de,$0000 + (080*128) + (000/2) - 12810307 ld bc,$0000 + (043*256) + (256/2)10308 ld a,ChamberOfCommerceButtonsBlock 10309 call CopyRamToVramCorrectedCastleOverview 10310 jp SetCastleMarketInterruptSecondLine10311 10312SetMarketPlaceButtons:10313 ld hl,MarketPlaceButtonTable-210314 ld de,GenericButtonTable-210315 ld bc,2+(GenericButtonTableLenghtPerButton*13)10316 ldir10317 ret10319MarketPlaceButton1Ytop: equ 05210320MarketPlaceButton1YBottom: equ MarketPlaceButton1Ytop + 02210321MarketPlaceButton1XLeft: equ 03010322MarketPlaceButton1XRight: equ MarketPlaceButton1XLeft + 02810324MarketPlaceButton2Ytop: equ 05210325MarketPlaceButton2YBottom: equ MarketPlaceButton2Ytop + 02210326MarketPlaceButton2XLeft: equ 07210327MarketPlaceButton2XRight: equ MarketPlaceButton2XLeft + 02810329MarketPlaceButton3Ytop: equ 05210330MarketPlaceButton3YBottom: equ MarketPlaceButton3Ytop + 02210331MarketPlaceButton3XLeft: equ 11410332MarketPlaceButton3XRight: equ MarketPlaceButton3XLeft + 02810334MarketPlaceButton4Ytop: equ 05210335MarketPlaceButton4YBottom: equ MarketPlaceButton4Ytop + 02210336MarketPlaceButton4XLeft: equ 15610337MarketPlaceButton4XRight: equ MarketPlaceButton4XLeft + 02810339MarketPlaceButton5Ytop: equ 05210340MarketPlaceButton5YBottom: equ MarketPlaceButton5Ytop + 02210341MarketPlaceButton5XLeft: equ 19810342MarketPlaceButton5XRight: equ MarketPlaceButton5XLeft + 02810344MarketPlaceButton6Ytop: equ 09510345MarketPlaceButton6YBottom: equ MarketPlaceButton6Ytop + 02210346MarketPlaceButton6XLeft: equ 03010347MarketPlaceButton6XRight: equ MarketPlaceButton6XLeft + 02810349MarketPlaceButton7Ytop: equ 09510350MarketPlaceButton7YBottom: equ MarketPlaceButton7Ytop + 02210351MarketPlaceButton7XLeft: equ 07210352MarketPlaceButton7XRight: equ MarketPlaceButton7XLeft + 02810354MarketPlaceButton8Ytop: equ 09510355MarketPlaceButton8YBottom: equ MarketPlaceButton8Ytop + 02210356MarketPlaceButton8XLeft: equ 11410357MarketPlaceButton8XRight: equ MarketPlaceButton8XLeft + 02810359MarketPlaceButton9Ytop: equ 09510360MarketPlaceButton9YBottom: equ MarketPlaceButton9Ytop + 02210361MarketPlaceButton9XLeft: equ 15610362MarketPlaceButton9XRight: equ MarketPlaceButton9XLeft + 02810364MarketPlaceButton10Ytop: equ 09510365MarketPlaceButton10YBottom: equ MarketPlaceButton10Ytop + 02210366MarketPlaceButton10XLeft: equ 19810367MarketPlaceButton10XRight: equ MarketPlaceButton10XLeft + 02810371MarketPlaceButton11Ytop: equ 14310372MarketPlaceButton11YBottom: equ MarketPlaceButton11Ytop + 01410373MarketPlaceButton11XLeft: equ 09210374MarketPlaceButton11XRight: equ MarketPlaceButton11XLeft + 01410376MarketPlaceButton12Ytop: equ 14110377MarketPlaceButton12YBottom: equ MarketPlaceButton12Ytop + 01810378MarketPlaceButton12XLeft: equ 11610379MarketPlaceButton12XRight: equ MarketPlaceButton12XLeft + 02610381MarketPlaceButton13Ytop: equ 14310382MarketPlaceButton13YBottom: equ MarketPlaceButton13Ytop + 01410383MarketPlaceButton13XLeft: equ 15210384MarketPlaceButton13XRight: equ MarketPlaceButton13XLeft + 01410386MarketPlaceButtonTableLenghtPerButton: equ MarketPlaceButtonTable.endlenght-MarketPlaceButtonTable10387MarketPlaceButtonTableGfxBlock: db ChamberOfCommerceButtonsBlock10388MarketPlaceButtonTableAmountOfButtons: db 1310389MarketPlaceButtonTable: 10391 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton1Ytop,MarketPlaceButton1YBottom,MarketPlaceButton1XLeft,MarketPlaceButton1XRight | dw $0000 + (MarketPlaceButton1Ytop*128) + (MarketPlaceButton1XLeft/2) - 128 10392 .endlenght:10393 db %1010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton2Ytop,MarketPlaceButton2YBottom,MarketPlaceButton2XLeft,MarketPlaceButton2XRight | dw $0000 + (MarketPlaceButton2Ytop*128) + (MarketPlaceButton2XLeft/2) - 128 10394 db %1001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton3Ytop,MarketPlaceButton3YBottom,MarketPlaceButton3XLeft,MarketPlaceButton3XRight | dw $0000 + (MarketPlaceButton3Ytop*128) + (MarketPlaceButton3XLeft/2) - 12810395 db %1100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton4Ytop,MarketPlaceButton4YBottom,MarketPlaceButton4XLeft,MarketPlaceButton4XRight | dw $0000 + (MarketPlaceButton4Ytop*128) + (MarketPlaceButton4XLeft/2) - 128 10396 db %1100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton5Ytop,MarketPlaceButton5YBottom,MarketPlaceButton5XLeft,MarketPlaceButton5XRight | dw $0000 + (MarketPlaceButton5Ytop*128) + (MarketPlaceButton5XLeft/2) - 128 10397 10398 db %0100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton6Ytop,MarketPlaceButton6YBottom,MarketPlaceButton6XLeft,MarketPlaceButton6XRight | dw $0000 + (MarketPlaceButton6Ytop*128) + (MarketPlaceButton6XLeft/2) - 128 10399 db %0010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton7Ytop,MarketPlaceButton7YBottom,MarketPlaceButton7XLeft,MarketPlaceButton7XRight | dw $0000 + (MarketPlaceButton7Ytop*128) + (MarketPlaceButton7XLeft/2) - 128 10400 db %0001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton8Ytop,MarketPlaceButton8YBottom,MarketPlaceButton8XLeft,MarketPlaceButton8XRight | dw $0000 + (MarketPlaceButton8Ytop*128) + (MarketPlaceButton8XLeft/2) - 12810401 db %0100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton9Ytop,MarketPlaceButton9YBottom,MarketPlaceButton9XLeft,MarketPlaceButton9XRight | dw $0000 + (MarketPlaceButton9Ytop*128) + (MarketPlaceButton9XLeft/2) - 128 10402 db %0100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton10Ytop,MarketPlaceButton10YBottom,MarketPlaceButton10XLeft,MarketPlaceButton10XRight | dw $0000 + (MarketPlaceButton10Ytop*128) + (MarketPlaceButton10XLeft/2) - 128 10403 10404 db %0100 0011 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (014*128) + (140/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton11Ytop,MarketPlaceButton11YBottom,MarketPlaceButton11XLeft,MarketPlaceButton11XRight | dw $0000 + (MarketPlaceButton11Ytop*128) + (MarketPlaceButton11XLeft/2) - 128 10405 db %0010 0011 | dw $4000 + (042*128) + (140/2) - 128 | dw $4000 + (042*128) + (166/2) - 128 | dw $4000 + (042*128) + (192/2) - 128 | db MarketPlaceButton12Ytop,MarketPlaceButton12YBottom,MarketPlaceButton12XLeft,MarketPlaceButton12XRight | dw $0000 + (MarketPlaceButton12Ytop*128) + (MarketPlaceButton12XLeft/2) - 128 10406 db %0001 0011 | dw $4000 + (000*128) + (154/2) - 128 | dw $4000 + (014*128) + (154/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton13Ytop,MarketPlaceButton13YBottom,MarketPlaceButton13XLeft,MarketPlaceButton13XRight | dw $0000 + (MarketPlaceButton13Ytop*128) + (MarketPlaceButton13XLeft/2) - 12810409FirstLineintHeightCastleMagicGuild: equ 02310410SecondLineintHeightCastleMagicGuild: equ 17310411SetCastleMagicGuildInterruptHandler:10412 di10413 ld hl,CastleInterruptHandler 10414 ld ($38+1),hl 10415 ld a,$c3 10416 ld ($38),a10417 10418 ld a,(VDP_0) 10419 or 16 10420 ld (VDP_0),a 10421 out ($99),a10422 ld a,12810423 out ($99),a10425 ld a,FirstLineintHeightCastleMagicGuild10426 ld (CurrentLineIntHeight),a10427 out ($99),a10428 ld a,19+128 10429 ei10430 out ($99),a 10431 ret10433CastleOverviewMagicGuildCode:10434 call SetScreenOff10436 call SetMagicGuildButtons10438 ld hl,InGamePalette10439 call SetPalette10441 xor a10442 ld (activepage),a 10443 10444 ld a,%1100 001110445 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 10446 xor a10447 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 10448 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 10449 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 10450 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 10451 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 10453 call SetMagicGuildGraphics 10455 ld hl,CopyPage1To010456 call docopy10458 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10459 call docopy10461 call SetCastleMagicGuildInterruptHandler10462 10463 .engine: 10464 call SwapAndSetPage 10465 call PopulateControls 1046710472 ld a,(Controls)10473 bit 5,a 10474 jp nz,CastleOverviewCode10476 10477 ld ix,CastleOverviewButtonTable 10478 call CheckButtonMouseInteractionCastle10480 ld ix,CastleOverviewButtonTable10481 call SetCastleButtons 10484 10485 ld ix,GenericButtonTable 10486 call CheckButtonMouseInteractionGenericButtons10487 call .CheckButtonClicked 10489 ld ix,GenericButtonTable10490 call SetGenericButtons 10493 call WaitVblank10494 call SetScreenOn10495 jp .engine10497.CheckButtonClicked: 10498 ret nc10500 push bc 10501 call SetCastleOverViewFontPage0Y212 10502 call .ClearTextWindow10503 call .SetSpellIcon10504 pop bc 10505 push bc 10506 call .SetText10507 call SwapAndSetPage 10508 call .ClearTextWindow10509 call .SetSpellIcon10510 pop bc 10511 call .SetText10512 ret10514 .ClearTextWindow:10515 ld hl,$4000 + (154*128) + (006/2) - 12810516 ld de,$0000 + (154*128) + (006/2) - 12810517 ld bc,$0000 + (020*256) + (244/2)10518 ld a,MagicGuildBlock 10519 jp CopyRamToVramCorrectedCastleOverview 10521 .SetSpellIcon:10522 ld hl,$4000 + (126*128) + (196/2) - 12810523 ld de,$0000 + (154*128) + (008/2) - 12810524 ld bc,$0000 + (020*256) + (020/2)10525 ld a,SpellBookGraphicsBlock 10526 jp CopyRamToVramCorrectedCastleOverview 10528.SetText:10529 ld a,b10530 cp 810531 ld de,(GenericButtonTable+1+0*GenericButtonTableLenghtPerButton)10532 jp z,.ButtonFound10533 cp 710534 ld de,(GenericButtonTable+1+1*GenericButtonTableLenghtPerButton)10535 jp z,.ButtonFound10536 cp 610537 ld de,(GenericButtonTable+1+2*GenericButtonTableLenghtPerButton)10538 jp z,.ButtonFound10539 cp 510540 ld de,(GenericButtonTable+1+3*GenericButtonTableLenghtPerButton)10541 jp z,.ButtonFound10542 cp 410543 ld de,(GenericButtonTable+1+4*GenericButtonTableLenghtPerButton)10544 jp z,.ButtonFound10545 cp 310546 ld de,(GenericButtonTable+1+5*GenericButtonTableLenghtPerButton)10547 jp z,.ButtonFound10548 cp 210549 ld de,(GenericButtonTable+1+6*GenericButtonTableLenghtPerButton)10550 jp z,.ButtonFound10551 ld de,(GenericButtonTable+1+7*GenericButtonTableLenghtPerButton)10552 .ButtonFound:10553 ld hl,EarthLevel1Untouched10554 call CompareHLwithDE10555 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth410556 jp z,.SpellFound10557 ld hl,EarthLevel2Untouched10558 call CompareHLwithDE10559 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth310560 jp z,.SpellFound10561 ld hl,EarthLevel3Untouched10562 call CompareHLwithDE10563 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth210564 jp z,.SpellFound10565 ld hl,EarthLevel4Untouched10566 call CompareHLwithDE10567 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth110568 jp z,.SpellFound10570 ld hl,FireLevel1Untouched10571 call CompareHLwithDE10572 ld hl,SpellDescriptionsMagicGuild.DescriptionFire410573 jp z,.SpellFound10574 ld hl,FireLevel2Untouched10575 call CompareHLwithDE10576 ld hl,SpellDescriptionsMagicGuild.DescriptionFire310577 jp z,.SpellFound10578 ld hl,FireLevel3Untouched10579 call CompareHLwithDE10580 ld hl,SpellDescriptionsMagicGuild.DescriptionFire210581 jp z,.SpellFound10582 ld hl,FireLevel4Untouched10583 call CompareHLwithDE10584 ld hl,SpellDescriptionsMagicGuild.DescriptionFire110585 jp z,.SpellFound10587 ld hl,AirLevel1Untouched10588 call CompareHLwithDE10589 ld hl,SpellDescriptionsMagicGuild.DescriptionAir410590 jp z,.SpellFound10591 ld hl,AirLevel2Untouched10592 call CompareHLwithDE10593 ld hl,SpellDescriptionsMagicGuild.DescriptionAir310594 jp z,.SpellFound10595 ld hl,AirLevel3Untouched10596 call CompareHLwithDE10597 ld hl,SpellDescriptionsMagicGuild.DescriptionAir210598 jp z,.SpellFound10599 ld hl,AirLevel4Untouched10600 call CompareHLwithDE10601 ld hl,SpellDescriptionsMagicGuild.DescriptionAir110602 jp z,.SpellFound10604 ld hl,WaterLevel1Untouched10605 call CompareHLwithDE10606 ld hl,SpellDescriptionsMagicGuild.DescriptionWater410607 jp z,.SpellFound10608 ld hl,WaterLevel2Untouched10609 call CompareHLwithDE10610 ld hl,SpellDescriptionsMagicGuild.DescriptionWater310611 jp z,.SpellFound10612 ld hl,WaterLevel3Untouched10613 call CompareHLwithDE10614 ld hl,SpellDescriptionsMagicGuild.DescriptionWater210615 jp z,.SpellFound10616 ld hl,WaterLevel4Untouched10617 call CompareHLwithDE10618 ld hl,SpellDescriptionsMagicGuild.DescriptionWater110619 jp z,.SpellFound10620 10621 .SpellFound:10622 push hl10623 10624 ex de,hl1062510626 ld de,$0000 + (156*128) + (010/2) - 12810627 ld bc,$0000 + (016*256) + (016/2)10628 ld a,SpellBookGraphicsBlock 10629 call CopyRamToVramCorrectedCastleOverview 10631 pop hl10632 ld b,03110633 ld c,15410634 jp SetText10636SpellDescriptionsMagicGuild:10638.DescriptionEarth4: db "Earthbound",25410639 db "Applies a 50% movement speed debuff to the selected",25410640 db "enemy unit.",25510642.DescriptionEarth3: db "Plate Armor",25410643 db "Increases the defense of the selected friendly unit",25410644 db "by 5.",25510646.DescriptionEarth2: db "Resurrection",25410647 db "Revives a segment of deceased friendly living",25410648 db "creatures.",25510650.DescriptionEarth1: db "Earthshock",25410651 db "Deals damage to all creatures in target and adjacent",25410652 db "hexes.",25510655.DescriptionFire4: db "Curse",25410656 db "Causes the selected enemy unit to deal -3 damage",25410657 db "when attacking.",25510659.DescriptionFire3: db "Blinding Fog",25410660 db "Target ranged unit deals 50% less damage.",25510662.DescriptionFire2: db "Implosion",25410663 db "Deals damage to enemy unit and adjecent units.",25510665.DescriptionFire1: db "Sunstrike",25410666 db "Calls down a solar beam to incinerate a single enemy",25410667 db "unit.",25510669.Descriptionair4: db "Haste",25410670 db "Increases the speed of the selected friendly unit by 3.",25510672.Descriptionair3: db "Shieldbreaker",25410673 db "Reduces the defense of the selected enemy unit by 4.",25510675.Descriptionair2: db "Claw Back",25410676 db "Target allied unit has unlimited retaliations each round.",25510678.Descriptionair1: db "Spell Bubble",25410679 db "Target friendly unit has a 75% chance to deflect a",25410680 db "single enemy spell.",25510683.Descriptionwater4: db "Cure",25410684 db "Dissipates all harmful spell effects while restoring a set",25410685 db "amount of HP.",25510687.Descriptionwater3: db "Ice Peak",25410688 db "Conjures an ice shard from the ground, impaling a",25410689 db "single enemy.",25510691.Descriptionwater2: db "Hypnosis",25410692 db "Enemy unit cant attack until attacked, dispelled or",25410693 db "effect wears off.",25510696.Descriptionwater1: db "Frost Ring",25410697 db "Causes damage to all units adjacent to the central hex.",25510700SetGenericButtons: 10701 ld a,(ix+GenericButtonGfxBlock)10702 ld (ButtonGfxBlockCopy),a10704 ld b,(ix+GenericButtonAmountOfButtons)10705 .loop:10706 push bc10707 call .Setbutton10708 pop bc10709 ld de,GenericButtonTableLenghtPerButton10710 add ix,de10712 djnz .loop10713 ret10715 .Setbutton:10716 bit 7,(ix+GenericButtonStatus)10717 ret z 10719 bit 0,(ix+GenericButtonStatus) 10720 res 0,(ix+GenericButtonStatus) 10721 jr nz,.goCopyButton10722 bit 1,(ix+GenericButtonStatus)10723 res 1,(ix+GenericButtonStatus)10724 ret z 10725 .goCopyButton:10727 ld l,(ix+GenericButton_SYSX_Ontouched)10728 ld h,(ix+GenericButton_SYSX_Ontouched+1)10729 bit 6,(ix+GenericButtonStatus)10730 jr nz,.go 10732 ld l,(ix+GenericButton_SYSX_MovedOver)10733 ld h,(ix+GenericButton_SYSX_MovedOver+1)10734 bit 5,(ix+GenericButtonStatus)10735 jr nz,.go 10737 ld l,(ix+GenericButton_SYSX_Clicked)10738 ld h,(ix+GenericButton_SYSX_Clicked+1)10739 .go:10741 10742 ld e,(ix+GenericButton_DYDX)10743 ld d,(ix+GenericButton_DYDX+1)10745 ld a,(ix+GenericButtonYbottom)10746 sub a,(ix+GenericButtonYtop)10747 ld b,a 10748 ld a,(ix+GenericButtonXright)10749 sub a,(ix+GenericButtonXleft)10750 srl a 10751 ld c,a 10754 ld a,(ButtonGfxBlockCopy)1075810764107671076910771 ld de,$8000 + (212*128) + (000/2) - 128 10772 call CopyRamToVramCorrectedWithoutActivePageSetting 10774 ld a,(activepage)10775 xor 110776 ld (CopyCastleButton2+dPage),a10778 ld a,(ix+GenericButtonXleft)10779 ld (CopyCastleButton2+dx),a10780 ld a,(ix+GenericButtonYtop)10781 ld (CopyCastleButton2+dy),a10783 ld a,(ix+GenericButtonYbottom)10784 sub a,(ix+GenericButtonYtop)10785 ld (CopyCastleButton2+ny),a10787 ld a,(ix+GenericButtonXright)10788 sub a,(ix+GenericButtonXleft)10789 ld (CopyCastleButton2+nx),a10791 ld hl,CopyCastleButton210792 call docopy1079310795 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10796 call docopy10797 ret10799CheckButtonMouseInteractionGenericButtons:10800 ld b,(ix+GenericButtonAmountOfButtons)10801 ld de,GenericButtonTableLenghtPerButton10803 .loop:10804 call .check10805 add ix,de10806 djnz .loop10807 ret10808 10809 .check:10810 bit 7,(ix+GenericButtonStatus) 10811 ret z 10812 10813 ld a,(spat+0) 10814 cp (ix+GenericButtonYtop)10815 jr c,.NotOverButton10816 cp (ix+GenericButtonYbottom)10817 jr nc,.NotOverButton10818 ld a,(spat+1) 10820 add a,0610821 10822 cp (ix+GenericButtonXleft)10823 jr c,.NotOverButton10824 cp (ix+GenericButtonXright)10825 jr nc,.NotOverButton10826 1082810834 ld a,(Controls)10835 bit 4,a 10836 jr nz,.MouseOverButtonAndSpacePressed10837 bit 4,(ix+GenericButtonStatus) 10838 jr nz,.MenuOptionSelected 10839 .MouseHoverOverButton:10840 ld (ix+GenericButtonStatus),%1010 001110841 ret10843 .MouseOverButtonAndSpacePressed:10844 bit 4,(ix+GenericButtonStatus) 10845 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit10846 ld a,(NewPrContr)10847 bit 4,a 10848 jr z,.MouseHoverOverButton10850 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:10851 ld (ix+GenericButtonStatus),%1001 001110852 ret10853 10854 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:10855 ld (ix+GenericButtonStatus),%1001 001110856 ret10858 .NotOverButton:10859 bit 4,(ix+GenericButtonStatus) 10860 jr nz,.buttonIsStillLit10861 bit 5,(ix+GenericButtonStatus) 10862 ret z10863 .buttonIsStillLit:10864 ld (ix+GenericButtonStatus),%1100 001110865 ret10867 .MenuOptionSelected:10868 pop af 10869 ld (ix+GenericButtonStatus),%1010 001110870 scf 10873 ld a,b 10874 ld (MenuOptionSelected?),a10875 ret10877MagicGuildButtonTableGfxBlock: db SpellBookGraphicsBlock10878MagicGuildButtonTableAmountOfButtons: db 810879MagicGuildButtonTable: 10881EarthLevel1Button:10882 db %1100 0011 | dw EarthLevel1Untouched | dw EarthLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel1Y ,MagicGuildEarthLevel1Y+16 ,MagicGuildEarthLevel1X ,MagicGuildEarthLevel1X+16 | dw $0000 + (MagicGuildEarthLevel1Y*128) + (MagicGuildEarthLevel1X/2) - 128 |10883FireLevel1Button:10884 db %1100 0011 | dw FireLevel1Untouched | dw FireLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel1Y , MagicGuildFireLevel1Y+16 , MagicGuildFireLevel1X , MagicGuildFireLevel1X+16 | dw $0000 + (MagicGuildFireLevel1Y*128) + (MagicGuildFireLevel1X/2) - 128 |10885AirLevel1Button:10886 db %1100 0011 | dw AirLevel1Untouched | dw AirLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel1Y , MagicGuildAirLevel1Y+16 , MagicGuildAirLevel1X , MagicGuildAirLevel1X+16 | dw $0000 + (MagicGuildAirLevel1Y*128) + (MagicGuildAirLevel1X/2) - 128 |10887WaterLevel1Button:10888 db %1100 0011 | dw WaterLevel1Untouched | dw WaterLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel1Y, MagicGuildWaterLevel1Y+16, MagicGuildWaterLevel1X, MagicGuildWaterLevel1X+16 | dw $0000 + (MagicGuildWaterLevel1Y*128) + (MagicGuildWaterLevel1X/2) - 128 | 1089010891EarthLevel2Button:10892 db %1100 0011 | dw EarthLevel2Untouched | dw EarthLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel2Y ,MagicGuildEarthLevel2Y+16 ,MagicGuildEarthLevel2X ,MagicGuildEarthLevel2X+16 | dw $0000 + (MagicGuildEarthLevel2Y*128) + (MagicGuildEarthLevel2X/2) - 128 |10893FireLevel2Button:10894 db %1100 0011 | dw FireLevel2Untouched | dw FireLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel2Y , MagicGuildFireLevel2Y+16 , MagicGuildFireLevel2X , MagicGuildFireLevel2X+16 | dw $0000 + (MagicGuildFireLevel2Y*128) + (MagicGuildFireLevel2X/2) - 128 |10895AirLevel2Button:10896 db %1100 0011 | dw AirLevel2Untouched | dw AirLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel2Y , MagicGuildAirLevel2Y+16 , MagicGuildAirLevel2X , MagicGuildAirLevel2X+16 | dw $0000 + (MagicGuildAirLevel2Y*128) + (MagicGuildAirLevel2X/2) - 128 |10897WaterLevel2Button:10898 db %1100 0011 | dw WaterLevel2Untouched | dw WaterLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel2Y, MagicGuildWaterLevel2Y+16, MagicGuildWaterLevel2X, MagicGuildWaterLevel2X+16 | dw $0000 + (MagicGuildWaterLevel2Y*128) + (MagicGuildWaterLevel2X/2) - 128 | 1090010901EarthLevel3Button:10902 db %1100 0011 | dw EarthLevel3Untouched | dw EarthLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel3Y ,MagicGuildEarthLevel3Y+16 ,MagicGuildEarthLevel3X ,MagicGuildEarthLevel3X+16 | dw $0000 + (MagicGuildEarthLevel3Y*128) + (MagicGuildEarthLevel3X/2) - 128 |10903FireLevel3Button:10904 db %1100 0011 | dw FireLevel3Untouched | dw FireLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel3Y , MagicGuildFireLevel3Y+16 , MagicGuildFireLevel3X , MagicGuildFireLevel3X+16 | dw $0000 + (MagicGuildFireLevel3Y*128) + (MagicGuildFireLevel3X/2) - 128 |10905AirLevel3Button:10906 db %1100 0011 | dw AirLevel3Untouched | dw AirLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel3Y , MagicGuildAirLevel3Y+16 , MagicGuildAirLevel3X , MagicGuildAirLevel3X+16 | dw $0000 + (MagicGuildAirLevel3Y*128) + (MagicGuildAirLevel3X/2) - 128 |10907WaterLevel3Button:10908 db %1100 0011 | dw WaterLevel3Untouched | dw WaterLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel3Y, MagicGuildWaterLevel3Y+16, MagicGuildWaterLevel3X, MagicGuildWaterLevel3X+16 | dw $0000 + (MagicGuildWaterLevel3Y*128) + (MagicGuildWaterLevel3X/2) - 128 | 1091010911EarthLevel4Button:10912 db %1100 0011 | dw EarthLevel4Untouched | dw EarthLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel4Y ,MagicGuildEarthLevel4Y+16 ,MagicGuildEarthLevel4X ,MagicGuildEarthLevel4X+16 | dw $0000 + (MagicGuildEarthLevel4Y*128) + (MagicGuildEarthLevel4X/2) - 128 |10913FireLevel4Button:10914 db %1100 0011 | dw FireLevel4Untouched | dw FireLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel4Y , MagicGuildFireLevel4Y+16 , MagicGuildFireLevel4X , MagicGuildFireLevel4X+16 | dw $0000 + (MagicGuildFireLevel4Y*128) + (MagicGuildFireLevel4X/2) - 128 |10915AirLevel4Button:10916 db %1100 0011 | dw AirLevel4Untouched | dw AirLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel4Y , MagicGuildAirLevel4Y+16 , MagicGuildAirLevel4X , MagicGuildAirLevel4X+16 | dw $0000 + (MagicGuildAirLevel4Y*128) + (MagicGuildAirLevel4X/2) - 128 |10917WaterLevel4Button:10918 db %1100 0011 | dw WaterLevel4Untouched | dw WaterLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel4Y, MagicGuildWaterLevel4Y+16, MagicGuildWaterLevel4X, MagicGuildWaterLevel4X+16 | dw $0000 + (MagicGuildWaterLevel4Y*128) + (MagicGuildWaterLevel4X/2) - 128 | 10920SetCastleSpellsInIX:10921 push iy10922 pop de10923 ld hl,Castle110924 ld ix,Castle1Spells10925 call CompareHLwithDE10926 ret z10928 ld hl,Castle210929 ld ix,Castle2Spells10930 call CompareHLwithDE10931 ret z10933 ld hl,Castle310934 ld ix,Castle3Spells10935 call CompareHLwithDE10936 ret z10938 ld hl,Castle410939 ld ix,Castle4Spells10940 call CompareHLwithDE10941 ret z10942 ret10944SetMagicGuildButtons:10945 ld hl,MagicGuildButtonTable-210946 ld de,GenericButtonTable-210947 ld bc,2+(GenericButtonTableLenghtPerButton*8)10948 ldir10950 call SetCastleSpellsInIX10951 ld de,GenericButtonTable10953 10954 ld hl,EarthLevel1Button10955 bit 0,(ix+0)10956 call nz,.AddButton10957 ld hl,FireLevel1Button10958 bit 0,(ix+1)10959 call nz,.AddButton10960 ld hl,AirLevel1Button10961 bit 0,(ix+2)10962 call nz,.AddButton10963 ld hl,WaterLevel1Button10964 bit 0,(ix+3)10965 call nz,.AddButton10967 ld hl,EarthLevel2Button10968 bit 1,(ix+0)10969 call nz,.AddButton10970 ld hl,FireLevel2Button10971 bit 1,(ix+1)10972 call nz,.AddButton10973 ld hl,AirLevel2Button10974 bit 1,(ix+2)10975 call nz,.AddButton10976 ld hl,WaterLevel2Button10977 bit 1,(ix+3)10978 call nz,.AddButton10980 ld hl,EarthLevel3Button10981 bit 2,(ix+0)10982 call nz,.AddButton10983 ld hl,FireLevel3Button10984 bit 2,(ix+1)10985 call nz,.AddButton10986 ld hl,AirLevel3Button10987 bit 2,(ix+2)10988 call nz,.AddButton10989 ld hl,WaterLevel3Button10990 bit 2,(ix+3)10991 call nz,.AddButton10993 ld hl,EarthLevel4Button10994 bit 3,(ix+0)10995 call nz,.AddButton10996 ld hl,FireLevel4Button10997 bit 3,(ix+1)10998 call nz,.AddButton10999 ld hl,AirLevel4Button11000 bit 3,(ix+2)11001 call nz,.AddButton11002 ld hl,WaterLevel4Button11003 bit 3,(ix+3)11004 call nz,.AddButton11006 ld a,(iy+CastleMageGuildLevel)11007 cp 411008 ret z11009 xor a11010 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a11011 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a11013 ld a,(iy+CastleMageGuildLevel)11014 cp 311015 ret z11016 xor a11017 ld (GenericButtonTable+4*GenericButtonTableLenghtPerButton),a11018 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a11020 ld a,(iy+CastleMageGuildLevel)11021 cp 211022 ret z11023 xor a11024 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a11025 ld (GenericButtonTable+3*GenericButtonTableLenghtPerButton),a11026 ret11028 .AddButton:11029 ld bc,GenericButtonTableLenghtPerButton11030 ldir11031 ret1103311034MagicGuildEarthLevel1Y: equ 04611035MagicGuildEarthLevel1X: equ 03411036MagicGuildEarthLevel2Y: equ 04611037MagicGuildEarthLevel2X: equ 07211038MagicGuildEarthLevel3Y: equ 06911039MagicGuildEarthLevel3X: equ 03411040MagicGuildEarthLevel4Y: equ 06911041MagicGuildEarthLevel4X: equ 07211043MagicGuildFireLevel1Y: equ 10511044MagicGuildFireLevel1X: equ 03411045MagicGuildFireLevel2Y: equ 10511046MagicGuildFireLevel2X: equ 07211047MagicGuildFireLevel3Y: equ 12811048MagicGuildFireLevel3X: equ 03411049MagicGuildFireLevel4Y: equ 12811050MagicGuildFireLevel4X: equ 07211052MagicGuildAirLevel1Y: equ 04611053MagicGuildAirLevel1X: equ 16611054MagicGuildAirLevel2Y: equ 04611055MagicGuildAirLevel2X: equ 20411056MagicGuildAirLevel3Y: equ 06911057MagicGuildAirLevel3X: equ 16611058MagicGuildAirLevel4Y: equ 06911059MagicGuildAirLevel4X: equ 20411061MagicGuildWaterLevel1Y: equ 10511062MagicGuildWaterLevel1X: equ 16611063MagicGuildWaterLevel2Y: equ 10511064MagicGuildWaterLevel2X: equ 20411065MagicGuildWaterLevel3Y: equ 12811066MagicGuildWaterLevel3X: equ 16611067MagicGuildWaterLevel4Y: equ 12811068MagicGuildWaterLevel4X: equ 2041107011071EarthLevel1Untouched: equ $4000 + (000*128) + (224/2) - 12811072EarthLevel1Touched: equ $4000 + (000*128) + (240/2) - 12811073EarthLevel2Untouched: equ $4000 + (016*128) + (224/2) - 12811074EarthLevel2Touched: equ $4000 + (016*128) + (240/2) - 12811075EarthLevel3Untouched: equ $4000 + (032*128) + (224/2) - 12811076EarthLevel3Touched: equ $4000 + (032*128) + (240/2) - 12811077EarthLevel4Untouched: equ $4000 + (048*128) + (224/2) - 12811078EarthLevel4Touched: equ $4000 + (048*128) + (240/2) - 12811080FireLevel1Untouched: equ $4000 + (064*128) + (224/2) - 12811081FireLevel1Touched: equ $4000 + (064*128) + (240/2) - 12811082FireLevel2Untouched: equ $4000 + (080*128) + (224/2) - 12811083FireLevel2Touched: equ $4000 + (080*128) + (240/2) - 12811084FireLevel3Untouched: equ $4000 + (096*128) + (224/2) - 12811085FireLevel3Touched: equ $4000 + (096*128) + (240/2) - 12811086FireLevel4Untouched: equ $4000 + (112*128) + (224/2) - 12811087FireLevel4Touched: equ $4000 + (112*128) + (240/2) - 12811089AirLevel1Untouched: equ $4000 + (128*128) + (224/2) - 12811090AirLevel1Touched: equ $4000 + (128*128) + (240/2) - 12811091AirLevel2Untouched: equ $4000 + (144*128) + (224/2) - 12811092AirLevel2Touched: equ $4000 + (144*128) + (240/2) - 12811093AirLevel3Untouched: equ $4000 + (160*128) + (224/2) - 12811094AirLevel3Touched: equ $4000 + (160*128) + (240/2) - 12811095AirLevel4Untouched: equ $4000 + (176*128) + (224/2) - 12811096AirLevel4Touched: equ $4000 + (176*128) + (240/2) - 12811098WaterLevel1Untouched: equ $4000 + (184*128) + (000/2) - 12811099WaterLevel1Touched: equ $4000 + (184*128) + (016/2) - 12811100WaterLevel2Untouched: equ $4000 + (184*128) + (032/2) - 12811101WaterLevel2Touched: equ $4000 + (184*128) + (048/2) - 12811102WaterLevel3Untouched: equ $4000 + (184*128) + (064/2) - 12811103WaterLevel3Touched: equ $4000 + (184*128) + (080/2) - 12811104WaterLevel4Untouched: equ $4000 + (184*128) + (096/2) - 12811105WaterLevel4Touched: equ $4000 + (184*128) + (112/2) - 12811108SetExitButtonHeight:11109 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYtop),a11110 ld (CopyCastleButton+dy),a11111 add a,3111112 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYbottom),a11113 ret11115CastleOverviewRecruitCode:11116 call SetScreenOff11118 ld a,211119 ld (AreWeInTavern1OrRecruit2?),a11122 ld a,255 11123 ld (PreviousButtonClicked),a11124 ld ix,GenericButtonTable11125 ld (PreviousButtonClickedIX),ix11126 call SetDefendingAndVisitingHeroButtons11127 ld hl,InGamePalette11128 call SetPalette11130 xor a11131 ld (activepage),a 11133 ld hl,011134 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11135 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11136 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11137 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11138 11139 ld a,%1100 001111140 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 11141 xor a11142 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 11143 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 11144 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 11145 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 11146 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 11148 ld a,13311149 call SetExitButtonHeight11151 xor a11152 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11153 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11154 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11155 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11157 ld a,%1100 0011 11158 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11159 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11160 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11161 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11162 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11163 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11165 call SetRecruitGraphics 11166 call SetResourcesPlayer11167 call SetVisitingAndDefendingHeroesAndArmy11168 call SetAvailableRecruitArmy 11169 call SetVisitingAndDefendingHeroesAndArmy1117111174 ld hl,CopyPage1To011175 call docopy11177 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady11178 call docopy11180 call SetCastleRecruitInterruptHandler11181 11182 .engine: 11183 call SwapAndSetPage 11184 call PopulateControls 1118611191 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11192 or a11193 ld a,(Controls)11194 jr z,.NotInRecruitMAXBUYWindow11195 bit 5,a 11196 call nz,ExitSingleUnitRecruitWindow11197 .NotInRecruitMAXBUYWindow:11198 bit 5,a 11199 jp nz,CastleOverviewCode11201 11202 ld ix,GenericButtonTable 11203 call CheckButtonMouseInteractionGenericButtons11205 call CastleOverviewTavernCode.CheckButtonClickedVisitingAndDefendingHeroesAndArmy 11207 11208 ld ix,(PreviousButtonClickedIX) 11209 ld a,(ix+GenericButtonStatus)11210 push af11211 ld a,(PreviousButtonClicked)11212 cp 25511213 jr z,.EndMarkButton 11214 ld (ix+GenericButtonStatus),%1001 001111215 .EndMarkButton:11216 11218 ld ix,GenericButtonTable11219 call SetGenericButtons 11221 11222 pop af11223 ld ix,(PreviousButtonClickedIX) 11224 ld (ix+GenericButtonStatus),a11225 11228 11229 ld ix,CastleOverviewButtonTable 11230 call CheckButtonMouseInteractionCastle11232 ld ix,CastleOverviewButtonTable11233 call SetCastleButtons 11236 11237 ld ix,RecruitButtonTable 11238 call CheckButtonMouseInteractionRecruitButtons11240 ld ix,RecruitButtonTable11241 call SetRecruitButtons 1124411247 call SwapAndSetPage 11248 ld ix,RecruitButtonTable11249 call SetRecruitButtons 11250 call SwapAndSetPage 11252 11253 ld ix,RecruitButtonMAXBUYTable 11254 call CheckButtonMouseInteractionRecruitMAXBUYButtons11256 ld ix,RecruitButtonMAXBUYTable11257 call SetRecruitMAXBUYButtons 11260 call CheckEndRecruitUnitWindow 11262 call WaitVblank11263 call SetScreenOn11264 jp .engine11266FirstLineintHeightCastleRecruit: equ 12611267SecondLineintHeightCastleRecruit: equ 16011268SetCastleRecruitInterruptHandler:11269 di11270 ld hl,CastleInterruptHandler 11271 ld ($38+1),hl 11272 ld a,$c3 11273 ld ($38),a11274 11275 ld a,(VDP_0) 11276 or 16 11277 ld (VDP_0),a 11278 out ($99),a11279 ld a,12811280 out ($99),a11282 ld a,FirstLineintHeightCastleRecruit11283 ld (CurrentLineIntHeight),a11284 out ($99),a11285 ld a,19+128 11286 ei11287 out ($99),a 11288 ret11290CheckEndRecruitUnitWindow:11291 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11292 or a11293 ret z11295 ld a,(NewPrContr)11296 bit 4,a 11297 ret z11299 ld a,(spat+0) 11300 cp 032 11301 jr c,ExitSingleUnitRecruitWindow11302 cp 032+092 11303 jr nc,ExitSingleUnitRecruitWindow11304 11305 ld a,(spat+1) 11307 add a,0611309 cp 048 11310 jr c,ExitSingleUnitRecruitWindow11311 cp 048+162 11312 ret c11314ExitSingleUnitRecruitWindow:11315 ld hl,011316 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11317 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11318 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11319 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11321 xor a11322 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11323 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11324 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11325 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11327 ld a,%1100 0011 11328 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11329 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11330 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11331 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11332 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11333 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11335 call SetRecruitGraphics6CreatureWindows 11336 call SetAvailableRecruitArmy 11337 call SetResourcesPlayer11338 call SwapAndSetPage 11339 call SetRecruitGraphics6CreatureWindows 11340 call SetAvailableRecruitArmy 11341 call SetResourcesPlayer11342 11343 pop af 11345 jp ExitVisitingAndDefendingArmyRoutine1134711352SetRecruitMAXBUYButtons: 11353 ld b,(ix+AmountOfButtons)11354 .loop:11355 push bc11356 call .Setbutton11357 pop bc11358 ld de,RecruitButtonMAXBUYTableLenghtPerButton11359 add ix,de11361 djnz .loop11362 ret11364 .Setbutton:11365 bit 7,(ix+RecruitButtonStatus)11366 ret z 11368 bit 0,(ix+RecruitButtonStatus) 11369 res 0,(ix+RecruitButtonStatus) 11370 jr nz,.goCopyButton11371 bit 1,(ix+RecruitButtonStatus)11372 res 1,(ix+RecruitButtonStatus)11373 ret z 11374 .goCopyButton:11376 ld l,(ix+RecruitButton_SYSX_Ontouched)11377 ld h,(ix+RecruitButton_SYSX_Ontouched+1)11378 bit 6,(ix+RecruitButtonStatus)11379 jr nz,.go 11381 ld l,(ix+RecruitButton_SYSX_MovedOver)11382 ld h,(ix+RecruitButton_SYSX_MovedOver+1)11383 bit 5,(ix+RecruitButtonStatus)11384 jr nz,.go 11386 ld l,(ix+RecruitButton_SYSX_Clicked)11387 ld h,(ix+RecruitButton_SYSX_Clicked+1)11388 .go:11390 11391 ld e,(ix+RecruitButton_DYDX)11392 ld d,(ix+RecruitButton_DYDX+1)11395 ld a,(ix+GenericButtonYbottom)11396 sub a,(ix+GenericButtonYtop)11397 ld b,a 11398 ld a,(ix+GenericButtonXright)11399 sub a,(ix+GenericButtonXleft)11400 srl a 11401 ld c,a 1140511406 ld a,ButtonsRecruitBlock 11407 call CopyRamToVramCorrectedCastleOverview 11409 ret11420CheckButtonMouseInteractionRecruitMAXBUYButtons:11421 ld b,(ix+AmountOfButtons)11422 ld de,RecruitButtonMAXBUYTableLenghtPerButton11424 .loop:11425 call .check11426 add ix,de11427 djnz .loop11428 ret11429 11430 .check:11431 bit 7,(ix+RecruitButtonStatus) 11432 ret z 11433 11434 ld a,(spat+0) 11435 cp (ix+RecruitButtonYtop)11436 jr c,.NotOverButton11437 cp (ix+RecruitButtonYbottom)11438 jr nc,.NotOverButton11439 ld a,(spat+1) 11441 add a,0611443 cp (ix+RecruitButtonXleft)11444 jr c,.NotOverButton11445 cp (ix+RecruitButtonXright)11446 jr nc,.NotOverButton11447 1144911455 ld a,(Controls)11456 bit 4,a 11457 jr nz,.MouseOverButtonAndSpacePressed11458 bit 4,(ix+RecruitButtonStatus) 11459 jr nz,.MenuOptionSelected 11460 .MouseHoverOverButton:11461 ld (ix+RecruitButtonStatus),%1010 001111462 ret11464 .MouseOverButtonAndSpacePressed:11465 bit 4,(ix+RecruitButtonStatus) 11466 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit11467 ld a,(NewPrContr)11468 bit 4,a 11469 jr z,.MouseHoverOverButton11471 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:11472 ld (ix+RecruitButtonStatus),%1001 001111473 ret11474 11475 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:11476 ld (ix+RecruitButtonStatus),%1001 001111477 ret11479 .NotOverButton:11480 bit 4,(ix+RecruitButtonStatus) 11481 jr nz,.buttonIsStillLit11482 bit 5,(ix+RecruitButtonStatus) 11483 ret z11484 .buttonIsStillLit:11485 ld (ix+RecruitButtonStatus),%1100 001111486 ret11488 .MenuOptionSelected:11489 pop af 11490 ld (ix+RecruitButtonStatus),%1010 001111491 ld a,b11492 cp 411493 jr z,.BuyButtonPressed11494 cp 311495 jr z,.MaxButtonPressed11496 cp 211497 jr z,.PlusButtonPressed11498 cp 111499 jr z,.MinusButtonPressed11500 ret11502 .MinusButtonPressed:11503 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11504 ld a,l11505 or h11506 ret z 11507 11508 dec hl11509 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11511 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11512 inc hl11513 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11515 call .GoSetAvailableAmountRecruitAmountAndTotalCost11516 call SwapAndSetPage 11517 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11519 .PlusButtonPressed:11520 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11521 ld a,l11522 or h11523 ret z 11525 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11526 inc hl1152811529 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11531 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11532 dec hl1153411535 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11537 call .GoSetAvailableAmountRecruitAmountAndTotalCost11538 call SwapAndSetPage 11539 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11543 .MaxButtonPressed:11544 call SetCastleOverViewFontPage0Y212 11546 call .SetAvailableAmountRecruitAmountAndTotalCost11547 call SwapAndSetPage 11548 call .SetAvailableAmountRecruitAmountAndTotalCost11549 ret11551 .BuyButtonPressed:11552 11553 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11554 ld a,d11555 or e11556 jp z,ExitSingleUnitRecruitWindow 11558 11559 ld c,002 11560 call .CheckAddCreaturesToVisitingHero11561 jr nc,.UnitsAdded 11562 ld c,254 11563 call .CheckAddCreaturesToVisitingHero11564 jr nc,.UnitsAdded 11566 11568 11569 ld hl,$4000 + (132*128) + (160/2) - 12811570 ld de,$0000 + (067*128) + (080/2) - 12811571 ld bc,$0000 + (041*256) + (096/2)11572 ld a,LevelUpBlock 11573 call CopyRamToVramCorrectedCastleOverview 11574 call SwapAndSetPage 11575 .WaitTriggerPressed:11576 call PopulateControls 11582 ld a,(NewPrContr)11583 and %0011 000011584 jr z,.WaitTriggerPressed11585 jp ExitSingleUnitRecruitWindow11589 .UnitsAdded: 11590 call SetResourcesCurrentPlayerinIX11591 11592 ld l,(ix+0)11593 ld h,(ix+1) 11594 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11595 xor a11596 sbc hl,de11597 ld (ix+0),l11598 ld (ix+1),h 11600 ld l,(ix+6)11601 ld h,(ix+7) 11602 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)11603 xor a11604 sbc hl,de11605 ld (ix+6),l11606 ld (ix+7),h 11608 ld l,(ix+8)11609 ld h,(ix+9) 11610 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)11611 xor a11612 sbc hl,de11613 ld (ix+8),l11614 ld (ix+9),h 11616 call .SubtractPurchasedUnitsFromCastle11617 jp ExitSingleUnitRecruitWindow11619 .CheckAddCreaturesToVisitingHero:11620 call SetVisitingOrDefendingHeroInIX 11621 ret c 11623 ld a,(SelectedCastleRecruitLevelUnit)11624 ld b,a11625 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11627 11628 ld a,(SelectedCastleRecruitLevelUnit)11629 cp (ix+HeroUnits+0) 11630 jp z,.Slot1SameUnit11631 cp (ix+HeroUnits+3) 11632 jp z,.Slot2SameUnit11633 cp (ix+HeroUnits+6) 11634 jp z,.Slot3SameUnit11635 cp (ix+HeroUnits+9) 11636 jp z,.Slot4SameUnit11637 cp (ix+HeroUnits+12) 11638 jp z,.Slot5SameUnit11639 cp (ix+HeroUnits+15) 11640 jp z,.Slot6SameUnit11641 11642 11643 xor a11644 cp (ix+HeroUnits+0) 11645 jp z,.Slot1IsEmpty11646 cp (ix+HeroUnits+3) 11647 jp z,.Slot2IsEmpty11648 cp (ix+HeroUnits+6) 11649 jp z,.Slot3IsEmpty11650 cp (ix+HeroUnits+9) 11651 jp z,.Slot4IsEmpty11652 cp (ix+HeroUnits+12) 11653 jp z,.Slot5IsEmpty11654 cp (ix+HeroUnits+15) 11655 jp z,.Slot6IsEmpty11656 scf11657 ret11658 11659 .Slot1SameUnit:11660 ld e,(ix+HeroUnits+1) 11661 ld d,(ix+HeroUnits+2) 11662 add hl,de11663 ld (ix+HeroUnits+1),l 11664 ld (ix+HeroUnits+2),h 11665 ret11666 .Slot2SameUnit:11667 ld e,(ix+HeroUnits+4) 11668 ld d,(ix+HeroUnits+5) 11669 add hl,de11670 ld (ix+HeroUnits+4),l 11671 ld (ix+HeroUnits+5),h 11672 ret11673 .Slot3SameUnit:11674 ld e,(ix+HeroUnits+7) 11675 ld d,(ix+HeroUnits+8) 11676 add hl,de11677 ld (ix+HeroUnits+7),l 11678 ld (ix+HeroUnits+8),h 11679 ret11680 .Slot4SameUnit:11681 ld e,(ix+HeroUnits+10) 11682 ld d,(ix+HeroUnits+11) 11683 add hl,de11684 ld (ix+HeroUnits+10),l 11685 ld (ix+HeroUnits+11),h 11686 ret11687 .Slot5SameUnit:11688 ld e,(ix+HeroUnits+13) 11689 ld d,(ix+HeroUnits+14) 11690 add hl,de11691 ld (ix+HeroUnits+13),l 11692 ld (ix+HeroUnits+14),h 11693 ret11694 .Slot6SameUnit:11695 ld e,(ix+HeroUnits+16) 11696 ld d,(ix+HeroUnits+17) 11697 add hl,de11698 ld (ix+HeroUnits+16),l 11699 ld (ix+HeroUnits+17),h 11700 ret11702 .Slot1IsEmpty:11703 ld (ix+HeroUnits+0),b 11704 ld (ix+HeroUnits+1),l 11705 ld (ix+HeroUnits+2),h 11706 ret11707 .Slot2IsEmpty:11708 ld (ix+HeroUnits+3),b 11709 ld (ix+HeroUnits+4),l 11710 ld (ix+HeroUnits+5),h 11711 ret11712 .Slot3IsEmpty:11713 ld (ix+HeroUnits+6),b 11714 ld (ix+HeroUnits+7),l 11715 ld (ix+HeroUnits+8),h 11716 ret11717 .Slot4IsEmpty:11718 ld (ix+HeroUnits+9),b 11719 ld (ix+HeroUnits+10),l 11720 ld (ix+HeroUnits+11),h 11721 ret11722 .Slot5IsEmpty:11723 ld (ix+HeroUnits+12),b 11724 ld (ix+HeroUnits+13),l 11725 ld (ix+HeroUnits+14),h 11726 ret11727 .Slot6IsEmpty:11728 ld (ix+HeroUnits+15),b 11729 ld (ix+HeroUnits+16),l 11730 ld (ix+HeroUnits+17),h 11731 ret11736.SubtractPurchasedUnitsFromCastle:11737 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11738 ld a,(SelectedCastleRecruitUnitWindow)11739 cp 611740 jr nz,.EndCheckUnitLevel1 11741 ld l,(iy+CastleLevel1UnitsAvail+00)11742 ld h,(iy+CastleLevel1UnitsAvail+01)11743 sbc hl,de11744 ld (iy+CastleLevel1UnitsAvail+00),l11745 ld (iy+CastleLevel1UnitsAvail+01),h11746 ret11747 .EndCheckUnitLevel1:11749 cp 511750 jr nz,.EndCheckUnitLevel2 11751 ld l,(iy+CastleLevel1UnitsAvail+02)11752 ld h,(iy+CastleLevel1UnitsAvail+03)11753 sbc hl,de11754 ld (iy+CastleLevel1UnitsAvail+02),l11755 ld (iy+CastleLevel1UnitsAvail+03),h11756 ret11757 .EndCheckUnitLevel2:11759 cp 411760 jr nz,.EndCheckUnitLevel3 11761 ld l,(iy+CastleLevel1UnitsAvail+04)11762 ld h,(iy+CastleLevel1UnitsAvail+05)11763 sbc hl,de11764 ld (iy+CastleLevel1UnitsAvail+04),l11765 ld (iy+CastleLevel1UnitsAvail+05),h11766 ret11767 .EndCheckUnitLevel3:11769 cp 311770 jr nz,.EndCheckUnitLevel411771 ld l,(iy+CastleLevel1UnitsAvail+06)11772 ld h,(iy+CastleLevel1UnitsAvail+07)11773 sbc hl,de11774 ld (iy+CastleLevel1UnitsAvail+06),l11775 ld (iy+CastleLevel1UnitsAvail+07),h11776 ret11777 .EndCheckUnitLevel4:11779 cp 211780 jr nz,.EndCheckUnitLevel511781 ld l,(iy+CastleLevel1UnitsAvail+08)11782 ld h,(iy+CastleLevel1UnitsAvail+09)11783 sbc hl,de11784 ld (iy+CastleLevel1UnitsAvail+08),l11785 ld (iy+CastleLevel1UnitsAvail+09),h11786 ret11787 .EndCheckUnitLevel5:11789 cp 111790 jr nz,.EndCheckUnitLevel611791 ld l,(iy+CastleLevel1UnitsAvail+10)11792 ld h,(iy+CastleLevel1UnitsAvail+11)11793 sbc hl,de11794 ld (iy+CastleLevel1UnitsAvail+10),l11795 ld (iy+CastleLevel1UnitsAvail+11),h11796 ret11797 .EndCheckUnitLevel6:11798 ret11805.SetAvailableAmountRecruitAmountAndTotalCost:11806 11807 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11808 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11809 add hl,de11810 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11811 ld hl,011812 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11814 .GoSetAvailableAmountRecruitAmountAndTotalCost:11816 11817 ld hl,$4000 + (118*128) + (040/2) - 12811818 ld de,$0000 + (103*128) + (088/2) - 12811819 ld bc,$0000 + (005*256) + (026/2)11820 ld a,ButtonsRecruitBlock 11821 call CopyRamToVramCorrectedCastleOverview 11823 11824 ld hl,$4000 + (086*128) + (122/2) - 12811825 ld de,$0000 + (071*128) + (170/2) - 12811826 ld bc,$0000 + (037*256) + (036/2)11827 ld a,ButtonsRecruitBlock 11828 call CopyRamToVramCorrectedCastleOverview 11830 call .SetTotalCost 11832 11833 call SetResourcesCurrentPlayerinIX11834 11835 ld l,(ix+0)11836 ld h,(ix+1) 11837 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11838 xor a11839 sbc hl,de 11840 jr nc,.EndCheckEnoughGoldToRecruitALLunits11842 11843 ld a,(SelectedCastleRecruitLevelUnit)11844 call SetCostSelectedCreatureInHL 11845 push hl 11846 call SetResourcesCurrentPlayerinIX11847 11848 ld c,(ix+0)11849 ld b,(ix+1) 11850 pop de 11852 call DivideBCbyDE 11854 11855 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11856 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11857 add hl,de11858 sbc hl,bc11859 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11860 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11861 call .SetTotalCost11862 .EndCheckEnoughGoldToRecruitALLunits:11867 11868 call SetResourcesCurrentPlayerinIX11869 11870 ld l,(ix+6)11871 ld h,(ix+7) 11872 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)11873 xor a11874 sbc hl,de 11875 jr nc,.EndCheckEnoughGemsToRecruitALLunits11877 11878 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11879 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11880 add hl,de11881 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11882 ld hl,011883 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11885 11886 ld a,(SelectedCastleRecruitLevelUnit)11887 call SetGemsCostSelectedCreatureInHL 11888 push hl 11889 call SetResourcesCurrentPlayerinIX11890 11891 ld c,(ix+6)11892 ld b,(ix+7) 11893 pop de 11895 call DivideBCbyDE 11897 11898 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11899 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11900 add hl,de11901 sbc hl,bc11902 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11903 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11904 call .SetTotalCost 11905 .EndCheckEnoughGemsToRecruitALLunits:11912 11913 call SetResourcesCurrentPlayerinIX11914 11915 ld l,(ix+8)11916 ld h,(ix+9) 11917 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)11918 xor a11919 sbc hl,de 11920 jr nc,.EndCheckEnoughRubiesToRecruitALLunits11922 11923 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11924 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11925 add hl,de11926 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11927 ld hl,011928 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11930 11931 ld a,(SelectedCastleRecruitLevelUnit)11932 call SetRubiesCostSelectedCreatureInHL 11933 push hl 11934 call SetResourcesCurrentPlayerinIX11935 11936 ld c,(ix+8)11937 ld b,(ix+9) 11938 pop de 11940 call DivideBCbyDE 11942 11943 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11944 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11945 add hl,de11946 sbc hl,bc11947 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11948 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11949 call .SetTotalCost11950 .EndCheckEnoughRubiesToRecruitALLunits:11953 call ShowRecruitWindowForSelectedUnit.amountavailable11954 call ShowRecruitWindowForSelectedUnit.recruitamount11956 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11957 ld a,h11958 or l11959 ret z11961 call ShowRecruitWindowForSelectedUnit.totalcost11962 call ShowRecruitWindowForSelectedUnit.TotalGemscost11963 call ShowRecruitWindowForSelectedUnit.TotalRubiescost11964 ret11966 .SetTotalCost:11967 11968 ld a,(SelectedCastleRecruitLevelUnit)11969 call SetCostSelectedCreatureInHL 11970 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11971 call MultiplyHlWithDE11972 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11974 11975 ld a,(SelectedCastleRecruitLevelUnit)11976 call SetGemsCostSelectedCreatureInHL 11977 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11978 call MultiplyHlWithDE11979 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11981 11982 ld a,(SelectedCastleRecruitLevelUnit)11983 call SetRubiesCostSelectedCreatureInHL 11984 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11985 call MultiplyHlWithDE11986 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11987 ret12002SetRecruitButtons: 12003 ld b,612004 .loop:12005 push bc12006 call .Setbutton12007 pop bc12008 ld de,RecruitButtonTableLenghtPerButton12009 add ix,de12011 djnz .loop12012 ret12014 .Setbutton:12015 bit 7,(ix+RecruitButtonStatus)12016 ret z 12018 bit 0,(ix+RecruitButtonStatus) 12019 res 0,(ix+RecruitButtonStatus) 12020 jr nz,.goCopyButton12021 bit 1,(ix+RecruitButtonStatus)12022 res 1,(ix+RecruitButtonStatus)12023 ret z 12024 .goCopyButton:12026 ld l,(ix+RecruitButton_SYSX_Ontouched)12027 ld h,(ix+RecruitButton_SYSX_Ontouched+1)12028 bit 6,(ix+RecruitButtonStatus)12029 jr nz,.go 12031 ld l,(ix+RecruitButton_SYSX_MovedOver)12032 ld h,(ix+RecruitButton_SYSX_MovedOver+1)12033 bit 5,(ix+RecruitButtonStatus)12034 jr nz,.go 12036 ld l,(ix+RecruitButton_SYSX_Clicked)12037 ld h,(ix+RecruitButton_SYSX_Clicked+1)12038 .go:12040 12041 ld e,(ix+RecruitButton_DYDX)12042 ld d,(ix+RecruitButton_DYDX+1)12044 ld bc,$0000 + (009*256) + (076/2) 12045 ld a,ButtonsRecruitBlock 12046 call CopyRamToVramCorrectedCastleOverview 12048 ret12061CheckButtonMouseInteractionRecruitButtons:12062 ld b,612063 ld de,RecruitButtonTableLenghtPerButton12065 .loop:12066 call .check12067 add ix,de12068 djnz .loop12069 ret12070 12071 .check:12072 bit 7,(ix+RecruitButtonStatus) 12073 ret z 12074 12075 ld a,(spat+0) 12076 cp (ix+RecruitButtonYtop)12077 jr c,.NotOverButton12078 cp (ix+RecruitButtonYbottom)12079 jr nc,.NotOverButton12080 ld a,(spat+1) 12082 add a,0612084 cp (ix+RecruitButtonXleft)12085 jr c,.NotOverButton12086 cp (ix+RecruitButtonXright)12087 jr nc,.NotOverButton12088 1209012096 ld a,(Controls)12097 bit 4,a 12098 jr nz,.MouseOverButtonAndSpacePressed12099 bit 4,(ix+RecruitButtonStatus) 12100 jr nz,.MenuOptionSelected 12101 .MouseHoverOverButton:12102 ld (ix+RecruitButtonStatus),%1010 001112103 ret12105 .MouseOverButtonAndSpacePressed:12106 bit 4,(ix+RecruitButtonStatus) 12107 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12108 ld a,(NewPrContr)12109 bit 4,a 12110 jr z,.MouseHoverOverButton12112 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12113 ld (ix+RecruitButtonStatus),%1001 001112114 ret12115 12116 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12117 ld (ix+RecruitButtonStatus),%1001 001112118 ret12120 .NotOverButton:12121 bit 4,(ix+RecruitButtonStatus) 12122 jr nz,.buttonIsStillLit12123 bit 5,(ix+RecruitButtonStatus) 12124 ret z12125 .buttonIsStillLit:12126 ld (ix+RecruitButtonStatus),%1100 001112127 ret12129 .MenuOptionSelected:12130 pop af 12134 push bc 12135 call ShowRecruitWindowForSelectedUnit12136 call SwapAndSetPage 12137 pop bc12138 call ShowRecruitWindowForSelectedUnit12139 ret12152 12153 12170CastleOverviewBuildCode: 12171 call SetScreenOff12173 call Set9BuildButtons 12175 ld hl,CastleOverviewPalette12176 call SetPalette12178 xor a12179 ld (activepage),a 12181 call SetBuildGraphics 12182 call SetResourcesPlayer12184 ld hl,CopyPage1To012185 call docopy12187 ld a,%1100 001112188 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 12189 xor a12190 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 12191 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 12192 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 12193 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 12194 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 12196 ld a,%1100 001112197 ld (BuildButtonTable+0*BuildButtonTableLenghtPerButton),a 12198 ld (BuildButtonTable+1*BuildButtonTableLenghtPerButton),a 12199 ld (BuildButtonTable+2*BuildButtonTableLenghtPerButton),a 12200 ld (BuildButtonTable+3*BuildButtonTableLenghtPerButton),a 12201 ld (BuildButtonTable+4*BuildButtonTableLenghtPerButton),a 12202 ld (BuildButtonTable+5*BuildButtonTableLenghtPerButton),a 12203 ld (BuildButtonTable+6*BuildButtonTableLenghtPerButton),a 12204 ld (BuildButtonTable+7*BuildButtonTableLenghtPerButton),a 12205 ld (BuildButtonTable+8*BuildButtonTableLenghtPerButton),a 12207 ld hl,SetSingleBuildButtonColor.putgreen12208 ld de,SingleBuildButtonTable12209 ld bc,712210 ldir12212 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12213 call docopy12215 call SetCastleBuildInterruptHandler12216 12217 .engine: 12218 call SwapAndSetPage 12219 call PopulateControls 1222112226 ld a,(Controls)12227 bit 5,a 12228 jp nz,CastleOverviewCode12230 12231 ld ix,CastleOverviewButtonTable 12232 call CheckButtonMouseInteractionCastle12234 ld ix,CastleOverviewButtonTable12235 call SetCastleButtons 12238 12239 ld ix,BuildButtonTable 12240 call CheckButtonMouseInteractionBuildButtons12242 ld ix,BuildButtonTable12243 call SetBuildButtons 12244 call SetTextBuildingWhenClicked 12247 call SetVandXSymbols12250 12251 ld ix,SingleBuildButtonTable 12252 call CheckButtonMouseInteractionSingleBuildButton12254 ld ix,SingleBuildButtonTable12255 call SetSingleBuildButton 12258 call WaitVblank12259 call SetScreenOn12260 jp .engine12262lineintheightCastleBuild: equ 1412263SetCastleBuildInterruptHandler:12264 di12265 ld hl,CastleInterruptHandler 12266 ld ($38+1),hl 12267 ld a,$c3 12268 ld ($38),a12269 12270 ld a,(VDP_0) 12271 or 16 12272 ld (VDP_0),a 12273 out ($99),a12274 ld a,12812275 out ($99),a12277 ld a,lineintheightCastleBuild12278 ld (CurrentLineIntHeight),a12279 out ($99),a12280 ld a,19+128 12281 ei12282 out ($99),a 12283 ret12285xOffsetVandX: equ 3912286YOffsetVandX: equ +012288BlueBuildButton: equ $4000 + (000*128) + (000/2) - 12812289GreenBuildButton: equ $4000 + (000*128) + (150/2) - 12812290RedBuildButton: equ $4000 + (038*128) + (050/2) - 12812293SetVandXSymbols:12294 12295 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12296 ld de,GreenBuildButton12297 call CompareHLwithDE12298 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12299 call z,.SetGreenButton12301 12302 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12303 ld de,GreenBuildButton12304 call CompareHLwithDE12305 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12306 call z,.SetGreenButton12308 12309 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12310 ld de,GreenBuildButton12311 call CompareHLwithDE12312 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12313 call z,.SetGreenButton12315 12316 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12317 ld de,GreenBuildButton12318 call CompareHLwithDE12319 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12320 call z,.SetGreenButton12322 12323 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12324 ld de,GreenBuildButton12325 call CompareHLwithDE12326 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12327 call z,.SetGreenButton12329 12330 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12331 ld de,GreenBuildButton12332 call CompareHLwithDE12333 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12334 call z,.SetGreenButton12336 12337 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12338 ld de,GreenBuildButton12339 call CompareHLwithDE12340 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12341 call z,.SetGreenButton12343 12344 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12345 ld de,GreenBuildButton12346 call CompareHLwithDE12347 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12348 call z,.SetGreenButton12350 12351 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12352 ld de,GreenBuildButton12353 call CompareHLwithDE12354 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12355 call z,.SetGreenButton12357 12358 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12359 ld de,RedBuildButton12360 call CompareHLwithDE12361 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12362 call z,.SetRedButton12364 12365 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12366 ld de,RedBuildButton12367 call CompareHLwithDE12368 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12369 call z,.SetRedButton12371 12372 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12373 ld de,RedBuildButton12374 call CompareHLwithDE12375 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12376 call z,.SetRedButton12378 12379 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12380 ld de,RedBuildButton12381 call CompareHLwithDE12382 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12383 call z,.SetRedButton12385 12386 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12387 ld de,RedBuildButton12388 call CompareHLwithDE12389 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12390 call z,.SetRedButton12392 12393 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12394 ld de,RedBuildButton12395 call CompareHLwithDE12396 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12397 call z,.SetRedButton12399 12400 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12401 ld de,RedBuildButton12402 call CompareHLwithDE12403 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12404 call z,.SetRedButton12406 12407 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12408 ld de,RedBuildButton12409 call CompareHLwithDE12410 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12411 call z,.SetRedButton12413 12414 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12415 ld de,RedBuildButton12416 call CompareHLwithDE12417 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12418 call z,.SetRedButton12419 ret12421.SetGreenButton:12422 ld hl,$4000 + (114*128) + (200/2) - 128 12423 ld bc,$0000 + (017*256) + (018/2) 12424 ld a,ButtonsBuildBlock 12425 call CopyTransparantImage12426 ret12428.SetRedButton:12429 ld hl,$4000 + (115*128) + (218/2) - 128 12430 ld bc,$0000 + (016*256) + (014/2) 12431 ld a,ButtonsBuildBlock 12432 call CopyTransparantImage12433 ret12436CopyTransparantImageEXX:12437 ex af,af'12438 exx1243912444CopyTransparantImage: 1244512446 push af12447 ld a,b12448 ld (CopyCastleButton2+ny),a12449 ld a,c12450 add a,a12451 ld (CopyCastleButton2+nx),a12452 pop af12454 push de12455 ld de,$8000 + (212*128) + (000/2) - 128 12456 call CopyRamToVramCorrectedWithoutActivePageSetting 12457 pop de12459 ld a,(activepage)12460 xor 112461 ld (CopyCastleButton2+dPage),a12463 ld a,d12464 ld (CopyCastleButton2+dy),a12465 ld a,e12466 ld (CopyCastleButton2+dx),a12468 ld hl,CopyCastleButton212469 call docopy12471 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12472 jp docopy12474CheckButtonMouseInteractionSingleBuildButton: 12475 bit 7,(ix+BuildButtonStatus) 12476 ret z 12477 12478 ld a,(spat+0) 12479 cp (ix+BuildButtonYtop)12480 jr c,.NotOverButton12481 cp (ix+BuildButtonYbottom)12482 jr nc,.NotOverButton12483 ld a,(spat+1) 12485 add a,0612487 cp (ix+BuildButtonXleft)12488 jr c,.NotOverButton12489 cp (ix+BuildButtonXright)12490 jr nc,.NotOverButton12491 1249312499 ld a,(Controls)12500 bit 4,a 12501 jr nz,.MouseOverButtonAndSpacePressed12502 bit 4,(ix+BuildButtonStatus) 12503 jr nz,.MenuOptionSelected 12504 .MouseHoverOverButton:12505 ld (ix+BuildButtonStatus),%1010 001112506 ret12508 .MouseOverButtonAndSpacePressed:12509 bit 4,(ix+BuildButtonStatus) 12510 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12511 ld a,(NewPrContr)12512 bit 4,a 12513 jr z,.MouseHoverOverButton12515 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12516 ld (ix+BuildButtonStatus),%1001 001112517 ret12518 12519 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12520 ld (ix+BuildButtonStatus),%1001 001112521 ret12523 .NotOverButton:12524 bit 4,(ix+BuildButtonStatus) 12525 jr nz,.buttonIsStillLit12526 bit 5,(ix+BuildButtonStatus) 12527 ret z12528 .buttonIsStillLit:12529 ld (ix+BuildButtonStatus),%1100 001112530 ret12532 .MenuOptionSelected:12533 12535 12536 ld (ix+BuildButtonStatus),%1010 001112538 12539 ld a,(SingleBuildButtonTable+1)12540 ld e,a12541 ld a,(SingleBuildButtonTable+2)12542 ld d,a12543 ld hl,$4000 + (148*128) + (144/2) - 12812544 xor a12545 sbc hl,de12546 ret nz12547 12549 ld a,(WhichBuildingWasClicked?)12550 cp 1 12551 jr z,.CityWalls12552 cp 2 12553 jr z,.BarracksTower12554 cp 3 12555 jr z,.Barracks12556 cp 4 12557 jr z,.Mine12558 cp 5 12559 jr z,.Sawmill12560 cp 6 12561 jr z,.MagicGuild12562 cp 7 12563 jr z,.Tavern12564 cp 8 12565 jr z,.MarketPlace12566 cp 9 12567 jr z,.Castle12569 .CityWalls: 12570 .Castle:12571 ld a,(iy+CastleLevel)12572 cp 512573 jr z,.CityWallsNewBuilding12574 inc (iy+CastleLevel)12575 jp PurchaseBuilding12576 .CityWallsNewBuilding:12577 ld a,8 12578 ld (SetNewBuilding?),a12579 jp PurchaseBuilding12581 .MarketPlace: 12582 ld a,7 12583 ld (SetNewBuilding?),a12584 jp PurchaseBuilding12586 .Tavern:12587 ld a,6 12588 ld (SetNewBuilding?),a12589 jp PurchaseBuilding12591 .MagicGuild:12592 ld a,(iy+CastleMageGuildLevel)12593 or a12594 jr z,.MagicGuildNewBuilding12595 inc (iy+CastleMageGuildLevel)12596 jp PurchaseBuilding12597 .MagicGuildNewBuilding:12598 ld a,5 12599 ld (SetNewBuilding?),a12600 jp PurchaseBuilding12602 .Sawmill:12603 ld a,(iy+CastleSawmillLevel)12604 or a12605 jr z,.SawmillNewBuilding12606 inc (iy+CastleSawmillLevel)12607 jp PurchaseBuilding12608 .SawmillNewBuilding:12609 ld a,3 12610 ld (SetNewBuilding?),a12611 jp PurchaseBuilding12613 .Mine:12614 ld a,(iy+CastleMineLevel)12615 or a12616 jr z,.MineNewBuilding12617 inc (iy+CastleMineLevel)12618 jp PurchaseBuilding12619 .MineNewBuilding:12620 ld a,4 12621 ld (SetNewBuilding?),a12622 jp PurchaseBuilding12624 .BarracksTower:12625 .Barracks:12626 ld a,(iy+CastleBarracksLevel)12627 or a12628 jr z,.BarracksNewBuilding12629 cp 512630 jr z,.BarracksTowerNewBuilding12631 inc (iy+CastleBarracksLevel)12632 jp PurchaseBuilding12633 .BarracksTowerNewBuilding:12634 ld a,2 12635 ld (SetNewBuilding?),a12636 jp PurchaseBuilding12637 .BarracksNewBuilding:12638 ld a,1 12639 ld (SetNewBuilding?),a12640 jp PurchaseBuilding12642PurchaseBuilding:12643 if UnlimitedBuildsPerTurn?=012644 ld (iy+AlreadyBuiltThisTurn?),112645 endif12647 12648 ld ix,(CheckRequirementsWhichBuilding?)12649 ld e,(ix+0)12650 ld d,(ix+1) 12651 call SetResourcesCurrentPlayerinIX12652 ld l,(ix+0)12653 ld h,(ix+1) 12654 xor a12655 sbc hl,de12656 ld (ix+0),l12657 ld (ix+1),h 12659 12660 ld ix,(CheckRequirementsWhichBuilding?)12661 ld e,(ix+2)12662 ld d,(ix+3) 12663 call SetResourcesCurrentPlayerinIX12664 ld l,(ix+2)12665 ld h,(ix+3) 12666 xor a12667 sbc hl,de12668 ld (ix+2),l12669 ld (ix+3),h 12671 12672 ld ix,(CheckRequirementsWhichBuilding?)12673 ld e,(ix+4)12674 ld d,(ix+5) 12675 call SetResourcesCurrentPlayerinIX12676 ld l,(ix+4)12677 ld h,(ix+5) 12678 xor a12679 sbc hl,de12680 ld (ix+4),l12681 ld (ix+5),h 12683 12684 ld ix,(CheckRequirementsWhichBuilding?)12685 ld e,(ix+6)12686 ld d,(ix+7) 12687 call SetResourcesCurrentPlayerinIX12688 ld l,(ix+6)12689 ld h,(ix+7) 12690 xor a12691 sbc hl,de12692 ld (ix+6),l12693 ld (ix+7),h 12695 12696 ld ix,(CheckRequirementsWhichBuilding?)12697 ld e,(ix+8)12698 ld d,(ix+9) 12699 call SetResourcesCurrentPlayerinIX12700 ld l,(ix+8)12701 ld h,(ix+9) 12702 xor a12703 sbc hl,de12704 ld (ix+8),l12705 ld (ix+9),h 12707 pop af12708 jp CastleOverviewCode127091271212725SetSingleBuildButton: 12726 bit 7,(ix+BuildButtonStatus)12727 ret z 12729 bit 0,(ix+BuildButtonStatus) 12730 res 0,(ix+BuildButtonStatus) 12731 jr nz,.goCopyButton12732 bit 1,(ix+BuildButtonStatus)12733 res 1,(ix+BuildButtonStatus)12734 ret z 12735 .goCopyButton:12737 ld l,(ix+BuildButton_SYSX_Ontouched)12738 ld h,(ix+BuildButton_SYSX_Ontouched+1)12739 bit 6,(ix+BuildButtonStatus)12740 jr nz,.go 12742 ld l,(ix+BuildButton_SYSX_MovedOver)12743 ld h,(ix+BuildButton_SYSX_MovedOver+1)12744 bit 5,(ix+BuildButtonStatus)12745 jr nz,.go 12747 ld l,(ix+BuildButton_SYSX_Clicked)12748 ld h,(ix+BuildButton_SYSX_Clicked+1)12749 .go:12751 12752 ld de,$0000 + (168*128) + (180/2) - 128 12753 ld bc,$0000 + (009*256) + (072/2) 12754 ld a,ButtonsBuildBlock 12755 call CopyRamToVramCorrectedCastleOverview 12757 ret12773Set9BuildButtons: 12774 call .Castle12775 call .MarketPlace12776 call .Tavern12777 call .MagicGuild12778 call .Sawmill12779 call .Mine12780 call .Barracks12781 call .BarracksTower12782 call .CityWalls12783 ret12785 .CityWalls:12786 ld de,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)12787 ld a,(iy+CastleLevel)12788 cp 612789 jp z,.Green12790 bit 0,(iy+AlreadyBuiltThisTurn?)12791 jp nz,.Red12792 ld hl,CityWallsCost12793 ld (CheckRequirementsWhichBuilding?),hl12794 jp .CheckRequirementsBuildingMetCityWalls12796 .BarracksTower:12797 ld de,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)12798 ld a,(iy+CastleBarracksLevel)12799 cp 612800 jp z,.Green12801 bit 0,(iy+AlreadyBuiltThisTurn?)12802 jp nz,.Red12803 ld hl,BarracksTowerCost12804 ld (CheckRequirementsWhichBuilding?),hl12805 jp .CheckRequirementsBuildingMetBarracksTower12807 .Barracks:12808 ld de,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)12809 ld a,(iy+CastleBarracksLevel)12810 cp 512811 jp nc,.Green12812 bit 0,(iy+AlreadyBuiltThisTurn?)12813 jp nz,.Red1281412820 ld a,(iy+CastleBarracksLevel)12821 or a12822 ld hl,BarracksLevel1Cost12823 jp z,.BarracksLevelFound12824 dec a12825 ld hl,BarracksLevel2Cost12826 jp z,.BarracksLevelFound12827 dec a12828 ld hl,BarracksLevel3Cost12829 jp z,.BarracksLevelFound12830 dec a12831 ld hl,BarracksLevel4Cost12832 jp z,.BarracksLevelFound12833 ld hl,BarracksLevel5Cost12834 .BarracksLevelFound:12845 ld (CheckRequirementsWhichBuilding?),hl12846 jp .CheckRequirementsBuildingMet12849 .Mine:12850 ld de,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)12851 ld a,(iy+CastleMineLevel)12852 cp 312853 jp z,.Green12854 bit 0,(iy+AlreadyBuiltThisTurn?)12855 jp nz,.Red1285612861 ld a,(iy+CastleMineLevel)12862 or a12863 ld hl,MineLevel1Cost12864 jp z,.MineLevelFound12865 dec a12866 ld hl,MineLevel2Cost12867 jp z,.MineLevelFound12868 ld hl,MineLevel3Cost12869 .MineLevelFound:12880 ld (CheckRequirementsWhichBuilding?),hl12881 jp .CheckRequirementsBuildingMet12883 .Sawmill:12884 ld de,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)12885 ld a,(iy+CastleSawmillLevel)12886 cp 312887 jp z,.Green12888 bit 0,(iy+AlreadyBuiltThisTurn?)12889 jp nz,.Red1289012894 ld a,(iy+CastleSawmillLevel)12895 or a12896 ld hl,SawmillLevel1Cost12897 jp z,.SawmillLevelFound12898 dec a12899 ld hl,SawmillLevel2Cost12900 jp z,.SawmillLevelFound12901 ld hl,SawmillLevel3Cost12902 .SawmillLevelFound:12910 ld (CheckRequirementsWhichBuilding?),hl12911 jp .CheckRequirementsBuildingMet12913 .MagicGuild:12914 ld de,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)12915 ld a,(iy+CastleMageGuildLevel)12916 cp 412917 jp z,.Green12918 bit 0,(iy+AlreadyBuiltThisTurn?)12919 jp nz,.Red1292012924 ld a,(iy+CastleMageGuildLevel)12925 or a12926 ld hl,MagicGuildLevel1Cost12927 jp z,.MagicGuildLevelFound12928 dec a12929 ld hl,MagicGuildLevel2Cost12930 jp z,.MagicGuildLevelFound12931 dec a12932 ld hl,MagicGuildLevel3Cost12933 jp z,.MagicGuildLevelFound12934 ld hl,MagicGuildLevel4Cost12935 .MagicGuildLevelFound:12947 ld (CheckRequirementsWhichBuilding?),hl12948 jp .CheckRequirementsBuildingMet12950 .Tavern:12951 ld de,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)12952 bit 0,(iy+CastleTavern)12953 jp nz,.Green12954 bit 0,(iy+AlreadyBuiltThisTurn?)12955 jp nz,.Red12956 ld hl,TavernCost12957 ld (CheckRequirementsWhichBuilding?),hl12958 jp .CheckRequirementsBuildingMet12959 12960 .MarketPlace:12961 ld de,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)12962 bit 0,(iy+CastleMarket)12963 jp nz,.Green12964 bit 0,(iy+AlreadyBuiltThisTurn?)12965 jp nz,.Red12966 ld hl,MarketPlaceCost12967 ld (CheckRequirementsWhichBuilding?),hl12968 jp .CheckRequirementsBuildingMet12969 12970 .Castle:12971 ld de,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)12972 bit 0,(iy+AlreadyBuiltThisTurn?)12973 jp nz,.Red12975 ld a,(iy+CastleLevel)12976 cp 512977 jp nc,.Green12979 ld a,(iy+CastleLevel)12980 cp 112981 ld hl,CastleLevel2Cost12982 ld (CheckRequirementsWhichBuilding?),hl12983 jp z,.CheckRequirementsBuildingMetCastleLevel212985 cp 212986 ld hl,CastleLevel3Cost12987 ld (CheckRequirementsWhichBuilding?),hl12988 jp z,.CheckRequirementsBuildingMetCastleLevel312990 cp 312991 ld hl,CastleLevel4Cost12992 ld (CheckRequirementsWhichBuilding?),hl12993 jp z,.CheckRequirementsBuildingMet1299512996 ld hl,CastleLevel5Cost12997 ld (CheckRequirementsWhichBuilding?),hl1299812999 jp .CheckRequirementsBuildingMet13000 13001 .Blue:13002 ld hl,.BlueButton13003 ld bc,6 13004 ldir13005 ret13006 13007 .Red:13008 ld hl,.RedButton13009 ld bc,6 13010 ldir13011 ret13012 13013 .Green:13014 ld hl,.GreenButton13015 ld bc,6 13016 ldir13017 ret13019.BlueButton: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 12813020.GreenButton: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (038*128) + (000/2) - 12813021.RedButton: dw $4000 + (038*128) + (050/2) - 128 | dw $4000 + (038*128) + (100/2) - 128 | dw $4000 + (038*128) + (150/2) - 12813023.CheckRequirementsBuildingMetCastleLevel2:13024 ld a,(iy+CastleTavern) 13025 or a13026 jp z,.Red13027 jp .CheckRequirementsBuildingMet13029.CheckRequirementsBuildingMetCastleLevel3:13030 ld a,(iy+CastleMarket) 13031 or a13032 jp z,.Red13033 ld a,(iy+CastleMageGuildLevel) 13034 or a13035 jp z,.Red13036 jp .CheckRequirementsBuildingMet13038.CheckRequirementsBuildingMetBarracksTower:13039 ld a,(iy+CastleBarracksLevel) 13040 cp 513041 jp nz,.Red13042 jp .CheckRequirementsBuildingMet13044.CheckRequirementsBuildingMetCityWalls:13045 ld a,(iy+CastleLevel) 13046 cp 513047 jp nz,.Red13048 jp .CheckRequirementsBuildingMet13050.CheckRequirementsBuildingMet:13051 13052 call SetResourcesCurrentPlayerinIX13053 ld l,(ix+0)13054 ld h,(ix+1) 13055 ld ix,(CheckRequirementsWhichBuilding?)13056 ld c,(ix+0)13057 ld b,(ix+1) 13058 xor a13059 sbc hl,bc13060 jp c,.Red 13062 13063 call SetResourcesCurrentPlayerinIX13064 ld l,(ix+2)13065 ld h,(ix+3) 13066 ld ix,(CheckRequirementsWhichBuilding?)13067 ld c,(ix+2)13068 ld b,(ix+3) 13069 xor a13070 sbc hl,bc13071 jp c,.Red 13073 13074 call SetResourcesCurrentPlayerinIX13075 ld l,(ix+4)13076 ld h,(ix+5) 13077 ld ix,(CheckRequirementsWhichBuilding?)13078 ld c,(ix+4)13079 ld b,(ix+5) 13080 xor a13081 sbc hl,bc13082 jp c,.Red 13084 13085 call SetResourcesCurrentPlayerinIX13086 ld l,(ix+6)13087 ld h,(ix+7) 13088 ld ix,(CheckRequirementsWhichBuilding?)13089 ld c,(ix+6)13090 ld b,(ix+7) 13091 xor a13092 sbc hl,bc13093 jp c,.Red 13095 13096 call SetResourcesCurrentPlayerinIX13097 ld l,(ix+8)13098 ld h,(ix+9) 13099 ld ix,(CheckRequirementsWhichBuilding?)13100 ld c,(ix+8)13101 ld b,(ix+9) 13102 xor a13103 sbc hl,bc13104 jp c,.Red 13105 jp .Blue 13107SetSingleBuildButtonColor:13108 push iy13110 ld a,(WhichBuildingWasClicked?)13112 cp 1 13113 ld iy,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)13114 jr z,.BuildingFound13115 cp 2 13116 ld iy,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)13117 jr z,.BuildingFound13118 cp 3 13119 ld iy,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)13120 jr z,.BuildingFound13121 cp 4 13122 ld iy,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)13123 jr z,.BuildingFound13124 cp 5 13125 ld iy,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)13126 jr z,.BuildingFound13127 cp 6 13128 ld iy,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)13129 jr z,.BuildingFound13130 cp 7 13131 ld iy,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)13132 jr z,.BuildingFound13133 cp 8 13134 ld iy,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)13135 jr z,.BuildingFound13136 cp 9 13137 ld iy,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)13138 jr z,.BuildingFound13141 .BuildingFound:13142 ld e,(iy)13143 ld d,(iy+1) 13145 pop iy13147 ld hl,$4000 + (000*128) + (000/2) - 128 13148 xor a13149 sbc hl,de13150 jr z,.blue13151 13152 ld hl,$4000 + (000*128) + (150/2) - 128 13153 xor a13154 sbc hl,de13155 jr z,.green13157 ld hl,$4000 + (038*128) + (050/2) - 128 13158 xor a13159 sbc hl,de13160 jr z,.red13162 13163 .red:13164 ld hl,.putred13165 ld de,SingleBuildButtonTable13166 ld bc,713167 ldir13168 ret13169 13170 .green:13171 ld hl,.putgreen13172 ld de,SingleBuildButtonTable13173 ld bc,713174 ldir13175 ret13176 13177 .blue:13178 ld hl,.putblue13179 ld de,SingleBuildButtonTable13180 ld bc,713181 ldir13182 ret13184.putred: db %1100 0011 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 12813185.putgreen: db %1100 0011 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 12813186.putblue: db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 12813225CheckButtonMouseInteractionBuildButtons:13226 ld b,913227 ld de,BuildButtonTableLenghtPerButton13229 .loop:13230 call .check13231 add ix,de13232 djnz .loop13233 ret13234 13235 .check:13236 bit 7,(ix+BuildButtonStatus) 13237 ret z 13238 13239 ld a,(spat+0) 13240 cp (ix+BuildButtonYtop)13241 jr c,.NotOverButton13242 cp (ix+BuildButtonYbottom)13243 jr nc,.NotOverButton13244 ld a,(spat+1) 13246 add a,0613248 cp (ix+BuildButtonXleft)13249 jr c,.NotOverButton13250 cp (ix+BuildButtonXright)13251 jr nc,.NotOverButton13252 1325413260 ld a,(Controls)13261 bit 4,a 13262 jr nz,.MouseOverButtonAndSpacePressed13263 bit 4,(ix+BuildButtonStatus) 13264 jr nz,.MenuOptionSelected 13265 .MouseHoverOverButton:13266 ld (ix+BuildButtonStatus),%1010 001113267 ret13269 .MouseOverButtonAndSpacePressed:13270 bit 4,(ix+BuildButtonStatus) 13271 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit13272 ld a,(NewPrContr)13273 bit 4,a 13274 jr z,.MouseHoverOverButton13276 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:13277 ld (ix+BuildButtonStatus),%1001 001113278 ret13279 13280 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:13281 ld (ix+BuildButtonStatus),%1001 001113282 ret13284 .NotOverButton:13285 bit 4,(ix+BuildButtonStatus) 13286 jr nz,.buttonIsStillLit13287 bit 5,(ix+BuildButtonStatus) 13288 ret z13289 .buttonIsStillLit:13290 ld (ix+BuildButtonStatus),%1100 001113291 ret13293 .MenuOptionSelected:13294 pop af 13295 ld (ix+BuildButtonStatus),%1010 001113297 ld a,313298 ld (SetTextBuilding),a13300 ld a,b13301 cp 1 13302 jp z,.CityWalls13303 cp 2 13304 jp z,.BarracksTower13305 cp 3 13306 jp z,.Barracks13307 cp 4 13308 jp z,.Mine13309 cp 5 13310 jp z,.Sawmill13311 cp 6 13312 jp z,.MagicGuild13313 cp 7 13314 jp z,.Tavern13315 cp 8 13316 jp z,.MarketPlace13317 cp 9 13318 jp z,.Castle13320 .MarketPlace:13321 ld a,(iy+CastleMarket)13322 or a13323 ld de,MarketPlaceCost13324 ld hl,TextMarketPlace13325 jp z,.SetWhichTextToPut13326 ld hl,TextMarketPlaceFinished13327 jp .SetWhichTextToPut13329 .Tavern:13330 ld a,(iy+CastleTavern)13331 or a13332 ld de,TavernCost13333 ld hl,TextTavern13334 jp z,.SetWhichTextToPut13335 ld hl,TextTavernFinished13336 jp .SetWhichTextToPut13338 .BarracksTower:13339 ld a,(iy+CastleBarracksLevel)13340 cp 613341 ld de,BarracksTowerCost13342 ld hl,TextBarracksTower13343 jp nz,.SetWhichTextToPut13344 ld hl,TextBarracksTowerFinished13345 jp .SetWhichTextToPut13347 .CityWalls:13348 ld a,(iy+CastleLevel)13349 cp 613350 ld de,CityWallsCost13351 ld hl,TextCityWalls13352 jp nz,.SetWhichTextToPut13353 ld hl,TextCityWallsFinished13354 jp .SetWhichTextToPut13355 13356 .Barracks:13357 ld a,(iy+CastleBarracksLevel)13358 cp 013359 ld de,BarracksLevel1Cost13360 ld hl,TextBarracksLevel113361 jp z,.SetWhichTextToPut13362 cp 113363 ld de,BarracksLevel2Cost13364 ld hl,TextBarracksLevel213365 jp z,.SetWhichTextToPut13366 cp 213367 ld de,BarracksLevel3Cost13368 ld hl,TextBarracksLevel313369 jp z,.SetWhichTextToPut13370 cp 313371 ld de,BarracksLevel4Cost13372 ld hl,TextBarracksLevel413373 jp z,.SetWhichTextToPut13374 cp 413375 ld de,BarracksLevel5Cost13376 ld hl,TextBarracksLevel513377 jp z,.SetWhichTextToPut13378 ld hl,TextBarracksLevel5Finished13379 jp .SetWhichTextToPut13381 .Mine:13382 ld a,(iy+CastleMineLevel)13383 cp 013384 ld de,MineLevel1Cost13385 ld hl,TextMineLevel113386 jp z,.SetWhichTextToPut13387 cp 113388 ld de,MineLevel2Cost13389 ld hl,TextMineLevel213390 jp z,.SetWhichTextToPut13391 cp 213392 ld de,MineLevel3Cost13393 ld hl,TextMineLevel313394 jp z,.SetWhichTextToPut13395 ld hl,TextMineLevel3Finished13396 jp .SetWhichTextToPut13398 .Sawmill:13399 ld a,(iy+CastleSawmillLevel)13400 cp 013401 ld de,SawmillLevel1Cost 13402 ld hl,TextSawmillLevel113403 jp z,.SetWhichTextToPut13404 cp 113405 ld de,SawmillLevel2Cost 13406 ld hl,TextSawmillLevel213407 jp z,.SetWhichTextToPut13408 cp 213409 ld de,SawmillLevel3Cost 13410 ld hl,TextSawmillLevel313411 jp z,.SetWhichTextToPut13412 ld hl,TextSawmillLevel3Finished13413 jp .SetWhichTextToPut13415 .MagicGuild:13416 ld a,(iy+CastleMageGuildLevel)13417 cp 013418 ld de,MagicGuildLevel1Cost13419 ld hl,TextMagicGuildLevel113420 jp z,.SetWhichTextToPut13421 cp 113422 ld de,MagicGuildLevel2Cost13423 ld hl,TextMagicGuildLevel213424 jp z,.SetWhichTextToPut13425 cp 213426 ld de,MagicGuildLevel3Cost13427 ld hl,TextMagicGuildLevel313428 jp z,.SetWhichTextToPut13429 cp 313430 ld de,MagicGuildLevel4Cost13431 ld hl,TextMagicGuildLevel413432 jp z,.SetWhichTextToPut13433 ld hl,TextMagicGuildLevel4Finished13434 jp .SetWhichTextToPut13436 .Castle:13437 ld a,(iy+CastleLevel)13438 cp 113439 ld de,CastleLevel2Cost13440 ld hl,TextCastleLevel213441 jp z,.SetWhichTextToPut13442 cp 213443 ld de,CastleLevel3Cost13444 ld hl,TextCastleLevel313445 jp z,.SetWhichTextToPut13446 cp 313447 ld de,CastleLevel4Cost13448 ld hl,TextCastleLevel413449 jp z,.SetWhichTextToPut13450 cp 413451 ld de,CastleLevel5Cost13452 ld hl,TextCastleLevel513453 jp z,.SetWhichTextToPut13454 ld hl,TextCastleLevel5Finished13455 jp .SetWhichTextToPut13457 .SetWhichTextToPut:13458 ld (CheckRequirementsWhichBuilding?),de13459 ld (PutWhichBuildText),hl13460 ld a,b13461 ld (WhichBuildingWasClicked?),a13462 ret13464TextCastleLevel2: 13465 db "   Town Hall",25413466 db " ",25413467 db "Generates 1000",25413468 db "gold per day",25413469 db " ",25413470 db "Cost:",25413471 db "2500 Gold",25413472 db " ",25413473 db "Requirements:",25413474 db "Tavern",2551347613479CastleLevel2Cost: 13480.Gold: dw 250013481.Wood: dw 00013482.Ore: dw 00013483.Gems: dw 00013484.Rubies: dw 00013488TextCastleLevel3: 13489 db "   City Hall",25413490 db " ",25413491 db "Generates 2000",25413492 db "gold per day",25413493 db " ",25413494 db "Cost:",25413495 db "5000 Gold",25413496 db " ",25413497 db "Requirements:",25413498 db "Magic Guild",25413499 db "Level 1",25413500 db "Market Place",25513502CastleLevel3Cost: 13503.Gold: dw 500013504.Wood: dw 00013505.Ore: dw 00013506.Gems: dw 00013507.Rubies: dw 00013509TextCastleLevel4: 13510 db "    Citadel",25413511 db " ",25413512 db "Generates 3000",25413513 db "gold per day",25413514 db " ",25413515 db "increases the",25413516 db "production of",25413517 db "all creatures",25413518 db "by 50%",25413519 db " ",25413520 db "Cost:",25413521 db "7500 Gold",25413522 db "+10 wood",25413523 db "+10 ore",25513525CastleLevel4Cost: 13526.Gold: dw 750013527.Wood: dw 01013528.Ore: dw 01013529.Gems: dw 00013530.Rubies: dw 00013532TextCastleLevel5: 13533 db "    Capitol",25413534 db " ",25413535 db "Generates 4000",25413536 db "gold per day",25413537 db " ",25413538 db "increases the",25413539 db "production of",25413540 db "all creatures",25413541 db "by 100%",25413542 db " ",25413543 db "Cost:",25413544 db "10000 Gold",25413545 db "+20 wood",25413546 db "+20 ore",25513547TextCastleLevel5Finished: 13548 db "    Capitol",25413549 db " ",25413550 db "Generates 4000",25413551 db "gold per day",25413552 db " ",25413553 db "increases the",25413554 db "production of",25413555 db "all creatures",25413556 db "by 100%",25513558CastleLevel5Cost: 13559.Gold: dw 1000013560.Wood: dw 02013561.Ore: dw 02013562.Gems: dw 00013563.Rubies: dw 00013565TextMarketPlace: 13566 db "  Market Place",25413567 db " ",25413568 db "Facilitates the",25413569 db "commerce of",25413570 db "crucial resources",25413571 db " ",25413572 db "Cost:",25413573 db "500 Gold",25413574 db "+5 Wood",25513575TextMarketPlaceFinished: 13576 db "  Market Place",25413577 db " ",25413578 db "Facilitates the",25413579 db "commerce of",25413580 db "crucial resources",25513582MarketPlaceCost:13583.Gold: dw 50013584.Wood: dw 0513585.Ore: dw 0013586.Gems: dw 0013587.Rubies: dw 0013589TextTavern: 13590 db "    Tavern",25413591 db " ",25413592 db "Grants the ",25413593 db "capability to",25413594 db "enlist visiting",25413595 db "heroes into",25413596 db "service",25413597 db " ",25413598 db "Cost:",25413599 db "500 Gold",25413600 db "+5 Wood",25513601TextTavernFinished: 13602 db "    Tavern",25413603 db " ",25413604 db "Grants the ",25413605 db "capability to",25413606 db "enlist visiting",25413607 db "heroes into",25413608 db "service",25513609 13610TavernCost:13611.Gold: dw 50013612.Wood: dw 0513613.Ore: dw 0013614.Gems: dw 0013615.Rubies: dw 0013617TextMagicGuildLevel1: 13618 db " Magic Guild 1",25413619 db " ",25413620 db "Adds two level 1",25413621 db "spells to the",25413622 db "magic guild",25413623 db " ",25413624 db "An overnight stay",25413625 db "at the Castle",25413626 db "completely refills",25413627 db "heroes' magic",25413628 db "points.",25413629 db " ",25413630 db "Cost:",25413631 db "2000 Gold",25413632 db "+5 Wood",25413633 db "+5 Ore",25513635MagicGuildLevel1Cost:13636.Gold: dw 200013637.Wood: dw 0513638.Ore: dw 0513639.Gems: dw 0013640.Rubies: dw 0013642TextMagicGuildLevel2: 13643 db " Magic Guild 2",25413644 db " ",25413645 db "Adds two level 2",25413646 db "spells to the",25413647 db "magic guild",25413648 db " ",25413649 db "Visiting heroes",25413650 db "can learn these",25413651 db "spells",25413652 db " ",25413653 db "Cost:",25413654 db "1000 Gold",25413655 db "+5 Wood",25413656 db "+5 Ore",25413657 db "+5 Gems",25413658 db "+5 Rubies",25513660MagicGuildLevel2Cost:13661.Gold: dw 100013662.Wood: dw 0513663.Ore: dw 0513664.Gems: dw 0513665.Rubies: dw 0513667TextMagicGuildLevel3: 13668 db " Magic Guild 3",25413669 db " ",25413670 db "Adds two level 3",25413671 db "spells to the",25413672 db "magic guild",25413673 db " ",25413674 db "Visiting heroes",25413675 db "can learn these",25413676 db "spells",25413677 db " ",25413678 db "Cost:",25413679 db "1000 Gold",25413680 db "+5 Wood",25413681 db "+5 Ore",25413682 db "+6 Gems",25413683 db "+6 Rubies",25513685MagicGuildLevel3Cost:13686.Gold: dw 100013687.Wood: dw 0513688.Ore: dw 0513689.Gems: dw 0613690.Rubies: dw 0613692TextMagicGuildLevel4: 13693 db " Magic Guild 4",25413694 db " ",25413695 db "Adds two level 4",25413696 db "spells to the",25413697 db "magic guild",25413698 db " ",25413699 db "Visiting heroes",25413700 db "can learn these",25413701 db "spells",25413702 db " ",25413703 db "Cost:",25413704 db "1000 Gold",25413705 db "+5 Wood",25413706 db "+5 Ore",25413707 db "+8 Gems",25413708 db "+8 Rubies",25513709TextMagicGuildLevel4Finished: 13710 db " Magic Guild 4",25413711 db " ",25413712 db "Adds two level 4",25413713 db "spells to the",25413714 db "magic guild",25413715 db " ",25413716 db "Visiting heroes",25413717 db "can learn these",25413718 db "spells if their",25413719 db "skill requirements",25413720 db "are met",25513721MagicGuildLevel4Cost:13722.Gold: dw 100013723.Wood: dw 0513724.Ore: dw 0513725.Gems: dw 0813726.Rubies: dw 0813728TextSawmillLevel1: 13729 db "  Sawmill 1",25413730 db " ",25413731 db "Produces:",25413732 db "+1 wood",25413733 db "per day",25413734 db " ",25413735 db "Cost:",25413736 db "1000 Gold",25513738SawmillLevel1Cost:13739.Gold: dw 100013740.Wood: dw 0013741.Ore: dw 0013742.Gems: dw 0013743.Rubies: dw 0013745TextSawmillLevel2: 13746 db "  Sawmill 2",25413747 db " ",25413748 db "Produces:",25413749 db "+2 wood",25413750 db "per day",25413751 db " ",25413752 db "Cost:",25413753 db "1500 Gold",25513755SawmillLevel2Cost:13756.Gold: dw 150013757.Wood: dw 0013758.Ore: dw 0013759.Gems: dw 0013760.Rubies: dw 0013762TextSawmillLevel3: 13763 db "  Sawmill 3",25413764 db " ",25413765 db "Produces:",25413766 db "+3 wood",25413767 db "per day",25413768 db " ",25413769 db "Cost:",25413770 db "2000 Gold",25513771TextSawmillLevel3Finished: 13772 db "  Sawmill 3",25413773 db " ",25413774 db "Produces:",25413775 db "+3 wood",25413776 db "per day",25513777SawmillLevel3Cost:13778.Gold: dw 200013779.Wood: dw 0013780.Ore: dw 0013781.Gems: dw 0013782.Rubies: dw 0013784TextMineLevel1: 13785 db "   Mine 1",25413786 db " ",25413787 db "Produces:",25413788 db "+1 ore",25413789 db "per day",25413790 db " ",25413791 db "Cost:",25413792 db "1000 Gold",25513794MineLevel1Cost:13795.Gold: dw 100013796.Wood: dw 0013797.Ore: dw 0013798.Gems: dw 0013799.Rubies: dw 0013801TextMineLevel2: 13802 db "   Mine 2",25413803 db " ",25413804 db "Produces:",25413805 db "+2 ore",25413806 db "+1 gem",25413807 db "per day",25413808 db " ",25413809 db "Cost:",25413810 db "2000 Gold",25513812MineLevel2Cost:13813.Gold: dw 200013814.Wood: dw 0013815.Ore: dw 0013816.Gems: dw 0013817.Rubies: dw 0013819TextMineLevel3: 13820 db "   Mine 3",25413821 db " ",25413822 db "Produces:",25413823 db "+3 ore",25413824 db "+1 gem",25413825 db "+1 ruby",25413826 db "per day",25413827 db " ",25413828 db "Cost:",25413829 db "2500 Gold",25513830TextMineLevel3Finished: 13831 db "   Mine 3",25413832 db " ",25413833 db "Produces:",25413834 db "+3 ore",25413835 db "+1 gem",25413836 db "+1 ruby",25413837 db "per day",25513838 13839MineLevel3Cost:13840.Gold: dw 250013841.Wood: dw 0013842.Ore: dw 0013843.Gems: dw 0013844.Rubies: dw 0013846TextBarracksLevel1: 13847 db "  Barracks 1",25413848 db " ",25413849 db "Manufactures",25413850 db "level 1 creatures",25413851 db "each bearing",25413852 db "their own unique",25413853 db "attributes and",25413854 db "powers",25413855 db " ",25413856 db "Replenishes every",25413857 db "week",25413858 db " ",25413859 db "Cost:",25413860 db "500 Gold",25413861 db "+5 Wood",25513863BarracksLevel1Cost:13864.Gold: dw 50013865.Wood: dw 0513866.Ore: dw 0013867.Gems: dw 0013868.Rubies: dw 0013870TextBarracksLevel2: 13871 db "  Barracks 2",25413872 db " ",25413873 db "Manufactures",25413874 db "level 2 creatures",25413875 db "each bearing",25413876 db "their own unique",25413877 db "attributes and",25413878 db "powers",25413879 db " ",25413880 db "Replenishes every",25413881 db "week",25413882 db " ",25413883 db "Cost:",25413884 db "1000 Gold",25413885 db "+5 Wood",25413886 db "+5 Ore",25513888BarracksLevel2Cost:13889.Gold: dw 100013890.Wood: dw 0513891.Ore: dw 0513892.Gems: dw 0013893.Rubies: dw 0013895TextBarracksLevel3: 13896 db "  Barracks 3",25413897 db " ",25413898 db "Manufactures",25413899 db "level 3 creatures",25413900 db "each bearing",25413901 db "their own unique",25413902 db "attributes and",25413903 db "powers",25413904 db " ",25413905 db "Replenishes every",25413906 db "week",25413907 db " ",25413908 db "Cost:",25413909 db "1500 Gold",25413910 db "+5 Ore",25513912BarracksLevel3Cost:13913.Gold: dw 150013914.Wood: dw 0013915.Ore: dw 0513916.Gems: dw 0013917.Rubies: dw 0013919TextBarracksLevel4: 13920 db "  Barracks 4",25413921 db " ",25413922 db "Manufactures",25413923 db "level 4 creatures",25413924 db " ",25413925 db "Replenishes every",25413926 db "week",25413927 db " ",25413928 db "Cost:",25413929 db "2000 Gold",25413930 db "+3 Wood",25413931 db "+3 Ore",25413932 db "+1 Gems",25413933 db "+1 Rubies",25513935BarracksLevel4Cost:13936.Gold: dw 200013937.Wood: dw 0313938.Ore: dw 0313939.Gems: dw 0113940.Rubies: dw 0113942TextBarracksLevel5: 13943 db "  Barracks 5",25413944 db " ",25413945 db "Manufactures",25413946 db "level 5 creatures",25413947 db "each bearing",25413948 db "their own unique",25413949 db "attributes and",25413950 db "powers",25413951 db " ",25413952 db "Replenishes every",25413953 db "week",25413954 db " ",25413955 db "Cost:",25413956 db "5000 Gold",25413957 db "+15 Wood",25513958TextBarracksLevel5Finished:13959 db "  Barracks 5",25413960 db " ",25413961 db "Manufactures",25413962 db "level 5 creatures",25413963 db "each bearing",25413964 db "their own unique",25413965 db "attributes and",25413966 db "powers",25413967 db " ",25413968 db "Replenishes every",25413969 db "week",25513972BarracksLevel5Cost:13973.Gold: dw 500013974.Wood: dw 1513975.Ore: dw 0013976.Gems: dw 0013977.Rubies: dw 0013979TextBarracksTower: 13980 db " Barracks Tower",25413981 db " ",25413982 db "Manufactures",25413983 db "level 6 creatures",25413984 db " ",25413985 db "Replenishes every",25413986 db "week",25413987 db " ",25413988 db "Cost:",25413989 db "20000 Gold",25413990 db "+10 Gems",25413991 db "+10 Rubies",25413992 db " ",25413993 db "Requirements:",25413994 db "Barracks 5",25513995TextBarracksTowerFinished: 13996 db " Barracks Tower",25413997 db " ",25413998 db "Manufactures",25413999 db "level 6 creatures",25414000 db "each bearing",25414001 db "their own unique",25414002 db "attributes and",25414003 db "powers",25414004 db " ",25414005 db "Replenishes every",25414006 db "week",25514007 14008BarracksTowerCost:14009.Gold: dw 2000014010.Wood: dw 0014011.Ore: dw 0014012.Gems: dw 1014013.Rubies: dw 1014015TextCityWalls: 14016 db "   City Walls",25414017 db " ",25414018 14019 db "Strengthens city",25414020 db "defenses with",25414021 db "fortified walls,",25414022 db "granting heroes in",25414023 db "the defending hero",25414024 db "slot + 5 defense",25414025 14026 db " ",25414027 db "Cost:",25414028 db "2000 Gold",25414029 db "+5 Wood",25414030 db "+5 Ore",25414031 db " ",25414032 db "Requirements:",25414033 db "Capitol",25514034TextCityWallsFinished: 14035 db "   City Walls",25414036 db " ",25414037 db "Enhances your",25414038 db "city's security",25414039 db "through fortified",25414040 db "walls that stand",25414041 db "resolute against",25414042 db "relentless sieges",25414043 db " ",25414044 db "The defending hero",25414045 db "slot grants heroes",25414046 db "+5 defense",25514051CityWallsCost:14052.Gold: dw 200014053.Wood: dw 514054.Ore: dw 514055.Gems: dw 0014056.Rubies: dw 0014069SetBuildButtons: 14070 ld b,914071 .loop:14072 push bc14073 call .Setbutton14074 pop bc14075 ld de,BuildButtonTableLenghtPerButton14076 add ix,de14078 djnz .loop14079 ret14081 .Setbutton:14082 bit 7,(ix+BuildButtonStatus)14083 ret z 14085 bit 0,(ix+BuildButtonStatus) 14086 res 0,(ix+BuildButtonStatus) 14087 jr nz,.goCopyButton14088 bit 1,(ix+BuildButtonStatus)14089 res 1,(ix+BuildButtonStatus)14090 ret z 14091 .goCopyButton:14093 ld l,(ix+BuildButton_SYSX_Ontouched)14094 ld h,(ix+BuildButton_SYSX_Ontouched+1)14095 bit 6,(ix+BuildButtonStatus)14096 jr nz,.go 14098 ld l,(ix+BuildButton_SYSX_MovedOver)14099 ld h,(ix+BuildButton_SYSX_MovedOver+1)14100 bit 5,(ix+BuildButtonStatus)14101 jr nz,.go 14103 ld l,(ix+BuildButton_SYSX_Clicked)14104 ld h,(ix+BuildButton_SYSX_Clicked+1)14105 .go:14107 14108 ld de,$8000 + (212*128) + (000/2) - 128 14109 ld bc,$0000 + (038*256) + (050/2) 14110 ld a,ButtonsBuildBlock 14111 call CopyRamToVramCorrectedWithoutActivePageSetting 14113 ld a,(activepage)14114 xor 114115 ld (CopyBuildButton+dPage),a14116 ld (CopyBuildButtonImage+dPage),a14118 14119 ld a,(ix+BuildButtonYtop)14120 ld (CopyBuildButton+dy),a14121 ld (CopyBuildButtonImage+dy),a14122 ld a,(ix+BuildButtonXleft)14123 ld (CopyBuildButton+dx),a14124 ld (CopyBuildButtonImage+dx),a14126 ld hl,CopyBuildButton14127 call docopy14129 14130 ld l,(ix+BuildButtonImage_SYSX)14131 ld h,(ix+BuildButtonImage_SYSX+1)14132 ld de,$8000 + (212*128) + (050/2) - 128 14133 ld bc,$0000 + (033*256) + (050/2) 14134 ld a,ButtonsBuildBlock 14135 call CopyRamToVramCorrectedWithoutActivePageSetting 14136 14137 ld hl,CopyBuildButtonImage14138 call docopy1413914141 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14142 call docopy14143 ret14163TextGoldPerDay: db "Gold/day",25514165SetNameCastleAndDailyIncome:14166 call SetCastleOverViewFontPage0Y212 14167 ld b,20014168 ld c,214170 push iy14171 pop hl14172 ld de,CastleName14173 add hl,de14174 call SetText14176 ld c,009 14177 ld b,196+004 14179 ld a,(iy+CastleLevel)14180 cp 1 14181 ld hl,50014182 jr z,.CastleLevelFound14184 ld b,196 14186 cp 2 14187 ld hl,100014188 jr z,.CastleLevelFound14190 cp 3 14191 ld hl,200014192 jr z,.CastleLevelFound14194 cp 4 14195 ld hl,300014196 jr z,.CastleLevelFound14198 cp 5 14199 ld hl,400014200 jr z,.CastleLevelFound14201 14202 .CastleLevelFound:14204 call SetNumber16BitCastle 14206 ld b,21914207 ld c,00914208 ld hl,TextGoldPerDay14209 call SetText14211 14212 ld b,23014213 ld c,01614214 ld hl,.TextDay14215 call SetText14217 14218 ld bc,(Date)14219 ld de,7 14220 call DivideBCbyDE 14221 inc hl 14222 ld b,248 14223 ld c,016 14224 jp SetNumber16BitCastle14226 .TextDay: db "Day:",25514228HandleAllHeroesLearnMagicGuildSpells:14229 push iy14230 14231 ld ix,pl1hero1y14232 ld b,amountofheroesperplayer14233 call .loop14234 ld ix,pl2hero1y14235 ld b,amountofheroesperplayer14236 call .loop14237 ld ix,pl3hero1y14238 ld b,amountofheroesperplayer14239 call .loop14240 ld ix,pl4hero1y14241 ld b,amountofheroesperplayer14242 call .loop14244 pop iy14245 ret14247 .loop:14248 push bc14249 call .CheckHero14250 pop bc14251 ld de,lenghtherotable14252 add ix,de14253 djnz .loop14254 ret14256 .CheckHero: 14257 ld a,(ix+HeroStatus) 14258 cp 214259 jr z,.CheckWhichCastle14260 cp 25414261 ret nz14263 .CheckWhichCastle: 14264 ld iy,Castle114265 call .FindCastle14266 ld iy,Castle214267 call .FindCastle14268 ld iy,Castle314269 call .FindCastle14270 ld iy,Castle414271 call .FindCastle14272 ld iy,Castle514273 call .FindCastle14274 ret14276 .FindCastle:14277 ld a,(ix+HeroY) 14278 inc a 14279 cp (iy+CastleY)14280 ret nz14282 ld a,(ix+HeroX) 14283 dec a 14284 dec a 14285 cp (iy+CastleX)14286 ret nz14287 14288 pop af 14290 ld b,(iy+CastleMageGuildLevel) 14291 14292 push ix14295 14302 call SetCastleSpellsInIX 14303 pop iy 14305 ld c,(ix+0) 14306 call .CheckLevel234SpellsPossibleToLearn14307 ld a,c14308 or (iy+HeroEarthSpells)14309 ld (iy+HeroEarthSpells),a14310 ld c,(ix+1) 14311 call .CheckLevel234SpellsPossibleToLearn14312 ld a,c14313 or (iy+HeroFireSpells)14314 ld (iy+HeroFireSpells),a14315 ld c,(ix+2) 14316 call .CheckLevel234SpellsPossibleToLearn14317 ld a,c14318 or (iy+HeroAirSpells)14319 ld (iy+HeroAirSpells),a14320 ld c,(ix+3) 14321 call .CheckLevel234SpellsPossibleToLearn14322 ld a,c14323 or (iy+HeroWaterSpells)14324 ld (iy+HeroWaterSpells),a14325 14326 push iy14327 pop ix 14328 ret14330.CheckLevel234SpellsPossibleToLearn: 14331 call .CheckMageGuildLevel14333 14334 ld a,30 14335 cp (iy+HeroSkills+0)14336 ret z14337 cp (iy+HeroSkills+1)14338 ret z14339 cp (iy+HeroSkills+2)14340 ret z14341 cp (iy+HeroSkills+3)14342 ret z14343 cp (iy+HeroSkills+4)14344 ret z14345 cp (iy+HeroSkills+5)14346 ret z14348 res 3,c 14350 ld a,29 14351 cp (iy+HeroSkills+0)14352 ret z14353 cp (iy+HeroSkills+1)14354 ret z14355 cp (iy+HeroSkills+2)14356 ret z14357 cp (iy+HeroSkills+3)14358 ret z14359 cp (iy+HeroSkills+4)14360 ret z14361 cp (iy+HeroSkills+5)14362 ret z14364 res 2,c 14366 ld a,28 14367 cp (iy+HeroSkills+0)14368 ret z14369 cp (iy+HeroSkills+1)14370 ret z14371 cp (iy+HeroSkills+2)14372 ret z14373 cp (iy+HeroSkills+3)14374 ret z14375 cp (iy+HeroSkills+4)14376 ret z14377 cp (iy+HeroSkills+5)14378 ret z14380 res 1,c 14381 ret14383.CheckMageGuildLevel:14384 ld a,b 14385 cp 414386 ret z14387 res 3,c 14389 cp 314390 ret z14391 res 2,c 14393 cp 214394 ret z14395 res 1,c 14396 14397 cp 114398 ret z14399 res 0,c 14400 ret14402 14409CastleOverviewCode: 14410 call SetInterruptHandler 14412 ld a,314413 ld (SetResources?),a1441514418 14419 ld c,254 14420 call SetVisitingOrDefendingHeroInIX 14421 push ix14422 ld c,002 14423 call SetVisitingOrDefendingHeroInIX 14424 push ix14425 14427 call .goEnterCastle14429 14430 ld c,002 14431 call SetVisitingOrDefendingHeroInIX 14432 push ix14433 pop hl14434 pop de14435 call CompareHLwithDE 14436 jr z,.Same14438 pop af 14439 jp ActivateFirstActiveHeroForCurrentPlayer 14440 14441 .Same:14442 ld c,254 14443 call SetVisitingOrDefendingHeroInIX 14444 push ix14445 pop hl14446 pop de14447 call CompareHLwithDE 14448 ret z14449 jp ActivateFirstActiveHeroForCurrentPlayer 14450 14451 .goEnterCastle:14453 call SetScreenOff14455 ld hl,CastleOverviewPalette14456 call SetPalette14458 xor a14459 ld (activepage),a 14461 ld a,(ShowNewlyBoughtBuildingFadingIn?)14462 or a14463 jr nz,.EndCheckShowNewlyBoughtBuilding14464 call EnableNewBuilding14465 xor a14466 ld (SetNewBuilding?),a14467 .EndCheckShowNewlyBoughtBuilding:14469 call SetCastleOverviewGraphics 14470 call SwapAndSetPage 14471 call SetIndividualBuildings 14472 call SwapAndSetPage 14473 call SetNameCastleAndDailyIncome14475 ld hl,CopyPage1To014476 call docopy14478 call FadeInNewlyBoughtBuilding14480 ld a,17914481 call SetExitButtonHeight14482 call SetActiveCastleOverviewButtons14483 14484 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14485 call docopy14486 call HandleAllHeroesLearnMagicGuildSpells14488 ld a,CastleSong14489 ld (ChangeSong?),a 14491 .engine:14492 call SwapAndSetPage 14493 call PopulateControls 14499 ld a,(Controls)14500 bit 5,a 14501 ret nz14503 ld ix,CastleOverviewButtonTable 14504 call CheckButtonMouseInteractionCastleMainScreen14506 ld ix,CastleOverviewButtonTable14507 call SetCastleButtons 14509 call WaitVblank14510 call SetScreenOn 14511 jp .engine14513WaitVblank:14514 ld a,(vblankintflag) 14515 ld hl,vblankintflag14516 .checkflag:14517 cp (hl)14518 jr z,.checkflag14519 ret14521CopyPage2To0:14522 db 0,0,0,214523 db 0,0,0,014524 db 0,1,212,014525 db 0,0,$d0 14526CopyPage0To2:14527 db 0,0,0,014528 db 0,0,0,214529 db 0,1,212,014530 db 0,0,$d0 14531 14532EnableNewBuilding:14533 ld a,(SetNewBuilding?) 14534 dec a14535 jr z,.barracks14536 dec a14537 jr z,.barracksUpgrade14538 dec a14539 jr z,.sawmill14540 dec a14541 jr z,.mine14542 dec a14543 jr z,.mageguild14544 dec a14545 jr z,.tavern14546 dec a14547 jr z,.market14548 dec a14549 jr z,.citywalls14550 ret14552 .citywalls:14553 ld (iy+CastleLevel),614554 ret14556 .market:14557 ld (iy+CastleMarket),114558 ret14560 .tavern:14561 ld (iy+CastleTavern),114562 ret14564 .mageguild:14565 ld (iy+CastleMageGuildLevel),114566 ret14568 .mine:14569 ld (iy+CastleMineLevel),114570 ret14572 .sawmill:14573 ld (iy+CastleSawmillLevel),114574 ret14576 .barracksUpgrade:14577 ld (iy+CastleBarracksLevel),614578 ret14580 .barracks:14581 ld (iy+CastleBarracksLevel),114582 ret14584SetVariablesNewBuilding:14585 ld a,(SetNewBuilding?) 14586 dec a14587 jr z,.barracks14588 dec a14589 jr z,.barracksUpgrade14590 dec a14591 jr z,.sawmill14592 dec a14593 jr z,.mine14594 dec a14595 jr z,.mageguild14596 dec a14597 jr z,.tavern14598 dec a14599 jr z,.market14600 dec a14601 jr z,.citywalls14602 ret14604 .citywalls:14605 ld b,CityWallsSX14606 ld c,CityWallsSY14607 ld l,CityWallsSX+CityWallsNX14608 ld h,CityWallsSY+CityWallsNY14609 ld e,1 14610 ret14612 .market:14613 ld b,MarketSX14614 ld c,MarketSY14615 ld l,MarketSX+MarketNX14616 ld h,MarketSY+MarketNY14617 ld e,1 14618 ret14620 .tavern:14621 ld b,TavernSX14622 ld c,TavernSY14623 ld l,TavernSX+TavernNX14624 ld h,TavernSY+TavernNY14625 ld e,0 14626 ret14628 .mageguild:14629 ld b,MageGuildSX14630 ld c,MageGuildSY14631 ld l,MageGuildSX+MageGuildNX14632 ld h,MageGuildSY+MageGuildNY14633 ld e,0 14634 ret14636 .mine:14637 ld b,mineSX14638 ld c,mineSY14639 ld l,mineSX+mineNX14640 ld h,mineSY+mineNY14641 ld e,0 14642 ret14644 .sawmill:14645 ld b,sawmillSX14646 ld c,sawmillSY14647 ld l,sawmillSX+sawmillNX14648 ld h,sawmillSY+sawmillNY14649 ld e,0 14650 ret14652 .barracksUpgrade:14653 ld b,barracksUpgradeSX14654 ld c,barracksUpgradeSY14655 ld l,barracksUpgradeSX+barracksUpgradeNX14656 ld h,barracksUpgradeSY+barracksUpgradeNY14657 ld e,1 14658 ret14660 .barracks:14661 ld b,BarracksSX14662 ld c,BarracksSY14663 ld l,BarracksSX+BarracksNX14664 ld h,BarracksSY+BarracksNY14665 ld e,1 14666 ret14668 BarracksSX: equ 176-214669 BarracksSY: equ 05714670 BarracksNX: equ 08014671 BarracksNY: equ 10114673 BarracksUpgradeSX: equ 20214674 BarracksUpgradeSY: equ 00614675 BarracksUpgradeNX: equ 048 + 514676 BarracksUpgradeNY: equ 08814678 SawMillSX: equ 03214679 SawMillSY: equ 10114680 SawMillNX: equ 06014681 SawMillNY: equ 03514683 MineSX: equ 05014684 MineSY: equ 12614685 MineNX: equ 12614686 MineNY: equ 05214688 MageGuildSX: equ 00014689 MageGuildSY: equ 01914690 MageGuildNX: equ 04814691 MageGuildNY: equ 16814693 TavernSX: equ 06014694 TavernSY: equ 09714695 TavernNX: equ 15814696 TavernNY: equ 11514698 MarketSX: equ 16614699 MarketSY: equ 10614700 MarketNX: equ 090 - 214701 MarketNY: equ 08814703 CityWallsSX: equ 00014704 CityWallsSY: equ 18514705 CityWallsNX: equ 25514706 CityWallsNY: equ 02714708FadeInNewlyBoughtBuilding:14709 ld a,(SetNewBuilding?)14710 or a14711 ret z14713 ld a,114714 ld (ReloadAllObjectsInVram?),a 14716 ld a,(VDP_0+8) 14717 or %0000001014718 ld (VDP_0+8),a14719 di14720 out ($99),a14721 ld a,8+12814722 ei14723 out ($99),a14725 ld hl,CopyPage0To214726 call docopy 14727 call SetScreenOn 14729 xor a14730 ld (activepage),a 14731 call SetCastleOverviewGraphics 14732 ld a,2*32+3114733 call SetPageSpecial.setpage 14735 ld a,114736 ld (activepage),a 14738 call EnableNewBuilding14739 call SetIndividualBuildings 14741 xor a14742 ld (activepage),a 14743 call SetNameCastleAndDailyIncome14745 14747 call SetVariablesNewBuilding14748 ld d,.AmountOfBuildingSteps14749 .AmountOfBuildingSteps: equ 1314751 exx14752 ld c,$9b 14753 ld d,32 14754 ld e,17+128 14755 exx14757 ld a,b 14758 call GoBuildBuildingPart14759 call GoBuildBuildingPart14760 call GoBuildBuildingPart14761 call GoBuildBuildingPart14762 call GoBuildBuildingPart14763 call GoBuildBuildingPart14764 call GoBuildBuildingPart14765 call GoBuildBuildingPart14766 call GoBuildBuildingPart14767 call GoBuildBuildingPart14768 call GoBuildBuildingPart14769 call GoBuildBuildingPart14770 call GoBuildBuildingPart14772 ld hl,CopyPage2To014773 call docopy14774 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14775 call docopy14777 xor a14778 ld (SetNewBuilding?),a14780 ld a,(VDP_0+8) 14781 and %1111110114782 ld (VDP_0+8),a14783 di14784 out ($99),a14785 ld a,8+12814786 ei14787 out ($99),a14788 ret14790GoBuildBuildingPartBuildingThatTouchRightEdge:14791 .loop:14792 exx14793 ld hl,BuildingFadeIn 14794 ld a,d14795 di14796 out ($99),a14797 ld a,e14798 ei14799 out ($99),a14801 dw $a3ed,$a3ed,$a3ed,$a3ed14802 dw $a3ed,$a3ed,$a3ed,$a3ed14803 dw $a3ed,$a3ed,$a3ed,$a3ed14804 dw $a3ed,$a3ed,$a3ed14805 exx14806 14807 ld a,(BuildingFadeIn+sx)14808 add a,d 14809 jr nc,.go14810 add a,b 14811 ld (BuildingFadeIn+sx),a14812 ld (BuildingFadeIn+dx),a14814 ld a,(BuildingFadeIn+sy)14815 inc a14816 cp h 14817 ret nc14818 ld (BuildingFadeIn+sy),a14819 ld (BuildingFadeIn+dy),a14820 jp .loop14822 .go:14823 ld (BuildingFadeIn+sx),a14824 ld (BuildingFadeIn+dx),a14825 jp .loop14827GoBuildBuildingPart:14828 push af14830 ld (BuildingFadeIn+sx),a14831 ld (BuildingFadeIn+dx),a14832 ld a,c 14833 ld (BuildingFadeIn+sy),a14834 ld (BuildingFadeIn+dy),a 14835 bit 0,e14836 call nz,GoBuildBuildingPartBuildingThatTouchRightEdge.loop14837 bit 0,e14838 call z,.loop14840 pop af14841 inc a14842 ret14844 .loop:14845 exx14846 ld hl,BuildingFadeIn 14847 ld a,d14848 di14849 out ($99),a14850 ld a,e14851 ei14852 out ($99),a14854 dw $a3ed,$a3ed,$a3ed,$a3ed14855 dw $a3ed,$a3ed,$a3ed,$a3ed14856 dw $a3ed,$a3ed,$a3ed,$a3ed14857 dw $a3ed,$a3ed,$a3ed14858 exx14859 14860 ld a,(BuildingFadeIn+sx)14861 add a,d 14862 cp l 14863 jr c,.go14864 sub a,l 14865 add a,b 14866 ld (BuildingFadeIn+sx),a14867 ld (BuildingFadeIn+dx),a14869 ld a,(BuildingFadeIn+sy)14870 inc a14871 cp h 14872 ret nc14873 ld (BuildingFadeIn+sy),a14874 ld (BuildingFadeIn+dy),a14875 jp .loop14877 .go:14878 ld (BuildingFadeIn+sx),a14879 ld (BuildingFadeIn+dx),a14880 jp .loop14883SetActiveCastleOverviewButtons:14884 ld a,%1100 001114885 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 14886 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 14887 xor a14888 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 14889 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 14890 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 14891 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 14893 ld a,(iy+CastleBarracksLevel)14894 or a14895 jr z,.EndCheckBarracks14896 ld a,%1100 001114897 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 14898 .EndCheckBarracks:14900 ld a,(iy+CastleMageGuildLevel)14901 or a14902 jr z,.EndCheckMageGuild14903 ld a,%1100 001114904 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 14905 .EndCheckMageGuild:14907 ld a,(iy+CastleMarket)14908 or a14909 jr z,.EndCheckMarket14910 ld a,%1100 001114911 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 14912 .EndCheckMarket:14914 ld a,(iy+CastleTavern)14915 or a14916 jr z,.EndCheckTavern14917 ld a,%1100 001114918 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 14919 .EndCheckTavern:14920 ret14922SetCastleButtons: 14923 ld b,614924 .loop:14925 push bc14926 call .Setbutton14927 pop bc14928 ld de,CastleOverviewButtonTableLenghtPerButton14929 add ix,de14931 djnz .loop14932 ret14934 .Setbutton:14935 bit 7,(ix+CastleOverviewWindowButtonStatus)14936 ret z 14938 bit 0,(ix+CastleOverviewWindowButtonStatus)14939 jr nz,.bit0isSet14940 bit 1,(ix+CastleOverviewWindowButtonStatus)14941 ret z14942 14943 .bit1isSet:14944 res 1,(ix+CastleOverviewWindowButtonStatus)14945 jr .goCopyButton14946 .bit0isSet:14947 res 0,(ix+CastleOverviewWindowButtonStatus) 14948 .goCopyButton:14950 ld l,(ix+CastleOverviewWindowButton_SYSX_Ontouched)14951 ld h,(ix+CastleOverviewWindowButton_SYSX_Ontouched+1)14952 bit 6,(ix+CastleOverviewWindowButtonStatus)14953 jr nz,.go 14955 ld l,(ix+CastleOverviewWindowButton_SYSX_MovedOver)14956 ld h,(ix+CastleOverviewWindowButton_SYSX_MovedOver+1)14957 bit 5,(ix+CastleOverviewWindowButtonStatus)14958 jr nz,.go 14960 ld l,(ix+CastleOverviewWindowButton_SYSX_Clicked)14961 ld h,(ix+CastleOverviewWindowButton_SYSX_Clicked+1)1496214964 .go:1496614967 ld de,$8000 + (212*128) + (012/2) - 128 14968 ld bc,$0000 + (031*256) + (040/2) 14969 ld a,ButtonsBlock 14970 call CopyRamToVramCorrectedWithoutActivePageSetting 14972 ld a,(activepage)14973 xor 114974 ld (CopyCastleButton+dPage),a14976 ld a,(ix+CastleOverviewWindowButton_dx)14977 ld (CopyCastleButton+dx),a14979 ld hl,CopyCastleButton14980 call docopy1498114983 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14984 call docopy14985 ret14987CheckButtonMouseInteractionCastleMainScreen:14988 ld b,614989 ld de,CastleOverviewButtonTableLenghtPerButton14991 .loop:14992 call .check14993 add ix,de14994 djnz .loop14995 ret14996 14997 .check:14998 bit 7,(ix+CastleOverviewWindowButtonStatus)14999 ret z15000 15001 ld a,(spat+0) 15002 cp (ix+CastleOverviewWindowButtonYtop)15003 jr c,.NotOverButton15004 cp (ix+CastleOverviewWindowButtonYbottom)15005 jr nc,.NotOverButton15006 ld a,(spat+1) 15008 add a,0615010 cp (ix+CastleOverviewWindowButtonXleft)15011 jr c,.NotOverButton15012 cp (ix+CastleOverviewWindowButtonXright)15013 jr nc,.NotOverButton15014 1501615022 ld a,(Controls)15023 bit 4,a 15024 jr nz,.MouseOverButtonAndSpacePressed15025 bit 4,(ix+CastleOverviewWindowButtonStatus) 15026 jr nz,.MenuOptionSelected 15027 .MouseHoverOverButton:15028 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115029 ret15031 .MouseOverButtonAndSpacePressed:15032 bit 4,(ix+CastleOverviewWindowButtonStatus) 15033 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15034 ld a,(NewPrContr)15035 bit 4,a 15036 jr z,.MouseHoverOverButton15038 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15039 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115040 ret15041 15042 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15043 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115044 ret15046 .NotOverButton:15047 bit 4,(ix+CastleOverviewWindowButtonStatus) 15048 jr nz,.buttonIsStillLit15049 bit 5,(ix+CastleOverviewWindowButtonStatus) 15050 ret z15051 .buttonIsStillLit:15052 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115053 ret15055 .MenuOptionSelected:15056 ld a,b15057 cp 1 15058 jr nz,.EndCheckExit15059 pop af 15060 pop af 15061 ret15062 .EndCheckExit:15064 cp 2 15065 jr nz,.EndCheckTavern15066 15067 pop af 15068 pop af 15069 jp CastleOverviewTavernCode 15070 ret15071 .EndCheckTavern:15073 cp 3 15074 jr nz,.EndCheckMarket15075 15076 pop af 15077 pop af 15078 jp CastleOverviewMarketPlaceCode 15079 .EndCheckMarket:15081 cp 4 15082 jr nz,.EndCheckMagicGuild15083 15084 pop af 15085 pop af 15086 jp CastleOverviewMagicGuildCode 15087 .EndCheckMagicGuild:15089 cp 5 15090 jr nz,.EndCheckRecruit15091 15092 pop af 15093 pop af 15094 jp CastleOverviewRecruitCode 15095 .EndCheckRecruit:15097 15098 pop af 15099 pop af 15100 jp CastleOverviewBuildCode 1510215103CheckButtonMouseInteractionCastle:15104 ld b,615105 ld de,CastleOverviewButtonTableLenghtPerButton15107 .loop:15108 call .check15109 add ix,de15110 djnz .loop15111 ret15112 15113 .check:15114 bit 7,(ix+CastleOverviewWindowButtonStatus)15115 ret z15116 15117 ld a,(spat+0) 15118 cp (ix+CastleOverviewWindowButtonYtop)15119 jr c,.NotOverButton15120 cp (ix+CastleOverviewWindowButtonYbottom)15121 jr nc,.NotOverButton15122 ld a,(spat+1) 15124 add a,0615126 cp (ix+CastleOverviewWindowButtonXleft)15127 jr c,.NotOverButton15128 cp (ix+CastleOverviewWindowButtonXright)15129 jr nc,.NotOverButton15130 1513215138 ld a,(Controls)15139 bit 4,a 15140 jr nz,.MouseOverButtonAndSpacePressed15141 bit 4,(ix+CastleOverviewWindowButtonStatus) 15142 jr nz,.MenuOptionSelected 15143 .MouseHoverOverButton:15144 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115145 ret15147 .MouseOverButtonAndSpacePressed:15148 bit 4,(ix+CastleOverviewWindowButtonStatus) 15149 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15150 ld a,(NewPrContr)15151 bit 4,a 15152 jr z,.MouseHoverOverButton15154 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15155 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115156 ret15157 15158 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15159 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115160 ret15162 .NotOverButton:15163 bit 4,(ix+CastleOverviewWindowButtonStatus) 15164 jr nz,.buttonIsStillLit15165 bit 5,(ix+CastleOverviewWindowButtonStatus) 15166 ret z15167 .buttonIsStillLit:15168 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115169 ret15171 .MenuOptionSelected:15172 pop af 15173 pop af 15174 jp CastleOverviewCode15175 15177SetIndividualBuildings:1517815179 ld a,(iy+CastleBarracksLevel)15180 or a15181 jr z,.EndCheckBarracks15182 ld hl,$4000 + (000*128) + (000/2) - 128 15183 ld de,$0000 + (057*128) + (176/2) - 128 15184 ld bc,$0000 + (101*256) + (080/2) 15185 ld a,IndividualBuildingsBlock 15186 call CopyRamToVramCorrectedCastleOverview 15187 ld hl,CopyBarracks15188 call docopy15189 .EndCheckBarracks:1519115192 ld a,(iy+CastleBarracksLevel)15193 cp 615194 jr nz,.EndCheckBarracksUpgrade15195 ld hl,$4000 + (100*128) + (160/2) - 128 15196 ld de,$0000 + (006*128) + (202/2) - 128 15197 ld bc,$0000 + (088*256) + (048/2) 15198 ld a,IndividualBuildingsBlock 15199 call CopyRamToVramCorrectedCastleOverview 15200 ld hl,CopyBarracksUpgrade15201 call docopy15202 .EndCheckBarracksUpgrade:1520415205 ld a,(iy+CastleSawmillLevel)15206 or a15207 jr z,.EndCheckSawmill15208 ld hl,$4000 + (101*128) + (000/2) - 128 15209 ld de,$0000 + (101*128) + (032/2) - 128 15210 ld bc,$0000 + (035*256) + (060/2) 15211 ld a,IndividualBuildingsBlock 15212 call CopyRamToVramCorrectedCastleOverview 15213 ld hl,CopySawmill15214 call docopy15215 .EndCheckSawmill:1521715218 ld a,(iy+CastleMineLevel)15219 or a15220 jr z,.EndCheckMine15221 ld hl,$4000 + (136*128) + (000/2) - 128 15222 ld de,$0000 + (150*128) + (000/2) - 128 15223 ld bc,$0000 + (052*256) + (126/2) 15224 ld a,IndividualBuildingsBlock 15225 call CopyRamToVramCorrectedCastleOverview 15226 ld hl,CopyMine15227 call docopy15228 .EndCheckMine:1523015231 ld a,(iy+CastleMageGuildLevel)15232 or a15233 jr z,.EndCheckMageGuild15234 ld hl,$4000 + (000*128) + (208/2) - 128 15235 ld de,$0000 + (019*128) + (000/2) - 128 15236 ld bc,$0000 + (168*256) + (048/2) 15237 ld a,IndividualBuildingsBlock 15238 call CopyRamToVramCorrectedCastleOverview 15239 ld hl,CopyMageGuild15240 call docopy15241 .EndCheckMageGuild:15243 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady15244 call docopy1524615247 ld a,(iy+CastleTavern)15248 or a15249 jr z,.EndCheckTavern15250 ld hl,$4000 + (000*128) + (000/2) - 128 15251 ld de,$0000 + (097*128) + (060/2) - 128 15252 ld bc,$0000 + (115*256) + (158/2) 15253 ld a,IndividualBuildingsPage2Block 15254 call CopyRamToVramCorrectedCastleOverview 15255 ld hl,CopyTavern15256 call docopy15257 .EndCheckTavern:1525915260 ld a,(iy+CastleMarket)15261 or a15262 jr z,.EndCheckMarket15263 ld hl,$4000 + (000*128) + (080/2) - 128 15264 ld de,$0000 + (000*128) + (000/2) - 128 15265 ld bc,$0000 + (088*256) + (090/2) 15266 ld a,IndividualBuildingsBlock 15267 call CopyRamToVramCorrectedCastleOverview 15268 ld hl,CopyChamberOfCommerce15269 call docopy15270 .EndCheckMarket:1527215273 ld a,(iy+CastleLevel)15274 cp 615275 jr nz,.EndCheckCityWalls15276 ld hl,$4000 + (115*128) + (000/2) - 128 15277 ld de,$0000 + (185*128) + (000/2) - 128 15278 ld bc,$0000 + (027*256) + (256/2) 15279 ld a,IndividualBuildingsPage2Block 15280 call CopyRamToVramCorrectedCastleOverview 15281 ld hl,CopyCityWalls15282 call docopy15283 .EndCheckCityWalls:15284 ret15286SetCastleOverviewGraphics: 15287 ld hl,$4000 + (000*128) + (000/2) - 12815288 ld de,$0000 + (000*128) + (000/2) - 12815289 ld bc,$0000 + (212*256) + (256/2)15290 ld a,CastleOverviewBlock 15291 jp CopyRamToVramCorrectedCastleOverview 15293SetBuildGraphics: 15294 ld hl,$4000 + (000*128) + (000/2) - 12815295 ld de,$0000 + (000*128) + (000/2) - 12815296 ld bc,$0000 + (212*256) + (256/2)15297 ld a,BuildBlock 15298 call CopyRamToVramCorrectedCastleOverview 15300 15301 ld hl,$4000 + (000*128) + (000/2) - 12815302 ld de,$0000 + (000*128) + (000/2) - 12815303 ld bc,$0000 + (020*256) + (256/2)15304 ld a,ChamberOfCommerceBlock 15305 jp CopyRamToVramCorrectedCastleOverview 15307ClearTextBuildWindow:15308 ld hl,$4000 + (046*128) + (180/2) - 12815309 ld de,$0000 + (046*128) + (180/2) - 12815310 ld bc,$0000 + (131*256) + (072/2)15311 ld a,BuildBlock 15312 jp CopyRamToVramCorrectedCastleOverview 15314SetCastleOverViewFontPage0Y212: 15315 ld hl,$4000 + (000*128) + (000/2) - 12815316 ld de,$0000 + (212*128) + (000/2) - 12815317 ld bc,$0000 + (006*256) + (256/2)15318 ld a,CastleOverviewFontBlock 15319 jp CopyRamToVramCorrectedWithoutActivePageSetting 15321SetRecruitGraphics:15322 ld hl,$4000 + (000*128) + (000/2) - 12815323 ld de,$0000 + (000*128) + (000/2) - 12815324 ld bc,$0000 + (212*256) + (256/2)15325 ld a,RecruitCreaturesBlock 15326 call CopyRamToVramCorrectedCastleOverview 15328 ld a,r15329 and 315330 ld hl,$4000 + (000*128) + (000/2) - 12815331 jr z,.MonsterFound15332 dec a15333 ld hl,$4000 + (030*128) + (000/2) - 12815334 jr z,.MonsterFound15335 dec a15336 ld hl,$4000 + (060*128) + (000/2) - 12815337 jr z,.MonsterFound15338 ld hl,$4000 + (090*128) + (000/2) - 12815339 .MonsterFound:15340 ld de,$0000 + (133*128) + (000/2) - 12815341 ld bc,$0000 + (030*256) + (256/2)15342 ld a,RecruitCreatures4MonstersBlock 15343 jp CopyRamToVramCorrectedCastleOverview 15345SetRecruitGraphics6CreatureWindows:15346 ld hl,$4000 + (026*128) + (000/2) - 12815347 ld de,$0000 + (026*128) + (000/2) - 12815348 ld bc,$0000 + (103*256) + (256/2)15349 ld a,RecruitCreaturesBlock 15350 jp CopyRamToVramCorrectedCastleOverview 15352SetVisitingAndDefendingHeroesAndArmyWindow:15353 ld hl,$4000 + (174*128) + (004/2) - 12815354 ld de,$0000 + (174*128) + (004/2) - 12815355 ld bc,$0000 + (034*256) + (248/2)15356 ld a,RecruitCreaturesBlock 15357 jp CopyRamToVramCorrectedCastleOverview 15359SetMagicGuildGraphics:15360 ld hl,$4000 + (000*128) + (000/2) - 12815361 ld de,$0000 + (000*128) + (000/2) - 12815362 ld bc,$0000 + (212*256) + (256/2)15363 ld a,MagicGuildBlock 15364 jp CopyRamToVramCorrectedCastleOverview 15366SetMarketPlaceGraphics:15367 ld hl,$4000 + (000*128) + (000/2) - 12815368 ld de,$0000 + (000*128) + (000/2) - 12815369 ld bc,$0000 + (212*256) + (256/2)15370 ld a,ChamberOfCommerceBlock 15371 jp CopyRamToVramCorrectedCastleOverview 15373SetTavernGraphics:15374 ld hl,$4000 + (000*128) + (000/2) - 12815375 ld de,$0000 + (000*128) + (000/2) - 12815376 ld bc,$0000 + (212*256) + (256/2)15377 ld a,TavernBlock 15378 jp CopyRamToVramCorrectedCastleOverview 15380SetHeroArmyTransferGraphics:15381 ld hl,$4000 + (000*128) + (000/2) - 12815382 ld de,$0000 + (030*128) + (024/2) - 12815383 ld bc,$0000 + (137*256) + (156/2)15384 ld a,HeroArmyTransferGraphicsBlock 15385 jp CopyRamToVramCorrectedCastleOverview 15387CopyBarracks:15388 db 176,0,057,015389 db 176,0,057,115390 db 080,0,101,015391 db 0,%0000 0000,$9815393CopyBarracksUpgrade:15394 db 202,0,006,015395 db 202,0,006,115396 db 048,0,088,015397 db 0,%0000 0000,$9815399CopySawmill:15400 db 032,0,101,015401 db 032,0,101,115402 db 060,0,035,015403 db 0,%0000 0000,$9815405CopyMine:15406 db 000,0,150,015407 db 050,0,126,115408 db 126,0,052,015409 db 0,%0000 0000,$9815411CopyMageGuild:15412 db 000,0,019,015413 db 000,0,019,115414 db 048,0,168,015415 db 0,%0000 0000,$9815417CopyTavern:15418 db 060,0,097,015419 db 060,0,097,115420 db 158,0,115,015421 db 0,%0000 0000,$9815423CopyChamberOfCommerce:15424 db 000,0,000,015425 db 166,0,106,115426 db 090,0,088,015427 db 0,%0000 0000,$9815429CopyCityWalls:15430 db 000,0,185,015431 db 000,0,185,115432 db 000,1,027,015433 db 0,%0000 0000,$9815435SetResourcesPlayer:15436 call SetCastleOverViewFontPage0Y212 15438 ld hl,$4000 + (007*128) + (032/2) - 12815439 ld de,$0000 + (007*128) + (032/2) - 12815440 ld bc,$0000 + (005*256) + (220/2)15441 ld a,ChamberOfCommerceBlock 15442 call CopyRamToVramCorrectedCastleOverview 15444 call SetResourcesCurrentPlayerinIX15446 15447 ld b,217 15448 ld c,007 15449 ld l,(ix+0)15450 ld h,(ix+1)15451 call SetNumber16BitCastle 15453 ld b,035 15454 ld c,007 15455 ld l,(ix+2)15456 ld h,(ix+3)15457 call SetNumber16BitCastle 15459 ld b,078 15460 ld c,007 15461 ld l,(ix+4)15462 ld h,(ix+5)15463 call SetNumber16BitCastle 15465 ld b,122 15466 ld c,007 15467 ld l,(ix+6)15468 ld h,(ix+7)15469 call SetNumber16BitCastle 15471 ld b,166 15472 ld c,007 15473 ld l,(ix+8)15474 ld h,(ix+9)15475 call SetNumber16BitCastle 15476 ret15478MSXHeroes.asm864 ds $c000-$,$ff865dephase867870PlayerStartTurnBlock: equ $44871phase $4000872 incbin "..\grapx\HeroOverview\PlayerStartTurnWindow.SC5",7,95 * 128 873 ds $8000-$,$ff874dephase876879SpritesWeaponsBlock: equ $45880phase $4000881SpriteCharKingMori:882 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tgs.gen12 db 03 db 164 db 165 db 366 db 07 db 08 db 329 db 3210 db 6311 db 012 db 013 db 1614 db 6415 db 3216 db 317 db 318 db 019 db 9620 db 9621 db 222 db 123 db 424 db 025 db 026 db 25427 db 228 db 229 db 030 db 031 db 1832 db 433 db 434 db 035 db 036 db 037 db 438 db 6339 db 6340 db 9541 db 9542 db 3243 db 3144 db 3145 db 11146 db 19147 db 048 db 349 db 050 db 051 db 052 db 9653 db 054 db 25455 db 25156 db 25257 db 25258 db 259 db 25360 db 25361 db 25462 db 25463 db 1664 db 065 db 066 db 067 db 068 db 4469 db 070 db 5471 db 4872 db 8073 db 8074 db 075 db 1676 db 2477 db 10478 db 17679 db 080 db 3681 db 082 db 083 db 084 db 14685 db 12886 db 687 db 1188 db 1289 db 490 db 091 db 592 db 593 db 694 db 5495 db 12896 db 15497 db 09899 db 0100 db 6101 db 6102 db 64103 db 128104 db 32105 db 0106 db 0107 db 127108 db 64109 db 64110 db 0111 db 0112 db 72113 db 32114 db 32115 db 0116 db 8117 db 8118 db 36119 db 0120 db 0121 db 4122 db 4123 db 252124 db 0125 db 0126 db 8127 db 2128 db 4129 db 192130 db 192131 db 0132 db 0133 db 6134 db 0135 db 127136 db 223137 db 63138 db 63139 db 64140 db 191141 db 191142 db 127143 db 127144 db 8145 db 0146 db 0147 db 0148 db 0149 db 0150 db 32151 db 252152 db 252153 db 250154 db 250155 db 4156 db 248157 db 248158 db 246159 db 253160 db 0161 db 192162 db 0163 db 0164 db 0165 db 73166 db 1167 db 96168 db 208169 db 48170 db 32171 db 0172 db 160173 db 160174 db 96175 db 108176 db 1177 db 89178 db 0179 db 0180 db 0181 db 52182 db 0183 db 108184 db 12185 db 10186 db 10187 db 0188 db 8189 db 24190 db 22191 db 13192 db 0193 db 36194 db 0195MSXHeroes.asm883SpriteColKingMori:884 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tcs.gen12 db 2553 db 134 db 25 db 26 db 27 db 108 db 109 db 1010 db 1211 db 1012 db 1013 db 1014 db 215 db 216 db 217 db 1318 db 25519 db 25520 db 7421 db 7422 db 7623 db 7624 db 7625 db 7626 db 7727 db 7628 db 7629 db 7630 db 7631 db 7432 db 7433 db 25534 db 25535 db 25536 db 7737 db 7638 db 7739 db 7740 db 7741 db 7742 db 25543 db 7744 db 7745 db 7746 db 7747 db 7648 db 7749 db 2555051 db 25552 db 1353 db 254 db 255 db 256 db 1057 db 1058 db 1059 db 1260 db 1061 db 1062 db 1063 db 264 db 265 db 266 db 1367 db 25568 db 25569 db 7470 db 7471 db 7672 db 7673 db 7674 db 7675 db 7776 db 7677 db 7678 db 7679 db 7680 db 7481 db 7482 db 25583 db 25584 db 25585 db 7786 db 7687 db 7788 db 7789 db 7790 db 7791 db 25592 db 7793 db 7794 db 7795 db 7796 db 7697 db 7798 db 25599MSXHeroes.asm885SpriteCharBubbleBobble:886 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tgs.gen12 db 33 db 154 db 315 db 586 db 1157 db 1238 db 2519 db 23810 db 22811 db 22412 db 11213 db 11214 db 6015 db 3116 db 1517 db 318 db 19219 db 24020 db 24821 db 6022 db 1423 db 1424 db 725 db 726 db 727 db 3928 db 9429 db 17430 db 12431 db 24832 db 24033 db 19234 db 035 db 1236 db 1937 db 438 db 839 db 8540 db 18141 db 17042 db 16443 db 16044 db 8045 db 8046 db 4447 db 1948 db 1249 db 050 db 051 db 4852 db 20053 db 054 db 055 db 1056 db 557 db 558 db 559 db 3760 db 12261 db 23462 db 11663 db 20064 db 4865 db 066 db 067 db 068 db 069 db 4270 db 8571 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 5286 db 1087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 15101 db 31102 db 62103 db 127104 db 127105 db 255106 db 238107 db 228108 db 224109 db 112110 db 112111 db 60112 db 31113 db 15114 db 3115 db 192116 db 240117 db 248118 db 60119 db 14120 db 14121 db 7122 db 7123 db 7124 db 39125 db 126126 db 238127 db 124128 db 248129 db 240130 db 192131 db 0132 db 12133 db 19134 db 42135 db 85136 db 85137 db 181138 db 170139 db 164140 db 160141 db 80142 db 80143 db 44144 db 19145 db 12146 db 0147 db 0148 db 48149 db 200150 db 52151 db 10152 db 10153 db 5154 db 5155 db 5156 db 37157 db 122158 db 234159 db 116160 db 200161 db 48162 db 0163 db 0164 db 0165 db 0166 db 0167 db 81168 db 81169 db 177170 db 0171 db 0172 db 0173 db 80174 db 80175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 10184 db 10185 db 5186 db 0187 db 0188 db 0189 db 90190 db 170191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm887SpriteColBubbleBobble:888 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tcs.gen12 db 133 db 14 db 15 db 16 db 17 db 18 db 19 db 110 db 111 db 112 db 113 db 114 db 115 db 116 db 117 db 1318 db 25519 db 7720 db 7721 db 6622 db 6623 db 7624 db 7625 db 7726 db 7727 db 7728 db 7629 db 7630 db 7731 db 7732 db 7733 db 25534 db 25535 db 25536 db 25537 db 7738 db 7639 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 453 db 454 db 455 db 456 db 457 db 458 db 459 db 460 db 461 db 462 db 463 db 464 db 465 db 466 db 1367 db 25568 db 7769 db 7770 db 7771 db 7672 db 7673 db 7674 db 7775 db 7776 db 7777 db 7678 db 7679 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 7788 db 7789 db 7790 db 25591 db 25592 db 25593 db 7794 db 7795 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm889SpriteCharAxeMan:890 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tgs.gen12 db 13 db 04 db 05 db 86 db 377 db 238 db 319 db 410 db 3011 db 6112 db 3013 db 1314 db 415 db 016 db 017 db 018 db 12819 db 19220 db 9621 db 17622 db 21623 db 23624 db 25425 db 19826 db 9627 db 3228 db 14429 db 7230 db 3631 db 1832 db 933 db 634 db 035 db 136 db 137 db 5138 db 5939 db 5640 db 2741 db 5942 db 24343 db 25144 db 12545 db 6246 db 3047 db 1448 db 649 db 050 db 051 db 052 db 12853 db 19254 db 22455 db 24056 db 25457 db 5658 db 12859 db 19260 db 22461 db 24062 db 5663 db 2864 db 1465 db 466 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 11289 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 7101 db 15102 db 7103 db 15104 db 31105 db 5106 db 10107 db 4108 db 9109 db 19110 db 36111 db 72112 db 144113 db 32114 db 64115 db 0116 db 0117 db 184118 db 96119 db 72120 db 240121 db 96122 db 113123 db 251124 db 246125 db 108126 db 88127 db 112128 db 224129 db 192130 db 0131 db 0132 db 0133 db 2134 db 31135 db 62136 db 31137 db 123138 db 7139 db 15140 db 14141 db 28142 db 56143 db 112144 db 224145 db 192146 db 0147 db 0148 db 0149 db 16150 db 184151 db 176152 db 176153 db 152154 db 158155 db 60156 db 120157 db 240158 db 224159 db 128160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 124169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 96197 db 144198 db 72199 db 36200 db 18201 db 9202 db 4203 db 6204 db 99205 db 127206 db 55207 db 27208 db 13209 db 6210 db 3211 db 1212 db 0213 db 0214 db 0215 db 32216 db 176217 db 120218 db 188219 db 120220 db 32221 db 248222 db 232223 db 164224 db 16225 db 0226 db 0227 db 128228 db 32229 db 112230 db 56231 db 28232 db 15233 db 7234 db 3235 db 1236 db 28237 db 127238 db 15239 db 7240 db 3241 db 1242 db 0243 db 0244 db 0245 db 96246 db 112247 db 120248 db 124249 db 190250 db 223251 db 207252 db 220253 db 216254 db 28255 db 220256 db 204257 db 128258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 14270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 3295 db 7296 db 14297 db 26298 db 54299 db 111300 db 223301 db 142302 db 6303 db 15304 db 18305 db 6306 db 29307 db 0308 db 0309 db 2310 db 4311 db 9312 db 18313 db 36314 db 200315 db 144316 db 32317 db 80318 db 160319 db 248320 db 240321 db 224322 db 240323 db 224324 db 192325 db 0326 db 0327 db 0328 db 1329 db 7330 db 15331 db 30332 db 60333 db 121334 db 25335 db 13336 db 13337 db 29338 db 8339 db 0340 db 0341 db 0342 db 3343 db 7344 db 14345 db 28346 db 56347 db 112348 db 240349 db 224350 db 222351 db 248352 db 124353 db 248354 db 64355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 0365 db 0366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 0381 db 0382 db 0383 db 62384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm891SpriteColAxeMan:892 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 99 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1418 db 25519 db 7820 db 7821 db 7822 db 7823 db 7824 db 7725 db 7826 db 7827 db 7828 db 7829 db 7830 db 7831 db 7832 db 7833 db 7934 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7941 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1452 db 1453 db 1454 db 1355 db 1356 db 957 db 1358 db 1359 db 1360 db 1361 db 1362 db 1363 db 1364 db 1365 db 1366 db 1367 db 25568 db 25569 db 7970 db 7871 db 7872 db 7773 db 7874 db 7875 db 7876 db 7877 db 7878 db 7879 db 7880 db 7881 db 7882 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 25590 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 14101 db 13102 db 13103 db 13104 db 13105 db 13106 db 13107 db 13108 db 13109 db 9110 db 13111 db 13112 db 13113 db 13114 db 13115 db 13116 db 79117 db 78118 db 78119 db 78120 db 78121 db 78122 db 78123 db 78124 db 78125 db 77126 db 78127 db 78128 db 78129 db 78130 db 78131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 79142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 13150 db 13151 db 13152 db 13153 db 13154 db 13155 db 13156 db 13157 db 13158 db 13159 db 9160 db 13161 db 13162 db 14163 db 14164 db 14165 db 255166 db 78167 db 78168 db 78169 db 78170 db 78171 db 78172 db 78173 db 78174 db 78175 db 77176 db 78177 db 78178 db 79179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 255189 db 255190 db 255191 db 78192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm893SpriteCharGeneralBullet1:894 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tgs.gen12 db 03 db 04 db 05 db 36 db 77 db 158 db 309 db 2810 db 3011 db 3112 db 1513 db 714 db 315 db 016 db 017 db 018 db 019 db 020 db 021 db 12822 db 19223 db 22424 db 24025 db 11226 db 24027 db 24028 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 439 db 340 db 641 db 442 db 643 db 344 db 845 db 446 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 6455 db 12856 db 19257 db 6458 db 19259 db 12860 db 3261 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 872 db 1773 db 1974 db 1775 db 1676 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 3288 db 1689 db 14490 db 1691 db 1692 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm895SpriteColGeneralBullet1:896 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7723 db 7524 db 7525 db 7526 db 7527 db 7528 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7641 db 7642 db 7643 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm897SpriteCharContraBullet:898 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 159 db 710 db 011 db 712 db 1513 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 12825 db 12826 db 6427 db 12828 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 842 db 1543 db 844 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 6458 db 16059 db 6460 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 474 db 875 db 476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 3291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 1106 db 1107 db 2108 db 1109 db 1110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 240122 db 224123 db 0124 db 224125 db 240126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 2139 db 5140 db 2141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 16155 db 240156 db 16157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 4172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 32187 db 16188 db 32189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm899SpriteColContraBullet:900 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1011 db 1012 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7726 db 7627 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7842 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 1059 db 1060 db 1061 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7775 db 7676 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7891 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm901SpriteCharGrenadier:902 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tgs.gen12 db 03 db 04 db 05 db 06 db 97 db 158 db 59 db 510 db 1511 db 1512 db 1513 db 914 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 19223 db 22424 db 4825 db 1626 db 20827 db 24028 db 22429 db 19230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 640 db 1041 db 1042 db 043 db 244 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 3256 db 19257 db 22458 db 3259 db 4860 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 275 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 1689 db 1690 db 1691 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 3104 db 7105 db 12106 db 8107 db 11108 db 15109 db 7110 db 3111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 144120 db 240121 db 160122 db 160123 db 240124 db 240125 db 240126 db 144127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 4137 db 3138 db 7139 db 4140 db 12141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 96153 db 80154 db 80155 db 0156 db 64157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 8170 db 8171 db 8172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 64188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm903SpriteColGrenadier:904 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 1313 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7425 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 1362 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7474 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm905SpriteCharHandGrenade:906 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 69 db 1210 db 911 db 1112 db 1513 db 1514 db 715 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 9623 db 17624 db 14425 db 11226 db 22427 db 22428 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 141 db 342 db 643 db 444 db 1045 db 1346 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 6456 db 9657 db 12858 db 059 db 060 db 16061 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 172 db 473 db 874 db 875 db 976 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 14488 db 14489 db 11290 db 3291 db 9692 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 15104 db 28105 db 30106 db 31107 db 31108 db 15109 db 7110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 64122 db 32123 db 96124 db 144125 db 176126 db 224127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 3137 db 1138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 128154 db 192155 db 128156 db 96157 db 64158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 24169 db 20170 db 26171 db 20172 db 10173 db 7174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 64185 db 0186 db 32187 db 96188 db 144189 db 144190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 1200 db 3201 db 7202 db 7203 db 7204 db 14205 db 9206 db 13207 db 6208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 224216 db 240217 db 240218 db 208219 db 144220 db 48221 db 96222 db 128223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 2233 db 5234 db 0235 db 0236 db 1237 db 6238 db 2239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 176249 db 80250 db 32251 db 96252 db 192253 db 128254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 6267 db 4268 db 14269 db 9270 db 9271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 144283 db 16284 db 16285 db 32286 db 128287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 7298 db 13299 db 9300 db 6301 db 4302 db 2303 db 3304 db 1305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 224315 db 240316 db 248317 db 248318 db 120319 db 56320 db 240321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 2331 db 6332 db 1333 db 3334 db 1335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 0349 db 0350 db 128351 db 192352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 9363 db 9364 db 6365 db 4366 db 0367 db 2368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 224379 db 80380 db 40381 db 88382 db 40383 db 24384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm907SpriteColHandGrenade:908 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 413 db 414 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7424 db 7425 db 7426 db 7427 db 7428 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7741 db 7742 db 7743 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 462 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7473 db 7474 db 7475 db 7476 db 7477 db 7478 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 13104 db 4105 db 4106 db 4107 db 4108 db 4109 db 4110 db 4111 db 13112 db 255113 db 255114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 77121 db 77122 db 74123 db 74124 db 74125 db 74126 db 74127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 77139 db 77140 db 77141 db 77142 db 77143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 4155 db 4156 db 4157 db 4158 db 4159 db 4160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 74171 db 74172 db 74173 db 74174 db 74175 db 74176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm909SpriteCharVanguard:910 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tgs.gen12 db 03 db 04 db 05 db 146 db 197 db 148 db 2519 db 12810 db 6411 db 12712 db 6313 db 3114 db 1415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 1226 db 727 db 25528 db 25429 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 1439 db 24340 db 25341 db 25542 db 25543 db 12144 db 5745 db 1946 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 24856 db 25257 db 24758 db 24959 db 25560 db 25461 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 1072 db 24973 db 074 db 12875 db 5976 db 1077 db 1078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 25289 db 790 db 091 db 25492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 48107 db 224108 db 255109 db 127110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 112119 db 200120 db 112121 db 223122 db 1123 db 2124 db 254125 db 252126 db 248127 db 112128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 31137 db 63138 db 239139 db 159140 db 255141 db 127142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 112152 db 207153 db 191154 db 255155 db 255156 db 158157 db 156158 db 200159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 63170 db 224171 db 0172 db 127173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 80185 db 159186 db 0187 db 1188 db 220189 db 80190 db 80191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm911SpriteColVanguard:912 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 108 db 109 db 1010 db 1011 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7823 db 7724 db 7625 db 7626 db 7627 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7840 db 7741 db 7742 db 7743 db 7844 db 7845 db 7846 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 1355 db 1356 db 1057 db 1058 db 1059 db 1060 db 1261 db 1262 db 1263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 7872 db 7773 db 7674 db 7675 db 7676 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 7790 db 7791 db 7792 db 7893 db 7894 db 7895 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm913SpriteCharLanFang:914 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 639 db 010 db 12711 db 12712 db 9513 db 3114 db 615 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 2426 db 24827 db 19228 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 8843 db 7044 db 6445 db 2546 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 858 db 5659 db 6460 db 12861 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 6374 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 22490 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 6102 db 31103 db 95104 db 127105 db 127106 db 0107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 248122 db 24123 db 248124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 25135 db 64136 db 70137 db 88138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 128152 db 64153 db 56154 db 8155 db 0156 db 0157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 63171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 224187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 7197 db 31198 db 63199 db 63200 db 127201 db 127202 db 127203 db 0204 db 0205 db 0206 db 0207 db 0208 db 0209 db 0210 db 0211 db 0212 db 240213 db 240214 db 240215 db 240216 db 240217 db 240218 db 248219 db 8220 db 24221 db 56222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 6229 db 25230 db 36231 db 32232 db 88233 db 64234 db 88235 db 127236 db 0237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 16245 db 80246 db 16247 db 16248 db 16249 db 16250 db 24251 db 244252 db 8253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 64268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 4284 db 32285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 15294 db 15295 db 15296 db 15297 db 15298 db 15299 db 31300 db 16301 db 24302 db 28303 db 0304 db 0305 db 0306 db 0307 db 0308 db 0309 db 224310 db 248311 db 252312 db 252313 db 254314 db 254315 db 254316 db 0317 db 0318 db 0319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 8326 db 10327 db 8328 db 8329 db 8330 db 8331 db 24332 db 47333 db 16334 db 0335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 96342 db 152343 db 36344 db 4345 db 26346 db 2347 db 26348 db 254349 db 0350 db 0351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 32365 db 4366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 2381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 1395 db 3396 db 31397 db 24398 db 31399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 96409 db 248410 db 250411 db 254412 db 254413 db 0414 db 252415 db 0416 db 0417 db 0418 db 0419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 1427 db 2428 db 28429 db 16430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 0441 db 152442 db 2443 db 98444 db 26445 db 0446 db 0447 db 0448 db 0449 db 0450 db 0451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 7462 db 0463 db 0464 db 0465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 252478 db 0479 db 0480 db 0481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 0488 db 0489 db 0490 db 0491 db 0492 db 0493 db 31494 db 24495 db 31496 db 3497 db 1498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 0509 db 252510 db 0511 db 254512 db 254513 db 250514 db 248515 db 96516 db 0517 db 0518 db 0519 db 0520 db 0521 db 0522 db 0523 db 0524 db 0525 db 0526 db 16527 db 28528 db 2529 db 1530 db 0531 db 0532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 0541 db 0542 db 0543 db 26544 db 98545 db 2546 db 152547 db 0548 db 0549 db 0550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 7559 db 0560 db 0561 db 0562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 252575 db 0576 db 0577 db 0578 db 0579 db 0580 db 0581 db 0582 db 0583584 db 0585 db 0586 db 0587 db 0588 db 0589 db 28590 db 24591 db 16592 db 31593 db 15594 db 15595 db 15596 db 15597 db 15598 db 15599 db 7600 db 0601 db 0602 db 0603 db 0604 db 0605 db 0606 db 0607 db 0608 db 254609 db 254610 db 254611 db 252612 db 252613 db 248614 db 224615 db 128616 db 0617 db 0618 db 0619 db 0620 db 0621 db 0622 db 16623 db 47624 db 24625 db 8626 db 8627 db 8628 db 8629 db 10630 db 8631 db 0632 db 0633 db 0634 db 0635 db 0636 db 0637 db 0638 db 0639 db 254640 db 26641 db 2642 db 26643 db 4644 db 36645 db 152646 db 96647 db 0648 db 0649 db 0650 db 0651 db 0652 db 0653 db 0654 db 4655 db 32656 db 0657 db 0658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 0669 db 0670 db 0671 db 2672 db 0673 db 0674 db 0675 db 0676 db 0677 db 0678 db 0679 db 0680681 db 0682 db 0683 db 0684 db 0685 db 0686 db 0687 db 0688 db 0689 db 127690 db 127691 db 127692 db 63693 db 63694 db 31695 db 7696 db 1697 db 0698 db 0699 db 0700 db 0701 db 0702 db 56703 db 24704 db 8705 db 248706 db 240707 db 240708 db 240709 db 240710 db 240711 db 240712 db 224713 db 0714 db 0715 db 0716 db 0717 db 0718 db 0719 db 0720 db 127721 db 88722 db 64723 db 88724 db 32725 db 36726 db 25727 db 6728 db 0729 db 0730 db 0731 db 0732 db 0733 db 0734 db 0735 db 8736 db 244737 db 24738 db 16739 db 16740 db 16741 db 16742 db 80743 db 16744 db 0745 db 0746 db 0747 db 0748 db 0749 db 0750 db 0751 db 0752 db 64753 db 0754 db 0755 db 0756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 0767 db 32768 db 4769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777MSXHeroes.asm915SpriteColLanFang:916 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1211 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7526 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 1354 db 1255 db 1256 db 1257 db 1258 db 1059 db 1360 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 7771 db 7772 db 7773 db 7774 db 7575 db 25576 db 25577 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7691 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 12101 db 12102 db 12103 db 12104 db 12105 db 12106 db 12107 db 10108 db 10109 db 13110 db 255111 db 255112 db 255113 db 255114 db 255115 db 255116 db 77117 db 77118 db 77119 db 77120 db 77121 db 77122 db 77123 db 76124 db 75125 db 255126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 77140 db 76141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 12150 db 12151 db 12152 db 12153 db 12154 db 12155 db 12156 db 10157 db 10158 db 13159 db 255160 db 255161 db 255162 db 255163 db 255164 db 255165 db 77166 db 77167 db 77168 db 77169 db 77170 db 77171 db 77172 db 76173 db 75174 db 255175 db 255176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 77189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 255199 db 255200 db 13201 db 12202 db 12203 db 12204 db 12205 db 10206 db 13207 db 255208 db 255209 db 255210 db 255211 db 255212 db 255213 db 255214 db 255215 db 255216 db 255217 db 77218 db 77219 db 77220 db 77221 db 75222 db 255223 db 255224 db 255225 db 255226 db 255227 db 255228 db 255229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 76238 db 255239 db 255240 db 255241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 255248 db 255249 db 255250 db 255251 db 255252 db 255253 db 13254 db 10255 db 12256 db 12257 db 12258 db 12259 db 13260 db 255261 db 255262 db 255263 db 255264 db 255265 db 255266 db 255267 db 255268 db 255269 db 255270 db 75271 db 77272 db 77273 db 77274 db 77275 db 255276 db 255277 db 255278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 76287 db 255288 db 255289 db 255290 db 255291 db 255292 db 255293 db 255294 db 255295296 db 255297 db 255298 db 255299 db 255300 db 255301 db 13302 db 10303 db 10304 db 12305 db 12306 db 12307 db 12308 db 12309 db 12310 db 12311 db 13312 db 255313 db 255314 db 255315 db 255316 db 255317 db 255318 db 75319 db 76320 db 77321 db 77322 db 77323 db 77324 db 77325 db 77326 db 77327 db 255328 db 255329 db 255330 db 255331 db 255332 db 255333 db 255334 db 76335 db 77336 db 255337 db 255338 db 255339 db 255340 db 255341 db 255342 db 255343 db 255344345 db 255346 db 255347 db 255348 db 255349 db 255350 db 13351 db 10352 db 10353 db 12354 db 12355 db 12356 db 12357 db 12358 db 12359 db 12360 db 13361 db 255362 db 255363 db 255364 db 255365 db 255366 db 255367 db 75368 db 76369 db 77370 db 77371 db 77372 db 77373 db 77374 db 77375 db 77376 db 255377 db 255378 db 255379 db 255380 db 255381 db 255382 db 255383 db 76384 db 77385 db 255386 db 255387 db 255388 db 255389 db 255390 db 255391 db 255392 db 255393MSXHeroes.asm917SpriteCharHanChen:918 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tgs.gen12 db 03 db 74 db 315 db 636 db 1037 db 1268 db 2549 db 25510 db 25511 db 25512 db 25513 db 12714 db 12715 db 6316 db 3117 db 1518 db 1819 db 19920 db 24221 db 12022 db 10123 db 22024 db 25425 db 11826 db 25427 db 25428 db 25429 db 25230 db 25231 db 24832 db 24033 db 19234 db 035 db 736 db 3137 db 6338 db 12639 db 10340 db 19541 db 23142 db 25543 db 12744 db 6345 db 1546 db 047 db 048 db 049 db 050 db 051 db 19452 db 24453 db 15654 db 22855 db 11656 db 11857 db 14258 db 14259 db 25260 db 24861 db 22462 db 063 db 064 db 065 db 066 db 067 db 768 db 3169 db 6370 db 12771 db 6772 db 23073 db 25574 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 19284 db 24085 db 14486 db 12487 db 8488 db 11889 db 690 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm919SpriteColHanChen:920 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tcs.gen12 db 93 db 94 db 95 db 106 db 97 db 108 db 109 db 1010 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1318 db 25519 db 7520 db 7621 db 7622 db 7423 db 7624 db 7725 db 7726 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534 db 25535 db 7936 db 7937 db 7738 db 7639 db 7740 db 7841 db 7842 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm921SpriteCharLiYen:922 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2499 db 25510 db 25511 db 6312 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 25224 db 25525 db 25526 db 23127 db 24028 db 24829 db 4830 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 24941 db 24742 db 22343 db 5644 db 745 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 12357 db 12758 db 23159 db 4860 db 20061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 24973 db 774 db 19375 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 389 db 5690 db 3991 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 63105 db 255106 db 255107 db 231108 db 15109 db 31110 db 12111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 159122 db 255123 db 255124 db 252125 db 224126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 222138 db 254139 db 231140 db 12141 db 19142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 159154 db 239155 db 251156 db 28157 db 224158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 192170 db 28171 db 228172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 159186 db 224187 db 131188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm923SpriteColLiYen:924 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 138 db 49 db 410 db 411 db 1212 db 1213 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 7625 db 7626 db 7627 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 458 db 459 db 460 db 1261 db 1262 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7674 db 7675 db 7676 db 7777 db 7778 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm925SpriteCharKnightYama:926 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tgs.gen12 db 03 db 04 db 35 db 76 db 157 db 318 db 319 db 6310 db 6311 db 3112 db 3113 db 1514 db 715 db 116 db 017 db 018 db 019 db 020 db 12821 db 22422 db 24023 db 24824 db 24825 db 25226 db 25227 db 25228 db 24829 db 24030 db 22431 db 12832 db 033 db 034 db 035 db 036 db 037 db 438 db 339 db 040 db 841 db 1642 db 1743 db 844 db 845 db 446 db 647 db 048 db 049 db 050 db 051 db 052 db 053 db 9654 db 055 db 19256 db 3257 db 20858 db 6459 db 12860 db 061 db 062 db 9663 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 871 db 2372 db 2073 db 4174 db 4675 db 1876 db 2177 db 878 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 14487 db 4088 db 20089 db 3690 db 14891 db 10092 db 13693 db 1694 db 095 db 096 db 097 db 098MSXHeroes.asm927SpriteColKnightYama:928 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tcs.gen12 db 2553 db 2554 db 135 db 96 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 915 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 7722 db 7523 db 7524 db 7525 db 7526 db 7527 db 7528 db 7529 db 7530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm929SpriteCharBisshopHeichi:930 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2559 db 8010 db 17611 db 25512 db 22413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 626 db 327 db 25528 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 17542 db 7943 db 3144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 24858 db 25259 db 25560 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 6476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 690 db 391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 96107 db 192108 db 255109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 255122 db 10123 db 13124 db 255125 db 7126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 31139 db 63140 db 255141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 245155 db 242156 db 248157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 96171 db 192172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 2189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm931SpriteColBisshopHeichi:932 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 410 db 411 db 412 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7742 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 459 db 460 db 461 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7791 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm933SpriteCharPornHeichi:934 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 1247 db 2558 db 1959 db 19210 db 12711 db 12712 db 12713 db 12414 db 12415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 20624 db 25525 db 5126 db 25227 db 25428 db 20629 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 13140 db 12841 db 12842 db 12843 db 12844 db 12845 db 13146 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 20656 db 4957 db 158 db 259 db 160 db 4961 db 20662 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 6073 db 6374 db 6375 db 6376 db 6077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 20490 db 24891 db 20492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 115105 db 255106 db 204107 db 63108 db 127109 db 115110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 62120 db 255121 db 195122 db 3123 db 254124 db 254125 db 254126 db 62127 db 62128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 115137 db 140138 db 128139 db 64140 db 128141 db 140142 db 115143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 193153 db 1154 db 1155 db 1156 db 1157 db 1158 db 193159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 51171 db 31172 db 51173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 60186 db 252187 db 252188 db 252189 db 60190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm935SpriteColPornHeichi:936 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 18 db 19 db 110 db 211 db 212 db 213 db 214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7841 db 7842 db 7843 db 7844 db 7845 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 157 db 158 db 159 db 260 db 261 db 262 db 263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7890 db 7891 db 7892 db 7893 db 7894 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm937SpriteCharYamaKnight:938 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tgs.gen12 db 03 db 14 db 155 db 636 db 1277 db 1268 db 619 db 6110 db 2911 db 3012 db 1413 db 1414 db 615 db 616 db 217 db 118 db 6219 db 25520 db 24921 db 23022 db 15223 db 9624 db 12825 db 026 db 027 db 12828 db 12829 db 12830 db 12831 db 12832 db 12833 db 034 db 035 db 136 db 1537 db 6238 db 11239 db 9640 db 4941 db 4942 db 2543 db 2444 db 1245 db 1246 db 447 db 448 db 149 db 050 db 051 db 19352 db 19353 db 654 db 2455 db 9656 db 12857 db 058 db 059 db 12860 db 12861 db 12862 db 12863 db 12864 db 065 db 066 db 067 db 068 db 1469 db 4870 db 6471 db 6472 db 3373 db 3374 db 1775 db 1676 db 877 db 878 db 179 db 180 db 081 db 082 db 083 db 084 db 185 db 686 db 2487 db 9688 db 12889 db 090 db 091 db 12892 db 12893 db 12894 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 3103 db 15104 db 63105 db 126106 db 129107 db 126108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 48117 db 248118 db 248119 db 252120 db 252121 db 60122 db 222123 db 94124 db 46125 db 47126 db 23127 db 23128 db 11129 db 11130 db 6131 db 0132 db 0133 db 0134 db 3135 db 15136 db 60137 db 112138 db 129139 db 126140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 200150 db 216151 db 12152 db 12153 db 12154 db 198155 db 70156 db 38157 db 35158 db 19159 db 19160 db 9161 db 9162 db 0163 db 0164 db 0165 db 0166 db 3167 db 12168 db 48169 db 64170 db 129171 db 126172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 8183 db 4184 db 4185 db 4186 db 194187 db 66188 db 34189 db 33190 db 17191 db 17192 db 4193 db 4194 db 0195196 db 0197 db 1198 db 1199 db 1200 db 1201 db 1202 db 1203 db 0204 db 0205 db 1206 db 6207 db 25208 db 103209 db 159210 db 255211 db 124212 db 128213 db 64214 db 96215 db 96216 db 112217 db 112218 db 120219 db 184220 db 188221 db 188222 db 126223 db 254224 db 252225 db 240226 db 128227 db 0228 db 0229 db 0230 db 1231 db 1232 db 1233 db 1234 db 1235 db 0236 db 0237 db 1238 db 6239 db 24240 db 96241 db 131242 db 131243 db 0244 db 0245 db 128246 db 32247 db 32248 db 48249 db 48250 db 24251 db 152252 db 140253 db 140254 db 6255 db 14256 db 124257 db 240258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 1265 db 1266 db 1267 db 0268 db 0269 db 1270 db 6271 db 24272 db 96273 db 128274 db 0275 db 0276 db 0277 db 0278 db 128279 db 128280 db 16281 db 16282 db 8283 db 136284 db 132285 db 132286 db 2287 db 2288 db 12289 db 112290 db 0291 db 0292293 db 96294 db 208295 db 208296 db 232297 db 232298 db 244299 db 116300 db 122301 db 123302 db 60303 db 63304 db 63305 db 31306 db 31307 db 12308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 0316 db 126317 db 129318 db 126319 db 252320 db 240321 db 192322 db 0323 db 0324 db 0325 db 0326 db 144327 db 144328 db 200329 db 200330 db 196331 db 100332 db 98333 db 99334 db 48335 db 48336 db 48337 db 27338 db 19339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 126349 db 129350 db 14351 db 60352 db 240353 db 192354 db 0355 db 0356 db 0357 db 0358 db 32359 db 32360 db 136361 db 136362 db 132363 db 68364 db 66365 db 67366 db 32367 db 32368 db 32369 db 16370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 126381 db 129382 db 2383 db 12384 db 48385 db 192386 db 0387 db 0388 db 0389MSXHeroes.asm939SpriteColYamaKnight:940 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tcs.gen12 db 133 db 94 db 85 db 86 db 87 db 88 db 89 db 810 db 811 db 812 db 813 db 814 db 915 db 916 db 1317 db 1318 db 25519 db 7720 db 7321 db 7322 db 7323 db 7324 db 7325 db 7326 db 7327 db 7328 db 7329 db 7330 db 7731 db 7732 db 7833 db 25534 db 25535 db 25536 db 7737 db 7738 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 7847 db 7848 db 25549 db 2555051 db 25552 db 1353 db 954 db 855 db 856 db 857 db 858 db 859 db 860 db 861 db 862 db 863 db 864 db 965 db 966 db 1367 db 25568 db 25569 db 7770 db 7371 db 7372 db 7373 db 7374 db 7375 db 7376 db 7377 db 7378 db 7379 db 7380 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 7787 db 7788 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 7795 db 7796 db 7897 db 7898 db 25599100 db 13101 db 13102 db 9103 db 9104 db 8105 db 8106 db 8107 db 8108 db 8109 db 8110 db 8111 db 8112 db 8113 db 8114 db 9115 db 13116 db 255117 db 78118 db 77119 db 77120 db 73121 db 73122 db 73123 db 73124 db 73125 db 73126 db 73127 db 73128 db 73129 db 73130 db 77131 db 255132 db 255133 db 255134 db 78135 db 78136 db 77137 db 77138 db 77139 db 77140 db 77141 db 77142 db 77143 db 77144 db 77145 db 77146 db 255147 db 255148149 db 13150 db 9151 db 9152 db 8153 db 8154 db 8155 db 8156 db 8157 db 8158 db 8159 db 8160 db 8161 db 8162 db 9163 db 13164 db 255165 db 255166 db 77167 db 77168 db 73169 db 73170 db 73171 db 73172 db 73173 db 73174 db 73175 db 73176 db 73177 db 73178 db 77179 db 255180 db 255181 db 255182 db 78183 db 78184 db 77185 db 77186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 77193 db 77194 db 255195 db 255196 db 255197MSXHeroes.asm941SpriteCharGooGoo:942 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tgs.gen12 db 03 db 04 db 05 db 06 db 647 db 648 db 1279 db 12710 db 12711 db 6412 db 6413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 25225 db 25426 db 25227 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 19140 db 3241 db 042 db 3243 db 19144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 25256 db 457 db 258 db 459 db 25260 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 12873 db 12874 db 12875 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 289 db 190 db 291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 63106 db 127107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 2120 db 2121 db 254122 db 254123 db 254124 db 2125 db 2126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 63137 db 32138 db 64139 db 32140 db 63141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 253153 db 4154 db 0155 db 4156 db 253157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 64170 db 128171 db 64172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 1186 db 1187 db 1188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm943SpriteColGooGoo:944 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 78 db 69 db 610 db 611 db 712 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7125 db 7126 db 7127 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 757 db 658 db 659 db 660 db 761 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7174 db 7175 db 7176 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm945SpriteCharScreech:946 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tgs.gen12 db 03 db 284 db 285 db 506 db 1147 db 48 db 49 db 6710 db 8211 db 5312 db 3013 db 3014 db 015 db 016 db 017 db 018 db 019 db 11220 db 11221 db 25222 db 23623 db 1624 db 025 db 24826 db 21627 db 20028 db 5629 db 6030 db 2831 db 832 db 033 db 034 db 035 db 036 db 2037 db 438 db 3639 db 040 db 12241 db 442 db 3743 db 344 db 1845 db 3046 db 047 db 048 db 049 db 050 db 051 db 052 db 11253 db 8854 db 12055 db 1656 db 12057 db 1658 db 9659 db 4860 db 3261 db 3662 db 2063 db 064 db 065 db 066 db 067 db 068 db 3469 db 4270 db 7471 db 5672 db 6673 db 12374 db 7475 db 4076 db 3377 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 13685 db 13286 db 13287 db 088 db 12089 db 13690 db 13691 db 20092 db 6893 db 094 db 095 db 096 db 097 db 09899 db 0100 db 14101 db 14102 db 63103 db 55104 db 8105 db 0106 db 31107 db 27108 db 19109 db 28110 db 60111 db 56112 db 16113 db 0114 db 0115 db 0116 db 56117 db 56118 db 76119 db 78120 db 32121 db 32122 db 194123 db 74124 db 172125 db 120126 db 120127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 14134 db 26135 db 30136 db 8137 db 30138 db 8139 db 6140 db 12141 db 4142 db 36143 db 40144 db 0145 db 0146 db 0147 db 0148 db 0149 db 40150 db 32151 db 36152 db 0153 db 94154 db 32155 db 164156 db 192157 db 72158 db 120159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 17166 db 33167 db 33168 db 0169 db 30170 db 17171 db 17172 db 19173 db 34174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 68182 db 84183 db 82184 db 28185 db 66186 db 222187 db 82188 db 20189 db 132190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm947SpriteColScreech:948 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tcs.gen12 db 2553 db 134 db 25 db 16 db 17 db 28 db 29 db 110 db 111 db 112 db 213 db 114 db 115 db 1316 db 25517 db 25518 db 25519 db 25520 db 6721 db 6622 db 6623 db 6724 db 7625 db 6626 db 6627 db 6628 db 6729 db 7730 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 7737 db 7638 db 7639 db 7640 db 7741 db 7642 db 7643 db 7644 db 7745 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 1353 db 254 db 155 db 156 db 257 db 258 db 159 db 160 db 161 db 262 db 163 db 164 db 1365 db 25566 db 25567 db 25568 db 25569 db 6770 db 6671 db 6672 db 6773 db 7674 db 6675 db 6676 db 6677 db 6778 db 7779 db 7780 db 25581 db 25582 db 25583 db 25584 db 25585 db 7786 db 7687 db 7688 db 7689 db 7790 db 7691 db 7692 db 7693 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm949SpriteCharPastryChef:950 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tgs.gen12 db 03 db 04 db 15 db 46 db 147 db 468 db 2479 db 25510 db 25511 db 24712 db 4613 db 1414 db 415 db 116 db 017 db 018 db 2019 db 15620 db 20621 db 23822 db 23123 db 11924 db 11925 db 11926 db 11927 db 11928 db 11929 db 23130 db 23831 db 20632 db 15633 db 2034 db 035 db 036 db 137 db 438 db 1039 db 4240 db 21341 db 10942 db 10943 db 21344 db 4245 db 1046 db 447 db 148 db 049 db 050 db 851 db 14852 db 7453 db 17054 db 16555 db 8556 db 8557 db 8558 db 8559 db 8560 db 8561 db 16562 db 17063 db 7464 db 14865 db 866 db 067 db 068 db 069 db 470 db 471 db 3272 db 073 db 074 db 075 db 076 db 3277 db 478 db 479 db 080 db 081 db 082 db 083 db 12884 db 12885 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 12896 db 12897 db 09899 db 40100 db 57101 db 115102 db 119103 db 231104 db 238105 db 238106 db 238107 db 238108 db 238109 db 238110 db 231111 db 119112 db 115113 db 57114 db 40115 db 0116 db 0117 db 128118 db 32119 db 112120 db 116121 db 239122 db 255123 db 255124 db 239125 db 116126 db 112127 db 32128 db 128129 db 0130 db 0131 db 16132 db 41133 db 82134 db 85135 db 165136 db 170137 db 170138 db 170139 db 170140 db 170141 db 170142 db 165143 db 85144 db 82145 db 41146 db 16147 db 0148 db 0149 db 128150 db 32151 db 80152 db 84153 db 171154 db 182155 db 182156 db 171157 db 84158 db 80159 db 32160 db 128161 db 0162 db 0163 db 0164 db 1165 db 1166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 1177 db 1178 db 0179 db 0180 db 0181 db 0182 db 32183 db 32184 db 4185 db 0186 db 0187 db 0188 db 0189 db 4190 db 32191 db 32192 db 0193 db 0194 db 0195MSXHeroes.asm951SpriteColPastryChef:952 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tcs.gen12 db 133 db 124 db 125 db 126 db 127 db 128 db 129 db 1210 db 1211 db 1212 db 1213 db 1214 db 1215 db 1216 db 1217 db 1318 db 7819 db 7720 db 7721 db 7722 db 7723 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 7731 db 7732 db 7733 db 7834 db 25535 db 7936 db 7837 db 7938 db 7839 db 7940 db 25541 db 25542 db 25543 db 25544 db 7945 db 7846 db 7947 db 7848 db 7949 db 2555051 db 1352 db 1253 db 1254 db 1255 db 1256 db 1257 db 1258 db 1259 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 7868 db 7769 db 7770 db 7771 db 7772 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 7883 db 25584 db 7985 db 7886 db 7987 db 7888 db 7989 db 25590 db 25591 db 25592 db 25593 db 7994 db 7895 db 7996 db 7897 db 7998 db 25599MSXHeroes.asm953SpriteCharVicViper:954 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 1279 db 12810 db 12811 db 12712 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 3223 db 11224 db 25425 db 12726 db 12727 db 25428 db 11229 db 3230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 12741 db 042 db 043 db 12744 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 8056 db 22257 db 3258 db 3259 db 22260 db 8061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 25574 db 25575 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 19390 db 19391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 2103 db 7104 db 3105 db 3106 db 2107 db 3108 db 7109 db 7110 db 15111 db 15112 db 30113 db 30114 db 12115 db 48116 db 120117 db 120118 db 240119 db 240120 db 224121 db 240122 db 120123 db 208124 db 128125 db 128126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 2135 db 5136 db 0137 db 0138 db 3139 db 2140 db 4141 db 4142 db 9143 db 9144 db 18145 db 18146 db 0147 db 0148 db 72149 db 72150 db 144151 db 144152 db 128153 db 64154 db 232155 db 80156 db 128157 db 128158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 2169 db 3170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 32185 db 144186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 12197 db 30198 db 30199 db 15200 db 15201 db 7202 db 15203 db 30204 db 11205 db 1206 db 1207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 64216 db 224217 db 192218 db 192219 db 64220 db 192221 db 224222 db 224223 db 240224 db 240225 db 120226 db 120227 db 48228 db 0229 db 18230 db 18231 db 9232 db 9233 db 1234 db 2235 db 23236 db 10237 db 1238 db 1239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 64248 db 160249 db 0250 db 0251 db 192252 db 64253 db 32254 db 32255 db 144256 db 144257 db 72258 db 72259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 4266 db 9267 db 0268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 64282 db 192283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 4298 db 14299 db 127300 db 254301 db 254302 db 127303 db 14304 db 4305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 254316 db 1317 db 1318 db 254319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 10331 db 123332 db 4333 db 4334 db 123335 db 10336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 254348 db 0349 db 0350 db 254351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 131365 db 131366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 255381 db 255382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 0395 db 1396 db 1397 db 11398 db 30399 db 15400 db 7401 db 15402 db 15403 db 30404 db 30405 db 12406 db 48407 db 120408 db 120409 db 240410 db 240411 db 224412 db 224413 db 192414 db 64415 db 192416 db 192417 db 224418 db 64419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 0427 db 1428 db 1429 db 10430 db 23431 db 2432 db 1433 db 9434 db 9435 db 18436 db 18437 db 0438 db 0439 db 72440 db 72441 db 144442 db 144443 db 32444 db 32445 db 64446 db 192447 db 0448 db 0449 db 160450 db 64451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 0462 db 0463 db 9464 db 4465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 0478 db 0479 db 192480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 12488 db 30489 db 30490 db 15491 db 15492 db 7493 db 7494 db 3495 db 2496 db 3497 db 3498 db 7499 db 2500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 128509 db 128510 db 208511 db 120512 db 240513 db 224514 db 240515 db 240516 db 120517 db 120518 db 48519 db 0520 db 18521 db 18522 db 9523 db 9524 db 4525 db 4526 db 2527 db 3528 db 0529 db 0530 db 5531 db 2532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 128541 db 128542 db 80543 db 232544 db 64545 db 128546 db 144547 db 144548 db 72549 db 72550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 0559 db 0560 db 3561 db 2562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 0576 db 144577 db 32578 db 0579 db 0580 db 0581 db 0582 db 0583MSXHeroes.asm955SpriteColVicViper:956 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 98 db 99 db 910 db 911 db 912 db 913 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7526 db 7527 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 7643 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 953 db 954 db 955 db 956 db 957 db 958 db 959 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 25568 db 7769 db 7770 db 7771 db 7772 db 7573 db 7574 db 7675 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 13101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 12109 db 12110 db 12111 db 12112 db 12113 db 12114 db 12115 db 13116 db 255117 db 77118 db 77119 db 77120 db 77121 db 75122 db 75123 db 76124 db 77125 db 77126 db 77127 db 77128 db 77129 db 77130 db 77131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 77138 db 77139 db 255140 db 255141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 9155 db 9156 db 9157 db 9158 db 9159 db 9160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 77171 db 77172 db 75173 db 75174 db 77175 db 77176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 76189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 13199 db 12200 db 12201 db 12202 db 12203 db 12204 db 12205 db 12206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 13214 db 255215 db 77216 db 77217 db 77218 db 77219 db 77220 db 77221 db 77222 db 76223 db 75224 db 75225 db 77226 db 77227 db 77228 db 77229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 255238 db 255239 db 77240 db 77241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 13248 db 12249 db 12250 db 12251 db 12252 db 12253 db 12254 db 12255 db 9256 db 9257 db 9258 db 9259 db 9260 db 9261 db 9262 db 13263 db 255264 db 77265 db 77266 db 77267 db 77268 db 77269 db 77270 db 77271 db 76272 db 75273 db 75274 db 77275 db 77276 db 77277 db 77278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 255287 db 255288 db 77289 db 77290 db 255291 db 255292 db 255293 db 255294 db 255295MSXHeroes.asm957SpriteCharAndorogynus:958 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tgs.gen12 db 03 db 04 db 15 db 26 db 77 db 78 db 39 db 110 db 011 db 112 db 213 db 714 db 715 db 316 db 117 db 018 db 019 db 020 db 12821 db 6422 db 22423 db 22424 db 19225 db 12826 db 027 db 12828 db 6429 db 22430 db 22431 db 19232 db 12833 db 034 db 035 db 036 db 037 db 138 db 439 db 440 db 241 db 042 db 043 db 044 db 145 db 446 db 447 db 248 db 049 db 050 db 051 db 052 db 053 db 12854 db 3255 db 16056 db 6457 db 058 db 059 db 060 db 12861 db 3262 db 16063 db 6464 db 065 db 066 db 067 db 068 db 069 db 070 db 271 db 072 db 073 db 074 db 075 db 076 db 077 db 278 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 6487 db 088 db 089 db 090 db 091 db 092 db 093 db 6494 db 095 db 096 db 097 db 098MSXHeroes.asm959SpriteColAndorogynus:960 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tcs.gen12 db 2553 db 2554 db 135 db 136 db 127 db 128 db 129 db 1310 db 25511 db 1312 db 1313 db 1214 db 1215 db 1216 db 1317 db 25518 db 25519 db 25520 db 25521 db 7822 db 7723 db 7724 db 7725 db 25526 db 25527 db 25528 db 7829 db 7730 db 7731 db 7732 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7839 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 7846 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm961SpriteCharNinjaKun:962 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 19 db 110 db 1511 db 712 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 12823 db 12824 db 12825 db 24026 db 24827 db 19228 db 19229 db 19230 db 19231 db 12832 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 1543 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 12059 db 860 db 19261 db 062 db 12863 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 1576 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 11292 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 4105 db 7106 db 7107 db 1108 db 3109 db 3110 db 7111 db 6112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 48121 db 112122 db 224123 db 64124 db 224125 db 240126 db 112127 db 16128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 7138 db 3139 db 0140 db 0141 db 3142 db 6143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 96154 db 224155 db 32156 db 0157 db 112158 db 16159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 2172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 192188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 0200 db 1201 db 1202 db 1203 db 1204 db 7205 db 15206 db 15207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 128218 db 128219 db 248220 db 248221 db 192222 db 192223 db 192224 db 192225 db 64226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 0233 db 0234 db 0235 db 0236 db 7237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 112253 db 16254 db 192255 db 0256 db 64257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 15270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 96286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292MSXHeroes.asm963SpriteColNinjaKun:964 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 138 db 139 db 1310 db 1211 db 912 db 1213 db 1314 db 1215 db 1216 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 7727 db 7428 db 7729 db 25530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 7644 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 1258 db 1259 db 960 db 1361 db 1262 db 1263 db 1264 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7774 db 7775 db 7476 db 25577 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 25591 db 7692 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 255104 db 13105 db 13106 db 13107 db 13108 db 12109 db 9110 db 12111 db 13112 db 12113 db 12114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 255121 db 255122 db 255123 db 255124 db 77125 db 74126 db 77127 db 255128 db 77129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 76142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148MSXHeroes.asm965 ds $8000-$,$ff966dephase968971ScrollBlock: equ $46972phase $4000973 incbin "..\grapx\ObjectsOnMap\Scroll.SC5",7,162 * 128 974 ds $c000-$,$ff975dephase977980ChestBlock: equ $48981phase $4000982 incbin "..\grapx\ObjectsOnMap\Chest.SC5",7,174 * 128 983 ds $c000-$,$ff984dephase986989LevelUpBlock: equ $4a990phase $4000991 incbin "..\grapx\HeroOverview\LevelUp.SC5",7,173 * 128 992 ds $c000-$,$ff993dephase995998HudNewBlock: equ $4c999phase $40001000 incbin "..\grapx\hud\HudNew.SC5",7,212 * 128 1001 ds $c000-$,$ff1002dephase10041007SecondarySkillsButtonsBlock: equ $4e1008phase $40001009 incbin "..\grapx\HeroOverview\SecondarySkillsButtons.SC5",7,165 * 128 1010 ds $c000-$,$ff1011dephase10131014BattleCodeBlock: equ $501015phase $40001016 BattleCode.asm1CheckEnemyAI:2 ld a,(MoVeMonster?) 3 or a4 ret nz6 ld a,(SwitchToNextMonster?)7 or a8 ret nz10 call SetCurrentActiveMOnsterInIX11 push ix12 pop hl13 ld a,l14 or h 15 jr z,.NeutralOrComputerControlledMonsterFound17 ld a,(HeroThatGetsAttacked) 18 or a 19 jr z,.EndCheckPlayerGetsAttackIsHuman?21 ld a,(PlayerThatGetsAttacked) 22 ld hl,player1human?-123 ld d,024 ld e,a25 add hl,de26 ld a,(hl)27 or a28 ret nz 29 .EndCheckPlayerGetsAttackIsHuman?:31 ld a,(CurrentActiveMonster) 32 cp 733 jp c,.HumanPlayerFound 34 35 .NeutralOrComputerControlledMonsterFound:36 call SetMonsterTableInIY 38 call SetTotalMonsterSpeedInHL 39 ld c,l41 ld d,(iy+MonsterTableSpecialAbility)424445 ld a,BattleCodePage2Block 46 call block34 47 call HandleEnemyAI 49 ret51.HumanPlayerFound:52 ld a,(AutoCombatButtonPressed?)53 or a54 ret z55 jr .NeutralOrComputerControlledMonsterFound57HandleMonsters:586062 call CheckRightClickToDisplayInfo 63 call CheckSpaceToMoveMonster64 call CheckMonsterDied 65 call CheckSwitchToNextMonster66 call SetCurrentMonsterInBattleFieldGrid 67 call CheckEnemyAI 6970 ld a,BattleCodePage2Block 71 call block34 72 call SetBattleText73 call AnimateAutoCombatButton74 call HandleSpellBook 75 call HandleSpellCast 7879 call SetCurrentActiveMOnsterInIX80 call StoreSYSXNYNXAndBlock 81 call EraseMonsterPreviousFrame 82 call MoveMonster 83 call CheckWaitButtonPressed84 call CheckDefendButtonPressed85 call AnimateMonster 8788 ld ix,Monster089 call StoreSYSXNYNXAndBlock 91 call CheckWasCursorOnATilePreviousFrame92 ld a,(WasCursorOnATilePreviousFrame?)93 or a94 jr z,.EndEraseGridTile96 call EraseMonsterPreviousFrame 98 .EndEraseGridTile:100 call MoveMonster 101 call SortMonstersFromHighToLow 103104 call SetCurrentActiveMOnsterInIX105 call SetAmountUnderMonster106 call StoreSYSXNYNXAndBlock 107 call PutMonster 109110 ld a,(MoVeMonster?) 111 or a112 jr nz,.EndPutGridTile113 ld a,(SwitchToNextMonster?)114 or a115 jr nz,.EndPutGridTile117 call CheckIsCursorOnATileThisFrame118 call SetcursorWhenGridTileIsActive 120 ld a,(IsCursorOnATileThisFrame?)121 or a122 jr z,.EndPutGridTile123 124 ld ix,Monster0125 call StoreSYSXNYNXAndBlock 126 call PutMonster 127 .EndPutGridTile:129130 call SetCurrentActiveMOnsterInIX131 call StoreSYSXNYNXAndBlock 132 call Recover134135 ld a,(MoVeMonster?) 136 or a137 jr nz,.EndRecoverGridTile138 ld a,(SwitchToNextMonster?)139 or a140 jr nz,.EndRecoverGridTile141 ld a,(IsCursorOnATileThisFrame?)142 or a143 jr z,.EndRecoverGridTile145 ld ix,Monster0146 call StoreSYSXNYNXAndBlock 147 call Recover148 .EndRecoverGridTile:149 ret151PressMToLookAtPage2And3:152 ld a,(NewPrContr)153 bit 5,a 154 call nz,.SetPage2156 ld a,(NewPrContr)157 bit 6,a 158 ret z160.SetPage3:161 ld a,3*32+31162 call SetPageSpecial.setpage163 jp .WaitKeyPress165.SetPage2:166 ld a,2*32+31167 call SetPageSpecial.setpage168 jp .WaitKeyPress170.WaitKeyPress:171 call PopulateControls 172 ld a,(NewPrContr)173 bit 4,a 174 jp z,.WaitKeyPress175 ret177BattleScreenVerticalOffset: equ 16178InitiateBattle:179call screenoff183188 ld a,BattleScreenVerticalOffset 189 di190 out ($99),a191 ld a,23+128192 ei193 out ($99),a195201 xor a202 ld (MonsterDied?),a 203 ld (SurrenderButtonPressed?),a 204 ld (RetreatButtonPressed?),a 205 ld (MonsterAnimationStep),a206 ld (MonsterAnimationSpeed),a207 ld (MoVeMonster?),a208 ld (LeftOrRightPlayerLostEntireArmy?),a209 ld (AutoCombatButtonPressed?),a210 ld (LeftPlayerAlreadyCastSpellThisRound?),a211 ld (RightPlayerAlreadyCastSpellThisRound?),a212216217 ld a,BattleCodePage2Block 218 call block34 219 call ClearBattleFieldGridStartOfBattle220 call ClearBattleText221222 call SetFontPage0Y250 223 call SetBattleButtons224226 call BuildUpBattleFieldAndPutMonsters228 ld a,BattleSong229 ld (ChangeSong?),a231 .engine:232234 ld a,(framecounter)235 inc a236 ld (framecounter),a238 call SwapAndSetPage 239 call PopulateControls 240 call HandleMonsters241 call CheckVictoryOrDefeat 242 call CheckRetreatOrSurrender 244 245 ld ix,GenericButtonTable246 call .CheckButtonMouseInteractionGenericButtons247 call .CheckBattleButtonClicked 249 ld ix,GenericButtonTable250 call .SetGenericButtons 252 253262 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady263 call DoCopy265270273 274 ld a,01 275 ld hl,vblankintflag 276 .checkflag:277 cp (hl)278 jr nc,.checkflag279 ld (hl),0280 halt281 call screenon282 jp .engine284.CheckBattleButtonClicked: 285 ret nc287 ld a,(MoVeMonster?) 288 or a289 jr nz,.CheckAutoCombatButton 291 ld a,(SwitchToNextMonster?)292 or a293 jr nz,.CheckAutoCombatButton 295 ld a,b296 cp 9297 jp z,.DiskOptionsButtonPressed298 cp 8299 jp z,.RetreatButtonPressed300 cp 7301 jp z,.SurrenderButtonPressed302 cp 6303 jr z,.WaitButtonPressed304 cp 5305 jr z,.DefendButtonPressed306 cp 4307 jr z,.SpellBookButtonPressed308 cp 2309 jr z,.BattleTextUpButtonPressed310 cp 1311 jr z,.BattleTextDownButtonPressed312 .CheckAutoCombatButton:313 ld a,b314 cp 3315 jr z,.AutoCombatButtonPressed316 ret318.BattleTextDownButtonPressed:319 ld hl,(BattleTextPointer)320 ld bc,BattleTextQ-BattleText1321 add hl,bc323 ld de,BattleText1324 call CompareHLwithDE 325 ret nc326 327 add hl,de328 ld (BattleTextPointer),hl330 ld a,128331 ld (SetBattleText?),a332 ret334.BattleTextUpButtonPressed:335 ld hl,(BattleTextPointer)336 ld bc,BattleTextQ-BattleText1337 or a338 sbc hl,bc340 ld de,BattleText8341 call CompareHLwithDE 342 ret c343 344 add hl,de345 ld (BattleTextPointer),hl347 ld a,128348 ld (SetBattleText?),a349 ret350 351.AutoCombatButtonPressed:352 ld a,(AutoCombatButtonPressed?)353 xor 1354 ld (AutoCombatButtonPressed?),a355 ret357.WaitButtonPressed:358 ld a,1359 ld (WaitButtonPressed?),a360 ret362.SpellBookButtonPressed:363 364 ld hl,(GenericButtonTable + (5*GenericButtonTableLenghtPerButton) + 1)365 ld de,$4000 + (090*128) + (214/2) - 128366 call CompareHLwithDE 367 ret z369 ld a,1370 ld (SpellBookButtonPressed?),a371 jp EndSpellSelected373.DefendButtonPressed:374 ld a,1375 ld (DefendButtonPressed?),a376 ret378.SurrenderButtonPressed:379 380 ld hl,(GenericButtonTable + (2*GenericButtonTableLenghtPerButton) + 1)381 ld de,$4000 + (110*128) + (178/2) - 128382 call CompareHLwithDE 383 ret z385 ld a,1386 ld (SurrenderButtonPressed?),a387 jp EndSpellSelected389.RetreatButtonPressed:390 391 ld hl,(GenericButtonTable + (1*GenericButtonTableLenghtPerButton) + 1)392 ld de,$4000 + (110*128) + (160/2) - 128393 call CompareHLwithDE 394 ret z396 ld a,1397 ld (RetreatButtonPressed?),a398 jp EndSpellSelected400.DiskOptionsButtonPressed:401 jp EndSpellSelected403.SetGenericButtons: 404 ld a,(ix+GenericButtonGfxBlock)405 ld (ButtonGfxBlockCopy),a407 ld b,(ix+GenericButtonAmountOfButtons)408 .loop:409 push bc410 call .Setbutton411 pop bc412 ld de,GenericButtonTableLenghtPerButton413 add ix,de415 djnz .loop416 ret418 .Setbutton:419 bit 7,(ix+GenericButtonStatus)420 ret z 422 bit 0,(ix+GenericButtonStatus) 423 res 0,(ix+GenericButtonStatus) 424 jr nz,.goCopyButton425 bit 1,(ix+GenericButtonStatus)426 res 1,(ix+GenericButtonStatus)427 ret z 428 .goCopyButton:430 ld l,(ix+GenericButton_SYSX_Ontouched)431 ld h,(ix+GenericButton_SYSX_Ontouched+1)432 bit 6,(ix+GenericButtonStatus)433 jr nz,.go 435 ld l,(ix+GenericButton_SYSX_MovedOver)436 ld h,(ix+GenericButton_SYSX_MovedOver+1)437 bit 5,(ix+GenericButtonStatus)438 jr nz,.go 440 ld l,(ix+GenericButton_SYSX_Clicked)441 ld h,(ix+GenericButton_SYSX_Clicked+1)442 .go:444 445 ld e,(ix+GenericButton_DYDX)446 ld d,(ix+GenericButton_DYDX+1)448 ld a,(ix+GenericButtonYbottom)449 sub a,(ix+GenericButtonYtop)450 ld b,a 451 ld a,(ix+GenericButtonXright)452 sub a,(ix+GenericButtonXleft)453 srl a 454 ld c,a 457 ld a,(ButtonGfxBlockCopy)459461 ld de,$8000 + ((212+16)*128) + (000/2) - 128 462 call CopyRamToVramCorrectedWithoutActivePageSetting 464 ld a,(activepage)465 xor 1466 ld (CopyCastleButton2+dPage),a468 ld a,(ix+GenericButtonXleft)469 ld (CopyCastleButton2+dx),a470 ld a,(ix+GenericButtonYtop)471 ld (CopyCastleButton2+dy),a473 ld a,(ix+GenericButtonYbottom)474 sub a,(ix+GenericButtonYtop)475 ld (CopyCastleButton2+ny),a477 ld a,(ix+GenericButtonXright)478 sub a,(ix+GenericButtonXleft)479 ld (CopyCastleButton2+nx),a481 ld a,212+16482 ld (CopyCastleButton2+sy),a484 ld hl,CopyCastleButton2485 call docopy487 ld a,212488 ld (CopyCastleButton2+sy),a490 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady491 call docopy492 ret494.CheckButtonMouseInteractionGenericButtons:495 ld b,(ix+GenericButtonAmountOfButtons)496 ld de,GenericButtonTableLenghtPerButton498 .loop2:499 call .check500 add ix,de501 djnz .loop2502 ret503 504 .check:505 bit 7,(ix+GenericButtonStatus) 506 ret z 507 508 ld a,(spat+0) 509 cp (ix+GenericButtonYtop)510 jr c,.NotOverButton511 cp (ix+GenericButtonYbottom)512 jr nc,.NotOverButton513 ld a,(spat+1) 515 add a,06516 517 cp (ix+GenericButtonXleft)518 jr c,.NotOverButton519 cp (ix+GenericButtonXright)520 jr nc,.NotOverButton521 523529 ld a,(Controls)530 bit 4,a 531 jr nz,.MouseOverButtonAndSpacePressed532 bit 4,(ix+GenericButtonStatus) 533 jr nz,.MenuOptionSelected 534 .MouseHoverOverButton:535 ld (ix+GenericButtonStatus),%1010 0011536 ret538 .MouseOverButtonAndSpacePressed:539 bit 4,(ix+GenericButtonStatus) 540 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit541 ld a,(NewPrContr)542 bit 4,a 543 jr z,.MouseHoverOverButton545 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:546 ld (ix+GenericButtonStatus),%1001 0011547 ret548 549 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:550 ld (ix+GenericButtonStatus),%1001 0011551 ret553 .NotOverButton:554 bit 4,(ix+GenericButtonStatus) 555 jr nz,.buttonIsStillLit556 bit 5,(ix+GenericButtonStatus) 557 ret z558 .buttonIsStillLit:559 ld (ix+GenericButtonStatus),%1100 0011560 ret562 .MenuOptionSelected:563 pop af 564 ld (ix+GenericButtonStatus),%1010 0011565 scf 567 ld a,b 568 ld (MenuOptionSelected?),a569 ret571SetMonsterTableInIY:572 ld a,(slot.page12rom) 573 out ($a8),a 575 576 ld a,MonsterAddressesForBattle1Block 577 call block34 579 ld h,0580 ld l,(ix+MonsterNumber)581 ld de,LengthMonsterAddressesTable582 call MultiplyHlWithDE 583 ld iy,Monster001Table-LengthMonsterAddressesTable 584 ex de,hl585 add iy,de586 ret588592 596599608SetMonsterTableInIYNeutralMonster:609 ld a,MonsterAddressesForBattle1Block 610 call block34 612 613 call SetNeutralMonsterHeroCollidedWithInA615 ld h,0616 ld l,a617 ld de,LengthMonsterAddressesTable618 call MultiplyHlWithDE 619 ld iy,Monster001Table-LengthMonsterAddressesTable 620 ex de,hl621 add iy,de622 ret634CheckRetreatOrSurrender:635 ld a,(SurrenderButtonPressed?)636 or a 637 jp nz,SurrenderButtonPressed638 ld a,(RetreatButtonPressed?)639 or a 640 jp nz,RetreatButtonPressed641 ret643CalculateCostToSurrender: 644 ld a,(CurrentActiveMonster) 645 cp 7646 jr c,.LeftPlayerSurrendered648 .RightPlayerSurrendered:649 ld ix,Monster7650 call .CalculateCostMonsters651 push hl653 ld ix,Monster8654 call .CalculateCostMonsters655 pop de656 add hl,de657 push hl659 ld ix,Monster9660 call .CalculateCostMonsters661 pop de662 add hl,de663 push hl665 ld ix,Monster10666 call .CalculateCostMonsters667 pop de668 add hl,de669 push hl671 ld ix,Monster11672 call .CalculateCostMonsters673 pop de674 add hl,de675 push hl677 ld ix,Monster12678 call .CalculateCostMonsters679 pop de680 add hl,de681 682 683 ld de,5684 call MultiplyHlWithDE 685 ret687 .LeftPlayerSurrendered:688 ld ix,Monster1689 call .CalculateCostMonsters690 push hl692 ld ix,Monster2693 call .CalculateCostMonsters694 pop de695 add hl,de696 push hl698 ld ix,Monster3699 call .CalculateCostMonsters700 pop de701 add hl,de702 push hl704 ld ix,Monster4705 call .CalculateCostMonsters706 pop de707 add hl,de708 push hl710 ld ix,Monster5711 call .CalculateCostMonsters712 pop de713 add hl,de714 push hl716 ld ix,Monster6717 call .CalculateCostMonsters718 pop de719 add hl,de721 722 ld de,5723 call MultiplyHlWithDE 724 ret726 .CalculateCostMonsters:727 push ix728 call SetMonsterTableInIY 729 ld d,0730 ld e,(iy+MonsterTableCostGold)731 pop ix732 ld l,(ix+MonsterAmount)733 ld h,(ix+MonsterAmount+1)734 call MultiplyHlWithDE 735 ret737SurrenderButtonPressed:738 xor a739 ld (SurrenderButtonPressed?),a741 ld (MoVeMonster?),a 742 or a743 ret nz 745 call .BackupBackGround746 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady747 call DoCopy749 ld hl,$4000 + (000*128) + (000/2) - 128750 ld de,$0000 + ((120+16)*128) + (014/2) - 128751 ld bc,$0000 + (059*256) + (228/2)752 ld a,RetreatBlock 753 call CopyRamToVramCorrectedCastleOverview 755 call CalculateCostToSurrender 757 758 ld b,125 759 ld c,142+16 761 call SetNumber16BitCastle762 763 764 ld a,(CurrentActiveMonster) 765 cp 7766 ld ix,(HeroThatGetsAttacked) 767 jr c,.CurrentActiveHeroFound768 ld ix,(plxcurrentheroAddress)769 .CurrentActiveHeroFound:770 ld b,123 771 ld c,135+16 772 ld l,(ix+HeroSpecificInfo+0) 773 ld h,(ix+HeroSpecificInfo+1)774 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel775 call SetText 776 777 call SwapAndSetPage 778 call CheckVictoryOrDefeat.CopyActivePageToInactivePage779 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady780 call DoCopy782 call SetSurrenderButtons784 .engine:785 call SwapAndSetPage 786 call PopulateControls 788 789 ld ix,GenericButtonTable2790 call InitiateBattle.CheckButtonMouseInteractionGenericButtons791 call .CheckSurrenderButtonClicked 793 ld ix,GenericButtonTable2794 call InitiateBattle.SetGenericButtons 797 ld a,(NewPrContr)798 bit 5,a 799 call nz,.NoPressed800 jp .engine802.CheckSurrenderButtonClicked: 803 ret nc805 ld a,b806 cp 2807 jr z,.YesPressed808810 811 .NoPressed:812 call .RestoreBackGround813 pop af 814 ret816 .YesPressed:817 818 ld a,(CurrentActiveMonster) 819 cp 7820 jr c,.LeftPlayerSurrendered821 .RightPlayerSurrendered:822 call CalculateXpGainedLeftPlayer 823 ld ix,(plxcurrentheroAddress) 825 ld e,(ix+HeroXp+0)826 ld d,(ix+HeroXp+1)827 add hl,de828 jr c,.EndCheckOverflow1829 ld (ix+HeroXp+0),l830 ld (ix+HeroXp+1),h831 .EndCheckOverflow1:832 jr .EndCheckOverflow2834 .LeftPlayerSurrendered:835 call CalculateXpGainedRightPlayer 836 ld ix,(HeroThatGetsAttacked) 838 ld e,(ix+HeroXp+0)839 ld d,(ix+HeroXp+1)840 add hl,de841 jr c,.EndCheckOverflow2842 ld (ix+HeroXp+0),l843 ld (ix+HeroXp+1),h844 .EndCheckOverflow2: 846 call ExchangeSurrenderGoldBetweenHeroes847 call RemoveDeadMonstersAttacker848 call RemoveDeadMonstersDefender850 851 ld a,(CurrentActiveMonster) 852 cp 7853 ld ix,(plxcurrentheroAddress)854 jr c,.CurrentActiveHeroFound1855 ld ix,(HeroThatGetsAttacked) 856 .CurrentActiveHeroFound1:858 call HeroFledSurrendering859 pop af 860 pop af 862 ld a,StopSong863 ld (ChangeSong?),a864 ret866.RestoreBackGround:867 ld a,(activepage) 868 or a869 jr z,.ActivePageIs0870 871 .ActivePageIs1:872 ld hl,.RestorePage3toPage0873 call docopy874 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady875 call DoCopy 876 call SwapAndSetPage 877 ld hl,.RestorePage3toPage1878 call docopy879 ret880 .ActivePageIs0: 881 ld hl,.RestorePage3toPage1882 call docopy883 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady884 call DoCopy 885 call SwapAndSetPage 886 ld hl,.RestorePage3toPage0887 call docopy888 ret890.BackupBackGround:891 ld a,(activepage) 892 or a893 ld hl,.BackupPage1toPage3894 jp z,docopy895 ld hl,.BackupPage0toPage3896 jp docopy898.BackupPage1toPage3:899 db 014,000,120+16,001900 db 000,000,256-59,003901 db 228,000,059,000902 db 000,000,$d0 903.BackupPage0toPage3:904 db 014,000,120+16,000905 db 000,000,256-59,003906 db 228,000,059,000907 db 000,000,$d0 909.RestorePage3toPage0:910 db 000,000,256-59,003911 db 014,000,120+16,000912 db 228,000,059,000913 db 000,000,$d0 914.RestorePage3toPage1:915 db 000,000,256-59,003916 db 014,000,120+16,001917 db 228,000,059,000918 db 000,000,$d0 927ExchangeSurrenderGoldBetweenHeroes:928 call CalculateCostToSurrender 929 push hl930 pop de932 933 ld a,(CurrentActiveMonster) 934 cp 7935 ld a,(whichplayernowplaying?) 936 jr c,.SurrenderingPlayerFound937 ld a,(PlayerThatGetsAttacked)938 .SurrenderingPlayerFound:940 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA941 ld l,(ix+0)942 ld h,(ix+1) 943 or a944 sbc hl,de 945 ld (ix+0),l946 ld (ix+1),h 948 949 ld a,(CurrentActiveMonster) 950 cp 7951 ld a,(PlayerThatGetsAttacked)952 jr c,.VictoriousPlayerFound953 ld a,(whichplayernowplaying?) 954 .VictoriousPlayerFound:956 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA957 ld l,(ix+0)958 ld h,(ix+1) 959 add hl,de 960 ret c961 ld (ix+0),l962 ld (ix+1),h 963 ret970SetSurrenderButtons:971 ld hl,SurrenderButtonTable-2972 ld de,GenericButtonTable2-2973 ld bc,2+(GenericButtonTableLenghtPerButton*2)974 ldir976 call CalculateCostToSurrender 977 push hl978 pop de980 ld a,(CurrentActiveMonster) 981 cp 7982 ld a,(whichplayernowplaying?) 983 jr c,.SurrenderingPlayerFound984 ld a,(PlayerThatGetsAttacked)985 .SurrenderingPlayerFound:987 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA988 ld l,(ix+0)989 ld h,(ix+1) 990 or a991 sbc hl,de 992 ret nc994 xor a995 ld (GenericButtonTable2),a 996 ret998SurrenderButton1Ytop: equ 153+16999SurrenderButton1YBottom: equ SurrenderButton1Ytop + 0191000SurrenderButton1XLeft: equ 0621001SurrenderButton1XRight: equ SurrenderButton1XLeft + 0201003SurrenderButton2Ytop: equ 154+161004SurrenderButton2YBottom: equ SurrenderButton2Ytop + 0181005SurrenderButton2XLeft: equ 1741006SurrenderButton2XRight: equ SurrenderButton2XLeft + 0201008SurrenderButtonTableGfxBlock: db RetreatBlock1009SurrenderButtonTableAmountOfButtons: db 21010SurrenderButtonTable: 1011 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db SurrenderButton1Ytop,SurrenderButton1YBottom,SurrenderButton1XLeft,SurrenderButton1XRight | dw $0000 + (SurrenderButton1Ytop*128) + (SurrenderButton1XLeft/2) - 128 1012 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db SurrenderButton2Ytop,SurrenderButton2YBottom,SurrenderButton2XLeft,SurrenderButton2XRight | dw $0000 + (SurrenderButton2Ytop*128) + (SurrenderButton2XLeft/2) - 128 1014RetreatButtonPressed:1015 xor a1016 ld (RetreatButtonPressed?),a1018 ld (MoVeMonster?),a 1019 or a1020 ret nz 1022 call SurrenderButtonPressed.BackupBackGround1023 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1024 call DoCopy1026 ld hl,$4000 + (058*128) + (000/2) - 1281027 ld de,$0000 + ((120+16)*128) + (014/2) - 1281028 ld bc,$0000 + (059*256) + (228/2)1029 ld a,RetreatBlock 1030 call CopyRamToVramCorrectedCastleOverview 1032 call SwapAndSetPage 1033 call CheckVictoryOrDefeat.CopyActivePageToInactivePage1034 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1035 call DoCopy1037 call SetRetreatButtons1039 .engine:1040 call SwapAndSetPage 1041 call PopulateControls 1043 1044 ld ix,GenericButtonTable21045 call InitiateBattle.CheckButtonMouseInteractionGenericButtons1046 call .CheckRetreatButtonClicked 1048 ld ix,GenericButtonTable21049 call InitiateBattle.SetGenericButtons 1052 ld a,(NewPrContr)1053 bit 5,a 1054 call nz,SurrenderButtonPressed.NoPressed1055 jp .engine1057.CheckRetreatButtonClicked: 1058 ret nc1060 ld a,b1061 cp 21062 jr z,.YesPressed10631065 1066 .NoPressed:1067 call SurrenderButtonPressed.RestoreBackGround1069 pop af 1070 ret1072 .YesPressed:1073 1074 ld a,(CurrentActiveMonster) 1075 cp 71076 jr c,.LeftPlayerRetreated1077 .RightPlayerRetreated:1078 call CalculateXpGainedLeftPlayer 1079 ld ix,(plxcurrentheroAddress) 1081 ld e,(ix+HeroXp+0)1082 ld d,(ix+HeroXp+1)1083 add hl,de1084 jr c,.EndCheckOverflow11085 ld (ix+HeroXp+0),l1086 ld (ix+HeroXp+1),h1087 .EndCheckOverflow1:1088 jr .EndCheckOverflow21090 .LeftPlayerRetreated:1091 call CalculateXpGainedRightPlayer 1092 ld ix,(HeroThatGetsAttacked) 1094 ld e,(ix+HeroXp+0)1095 ld d,(ix+HeroXp+1)1096 add hl,de1097 jr c,.EndCheckOverflow21098 ld (ix+HeroXp+0),l1099 ld (ix+HeroXp+1),h1100 .EndCheckOverflow2: 1102 call RemoveDeadMonstersAttacker1103 call RemoveDeadMonstersDefender1104 1105 1106 ld a,(CurrentActiveMonster) 1107 cp 71108 ld ix,(plxcurrentheroAddress)1109 jr c,.CurrentActiveHeroFound1110 ld ix,(HeroThatGetsAttacked) 1111 .CurrentActiveHeroFound:1113 call HeroFledRetreating1114 pop af 1115 pop af 1117 ld a,StopSong1118 ld (ChangeSong?),a1119 ret1121SetRetreatButtons:1122 ld hl,SurrenderButtonTable-21123 ld de,GenericButtonTable2-21124 ld bc,2+(GenericButtonTableLenghtPerButton*2)1125 ldir1126 ret1130RemoveDeadMonstersAttacker:1131 1132 ld iy,(plxcurrentheroAddress) 1134 ld a,(Monster1+MonsterAmount)1135 ld (iy+HeroUnits+1),a1136 ld a,(Monster1+MonsterAmount+1)1137 ld (iy+HeroUnits+2),a 1138 or (iy+HeroUnits+1)1139 jr nz,.EndCheck0UnitsLeftSlot11140 ld (iy+HeroUnits+0),0 1141 .EndCheck0UnitsLeftSlot1:1143 ld a,(Monster2+MonsterAmount)1144 ld (iy+HeroUnits+4),a1145 ld a,(Monster2+MonsterAmount+1)1146 ld (iy+HeroUnits+5),a 1147 or (iy+HeroUnits+4)1148 jr nz,.EndCheck0UnitsLeftSlot21149 ld (iy+HeroUnits+3),0 1150 .EndCheck0UnitsLeftSlot2:1152 ld a,(Monster3+MonsterAmount)1153 ld (iy+HeroUnits+7),a1154 ld a,(Monster3+MonsterAmount+1)1155 ld (iy+HeroUnits+8),a 1156 or (iy+HeroUnits+7)1157 jr nz,.EndCheck0UnitsLeftSlot31158 ld (iy+HeroUnits+6),0 1159 .EndCheck0UnitsLeftSlot3:1161 ld a,(Monster4+MonsterAmount)1162 ld (iy+HeroUnits+10),a1163 ld a,(Monster4+MonsterAmount+1)1164 ld (iy+HeroUnits+11),a 1165 or (iy+HeroUnits+10)1166 jr nz,.EndCheck0UnitsLeftSlot41167 ld (iy+HeroUnits+9),0 1168 .EndCheck0UnitsLeftSlot4:1170 ld a,(Monster5+MonsterAmount)1171 ld (iy+HeroUnits+13),a1172 ld a,(Monster5+MonsterAmount+1)1173 ld (iy+HeroUnits+14),a 1174 or (iy+HeroUnits+13)1175 jr nz,.EndCheck0UnitsLeftSlot51176 ld (iy+HeroUnits+12),0 1177 .EndCheck0UnitsLeftSlot5:1179 ld a,(Monster6+MonsterAmount)1180 ld (iy+HeroUnits+16),a1181 ld a,(Monster6+MonsterAmount+1)1182 ld (iy+HeroUnits+17),a 1183 or (iy+HeroUnits+16)1184 jr nz,.EndCheck0UnitsLeftSlot61185 ld (iy+HeroUnits+15),0 1186 .EndCheck0UnitsLeftSlot6:1187 ret1189RemoveDeadMonstersDefender:1190 1191 ld iy,(HeroThatGetsAttacked) 1193 push iy1194 pop hl1195 ld a,l1196 or h1197 jr z,.RemoveDeadMonstersNeutralMonster1199 ld a,(Monster7+MonsterAmount)1200 ld (iy+HeroUnits+1),a1201 ld a,(Monster7+MonsterAmount+1)1202 ld (iy+HeroUnits+2),a 1203 or (iy+HeroUnits+1)1204 jr nz,.EndCheck0UnitsLeftSlot11205 ld (iy+HeroUnits+0),0 1206 .EndCheck0UnitsLeftSlot1:1208 ld a,(Monster8+MonsterAmount)1209 ld (iy+HeroUnits+4),a1210 ld a,(Monster8+MonsterAmount+1)1211 ld (iy+HeroUnits+5),a 1212 or (iy+HeroUnits+4)1213 jr nz,.EndCheck0UnitsLeftSlot21214 ld (iy+HeroUnits+3),0 1215 .EndCheck0UnitsLeftSlot2:1217 ld a,(Monster9+MonsterAmount)1218 ld (iy+HeroUnits+7),a1219 ld a,(Monster9+MonsterAmount+1)1220 ld (iy+HeroUnits+8),a 1221 or (iy+HeroUnits+7)1222 jr nz,.EndCheck0UnitsLeftSlot31223 ld (iy+HeroUnits+6),0 1224 .EndCheck0UnitsLeftSlot3:1226 ld a,(Monster10+MonsterAmount)1227 ld (iy+HeroUnits+10),a1228 ld a,(Monster10+MonsterAmount+1)1229 ld (iy+HeroUnits+11),a 1230 or (iy+HeroUnits+10)1231 jr nz,.EndCheck0UnitsLeftSlot41232 ld (iy+HeroUnits+9),0 1233 .EndCheck0UnitsLeftSlot4:1235 ld a,(Monster11+MonsterAmount)1236 ld (iy+HeroUnits+13),a1237 ld a,(Monster11+MonsterAmount+1)1238 ld (iy+HeroUnits+14),a 1239 or (iy+HeroUnits+13)1240 jr nz,.EndCheck0UnitsLeftSlot51241 ld (iy+HeroUnits+12),0 1242 .EndCheck0UnitsLeftSlot5:1244 ld a,(Monster12+MonsterAmount)1245 ld (iy+HeroUnits+16),a1246 ld a,(Monster12+MonsterAmount+1)1247 ld (iy+HeroUnits+17),a 1248 or (iy+HeroUnits+16)1249 jr nz,.EndCheck0UnitsLeftSlot61250 ld (iy+HeroUnits+15),0 1251 .EndCheck0UnitsLeftSlot6:1252 ret1254.RemoveDeadMonstersNeutralMonster:1255 ld hl,0 1257 ld ix,Monster71258 call .CheckAmountOfMonstersRemaining1259 ld ix,Monster81260 call .CheckAmountOfMonstersRemaining1261 ld ix,Monster91262 call .CheckAmountOfMonstersRemaining1263 ld ix,Monster101264 call .CheckAmountOfMonstersRemaining1265 ld ix,Monster111266 call .CheckAmountOfMonstersRemaining1267 ld ix,Monster121268 call .CheckAmountOfMonstersRemaining1270 ld de,51271 sbc hl,de1272 ld a,Number1Tile 1273 jr c,.SetAmount1275 ld de,81276 sbc hl,de1277 ld a,Number1Tile+1 1278 jr c,.SetAmount1280 ld de,161281 sbc hl,de1282 ld a,Number1Tile+2 1283 jr c,.SetAmount1285 ld de,321286 sbc hl,de1287 ld a,Number1Tile+3 1288 jr c,.SetAmount1290 ld de,321291 sbc hl,de1292 ld a,Number1Tile+4 1293 jr c,.SetAmount12951297 ld a,Number1Tile+5 1300 .SetAmount:1301 ld (RemoveDeadMonstersNeutralMonster?),a1302 ret1303 1304 .CheckAmountOfMonstersRemaining: 1305 ld e,(ix+MonsterAmount)1306 ld d,(ix+MonsterAmount+1)1307 add hl,de1308 ret1310CalculateXpGainedRightPlayer:1311 1312 ld iy,(plxcurrentheroAddress) 1313 ld l,(iy+HeroUnits+1)1314 ld h,(iy+HeroUnits+2) 1315 ld ix,Monster11316 call CalculateXpGainedLeftPlayer.CalculateXpGained1317 push hl1319 ld iy,(plxcurrentheroAddress) 1320 ld l,(iy+HeroUnits+4)1321 ld h,(iy+HeroUnits+5) 1322 ld ix,Monster21323 call CalculateXpGainedLeftPlayer.CalculateXpGained1324 pop de1325 add hl,de1326 push hl1328 ld iy,(plxcurrentheroAddress) 1329 ld l,(iy+HeroUnits+7)1330 ld h,(iy+HeroUnits+8) 1331 ld ix,Monster31332 call CalculateXpGainedLeftPlayer.CalculateXpGained1333 pop de1334 add hl,de1335 push hl1337 ld iy,(plxcurrentheroAddress) 1338 ld l,(iy+HeroUnits+10)1339 ld h,(iy+HeroUnits+11) 1340 ld ix,Monster41341 call CalculateXpGainedLeftPlayer.CalculateXpGained1342 pop de1343 add hl,de1344 push hl1346 ld iy,(plxcurrentheroAddress) 1347 ld l,(iy+HeroUnits+13)1348 ld h,(iy+HeroUnits+14) 1349 ld ix,Monster51350 call CalculateXpGainedLeftPlayer.CalculateXpGained1351 pop de1352 add hl,de1353 push hl1355 ld iy,(plxcurrentheroAddress) 1356 ld l,(iy+HeroUnits+16)1357 ld h,(iy+HeroUnits+17) 1358 ld ix,Monster61359 call CalculateXpGainedLeftPlayer.CalculateXpGained1360 pop de1361 add hl,de1362 add hl,hl 1364 ld ix,(HeroThatGetsAttacked) 1365 call AddXPBoostFromLearning 1366 ret1368CalculateXpGainedLeftPlayer:1369 ld ix,(HeroThatGetsAttacked) 1370 push ix1371 pop hl1372 ld a,l1373 or h1374 jp z,CalculateXpGainedWhenRightPlayerIsNeutralMonster1376 1377 ld iy,(HeroThatGetsAttacked) 1378 ld l,(iy+HeroUnits+1)1379 ld h,(iy+HeroUnits+2) 1380 ld ix,Monster71381 call .CalculateXpGained1382 push hl1384 ld iy,(HeroThatGetsAttacked) 1385 ld l,(iy+HeroUnits+4)1386 ld h,(iy+HeroUnits+5) 1387 ld ix,Monster81388 call .CalculateXpGained1389 pop de1390 add hl,de1391 push hl1393 ld iy,(HeroThatGetsAttacked) 1394 ld l,(iy+HeroUnits+7)1395 ld h,(iy+HeroUnits+8) 1396 ld ix,Monster91397 call .CalculateXpGained1398 pop de1399 add hl,de1400 push hl1402 ld iy,(HeroThatGetsAttacked) 1403 ld l,(iy+HeroUnits+10)1404 ld h,(iy+HeroUnits+11) 1405 ld ix,Monster101406 call .CalculateXpGained1407 pop de1408 add hl,de1409 push hl1411 ld iy,(HeroThatGetsAttacked) 1412 ld l,(iy+HeroUnits+13)1413 ld h,(iy+HeroUnits+14) 1414 ld ix,Monster111415 call .CalculateXpGained1416 pop de1417 add hl,de1418 push hl1420 ld iy,(HeroThatGetsAttacked) 1421 ld l,(iy+HeroUnits+16)1422 ld h,(iy+HeroUnits+17) 1423 ld ix,Monster121424 call .CalculateXpGained1425 pop de1426 add hl,de1427 add hl,hl 1428 1429 ld ix,(plxcurrentheroAddress) 1430 call AddXPBoostFromLearning 1431 ret1433 .CalculateXpGained:1434 ld e,(ix+MonsterAmount)1435 ld d,(ix+MonsterAmount+1)1437 or a1438 sbc hl,de 1439 ret z 1441 push hl 1442 call SetTotalMonsterHPInHL 1443 push hl1444 pop de14461448 pop hl1450 call MultiplyHlWithDE 1451 ret1453CalculateXpGainedWhenRightPlayerIsNeutralMonster:1454 call SetMonsterTableInIYNeutralMonster1455 ld d,01456 ld e,(iy+MonsterTableHp) 1457 call SetAllMonstersInMonsterTable.SetAmountInA1458 ld h,01459 ld l,a1460 call MultiplyHlWithDE 1462 add hl,hl 1464 ld ix,(plxcurrentheroAddress) 1465 call AddXPBoostFromLearning 1466 ret1468AddXPBoostFromLearning: 1469 ld a,(ix+HeroSkills+0)1470 call .CheckSkillLearning1471 ld a,(ix+HeroSkills+1)1472 call .CheckSkillLearning1473 ld a,(ix+HeroSkills+2)1474 call .CheckSkillLearning1475 ld a,(ix+HeroSkills+3)1476 call .CheckSkillLearning1477 ld a,(ix+HeroSkills+4)1478 call .CheckSkillLearning1479 ld a,(ix+HeroSkills+5)1480 call .CheckSkillLearning1481 ret1483 .CheckSkillLearning:1484 cp 16 1485 jr z,.BasicLearningFound1486 cp 17 1487 jr z,.AdvancedLearningFound1488 cp 18 1489 jr z,.ExpertLearningFound1490 ret1492 .BasicLearningFound:1493 ld de,10 1494 jp ApplyPercentBasedBoost1496 .AdvancedLearningFound:1497 ld de,5 1498 jp ApplyPercentBasedBoost1500 .ExpertLearningFound:1501 ld de,10 1502 call ApplyPercentBasedBoost1503 add hl,bc 1504 add hl,bc 1505 ret1507CheckVictoryOrDefeat:1508 ld a,(MoVeMonster?) 1509 or a1510 ret nz1512 call .CheckLeftPlayerLostEntireArmy1513 call .CheckRightPlayerLostEntireArmy1514 ret1516 .CheckLeftPlayerLostEntireArmy:1517 ld a,(Monster1+MonsterHP)1518 or a1519 ret nz1520 ld a,(Monster2+MonsterHP)1521 or a1522 ret nz1523 ld a,(Monster3+MonsterHP)1524 or a1525 ret nz1526 ld a,(Monster4+MonsterHP)1527 or a1528 ret nz1529 ld a,(Monster5+MonsterHP)1530 or a1531 ret nz1532 ld a,(Monster6+MonsterHP)1533 or a1534 ret nz1535 1537 ld a,11538 ld (LeftOrRightPlayerLostEntireArmy?),a 1539 ld a,(ShowExplosionSprite?) 1540 or a1541 ret nz1543 ld a,StopSong1544 ld (ChangeSong?),a1546 ld a,1 1547 ld (activepage),a 1548 call SwapAndSetPage 1550 ld hl,$4000 + (000*128) + (000/2) - 1281551 ld de,$0000 + ((002+16)*128) + (024/2) - 1281552 ld bc,$0000 + (207*256) + (210/2)15531555 ld a,DefeatBlock 1559 call CopyRamToVramCorrectedCastleOverview 1561 1562 ld ix,(plxcurrentheroAddress) 1563 call .SetLeftHero1565 1566 ld ix,(HeroThatGetsAttacked) 1567 call .SetRightHero1569 ld ix,(HeroThatGetsAttacked) 1570 push ix1571 pop hl1572 ld a,l1573 or h1574 jr z,.EndAddXpToRightPlayer 1575 1576 call CalculateXpGainedRightPlayer 1577 ld ix,(HeroThatGetsAttacked) 1579 ld e,(ix+HeroXp+0)1580 ld d,(ix+HeroXp+1)1581 add hl,de1582 jr c,.EndAddXpToRightPlayer1583 ld (ix+HeroXp+0),l1584 ld (ix+HeroXp+1),h1585 .EndAddXpToRightPlayer:15871588 ld a,BattleCodePage2Block 1589 call block34 1590 call SetBattlefieldCasualtiesAttacker1591 call SetBattlefieldCasualtiesDefender15921594 call RemoveDeadMonstersDefender1595 1596 call SwapAndSetPage 1597 call .CopyActivePageToInactivePage1598 call SetVictoryOrDefeatButton1600 .engine2:1601 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1602 call DoCopy1604 call SwapAndSetPage 1605 call PopulateControls 1607 1608 ld ix,GenericButtonTable21609 call InitiateBattle.CheckButtonMouseInteractionGenericButtons1610 call .CheckVictoryOrDefeatButtonClicked 1612 ld ix,GenericButtonTable21613 call InitiateBattle.SetGenericButtons 1616 ld a,(NewPrContr)1617 bit 5,a 1618 jp z,.engine21620 1621 call DeactivateHeroThatAttacks 1622 1623 pop de1624 pop de1625 ret1626 1627.CheckVictoryOrDefeatButtonClicked:1628 ret nc1629 1630 1631 call DeactivateHeroThatAttacks 1633 1634 call FirstHeroWindowClicked 1635 1636 pop de1637 pop de1638 pop de1639 ret1641 .CheckRightPlayerLostEntireArmy:1642 ld a,(Monster7+MonsterHP)1643 or a1644 ret nz1645 ld a,(Monster8+MonsterHP)1646 or a1647 ret nz1648 ld a,(Monster9+MonsterHP)1649 or a1650 ret nz1651 ld a,(Monster10+MonsterHP)1652 or a1653 ret nz1654 ld a,(Monster11+MonsterHP)1655 or a1656 ret nz1657 ld a,(Monster12+MonsterHP)1658 or a1659 ret nz1660 1662 ld a,11663 ld (LeftOrRightPlayerLostEntireArmy?),a 1664 ld a,(ShowExplosionSprite?) 1665 or a1666 ret nz1668 ld a,StopSong1669 ld (ChangeSong?),a1670 1671 ld a,1 1672 ld (activepage),a 1673 call SwapAndSetPage 1675 ld hl,$4000 + (000*128) + (000/2) - 1281676 ld de,$0000 + ((002+16)*128) + (024/2) - 1281677 ld bc,$0000 + (127*256) + (210/2)1678 ld a,VictoryBlock 1679 call CopyRamToVramCorrectedCastleOverview 1681 ld hl,$4000 + (127*128) + (000/2) - 1281682 ld de,$0000 + ((002+127+16)*128) + (024/2) - 1281683 ld bc,$0000 + ((207-127)*256) + (210/2)1684 ld a,DefeatBlock 1685 call CopyRamToVramCorrectedCastleOverview 1687 1688 ld ix,(plxcurrentheroAddress) 1689 call .SetLeftHero1691 1692 ld ix,(HeroThatGetsAttacked) 1693 call .SetRightHero1695 call CalculateXpGainedLeftPlayer 1697 push hl1698 ld ix,(plxcurrentheroAddress) 1700 ld e,(ix+HeroXp+0)1701 ld d,(ix+HeroXp+1)1702 add hl,de1703 jr c,.EndCheckOverflow1704 ld (ix+HeroXp+0),l1705 ld (ix+HeroXp+1),h1706 .EndCheckOverflow:1707 pop hl1709 1710 ld b,112 1711 ld c,116+16 1712 call SetNumber16BitCastle1713 17141715 ld a,BattleCodePage2Block 1716 call block34 1717 call SetBattlefieldCasualtiesAttacker1718 call SetBattlefieldCasualtiesDefender17191721 call RemoveDeadMonstersAttacker1723 call SwapAndSetPage 1724 call .CopyActivePageToInactivePage1725 call SetVictoryOrDefeatButton17271728 ld a,BattleCodePage2Block 1729 call block34 1730 call HandleNecromancy 1731 call AttackingHeroTakesItemsDefendingHero17321734 .engine:1735 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1736 call DoCopy1738 call SwapAndSetPage 1739 call PopulateControls 1741 1742 ld ix,GenericButtonTable21743 call InitiateBattle.CheckButtonMouseInteractionGenericButtons1744 call .CheckVictoryOrDefeatButtonClicked2 1746 ld ix,GenericButtonTable21747 call InitiateBattle.SetGenericButtons 1750 ld a,(NewPrContr)1751 bit 5,a 1752 jp z,.engine 1754 1755 call DeactivateHeroThatGetsAttacked 1756 1757 pop de1758 pop de1759 ret1760 1761.CheckVictoryOrDefeatButtonClicked2:1762 ret nc1763 1764 1765 call DeactivateHeroThatGetsAttacked 1766 1767 pop de1768 pop de1769 pop de1770 ret1772.SetLeftHero:1773 push ix1774 ld l,(ix+HeroSpecificInfo+0) 1775 ld h,(ix+HeroSpecificInfo+1)1776 push hl1777 pop ix1778 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1779 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1780 ld bc,$40001781 xor a1782 sbc hl,bc1783 ld de,$0000 + ((011+16)*128) + (032/2) - 1281784 ld bc,NXAndNY16x30HeroIcon1785 ld a,Hero16x30PortraitsBlock 1786 call CopyRamToVramCorrectedCastleOverview 1788 1789 pop ix1790 ld b,090 1791 ld c,013+16 1792 ld l,(ix+HeroSpecificInfo+0) 1793 ld h,(ix+HeroSpecificInfo+1)1794 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1795 call SetText 1797 ld b,121 1798 ld c,109+16 1799 ld l,(ix+HeroSpecificInfo+0) 1800 ld h,(ix+HeroSpecificInfo+1)1801 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1802 call SetText 1803 ret1805 .SetRightHero:1806 push ix1807 pop hl1808 ld a,l1809 or h1810 jr z,.RightHeroIsANeutralMonster1811 1812 push ix1813 ld l,(ix+HeroSpecificInfo+0) 1814 ld h,(ix+HeroSpecificInfo+1)1815 push hl1816 pop ix1817 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1818 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1819 ld bc,$40001820 xor a1821 sbc hl,bc1822 ld de,$0000 + ((011+16)*128) + (210/2) - 1281823 ld bc,NXAndNY16x30HeroIcon1824 ld a,Hero16x30PortraitsBlock 1825 call CopyRamToVramCorrectedCastleOverview 1827 1828 pop ix1829 ld b,166 1830 ld c,013+16 1831 ld l,(ix+HeroSpecificInfo+0) 1832 ld h,(ix+HeroSpecificInfo+1)1833 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1834 call SetText 1835 ret1837 .RightHeroIsANeutralMonster:1838 call SetNeutralMonsterHeroCollidedWithInA1839 call CheckRightClickToDisplayInfo.SetSYSX1840 exx1841 ld de,256*(015+16) + (211)1842 exx1843 ld de,$0000 + ((015+16)*128) + (210/2) - 1281844 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 1846 call SetMonsterTableInIYNeutralMonster1847 push iy1848 pop hl1849 ld de,MonsterTableName1850 add hl,de1852 1853 ld b,166 1854 ld c,013+16 1856 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1857 call SetText1858 ret1860 .CopyActivePageToInactivePage:1861 ld a,(activepage) 1862 or a1863 ld hl,.CopyPage0toPage11864 jp z,docopy1865 ld hl,.CopyPage1toPage01866 jp docopy1868.CopyPage1toPage0:1869 db 000,000,016,0011870 db 000,000,016,0001871 db 000,001,212,0001872 db 000,000,$d0 1873.CopyPage0toPage1:1874 db 000,000,016,0001875 db 000,000,016,0011876 db 000,001,212,0001877 db 000,000,$d0 1879SetVictoryOrDefeatButton:1880 ld hl,VictoryOrDefeatButtonTable-21881 ld de,GenericButtonTable2-21882 ld bc,2+(GenericButtonTableLenghtPerButton*1)1883 ldir1884 ret1886VictoryOrDefeatButton1Ytop: equ 183 + 161887VictoryOrDefeatButton1YBottom: equ VictoryOrDefeatButton1Ytop + 0191888VictoryOrDefeatButton1XLeft: equ 2081889VictoryOrDefeatButton1XRight: equ VictoryOrDefeatButton1XLeft + 0201891VictoryOrDefeatButtonTableGfxBlock: db RetreatBlock1892VictoryOrDefeatButtonTableAmountOfButtons: db 11893VictoryOrDefeatButtonTable: 1894 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db VictoryOrDefeatButton1Ytop,VictoryOrDefeatButton1YBottom,VictoryOrDefeatButton1XLeft,VictoryOrDefeatButton1XRight | dw $0000 + (VictoryOrDefeatButton1Ytop*128) + (VictoryOrDefeatButton1XLeft/2) - 128 1897CheckRightClickToDisplayInfo:18981902 ld a,(MoVeMonster?) 1903 or a1904 ret nz1906 ld a,(NewPrContr)1907 bit 5,a 1908 ret z1910 1916 ld ix,Monster11917 call .CheckMonster1918 ld ix,Monster21919 call .CheckMonster1920 ld ix,Monster31921 call .CheckMonster1922 ld ix,Monster41923 call .CheckMonster1924 ld ix,Monster51925 call .CheckMonster1926 ld ix,Monster61927 call .CheckMonster1928 ld ix,Monster71929 call .CheckMonster1930 ld ix,Monster81931 call .CheckMonster1932 ld ix,Monster91933 call .CheckMonster1934 ld ix,Monster101935 call .CheckMonster1936 ld ix,Monster111937 call .CheckMonster1938 ld ix,Monster121939 call .CheckMonster1941 call CheckPointerOnAttackingHero1942 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1943 call docopy 1944 call CheckPointerOnDefendingHero1945 ret1947 .CheckMonster:1948 call .Check1TileMonsterStandsOn 1949 1950 ld a,(ix+MonsterNX)1951 cp 171952 ret c1953 ld a,(Monster0+MonsterX)1954 ld c,a1955 ld a,(ix+MonsterX)1956 add a,161957 call .Check1959 1960 ld a,(ix+MonsterNX)1961 cp 331962 ret c1963 ld a,(Monster0+MonsterX)1964 ld c,a1965 ld a,(ix+MonsterX)1966 add a,321967 call .Check1969 1970 ld a,(ix+MonsterNX)1971 cp 571972 ret c1973 ld a,(Monster0+MonsterX)1974 ld c,a1975 ld a,(ix+MonsterX)1976 add a,481977 call .Check1978 ret1979 .Check1TileMonsterStandsOn: 1980 ld a,(Monster0+MonsterX)1981 ld c,a1982 ld a,(ix+MonsterX)1984 .Check:1985 cp c1986 ret nz1988 ld a,(ix+MonsterY)1989 ld c,a1990 ld a,(ix+MonsterNY)1991 add a,c1992 ld c,a1994 ld a,(Monster0+MonsterY)1995 add a,0171996 cp c1997 ret nz1999 pop af2000 pop af2001 2002 ld de,$0000 + ((000+16)*128) + (000/2) - 1282004 ld a,(spat+1) 2005 sub 322006 jr nc,.NotCarryX2007 xor a2008 .NotCarryX:2009 cp 1262010 jr c,.NoOverFlowRight2011 ld a,1262012 .NoOverFlowRight:2014 res 0,a2016 push af 2018 srl a 2019 ld h,02020 ld l,a2021 add hl,de2022 ex de,hl2023 2024 ld a,(spat+0) 2025 ld b,-502026 cp 702027 jr nc,.CursorTopOfScreen2028 ld b,322029 .CursorTopOfScreen:2030 add a,b2031 2032 2033 sub a,242034 jr nc,.NotCarryY2035 xor a2036 .NotCarryY:2037 cp 1132038 jr c,.NoOverFlowBottom2039 ld a,1132040 .NoOverFlowBottom:2042 res 0,a2044 push af 2046 ld h,02047 ld l,a2048 add hl,hl 2049 add hl,hl 2050 add hl,hl 2051 add hl,hl 2052 add hl,hl 2053 add hl,hl 2054 add hl,hl 2055 add hl,de2056 ex de,hl2058 2059 ld hl,$4000 + (061*128) + (162/2) - 1282060 ld bc,$0000 + (070*256) + (086/2)2061 ld a,ScrollBlock 2062 push de2063 pop iy 2064 call CopyRamToVramCorrectedCastleOverview 2066 2067 push iy2068 call SetMonsterTableInIY 2069 ld a,(iy+MonsterTableSpecialAbility)2070 pop iy2071 cp RangedMonster2072 jp nz,.EndCheckMonsterIsRanged2074 push iy2075 pop de 2076 ld hl,10/2 + (49*128)2077 add hl,de2078 ex de,hl2079 ld hl,$4000 + (131*128) + (162/2) - 1282080 ld bc,$0000 + (014*256) + (014/2)2081 ld a,ScrollBlock 2082 call CopyRamToVramCorrectedCastleOverview 2083 .EndCheckMonsterIsRanged:2085 ld a,(ix+MonsterNumber)2086 call .SetSYSX20882090 ex af,af'2091 pop af 2092 add a,23+132093 ld d,a2094 pop af 2095 add a,92096 ld e,a2097 push af2098 ld a,d 2099 push af2100 ex af,af'2102 call CopyTransparantImageBattleCode 2104 2105 ld a,(ix+MonsterStatusEffect1)2106 ld hl,68/2 + (16*128) 2107 call .SetStatusSpellEffectIcon2109 ld a,(ix+MonsterStatusEffect2)2110 ld hl,68/2 + (30*128) 2111 call .SetStatusSpellEffectIcon2113 ld a,(ix+MonsterStatusEffect3)2114 ld hl,54/2 + (16*128) 2115 call .SetStatusSpellEffectIcon2117 ld a,(ix+MonsterStatusEffect4)2118 ld hl,54/2 + (30*128) 2119 call .SetStatusSpellEffectIcon2121 ld a,(ix+MonsterStatusEffect5)2122 ld hl,68/2 + (43*128) 2123 call .SetStatusSpellEffectIcon2125 2126 pop af 2127 add a,48-23+122128 ld c,a 2129 pop af 2130 add a,41-82131 ld b,a 2132 push bc2134 ld h,02135 ld l,(ix+MonsterHP)2136 call SetNumber16BitCastle2138 2139 ld a,(PutLetter+dy) 2140 ld c,a 2141 ld a,(PutLetter+dx) 2142 ld b,a 2144 ld hl,.TextSlash2145 call SetText2147 2148 call SetTotalMonsterHPInHL 2150 ld a,(PutLetter+dy) 2151 ld c,a 2152 ld a,(PutLetter+dx) 2153 ld b,a 2155 call SetNumber16BitCastle2157 2158 call SetTotalMonsterSpeedInHL 2160 pop bc2161 ld a,c 2162 sub a,102163 ld c,a 2164 push bc2166 call SetNumber16BitCastle2168 2169 call SetTotalMonsterDefenseInHL 2171 pop bc2172 ld a,c 2173 sub a,102174 ld c,a 2175 push bc2177 call SetNumber16BitCastle2179 2180 call SetTotalMonsterAttackInHL 2182 pop bc2183 ld a,c 2184 sub a,92185 ld c,a 2186 push bc2188 call SetNumber16BitCastle2190 2191 call SetTotalMonsterDamageInHL 2193 pop bc2194 ld a,c 2195 sub a,92196 ld c,a 2197 push bc2199 call SetNumber16BitCastle2201 2202 pop bc2203 ld a,c 2204 sub a,122205 ld c,a 2207 ld a,b 2208 sub a,202209 ld b,a 2210 2211 push iy2212 pop hl2213 ld de,MonsterTableName2214 add hl,de2215 call SetText2217 jp WaitKeyPressToGoBackToGame2219 .SetStatusSpellEffectIcon:2220 push iy2221 pop de 2222 add hl,de2223 ex de,hl2224 ld hl,$4000 + (151*128) + (032/2) - 1282226 and %1111 0000 2227 srl a 2228 ld b,02229 ld c,a2230 add hl,bc2232 ld bc,$0000 + (012*256) + (012/2)2233 ld a,SecondarySkillsButtonsBlock 2234 jp CopyRamToVramCorrectedCastleOverview 2237 .TextSlash: db "/",2552239 .SetSYSX: 2240 cp 1802241 jr c,.EndCheckOverFlow2242 sub 1802243 ld l,a2244 ld a,Enemy14x24PortraitsBlockPart2 2245 jr .EntryPart22247 .EndCheckOverFlow:2248 ld l,a2249 ld a,Enemy14x24PortraitsBlock 2250 .EntryPart2:2251 ld h,022532254 push af2255 ld a,BattleCodePage2Block 2256 call block34 2257 pop af2259 add hl,hl 2260 ld de,UnitSYSXTable14x24Portraits22261 add hl,de2262 ld c,(hl)2263 inc hl2264 ld b,(hl) 2265 push bc2266 pop hl2268 ld bc,NXAndNY14x24CharaterPortraits2270 ret2271 2274CopyTransparantImageBattleCode: 22752276 push af2277 ld a,b2278 ld (CopyCastleButton2+ny),a2279 ld a,c2280 add a,a2281 ld (CopyCastleButton2+nx),a2282 pop af2284 push de2285 ld de,$8000 + ((212+16)*128) + (000/2) - 128 2286 call CopyRamToVramCorrectedWithoutActivePageSetting 2287 pop de2289 ld a,(activepage)2290 xor 12291 ld (CopyCastleButton2+dPage),a2293 ld a,d2294 ld (CopyCastleButton2+dy),a2295 ld a,e2296 ld (CopyCastleButton2+dx),a2298 ld a,212+162299 ld (CopyCastleButton2+sy),a2301 ld hl,CopyCastleButton22302 call docopy2304 ld a,2122305 ld (CopyCastleButton2+sy),a2307 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2308 jp docopy2310SetTotalMonsterHPInHL: 2311 call SetMonsterTableInIY 2312 push ix2313 2314 push ix2315 pop hl 2316 ld de,Monster72317 call CompareHLwithDE 2318 ld ix,(plxcurrentheroAddress) 2319 jr c,.HeroFound2320 ld ix,(HeroThatGetsAttacked) 2321 push ix2322 pop hl2324 ld a,l2325 or h2326 jr nz,.HeroFound 2327 ld hl,0 2328 jr .endAddHP2329 .HeroFound:2330 2332 ld de,ItemUnitHpPointsTable2333 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2334 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2335 .endAddHP:2336 pop ix2338 ld d,02339 ld e,(iy+MonsterTableHp)2340 add hl,de 2341 ret2343SetTotalMonsterSpeedInHL: 2344 push ix2345 2346 push ix2347 pop hl 2348 ld de,Monster72349 call CompareHLwithDE 2350 ld ix,(plxcurrentheroAddress) 2351 jr c,.HeroFound2352 ld ix,(HeroThatGetsAttacked) 2353 push ix2354 pop hl2356 ld a,l2357 or h2358 jr nz,.HeroFound 2359 ld hl,0 2360 jr .endAddSpeed2361 .HeroFound:2362 2364 ld de,ItemUnitSpeedPointsTable2365 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2366 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2367 .endAddSpeed:2368 pop ix 2370 ld d,02371 ld e,(iy+MonsterTableSpeed)2372 add hl,de 2374 ld b,HasteSpellNumber 2375 call CheckPresenceStatusEffect 2376 jr nz,.EndCheckHaste2377 ld de,3 2378 add hl,de2379 .EndCheckHaste:2381 ld b,InnerBeastSpellNumber 2382 call CheckPresenceStatusEffect 2383 jr nz,.EndCheckInnerBeast2384 ld de,3 2385 add hl,de2386 .EndCheckInnerBeast: 2388 ld b,EarthBoundSpellNumber 2389 call CheckPresenceStatusEffect 2390 jr nz,.EndCheckEarthBound2391 push hl2392 pop bc2393 ld de,2 2394 call DivideBCbyDE 2395 push bc2396 pop hl2397 .EndCheckEarthBound:2398 ret2400CheckPresenceStatusEffect:2401 ld a,(ix+MonsterStatusEffect1) 2402 and %1111 00002403 cp b2404 ret z2405 ld a,(ix+MonsterStatusEffect2) 2406 and %1111 00002407 cp b2408 ret z2409 ld a,(ix+MonsterStatusEffect3) 2410 and %1111 00002411 cp b2412 ret z2413 ld a,(ix+MonsterStatusEffect4) 2414 and %1111 00002415 cp b2416 ret z2417 ld a,(ix+MonsterStatusEffect5) 2418 and %1111 00002419 cp b2420 ret2422CheckPresenceSpellBubble:2423 ld a,(ix+MonsterStatusEffect1) 2424 and %1111 00002425 cp c2426 ret z2427 inc ix2428 djnz CheckPresenceSpellBubble2429 ret2431RemoveSpell: 2432 ld a,(ix+MonsterStatusEffect1) 2433 and %1111 00002434 cp b2435 jr nz,.SpellNotFoundStatus12436 ld (ix+MonsterStatusEffect1),0 2437 .SpellNotFoundStatus1:2438 ld a,(ix+MonsterStatusEffect2) 2439 and %1111 00002440 cp b2441 jr nz,.SpellNotFoundStatus22442 ld (ix+MonsterStatusEffect2),0 2443 .SpellNotFoundStatus2:2444 ld a,(ix+MonsterStatusEffect3) 2445 and %1111 00002446 cp b2447 jr nz,.SpellNotFoundStatus32448 ld (ix+MonsterStatusEffect3),0 2449 .SpellNotFoundStatus3:2450 ld a,(ix+MonsterStatusEffect4) 2451 and %1111 00002452 cp b2453 jr nz,.SpellNotFoundStatus42454 ld (ix+MonsterStatusEffect4),0 2455 .SpellNotFoundStatus4:2456 ld a,(ix+MonsterStatusEffect5) 2457 and %1111 00002458 ret nz2459 ld (ix+MonsterStatusEffect5),0 2460 ret2462AddDefenseFromDefendingInCastleOrCastleWalls:2463 ld a,(ix+HeroStatus) 2464 cp 2542465 ret nz2466 inc hl 2467 .CheckWhichCastle: 2468 push iy2469 ld iy,Castle12470 call .FindCastle2471 ld iy,Castle22472 call .FindCastle2473 ld iy,Castle32474 call .FindCastle2475 ld iy,Castle42476 call .FindCastle2477 ld iy,Castle52478 call .FindCastle2479 pop iy2480 ret2482 .FindCastle:2483 ld a,(ix+HeroY) 2484 inc a 2485 cp (iy+CastleY)2486 ret nz2488 ld a,(ix+HeroX) 2489 dec a 2490 dec a 2491 cp (iy+CastleX)2492 ret nz2493 2494 ld a,(iy+CastleLevel) 2495 cp 62496 ret nz2497 ld de,52498 add hl,de 2499 ret2501SetTotalMonsterDefenseInHL: 2502 push ix2503 2504 push ix2505 pop hl 2506 ld de,Monster72507 call CompareHLwithDE 2508 ld ix,(plxcurrentheroAddress) 2509 jr c,.HeroFound2510 ld ix,(HeroThatGetsAttacked) 2511 push ix2512 pop hl2514 ld a,l2515 or h2516 jr nz,.HeroFound 2517 ld hl,0 2518 jr .endAddDefense2519 .HeroFound:2520 2522 ld de,ItemDefencePointsTable2523 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2524 push ix2525 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2526 pop ix2528 ld d,02529 ld e,(ix+HeroStatDefense)2530 add hl,de 2531 call AddDefenseFromDefendingInCastleOrCastleWalls2533 bit 7,h 2534 jr z,.SetDefense2535 ld hl,02536 .SetDefense:2538 .endAddDefense:2539 pop ix2541 ld d,02542 ld e,(iy+MonsterTableDefense)2543 add hl,de 2545 ld b,PlateArmorSpellNumber 2546 call CheckPresenceStatusEffect 2547 jr nz,.EndCheckPlateArmor2548 ld de,5 2549 add hl,de2550 .EndCheckPlateArmor:2552 ld b,InnerBeastSpellNumber 2553 call CheckPresenceStatusEffect 2554 jr nz,.EndCheckInnerBeast2555 ld de,3 2556 add hl,de2557 .EndCheckInnerBeast:2559 ld b,ShieldBreakerSpellNumber 2560 call CheckPresenceStatusEffect 2561 jr nz,.EndCheckShieldBreaker2562 ld de,-4 2563 add hl,de2564 bit 7,h 2565 jr z,.EndCheckShieldBreaker2566 ld hl,0 2567 .EndCheckShieldBreaker:2569 ld b,FrenzySpellNumber 2570 call CheckPresenceStatusEffect 2571 jr nz,.EndCheckFrenzy2572 ld de,-5 2573 add hl,de2574 bit 7,h 2575 jr z,.EndCheckFrenzy2576 ld hl,0 2577 .EndCheckFrenzy:2579 2580 ld a,(ix+MonsterStatus) 2581 and %0111 11112582 cp MonsterStatusDefending 2583 ret nz2585 ld de,05 2586 call ApplyPercentBasedBoost 2588 ld a,c 2589 or a2590 ret nz2591 ld bc,12592 add hl,bc 2595 ret2598 2601SetTotalMonsterDamageENTIRESTACKInHL: 2602 push ix2603 2604 push ix2605 pop hl 2606 ld de,Monster72607 call CompareHLwithDE 2608 ld ix,(plxcurrentheroAddress) 2609 jr c,.HeroFound2610 ld ix,(HeroThatGetsAttacked) 2611 push ix2612 pop hl2614 ld a,l2615 or h2616 jr z,.setDamageNeutralMonster2617 .HeroFound:2618 2620 ld h,02621 ld l,(iy+MonsterTableDamage) 2623 pop ix2624 call SetTotalMonsterDamageInHL.ProcessInnerBeast 2625 call SetTotalMonsterDamageInHL.ProcessFrenzy 2626 call SetTotalMonsterDamageInHL.ProcessCurse 2627 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2629 call .MultiplyDamageWIthAllUnitsInStack2631 2632 push hl2633 push ix2634 pop hl 2635 ld de,Monster72636 call CompareHLwithDE 2637 ld ix,(plxcurrentheroAddress) 2638 jr c,.HeroFound22639 ld ix,(HeroThatGetsAttacked) 2640 .HeroFound2:2641 pop hl2642 call SetTotalMonsterDamageInHL.AddDamageFromSkills 2644 ld a,l2645 or h2646 ret nz2647 ld hl,1 2648 ret2650 .setDamageNeutralMonster:2651 ld h,02652 ld l,(iy+MonsterTableDamage)2653 pop ix2654 call SetTotalMonsterDamageInHL.ProcessCurse 2655 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2657 call .MultiplyDamageWIthAllUnitsInStack2659 ld a,l2660 or h2661 ret nz2662 ld hl,1 2663 ret2665 .MultiplyDamageWIthAllUnitsInStack:2666 push hl2667 call SetCurrentActiveMOnsterInIX2668 pop de2669 ld l,(ix+MonsterAmount)2670 ld h,(ix+MonsterAmount+1)2671 jp MultiplyHlWithDE 2673SetTotalMonsterDamageInHL: 2674 push ix2675 2676 push ix2677 pop hl 2678 ld de,Monster72679 call CompareHLwithDE 2680 ld ix,(plxcurrentheroAddress) 2681 jr c,.HeroFound2682 ld ix,(HeroThatGetsAttacked) 2683 push ix2684 pop hl2686 ld a,l2687 or h2688 jr z,.setDamageNeutralMonster2689 .HeroFound:2690 2692 ld h,02693 ld l,(iy+MonsterTableDamage) 2695 pop ix2696 call .ProcessInnerBeast 2697 call .ProcessFrenzy 2698 call .ProcessCurse 2699 call .ProcessBlindingFog 2701 2702 push hl2703 push ix2704 pop hl 2705 ld de,Monster72706 call CompareHLwithDE 2707 ld ix,(plxcurrentheroAddress) 2708 jr c,.HeroFound22709 ld ix,(HeroThatGetsAttacked) 2710 .HeroFound2:2711 pop hl2712 call .AddDamageFromSkills 2714 ld a,l2715 or h2716 ret nz2717 ld hl,1 2718 ret2720 .setDamageNeutralMonster:2721 ld h,02722 ld l,(iy+MonsterTableDamage)2723 pop ix2724 call .ProcessCurse 2725 call .ProcessBlindingFog 2726 ld a,l2727 or h2728 ret nz2729 ld hl,1 2730 ret2732 .ProcessInnerBeast:2733 ld b,InnerBeastSpellNumber 2734 call CheckPresenceStatusEffect 2735 ret nz2736 ld de,3 2737 add hl,de2738 ret2740 .ProcessFrenzy:2741 ld b,FrenzySpellNumber 2742 call CheckPresenceStatusEffect 2743 ret nz2744 ld de,+5 2745 add hl,de2746 ret2748 .ProcessCurse:2749 ld b,CurseSpellNumber 2750 call CheckPresenceStatusEffect 2751 ret nz2752 ld de,-3 2753 add hl,de2754 bit 7,h 2755 ret z2756 ld hl,1 2757 ret2759 .ProcessBlindingFog:2760 ld b,BlindingFogSpellNumber 2761 call CheckPresenceStatusEffect 2762 ret nz2763 push hl2764 pop bc2765 ld de,2 2766 call DivideBCbyDE 2767 push bc2768 pop hl2769 ret2771 .AddDamageFromSkills:2772 2773 ld a,(iy+MonsterTableSpecialAbility)2774 cp RangedMonster2775 jp z,.MonsterIsRanged2777 .MonsterIsMelee:2778 ld a,(ix+HeroSkills+0)2779 call .CheckSkillOffence2780 ld a,(ix+HeroSkills+1)2781 call .CheckSkillOffence2782 ld a,(ix+HeroSkills+2)2783 call .CheckSkillOffence2784 ld a,(ix+HeroSkills+3)2785 call .CheckSkillOffence2786 ld a,(ix+HeroSkills+4)2787 call .CheckSkillOffence2788 ld a,(ix+HeroSkills+5)2789 call .CheckSkillOffence2790 ret2792 .CheckSkillOffence:2793 cp 04 2794 jr z,.BasicOffenceFound2795 cp 05 2796 jr z,.AdvancedOffenceFound2797 cp 06 2798 jr z,.ExpertOffenceFound2799 ret2801 .BasicOffenceFound:2802 ld de,10 2803 jp ApplyPercentBasedBoost2805 .AdvancedOffenceFound:2806 ld de,5 2807 jp ApplyPercentBasedBoost2809 .ExpertOffenceFound:2810 ld de,10 2811 call ApplyPercentBasedBoost2812 add hl,bc 2813 add hl,bc 2814 ret2816 .MonsterIsRanged:2817 ld a,(ix+HeroSkills+0)2818 call .CheckSkilArchery2819 ld a,(ix+HeroSkills+1)2820 call .CheckSkilArchery2821 ld a,(ix+HeroSkills+2)2822 call .CheckSkilArchery2823 ld a,(ix+HeroSkills+3)2824 call .CheckSkilArchery2825 ld a,(ix+HeroSkills+4)2826 call .CheckSkilArchery2827 ld a,(ix+HeroSkills+5)2828 call .CheckSkilArchery2829 ret2831 .CheckSkilArchery:2832 cp 01 2833 jr z,.BasicArcheryFound2834 cp 02 2835 jr z,.AdvancedArcheryFound2836 cp 03 2837 jr z,.ExpertArcheryFound2838 ret2840 .BasicArcheryFound: 2841 ld de,10 2842 jp ApplyPercentBasedBoost2844 .AdvancedArcheryFound: 2845 ld de,5 2846 jp ApplyPercentBasedBoost2848 .ExpertArcheryFound: 2849 ld de,2 2850 jp ApplyPercentBasedBoost2852SetTotalMonsterAttackInHL: 2853 push ix2854 2855 push ix2856 pop hl 2857 ld de,Monster72858 call CompareHLwithDE 2859 ld ix,(plxcurrentheroAddress) 2860 jr c,.HeroFound2861 ld ix,(HeroThatGetsAttacked) 2862 push ix2863 pop hl2865 ld a,l2866 or h2867 jr z,.setAttackNeutralMonster2868 .HeroFound:2869 2871 2872 ld de,ItemAttackPointsTable2873 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2874 push ix2875 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2876 pop ix2878 ld d,02879 ld e,(iy+MonsterTableAttack) 2880 add hl,de 2882 ld d,02883 ld e,(ix+HeroStatAttack)2884 add hl,de 2886 pop ix2887 ret2889 .setAttackNeutralMonster:2890 ld h,02891 ld l,(iy+MonsterTableAttack)2892 pop ix2893 ret2895ApplyPercentBasedBoost:2896 push hl 2897 2898 push hl2899 pop bc29002901 call DivideBCbyDE 2903 pop hl2904 add hl,bc 2905 ret2907CheckPointerOnDefendingHero:2908 ld a,(spat)2909 cp 38+242910 ret nc2911 cp 06+242912 ret c2913 ld a,(spat+1)2914 cp 2362915 ret c2917 ld hl,(HeroThatGetsAttacked) 2918 ld a,l2919 or h2920 ret z2922 ld hl,$4000 + (000*128) + (162/2) - 1282923 ld de,$0000 + (040*128) + ((18+134)/2) - 1282924 ld bc,$0000 + (062*256) + (086/2)2925 ld a,ScrollBlock 2926 call CopyRamToVramCorrectedCastleOverview 2928 2929 ld ix,(HeroThatGetsAttacked) 2930 ld l,(ix+HeroSpecificInfo+0) 2931 ld h,(ix+HeroSpecificInfo+1)2932 push hl2933 pop ix2934 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 2935 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 2936 ld bc,$40002937 xor a2938 sbc hl,bc2939 ld de,$0000 + ((040+021)*128) + ((018+10+134)/2) - 1282940 ld bc,NXAndNY16x30HeroIcon2941 ld a,Hero16x30PortraitsBlock 2942 call CopyRamToVramCorrectedCastleOverview 2944 2945 ld ix,(HeroThatGetsAttacked) 2946 ld de,ItemAttackPointsTable2947 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2948 push ix2949 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2950 pop ix2951 ld e,(ix+HeroStatAttack) 2952 ld d,02953 add hl,de2954 ld b,060+134 2955 ld c,060 2956 call SetNumber16BitCastle2958 2959 ld de,ItemDefencePointsTable2960 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2961 push ix2962 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2963 pop ix2964 ld e,(ix+HeroStatDefense) 2965 ld d,02966 add hl,de2967 call AddDefenseFromDefendingInCastleOrCastleWalls2969 bit 7,h 2970 jr z,.SetDefense2971 ld hl,02972 .SetDefense:2975 ld b,060+134 2976 ld c,069 2977 call SetNumber16BitCastle2979 2980 ld l,(ix+HeroMana)2981 ld h,(ix+HeroMana+1)2982 ld b,060+134 2983 ld c,078 2984 call SetNumber16BitCastle2985 2986 2987 ld a,(PutLetter+dy) 2988 ld c,a 2989 ld a,(PutLetter+dx) 2990 ld b,a 2991 ld hl,CheckPointerOnAttackingHero.TextSlash2992 call SetText2994 2995 ld a,(PutLetter+dy) 2996 ld c,a 2997 ld a,(PutLetter+dx) 2998 ld b,a 2999 ld l,(ix+HeroTotalMana)3000 ld h,(ix+HeroTotalMana+1)3001 call SetNumber16BitCastle3003 3004 ld de,ItemSpellDamagePointsTable3005 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet3006 push ix3007 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3008 pop ix3009 ld e,(ix+HeroStatSpelldamage)3010 ld d,03011 add hl,de30133015 ld b,060+134 3016 ld c,088 3017 call SetNumber16BitCastle3019 3020 ld b,064+134 3021 ld c,047 3022 ld l,(ix+HeroSpecificInfo+0) 3023 ld h,(ix+HeroSpecificInfo+1)3024 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel3025 call SetText 3027 jp WaitKeyPressToGoBackToGame3029CheckPointerOnAttackingHero:3030 ld a,(spat)3031 cp 38+243032 ret nc3033 cp 06+243034 ret c3035 ld a,(spat+1)3036 cp 103037 ret nc3039 ld hl,$4000 + (000*128) + (162/2) - 1283040 ld de,$0000 + (040*128) + (018/2) - 1283041 ld bc,$0000 + (062*256) + (086/2)3042 ld a,ScrollBlock 3043 call CopyRamToVramCorrectedCastleOverview 3045 3046 ld ix,(plxcurrentheroAddress) 3047 ld l,(ix+HeroSpecificInfo+0) 3048 ld h,(ix+HeroSpecificInfo+1)3049 push hl3050 pop ix3051 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3052 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3053 ld bc,$40003054 xor a3055 sbc hl,bc3056 ld de,$0000 + ((040+021)*128) + ((018+10)/2) - 1283057 ld bc,NXAndNY16x30HeroIcon3058 ld a,Hero16x30PortraitsBlock 3059 call CopyRamToVramCorrectedCastleOverview 3061 3062 ld ix,(plxcurrentheroAddress)3063 ld de,ItemAttackPointsTable3064 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3065 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3066 ld e,(ix+HeroStatAttack) 3067 ld d,03068 add hl,de3069 ld b,060 3070 ld c,060 3071 call SetNumber16BitCastle3073 3074 ld de,ItemDefencePointsTable3075 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3076 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3077 ld e,(ix+HeroStatDefense) 3078 ld d,03079 add hl,de3080 call AddDefenseFromDefendingInCastleOrCastleWalls3082 bit 7,h 3083 jr z,.SetDefense3084 ld hl,03085 .SetDefense:3088 ld b,060 3089 ld c,069 3090 call SetNumber16BitCastle3092 3093 ld l,(ix+HeroMana)3094 ld h,(ix+HeroMana+1)3095 ld b,060 3096 ld c,078 3097 call SetNumber16BitCastle3098 3099 3100 ld a,(PutLetter+dy) 3101 ld c,a 3102 ld a,(PutLetter+dx) 3103 ld b,a 3104 ld hl,.TextSlash3105 call SetText3107 3108 ld a,(PutLetter+dy) 3109 ld c,a 3110 ld a,(PutLetter+dx) 3111 ld b,a 3112 ld l,(ix+HeroTotalMana)3113 ld h,(ix+HeroTotalMana+1)3114 call SetNumber16BitCastle3116 3117 ld de,ItemSpellDamagePointsTable3118 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3119 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3120 ld e,(ix+HeroStatSpelldamage)3121 ld d,03122 add hl,de31243126 ld b,060 3127 ld c,088 3128 call SetNumber16BitCastle3130 3131 ld b,064 3132 ld c,047 3134 ld l,(ix+HeroSpecificInfo+0) 3135 ld h,(ix+HeroSpecificInfo+1)3136 call .CenterHeroNameHasGainedALevel3137 call SetText 3139 jp WaitKeyPressToGoBackToGame3141 .TextSlash: db "/",2553142 .CenterHeroNameHasGainedALevel:3143 ld d,0 3144 push hl3145 .loop:3146 ld a,(hl)3147 cp 2553148 jr z,.EndNameFound3149 inc d3150 inc hl3151 dec b3152 dec b3153 jr .loop3154 .EndNameFound:3155 pop hl3156 ret3158WaitKeyPressToGoBackToGame:3159 ld hl,CursorHand3160 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl3161 ld hl,SpriteColCursorSprites3162 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl3164 call SwapAndSetPage 3165 .loop:3166 call PopulateControls 3167 31683172 ld a,(NewPrContr)3173 bit 5,a 3174 jr nz,.End3175 ld a,(NewPrContr)3176 bit 4,a 3177 jr z,.loop3179 .End:3180 xor a3181 ld (NewPrContr),a3183 ld a,(activepage) 3184 or a3185 ld hl,.RestorePage03186 jp z,docopy3187 ld hl,.RestorePage13188 jp docopy3190.RestorePage0:3191 db 000,000,000,0013192 db 000,000,000,0003193 db 000,001,191,0003194 db 000,000,$d0 3195.RestorePage1:3196 db 000,000,000,0003197 db 000,000,000,0013198 db 000,001,191,0003199 db 000,000,$d0 3201CheckWaitButtonPressed:32023210 ld a,(WaitButtonPressed?)3211 dec a3212 ret m3213 ld (WaitButtonPressed?),a3215 ld (MoVeMonster?),a 3216 or a3217 ret nz 3218 3219 call SetCurrentActiveMOnsterInIX3220 ld a,(ix+MonsterStatus) 3221 and %0111 11113222 cp MonsterStatusWaiting3223 ret z 3225 ld a,(ix+MonsterStatus) 3226 and %1000 0003227 or a,MonsterStatusWaiting3228 ld (ix+MonsterStatus),a3230 xor a3231 ld (MoVeMonster?),a 3232 ld (MonsterMovementPathPointer),a3233 ld (MonsterAnimationSpeed),a3234 ld (MonsterAnimationStep),a3236 ld a,13237 ld (SwitchToNextMonster?),a3238 3239 3240 ld a,1 3241 .EntryPointForDefendButtonPressed:3242 ld (BattleTextQ),a3243 ld a,23244 ld (SetBattleText?),a 3246 ld a,(ix+MonsterAmount) 3247 or (ix+MonsterAmount+1)3248 ld (BattleTextQ+3),a 3252 SetMonsterNameInBattleTextQ4:3253 call SetMonsterTableInIY 3254 push iy3255 pop hl3256 ld de,MonsterTableName3257 add hl,de3258 ld de,BattleTextQ+4 3259 ld bc,123260 ldir3261 ret32643265CheckDefendButtonPressed:32663274 ld a,(DefendButtonPressed?)3275 dec a3276 ret m3277 ld (DefendButtonPressed?),a3279 ld (MoVeMonster?),a 3280 or a3281 ret nz 3283 ld a,(ix+MonsterStatus) 3284 and %1000 0003285 or a,MonsterStatusDefending3286 ld (ix+MonsterStatus),a3288 xor a3289 ld (MoVeMonster?),a 3290 ld (MonsterMovementPathPointer),a3291 ld (MonsterAnimationSpeed),a3292 ld (MonsterAnimationStep),a3294 ld a,13295 ld (SwitchToNextMonster?),a3297 call SetMonsterTableInIY 3298 call SetTotalMonsterDefenseInHL 3301 ld a,c3302 ld (BattleTextQ+1),a 3304 ld a,2 3305 jp CheckWaitButtonPressed.EntryPointForDefendButtonPressed3306 3307 ret33093316ShowEnemyStats:33173318 call SetEnemyStatsWindow 3319 call SwapAndSetPage 3320 3321 .engine:3322 call PopulateControls 33243329 ld a,(NewPrContr)3330 and %0011 00003331 jr nz,.end3332 jr .engine 3334 .end:3335 ld a,%0011 00003336 ld (ControlsOnInterrupt),a 3337 ret3339SetEnemyStatsWindow:3340 ld de,$0000 + (007*128) + (008/2) - 1283342 ld a,(spat+1) 3343 sub 323344 jr nc,.NotCarryX3345 xor a3346 .NotCarryX:3347 cp 1263348 jr c,.NoOverFlowRight3349 ld a,1263350 .NoOverFlowRight:3352 res 0,a3354 ld b,a 3356 srl a 3357 ld h,03358 ld l,a3359 add hl,de3360 ex de,hl3361 3362 ld a,(spat+0) 3363 ld c,-503364 cp 703365 jr nc,.CursorTopOfScreen3366 ld c,323367 .CursorTopOfScreen:3368 add a,c3370 sub a,243371 jr nc,.NotCarryY3372 xor a3373 .NotCarryY:3374 cp 1193375 jr c,.NoOverFlowBottom3376 ld a,1193377 .NoOverFlowBottom:3379 ld c,a 3380 push bc3382 ld h,03383 ld l,a3384 add hl,hl 3385 add hl,hl 3386 add hl,hl 3387 add hl,hl 3388 add hl,hl 3389 add hl,hl 3390 add hl,hl 3391 add hl,de3392 ex de,hl3393 3394 ld hl,$4000 + (062*128) + (174/2) - 1283395 ld bc,$0000 + (069*256) + (062/2)3396 ld a,ChestBlock 3397 push de3398 call CopyRamToVramCorrectedCastleOverview 3400 3401 call SetMonsterTableInIYNeutralMonster3402 pop de3403 ld a,(iy+MonsterTableSpecialAbility)3404 cp RangedMonster3405 jp nz,.EndCheckRanged3406 ld hl,40/2 + (22*128)3407 add hl,de3408 ex de,hl3409 ld hl,$4000 + (131*128) + (176/2) - 1283410 ld bc,$0000 + (016*256) + (018/2)3411 ld a,ScrollBlock 3412 call CopyRamToVramCorrectedCastleOverview 3413 .EndCheckRanged:3415 3417 call SetNeutralMonsterHeroCollidedWithInA3418 call CheckRightClickToDisplayInfo.SetSYSX3420 exx3421 pop bc 3422 push bc3423 push af3424 ld a,b 3425 add a,31+13426 ld e,a3428 ld a,c 3429 add a,283430 ld d,a3431 pop af3432 exx3434 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 3436 pop bc 3438 ld a,c 3439 add a,143440 ld c,a3442 ld a,b 3443 add a,16+223444 ld b,a3445 ld a,4 3447 push bc3449 call SetMonsterTableInIYNeutralMonster 3450 push iy3451 pop hl3452 ld de,MonsterTableName3453 add hl,de3454 pop bc3455 push bc3456 3457 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel3458 call SetText 3460 pop bc3462 ld a,c 3463 add a,433464 ld c,a 3465 ld a,b 3466 add a,8-223467 ld b,a 3469 call SetAmountInHL3471 push bc3472 call SetText 3473 pop bc3475 ld a,c3476 add a,073477 ld c,a 3478 ld a,b3479 add a,233480 ld b,a 3481 push bc3483 call SetMonsterTableInIYNeutralMonster3484 pop bc3486 ld a,(iy+MonsterTableCostGems)3487 and %1110 00003488 cp Level1Unit3489 ld hl,13490 jp z,SetNumber16BitCastle3491 cp Level2Unit3492 ld hl,23493 jp z,SetNumber16BitCastle3494 cp Level3Unit3495 ld hl,33496 jp z,SetNumber16BitCastle3497 cp Level4Unit3498 ld hl,43499 jp z,SetNumber16BitCastle3500 cp Level5Unit3501 ld hl,53502 jp z,SetNumber16BitCastle3503 cp Level6Unit3504 ld hl,63505 jp z,SetNumber16BitCastle3507SetAmountInHL: 3508 3509 call SetAllMonstersInMonsterTable.SetAmountInA3510 cp 53511 ld hl,TextAFew3512 ret c3513 cp 133514 ld hl,TextSeveral3515 ret c3516 cp 293517 ld hl,TextMany3518 ret c3519 cp 613520 ld hl,TextNumerous3521 ret c3522 cp 933523 ld hl,TextAHorde3524 ret c35253526 ld hl,TextCountless3527 ret3530TextAFew: db " A Few",2553531TextSeveral: db "Several",2553532TextMany: db " Many",2553533TextNumerous: db "Numerous",2553534TextAHorde: db "A horde",2553535TextCountless: db "Countless",2553548ListOfMonsters:3549 db 021 3550 db 022 3551 db 019 3552 db 091 3553 db 092 3554 db 093 3555 db 094 3556 db 139 3557 db 136 3558 db 154 3559 db 153 3560 db 134 3561 db 132 3562 db 133 3563 db 147 3564 db 146 3565 db 148 3566 db 143 3567 db 088 3568 db 089 3569 db 126 3570 db 157 3571 db 130 3572 db 131 3573 db 124 3574 db 144 3575 db 145 3576 db 164 3577 db 167 3578 db 128 3579 db 140 3580 db 142 3581 db 030 3582 db 032 3583 db 034 3584 db 053 3585 db 070 3586 db 067 3587 db 098 3588 db 090 3589 db 155 3590 db 150 3591 db 151 3592 db 152 3593 db 149 3594 db 125 3595 db 122 3596 db 123 3597 db 087 3598 db 082 3599 db 079 3600 db 078 3601 db 159 3602 db 169 3603 db 160 3604 db 161 3605 db 162 3606 db 163 3607 db 168 3609 db 181 3610 db 180 3611 db 178 3612 db 179 3613 db 177 3614 3615ListOfGuardTowerMonsters:3616.level1:3617 db 175 3618 db 176 3619 db 171 3620 db 172 3622.level2:3623 db 057 3624 db 173 3625 db 055 3626 db 129 3628.level3:3629 db 107 3630 db 173 3631 db 108 3632 db 165 3634.level4:3635 db 109 3636 db 137 3637 db 166 3638 db 127 3640.level5:3641 db 174 3642 db 138 3643 db 170 3644 db 135 3646.level6:3647 db 141 3648 db 156 3649 db 141 3650 db 156 3652GuardTowerMonster:3653 call .GetMonsterInHL3654 ld ix,(plxcurrentheroAddress)3655 ld a,(ix+HeroX)3656 and 33657 ld d,03658 ld e,a3659 add hl,de3660 ld a,(hl)3661 ret3663 .GetMonsterInHL:3664 ld a,(GuardTowerMonsterLevel)3665 dec a3666 ld hl,ListOfGuardTowerMonsters.level13667 ret z3668 dec a3669 ld hl,ListOfGuardTowerMonsters.level23670 ret z3671 dec a3672 ld hl,ListOfGuardTowerMonsters.level33673 ret z3674 dec a3675 ld hl,ListOfGuardTowerMonsters.level43676 ret z3677 dec a3678 ld hl,ListOfGuardTowerMonsters.level53679 ret z3680 ld hl,ListOfGuardTowerMonsters.level63681 ret3683SetNeutralMonsterHeroCollidedWithInA:3684 ld a,(MonsterHerocollidedWithOnMap)3685 or a3686 jr z,GuardTowerMonster3687 sub a,128 3688 ld d,03689 ld e,a3690 ld hl,ListOfMonsters3691 add hl,de3692 ld a,(hl) 3693 ret3695SetAllMonstersInMonsterTable:3696 ld ix,(plxcurrentheroAddress)3697 ld a,(ix+HeroUnits+00) 3698 ld (ListOfMonstersToPut+00),a3699 ld l,(ix+HeroUnits+01) 3700 ld h,(ix+HeroUnits+02) 3701 ld (ListOfMonstersToPut+01),hl3703 ld a,(ix+HeroUnits+03) 3704 ld (ListOfMonstersToPut+05),a3705 ld l,(ix+HeroUnits+04) 3706 ld h,(ix+HeroUnits+05) 3707 ld (ListOfMonstersToPut+06),hl3709 ld a,(ix+HeroUnits+06) 3710 ld (ListOfMonstersToPut+10),a3711 ld l,(ix+HeroUnits+07) 3712 ld h,(ix+HeroUnits+08) 3713 ld (ListOfMonstersToPut+11),hl3715 ld a,(ix+HeroUnits+09) 3716 ld (ListOfMonstersToPut+15),a3717 ld l,(ix+HeroUnits+10) 3718 ld h,(ix+HeroUnits+11) 3719 ld (ListOfMonstersToPut+16),hl3721 ld a,(ix+HeroUnits+12) 3722 ld (ListOfMonstersToPut+20),a3723 ld l,(ix+HeroUnits+13) 3724 ld h,(ix+HeroUnits+14) 3725 ld (ListOfMonstersToPut+21),hl3727 ld a,(ix+HeroUnits+15) 3728 ld (ListOfMonstersToPut+25),a3729 ld l,(ix+HeroUnits+16) 3730 ld h,(ix+HeroUnits+17) 3731 ld (ListOfMonstersToPut+26),hl3733 ld hl,(HeroThatGetsAttacked) 3734 ld a,l3735 or h3736 jp nz,.DefenderHasAHero3738 3739 xor a3740 ld hl,03741 ld (ListOfMonstersToPut+30),a3742 ld (ListOfMonstersToPut+31),hl3743 ld (ListOfMonstersToPut+35),a3744 ld (ListOfMonstersToPut+36),hl3745 ld (ListOfMonstersToPut+40),a3746 ld (ListOfMonstersToPut+41),hl3747 ld (ListOfMonstersToPut+45),a3748 ld (ListOfMonstersToPut+46),hl3749 ld (ListOfMonstersToPut+50),a3750 ld (ListOfMonstersToPut+51),hl3751 ld (ListOfMonstersToPut+55),a3752 ld (ListOfMonstersToPut+56),hl37543756 ld a,r3757 and 33758 jr z,.Situation2 3759 dec a3760 jr z,.Situation3 3761 3762 .Situation1: 3763 call SetNeutralMonsterHeroCollidedWithInA 3764 ld (ListOfMonstersToPut+40),a3765 call .SetAmountInA3767 ld l,a3768 ld h,03769 ld (ListOfMonstersToPut+41),hl3770 jp .EndSetAllMonsters3772 .Situation2: 3773 call SetNeutralMonsterHeroCollidedWithInA 3774 ld (ListOfMonstersToPut+40),a3775 ld (ListOfMonstersToPut+45),a3776 call .SetAmountInA3777 cp 13778 jr nz,.EndCheckTotalAmountIs13779 xor a3780 ld (ListOfMonstersToPut+40),a3781 ld a,13782 .EndCheckTotalAmountIs1:3783 srl a 3784 ld l,a3785 ld h,03786 ld (ListOfMonstersToPut+41),hl3787 ld de,03788 adc hl,de 3789 ld (ListOfMonstersToPut+46),hl3790 jp .EndSetAllMonsters3792 .Situation3: 3793 call SetNeutralMonsterHeroCollidedWithInA 3794 ld (ListOfMonstersToPut+45),a3795 ex af,af'3796 call .SetAmountInA3797 ld e,a3798 ld c,3 3799 call Div8 3800 ld l,a3801 ld h,03802 or a3803 jr z,.DivisionResultIs0 3804 ex af,af'3805 ld (ListOfMonstersToPut+35),a3806 ld (ListOfMonstersToPut+40),a3807 ex af,af'3808 ld (ListOfMonstersToPut+36),hl3809 ld (ListOfMonstersToPut+41),hl3810 .DivisionResultIs0:3811 ld d,03812 ld e,b3813 add hl,de 3814 ld (ListOfMonstersToPut+46),hl3815 jp .EndSetAllMonsters3817 .SetAmountInA:3818 ld a,(MonsterHerocollidedWithOnMapAmount)3819 sub a,Number1Tile3820 jr z,.Amount1 3821 dec a3822 jr z,.Amount23823 dec a3824 jr z,.Amount33825 dec a3826 jr z,.Amount43827 dec a3828 jr z,.Amount53830 .Amount6: 3831 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3832 and 313833 add a,933834 ret3836 .Amount5: 3837 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3838 and 313839 add a,613840 ret3842 .Amount4: 3843 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3844 and 313845 add a,293846 ret3848 .Amount3: 3849 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3850 and 153851 add a,133852 ret3854 .Amount2: 3855 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3856 and 73857 add a,53858 ret3859 3860 .Amount1: 3861 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3862 and 33863 inc a3864 ret3866 .DefenderHasAHero:3867 ld ix,(HeroThatGetsAttacked)3868 ld a,(ix+HeroUnits+00) 3869 ld (ListOfMonstersToPut+30),a3870 ld l,(ix+HeroUnits+01) 3871 ld h,(ix+HeroUnits+02) 3872 ld (ListOfMonstersToPut+31),hl3874 ld a,(ix+HeroUnits+03) 3875 ld (ListOfMonstersToPut+35),a3876 ld l,(ix+HeroUnits+04) 3877 ld h,(ix+HeroUnits+05) 3878 ld (ListOfMonstersToPut+36),hl3880 ld a,(ix+HeroUnits+06) 3881 ld (ListOfMonstersToPut+40),a3882 ld l,(ix+HeroUnits+07) 3883 ld h,(ix+HeroUnits+08) 3884 ld (ListOfMonstersToPut+41),hl3886 ld a,(ix+HeroUnits+09) 3887 ld (ListOfMonstersToPut+45),a3888 ld l,(ix+HeroUnits+10) 3889 ld h,(ix+HeroUnits+11) 3890 ld (ListOfMonstersToPut+46),hl3892 ld a,(ix+HeroUnits+12) 3893 ld (ListOfMonstersToPut+50),a3894 ld l,(ix+HeroUnits+13) 3895 ld h,(ix+HeroUnits+14) 3896 ld (ListOfMonstersToPut+51),hl3898 ld a,(ix+HeroUnits+15) 3899 ld (ListOfMonstersToPut+55),a3900 ld l,(ix+HeroUnits+16) 3901 ld h,(ix+HeroUnits+17) 3902 ld (ListOfMonstersToPut+56),hl3904 .EndSetAllMonsters:3905 ld ix,ListOfMonstersToPut3906 ld iy,Monster13907 ld b,1 3909 call .SetMonster3910 call .SetMonster3911 call .SetMonster3912 call .SetMonster3913 call .SetMonster3914 call .SetMonster3916 call .SetMonster3917 call .SetMonster3918 call .SetMonster3919 call .SetMonster3920 call .SetMonster3921 call .SetMonster3922 ret3924 .SetMonster:3925 push bc3927 xor a3928 ld (iy+MonsterStatus),a 3929 ld (iy+MonsterStatusEffect1),a 3930 ld (iy+MonsterStatusEffect2),a 3931 ld (iy+MonsterStatusEffect3),a 3932 ld (iy+MonsterStatusEffect4),a 3933 ld (iy+MonsterStatusEffect5),a 3934 3935 ld a,(ix+1)3936 ld (iy+MonsterAmount),a3937 ld a,(ix+2)3938 ld (iy+MonsterAmount+1),a3939 ld a,(ix)3940 ld (iy+MonsterNumber),a3942 push ix3943 push iy3944 push af 3946 ld a,b3947 ld (CurrentActiveMonster),a3948 call SetCurrentActiveMOnsterInIX3950 call SetTotalMonsterHPInHL 3951 ld e,l3953 ld b,(iy+MonsterTableSpriteSheetBlock)3954 ld c,(iy+MonsterTableNX)3955 ld d,(iy+MonsterTableNY)39563958 pop af 3959 or a3960 jr nz,.Not03961 ld e,03962 .Not0:3963 ld (ix+MonsterHP),e3965 ld l,(iy+0)3966 ld h,(iy+1) 3967 push hl3968 pop iy 3970 ld a,(CurrentActiveMonster) 3971 cp 73972 jr c,.MonsterIsFacingRight3974 .MonsterIsFacingLeft:3975 push de3976 ld a,(iy+1) 3977 add a,a3978 ld d,03979 ld e,a3980 add iy,de 3981 pop de3983 .MonsterIsFacingRight:3984 ld l,(iy+3)3985 ld h,(iy+2) 3987 pop iy3988 pop ix3990 ld (iy+MonsterSYSX),h3991 ld (iy+MonsterSYSX+1),l3993 ld (iy+MonsterBlock),b3994 ld (iy+MonsterNX),c3995 ld (iy+MonsterNXPrevious),c3996 ld (iy+MonsterNY),d3997 ld (iy+MonsterNYPrevious),d3998 ld a,(ix+3)3999 ld (iy+MonsterX),a4000 ld (iy+MonsterXPrevious),a4005 ld a,(CurrentActiveMonster) 4006 cp 74007 jr c,.EndCheckAdjustXForMonstersOnTheRight4009 ld a,c 4010 cp 174011 jp c,.EndCheckAdjustXForMonstersOnTheRight4013 ld a,(iy+MonsterX)4014 sub a,164015 ld (iy+MonsterX),a4016 ld (iy+MonsterXPrevious),a4018 ld a,c 4019 cp 334020 jp c,.EndCheckAdjustXForMonstersOnTheRight4022 ld a,(iy+MonsterX)4023 sub a,164024 ld (iy+MonsterX),a4025 ld (iy+MonsterXPrevious),a4027 ld a,c 4028 cp 57 4029 jp c,.EndCheckAdjustXForMonstersOnTheRight4031 ld a,(iy+MonsterX)4032 sub a,164033 ld (iy+MonsterX),a4034 ld (iy+MonsterXPrevious),a4036 .EndCheckAdjustXForMonstersOnTheRight:4042 ld a,(ix+4)4043 sub a,d4044 ld (iy+MonsterY),a4045 ld (iy+MonsterYPrevious),a4047 ld a,(iy+MonsterHP)4048 or a4049 jr nz,.NotZero4051 4052 ld (iy+MonsterX),2554053 ld (iy+MonsterXPrevious),2554054 ld (iy+MonsterY),2124055 ld (iy+MonsterYPrevious),2124056 .NotZero:4058 4059 ld de,54060 add ix,de 4061 4062 ld de,LenghtMonsterTable4063 add iy,de 4064 4065 pop bc4066 inc b4067 ret4069SetCurrentActiveMOnsterInIX:4070 ld a,(CurrentActiveMonster)4071 inc a4072 ld b,a4073 ld ix,Monster0-LenghtMonsterTable4075 .loop:4076 ld de,LenghtMonsterTable4077 add ix,de4078 djnz .loop4079 ret4081AnimateMonster:4082 call SetCurrentActiveMOnsterInIX4083 call SetMonsterTableInIY 4085 ld a,(MoVeMonster?) 4086 cp 14087 jr nz,.EndCheckMoveMonster4088 inc iy4089 inc iy 4090 .EndCheckMoveMonster:4092 ld a,(MoVeMonster?) 4093 cp 24094 jp z,.MonsterAttacksAnimateOnlyOnGeneralAttackPattern4096 ld l,(iy+0)4097 ld h,(iy+1) 4098 push hl4099 pop iy 4101 push iy4102 call .animate4103 pop iy4105 4106 ld a,(MonsterAnimationSpeed)4107 inc a4108 cp (iy+0) 4109 jr nz,.EndCheckAnimate4110 ld a,(MonsterAnimationStep) 4111 inc a4112 cp (iy+1) 4113 jr nz,.EndCheckLoop4114 xor a4115 .EndCheckLoop:4116 ld (MonsterAnimationStep),a4117 xor a 4118 .EndCheckAnimate:4119 ld (MonsterAnimationSpeed),a4120 ret4122 .animate:4123 4124 ld a,(MoVeMonster?) 4125 or a4126 jr z,.EndCheckMonsterMoving4127 ld a,(MonsterMovingRight?)4128 or a4129 jr z,.MonsterIsFacingLeft4130 jr .MonsterIsFacingRight4131 .EndCheckMonsterMoving:4133 ld a,(CurrentActiveMonster) 4134 cp 74135 jr c,.MonsterIsFacingRight4137 .MonsterIsFacingLeft:4138 ld a,(iy+1) 4139 add a,a4140 ld d,04141 ld e,a4142 add iy,de 4144 .MonsterIsFacingRight:4145 ld a,(MonsterAnimationStep)4146 add a,a4147 add a,24148 ld d,04149 ld e,a4150 add iy,de4151 4152 ld l,(iy+0)4153 ld h,(iy+1) 4155 ld (ix+MonsterSYSX+0),l4156 ld (ix+MonsterSYSX+1),h4157 ret4159 .MonsterAttacksAnimateOnlyOnGeneralAttackPattern:4160 ld l,(iy+4)4161 ld h,(iy+5) 4162 ld de,GeneralMonsterAttackPatternRight4163 call CompareHLwithDE 4164 ret nz4166 ld l,(iy+0)4167 ld h,(iy+1) 4168 push hl4169 pop iy 4171 ld a,(MonsterAttackingRight?)4172 or a4173 jr z,.MonsterIsFacingLeft4174 jr .MonsterIsFacingRight4176TeleportMovement: equ 104177AnimateAttack: equ 204178DisplaceLeft: equ 214179DisplaceRight: equ 224180ShowBeingHitSprite: equ 234181ShootProjectile: equ 244182InitiateAttack: equ 2544183EndMovement: equ 2554184WaitImpactProjectile: equ 254185DisplaceLeft8: equ 264186DisplaceRight8: equ 274187MoveMonster:4188 ld a,(ix+MonsterY)4189 ld (ix+MonsterYPrevious),a4190 ld a,(ix+MonsterX)4191 ld (ix+MonsterXPrevious),a4192 ld a,(ix+MonsterNY)4193 ld (ix+MonsterNYPrevious),a4194 ld a,(ix+MonsterNX)4195 ld (ix+MonsterNXPrevious),a4197 push ix4198 pop hl4199 ld de,Monster04200 call CompareHLwithDE4201 jp z,MoveGridPointer4203 ld a,(MoVeMonster?) 4204 or a4205 ret z4207 ld hl,CursorHand4208 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl4209 ld hl,SpriteColCursorSprites4210 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl4212 .HandleMovement:4213 ld a,(MonsterMovementPathPointer)4214 ld e,a4215 ld d,04216 ld hl,MonsterMovementPath4217 add hl,de4218 ld a,(hl)4219 cp EndMovement 4220 jp z,.EndMovement4221 cp InitiateAttack 4222 jp z,.HandleAttackedMonster4223 cp 128 4224 jp nc,.ChangeNX4225 cp TeleportMovement4226 jp z,.TeleportMovement4227 cp 124228 jp z,.InitiateAttackRightUp4229 cp 134230 jp z,.InitiateAttackRight4231 cp 144232 jp z,.InitiateAttackRightDown4233 cp 164234 jp z,.InitiateAttackLeftDown4235 cp 174236 jp z,.InitiateAttackLeft4237 cp 184238 jp z,.InitiateAttackLeftUp4239 cp AnimateAttack4240 jp z,.AnimateAttack4241 cp DisplaceLeft 4242 jp z,.DisplaceLeft4243 cp DisplaceRight 4244 jp z,.DisplaceRight4245 cp ShowBeingHitSprite 4246 jp z,.ShowBeingHitSprite4247 cp ShootProjectile 4248 jp z,.ShootProjectile4249 cp WaitImpactProjectile 4250 jp z,.WaitImpactProjectile4251 cp DisplaceLeft8 4252 jp z,.DisplaceLeft84253 cp DisplaceRight8 4254 jp z,.DisplaceRight84256 call .Move4258 ld a,(MoveMonster?) 4259 cp 24260 ld c,1 4261 jr z,.SetMovementDuration4262 ld c,3 4263 .SetMovementDuration:4264 4265 ld a,(MonsterMovementAmountOfSteps)4266 dec a4267 and c4268 ld (MonsterMovementAmountOfSteps),a4269 ret nz4270 ld a,(MonsterMovementPathPointer)4271 inc a4272 ld (MonsterMovementPathPointer),a4273 ret4275 .DisplaceLeft:4276 ld a,(ix+MonsterX)4277 sub a,164278 ld (ix+MonsterX),a4280 ld a,(MonsterMovementPathPointer)4281 inc a4282 ld (MonsterMovementPathPointer),a4283 jp .HandleMovement4285 .DisplaceRight:4286 ld a,(ix+MonsterX)4287 add a,164288 ld (ix+MonsterX),a4290 ld a,(MonsterMovementPathPointer)4291 inc a4292 ld (MonsterMovementPathPointer),a4293 jp .HandleMovement4295 .DisplaceLeft8:4296 ld a,(ix+MonsterX)4297 sub a,84298 ld (ix+MonsterX),a4300 ld a,(MonsterMovementPathPointer)4301 inc a4302 ld (MonsterMovementPathPointer),a4303 jp .HandleMovement4305 .DisplaceRight8:4306 ld a,(ix+MonsterX)4307 add a,84308 ld (ix+MonsterX),a4310 ld a,(MonsterMovementPathPointer)4311 inc a4312 ld (MonsterMovementPathPointer),a4313 jp .HandleMovement4315 .ShowBeingHitSprite:4316 ld a,14317 ld (ShowExplosionSprite?),a 4318 xor a4319 ld (ExplosionSpriteStep),a4320 ld a,(MonsterMovementPathPointer)4321 inc a4322 ld (MonsterMovementPathPointer),a4323 jp .HandleMovement4325 .ShootProjectile:4326 ld a,14327 ld (ShootProjectile?),a4328 ld a,(MonsterMovementPathPointer)4329 inc a4330 ld (MonsterMovementPathPointer),a4331 jp .HandleMovement4333 .WaitImpactProjectile:4334 ld a,(ShootProjectile?)4335 or a4336 ret nz4337 ld a,14338 ld (ShowExplosionSprite?),a 4339 xor a4340 ld (ExplosionSpriteStep),a4341 jp .HandleAttackedMonster4342 4343 .AnimateAttack:4344 inc hl4345 ld e,(hl)4346 inc hl4347 ld d,(hl) 4348 ld (ix+MonsterSYSX+0),e4349 ld (ix+MonsterSYSX+1),d4351 ld a,(MonsterMovementPathPointer)4352 add a,34353 ld (MonsterMovementPathPointer),a4354 jp .HandleMovement4356 .InitiateAttackRight:4357 ld (ActiveMonsterAttackingDirection),a4358 call SetCurrentActiveMOnsterInIX4359 call SetMonsterTableInIY 4360 ld l,(iy+4)4361 ld h,(iy+5) 4362 ld a,1 4363 jp .InitiateAttack4365 .InitiateAttackLeft:4366 ld (ActiveMonsterAttackingDirection),a4367 call SetCurrentActiveMOnsterInIX4368 call SetMonsterTableInIY 4369 ld l,(iy+6)4370 ld h,(iy+7) 4371 Xor a 4372 jp .InitiateAttack4374 .InitiateAttackLeftUp:4375 ld (ActiveMonsterAttackingDirection),a4376 call SetCurrentActiveMOnsterInIX4377 call SetMonsterTableInIY 4378 ld l,(iy+08)4379 ld h,(iy+09) 4380 Xor a 4381 jp .InitiateAttack4383 .InitiateAttackLeftDown:4384 ld (ActiveMonsterAttackingDirection),a4385 call SetCurrentActiveMOnsterInIX4386 call SetMonsterTableInIY 4387 ld l,(iy+10)4388 ld h,(iy+11) 4389 Xor a 4390 jp .InitiateAttack4392 .InitiateAttackRightUp:4393 ld (ActiveMonsterAttackingDirection),a4394 call SetCurrentActiveMOnsterInIX4395 call SetMonsterTableInIY 4396 ld l,(iy+12)4397 ld h,(iy+13) 4398 ld a,1 4399 jp .InitiateAttack4401 .InitiateAttackRightDown:4402 ld (ActiveMonsterAttackingDirection),a4403 call SetCurrentActiveMOnsterInIX4404 call SetMonsterTableInIY 4405 ld l,(iy+14)4406 ld h,(iy+15) 4407 ld a,1 4408 jp .InitiateAttack4410 .InitiateAttack:44114412 ld a,24413 ld (MoveMonster?),a 4414 xor a4415 ld (MonsterMovementPathPointer),a4416 ld de,MonsterMovementPath44174421 ld bc,LenghtMonsterMovementPathTable4423 ldir4424 4425 xor a4426 ld (MonsterAttackingRight?),a 4427 ld a,(MonsterMovementPath+1)4428 cp 54429 jp nc,.HandleMovement4430 ld a,14431 ld (MonsterAttackingRight?),a 4432 4433 jp .HandleMovement4435 .HandleAttackedMonster:4436 4437 call SetCurrentActiveMOnsterInIX4438 call SetMonsterTableInIY 4441 call SetTotalMonsterDamageENTIRESTACKInHL4444 44474456 4459 call ApplyAttackDefenseFormula 44654466 ld a,(BrokenArrow?)4467 or a4468 jr z,.EndCheckBrokenArrow4469 push hl4470 pop bc4471 ld de,2 4472 call DivideBCbyDE 4473 push bc4474 pop hl4475 .EndCheckBrokenArrow:447644784479 ld a,(HandleRetaliation?) 4480 or a4481 jr z,.EndCheckRetaliation4483 push hl4484 call SetCurrentActiveMOnsterInIX4485 call SetMonsterTableInIY 4486 pop hl4487 ld a,(iy+MonsterTableSpecialAbility)4488 cp RangedMonster4489 jp nz,.EndCheckRetaliation4491 push hl4492 pop bc4493 ld de,2 4494 call DivideBCbyDE 4495 push bc4496 pop hl4498 .EndCheckRetaliation:449945014502 call ApplyAttackReductionFromArmorer4503 call ApplyAttackReductionFromGreenLeafShield4508 4509 push hl4510 ld a,3 4511 ld (BattleTextQ),a4512 ld a,24513 ld (SetBattleText?),a 4514 ld (BattleTextQ+1),hl 4515 call SetCurrentActiveMOnsterInIX4517 ld a,(ix+MonsterAmount) 4518 or (ix+MonsterAmount+1)4519 ld (BattleTextQ+3),a 4521 call SetMonsterNameInBattleTextQ44523 pop hl4524 4531 .DealDamageToMonster: 4533 ld de,04534 ex de,hl4535 or a4536 sbc hl,de 4537 push hl4539 ld ix,(MonsterThatIsBeingAttacked)4541 ld b,hypnosisSpellNumber 4542 call RemoveSpell 4544 4545 ld l,(ix+MonsterAmount)4546 ld h,(ix+MonsterAmount+1)4547 ld (AmountMonsterBeforeBeingAttacked),hl4549 call SetTotalMonsterHPInHL 4550 ld c,l 4551 pop hl 4553 ld ix,(MonsterThatIsBeingAttacked)4554 .loop:4555 ld d,04556 ld e,(ix+MonsterHP) 4558 add hl,de4559 jr c,.NoUnitsOrExactly1UnitLost4561 ld e,(ix+MonsterAmount)4562 ld d,(ix+MonsterAmount+1)4563 dec de 4564 ld (ix+MonsterAmount),e4565 ld (ix+MonsterAmount+1),d4566 ld a,d4567 or e4569 jr z,.MonsterDied4570 ld (ix+MonsterHP),c 4571 jp .loop4573 .NoUnitsOrExactly1UnitLost:4574 ld (ix+MonsterHP),l4575 ld a,l4576 or a4577 jr nz,.CheckRetaliate4579 ld e,(ix+MonsterAmount)4580 ld d,(ix+MonsterAmount+1)4581 dec de 4582 ld (ix+MonsterAmount),e4583 ld (ix+MonsterAmount+1),d4584 ld a,d4585 or e4587 jr z,.MonsterDied4588 ld (ix+MonsterHP),c 4590 4591 .CheckRetaliate: 4592 call SetAmountUnderMonsterIn3Pages4594 ld a,(SpellSelected?) 4595 or a4596 ret nz4598 ld a,(HandleRetaliation?) 4599 or a 4600 jr z,.go4601 xor a4602 ld (HandleRetaliation?),a4603 jr .EndSetStatusOnEndMovement4604 .go:4608 4609 call SetCurrentActiveMOnsterInIX4610 call SetMonsterTableInIY 4611 ld a,(iy+MonsterTableSpecialAbility)4612 cp RangedMonster4613 jp nz,.EndCheckRangedMonster4614 ld a,(MayRangedAttackBeRetaliated?)4615 or a4616 jp z,.EndMovement4617 .EndCheckRangedMonster:4618 4620 ld ix,(MonsterThatIsBeingAttacked)4621 bit 7,(ix+MonsterStatus) 4622 jr nz,.EndMovement4623 ld a,14624 ld (HandleRetaliation?),a4626 ld b,ClawBackSpellNumber 4627 call CheckPresenceStatusEffect 4628 jr z,.EndMovement4629 set 7,(ix+MonsterStatus) 4630 jr .EndMovement4631 4632 .MonsterDied:4633 ld (ix+MonsterHP),000 4634 ld a,34635 ld (ShowExplosionSprite?),a 4636 xor a4637 ld (ExplosionSpriteStep),a 4638 ld a,14639 ld (MonsterDied?),a4641 ld a,(SpellSelected?) 4642 or a4643 ret nz4645 ld a,(HandleRetaliation?) 4646 or a 4647 jr z,.EndMovement4648 xor a4649 ld (HandleRetaliation?),a4650 jr .EndSetStatusOnEndMovement4652 .EndMovement:4653 call SetCurrentActiveMOnsterInIX4654 4655 ld a,(ix+MonsterStatus) 4656 and %1000 0004657 or a,MonsterStatusTurnEnded4658 ld (ix+MonsterStatus),a4659 .EndSetStatusOnEndMovement:4661 xor a4662 ld (MoVeMonster?),a 4663 ld (MonsterMovementPathPointer),a4664 ld (MonsterAnimationSpeed),a4665 ld (MonsterAnimationStep),a4666 ld a,14667 ld (SwitchToNextMonster?),a4668 ret4670 .ChangeNX:4671 and %0111 11114672 ld (ix+MonsterNX),a4673 ld a,(MonsterMovementPathPointer)4674 inc a4675 ld (MonsterMovementPathPointer),a4676 jp .HandleMovement4678 .Move:4679 cp 24680 jr z,.MoveRightUp4681 cp 34682 jr z,.MoveRight4683 cp 44684 jr z,.MoveRightDown4685 cp 64686 jr z,.MoveLeftDown4687 cp 74688 jr z,.MoveLeft4689 cp 84690 jr z,.MoveLeftUp4691 ret4693 .TeleportMovement:4694 inc hl 4695 ld a,(hl)4696 ld (ix+MonsterY),a4697 inc hl 4698 ld a,(hl)4699 ld (ix+MonsterX),a4701 xor a4702 ld (MoVeMonster?),a 4703 ld (MonsterMovementPathPointer),a4704 ld (MonsterAnimationSpeed),a4705 ld (MonsterAnimationStep),a4706 ld a,14707 ld (SwitchToNextMonster?),a4708 ret4710 .MoveRightUp:4711 ld a,14712 ld (MonsterMovingRight?),a4714 ld a,(ix+MonsterX)4715 add a,24716 ld (ix+MonsterX),a4718 ld a,(ix+MonsterY)4719 sub a,44720 ld (ix+MonsterY),a4721 ret4723 .MoveRight:4724 ld a,14725 ld (MonsterMovingRight?),a4727 ld a,(ix+MonsterX)4728 add a,44729 ld (ix+MonsterX),a4730 ret4732 .MoveRightDown:4733 ld a,14734 ld (MonsterMovingRight?),a4736 ld a,(ix+MonsterX)4737 add a,24738 ld (ix+MonsterX),a4740 ld a,(ix+MonsterY)4741 add a,44742 ld (ix+MonsterY),a4743 ret4745 .MoveLeftDown:4746 xor a4747 ld (MonsterMovingRight?),a4749 ld a,(ix+MonsterX)4750 sub a,24751 ld (ix+MonsterX),a4753 ld a,(ix+MonsterY)4754 add a,44755 ld (ix+MonsterY),a4756 ret4758 .MoveLeft:4759 xor a4760 ld (MonsterMovingRight?),a4762 ld a,(ix+MonsterX)4763 sub a,44764 ld (ix+MonsterX),a4765 ret4767 .MoveLeftUp:4768 xor a4769 ld (MonsterMovingRight?),a4771 ld a,(ix+MonsterX)4772 sub a,24773 ld (ix+MonsterX),a4775 ld a,(ix+MonsterY)4776 sub a,44777 ld (ix+MonsterY),a4778 ret4780ApplyAttackReductionFromGreenLeafShield:4781 push hl 4782 4783 ld ix,(MonsterThatIsBeingAttacked)4785 4786 push ix4787 pop hl 4788 ld de,Monster74789 call CompareHLwithDE 4790 ld ix,(plxcurrentheroAddress) 4791 jr c,.HeroFound4792 ld ix,(HeroThatGetsAttacked) 4793 push ix4794 pop hl4795 ld a,l4796 or h4797 pop hl 4798 ret z 4799 push hl4800 .HeroFound:4801 4802 4803 pop hl 4805 ld a,(ix+HeroInventory+2) 4806 cp 010 4807 ret nz4809 4810 push hl4811 call SetCurrentActiveMOnsterInIX4812 call SetMonsterTableInIY 4813 ld a,(iy+MonsterTableSpecialAbility)4814 cp RangedMonster4815 pop hl4816 ret nz4817 4818 ld de,02 4819 call ApplyPercentBasedBoost4820 or a4821 sbc hl,bc4822 sbc hl,bc4823 ret4824 48264827ApplyAttackReductionFromArmorer:4828 push hl 4829 4830 ld ix,(MonsterThatIsBeingAttacked)4832 4833 push ix4834 pop hl 4835 ld de,Monster74836 call CompareHLwithDE 4837 ld ix,(plxcurrentheroAddress) 4838 jr c,.HeroFound4839 ld ix,(HeroThatGetsAttacked) 4840 push ix4841 pop hl4842 ld a,l4843 or h4844 pop hl 4845 ret z 4846 push hl4847 .HeroFound:4848 4850 pop hl 4851 ld a,(ix+HeroSkills+0)4852 call .CheckSkillArmorer4853 ld a,(ix+HeroSkills+1)4854 call .CheckSkillArmorer4855 ld a,(ix+HeroSkills+2)4856 call .CheckSkillArmorer4857 ld a,(ix+HeroSkills+3)4858 call .CheckSkillArmorer4859 ld a,(ix+HeroSkills+4)4860 call .CheckSkillArmorer4861 ld a,(ix+HeroSkills+5)4862 call .CheckSkillArmorer4863 ret4865 .CheckSkillArmorer:4866 cp 07 4867 jr z,.BasicArmorerFound4868 cp 08 4869 jr z,.AdvancedArmorerFound4870 cp 09 4871 jr z,.ExpertArmorerFound4872 ret4874 .BasicArmorerFound:4875 ld de,20 4876 call ApplyPercentBasedBoost4877 or a4878 sbc hl,bc4879 sbc hl,bc4880 ret4882 .AdvancedArmorerFound:4883 ld de,10 4884 call ApplyPercentBasedBoost4885 or a4886 sbc hl,bc4887 sbc hl,bc4888 ret4890 .ExpertArmorerFound:4891 ld de,07 4892 call ApplyPercentBasedBoost4893 or a4894 sbc hl,bc4895 sbc hl,bc4896 ret4901 4904ApplyAttackDefenseFormula: 4905 push hl4906 4907 ld ix,(MonsterThatIsBeingAttacked)4908 call SetMonsterTableInIY 4909 call SetTotalMonsterDefenseInHL 4910 push hl4912 call SetCurrentActiveMOnsterInIX4913 call SetMonsterTableInIY 4914 call SetTotalMonsterAttackInHL 4915 pop de4916 4917 or a4918 sbc hl,de 4919 jr z,.AttackAndDefenseAreTheSame4920 4921 jr c,.DefenseIsHigher4923 .AttackIsHigher: 4924 ld a,l4925 cp 614926 jr c,.Go24927 ld a,604928 .Go2:4929 ld e,a4931 pop hl4933 push de4934 ld de,20 4935 call ApplyPercentBasedBoost4936 pop de4938 .loop1:4939 dec e4940 ret z4941 add hl,bc 4942 jp .loop14943 4944 .DefenseIsHigher: 4945 ld a,l4946 neg4947 cp 134948 jr c,.Go4949 ld a,124950 .Go:4952 ld e,a4953 pop hl4955 push de4956 ld de,40 4957 call ApplyPercentBasedBoost4958 pop de4959 or a4960 sbc hl,bc4961 sbc hl,bc4963 .loop2:4964 dec e4965 ret z4966 sbc hl,bc 4967 jp .loop24969 .AttackAndDefenseAreTheSame:4970 pop hl4971 ret4974MoveGridPointer:4975 ld a,(spat)4976 add a,14 4977 4978 and %1111 00004979 bit 4,a4980 jr z,.EvenTiles4982 .OddTiles:4983 sub a,94984 ld (ix+MonsterY),a4986 ld a,(spat+1)4987 sub a,6 4988 4989 and %1111 00004990 add a,4+84991 ld (ix+MonsterX),a4992 ret4994 .EvenTiles:4995 sub a,94996 ld (ix+MonsterY),a4997 ld a,(spat+1)4998 sub a,-45000 and %1111 00005001 add a,45002 ld (ix+MonsterX),a5003 ret50055009SortMonstersOnTheirSpeed:5010 ld c,TotalAmountOfMonstersOnBattleField-1-1 5011 call .sortloop5012 ret5014 .sortloop:5015 ld iy, MonstersSortedOnSpeed 5016 ld b,c 5018 .innerloop:5019 ld l,(iy)5020 ld h,(iy+1) 5021 push hl5022 pop ix5026 push iy5027 push bc5028 call SetMonsterTableInIY5030 call SetTotalMonsterSpeedInHL 5031 ld e,l5032 5034 50355036 pop bc5037 pop iy5038 push de5039 5040 ld l,(iy+2)5041 ld h,(iy+3) 5042 push hl5043 pop ix5044 5045 push iy5046 push bc 5047 call SetMonsterTableInIY5049 call SetTotalMonsterSpeedInHL 5050 ld a,l50535054 pop bc5055 pop iy5056 pop de5060 5061 cp e 5062 jr nc,.noswap 5064 5066 ld l,(iy)5067 ld h,(iy+1) 5068 ld e,(iy+2)5069 ld d,(iy+3) 5071 ld (iy),e5072 ld (iy+1),d 5073 ld (iy+2),l5074 ld (iy+3),h 5075 .noswap:5077 inc iy 5078 inc iy 5079 djnz .innerloop 5081 5082 dec c5083 jr nz,.sortloop 5084 ret50855087CopyARowOf12PixelsFromBottomOfPage3ToPage2:5088 db 0,0,172+16,35089 db 0,0,188+16,25090 db 0,1,12,05091 db 0,0,$d0 5092 5093BuildUpBattleFieldAndPutMonsters: 5094 xor a5095 ld (activepage),a 5096 call SetBattleFieldGraphics 5097 ld a,r5098 push af 5099 call .SetRocks5100 call .SetHeroes5101 ld hl,.CopyPage1To25102 call DoCopy 5103 call SwapAndSetPage 5104 call SetBattleFieldGraphics 5105 pop af 5106 call .SetRocks5107 call .SetHeroes5108 ld hl,.CopyPage1To35109 call DoCopy 51115113 call SetAllMonstersInMonsterTable 5114 call .PutAllMonsters 5115 call .CopyAllMonstersToPage1and251185123 xor a51245125 ld (CurrentActiveMonster),a5126 call CheckSwitchToNextMonster.GoToNextActiveMonster51285130 ret5133 .SetHeroes:5134 5135 ld ix,(plxcurrentheroAddress) 5136 ld l,(ix+HeroSpecificInfo+0) 5137 ld h,(ix+HeroSpecificInfo+1)5138 push hl5139 pop ix5141 5142 ld a,(ix+HeroinfoSYSX+0) 5143 and %0100 1000 5144 or a,128 + (064 / 2) 5145 xor 8 5146 ld l,a5147 ld h,(ix+HeroInfoSYSX+1) 5149 .XLeftHero: equ 05150 .YLeftHero: equ 305152 exx5153 ld de,256*(.YLeftHero) + (.XLeftHero)5154 exx5155 ld bc,.NXAndNY16x32HeroIcon5157 ld a,(ix+HeroInfoSpriteBlock)5159 call .CopyTransparantImageHero 5161 5162 ld ix,(HeroThatGetsAttacked) 5164 push ix 5165 pop hl5166 ld a,l5167 or h5168 ret z5170 ld l,(ix+HeroSpecificInfo+0) 5171 ld h,(ix+HeroSpecificInfo+1)5172 push hl5173 pop ix5174 5175 5176 ld a,(ix+HeroinfoSYSX+0) 5177 and %0100 1000 5178 or a,128 + (064 / 2) 5179 xor 8 5180 ld l,a5181 ld h,(ix+HeroInfoSYSX+1) 5183 .XRightHero: equ 256-165184 .YRightHero: equ 305186 exx5187 ld de,256*(.YRightHero) + (.XRightHero)5189 exx5190 ld bc,.NXAndNY16x32HeroIcon5191 ld a,(ix+HeroInfoSpriteBlock)5192 jp .CopyTransparantImageHero 5194.NXAndNY16x32HeroIcon: equ 032*256 + (016/2) 5197.CopyTransparantImageHero: 51985200 ld (BlockToReadFrom),a5201 ld (AddressToWriteFrom),hl5202 ld de,$8000 + ((212+12)*128) + (000/2) - 128 5203 ld (AddressToWriteTo),de 5204 ld (NXAndNY),bc5206 ld a,b5207 ld (CopyCastleButton2+ny),a5208 ld a,c5209 add a,a5210 ld (CopyCastleButton2+nx),a5212 call CopyRamToVramPage3ForBattleEngine 5214 ld a,(activepage)5215 xor 15216 ld (CopyCastleButton2+dPage),a5218 exx5219 ld a,d5220 ld (CopyCastleButton2+dy),a5221 ld a,e5222 ld (CopyCastleButton2+dx),a5224 ld a,212+125225 ld (CopyCastleButton2+sy),a5227 ld a,35228 ld (CopyCastleButton2+sPage),a5229 ld hl,CopyCastleButton25230 call docopy5231 ld a,15232 ld (CopyCastleButton2+sPage),a5234 ld a,2125235 ld (CopyCastleButton2+sy),a5237 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5238 call docopy5239 ret5242.CopyTransparantImage: 52435244 push af5245 ld a,b5246 ld (CopyCastleButton2+ny),a5247 ld a,c5248 add a,a5249 ld (CopyCastleButton2+nx),a5250 pop af5252 ld de,$8000 + ((212+16)*128) + (000/2) - 128 5253 call CopyRamToVramCorrectedWithoutActivePageSetting 5255 ld a,(activepage)5256 xor 15257 ld (CopyCastleButton2+dPage),a5259 exx5260 ld a,d5261 ld (CopyCastleButton2+dy),a5262 ld a,e5263 ld (CopyCastleButton2+dx),a5265 ld a,212+165266 ld (CopyCastleButton2+sy),a5268 ld hl,CopyCastleButton25269 call docopy5271 ld a,2125272 ld (CopyCastleButton2+sy),a5274 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5275 call docopy5276 ret5292 .CopyAllMonstersToPage1and2:5293 ld hl,.CopyMonstersFromPage0to15294 call DoCopy 5295 ld hl,.CopyMonstersFromPage0to2 5296 call DoCopy 5297 ret5298 5299 .PutAllMonsters:5300 call SortMonstersFromHighToLow 5301 ld a,1 5302 ld (CurrentActiveMonster),a5303 .loop:5304 call SetCurrentActiveMOnsterInIX5305 ld a,(ix+MonsterHP)5306 or a530753115312 jr nz,.GoPutMonster5313 5314 ld (ix+MonsterX),2555315 ld (ix+MonsterXPrevious),2555316 ld (ix+MonsterY),2125317 ld (ix+MonsterYPrevious),2125318 jr .NextMonster5319 .GoPutMonster:53205323 call Set255WhereMonsterStandsInBattleFieldGrid5324 call SetAmountUnderMonster5325 call StoreSYSXNYNXAndBlock 5326 call PutMonster 5327 .NextMonster:5328 ld a,(CurrentActiveMonster)5329 inc a 5330 cp TotalAmountOfMonstersOnBattleField5331 ret z5332 ld (CurrentActiveMonster),a5333 jr .loop5335.CopyMonstersFromPage0to1:5336 db 0,0,0,05337 db 0,0,0,15338 db 0,1,188+16,05339 db 0,0,$d0 5341.CopyMonstersFromPage0to2:5342 db 0,0,0,05343 db 0,0,0,25344 db 0,1,188+16,05345 db 0,0,$d0 5347.CopyPage1To2:5348 db 0,0,0,15349 db 0,0,0,25350 db 0,1,188+16,05351 db 0,0,$d0 5353.CopyPage1To3:5354 db 0,0,0,15355 db 0,0,0,35356 db 0,1,188+16,05357 db 0,0,$d0 5359 .SetRocks:5360 and 75361 ld hl,RocksVersion1+15362 jr z,.RocksFormationFound5363 dec a5364 ld hl,RocksVersion2+15365 jr z,.RocksFormationFound5366 dec a5367 ld hl,RocksVersion3+15368 jr z,.RocksFormationFound5369 dec a5370 ld hl,RocksVersion4+15371 jr z,.RocksFormationFound5372 dec a5373 ld hl,RocksVersion5+15374 jr z,.RocksFormationFound5375 dec a5376 ld hl,RocksVersion6+15377 jr z,.RocksFormationFound5378 dec a5379 ld hl,RocksVersion7+15380 jr z,.RocksFormationFound53815382 ld hl,RocksVersion8+153835384 .RocksFormationFound:5385 push hl5386 pop ix53875388 ld b,(ix-1) 5389 ld a,b5390 or a5391 ret z5393 .RockLoop:5394 push bc5395 ld e,(ix+0)5396 ld d,(ix+1)5397 call .GoSetRock 5399 ld l,(ix+2)5400 ld h,(ix+3)5401 ld (hl),2555403 inc ix5404 inc ix5405 inc ix5406 inc ix5407 pop bc5408 djnz .RockLoop5409 ret5411 .GoSetRock:5412 ld a,(BattleGraphicsBlock) 5413 cp BattleFieldWinterBlock5414 ld hl,$4000 + (000*128) + (016/2) - 128 5415 jr z,.BattleFieldTileFound5416 cp BattleFieldDesertBlock5417 ld hl,$4000 + (000*128) + (064/2) - 128 5418 jr z,.BattleFieldTileFound5419 cp BattleFieldCaveBlock5420 ld hl,$4000 + (000*128) + (112/2) - 128 5421 jr z,.BattleFieldTileFound5422 cp BattleFieldGentleBlock5423 ld hl,$4000 + (000*128) + (048/2) - 128 5424 jr z,.BattleFieldTileFound5425 cp BattleFieldAutumnBlock5426 ld hl,$4000 + (000*128) + (000/2) - 128 5427 jr z,.BattleFieldTileFound5428 ld hl,$4000 + (000*128) + (080/2) - 128 5430 .BattleFieldTileFound:5431 ld bc,$0000 + (016*256) + (016/2)5432 ld a,BattleFieldObjectsBlock 5434 push de5435 exx5436 pop de5437 exx5438 jp BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 5440RocksVersion1:5441 db 05442 dw $0000 + ((00*16+056)*256) + ((07*08 + 12)), BattleFieldGrid+007 + 00*LenghtBattleField5444RocksVersion2:5445 db 15446 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5448RocksVersion3:5449 db 25450 dw $0000 + ((03*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 03*LenghtBattleField5451 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5453RocksVersion4:5454 db 35455 dw $0000 + ((01*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 01*LenghtBattleField5456 dw $0000 + ((01*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 01*LenghtBattleField5457 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5459RocksVersion5:5460 db 35461 dw $0000 + ((05*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5462 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5463 dw $0000 + ((04*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 04*LenghtBattleField5465RocksVersion6:5466 db 45467 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5468 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5469 dw $0000 + ((04*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 04*LenghtBattleField5470 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5472RocksVersion7:5473 db 55474 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5475 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5476 dw $0000 + ((04*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 04*LenghtBattleField5477 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5478 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5480RocksVersion8:5481 db 65482 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5483 dw $0000 + ((02*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 02*LenghtBattleField5484 dw $0000 + ((01*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 01*LenghtBattleField5485 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5486 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5487 dw $0000 + ((06*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 06*LenghtBattleField5489Set255WhereMonsterStandsInBattleFieldGrid:5490 call FindMonsterInBattleFieldGrid 5492 5493 ld a,(ix+MonsterNX)5494 ld (hl),255 5495 cp 175496 ret c5497 5498 inc hl5499 inc hl5500 ld (hl),255 5501 cp 335502 ret c5503 inc hl5504 inc hl5505 ld (hl),255 5506 cp 575507 ret c5508 inc hl5509 inc hl5510 ld (hl),255 5511 ret5513CheckMonsterDied:5514 ld a,(MonsterDied?)5515 or a5516 ret z5517 xor a5518 ld (MonsterDied?),a5520 ld ix,(MonsterThatIsBeingAttacked)5522 5526 ld a,(activepage)5527 xor 15528 ld (EraseMonster+dPage),a5529 ld a,35530 ld (EraseMonster+sPage),a5531 5532 ld a,(ix+MonsterYPrevious)5533 ld (EraseMonster+sy),a 5534 ld (EraseMonster+dy),a5536 ld a,(ix+MonsterXPrevious)5537 ld (EraseMonster+dx),a5538 ld (EraseMonster+sx),a5540 ld a,(ix+MonsterNXPrevious)5541 ld (EraseMonster+nx),a5542 ld a,(ix+MonsterNYPrevious)5543 ld (EraseMonster+ny),a55455548 ld hl,EraseMonster5549 call docopy5551 5552 call RecoverOverwrittenMonstersSkipMonster05554 call SwapAndSetPage 5556 5560 ld a,(activepage)5561 xor 15562 ld (EraseMonster+dPage),a5563 ld a,35564 ld (EraseMonster+sPage),a5565 5566 ld a,(ix+MonsterYPrevious)5567 ld (EraseMonster+sy),a 5568 ld (EraseMonster+dy),a5570 ld a,(ix+MonsterXPrevious)5571 ld (EraseMonster+dx),a5572 ld (EraseMonster+sx),a5574 ld a,(ix+MonsterNXPrevious)5575 ld (EraseMonster+nx),a5576 ld a,(ix+MonsterNYPrevious)5577 ld (EraseMonster+ny),a55795582 ld hl,EraseMonster5583 call docopy5585 5586 call RecoverOverwrittenMonstersSkipMonster05588 call SwapAndSetPage 5590 5591 ld a,(activepage)5592 xor 15593 ld (EraseMonster+sPage),a5594 ld a,25595 ld (EraseMonster+dPage),a5596 5597 ld hl,EraseMonster5598 call docopy5600 ld a,25601 ld (EraseMonster+sPage),a5602 5603 5604 call FindMonsterInBattleFieldGrid 5605 call Set001AtCurrentMonstersLocation5607 5608 ld (ix+MonsterX),2555609 ld (ix+MonsterXPrevious),2555610 ld (ix+MonsterY),2125611 ld (ix+MonsterYPrevious),2125612 ret 5614SetAmountUnderMonster:56155621 ld hl,$4000 + (038*128) + (000/2) - 1285622 ld de,$0000 + (249*128) + (240/2) - 128 5623 ld bc,$0000 + (007*256) + (016/2) 5624 ld a,BattleFieldObjectsBlock 5625 call CopyRamToVramCorrectedCastleOverview 5627 ld b,241 5628 ld c,250 5629 ld l,(ix+MonsterAmount)5630 ld h,(ix+MonsterAmount+1)5631 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs056325634 ld a,(PutLetter+dx) 5635sub 24056365637 ld (PutMonsterAmountOnBattleField+nx),a5639 5643 ld a,(ix+MonsterNX)5644 sub a,165645 srl a 5646 add a,(ix+MonsterX)5647 ld (PutMonsterAmountOnBattleField+dx),a5649 ld a,(ix+MonsterY)56505653 ld (PutMonsterAmountOnBattleField+dy),a5655 ld a,(activepage)5656 xor 15657 ld (PutMonsterAmountOnBattleField+spage),a5658 ld (PutMonsterAmountOnBattleField+dpage),a5659 ld (SmoothCornerPutMonsterAmount+spage),a5660 ld (SmoothCornerPutMonsterAmount+dpage),a5662 ld a,(PutLetter+dx) 5663 dec a5664 ld (SmoothCornerPutMonsterAmount+dx),a5665 5666 ld hl,SmoothCornerPutMonsterAmount5667 call docopy 5669 ld hl,PutMonsterAmountOnBattleField5670 jp docopy 5672ClearAmountUnderMonster:5673 5677 ld a,165678 ld (ClearMonsterAmountOnBattleField+nx),a5679 5680 ld a,(ix+MonsterNX)5681 sub a,165682 srl a 5683 add a,(ix+MonsterX)5684 ld (ClearMonsterAmountOnBattleField+sx),a5685 ld (ClearMonsterAmountOnBattleField+dx),a5687 ld a,(ix+MonsterY)5688 ld (ClearMonsterAmountOnBattleField+sy),a 5689 ld (ClearMonsterAmountOnBattleField+dy),a 56915692 ld a,(activepage)5693 xor 15694 ld (ClearMonsterAmountOnBattleField+dpage),a5695 5696 ld a,3 5697 ld (ClearMonsterAmountOnBattleField+spage),a5699 ld hl,ClearMonsterAmountOnBattleField5700 call docopy 57025703 xor a5704 ld (RepairAmountAboveMonster?),a 5705 call RecoverOverwrittenMonstersSkipMonster05706 ld a,15707 ld (RepairAmountAboveMonster?),a 57095710 ld a,(activepage)5711 ld (ClearMonsterAmountOnBattleField+dpage),a5712 xor 15713 ld (ClearMonsterAmountOnBattleField+spage),a5715 ld hl,ClearMonsterAmountOnBattleField5716 call docopy 5717 57185719 ld a,25720 ld (ClearMonsterAmountOnBattleField+dpage),a5722 ld hl,ClearMonsterAmountOnBattleField5723 call docopy57255726 ld a,25727 ld (ClearMonsterAmountOnBattleField+spage),a5728 ld a,(activepage)5729 xor 15730 ld (ClearMonsterAmountOnBattleField+dpage),a5731 ld a,(ix+MonsterY)5732 ld (ClearMonsterAmountOnBattleField+sy),a5733 ld (ClearMonsterAmountOnBattleField+dy),a5734 ld a,(ix+MonsterX)5735 ld (ClearMonsterAmountOnBattleField+sx),a5736 ld (ClearMonsterAmountOnBattleField+dx),a5737 ld a,(ix+MonsterNY)5738 ld (ClearMonsterAmountOnBattleField+ny),a5739 ld a,(ix+MonsterNX)5740 ld (ClearMonsterAmountOnBattleField+nx),a5741 ld hl,ClearMonsterAmountOnBattleField5742 call docopy5744 ld a,75745 ld (ClearMonsterAmountOnBattleField+ny),a5746 ld a,2405747 ld (ClearMonsterAmountOnBattleField+sx),a5748 ld a,2495749 ld (ClearMonsterAmountOnBattleField+sy),a 5750 ret5752SetAmountUnderMonsterIn3Pages:5753 ld hl,(AmountMonsterBeforeBeingAttacked)5754 ld e,(ix+MonsterAmount)5755 ld d,(ix+MonsterAmount+1)5756 call CompareHLwithDE5757 ret z 5758 5759 ld ix,(MonsterThatIsBeingAttacked)5760 call ClearAmountUnderMonster5762 ld ix,(MonsterThatIsBeingAttacked)5763 call SetAmountUnderMonster5765 ld a,(activepage)5766 ld (PutMonsterAmountOnBattleField+dpage),a5767 ld hl,PutMonsterAmountOnBattleField5768 call docopy 5769 5770 ld a,25771 ld (PutMonsterAmountOnBattleField+dpage),a5772 ld hl,PutMonsterAmountOnBattleField5773 jp docopy 5774 5775Recover:5776 5777 push ix5778 pop hl5779 ld de,Monster05780 call CompareHLwithDE5781 jp z,RecoverOverwrittenMonstersHard5782 jp RecoverOverwrittenMonsters 5783 5784SortMonstersFromHighToLow:5785 push ix5786 ld c,TotalAmountOfMonstersOnBattleField-1-1 5787 call sortloop5788 pop ix5789 ret5791sortloop:5792 ld iy, OrderOfMonstersFromHighToLow + 2 5793 ld b,c 5795 .innerloop:5796 ld l,(iy)5797 ld h,(iy+1) 5798 push hl5799 pop ix5800 ld a,(ix+MonsterY)5801 add a,(ix+MonsterNY)5802 ld e,a 5804 ld l,(iy+2)5805 ld h,(iy+3) 5806 push hl5807 pop ix5808 ld a,(ix+MonsterY)5809 add a,(ix+MonsterNY)5811 cp e 5812 jr nc,.noswap 5814 5816 ld l,(iy)5817 ld h,(iy+1) 5818 ld e,(iy+2)5819 ld d,(iy+3) 5821 ld (iy),e5822 ld (iy+1),d 5823 ld (iy+2),l5824 ld (iy+3),h 5825 .noswap:5827 inc iy 5828 inc iy 5829 djnz .innerloop 5831 5832 dec c5833 jr nz,sortloop 5834 ret58355837CheckSpaceToMoveMonster:58385842 ld a,(NewPrContr)5843 bit 4,a5844 ret z5846 xor a5847 ld (BrokenArrow?),a5849 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5850 ld de,CursorBootsOld5851 call CompareHLwithDE5852 ld c,EndMovement 5853 jp z,.BootsFoundSetMovementPath5855 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5856 ld de,CursorSwordRight5857 call CompareHLwithDE5858 jp z,.SwordRightFoundSetMovementPath5860 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5861 ld de,CursorSwordLeft5862 call CompareHLwithDE5863 jp z,.SwordLeftFoundSetMovementPath5865 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5866 ld de,CursorSwordLeftUp5867 call CompareHLwithDE5868 jp z,.SwordLeftUpFoundSetMovementPath 5870 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5871 ld de,CursorSwordLeftDown5872 call CompareHLwithDE5873 jp z,.SwordLeftDownFoundSetMovementPath5875 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5876 ld de,CursorSwordRightUp5877 call CompareHLwithDE5878 jp z,.SwordRightUpFoundSetMovementPath5880 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5881 ld de,CursorSwordRightDown5882 call CompareHLwithDE5883 jp z,.SwordRightDownFoundSetMovementPath 5885 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5886 ld de,CursorBowAndArrow5887 call CompareHLwithDE5888 jp z,.BowAndArrowFoundSetMovementPath5890 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5891 ld de,CursorBrokenArrow5892 call CompareHLwithDE5893 ret nz5895 .BrokenArrowFoundSetMovementPath:5896 ld a,15897 ld (BrokenArrow?),a5898 .BowAndArrowFoundSetMovementPath: 5899 call SetCurrentActiveMOnsterInIX5900 ld a,(ix+MonsterX)5901 ld iy,(MonsterThatIsBeingAttacked)5902 cp (iy+MonsterX)5903 ld c,013 5904 jr c,.DirectionFound5905 ld c,017 5906 .DirectionFound:5907 ld a,15908 ld (MoVeMonster?),a 5909 xor a5910 ld (MonsterAnimationSpeed),a5911 ld (MonsterAnimationStep),a5912 ld iy,MonsterMovementPath5913 ld (iy),c 5914 ret5916 .SwordLeftUpFoundSetMovementPath:5917 call FindCursorInBattleFieldGrid 5918 inc hl5919 ld de,LenghtBattleField5920 add hl,de5921 ld c,018 5922 jr .CursorLocationSet5924 .SwordLeftDownFoundSetMovementPath:5925 call FindCursorInBattleFieldGrid 5926 inc hl5927 ld de,LenghtBattleField5928 or a5929 sbc hl,de5930 ld c,016 5931 jr .CursorLocationSet5933 .SwordRightUpFoundSetMovementPath:5934 call FindCursorInBattleFieldGrid 5935 dec hl5936 ld de,LenghtBattleField5937 add hl,de5938 ld c,012 5939 jr .CursorLocationSet5941 .SwordRightDownFoundSetMovementPath:5942 call FindCursorInBattleFieldGrid 5943 dec hl5944 ld de,LenghtBattleField5945 or a5946 sbc hl,de5947 ld c,014 5948 jr .CursorLocationSet5950 .SwordLeftFoundSetMovementPath:5951 call FindCursorInBattleFieldGrid 5952 inc hl5953 inc hl5954 ld c,017 5955 jr .CursorLocationSet5957 .SwordRightFoundSetMovementPath:5958 call FindCursorInBattleFieldGrid 5959 dec hl5960 dec hl5962 call SetCurrentActiveMOnsterInIX5963 ld a,(ix+MonsterNX)5964 cp 175965 jp c,.SwordRightFound5966 dec hl5967 dec hl5968 cp 335969 jp c,.SwordRightFound5970 dec hl5971 dec hl5972 cp 575973 jp c,.SwordRightFound5974 dec hl5975 dec hl5976 .SwordRightFound:5978 ld c,013 5979 jr .CursorLocationSet5981 .BootsFoundSetMovementPath:5982 call FindCursorInBattleFieldGrid 5983 .CursorLocationSet:5985 ld a,15986 ld (MoVeMonster?),a 5987 xor a5988 ld (MonsterAnimationSpeed),a5989 ld (MonsterAnimationStep),a5991 5992 ld a,(hl) 5993 cp 15994 jr nz,.EndCheckActiveMonsterIsOnThisTile5995 ld iy,MonsterMovementPath5996 ld (iy),c 5997 ret5998 .EndCheckActiveMonsterIsOnThisTile:6001 ld a,(hl) 6002 dec a6004 ld iy,MonsterMovementPath6005 ld d,06006 ld e,a6007 add iy,de6008 ld (iy),c 6009 .loop:6010 call SearchForTileNumberA 6011 6012 dec iy6013 ld (iy),b6014 dec a6015 jr nz,.loop6016 6017 SearchForTileNumberA:6018 ld de,LenghtBattleField6019 6020 dec hl6021 dec hl6022 cp (hl)6023 jr z,.Right6025 6026 inc hl6027 inc hl6028 inc hl6029 inc hl6030 cp (hl)6031 jr z,.Left6033 6034 dec hl6035 dec hl6036 dec hl6037 or a6038 sbc hl,de6039 cp (hl)6040 jr z,.RightDown6042 6043 inc hl6044 inc hl6045 cp (hl)6046 jr z,.LeftDown6048 6049 add hl,de6050 add hl,de6051 cp (hl)6052 jr z,.LeftUp6054 6055 dec hl6056 dec hl6057 cp (hl)6058 jr z,.RightUp6060 .RightUp:6061 ld b,26062 ret6064 .LeftUp:6065 ld b,86066 ret6067 6068 .LeftDown:6069 ld b,66070 ret6072 .RightDown:6073 ld b,46074 ret6076 .Left:6077 ld b,76078 ret6080 .Right:6081 ld b,36082 ret6083 6084CheckSwitchToNextMonster:6085 ld a,(SwitchToNextMonster?)6086 or a6087 ret z6088 inc a6089 ld (SwitchToNextMonster?),a6090 cp 3 6091 ld a,06092 ld (MonsterAnimationSpeed),a6093 ld (MonsterAnimationStep),a6094 ret c6095 xor a6096 ld (SwitchToNextMonster?),a6098 call EndSpellSelected6099 call SetCurrentActiveMOnsterInIX6100 call Set255WhereMonsterStandsInBattleFieldGrid6102 6103 ld a,(activepage)6104 ld (TransparantImageBattleRecoverySprite+sPage),a6105 ld a,26106 ld (TransparantImageBattleRecoverySprite+dPage),a 6107 ld a,(ix+MonsterY)6108 ld (TransparantImageBattleRecoverySprite+sy),a 6109 ld (TransparantImageBattleRecoverySprite+dy),a 6110 ld a,(ix+MonsterX)6111 ld (TransparantImageBattleRecoverySprite+sx),a6112 ld (TransparantImageBattleRecoverySprite+dx),a6113 ld a,(ix+MonsterNY)6114 61156116 6117 ld (TransparantImageBattleRecoverySprite+ny),a6118 ld a,(ix+MonsterNX)6119 ld (TransparantImageBattleRecoverySprite+nx),a6121 ld hl,TransparantImageBattleRecoverySprite6122 call docopy61246127 .GoToNextActiveMonster:6128 ld a,(HandleRetaliation?)6129 or a6130 jr z,.EndHandleRetaliation6132 ld iy,(MonsterThatIsBeingAttacked)6133 ld (MonsterThatIsBeingAttacked),ix 6134 ld a,(ix+MonsterX)6135 ld (MonsterThatIsBeingAttackedX),a6136 ld a,(ix+MonsterNX)6137 ld (MonsterThatIsBeingAttackedNX),a6138 ld a,(ix+MonsterY)6139 ld (MonsterThatIsBeingAttackedY),a6140 ld a,(ix+MonsterNY)6141 ld (MonsterThatIsBeingAttackedNY),a6142 6143 call SetMonsterInIYAsActiveMonsterAndSetInIX6145 ld a,16146 ld (MoVeMonster?),a 6147 xor a6148 ld (MonsterAnimationSpeed),a6149 ld (MonsterAnimationStep),a6151 ld a,(ActiveMonsterAttackingDirection)6152 cp 12 6153 ld c,16 6154 jr z,.SetCounterAttackdirection6155 cp 13 6156 ld c,17 6157 jr z,.SetCounterAttackdirection6158 cp 14 6159 ld c,18 6160 jr z,.SetCounterAttackdirection6161 cp 16 6162 ld c,12 6163 jr z,.SetCounterAttackdirection6164 cp 17 6165 ld c,13 6166 jr z,.SetCounterAttackdirection6167 cp 18 6168 ld c,14 6169 jr z,.SetCounterAttackdirection6171 .SetCounterAttackdirection:6172 ld iy,MonsterMovementPath6173 ld (iy),c 6174 jr .EndFindNextActiveMonster6175 .EndHandleRetaliation:6176 call FindNextActiveMonster 6177 .EndFindNextActiveMonster:6179 6182 ld a,(activepage)6183 xor 16184 ld (EraseMonster+dPage),a6185 ld a,36186 ld (EraseMonster+sPage),a6187 6188 ld a,(ix+MonsterYPrevious)6189 ld (EraseMonster+sy),a 6190 ld (EraseMonster+dy),a6192 ld a,(ix+MonsterXPrevious)6193 ld (EraseMonster+dx),a6194 ld (EraseMonster+sx),a6196 ld a,(ix+MonsterNXPrevious)6197 ld (EraseMonster+nx),a6198 ld a,(ix+MonsterNYPrevious)6199 62006201 6202 ld (EraseMonster+ny),a6204 ld hl,EraseMonster6205 call docopy6207 6208 call RecoverOverwrittenMonstersSkipMonster06210 6211 ld a,(activepage)6212 xor 16213 ld (EraseMonster+sPage),a6214 ld a,26215 ld (EraseMonster+dPage),a6216 6217 ld hl,EraseMonster6218 call docopy6220 ld a,26221 ld (EraseMonster+sPage),a6223 ld a,(HandleRetaliation?)6224 or a6225 ret nz6229 6230 ld hl,(HeroThatGetsAttacked) 6231 ld a,l6232 or h6233 jp z,.EndDisableSurrenderAndRetreatButton 6235 ld hl,.RetreatButtonActive6236 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6237 ld bc,76238 ldir6240 ld hl,.SurrenderButtonActive6241 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6242 ld bc,76243 ldir6245 call SetCurrentActiveMOnsterInIX6246 6247 push ix6248 pop hl 6249 ld de,Monster76250 call CompareHLwithDE 6251 ld ix,(plxcurrentheroAddress) 6252 jr c,.HeroFound26253 ld ix,(HeroThatGetsAttacked) 6254 push ix6255 pop hl6256 ld a,l6257 or h6258 jp z,.EndDisableSurrenderAndRetreatButton 6259 .HeroFound2:6261 ld a,(ix+HeroStatus) 6262 cp 26263 jr z,.NotPossibleToRetreatOrSurrender6264 cp 2546265 jr z,.NotPossibleToRetreatOrSurrender6267 6268 ld a,(CurrentActiveMonster) 6269 cp 76270 ld a,(whichplayernowplaying?) 6271 jr c,.ActivePlayerFound6272 ld a,(PlayerThatGetsAttacked)6273 .ActivePlayerFound:6274 ld b,a6275 ld a,(Castle1+CastlePlayer)6276 cp b6277 jr z,.EndDisableSurrenderAndRetreatButton 6278 ld a,(Castle2+CastlePlayer)6279 cp b6280 jr z,.EndDisableSurrenderAndRetreatButton 6281 ld a,(Castle3+CastlePlayer)6282 cp b6283 jr z,.EndDisableSurrenderAndRetreatButton 6284 ld a,(Castle4+CastlePlayer)6285 cp b6286 jr z,.EndDisableSurrenderAndRetreatButton 6288 .NotPossibleToRetreatOrSurrender: 6289 ld hl,.RetreatButtonGrey6290 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6291 ld bc,76292 ldir6294 ld hl,.SurrenderButtonGrey6295 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6296 ld bc,76297 ldir6298 .EndDisableSurrenderAndRetreatButton:6302 6303 ld hl,.WaitButtonActive6304 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6305 ld bc,76306 ldir6308 call SetCurrentActiveMOnsterInIX6309 ld a,(ix+MonsterStatus) 6310 and %0111 11116311 cp 1 6312 jr nz,.EndCheckWaitButton6314 ld hl,.WaitButtonGrey6315 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6316 ld bc,76317 ldir6318 .EndCheckWaitButton:6319 6320 6321 ld hl,.SpellBookButtonActive6322 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6323 ld bc,76324 ldir6326 6327 push ix6328 pop hl 6329 ld de,Monster76330 call CompareHLwithDE 6331 ld a,(LeftPlayerAlreadyCastSpellThisRound?)6332 jr c,.HeroFound6333 ld a,(RightPlayerAlreadyCastSpellThisRound?)6334 .HeroFound:6335 or a6336 ret z6338 ld hl,.SpellBookButtonGrey6339 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6340 ld bc,76341 ldir6342 ret6344.RetreatButtonGrey:6345 db %1100 0011 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 1286346.RetreatButtonActive:6347 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 1286349.SurrenderButtonGrey:6350 db %1100 0011 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 1286351.SurrenderButtonActive:6352 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 1286357.SpellBookButtonGrey:6358 db %1100 0011 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 1286359.SpellBookButtonActive:6360 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 6362.WaitButtonGrey:6363 db %1100 0011 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 1286364.WaitButtonActive:6365 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 1286366 6367 6368FindNextActiveMonster:6369 call SortMonstersOnTheirSpeed63716374 ld ix,MonstersSortedOnSpeed.LastMonster6375 ld b,TotalAmountOfMonstersOnBattleField - 1 6377 .LoopUp:6378 ld l,(ix)6379 ld h,(ix+1)6380 6381 push hl6382 pop iy 6383 ld a,(iy+MonsterHP)6384 or a6385 jr z,.FindNext6388 push ix6389 push iy6390 pop ix6391 push bc6392 ld b,hypnosisSpellNumber 6393 call CheckPresenceStatusEffect 6394 pop bc6395 pop ix6396 jr z,.FindNext6399 ld a,(iy+MonsterStatus) 6400 and %0111 1111 6401 jr z,.MonsterFound6403 .FindNext:6404 dec ix6405 dec ix6406 djnz .LoopUp6408 6409 inc ix6410 inc ix6411 ld b,TotalAmountOfMonstersOnBattleField - 1 6413 .LoopDown:6414 ld l,(ix)6415 ld h,(ix+1)6416 6417 push hl6418 pop iy 6419 ld a,(iy+MonsterHP)6420 or a6421 jr z,.FindNext26422 ld a,(iy+MonsterStatus) 6423 and %0111 11116424 cp 1 6425 jr z,.MonsterFound6427 .FindNext2:6428 inc ix6429 inc ix6430 djnz .LoopDown6432 6434 call ReduceDurationStatusEffectsMonsters6436 ld a,MonsterStatusEnabled6437 ld (Monster1+MonsterStatus),a6438 ld (Monster2+MonsterStatus),a6439 ld (Monster3+MonsterStatus),a6440 ld (Monster4+MonsterStatus),a6441 ld (Monster5+MonsterStatus),a6442 ld (Monster6+MonsterStatus),a6443 ld (Monster7+MonsterStatus),a6444 ld (Monster8+MonsterStatus),a6445 ld (Monster9+MonsterStatus),a6446 ld (Monster10+MonsterStatus),a6447 ld (Monster11+MonsterStatus),a6448 ld (Monster12+MonsterStatus),a6449 xor a6450 ld (LeftPlayerAlreadyCastSpellThisRound?),a6451 ld (RightPlayerAlreadyCastSpellThisRound?),a6452 ld a,5 6453 ld (BattleTextQ),a6454 ld a,26455 ld (SetBattleText?),a 6456 ld a,(BattleRound)6457 inc a6458 ld (BattleRound),a6459 ld (BattleTextQ+1),a6460 jp FindNextActiveMonster6462 .MonsterFound:6463 SetMonsterInIYAsActiveMonsterAndSetInIX:6464 6465 push iy6466 pop de 6467 6468 ld hl,Monster1 | call CompareHLwithDE | ld a,01 | jr z,.CurrentActiveMonsterFound6469 ld hl,Monster2 | call CompareHLwithDE | ld a,02 | jr z,.CurrentActiveMonsterFound6470 ld hl,Monster3 | call CompareHLwithDE | ld a,03 | jr z,.CurrentActiveMonsterFound6471 ld hl,Monster4 | call CompareHLwithDE | ld a,04 | jr z,.CurrentActiveMonsterFound6472 ld hl,Monster5 | call CompareHLwithDE | ld a,05 | jr z,.CurrentActiveMonsterFound6473 ld hl,Monster6 | call CompareHLwithDE | ld a,06 | jr z,.CurrentActiveMonsterFound6474 ld hl,Monster7 | call CompareHLwithDE | ld a,07 | jr z,.CurrentActiveMonsterFound6475 ld hl,Monster8 | call CompareHLwithDE | ld a,08 | jr z,.CurrentActiveMonsterFound6476 ld hl,Monster9 | call CompareHLwithDE | ld a,09 | jr z,.CurrentActiveMonsterFound6477 ld hl,Monster10 | call CompareHLwithDE | ld a,10 | jr z,.CurrentActiveMonsterFound6478 ld hl,Monster11 | call CompareHLwithDE | ld a,11 | jr z,.CurrentActiveMonsterFound6479 ld hl,Monster12 | call CompareHLwithDE | ld a,12 | jr z,.CurrentActiveMonsterFound6481 .CurrentActiveMonsterFound:6483 6490 ld (CurrentActiveMonster),a6492 ld a,16493 ld (SetMonsterInBattleFieldGrid?),a6494 call SetCurrentActiveMOnsterInIX64966499 ret6500 6501 6502RecoverOverwrittenMonstersHard:6503 exx6504 ld hl,OrderOfMonstersFromHighToLow6505 ld b,TotalAmountOfMonstersOnBattleField6507 .loop:6508 ld e,(hl)6509 inc hl6510 ld d,(hl)6511 inc hl6512 push de6513 pop iy 6514 6515 exx6516 call RecoverOverwrittenMonsters.GoRecoverHard6517 exx6518 djnz .loop6519 ret6521RecoverOverwrittenMonstersSkipMonster0:6522 exx6523 ld hl,OrderOfMonstersFromHighToLow + 26524 ld b,TotalAmountOfMonstersOnBattleField - 1 6526 .loop:6527 ld e,(hl)6528 inc hl6529 ld d,(hl)6530 inc hl6531 push de6532 pop iy 6533 6534 exx6535 call RecoverOverwrittenMonsters.GoRecoverHard6536 exx6537 djnz .loop6538 ret6540RecoverOverwrittenMonsters:6541 exx6542 ld hl,OrderOfMonstersFromHighToLow + 26543 ld b,TotalAmountOfMonstersOnBattleField - 1 6545 .loop:6546 ld e,(hl)6547 inc hl6548 ld d,(hl)6549 inc hl6550 push de6551 pop iy 6552 6553 exx6554 call .GoRecover6555 exx6556 djnz .loop6557 ret6559 .GoRecover:6560 6561 ld a,(iy+MonsterY) 6562 add a,(iy+MonsterNY)6563 ld b,a6564 ld a,(ix+MonsterY) 6565 add a,(ix+MonsterNY) 6566 cp b6567 ret nc6568 .GoRecoverHard:6570 6571 push ix6572 pop hl6573 push iy6574 pop de6575 call CompareHLwithDE6576 ret z6578 6580 ld a,(ix+MonsterX) 6581 add a,(ix+MonsterNX)6582 sub (iy+MonsterX) 6583 ret c6584 ret z6586 6587 ld a,(iy+MonsterX) 6588 add a,(iy+MonsterNX)6589 sub (ix+MonsterX) 6590 ret c6591 ret z6593 6594 ld a,(ix+MonsterY) 6595 add a,(ix+MonsterNY)6596 sub (iy+MonsterY) 6597 ret c6598 ret z6600 6601 ld a,(iy+MonsterY) 6602 add a,(iy+MonsterNY)6603 sub (ix+MonsterY) 6604 ret c6605 ret z66076609 6610 ld a,(ix+MonsterX) 6611 add a,(ix+MonsterNX)6612 sub (iy+MonsterX) 6613 cp (ix+MonsterNX)6614 jr c,.NXFoundLeft6616 6617 ld a,(iy+MonsterX) 6618 add a,(iy+MonsterNX)6619 sub (ix+MonsterX) 6620 cp (ix+MonsterNX)6621 jr c,.NXFoundRight6623 .NXFoundMiddle:6624 ld a,(ix+MonsterNX) 6625 cp (iy+MonsterNX)6626 jr c,.go46627 jr z,.go46628 ld a,(iy+MonsterNX)6629 .go4:6630 srl a 6631 ld c,a 6632 ld a,(ix+MonsterX) 6633 sub (iy+MonsterX) 6634 srl a 6635 ld e,a 6636 jr .NxSet6638 .NXFoundRight:6639 srl a 6640 ld c,a 6641 ld a,(iy+MonsterNX) 6642 srl a 6643 sub a,c 6644 ld e,a 6645 jr .NxSet6647 .NXFoundLeft:6648 cp (iy+MonsterNX)6649 jr c,.go6650 jr z,.go6651 ld a,(iy+MonsterNX)6652 .go: 6653 srl a 6654 ld c,a 6655 ld e,00/2 6656 .NxSet:6658 6659 ld a,(ix+MonsterY) 6660 add a,(ix+MonsterNY)6661 sub (iy+MonsterY) 6662 cp (ix+MonsterNY)6663 jr c,.NYFoundTop6665 6666 ld a,(iy+MonsterY) 6667 add a,(iy+MonsterNY)6668 sub (ix+MonsterY) 6669 cp (ix+MonsterNY)6670 jr c,.NYFoundBottom6672 .NYFoundMiddle:6673 ld a,(ix+MonsterNY) 6674 cp (iy+MonsterNY)6675 jr c,.go56676 jr z,.go56677 ld a,(iy+MonsterNY)66786679 .go5:6681 66826683 ld b,a 6685 ld a,(ix+MonsterY) 6686 sub (iy+MonsterY) 6687 srl a 6688 ld d,a 6689 jr .NYSet6691 .NYFoundBottom:6692 ld b,a 6693 ld a,(iy+MonsterNY) 6694 sub a,b 6695 srl a 6696 ld d,a 6697 jr .NYSet6699 .NYFoundTop:6700 cp (iy+MonsterNY)6701 jr c,.go26702 jr z,.go26703 ld a,(iy+MonsterNY)6704 .go2:6705 ld b,a 6706 ld d,00/2 6709 .NYSet:67136716 671767246726 ld l,(iy+MonsterSYSX+0) 6727 ld h,(iy+MonsterSYSX+1) 6731 6732 ld a,l 6733 add a,e 6734 ld l,a6736 6737 ld a,h 6738 add a,d 6739 ld h,a6741 ld a,(iy+MonsterBlock+0) 6743 ld (AddressToWriteFrom),hl6744 ld (NXAndNY),bc6745 ld (BlockToReadFrom),a6747 ld a,(activepage)6748 xor 16749 ld (TransparantImageBattle+dPage),a6751 ld a,(iy+MonsterY)6752 6753 add a,d 6754 add a,d6755 6756 ld (TransparantImageBattle+dy),a 6757 ld a,(iy+MonsterX)6759 add a,e 6760 add a,e6762 ld (TransparantImageBattle+dx),a6764 ld bc,(NXAndNY)6765 ld a,c6766 add a,a6767 ld (TransparantImageBattle+nx),a6768 ld a,b6769 ld (TransparantImageBattle+ny),a6770 ld a,1886771 ld (TransparantImageBattle+sy),a 6773 ld a,(TransparantImageBattle+sx)6774 add a,64 6775 ld (TransparantImageBattle+sx),a6776 ld de,$8000 + (188*128) + (000/2) - 128 6777 jr z,.DestinationAddressInPage3Set6778 sub a,646779 ld de,$8000 + (188*128) + (064/2) - 128 6780 jr z,.DestinationAddressInPage3Set6781 sub a,646782 ld de,$8000 + (188*128) + (128/2) - 128 6783 jr z,.DestinationAddressInPage3Set6784 sub a,646785 ld de,$8000 + (188*128) + (192/2) - 128 6786 .DestinationAddressInPage3Set:6787 ld (AddressToWriteTo),de 6789 call CopyRamToVramPage3ForBattleEngine 6791 ld a,(RepairAmountAboveMonster?)6792 or a6793 jr z,.EndRepairAmountAboveMonster6795 6796 push ix6797 pop hl6798 ld de,Monster06799 call CompareHLwithDE6800 push ix6801 push iy6802 pop ix6803 call nz,SetAmountUnderMonster6804 pop ix6805 6807 .EndRepairAmountAboveMonster:6809 ld hl,TransparantImageBattle6810 jp docopy6812 6818PutMonster:6819 ld a,(activepage)6820 xor 16821 ld (TransparantImageBattle+dPage),a6823 ld a,(ix+MonsterY)6824 ld (TransparantImageBattle+dy),a 6825 ld a,(ix+MonsterX)6826 ld (TransparantImageBattle+dx),a6828 ld bc,(NXAndNY)6829 ld a,c6830 add a,a6831 ld (TransparantImageBattle+nx),a6832 ld a,b6833 ld (TransparantImageBattle+ny),a6834 ld a,1886835 ld (TransparantImageBattle+sy),a 6837 ld a,(TransparantImageBattle+sx)6838 add a,64 6839 ld (TransparantImageBattle+sx),a6840 ld de,$8000 + (188*128) + (000/2) - 128 6841 jr z,.DestinationAddressInPage3Set6842 sub a,646843 ld de,$8000 + (188*128) + (064/2) - 128 6844 jr z,.DestinationAddressInPage3Set6845 sub a,646846 ld de,$8000 + (188*128) + (128/2) - 128 6847 jr z,.DestinationAddressInPage3Set6848 sub a,646849 ld de,$8000 + (188*128) + (192/2) - 128 6850 .DestinationAddressInPage3Set:6851 ld (AddressToWriteTo),de 6853 call CopyRamToVramPage3ForBattleEngine 6855 ld hl,TransparantImageBattle6856 jp docopy6858 6863StoreSYSXNYNXAndBlock:6864 ld l,(ix+MonsterSYSX+0) 6865 ld h,(ix+MonsterSYSX+1) 68676868 ld a,(ix+MonsterNX) 6869 srl a6870 ld c,a68726873 ld b,(ix+MonsterNY)6874 6875 ld a,(ix+MonsterBlock+0) 6876 ld (AddressToWriteFrom),hl6877 ld (NXAndNY),bc6878 ld (BlockToReadFrom),a6879 ret6893SetCurrentMonsterInBattleFieldGrid: 6894 ld a,(SetMonsterInBattleFieldGrid?)6895 dec a6896 ret m6897 ld (SetMonsterInBattleFieldGrid?),a6899 call ClearBattleFieldGrid 6900 call SetCurrentActiveMOnsterInIX6901 call FindMonsterInBattleFieldGrid 6902 call Set001AtCurrentMonstersLocation6903 call Set254TilesWHereMonsterCantMoveToDueToItsNX6904 call SetAllNumbersInGrid6905 jp FillRemaining000sWith254 6907FillRemaining000sWith254: 6908 ld a,0006909 ld hl,BattleFieldGrid-16910 ld b,LenghtBattleField*HeightBattleField6911 .loop:6912 inc hl6913 cp a,(hl)6914 jr z,.SetTo2546915 djnz .loop6916 ret6917 .SetTo254:6918 ld (hl),2546919 djnz .loop 6920 ret6922Set001AtCurrentMonstersLocation:6923 6924 ld a,(ix+MonsterNX)6925 ld (hl),001 6926 cp 1769276928 ret c6929 6930 inc hl6931 inc hl6932 ld (hl),000 6933 cp 336934 ret c69356936 inc hl6937 inc hl6938 ld (hl),000 6939 cp 5769406941 ret c6942 inc hl6943 inc hl6944 ld (hl),000 6946 ret6948ClearBattleFieldGrid:6949 ld a,2556950 ld hl,BattleFieldGrid-16951 ld b,LenghtBattleField*HeightBattleField6952 .loop:6953 inc hl6954 cp a,(hl)6955 jr nz,.SetTo0006956 djnz .loop6957 ret6958 .SetTo000:6959 ld (hl),0006960 djnz .loop 6961 ret6963Set254TilesWHereMonsterCantMoveToDueToItsNX:69646967 ld b,LenghtBattleField*HeightBattleField - 36968 ld hl,BattleFieldGrid+36969 .loop:6970 ld a,(hl)6971 cp 2556972 call z,.Found2556973 inc hl6974 djnz .loop6975 ret6976 6977 .Found255:6978 ld a,(ix+MonsterNX)6979 cp 17 6980 ret c6982 6983 dec hl6984 dec hl6985 ld a,(hl)6986 or a6987 jr nz,.EndCheck06988 ld (hl),2546989 .EndCheck0:6990 inc hl6991 inc hl6993 ld a,(ix+MonsterNX)6994 cp 33 6995 ret c6997 6998 dec hl6999 dec hl7000 dec hl7001 dec hl7002 ld a,(hl)7003 or a7004 jr nz,.EndCheck0b7005 ld (hl),2547006 .EndCheck0b:7007 inc hl7008 inc hl7009 inc hl7010 inc hl7012 ld a,(ix+MonsterNX)7013 cp 57 7014 ret c 7016 7017 dec hl7018 dec hl7019 dec hl7020 dec hl7021 dec hl7022 dec hl7023 ld a,(hl)7024 or a7025 jr nz,.EndCheck0c7026 ld (hl),2547027 .EndCheck0c:7028 inc hl7029 inc hl7030 inc hl7031 inc hl7032 inc hl7033 inc hl7034 ret7036SetAllNumbersInGrid:7037 ld e,000 7038 ld a,001 7039 ld b,17 7040 ex af,af'7042 .loop:7043 ex af,af'7044 inc e 7045 inc a 7046 ex af,af'7048 exx7049 call .GoNextNumber7050 exx7051 djnz .loop7052 ret7054.GoNextNumber:7055 ld b,-1 7056 ld c,0 7057 ld d,07059 .MainLoop:7060 call .GoCheckNextPosition70617063 ld hl,BattleFieldGrid7064 ld e,b7065 add hl,de7066 ld e,c7067 add hl,de 7069 ld a,(hl)7070 exx7071 cp e 7072 exx7073 jp nz,.MainLoop7075 call .SetNumberIn6Directions 7076 jp .MainLoop7078.GoCheckNextPosition:7079 ld a,b 7080 inc a7081 ld b,a 7082 cp LenghtBattleField7083 ret nz7084 7085 ld b,0 7087 ld a,c 7088 add a,LenghtBattleField7089 ld c,a 7090 cp HeightBattleField*LenghtBattleField7091 ret nz7093 pop af7094 ret7095 7096.SetNumberIn6Directions:7097 7099 push bc7100 call .Direction17101 pop bc7102 7103 push bc7104 call .Direction27105 pop bc7106 7107 push bc7108 call .Direction37109 pop bc7110 7111 push bc7112 call .Direction47113 pop bc7114 7115 push bc7116 call .Direction57117 pop bc7118 7119 push bc7120 call .Direction67121 pop bc 7122 ret7124.SetnumberInHL:7125 ld a,c7126.SetnumberInHLHeightAlreadyInA:7127 add a,b7128 ld e,a7130 ld hl,BattleFieldGrid7131 add hl,de 7132 7133 ld a,(hl)7134 or a7135 ret nz7136 ex af,af'7137 ld (hl),a7138 ex af,af'7139 ret7141.Direction6: 7142 inc b 7143 ld a,b7144 cp LenghtBattleField7145 ret z7147 ld a,c7148 add a,LenghtBattleField7149 cp HeightBattleField*LenghtBattleField7150 ret z7151 jp .SetnumberInHLHeightAlreadyInA7153.Direction5: 7154 dec b 7155 ret m7157 ld a,c7158 add a,LenghtBattleField7159 cp HeightBattleField*LenghtBattleField7160 ret z7161 jp .SetnumberInHLHeightAlreadyInA7163.Direction4: 7164 inc b 7165 ld a,b7166 cp LenghtBattleField7167 ret z7168 inc b 7169 ld a,b7170 cp LenghtBattleField7171 ret z7172 jp .SetnumberInHL7174.Direction3: 7175 dec b 7176 ret m7177 dec b 7178 ret m7179 jp .SetnumberInHL7181.Direction2: 7182 inc b 7183 ld a,b7184 cp LenghtBattleField7185 ret z7186 7187 ld a,c7188 sub a,LenghtBattleField7189 ret c7190 jp .SetnumberInHLHeightAlreadyInA7192.Direction1: 7193 dec b 7194 ret m7196 ld a,c7197 sub a,LenghtBattleField7198 ret c7199 jp .SetnumberInHLHeightAlreadyInA7201FindMonsterInBattleFieldGrid:7202 ld hl,BattleFieldGrid7204 ld a,(ix+MonsterY)7205 sub 056 + 167206 add (ix+MonsterNY)7207 srl a 7208 srl a 7209 srl a 7210 srl a 7211 jr z,.SetX7212 7213 ld b,a7214 ld de,LenghtBattleField7215 .loop:7216 add hl,de7217 djnz .loop7218 7219 .SetX:7220 ld a,(ix+MonsterX)7221 sub a,127222 srl a 7223 srl a 7224 srl a 7225 ret z7227 ld d,07228 ld e,a7229 add hl,de7230 ret7232FindCursorInBattleFieldGrid: 7233 ld hl,BattleFieldGrid7235 ld a,(Monster0+MonsterY)7236 sub a,39 + 167237 srl a 7238 srl a 7239 srl a 7240 srl a 7241 jr z,.SetX7242 7243 ld b,a7244 ld de,LenghtBattleField7245 .loop:7246 add hl,de7247 djnz .loop7248 7249 .SetX:7250 ld a,(Monster0+MonsterX)7251 sub a,127252 srl a 7253 srl a 7254 srl a 7255 ret z7257 ld d,07258 ld e,a7259 add hl,de7260 ret7262CheckIsCursorOnATileThisFrame:7263 xor a7264 ld (IsCursorOnATileThisFrame?),a7266 ld a,(Monster0+MonsterY) 7267 cp 24 + 16 7268 ret c7269 cp 183 7270 ret nc72727273 ld a,(Monster0+MonsterX)7274 cp $047275 ret z7276 cp $fc7277 ret z72787279 cp $ec7280 ret z7281 cp $f47282 ret z7284 ld a,(spat+1)7285 cp $05 7286 ret c7287 cp $ec 7288 ret nc7289 7290 ld a,(Monster0+MonsterY)7291 sub a,39 + 167292 srl a 7293 srl a 7294 srl a 7295 srl a 7296 bit 0,a7297 jr nz,.EndCheckLeftExceptions7298 ld a,(spat+1)7299 cp $0b 7300 ret c7301 .EndCheckLeftExceptions:7302 7303 ld a,(Monster0+MonsterY)7304 sub a,39 + 167305 srl a 7306 srl a 7307 srl a 7308 srl a 7309 bit 0,a7310 jr z,.EndCheckRightExceptions7311 ld a,(spat+1)7312 cp $e6 7313 ret nc7314 .EndCheckRightExceptions:7316 ld a,17317 ld (IsCursorOnATileThisFrame?),a7318 ret7319 7320CheckWasCursorOnATilePreviousFrame:7321 xor a7322 ld (WasCursorOnATilePreviousFrame?),a7324 ld a,(Monster0+MonsterYPrevious)7325 cp 24 + 16 7326 ret c7327 cp 183 + 16 7328 ret nc7330 ld a,17331 ld (WasCursorOnATilePreviousFrame?),a7332 ret7334SetcursorWhenGridTileIsActive:7335 call .goSetCursorSprite7337 ld hl,(BufferCursorSpriteChar)7338 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl7339 ld hl,(BufferCursorSpriteCol)7340 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl7341 ret7343 .goSetCursorSprite:7344 ld a,(IsCursorOnATileThisFrame?)7345 or a7346 jp z,.SetHand7348 ld a,(SpellSelected?)7349 or a7350 jp nz,SpellSelectedHandleCursor7351 73527353 call SetMonsterTableInIY 7354 call SetTotalMonsterSpeedInHL 7355 ld c,l7356 inc c 7357 inc c735973627365 call FindCursorInBattleFieldGrid7366 ld a,(hl)7367 cp 1 7368 jr z,.ProhibitionSign7369 cp c 7370 jr nc,.ProhibitionSign7373 ld a,(ix+MonsterNX)7374 cp 177375 jr c,.SetBoots7376 cp 337377 jr c,.MonsterIs2TilesWide7378 cp 577379 jr c,.MonsterIs3TilesWide7381 .MonsterIs4TilesWide:7382 inc hl7383 inc hl7384 ld a,(hl)7385 cp 2557386 jr z,.ProhibitionSign7387 inc hl7388 inc hl7389 ld a,(hl)7390 cp 2557391 jr z,.ProhibitionSign7392 inc hl7393 inc hl7394 ld a,(hl)7395 cp 2557396 jr z,.ProhibitionSign7397 jr .SetBoots7399 .MonsterIs3TilesWide:7400 inc hl7401 inc hl7402 ld a,(hl)7403 cp 2557404 jr z,.ProhibitionSign7405 inc hl7406 inc hl7407 ld a,(hl)7408 cp 2557409 jr z,.ProhibitionSign7410 jr .SetBoots7412 .MonsterIs2TilesWide:7413 inc hl7414 inc hl7415 ld a,(hl)7416 cp 2557417 jr z,.ProhibitionSign7418 jr .SetBoots7420 .ProhibitionSign:7421 call .CheckPointerOnEnemy7422 7423 ld hl,CursorProhibitionSign7424 ld (BufferCursorSpriteChar),hl7425 ld hl,SpriteProhibitionSignColor7426 ld (BufferCursorSpriteCol),hl7427 ret7428 7429 .SetBoots:7430 ld hl,CursorBootsOld7431 ld (BufferCursorSpriteChar),hl7432 ld hl,SpriteColCursorSprites7433 ld (BufferCursorSpriteCol),hl7434 ret7436 .SetHand:7437 ld hl,CursorHand7438 ld (BufferCursorSpriteChar),hl7439 ld hl,SpriteColCursorSprites7440 ld (BufferCursorSpriteCol),hl7441 ret7443 .CheckPointerOnEnemy:7444 ld a,(CurrentActiveMonster)7445 cp 77446 jr nc,.RightPlayerIsActive7448 .LeftPlayerIsActive:7449 ld ix,Monster77450 call .CheckMonster7451 ld ix,Monster87452 call .CheckMonster7453 ld ix,Monster97454 call .CheckMonster7455 ld ix,Monster107456 call .CheckMonster7457 ld ix,Monster117458 call .CheckMonster7459 ld ix,Monster127460 call .CheckMonster7461 ret7463 .RightPlayerIsActive:7464 ld ix,Monster17465 call .CheckMonster7466 ld ix,Monster27467 call .CheckMonster7468 ld ix,Monster37469 call .CheckMonster7470 ld ix,Monster47471 call .CheckMonster7472 ld ix,Monster57473 call .CheckMonster7474 ld ix,Monster67475 call .CheckMonster7476 ret7478 .CheckMonster:7486 call .Check1TileMonsterStandsOn 7487 7488 ld a,(ix+MonsterNX)7489 cp 177490 ret c7491 ld a,(Monster0+MonsterX)7492 ld c,a7493 ld a,(ix+MonsterX)7494 add a,167495 call .Check7497 7498 ld a,(ix+MonsterNX)7499 cp 337500 ret c7501 ld a,(Monster0+MonsterX)7502 ld c,a7503 ld a,(ix+MonsterX)7504 add a,327505 call .Check7507 7508 ld a,(ix+MonsterNX)7509 cp 577510 ret c7511 ld a,(Monster0+MonsterX)7512 ld c,a7513 ld a,(ix+MonsterX)7514 add a,487515 call .Check7516 ret7517 .Check1TileMonsterStandsOn:7527 7528 ld a,(Monster0+MonsterX)7529 ld c,a7530 ld a,(ix+MonsterX)7532 .Check:7533 cp c7534 ret nz7536 ld a,(ix+MonsterY)7537 ld c,a7538 ld a,(ix+MonsterNY)7539 add a,c7540 ld c,a7542 ld a,(Monster0+MonsterY)7543 add a,0177544 cp c7545 ret nz7547 pop af7548 pop af7549 pop af7551 ld (MonsterThatIsBeingAttacked),ix7552 ld a,(ix+MonsterX)7553 ld (MonsterThatIsBeingAttackedX),a7554 ld a,(ix+MonsterNX)7555 ld (MonsterThatIsBeingAttackedNX),a7556 ld a,(ix+MonsterY)7557 ld (MonsterThatIsBeingAttackedY),a7558 ld a,(ix+MonsterNY)7559 ld (MonsterThatIsBeingAttackedNY),a7561 7562 call SetCurrentActiveMOnsterInIX7563 call SetMonsterTableInIY 7564 ld a,(iy+MonsterTableSpecialAbility)7565 cp RangedMonster7566 jp z,RangedMonsterCheck7568 call .PointerIsOnEnemyCheckIfPossibleToAttack7570 7572 ld hl,CursorSwordLeft7573 call .CheckSetSwordLeft7574 ld hl,CursorSwordLeftDown7575 call .CheckSetSwordLeftDown7576 ld hl,CursorSwordLeftUp7577 call .CheckSetSwordLeftUp7578 ld hl,CursorSwordRight7579 call .CheckSetSwordRight7580 ld hl,CursorSwordRightDown7581 call .CheckSetSwordRightDown7582 ld hl,CursorSwordRightUp7583 call .CheckSetSwordRightUp7585 .SetProhibitionSign:7586 ld hl,CursorProhibitionSign7587 ld (BufferCursorSpriteChar),hl7588 ld hl,SpriteProhibitionSignColor7589 ld (BufferCursorSpriteCol),hl7590 ret759276067623 .PointerIsOnEnemyCheckIfPossibleToAttack:7624 7626 ld a,(Monster0+MonsterY) 7627 sub a,39 + 167628 srl a 7629 srl a 7630 srl a 7631 srl a 7632 bit 0,a7633 jr z,.EvenRow7634 7635 .OddRow:76367645 ld a,(spat+1)7646 and %0000 11107647 cp %0000 01107648 jp z,.SetSwordRight7649 cp %0000 10007650 jp z,.SetSwordRight7651 cp %0000 10107652 jp z,.SetSwordRight7653 cp %0000 11007654 jp z,.SetSwordRight7655 jp .SetSwordLeft7656 7657 .EvenRow:76587667 ld a,(spat+1)7668 and %0000 11107669 cp %0000 11007670 jp z,.SetSwordRight7671 cp %0000 11107672 jp z,.SetSwordRight7673 cp %0000 00007674 jp z,.SetSwordRight7675 cp %0000 00107676 jp z,.SetSwordRight7677 jp .SetSwordLeft7679 .SetSwordLeft:76807689 ld a,(spat)7690 and %0000 11107691 ld hl,CursorSwordLeftDown 7692 cp %0000 00107693 jp z,.CheckSetSwordLeftDown7694 cp %0000 01007695 jp z,.CheckSetSwordLeftDown7696 cp %0000 01107697 jp z,.CheckSetSwordLeftDown7698 ld hl,CursorSwordLeft 7699 cp %0000 10007700 jp z,.CheckSetSwordLeft7701 cp %0000 10107702 jp z,.CheckSetSwordLeft7703 ld hl,CursorSwordLeftUp 7704 jp .CheckSetSwordLeftUp77057711 7712 7713 .SetSwordRight:77147723 ld a,(spat)7724 and %0000 11107725 ld hl,CursorSwordRightDown 7726 cp %0000 00107727 jp z,.CheckSetSwordRightDown7728 cp %0000 01007729 jp z,.CheckSetSwordRightDown7730 cp %0000 01107731 jp z,.CheckSetSwordRightDown7732 ld hl,CursorSwordRight 7733 cp %0000 10007734 jp z,.CheckSetSwordRight7735 cp %0000 10107736 jp z,.CheckSetSwordRight7737 ld hl,CursorSwordRightUp 7738 jp .CheckSetSwordRightUp77397746 .CheckSetSwordLeftDown:7747 ld (BufferCursorSpriteChar),hl7748 ld hl,SpriteColCursorSprites7749 ld (BufferCursorSpriteCol),hl7751 7752 call FindCursorInBattleFieldGrid7753 inc hl7754 ld de,LenghtBattleField7755 or a7756 sbc hl,de7757 jp .CheckTile7759 .CheckSetSwordLeftUp:7760 ld (BufferCursorSpriteChar),hl7761 ld hl,SpriteColCursorSprites7762 ld (BufferCursorSpriteCol),hl7764 7765 call FindCursorInBattleFieldGrid7766 inc hl7767 ld de,LenghtBattleField7768 add hl,de7769 jp .CheckTile7771 .CheckSetSwordRightDown:7772 ld (BufferCursorSpriteChar),hl7773 ld hl,SpriteColCursorSprites7774 ld (BufferCursorSpriteCol),hl7776 7777 call FindCursorInBattleFieldGrid7778 dec hl7779 ld de,LenghtBattleField7780 or a7781 sbc hl,de7782 ld a,(hl)7783 jp .CheckTile7785 .CheckSetSwordRightUp:7786 ld (BufferCursorSpriteChar),hl7787 ld hl,SpriteColCursorSprites7788 ld (BufferCursorSpriteCol),hl7790 7791 call FindCursorInBattleFieldGrid7792 dec hl7793 ld de,LenghtBattleField7794 add hl,de7795 jp .CheckTile7797 .CheckSetSwordLeft:7798 ld (BufferCursorSpriteChar),hl7799 ld hl,SpriteColCursorSprites7800 ld (BufferCursorSpriteCol),hl7802 7803 call FindCursorInBattleFieldGrid7804 inc hl7805 inc hl7806 jp .CheckTile7808 .CheckSetSwordRight:7809 ld (BufferCursorSpriteChar),hl7810 ld hl,SpriteColCursorSprites7811 ld (BufferCursorSpriteCol),hl7813 7814 call FindCursorInBattleFieldGrid7815 dec hl7816 dec hl7823 call SetCurrentActiveMOnsterInIX7824 ld a,(ix+MonsterNX)7825 cp 177826 jp c,.CheckTile7827 dec hl7828 dec hl7829 cp 337830 jp c,.CheckTile7831 dec hl7832 dec hl7833 cp 577834 jp c,.CheckTile7835 dec hl7836 dec hl78447846 .CheckTile:7849 push hl7850 call SetCurrentActiveMOnsterInIX7851 call SetMonsterTableInIY 7852 call SetTotalMonsterSpeedInHL 7853 ld c,l7854 inc c 7855 pop hl78577860 ld a,(hl)7861 cp c 7862 ret nc7863 7864 pop af7865 ret7866 7874RangedMonstersRange: equ 10 7875RangedMonsterCheck:7876 xor a7877 ld (IsThereAnyEnemyRightNextToActiveMonster?),a7879 7880 call SetCurrentActiveMOnsterInIX7881 ld a,(ix+MonsterY)7882 sub 0567883 add (ix+MonsterNY)7884 srl a 7885 srl a 7886 srl a 7887 srl a 7888 ld e,a 7890 ld a,(ix+MonsterX)7891 sub a,127892 srl a 7893 srl a 7894 srl a 7895 ld d,a 7897 ld a,(CurrentActiveMonster)7898 cp 77899 jr nc,.RightPlayerIsActive7901 .LeftPlayerIsActive:7902 7903 ld iy,Monster77904 call .Check 7905 ld iy,Monster87906 call .Check7907 ld iy,Monster97908 call .Check7909 ld iy,Monster107910 call .Check7911 ld iy,Monster117912 call .Check7913 ld iy,Monster127914 call .Check7915 7916 ld iy,(MonsterThatIsBeingAttacked)7917 xor a7918 ld (MayRangedAttackBeRetaliated?),a 7919 jr .Check7921 .RightPlayerIsActive:7922 7923 ld iy,Monster17924 call .Check7925 ld iy,Monster27926 call .Check7927 ld iy,Monster37928 call .Check7929 ld iy,Monster47930 call .Check7931 ld iy,Monster57932 call .Check7933 ld iy,Monster67934 call .Check7935 7936 ld iy,(MonsterThatIsBeingAttacked)7937 xor a7938 ld (MayRangedAttackBeRetaliated?),a 7940 .Check:7941 ld a,(iy+MonsterHP)7942 or a7943 ret z 7944 7945 ld a,(iy+MonsterY)7946 sub 0567947 add (iy+MonsterNY)7948 srl a 7949 srl a 7950 srl a 7951 srl a 7952 ld l,a 7954 ld a,(iy+MonsterX)7955 sub a,127956 srl a 7957 srl a 7958 srl a 7959 ld h,a 7961 7965 7966 7968 7972 7973 push de7974 push hl7976 ld a,(ix+MonsterNX)7977 cp 177978 jr c,.RightSideActiveMonsterFound7979 inc d7980 inc d 7981 cp 337982 jr c,.RightSideActiveMonsterFound7983 inc d7984 inc d 7985 cp 577986 jr c,.RightSideActiveMonsterFound7987 inc d7988 inc d 7989 .RightSideActiveMonsterFound:7991 ld b,0 7992 ld c,0 7994 .loop:7995 inc b7996 7997 ld a,e 7998 cp l 7999 jr z,.SameY_MoveOnlyX8000 inc e 8001 jr c,.ymovedNowMoveX8002 dec e8003 dec e 8004 .ymovedNowMoveX:8005 ld a,d 8006 cp h 8007 inc d 8008 jr c,.loop 8009 dec d8010 dec d 8011 jr .loop8013 .SameY_MoveOnlyX: 8014 ld a,d 8015 cp h 8016 jr z,.End 8017 inc d8018 inc d 8019 jr c,.loop 8020 dec d8021 dec d8022 dec d8023 dec d 8024 jr .loop8025 .End:8027 pop hl8028 pop de8030 ld a,b8031 cp 28032 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow8033 8034 cp RangedMonstersRange8035 jr nc,.OutOfrange8036 ld c,1 8037 .OutOfrange:8039 8040 push de8042 ld a,(iy+MonsterNX)8043 cp 178044 jr c,.RightSideCheckingMonsterFound8045 inc h8046 inc h 8047 cp 338048 jr c,.RightSideCheckingMonsterFound8049 inc h8050 inc h 8051 cp 578052 jr c,.RightSideCheckingMonsterFound8053 inc h8054 inc h 8055 .RightSideCheckingMonsterFound:8057 ld b,0 8059 .loop2:8060 inc b8061 8062 ld a,e 8063 cp l 8064 jr z,.SameY_MoveOnlyX28065 inc e 8066 jr c,.ymovedNowMoveX28067 dec e8068 dec e 8069 .ymovedNowMoveX2:8070 ld a,d 8071 cp h 8072 inc d 8073 jr c,.loop28074 dec d8075 dec d 8076 jr .loop28078 .SameY_MoveOnlyX2: 8079 ld a,d 8080 cp h 8081 jr z,.End2 8082 inc d8083 inc d 8084 jr c,.loop28085 dec d8086 dec d8087 dec d8088 dec d 8089 jr .loop28090 .End2:8092 pop de8094 ld a,b8095 cp 28096 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow8097 8098 8099 ld a,28100 ld (BrokenArrow?),a 8102 ld a,(IsThereAnyEnemyRightNextToActiveMonster?)8103 or a8104 jp nz,SetcursorWhenGridTileIsActive.SetProhibitionSign8105 8106 ld a,b8107 cp 68108 jr c,.BowAndArrow 8110 bit 0,c 8111 jr nz,.BowAndArrow 8113 .BrokenArrow: 8114 ld hl,CursorBrokenArrow8115 ld (BufferCursorSpriteChar),hl8116 ld hl,SpriteColCursorSprites8117 ld (BufferCursorSpriteCol),hl8119 ld a,18120 ld (BrokenArrow?),a8121 ret8123 .EnemyIsRightNextToActiveMonsterSoBrokenArrow:8124 ld a,18125 ld (IsThereAnyEnemyRightNextToActiveMonster?),a8126 ld (MayRangedAttackBeRetaliated?),a8127 jr .BrokenArrow8129 .BowAndArrow:8130 ld hl,CursorBowAndArrow8131 ld (BufferCursorSpriteChar),hl8132 ld hl,SpriteColCursorSprites8133 ld (BufferCursorSpriteCol),hl8135 xor a8136 ld (BrokenArrow?),a8137 ret8139EndSpellSelectedAndSpellGetsSpellBubbled:8140 ld iy,SpellBubbleActivatedAndPoppedAnimation8141 call AnimateSpell8143EndSpellSelectedAndReduceManaCost:8144 call GetSelectedSpellCost 8145 ld e,a8146 ld d,08147 push de8149 call SetCurrentActiveMOnsterInIX8150 8151 push ix8152 pop hl 8153 ld de,Monster78154 call CompareHLwithDE 8155 ld ix,(plxcurrentheroAddress) 8156 ld hl,LeftPlayerAlreadyCastSpellThisRound?8157 jr c,.HeroFound8158 ld ix,(HeroThatGetsAttacked) 8159 ld hl,RightPlayerAlreadyCastSpellThisRound?8160 .HeroFound:8162 ld (hl),1 8164 ld hl,CheckSwitchToNextMonster.SpellBookButtonGrey8165 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)8166 ld bc,78167 ldir8169 8170 ld l,(ix+HeroMana)8171 ld h,(ix+HeroMana+1)8172 pop de8173 or a8174 sbc hl,de8175 ld (ix+HeroMana),l8176 ld (ix+HeroMana+1),h8178 ld a,1 8179 ld (SwitchToNextMonster?),a8181EndSpellSelected:8182 xor a8183 ld (SpellSelected?),a8184 ret8186SpellSelectedHandleCursor:8187 ld a,(Controls)8188 bit 5,a 8189 call nz,EndSpellSelected8190 8191 ld b,1 8192 ld a,(CurrentActiveMonster)8193 cp 78194 jr c,.FriendlyMonsterFound8195 ld b,0 8196 .FriendlyMonsterFound:8198 ld ix,Monster18199 call .CheckPointerOnCreature8200 ld ix,Monster28201 call .CheckPointerOnCreature8202 ld ix,Monster38203 call .CheckPointerOnCreature8204 ld ix,Monster48205 call .CheckPointerOnCreature8206 ld ix,Monster58207 call .CheckPointerOnCreature8208 ld ix,Monster68209 call .CheckPointerOnCreature8211 ld a,b8212 xor 18213 ld b,a 8215 ld ix,Monster78216 call .CheckPointerOnCreature8217 ld ix,Monster88218 call .CheckPointerOnCreature8219 ld ix,Monster98220 call .CheckPointerOnCreature8221 ld ix,Monster108222 call .CheckPointerOnCreature8223 ld ix,Monster118224 call .CheckPointerOnCreature8225 ld ix,Monster128226 call .CheckPointerOnCreature8227 8228 8229 call GetSelectedSpellCastableOn 8230 cp 38231 jp z,.SetSpriteSpellbook8232 cp 58233 jp z,.CheckFreeHex8235 .SetSpriteProhibitionSign:8236 ld hl,CursorProhibitionSign8237 ld (BufferCursorSpriteChar),hl8238 ld hl,SpriteProhibitionSignColor8239 ld (BufferCursorSpriteCol),hl8240 ret8242 .CheckFreeHex:8243 call SetCurrentActiveMOnsterInIX8244 call FindCursorInBattleFieldGrid8245 ld a,(hl)8246 cp 255 8247 jr z,.SetSpriteProhibitionSign8248 ld a,(ix+MonsterNX)8249 cp 178250 jp c,.SetSpriteSpellbook8251 cp 338252 jp c,.MonsterIs2TilesWide8253 cp 578254 jp c,.MonsterIs3TilesWide8255 .MonsterIs4TilesWide:8256 inc hl8257 inc hl8258 ld a,(hl)8259 cp 2558260 jp z,.SetSpriteProhibitionSign8261 .MonsterIs3TilesWide:8262 inc hl8263 inc hl8264 ld a,(hl)8265 cp 2558266 jp z,.SetSpriteProhibitionSign8267 .MonsterIs2TilesWide:8268 inc hl8269 inc hl8270 ld a,(hl)8271 cp 2558272 jp z,.SetSpriteProhibitionSign8273 jp .SetSpriteSpellbook8275 .CheckPointerOnCreature:8276 call .Check1TileMonsterStandsOn 8277 8278 ld a,(ix+MonsterNX)8279 cp 178280 ret c8281 ld a,(Monster0+MonsterX)8282 ld c,a8283 ld a,(ix+MonsterX)8284 add a,168285 call .Check8287 8288 ld a,(ix+MonsterNX)8289 cp 338290 ret c8291 ld a,(Monster0+MonsterX)8292 ld c,a8293 ld a,(ix+MonsterX)8294 add a,328295 call .Check8297 8298 ld a,(ix+MonsterNX)8299 cp 578300 ret c8301 ld a,(Monster0+MonsterX)8302 ld c,a8303 ld a,(ix+MonsterX)8304 add a,488305 call .Check8306 ret8307 .Check1TileMonsterStandsOn:8308 ld a,(Monster0+MonsterX)8309 ld c,a8310 ld a,(ix+MonsterX)8312 .Check:8313 cp c8314 ret nz8316 ld a,(ix+MonsterY)8317 ld c,a8318 ld a,(ix+MonsterNY)8319 add a,c8320 ld c,a8322 ld a,(Monster0+MonsterY)8323 add a,0178324 cp c8325 ret nz8327 pop af 8328 pop af8330 ld (MonsterThatIsBeingAttacked),ix8331 ld a,(ix+MonsterX)8332 ld (MonsterThatIsBeingAttackedX),a8333 ld a,(ix+MonsterNX)8334 ld (MonsterThatIsBeingAttackedNX),a8335 ld a,(ix+MonsterY)8336 ld (MonsterThatIsBeingAttackedY),a8337 ld a,(ix+MonsterNY)8338 ld (MonsterThatIsBeingAttackedNY),a8340 8341 call GetSelectedSpellCastableOn 8342 cp 58343 jp z,.CheckFreeHex8344 cp 48345 jp z,.SpellCanBecastOnlyOnRangedEnemy8346 cp 38347 jp z,.SpellCanBecastAnyWhere8348 cp 28349 jp z,.SpellCanBecastOnlyOnEnemy8350 cp 18351 jp z,.SpellCanBecastOnlyOnAlly8353 .SpellCanBecastOnlyOnAlly:8354 bit 0,b 8355 jp nz,.SetSpriteSpellbook8356 jp .SetSpriteProhibitionSign8358 .SpellCanBecastOnlyOnRangedEnemy:8359 bit 0,b 8360 jp nz,.SetSpriteProhibitionSign8362 call SetMonsterTableInIY 8363 ld a,(iy+MonsterTableSpecialAbility)8364 cp RangedMonster8365 jp nz,.SetSpriteProhibitionSign8366 8367 jp .SetSpriteSpellbook8369 .SpellCanBecastOnlyOnEnemy:8370 bit 0,b 8371 jp z,.SetSpriteSpellbook8372 jp .SetSpriteProhibitionSign8374 .SpellCanBecastAnyWhere:8375 .SetSpriteSpellbook:8376 ld hl,CursorEnterCastle8377 ld (BufferCursorSpriteChar),hl8378 ld hl,SpriteColCursorSprites8379 ld (BufferCursorSpriteCol),hl8381 ld a,(NewPrContr)8382 bit 4,a 8383 ret z8384 8385 8386 ld a,18387 ld (CastSpell?),a8388 ret8389 8391SpellEarthBound: db 2 | dw SpellEarthBoundRoutine | db CostEarthSpell48392SpellPlateArmor: db 1 | dw SpellPlateArmorRoutine | db CostEarthSpell38393SpellResurrection: db 1 | dw SpellResurrectionRoutine | db CostEarthSpell28394SpellEarthShock: db 3 | dw SpellEarthShockRoutine | db CostEarthSpell183958396SpellCurse: db 2 | dw SpellCurseRoutine | db CostFireSpell48397SpellBlindingFog: db 4 | dw SpellBlindingFogRoutine | db CostFireSpell38398Spellimplosion: db 2 | dw SpellimplosionRoutine | db CostFireSpell28399Spellsunstrike: db 2 | dw SpellsunstrikeRoutine | db CostFireSpell184008401SpellHaste: db 1 | dw SpellHasteRoutine | db CostAirSpell48402SpellShieldBreaker: db 2 | dw SpellShieldBreakerRoutine | db CostAirSpell38403SpellClawBack: db 1 | dw SpellClawBackRoutine | db CostAirSpell28404SpellSpellBubble: db 1 | dw SpellSpellBubbleRoutine | db CostAirSpell184058406SpellCure: db 1 | dw SpellCureRoutine | db CostWaterSpell48407SpellIceBolt: db 2 | dw SpellIceBoltRoutine | db CostWaterSpell38408Spellhypnosis: db 2 | dw SpellhypnosisRoutine | db CostWaterSpell28409SpellFrostRing: db 3 | dw SpellFrostRingRoutine | db CostWaterSpell184108411SpellMagicArrows: db 2 | dw SpellMagicArrowsRoutine | db CostAllSpellSchools48412SpellFrenzy: db 1 | dw SpellFrenzyRoutine | db CostAllSpellSchools38413SpellTeleport: db 5 | dw SpellTeleportRoutine | db CostAllSpellSchools28414SpellInnerBeast: db 1 | dw SpellInnerBeastRoutine | db CostAllSpellSchools18416CostAllSpellSchools4: equ 5 8417CostAllSpellSchools3: equ 9 8418CostAllSpellSchools2: equ 13 8419CostAllSpellSchools1: equ 14 8421CostEarthSpell4: equ 4 8422CostEarthSpell3: equ 6 8423CostEarthSpell2: equ 12 8424CostEarthSpell1: equ 16 8426CostFireSpell4: equ 6 8427CostFireSpell3: equ 10 8428CostFireSpell2: equ 15 8429CostFireSpell1: equ 16 8431CostAirSpell4: equ 5 8432CostAirSpell3: equ 7 8433CostAirSpell2: equ 11 8434CostAirSpell1: equ 18 8436CostWaterSpell4: equ 6 8437CostWaterSpell3: equ 8 8438CostWaterSpell2: equ 12 8439CostWaterSpell1: equ 15 8441GetSelectedSpellCost: 8442 call GetSelectedSpellTable 8443 inc hl8444 inc hl8445 inc hl8446 ld a,(hl) 8447 ret8449GetSelectedSpellRoutine: 8450 call GetSelectedSpellTable 8451 inc hl8452 ld e,(hl)8453 inc hl8454 ld d,(hl)8455 ex de,hl8456 ret8458GetSelectedSpellCastableOn:8459 call GetSelectedSpellTable 8460 ld a,(hl) 8461 ret8463GetSelectedSpellTable: 8464 ld a,(SpellSelected?)8465 cp 18466 ld hl,SpellInnerBeast8467 ret z8468 cp 28469 ld hl,SpellTeleport8470 ret z8471 cp 38472 ld hl,SpellFrenzy8473 ret z8474 cp 48475 ld hl,SpellMagicArrows8476 ret z8477 ld a,(SelectedElementInSpellBook) 8478 or a8479 jr z,.EarthSpellSelected8480 dec a8481 jr z,.FireSpellSelected8482 dec a8483 jr z,.AirSpellSelected8485 .WaterSpellSelected:8486 ld a,(SpellSelected?)8487 cp 58488 ld hl,SpellFrostRing8489 ret z8490 cp 68491 ld hl,Spellhypnosis8492 ret z8493 cp 78494 ld hl,SpellIceBolt8495 ret z8496 cp 88497 ld hl,SpellCure8498 ret8500 .AirSpellSelected:8501 ld a,(SpellSelected?)8502 cp 58503 ld hl,SpellSpellBubble8504 ret z8505 cp 68506 ld hl,SpellClawBack8507 ret z8508 cp 78509 ld hl,SpellShieldBreaker8510 ret z8511 cp 88512 ld hl,SpellHaste8513 ret8515 .FireSpellSelected:8516 ld a,(SpellSelected?)8517 cp 58518 ld hl,Spellsunstrike8519 ret z8520 cp 68521 ld hl,Spellimplosion8522 ret z8523 cp 78524 ld hl,SpellBlindingFog8525 ret z8526 cp 88527 ld hl,SpellCurse8528 ret8530 .EarthSpellSelected:8531 ld a,(SpellSelected?)8532 cp 58533 ld hl,SpellEarthShock8534 ret z8535 cp 68536 ld hl,SpellResurrection8537 ret z8538 cp 78539 ld hl,SpellPlateArmor8540 ret z8541 cp 88542 ld hl,SpellEarthBound8543 ret8545ReduceDurationStatusEffectsMonsters: 8546 ld ix,Monster18547 ld c,12 8548 .totalMonstersLoop:8549 ld b,5 8550 .loop:8551 ld a,(ix+MonsterStatusEffect1) 8552 and %0000 11118553 jr z,.NextStatusEffect8554 dec (ix+MonsterStatusEffect1) 8555 ld a,(ix+MonsterStatusEffect1) 8556 and %0000 11118557 jr nz,.NextStatusEffect8558 ld (ix+MonsterStatusEffect1),0 8559 .NextStatusEffect:8560 inc ix8561 djnz .loop8562 8563 ld de,LenghtMonsterTable-58564 add ix,de 8565 dec c8566 jr nz,.totalMonstersLoop8567 ret8569GetSpellPowerForCurrentActiveHero:8570 call SetCurrentActiveMOnsterInIX8571 8572 8573 push ix8574 pop hl 8575 ld de,Monster78576 call CompareHLwithDE 8577 ld ix,(plxcurrentheroAddress) 8578 jr c,.HeroFound8579 ld ix,(HeroThatGetsAttacked) 8587 .HeroFound:8589 8590 ld de,ItemSpellDamagePointsTable8591 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 8592 push ix8593 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters8594 pop ix8595 ld e,(ix+HeroStatSpelldamage)8596 ld d,08597 add hl,de8598 ret8600GetSpellDuration: 8601 call GetSpellPowerForCurrentActiveHero 8603 8604 push hl8605 pop bc8606 ld de,38607 call DivideBCbyDE 8608 ld a,c8609 add a,28610 ret8612CheckIfSpellGetsSpellBubbleed:8613 call CheckResistanceSkill 8614 ret z8616 ld a,r8617 and 38618 jr z,.DontSpellBubble8620 ld ix,(MonsterThatIsBeingAttacked)8621 ld c,SpellBubbleSpellNumber 8622 ld b,AmountOfStatusEffects8623 call CheckPresenceSpellBubble 8624 ret nz8625 8626 ld (ix+MonsterStatusEffect1),0 8627 xor a 8628 ret8629 .DontSpellBubble:8630 inc a 8631 ret8633EarthBoundSpellNumber: equ 1*168634SpellEarthBoundRoutine:8635 call CheckIfSpellGetsSpellBubbleed 8636 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8638 ld iy,EarthBoundAnimation8639 call AnimateSpell8641 call GetSpellDuration 8642 ld ix,(MonsterThatIsBeingAttacked)8643 or EarthBoundSpellNumber 8644 call SetSpellInEmptyStatusSlot8645 ld a,6 8646 call PrepBattleTextForSpells8648 jp EndSpellSelectedAndReduceManaCost8650PlateArmorSpellNumber: equ 2*168651SpellPlateArmorRoutine:8652 ld iy,PlateArmorAnimation8653 call AnimateSpell8655 call GetSpellDuration 8656 ld ix,(MonsterThatIsBeingAttacked)8657 or PlateArmorSpellNumber 8658 call SetSpellInEmptyStatusSlot8659 ld a,7 8660 call PrepBattleTextForSpells8661 jp EndSpellSelectedAndReduceManaCost8663CurseSpellNumber: equ 3*168664SpellCurseRoutine:8665 call CheckIfSpellGetsSpellBubbleed 8666 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8667 ld iy,CurseAnimation8668 call AnimateSpell8670 call GetSpellDuration 8671 ld ix,(MonsterThatIsBeingAttacked)8672 or CurseSpellNumber 8673 call SetSpellInEmptyStatusSlot8674 ld a,10 8675 call PrepBattleTextForSpells8676 jp EndSpellSelectedAndReduceManaCost8678BlindingFogSpellNumber: equ 4*168679SpellBlindingFogRoutine:8680 call CheckIfSpellGetsSpellBubbleed 8681 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8683 ld iy,BlindingFogAnimation8684 call AnimateSpell8686 call GetSpellDuration 8687 ld ix,(MonsterThatIsBeingAttacked)8688 or BlindingFogSpellNumber 8689 call SetSpellInEmptyStatusSlot8690 ld a,11 8691 call PrepBattleTextForSpells8692 jp EndSpellSelectedAndReduceManaCost8694HasteSpellNumber: equ 5*168695SpellHasteRoutine:8696 ld iy,HasteAnimation8697 call AnimateSpell8699 call GetSpellDuration 8700 ld ix,(MonsterThatIsBeingAttacked)8701 or HasteSpellNumber 8702 call SetSpellInEmptyStatusSlot8703 ld a,14 8704 call PrepBattleTextForSpells8705 jp EndSpellSelectedAndReduceManaCost8707ShieldBreakerSpellNumber: equ 6*168708SpellShieldBreakerRoutine:8709 call CheckIfSpellGetsSpellBubbleed 8710 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8712 ld iy,ShieldBreakerAnimation8713 call AnimateSpell8715 call GetSpellDuration 8716 ld ix,(MonsterThatIsBeingAttacked)8717 or ShieldBreakerSpellNumber 8718 call SetSpellInEmptyStatusSlot8719 ld a,15 8720 call PrepBattleTextForSpells8721 jp EndSpellSelectedAndReduceManaCost8723ClawBackSpellNumber: equ 7*168724SpellClawBackRoutine:8725 ld iy,ClawBackAnimation8726 call AnimateSpell8728 call GetSpellDuration 8729 ld ix,(MonsterThatIsBeingAttacked)8730 or ClawBackSpellNumber 8731 call SetSpellInEmptyStatusSlot8732 ld a,16 8733 call PrepBattleTextForSpells8734 jp EndSpellSelectedAndReduceManaCost8736hypnosisSpellNumber: equ 8*168737SpellhypnosisRoutine:8738 call CheckIfSpellGetsSpellBubbleed 8739 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8741 ld iy,hypnosisAnimation8742 call AnimateSpell8744 call GetSpellDuration 8745 ld ix,(MonsterThatIsBeingAttacked)8746 or hypnosisSpellNumber 8747 call SetSpellInEmptyStatusSlot8748 ld a,20 8749 call PrepBattleTextForSpells8750 jp EndSpellSelectedAndReduceManaCost8752FrenzySpellNumber: equ 9*168753SpellFrenzyRoutine:8754 ld iy,FrenzyAnimation8755 call AnimateSpell8757 call GetSpellDuration 8758 ld ix,(MonsterThatIsBeingAttacked)8759 or FrenzySpellNumber 8760 call SetSpellInEmptyStatusSlot8761 ld a,23 8762 call PrepBattleTextForSpells8763 jp EndSpellSelectedAndReduceManaCost8765InnerBeastSpellNumber: equ 10*168766SpellInnerBeastRoutine:8767 ld iy,InnerBeastAnimation8768 call AnimateSpell8770 call GetSpellDuration 8771 ld ix,(MonsterThatIsBeingAttacked)8772 or InnerBeastSpellNumber 8773 call SetSpellInEmptyStatusSlot8774 ld a,25 8775 call PrepBattleTextForSpells8776 jp EndSpellSelectedAndReduceManaCost8778SpellBubbleSpellNumber: equ 11*168779SpellSpellBubbleRoutine:8780 ld iy,SpellBubbleAnimation8781 call AnimateSpell8782 8783 call GetSpellDuration 8784 ld ix,(MonsterThatIsBeingAttacked)8785 or SpellBubbleSpellNumber 8786 call SetSpellInEmptyStatusSlot8787 ld a,17 8788 call PrepBattleTextForSpells8789 jp EndSpellSelectedAndReduceManaCost8791GetIceBoltDMGAmount: 8792 call GetSpellPowerForCurrentActiveHero 8793 ld de,108794 call MultiplyHlWithDE 8795 ld de,308796 add hl,de8797 jp AddPositiveSpellDamageFromItemsForActiveHero8799SpellIceBoltRoutine:8800 call CheckIfSpellGetsSpellBubbleed 8801 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8803 ld iy,IceBoltAnimation8804 call AnimateSpell8806 call GetIceBoltDMGAmount 8807 call ReduceSpellDamageFromItems 8808 ld (AEOSpellDamage),hl 8809 ld ix,(MonsterThatIsBeingAttacked)8810 call MoveMonster.DealDamageToMonster8811 ld a,19 8812 call PrepBattleTextForSpells8813 jp EndSpellSelectedAndReduceManaCost8815GetEarthShockDMGAmount: 8816 call GetSpellPowerForCurrentActiveHero 8817 ld de,108818 call MultiplyHlWithDE 8819 ld de,508820 add hl,de8821 jp AddPositiveSpellDamageFromItemsForActiveHero8823SpellEarthShockRoutine:8824 ld ix,Monster0 8825 ld (MonsterThatIsBeingAttacked),ix8826 ld iy,EarthShockAnimation8827 call AnimateSpell8829 call GetEarthShockDMGAmount 8830 ld (AEOSpellDamage),hl8831 ld a,9 8832 call PrepBattleTextForSpells8833 jp GoCastAOESpell8835GetimplosionDMGAmount: 8836 call GetSpellPowerForCurrentActiveHero 8837 ld de,108838 call MultiplyHlWithDE 8839 ld de,158840 add hl,de8841 jp AddPositiveSpellDamageFromItemsForActiveHero8843SpellimplosionRoutine:8844 call CheckIfSpellGetsSpellBubbleed 8845 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8847 ld iy,implosionAnimation8848 call AnimateSpell8850 call GetimplosionDMGAmount 8851 ld (AEOSpellDamage),hl8852 ld a,12 8853 call PrepBattleTextForSpells8854 jp GoCastAOESpell8856GetFrostRingDMGAmount: 8857 call GetSpellPowerForCurrentActiveHero 8858 ld de,108859 call MultiplyHlWithDE 8860 ld de,308861 add hl,de8862 jp AddPositiveSpellDamageFromItemsForActiveHero8864SpellFrostRingRoutine:8865 ld ix,Monster0 8866 ld (MonsterThatIsBeingAttacked),ix8867 ld iy,FrostRingAnimation8868 call AnimateSpell8870 call GetFrostRingDMGAmount 8871 ld (AEOSpellDamage),hl8873 ld hl,08874 ld (MonsterThatWasDamagedPreviousCheck),hl8875 ld a,(Monster0+MonsterX)8876 ld (CursorXWhereSpellWasCast),a8877 ld a,(Monster0+MonsterY)8878 ld (CursorYWhereSpellWasCast),a8880 ld a,(CursorXWhereSpellWasCast) 8881 sub a,168882 ld (CursorXWhereSpellWasCast),a8883 call GoCastAOESpell.DamageMonsterOnThisTile8885 ld a,(CursorXWhereSpellWasCast) 8886 add a,168887 ld (CursorXWhereSpellWasCast),a8889 ld a,21 8890 call PrepBattleTextForSpells8892 jp GoCastAOESpell.EntryPointFrostRing8894GetMagicArrowsDMGAmount: 8895 call GetSpellPowerForCurrentActiveHero 8896 ld de,108897 call MultiplyHlWithDE 8898 ld de,108899 add hl,de8900 jp AddPositiveSpellDamageFromItemsForActiveHero8902SpellMagicArrowsRoutine:8903 call CheckIfSpellGetsSpellBubbleed 8904 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8906 ld iy,MagicArrowsAnimation8907 call AnimateSpell8909 call GetMagicArrowsDMGAmount 8910 call ReduceSpellDamageFromItems 8911 ld (AEOSpellDamage),hl 8913 ld ix,(MonsterThatIsBeingAttacked)8914 call MoveMonster.DealDamageToMonster8916 ld a,22 8917 call PrepBattleTextForSpells8918 jp EndSpellSelectedAndReduceManaCost8920GetsunstrikeDMGAmount: 8921 call GetSpellPowerForCurrentActiveHero 8922 ld de,108923 call MultiplyHlWithDE 8924 ld de,808925 add hl,de8926 jp AddPositiveSpellDamageFromItemsForActiveHero8928SpellsunstrikeRoutine:8929 call CheckIfSpellGetsSpellBubbleed 8930 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8932 ld iy,sunstrikeAnimation8933 call AnimateSpell8935 call GetsunstrikeDMGAmount 8936 call ReduceSpellDamageFromItems 8937 ld (AEOSpellDamage),hl 8939 ld ix,(MonsterThatIsBeingAttacked)8940 call MoveMonster.DealDamageToMonster8942 ld a,13 8943 call PrepBattleTextForSpells8944 jp EndSpellSelectedAndReduceManaCost8946GetCureAmount: 8947 call GetSpellPowerForCurrentActiveHero 8948 ld de,58949 call MultiplyHlWithDE 8950 ld de,208951 add hl,de8952 ret8954SpellCureRoutine:8955 ld iy,CureAnimation8956 call AnimateSpell8958 call GetCureAmount 8959 ld a,l8960 push af 8961 ld ix,(MonsterThatIsBeingAttacked)8962 call SetMonsterTableInIY 8963 pop af 8964 add a,(ix+MonsterHP)8965 jr nc,.NotCarry8966 ld a,2558967 .NotCarry:8968 ld (ix+MonsterHP),a8969 cp (iy+MonsterTableHp) 8970 jp c,EndSpellSelected8971 ld a,(iy+MonsterTableHp) 8972 ld (ix+MonsterHP),a8974 ld b,EarthBoundSpellNumber 8975 call RemoveSpell 8976 ld b,CurseSpellNumber 8977 call RemoveSpell 8978 ld b,BlindingFogSpellNumber 8979 call RemoveSpell 8980 ld b,ShieldBreakerSpellNumber 8981 call RemoveSpell 8982 ld b,hypnosisSpellNumber 8983 call RemoveSpell 8985 ld a,18 8986 call PrepBattleTextForSpells8987 jp EndSpellSelectedAndReduceManaCost8989GetResurrectionAmount: 8990 call GetSpellPowerForCurrentActiveHero 8991 ld de,58992 call MultiplyHlWithDE 8993 ld de,608994 add hl,de8995 ld a,l8996 ret8998SpellResurrectionRoutine:8999 ld iy,ResurrectionAnimation9000 call AnimateSpell9002 call GetResurrectionAmount 9003 push af9004 ld ix,(MonsterThatIsBeingAttacked)9005 9006 ld l,(ix+MonsterAmount)9007 ld h,(ix+MonsterAmount+1)9008 ld (AmountMonsterBeforeBeingAttacked),hl9010 call SetMonsterTableInIY 9012 pop af9014 add a,(ix+MonsterHP)9015 jr nc,.NotCarry9016 ld a,2559017 .NotCarry:9019 .CheckOverFlow:9020 ld (ix+MonsterHP),a9021 cp (iy+MonsterTableHp) 9022 jp c,.EndRessurectionRoutine9024 sub (iy+MonsterTableHp) 9026 call .SetTotalAmountMonsterAtStartBattleInHL9028 ld e,(ix+MonsterAmount)9029 ld d,(ix+MonsterAmount+1)9030 call CompareHLwithDE 9031 jr z,.MaxHpAndMaxAmountReached 9032 inc de9033 ld (ix+MonsterAmount),e9034 ld (ix+MonsterAmount+1),d9036 jr .CheckOverFlow9037 .MaxHpAndMaxAmountReached:9038 ld a,(iy+MonsterTableHp) 9039 ld (ix+MonsterHP),a9040 jp .EndRessurectionRoutine9042 .SetTotalAmountMonsterAtStartBattleInHL:9043 ld de,(MonsterThatIsBeingAttacked)9044 ld hl,Monster19045 call CompareHLwithDE 9046 ld hl,(ListOfMonstersToPutMonster1+1) 9047 ret z9048 ld hl,Monster29049 call CompareHLwithDE 9050 ld hl,(ListOfMonstersToPutMonster2+1) 9051 ret z9052 ld hl,Monster39053 call CompareHLwithDE 9054 ld hl,(ListOfMonstersToPutMonster3+1) 9055 ret z9056 ld hl,Monster49057 call CompareHLwithDE 9058 ld hl,(ListOfMonstersToPutMonster4+1) 9059 ret z9060 ld hl,Monster59061 call CompareHLwithDE 9062 ld hl,(ListOfMonstersToPutMonster5+1) 9063 ret z9064 ld hl,Monster69065 call CompareHLwithDE 9066 ld hl,(ListOfMonstersToPutMonster6+1) 9067 ret z9068 ld hl,Monster79069 call CompareHLwithDE 9070 ld hl,(ListOfMonstersToPutMonster7+1) 9071 ret z9072 ld hl,Monster89073 call CompareHLwithDE 9074 ld hl,(ListOfMonstersToPutMonster8+1) 9075 ret z9076 ld hl,Monster99077 call CompareHLwithDE 9078 ld hl,(ListOfMonstersToPutMonster9+1) 9079 ret z9080 ld hl,Monster109081 call CompareHLwithDE 9082 ld hl,(ListOfMonstersToPutMonster10+1) 9083 ret z9084 ld hl,Monster119085 call CompareHLwithDE 9086 ld hl,(ListOfMonstersToPutMonster11+1) 9087 ret z90889090 ld hl,(ListOfMonstersToPutMonster12+1) 9092 ret9094 .EndRessurectionRoutine:9095 call SetAmountUnderMonsterIn3Pages9097 ld a,8 9098 call PrepBattleTextForSpells9099 jp EndSpellSelectedAndReduceManaCost9101GoCastAOESpell:9102 ld hl,09103 ld (MonsterThatWasDamagedPreviousCheck),hl9104 ld a,(Monster0+MonsterX)9105 ld (CursorXWhereSpellWasCast),a9106 ld a,(Monster0+MonsterY)9107 ld (CursorYWhereSpellWasCast),a9109 ld a,(CursorXWhereSpellWasCast) 9110 sub a,169111 ld (CursorXWhereSpellWasCast),a9112 call .DamageMonsterOnThisTile9114 ld a,(CursorXWhereSpellWasCast) 9115 add a,169116 ld (CursorXWhereSpellWasCast),a9117 call .DamageMonsterOnThisTile9118 9119 .EntryPointFrostRing:9120 ld a,(CursorXWhereSpellWasCast) 9121 add a,169122 ld (CursorXWhereSpellWasCast),a9123 call .DamageMonsterOnThisTile9125 ld a,(CursorXWhereSpellWasCast) 9126 sub a,89127 ld (CursorXWhereSpellWasCast),a9128 ld a,(CursorYWhereSpellWasCast) 9129 sub a,169130 ld (CursorYWhereSpellWasCast),a9131 call .DamageMonsterOnThisTile9133 ld a,(CursorXWhereSpellWasCast) 9134 sub a,169135 ld (CursorXWhereSpellWasCast),a9136 call .DamageMonsterOnThisTile9138 ld a,(CursorYWhereSpellWasCast) 9139 add a,329140 ld (CursorYWhereSpellWasCast),a9141 call .DamageMonsterOnThisTile9143 ld a,(CursorXWhereSpellWasCast) 9144 add a,169145 ld (CursorXWhereSpellWasCast),a9146 call .DamageMonsterOnThisTile9147 jp EndSpellSelectedAndReduceManaCost9149 .DamageMonsterOnThisTile:9150 call CheckCollateralSpellDamage 9151 ret nc9152 9153 ld ix,(MonsterThatIsBeingAttacked) 9154 push ix9155 pop de9156 ld hl,(MonsterThatWasDamagedPreviousCheck)9157 call CompareHLwithDE 9158 ret z 9159 ld (MonsterThatWasDamagedPreviousCheck),de9161 ld hl,(AEOSpellDamage)9163 ld a,BattleCodePage2Block 9164 call block34 9165 call ReduceSpellDamageFromItems 9167 call MoveMonster.DealDamageToMonster9168 call CheckMonsterDied 9169 .WaitExplosionMonster:9170 ld a,(ShowExplosionSprite?) 9171 or a9172 jr nz,.WaitExplosionMonster9173 ret9175CheckCollateralSpellDamage: 9176 ld ix,Monster19177 call .CheckPointerOnCreature9178 ld ix,Monster29179 call .CheckPointerOnCreature9180 ld ix,Monster39181 call .CheckPointerOnCreature9182 ld ix,Monster49183 call .CheckPointerOnCreature9184 ld ix,Monster59185 call .CheckPointerOnCreature9186 ld ix,Monster69187 call .CheckPointerOnCreature9188 ld ix,Monster79189 call .CheckPointerOnCreature9190 ld ix,Monster89191 call .CheckPointerOnCreature9192 ld ix,Monster99193 call .CheckPointerOnCreature9194 ld ix,Monster109195 call .CheckPointerOnCreature9196 ld ix,Monster119197 call .CheckPointerOnCreature9198 ld ix,Monster129199 call .CheckPointerOnCreature9200 xor a 9201 ret9202 9203 .CheckPointerOnCreature:9204 call .Check1TileMonsterStandsOn 9205 9206 ld a,(ix+MonsterNX)9207 cp 179208 ret c9209 ld a,(CursorXWhereSpellWasCast)9210 ld c,a9211 ld a,(ix+MonsterX)9212 add a,169213 call .Check9215 9216 ld a,(ix+MonsterNX)9217 cp 339218 ret c9219 ld a,(CursorXWhereSpellWasCast)9220 ld c,a9221 ld a,(ix+MonsterX)9222 add a,329223 call .Check9225 9226 ld a,(ix+MonsterNX)9227 cp 579228 ret c9229 ld a,(CursorXWhereSpellWasCast)9230 ld c,a9231 ld a,(ix+MonsterX)9232 add a,489233 call .Check9234 ret9235 .Check1TileMonsterStandsOn:9236 ld a,(CursorXWhereSpellWasCast)9237 ld c,a9238 ld a,(ix+MonsterX)9240 .Check:9241 cp c9242 ret nz9244 ld a,(ix+MonsterY)9245 ld c,a9246 ld a,(ix+MonsterNY)9247 add a,c9248 ld c,a9250 ld a,(CursorYWhereSpellWasCast)9251 add a,0179252 cp c9253 ret nz9255 pop af 9256 pop af9258 ld (MonsterThatIsBeingAttacked),ix9259 ld a,(ix+MonsterX)9260 ld (MonsterThatIsBeingAttackedX),a9261 ld a,(ix+MonsterNX)9262 ld (MonsterThatIsBeingAttackedNX),a9263 ld a,(ix+MonsterY)9264 ld (MonsterThatIsBeingAttackedY),a9265 ld a,(ix+MonsterNY)9266 ld (MonsterThatIsBeingAttackedNY),a9267 scf 9268 ret9270SpellTeleportRoutine:9271 ld a,19272 ld (MoVeMonster?),a 9273 xor a9274 ld (MonsterAnimationSpeed),a9275 ld (MonsterAnimationStep),a9276 ld iy,MonsterMovementPath9277 ld (iy+0),TeleportMovement 9279 call SetCurrentActiveMOnsterInIX9281 ld a,(Monster0+MonsterY)9282 sub a,(ix+MonsterNY)9283 add a,179284 ld (iy+1),a 9285 ld a,(Monster0+MonsterX)9286 ld (iy+2),a 9288 ld (MonsterThatIsBeingAttacked),ix9289 ld iy,TeleportAnimation9290 call AnimateSpell9292 ld ix,(MonsterThatIsBeingAttacked)9293 ld a,24 9294 call PrepBattleTextForSpells9295 jp EndSpellSelectedAndReduceManaCost9297PrepBattleTextForSpells: 9298 ld (BattleTextQ),a9299 ld a,29300 ld (SetBattleText?),a 9301 jp SetMonsterNameInBattleTextQ493039304SetSpellInEmptyStatusSlot: 9306push ix9308 ld c,a 9309 and %1111 0000 9310 ld d,a 9312 ld b,5 9314 .loop:9315 ld a,(ix+MonsterStatusEffect1)9316 or a9317 jr z,.EmptySlotFound9318 9319 and %1111 0000 9320 cp d 9321 jr z,.EmptySlotFound 9322 9323 inc ix 9324 djnz .loop9326pop ix9327 ret9328 9331 .EmptySlotFound:9332 ld (ix+MonsterStatusEffect1),c9335pop ix9336 ret9347EraseMonsterPreviousFrame:9348 ld a,(activepage)9349 xor 19350 ld (EraseMonster+dPage),a9352 ld a,(ix+MonsterYPrevious)9353 ld (EraseMonster+sy),a 9354 ld (EraseMonster+dy),a9356 ld a,(ix+MonsterXPrevious)9357 ld (EraseMonster+dx),a9358 ld (EraseMonster+sx),a9360 ld bc,(NXAndNY)9361 ld a,c9362 inc a 9363 add a,a9366 ld a,(ix+MonsterNXPrevious)9369 ld (EraseMonster+nx),a9370 ld a,b9372 ld a,(ix+MonsterNYPrevious)9373 93749375 9376 ld (EraseMonster+ny),a9378 ld hl,EraseMonster9379 call docopy9380 ret9382SetBattleFieldGraphics:9383 ld hl,$4000 + (000*128) + (000/2) - 1289384 ld de,$0000 + (016*128) + (000/2) - 1289385 ld bc,$0000 + (212*256) + (256/2)93869391 ld a,(BattleGraphicsBlock) 9392 jp CopyRamToVramCorrectedCastleOverview 9394HeroFledRetreating: 9395 xor a9396 ld (ix+HeroUnits+00),UnitWhenRetreated | UnitWhenRetreated: equ 2559397 ld (ix+HeroUnits+01),a9398 ld (ix+HeroUnits+02),a9400 ld (ix+HeroUnits+03),a9401 ld (ix+HeroUnits+04),a9402 ld (ix+HeroUnits+05),a9404 ld (ix+HeroUnits+06),a9405 ld (ix+HeroUnits+07),a9406 ld (ix+HeroUnits+08),a9408 ld (ix+HeroUnits+09),a9409 ld (ix+HeroUnits+10),a9410 ld (ix+HeroUnits+11),a9412 ld (ix+HeroUnits+12),a9413 ld (ix+HeroUnits+13),a9414 ld (ix+HeroUnits+14),a9416 ld (ix+HeroUnits+15),a9417 ld (ix+HeroUnits+16),a9418 ld (ix+HeroUnits+17),a9419 9420HeroFledSurrendering: 9422 ld (ix+HeroStatus),254 9423 ld (ix+Heroy),2559424 ld (ix+Herox),2559426 ld l,(ix+HeroSpecificInfo+0) 9427 ld h,(ix+HeroSpecificInfo+1)9428 ld de,HeroInfoNumber9429 add hl,de9430 ld b,(hl) 9432 ld a,(CurrentActiveMonster) 9433 cp 79434 ld a,(whichplayernowplaying?) 9435 jr c,.FleeingPlayerFound9436 ld a,(PlayerThatGetsAttacked)9437 .FleeingPlayerFound:9439 9440 cp 19441 ld hl,TavernHeroesPlayer1+TavernHeroTableLenght-29442 jr z,.loop9443 cp 29444 ld hl,TavernHeroesPlayer2+TavernHeroTableLenght-29445 jr z,.loop9446 cp 39447 ld hl,TavernHeroesPlayer3+TavernHeroTableLenght-29448 jr z,.loop9449 ld hl,TavernHeroesPlayer4+TavernHeroTableLenght-29450 .loop:9451 ld a,(hl)9452 or a9453 jr nz,.HeroFound9454 dec hl9455 jr .loop9457 .HeroFound:9458 inc hl9459 ld (hl),b9460 ret9461 9462DeactivateHeroThatAttacks:9463 ld a,(whichplayernowplaying?)9464 ld (PlayerWhoLostAHeroInBattle?),a9465 ld a,39466 ld (PlayerLostHeroInBattle?),a9468 9469 ld de,lenghtherotable9470 ld hl,lenghtherotable*(amountofheroesperplayer-1)9472 call SetHero1ForCurrentPlayerInIX9473 push ix9474 pop iy 9475 ld ix,(plxcurrentheroAddress) 9476 9477 ld b,amountofheroesperplayer9478 .loop:9479 ld a,(iy+HeroStatus) 9480 inc a 9481 jp z,.endcheck1 9483 ld a,(ix+HeroY)9484 cp (iy+HeroY)9485 jp nz,.endcheck19487 ld a,(ix+HeroX)9488 cp (iy+HeroX)9489 jp z,.HeroTouchesEnemyHero9490 .endcheck1:9491 add iy,de9492 or a9493 sbc hl,de 9494 djnz .loop9495 ret9497 .HeroTouchesEnemyHero:9498 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl9500 ld ix,(plxcurrentheroAddress) 9501 ld (ix+HeroStatus),255 9503 push ix9504 pop hl9505 ld de,lenghtherotable9506 add hl,de 9508 push ix9509 pop de 9510 9511 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9513 ld a,b9514 or c9515 ret z 9517 ldir9519 9520 ld a,(whichplayernowplaying?)9521 dec a9522 ld hl,pl1hero8y9523 jr z,.LastHeroFound9524 dec a9525 ld hl,pl2hero8y9526 jr z,.LastHeroFound9527 dec a9528 ld hl,pl3hero8y9529 jr z,.LastHeroFound9530 ld hl,pl4hero8y9531 .LastHeroFound:9532 ld (hl),255 9533 ret9534 9535SetHero1ForPlayerThatGotAttackedInIX: 9536 ld a,(PlayerThatGetsAttacked) 9537 dec a9538 ld ix,pl1hero1y9539 ret z9540 dec a9541 ld ix,pl2hero1y9542 ret z9543 dec a9544 ld ix,pl3hero1y9545 ret z9546 ld ix,pl4hero1y9547 ret9548 9549DeactivateHeroThatGetsAttacked: 9550 ld ix,(HeroThatGetsAttacked) 9552 push ix9553 pop hl9554 ld a,l9555 or h9556 jr z,.NeutralEnemyDied9558 ld a,(PlayerThatGetsAttacked)9559 ld (PlayerWhoLostAHeroInBattle?),a9560 ld a,39561 ld (PlayerLostHeroInBattle?),a9563 9564 ld de,lenghtherotable9565 ld hl,lenghtherotable*(amountofheroesperplayer-1)9567 call SetHero1ForPlayerThatGotAttackedInIX9568 push ix9569 pop iy 9570 ld ix,(HeroThatGetsAttacked) 9571 9572 ld b,amountofheroesperplayer9573 .loop:9574 ld a,(iy+HeroStatus) 9575 inc a 9576 jp z,.endcheck1 9578 ld a,(ix+HeroY)9579 cp (iy+HeroY)9580 jp nz,.endcheck19582 ld a,(ix+HeroX)9583 cp (iy+HeroX)9584 jp z,.HeroTouchesEnemyHero9585 .endcheck1:9586 add iy,de9587 or a9588 sbc hl,de 9589 djnz .loop9590 ret9592 .HeroTouchesEnemyHero:9593 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl95959597 ld ix,(HeroThatGetsAttacked) 95999605 ld (ix+HeroStatus),255 9607 push ix9608 pop hl9609 ld de,lenghtherotable9610 add hl,de 9612 push ix9613 pop de 9614 9615 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9617 ld a,b9618 or c9619 ret z 9621 ldir9623 ld iy,(LastHeroForPlayerThatGetsAttacked)9624 ld (iy+HeroStatus),255 9625 ret9627 .NeutralEnemyDied:9628 ld a,19629 ld (NeutralEnemyDied?),a9630 ret9632AnimateSpell:9633 jp GoAnimateSpell9672CopyActivePageToInactivePage:9673 ld a,(activepage)9674 or a9675 ld hl,CopyPage1To09676 jp nz,DoCopy9677 ld hl,CopyPage0To1PlayingField9678 jp DoCopy9688DisplayGuardTowerRewardCOde:9689call screenon9691 call SetResourcesCurrentPlayerinIX 9693 ld l,(ix+0)9694 ld h,(ix+1) 9695 ld de,(GuardTowerReward)9696 add hl,de9697 jr c,.EndCheckOverFlow9698 ld (ix+0),l9699 ld (ix+1),h 9700 .EndCheckOverFlow:9701 97029704 call SetGuardTowerRewardVButton9706 call SetGuardTowerRewardGraphics 9707 call SetGuardTowerRewardText9708 call SwapAndSetPage 9709 call CopyActivePageToInactivePage9710 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9711 call DoCopy9713 .engine: 9714 call SwapAndSetPage 9715 call PopulateControls 97179722 ld a,(NewPrContr)9723 bit 5,a 9724 ret nz9726 ld ix,GenericButtonTable9727 call InitiateBattle.CheckButtonMouseInteractionGenericButtons9728 ret c9730 ld ix,GenericButtonTable9731 call InitiateBattle.SetGenericButtons 9733 call .CheckEndWindow 9735 halt9736 jp .engine9739 .CheckEndWindow:9740 ld a,(NewPrContr)9741 bit 4,a 9742 ret z9744 ld a,(spat+0) 9745 cp 044 9746 jr c,.Exit9747 cp 044+095 9748 jr nc,.Exit9749 9750 ld a,(spat+1) 9752 add a,069754 cp 030 9755 jr c,.Exit9756 cp 030+144 9757 ret c9759 .Exit:9760 pop af9761 ret9763SetGuardTowerRewardVButton:9764 ld hl,SetGuardTowerRewardVButtonTable-29765 ld de,GenericButtonTable-29766 ld bc,2+(GenericButtonTableLenghtPerButton*01)9767 ldir9768 ret9770SetGuardTowerRewardVButtonTableGfxBlock: db PlayerStartTurnBlock9771SetGuardTowerRewardVButtonTableAmountOfButtons: db 019772SetGuardTowerRewardVButtonTable: 9773 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9775.Button1Ytop: equ 1139776.Button1YBottom: equ .Button1Ytop + 0199777.Button1XLeft: equ 1469778.Button1XRight: equ .Button1XLeft + 0209780SetGuardTowerRewardText:9781 call SetFontPage0Y212BattleCode 9783 ld b,060+00 9784 ld c,051+00 9785 ld hl,TextGuardTowerReward19786 call SetText 9788 ld b,040+00 9789 ld c,064+00 9790 ld hl,TextGuardTowerReward29791 call SetText 9793 ld hl,(GuardTowerReward)9794 ld b,080+00 9795 ld c,100+00 9796 call SetNumber16BitCastle9798 ld b,106+00 9799 ld c,100+00 9800 ld hl,TextGuardTowerReward39801 call SetText 9802 ret9804TextGuardTowerReward1:9805 db "Guard Tower Reward",2559806TextGuardTowerReward2:9807 db "The dust of battle settles,",2549808 db "revealing a reward within the",2549809 db "conquered tower:",2559810TextGuardTowerReward3:9811 db "Gold",2559820SetGuardTowerRewardGraphics:9821 ld hl,$4000 + (000*128) + (000/2) - 1289822 ld de,$0000 + (44*128) + (030/2) - 1289823 ld bc,$0000 + (095*256) + (144/2)9824 ld a,PlayerStartTurnBlock 9825 jp CopyRamToVramCorrectedCastleOverview 9827DisplayGuardTowerCOde:9828 call SetGuardTowerButtons9829 call SetGuardTowerGraphics 9830 call SetGuardTowerText9831 call SwapAndSetPage 9832 call CopyActivePageToInactivePage9833 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9834 call DoCopy98369838 9839 .engine: 9840 call SwapAndSetPage 9841 call PopulateControls 98439848 ld a,(NewPrContr)9849 bit 5,a 9850 ret nz9852 ld ix,GenericButtonTable9853 call InitiateBattle.CheckButtonMouseInteractionGenericButtons9855 call .CheckButtonClicked 9857 ld ix,GenericButtonTable9858 call InitiateBattle.SetGenericButtons 9860 halt9861 jp .engine9863 .CheckButtonClicked:9864 ret nc9865 pop af 9867 ld a,b9868 cp 19869 ret nz 9870 ld a,1 9871 ld (FightGuardTowerMonster?),a 9872 ret9874SetGuardTowerButtons:9875 ld hl,SetGuardTowerButtonTable-29876 ld de,GenericButtonTable-29877 ld bc,2+(GenericButtonTableLenghtPerButton*02)9878 ldir9879 ret9881SetGuardTowerButtonTableGfxBlock: db RetreatBlock9882SetGuardTowerButtonTableAmountOfButtons: db 029883SetGuardTowerButtonTable: 9885 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9886 9887 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 9889.Button1Ytop: equ 1489890.Button1YBottom: equ .Button1Ytop + 0189891.Button1XLeft: equ 0729892.Button1XRight: equ .Button1XLeft + 0209894.Button2Ytop: equ 1479895.Button2YBottom: equ .Button2Ytop + 0199896.Button2XLeft: equ 1129897.Button2XRight: equ .Button2XLeft + 0209899SetFontPage0Y212BattleCode: 9900 ld hl,$4000 + (000*128) + (000/2) - 1289901 ld de,$0000 + (212*128) + (000/2) - 1289902 ld bc,$0000 + (006*256) + (256/2)9903 ld a,CastleOverviewFontBlock 9904 jp CopyRamToVramCorrectedWithoutActivePageSetting 9907SetGuardTowerText:9908 call SetFontPage0Y212BattleCode 9910 ld b,078+00 9911 ld c,031+00 9912 ld hl,TextGuardTower19913 call SetText 9915 ld b,027+00 9916 ld c,041+00 9917 ld hl,TextGuardTower29918 call SetText 9920 ld b,040+00 9921 ld c,140+00 9922 ld hl,TextGuardTower39923 call SetText 9925 call SetAmountInHL9926 ld b,121+00 9927 ld c,055+00 9928 call SetText 9929 9930 ld a,(GuardTowerMonsterLevel)9931 ld l,a9932 ld h,09933 ld b,047+00 9934 ld c,062+00 9935 call SetNumber16BitCastle9936 9937 xor a 9938 ld (MonsterHerocollidedWithOnMap),a9940 call SetMonsterTableInIYNeutralMonster9941 push iy9942 pop hl9943 ld de,MonsterTableName9944 add hl,de9945 ld b,057+00 9946 ld c,062+00 9949 push bc9950 call SetText 9951 pop bc9953 dec hl9954 ld a,(hl)9955 cp "s"9956 ret z9958 ld hl,.TextS9959 ld a,(PutLetter+dx) 9960 ld b,a 9961 jp SetText 9963.TextS: db "s.",2559965TextGuardTower1:9966 db "Guard Tower",2559967TextGuardTower2:9968 db "A majestic ancient guard tower rises  ",2549969 db "before you, concealing treasures ",2549970 db "untold. But defended by",2549971 db "level  ",2559972TextGuardTower3:9973 db "Dare you face them in combat?",2559975SetGuardTowerGraphics:9976 ld hl,$4000 + (000*128) + (000/2) - 1289977 ld de,$0000 + (024*128) + (020/2) - 1289978 ld bc,$0000 + (148*256) + (162/2)9979 ld a,ScrollBlock 9980 call CopyRamToVramCorrectedCastleOverview 9982 ld hl,$4000 + (139*128) + (044/2) - 1289983 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1289984 ld bc,$0000 + (060*256) + (104/2)9985 ld a,DefeatBlock 9986 call CopyRamToVramCorrectedCastleOverview 9988 ld hl,$4000 + (000*128) + (150/2) - 1289989 ld de,$0000 + ((024+44)*128) + ((020+56)/2) - 1289990 ld bc,$0000 + (070*256) + (064/2)9991 ld a,HeroOverviewStatusGraphicsBlock 9992 jp CopyRamToVramCorrectedCastleOverview 9993 9994MSXHeroes.asm1017 ds $8000-$,$ff1018dephase10201021BattleCodePage2Block: equ $511022phase $80001023 BattleCodePage2.asm1AnimateAutoCombatButton:2 ld a,(AutoCombatButtonPressed?)3 or a4 jr z,.AutoCombatNotOn6 ld a,(framecounter)7 and 159 cp 410 ld hl,$4000 + (072*128) + (196/2) - 12811 jr c,.SetAutoCombatButton13 cp 814 ld hl,$4000 + (072*128) + (214/2) - 12815 jr c,.SetAutoCombatButton17 cp 1218 ld hl,$4000 + (072*128) + (232/2) - 12819 jr c,.SetAutoCombatButton21 ld hl,$4000 + (090*128) + (196/2) - 12823 .SetAutoCombatButton:24 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 25 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 26 ld a,(GenericButtonTable+(GenericButtonTableLenghtPerButton*6))27 or %0000 001128 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),a29 ret31 .AutoCombatNotOn:32 ld hl,$4000 + (054*128) + (214/2) - 12833 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 34 ld hl,$4000 + (054*128) + (232/2) - 12835 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 36 ret38HandleEnemyAI: 39 inc c 40 ld a,d41 cp 12842 jp z,HandleEnemyAIRangeMonster44HandleEnemyAIMeleeMonster:45 ld a,c46 exx47 ld c,a 48 ld b,18 50 ld a,(CurrentActiveMonster) 51 cp 752 jr nc,.RightPlayerIsCurrentlyActive53 54 .LeftPlayerIsCurrentlyActive:55 exx56 ld ix,Monster7 | call .Checkpass1CheckAttackFromTheLeftFirst 57 ld ix,Monster8 | call .Checkpass1CheckAttackFromTheLeftFirst 58 ld ix,Monster9 | call .Checkpass1CheckAttackFromTheLeftFirst 59 ld ix,Monster10 | call .Checkpass1CheckAttackFromTheLeftFirst 60 ld ix,Monster11 | call .Checkpass1CheckAttackFromTheLeftFirst 61 ld ix,Monster12 | call .Checkpass1CheckAttackFromTheLeftFirst 63 ld ix,Monster7 | call .Checkpass2CheckAttackFromTheLeftFirst 64 ld ix,Monster8 | call .Checkpass2CheckAttackFromTheLeftFirst 65 ld ix,Monster9 | call .Checkpass2CheckAttackFromTheLeftFirst 66 ld ix,Monster10 | call .Checkpass2CheckAttackFromTheLeftFirst 67 ld ix,Monster11 | call .Checkpass2CheckAttackFromTheLeftFirst 68 ld ix,Monster12 | call .Checkpass2CheckAttackFromTheLeftFirst 70 71 inc c72 exx73 djnz .LeftPlayerIsCurrentlyActive74 75 ld a,176 ld (DefendButtonPressed?),a 77 ret79 .RightPlayerIsCurrentlyActive:80 exx81 ld ix,Monster1 | call .Checkpass1 82 ld ix,Monster2 | call .Checkpass1 83 ld ix,Monster3 | call .Checkpass1 84 ld ix,Monster4 | call .Checkpass1 85 ld ix,Monster5 | call .Checkpass1 86 ld ix,Monster6 | call .Checkpass1 88 ld ix,Monster1 | call .Checkpass2 89 ld ix,Monster2 | call .Checkpass2 90 ld ix,Monster3 | call .Checkpass2 91 ld ix,Monster4 | call .Checkpass2 92 ld ix,Monster5 | call .Checkpass2 93 ld ix,Monster6 | call .Checkpass2 95 96 inc c97 exx98 djnz .RightPlayerIsCurrentlyActive99 100 ld a,1101 ld (DefendButtonPressed?),a 102 ret103 104 .Checkpass2: 105 ld (MonsterThatIsBeingAttacked),ix106 jr .endCheckAmount108 .Checkpass1: 109 ld (MonsterThatIsBeingAttacked),ix110 ld l,(ix+MonsterAmount)111 ld h,(ix+MonsterAmount+1)112 ld de,10 113 call CompareHLwithDE114 ret c 115 .endCheckAmount:116 ld a,(ix+MonsterHP)117 or a118 ret z 119 ld a,(ix+MonsterX)120 ld (MonsterThatIsBeingAttackedX),a121 ld a,(ix+MonsterNX)122 ld (MonsterThatIsBeingAttackedNX),a123 ld a,(ix+MonsterY)124 ld (MonsterThatIsBeingAttackedY),a125 ld a,(ix+MonsterNY)126 ld (MonsterThatIsBeingAttackedNY),a128 call .CanMonsterBeAttackedFromTheRIght?129 call .CanMonsterBeAttackedFromTheRIghtBottom?130 call .CanMonsterBeAttackedFromTheRIghtTop?131 call .CanMonsterBeAttackedFromTheLeft?132 call .CanMonsterBeAttackedFromTheLeftBottom?133 call .CanMonsterBeAttackedFromTheLeftTop?134 ret137 .Checkpass2CheckAttackFromTheLeftFirst: 138 ld (MonsterThatIsBeingAttacked),ix139 jr .endCheckAmountCheckAttackFromTheLeftFirst141 .Checkpass1CheckAttackFromTheLeftFirst: 142 ld (MonsterThatIsBeingAttacked),ix143 ld l,(ix+MonsterAmount)144 ld h,(ix+MonsterAmount+1)145 ld de,10 146 call CompareHLwithDE147 ret c 148 .endCheckAmountCheckAttackFromTheLeftFirst:149 ld a,(ix+MonsterHP)150 or a151 ret z 152 ld a,(ix+MonsterX)153 ld (MonsterThatIsBeingAttackedX),a154 ld a,(ix+MonsterNX)155 ld (MonsterThatIsBeingAttackedNX),a156 ld a,(ix+MonsterY)157 ld (MonsterThatIsBeingAttackedY),a158 ld a,(ix+MonsterNY)159 ld (MonsterThatIsBeingAttackedNY),a161 call .CanMonsterBeAttackedFromTheLeft?162 call .CanMonsterBeAttackedFromTheLeftBottom?163 call .CanMonsterBeAttackedFromTheLeftTop?164 call .CanMonsterBeAttackedFromTheRIght?165 call .CanMonsterBeAttackedFromTheRIghtBottom?166 call .CanMonsterBeAttackedFromTheRIghtTop?167 ret169 .CanMonsterBeAttackedFromTheLeftBottom?:170 call FindMonsterInBattleFieldGrid 171 dec hl172 ld de,LenghtBattleField173 add hl,de174 call .CheckLeftBottomWidth1Tile175 ld a,(ix+MonsterNX)176 cp 17177 ret c178 inc hl179 inc hl180 call .CheckLeftBottomWidth1Tile181 ld a,(ix+MonsterNX)182 cp 33183 ret c184 inc hl185 inc hl186 call .CheckLeftBottomWidth1Tile187 ld a,(ix+MonsterNX)188 cp 57189 ret c190 inc hl191 inc hl192 call .CheckLeftBottomWidth1Tile193 ret194 .CheckLeftBottomWidth1Tile:195 ld a,(hl)196 cp 255 197 ret z 198 cp c 199 ret nc200 pop af201 pop af202 pop af203 push bc 204 ld c,012 205 call CheckSpaceToMoveMonster.CursorLocationSet206 pop bc 207 exx208 ld hl,MonsterMovementPath209 ld d,0210 ld e,c211 dec e212 add hl,de213 ld (hl),255 214 ret216 .CanMonsterBeAttackedFromTheLeftTop?:217 call FindMonsterInBattleFieldGrid 218 dec hl219 ld de,LenghtBattleField220 or a221 sbc hl,de222 call .CheckLeftTopWidth1Tile223 ld a,(ix+MonsterNX)224 cp 17225 ret c226 inc hl227 inc hl228 call .CheckLeftTopWidth1Tile229 ld a,(ix+MonsterNX)230 cp 33231 ret c232 inc hl233 inc hl234 call .CheckLeftTopWidth1Tile235 ld a,(ix+MonsterNX)236 cp 57237 ret c238 inc hl239 inc hl240 call .CheckLeftTopWidth1Tile241 ret242 .CheckLeftTopWidth1Tile:243 ld a,(hl)244 cp 255 245 ret z 246 cp c 247 ret nc248 pop af249 pop af250 pop af251 push bc 252 ld c,014 253 call CheckSpaceToMoveMonster.CursorLocationSet254 pop bc 255 exx256 ld hl,MonsterMovementPath257 ld d,0258 ld e,c259 dec e260 add hl,de261 ld (hl),255 262 ret264 .CanMonsterBeAttackedFromTheRIghtBottom?:265 call FindMonsterInBattleFieldGrid 266 inc hl267 ld de,LenghtBattleField268 add hl,de269 call .CheckRightBottomWidth1Tile270 ld a,(ix+MonsterNX)271 cp 17272 ret c273 inc hl274 inc hl275 call .CheckRightBottomWidth1Tile276 ld a,(ix+MonsterNX)277 cp 33278 ret c279 inc hl280 inc hl281 call .CheckRightBottomWidth1Tile282 ld a,(ix+MonsterNX)283 cp 57284 ret c285 inc hl286 inc hl287 call .CheckRightBottomWidth1Tile288 ret289 .CheckRightBottomWidth1Tile:290 ld a,(hl)291 cp 255 292 ret z 293 cp c 294 ret nc295 pop af296 pop af297 pop af298 push bc 299 ld c,018 300 call CheckSpaceToMoveMonster.CursorLocationSet301 pop bc 302 exx303 ld hl,MonsterMovementPath304 ld d,0305 ld e,c306 dec e307 add hl,de308 ld (hl),255 309 ret311 .CanMonsterBeAttackedFromTheRIghtTop?:312 call FindMonsterInBattleFieldGrid 313 inc hl314 ld de,LenghtBattleField315 or a316 sbc hl,de317 call .CheckRightTopWidth1Tile318 ld a,(ix+MonsterNX)319 cp 17320 ret c321 inc hl322 inc hl323 call .CheckRightTopWidth1Tile324 ld a,(ix+MonsterNX)325 cp 33326 ret c327 inc hl328 inc hl329 call .CheckRightTopWidth1Tile330 ld a,(ix+MonsterNX)331 cp 57332 ret c333 inc hl334 inc hl335 call .CheckRightTopWidth1Tile336 ret337 .CheckRightTopWidth1Tile:338 ld a,(hl)339 cp 255 340 ret z 341 cp c 342 ret nc343 pop af344 pop af345 pop af346 push bc 347 ld c,016 348 call CheckSpaceToMoveMonster.CursorLocationSet349 pop bc 350 exx351 ld hl,MonsterMovementPath352 ld d,0353 ld e,c354 dec e355 add hl,de356 ld (hl),255 357 ret359 .CanMonsterBeAttackedFromTheLeft?:360 call FindMonsterInBattleFieldGrid 361 dec hl362 dec hl364 push ix365 push hl366 call SetCurrentActiveMOnsterInIX367 ld a,(ix+MonsterNX)368 pop hl369 pop ix371 cp 17372 jr c,.MonsterWidthFound_Left 373 dec hl374 dec hl375 cp 33376 jr c,.MonsterWidthFound_Left 377 dec hl378 dec hl379 cp 57380 jr c,.MonsterWidthFound_Left 381 dec hl382 dec hl 383 .MonsterWidthFound_Left:384 385 ld a,(hl)386 cp 255 387 ret z 388 cp c 389 ret nc390 pop af391 pop af392 push bc 393 ld c,013 394 call CheckSpaceToMoveMonster.CursorLocationSet395 pop bc 396 397 exx398 ld hl,MonsterMovementPath399 ld d,0400 ld e,c401 dec e402 add hl,de403 ld (hl),255 404 ret405 406 .CanMonsterBeAttackedFromTheRIght?:407 call FindMonsterInBattleFieldGrid 408 inc hl409 inc hl411 ld a,(ix+MonsterNX)412 cp 17413 jr c,.MonsterWidthFound_Right 414 inc hl415 inc hl416 cp 33417 jr c,.MonsterWidthFound_Right 418 inc hl419 inc hl420 cp 57421 jr c,.MonsterWidthFound_Right 422 inc hl423 inc hl 424 .MonsterWidthFound_Right:426 ld a,(hl)427 cp 255 428 ret z 429 cp c 430 ret nc431 pop af432 pop af433 push bc 434 ld c,017 435 call CheckSpaceToMoveMonster.CursorLocationSet436 pop bc 437 438 exx439 ld hl,MonsterMovementPath440 ld d,0441 ld e,c442 dec e443 add hl,de444 ld (hl),255 445 ret447HandleEnemyAIRangeMonster:448 ld a,(CurrentActiveMonster) 449 cp 7450 jp nc,.RightPlayerIsCurrentlyActive452 .LeftPlayerIsCurrentlyActive:453454 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 455 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 456 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 457 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 458 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 459 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 461462 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 463 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 464 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 465 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 466 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 467 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 469470 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 471 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 472 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 473 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 474 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 475 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 477478 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 479 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 480 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 481 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 482 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 483 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 484 ret486 .RightPlayerIsCurrentlyActive:487488 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 489 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 490 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 491 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 492 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 493 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 495496 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 497 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 498 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 499 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 500 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 501 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 503504 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 505 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 506 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 507 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 508 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 509 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 511512 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 513 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 514 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 515 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 516 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 517 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 518 ret520 .CheckPass4: 521 ld a,(MoVeMonster?) 522 or a523 ret z 524 pop af 525 ret527 .CheckPass3: 528 ld a,(MoVeMonster?) 529 or a530 ret z 531 ld a,(BrokenArrow?) 532 or a533 ret nz 534 pop af 535 ret537 .CheckPass2: 538 ld a,(MoVeMonster?) 539 or a540 ret z 541 ld ix,(MonsterThatIsBeingAttacked)542 ld l,(ix+MonsterAmount)543 ld h,(ix+MonsterAmount+1)544 ld de,10 545 call CompareHLwithDE 546 ret c547 pop af 548 ret550 .CheckPass1: 551 ld a,(MoVeMonster?) 552 or a553 ret z 554 ld a,(BrokenArrow?) 555 or a556 ret nz557 ld ix,(MonsterThatIsBeingAttacked)558 ld l,(ix+MonsterAmount)559 ld h,(ix+MonsterAmount+1)560 ld de,10 561 call CompareHLwithDE 562 ret c563 pop af 564 ret566 .CheckIfMonsterCanBeAttacked:567 xor a568 ld (MoVeMonster?),a 570 ld (MonsterThatIsBeingAttacked),ix571 ld a,(ix+MonsterHP)572 or a573 ret z 574 ld a,(ix+MonsterX)575 ld (MonsterThatIsBeingAttackedX),a576 ld a,(ix+MonsterNX)577 ld (MonsterThatIsBeingAttackedNX),a578 ld a,(ix+MonsterY)579 ld (MonsterThatIsBeingAttackedY),a580 ld a,(ix+MonsterNY)581 ld (MonsterThatIsBeingAttackedNY),a582 583 584 call RangedMonsterCheck586 ld a,(BrokenArrow?) 587 cp 2 588 ret z590 call SetCurrentActiveMOnsterInIX591 ld a,(ix+MonsterX)592 ld iy,(MonsterThatIsBeingAttacked)593 cp (iy+MonsterX)594 ld c,013 595 jr c,.DirectionFound596 ld c,017 597 .DirectionFound:598 ld a,1599 ld (MoVeMonster?),a 600 xor a601 ld (MonsterAnimationSpeed),a602 ld (MonsterAnimationStep),a603 ld iy,MonsterMovementPath604 ld (iy),c 605 ret607SetBattlefieldCasualtiesDefender:608 ld ix,(HeroThatGetsAttacked) 609 push ix610 pop hl611 ld a,l612 or h613 jp z,.SetBattlefieldCasualtiesDefenderNeutralMonster615 ld a,173+16616 ld (CasualtiesOverviewCopy+dy),a618 ld hl,$4000 + (142*128) + (044/2) - 128619 ld de,$0000 + ((212+16)*128) + (020/2) - 128620 ld bc,$0000 + (022*256) + (138/2)621 ld a,VictoryBlock 622 call CopyRamToVramCorrectedCastleOverview 624 ld b,004 625 ld c,0 626 ld de,$0000 + ((214+16)*128) + (024/2) - 128 628 ld iy,(HeroThatGetsAttacked) 629 ld a,(iy+HeroUnits+0) 630 ld l,(iy+HeroUnits+1)631 ld h,(iy+HeroUnits+2) 632 ld ix,Monster7633 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied635 ld iy,(HeroThatGetsAttacked) 636 ld a,(iy+HeroUnits+3) 637 ld l,(iy+HeroUnits+4)638 ld h,(iy+HeroUnits+5) 639 ld ix,Monster8640 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied642 ld iy,(HeroThatGetsAttacked) 643 ld a,(iy+HeroUnits+6) 644 ld l,(iy+HeroUnits+7)645 ld h,(iy+HeroUnits+8) 646 ld ix,Monster9647 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied649 ld iy,(HeroThatGetsAttacked) 650 ld a,(iy+HeroUnits+9) 651 ld l,(iy+HeroUnits+10)652 ld h,(iy+HeroUnits+11) 653 ld ix,Monster10654 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied656 ld iy,(HeroThatGetsAttacked) 657 ld a,(iy+HeroUnits+12) 658 ld l,(iy+HeroUnits+13)659 ld h,(iy+HeroUnits+14) 660 ld ix,Monster11661 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied663 ld iy,(HeroThatGetsAttacked) 664 ld a,(iy+HeroUnits+15) 665 ld l,(iy+HeroUnits+16)666 ld h,(iy+HeroUnits+17) 667 ld ix,Monster12668 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied669 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked671.SetBattlefieldCasualtiesDefenderNeutralMonster:672 ld a,173+16673 ld (CasualtiesOverviewCopy+dy),a675 ld hl,$4000 + (142*128) + (044/2) - 128676 ld de,$0000 + ((212+16)*128) + (020/2) - 128677 ld bc,$0000 + (022*256) + (138/2)678 ld a,VictoryBlock 679 call CopyRamToVramCorrectedCastleOverview 681 ld b,004 682 ld c,0 683 ld de,$0000 + ((214+16)*128) + (024/2) - 128 685 ld iy,ListOfMonstersToPutMonster7686 ld a,(iy+0) 687 ld l,(iy+1)688 ld h,(iy+2) 689 ld ix,Monster7690 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied692 ld iy,ListOfMonstersToPutMonster8693 ld a,(iy+0) 694 ld l,(iy+1)695 ld h,(iy+2) 696 ld ix,Monster8697 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied699 ld iy,ListOfMonstersToPutMonster9700 ld a,(iy+0) 701 ld l,(iy+1)702 ld h,(iy+2) 703 ld ix,Monster9704 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied706 ld iy,ListOfMonstersToPutMonster10707 ld a,(iy+0) 708 ld l,(iy+1)709 ld h,(iy+2) 710 ld ix,Monster10711 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied713 ld iy,ListOfMonstersToPutMonster11714 ld a,(iy+0) 715 ld l,(iy+1)716 ld h,(iy+2) 717 ld ix,Monster11718 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied720 ld iy,ListOfMonstersToPutMonster12721 ld a,(iy+0) 722 ld l,(iy+1)723 ld h,(iy+2) 724 ld ix,Monster12725 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied726 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked728SetBattlefieldCasualtiesAttacker:729 ld a,144+16730 ld (CasualtiesOverviewCopy+dy),a732 ld hl,$4000 + (142*128) + (044/2) - 128733 ld de,$0000 + ((212+16)*128) + (020/2) - 128734 ld bc,$0000 + (022*256) + (138/2)735 ld a,VictoryBlock 736 call CopyRamToVramCorrectedCastleOverview 738 ld b,004 739 ld c,0 740 ld de,$0000 + ((214+16)*128) + (024/2) - 128 742 ld iy,(plxcurrentheroAddress) 743 ld a,(iy+HeroUnits+0) 744 ld l,(iy+HeroUnits+1)745 ld h,(iy+HeroUnits+2) 746 ld ix,Monster1747 call .CheckAmountOfMonstersSlotDied749 ld iy,(plxcurrentheroAddress) 750 ld a,(iy+HeroUnits+3) 751 ld l,(iy+HeroUnits+4)752 ld h,(iy+HeroUnits+5) 753 ld ix,Monster2754 call .CheckAmountOfMonstersSlotDied756 ld iy,(plxcurrentheroAddress) 757 ld a,(iy+HeroUnits+6) 758 ld l,(iy+HeroUnits+7)759 ld h,(iy+HeroUnits+8) 760 ld ix,Monster3761 call .CheckAmountOfMonstersSlotDied763 ld iy,(plxcurrentheroAddress) 764 ld a,(iy+HeroUnits+9) 765 ld l,(iy+HeroUnits+10)766 ld h,(iy+HeroUnits+11) 767 ld ix,Monster4768 call .CheckAmountOfMonstersSlotDied770 ld iy,(plxcurrentheroAddress) 771 ld a,(iy+HeroUnits+12) 772 ld l,(iy+HeroUnits+13)773 ld h,(iy+HeroUnits+14) 774 ld ix,Monster5775 call .CheckAmountOfMonstersSlotDied777 ld iy,(plxcurrentheroAddress) 778 ld a,(iy+HeroUnits+15) 779 ld l,(iy+HeroUnits+16)780 ld h,(iy+HeroUnits+17) 781 ld ix,Monster6782 call .CheckAmountOfMonstersSlotDied783 .AllSlotsChecked:785 ld a,c 786 or a787 ret z788 dec a789 ld b,1*22 790 ld c,068+ 5*11 791 jr z,.AmountOfSlotsWithCasualtiesFound792 dec a793 ld b,2*22 794 ld c,068+ 4*11 795 jr z,.AmountOfSlotsWithCasualtiesFound796 dec a797 ld b,3*22 798 ld c,068+ 3*11 799 jr z,.AmountOfSlotsWithCasualtiesFound800 dec a801 ld b,4*22 802 ld c,068+ 2*11 803 jr z,.AmountOfSlotsWithCasualtiesFound804 dec a805 ld b,5*22 806 ld c,068+ 1*11 807 jr z,.AmountOfSlotsWithCasualtiesFound808 ld b,6*22 809 ld c,068+ 0*11 811 .AmountOfSlotsWithCasualtiesFound:812 ld a,(activepage) 813 or a814 ld a,1815 jr z,.ActivePageFound816 xor a817 .ActivePageFound:818 ld (CasualtiesOverviewCopy+sPage),a819 ld (CasualtiesOverviewCopy+dPage),a820 821 ld a,b822 ld (CasualtiesOverviewCopy+nx),a823 ld a,c824 ld (CasualtiesOverviewCopy+dx),a825 826 ld hl,CasualtiesOverviewCopy827 call docopy828 ret830 .CheckAmountOfMonstersSlotDied:831 ex af,af'832 833 call .CalculateAmountOfUnitsLost834 ret z836 837 push bc838 ld c,212+17+16 839 push de840 ld a,b841 add a,20842 ld b,a843 call SetNumber16BitCastle844 845 ex af,af'846 call SetSYSX14x14847 pop de848 push de849851 push hl852 ld hl,128853 add hl,de854 add hl,hl855 ex de,hl856 pop hl857 858 call CopyTransparantImageBattleCode 860 pop de861 pop bc863 inc c 865 ld a,b866 add a,22867 ld b,a869 ld hl,22/2870 add hl,de871 ex de,hl872 ret874 .CalculateAmountOfUnitsLost:875 push de876 ld e,(ix+MonsterAmount)877 ld d,(ix+MonsterAmount+1)879 or a880 sbc hl,de 881 pop de882 ret884SetSYSX14x14: 885 ld h,0886 ld l,a887 add hl,hl 888 ld de,UnitSYSXTable14x14Portraits2889 add hl,de890 ld c,(hl)891 inc hl892 ld b,(hl) 893 push bc894 pop hl896 ld a,Enemy14x14PortraitsBlock 897 ld bc,NXAndNY14x14CharaterPortraits898 ret900 901UnitSYSXTable14x14Portraits2: 902 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128903 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-128904 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-128905 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-128906 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-128907 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-128908 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-128910 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-128911 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-128912 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-128913 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-128915UnitSYSXTable14x24Portraits2: 916 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128917 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-128918 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-128919 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-128920 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-128921 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-128922 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-128924 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-128925 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-128926 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-128927 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-128930ClearBattleFieldGridStartOfBattle:931 ld hl,.BattleFieldGrid932 ld de,BattleFieldGrid933 ld bc,EndBattleFieldGrid-BattleFieldGrid934 ldir935 ret937.BattleFieldGrid: 938 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000939 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255940 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000941 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255942 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000943 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255944 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 945 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255946 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000948955SetFontPage0Y250: 956 ld hl,$4000 + (000*128) + (000/2) - 128957 ld de,$0000 + (250*128) + (000/2) - 128958 ld bc,$0000 + (006*256) + (256/2)959 ld a,CastleOverviewFontBlock 960 jp CopyRamToVramCorrectedWithoutActivePageSetting 962SetBattleButtons:963 ld hl,BattleButtonTable-2964 ld de,GenericButtonTable-2965 ld bc,2+(GenericButtonTableLenghtPerButton*9)966 ldir968 call .CheckSurrenderButton970 .CheckAutoCombatButton:971 972 ld hl,(HeroThatGetsAttacked) 973 ld a,l974 or h975 ret z977 ld a,(PlayerThatGetsAttacked) 978 ld hl,player1human?-1979 ld d,0980 ld e,a981 add hl,de982 ld a,(hl)983 or a984 ret z 986 xor a987 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a988 ret990 .CheckSurrenderButton:991 992 ld hl,(HeroThatGetsAttacked) 993 ld a,l994 or h995 ret nz997 xor a998 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a999 ret1001BattleButton1Ytop: equ 193 + 161002BattleButton1YBottom: equ BattleButton1Ytop + 0181003BattleButton1XLeft: equ 0021004BattleButton1XRight: equ BattleButton1XLeft + 0181006BattleButton2Ytop: equ 193 + 161007BattleButton2YBottom: equ BattleButton2Ytop + 0181008BattleButton2XLeft: equ 0201009BattleButton2XRight: equ BattleButton2XLeft + 0181011BattleButton3Ytop: equ 193 + 161012BattleButton3YBottom: equ BattleButton3Ytop + 0181013BattleButton3XLeft: equ 0381014BattleButton3XRight: equ BattleButton3XLeft + 0181016BattleButton4Ytop: equ 193 + 161017BattleButton4YBottom: equ BattleButton4Ytop + 0181018BattleButton4XLeft: equ 1801019BattleButton4XRight: equ BattleButton4XLeft + 0181021BattleButton5Ytop: equ 193 + 161022BattleButton5YBottom: equ BattleButton5Ytop + 0181023BattleButton5XLeft: equ 1981024BattleButton5XRight: equ BattleButton5XLeft + 0181026BattleButton6Ytop: equ 193 + 161027BattleButton6YBottom: equ BattleButton6Ytop + 0181028BattleButton6XLeft: equ 2181029BattleButton6XRight: equ BattleButton6XLeft + 0181031BattleButton7Ytop: equ 193 + 161032BattleButton7YBottom: equ BattleButton7Ytop + 0181033BattleButton7XLeft: equ 2361034BattleButton7XRight: equ BattleButton7XLeft + 0181036BattleButton8Ytop: equ 192 + 161037BattleButton8YBottom: equ BattleButton8Ytop + 0101038BattleButton8XLeft: equ 1701039BattleButton8XRight: equ BattleButton8XLeft + 0101041BattleButton9Ytop: equ 192+10 + 161042BattleButton9YBottom: equ BattleButton9Ytop + 0101043BattleButton9XLeft: equ 1701044BattleButton9XRight: equ BattleButton9XLeft + 0101047BattleButtonTableGfxBlock: db LevelUpBlock1048BattleButtonTableAmountOfButtons: db 91049BattleButtonTable: 1050 db %1100 0011 | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (000*128) + (178/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db BattleButton1Ytop,BattleButton1YBottom,BattleButton1XLeft,BattleButton1XRight | dw $0000 + (BattleButton1Ytop*128) + (BattleButton1XLeft/2) - 128 1051 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 128 | db BattleButton2Ytop,BattleButton2YBottom,BattleButton2XLeft,BattleButton2XRight | dw $0000 + (BattleButton2Ytop*128) + (BattleButton2XLeft/2) - 128 1052 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 128 | db BattleButton3Ytop,BattleButton3YBottom,BattleButton3XLeft,BattleButton3XRight | dw $0000 + (BattleButton3Ytop*128) + (BattleButton3XLeft/2) - 1281054 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 128 | db BattleButton4Ytop,BattleButton4YBottom,BattleButton4XLeft,BattleButton4XRight | dw $0000 + (BattleButton4Ytop*128) + (BattleButton4XLeft/2) - 1281055 db %1100 0011 | dw $4000 + (018*128) + (232/2) - 128 | dw $4000 + (036*128) + (160/2) - 128 | dw $4000 + (036*128) + (178/2) - 128 | db BattleButton5Ytop,BattleButton5YBottom,BattleButton5XLeft,BattleButton5XRight | dw $0000 + (BattleButton5Ytop*128) + (BattleButton5XLeft/2) - 1281056 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 | db BattleButton6Ytop,BattleButton6YBottom,BattleButton6XLeft,BattleButton6XRight | dw $0000 + (BattleButton6Ytop*128) + (BattleButton6XLeft/2) - 1281057 db %1100 0011 | dw $4000 + (054*128) + (214/2) - 128 | dw $4000 + (054*128) + (232/2) - 128 | dw $4000 + (072*128) + (160/2) - 128 | db BattleButton7Ytop,BattleButton7YBottom,BattleButton7XLeft,BattleButton7XRight | dw $0000 + (BattleButton7Ytop*128) + (BattleButton7XLeft/2) - 12810581059 db %1100 0011 | dw $4000 + (090*128) + (160/2) - 128 | dw $4000 + (090*128) + (170/2) - 128 | dw $4000 + (090*128) + (180/2) - 128 | db BattleButton8Ytop,BattleButton8YBottom,BattleButton8XLeft,BattleButton8XRight | dw $0000 + (BattleButton8Ytop*128) + (BattleButton8XLeft/2) - 1281060 db %1100 0011 | dw $4000 + (100*128) + (160/2) - 128 | dw $4000 + (100*128) + (170/2) - 128 | dw $4000 + (100*128) + (180/2) - 128 | db BattleButton9Ytop,BattleButton9YBottom,BattleButton9XLeft,BattleButton9XRight | dw $0000 + (BattleButton9Ytop*128) + (BattleButton9XLeft/2) - 1281063HandleNecromancy: 1064 ld ix,(plxcurrentheroAddress) 1065 ld a,(ix+HeroSkills+0)1066 call .CheckSkillNecromancy1067 ld a,(ix+HeroSkills+1)1068 call .CheckSkillNecromancy1069 ld a,(ix+HeroSkills+2)1070 call .CheckSkillNecromancy1071 ld a,(ix+HeroSkills+3)1072 call .CheckSkillNecromancy1073 ld a,(ix+HeroSkills+4)1074 call .CheckSkillNecromancy1075 ld a,(ix+HeroSkills+5)1076 call .CheckSkillNecromancy1077 ret1079 .CheckSkillNecromancy:1080 cp 31 1081 jp z,.BasicNecromancyFound1082 cp 32 1083 jp z,.AdvancedNecromancyFound1084 cp 33 1085 jp z,.ExpertNecromancyFound1086 ret1088 .BasicNecromancyFound:1089 call CalculateTotalNumberOfUnitsLostDefender 1090 ld de,10 1091 call DivideBCbyDE 1092 call SetMinimumOf1Unit1093 call SetSkeletonsInHeroUnitSlot 1094 jp HandleSkullOfTheUnborn 1096 .AdvancedNecromancyFound:1097 call CalculateTotalNumberOfUnitsLostDefender 1098 ld de,05 1099 call DivideBCbyDE 1100 call SetMinimumOf1Unit1101 call SetSkeletonsInHeroUnitSlot 1102 jp HandleSkullOfTheUnborn 1104 .ExpertNecromancyFound:1105 call CalculateTotalNumberOfUnitsLostDefender 1106 ld de,03 1107 call DivideBCbyDE 1108 call SetMinimumOf1Unit1109 call SetSkeletonsInHeroUnitSlot 1110 jp HandleSkullOfTheUnborn 1112HandleSkullOfTheUnborn:1113 ld ix,(plxcurrentheroAddress)1114 ld a,(ix+HeroInventory+7) 1115 cp 038 1116 ret nz1118 call CalculateTotalNumberOfUnitsLostDefender 1119 ld de,10 1120 call DivideBCbyDE 1121 call SetMinimumOf1Unit1122 call SetSkeletonsInHeroUnitSlot 1123 ret1125SetMinimumOf1Unit:1126 ld a,b 1127 or c 1128 ret nz1129 inc bc1130 ret1132CalculateTotalNumberOfUnitsLostDefender:1133 ld bc,0 1135 ld iy,ListOfMonstersToPutMonster71136 ld l,(iy+1)1137 ld h,(iy+2) 1138 ld ix,Monster71139 call .CalculateAmountOfUnitsLost1141 ld iy,ListOfMonstersToPutMonster81142 ld l,(iy+1)1143 ld h,(iy+2) 1144 ld ix,Monster81145 call .CalculateAmountOfUnitsLost1147 ld iy,ListOfMonstersToPutMonster91148 ld l,(iy+1)1149 ld h,(iy+2) 1150 ld ix,Monster91151 call .CalculateAmountOfUnitsLost1153 ld iy,ListOfMonstersToPutMonster101154 ld l,(iy+1)1155 ld h,(iy+2) 1156 ld ix,Monster101157 call .CalculateAmountOfUnitsLost1159 ld iy,ListOfMonstersToPutMonster111160 ld l,(iy+1)1161 ld h,(iy+2) 1162 ld ix,Monster111163 call .CalculateAmountOfUnitsLost1165 ld iy,ListOfMonstersToPutMonster121166 ld l,(iy+1)1167 ld h,(iy+2) 1168 ld ix,Monster121169 call .CalculateAmountOfUnitsLost1170 ret1172 .CalculateAmountOfUnitsLost:1173 ld e,(ix+MonsterAmount)1174 ld d,(ix+MonsterAmount+1)1176 or a1177 sbc hl,de 1179 add hl,bc1180 push hl1181 pop bc1182 ret1184SetSkeletonsInHeroUnitSlot:1185 ld d,6 1187 ld ix,(plxcurrentheroAddress) 1188 .loop:1189 ld a,(ix+HeroUnits+0)1190 or a1191 jr z,.EmptyUnitSlotFound1192 cp 25 1193 jr z,.SlotWithSkeletonsFound1194 1195 inc ix1196 inc ix1197 inc ix1198 dec d1199 jr nz,.loop1200 ret1202 .SlotWithSkeletonsFound:1203 ld l,(ix+HeroUnits+1) 1204 ld h,(ix+HeroUnits+2) 1205 add hl,bc1206 ld (ix+HeroUnits+1),l 1207 ld (ix+HeroUnits+2),h 1208 ret1210 .EmptyUnitSlotFound:1211 ld (ix+HeroUnits+0),25 1212 ld (ix+HeroUnits+1),c 1213 ld (ix+HeroUnits+2),b 1214 ret1222HandleProjectileSprite:12231224 dec a1225 jr nz,.HandleProjectile1226 1227 1228 ld a,21229 ld (ShootProjectile?),a 1230 1231 1232 call SetCurrentActiveMOnsterInIX1233 call .SetCharacterAndColor 1235 ld a,(ix+MonsterY)1236 add a,b1237 ld (spat+4*16),a1238 ld (spat+4*17),a1239 ld (spat+4*18),a1241 ld a,(ix+MonsterNX)1242 sub a,161243 srl a1244 add a,(ix+MonsterX)1245 ld (spat+4*16+1),a1246 ld (spat+4*17+1),a1247 ld (spat+4*18+1),a 12481250 .HandleProjectile:1251 call SetCurrentActiveMOnsterInIX1252 ld a,(spat+4*16+1)1253 ld e,a 1254 ld a,(spat+4*16)1255 ld d,a 1257 ld a,(MonsterThatIsBeingAttackedX)1258 ld b,a1259 ld a,(MonsterThatIsBeingAttackedNX)1260 sub a,161261 srl a 1262 add a,b 1263 ld l,a 1265 ld a,(MonsterThatIsBeingAttackedY)1266 ld b,a1267 ld a,(MonsterThatIsBeingAttackedNY)1268 add a,b1269 sub a,161270 ld h,a 1272 1273 ld a,d 1274 cp h 1275 jr nz,.EndCheckEndPointReached1276 ld a,e 1277 cp l 1278 jp z,.EndProjectile1279 .EndCheckEndPointReached:1282 1283 ld a,h1284 sub a,d 1285 jr nc,.notcarry11286 neg1287 .notcarry1:1288 ld c,a 1289 1290 ld a,l1291 sub a,e 1292 jr nc,.notcarry21293 neg1294 .notcarry2:1295 ld b,a 1297 1298 cp c1299 jr c,.MoreVertical1301 .MoreHorizontal:1302 1308 push bc1309 push de1310 ld e,b1311 call Div8 1312 pop de1313 pop bc1314 cp 21315 jr c,.Move2x2y1316 cp 31317 jr c,.Move3x2y1318 cp 41319 jr c,.Move3x1y1320 cp 51321 jr c,.Move4x1y1323 .Move4x1y: 1324 call .MoveX1325 call .MoveX1326 call .MoveX1327 call .MoveX1328 call .MoveY1329 jp .SetCoordinates1331 .Move3x1y: 1332 call .MoveX1333 call .MoveX1334 call .MoveX1335 call .MoveY1336 jp .SetCoordinates1338 .Move3x2y: 1339 call .MoveX1340 call .MoveX1341 call .MoveX1342 call .MoveY1343 call .MoveY1344 jp .SetCoordinates1346 .Move2x2y: 1347 call .MoveX1348 call .MoveX1349 call .MoveY1350 call .MoveY1351 jp .SetCoordinates1353 .MoreVertical:1354 1360 push bc1361 push de1362 ld e,c1363 ld c,b1364 call Div8 1365 pop de1366 pop bc1367 cp 21368 jr c,.Move2y2x1369 cp 31370 jr c,.Move3y2x1371 cp 41372 jr c,.Move3y1x1373 cp 51374 jr c,.Move4y1x1376 .Move4y1x: 1377 call .MoveY1378 call .MoveY1379 call .MoveY1380 call .MoveY1381 call .MoveX1382 jr .SetCoordinates1384 .Move3y1x: 1385 call .MoveY1386 call .MoveY1387 call .MoveY1388 call .MoveX1389 jr .SetCoordinates1391 .Move3y2x: 1392 call .MoveY1393 call .MoveY1394 call .MoveY1395 call .MoveX1396 call .MoveX1397 jr .SetCoordinates1399 .Move2y2x: 1400 call .MoveY1401 call .MoveY1402 call .MoveX1403 call .MoveX1404 jr .SetCoordinates1406 .SetCoordinates:1407 ld a,e 1408 ld (spat+4*16+1),a1409 ld (spat+4*17+1),a1410 ld (spat+4*18+1),a1411 ld a,d 1412 ld (spat+4*16),a1413 ld (spat+4*17),a1414 ld (spat+4*18),a1416 xor a 1417 ld hl,sprcharaddr+(16*32) 1418 call SetVdp_Write1420 ld a,SpritesWeaponsBlock1421 ld ($6000),a 1423 call .SetCharacterAndColor1424 push de 1426 ld c,$981427 call outix96 1429 xor a 1430 ld hl,sprcoladdr+(16*16) 1431 call SetVdp_Write1433 pop hl 1434 ld c,$981435 call outix48 1437 ld a,BattleCodeBlock1438 ld ($6000),a 1439 ret1441 .SetCharacterAndColor:1442 ld a,(ix+MonsterNumber)1443 cp 0071444 ld b,08 1445 jp z,.Bobblun1446 cp 0081447 jp z,.Bubblun1448 cp 0261449 jp z,.AxeMan1450 cp 0351451 jp z,.GeneralBullet1 1452 cp 0361453 ld b,12 1454 jp z,.ContraBullet 1455 cp 0371456 ld b,06 1457 jp z,.ContraBullet 1458 cp 0391459 ld b,04 1460 jp z,.HandGrenade 1461 cp 0401462 ld b,10 1463 jp z,.ContraBullet 1464 cp 0431465 ld b,22 1466 jp z,.ContraBullet 1467 cp 0471468 ld b,12 1469 jp z,.Grenadier 1470 cp 0491471 jp z,.Vanguard 1472 cp 0691473 jp z,.GeneralBullet1 1474 cp 0921475 ld b,08 1476 jp z,.ContraBullet 1477 cp 0931478 jp z,.ContraBullet 1479 cp 0941480 jp z,.ContraBullet 1481 cp 1041482 ld b,16 1483 jp z,.LanFang 1484 cp 1091485 ld b,10 1486 jp z,.HanChen 1487 cp 1101488 jp z,.LiYen 1489 cp 1121490 ld b,06 1491 jp z,.KingMori1492 cp 1131493 jp z,.KnightYama1494 cp 1151495 jp z,.BisshopHeichi1496 cp 1191497 jp z,.PornHeichi1498 cp 1201499 jp z,.YamaKnight1500 cp 1251501 jp z,.GooGoo1502 cp 1291503 jp z,.Screech1504 cp 1441505 ld b,22 1506 jp z,.PastryChef1507 cp 1491508 ld b,06 1509 jp z,.VicViper1510 cp 1531511 jp z,.Andorogynus1512 cp 1581513 jp z,.BisshopHeichi 1514 cp 1591515 jp z,.GeneralBullet1 1516 cp 1681517 jp z,.NinjaKun1518 cp 1831519 ld b,14 1520 jp z,.GeneralBullet1 1521 ret1523 .NinjaKun:1524 call .InvertFrameCounterWhenOnTheRightSide15251529 ld de,6 1530 ld b,01531 ld c,a1532 call DivideBCbyDE 1533 ld a,l1534 srl a 1536 ld hl,SpriteCharNinjaKun + 0*961537 ld de,SpriteColNinjaKun + 0*481538 ret z1539 ld hl,SpriteCharNinjaKun + 1*961540 ld de,SpriteColNinjaKun + 1*481541 dec a1542 ret z1543 ld hl,SpriteCharNinjaKun + 2*961544 ld de,SpriteColNinjaKun + 2*481545 ret1547 .Andorogynus:1548 ld hl,SpriteCharAndorogynus + 0*961549 ld de,SpriteColAndorogynus + 0*481550 ret1552 .VicViper:1553 call .InvertFrameCounterWhenOnTheRightSide15541558 ld de,12 1559 ld b,01560 ld c,a1561 call DivideBCbyDE 1562 ld a,l1563 srl a 1565 ld hl,SpriteCharVicViper + 5*961566 ld de,SpriteColVicViper + 5*481567 ret z1568 ld hl,SpriteCharVicViper + 4*961569 ld de,SpriteColVicViper + 4*481570 dec a1571 ret z1572 ld hl,SpriteCharVicViper + 3*961573 ld de,SpriteColVicViper + 3*481574 dec a1575 ret z1576 ld hl,SpriteCharVicViper + 2*961577 ld de,SpriteColVicViper + 2*481578 dec a1579 ret z1580 ld hl,SpriteCharVicViper + 1*961581 ld de,SpriteColVicViper + 1*481582 dec a1583 ret z1584 ld hl,SpriteCharVicViper + 0*961585 ld de,SpriteColVicViper + 0*481586 dec a1587 ret z1588 ld hl,SpriteCharVicViper + 5*961589 ld de,SpriteColVicViper + 5*481590 dec a1591 ret z1592 ld hl,SpriteCharVicViper + 5*961593 ld de,SpriteColVicViper + 5*481594 ret1596 .PastryChef:1597 ld hl,SpriteCharPastryChef + 0*961598 ld de,SpriteColPastryChef + 0*481599 ld a,(CurrentActiveMonster)1600 cp 71601 ret c1602 ld hl,SpriteCharPastryChef + 1*961603 ld de,SpriteColPastryChef + 1*481604 ret1606 .Screech:1607 ld hl,SpriteCharScreech + 0*961608 ld de,SpriteColScreech + 0*481609 ld a,(CurrentActiveMonster)1610 cp 71611 ret c1612 ld hl,SpriteCharScreech + 1*961613 ld de,SpriteColScreech + 1*481614 ret1616 .GooGoo:1617 ld hl,SpriteCharGooGoo + 0*961618 ld de,SpriteColGooGoo + 0*481619 ld a,(CurrentActiveMonster)1620 cp 71621 ret c1622 ld hl,SpriteCharGooGoo + 1*961623 ld de,SpriteColGooGoo + 1*481624 ret1626 .YamaKnight:1627 call .InvertFrameCounterWhenOnTheRightSide16281629 srl a 1630 and 31631 ld hl,SpriteCharYamaKnight + 0*961632 ld de,SpriteColYamaKnight + 0*481633 ret z1634 ld hl,SpriteCharYamaKnight + 1*961635 ld de,SpriteColYamaKnight + 1*481636 dec a1637 ret z1638 ld hl,SpriteCharYamaKnight + 2*961639 ld de,SpriteColYamaKnight + 2*481640 dec a1641 ret z1642 ld hl,SpriteCharYamaKnight + 3*961643 ld de,SpriteColYamaKnight + 3*481644 ret1646 .PornHeichi:1647 ld hl,SpriteCharPornHeichi + 0*961648 ld de,SpriteColPornHeichi + 0*481649 ld a,(CurrentActiveMonster)1650 cp 71651 ret c1652 ld hl,SpriteCharPornHeichi + 1*961653 ld de,SpriteColPornHeichi + 1*481654 ret1656 .BisshopHeichi:1657 ld hl,SpriteCharBisshopHeichi + 0*961658 ld de,SpriteColBisshopHeichi + 0*481659 ld a,(CurrentActiveMonster)1660 cp 71661 ret c1662 ld hl,SpriteCharBisshopHeichi + 1*961663 ld de,SpriteColBisshopHeichi + 1*481664 ret1666 .KnightYama:1667 ld hl,SpriteCharKnightYama + 0*961668 ld de,SpriteColKnightYama + 0*481669 ret1671 .KingMori:1672 ld a,(framecounter)1673 srl a 1674 and 11675 ld hl,SpriteCharKingMori + 0*961676 ld de,SpriteColKingMori + 0*481677 ret z1678 ld hl,SpriteCharKingMori + 1*961679 ld de,SpriteColKingMori + 1*481680 ret1681 1682 .LiYen:1683 ld a,(framecounter)1684 srl a 1685 and 11686 ld hl,SpriteCharLiYen + 0*961687 ld de,SpriteColLiYen + 0*481688 ret z1689 ld hl,SpriteCharLiYen + 1*961690 ld de,SpriteColLiYen + 1*481691 ret1693 .HanChen:1694 ld hl,SpriteCharHanChen + 0*961695 ld de,SpriteColHanChen + 0*481696 ret1698 .LanFang:1699 call .InvertFrameCounterWhenOnTheRightSide17001702 and 71703 ld hl,SpriteCharLanFang + 0*961704 ld de,SpriteColLanFang + 0*481705 ret z1706 ld hl,SpriteCharLanFang + 1*961707 ld de,SpriteColLanFang + 1*481708 dec a1709 ret z1710 ld hl,SpriteCharLanFang + 2*961711 ld de,SpriteColLanFang + 2*481712 dec a1713 ret z1714 ld hl,SpriteCharLanFang + 3*961715 ld de,SpriteColLanFang + 3*481716 dec a1717 ret z1718 ld hl,SpriteCharLanFang + 4*961719 ld de,SpriteColLanFang + 4*481720 dec a1721 ret z1722 ld hl,SpriteCharLanFang + 5*961723 ld de,SpriteColLanFang + 5*481724 dec a1725 ret z1726 ld hl,SpriteCharLanFang + 6*961727 ld de,SpriteColLanFang + 6*481728 dec a1729 ret z1730 ld hl,SpriteCharLanFang + 7*961731 ld de,SpriteColLanFang + 7*481732 ret1734 .HandGrenade:1735 call .InvertFrameCounterWhenOnTheRightSide17361737 srl a 1738 and 31739 ld hl,SpriteCharHandGrenade + 0*961740 ld de,SpriteColHandGrenade + 0*481741 ret z1742 ld hl,SpriteCharHandGrenade + 1*961743 ld de,SpriteColHandGrenade + 1*481744 dec a1745 ret z1746 ld hl,SpriteCharHandGrenade + 2*961747 ld de,SpriteColHandGrenade + 2*481748 dec a1749 ret z1750 ld hl,SpriteCharHandGrenade + 3*961751 ld de,SpriteColHandGrenade + 3*481752 ret1754 .Vanguard:1755 ld hl,SpriteCharVanguard + 0*961756 ld de,SpriteColVanguard + 0*481757 ld a,(CurrentActiveMonster)1758 cp 71759 ret c1760 ld hl,SpriteCharVanguard + 1*961761 ld de,SpriteColVanguard + 1*481762 ret1764 .Grenadier:1765 ld hl,SpriteCharGrenadier + 0*961766 ld de,SpriteColGrenadier + 0*481767 ld a,(CurrentActiveMonster)1768 cp 71769 ret c1770 ld hl,SpriteCharGrenadier + 1*961771 ld de,SpriteColGrenadier + 1*481772 ret1774 .ContraBullet:1775 ld hl,SpriteCharContraBullet + 0*961776 ld de,SpriteColContraBullet + 0*481777 ld a,(CurrentActiveMonster)1778 cp 71779 ret c1780 ld hl,SpriteCharContraBullet + 1*961781 ld de,SpriteColContraBullet + 1*481782 ret1784 .GeneralBullet1:1785 ld hl,SpriteCharGeneralBullet1 + 0*961786 ld de,SpriteColGeneralBullet1 + 0*481787 ret1789 .AxeMan:1790 call .InvertFrameCounterWhenOnTheRightSide17911792 srl a 1793 and 31794 ld hl,SpriteCharAxeMan + 0*961795 ld de,SpriteColAxeMan + 0*481796 ret z1797 ld hl,SpriteCharAxeMan + 1*961798 ld de,SpriteColAxeMan + 1*481799 dec a1800 ret z1801 ld hl,SpriteCharAxeMan + 2*961802 ld de,SpriteColAxeMan + 2*481803 dec a1804 ret z1805 ld hl,SpriteCharAxeMan + 3*961806 ld de,SpriteColAxeMan + 3*481807 ret1809 .Bubblun:1810 ld hl,SpriteCharBubbleBobble + 0*961811 ld de,SpriteColBubbleBobble + 0*481812 ret1814 .Bobblun:1815 ld hl,SpriteCharBubbleBobble + 1*961816 ld de,SpriteColBubbleBobble + 1*481817 ret1819 .InvertFrameCounterWhenOnTheRightSide:1820 ld a,(CurrentActiveMonster)1821 cp 71822 ld a,(framecounter)1823 ret c1824 neg1825 ret1827 .MoveY:1828 ld a,d 1829 cp h 1830 ret z1831 inc d1832 ret c1833 dec d1834 dec d1835 ret1837 .MoveX:1838 ld a,e 1839 cp l 1840 ret z1841 inc e1842 ret c1843 dec e1844 dec e1845 ret1847.EndProjectile:1848 ld a,213+16 1849 ld (spat+4*16),a1850 ld (spat+4*17),a1851 ld (spat+4*18),a1853 xor a1854 ld (ShootProjectile?),a 1855 ret 1858SpriteCharExplosion:1859 ../sprites/explosions.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 06667 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 9683 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098 db 099 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 0106 db 0107 db 0108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 0122 db 0123 db 0124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 14149 db 19150 db 51151 db 55152 db 60153 db 108154 db 103155 db 43156 db 28157 db 4158 db 3159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 12182 db 28183 db 27184 db 7185 db 55186 db 59187 db 20188 db 7189 db 3190 db 0191 db 0192 db 0193 db 0194 db 0195 db 0196197 db 144198 db 152199 db 152200 db 148201 db 230202 db 246203 db 156204 db 152205 db 144206 db 224207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 0218 db 0219 db 0220 db 0221 db 0222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 96230 db 240231 db 240232 db 104233 db 156234 db 172235 db 112236 db 240237 db 96238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 0253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261262 db 0263 db 0264 db 0265 db 6266 db 13267 db 15268 db 6269 db 0270 db 0271 db 1272 db 3273 db 3274 db 3275 db 7276 db 15277 db 13278 db 0279 db 0280 db 0281 db 0282 db 29283 db 51284 db 103285 db 110286 db 254287 db 252288 db 143289 db 15290 db 28291 db 152292 db 248293 db 248294 db 0295 db 0296 db 0297 db 0298 db 6299 db 6300 db 0301 db 0302 db 0303 db 0304 db 1305 db 1306 db 1307 db 1308 db 6309 db 7310 db 0311 db 0312 db 0313 db 0314 db 0315 db 29316 db 59317 db 55318 db 7319 db 239320 db 244321 db 243322 db 239323 db 239324 db 223325 db 31326327 db 0328 db 0329 db 17330 db 1331 db 192332 db 48333 db 62334 db 31335 db 25336 db 49337 db 241338 db 225339 db 115340 db 63341 db 62342 db 63343 db 0344 db 192345 db 160346 db 32347 db 192348 db 0349 db 0350 db 0351 db 128352 db 128353 db 128354 db 128355 db 192356 db 96357 db 32358 db 96359 db 0360 db 0361 db 0362 db 0363 db 0364 db 192365 db 224366 db 246367 db 247368 db 239369 db 223370 db 63371 db 222372 db 205373 db 227374 db 237375 db 0376 db 0377 db 192378 db 192379 db 0380 db 0381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 128388 db 192389 db 192390 db 192391392 db 13393 db 15394 db 7395 db 7396 db 7397 db 3398 db 1399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 156409 db 63410 db 31411 db 254412 db 248413 db 220414 db 200415 db 127416 db 8417 db 6418 db 13419 db 9420 db 6421 db 0422 db 0423 db 0424 db 6425 db 5426 db 1427 db 2428 db 3429 db 1430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 239441 db 223442 db 230443 db 217444 db 31445 db 111446 db 55447 db 0448 db 7449 db 0450 db 6451 db 6452 db 0453 db 0454 db 0455 db 0456457 db 115458 db 231459 db 207460 db 253461 db 127462 db 207463 db 156464 db 24465 db 224466 db 112467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 192474 db 0475 db 144476 db 128477 db 128478 db 0479 db 0480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486 db 0487 db 0488 db 0489 db 222490 db 188491 db 125492 db 187493 db 198494 db 184495 db 120496 db 224497 db 0498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 128506 db 0507 db 0508 db 0509 db 0510 db 0511 db 0512 db 0513 db 0514 db 0515 db 0516 db 0517 db 0518 db 0519 db 0520 db 0521522 db 0523 db 0524 db 0525 db 0526 db 0527 db 0528 db 0529 db 1530 db 3531 db 7532 db 15533 db 11534 db 11535 db 8536 db 6537 db 1538 db 0539 db 0540 db 0541 db 128542 db 3543 db 12544 db 124545 db 200546 db 141547 db 71548 db 62549 db 156550 db 251551 db 234552 db 79553 db 246554 db 0555 db 0556 db 0557 db 1558 db 2559 db 0560 db 0561 db 0562 db 0563 db 2564 db 6565 db 6566 db 6567 db 7568 db 1569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 3576 db 15577 db 63578 db 255579 db 252580 db 251581 db 247582 db 110583 db 21584 db 176585 db 8586587 db 0588 db 0589 db 0590 db 1591 db 192592 db 48593 db 62594 db 19595 db 177596 db 226597 db 124598 db 57599 db 223600 db 87601 db 242602 db 111603 db 0604 db 0605 db 0606 db 0607 db 0608 db 0609 db 0610 db 128611 db 192612 db 224613 db 240614 db 208615 db 208616 db 16617 db 96618 db 128619 db 0620 db 0621 db 0622 db 0623 db 0624 db 192625 db 240626 db 252627 db 255628 db 63629 db 223630 db 239631 db 118632 db 168633 db 13634 db 16635 db 0636 db 0637 db 0638 db 128639 db 64640 db 0641 db 0642 db 0643 db 0644 db 64645 db 96646 db 96647 db 96648 db 224649 db 128650 db 0651652 db 8653 db 0654 db 0655 db 0656 db 0657 db 8658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 40669 db 97670 db 4671 db 129672 db 42673 db 6674 db 2675 db 1676 db 0677 db 0678 db 0679 db 0680 db 0681 db 0682 db 0683 db 0684 db 0685 db 8686 db 4687 db 0688 db 0689 db 0690 db 0691 db 0692 db 0693 db 0694 db 0695 db 0696 db 0697 db 0698 db 0699 db 0700 db 16701 db 0702 db 0703 db 8704 db 65705 db 3706 db 1707 db 0708 db 0709 db 0710 db 0711 db 0712 db 0713 db 0714 db 0715 db 0716717 db 20718 db 134719 db 32720 db 129721 db 84722 db 96723 db 64724 db 128725 db 0726 db 0727 db 0728 db 0729 db 0730 db 0731 db 0732 db 0733 db 16734 db 0735 db 0736 db 0737 db 0738 db 16739 db 0740 db 0741 db 0742 db 0743 db 0744 db 0745 db 0746 db 0747 db 0748 db 0749 db 8750 db 0751 db 0752 db 16753 db 130754 db 192755 db 128756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 16767 db 32768 db 0769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777 db 0778 db 0779 db 0780 db 0781782 db 0783 db 0784 db 0785 db 1786 db 51787 db 66788 db 2789 db 0790 db 13791 db 18792 db 54793 db 18794 db 12795 db 0796 db 2797 db 3798 db 0799 db 15800 db 113801 db 249802 db 208803 db 201804 db 127805 db 44806 db 99807 db 0808 db 0809 db 0810 db 0811 db 0812 db 0813 db 64814 db 0815 db 0816 db 0817 db 0818 db 32819 db 65820 db 1821 db 1822 db 0823 db 12824 db 28825 db 12826 db 0827 db 0828 db 1829 db 0830 db 0831 db 0832 db 14833 db 127834 db 255835 db 255836 db 255837 db 211838 db 128839 db 0840 db 0841 db 0842 db 0843 db 0844 db 0845 db 0846847 db 0848 db 240849 db 142850 db 159851 db 11852 db 147853 db 254854 db 52855 db 198856 db 0857 db 0858 db 0859 db 0860 db 0861 db 0862 db 2863 db 0864 db 0865 db 0866 db 128867 db 204868 db 66869 db 64870 db 0871 db 176872 db 72873 db 108874 db 72875 db 48876 db 0877 db 64878 db 192879 db 0880 db 0881 db 112882 db 254883 db 255884 db 255885 db 255886 db 203887 db 1888 db 0889 db 0890 db 0891 db 0892 db 0893 db 0894 db 0895 db 0896 db 0897 db 0898 db 0899 db 4900 db 130901 db 128902 db 128903 db 0904 db 48905 db 56906 db 48907 db 0908 db 0909 db 128910 db 0911912 db 0913 db 0914 db 0915 db 0916 db 0917 db 0918 db 0919 db 0920 db 0921 db 0922 db 0923 db 0924 db 0925 db 0926 db 0927 db 0928 db 0929 db 0930 db 0931 db 0932 db 0933 db 0934 db 0935 db 0936 db 0937 db 0938 db 0939 db 0940 db 0941 db 0942 db 0943 db 0944 db 0945 db 0946 db 0947 db 0948 db 0949 db 0950 db 0951 db 0952 db 0953 db 0954 db 0955 db 0956 db 0957 db 0958 db 0959 db 0960 db 0961 db 0962 db 0963 db 0964 db 0965 db 0966 db 0967 db 0968 db 0969 db 0970 db 0971 db 0972 db 0973 db 0974 db 0975 db 0976977 db 0978 db 0979 db 0980 db 0981 db 0982 db 0983 db 0984 db 0985 db 0986 db 0987 db 0988 db 0989 db 0990 db 0991 db 0992 db 0993 db 0994 db 0995 db 0996 db 0997 db 0998 db 0999 db 01000 db 01001 db 01002 db 01003 db 01004 db 01005 db 01006 db 01007 db 01008 db 01009 db 01010 db 01011 db 01012 db 01013 db 01014 db 01015 db 01016 db 01017 db 01018 db 01019 db 01020 db 01021 db 01022 db 01023 db 01024 db 01025 db 01026 db 01027 db 01028 db 01029 db 01030 db 01031 db 01032 db 01033 db 01034 db 01035 db 01036 db 01037 db 01038 db 01039 db 01040 db 010411042 db 01043 db 01044 db 01045 db 01046 db 21047 db 11048 db 01049 db 81050 db 161051 db 01052 db 01053 db 01054 db 01055 db 01056 db 01057 db 01058 db 01059 db 01060 db 121061 db 821062 db 331063 db 21064 db 321065 db 1281066 db 01067 db 01068 db 01069 db 01070 db 01071 db 01072 db 01073 db 01074 db 01075 db 01076 db 01077 db 321078 db 01079 db 21080 db 01081 db 161082 db 01083 db 01084 db 01085 db 01086 db 01087 db 01088 db 01089 db 01090 db 01091 db 01092 db 01093 db 121094 db 641095 db 11096 db 641097 db 01098 db 01099 db 01100 db 01101 db 01102 db 01103 db 01104 db 01105 db 011061107 db 01108 db 01109 db 481110 db 741111 db 1321112 db 641113 db 41114 db 11115 db 01116 db 01117 db 01118 db 01119 db 01120 db 01121 db 01122 db 01123 db 01124 db 01125 db 01126 db 01127 db 641128 db 1281129 db 01130 db 161131 db 81132 db 01133 db 01134 db 01135 db 01136 db 01137 db 01138 db 01139 db 01140 db 01141 db 01142 db 481143 db 21144 db 1281145 db 21146 db 01147 db 01148 db 01149 db 01150 db 01151 db 01152 db 01153 db 01154 db 01155 db 01156 db 01157 db 01158 db 41159 db 01160 db 641161 db 01162 db 81163 db 01164 db 01165 db 01166 db 01167 db 01168 db 01169 db 01170 db 011711172 db 01173 db 01174 db 01175 db 01176 db 01177 db 01178 db 01179 db 01180 db 01181 db 01182 db 01183 db 01184 db 01185 db 01186 db 01187 db 01188 db 01189 db 01190 db 01191 db 01192 db 01193 db 01194 db 01195 db 01196 db 01197 db 01198 db 01199 db 01200 db 01201 db 01202 db 01203 db 01204 db 01205 db 01206 db 01207 db 01208 db 01209 db 01210 db 01211 db 01212 db 01213 db 01214 db 01215 db 01216 db 01217 db 01218 db 01219 db 01220 db 01221 db 01222 db 01223 db 01224 db 01225 db 01226 db 01227 db 01228 db 01229 db 01230 db 01231 db 01232 db 01233 db 01234 db 01235 db 012361237 db 01238 db 01239 db 01240 db 01241 db 01242 db 01243 db 01244 db 01245 db 01246 db 01247 db 01248 db 01249 db 01250 db 01251 db 01252 db 01253 db 01254 db 01255 db 01256 db 01257 db 01258 db 01259 db 01260 db 01261 db 01262 db 01263 db 01264 db 01265 db 01266 db 01267 db 01268 db 01269 db 01270 db 01271 db 01272 db 01273 db 01274 db 01275 db 01276 db 01277 db 01278 db 01279 db 01280 db 01281 db 01282 db 01283 db 01284 db 01285 db 01286 db 01287 db 01288 db 01289 db 01290 db 01291 db 01292 db 01293 db 01294 db 01295 db 01296 db 01297 db 01298 db 01299 db 01300 db 013011302 db 01303 db 01304 db 01305 db 01306 db 141307 db 311308 db 511309 db 551310 db 601311 db 1081312 db 1031313 db 631314 db 281315 db 41316 db 31317 db 01318 db 01319 db 01320 db 01321 db 961322 db 1441323 db 1521324 db 1521325 db 2521326 db 2301327 db 2461328 db 1561329 db 1521330 db 2401331 db 2241332 db 01333 db 01334 db 01335 db 01336 db 01337 db 01338 db 01339 db 121340 db 281341 db 271342 db 71343 db 551344 db 591345 db 201346 db 71347 db 31348 db 01349 db 01350 db 01351 db 01352 db 01353 db 01354 db 961355 db 2401356 db 2401357 db 1041358 db 1561359 db 1721360 db 1121361 db 2401362 db 961363 db 01364 db 01365 db 013661367 db 01368 db 71369 db 251370 db 1211371 db 1211372 db 2071373 db 2061374 db 771375 db 501376 db 11377 db 01378 db 01379 db 21380 db 31381 db 01382 db 01383 db 01384 db 2241385 db 1521386 db 1581387 db 1581388 db 2431389 db 1151390 db 1781391 db 761392 db 1281393 db 321394 db 961395 db 01396 db 01397 db 01398 db 1281399 db 01400 db 01401 db 61402 db 151403 db 471404 db 1181405 db 1201406 db 481407 db 11408 db 01409 db 01410 db 01411 db 11412 db 01413 db 01414 db 01415 db 01416 db 01417 db 961418 db 2401419 db 2441420 db 1101421 db 301422 db 121423 db 1281424 db 01425 db 641426 db 01427 db 01428 db 01429 db 01430 db 014311432 db 41433 db 101434 db 41435 db 641436 db 1601437 db 651438 db 01439 db 41440 db 21441 db 01442 db 01443 db 01444 db 11445 db 01446 db 01447 db 01448 db 321449 db 801450 db 321451 db 21452 db 51453 db 1301454 db 01455 db 01456 db 01457 db 641458 db 1281459 db 01460 db 01461 db 01462 db 01463 db 01464 db 01465 db 41466 db 01467 db 01468 db 641469 db 01470 db 01471 db 21472 db 01473 db 01474 db 01475 db 01476 db 01477 db 01478 db 01479 db 01480 db 01481 db 321482 db 01483 db 01484 db 21485 db 01486 db 01487 db 01488 db 01489 db 1281490 db 01491 db 01492 db 01493 db 01494 db 01495 db 014961497 db 41498 db 321499 db 01500 db 01501 db 1281502 db 11503 db 01504 db 01505 db 21506 db 01507 db 01508 db 01509 db 01510 db 01511 db 01512 db 01513 db 321514 db 41515 db 01516 db 01517 db 11518 db 01519 db 641520 db 01521 db 01522 db 01523 db 01524 db 1281525 db 01526 db 01527 db 01528 db 01529 db 01530 db 01531 db 01532 db 01533 db 01534 db 01535 db 01536 db 01537 db 01538 db 01539 db 01540 db 01541 db 01542 db 01543 db 01544 db 01545 db 01546 db 01547 db 01548 db 01549 db 01550 db 01551 db 01552 db 01553 db 01554 db 01555 db 01556 db 01557 db 01558 db 01559 db 01560 db 01561BattleCodePage2.asm1860SpriteColorExplosion:1861 ../sprites/explosions.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 2553435 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550 db 951 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 25558 db 25559 db 25560 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 2556768 db 969 db 970 db 971 db 972 db 973 db 974 db 975 db 976 db 977 db 978 db 979 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 7586 db 7487 db 7488 db 7489 db 7490 db 7491 db 7592 db 7493 db 7594 db 25595 db 25596 db 25597 db 25598 db 25599 db 255100101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 9109 db 9110 db 9111 db 255112 db 255113 db 255114 db 255115 db 255116 db 255117 db 75118 db 74119 db 74120 db 75121 db 74122 db 74123 db 74124 db 74125 db 75126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133134 db 255135 db 255136 db 255137 db 9138 db 9139 db 9140 db 9141 db 9142 db 9143 db 9144 db 9145 db 9146 db 9147 db 9148 db 9149 db 9150 db 255151 db 255152 db 255153 db 255154 db 74155 db 74156 db 74157 db 74158 db 74159 db 74160 db 74161 db 74162 db 74163 db 74164 db 74165 db 74166167 db 255168 db 9169 db 9170 db 9171 db 9172 db 9173 db 9174 db 9175 db 9176 db 9177 db 9178 db 9179 db 9180 db 9181 db 9182 db 9183 db 255184 db 255185 db 74186 db 75187 db 255188 db 75189 db 74190 db 74191 db 74192 db 74193 db 74194 db 74195 db 74196 db 74197 db 74198 db 74199200 db 9201 db 9202 db 9203 db 9204 db 9205 db 9206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 255214 db 255215 db 255216 db 74217 db 74218 db 74219 db 74220 db 74221 db 74222 db 75223 db 255224 db 75225 db 255226 db 74227 db 75228 db 255229 db 255230 db 255231 db 255232233 db 9234 db 9235 db 9236 db 9237 db 9238 db 9239 db 9240 db 9241 db 9242 db 9243 db 255244 db 255245 db 255246 db 255247 db 255248 db 255249 db 74250 db 74251 db 74252 db 74253 db 74254 db 74255 db 74256 db 75257 db 255258 db 255259 db 255260 db 255261 db 255262 db 255263 db 255264 db 255265266 db 255267 db 255268 db 255269 db 9270 db 9271 db 9272 db 9273 db 9274 db 9275 db 9276 db 9277 db 9278 db 9279 db 9280 db 9281 db 9282 db 255283 db 255284 db 255285 db 75286 db 75287 db 75288 db 74289 db 74290 db 74291 db 74292 db 74293 db 74294 db 74295 db 75296 db 75297 db 75298299 db 255300 db 255301 db 255302 db 9303 db 9304 db 9305 db 9306 db 9307 db 9308 db 9309 db 9310 db 9311 db 9312 db 9313 db 9314 db 9315 db 255316 db 255317 db 255318 db 75319 db 75320 db 75321 db 74322 db 74323 db 74324 db 74325 db 74326 db 74327 db 74328 db 75329 db 75330 db 75331332 db 9333 db 9334 db 9335 db 9336 db 9337 db 9338 db 9339 db 9340 db 255341 db 255342 db 255343 db 255344 db 255345 db 255346 db 255347 db 255348 db 75349 db 75350 db 75351 db 75352 db 75353 db 74354 db 75355 db 255356 db 255357 db 255358 db 255359 db 255360 db 255361 db 255362 db 255363 db 255364365 db 9366 db 9367 db 9368 db 9369 db 9370 db 9371 db 9372 db 9373 db 255374 db 255375 db 255376 db 255377 db 255378 db 255379 db 255380 db 255381 db 75382 db 75383 db 75384 db 75385 db 75386 db 74387 db 75388 db 255389 db 255390 db 255391 db 255392 db 255393 db 255394 db 255395 db 255396 db 255397398 db 255399 db 9400 db 9401 db 9402 db 9403 db 9404 db 9405 db 9406 db 9407 db 9408 db 9409 db 9410 db 9411 db 255412 db 9413 db 9414 db 255415 db 255416 db 75417 db 74418 db 74419 db 74420 db 74421 db 75422 db 75423 db 74424 db 74425 db 75426 db 255427 db 255428 db 75429 db 255430431 db 255432 db 9433 db 9434 db 9435 db 9436 db 9437 db 9438 db 9439 db 9440 db 9441 db 9442 db 9443 db 9444 db 255445 db 9446 db 9447 db 255448 db 255449 db 75450 db 74451 db 74452 db 74453 db 74454 db 75455 db 75456 db 74457 db 74458 db 75459 db 255460 db 255461 db 75462 db 255463464 db 255465 db 255466 db 255467 db 255468 db 255469 db 255470 db 255471 db 255472 db 255473 db 255474 db 255475 db 255476 db 255477 db 255478 db 255479 db 255480 db 255481 db 255482 db 255483 db 255484 db 255485 db 255486 db 255487 db 255488 db 255489 db 255490 db 255491 db 255492 db 255493 db 255494 db 255495 db 255496497 db 255498 db 255499 db 255500 db 255501 db 255502 db 255503 db 255504 db 255505 db 255506 db 255507 db 255508 db 255509 db 255510 db 255511 db 255512 db 255513 db 255514 db 255515 db 255516 db 255517 db 255518 db 255519 db 255520 db 255521 db 255522 db 255523 db 255524 db 255525 db 255526 db 255527 db 255528 db 255529530 db 255531 db 255532 db 9533 db 9534 db 9535 db 9536 db 9537 db 9538 db 9539 db 255540 db 255541 db 255542 db 255543 db 255544 db 255545 db 255546 db 255547 db 255548 db 255549 db 75550 db 75551 db 75552 db 75553 db 75554 db 255555 db 255556 db 255557 db 255558 db 255559 db 255560 db 255561 db 255562563 db 255564 db 255565 db 9566 db 9567 db 9568 db 9569 db 9570 db 9571 db 9572 db 255573 db 255574 db 255575 db 255576 db 255577 db 255578 db 255579 db 255580 db 255581 db 255582 db 75583 db 75584 db 75585 db 75586 db 75587 db 255588 db 255589 db 255590 db 255591 db 255592 db 255593 db 255594 db 255595596 db 255597 db 255598 db 255599 db 255600 db 255601 db 255602 db 255603 db 255604 db 255605 db 255606 db 255607 db 255608 db 255609 db 255610 db 255611 db 255612 db 255613 db 255614 db 255615 db 255616 db 255617 db 255618 db 255619 db 255620 db 255621 db 255622 db 255623 db 255624 db 255625 db 255626 db 255627 db 255628629 db 255630 db 255631 db 255632 db 255633 db 255634 db 255635 db 255636 db 255637 db 255638 db 255639 db 255640 db 255641 db 255642 db 255643 db 255644 db 255645 db 255646 db 255647 db 255648 db 255649 db 255650 db 255651 db 255652 db 255653 db 255654 db 255655 db 255656 db 255657 db 255658 db 255659 db 255660 db 255661662 db 255663 db 255664 db 255665 db 9666 db 9667 db 9668 db 9669 db 9670 db 9671 db 9672 db 9673 db 9674 db 9675 db 9676 db 9677 db 255678 db 255679 db 255680 db 255681 db 255682 db 75683 db 74684 db 74685 db 74686 db 74687 db 74688 db 74689 db 74690 db 74691 db 75692 db 255693 db 255694695 db 255696 db 9697 db 9698 db 9699 db 9700 db 9701 db 9702 db 9703 db 9704 db 9705 db 9706 db 9707 db 9708 db 9709 db 255710 db 9711 db 255712 db 255713 db 75714 db 74715 db 74716 db 74717 db 74718 db 75719 db 75720 db 255721 db 75722 db 255723 db 75724 db 255725 db 255726 db 255727728 db 9729 db 9730 db 9731 db 9732 db 9733 db 9734 db 255735 db 9736 db 9737 db 9738 db 9739 db 255740 db 9741 db 255742 db 255743 db 255744 db 255745 db 75746 db 255747 db 255748 db 75749 db 255750 db 255751 db 75752 db 255753 db 75754 db 255755 db 255756 db 255757 db 255758 db 255759 db 255760761 db 9762 db 9763 db 255764 db 255765 db 9766 db 9767 db 9768 db 255769 db 9770 db 255771 db 255772 db 9773 db 255774 db 255775 db 255776 db 255777 db 255778 db 255779 db 255780 db 255781 db 255782 db 255783 db 255784 db 255785 db 255786 db 255787 db 255788 db 255789 db 255790 db 255791 db 255792 db 255793BattleCodePage2.asm1863SpriteCharBeingHit:1864 incbin "../sprites/sprconv FOR SINGLE SPRITES/BeingHitSprite.spr"1865SpriteColorBeingHit:1866 ds 16,colorred| ds 16,colorsnowishwhite+64 | ds 16,colorwhite+641868HandleExplosionSprite:18691872 dec a1873 jp z,BeingHitSprite1875 ld a,(MonsterThatIsBeingAttackedNX)1876 cp 171877 jp c,SmallExplosionSprite1878 jp BigExplosionSprite1880 BeingHitSprite:1881 ld a,(MonsterThatIsBeingAttackedY)1882 ld b,a1883 ld a,(MonsterThatIsBeingAttackedNY)1884 add a,b 1885 sub a,161886 ld (spat+4*16),a1887 ld (spat+4*17),a1888 ld (spat+4*18),a1890 1895 ld a,(MonsterThatIsBeingAttackedX)1896 ld b,a1897 ld a,(MonsterThatIsBeingAttackedNX)1898 sub a,161899 srl a 1900 add a,b 1901 ld (spat+4*16+1),a1902 ld (spat+4*17+1),a1903 ld (spat+4*18+1),a1905 xor a 1906 ld hl,sprcharaddr+(16*32) 1907 call SetVdp_Write1909 ld a,(ExplosionSpriteStep)1910 cp 21911 ld hl,SpriteCharBeingHit + 0*961912 jr c,.CharFound1913 cp 41914 ld hl,SpriteCharBeingHit + 1*961915 jr c,.CharFound1916 ld hl,SpriteCharBeingHit + 2*961917 .CharFound:1918 ld c,$981919 call outix96 1921 xor a 1922 ld hl,sprcoladdr+(16*16) 1923 call SetVdp_Write1925 ld hl,SpriteColorBeingHit1926 ld c,$981927 call outix48 1929 ld a,(ExplosionSpriteStep)1930 inc a1931 ld (ExplosionSpriteStep),a1932 cp 61933 ret c1934 1935 ld a,213+16 1936 ld (spat+4*16),a1937 ld (spat+4*17),a1938 ld (spat+4*18),a1940 xor a1941 ld (ShowExplosionSprite?),a 1942 ret 1944 SmallExplosionSprite:1945 ld a,(MonsterThatIsBeingAttackedY)1946 ld b,a1947 ld a,(MonsterThatIsBeingAttackedNY)1948 add a,b 1949 sub a,161950 ld (spat+4*16),a1951 ld (spat+4*17),a1953 1958 ld a,(MonsterThatIsBeingAttackedX)1959 ld b,a1960 ld a,(MonsterThatIsBeingAttackedNX)1961 sub a,161962 srl a 1963 add a,b 1964 ld (spat+4*16+1),a1965 ld (spat+4*17+1),a1967 xor a 1968 ld hl,sprcharaddr+(16*32) 1969 call SetVdp_Write1971 ld a,(ExplosionSpriteStep)1972 cp 41973 ld hl,SpriteCharExplosion + 0*64 + 5*2561974 jr c,.CharFound1975 cp 81976 ld hl,SpriteCharExplosion + 1*64 + 5*2561977 jr c,.CharFound1978 cp 121979 ld hl,SpriteCharExplosion + 2*64 + 5*2561980 jr c,.CharFound1981 ld hl,SpriteCharExplosion + 3*64 + 5*2561982 .CharFound:1983 ld c,$981984 call outix64 1986 xor a 1987 ld hl,sprcoladdr+(16*16) 1988 call SetVdp_Write1990 ld a,(ExplosionSpriteStep)1991 cp 41992 ld hl,SpriteColorExplosion + 0*32 + 5*1281993 jr c,.ColorFound1994 cp 81995 ld hl,SpriteColorExplosion + 1*32 + 5*1281996 jr c,.ColorFound1997 cp 121998 ld hl,SpriteColorExplosion + 2*32 + 5*1281999 jr c,.ColorFound2000 ld hl,SpriteColorExplosion + 3*32 + 5*1282001 .ColorFound:2002 ld c,$982003 call outix32 2005 ld a,(ExplosionSpriteStep)2006 inc a2007 ld (ExplosionSpriteStep),a2008 cp 162009 ret c2010 2011 ld a,213+16 2012 ld (spat+4*16),a2013 ld (spat+4*17),a2014 ld (spat+4*18),a2016 xor a2017 ld (ShowExplosionSprite?),a 2018 ret2020 BigExplosionSprite:2021 ld a,(MonsterThatIsBeingAttackedY)2022 ld b,a2023 ld a,(MonsterThatIsBeingAttackedNY)2024 add a,b 2025 sub a,322026 ld (spat+4*16),a2027 ld (spat+4*17),a2028 ld (spat+4*18),a2029 ld (spat+4*19),a2030 add a,162031 ld (spat+4*20),a2032 ld (spat+4*21),a2033 ld (spat+4*22),a2034 ld (spat+4*23),a2036 2040 ld a,(MonsterThatIsBeingAttackedX)2041 ld b,a2042 ld a,(MonsterThatIsBeingAttackedNX)2043 sub a,322044 srl a 2045 add a,b 2046 ld (spat+4*16+1),a2047 ld (spat+4*17+1),a2048 ld (spat+4*20+1),a2049 ld (spat+4*21+1),a 2050 add a,162051 ld (spat+4*18+1),a2052 ld (spat+4*19+1),a2053 ld (spat+4*22+1),a2054 ld (spat+4*23+1),a2056 xor a 2057 ld hl,sprcharaddr+(16*32) 2058 call SetVdp_Write2060 ld a,(ExplosionSpriteStep)2061 cp 42062 ld hl,SpriteCharExplosion + 0*2562063 jr c,.CharFound2064 cp 82065 ld hl,SpriteCharExplosion + 1*2562066 jr c,.CharFound2067 cp 122068 ld hl,SpriteCharExplosion + 2*2562069 jr c,.CharFound2070 cp 162071 ld hl,SpriteCharExplosion + 3*2562072 jr c,.CharFound2073 ld hl,SpriteCharExplosion + 4*2562074 .CharFound:2075 ld c,$982076 call outix256 2078 xor a 2079 ld hl,sprcoladdr+(16*16) 2080 call SetVdp_Write2082 ld a,(ExplosionSpriteStep)2083 cp 42084 ld hl,SpriteColorExplosion + 0*1282085 jr c,.ColorFound2086 cp 82087 ld hl,SpriteColorExplosion + 1*1282088 jr c,.ColorFound2089 cp 122090 ld hl,SpriteColorExplosion + 2*1282091 jr c,.ColorFound2092 cp 162093 ld hl,SpriteColorExplosion + 3*1282094 jr c,.ColorFound2095 ld hl,SpriteColorExplosion + 4*1282096 .ColorFound:2097 ld c,$982098 call outix128 2100 ld a,(ExplosionSpriteStep)2101 inc a2102 ld (ExplosionSpriteStep),a2103 cp 202104 ret c2105 2106 ld a,213+16 2107 ld (spat+4*16),a2108 ld (spat+4*17),a2109 ld (spat+4*18),a2110 ld (spat+4*19),a2111 ld (spat+4*20),a2112 ld (spat+4*21),a2113 ld (spat+4*22),a2114 ld (spat+4*23),a2116 xor a2117 ld (ShowExplosionSprite?),a 2118 ret2120ClearBattleText:2121 ld hl,.BattleTextPointer2122 ld de,BattleTextPointer2123 ld bc,.EndBattleText-.BattleTextPointer2124 ldir2125 ret2127.BattleTextPointer: dw BattleText22128.BattleRound: db 12129.SetBattleText?: db 2 2130.BattleText8: db 0 | dw 0000 | db 0 ,"           ",255 2131.BattleText7: db 0 | dw 0000 | db 0 ,"           ",255 2132.BattleText6: db 0 | dw 0000 | db 0 ,"           ",255 2133.BattleText5: db 0 | dw 0000 | db 0 ,"           ",255 2134.BattleText4: db 0 | dw 0000 | db 0 ,"           ",255 2135.BattleText3: db 0 | dw 0000 | db 0 ,"           ",255 2136.BattleText2: db 0 | dw 0000 | db 0 ,"           ",255 2137.BattleText1: db 5 | dw 0001 | db 0 ,"           ",255 2138.BattleTextQ: db 0 | dw 0000 | db 0 ,"           ",255 2139.EndBattleText:2141SetBattleText:2142 ld a,(LeftOrRightPlayerLostEntireArmy?)2143 or a2144 ret nz2146 ld a,(SetBattleText?)2147 dec a2148 ret m2149 ld (SetBattleText?),a2150 dec a2151 call z,.MoveEveryTextEntry1PositionUp2154 cp 72155 jp z,.EndSetBattleText2157 .SetBattleTextWithoutMovingEntries:2158 call .CleanTextField2160 ld ix,(BattleTextPointer)2161 ld c,195+16 2162 call .SetText2163 ld de,BattleTextQ-BattleText12164 add ix,de2165 ld c,203+16 2166 call .SetText2167 ret2169 .SetText:2170 ld b,060 2172 ld a,(ix) 2173 dec a2174 jp z,.wait2175 dec a2176 jp z,.defend2177 dec a2178 jp z,.DealDamage2179 dec a21802181 dec a2182 jp z,.NextRound 2183 dec a2184 jp z,.EarthBound2185 dec a2186 jp z,.PlateArmor2187 dec a2188 jp z,.Resurrection2189 dec a2190 jp z,.EarthShock2191 dec a2192 jp z,.Curse 2193 dec a2194 jp z,.BlindingFog 2195 dec a2196 jp z,.Implosion2197 dec a2198 jp z,.Sunstrike2199 dec a2200 jp z,.Haste2201 dec a2202 jp z,.ShieldBreaker 2203 dec a2204 jp z,.ClawBack2205 dec a2206 jp z,.SpellBubble2207 dec a2208 jp z,.Cure2209 dec a2210 jp z,.IcePeak2211 dec a2212 jp z,.Hypnosis 2213 dec a2214 jp z,.FrostRing2215 dec a2216 jp z,.MagicArrows2217 dec a2218 jp z,.Frenzy2219 dec a2220 jp z,.Teleport2221 dec a2222 jp z,.PrimalInstinct 2223 ret2225 .PrimalInstinct:2226 call .PutMonsterNameAndLetterS2227 ld hl,.TextPlus3dmgdefspd2228 jp SetText 2229 .TextPlus3dmgdefspd: db "+3 all stats",2552231 .Teleport:2232 call .PutMonsterNameAndLetterS2233 ld hl,.TextTeleported2234 jp SetText 2235 .TextTeleported: db "Teleported",2552237 .Frenzy:2238 call .PutMonsterNameAndLetterS2239 ld hl,.TextFrenzy2240 jp SetText 2241 .TextFrenzy: db "Frenzy",2552243 .MagicArrows:2244 ld hl,.TextMagicArrowsdmg2245 jp .EntryAOESpells2246 .TextMagicArrowsdmg: db "Magic Arrows dmg: ",2552248 .FrostRing:2249 ld hl,.TextFrostRingAOEdmg2250 jp .EntryAOESpells2251 .TextFrostRingAOEdmg: db "Frost Ring AOE dmg: ",2552253 .Hypnosis:2254 call .PutMonsterNameAndLetterS2255 ld hl,.TextHypnotized2256 jp SetText 2257 .TextHypnotized: db "Hypnotized",2552259 .IcePeak:2260 ld hl,.TextIcePeakdmg2261 jp .EntryAOESpells2262 .TextIcePeakdmg: db "Ice Peak dmg: ",2552264 .Cure:2265 call .PutMonsterNameAndLetterS2266 ld hl,.TextCured2267 jp SetText 2268 .TextCured: db "Cured",2552270 .SpellBubble:2271 call .PutMonsterNameAndLetterS2272 ld hl,.TextSpellBubble2273 jp SetText 2274 .TextSpellBubble: db "Spell Bubble",2552276 .ClawBack:2277 call .PutMonsterNameAndLetterS2278 ld hl,.TextClawBack2279 jp SetText 2280 .TextClawBack: db "Claw Back",2552282 .ShieldBreaker:2283 call .PutMonsterNameAndLetterS2284 ld hl,.TextMinus4Defense2285 jp SetText 2286 .TextMinus4Defense: db "-4 def",2552288 .Haste:2289 call .PutMonsterNameAndLetterS2290 ld hl,.TextPlus3Speed2291 jp SetText 2292 .TextPlus3Speed: db "+3 spd",2552294 .Sunstrike:2295 ld hl,.TextSunstrikedmg2296 jp .EntryAOESpells2297 .TextSunstrikedmg: db "Sunstrike dmg: ",2552299 .Implosion:2300 ld hl,.TextImplosionAOEdmg2301 jp .EntryAOESpells2302 .TextImplosionAOEdmg: db "Implosion AOE dmg: ",2552304 .BlindingFog:2305 call .PutMonsterNameAndLetterS2306 ld hl,.TextMinus50PercentDamage2307 jp SetText 2308 .TextMinus50PercentDamage: db "-50% dmg",2552310 .Curse:2311 call .PutMonsterNameAndLetterS2312 ld hl,.TextMinus3Damage2313 jp SetText 2314 .TextMinus3Damage: db "-3 dmg",2552316 .EarthShock:2317 ld hl,.TextEarthShockAOEdmg2318 .EntryAOESpells:2319 push bc2320 call SetText 2321 pop bc2322 ld hl,(AEOSpellDamage)2323 ld a,(PutLetter+dx) 2324 ld b,a 2325 push bc2326 call SetNumber16BitCastle2327 pop bc2328 ret2329 .TextEarthShockAOEdmg: db "Earthshock AOE dmg: ",2552331 .Resurrection:2332 call .PutMonsterNameAndLetterS2333 ld hl,.TextResurrected2334 jp SetText 2335 .TextResurrected: db "Resurrected",2552337 .PlateArmor:2338 call .PutMonsterNameAndLetterS2339 ld hl,.TextPlus5Defense2340 jp SetText 2341 .TextPlus5Defense: db "+5 def",2552343 .EarthBound:2344 call .PutMonsterNameAndLetterS2345 ld hl,.Textminus50PercentSpeed2346 jp SetText 2347 .Textminus50PercentSpeed: db "-50% spd",2552350 .PutMonsterNameAndLetterS:2351 push ix2352 pop hl2353 ld de,42354 add hl,de 2355 push bc2356 call SetText 2357 pop bc23592360 dec hl2361 ld a,(hl)2362 cp "s"2363 ret z 2365 ld a,(ix+3) 2366 dec a2367 ret z 2369 ld hl,.TextLetterS2371 ld a,(PutLetter+dx) 2372 ld b,a 2373 push bc2374 call SetText 2375 pop bc2377 ld a,(PutLetter+dx) 2378 ld b,a 2379 ret2380.TextLetterS: db "s: ",2552397 .NextRound:2398 ld a,(ix+1) 2399 dec a2400 jr z,.CombatStart2402 ld hl,.TextRound2403 push bc2404 call SetText 2405 pop bc2407 ld a,(ix+1) 2408 ld h,02409 ld l,a2410 ld a,(PutLetter+dx) 2411 ld b,a 2412 push bc2413 call SetNumber16BitCastle2414 pop bc2416 ld hl,.TextBegins2417 ld a,(PutLetter+dx) 2418 ld b,a 2420 call SetText 2422 ret2424 .CombatStart:2425 ld hl,.TextCombatStart2426 call SetText 2427 ret2428 2429.TextCombatStart: db "      Combat Start",2552430.TextRound: db "Round ",2552431.TextBegins: db " begins.",2552433 .defend:2434 push ix2435 pop hl2436 ld de,42437 add hl,de 2438 push bc2439 call SetText 2440 pop bc2442 dec hl2443 ld a,(hl)2444 cp "s"2445 ld hl,.TextdefendMultipleUnits2446 jr nz,.EndCheckNameEndsWithS_defend2447 ld hl,.TextdefendMultipleUnits+12448 .EndCheckNameEndsWithS_defend:2450 ld a,(ix+3) 2451 dec a2452 jr nz,.AmountFound22453 ld hl,.TextdefendSingleUnit2454 .AmountFound2:2455 ld a,(PutLetter+dx) 2456 ld b,a 2457 push bc2458 call SetText 2459 pop bc2461 ld hl,.TextdefendOpenPlus2462 ld a,(PutLetter+dx) 2463 add a,22464 ld b,a 2465 push bc2466 call SetText 2467 pop bc2469 ld a,(ix+1) 2470 ld h,02471 ld l,a2472 ld a,(PutLetter+dx) 2473 ld b,a 2474 push bc2475 call SetNumber16BitCastle2476 pop bc2478 ld hl,.Textdef2479 ld a,(PutLetter+dx) 2480 add a,12481 ld b,a 2483 call SetText 2485 ret2487.TextdefendOpenPlus: db "(+",2552488.TextdefendSingleUnit: db " defends.",2552489.TextdefendMultipleUnits: db "s defend.",2552490.Textdef: db "def)",2552492 .wait:2493 ld hl,.TextThe2494 push bc2495 call SetText 2496 pop bc2498 push ix2499 pop hl2500 ld de,42501 add hl,de 2502 ld a,(PutLetter+dx) 2503 ld b,a 2504 push bc2505 call SetText 2506 pop bc2509 dec hl2510 ld a,(hl)2511 cp "s"2512 ld hl,.TextwaitsMultipleUnits2513 jr nz,.EndCheckNameEndsWithS_wait2514 ld hl,.TextwaitsMultipleUnits+12515 .EndCheckNameEndsWithS_wait:2517 ld a,(ix+3) 2518 dec a2519 jr nz,.AmountFound12520 ld hl,.TextwaitsSingleUnit2521 .AmountFound1:2523 ld a,(PutLetter+dx) 2524 ld b,a 2526 call SetText 2528 ret2529.TextThe: db "The ",2552530.TextwaitsSingleUnit: db " waits.",2552531.TextwaitsMultipleUnits: db "s wait.",2552534.DealDamage:2535 push ix2536 pop hl2537 ld de,42538 add hl,de 2539 push bc2540 call SetText 2541 pop bc2544 dec hl2545 ld a,(hl)2546 cp "s"2547 ld hl,.TextdealdamageMultipleUnits2548 jr nz,.EndCheckNameEndsWithS_dealdamage2549 ld hl,.TextdealdamageMultipleUnits+12550 .EndCheckNameEndsWithS_dealdamage:2554 ld a,(ix+3) 2555 dec a2556 jr nz,.AmountFound32557 ld hl,.TextdealdamageSingleUnit2558 .AmountFound3:2560 ld a,(PutLetter+dx) 2561 ld b,a 2562 push bc2563 call SetText 2564 pop bc2566 ld l,(ix+1) 2567 ld h,(ix+2) 2568 ld a,(PutLetter+dx) 2569 ld b,a 2570 push bc2571 call SetNumber16BitCastle2572 pop bc2574 ld hl,.TextsDMG2575 ld a,(PutLetter+dx) 2576 ld b,a 2578 call SetText 2580 ret2581.TextdealdamageSingleUnit: db " deals ",2552582.TextdealdamageMultipleUnits: db "s deal ",2552583.TextsDMG: db " dmg.",2552585.EndSetBattleText:2586 xor a2587 ld (SetBattleText?),a2588 ret2590.MoveEveryTextEntry1PositionUp:2591 ld hl,BattleText72592 ld de,BattleText82593 ld bc,BattleTextQ-BattleText82594 ldir25952597.ResetBattleTextPointer:2598 ld hl,BattleText22599 ld (BattleTextPointer),hl2600 ret2602.CleanTextField:2603 ld hl,$4000 + (195*128) + (060/2) - 1282604 ld de,$0000 + ((195+16)*128) + (060/2) - 1282605 ld bc,$0000 + (014*256) + (118/2)2606 ld a,BattleFieldWinterBlock 2607 jp CopyRamToVramCorrectedCastleOverview 26092610AttackingHeroTakesItemsDefendingHero:2611 ld ix,(plxcurrentheroAddress) 2612 ld iy,(HeroThatGetsAttacked) 2613 push iy2614 pop hl2615 ld a,l2616 or h2617 ret z 2619 ld d,9 + 6 2620 .PassItemLoop:2621 call .PassItem2622 inc ix2623 inc iy2624 dec d2625 jr nz,.PassItemLoop2626 ret2627 2628 .PassItem:2629 ld a,(iy+HeroInventory)2630 cp 045 2631 ret z2632 ld c,a2633 ld a,(ix+HeroInventory)2634 cp 045 2635 jr z,.EmptyBodySlotFound2636 2637 push ix2638 ld ix,(plxcurrentheroAddress) 2639 ld b,6 2640 .loop:2641 ld a,(ix+HeroInventory+9)2642 cp 0452643 jr z,.EmptyOpenSlotFound2644 inc ix2645 djnz .loop2646 pop ix2647 ret2649 .EmptyBodySlotFound:2650 ld (ix+HeroInventory),c2651 ret2652 .EmptyOpenSlotFound:2653 ld (ix+HeroInventory+9),c2654 pop ix2655 ret2657SetSpellExplanation:2658 ld a,b 2659 ld (MenuOptionSelected?Backup),a2661 ld a,12662 ld (SpellExplanationDisplayed?),a2664 xor a 2665 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2667 call .SetDescriptionTexticonCostAndDamage26682673 ld a,1 2674 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2675 ret2686 .SetDescriptionTexticonCostAndDamage:2687 2688 exx2689 ld hl,0 2690 exx2691 ld a,(MenuOptionSelected?Backup)2692 dec a2693 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools12694 ld de,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282695 ld b,CostAllSpellSchools12696 jp z,.GoSetDescriptionTexticonCostAndDamage2698 2702 dec a2703 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools22704 ld de,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282705 ld b,CostAllSpellSchools22706 jp z,.GoSetDescriptionTexticonCostAndDamage2708 2712 dec a2713 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools32714 ld de,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282715 ld b,CostAllSpellSchools32716 jp z,.GoSetDescriptionTexticonCostAndDamage2718 2719 push af2720 exx2721 call GetMagicArrowsDMGAmount 2722 exx2723 pop af2725 dec a2726 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools42727 ld de,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282728 ld b,CostAllSpellSchools42729 jp z,.GoSetDescriptionTexticonCostAndDamage2731 ld a,(SelectedElementInSpellBook) 2732 or a2733 jp z,.SetSpellExplanationEarth2734 dec a2735 jp z,.SetSpellExplanationFire2736 dec a2737 jp z,.SetSpellExplanationAir2738 2739 .SetSpellExplanationWater:2740 2741 exx2742 call GetFrostRingDMGAmount 2743 exx2744 ld a,(MenuOptionSelected?Backup)2745 cp 5 2746 ld hl,SpellDescriptionsBattle.Descriptionwater12747 ld de,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282748 ld b,CostWaterSpell12749 jp z,.GoSetDescriptionTexticonCostAndDamage2751 2752 exx2753 ld hl,0 2754 exx27552756 cp 6 2757 ld hl,SpellDescriptionsBattle.Descriptionwater22758 ld de,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282759 ld b,CostWaterSpell22760 jp z,.GoSetDescriptionTexticonCostAndDamage2762 2763 exx2764 call GetIceBoltDMGAmount 2765 exx2766 ld a,(MenuOptionSelected?Backup)2767 cp 7 2768 ld hl,SpellDescriptionsBattle.Descriptionwater32769 ld de,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282770 ld b,CostWaterSpell32771 jp z,.GoSetDescriptionTexticonCostAndDamage2773 2774 exx2775 call GetCureAmount 2776 exx2777 ld hl,SpellDescriptionsBattle.Descriptionwater42778 ld de,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282779 ld b,CostWaterSpell42780 jp .GoSetDescriptionTexticonCostAndDamage_Cure2782 .SetSpellExplanationAir:2783 2784 exx2785 ld hl,0 2786 exx2787 ld a,(MenuOptionSelected?Backup)2788 cp 5 2789 ld hl,SpellDescriptionsBattle.DescriptionAir12790 ld de,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282791 ld b,CostAirSpell12792 jp z,.GoSetDescriptionTexticonCostAndDamage2794 2795 cp 6 2796 ld hl,SpellDescriptionsBattle.DescriptionAir22797 ld de,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1282798 ld b,CostAirSpell22799 jp z,.GoSetDescriptionTexticonCostAndDamage2801 2802 cp 7 2803 ld hl,SpellDescriptionsBattle.DescriptionAir32804 ld de,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1282805 ld b,CostAirSpell32806 jp z,.GoSetDescriptionTexticonCostAndDamage2808 2809 ld hl,SpellDescriptionsBattle.DescriptionAir42810 ld de,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1282811 ld b,CostAirSpell42812 jp .GoSetDescriptionTexticonCostAndDamage2814 .SetSpellExplanationFire:2815 2816 exx2817 call GetsunstrikeDMGAmount 2818 exx2819 ld a,(MenuOptionSelected?Backup)2820 cp 5 2821 ld hl,SpellDescriptionsBattle.DescriptionFire12822 ld de,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282823 ld b,CostFireSpell12824 jp z,.GoSetDescriptionTexticonCostAndDamage2826 2827 exx2828 call GetimplosionDMGAmount 2829 exx2830 ld a,(MenuOptionSelected?Backup)2831 cp 6 2832 ld hl,SpellDescriptionsBattle.DescriptionFire22833 ld de,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282834 ld b,CostFireSpell22835 jp z,.GoSetDescriptionTexticonCostAndDamage2837 2838 exx2839 ld hl,0 2840 exx2841 ld a,(MenuOptionSelected?Backup)2842 cp 7 2843 ld hl,SpellDescriptionsBattle.DescriptionFire32844 ld de,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282845 ld b,CostFireSpell32846 jp z,.GoSetDescriptionTexticonCostAndDamage2848 2852 ld hl,SpellDescriptionsBattle.DescriptionFire42853 ld de,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282854 ld b,CostFireSpell42855 jp .GoSetDescriptionTexticonCostAndDamage2857 .SetSpellExplanationEarth:2858 2859 exx2860 call GetEarthShockDMGAmount 2861 exx2862 ld a,(MenuOptionSelected?Backup)2863 cp 5 2864 ld hl,SpellDescriptionsBattle.DescriptionEarth12865 ld de,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282866 ld b,CostEarthSpell12867 jp z,.GoSetDescriptionTexticonCostAndDamage2869 2870 exx2871 call GetResurrectionAmount 2872 exx2873 ld a,(MenuOptionSelected?Backup)2874 cp 6 2875 ld hl,SpellDescriptionsBattle.DescriptionEarth22876 ld de,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282877 ld b,CostEarthSpell22878 jp z,.GoSetDescriptionTexticonCostAndDamage_Resurrection2880 2881 exx2882 ld hl,0 2883 exx2884 ld a,(MenuOptionSelected?Backup)2885 cp 7 2886 ld hl,SpellDescriptionsBattle.DescriptionEarth32887 ld de,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282888 ld b,CostEarthSpell32889 jp z,.GoSetDescriptionTexticonCostAndDamage2891 2895 ld hl,SpellDescriptionsBattle.DescriptionEarth42896 ld de,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282897 ld b,CostEarthSpell42898 jp .GoSetDescriptionTexticonCostAndDamage2900 .GoSetDescriptionTexticonCostAndDamage_Resurrection:2901 exx2902 push hl 2903 ld hl,02904 exx2905 call .GoSetDescriptionTexticonCostAndDamage2906 pop hl 2907 push iy2908 ld b,SpellBookX + 0772909 ld c,SpellBookY + 1662910 call SetNumber16BitCastle2911 pop iy2912 ret2914 .GoSetDescriptionTexticonCostAndDamage_Cure:2915 exx2916 push hl 2917 ld hl,02918 exx2919 call .GoSetDescriptionTexticonCostAndDamage2920 pop hl 2921 push iy2922 ld b,SpellBookX + 892923 ld c,SpellBookY + 1732924 call SetNumber16BitCastle2925 pop iy2926 ret2928 .GoSetDescriptionTexticonCostAndDamage:2929 push bc 2930 push de 2931 2932 2933 ld b,SpellBookX + 0302934 ld c,SpellBookY + 1592935 call SetText2936 2937 pop hl 2938 ld de,$0000 + ((SpellBookY + 160) *128) + ((SpellBookX+10)/2)2939 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2940 ld a,SpellBookGraphicsBlock 2941 call CopyRamToVramCorrectedWithoutActivePageSetting 2942 2943 pop bc 2944 push bc2945 .CostAmountFound:2946 ld l,b2947 ld h,02948 ld b,SpellBookX + 1742949 ld c,SpellBookY + 1592950 push iy2951 call SetNumber16BitCastle2952 pop iy2954 ld b,SpellBookX + 1482955 ld c,SpellBookY + 1592956 ld hl,.TextCost2957 call SetText2959 pop bc 2960 .DamageAmountFound:2961 exx 2962 ld a,l2963 or h2964 ret z2965 push iy2966 ld b,SpellBookX + 1682967 ld c,SpellBookY + 17329682970 call SetNumber16BitCastle29712972 pop iy2974 ld b,SpellBookX + 1322975 ld c,SpellBookY + 1732976 ld hl,.TextDamage2977 jp SetText2978 .TextDamage: db "Damage:",2552979 .TextCost: db "Cost:",255 2980 2992SpellDescriptionsBattle:2993.DescriptionEarth4: db "Earthbound",2542994 db "Reduces the speed of the selected",2542995 db "enemy unit by 50%",2552997.DescriptionEarth3: db "Plate Armor",2542998 db "Increases the defense of the selected",2542999 db "friendly unit by 5.",2553001.DescriptionEarth2: db "Resurrection",2543002 db "Reanimates     HP of killed living",2543003 db "friendly creatures.",2553005.DescriptionEarth1: db "Earthshock",2543006 db "Deals damage to all creatures in target",2543007 db "and adjacent hexes.",2553010.DescriptionFire4: db "Curse",2543011 db "Causes the selected enemy unit to deal",2543012 db "-3 damage when attacking.",2553014.DescriptionFire3: db "Blinding Fog",2543015 db "Target ranged unit deals 50% less",2543016 db "damage.",2553018.DescriptionFire2: db "Implosion",2543019 db "Deals damage to enemy unit and",2543020 db "adjecent units.",2553022.DescriptionFire1: db "Sunstrike",2543023 db "Calls down a solar beam to incinerate",2543024 db "a single enemy unit.",2553026.Descriptionair4: db "Haste",2543027 db "Increases the speed of the selected",2543028 db "friendly unit by 3.",2553030.Descriptionair3: db "Shieldbreaker",2543031 db "Reduces the defense of the selected ",2543032 db "enemy unit by 4.",2553034.Descriptionair2: db "Claw Back",2543035 db "Target allied unit has unlimited",2543036 db "retaliations each round.",2553038.Descriptionair1: db "Spell Bubble",2543039 db "Target friendly unit has a 75% chance",2543040 db "to deflect a single enemy spell.",2553043.Descriptionwater4: db "Cure",2543044 db "Removes all negative spell effects",2543045 db "and heals for     HP.",2553047.Descriptionwater3: db "Ice Peak",2543048 db "Conjures an ice shard from the ground,",2543049 db "impaling a single enemy.",2553051.Descriptionwater2: db "Hypnosis",2543052 db "Enemy unit cant attack until attacked,",2543053 db "dispelled or effect wears off.",2553056.Descriptionwater1: db "Frost Ring",2543057 db "Causes damage to all units adjacent to",2543058 db "the central hex.",2553061.DescriptionAllSpellSchools4: db "magic arrows",2543062 db "Unleashes a relentless volley of arrows",2543063 db "at a single enemy unit.",2553065.DescriptionAllSpellSchools3: db "Frenzy",2543066 db "Friendly unit's damage increases by 5",2543067 db "while its defense decreases by 5.",2553069.DescriptionAllSpellSchools2: db "Teleport",2543070 db "Instantaneously displaces an allied",2543071 db "troop to an an unoccupied space.",2553073.DescriptionAllSpellSchools1: db "Primal Instinct",2543074 db "Friendly unit receives +3 damage,",2543075 db "+3 defense and +3 speed.",2553083SetAmountSpellPoints:3084 ld b,100 3085 ld c,168 3086 ld hl,.TextSpellPoints3087 call SetText 3089 call SetCurrentActiveMOnsterInIX3090 3091 push ix3092 pop hl 3093 ld de,Monster73094 call CompareHLwithDE 3095 ld ix,(plxcurrentheroAddress) 3096 jr c,.HeroFound3097 ld ix,(HeroThatGetsAttacked) 3098 .HeroFound:3100 3101 ld l,(ix+HeroMana)3102 ld h,(ix+HeroMana+1)3103 ld b,148 3104 ld c,168 3105 call SetNumber16BitCastle3106 ret3107.TextSpellPoints: db "Spell Points:",2553109SpellBookX: equ 0323110SpellBookY: equ 002+BattleScreenVerticalOffset3111HandleSpellBook:3112 ld a,(SpellBookButtonPressed?)3113 or a3114 ret z3115 ld a,(activepage)3116 or a3117 ret z 3118 xor a3119 ld (SpellBookButtonPressed?),a3120 3121 call SetGraphicsSpellBook3122 call SetAmountSpellPoints3124 3125 call SetCurrentActiveMOnsterInIX 3126 3127 push ix3128 pop hl 3129 ld de,Monster73130 call CompareHLwithDE 3131 ld ix,(plxcurrentheroAddress) 3132 jr c,.HeroFound23133 ld ix,(HeroThatGetsAttacked) 3134 .HeroFound2:3136 call SetGraphicsElementalSpells3137 call SetGraphicsElementalSpells.SetUniversalSpells3138 call LightUpCurrentActiveElementalButton3139 halt 3140 call SwapAndSetPage 3143 .engine:3144 call PopulateControls 3147 3148 ld ix,BattleSpellBookButtonTable3149 ld iy,ButtonTableSpellBookSYSX_Water3150 call CheckButtonMouseInteraction4ElementalButtons3151 ld a,b3152 or a3153 call nz,.ElementalButtonPressed31543155 ld ix,BattleSpellBookButtonTable3156 call .CopyButtons 3160 3161 ld ix,BattleSpellIconButtons3162 ld a,(SelectedElementInSpellBook) 3163 or a3164 ld iy,ButtonTableSpellIconsEarthSYSX3165 jp z,.ElementFound3166 dec a3167 ld iy,ButtonTableSpellIconsFireSYSX3168 jp z,.ElementFound3169 dec a3170 ld iy,ButtonTableSpellIconsAirSYSX3171 jp z,.ElementFound3172 ld iy,ButtonTableSpellIconsWaterSYSX3173 .ElementFound:3174 call .CheckButtonMouseInteraction31753178 ld ix,BattleSpellIconButtons3179 call .CopyButtons 3182 ld a,(NewPrContr)3183 bit 5,a 3184 jp nz,ExitSpellBook3185 call CheckMouseClickOutsideSpellBook 3186 jp .engine3189 .ElementalButtonPressed:3190 ld a,%1000 00113191 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3192 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3193 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3194 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3196 call .HandleSelectedElementButton3198 3199 call SetCurrentActiveMOnsterInIX 3200 3201 push ix3202 pop hl 3203 ld de,Monster73204 call CompareHLwithDE 3205 ld ix,(plxcurrentheroAddress) 3206 jr c,.HeroFound33207 ld ix,(HeroThatGetsAttacked) 3208 .HeroFound3:3210 jp SetGraphicsElementalSpells3212 .HandleSelectedElementButton:3213 ld a,b3214 cp 1 3215 jp z,.Water3216 cp 2 3217 jp z,.AirSelected3218 cp 3 3219 jp z,.FireSelected32203223 .EarthSelected:3224 xor a3225 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3226 ld (SelectedElementInSpellBook),a 3227 ret3229 .FireSelected:3230 xor a3231 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3232 ld a,13233 ld (SelectedElementInSpellBook),a 3234 ret3236 .AirSelected:3237 xor a3238 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3239 ld a,23240 ld (SelectedElementInSpellBook),a 3241 ret3243 .Water:3244 xor a3245 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3246 ld a,33247 ld (SelectedElementInSpellBook),a 3248 ret3252.CopyButtons: 3257 ld b,(ix+HeroOverviewWindowAmountOfButtons)3258 .loop:3259 push bc3260 call .Setbutton3261 pop bc3262 ld de,ButtonTableLenght3263 add ix,de3264 ld de,6 3265 add iy,de3266 djnz .loop3267 ret3269 .Setbutton:3270 bit 0,(ix+HeroOverviewWindowButtonStatus)3271 jr nz,.bit0isSet3272 bit 1,(ix+HeroOverviewWindowButtonStatus)3273 ret z3274 3275 .bit1isSet:3276 res 1,(ix+HeroOverviewWindowButtonStatus)3277 jr .goCopyButton3278 .bit0isSet:3279 res 0,(ix+HeroOverviewWindowButtonStatus) 3280 .goCopyButton:3282 bit 7,(ix+HeroOverviewWindowButtonStatus)3283 ld l,(iy+ButtonOff)3284 ld h,(iy+ButtonOff+1)3285 jr nz,.go 3286 bit 6,(ix+HeroOverviewWindowButtonStatus)3287 ld l,(iy+ButtonMouseOver)3288 ld h,(iy+ButtonMouseOver+1)3289 jr nz,.go 3291 ld l,(iy+ButtonOMouseClicked)3292 ld h,(iy+ButtonOMouseClicked+1)3293 .go:3294 3295 ld e,(ix+HeroOverviewWindowButton_de)3296 ld d,(ix+HeroOverviewWindowButton_de+1)3298 ld c,(ix+Buttonnynx)3299 ld b,(ix+Buttonnynx+1)3301 ld a,SpellBookGraphicsBlock 3302 jp CopyRamToVramCorrectedWithoutActivePageSetting 3319.CheckButtonMouseInteraction:3320 ld b,(ix+HeroOverviewWindowAmountOfButtons)3321 ld de,ButtonTableLenght3323 .loop2:3324 call .check3325 add ix,de3326 djnz .loop23328 ld a,(SpellExplanationDisplayed?) 3329 or a3330 ret z3331 xor a3332 ld (SpellExplanationDisplayed?),a 3334 3339 ld hl,$4000 + (158*128) + (010/2) -1283340 ld de,$0000 + ((SpellBookY+158)*128) + ((SpellBookX+10)/2)3341 ld bc,$0000 + (20*256) + (176/2)3342 ld a,SpellBookGraphicsBlock3343 jp CopyRamToVramCorrectedWithoutActivePageSetting 3344 3345 .check:3346 ld a,(ix+HeroOverviewWindowButtonStatus)3347 or a3348 ret z3349 3350 ld a,(spat+0) 3351 cp (ix+HeroOverviewWindowButtonYtop)3352 jr c,.NotOverButton3353 cp (ix+HeroOverviewWindowButtonYbottom)3354 jr nc,.NotOverButton3355 ld a,(spat+1) 3357 add a,063359 cp (ix+HeroOverviewWindowButtonXleft)3360 jr c,.NotOverButton3361 cp (ix+HeroOverviewWindowButtonXright)3362 jr nc,.NotOverButton3363 3370 ld a,(Controls)3371 bit 4,a 3372 jr nz,.MouseOverButtonAndSpacePressed3373 bit 5,(ix+HeroOverviewWindowButtonStatus) 3374 jr nz,.MenuOptionSelected 3375 .MouseHoverOverButton:3376 pop af 3377 bit 6,(ix+HeroOverviewWindowButtonStatus) 3378 ret nz3379 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113380 jp SetSpellExplanation 3382 .MouseOverButtonAndSpacePressed:3383 bit 5,(ix+HeroOverviewWindowButtonStatus) 3384 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3385 ld a,(NewPrContr)3386 bit 4,a 3387 jr z,.MouseHoverOverButton3389 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3390 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113391 pop af 3392 ret3393 3394 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3395 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113396 pop af 3397 ret3399 .NotOverButton:3400 bit 5,(ix+HeroOverviewWindowButtonStatus) 3401 jr nz,.buttonIsStillLit3402 bit 6,(ix+HeroOverviewWindowButtonStatus) 3403 ret z3404 .buttonIsStillLit:3405 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113406 pop af 3407 ret3409.MenuOptionSelected:3410 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113412 pop af 3414 ld a,b 3415 ld (SpellSelected?),a 3417 call GetSelectedSpellCost 3418 ld e,a3419 ld d,03420 push de3422 call SetCurrentActiveMOnsterInIX3423 3424 push ix3425 pop hl 3426 ld de,Monster73427 call CompareHLwithDE 3428 ld ix,(plxcurrentheroAddress) 3429 jr c,.HeroFound3430 ld ix,(HeroThatGetsAttacked) 3431 .HeroFound:3433 3434 ld l,(ix+HeroMana)3435 ld h,(ix+HeroMana+1)3436 pop de3437 or a3438 sbc hl,de3439 jr c,.NotEnoughMana3440 pop af 3441 jp ExitSpellBook 3443 .NotEnoughMana:3444 xor a3445 ld (SpellSelected?),a 3446 ret3448CheckButtonMouseInteraction4ElementalButtons:3449 ld b,(ix+HeroOverviewWindowAmountOfButtons)3450 ld de,ButtonTableLenght3452 .loop2:3453 call .check3454 add ix,de3455 djnz .loop23456 ret3457 3458 .check:3459 ld a,(ix+HeroOverviewWindowButtonStatus)3460 or a3461 ret z3462 3463 ld a,(spat+0) 3464 cp (ix+HeroOverviewWindowButtonYtop)3465 jr c,.NotOverButton3466 cp (ix+HeroOverviewWindowButtonYbottom)3467 jr nc,.NotOverButton3468 ld a,(spat+1) 3470 add a,063472 cp (ix+HeroOverviewWindowButtonXleft)3473 jr c,.NotOverButton3474 cp (ix+HeroOverviewWindowButtonXright)3475 jr nc,.NotOverButton3476 3483 ld a,(Controls)3484 bit 4,a 3485 jr nz,.MouseOverButtonAndSpacePressed3486 bit 5,(ix+HeroOverviewWindowButtonStatus) 3487 jr nz,.MenuOptionSelected 3488 .MouseHoverOverButton:3489 bit 6,(ix+HeroOverviewWindowButtonStatus) 3490 ret nz3491 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113492 ret3494 .MouseOverButtonAndSpacePressed:3495 bit 5,(ix+HeroOverviewWindowButtonStatus) 3496 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3497 ld a,(NewPrContr)3498 bit 4,a 3499 jr z,.MouseHoverOverButton3501 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3502 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113503 ret3504 3505 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3506 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113507 ret3509 .NotOverButton:3510 bit 5,(ix+HeroOverviewWindowButtonStatus) 3511 jr nz,.buttonIsStillLit3512 bit 6,(ix+HeroOverviewWindowButtonStatus) 3513 ret z3514 .buttonIsStillLit:3515 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113516 ret3518.MenuOptionSelected:3519 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113521 ld a,b 3523 pop af 3524 ret3533LightUpCurrentActiveElementalButton:3534 ld a,(SelectedElementInSpellBook) 3535 or a3536 jr z,.Earth3537 dec a3538 jr z,.Fire3539 dec a3540 jr z,.Air3542 .Water:3543 ld a,%0010 00113544 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3545 call .LightUpButton3546 xor a3547 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3548 ret3550 .Air:3551 ld a,%0010 00113552 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3553 call .LightUpButton3554 xor a3555 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3556 ret3558 .Fire:3559 ld a,%0010 00113560 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3561 call .LightUpButton3562 xor a3563 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3564 ret3565 3566 .Earth:3567 ld a,%0010 00113568 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3569 call .LightUpButton3570 xor a3571 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3572 ret3574 .LightUpButton:3575 ld ix,BattleSpellBookButtonTable3576 ld iy,ButtonTableSpellBookSYSX_Water3577 jp HandleSpellBook.CopyButtons 3582CheckMouseClickOutsideSpellBook:3583 ld a,(NewPrContr)3584 bit 4,a 3585 ret z3587 ld a,(spat+0) 3588 cp SpellBookY3589 jr c,.NotOverHeroOverViewSpellBookWindow3590 cp SpellBookY+HeroOverViewSpellBookWindowNY3591 jr nc,.NotOverHeroOverViewSpellBookWindow3592 3593 ld a,(spat+1) 3595 add a,063597 cp SpellBookX3598 jr c,.NotOverHeroOverViewSpellBookWindow3599 cp SpellBookX+HeroOverViewSpellBookWindowNX3600 ret c3602 .NotOverHeroOverViewSpellBookWindow:3603 pop af3605 xor a3606 ld (NewPrContr),a 3608 jp ExitSpellBook3610ExitSpellBook:3611 ld hl,CheckVictoryOrDefeat.CopyPage1toPage03612 call docopy3613 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady3614 call docopy3615 halt 3616 ret3618SetGraphicsElementalSpells:3619 xor a3620 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3621 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3622 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3623 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3625 ld a,(SelectedElementInSpellBook) 3626 or a3627 jp z,.SetEarthSpells3628 dec a3629 jp z,.SetFireSpells3630 dec a3631 jp z,.SetAirSpells3632 jp .SetWaterSpells3634 .EraseElementalSpellLevel1:3635 ld hl,$4000 + ((.HeroOverViewSpell1backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell1backdropDX-SpellBookX)/2) -1283636 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3637 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3638 ld a,SpellBookGraphicsBlock 3639 jp CopyRamToVramCorrectedWithoutActivePageSetting 3641 .EraseElementalSpellLevel2:3642 ld hl,$4000 + ((.HeroOverViewSpell2backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell2backdropDX-SpellBookX)/2) -1283643 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3644 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3645 ld a,SpellBookGraphicsBlock 3646 jp CopyRamToVramCorrectedWithoutActivePageSetting 3648 .EraseElementalSpellLevel3:3649 ld hl,$4000 + ((.HeroOverViewSpell3backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell3backdropDX-SpellBookX)/2) -1283650 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3651 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3652 ld a,SpellBookGraphicsBlock 3653 jp CopyRamToVramCorrectedWithoutActivePageSetting 3655 .EraseElementalSpellLevel4:3656 ld hl,$4000 + ((.HeroOverViewSpell4backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell4backdropDX-SpellBookX)/2) -1283657 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3658 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3659 ld a,SpellBookGraphicsBlock 3660 jp CopyRamToVramCorrectedWithoutActivePageSetting 3662 .CheckSpellScrollAvailable:3663 cp (ix+HeroInventory+9)3664 ret z3665 cp (ix+HeroInventory+10)3666 ret z3667 cp (ix+HeroInventory+11)3668 ret z3669 cp (ix+HeroInventory+12)3670 ret z3671 cp (ix+HeroInventory+13)3672 ret z3673 cp (ix+HeroInventory+14)3674 ret3676.SetEarthSpells:3677 3678 ld a,46 3679 call .CheckSpellScrollAvailable 3680 jr z,.PlaceEarthSpell13681 bit 0,(ix+HeroEarthSpells)3682 jr nz,.PlaceEarthSpell13683 call .EraseElementalSpellLevel13684 jr .EndPlaceEarthSpell13685 .PlaceEarthSpell1:3686 ld a,%1000 00113687 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3688 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283689 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3690 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3691 ld a,SpellBookGraphicsBlock 3692 call CopyRamToVramCorrectedWithoutActivePageSetting 3693 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283694 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3695 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3696 ld a,SpellBookGraphicsBlock 3697 call CopyRamToVramCorrectedWithoutActivePageSetting 3698 .EndPlaceEarthSpell1:3700 ld a,47 3701 call .CheckSpellScrollAvailable 3702 jr z,.PlaceEarthSpell23703 bit 1,(ix+HeroEarthSpells)3704 jr nz,.PlaceEarthSpell23705 call .EraseElementalSpellLevel23706 jr .EndPlaceEarthSpell23707 .PlaceEarthSpell2:3708 ld a,%1000 00113709 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3710 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283711 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3712 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3713 ld a,SpellBookGraphicsBlock 3714 call CopyRamToVramCorrectedWithoutActivePageSetting 3715 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283716 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3717 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3718 ld a,SpellBookGraphicsBlock 3719 call CopyRamToVramCorrectedWithoutActivePageSetting 3720 .EndPlaceEarthSpell2:3722 ld a,48 3723 call .CheckSpellScrollAvailable 3724 jr z,.PlaceEarthSpell33725 bit 2,(ix+HeroEarthSpells)3726 jr nz,.PlaceEarthSpell33727 call .EraseElementalSpellLevel33728 jr .EndPlaceEarthSpell33729 .PlaceEarthSpell3:3730 ld a,%1000 00113731 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3732 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283733 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3734 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3735 ld a,SpellBookGraphicsBlock 3736 call CopyRamToVramCorrectedWithoutActivePageSetting 3737 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283738 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3739 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3740 ld a,SpellBookGraphicsBlock 3741 call CopyRamToVramCorrectedWithoutActivePageSetting 3742 .EndPlaceEarthSpell3:3744 ld a,49 3745 call .CheckSpellScrollAvailable 3746 jr z,.PlaceEarthSpell43747 bit 3,(ix+HeroEarthSpells)3748 jr nz,.PlaceEarthSpell43749 jp .EraseElementalSpellLevel43750 .PlaceEarthSpell4:3751 ld a,%1000 00113752 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3753 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283754 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3755 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3756 ld a,SpellBookGraphicsBlock 3757 call CopyRamToVramCorrectedWithoutActivePageSetting 3758 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283759 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3760 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3761 ld a,SpellBookGraphicsBlock 3762 jp CopyRamToVramCorrectedWithoutActivePageSetting 3764.SetFireSpells:3765 3766 ld a,50 3767 call .CheckSpellScrollAvailable 3768 jr z,.PlaceFireSpell13769 bit 0,(ix+HeroFireSpells)3770 jr nz,.PlaceFireSpell13771 call .EraseElementalSpellLevel13772 jr .EndPlaceFireSpell13773 .PlaceFireSpell1:3774 ld a,%1000 00113775 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3776 3777 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283778 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3779 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3780 ld a,SpellBookGraphicsBlock 3781 call CopyRamToVramCorrectedWithoutActivePageSetting 3782 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283783 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3784 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3785 ld a,SpellBookGraphicsBlock 3786 call CopyRamToVramCorrectedWithoutActivePageSetting 3787 .EndPlaceFireSpell1:3789 ld a,51 3790 call .CheckSpellScrollAvailable 3791 jr z,.PlaceFireSpell23792 bit 1,(ix+HeroFireSpells)3793 jr nz,.PlaceFireSpell23794 call .EraseElementalSpellLevel23795 jr .EndPlaceFireSpell23796 .PlaceFireSpell2:3797 ld a,%1000 00113798 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3799 3800 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283801 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3802 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3803 ld a,SpellBookGraphicsBlock 3804 call CopyRamToVramCorrectedWithoutActivePageSetting 3805 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283806 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3807 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3808 ld a,SpellBookGraphicsBlock 3809 call CopyRamToVramCorrectedWithoutActivePageSetting 3810 .EndPlaceFireSpell2:3812 ld a,52 3813 call .CheckSpellScrollAvailable 3814 jr z,.PlaceFireSpell33815 bit 2,(ix+HeroFireSpells)3816 jr nz,.PlaceFireSpell33817 call .EraseElementalSpellLevel33818 jr .EndPlaceFireSpell33819 .PlaceFireSpell3:3820 ld a,%1000 00113821 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3822 3823 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283824 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3825 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3826 ld a,SpellBookGraphicsBlock 3827 call CopyRamToVramCorrectedWithoutActivePageSetting 3828 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283829 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3830 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3831 ld a,SpellBookGraphicsBlock 3832 call CopyRamToVramCorrectedWithoutActivePageSetting 3833 .EndPlaceFireSpell3:3835 ld a,53 3836 call .CheckSpellScrollAvailable 3837 jr z,.PlaceFireSpell43838 bit 3,(ix+HeroFireSpells)3839 jr nz,.PlaceFireSpell43840 jp .EraseElementalSpellLevel43841 .PlaceFireSpell4:3843 ld a,%1000 00113844 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3846 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283847 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3848 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3849 ld a,SpellBookGraphicsBlock 3850 call CopyRamToVramCorrectedWithoutActivePageSetting 3851 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283852 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3853 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3854 ld a,SpellBookGraphicsBlock 3855 jp CopyRamToVramCorrectedWithoutActivePageSetting 3857.SetAirSpells:3858 3859 ld a,54 3860 call .CheckSpellScrollAvailable 3861 jr z,.PlaceAirSpell13862 bit 0,(ix+HeroAirSpells)3863 jr nz,.PlaceAirSpell13864 call .EraseElementalSpellLevel13865 jr .EndPlaceAirSpell13866 .PlaceAirSpell1:3867 ld a,%1000 00113868 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3869 3870 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283871 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3872 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3873 ld a,SpellBookGraphicsBlock 3874 call CopyRamToVramCorrectedWithoutActivePageSetting 3875 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283876 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3877 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3878 ld a,SpellBookGraphicsBlock 3879 call CopyRamToVramCorrectedWithoutActivePageSetting 3880 .EndPlaceAirSpell1:3882 ld a,55 3883 call .CheckSpellScrollAvailable 3884 jr z,.PlaceAirSpell23885 bit 1,(ix+HeroAirSpells)3886 jr nz,.PlaceAirSpell23887 call .EraseElementalSpellLevel23888 jr .EndPlaceAirSpell23889 .PlaceAirSpell2:3890 ld a,%1000 00113891 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3893 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283894 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3895 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3896 ld a,SpellBookGraphicsBlock 3897 call CopyRamToVramCorrectedWithoutActivePageSetting 3898 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283899 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3900 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3901 ld a,SpellBookGraphicsBlock 3902 call CopyRamToVramCorrectedWithoutActivePageSetting 3903 .EndPlaceAirSpell2:3905 ld a,56 3906 call .CheckSpellScrollAvailable 3907 jr z,.PlaceAirSpell33908 bit 2,(ix+HeroAirSpells)3909 jr nz,.PlaceAirSpell33910 call .EraseElementalSpellLevel33911 jr .EndPlaceAirSpell33912 .PlaceAirSpell3:3913 ld a,%1000 00113914 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3916 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283917 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3918 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3919 ld a,SpellBookGraphicsBlock 3920 call CopyRamToVramCorrectedWithoutActivePageSetting 3921 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283922 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3923 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3924 ld a,SpellBookGraphicsBlock 3925 call CopyRamToVramCorrectedWithoutActivePageSetting 3926 .EndPlaceAirSpell3:3928 ld a,57 3929 call .CheckSpellScrollAvailable 3930 jr z,.PlaceAirSpell43931 bit 3,(ix+HeroAirSpells)3932 jr nz,.PlaceAirSpell43933 jp .EraseElementalSpellLevel4 3934 .PlaceAirSpell4:3935 ld a,%1000 00113936 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3938 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283939 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3940 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3941 ld a,SpellBookGraphicsBlock 3942 call CopyRamToVramCorrectedWithoutActivePageSetting 3943 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283944 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3945 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3946 ld a,SpellBookGraphicsBlock 3947 jp CopyRamToVramCorrectedWithoutActivePageSetting 3949.SetWaterSpells:3950 3951 ld a,58 3952 call .CheckSpellScrollAvailable 3953 jr z,.PlaceWaterSpell13954 bit 0,(ix+HeroWaterSpells)3955 jr nz,.PlaceWaterSpell13956 call .EraseElementalSpellLevel13957 jr .EndPlaceWaterSpell13958 .PlaceWaterSpell1:3959 ld a,%1000 00113960 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3961 3962 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283963 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3964 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3965 ld a,SpellBookGraphicsBlock 3966 call CopyRamToVramCorrectedWithoutActivePageSetting 3967 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1283968 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3969 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3970 ld a,SpellBookGraphicsBlock 3971 call CopyRamToVramCorrectedWithoutActivePageSetting 3972 .EndPlaceWaterSpell1:3974 ld a,59 3975 call .CheckSpellScrollAvailable 3976 jr z,.PlaceWaterSpell23977 bit 1,(ix+HeroWaterSpells)3978 jr nz,.PlaceWaterSpell23979 call .EraseElementalSpellLevel23980 jr .EndPlaceWaterSpell23981 .PlaceWaterSpell2:3982 ld a,%1000 00113983 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3984 3985 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283986 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3987 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3988 ld a,SpellBookGraphicsBlock 3989 call CopyRamToVramCorrectedWithoutActivePageSetting 3990 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1283991 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3992 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3993 ld a,SpellBookGraphicsBlock 3994 call CopyRamToVramCorrectedWithoutActivePageSetting 3995 .EndPlaceWaterSpell2:3997 ld a,60 3998 call .CheckSpellScrollAvailable 3999 jr z,.PlaceWaterSpell34000 bit 2,(ix+HeroWaterSpells)4001 jr nz,.PlaceWaterSpell34002 call .EraseElementalSpellLevel34003 jr .EndPlaceWaterSpell34004 .PlaceWaterSpell3:4005 ld a,%1000 00114006 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4007 4008 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284009 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)4010 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4011 ld a,SpellBookGraphicsBlock 4012 call CopyRamToVramCorrectedWithoutActivePageSetting 4013 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1284014 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)4015 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4016 ld a,SpellBookGraphicsBlock 4017 call CopyRamToVramCorrectedWithoutActivePageSetting 4018 .EndPlaceWaterSpell3:4020 ld a,61 4021 call .CheckSpellScrollAvailable 4022 jr z,.PlaceWaterSpell44023 bit 3,(ix+HeroWaterSpells)4024 jr nz,.PlaceWaterSpell44025 jp .EraseElementalSpellLevel44026 .PlaceWaterSpell4:4027 ld a,%1000 00114028 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4029 4030 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284031 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)4032 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4033 ld a,SpellBookGraphicsBlock 4034 call CopyRamToVramCorrectedWithoutActivePageSetting 4035 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1284036 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)4037 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4038 ld a,SpellBookGraphicsBlock 4039 jp CopyRamToVramCorrectedWithoutActivePageSetting 4041.SetUniversalSpells:4042 xor a4043 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4044 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4045 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4046 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4048 4049 ld a,62 4050 call .CheckSpellScrollAvailable 4051 jr z,.PlaceUniversalSpell14052 bit 0,(ix+HeroAllSchoolsSpells)4053 jr z,.EndPlaceAllSchoolsSpell1 4054 .PlaceUniversalSpell1:4055 ld a,%1000 00114056 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4057 4058 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284059 ld de,$0000 + (.HeroOverViewSpell5backdropDY*128) + (.HeroOverViewSpell5backdropDX/2)4060 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4061 ld a,SpellBookGraphicsBlock 4062 call CopyRamToVramCorrectedWithoutActivePageSetting 4063 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1284064 ld de,$0000 + (.Spell5DY*128) + (.Spell5DX/2)4065 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4066 ld a,SpellBookGraphicsBlock 4067 call CopyRamToVramCorrectedWithoutActivePageSetting 4068 .EndPlaceAllSchoolsSpell1:4070 ld a,63 4071 call .CheckSpellScrollAvailable 4072 jr z,.PlaceUniversalSpell24073 bit 1,(ix+HeroAllSchoolsSpells)4074 jr z,.EndPlaceAllSchoolsSpell2 4075 .PlaceUniversalSpell2:4076 ld a,%1000 00114077 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4079 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284080 ld de,$0000 + (.HeroOverViewSpell6backdropDY*128) + (.HeroOverViewSpell6backdropDX/2)4081 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4082 ld a,SpellBookGraphicsBlock 4083 call CopyRamToVramCorrectedWithoutActivePageSetting 4084 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1284085 ld de,$0000 + (.Spell6DY*128) + (.Spell6DX/2)4086 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4087 ld a,SpellBookGraphicsBlock 4088 call CopyRamToVramCorrectedWithoutActivePageSetting 4089 .EndPlaceAllSchoolsSpell2:4091 ld a,64 4092 call .CheckSpellScrollAvailable 4093 jr z,.PlaceUniversalSpell34094 bit 2,(ix+HeroAllSchoolsSpells)4095 jr z,.EndPlaceAllSchoolsSpell3 4096 .PlaceUniversalSpell3:4097 ld a,%1000 00114098 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4100 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284101 ld de,$0000 + (.HeroOverViewSpell7backdropDY*128) + (.HeroOverViewSpell7backdropDX/2)4102 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4103 ld a,SpellBookGraphicsBlock 4104 call CopyRamToVramCorrectedWithoutActivePageSetting 4105 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1284106 ld de,$0000 + (.Spell7DY*128) + (.Spell7DX/2)4107 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4108 ld a,SpellBookGraphicsBlock 4109 call CopyRamToVramCorrectedWithoutActivePageSetting 4110 .EndPlaceAllSchoolsSpell3:4112 ld a,65 4113 call .CheckSpellScrollAvailable 4114 jr z,.PlaceUniversalSpell44115 bit 3,(ix+HeroAllSchoolsSpells)4116 ret z4117 .PlaceUniversalSpell4:4118 ld a,%1000 00114119 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4121 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284122 ld de,$0000 + (.HeroOverViewSpell8backdropDY*128) + (.HeroOverViewSpell8backdropDX/2)4123 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4124 ld a,SpellBookGraphicsBlock 4125 call CopyRamToVramCorrectedWithoutActivePageSetting 4126 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1284127 ld de,$0000 + (.Spell8DY*128) + (.Spell8DX/2)4128 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4129 ld a,SpellBookGraphicsBlock 4130 jp CopyRamToVramCorrectedWithoutActivePageSetting 4133.HeroOverViewSpell1backdropDY: equ SpellBookY + 0444134.HeroOverViewSpell1backdropDX: equ SpellBookX + 0344135.HeroOverViewSpell2backdropDY: equ SpellBookY + 0484136.HeroOverViewSpell2backdropDX: equ SpellBookX + 0644137.HeroOverViewSpell3backdropDY: equ SpellBookY + 0894138.HeroOverViewSpell3backdropDX: equ SpellBookX + 0324139.HeroOverViewSpell4backdropDY: equ SpellBookY + 0934140.HeroOverViewSpell4backdropDX: equ SpellBookX + 0624141.HeroOverViewSpell5backdropDY: equ SpellBookY + 0484142.HeroOverViewSpell5backdropDX: equ SpellBookX + 1024143.HeroOverViewSpell6backdropDY: equ SpellBookY + 0444144.HeroOverViewSpell6backdropDX: equ SpellBookX + 1324145.HeroOverViewSpell7backdropDY: equ SpellBookY + 0934146.HeroOverViewSpell7backdropDX: equ SpellBookX + 1044147.HeroOverViewSpell8backdropDY: equ SpellBookY + 0894148.HeroOverViewSpell8backdropDX: equ SpellBookX + 1344150.Spell1DY: equ SpellBookY + 0504151.Spell1DX: equ SpellBookX + 0404152.Spell2DY: equ SpellBookY + 0544153.Spell2DX: equ SpellBookX + 0704154.Spell3DY: equ SpellBookY + 0954155.Spell3DX: equ SpellBookX + 0384156.Spell4DY: equ SpellBookY + 0994157.Spell4DX: equ SpellBookX + 0684158.Spell5DY: equ SpellBookY + 0544159.Spell5DX: equ SpellBookX + 1084160.Spell6DY: equ SpellBookY + 0504161.Spell6DX: equ SpellBookX + 1384162.Spell7DY: equ SpellBookY + 0994163.Spell7DX: equ SpellBookX + 1104164.Spell8DY: equ SpellBookY + 0954165.Spell8DX: equ SpellBookX + 14041684171SetGraphicsSpellBook:4172 ld hl,$4000 + (000*128) + (000/2) -1284173 ld de,$0000 + (SpellBookY*128) + (SpellBookX/2)4174 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4175 ld a,SpellBookGraphicsBlock4176 jp CopyRamToVramCorrectedCastleOverview 4178HandleSpellCast:4179 ld a,(CastSpell?)4180 or a4181 ret z4182 xor a4183 ld (CastSpell?),a41854188 call GetSelectedSpellRoutine 4189 jp (hl) 4191419342004206421242184227LenghtSpellAnimationStep: equ 44229 db SpellAnimationsBlock 4230 db 1 4231CureAnimation:4232 4233 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 032,022/24234 dw $4000 + ((032*0)*128) + ((022*1)/2) - 128 | db 032,022/24235 dw $4000 + ((032*0)*128) + ((022*2)/2) - 128 | db 032,022/24236 dw $4000 + ((032*0)*128) + ((022*3)/2) - 128 | db 032,022/24237 dw $4000 + ((032*0)*128) + ((022*4)/2) - 128 | db 032,022/24238 dw $4000 + ((032*0)*128) + ((022*5)/2) - 128 | db 032,022/24239 dw $4000 + ((032*0)*128) + ((022*6)/2) - 128 | db 032,022/24240 dw $4000 + ((032*0)*128) + ((022*7)/2) - 128 | db 032,022/24241 dw $4000 + ((032*0)*128) + ((022*8)/2) - 128 | db 032,022/24242 dw $4000 + ((032*0)*128) + ((022*9)/2) - 128 | db 032,022/24243 dw $4000 + ((032*0)*128) + ((022*10)/2) - 128 | db 032,022/24244 dw $4000 + ((032*1)*128) + ((022*0)/2) - 128 | db 032,022/24245 dw $4000 + ((032*1)*128) + ((022*1)/2) - 128 | db 032,022/24246 dw $4000 + ((032*1)*128) + ((022*2)/2) - 128 | db 032,022/24247 dw $4000 + ((032*1)*128) + ((022*3)/2) - 128 | db 032,022/24248 dw $4000 + ((032*1)*128) + ((022*4)/2) - 128 | db 032,022/24249 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 002,002/2 4250 dw 04252 db SpellAnimations16Block 4253 db 0 4254HasteAnimation:4255 4256 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24257 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24258 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24259 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24260 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24261 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24262 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24263 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24264 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24265 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24266 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24267 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24268 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24269 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4270 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4271 dw 0 4273 db SpellAnimations2Block 4274 db 0 4275EarthShockAnimation:4276 4277 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24278 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24279 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24280 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24281 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24282 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24283 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24284 dw $4000 + ((064*1)*128) + ((064*3)/2) - 128 | db 064,064/24285 dw $4000 + ((064*2)*128) + ((064*0)/2) - 128 | db 064,064/24286 dw $4000 + ((064*2)*128) + ((064*1)/2) - 128 | db 064,064/24287 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4288 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4289 dw 0 4291 db SpellAnimations2Block 4292 db 1 4293MagicArrowsAnimation:4294 4295 dw $4000 + ((064*3)*128) + ((040*0)/2) - 128 | db 064,040/24296 dw $4000 + ((064*3)*128) + ((040*1)/2) - 128 | db 064,040/24297 dw $4000 + ((064*3)*128) + ((040*2)/2) - 128 | db 064,040/24298 dw $4000 + ((064*3)*128) + ((040*3)/2) - 128 | db 064,040/24299 dw $4000 + ((064*3)*128) + ((040*4)/2) - 128 | db 064,040/24300 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24301 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24302 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24303 dw $4000 + ((064*0)*128) + ((040*0)/2) - 128 | db 002,002/2 4304 dw 0 4306 db SpellAnimations3Block 4307 db 0 4308sunstrikeAnimation:4309 4310 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24311 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24312 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24313 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24314 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24315 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24316 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24317 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24318 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24319 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24320 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4321 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4322 dw 0 4324 db SpellAnimations4Block 4325 db 0 4326IceBoltAnimation:4327 4328 dw $4000 + ((064*0)*128) + ((032*0)/2) - 128 | db 064,032/24329 dw $4000 + ((064*0)*128) + ((032*1)/2) - 128 | db 064,032/24330 dw $4000 + ((064*0)*128) + ((032*2)/2) - 128 | db 064,032/24331 dw $4000 + ((064*0)*128) + ((032*3)/2) - 128 | db 064,032/24332 dw $4000 + ((064*0)*128) + ((032*4)/2) - 128 | db 064,032/24333 dw $4000 + ((064*0)*128) + ((032*5)/2) - 128 | db 064,032/24334 dw $4000 + ((064*0)*128) + ((032*6)/2) - 128 | db 064,032/24335 dw $4000 + ((064*0)*128) + ((032*7)/2) - 128 | db 064,032/24336 dw $4000 + ((064*1)*128) + ((032*0)/2) - 128 | db 064,032/24337 dw $4000 + ((064*1)*128) + ((032*1)/2) - 128 | db 064,032/24338 dw $4000 + ((064*1)*128) + ((032*2)/2) - 128 | db 064,032/24339 dw $4000 + ((064*1)*128) + ((032*3)/2) - 128 | db 064,032/24340 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4341 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4342 dw 0 4344 db SpellAnimations5Block 4345 db 0 4346implosionAnimation:4347 4348 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24349 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24350 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24351 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24352 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24353 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24354 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24355 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24356 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24357 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24358 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4359 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4360 dw 0 4362 db SpellAnimations6Block 4363 db 1 4364EarthBoundAnimation:4365 4366 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 026,042/24367 dw $4000 + ((026*0)*128) + ((042*1)/2) - 128 | db 026,042/24368 dw $4000 + ((026*0)*128) + ((042*2)/2) - 128 | db 026,042/24369 dw $4000 + ((026*0)*128) + ((042*3)/2) - 128 | db 026,042/24370 dw $4000 + ((026*0)*128) + ((042*4)/2) - 128 | db 026,042/24371 dw $4000 + ((026*0)*128) + ((042*5)/2) - 128 | db 026,042/24372 dw $4000 + ((026*1)*128) + ((042*0)/2) - 128 | db 026,042/24373 dw $4000 + ((026*1)*128) + ((042*1)/2) - 128 | db 026,042/24374 dw $4000 + ((026*1)*128) + ((042*2)/2) - 128 | db 026,042/24375 dw $4000 + ((026*1)*128) + ((042*3)/2) - 128 | db 026,042/24376 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4377 dw 0 4379 db SpellAnimations6Block 4380 db 0 4381FrostRingAnimation:4382 4383 dw $4000 + ((030*0+52)*128) + ((054*0)/2) - 128 | db 030,054/24384 dw $4000 + ((030*0+52)*128) + ((054*1)/2) - 128 | db 030,054/24385 dw $4000 + ((030*0+52)*128) + ((054*2)/2) - 128 | db 030,054/24386 dw $4000 + ((030*0+52)*128) + ((054*3)/2) - 128 | db 030,054/24387 dw $4000 + ((030*1+52)*128) + ((054*0)/2) - 128 | db 030,054/24388 dw $4000 + ((030*1+52)*128) + ((054*1)/2) - 128 | db 030,054/24389 dw $4000 + ((030*1+52)*128) + ((054*2)/2) - 128 | db 030,054/24390 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24391 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24392 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4393 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4394 dw 0 4396 db SpellAnimations8Block 4397 db 1 4398ShieldBreakerAnimation:4399 4400 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24401 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24402 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24403 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24404 dw $4000 + ((032*0)*128) + ((042*1)/2) - 128 | db 032,042/24405 dw $4000 + ((032*0)*128) + ((042*2)/2) - 128 | db 032,042/24406 dw $4000 + ((032*0)*128) + ((042*3)/2) - 128 | db 032,042/24407 dw $4000 + ((032*0)*128) + ((042*4)/2) - 128 | db 032,042/24408 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24409 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24410 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4411 dw 0 4413 db SpellAnimations16Block 4414 db 1 4415CurseAnimation:4416 4417 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24418 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24419 dw $4000 + ((033*0+40)*128) + ((048*1)/2) - 128 | db 033,048/24420 dw $4000 + ((033*0+40)*128) + ((048*2)/2) - 128 | db 033,048/24421 dw $4000 + ((033*0+40)*128) + ((048*3)/2) - 128 | db 033,048/24422 dw $4000 + ((033*0+40)*128) + ((048*4)/2) - 128 | db 033,048/24423 dw $4000 + ((033*1+40)*128) + ((048*0)/2) - 128 | db 033,048/24424 dw $4000 + ((033*1+40)*128) + ((048*1)/2) - 128 | db 033,048/24425 dw $4000 + ((033*1+40)*128) + ((048*2)/2) - 128 | db 033,048/24426 dw $4000 + ((033*1+40)*128) + ((048*3)/2) - 128 | db 033,048/24427 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24428 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24429 4430 dw $4000 + ((033*0)*128) + ((048*0)/2) - 128 | db 002,002/2 4431 dw 0 4433 db SpellAnimations8Block 4434 db 1 4435PlateArmorAnimation:4436 4437 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24438 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24439 dw $4000 + ((032*1)*128) + ((028*1)/2) - 128 | db 032,028/24440 dw $4000 + ((032*1)*128) + ((028*2)/2) - 128 | db 032,028/24441 dw $4000 + ((032*1)*128) + ((028*3)/2) - 128 | db 032,028/24442 dw $4000 + ((032*1)*128) + ((028*4)/2) - 128 | db 032,028/24443 dw $4000 + ((032*1)*128) + ((028*5)/2) - 128 | db 032,028/24444 dw $4000 + ((032*1)*128) + ((028*6)/2) - 128 | db 032,028/24445 dw $4000 + ((032*1)*128) + ((028*7)/2) - 128 | db 032,028/24446 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24447 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24448 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24449 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24450 dw $4000 + ((032*1)*128) + ((042*0)/2) - 128 | db 002,002/2 4451 dw 0 4453 db SpellAnimations9Block 4454 db 0 4455InnerBeastAnimation:4456 4457 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24458 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24459 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24460 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24461 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24462 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24463 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24464 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4465 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4466 dw 0 4468 db SpellAnimations10Block 4469 db 0 4470TeleportAnimation:4471 4472 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24473 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24474 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24475 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24476 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24477 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24478 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24479 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24480 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24481 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24482 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24483 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4484 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4485 dw 0 4487 db SpellAnimations10Block 4488 db 0 4489FrenzyAnimation:4490 4491 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24492 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24493 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24494 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24495 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24496 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24497 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24498 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24499 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24500 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24501 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24502 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24503 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24504 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24505 dw $4000 + ((032*3)*128) + ((032*0)/2) - 128 | db 032,032/24506 dw $4000 + ((032*3)*128) + ((032*1)/2) - 128 | db 032,032/24507 dw $4000 + ((032*3)*128) + ((032*2)/2) - 128 | db 032,032/24508 dw $4000 + ((032*3)*128) + ((032*3)/2) - 128 | db 032,032/24509 dw $4000 + ((032*3)*128) + ((032*4)/2) - 128 | db 032,032/24510 dw $4000 + ((032*3)*128) + ((032*5)/2) - 128 | db 032,032/24511 dw $4000 + ((032*3)*128) + ((032*6)/2) - 128 | db 032,032/24512 dw $4000 + ((032*3)*128) + ((032*7)/2) - 128 | db 032,032/24513 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4514 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4515 dw 0 4517 db SpellAnimations11Block 4518 db 1 4519ResurrectionAnimation:4520 4521 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24522 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24523 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24524 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24525 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24526 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24527 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24528 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24529 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24530 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24531 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24532 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24533 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24534 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24535 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24536 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24537 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24538 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24539 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24540 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24541 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24542 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24543 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24544 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24545 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24546 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4547 dw 0 4549 db SpellAnimations12Block 4550 db 0 4551SpellBubbleAnimation:4552 4553 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24554 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24555 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24556 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24557 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24558 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/24559 4560 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24561 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24562 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24563 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24564 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24565 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24566 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24568 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24569 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24570 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24571 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24572 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24573 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24574 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24576 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24577 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24578 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24579 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24580 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24581 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24582 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24584 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4585 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4586 dw 0 4588 db SpellAnimations12Block 4589 db 0 4590SpellBubbleActivatedAndPoppedAnimation:4591 4592 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24593 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24594 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24595 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24596 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24597 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/2 4598 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24599 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24600 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24601 dw $4000 + ((042*2)*128) + ((036*0)/2) - 128 | db 042,036/24602 dw $4000 + ((042*2)*128) + ((036*1)/2) - 128 | db 042,036/24603 dw $4000 + ((042*2)*128) + ((036*2)/2) - 128 | db 042,036/24604 dw $4000 + ((042*2)*128) + ((036*3)/2) - 128 | db 042,036/24605 dw $4000 + ((042*2)*128) + ((036*4)/2) - 128 | db 042,036/24606 dw $4000 + ((042*2)*128) + ((036*5)/2) - 128 | db 042,036/24607 dw $4000 + ((042*2)*128) + ((036*6)/2) - 128 | db 042,036/24608 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4609 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4610 dw 0 4612 db SpellAnimations13Block 4613 db 0 4614hypnosisAnimation:4615 4616 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24617 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24618 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24619 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24620 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24621 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24622 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24623 dw $4000 + ((061*1)*128) + ((060*3)/2) - 128 | db 061,060/24624 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24625 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24626 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24627 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24628 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24629 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24630 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24631 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4632 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4633 dw 0 4635 db SpellAnimations14Block 4636 db 1 4637ClawBackAnimation:4638 4639 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 026,030/24640 dw $4000 + ((026*0)*128) + ((030*1)/2) - 128 | db 026,030/24641 dw $4000 + ((026*0)*128) + ((030*2)/2) - 128 | db 026,030/24642 dw $4000 + ((026*0)*128) + ((030*3)/2) - 128 | db 026,030/24643 dw $4000 + ((026*0)*128) + ((030*4)/2) - 128 | db 026,030/24644 dw $4000 + ((026*0)*128) + ((030*5)/2) - 128 | db 026,030/24645 dw $4000 + ((026*0)*128) + ((030*6)/2) - 128 | db 026,030/24646 dw $4000 + ((026*0)*128) + ((030*7)/2) - 128 | db 026,030/24647 dw $4000 + ((026*1)*128) + ((030*0)/2) - 128 | db 026,030/24648 dw $4000 + ((026*1)*128) + ((030*1)/2) - 128 | db 026,030/24649 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 002,002/2 4650 dw 0 4652 db SpellAnimations15Block 4653 db 1 4654BlindingFogAnimation:4655 4656 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24657 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24658 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24659 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24660 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24661 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24662 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24663 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24664 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24665 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24666 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24667 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24668 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24669 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24670 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24671 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24672 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24673 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24674 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4675 dw 0 4678GoAnimateSpell:4679 xor a4680 ld (activepage),a 4681 call SwapAndSetPage 4682 ld hl,CheckVictoryOrDefeat.CopyPage1toPage04683 call docopy4685 xor a4686 ld (SpellAnimationStep),a4687 ld (SpellAnimationSpeed),a4688 ld (BackupImagePage0Ready?),a4689 ld (BackupImagePage1Ready?),a4690 ld a,(iy-1) 4691 ld (SpellAnimationSpeed+1),a4692 ld a,(iy-2) 4693 ld (SpellAnimationGfxBlock),a4695 .AnimationLoop:4696 4697 ld l,(iy)4698 ld h,(iy+1) 4699 ld a,l4700 or h4701 ret z 4702 ld de,$8000 + (188*128) + (000/2) - 128 4703 ld b,(iy+2) 4704 ld c,(iy+3) 4705 ld a,(SpellAnimationGfxBlock)4706 ld (AddressToWriteFrom),hl4707 ld (AddressToWriteTo),de 4708 ld (NXAndNY),bc4709 ld (BlockToReadFrom),a4710 call CopyRamToVramPage3ForBattleEngine 4712 4713 ld a,1884714 ld (TransparantImageBattle+sy),a 4715 xor a4716 ld (TransparantImageBattle+sx),a 4718 ld a,(iy+2) 4719 ld (TransparantImageBattle+ny),a4720 ld a,(iy+3) 4721 add a,a4722 ld (TransparantImageBattle+nx),a4723 4724 ld ix,(MonsterThatIsBeingAttacked)4725 ld a,(ix+MonsterY)4726 add a,(ix+MonsterNY)4727 sub (iy+2) 4728 ld (TransparantImageBattle+dy),a 4730 ld a,(ix+MonsterNX) 4731 srl a 4732 add a,(ix+MonsterX) 4733 sub a,(iy+3) 4734 res 0,a4735 jp nc,.EndCheckOverFlowLeft4737 neg4738 ld b,a4739 ld (TransparantImageBattle+sx),a 4740 ld a,(TransparantImageBattle+nx)4741 sub a,b4742 ld (TransparantImageBattle+nx),a4745 xor a4746 .EndCheckOverFlowLeft:4747 ld (TransparantImageBattle+dx),a 4750 4751 ld a,(activepage)4752 xor 14753 ld (TransparantImageBattle+dPage),a 4755 4756 call .Recoverbackground 4758 call .BackupImage 4760 ld hl,TransparantImageBattle4761 call docopy4762 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady4763 call DoCopy4764 halt4765 call SwapAndSetPage 4767 ld a,(SpellAnimationSpeed+1)4768 ld b,a4769 ld a,(SpellAnimationSpeed)4770 inc a4771 and b4772 ld (SpellAnimationSpeed),a4773 jp nz,.AnimationLoop4774 ld de,LenghtSpellAnimationStep4775 add iy,de 4776 jp .AnimationLoop4778.Recoverbackground:4779 ld a,(activepage) 4780 or a4781 ld b,1284782 ld ix,FreeToUseFastCopy1 4783 jr z,.RecoveryPageFound4784 ld b,0644785 ld ix,FreeToUseFastCopy0 4786 .RecoveryPageFound:4787 bit 0,(ix-1) 4788 ret z4790 ld a,(ix+sy)4791 ld (ix+dy),a4792 ld a,(ix+sx)4793 ld (ix+dx),a4795 ld a,b4796 ld (ix+sx),a 4797 ld a,1884798 ld (ix+sy),a 4800 ld a,(activepage) 4801 xor 14802 ld (ix+dpage),a4804 ld a,3 4805 ld (ix+spage),a4807 push ix4808 pop hl4809 jp docopy4811.BackupImage:4812 ld a,(activepage) 4813 or a4814 ld a,1284815 ld ix,FreeToUseFastCopy1 4816 jr z,.SetDx4817 ld a,0644818 ld ix,FreeToUseFastCopy0 4819 .SetDx:4820 ld (ix+dx),a 4821 set 0,(ix-1) 4823 ld a,34824 ld (ix+dpage),a4825 ld a,(TransparantImageBattle+ny)4826 ld (ix+ny),a4827 ld a,(TransparantImageBattle+nx)4828 ld (ix+nx),a4830 ld a,(TransparantImageBattle+dy)4831 ld (ix+sy),a4832 ld a,(TransparantImageBattle+dx)4833 ld (ix+sx),a4835 ld a,1884836 ld (ix+dy),a4838 ld a,(activepage) 4839 xor 14840 ld (ix+spage),a4842 push ix4843 pop hl4844 jp docopy4846CheckResistanceSkill: 4847 ld a,(CurrentActiveMonster) 4848 cp 74849 ld ix,(HeroThatGetsAttacked) 4850 jr c,.HeroThatGetsSpellCastOnFound4851 ld ix,(plxcurrentheroAddress)4852 .HeroThatGetsSpellCastOnFound:4854 push ix4855 pop hl4856 ld a,l4857 or h4858 jr z,.NeutralEnemy 4859 4860 ld a,(ix+HeroSkills+0)4861 call .CheckSkillResistance4862 ld a,(ix+HeroSkills+1)4863 call .CheckSkillResistance4864 ld a,(ix+HeroSkills+2)4865 call .CheckSkillResistance4866 ld a,(ix+HeroSkills+3)4867 call .CheckSkillResistance4868 ld a,(ix+HeroSkills+4)4869 call .CheckSkillResistance4870 ld a,(ix+HeroSkills+5)4871 call .CheckSkillResistance4872 ret4874 .NeutralEnemy: 4875 inc a 4876 ret4877 4878 .CheckSkillResistance:4879 cp 10 4880 jr z,.BasicResistanceFound4881 cp 11 4882 jr z,.AdvancedResistanceFound4883 cp 12 4884 jr z,.ExpertResistanceFound4885 ret4887 .BasicResistanceFound:4888 pop af 4890 4891 ld a,r4892 ld b,04893 ld c,a4894 ld de,104895 call DivideBCbyDE 4896 ld a,l4897 or a 4898 ret4900 .AdvancedResistanceFound:4901 pop af 4903 4904 ld a,r4905 ld b,04906 ld c,a4907 ld de,64908 call DivideBCbyDE 4909 ld a,l4910 or a 4911 ret4913 .ExpertResistanceFound:4914 pop af 4916 4917 ld a,r4918 ld b,04919 ld c,a4920 ld de,54921 call DivideBCbyDE 4922 ld a,l4923 or a 4924 ret4926AddPositiveSpellDamageFromSorcery:4927 push hl 4929 call SetCurrentActiveMOnsterInIX4930 4931 4932 push ix4933 pop hl 4934 ld de,Monster74935 call CompareHLwithDE 4936 ld ix,(plxcurrentheroAddress) 4937 jr c,.HeroFound4938 ld ix,(HeroThatGetsAttacked) 4939 jr .HeroFound4940 .HeroFound:4942 pop hl 4943 4944 ld a,(ix+HeroSkills+0)4945 call .CheckSkillSorcery4946 ld a,(ix+HeroSkills+1)4947 call .CheckSkillSorcery4948 ld a,(ix+HeroSkills+2)4949 call .CheckSkillSorcery4950 ld a,(ix+HeroSkills+3)4951 call .CheckSkillSorcery4952 ld a,(ix+HeroSkills+4)4953 call .CheckSkillSorcery4954 ld a,(ix+HeroSkills+5)4955 call .CheckSkillSorcery4956 ret4957 4958 .CheckSkillSorcery:4959 cp 25 4960 jr z,.BasicSorceryFound4961 cp 26 4962 jr z,.AdvancedSorceryFound4963 cp 27 4964 jr z,.ExpertSorceryFound4965 ret4967 .BasicSorceryFound:4968 pop af 4969 ld de,20 4970 jp ApplyPercentBasedBoost 4972 .AdvancedSorceryFound:4973 pop af 4974 ld de,10 4975 jp ApplyPercentBasedBoost 4977 .ExpertSorceryFound:4978 pop af 4979 ld de,06 4980 jp ApplyPercentBasedBoost 4986AddPositiveSpellDamageFromItemsForActiveHero:4987 call AddPositiveSpellDamageFromSorcery4989 push hl 4991 call SetCurrentActiveMOnsterInIX4992 4993 4994 push ix4995 pop hl 4996 ld de,Monster74997 call CompareHLwithDE 4998 ld ix,(plxcurrentheroAddress) 4999 jr c,.HeroFound5000 ld ix,(HeroThatGetsAttacked) 5001 jr .HeroFound5002 .HeroFound:5004 pop hl 5006 call .CheckItem16 5007 call .CheckItem28 5008 call .CheckItem36 5009 ret5011 .CheckItem16: 5012 ld a,(ix+HeroInventory+3) 5013 cp 0165014 ret nz5015 ld de,40 5016 jp ApplyPercentBasedBoost5018 .CheckItem28: 5019 ld a,(ix+HeroInventory+5) 5020 cp 0285021 ret nz5022 ld de,13 5023 jp ApplyPercentBasedBoost5025 .CheckItem36: 5026 ld a,(ix+HeroInventory+7) 5027 cp 0365028 ret nz5029 ld de,20 5030 jp ApplyPercentBasedBoost 5031 5032ReduceSpellDamageFromItems:5033 push hl 5035 ld ix,(MonsterThatIsBeingAttacked) 5037 push ix5038 pop hl 5039 ld de,Monster75040 call CompareHLwithDE 5041 ld ix,(plxcurrentheroAddress) 5042 jr c,.HeroFound5043 ld ix,(HeroThatGetsAttacked) 5044 .HeroFound:5046 pop hl 5048 call .CheckItem08 5049 call .CheckItem12 5050 call .CheckItem21 5051 call .CheckItem23 5052 call .CheckItem26 5053 call .CheckItem33 5054 call .CheckItem34 5055 call .CheckItem35 5056 call .CheckItem41 5057 ret5059 .CheckItem08: 5060 ld a,(ix+HeroInventory+1) 5061 cp 0085062 ret nz5063 ld de,40 5064 jp .ReducePercentage5066 .CheckItem12: 5067 ld a,(ix+HeroInventory+2) 5068 cp 0125069 ret nz5070 ld de,20 5071 jp .ReducePercentage5073 .CheckItem21: 5074 ld a,(ix+HeroInventory+4) 5075 cp 0215076 ret nz5077 ld de,40 5078 jp .ReducePercentage5080 .CheckItem23: 5081 ld a,(ix+HeroInventory+4) 5082 cp 0235083 ret nz5084 ld de,13 5085 jp .ReducePercentage5087 .CheckItem26: 5088 ld a,(ix+HeroInventory+5) 5089 cp 0265090 ret nz5091 ld de,20 5092 jp .ReducePercentage5094 .CheckItem33: 5095 ld a,(ix+HeroInventory+6) 5096 cp 0335097 ret nz5098 ld de,13 5099 jp .ReducePercentage5101 .CheckItem34: 5102 ld a,(ix+HeroInventory+6) 5103 cp 0345104 ret nz5105 ld de,10 5106 jp .ReducePercentage5108 .CheckItem35: 5109 ld a,(ix+HeroInventory+7) 5110 cp 0355111 ret nz5112 ld de,40 5113 jp .ReducePercentage5115 .CheckItem41: 5116 ld a,(ix+HeroInventory+8) 5117 cp 0415118 ret nz5119 ld de,40 5120 jp .ReducePercentage5122 .ReducePercentage:5123 push hl5125 push hl5126 pop bc5127 call DivideBCbyDE 5128 ld a,b5129 or c5130 jr nz,.NotZero5131 inc c 5132 .NotZero:5134 pop hl5135 or a5136 sbc hl,bc5137 ret5150MSXHeroes.asm1024 ds $c000-$,$ff1025dephase10271030BattleFieldObjectsBlock: equ $521031phase $40001032 incbin "..\grapx\Battlefield\BattleFieldObjects.SC5",7,45 * 128 1033 ds $8000-$,$ff1034dephase10361039ExtraRoutinesCodeBlock: equ $531040phase $40001041 ExtraRoutines.asm1ShowItemStats:2call screenon3 call SetItemStatsWindow 4 call SwapAndSetPage 5 6 .engine:7 call PopulateControls 914 ld a,(NewPrContr)15 and %0011 000016 jr nz,.end17 jr .engine 19 .end:20 ld a,%0011 000021 ld (ControlsOnInterrupt),a 22 ret25SetItemStatsWindow:26 ld de,$0000 + (007*128) + (008/2) - 12828 ld a,(spat+1) 29 sub 3230 jr nc,.NotCarryX31 xor a32 .NotCarryX:33 cp 10034 jr c,.NoOverFlowRight35 ld a,10036 .NoOverFlowRight:38 ld b,a 40 srl a 41 ld h,042 ld l,a43 add hl,de44 ex de,hl45 46 ld a,(spat+0) 47 ld c,-5048 cp 7049 jr nc,.CursorTopOfScreen50 ld c,3251 .CursorTopOfScreen:52 add a,c54 sub a,2455 jr nc,.NotCarryY56 xor a57 .NotCarryY:58 cp 11959 jr c,.NoOverFlowBottom60 ld a,11961 .NoOverFlowBottom:63 ld c,a 64 push bc66 ld h,067 ld l,a68 add hl,hl 69 add hl,hl 70 add hl,hl 71 add hl,hl 72 add hl,hl 73 add hl,hl 74 add hl,hl 75 add hl,de76 ex de,hl78 ld hl,$4000 + (070*128) + (150/2) - 12879 ld bc,$0000 + (040*256) + (088/2)80 ld a,HeroOverviewStatusGraphicsBlock 81 call CopyRamToVramCorrectedCastleOverview 83 pop bc 8586 ld a,b 87 add a,1588 ld b,a 90 ld a,c 91 add a,1492 ld c,a 94 ld a,(MonsterHerocollidedWithOnMap)95 cp 7396 jp z,CheckLearningStoneAlreadyVisited97 cp 7498 jp z,CheckSpireOfWisdomAlreadyVisited99 cp 76100 jp z,CheckGuardTowerAlreadyVisited101 cp 83 102 ld hl,TextArtifact103 jp nc,SetText104 sub 65 105 ld h,0106 ld l,a 107 ld de,LenghtTextItem108 push bc109 call MultiplyHlWithDE 110 pop bc111 ld de,TextChestRuby112 add hl,de113 jp SetText 115CheckLearningStoneAlreadyVisited:116 call .CheckLearningStoneAlreadyVisited117 ld hl,TextLearningStone118 jp z,SetText 119 ld hl,TextLearningStoneX120 jp SetText 122.CheckLearningStoneAlreadyVisited:123 ld ix,(plxcurrentheroAddress)124 ld a,(MonsterHerocollidedWithOnMapAmount) 125 sub 192126 jr z,.LearningStone1127 dec a128 jr z,.LearningStone2129 dec a130 jr z,.LearningStone3131 dec a132 jr z,.LearningStone4133 dec a134 jr z,.LearningStone5135137 .LearningStone6:138 bit 6,(ix+HeroFireSpells)139 ret140 .LearningStone5:141 bit 7,(ix+HeroFireSpells)142 ret143 .LearningStone4:144 bit 4,(ix+HeroEarthSpells)145 ret146 .LearningStone3:147 bit 5,(ix+HeroEarthSpells)148 ret149 .LearningStone2:150 bit 6,(ix+HeroEarthSpells)151 ret152 .LearningStone1:153 bit 7,(ix+HeroEarthSpells)154 ret156CheckSpireOfWisdomAlreadyVisited:157 call .CheckSpireOfWisdomAlreadyVisited158 ld hl,TextSpireOfWisdom159 jp z,SetText 160 ld hl,TextSpireOfWisdomX161 jp SetText 163.CheckSpireOfWisdomAlreadyVisited:164 ld ix,(plxcurrentheroAddress)165 ld a,(MonsterHerocollidedWithOnMapAmount) 166 sub 192167 jr z,.SpireOfWisdom1168 dec a169 jr z,.SpireOfWisdom2170 dec a171 jr z,.SpireOfWisdom3172 dec a173 jr z,.SpireOfWisdom4174 dec a175 jr z,.SpireOfWisdom5176178 179 .SpireOfWisdom6:180 bit 4,(ix+HeroAirSpells)181 ret182 .SpireOfWisdom5:183 bit 5,(ix+HeroAirSpells)184 ret185 .SpireOfWisdom4:186 bit 6,(ix+HeroAirSpells)187 ret188 .SpireOfWisdom3:189 bit 7,(ix+HeroAirSpells)190 ret191 .SpireOfWisdom2:192 bit 4,(ix+HeroFireSpells)193 ret194 .SpireOfWisdom1:195 bit 5,(ix+HeroFireSpells)196 ret205CheckGuardTowerAlreadyVisited:206 ld a,(MonsterHerocollidedWithOnMapAmount)207 or a208 ld hl,TextGuardTowerX209 jp z,SetText 210 ld hl,TextGuardTower211 jp SetText 213LenghtTextItem: equ TextChestGems-TextChestRuby214TextChestRuby: db "     Chest      ",254,254 215 db " Chest with Riches",255217TextChestGems: db "     Chest      ",254,254 218 db " Chest with Gold  ",255220TextWood: db "     Wood       ",254,254 221 db " 5 Pieces of Wood ",255223TextOre: db "      Ore       ",254,254 224 db " 5 Pieces of Ore  ",255226TextGems: db "     Gems       ",254,254 227 db " 5 Pieces of Gems ",255229TextRubies: db "     Rubies     ",254,254 230 db "5 Pieces of Rubies",255232TextBagOfGold: db "   Bag of Gold  ",254,254 233 db " Contains 500 Gold",255235TextWaterWell: db "   Water Well   ",254,254 236 db " Restores Mobility",255238TextLearningStone: db "  Learning Stone",254,254 239 db "+1000 XP once only",255241TextSpireOfWisdom: db " Spire of Wisdom",254,254 242 db "+1 Stat once only ",255244TextScroll: db "  Ancient Scroll",254,254 245 db " Holds Enchantment",255247TextGuardTower: db "   Guard Tower  ",254,254 248 db " Rich in treasures",255250TextArtifact: db "  Ancient Relic ",254,254 251 db " A Mighty Artifact",255255TextLearningStoneX: db "  Learning Stone",254,254 256 db " Already Learned  ",255258TextSpireOfWisdomX: db " Spire of Wisdom",254,254 259 db " Already Learned  ",255261TextGuardTowerX: db "   Guard Tower  ",254,254 262 db "  Already Visited ",255265CheckIfAPlayerGotEliminated:266 267 ld a,(PlayerLostHeroInBattle?)268 dec a269 ret m270 ld (PlayerLostHeroInBattle?),a271 jp nz,DisableScrollScreen 273 274 call .CheckWhichPlayerLostAHero 275 push hl276 pop ix277 ld a,(ix+HeroStatus) 278 cp 255279 jr z,.NoMoreHeroesLeft280 cp 254281 ret nz 282 ld a,(ix+HeroX) 283 cp 255284 ret nz 285 .NoMoreHeroesLeft:287 288 ld a,(PlayerWhoLostAHeroInBattle?)289 ld b,a290 ld a,(Castle1+CastlePlayer)291 cp b292 ret z 293 ld a,(Castle2+CastlePlayer)294 cp b295 ret z 296 ld a,(Castle3+CastlePlayer)297 cp b298 ret z 299 ld a,(Castle4+CastlePlayer)300 cp b301 ret z 303 call ClearMapPage0AndMapPage1 305 ld a,1306 ld (GameStatus),a 308 call SetPlayerEliminatedWindowAndText309 call SwapAndSetPage 310 311 .engine:312 call PopulateControls 314319 ld a,(NewPrContr)320 and %0011 0000321 jr nz,.end322 jr .engine 324 .end:325 ld a,%0011 0000326 ld (ControlsOnInterrupt),a 327 jp CheckIfThereIsAPlayerWhoWonTheGame329.CheckWhichPlayerLostAHero:330 ld a,(PlayerWhoLostAHeroInBattle?)331 dec a332 ld hl,pl1hero1y 333 ret z334 dec a335 ld hl,pl2hero1y 336 ret z337 dec a338 ld hl,pl3hero1y 339 ret z340 ld hl,pl4hero1y 341 ret343CheckIfThereIsAPlayerWhoWonTheGame:344 ld c,0 346 ld b,1 347 ld a,(pl1hero1y+HeroStatus) 348 call .CheckPlayer349 ld b,2 350 ld a,(pl2hero1y+HeroStatus) 351 call .CheckPlayer352 ld b,3 353 ld a,(pl3hero1y+HeroStatus) 354 call .CheckPlayer355 ld b,4 356 ld a,(pl4hero1y+HeroStatus) 357 call .CheckPlayer359 dec c 360 ret nz362 call SwapAndSetPage 363 ld b,60364 .loop:365 halt366 djnz .loop367 call SetPlayerWonGameWindowAndText 368 call SwapAndSetPage 369 370 .engine:371 call PopulateControls 373378 ld a,(NewPrContr)379 and %0011 0000380 jr nz,.end381 jr .engine 383 .end:384 ld a,%0011 0000385 ld (ControlsOnInterrupt),a 386 ret387 388 .CheckPlayer:389 cp 255390 jr nz,.PlayerStillHasAHeroOrCastleLeft391 392 ld a,(Castle1+CastlePlayer)393 cp b394 jr z,.PlayerStillHasAHeroOrCastleLeft395 ld a,(Castle2+CastlePlayer)396 cp b397 jr z,.PlayerStillHasAHeroOrCastleLeft398 ld a,(Castle3+CastlePlayer)399 cp b400 jr z,.PlayerStillHasAHeroOrCastleLeft401 ld a,(Castle4+CastlePlayer)402 cp b403 ret nz405 .PlayerStillHasAHeroOrCastleLeft:406 inc c 407 ret413SetPlayerWonGameWindowAndText:414 ld hl,$4000 + (070*128) + (150/2) - 128415 ld de,$0000 + (060*128) + (058/2) - 128416 ld bc,$0000 + (040*256) + (088/2)417 ld a,HeroOverviewStatusGraphicsBlock 418 call CopyRamToVramCorrectedCastleOverview 420 ld b,075 421 ld c,067 422 ld hl,TextPlayerWonGame1423 call SetText425 ld hl,1426 ld a,(pl1hero1y+HeroStatus) 427 cp 255428 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame429 ld hl,2430 ld a,(pl2hero1y+HeroStatus) 431 cp 255432 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame433 ld hl,3434 ld a,(pl2hero1y+HeroStatus) 435 cp 255436 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame437 ld hl,4438 .PlayerStillHasAHeroLeftAndWonTheGame:439 ld b,115 440 ld c,078 441 call SetNumber16BitCastle443 ld b,078 444 ld c,078 445 ld hl,TextPlayerWonGame2446 jp SetText448TextPlayerWonGame1: 449 db "Congratulations",255450TextPlayerWonGame2: 451 db "  Player",254452 db "Is Victorious",255454SetPlayerEliminatedWindowAndText:455 ld hl,$4000 + (070*128) + (150/2) - 128456 ld de,$0000 + (060*128) + (058/2) - 128457 ld bc,$0000 + (040*256) + (088/2)458 ld a,HeroOverviewStatusGraphicsBlock 459 call CopyRamToVramCorrectedCastleOverview 461 ld b,066 462 ld c,067 463 ld hl,TextPlayerEliminated1464 call SetText466 ld a,(PlayerWhoLostAHeroInBattle?)467 ld l,a468 ld h,0469 ld b,115 470 ld c,078 471 call SetNumber16BitCastle473 ld b,078 474 ld c,078 475 ld hl,TextPlayerEliminated2476 jp SetText479TextPlayerEliminated1: 480 db " Player Eliminated",255481TextPlayerEliminated2: 482 db "  Player",254483 db "Is Eliminated",255500DisplaySpireOfWisdomCOde:501 ld a,255 502 ld (PreviousButtonClicked),a 503 ld ix,GenericButtonTable504 ld (PreviousButtonClickedIX),ix506 call SetSpireOfWisdomButtons507 call SetSpireOfWisdomGraphics 508 call SetSpireOfWisdomText509 call SwapAndSetPage 510 call SetSpireOfWisdomGraphics 511 call SetSpireOfWisdomText513 .engine: 514 call SwapAndSetPage 515 call PopulateControls 517526 527 ld ix,GenericButtonTable528 call .CheckButtonMouseInteractionGenericButtons530 call .CheckButtonClicked 532 533 ld ix,(PreviousButtonClickedIX) 534 ld a,(ix+GenericButtonStatus)535 push af536 ld a,(PreviousButtonClicked)537 cp 255538 jr z,.EndMarkButton 539 ld (ix+GenericButtonStatus),%1010 0011540 .EndMarkButton:541 543 ld ix,GenericButtonTable544 call .SetGenericButtons 546 547 pop af548 ld ix,(PreviousButtonClickedIX) 549 ld (ix+GenericButtonStatus),a550 552 halt553 jp .engine555 .CheckButtonClicked:556 ret nc557 ld a,%1100 0011558 ld (GenericButtonTable+(4*GenericButtonTableLenghtPerButton)),a 560 ld a,b561 cp 1 562 jp z,.VButton563 ld (PreviousButtonClicked),a564 ld (PreviousButtonClickedIX),ix565 ret575 .SetGenericButtons: 576 ld a,(ix+GenericButtonGfxBlock)577 ld (ButtonGfxBlockCopy),a579 ld b,(ix+GenericButtonAmountOfButtons)580 .loop:581 push bc582 call .Setbutton583 pop bc584 ld de,GenericButtonTableLenghtPerButton585 add ix,de587 djnz .loop588 ret590 .Setbutton:591 bit 7,(ix+GenericButtonStatus)592 ret z 594 bit 0,(ix+GenericButtonStatus) 595 res 0,(ix+GenericButtonStatus) 596 jr nz,.goCopyButton597 bit 1,(ix+GenericButtonStatus)598 res 1,(ix+GenericButtonStatus)599 ret z 600 .goCopyButton:602 ld l,(ix+GenericButton_SYSX_Ontouched)603 ld h,(ix+GenericButton_SYSX_Ontouched+1)604 bit 6,(ix+GenericButtonStatus)605 jr nz,.go 607 ld l,(ix+GenericButton_SYSX_MovedOver)608 ld h,(ix+GenericButton_SYSX_MovedOver+1)609 bit 5,(ix+GenericButtonStatus)610 jr nz,.go 612 ld l,(ix+GenericButton_SYSX_Clicked)613 ld h,(ix+GenericButton_SYSX_Clicked+1)614 .go:616 617 ld e,(ix+GenericButton_DYDX)618 ld d,(ix+GenericButton_DYDX+1)620 ld a,(ix+GenericButtonYbottom)621 sub a,(ix+GenericButtonYtop)622 ld b,a 623 ld a,(ix+GenericButtonXright)624 sub a,(ix+GenericButtonXleft)625 srl a 626 ld c,a 629 ld a,(ButtonGfxBlockCopy)631633 ld de,$8000 + ((212+16)*128) + (000/2) - 128 634 call CopyRamToVramCorrectedWithoutActivePageSetting 636 ld a,(activepage)637 xor 1638 ld (CopyCastleButton2+dPage),a640 ld a,(ix+GenericButtonXleft)641 ld (CopyCastleButton2+dx),a642 ld a,(ix+GenericButtonYtop)643 ld (CopyCastleButton2+dy),a645 ld a,(ix+GenericButtonYbottom)646 sub a,(ix+GenericButtonYtop)647 ld (CopyCastleButton2+ny),a649 ld a,(ix+GenericButtonXright)650 sub a,(ix+GenericButtonXleft)651 ld (CopyCastleButton2+nx),a653 ld a,212+16654 ld (CopyCastleButton2+sy),a656 ld hl,CopyCastleButton2657 call docopy659 ld a,212660 ld (CopyCastleButton2+sy),a662 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady663 call docopy664 ret671 .CheckButtonMouseInteractionGenericButtons:672 ld b,(ix+GenericButtonAmountOfButtons)673 ld de,GenericButtonTableLenghtPerButton675 .loop2:676 call .check677 add ix,de678 djnz .loop2679 ret680 681 .check:682 bit 7,(ix+GenericButtonStatus) 683 ret z 684 685 ld a,(spat+0) 686 cp (ix+GenericButtonYtop)687 jr c,.NotOverButton688 cp (ix+GenericButtonYbottom)689 jr nc,.NotOverButton690 ld a,(spat+1) 692 add a,06693 694 cp (ix+GenericButtonXleft)695 jr c,.NotOverButton696 cp (ix+GenericButtonXright)697 jr nc,.NotOverButton698 700706 ld a,(Controls)707 bit 4,a 708 jr nz,.MouseOverButtonAndSpacePressed709 bit 4,(ix+GenericButtonStatus) 710 jr nz,.MenuOptionSelected 711 .MouseHoverOverButton:712 ld (ix+GenericButtonStatus),%1010 0011713 ret715 .MouseOverButtonAndSpacePressed:716 bit 4,(ix+GenericButtonStatus) 717 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit718 ld a,(NewPrContr)719 bit 4,a 720 jr z,.MouseHoverOverButton722 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:723 ld (ix+GenericButtonStatus),%1001 0011724 ret725 726 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:727 ld (ix+GenericButtonStatus),%1001 0011728 ret730 .NotOverButton:731 bit 4,(ix+GenericButtonStatus) 732 jr nz,.buttonIsStillLit733 bit 5,(ix+GenericButtonStatus) 734 ret z735 .buttonIsStillLit:736 ld (ix+GenericButtonStatus),%1100 0011737 ret739 .MenuOptionSelected:740 pop af 741 ld (ix+GenericButtonStatus),%1010 0011742 scf 744 ld a,b 745 ld (MenuOptionSelected?),a746 ret764 .VButton:765 pop af 766 ld ix,(plxcurrentheroAddress)767 ld a,(PreviousButtonClicked)768 cp 2769 jr z,.SpellPowerSelected770 cp 3771 jr z,.IntelligenceSelected772 cp 4773 jr z,.DefenseSelected774777 .AttackSelected:778 inc (ix+HeroStatAttack)779 ret781 .DefenseSelected:782 inc (ix+HeroStatDefense)783 ret785 .IntelligenceSelected:786 inc (ix+HeroStatKnowledge)787 ret789 .SpellPowerSelected:790 inc (ix+HeroStatSpellDamage)791 ret793SetSpireOfWisdomButtons:794 ld hl,SetSpireOfWisdomButtonTable-2795 ld de,GenericButtonTable-2796 ld bc,2+(GenericButtonTableLenghtPerButton*05)797 ldir798 ret800SetSpireOfWisdomButtonTableGfxBlock: db SecondarySkillsButtonsBlock801SetSpireOfWisdomButtonTableAmountOfButtons: db 05802SetSpireOfWisdomButtonTable: 804 db %1100 0011 | dw $4000 + (132*128) + (090/2) - 128 | dw $4000 + (132*128) + (154/2) - 128 | dw $4000 + (000*128) + (240/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 805 806 db %1100 0011 | dw $4000 + (132*128) + (106/2) - 128 | dw $4000 + (132*128) + (170/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 807 808 db %1100 0011 | dw $4000 + (132*128) + (122/2) - 128 | dw $4000 + (132*128) + (186/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 128 809 810 db %1100 0011 | dw $4000 + (132*128) + (138/2) - 128 | dw $4000 + (132*128) + (202/2) - 128 | dw $4000 + (048*128) + (240/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 128 811 812 db %0000 0000 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 128 814.Button1Ytop: equ 026 + 24815.Button1YBottom: equ .Button1Ytop + 016816.Button1XLeft: equ 028 + 20817.Button1XRight: equ .Button1XLeft + 016819.Button2Ytop: equ 060 + 24820.Button2YBottom: equ .Button2Ytop + 016821.Button2XLeft: equ 028 + 20822.Button2XRight: equ .Button2XLeft + 016824.Button3Ytop: equ 026 + 24825.Button3YBottom: equ .Button3Ytop + 016826.Button3XLeft: equ 118 + 20827.Button3XRight: equ .Button3XLeft + 016829.Button4Ytop: equ 060 + 24830.Button4YBottom: equ .Button4Ytop + 016831.Button4XLeft: equ 118 + 20832.Button4XRight: equ .Button4XLeft + 016834.Button5Ytop: equ 146835.Button5YBottom: equ .Button5Ytop + 019836.Button5XLeft: equ 154837.Button5XRight: equ .Button5XLeft + 020839SetSpireOfWisdomText:840 call .SetFontPage0Y212 842 ld b,072+00 843 ld c,031+00 844 ld hl,TextSpireOfWisdom1845 call SetText 847 ld b,035+00 848 ld c,069+00 849 ld hl,TextPlus1Attack850 call SetText 852 ld b,034+00 853 ld c,103+00 854 ld hl,TextPlus1Defense855 call SetText 857 ld b,120+00 858 ld c,069+00 859 ld hl,TextPlus1Intelligence860 call SetText 862 ld b,119+00 863 ld c,103+00 864 ld hl,TextPlus1SpellPower865 call SetText 867 ld b,029+00 868 ld c,116+00 869 ld hl,TextSpireOfWisdom2870 jp SetText 872.SetFontPage0Y212: 873 ld hl,$4000 + (000*128) + (000/2) - 128874 ld de,$0000 + (212*128) + (000/2) - 128875 ld bc,$0000 + (006*256) + (256/2)876 ld a,CastleOverviewFontBlock 877 jp CopyRamToVramCorrectedWithoutActivePageSetting 880TextSpireOfWisdom1:881 db "Spire Of Wisdom",255882TextSpireOfWisdom2:883 db "Within the hallowed walls of the",254884 db "Spire of Wisdom, you stand poised",254885 db "to refine your essence.",254886 db "Choose your path: forge your",254887 db "attack, bolster your defense, ",254888 db "sharpen your intellect, or unlock",254889 db "the arcane depths of spellcraft.",255890TextPlus1Attack:891 db "+1 attack",255892TextPlus1Defense:893 db "+1 defense",255894TextPlus1Intelligence:895 db "+1 intelligence",255896TextPlus1SpellPower:897 db "+1 spell power",255899SetSpireOfWisdomGraphics:900 ld hl,$4000 + (000*128) + (000/2) - 128901 ld de,$0000 + (024*128) + (020/2) - 128902 ld bc,$0000 + (148*256) + (162/2)903 ld a,ScrollBlock 904 call CopyRamToVramCorrectedCastleOverview 906 ld hl,$4000 + (139*128) + (044/2) - 128907 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 128908 ld bc,$0000 + (060*256) + (104/2)909 ld a,DefeatBlock 910 call CopyRamToVramCorrectedCastleOverview 912 ld hl,$4000 + (068*128) + (210/2) - 128913 ld de,$0000 + ((024+19)*128) + ((020+70)/2) - 128914 ld bc,$0000 + (068*256) + (026/2)915 ld a,DefeatBlock 916 call CopyRamToVramCorrectedCastleOverview 918 ld hl,$4000 + (132*128) + (218/2) - 128919 ld de,$0000 + (146*128) + (154/2) - 128920 ld bc,$0000 + (019*256) + (020/2)921 ld a,SecondarySkillsButtonsBlock 922 jp CopyRamToVramCorrectedCastleOverview 924DisplayDiskMenuCOde:925 call SetDiskMenuButtons926 call SetDiskMenuGraphics 927 call SwapAndSetPage 928 call SetDiskMenuGraphics 929 call CopyActivePageToInactivePageExtraRoutines930 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady931 call docopy933 .engine: 934 call SwapAndSetPage 935 call PopulateControls 937942 ld a,(NewPrContr)943 bit 5,a 944 ret nz946 ld ix,GenericButtonTable947 call DisplaySpireOfWisdomCOde.CheckButtonMouseInteractionGenericButtons949 call .CheckButtonClicked 951 ld ix,GenericButtonTable952 call DisplaySpireOfWisdomCOde.SetGenericButtons 954 halt955 jp .engine957 .CheckButtonClicked:958 ret nc959 pop af 960 962 ret966SetDiskMenuButtons:967 ld hl,SetDiskMenuButtonTable-2968 ld de,GenericButtonTable-2969 ld bc,2+(GenericButtonTableLenghtPerButton*02)970 ldir971 ret973SetDiskMenuButtonTableGfxBlock: db DiskMenuBlock974SetDiskMenuButtonTableAmountOfButtons: db 02975SetDiskMenuButtonTable: 977 db %1100 0011 | dw $4000 + (101*128) + (000/2) - 128 | dw $4000 + (112*128) + (000/2) - 128 | dw $4000 + (123*128) + (000/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 978 979 db %1100 0011 | dw $4000 + (101*128) + (128/2) - 128 | dw $4000 + (112*128) + (128/2) - 128 | dw $4000 + (123*128) + (128/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 981.Button1Ytop: equ 081982.Button1YBottom: equ .Button1Ytop + 011983.Button1XLeft: equ 038984.Button1XRight: equ .Button1XLeft + 128986.Button2Ytop: equ 095987.Button2YBottom: equ .Button2Ytop + 011988.Button2XLeft: equ 038989.Button2XRight: equ .Button2XLeft + 128991SetDiskMenuGraphics:992 ld hl,$4000 + (000*128) + (000/2) - 128993 ld de,$0000 + (063*128) + (030/2) - 128994 ld bc,$0000 + (051*256) + (144/2)995 ld a,DiskMenuBlock 996 jp CopyRamToVramCorrectedCastleOverview 998CopyActivePageToInactivePageExtraRoutines:999 ld a,(activepage) 1000 or a1001 ld hl,.CopyPage0toPage11002 jp z,docopy1003 ld hl,.CopyPage1toPage01004 jp docopy1006.CopyPage1toPage0:1007 db 000,000,016,0011008 db 000,000,016,0001009 db 000,001,212,0001010 db 000,000,$d0 1011.CopyPage0toPage1:1012 db 000,000,016,0001013 db 000,000,016,0011014 db 000,001,212,0001015 db 000,000,$d0 1023 MSXHeroes.asm 1042 ds $8000-$,$ff1043dephase10451048MonsterAddressesForBattle1Block: equ $541049phase $80001050 MonsterAddressesForBattle1.asm1MonsterTableSpriteSheetBlock: equ 162MonsterTableNX: equ MonsterTableSpriteSheetBlock+13MonsterTableNY: equ MonsterTableNX+14MonsterTableCostGold: equ MonsterTableNY+15MonsterTableCostGems: equ MonsterTableCostGold+16MonsterTableCostRubies: equ MonsterTableCostGems+17MonsterTableHp: equ MonsterTableCostRubies+18MonsterTableSpeed: equ MonsterTableHp+19MonsterTableAttack: equ MonsterTableSpeed+110MonsterTableDefense: equ MonsterTableAttack+111MonsterTableGrowth: equ MonsterTableDefense+112MonsterTableDamage: equ MonsterTableGrowth+113MonsterTableSpecialAbility: equ MonsterTableDamage+114MonsterTableName: equ MonsterTableSpecialAbility+115RangedMonster: equ 12817LengthMonsterAddressesTable: equ Monster002Table-Monster001Table19Level1Unit: equ %0000 000020Level2Unit: equ %0010 000021Level3Unit: equ %0100 000022Level4Unit: equ %0110 000023Level5Unit: equ %1000 000024Level6Unit: equ %1010 000029MonsterAddressesForBattle1Data.asm12DragonSlayerUnitLevel1Number: equ 303DragonSlayerUnitLevel1Damage: equ 24DragonSlayerUnitLevel1Attack: equ 45DragonSlayerUnitLevel1Defense: equ 56DragonSlayerUnitLevel1HP: equ 107DragonSlayerUnitLevel1Speed: equ 48DragonSlayerUnitLevel1Growth: equ 149DragonSlayerUnitLevel1CostGold: equ 80/1010DragonSlayerUnitLevel1CostGems: equ 00+Level1Unit11DragonSlayerUnitLevel1CostRubies: equ 013DragonSlayerUnitLevel2Number: equ 2714DragonSlayerUnitLevel2Damage: equ 315DragonSlayerUnitLevel2Attack: equ 616DragonSlayerUnitLevel2Defense: equ 617DragonSlayerUnitLevel2HP: equ 1118DragonSlayerUnitLevel2Speed: equ 419DragonSlayerUnitLevel2Growth: equ 920DragonSlayerUnitLevel2CostGold: equ 100/1021DragonSlayerUnitLevel2CostGems: equ 00+Level2Unit22DragonSlayerUnitLevel2CostRubies: equ 024DragonSlayerUnitLevel3Number: equ 2925DragonSlayerUnitLevel3Damage: equ 526DragonSlayerUnitLevel3Attack: equ 827DragonSlayerUnitLevel3Defense: equ 828DragonSlayerUnitLevel3HP: equ 2529DragonSlayerUnitLevel3Speed: equ 630DragonSlayerUnitLevel3Growth: equ 731DragonSlayerUnitLevel3CostGold: equ 200/1032DragonSlayerUnitLevel3CostGems: equ 00+Level3Unit33DragonSlayerUnitLevel3CostRubies: equ 035DragonSlayerUnitLevel4Number: equ 3136DragonSlayerUnitLevel4Damage: equ 837DragonSlayerUnitLevel4Attack: equ 1038DragonSlayerUnitLevel4Defense: equ 1239DragonSlayerUnitLevel4HP: equ 3540DragonSlayerUnitLevel4Speed: equ 541DragonSlayerUnitLevel4Growth: equ 442DragonSlayerUnitLevel4CostGold: equ 300/1043DragonSlayerUnitLevel4CostGems: equ 00+Level4Unit44DragonSlayerUnitLevel4CostRubies: equ 046DragonSlayerUnitLevel5Number: equ 3547DragonSlayerUnitLevel5Damage: equ 1148DragonSlayerUnitLevel5Attack: equ 1249DragonSlayerUnitLevel5Defense: equ 1350DragonSlayerUnitLevel5HP: equ 4051DragonSlayerUnitLevel5Speed: equ 552DragonSlayerUnitLevel5Growth: equ 253DragonSlayerUnitLevel5CostGold: equ 400/1054DragonSlayerUnitLevel5CostGems: equ 00+Level5Unit55DragonSlayerUnitLevel5CostRubies: equ 057DragonSlayerUnitLevel6Number: equ 3358DragonSlayerUnitLevel6Damage: equ 2059DragonSlayerUnitLevel6Attack: equ 1660DragonSlayerUnitLevel6Defense: equ 1561DragonSlayerUnitLevel6HP: equ 100+5062DragonSlayerUnitLevel6Speed: equ 763DragonSlayerUnitLevel6Growth: equ 164DragonSlayerUnitLevel6CostGold: equ 1000/1065DragonSlayerUnitLevel6CostGems: equ 00+Level6Unit66DragonSlayerUnitLevel6CostRubies: equ 272UsasUnitLevel1Number: equ 5173UsasUnitLevel1Damage: equ 274UsasUnitLevel1Attack: equ 575UsasUnitLevel1Defense: equ 376UsasUnitLevel1HP: equ 877UsasUnitLevel1Speed: equ 678UsasUnitLevel1Growth: equ 1479UsasUnitLevel1CostGold: equ 70/1080UsasUnitLevel1CostGems: equ 00+Level1Unit81UsasUnitLevel1CostRubies: equ 083UsasUnitLevel2Number: equ 5284UsasUnitLevel2Damage: equ 385UsasUnitLevel2Attack: equ 686UsasUnitLevel2Defense: equ 787UsasUnitLevel2HP: equ 2088UsasUnitLevel2Speed: equ 389UsasUnitLevel2Growth: equ 890UsasUnitLevel2CostGold: equ 120/1091UsasUnitLevel2CostGems: equ 00+Level2Unit92UsasUnitLevel2CostRubies: equ 094UsasUnitLevel3Number: equ 5495UsasUnitLevel3Damage: equ 496UsasUnitLevel3Attack: equ 997UsasUnitLevel3Defense: equ 798UsasUnitLevel3HP: equ 2599UsasUnitLevel3Speed: equ 6100UsasUnitLevel3Growth: equ 7101UsasUnitLevel3CostGold: equ 200/10102UsasUnitLevel3CostGems: equ 00+Level3Unit103UsasUnitLevel3CostRubies: equ 0105UsasUnitLevel4Number: equ 48106UsasUnitLevel4Damage: equ 7107UsasUnitLevel4Attack: equ 9108UsasUnitLevel4Defense: equ 8109UsasUnitLevel4HP: equ 30110UsasUnitLevel4Speed: equ 8111UsasUnitLevel4Growth: equ 5112UsasUnitLevel4CostGold: equ 250/10113UsasUnitLevel4CostGems: equ 00+Level4Unit114UsasUnitLevel4CostRubies: equ 0116UsasUnitLevel5Number: equ 49 117UsasUnitLevel5Damage: equ 10118UsasUnitLevel5Attack: equ 9119UsasUnitLevel5Defense: equ 12120UsasUnitLevel5HP: equ 65121UsasUnitLevel5Speed: equ 4122UsasUnitLevel5Growth: equ 2123UsasUnitLevel5CostGold: equ 425/10124UsasUnitLevel5CostGems: equ 00+Level5Unit125UsasUnitLevel5CostRubies: equ 1127UsasUnitLevel6Number: equ 50128UsasUnitLevel6Damage: equ 20129UsasUnitLevel6Attack: equ 15130UsasUnitLevel6Defense: equ 14131UsasUnitLevel6HP: equ 90+50132UsasUnitLevel6Speed: equ 7133UsasUnitLevel6Growth: equ 1134UsasUnitLevel6CostGold: equ 850/10135UsasUnitLevel6CostGems: equ 02+Level6Unit136UsasUnitLevel6CostRubies: equ 0140SDSnatcherUnitLevel1Number: equ 6141SDSnatcherUnitLevel1Damage: equ 2142SDSnatcherUnitLevel1Attack: equ 3143SDSnatcherUnitLevel1Defense: equ 3144SDSnatcherUnitLevel1HP: equ 4145SDSnatcherUnitLevel1Speed: equ 4146SDSnatcherUnitLevel1Growth: equ 16147SDSnatcherUnitLevel1CostGold: equ 30/10148SDSnatcherUnitLevel1CostGems: equ 00+Level1Unit149SDSnatcherUnitLevel1CostRubies: equ 0151SDSnatcherUnitLevel2Number: equ 5152SDSnatcherUnitLevel2Damage: equ 3153SDSnatcherUnitLevel2Attack: equ 6154SDSnatcherUnitLevel2Defense: equ 6155SDSnatcherUnitLevel2HP: equ 16156SDSnatcherUnitLevel2Speed: equ 6157SDSnatcherUnitLevel2Growth: equ 9158SDSnatcherUnitLevel2CostGold: equ 130/10159SDSnatcherUnitLevel2CostGems: equ 00+Level2Unit160SDSnatcherUnitLevel2CostRubies: equ 0162SDSnatcherUnitLevel3Number: equ 1163SDSnatcherUnitLevel3Damage: equ 5164SDSnatcherUnitLevel3Attack: equ 7165SDSnatcherUnitLevel3Defense: equ 10166SDSnatcherUnitLevel3HP: equ 30167SDSnatcherUnitLevel3Speed: equ 3168SDSnatcherUnitLevel3Growth: equ 6169SDSnatcherUnitLevel3CostGold: equ 250/10170SDSnatcherUnitLevel3CostGems: equ 00+Level3Unit171SDSnatcherUnitLevel3CostRubies: equ 0173SDSnatcherUnitLevel4Number: equ 2174SDSnatcherUnitLevel4Damage: equ 8175SDSnatcherUnitLevel4Attack: equ 11176SDSnatcherUnitLevel4Defense: equ 8177SDSnatcherUnitLevel4HP: equ 35178SDSnatcherUnitLevel4Speed: equ 6179SDSnatcherUnitLevel4Growth: equ 4180SDSnatcherUnitLevel4CostGold: equ 350/10181SDSnatcherUnitLevel4CostGems: equ 00+Level4Unit182SDSnatcherUnitLevel4CostRubies: equ 0184SDSnatcherUnitLevel5Number: equ 3185SDSnatcherUnitLevel5Damage: equ 15186SDSnatcherUnitLevel5Attack: equ 12187SDSnatcherUnitLevel5Defense: equ 12188SDSnatcherUnitLevel5HP: equ 40189SDSnatcherUnitLevel5Speed: equ 7190SDSnatcherUnitLevel5Growth: equ 3191SDSnatcherUnitLevel5CostGold: equ 550/10192SDSnatcherUnitLevel5CostGems: equ 00+Level5Unit193SDSnatcherUnitLevel5CostRubies: equ 0195SDSnatcherUnitLevel6Number: equ 4196SDSnatcherUnitLevel6Damage: equ 20197SDSnatcherUnitLevel6Attack: equ 16198SDSnatcherUnitLevel6Defense: equ 13199SDSnatcherUnitLevel6HP: equ 115+50200SDSnatcherUnitLevel6Speed: equ 5201SDSnatcherUnitLevel6Growth: equ 1202SDSnatcherUnitLevel6CostGold: equ 850/10203SDSnatcherUnitLevel6CostGems: equ 02+Level6Unit204SDSnatcherUnitLevel6CostRubies: equ 0207CastleVaniaUnitLevel1Number: equ 25208CastleVaniaUnitLevel1Damage: equ 2209CastleVaniaUnitLevel1Attack: equ 2210CastleVaniaUnitLevel1Defense: equ 3211CastleVaniaUnitLevel1HP: equ 4212CastleVaniaUnitLevel1Speed: equ 5213CastleVaniaUnitLevel1Growth: equ 15214CastleVaniaUnitLevel1CostGold: equ 50/10215CastleVaniaUnitLevel1CostGems: equ 00+Level1Unit216CastleVaniaUnitLevel1CostRubies: equ 0218CastleVaniaUnitLevel2Number: equ 23219CastleVaniaUnitLevel2Damage: equ 3220CastleVaniaUnitLevel2Attack: equ 6221CastleVaniaUnitLevel2Defense: equ 4222CastleVaniaUnitLevel2HP: equ 16223CastleVaniaUnitLevel2Speed: equ 4224CastleVaniaUnitLevel2Growth: equ 8225CastleVaniaUnitLevel2CostGold: equ 125/10226CastleVaniaUnitLevel2CostGems: equ 00+Level2Unit227CastleVaniaUnitLevel2CostRubies: equ 0229CastleVaniaUnitLevel3Number: equ 18230CastleVaniaUnitLevel3Damage: equ 5231CastleVaniaUnitLevel3Attack: equ 10232CastleVaniaUnitLevel3Defense: equ 6233CastleVaniaUnitLevel3HP: equ 25234CastleVaniaUnitLevel3Speed: equ 7235CastleVaniaUnitLevel3Growth: equ 5236CastleVaniaUnitLevel3CostGold: equ 200/10237CastleVaniaUnitLevel3CostGems: equ 00+Level3Unit238CastleVaniaUnitLevel3CostRubies: equ 0240CastleVaniaUnitLevel4Number: equ 26241CastleVaniaUnitLevel4Damage: equ 8242CastleVaniaUnitLevel4Attack: equ 10243CastleVaniaUnitLevel4Defense: equ 10244CastleVaniaUnitLevel4HP: equ 25245CastleVaniaUnitLevel4Speed: equ 3246CastleVaniaUnitLevel4Growth: equ 4247CastleVaniaUnitLevel4CostGold: equ 250/10248CastleVaniaUnitLevel4CostGems: equ 00+Level4Unit249CastleVaniaUnitLevel4CostRubies: equ 0251CastleVaniaUnitLevel5Number: equ 20252CastleVaniaUnitLevel5Damage: equ 14253CastleVaniaUnitLevel5Attack: equ 13254CastleVaniaUnitLevel5Defense: equ 13255CastleVaniaUnitLevel5HP: equ 45256CastleVaniaUnitLevel5Speed: equ 6257CastleVaniaUnitLevel5Growth: equ 3258CastleVaniaUnitLevel5CostGold: equ 500/10259CastleVaniaUnitLevel5CostGems: equ 00+Level5Unit260CastleVaniaUnitLevel5CostRubies: equ 0262CastleVaniaUnitLevel6Number: equ 24263CastleVaniaUnitLevel6Damage: equ 20264CastleVaniaUnitLevel6Attack: equ 16265CastleVaniaUnitLevel6Defense: equ 12266CastleVaniaUnitLevel6HP: equ 90+50267CastleVaniaUnitLevel6Speed: equ 9268CastleVaniaUnitLevel6Growth: equ 1269CastleVaniaUnitLevel6CostGold: equ 900/10270CastleVaniaUnitLevel6CostGems: equ 00+Level6Unit271CastleVaniaUnitLevel6CostRubies: equ 2276PsychoWorldUnitLevel1Number: equ 66277PsychoWorldUnitLevel1Damage: equ 2278PsychoWorldUnitLevel1Attack: equ 5279PsychoWorldUnitLevel1Defense: equ 4280PsychoWorldUnitLevel1HP: equ 6281PsychoWorldUnitLevel1Speed: equ 4282PsychoWorldUnitLevel1Growth: equ 12283PsychoWorldUnitLevel1CostGold: equ 60/10284PsychoWorldUnitLevel1CostGems: equ 00+Level1Unit285PsychoWorldUnitLevel1CostRubies: equ 0287PsychoWorldUnitLevel2Number: equ 63288PsychoWorldUnitLevel2Damage: equ 3289PsychoWorldUnitLevel2Attack: equ 5290PsychoWorldUnitLevel2Defense: equ 5291PsychoWorldUnitLevel2HP: equ 15292PsychoWorldUnitLevel2Speed: equ 3293PsychoWorldUnitLevel2Growth: equ 8294PsychoWorldUnitLevel2CostGold: equ 100/10295PsychoWorldUnitLevel2CostGems: equ 00+Level2Unit296PsychoWorldUnitLevel2CostRubies: equ 0298PsychoWorldUnitLevel3Number: equ 64299PsychoWorldUnitLevel3Damage: equ 5300PsychoWorldUnitLevel3Attack: equ 7301PsychoWorldUnitLevel3Defense: equ 7302PsychoWorldUnitLevel3HP: equ 18303PsychoWorldUnitLevel3Speed: equ 5304PsychoWorldUnitLevel3Growth: equ 7305PsychoWorldUnitLevel3CostGold: equ 200/10306PsychoWorldUnitLevel3CostGems: equ 00+Level3Unit307PsychoWorldUnitLevel3CostRubies: equ 0309PsychoWorldUnitLevel4Number: equ 65310PsychoWorldUnitLevel4Damage: equ 7311PsychoWorldUnitLevel4Attack: equ 10312PsychoWorldUnitLevel4Defense: equ 9313PsychoWorldUnitLevel4HP: equ 30314PsychoWorldUnitLevel4Speed: equ 6315PsychoWorldUnitLevel4Growth: equ 4316PsychoWorldUnitLevel4CostGold: equ 360/10317PsychoWorldUnitLevel4CostGems: equ 00+Level4Unit318PsychoWorldUnitLevel4CostRubies: equ 0320PsychoWorldUnitLevel5Number: equ 69321PsychoWorldUnitLevel5Damage: equ 12322PsychoWorldUnitLevel5Attack: equ 13323PsychoWorldUnitLevel5Defense: equ 10324PsychoWorldUnitLevel5HP: equ 30325PsychoWorldUnitLevel5Speed: equ 6326PsychoWorldUnitLevel5Growth: equ 3327PsychoWorldUnitLevel5CostGold: equ 400/10328PsychoWorldUnitLevel5CostGems: equ 01+Level5Unit329PsychoWorldUnitLevel5CostRubies: equ 0331PsychoWorldUnitLevel6Number: equ 68332PsychoWorldUnitLevel6Damage: equ 22333PsychoWorldUnitLevel6Attack: equ 16334PsychoWorldUnitLevel6Defense: equ 16335PsychoWorldUnitLevel6HP: equ 120+50336PsychoWorldUnitLevel6Speed: equ 7337PsychoWorldUnitLevel6Growth: equ 1338PsychoWorldUnitLevel6CostGold: equ 1200/10339PsychoWorldUnitLevel6CostGems: equ 00+Level6Unit340PsychoWorldUnitLevel6CostRubies: equ 1346KingKongUnitLevel1Number: equ 77347KingKongUnitLevel1Damage: equ 2348KingKongUnitLevel1Attack: equ 4349KingKongUnitLevel1Defense: equ 3350KingKongUnitLevel1HP: equ 5351KingKongUnitLevel1Speed: equ 4352KingKongUnitLevel1Growth: equ 14353KingKongUnitLevel1CostGold: equ 50/10354KingKongUnitLevel1CostGems: equ 00+Level1Unit355KingKongUnitLevel1CostRubies: equ 0357KingKongUnitLevel2Number: equ 75358KingKongUnitLevel2Damage: equ 3359KingKongUnitLevel2Attack: equ 6360KingKongUnitLevel2Defense: equ 5361KingKongUnitLevel2HP: equ 14362KingKongUnitLevel2Speed: equ 6363KingKongUnitLevel2Growth: equ 8364KingKongUnitLevel2CostGold: equ 130/10365KingKongUnitLevel2CostGems: equ 00+Level2Unit366KingKongUnitLevel2CostRubies: equ 0368KingKongUnitLevel3Number: equ 76369KingKongUnitLevel3Damage: equ 4370KingKongUnitLevel3Attack: equ 9371KingKongUnitLevel3Defense: equ 7372KingKongUnitLevel3HP: equ 22373KingKongUnitLevel3Speed: equ 5374KingKongUnitLevel3Growth: equ 7375KingKongUnitLevel3CostGold: equ 250/10376KingKongUnitLevel3CostGems: equ 00+Level3Unit377KingKongUnitLevel3CostRubies: equ 0379KingKongUnitLevel4Number: equ 74380KingKongUnitLevel4Damage: equ 7381KingKongUnitLevel4Attack: equ 10382KingKongUnitLevel4Defense: equ 7383KingKongUnitLevel4HP: equ 30384KingKongUnitLevel4Speed: equ 3385KingKongUnitLevel4Growth: equ 4386KingKongUnitLevel4CostGold: equ 300/10387KingKongUnitLevel4CostGems: equ 00+Level4Unit388KingKongUnitLevel4CostRubies: equ 0390KingKongUnitLevel5Number: equ 73391KingKongUnitLevel5Damage: equ 16392KingKongUnitLevel5Attack: equ 14393KingKongUnitLevel5Defense: equ 12394KingKongUnitLevel5HP: equ 60395KingKongUnitLevel5Speed: equ 6396KingKongUnitLevel5Growth: equ 3397KingKongUnitLevel5CostGold: equ 500/10398KingKongUnitLevel5CostGems: equ 00+Level5Unit399KingKongUnitLevel5CostRubies: equ 0401KingKongUnitLevel6Number: equ 72402KingKongUnitLevel6Damage: equ 17403KingKongUnitLevel6Attack: equ 15404KingKongUnitLevel6Defense: equ 13405KingKongUnitLevel6HP: equ 80+50406KingKongUnitLevel6Speed: equ 7407KingKongUnitLevel6Growth: equ 1408KingKongUnitLevel6CostGold: equ 850/10409KingKongUnitLevel6CostGems: equ 01+Level6Unit410KingKongUnitLevel6CostRubies: equ 0417ContraGroupAUnitLevel1Number: equ 38418ContraGroupAUnitLevel1Damage: equ 2419ContraGroupAUnitLevel1Attack: equ 4420ContraGroupAUnitLevel1Defense: equ 2421ContraGroupAUnitLevel1HP: equ 5422ContraGroupAUnitLevel1Speed: equ 5423ContraGroupAUnitLevel1Growth: equ 15424ContraGroupAUnitLevel1CostGold: equ 40/10425ContraGroupAUnitLevel1CostGems: equ 00+Level1Unit426ContraGroupAUnitLevel1CostRubies: equ 0428ContraGroupAUnitLevel2Number: equ 42429ContraGroupAUnitLevel2Damage: equ 4430ContraGroupAUnitLevel2Attack: equ 7431ContraGroupAUnitLevel2Defense: equ 5432ContraGroupAUnitLevel2HP: equ 10433ContraGroupAUnitLevel2Speed: equ 6434ContraGroupAUnitLevel2Growth: equ 9435ContraGroupAUnitLevel2CostGold: equ 100/10436ContraGroupAUnitLevel2CostGems: equ 00+Level2Unit437ContraGroupAUnitLevel2CostRubies: equ 0439ContraGroupAUnitLevel3Number: equ 41440ContraGroupAUnitLevel3Damage: equ 5441ContraGroupAUnitLevel3Attack: equ 8442ContraGroupAUnitLevel3Defense: equ 4443ContraGroupAUnitLevel3HP: equ 15444ContraGroupAUnitLevel3Speed: equ 6445ContraGroupAUnitLevel3Growth: equ 7446ContraGroupAUnitLevel3CostGold: equ 150/10447ContraGroupAUnitLevel3CostGems: equ 00+Level3Unit448ContraGroupAUnitLevel3CostRubies: equ 0450ContraGroupAUnitLevel4Number: equ 47451ContraGroupAUnitLevel4Damage: equ 8452ContraGroupAUnitLevel4Attack: equ 13453ContraGroupAUnitLevel4Defense: equ 7454ContraGroupAUnitLevel4HP: equ 40455ContraGroupAUnitLevel4Speed: equ 2456ContraGroupAUnitLevel4Growth: equ 4457ContraGroupAUnitLevel4CostGold: equ 300/10458ContraGroupAUnitLevel4CostGems: equ 00+Level4Unit459ContraGroupAUnitLevel4CostRubies: equ 0461ContraGroupAUnitLevel5Number: equ 45462ContraGroupAUnitLevel5Damage: equ 13463ContraGroupAUnitLevel5Attack: equ 13464ContraGroupAUnitLevel5Defense: equ 11465ContraGroupAUnitLevel5HP: equ 60466ContraGroupAUnitLevel5Speed: equ 7467ContraGroupAUnitLevel5Growth: equ 3468ContraGroupAUnitLevel5CostGold: equ 500/10469ContraGroupAUnitLevel5CostGems: equ 00+Level5Unit470ContraGroupAUnitLevel5CostRubies: equ 1472ContraGroupAUnitLevel6Number: equ 46473ContraGroupAUnitLevel6Damage: equ 18474ContraGroupAUnitLevel6Attack: equ 15475ContraGroupAUnitLevel6Defense: equ 12476ContraGroupAUnitLevel6HP: equ 70+50477ContraGroupAUnitLevel6Speed: equ 6478ContraGroupAUnitLevel6Growth: equ 1479ContraGroupAUnitLevel6CostGold: equ 750/10480ContraGroupAUnitLevel6CostGems: equ 02+Level6Unit481ContraGroupAUnitLevel6CostRubies: equ 0488ContraGroupBUnitLevel1Number: equ 44489ContraGroupBUnitLevel1Damage: equ 2490ContraGroupBUnitLevel1Attack: equ 3491ContraGroupBUnitLevel1Defense: equ 5492ContraGroupBUnitLevel1HP: equ 6493ContraGroupBUnitLevel1Speed: equ 4494ContraGroupBUnitLevel1Growth: equ 13495ContraGroupBUnitLevel1CostGold: equ 50/10496ContraGroupBUnitLevel1CostGems: equ 00+Level1Unit497ContraGroupBUnitLevel1CostRubies: equ 0499ContraGroupBUnitLevel2Number: equ 36 500ContraGroupBUnitLevel2Damage: equ 3 501ContraGroupBUnitLevel2Attack: equ 4 502ContraGroupBUnitLevel2Defense: equ 6503ContraGroupBUnitLevel2HP: equ 15504ContraGroupBUnitLevel2Speed: equ 4505ContraGroupBUnitLevel2Growth: equ 8506ContraGroupBUnitLevel2CostGold: equ 110/10507ContraGroupBUnitLevel2CostGems: equ 00+Level2Unit508ContraGroupBUnitLevel2CostRubies: equ 0510ContraGroupBUnitLevel3Number: equ 43 511ContraGroupBUnitLevel3Damage: equ 4512ContraGroupBUnitLevel3Attack: equ 7513ContraGroupBUnitLevel3Defense: equ 8514ContraGroupBUnitLevel3HP: equ 22515ContraGroupBUnitLevel3Speed: equ 9516ContraGroupBUnitLevel3Growth: equ 7517ContraGroupBUnitLevel3CostGold: equ 220/10518ContraGroupBUnitLevel3CostGems: equ 00+Level3Unit519ContraGroupBUnitLevel3CostRubies: equ 0521ContraGroupBUnitLevel4Number: equ 37 522ContraGroupBUnitLevel4Damage: equ 8523ContraGroupBUnitLevel4Attack: equ 11524ContraGroupBUnitLevel4Defense: equ 11525ContraGroupBUnitLevel4HP: equ 35526ContraGroupBUnitLevel4Speed: equ 6527ContraGroupBUnitLevel4Growth: equ 5528ContraGroupBUnitLevel4CostGold: equ 330/10529ContraGroupBUnitLevel4CostGems: equ 00+Level4Unit530ContraGroupBUnitLevel4CostRubies: equ 0532ContraGroupBUnitLevel5Number: equ 39 533ContraGroupBUnitLevel5Damage: equ 12 534ContraGroupBUnitLevel5Attack: equ 9 535ContraGroupBUnitLevel5Defense: equ 14536ContraGroupBUnitLevel5HP: equ 50537ContraGroupBUnitLevel5Speed: equ 5538ContraGroupBUnitLevel5Growth: equ 3539ContraGroupBUnitLevel5CostGold: equ 530/10540ContraGroupBUnitLevel5CostGems: equ 01+Level5Unit541ContraGroupBUnitLevel5CostRubies: equ 0543ContraGroupBUnitLevel6Number: equ 40 544ContraGroupBUnitLevel6Damage: equ 15 545ContraGroupBUnitLevel6Attack: equ 13 546ContraGroupBUnitLevel6Defense: equ 13547ContraGroupBUnitLevel6HP: equ 70+50548ContraGroupBUnitLevel6Speed: equ 7549ContraGroupBUnitLevel6Growth: equ 1550ContraGroupBUnitLevel6CostGold: equ 800/10551ContraGroupBUnitLevel6CostGems: equ 00+Level6Unit552ContraGroupBUnitLevel6CostRubies: equ 2559GoemonUnitLevel1Number: equ 62560GoemonUnitLevel1Damage: equ 2561GoemonUnitLevel1Attack: equ 2562GoemonUnitLevel1Defense: equ 3563GoemonUnitLevel1HP: equ 6564GoemonUnitLevel1Speed: equ 3565GoemonUnitLevel1Growth: equ 20566GoemonUnitLevel1CostGold: equ 30/10567GoemonUnitLevel1CostGems: equ 00+Level1Unit568GoemonUnitLevel1CostRubies: equ 0570GoemonUnitLevel2Number: equ 58571GoemonUnitLevel2Damage: equ 4572GoemonUnitLevel2Attack: equ 9573GoemonUnitLevel2Defense: equ 9574GoemonUnitLevel2HP: equ 25575GoemonUnitLevel2Speed: equ 7576GoemonUnitLevel2Growth: equ 6577GoemonUnitLevel2CostGold: equ 250/10578GoemonUnitLevel2CostGems: equ 00+Level2Unit579GoemonUnitLevel2CostRubies: equ 0581GoemonUnitLevel3Number: equ 60582GoemonUnitLevel3Damage: equ 5583GoemonUnitLevel3Attack: equ 8584GoemonUnitLevel3Defense: equ 10585GoemonUnitLevel3HP: equ 30586GoemonUnitLevel3Speed: equ 5587GoemonUnitLevel3Growth: equ 6588GoemonUnitLevel3CostGold: equ 300/10589GoemonUnitLevel3CostGems: equ 00+Level3Unit590GoemonUnitLevel3CostRubies: equ 0592GoemonUnitLevel4Number: equ 56593GoemonUnitLevel4Damage: equ 6594GoemonUnitLevel4Attack: equ 10595GoemonUnitLevel4Defense: equ 8596GoemonUnitLevel4HP: equ 35597GoemonUnitLevel4Speed: equ 6598GoemonUnitLevel4Growth: equ 5599GoemonUnitLevel4CostGold: equ 350/10600GoemonUnitLevel4CostGems: equ 00+Level4Unit601GoemonUnitLevel4CostRubies: equ 0603GoemonUnitLevel5Number: equ 61604GoemonUnitLevel5Damage: equ 9605GoemonUnitLevel5Attack: equ 12606GoemonUnitLevel5Defense: equ 10607GoemonUnitLevel5HP: equ 40608GoemonUnitLevel5Speed: equ 4609GoemonUnitLevel5Growth: equ 4610GoemonUnitLevel5CostGold: equ 400/10611GoemonUnitLevel5CostGems: equ 00+Level5Unit612GoemonUnitLevel5CostRubies: equ 0614GoemonUnitLevel6Number: equ 59615GoemonUnitLevel6Damage: equ 15616GoemonUnitLevel6Attack: equ 15617GoemonUnitLevel6Defense: equ 13618GoemonUnitLevel6HP: equ 75+50619GoemonUnitLevel6Speed: equ 7620GoemonUnitLevel6Growth: equ 1621GoemonUnitLevel6CostGold: equ 750/10622GoemonUnitLevel6CostGems: equ 02+Level6Unit623GoemonUnitLevel6CostRubies: equ 0629GolvelliusUnitLevel1Number: equ 80630GolvelliusUnitLevel1Damage: equ 2631GolvelliusUnitLevel1Attack: equ 4632GolvelliusUnitLevel1Defense: equ 2633GolvelliusUnitLevel1HP: equ 4634GolvelliusUnitLevel1Speed: equ 5635GolvelliusUnitLevel1Growth: equ 15636GolvelliusUnitLevel1CostGold: equ 50/10637GolvelliusUnitLevel1CostGems: equ 00+Level1Unit638GolvelliusUnitLevel1CostRubies: equ 0640GolvelliusUnitLevel2Number: equ 81641GolvelliusUnitLevel2Damage: equ 3642GolvelliusUnitLevel2Attack: equ 6643GolvelliusUnitLevel2Defense: equ 5644GolvelliusUnitLevel2HP: equ 15645GolvelliusUnitLevel2Speed: equ 6646GolvelliusUnitLevel2Growth: equ 8647GolvelliusUnitLevel2CostGold: equ 150/10648GolvelliusUnitLevel2CostGems: equ 00+Level2Unit649GolvelliusUnitLevel2CostRubies: equ 0651GolvelliusUnitLevel3Number: equ 83652GolvelliusUnitLevel3Damage: equ 5653GolvelliusUnitLevel3Attack: equ 7654GolvelliusUnitLevel3Defense: equ 7655GolvelliusUnitLevel3HP: equ 30656GolvelliusUnitLevel3Speed: equ 5657GolvelliusUnitLevel3Growth: equ 7658GolvelliusUnitLevel3CostGold: equ 300/10659GolvelliusUnitLevel3CostGems: equ 00+Level3Unit660GolvelliusUnitLevel3CostRubies: equ 0662GolvelliusUnitLevel4Number: equ 84663GolvelliusUnitLevel4Damage: equ 7664GolvelliusUnitLevel4Attack: equ 12665GolvelliusUnitLevel4Defense: equ 10666GolvelliusUnitLevel4HP: equ 32667GolvelliusUnitLevel4Speed: equ 8668GolvelliusUnitLevel4Growth: equ 4669GolvelliusUnitLevel4CostGold: equ 400/10670GolvelliusUnitLevel4CostGems: equ 00+Level4Unit671GolvelliusUnitLevel4CostRubies: equ 0673GolvelliusUnitLevel5Number: equ 85674GolvelliusUnitLevel5Damage: equ 9675GolvelliusUnitLevel5Attack: equ 14676GolvelliusUnitLevel5Defense: equ 7677GolvelliusUnitLevel5HP: equ 40678GolvelliusUnitLevel5Speed: equ 7679GolvelliusUnitLevel5Growth: equ 3680GolvelliusUnitLevel5CostGold: equ 500/10681GolvelliusUnitLevel5CostGems: equ 00+Level5Unit682GolvelliusUnitLevel5CostRubies: equ 0684GolvelliusUnitLevel6Number: equ 86685GolvelliusUnitLevel6Damage: equ 13686GolvelliusUnitLevel6Attack: equ 15687GolvelliusUnitLevel6Defense: equ 12688GolvelliusUnitLevel6HP: equ 160+50689GolvelliusUnitLevel6Speed: equ 5690GolvelliusUnitLevel6Growth: equ 1691GolvelliusUnitLevel6CostGold: equ 850/10692GolvelliusUnitLevel6CostGems: equ 00+Level6Unit693GolvelliusUnitLevel6CostRubies: equ 2697Ys3UnitLevel1Number: equ 100698Ys3UnitLevel1Damage: equ 3699Ys3UnitLevel1Attack: equ 3700Ys3UnitLevel1Defense: equ 4701Ys3UnitLevel1HP: equ 11702Ys3UnitLevel1Speed: equ 4703Ys3UnitLevel1Growth: equ 14704Ys3UnitLevel1CostGold: equ 60/10705Ys3UnitLevel1CostGems: equ 00+Level1Unit706Ys3UnitLevel1CostRubies: equ 0708Ys3UnitLevel2Number: equ 99709Ys3UnitLevel2Damage: equ 3710Ys3UnitLevel2Attack: equ 6711Ys3UnitLevel2Defense: equ 5712Ys3UnitLevel2HP: equ 11713Ys3UnitLevel2Speed: equ 6714Ys3UnitLevel2Growth: equ 8715Ys3UnitLevel2CostGold: equ 90/10716Ys3UnitLevel2CostGems: equ 00+Level2Unit717Ys3UnitLevel2CostRubies: equ 0719Ys3UnitLevel3Number: equ 97720Ys3UnitLevel3Damage: equ 5721Ys3UnitLevel3Attack: equ 8722Ys3UnitLevel3Defense: equ 9723Ys3UnitLevel3HP: equ 28724Ys3UnitLevel3Speed: equ 6725Ys3UnitLevel3Growth: equ 7726Ys3UnitLevel3CostGold: equ 220/10727Ys3UnitLevel3CostGems: equ 00+Level3Unit728Ys3UnitLevel3CostRubies: equ 0730Ys3UnitLevel4Number: equ 96731Ys3UnitLevel4Damage: equ 8732Ys3UnitLevel4Attack: equ 10733Ys3UnitLevel4Defense: equ 11734Ys3UnitLevel4HP: equ 35735Ys3UnitLevel4Speed: equ 5736Ys3UnitLevel4Growth: equ 4737Ys3UnitLevel4CostGold: equ 300/10738Ys3UnitLevel4CostGems: equ 00+Level4Unit739Ys3UnitLevel4CostRubies: equ 0741Ys3UnitLevel5Number: equ 95742Ys3UnitLevel5Damage: equ 11743Ys3UnitLevel5Attack: equ 12744Ys3UnitLevel5Defense: equ 11745Ys3UnitLevel5HP: equ 32746Ys3UnitLevel5Speed: equ 5747Ys3UnitLevel5Growth: equ 3748Ys3UnitLevel5CostGold: equ 420/10749Ys3UnitLevel5CostGems: equ 00+Level5Unit750Ys3UnitLevel5CostRubies: equ 0752Ys3UnitLevel6Number: equ 101753Ys3UnitLevel6Damage: equ 19754Ys3UnitLevel6Attack: equ 15755Ys3UnitLevel6Defense: equ 12756Ys3UnitLevel6HP: equ 100+50757Ys3UnitLevel6Speed: equ 10758Ys3UnitLevel6Growth: equ 1759Ys3UnitLevel6CostGold: equ 1000/10760Ys3UnitLevel6CostGems: equ 01+Level6Unit761Ys3UnitLevel6CostRubies: equ 0769AkanbeDragonGroupAUnitLevel1Number: equ 117770AkanbeDragonGroupAUnitLevel1Damage: equ 3771AkanbeDragonGroupAUnitLevel1Attack: equ 5772AkanbeDragonGroupAUnitLevel1Defense: equ 2773AkanbeDragonGroupAUnitLevel1HP: equ 5774AkanbeDragonGroupAUnitLevel1Speed: equ 3775AkanbeDragonGroupAUnitLevel1Growth: equ 18776AkanbeDragonGroupAUnitLevel1CostGold: equ 50/10777AkanbeDragonGroupAUnitLevel1CostGems: equ 00+Level1Unit778AkanbeDragonGroupAUnitLevel1CostRubies: equ 0780AkanbeDragonGroupAUnitLevel2Number: equ 113781AkanbeDragonGroupAUnitLevel2Damage: equ 4782AkanbeDragonGroupAUnitLevel2Attack: equ 4783AkanbeDragonGroupAUnitLevel2Defense: equ 4784AkanbeDragonGroupAUnitLevel2HP: equ 12785AkanbeDragonGroupAUnitLevel2Speed: equ 6786AkanbeDragonGroupAUnitLevel2Growth: equ 9787AkanbeDragonGroupAUnitLevel2CostGold: equ 120/10788AkanbeDragonGroupAUnitLevel2CostGems: equ 00+Level2Unit789AkanbeDragonGroupAUnitLevel2CostRubies: equ 0791AkanbeDragonGroupAUnitLevel3Number: equ 115792AkanbeDragonGroupAUnitLevel3Damage: equ 5793AkanbeDragonGroupAUnitLevel3Attack: equ 10794AkanbeDragonGroupAUnitLevel3Defense: equ 4795AkanbeDragonGroupAUnitLevel3HP: equ 15796AkanbeDragonGroupAUnitLevel3Speed: equ 4797AkanbeDragonGroupAUnitLevel3Growth: equ 6798AkanbeDragonGroupAUnitLevel3CostGold: equ 170/10799AkanbeDragonGroupAUnitLevel3CostGems: equ 00+Level3Unit800AkanbeDragonGroupAUnitLevel3CostRubies: equ 0802AkanbeDragonGroupAUnitLevel4Number: equ 118803AkanbeDragonGroupAUnitLevel4Damage: equ 7804AkanbeDragonGroupAUnitLevel4Attack: equ 11805AkanbeDragonGroupAUnitLevel4Defense: equ 7806AkanbeDragonGroupAUnitLevel4HP: equ 40807AkanbeDragonGroupAUnitLevel4Speed: equ 8808AkanbeDragonGroupAUnitLevel4Growth: equ 4809AkanbeDragonGroupAUnitLevel4CostGold: equ 320/10810AkanbeDragonGroupAUnitLevel4CostGems: equ 00+Level4Unit811AkanbeDragonGroupAUnitLevel4CostRubies: equ 0813AkanbeDragonGroupAUnitLevel5Number: equ 111814AkanbeDragonGroupAUnitLevel5Damage: equ 11815AkanbeDragonGroupAUnitLevel5Attack: equ 13816AkanbeDragonGroupAUnitLevel5Defense: equ 11817AkanbeDragonGroupAUnitLevel5HP: equ 65818AkanbeDragonGroupAUnitLevel5Speed: equ 7819AkanbeDragonGroupAUnitLevel5Growth: equ 3820AkanbeDragonGroupAUnitLevel5CostGold: equ 500/10821AkanbeDragonGroupAUnitLevel5CostGems: equ 00+Level5Unit822AkanbeDragonGroupAUnitLevel5CostRubies: equ 1824AkanbeDragonGroupAUnitLevel6Number: equ 112825AkanbeDragonGroupAUnitLevel6Damage: equ 20826AkanbeDragonGroupAUnitLevel6Attack: equ 14827AkanbeDragonGroupAUnitLevel6Defense: equ 12828AkanbeDragonGroupAUnitLevel6HP: equ 70+50829AkanbeDragonGroupAUnitLevel6Speed: equ 6830AkanbeDragonGroupAUnitLevel6Growth: equ 1831AkanbeDragonGroupAUnitLevel6CostGold: equ 750/10832AkanbeDragonGroupAUnitLevel6CostGems: equ 00+Level6Unit833AkanbeDragonGroupAUnitLevel6CostRubies: equ 2840AkanbeDragonGroupBUnitLevel1Number: equ 119841AkanbeDragonGroupBUnitLevel1Damage: equ 2842AkanbeDragonGroupBUnitLevel1Attack: equ 2843AkanbeDragonGroupBUnitLevel1Defense: equ 5844AkanbeDragonGroupBUnitLevel1HP: equ 6845AkanbeDragonGroupBUnitLevel1Speed: equ 4846AkanbeDragonGroupBUnitLevel1Growth: equ 11847AkanbeDragonGroupBUnitLevel1CostGold: equ 50/10848AkanbeDragonGroupBUnitLevel1CostGems: equ 00+Level1Unit849AkanbeDragonGroupBUnitLevel1CostRubies: equ 0851AkanbeDragonGroupBUnitLevel2Number: equ 114852AkanbeDragonGroupBUnitLevel2Damage: equ 3853AkanbeDragonGroupBUnitLevel2Attack: equ 6854AkanbeDragonGroupBUnitLevel2Defense: equ 6855AkanbeDragonGroupBUnitLevel2HP: equ 13856AkanbeDragonGroupBUnitLevel2Speed: equ 5857AkanbeDragonGroupBUnitLevel2Growth: equ 9858AkanbeDragonGroupBUnitLevel2CostGold: equ 110/10859AkanbeDragonGroupBUnitLevel2CostGems: equ 00+Level2Unit860AkanbeDragonGroupBUnitLevel2CostRubies: equ 0862AkanbeDragonGroupBUnitLevel3Number: equ 116863AkanbeDragonGroupBUnitLevel3Damage: equ 5864AkanbeDragonGroupBUnitLevel3Attack: equ 7865AkanbeDragonGroupBUnitLevel3Defense: equ 7866AkanbeDragonGroupBUnitLevel3HP: equ 21867AkanbeDragonGroupBUnitLevel3Speed: equ 5868AkanbeDragonGroupBUnitLevel3Growth: equ 8869AkanbeDragonGroupBUnitLevel3CostGold: equ 230/10870AkanbeDragonGroupBUnitLevel3CostGems: equ 00+Level3Unit871AkanbeDragonGroupBUnitLevel3CostRubies: equ 0873AkanbeDragonGroupBUnitLevel4Number: equ 120874AkanbeDragonGroupBUnitLevel4Damage: equ 9875AkanbeDragonGroupBUnitLevel4Attack: equ 9876AkanbeDragonGroupBUnitLevel4Defense: equ 11877AkanbeDragonGroupBUnitLevel4HP: equ 40878AkanbeDragonGroupBUnitLevel4Speed: equ 5879AkanbeDragonGroupBUnitLevel4Growth: equ 4880AkanbeDragonGroupBUnitLevel4CostGold: equ 340/10881AkanbeDragonGroupBUnitLevel4CostGems: equ 00+Level4Unit882AkanbeDragonGroupBUnitLevel4CostRubies: equ 0884AkanbeDragonGroupBUnitLevel5Number: equ 158885AkanbeDragonGroupBUnitLevel5Damage: equ 14886AkanbeDragonGroupBUnitLevel5Attack: equ 11887AkanbeDragonGroupBUnitLevel5Defense: equ 12888AkanbeDragonGroupBUnitLevel5HP: equ 100889AkanbeDragonGroupBUnitLevel5Speed: equ 5890AkanbeDragonGroupBUnitLevel5Growth: equ 3891AkanbeDragonGroupBUnitLevel5CostGold: equ 530/10892AkanbeDragonGroupBUnitLevel5CostGems: equ 00+Level5Unit893AkanbeDragonGroupBUnitLevel5CostRubies: equ 1895AkanbeDragonGroupBUnitLevel6Number: equ 121896AkanbeDragonGroupBUnitLevel6Damage: equ 22897AkanbeDragonGroupBUnitLevel6Attack: equ 15898AkanbeDragonGroupBUnitLevel6Defense: equ 12899AkanbeDragonGroupBUnitLevel6HP: equ 170+50900AkanbeDragonGroupBUnitLevel6Speed: equ 6901AkanbeDragonGroupBUnitLevel6Growth: equ 1902AkanbeDragonGroupBUnitLevel6CostGold: equ 800/10903AkanbeDragonGroupBUnitLevel6CostGems: equ 02+Level6Unit904AkanbeDragonGroupBUnitLevel6CostRubies: equ 0911YieArKungFuUnitLevel1Number: equ 102912YieArKungFuUnitLevel1Damage: equ 3913YieArKungFuUnitLevel1Attack: equ 5914YieArKungFuUnitLevel1Defense: equ 5915YieArKungFuUnitLevel1HP: equ 12916YieArKungFuUnitLevel1Speed: equ 4917YieArKungFuUnitLevel1Growth: equ 14918YieArKungFuUnitLevel1CostGold: equ 80/10919YieArKungFuUnitLevel1CostGems: equ 00+Level1Unit920YieArKungFuUnitLevel1CostRubies: equ 0922YieArKungFuUnitLevel2Number: equ 103923YieArKungFuUnitLevel2Damage: equ 4924YieArKungFuUnitLevel2Attack: equ 6925YieArKungFuUnitLevel2Defense: equ 6926YieArKungFuUnitLevel2HP: equ 14927YieArKungFuUnitLevel2Speed: equ 6928YieArKungFuUnitLevel2Growth: equ 8929YieArKungFuUnitLevel2CostGold: equ 110/10930YieArKungFuUnitLevel2CostGems: equ 00+Level2Unit931YieArKungFuUnitLevel2CostRubies: equ 0933YieArKungFuUnitLevel3Number: equ 104934YieArKungFuUnitLevel3Damage: equ 5935YieArKungFuUnitLevel3Attack: equ 7936YieArKungFuUnitLevel3Defense: equ 6937YieArKungFuUnitLevel3HP: equ 20938YieArKungFuUnitLevel3Speed: equ 3939YieArKungFuUnitLevel3Growth: equ 7940YieArKungFuUnitLevel3CostGold: equ 250/10941YieArKungFuUnitLevel3CostGems: equ 00+Level3Unit942YieArKungFuUnitLevel3CostRubies: equ 0944YieArKungFuUnitLevel4Number: equ 105945YieArKungFuUnitLevel4Damage: equ 7946YieArKungFuUnitLevel4Attack: equ 8947YieArKungFuUnitLevel4Defense: equ 9948YieArKungFuUnitLevel4HP: equ 37949YieArKungFuUnitLevel4Speed: equ 5950YieArKungFuUnitLevel4Growth: equ 4951YieArKungFuUnitLevel4CostGold: equ 320/10952YieArKungFuUnitLevel4CostGems: equ 00+Level4Unit953YieArKungFuUnitLevel4CostRubies: equ 0955YieArKungFuUnitLevel5Number: equ 106956YieArKungFuUnitLevel5Damage: equ 15957YieArKungFuUnitLevel5Attack: equ 12958YieArKungFuUnitLevel5Defense: equ 10959YieArKungFuUnitLevel5HP: equ 40960YieArKungFuUnitLevel5Speed: equ 7961YieArKungFuUnitLevel5Growth: equ 3962YieArKungFuUnitLevel5CostGold: equ 420/10963YieArKungFuUnitLevel5CostGems: equ 00+Level5Unit964YieArKungFuUnitLevel5CostRubies: equ 0966YieArKungFuUnitLevel6Number: equ 110967YieArKungFuUnitLevel6Damage: equ 18968YieArKungFuUnitLevel6Attack: equ 15969YieArKungFuUnitLevel6Defense: equ 15970YieArKungFuUnitLevel6HP: equ 120+50971YieArKungFuUnitLevel6Speed: equ 8972YieArKungFuUnitLevel6Growth: equ 1973YieArKungFuUnitLevel6CostGold: equ 1200/10974YieArKungFuUnitLevel6CostGems: equ 02+Level6Unit975YieArKungFuUnitLevel6CostRubies: equ 0981BubbleBobbleGroupAUnitLevel1Number: equ 9982BubbleBobbleGroupAUnitLevel1Damage: equ 2983BubbleBobbleGroupAUnitLevel1Attack: equ 4984BubbleBobbleGroupAUnitLevel1Defense: equ 4985BubbleBobbleGroupAUnitLevel1HP: equ 10986BubbleBobbleGroupAUnitLevel1Speed: equ 4987BubbleBobbleGroupAUnitLevel1Growth: equ 14988BubbleBobbleGroupAUnitLevel1CostGold: equ 60/10989BubbleBobbleGroupAUnitLevel1CostGems: equ 00+Level1Unit990BubbleBobbleGroupAUnitLevel1CostRubies: equ 0992BubbleBobbleGroupAUnitLevel2Number: equ 15993BubbleBobbleGroupAUnitLevel2Damage: equ 3994BubbleBobbleGroupAUnitLevel2Attack: equ 5995BubbleBobbleGroupAUnitLevel2Defense: equ 4996BubbleBobbleGroupAUnitLevel2HP: equ 11997BubbleBobbleGroupAUnitLevel2Speed: equ 4998BubbleBobbleGroupAUnitLevel2Growth: equ 9999BubbleBobbleGroupAUnitLevel2CostGold: equ 100/101000BubbleBobbleGroupAUnitLevel2CostGems: equ 00+Level2Unit1001BubbleBobbleGroupAUnitLevel2CostRubies: equ 01003BubbleBobbleGroupAUnitLevel3Number: equ 111004BubbleBobbleGroupAUnitLevel3Damage: equ 51005BubbleBobbleGroupAUnitLevel3Attack: equ 81006BubbleBobbleGroupAUnitLevel3Defense: equ 81007BubbleBobbleGroupAUnitLevel3HP: equ 251008BubbleBobbleGroupAUnitLevel3Speed: equ 61009BubbleBobbleGroupAUnitLevel3Growth: equ 71010BubbleBobbleGroupAUnitLevel3CostGold: equ 160/101011BubbleBobbleGroupAUnitLevel3CostGems: equ 00+Level3Unit1012BubbleBobbleGroupAUnitLevel3CostRubies: equ 01014BubbleBobbleGroupAUnitLevel4Number: equ 121015BubbleBobbleGroupAUnitLevel4Damage: equ 61016BubbleBobbleGroupAUnitLevel4Attack: equ 101017BubbleBobbleGroupAUnitLevel4Defense: equ 121018BubbleBobbleGroupAUnitLevel4HP: equ 351019BubbleBobbleGroupAUnitLevel4Speed: equ 51020BubbleBobbleGroupAUnitLevel4Growth: equ 41021BubbleBobbleGroupAUnitLevel4CostGold: equ 300/101022BubbleBobbleGroupAUnitLevel4CostGems: equ 00+Level4Unit1023BubbleBobbleGroupAUnitLevel4CostRubies: equ 01025BubbleBobbleGroupAUnitLevel5Number: equ 81026BubbleBobbleGroupAUnitLevel5Damage: equ 121027BubbleBobbleGroupAUnitLevel5Attack: equ 111028BubbleBobbleGroupAUnitLevel5Defense: equ 131029BubbleBobbleGroupAUnitLevel5HP: equ 451030BubbleBobbleGroupAUnitLevel5Speed: equ 71031BubbleBobbleGroupAUnitLevel5Growth: equ 31032BubbleBobbleGroupAUnitLevel5CostGold: equ 500/101033BubbleBobbleGroupAUnitLevel5CostGems: equ 00+Level5Unit1034BubbleBobbleGroupAUnitLevel5CostRubies: equ 11036BubbleBobbleGroupAUnitLevel6Number: equ 711037BubbleBobbleGroupAUnitLevel6Damage: equ 241038BubbleBobbleGroupAUnitLevel6Attack: equ 131039BubbleBobbleGroupAUnitLevel6Defense: equ 131040BubbleBobbleGroupAUnitLevel6HP: equ 160+501041BubbleBobbleGroupAUnitLevel6Speed: equ 61042BubbleBobbleGroupAUnitLevel6Growth: equ 11043BubbleBobbleGroupAUnitLevel6CostGold: equ 700/101044BubbleBobbleGroupAUnitLevel6CostGems: equ 00+Level6Unit1045BubbleBobbleGroupAUnitLevel6CostRubies: equ 31052BubbleBobbleGroupBUnitLevel1Number: equ 131053BubbleBobbleGroupBUnitLevel1Damage: equ 31054BubbleBobbleGroupBUnitLevel1Attack: equ 31055BubbleBobbleGroupBUnitLevel1Defense: equ 51056BubbleBobbleGroupBUnitLevel1HP: equ 61057BubbleBobbleGroupBUnitLevel1Speed: equ 41058BubbleBobbleGroupBUnitLevel1Growth: equ 111059BubbleBobbleGroupBUnitLevel1CostGold: equ 60/101060BubbleBobbleGroupBUnitLevel1CostGems: equ 00+Level1Unit1061BubbleBobbleGroupBUnitLevel1CostRubies: equ 01063BubbleBobbleGroupBUnitLevel2Number: equ 141064BubbleBobbleGroupBUnitLevel2Damage: equ 41065BubbleBobbleGroupBUnitLevel2Attack: equ 51066BubbleBobbleGroupBUnitLevel2Defense: equ 61067BubbleBobbleGroupBUnitLevel2HP: equ 141068BubbleBobbleGroupBUnitLevel2Speed: equ 51069BubbleBobbleGroupBUnitLevel2Growth: equ 91070BubbleBobbleGroupBUnitLevel2CostGold: equ 110/101071BubbleBobbleGroupBUnitLevel2CostGems: equ 00+Level2Unit1072BubbleBobbleGroupBUnitLevel2CostRubies: equ 01074BubbleBobbleGroupBUnitLevel3Number: equ 101075BubbleBobbleGroupBUnitLevel3Damage: equ 51076BubbleBobbleGroupBUnitLevel3Attack: equ 81077BubbleBobbleGroupBUnitLevel3Defense: equ 71078BubbleBobbleGroupBUnitLevel3HP: equ 211079BubbleBobbleGroupBUnitLevel3Speed: equ 51080BubbleBobbleGroupBUnitLevel3Growth: equ 81081BubbleBobbleGroupBUnitLevel3CostGold: equ 250/101082BubbleBobbleGroupBUnitLevel3CostGems: equ 00+Level3Unit1083BubbleBobbleGroupBUnitLevel3CostRubies: equ 01085BubbleBobbleGroupBUnitLevel4Number: equ 71086BubbleBobbleGroupBUnitLevel4Damage: equ 71087BubbleBobbleGroupBUnitLevel4Attack: equ 91088BubbleBobbleGroupBUnitLevel4Defense: equ 101089BubbleBobbleGroupBUnitLevel4HP: equ 401090BubbleBobbleGroupBUnitLevel4Speed: equ 51091BubbleBobbleGroupBUnitLevel4Growth: equ 41092BubbleBobbleGroupBUnitLevel4CostGold: equ 340/101093BubbleBobbleGroupBUnitLevel4CostGems: equ 00+Level4Unit1094BubbleBobbleGroupBUnitLevel4CostRubies: equ 01096BubbleBobbleGroupBUnitLevel5Number: equ 171097BubbleBobbleGroupBUnitLevel5Damage: equ 151098BubbleBobbleGroupBUnitLevel5Attack: equ 101099BubbleBobbleGroupBUnitLevel5Defense: equ 121100BubbleBobbleGroupBUnitLevel5HP: equ 1201101BubbleBobbleGroupBUnitLevel5Speed: equ 51102BubbleBobbleGroupBUnitLevel5Growth: equ 31103BubbleBobbleGroupBUnitLevel5CostGold: equ 530/101104BubbleBobbleGroupBUnitLevel5CostGems: equ 01+Level5Unit1105BubbleBobbleGroupBUnitLevel5CostRubies: equ 01107BubbleBobbleGroupBUnitLevel6Number: equ 161108BubbleBobbleGroupBUnitLevel6Damage: equ 251109BubbleBobbleGroupBUnitLevel6Attack: equ 121110BubbleBobbleGroupBUnitLevel6Defense: equ 121111BubbleBobbleGroupBUnitLevel6HP: equ 200+501112BubbleBobbleGroupBUnitLevel6Speed: equ 61113BubbleBobbleGroupBUnitLevel6Growth: equ 11114BubbleBobbleGroupBUnitLevel6CostGold: equ 800/101115BubbleBobbleGroupBUnitLevel6CostGems: equ 03+Level6Unit1116BubbleBobbleGroupBUnitLevel6CostRubies: equ 011211122SolidSnakeUnitLevel1Number: equ 90 1123SolidSnakeUnitLevel1Damage: equ 21124SolidSnakeUnitLevel1Attack: equ 21125SolidSnakeUnitLevel1Defense: equ 51126SolidSnakeUnitLevel1HP: equ 61127SolidSnakeUnitLevel1Speed: equ 61128SolidSnakeUnitLevel1Growth: equ 111129SolidSnakeUnitLevel1CostGold: equ 60/101130SolidSnakeUnitLevel1CostGems: equ 00+Level1Unit1131SolidSnakeUnitLevel1CostRubies: equ 011321133SolidSnakeUnitLevel2Number: equ 911134SolidSnakeUnitLevel2Damage: equ 31135SolidSnakeUnitLevel2Attack: equ 51136SolidSnakeUnitLevel2Defense: equ 61137SolidSnakeUnitLevel2HP: equ 131138SolidSnakeUnitLevel2Speed: equ 81139SolidSnakeUnitLevel2Growth: equ 91140SolidSnakeUnitLevel2CostGold: equ 110/101141SolidSnakeUnitLevel2CostGems: equ 00+Level2Unit1142SolidSnakeUnitLevel2CostRubies: equ 011431144SolidSnakeUnitLevel3Number: equ 941145SolidSnakeUnitLevel3Damage: equ 51146SolidSnakeUnitLevel3Attack: equ 41147SolidSnakeUnitLevel3Defense: equ 71148SolidSnakeUnitLevel3HP: equ 211149SolidSnakeUnitLevel3Speed: equ 51150SolidSnakeUnitLevel3Growth: equ 81151SolidSnakeUnitLevel3CostGold: equ 250/101152SolidSnakeUnitLevel3CostGems: equ 00+Level3Unit1153SolidSnakeUnitLevel3CostRubies: equ 011541155SolidSnakeUnitLevel4Number: equ 921156SolidSnakeUnitLevel4Damage: equ 81157SolidSnakeUnitLevel4Attack: equ 61158SolidSnakeUnitLevel4Defense: equ 101159SolidSnakeUnitLevel4HP: equ 401160SolidSnakeUnitLevel4Speed: equ 51161SolidSnakeUnitLevel4Growth: equ 41162SolidSnakeUnitLevel4CostGold: equ 340/101163SolidSnakeUnitLevel4CostGems: equ 00+Level4Unit1164SolidSnakeUnitLevel4CostRubies: equ 011651166SolidSnakeUnitLevel5Number: equ 931167SolidSnakeUnitLevel5Damage: equ 131168SolidSnakeUnitLevel5Attack: equ 81169SolidSnakeUnitLevel5Defense: equ 121170SolidSnakeUnitLevel5HP: equ 1201171SolidSnakeUnitLevel5Speed: equ 51172SolidSnakeUnitLevel5Growth: equ 31173SolidSnakeUnitLevel5CostGold: equ 530/101174SolidSnakeUnitLevel5CostGems: equ 01+Level5Unit1175SolidSnakeUnitLevel5CostRubies: equ 011771178DevaUnitLevel2Number: equ 1361179DevaUnitLevel2Damage: equ 41180DevaUnitLevel2Attack: equ 51181DevaUnitLevel2Defense: equ 61182DevaUnitLevel2HP: equ 131183DevaUnitLevel2Speed: equ 41184DevaUnitLevel2Growth: equ 91185DevaUnitLevel2CostGold: equ 110/101186DevaUnitLevel2CostGems: equ 00+Level2Unit1187DevaUnitLevel2CostRubies: equ 011881189DevaUnitLevel4Number: equ 1371190DevaUnitLevel4Damage: equ 91191DevaUnitLevel4Attack: equ 81192DevaUnitLevel4Defense: equ 71193DevaUnitLevel4HP: equ 301194DevaUnitLevel4Speed: equ 61195DevaUnitLevel4Growth: equ 51196DevaUnitLevel4CostGold: equ 250/101197DevaUnitLevel4CostGems: equ 00+Level3Unit1198DevaUnitLevel4CostRubies: equ 011991200DevaUnitLevel5Number: equ 1351201DevaUnitLevel5Damage: equ 131202DevaUnitLevel5Attack: equ 111203DevaUnitLevel5Defense: equ 121204DevaUnitLevel5HP: equ 551205DevaUnitLevel5Speed: equ 61206DevaUnitLevel5Growth: equ 21207DevaUnitLevel5CostGold: equ 440/101208DevaUnitLevel5CostGems: equ 00+Level4Unit1209DevaUnitLevel5CostRubies: equ 012111212Usas2UnitLevel4Number: equ 1391213Usas2UnitLevel4Damage: equ 91214Usas2UnitLevel4Attack: equ 101215Usas2UnitLevel4Defense: equ 71216Usas2UnitLevel4HP: equ 301217Usas2UnitLevel4Speed: equ 31218Usas2UnitLevel4Growth: equ 41219Usas2UnitLevel4CostGold: equ 300/101220Usas2UnitLevel4CostGems: equ 00+Level4Unit1221Usas2UnitLevel4CostRubies: equ 012221223Usas2UnitLevel5Number: equ 1381224Usas2UnitLevel5Damage: equ 171225Usas2UnitLevel5Attack: equ 171226Usas2UnitLevel5Defense: equ 71227Usas2UnitLevel5HP: equ 351228Usas2UnitLevel5Speed: equ 61229Usas2UnitLevel5Growth: equ 31230Usas2UnitLevel5CostGold: equ 500/101231Usas2UnitLevel5CostGems: equ 00+Level5Unit1232Usas2UnitLevel5CostRubies: equ 012351236KingsValley2UnitLevel1Number: equ 1511237KingsValley2UnitLevel1Damage: equ 31238KingsValley2UnitLevel1Attack: equ 41239KingsValley2UnitLevel1Defense: equ 31240KingsValley2UnitLevel1HP: equ 51241KingsValley2UnitLevel1Speed: equ 41242KingsValley2UnitLevel1Growth: equ 141243KingsValley2UnitLevel1CostGold: equ 50/101244KingsValley2UnitLevel1CostGems: equ 00+Level1Unit1245KingsValley2UnitLevel1CostRubies: equ 012461247KingsValley2UnitLevel2Number: equ 1521248KingsValley2UnitLevel2Damage: equ 41249KingsValley2UnitLevel2Attack: equ 61250KingsValley2UnitLevel2Defense: equ 51251KingsValley2UnitLevel2HP: equ 141252KingsValley2UnitLevel2Speed: equ 61253KingsValley2UnitLevel2Growth: equ 81254KingsValley2UnitLevel2CostGold: equ 130/101255KingsValley2UnitLevel2CostGems: equ 00+Level2Unit1256KingsValley2UnitLevel2CostRubies: equ 012571258KingsValley2UnitLevel3Number: equ 1501259KingsValley2UnitLevel3Damage: equ 51260KingsValley2UnitLevel3Attack: equ 91261KingsValley2UnitLevel3Defense: equ 71262KingsValley2UnitLevel3HP: equ 221263KingsValley2UnitLevel3Speed: equ 51264KingsValley2UnitLevel3Growth: equ 71265KingsValley2UnitLevel3CostGold: equ 250/101266KingsValley2UnitLevel3CostGems: equ 00+Level3Unit1267KingsValley2UnitLevel3CostRubies: equ 012681269KingsValley2UnitLevel4Number: equ 1491270KingsValley2UnitLevel4Damage: equ 81271KingsValley2UnitLevel4Attack: equ 101272KingsValley2UnitLevel4Defense: equ 71273KingsValley2UnitLevel4HP: equ 301274KingsValley2UnitLevel4Speed: equ 31275KingsValley2UnitLevel4Growth: equ 41276KingsValley2UnitLevel4CostGold: equ 300/101277KingsValley2UnitLevel4CostGems: equ 00+Level4Unit1278KingsValley2UnitLevel4CostRubies: equ 012821283ChukaTaisenUnitLevel1Number: equ 1821284ChukaTaisenUnitLevel1Damage: equ 21285ChukaTaisenUnitLevel1Attack: equ 41286ChukaTaisenUnitLevel1Defense: equ 31287ChukaTaisenUnitLevel1HP: equ 51288ChukaTaisenUnitLevel1Speed: equ 41289ChukaTaisenUnitLevel1Growth: equ 131290ChukaTaisenUnitLevel1CostGold: equ 50/101291ChukaTaisenUnitLevel1CostGems: equ 00+Level1Unit1292ChukaTaisenUnitLevel1CostRubies: equ 012931294ChukaTaisenUnitLevel2Number: equ 1831295ChukaTaisenUnitLevel2Damage: equ 31296ChukaTaisenUnitLevel2Attack: equ 41297ChukaTaisenUnitLevel2Defense: equ 51298ChukaTaisenUnitLevel2HP: equ 121299ChukaTaisenUnitLevel2Speed: equ 51300ChukaTaisenUnitLevel2Growth: equ 81301ChukaTaisenUnitLevel2CostGold: equ 130/101302ChukaTaisenUnitLevel2CostGems: equ 00+Level2Unit1303ChukaTaisenUnitLevel2CostRubies: equ 013041305ChukaTaisenUnitLevel3Number: equ 1841306ChukaTaisenUnitLevel3Damage: equ 51307ChukaTaisenUnitLevel3Attack: equ 91308ChukaTaisenUnitLevel3Defense: equ 71309ChukaTaisenUnitLevel3HP: equ 221310ChukaTaisenUnitLevel3Speed: equ 51311ChukaTaisenUnitLevel3Growth: equ 71312ChukaTaisenUnitLevel3CostGold: equ 250/101313ChukaTaisenUnitLevel3CostGems: equ 00+Level3Unit1314ChukaTaisenUnitLevel3CostRubies: equ 013151316ChukaTaisenUnitLevel4Number: equ 1851317ChukaTaisenUnitLevel4Damage: equ 71318ChukaTaisenUnitLevel4Attack: equ 101319ChukaTaisenUnitLevel4Defense: equ 71320ChukaTaisenUnitLevel4HP: equ 301321ChukaTaisenUnitLevel4Speed: equ 31322ChukaTaisenUnitLevel4Growth: equ 41323ChukaTaisenUnitLevel4CostGold: equ 300/101324ChukaTaisenUnitLevel4CostGems: equ 00+Level4Unit1325ChukaTaisenUnitLevel4CostRubies: equ 013261327ChukaTaisenUnitLevel5Number: equ 1861328ChukaTaisenUnitLevel5Damage: equ 121329ChukaTaisenUnitLevel5Attack: equ 101330ChukaTaisenUnitLevel5Defense: equ 121331ChukaTaisenUnitLevel5HP: equ 1201332ChukaTaisenUnitLevel5Speed: equ 51333ChukaTaisenUnitLevel5Growth: equ 31334ChukaTaisenUnitLevel5CostGold: equ 530/101335ChukaTaisenUnitLevel5CostGems: equ 01+Level5Unit1336ChukaTaisenUnitLevel5CostRubies: equ 013371338ChukaTaisenUnitLevel6Number: equ 1871339ChukaTaisenUnitLevel6Damage: equ 181340ChukaTaisenUnitLevel6Attack: equ 131341ChukaTaisenUnitLevel6Defense: equ 131342ChukaTaisenUnitLevel6HP: equ 185+501343ChukaTaisenUnitLevel6Speed: equ 61344ChukaTaisenUnitLevel6Growth: equ 11345ChukaTaisenUnitLevel6CostGold: equ 800/101346ChukaTaisenUnitLevel6CostGems: equ 03+Level6Unit1347ChukaTaisenUnitLevel6CostRubies: equ 01355RandomAUnitLevel1Number: equ 301356RandomAUnitLevel1Damage: equ 21357RandomAUnitLevel1Attack: equ 41358RandomAUnitLevel1Defense: equ 51359RandomAUnitLevel1HP: equ 91360RandomAUnitLevel1Speed: equ 41361RandomAUnitLevel1Growth: equ 141362RandomAUnitLevel1CostGold: equ 80/101363RandomAUnitLevel1CostGems: equ 00+Level1Unit1364RandomAUnitLevel1CostRubies: equ 01366RandomAUnitLevel2Number: equ 271367RandomAUnitLevel2Damage: equ 31368RandomAUnitLevel2Attack: equ 71369RandomAUnitLevel2Defense: equ 61370RandomAUnitLevel2HP: equ 111371RandomAUnitLevel2Speed: equ 41372RandomAUnitLevel2Growth: equ 91373RandomAUnitLevel2CostGold: equ 100/101374RandomAUnitLevel2CostGems: equ 00+Level2Unit1375RandomAUnitLevel2CostRubies: equ 01377RandomAUnitLevel3Number: equ 291378RandomAUnitLevel3Damage: equ 51379RandomAUnitLevel3Attack: equ 81380RandomAUnitLevel3Defense: equ 81381RandomAUnitLevel3HP: equ 241382RandomAUnitLevel3Speed: equ 51383RandomAUnitLevel3Growth: equ 71384RandomAUnitLevel3CostGold: equ 200/101385RandomAUnitLevel3CostGems: equ 00+Level3Unit1386RandomAUnitLevel3CostRubies: equ 01388RandomAUnitLevel4Number: equ 311389RandomAUnitLevel4Damage: equ 71390RandomAUnitLevel4Attack: equ 101391RandomAUnitLevel4Defense: equ 131392RandomAUnitLevel4HP: equ 351393RandomAUnitLevel4Speed: equ 51394RandomAUnitLevel4Growth: equ 41395RandomAUnitLevel4CostGold: equ 300/101396RandomAUnitLevel4CostGems: equ 00+Level4Unit1397RandomAUnitLevel4CostRubies: equ 01399RandomAUnitLevel5Number: equ 351400RandomAUnitLevel5Damage: equ 101401RandomAUnitLevel5Attack: equ 111402RandomAUnitLevel5Defense: equ 131403RandomAUnitLevel5HP: equ 451404RandomAUnitLevel5Speed: equ 51405RandomAUnitLevel5Growth: equ 21406RandomAUnitLevel5CostGold: equ 400/101407RandomAUnitLevel5CostGems: equ 00+Level5Unit1408RandomAUnitLevel5CostRubies: equ 01410RandomAUnitLevel6Number: equ 331411RandomAUnitLevel6Damage: equ 181412RandomAUnitLevel6Attack: equ 151413RandomAUnitLevel6Defense: equ 161414RandomAUnitLevel6HP: equ 90+501415RandomAUnitLevel6Speed: equ 71416RandomAUnitLevel6Growth: equ 11417RandomAUnitLevel6CostGold: equ 1000/101418RandomAUnitLevel6CostGems: equ 00+Level6Unit1419RandomAUnitLevel6CostRubies: equ 21425RandomBUnitLevel1Number: equ 511426RandomBUnitLevel1Damage: equ 31427RandomBUnitLevel1Attack: equ 51428RandomBUnitLevel1Defense: equ 41429RandomBUnitLevel1HP: equ 71430RandomBUnitLevel1Speed: equ 61431RandomBUnitLevel1Growth: equ 141432RandomBUnitLevel1CostGold: equ 70/101433RandomBUnitLevel1CostGems: equ 00+Level1Unit1434RandomBUnitLevel1CostRubies: equ 01436RandomBUnitLevel2Number: equ 521437RandomBUnitLevel2Damage: equ 41438RandomBUnitLevel2Attack: equ 61439RandomBUnitLevel2Defense: equ 71440RandomBUnitLevel2HP: equ 161441RandomBUnitLevel2Speed: equ 31442RandomBUnitLevel2Growth: equ 81443RandomBUnitLevel2CostGold: equ 120/101444RandomBUnitLevel2CostGems: equ 00+Level2Unit1445RandomBUnitLevel2CostRubies: equ 01447RandomBUnitLevel3Number: equ 541448RandomBUnitLevel3Damage: equ 61449RandomBUnitLevel3Attack: equ 91450RandomBUnitLevel3Defense: equ 81451RandomBUnitLevel3HP: equ 251452RandomBUnitLevel3Speed: equ 61453RandomBUnitLevel3Growth: equ 71454RandomBUnitLevel3CostGold: equ 200/101455RandomBUnitLevel3CostGems: equ 00+Level3Unit1456RandomBUnitLevel3CostRubies: equ 01458RandomBUnitLevel4Number: equ 481459RandomBUnitLevel4Damage: equ 81460RandomBUnitLevel4Attack: equ 91461RandomBUnitLevel4Defense: equ 81462RandomBUnitLevel4HP: equ 321463RandomBUnitLevel4Speed: equ 81464RandomBUnitLevel4Growth: equ 51465RandomBUnitLevel4CostGold: equ 250/101466RandomBUnitLevel4CostGems: equ 00+Level4Unit1467RandomBUnitLevel4CostRubies: equ 01469RandomBUnitLevel5Number: equ 491470RandomBUnitLevel5Damage: equ 141471RandomBUnitLevel5Attack: equ 101472RandomBUnitLevel5Defense: equ 121473RandomBUnitLevel5HP: equ 601474RandomBUnitLevel5Speed: equ 41475RandomBUnitLevel5Growth: equ 21476RandomBUnitLevel5CostGold: equ 425/101477RandomBUnitLevel5CostGems: equ 00+Level5Unit1478RandomBUnitLevel5CostRubies: equ 11480RandomBUnitLevel6Number: equ 501481RandomBUnitLevel6Damage: equ 191482RandomBUnitLevel6Attack: equ 151483RandomBUnitLevel6Defense: equ 141484RandomBUnitLevel6HP: equ 95+501485RandomBUnitLevel6Speed: equ 71486RandomBUnitLevel6Growth: equ 11487RandomBUnitLevel6CostGold: equ 850/101488RandomBUnitLevel6CostGems: equ 02+Level6Unit1489RandomBUnitLevel6CostRubies: equ 01492MonsterAddressesForBattle1.asm34Monster001Table: 35 dw Monster001Idle36 dw Monster001Move37 dw GeneralMonsterAttackPatternRight38 dw GeneralMonsterAttackPatternLeft39 dw GeneralMonsterAttackPatternLeftUp40 dw GeneralMonsterAttackPatternLeftDown41 dw GeneralMonsterAttackPatternRightUp42 dw GeneralMonsterAttackPatternRightDown43 db BattleMonsterSpriteSheet1Block44 db 16 45 db 32+00 46 db UsasUnitLevel3CostGold 47 db UsasUnitLevel3CostGems 48 db UsasUnitLevel3CostRubies 49 db UsasUnitLevel3HP 50 db UsasUnitLevel3Speed 51 db UsasUnitLevel3Attack 52 db UsasUnitLevel3Defense 53 db UsasUnitLevel3Growth 54 db UsasUnitLevel3Damage 55 db 000 56 db "Brown Flyer",25558Monster002Table: 59 dw Monster002Idle60 dw Monster002Move61 dw GeneralMonsterAttackPatternRight62 dw GeneralMonsterAttackPatternLeft63 dw GeneralMonsterAttackPatternLeftUp64 dw GeneralMonsterAttackPatternLeftDown65 dw GeneralMonsterAttackPatternRightUp66 dw GeneralMonsterAttackPatternRightDown67 db BattleMonsterSpriteSheet1Block68 db 16 69 db 32+00 70 db UsasUnitLevel4CostGold 71 db UsasUnitLevel4CostGems 72 db UsasUnitLevel4CostRubies 73 db UsasUnitLevel4HP 74 db UsasUnitLevel4Speed 75 db UsasUnitLevel4Attack 76 db UsasUnitLevel4Defense 77 db UsasUnitLevel4Growth 78 db UsasUnitLevel4Damage 79 db 000 80 db "Green Flyer",25582Monster003Table: 83 dw Monster003Idle84 dw Monster003Move85 dw GeneralMonsterAttackPatternRight86 dw GeneralMonsterAttackPatternLeft87 dw GeneralMonsterAttackPatternLeftUp88 dw GeneralMonsterAttackPatternLeftDown89 dw GeneralMonsterAttackPatternRightUp90 dw GeneralMonsterAttackPatternRightDown91 db BattleMonsterSpriteSheet1Block92 db 16 93 db 32+00 94 db UsasUnitLevel5CostGold 95 db UsasUnitLevel5CostGems 96 db UsasUnitLevel5CostRubies 97 db UsasUnitLevel5HP 98 db UsasUnitLevel5Speed 99 db UsasUnitLevel5Attack 100 db UsasUnitLevel5Defense 101 db UsasUnitLevel5Growth 102 db UsasUnitLevel5Damage 103 db 000 104 db "DarkG Flyer",255106Monster004Table: 107 dw Monster004Idle108 dw Monster004Move109 dw GeneralMonsterAttackPatternRight110 dw GeneralMonsterAttackPatternLeft111 dw GeneralMonsterAttackPatternLeftUp112 dw GeneralMonsterAttackPatternLeftDown113 dw GeneralMonsterAttackPatternRightUp114 dw GeneralMonsterAttackPatternRightDown115 db BattleMonsterSpriteSheet1Block116 db 16 117 db 32+00 118 db UsasUnitLevel6CostGold 119 db UsasUnitLevel6CostGems 120 db UsasUnitLevel6CostRubies 121 db UsasUnitLevel6HP 122 db UsasUnitLevel6Speed 123 db UsasUnitLevel6Attack 124 db UsasUnitLevel6Defense 125 db UsasUnitLevel6Growth 126 db UsasUnitLevel6Damage 127 db 000 128 db "LightGFlyer",255130Monster005Table: 131 dw Monster005Idle132 dw Monster005Move133 dw GeneralMonsterAttackPatternRight134 dw GeneralMonsterAttackPatternLeft135 dw GeneralMonsterAttackPatternLeftUp136 dw GeneralMonsterAttackPatternLeftDown137 dw GeneralMonsterAttackPatternRightUp138 dw GeneralMonsterAttackPatternRightDown139 db BattleMonsterSpriteSheet1Block140 db 16 141 db 16+08 142 db UsasUnitLevel2CostGold 143 db UsasUnitLevel2CostGems 144 db UsasUnitLevel2CostRubies 145 db UsasUnitLevel2HP 146 db UsasUnitLevel2Speed 147 db UsasUnitLevel2Attack 148 db UsasUnitLevel2Defense 149 db UsasUnitLevel2Growth 150 db UsasUnitLevel2Damage 151 db 000 152 db "Big Spider",255," "154Monster006Table: 155 dw Monster006Idle156 dw Monster006Move157 dw GeneralMonsterAttackPatternRight158 dw GeneralMonsterAttackPatternLeft159 dw GeneralMonsterAttackPatternLeftUp160 dw GeneralMonsterAttackPatternLeftDown161 dw GeneralMonsterAttackPatternRightUp162 dw GeneralMonsterAttackPatternRightDown163 db BattleMonsterSpriteSheet1Block164 db 16 165 db 16+04 166 db UsasUnitLevel1CostGold 167 db UsasUnitLevel1CostGems 168 db UsasUnitLevel1CostRubies 169 db UsasUnitLevel1HP 170 db UsasUnitLevel1Speed 171 db UsasUnitLevel1Attack 172 db UsasUnitLevel1Defense 173 db UsasUnitLevel1Growth 174 db UsasUnitLevel1Damage 175 db 000 176 db "Tiny Spider",255178Monster007Table: 179 dw Monster007Idle180 dw Monster007Move181 dw Monster007AttackPatternRight182 dw Monster007AttackPatternLeft183 dw Monster007AttackPatternLeft184 dw Monster007AttackPatternLeft185 dw Monster007AttackPatternRight186 dw Monster007AttackPatternRight187 db BattleMonsterSpriteSheet1Block188 db 16 189 db 16+08 190 db BubbleBobbleGroupBUnitLevel4CostGold 191 db BubbleBobbleGroupBUnitLevel4CostGems 192 db BubbleBobbleGroupBUnitLevel4CostRubies 193 db BubbleBobbleGroupBUnitLevel4HP 194 db BubbleBobbleGroupBUnitLevel4Speed 195 db BubbleBobbleGroupBUnitLevel4Attack 196 db BubbleBobbleGroupBUnitLevel4Defense 197 db BubbleBobbleGroupBUnitLevel4Growth 198 db BubbleBobbleGroupBUnitLevel4Damage 199 db RangedMonster 200 db "Bobblun",255,"    "202Monster008Table: 203 dw Monster008Idle204 dw Monster008Move205 dw Monster008AttackPatternRight206 dw Monster008AttackPatternLeft207 dw Monster008AttackPatternLeft208 dw Monster008AttackPatternLeft209 dw Monster008AttackPatternRight210 dw Monster008AttackPatternRight211 db BattleMonsterSpriteSheet1Block212 db 16 213 db 16+08 214 db BubbleBobbleGroupAUnitLevel5CostGold 215 db BubbleBobbleGroupAUnitLevel5CostGems 216 db BubbleBobbleGroupAUnitLevel5CostRubies 217 db BubbleBobbleGroupAUnitLevel5HP 218 db BubbleBobbleGroupAUnitLevel5Speed 219 db BubbleBobbleGroupAUnitLevel5Attack 220 db BubbleBobbleGroupAUnitLevel5Defense 221 db BubbleBobbleGroupAUnitLevel5Growth 222 db BubbleBobbleGroupAUnitLevel5Damage 223 db RangedMonster 224 db "Bubblun",255,"    "226Monster009Table: 227 dw Monster009Idle228 dw Monster009Move229 dw GeneralMonsterAttackPatternRight230 dw GeneralMonsterAttackPatternLeft231 dw GeneralMonsterAttackPatternLeftUp232 dw GeneralMonsterAttackPatternLeftDown233 dw GeneralMonsterAttackPatternRightUp234 dw GeneralMonsterAttackPatternRightDown235 db BattleMonsterSpriteSheet1Block236 db 16 237 db 16+08 238 db BubbleBobbleGroupAUnitLevel1CostGold 239 db BubbleBobbleGroupAUnitLevel1CostGems 240 db BubbleBobbleGroupAUnitLevel1CostRubies 241 db BubbleBobbleGroupAUnitLevel1HP 242 db BubbleBobbleGroupAUnitLevel1Speed 243 db BubbleBobbleGroupAUnitLevel1Attack 244 db BubbleBobbleGroupAUnitLevel1Defense 245 db BubbleBobbleGroupAUnitLevel1Growth 246 db BubbleBobbleGroupAUnitLevel1Damage 247 db 000 248 db "Zen Chan",255,"   "250Monster010Table: 251 dw Monster010Idle252 dw Monster010Move253 dw GeneralMonsterAttackPatternRight254 dw GeneralMonsterAttackPatternLeft255 dw GeneralMonsterAttackPatternLeftUp256 dw GeneralMonsterAttackPatternLeftDown257 dw GeneralMonsterAttackPatternRightUp258 dw GeneralMonsterAttackPatternRightDown259 db BattleMonsterSpriteSheet1Block260 db 16 261 db 16+08 262 db BubbleBobbleGroupBUnitLevel3CostGold 263 db BubbleBobbleGroupBUnitLevel3CostGems 264 db BubbleBobbleGroupBUnitLevel3CostRubies 265 db BubbleBobbleGroupBUnitLevel3HP 266 db BubbleBobbleGroupBUnitLevel3Speed 267 db BubbleBobbleGroupBUnitLevel3Attack 268 db BubbleBobbleGroupBUnitLevel3Defense 269 db BubbleBobbleGroupBUnitLevel3Growth 270 db BubbleBobbleGroupBUnitLevel3Damage 271 db 000 272 db "Mad Zenchan",255274Monster011Table: 275 dw Monster011Idle276 dw Monster011Move277 dw GeneralMonsterAttackPatternRight278 dw GeneralMonsterAttackPatternLeft279 dw GeneralMonsterAttackPatternLeftUp280 dw GeneralMonsterAttackPatternLeftDown281 dw GeneralMonsterAttackPatternRightUp282 dw GeneralMonsterAttackPatternRightDown283 db BattleMonsterSpriteSheet1Block284 db 16 285 db 16+08 286 db BubbleBobbleGroupAUnitLevel3CostGold 287 db BubbleBobbleGroupAUnitLevel3CostGems 288 db BubbleBobbleGroupAUnitLevel3CostRubies 289 db BubbleBobbleGroupAUnitLevel3HP 290 db BubbleBobbleGroupAUnitLevel3Speed 291 db BubbleBobbleGroupAUnitLevel3Attack 292 db BubbleBobbleGroupAUnitLevel3Defense 293 db BubbleBobbleGroupAUnitLevel3Growth 294 db BubbleBobbleGroupAUnitLevel3Damage 295 db 000 296 db "Mighta",255,"     "298Monster012Table: 299 dw Monster012Idle300 dw Monster012Move301 dw GeneralMonsterAttackPatternRight302 dw GeneralMonsterAttackPatternLeft303 dw GeneralMonsterAttackPatternLeftUp304 dw GeneralMonsterAttackPatternLeftDown305 dw GeneralMonsterAttackPatternRightUp306 dw GeneralMonsterAttackPatternRightDown307 db BattleMonsterSpriteSheet1Block308 db 16 309 db 16+08 310 db BubbleBobbleGroupAUnitLevel4CostGold 311 db BubbleBobbleGroupAUnitLevel4CostGems 312 db BubbleBobbleGroupAUnitLevel4CostRubies 313 db BubbleBobbleGroupAUnitLevel4HP 314 db BubbleBobbleGroupAUnitLevel4Speed 315 db BubbleBobbleGroupAUnitLevel4Attack 316 db BubbleBobbleGroupAUnitLevel4Defense 317 db BubbleBobbleGroupAUnitLevel4Growth 318 db BubbleBobbleGroupAUnitLevel4Damage 319 db 000 320 db "SkellMonsta",255322Monster013Table: 323 dw Monster013Idle324 dw Monster013Move325 dw GeneralMonsterAttackPatternRight326 dw GeneralMonsterAttackPatternLeft327 dw GeneralMonsterAttackPatternLeftUp328 dw GeneralMonsterAttackPatternLeftDown329 dw GeneralMonsterAttackPatternRightUp330 dw GeneralMonsterAttackPatternRightDown331 db BattleMonsterSpriteSheet1Block332 db 16 333 db 16+08 334 db BubbleBobbleGroupBUnitLevel1CostGold 335 db BubbleBobbleGroupBUnitLevel1CostGems 336 db BubbleBobbleGroupBUnitLevel1CostRubies 337 db BubbleBobbleGroupBUnitLevel1HP 338 db BubbleBobbleGroupBUnitLevel1Speed 339 db BubbleBobbleGroupBUnitLevel1Attack 340 db BubbleBobbleGroupBUnitLevel1Defense 341 db BubbleBobbleGroupBUnitLevel1Growth 342 db BubbleBobbleGroupBUnitLevel1Damage 343 db 000 344 db "Banebou",255,"    "346Monster014Table: 347 dw Monster014Idle348 dw Monster014Move349 dw GeneralMonsterAttackPatternRight350 dw GeneralMonsterAttackPatternLeft351 dw GeneralMonsterAttackPatternLeftUp352 dw GeneralMonsterAttackPatternLeftDown353 dw GeneralMonsterAttackPatternRightUp354 dw GeneralMonsterAttackPatternRightDown355 db BattleMonsterSpriteSheet1Block356 db 16 357 db 16+08 358 db BubbleBobbleGroupBUnitLevel2CostGold 359 db BubbleBobbleGroupBUnitLevel2CostGems 360 db BubbleBobbleGroupBUnitLevel2CostRubies 361 db BubbleBobbleGroupBUnitLevel2HP 362 db BubbleBobbleGroupBUnitLevel2Speed 363 db BubbleBobbleGroupBUnitLevel2Attack 364 db BubbleBobbleGroupBUnitLevel2Defense 365 db BubbleBobbleGroupBUnitLevel2Growth 366 db BubbleBobbleGroupBUnitLevel2Damage 367 db 000 368 db "Hidegons",255,"   "370Monster015Table: 371 dw Monster015Idle372 dw Monster015Move373 dw GeneralMonsterAttackPatternRight374 dw GeneralMonsterAttackPatternLeft375 dw GeneralMonsterAttackPatternLeftUp376 dw GeneralMonsterAttackPatternLeftDown377 dw GeneralMonsterAttackPatternRightUp378 dw GeneralMonsterAttackPatternRightDown379 db BattleMonsterSpriteSheet1Block380 db 16 381 db 16+08 382 db BubbleBobbleGroupAUnitLevel2CostGold 383 db BubbleBobbleGroupAUnitLevel2CostGems 384 db BubbleBobbleGroupAUnitLevel2CostRubies 385 db BubbleBobbleGroupAUnitLevel2HP 386 db BubbleBobbleGroupAUnitLevel2Speed 387 db BubbleBobbleGroupAUnitLevel2Attack 388 db BubbleBobbleGroupAUnitLevel2Defense 389 db BubbleBobbleGroupAUnitLevel2Growth 390 db BubbleBobbleGroupAUnitLevel2Damage 391 db 000 392 db "Drunk",255,"      "394Monster016Table: 395 dw Monster016Idle396 dw Monster016Move397 dw GeneralMonsterAttackPatternRight398 dw GeneralMonsterAttackPatternLeft399 dw GeneralMonsterAttackPatternLeftUp400 dw GeneralMonsterAttackPatternLeftDown401 dw GeneralMonsterAttackPatternRightUp402 dw GeneralMonsterAttackPatternRightDown403 db BattleMonsterSpriteSheet2Block404 db 64 405 db 64+04 406 db BubbleBobbleGroupBUnitLevel6CostGold 407 db BubbleBobbleGroupBUnitLevel6CostGems 408 db BubbleBobbleGroupBUnitLevel6CostRubies 409 db BubbleBobbleGroupBUnitLevel6HP 410 db BubbleBobbleGroupBUnitLevel6Speed 411 db BubbleBobbleGroupBUnitLevel6Attack 412 db BubbleBobbleGroupBUnitLevel6Defense 413 db BubbleBobbleGroupBUnitLevel6Growth 414 db BubbleBobbleGroupBUnitLevel6Damage 415 db 000 416 db "Super Drunk",255418Monster017Table: 419 dw Monster017Idle420 dw Monster017Move421 dw GeneralMonsterAttackPatternRight422 dw GeneralMonsterAttackPatternLeft423 dw GeneralMonsterAttackPatternLeftUp424 dw GeneralMonsterAttackPatternLeftDown425 dw GeneralMonsterAttackPatternRightUp426 dw GeneralMonsterAttackPatternRightDown427 db BattleMonsterSpriteSheet1Block428 db 32 429 db 32+08 430 db BubbleBobbleGroupBUnitLevel5CostGold 431 db BubbleBobbleGroupBUnitLevel5CostGems 432 db BubbleBobbleGroupBUnitLevel5CostRubies 433 db BubbleBobbleGroupBUnitLevel5HP 434 db BubbleBobbleGroupBUnitLevel5Speed 435 db BubbleBobbleGroupBUnitLevel5Attack 436 db BubbleBobbleGroupBUnitLevel5Defense 437 db BubbleBobbleGroupBUnitLevel5Growth 438 db BubbleBobbleGroupBUnitLevel5Damage 439 db 000 440 db "Supermighta",255446Monster018Table: 447 dw Monster018Idle448 dw Monster018Move449 dw Monster018AttackPatternRight450 dw Monster018AttackPatternLeft451 dw Monster018AttackPatternLeftUp452 dw Monster018AttackPatternLeftDown453 dw Monster018AttackPatternRightUp454 dw Monster018AttackPatternRightDown455 db BattleMonsterSpriteSheet1Block456 db 32 457 db 32+08 458 db CastleVaniaUnitLevel3CostGold 459 db CastleVaniaUnitLevel3CostGems 460 db CastleVaniaUnitLevel3CostRubies 461 db CastleVaniaUnitLevel3HP 462 db CastleVaniaUnitLevel3Speed 463 db CastleVaniaUnitLevel3Attack 464 db CastleVaniaUnitLevel3Defense 465 db CastleVaniaUnitLevel3Growth 466 db CastleVaniaUnitLevel3Damage 467 db 000 468 db "Fish Man",255,"   "470Monster019Table: 471 dw Monster019Idle472 dw Monster019Move473 dw GeneralMonsterAttackPatternRight474 dw GeneralMonsterAttackPatternLeft475 dw GeneralMonsterAttackPatternLeftUp476 dw GeneralMonsterAttackPatternLeftDown477 dw GeneralMonsterAttackPatternRightUp478 dw GeneralMonsterAttackPatternRightDown479 db BattleMonsterSpriteSheet1Block480 db 16 481 db 32+08 482 db CastleVaniaUnitLevel1CostGold 483 db CastleVaniaUnitLevel1CostGems 484 db CastleVaniaUnitLevel1CostRubies 485 db CastleVaniaUnitLevel1HP 486 db CastleVaniaUnitLevel1Speed 487 db CastleVaniaUnitLevel1Attack 488 db CastleVaniaUnitLevel1Defense 489 db CastleVaniaUnitLevel1Growth 490 db CastleVaniaUnitLevel1Damage 491 db 000 492 db "Zombie",255,"     "494Monster020Table: 495 dw Monster020Idle496 dw Monster020Move497 dw GeneralMonsterAttackPatternRight498 dw GeneralMonsterAttackPatternLeft499 dw GeneralMonsterAttackPatternLeftUp500 dw GeneralMonsterAttackPatternLeftDown501 dw GeneralMonsterAttackPatternRightUp502 dw GeneralMonsterAttackPatternRightDown503 db BattleMonsterSpriteSheet2Block504 db 16 505 db 40+08 506 db CastleVaniaUnitLevel5CostGold 507 db CastleVaniaUnitLevel5CostGems 508 db CastleVaniaUnitLevel5CostRubies 509 db CastleVaniaUnitLevel5HP 510 db CastleVaniaUnitLevel5Speed 511 db CastleVaniaUnitLevel5Attack 512 db CastleVaniaUnitLevel5Defense 513 db CastleVaniaUnitLevel5Growth 514 db CastleVaniaUnitLevel5Damage 515 db 000 516 db "Mummy Man",255,"  "518Monster021Table: 519 dw Monster021Idle520 dw Monster021Move521 dw Monster021AttackPatternRight522 dw Monster021AttackPatternLeft523 dw Monster021AttackPatternLeftUp524 dw Monster021AttackPatternLeftDown525 dw Monster021AttackPatternRightUp526 dw Monster021AttackPatternRightDown527 db BattleMonsterSpriteSheet1Block528 db 16 529 db 32+08 530 db CastleVaniaUnitLevel3CostGold 531 db CastleVaniaUnitLevel3CostGems 532 db CastleVaniaUnitLevel3CostRubies 533 db CastleVaniaUnitLevel3HP 534 db CastleVaniaUnitLevel3Speed 535 db CastleVaniaUnitLevel3Attack 536 db CastleVaniaUnitLevel3Defense 537 db CastleVaniaUnitLevel3Growth 538 db CastleVaniaUnitLevel3Damage 539 db 000 540 db "Spear Guard",255542Monster022Table: 543 dw Monster022Idle544 dw Monster022Move545 dw GeneralMonsterAttackPatternRight546 dw GeneralMonsterAttackPatternLeft547 dw GeneralMonsterAttackPatternLeftUp548 dw GeneralMonsterAttackPatternLeftDown549 dw GeneralMonsterAttackPatternRightUp550 dw GeneralMonsterAttackPatternRightDown551 db BattleMonsterSpriteSheet3Block552 db 16 553 db 24+08 554 db CastleVaniaUnitLevel2CostGold 555 db CastleVaniaUnitLevel2CostGems 556 db CastleVaniaUnitLevel2CostRubies 557 db CastleVaniaUnitLevel2HP 558 db CastleVaniaUnitLevel2Speed 559 db CastleVaniaUnitLevel2Attack 560 db CastleVaniaUnitLevel2Defense 561 db CastleVaniaUnitLevel2Growth 562 db CastleVaniaUnitLevel2Damage 563 db 000 564 db "Medusa Head",255565 566Monster023Table: 567 dw Monster023Idle568 dw Monster023Move569 dw Monster023AttackPatternRight570 dw Monster023AttackPatternLeft571 dw Monster023AttackPatternLeftUp572 dw Monster023AttackPatternLeftDown573 dw Monster023AttackPatternRightUp574 dw Monster023AttackPatternRightDown575 db BattleMonsterSpriteSheet3Block576 db 16 577 db 16+08 578 db CastleVaniaUnitLevel2CostGold 579 db CastleVaniaUnitLevel2CostGems 580 db CastleVaniaUnitLevel2CostRubies 581 db CastleVaniaUnitLevel2HP 582 db CastleVaniaUnitLevel2Speed 583 db CastleVaniaUnitLevel2Attack 584 db CastleVaniaUnitLevel2Defense 585 db CastleVaniaUnitLevel2Growth 586 db CastleVaniaUnitLevel2Damage 587 db 000 588 db "Flea Man",255,"   "590Monster024Table: 591 dw Monster024Idle592 dw Monster024Move593 dw GeneralMonsterAttackPatternRight594 dw GeneralMonsterAttackPatternLeft595 dw GeneralMonsterAttackPatternLeftUp596 dw GeneralMonsterAttackPatternLeftDown597 dw GeneralMonsterAttackPatternRightUp598 dw GeneralMonsterAttackPatternRightDown599 db BattleMonsterSpriteSheet3Block600 db 48 601 db 48+08 602 db CastleVaniaUnitLevel6CostGold 603 db CastleVaniaUnitLevel6CostGems 604 db CastleVaniaUnitLevel6CostRubies 605 db CastleVaniaUnitLevel6HP 606 db CastleVaniaUnitLevel6Speed 607 db CastleVaniaUnitLevel6Attack 608 db CastleVaniaUnitLevel6Defense 609 db CastleVaniaUnitLevel6Growth 610 db CastleVaniaUnitLevel6Damage 611 db 000 612 db "Grim Reaper",255613 614Monster025Table: 615 dw Monster025Idle616 dw Monster025Move617 dw Monster025AttackPatternRight618 dw Monster025AttackPatternLeft619 dw Monster025AttackPatternLeftUp620 dw Monster025AttackPatternLeftDown621 dw Monster025AttackPatternRightUp622 dw Monster025AttackPatternRightDown623 db BattleMonsterSpriteSheet3Block624 db 16 625 db 32+08 626 db CastleVaniaUnitLevel1CostGold 627 db CastleVaniaUnitLevel1CostGems 628 db CastleVaniaUnitLevel1CostRubies 629 db CastleVaniaUnitLevel1HP 630 db CastleVaniaUnitLevel1Speed 631 db CastleVaniaUnitLevel1Attack 632 db CastleVaniaUnitLevel1Defense 633 db CastleVaniaUnitLevel1Growth 634 db CastleVaniaUnitLevel1Damage 635 db 000 636 db "Skeleton",255,"   "638Monster026Table: 639 dw Monster026Idle640 dw Monster026Move641 dw Monster026AttackPatternRight642 dw Monster026AttackPatternLeft643 dw Monster026AttackPatternLeft644 dw Monster026AttackPatternLeft645 dw Monster026AttackPatternRight646 dw Monster026AttackPatternRight647 db BattleMonsterSpriteSheet2Block648 db 16 649 db 32+08 650 db CastleVaniaUnitLevel4CostGold 651 db CastleVaniaUnitLevel4CostGems 652 db CastleVaniaUnitLevel4CostRubies 653 db CastleVaniaUnitLevel4HP 654 db CastleVaniaUnitLevel4Speed 655 db CastleVaniaUnitLevel4Attack 656 db CastleVaniaUnitLevel4Defense 657 db CastleVaniaUnitLevel4Growth 658 db CastleVaniaUnitLevel4Damage 659 db RangedMonster 660 db "Axe Man",255,"    "667Monster027Table: 668 dw Monster027Idle669 dw Monster027Move670 dw GeneralMonsterAttackPatternRight671 dw GeneralMonsterAttackPatternLeft672 dw GeneralMonsterAttackPatternLeftUp673 dw GeneralMonsterAttackPatternLeftDown674 dw GeneralMonsterAttackPatternRightUp675 dw GeneralMonsterAttackPatternRightDown676 db BattleMonsterSpriteSheet3Block677 db 16 678 db 16+08 679 db DragonSlayerUnitLevel2CostGold 680 db DragonSlayerUnitLevel2CostGems 681 db DragonSlayerUnitLevel2CostRubies 682 db DragonSlayerUnitLevel2HP 683 db DragonSlayerUnitLevel2Speed 684 db DragonSlayerUnitLevel2Attack 685 db DragonSlayerUnitLevel2Defense 686 db DragonSlayerUnitLevel2Growth 687 db DragonSlayerUnitLevel2Damage 688 db 000 689 db "Scorpii",255,"    "692Monster028Table: 693 dw Monster028Idle694 dw Monster028Move695 dw GeneralMonsterAttackPatternRight696 dw GeneralMonsterAttackPatternLeft697 dw GeneralMonsterAttackPatternLeftUp698 dw GeneralMonsterAttackPatternLeftDown699 dw GeneralMonsterAttackPatternRightUp700 dw GeneralMonsterAttackPatternRightDown701 db BattleMonsterSpriteSheet3Block702 db 16 703 db 16+08 704 db DragonSlayerUnitLevel1CostGold 705 db DragonSlayerUnitLevel1CostGems 706 db DragonSlayerUnitLevel1CostRubies 707 db DragonSlayerUnitLevel1HP 708 db DragonSlayerUnitLevel1Speed 709 db DragonSlayerUnitLevel1Attack 710 db DragonSlayerUnitLevel1Defense 711 db DragonSlayerUnitLevel1Growth 712 db DragonSlayerUnitLevel1Damage 713 db 000 714 db "Porgi",255,"      "716Monster029Table: 717 dw Monster029Idle718 dw Monster029Move719 dw GeneralMonsterAttackPatternRight720 dw GeneralMonsterAttackPatternLeft721 dw GeneralMonsterAttackPatternLeftUp722 dw GeneralMonsterAttackPatternLeftDown723 dw GeneralMonsterAttackPatternRightUp724 dw GeneralMonsterAttackPatternRightDown725 db BattleMonsterSpriteSheet3Block726 db 16 727 db 16+08 728 db DragonSlayerUnitLevel3CostGold 729 db DragonSlayerUnitLevel3CostGems 730 db DragonSlayerUnitLevel3CostRubies 731 db DragonSlayerUnitLevel3HP 732 db DragonSlayerUnitLevel3Speed 733 db DragonSlayerUnitLevel3Attack 734 db DragonSlayerUnitLevel3Defense 735 db DragonSlayerUnitLevel3Growth 736 db DragonSlayerUnitLevel3Damage 737 db 000 738 db "Rock Man",255,"   "740Monster030Table: 741 dw Monster030Idle742 dw Monster030Move743 dw GeneralMonsterAttackPatternRight744 dw GeneralMonsterAttackPatternLeft745 dw GeneralMonsterAttackPatternLeftUp746 dw GeneralMonsterAttackPatternLeftDown747 dw GeneralMonsterAttackPatternRightUp748 dw GeneralMonsterAttackPatternRightDown749 db BattleMonsterSpriteSheet3Block750 db 16 751 db 16+08 752 db DragonSlayerUnitLevel1CostGold 753 db DragonSlayerUnitLevel1CostGems 754 db DragonSlayerUnitLevel1CostRubies 755 db DragonSlayerUnitLevel1HP 756 db DragonSlayerUnitLevel1Speed 757 db DragonSlayerUnitLevel1Attack 758 db DragonSlayerUnitLevel1Defense 759 db DragonSlayerUnitLevel1Growth 760 db DragonSlayerUnitLevel1Damage 761 db 000 762 db "Dawg",255,"       "763765Monster031Table: 766 dw Monster031Idle767 dw Monster031Move768 dw GeneralMonsterAttackPatternRight769 dw GeneralMonsterAttackPatternLeft770 dw GeneralMonsterAttackPatternLeftUp771 dw GeneralMonsterAttackPatternLeftDown772 dw GeneralMonsterAttackPatternRightUp773 dw GeneralMonsterAttackPatternRightDown774 db BattleMonsterSpriteSheet3Block775 db 16 776 db 16+08 777 db DragonSlayerUnitLevel4CostGold 778 db DragonSlayerUnitLevel4CostGems 779 db DragonSlayerUnitLevel4CostRubies 780 db DragonSlayerUnitLevel4HP 781 db DragonSlayerUnitLevel4Speed 782 db DragonSlayerUnitLevel4Attack 783 db DragonSlayerUnitLevel4Defense 784 db DragonSlayerUnitLevel4Growth 785 db DragonSlayerUnitLevel4Damage 786 db 000 787 db "Gers",255,"       "789Monster032Table: 790 dw Monster032Idle791 dw Monster032Move792 dw GeneralMonsterAttackPatternRight793 dw GeneralMonsterAttackPatternLeft794 dw GeneralMonsterAttackPatternLeftUp795 dw GeneralMonsterAttackPatternLeftDown796 dw GeneralMonsterAttackPatternRightUp797 dw GeneralMonsterAttackPatternRightDown798 db BattleMonsterSpriteSheet3Block799 db 16 800 db 16+08 801 db DragonSlayerUnitLevel2CostGold 802 db DragonSlayerUnitLevel2CostGems 803 db DragonSlayerUnitLevel2CostRubies 804 db DragonSlayerUnitLevel2HP 805 db DragonSlayerUnitLevel2Speed 806 db DragonSlayerUnitLevel2Attack 807 db DragonSlayerUnitLevel2Defense 808 db DragonSlayerUnitLevel2Growth 809 db DragonSlayerUnitLevel2Damage 810 db 000 811 db "Yashinotkin",255813Monster033Table: 814 dw Monster033Idle815 dw Monster033Move816 dw GeneralMonsterAttackPatternRight817 dw GeneralMonsterAttackPatternLeft818 dw GeneralMonsterAttackPatternLeftUp819 dw GeneralMonsterAttackPatternLeftDown820 dw GeneralMonsterAttackPatternRightUp821 dw GeneralMonsterAttackPatternRightDown822 db BattleMonsterSpriteSheet3Block823 db 16 824 db 16+08 825 db DragonSlayerUnitLevel6CostGold 826 db DragonSlayerUnitLevel6CostGems 827 db DragonSlayerUnitLevel6CostRubies 828 db DragonSlayerUnitLevel6HP 829 db DragonSlayerUnitLevel6Speed 830 db DragonSlayerUnitLevel6Attack 831 db DragonSlayerUnitLevel6Defense 832 db DragonSlayerUnitLevel6Growth 833 db DragonSlayerUnitLevel6Damage 834 db 000 835 db "King Mu",255,"    "837Monster034Table: 838 dw Monster034Idle839 dw Monster034Move840 dw GeneralMonsterAttackPatternRight841 dw GeneralMonsterAttackPatternLeft842 dw GeneralMonsterAttackPatternLeftUp843 dw GeneralMonsterAttackPatternLeftDown844 dw GeneralMonsterAttackPatternRightUp845 dw GeneralMonsterAttackPatternRightDown846 db BattleMonsterSpriteSheet3Block847 db 16 848 db 16+08 849 db DragonSlayerUnitLevel3CostGold 850 db DragonSlayerUnitLevel3CostGems 851 db DragonSlayerUnitLevel3CostRubies 852 db DragonSlayerUnitLevel3HP 853 db DragonSlayerUnitLevel3Speed 854 db DragonSlayerUnitLevel3Attack 855 db DragonSlayerUnitLevel3Defense 856 db DragonSlayerUnitLevel3Growth 857 db DragonSlayerUnitLevel3Damage 858 db 000 859 db "Crawler",255,"    "861Monster035Table: 862 dw Monster035Idle863 dw Monster035Move864 dw Monster035AttackPatternRight865 dw Monster035AttackPatternLeft866 dw Monster035AttackPatternLeft867 dw Monster035AttackPatternLeft868 dw Monster035AttackPatternRight869 dw Monster035AttackPatternRight870 db BattleMonsterSpriteSheet3Block871 db 16 872 db 16+08 873 db DragonSlayerUnitLevel5CostGold 874 db DragonSlayerUnitLevel5CostGems 875 db DragonSlayerUnitLevel5CostRubies 876 db DragonSlayerUnitLevel5HP 877 db DragonSlayerUnitLevel5Speed 878 db DragonSlayerUnitLevel5Attack 879 db DragonSlayerUnitLevel5Defense 880 db DragonSlayerUnitLevel5Growth 881 db DragonSlayerUnitLevel5Damage 882 db RangedMonster 883 db "Octo",255,"       "885Monster036Table: 886 dw Monster036Idle887 dw Monster036Move888 dw Monster036AttackPatternRight889 dw Monster036AttackPatternLeft890 dw Monster036AttackPatternLeft891 dw Monster036AttackPatternLeft892 dw Monster036AttackPatternRight893 dw Monster036AttackPatternRight894 db BattleMonsterSpriteSheet3Block895 db 16 896 db 32+08 897 db ContraGroupBUnitLevel2CostGold 898 db ContraGroupBUnitLevel2CostGems 899 db ContraGroupBUnitLevel2CostRubies 900 db ContraGroupBUnitLevel2HP 901 db ContraGroupBUnitLevel2Speed 902 db ContraGroupBUnitLevel2Attack 903 db ContraGroupBUnitLevel2Defense 904 db ContraGroupBUnitLevel2Growth 905 db ContraGroupBUnitLevel2Damage 906 db RangedMonster 907 db "Sarge",255,"      "909Monster037Table: 910 dw Monster037Idle911 dw Monster037Move912 dw GeneralMonsterAttackPatternRight913 dw GeneralMonsterAttackPatternLeft914 dw GeneralMonsterAttackPatternLeftUp915 dw GeneralMonsterAttackPatternLeftDown916 dw GeneralMonsterAttackPatternRightUp917 dw GeneralMonsterAttackPatternRightDown918 db BattleMonsterSpriteSheet4Block919 db 16 920 db 32+08 921 db ContraGroupBUnitLevel4CostGold 922 db ContraGroupBUnitLevel4CostGems 923 db ContraGroupBUnitLevel4CostRubies 924 db ContraGroupBUnitLevel4HP 925 db ContraGroupBUnitLevel4Speed 926 db ContraGroupBUnitLevel4Attack 927 db ContraGroupBUnitLevel4Defense 928 db ContraGroupBUnitLevel4Growth 929 db ContraGroupBUnitLevel4Damage 930 db 000 931 db "Lieutenant",255," "933Monster038Table: 934 dw Monster038Idle935 dw Monster038Move936 dw GeneralMonsterAttackPatternRight937 dw GeneralMonsterAttackPatternLeft938 dw GeneralMonsterAttackPatternLeftUp939 dw GeneralMonsterAttackPatternLeftDown940 dw GeneralMonsterAttackPatternRightUp941 dw GeneralMonsterAttackPatternRightDown942 db BattleMonsterSpriteSheet1Block943 db 16 944 db 32+08 945 db ContraGroupAUnitLevel1CostGold 946 db ContraGroupAUnitLevel1CostGems 947 db ContraGroupAUnitLevel1CostRubies 948 db ContraGroupAUnitLevel1HP 949 db ContraGroupAUnitLevel1Speed 950 db ContraGroupAUnitLevel1Attack 951 db ContraGroupAUnitLevel1Defense 952 db ContraGroupAUnitLevel1Growth 953 db ContraGroupAUnitLevel1Damage 954 db 000 955 db "FootSoldier",255957Monster039Table: 958 dw Monster039Idle959 dw Monster039Move960 dw Monster039AttackPatternRight961 dw Monster039AttackPatternLeft962 dw Monster039AttackPatternLeft963 dw Monster039AttackPatternLeft964 dw Monster039AttackPatternRight965 dw Monster039AttackPatternRight966 db BattleMonsterSpriteSheet4Block967 db 32 968 db 32+08 969 db ContraGroupBUnitLevel5CostGold 970 db ContraGroupBUnitLevel5CostGems 971 db ContraGroupBUnitLevel5CostRubies 972 db ContraGroupBUnitLevel5HP 973 db ContraGroupBUnitLevel5Speed 974 db ContraGroupBUnitLevel5Attack 975 db ContraGroupBUnitLevel5Defense 976 db ContraGroupBUnitLevel5Growth 977 db ContraGroupBUnitLevel5Damage 978 db RangedMonster 979 db "Grenadier",255,"  "981Monster040Table: 982 dw Monster040Idle983 dw Monster040Move984 dw Monster040AttackPatternRight985 dw Monster040AttackPatternLeft986 dw Monster040AttackPatternLeft987 dw Monster040AttackPatternLeft988 dw Monster040AttackPatternRight989 dw Monster040AttackPatternRight990 db BattleMonsterSpriteSheet4Block991 db 32 992 db 32+08 993 db ContraGroupBUnitLevel6CostGold 994 db ContraGroupBUnitLevel6CostGems 995 db ContraGroupBUnitLevel6CostRubies 996 db ContraGroupBUnitLevel6HP 997 db ContraGroupBUnitLevel6Speed 998 db ContraGroupBUnitLevel6Attack 999 db ContraGroupBUnitLevel6Defense 1000 db ContraGroupBUnitLevel6Growth 1001 db ContraGroupBUnitLevel6Damage 1002 db RangedMonster 1003 db "Sniper",255,"     "1005Monster041Table: 1006 dw Monster041Idle1007 dw Monster041Move1008 dw GeneralMonsterAttackPatternRight1009 dw GeneralMonsterAttackPatternLeft1010 dw GeneralMonsterAttackPatternLeftUp1011 dw GeneralMonsterAttackPatternLeftDown1012 dw GeneralMonsterAttackPatternRightUp1013 dw GeneralMonsterAttackPatternRightDown1014 db BattleMonsterSpriteSheet2Block1015 db 32 1016 db 24+08 1017 db ContraGroupAUnitLevel3CostGold 1018 db ContraGroupAUnitLevel3CostGems 1019 db ContraGroupAUnitLevel3CostRubies 1020 db ContraGroupAUnitLevel3HP 1021 db ContraGroupAUnitLevel3Speed 1022 db ContraGroupAUnitLevel3Attack 1023 db ContraGroupAUnitLevel3Defense 1024 db ContraGroupAUnitLevel3Growth 1025 db ContraGroupAUnitLevel3Damage 1026 db 000 1027 db "Gigafly",255,"    "1029Monster042Table: 1030 dw Monster042Idle1031 dw Monster042Move1032 dw GeneralMonsterAttackPatternRight1033 dw GeneralMonsterAttackPatternLeft1034 dw GeneralMonsterAttackPatternLeftUp1035 dw GeneralMonsterAttackPatternLeftDown1036 dw GeneralMonsterAttackPatternRightUp1037 dw GeneralMonsterAttackPatternRightDown1038 db BattleMonsterSpriteSheet4Block1039 db 32 1040 db 32+08 1041 db ContraGroupAUnitLevel2CostGold 1042 db ContraGroupAUnitLevel2CostGems 1043 db ContraGroupAUnitLevel2CostRubies 1044 db ContraGroupAUnitLevel2HP 1045 db ContraGroupAUnitLevel2Speed 1046 db ContraGroupAUnitLevel2Attack 1047 db ContraGroupAUnitLevel2Defense 1048 db ContraGroupAUnitLevel2Growth 1049 db ContraGroupAUnitLevel2Damage 1050 db 000 1051 db "Alien Grunt",2551053Monster043Table: 1054 dw Monster043Idle1055 dw Monster043Move1056 dw GeneralMonsterAttackPatternRight1057 dw GeneralMonsterAttackPatternLeft1058 dw GeneralMonsterAttackPatternLeftUp1059 dw GeneralMonsterAttackPatternLeftDown1060 dw GeneralMonsterAttackPatternRightUp1061 dw GeneralMonsterAttackPatternRightDown1062 db BattleMonsterSpriteSheet3Block1063 db 16 1064 db 32+08 1065 db ContraGroupBUnitLevel3CostGold 1066 db ContraGroupBUnitLevel3CostGems 1067 db ContraGroupBUnitLevel3CostRubies 1068 db ContraGroupBUnitLevel3HP 1069 db ContraGroupBUnitLevel3Speed 1070 db ContraGroupBUnitLevel3Attack 1071 db ContraGroupBUnitLevel3Defense 1072 db ContraGroupBUnitLevel3Growth 1073 db ContraGroupBUnitLevel3Damage 1074 db 000 1075 db "Infiltrant",255," "1077Monster044Table: 1078 dw Monster044Idle1079 dw Monster044Move1080 dw GeneralMonsterAttackPatternRight1081 dw GeneralMonsterAttackPatternLeft1082 dw GeneralMonsterAttackPatternLeftUp1083 dw GeneralMonsterAttackPatternLeftDown1084 dw GeneralMonsterAttackPatternRightUp1085 dw GeneralMonsterAttackPatternRightDown1086 db BattleMonsterSpriteSheet4Block1087 db 32 1088 db 32+08 1089 db ContraGroupBUnitLevel1CostGold 1090 db ContraGroupBUnitLevel1CostGems 1091 db ContraGroupBUnitLevel1CostRubies 1092 db ContraGroupBUnitLevel1HP 1093 db ContraGroupBUnitLevel1Speed 1094 db ContraGroupBUnitLevel1Attack 1095 db ContraGroupBUnitLevel1Defense 1096 db ContraGroupBUnitLevel1Growth 1097 db ContraGroupBUnitLevel1Damage 1098 db 000 1099 db "Red Soldier",2551100 1101Monster045Table: 1102 dw Monster045Idle1103 dw Monster045Move1104 dw GeneralMonsterAttackPatternRight1105 dw GeneralMonsterAttackPatternLeft1106 dw GeneralMonsterAttackPatternLeftUp1107 dw GeneralMonsterAttackPatternLeftDown1108 dw GeneralMonsterAttackPatternRightUp1109 dw GeneralMonsterAttackPatternRightDown1110 db BattleMonsterSpriteSheet2Block1111 db 32 1112 db 24+08 1113 db ContraGroupAUnitLevel5CostGold 1114 db ContraGroupAUnitLevel5CostGems 1115 db ContraGroupAUnitLevel5CostRubies 1116 db ContraGroupAUnitLevel5HP 1117 db ContraGroupAUnitLevel5Speed 1118 db ContraGroupAUnitLevel5Attack 1119 db ContraGroupAUnitLevel5Defense 1120 db ContraGroupAUnitLevel5Growth 1121 db ContraGroupAUnitLevel5Damage 1122 db 000 1123 db "Face Hugger",2551125Monster046Table: 1126 dw Monster046Idle1127 dw Monster046Move1128 dw GeneralMonsterAttackPatternRight1129 dw GeneralMonsterAttackPatternLeft1130 dw GeneralMonsterAttackPatternLeftUp1131 dw GeneralMonsterAttackPatternLeftDown1132 dw GeneralMonsterAttackPatternRightUp1133 dw GeneralMonsterAttackPatternRightDown1134 db BattleMonsterSpriteSheet4Block1135 db 32 1136 db 56+08 1137 db ContraGroupAUnitLevel6CostGold 1138 db ContraGroupAUnitLevel6CostGems 1139 db ContraGroupAUnitLevel6CostRubies 1140 db ContraGroupAUnitLevel6HP 1141 db ContraGroupAUnitLevel6Speed 1142 db ContraGroupAUnitLevel6Attack 1143 db ContraGroupAUnitLevel6Defense 1144 db ContraGroupAUnitLevel6Growth 1145 db ContraGroupAUnitLevel6Damage 1146 db 000 1147 db "Gorudea",255,"    "1149Monster047Table: 1150 dw Monster047Idle1151 dw Monster047Move1152 dw Monster047AttackPatternRight1153 dw Monster047AttackPatternLeft1154 dw Monster047AttackPatternLeft1155 dw Monster047AttackPatternLeft1156 dw Monster047AttackPatternRight1157 dw Monster047AttackPatternRight1158 db BattleMonsterSpriteSheet3Block1159 db 32 1160 db 32+08 1161 db ContraGroupAUnitLevel4CostGold 1162 db ContraGroupAUnitLevel4CostGems 1163 db ContraGroupAUnitLevel4CostRubies 1164 db ContraGroupAUnitLevel4HP 1165 db ContraGroupAUnitLevel4Speed 1166 db ContraGroupAUnitLevel4Attack 1167 db ContraGroupAUnitLevel4Defense 1168 db ContraGroupAUnitLevel4Growth 1169 db ContraGroupAUnitLevel4Damage 1170 db RangedMonster 1171 db "Turret",255,"     "1180Monster048Table: 1181 dw Monster048Idle1182 dw Monster048Move1183 dw GeneralMonsterAttackPatternRight1184 dw GeneralMonsterAttackPatternLeft1185 dw GeneralMonsterAttackPatternLeftUp1186 dw GeneralMonsterAttackPatternLeftDown1187 dw GeneralMonsterAttackPatternRightUp1188 dw GeneralMonsterAttackPatternRightDown1189 db BattleMonsterSpriteSheet2Block1190 db 16 1191 db 40+08 1192 db UsasUnitLevel4CostGold 1193 db UsasUnitLevel4CostGems 1194 db UsasUnitLevel4CostRubies 1195 db UsasUnitLevel4HP 1196 db UsasUnitLevel4Speed 1197 db UsasUnitLevel4Attack 1198 db UsasUnitLevel4Defense 1199 db UsasUnitLevel4Growth 1200 db UsasUnitLevel4Damage 1201 db 000 1202 db "Gravewing",255,"  "1204Monster049Table: 1205 dw Monster049Idle1206 dw Monster049Move1207 dw Monster049AttackPatternRight1208 dw Monster049AttackPatternLeft1209 dw Monster049AttackPatternLeft1210 dw Monster049AttackPatternLeft1211 dw Monster049AttackPatternRight1212 dw Monster049AttackPatternRight1213 db BattleMonsterSpriteSheet4Block1214 db 16 1215 db 24+08 1216 db UsasUnitLevel5CostGold 1217 db UsasUnitLevel5CostGems 1218 db UsasUnitLevel5CostRubies 1219 db UsasUnitLevel5HP 1220 db UsasUnitLevel5Speed 1221 db UsasUnitLevel5Attack 1222 db UsasUnitLevel5Defense 1223 db UsasUnitLevel5Growth 1224 db UsasUnitLevel5Damage 1225 db RangedMonster 1226 db "Vanguard",255,"   "1228Monster050Table: 1229 dw Monster050Idle1230 dw Monster050Move1231 dw GeneralMonsterAttackPatternRight1232 dw GeneralMonsterAttackPatternLeft1233 dw GeneralMonsterAttackPatternLeftUp1234 dw GeneralMonsterAttackPatternLeftDown1235 dw GeneralMonsterAttackPatternRightUp1236 dw GeneralMonsterAttackPatternRightDown1237 db BattleMonsterSpriteSheet4Block1238 db 16 1239 db 32+08 1240 db UsasUnitLevel6CostGold 1241 db UsasUnitLevel6CostGems 1242 db UsasUnitLevel6CostRubies 1243 db UsasUnitLevel6HP 1244 db UsasUnitLevel6Speed 1245 db UsasUnitLevel6Attack 1246 db UsasUnitLevel6Defense 1247 db UsasUnitLevel6Growth 1248 db UsasUnitLevel6Damage 1249 db 000 1250 db "Aerial Luna",2551251 1252Monster051Table: 1253 dw Monster051Idle1254 dw Monster051Move1255 dw GeneralMonsterAttackPatternRight1256 dw GeneralMonsterAttackPatternLeft1257 dw GeneralMonsterAttackPatternLeftUp1258 dw GeneralMonsterAttackPatternLeftDown1259 dw GeneralMonsterAttackPatternRightUp1260 dw GeneralMonsterAttackPatternRightDown1261 db BattleMonsterSpriteSheet4Block1262 db 16 1263 db 16+08 1264 db UsasUnitLevel1CostGold 1265 db UsasUnitLevel1CostGems 1266 db UsasUnitLevel1CostRubies 1267 db UsasUnitLevel1HP 1268 db UsasUnitLevel1Speed 1269 db UsasUnitLevel1Attack 1270 db UsasUnitLevel1Defense 1271 db UsasUnitLevel1Growth 1272 db UsasUnitLevel1Damage 1273 db 000 1274 db "Mini Phanto",2551275 1276Monster052Table: 1277 dw Monster052Idle1278 dw Monster052Move1279 dw GeneralMonsterAttackPatternRight1280 dw GeneralMonsterAttackPatternLeft1281 dw GeneralMonsterAttackPatternLeftUp1282 dw GeneralMonsterAttackPatternLeftDown1283 dw GeneralMonsterAttackPatternRightUp1284 dw GeneralMonsterAttackPatternRightDown1285 db BattleMonsterSpriteSheet4Block1286 db 16 1287 db 16+08 1288 db UsasUnitLevel2CostGold 1289 db UsasUnitLevel2CostGems 1290 db UsasUnitLevel2CostRubies 1291 db UsasUnitLevel2HP 1292 db UsasUnitLevel2Speed 1293 db UsasUnitLevel2Attack 1294 db UsasUnitLevel2Defense 1295 db UsasUnitLevel2Growth 1296 db UsasUnitLevel2Damage 1297 db 000 1298 db "Thicket Tot",2551299 1300Monster053Table: 1301 dw Monster053Idle1302 dw Monster053Move1303 dw GeneralMonsterAttackPatternRight1304 dw GeneralMonsterAttackPatternLeft1305 dw GeneralMonsterAttackPatternLeftUp1306 dw GeneralMonsterAttackPatternLeftDown1307 dw GeneralMonsterAttackPatternRightUp1308 dw GeneralMonsterAttackPatternRightDown1309 db BattleMonsterSpriteSheet3Block1310 db 16 1311 db 16+08 1312 db UsasUnitLevel1CostGold 1313 db UsasUnitLevel1CostGems 1314 db UsasUnitLevel1CostRubies 1315 db UsasUnitLevel1HP 1316 db UsasUnitLevel1Speed 1317 db UsasUnitLevel1Attack 1318 db UsasUnitLevel1Defense 1319 db UsasUnitLevel1Growth 1320 db UsasUnitLevel1Damage 1321 db 000 1322 db "Bonefin",255,"    "1324Monster054Table: 1325 dw Monster054Idle1326 dw Monster054Move1327 dw GeneralMonsterAttackPatternRight1328 dw GeneralMonsterAttackPatternLeft1329 dw GeneralMonsterAttackPatternLeftUp1330 dw GeneralMonsterAttackPatternLeftDown1331 dw GeneralMonsterAttackPatternRightUp1332 dw GeneralMonsterAttackPatternRightDown1333 db BattleMonsterSpriteSheet2Block1334 db 16 1335 db 32+08 1336 db UsasUnitLevel3CostGold 1337 db UsasUnitLevel3CostGems 1338 db UsasUnitLevel3CostRubies 1339 db UsasUnitLevel3HP 1340 db UsasUnitLevel3Speed 1341 db UsasUnitLevel3Attack 1342 db UsasUnitLevel3Defense 1343 db UsasUnitLevel3Growth 1344 db UsasUnitLevel3Damage 1345 db 000 1346 db "Zomblet",255,"    "1348Monster055Table: 1349 dw Monster055Idle1350 dw Monster055Move1351 dw Monster055AttackPatternRight1352 dw Monster055AttackPatternLeft1353 dw Monster055AttackPatternLeftUp1354 dw Monster055AttackPatternLeftDown1355 dw Monster055AttackPatternRightUp1356 dw Monster055AttackPatternRightDown1357 db BattleMonsterSpriteSheet5Block1358 db 32 1359 db 32+08 1360 db GoemonUnitLevel2CostGold 1361 db GoemonUnitLevel2CostGems 1362 db GoemonUnitLevel2CostRubies 1363 db GoemonUnitLevel2HP 1364 db GoemonUnitLevel2Speed 1365 db GoemonUnitLevel2Attack 1366 db GoemonUnitLevel2Defense 1367 db GoemonUnitLevel2Growth 1368 db GoemonUnitLevel2Damage 1369 db 000 1370 db "Cheek",255,"      "1372Monster056Table: 1373 dw Monster056Idle1374 dw Monster056Move1375 dw GeneralMonsterAttackPatternRight1376 dw GeneralMonsterAttackPatternLeft1377 dw GeneralMonsterAttackPatternLeftUp1378 dw GeneralMonsterAttackPatternLeftDown1379 dw GeneralMonsterAttackPatternRightUp1380 dw GeneralMonsterAttackPatternRightDown1381 db BattleMonsterSpriteSheet5Block1382 db 32 1383 db 32+08 1384 db GoemonUnitLevel4CostGold 1385 db GoemonUnitLevel4CostGems 1386 db GoemonUnitLevel4CostRubies 1387 db GoemonUnitLevel4HP 1388 db GoemonUnitLevel4Speed 1389 db GoemonUnitLevel4Attack 1390 db GoemonUnitLevel4Defense 1391 db GoemonUnitLevel4Growth 1392 db GoemonUnitLevel4Damage 1393 db 000 1394 db "Official",255,"   "1396Monster057Table: 1397 dw Monster057Idle1398 dw Monster057Move1399 dw GeneralMonsterAttackPatternRight1400 dw GeneralMonsterAttackPatternLeft1401 dw GeneralMonsterAttackPatternLeftUp1402 dw GeneralMonsterAttackPatternLeftDown1403 dw GeneralMonsterAttackPatternRightUp1404 dw GeneralMonsterAttackPatternRightDown1405 db BattleMonsterSpriteSheet5Block1406 db 32 1407 db 32+08 1408 db GoemonUnitLevel2CostGold 1409 db GoemonUnitLevel2CostGems 1410 db GoemonUnitLevel2CostRubies 1411 db GoemonUnitLevel2HP 1412 db GoemonUnitLevel2Speed 1413 db GoemonUnitLevel2Attack 1414 db GoemonUnitLevel2Defense 1415 db GoemonUnitLevel2Growth 1416 db GoemonUnitLevel2Damage 1417 db 000 1418 db "Kasa Obake",255," "1420Monster058Table: 1421 dw Monster058Idle1422 dw Monster058Move1423 dw Monster058AttackPatternRight1424 dw Monster058AttackPatternLeft1425 dw Monster058AttackPatternLeftUp1426 dw Monster058AttackPatternLeftDown1427 dw Monster058AttackPatternRightUp1428 dw Monster058AttackPatternRightDown1429 db BattleMonsterSpriteSheet5Block1430 db 32 1431 db 32+08 1432 db GoemonUnitLevel2CostGold 1433 db GoemonUnitLevel2CostGems 1434 db GoemonUnitLevel2CostRubies 1435 db GoemonUnitLevel2HP 1436 db GoemonUnitLevel2Speed 1437 db GoemonUnitLevel2Attack 1438 db GoemonUnitLevel2Defense 1439 db GoemonUnitLevel2Growth 1440 db GoemonUnitLevel2Damage 1441 db 000 1442 db "Fishmonger",255," "1444Monster059Table: 1445 dw Monster059Idle1446 dw Monster059Move1447 dw GeneralMonsterAttackPatternRight1448 dw GeneralMonsterAttackPatternLeft1449 dw GeneralMonsterAttackPatternLeftUp1450 dw GeneralMonsterAttackPatternLeftDown1451 dw GeneralMonsterAttackPatternRightUp1452 dw GeneralMonsterAttackPatternRightDown1453 db BattleMonsterSpriteSheet5Block1454 db 32 1455 db 32+08 1456 db GoemonUnitLevel6CostGold 1457 db GoemonUnitLevel6CostGems 1458 db GoemonUnitLevel6CostRubies 1459 db GoemonUnitLevel6HP 1460 db GoemonUnitLevel6Speed 1461 db GoemonUnitLevel6Attack 1462 db GoemonUnitLevel6Defense 1463 db GoemonUnitLevel6Growth 1464 db GoemonUnitLevel6Damage 1465 db 000 1466 db "Ronin",255,"      "1468Monster060Table: 1469 dw Monster060Idle1470 dw Monster060Move1471 dw GeneralMonsterAttackPatternRight1472 dw GeneralMonsterAttackPatternLeft1473 dw GeneralMonsterAttackPatternLeftUp1474 dw GeneralMonsterAttackPatternLeftDown1475 dw GeneralMonsterAttackPatternRightUp1476 dw GeneralMonsterAttackPatternRightDown1477 db BattleMonsterSpriteSheet5Block1478 db 32 1479 db 32+08 1480 db GoemonUnitLevel3CostGold 1481 db GoemonUnitLevel3CostGems 1482 db GoemonUnitLevel3CostRubies 1483 db GoemonUnitLevel3HP 1484 db GoemonUnitLevel3Speed 1485 db GoemonUnitLevel3Attack 1486 db GoemonUnitLevel3Defense 1487 db GoemonUnitLevel3Growth 1488 db GoemonUnitLevel3Damage 1489 db 000 1490 db "Bucket Head",2551492Monster061Table: 1493 dw Monster061Idle1494 dw Monster061Move1495 dw GeneralMonsterAttackPatternRight1496 dw GeneralMonsterAttackPatternLeft1497 dw GeneralMonsterAttackPatternLeftUp1498 dw GeneralMonsterAttackPatternLeftDown1499 dw GeneralMonsterAttackPatternRightUp1500 dw GeneralMonsterAttackPatternRightDown1501 db BattleMonsterSpriteSheet5Block1502 db 48 1503 db 32+08 1504 db GoemonUnitLevel5CostGold 1505 db GoemonUnitLevel5CostGems 1506 db GoemonUnitLevel5CostRubies 1507 db GoemonUnitLevel5HP 1508 db GoemonUnitLevel5Speed 1509 db GoemonUnitLevel5Attack 1510 db GoemonUnitLevel5Defense 1511 db GoemonUnitLevel5Growth 1512 db GoemonUnitLevel5Damage 1513 db 000 1514 db "Headmaster",255," "1516Monster062Table: 1517 dw Monster062Idle1518 dw Monster062Move1519 dw Monster062AttackPatternRight1520 dw Monster062AttackPatternLeft1521 dw Monster062AttackPatternLeftUp1522 dw Monster062AttackPatternLeftDown1523 dw Monster062AttackPatternRightUp1524 dw Monster062AttackPatternRightDown1525 db BattleMonsterSpriteSheet5Block1526 db 32 1527 db 32+08 1528 db GoemonUnitLevel1CostGold 1529 db GoemonUnitLevel1CostGems 1530 db GoemonUnitLevel1CostRubies 1531 db GoemonUnitLevel1HP 1532 db GoemonUnitLevel1Speed 1533 db GoemonUnitLevel1Attack 1534 db GoemonUnitLevel1Defense 1535 db GoemonUnitLevel1Growth 1536 db GoemonUnitLevel1Damage 1537 db 000 1538 db "Granola",255,"    "1540Monster063Table: 1541 dw Monster063Idle1542 dw Monster063Move1543 dw GeneralMonsterAttackPatternRight1544 dw GeneralMonsterAttackPatternLeft1545 dw GeneralMonsterAttackPatternLeftUp1546 dw GeneralMonsterAttackPatternLeftDown1547 dw GeneralMonsterAttackPatternRightUp1548 dw GeneralMonsterAttackPatternRightDown1549 db BattleMonsterSpriteSheet4Block1550 db 16 1551 db 16+08 1552 db PsychoWorldUnitLevel2CostGold 1553 db PsychoWorldUnitLevel2CostGems 1554 db PsychoWorldUnitLevel2CostRubies 1555 db PsychoWorldUnitLevel2HP 1556 db PsychoWorldUnitLevel2Speed 1557 db PsychoWorldUnitLevel2Attack 1558 db PsychoWorldUnitLevel2Defense 1559 db PsychoWorldUnitLevel2Growth 1560 db PsychoWorldUnitLevel2Damage 1561 db 000 1562 db "Rouge Gazer",2551564Monster064Table: 1565 dw Monster064Idle1566 dw Monster064Move1567 dw GeneralMonsterAttackPatternRight1568 dw GeneralMonsterAttackPatternLeft1569 dw GeneralMonsterAttackPatternLeftUp1570 dw GeneralMonsterAttackPatternLeftDown1571 dw GeneralMonsterAttackPatternRightUp1572 dw GeneralMonsterAttackPatternRightDown1573 db BattleMonsterSpriteSheet4Block1574 db 16 1575 db 16+08 1576 db PsychoWorldUnitLevel3CostGold 1577 db PsychoWorldUnitLevel3CostGems 1578 db PsychoWorldUnitLevel3CostRubies 1579 db PsychoWorldUnitLevel3HP 1580 db PsychoWorldUnitLevel3Speed 1581 db PsychoWorldUnitLevel3Attack 1582 db PsychoWorldUnitLevel3Defense 1583 db PsychoWorldUnitLevel3Growth 1584 db PsychoWorldUnitLevel3Damage 1585 db 000 1586 db "Glacierling",2551588Monster065Table: 1589 dw Monster065Idle1590 dw Monster065Move1591 dw GeneralMonsterAttackPatternRight1592 dw GeneralMonsterAttackPatternLeft1593 dw GeneralMonsterAttackPatternLeftUp1594 dw GeneralMonsterAttackPatternLeftDown1595 dw GeneralMonsterAttackPatternRightUp1596 dw GeneralMonsterAttackPatternRightDown1597 db BattleMonsterSpriteSheet6Block1598 db 16 1599 db 16+08 1600 db PsychoWorldUnitLevel4CostGold 1601 db PsychoWorldUnitLevel4CostGems 1602 db PsychoWorldUnitLevel4CostRubies 1603 db PsychoWorldUnitLevel4HP 1604 db PsychoWorldUnitLevel4Speed 1605 db PsychoWorldUnitLevel4Attack 1606 db PsychoWorldUnitLevel4Defense 1607 db PsychoWorldUnitLevel4Growth 1608 db PsychoWorldUnitLevel4Damage 1609 db 000 1610 db "Floatwing",255,"  "1612Monster066Table: 1613 dw Monster066Idle1614 dw Monster066Move1615 dw GeneralMonsterAttackPatternRight1616 dw GeneralMonsterAttackPatternLeft1617 dw GeneralMonsterAttackPatternLeftUp1618 dw GeneralMonsterAttackPatternLeftDown1619 dw GeneralMonsterAttackPatternRightUp1620 dw GeneralMonsterAttackPatternRightDown1621 db BattleMonsterSpriteSheet3Block1622 db 16 1623 db 16+08 1624 db PsychoWorldUnitLevel1CostGold 1625 db PsychoWorldUnitLevel1CostGems 1626 db PsychoWorldUnitLevel1CostRubies 1627 db PsychoWorldUnitLevel1HP 1628 db PsychoWorldUnitLevel1Speed 1629 db PsychoWorldUnitLevel1Attack 1630 db PsychoWorldUnitLevel1Defense 1631 db PsychoWorldUnitLevel1Growth 1632 db PsychoWorldUnitLevel1Damage 1633 db 000 1634 db "CrimsonPeek",2551636Monster067Table: 1637 dw Monster067Idle1638 dw Monster067Move1639 dw GeneralMonsterAttackPatternRight1640 dw GeneralMonsterAttackPatternLeft1641 dw GeneralMonsterAttackPatternLeftUp1642 dw GeneralMonsterAttackPatternLeftDown1643 dw GeneralMonsterAttackPatternRightUp1644 dw GeneralMonsterAttackPatternRightDown1645 db BattleMonsterSpriteSheet6Block1646 db 16 1647 db 16+08 1648 db PsychoWorldUnitLevel2CostGold 1649 db PsychoWorldUnitLevel2CostGems 1650 db PsychoWorldUnitLevel2CostRubies 1651 db PsychoWorldUnitLevel2HP 1652 db PsychoWorldUnitLevel2Speed 1653 db PsychoWorldUnitLevel2Attack 1654 db PsychoWorldUnitLevel2Defense 1655 db PsychoWorldUnitLevel2Growth 1656 db PsychoWorldUnitLevel2Damage 1657 db 000 1658 db "Fernling",255,"   "1660Monster068Table: 1661 dw Monster068Idle1662 dw Monster068Move1663 dw GeneralMonsterAttackPatternRight1664 dw GeneralMonsterAttackPatternLeft1665 dw GeneralMonsterAttackPatternLeftUp1666 dw GeneralMonsterAttackPatternLeftDown1667 dw GeneralMonsterAttackPatternRightUp1668 dw GeneralMonsterAttackPatternRightDown1669 db BattleMonsterSpriteSheet6Block1670 db 32 1671 db 32+08 1672 db PsychoWorldUnitLevel6CostGold 1673 db PsychoWorldUnitLevel6CostGems 1674 db PsychoWorldUnitLevel6CostRubies 1675 db PsychoWorldUnitLevel6HP 1676 db PsychoWorldUnitLevel6Speed 1677 db PsychoWorldUnitLevel6Attack 1678 db PsychoWorldUnitLevel6Defense 1679 db PsychoWorldUnitLevel6Growth 1680 db PsychoWorldUnitLevel6Damage 1681 db 000 1682 db "Bladezilla",255," "1684Monster069Table: 1685 dw Monster069Idle1686 dw Monster069Move1687 dw Monster069AttackPatternRight1688 dw Monster069AttackPatternLeft1689 dw Monster069AttackPatternLeft1690 dw Monster069AttackPatternLeft1691 dw Monster069AttackPatternRight1692 dw Monster069AttackPatternRight1693 db BattleMonsterSpriteSheet6Block1694 db 32 1695 db 32+08 1696 db PsychoWorldUnitLevel5CostGold 1697 db PsychoWorldUnitLevel5CostGems 1698 db PsychoWorldUnitLevel5CostRubies 1699 db PsychoWorldUnitLevel5HP 1700 db PsychoWorldUnitLevel5Speed 1701 db PsychoWorldUnitLevel5Attack 1702 db PsychoWorldUnitLevel5Defense 1703 db PsychoWorldUnitLevel5Growth 1704 db PsychoWorldUnitLevel5Damage 1705 db RangedMonster 1706 db "Spitvine",255,"   "1708Monster070Table: 1709 dw Monster070Idle1710 dw Monster070Move1711 dw GeneralMonsterAttackPatternRight1712 dw GeneralMonsterAttackPatternLeft1713 dw GeneralMonsterAttackPatternLeftUp1714 dw GeneralMonsterAttackPatternLeftDown1715 dw GeneralMonsterAttackPatternRightUp1716 dw GeneralMonsterAttackPatternRightDown1717 db BattleMonsterSpriteSheet4Block1718 db 16 1719 db 16+08 1720 db PsychoWorldUnitLevel1CostGold 1721 db PsychoWorldUnitLevel1CostGems 1722 db PsychoWorldUnitLevel1CostRubies 1723 db PsychoWorldUnitLevel1HP 1724 db PsychoWorldUnitLevel1Speed 1725 db PsychoWorldUnitLevel1Attack 1726 db PsychoWorldUnitLevel1Defense 1727 db PsychoWorldUnitLevel1Growth 1728 db PsychoWorldUnitLevel1Damage 1729 db 000 1730 db "OptiLeaper",255," "1732Monster071Table: 1733 dw Monster071Idle1734 dw Monster071Move1735 dw GeneralMonsterAttackPatternRight1736 dw GeneralMonsterAttackPatternLeft1737 dw GeneralMonsterAttackPatternLeftUp1738 dw GeneralMonsterAttackPatternLeftDown1739 dw GeneralMonsterAttackPatternRightUp1740 dw GeneralMonsterAttackPatternRightDown1741 db BattleMonsterSpriteSheet2Block1742 db 64 1743 db 64+04 1744 db BubbleBobbleGroupAUnitLevel6CostGold 1745 db BubbleBobbleGroupAUnitLevel6CostGems 1746 db BubbleBobbleGroupAUnitLevel6CostRubies 1747 db BubbleBobbleGroupAUnitLevel6HP 1748 db BubbleBobbleGroupAUnitLevel6Speed 1749 db BubbleBobbleGroupAUnitLevel6Attack 1750 db BubbleBobbleGroupAUnitLevel6Defense 1751 db BubbleBobbleGroupAUnitLevel6Growth 1752 db BubbleBobbleGroupAUnitLevel6Damage 1753 db 000 1754 db "Boo",255,"        "1756Monster072Table: 1757 dw Monster072Idle1758 dw Monster072Move1759 dw GeneralMonsterAttackPatternRight1760 dw GeneralMonsterAttackPatternLeft1761 dw GeneralMonsterAttackPatternLeftUp1762 dw GeneralMonsterAttackPatternLeftDown1763 dw GeneralMonsterAttackPatternRightUp1764 dw GeneralMonsterAttackPatternRightDown1765 db BattleMonsterSpriteSheet6Block1766 db 32 1767 db 32+08 1768 db KingKongUnitLevel6CostGold 1769 db KingKongUnitLevel6CostGems 1770 db KingKongUnitLevel6CostRubies 1771 db KingKongUnitLevel6HP 1772 db KingKongUnitLevel6Speed 1773 db KingKongUnitLevel6Attack 1774 db KingKongUnitLevel6Defense 1775 db KingKongUnitLevel6Growth 1776 db KingKongUnitLevel6Damage 1777 db 000 1778 db "King Kong",255,"  "1780Monster073Table: 1781 dw Monster073Idle1782 dw Monster073Move1783 dw GeneralMonsterAttackPatternRight1784 dw GeneralMonsterAttackPatternLeft1785 dw GeneralMonsterAttackPatternLeftUp1786 dw GeneralMonsterAttackPatternLeftDown1787 dw GeneralMonsterAttackPatternRightUp1788 dw GeneralMonsterAttackPatternRightDown1789 db BattleMonsterSpriteSheet6Block1790 db 32 1791 db 32+08 1792 db KingKongUnitLevel5CostGold 1793 db KingKongUnitLevel5CostGems 1794 db KingKongUnitLevel5CostRubies 1795 db KingKongUnitLevel5HP 1796 db KingKongUnitLevel5Speed 1797 db KingKongUnitLevel5Attack 1798 db KingKongUnitLevel5Defense 1799 db KingKongUnitLevel5Growth 1800 db KingKongUnitLevel5Damage 1801 db 000 1802 db "RockGoliath",2551804Monster074Table: 1805 dw Monster074Idle1806 dw Monster074Move1807 dw GeneralMonsterAttackPatternRight1808 dw GeneralMonsterAttackPatternLeft1809 dw GeneralMonsterAttackPatternLeftUp1810 dw GeneralMonsterAttackPatternLeftDown1811 dw GeneralMonsterAttackPatternRightUp1812 dw GeneralMonsterAttackPatternRightDown1813 db BattleMonsterSpriteSheet6Block1814 db 16 1815 db 16+08 1816 db KingKongUnitLevel4CostGold 1817 db KingKongUnitLevel4CostGems 1818 db KingKongUnitLevel4CostRubies 1819 db KingKongUnitLevel4HP 1820 db KingKongUnitLevel4Speed 1821 db KingKongUnitLevel4Attack 1822 db KingKongUnitLevel4Defense 1823 db KingKongUnitLevel4Growth 1824 db KingKongUnitLevel4Damage 1825 db 000 1826 db "Stone Guard",2551827 1828Monster075Table: 1829 dw Monster075Idle1830 dw Monster075Move1831 dw GeneralMonsterAttackPatternRight1832 dw GeneralMonsterAttackPatternLeft1833 dw GeneralMonsterAttackPatternLeftUp1834 dw GeneralMonsterAttackPatternLeftDown1835 dw GeneralMonsterAttackPatternRightUp1836 dw GeneralMonsterAttackPatternRightDown1837 db BattleMonsterSpriteSheet6Block1838 db 16 1839 db 16+08 1840 db KingKongUnitLevel2CostGold 1841 db KingKongUnitLevel2CostGems 1842 db KingKongUnitLevel2CostRubies 1843 db KingKongUnitLevel2HP 1844 db KingKongUnitLevel2Speed 1845 db KingKongUnitLevel2Attack 1846 db KingKongUnitLevel2Defense 1847 db KingKongUnitLevel2Growth 1848 db KingKongUnitLevel2Damage 1849 db 000 1850 db "LimeCritter",2551851 1852Monster076Table: 1853 dw Monster076Idle1854 dw Monster076Move1855 dw GeneralMonsterAttackPatternRight1856 dw GeneralMonsterAttackPatternLeft1857 dw GeneralMonsterAttackPatternLeftUp1858 dw GeneralMonsterAttackPatternLeftDown1859 dw GeneralMonsterAttackPatternRightUp1860 dw GeneralMonsterAttackPatternRightDown1861 db BattleMonsterSpriteSheet6Block1862 db 16 1863 db 16+08 1864 db KingKongUnitLevel3CostGold 1865 db KingKongUnitLevel3CostGems 1866 db KingKongUnitLevel3CostRubies 1867 db KingKongUnitLevel3HP 1868 db KingKongUnitLevel3Speed 1869 db KingKongUnitLevel3Attack 1870 db KingKongUnitLevel3Defense 1871 db KingKongUnitLevel3Growth 1872 db KingKongUnitLevel3Damage 1873 db 000 1874 db "Salmon Hog",255," "1876Monster077Table: 1877 dw Monster077Idle1878 dw Monster077Move1879 dw GeneralMonsterAttackPatternRight1880 dw GeneralMonsterAttackPatternLeft1881 dw GeneralMonsterAttackPatternLeftUp1882 dw GeneralMonsterAttackPatternLeftDown1883 dw GeneralMonsterAttackPatternRightUp1884 dw GeneralMonsterAttackPatternRightDown1885 db BattleMonsterSpriteSheet3Block1886 db 16 1887 db 16+08 1888 db KingKongUnitLevel1CostGold 1889 db KingKongUnitLevel1CostGems 1890 db KingKongUnitLevel1CostRubies 1891 db KingKongUnitLevel1HP 1892 db KingKongUnitLevel1Speed 1893 db KingKongUnitLevel1Attack 1894 db KingKongUnitLevel1Defense 1895 db KingKongUnitLevel1Growth 1896 db KingKongUnitLevel1Damage 1897 db 000 1898 db "Swamp Goop",255," "1908Monster078Table: 1909 dw Monster078Idle1910 dw Monster078Move1911 dw GeneralMonsterAttackPatternRight1912 dw GeneralMonsterAttackPatternLeft1913 dw GeneralMonsterAttackPatternLeftUp1914 dw GeneralMonsterAttackPatternLeftDown1915 dw GeneralMonsterAttackPatternRightUp1916 dw GeneralMonsterAttackPatternRightDown1917 db BattleMonsterSpriteSheet5Block1918 db 16 1919 db 16+08 1920 db GolvelliusUnitLevel3CostGold 1921 db GolvelliusUnitLevel3CostGems 1922 db GolvelliusUnitLevel3CostRubies 1923 db GolvelliusUnitLevel3HP 1924 db GolvelliusUnitLevel3Speed 1925 db GolvelliusUnitLevel3Attack 1926 db GolvelliusUnitLevel3Defense 1927 db GolvelliusUnitLevel3Growth 1928 db GolvelliusUnitLevel3Damage 1929 db 000 1930 db "Bat",255,"        "1932Monster079Table: 1933 dw Monster079Idle1934 dw Monster079Move1935 dw GeneralMonsterAttackPatternRight1936 dw GeneralMonsterAttackPatternLeft1937 dw GeneralMonsterAttackPatternLeftUp1938 dw GeneralMonsterAttackPatternLeftDown1939 dw GeneralMonsterAttackPatternRightUp1940 dw GeneralMonsterAttackPatternRightDown1941 db BattleMonsterSpriteSheet6Block1942 db 16 1943 db 16+08 1944 db GolvelliusUnitLevel2CostGold 1945 db GolvelliusUnitLevel2CostGems 1946 db GolvelliusUnitLevel2CostRubies 1947 db GolvelliusUnitLevel2HP 1948 db GolvelliusUnitLevel2Speed 1949 db GolvelliusUnitLevel2Attack 1950 db GolvelliusUnitLevel2Defense 1951 db GolvelliusUnitLevel2Growth 1952 db GolvelliusUnitLevel2Damage 1953 db 000 1954 db "Olive Boa",255,"  "1956Monster080Table: 1957 dw Monster080Idle1958 dw Monster080Move1959 dw GeneralMonsterAttackPatternRight1960 dw GeneralMonsterAttackPatternLeft1961 dw GeneralMonsterAttackPatternLeftUp1962 dw GeneralMonsterAttackPatternLeftDown1963 dw GeneralMonsterAttackPatternRightUp1964 dw GeneralMonsterAttackPatternRightDown1965 db BattleMonsterSpriteSheet5Block1966 db 16 1967 db 08+08 1968 db GolvelliusUnitLevel1CostGold 1969 db GolvelliusUnitLevel1CostGems 1970 db GolvelliusUnitLevel1CostRubies 1971 db GolvelliusUnitLevel1HP 1972 db GolvelliusUnitLevel1Speed 1973 db GolvelliusUnitLevel1Attack 1974 db GolvelliusUnitLevel1Defense 1975 db GolvelliusUnitLevel1Growth 1976 db GolvelliusUnitLevel1Damage 1977 db 000 1978 db "SilkenLarva",2551980Monster081Table: 1981 dw Monster081Idle1982 dw Monster081Move1983 dw GeneralMonsterAttackPatternRight1984 dw GeneralMonsterAttackPatternLeft1985 dw GeneralMonsterAttackPatternLeftUp1986 dw GeneralMonsterAttackPatternLeftDown1987 dw GeneralMonsterAttackPatternRightUp1988 dw GeneralMonsterAttackPatternRightDown1989 db BattleMonsterSpriteSheet6Block1990 db 16 1991 db 16+08 1992 db GolvelliusUnitLevel2CostGold 1993 db GolvelliusUnitLevel2CostGems 1994 db GolvelliusUnitLevel2CostRubies 1995 db GolvelliusUnitLevel2HP 1996 db GolvelliusUnitLevel2Speed 1997 db GolvelliusUnitLevel2Attack 1998 db GolvelliusUnitLevel2Defense 1999 db GolvelliusUnitLevel2Growth 2000 db GolvelliusUnitLevel2Damage 2001 db 000 2002 db "ChocoTusker",2552004Monster082Table: 2005 dw Monster082Idle2006 dw Monster082Move2007 dw GeneralMonsterAttackPatternRight2008 dw GeneralMonsterAttackPatternLeft2009 dw GeneralMonsterAttackPatternLeftUp2010 dw GeneralMonsterAttackPatternLeftDown2011 dw GeneralMonsterAttackPatternRightUp2012 dw GeneralMonsterAttackPatternRightDown2013 db BattleMonsterSpriteSheet5Block2014 db 16 2015 db 08+08 2016 db GolvelliusUnitLevel1CostGold 2017 db GolvelliusUnitLevel1CostGems 2018 db GolvelliusUnitLevel1CostRubies 2019 db GolvelliusUnitLevel1HP 2020 db GolvelliusUnitLevel1Speed 2021 db GolvelliusUnitLevel1Attack 2022 db GolvelliusUnitLevel1Defense 2023 db GolvelliusUnitLevel1Growth 2024 db GolvelliusUnitLevel1Damage 2025 db 000 2026 db "JadeWormlet",2552027 2028Monster083Table: 2029 dw Monster083Idle2030 dw Monster083Move2031 dw GeneralMonsterAttackPatternRight2032 dw GeneralMonsterAttackPatternLeft2033 dw GeneralMonsterAttackPatternLeftUp2034 dw GeneralMonsterAttackPatternLeftDown2035 dw GeneralMonsterAttackPatternRightUp2036 dw GeneralMonsterAttackPatternRightDown2037 db BattleMonsterSpriteSheet6Block2038 db 16 2039 db 16+08 2040 db GolvelliusUnitLevel3CostGold 2041 db GolvelliusUnitLevel3CostGems 2042 db GolvelliusUnitLevel3CostRubies 2043 db GolvelliusUnitLevel3HP 2044 db GolvelliusUnitLevel3Speed 2045 db GolvelliusUnitLevel3Attack 2046 db GolvelliusUnitLevel3Defense 2047 db GolvelliusUnitLevel3Growth 2048 db GolvelliusUnitLevel3Damage 2049 db 000 2050 db "Sable Raven",2552051 2052Monster084Table: 2053 dw Monster084Idle2054 dw Monster084Move2055 dw GeneralMonsterAttackPatternRight2056 dw GeneralMonsterAttackPatternLeft2057 dw GeneralMonsterAttackPatternLeftUp2058 dw GeneralMonsterAttackPatternLeftDown2059 dw GeneralMonsterAttackPatternRightUp2060 dw GeneralMonsterAttackPatternRightDown2061 db BattleMonsterSpriteSheet4Block2062 db 16 2063 db 24+08 2064 db GolvelliusUnitLevel4CostGold 2065 db GolvelliusUnitLevel4CostGems 2066 db GolvelliusUnitLevel4CostRubies 2067 db GolvelliusUnitLevel4HP 2068 db GolvelliusUnitLevel4Speed 2069 db GolvelliusUnitLevel4Attack 2070 db GolvelliusUnitLevel4Defense 2071 db GolvelliusUnitLevel4Growth 2072 db GolvelliusUnitLevel4Damage 2073 db 000 2074 db "Headless",255,"   "2076Monster085Table: 2077 dw Monster085Idle2078 dw Monster085Move2079 dw GeneralMonsterAttackPatternRight2080 dw GeneralMonsterAttackPatternLeft2081 dw GeneralMonsterAttackPatternLeftUp2082 dw GeneralMonsterAttackPatternLeftDown2083 dw GeneralMonsterAttackPatternRightUp2084 dw GeneralMonsterAttackPatternRightDown2085 db BattleMonsterSpriteSheet4Block2086 db 16 2087 db 32+08 2088 db GolvelliusUnitLevel5CostGold 2089 db GolvelliusUnitLevel5CostGems 2090 db GolvelliusUnitLevel5CostRubies 2091 db GolvelliusUnitLevel5HP 2092 db GolvelliusUnitLevel5Speed 2093 db GolvelliusUnitLevel5Attack 2094 db GolvelliusUnitLevel5Defense 2095 db GolvelliusUnitLevel5Growth 2096 db GolvelliusUnitLevel5Damage 2097 db 000 2098 db "Seraph",255,"     "2100Monster086Table: 2101 dw Monster086Idle2102 dw Monster086Move2103 dw GeneralMonsterAttackPatternRight2104 dw GeneralMonsterAttackPatternLeft2105 dw GeneralMonsterAttackPatternLeftUp2106 dw GeneralMonsterAttackPatternLeftDown2107 dw GeneralMonsterAttackPatternRightUp2108 dw GeneralMonsterAttackPatternRightDown2109 db BattleMonsterSpriteSheet7Block2110 db 56 2111 db 64+04 2112 db GolvelliusUnitLevel6CostGold 2113 db GolvelliusUnitLevel6CostGems 2114 db GolvelliusUnitLevel6CostRubies 2115 db GolvelliusUnitLevel6HP 2116 db GolvelliusUnitLevel6Speed 2117 db GolvelliusUnitLevel6Attack 2118 db GolvelliusUnitLevel6Defense 2119 db GolvelliusUnitLevel6Growth 2120 db GolvelliusUnitLevel6Damage 2121 db 000 2122 db "Flame Cobra",2552123 2127Monster087Table: 2128 dw Monster087Idle2129 dw Monster087Move2130 dw GeneralMonsterAttackPatternRight2131 dw GeneralMonsterAttackPatternLeft2132 dw GeneralMonsterAttackPatternLeftUp2133 dw GeneralMonsterAttackPatternLeftDown2134 dw GeneralMonsterAttackPatternRightUp2135 dw GeneralMonsterAttackPatternRightDown2136 db BattleMonsterSpriteSheet6Block2137 db 16 2138 db 32+08 2139 db RandomAUnitLevel4CostGold 2140 db RandomAUnitLevel4CostGems 2141 db RandomAUnitLevel4CostRubies 2142 db RandomAUnitLevel4HP 2143 db RandomAUnitLevel4Speed 2144 db RandomAUnitLevel4Attack 2145 db RandomAUnitLevel4Defense 2146 db RandomAUnitLevel4Growth 2147 db RandomAUnitLevel4Damage 2148 db 000 2149 db "Visage",255,"     "2150 2151Monster088Table: 2152 dw Monster088Idle2153 dw Monster088Move2154 dw GeneralMonsterAttackPatternRight2155 dw GeneralMonsterAttackPatternLeft2156 dw GeneralMonsterAttackPatternLeftUp2157 dw GeneralMonsterAttackPatternLeftDown2158 dw GeneralMonsterAttackPatternRightUp2159 dw GeneralMonsterAttackPatternRightDown2160 db BattleMonsterSpriteSheet6Block2161 db 16 2162 db 32+08 2163 db RandomAUnitLevel2CostGold 2164 db RandomAUnitLevel2CostGems 2165 db RandomAUnitLevel2CostRubies 2166 db RandomAUnitLevel2HP 2167 db RandomAUnitLevel2Speed 2168 db RandomAUnitLevel2Attack 2169 db RandomAUnitLevel2Defense 2170 db RandomAUnitLevel2Growth 2171 db RandomAUnitLevel2Damage 2172 db 000 2173 db "JungleBrute",2552174 2175Monster089Table: 2176 dw Monster089Idle2177 dw Monster089Move2178 dw GeneralMonsterAttackPatternRight2179 dw GeneralMonsterAttackPatternLeft2180 dw GeneralMonsterAttackPatternLeftUp2181 dw GeneralMonsterAttackPatternLeftDown2182 dw GeneralMonsterAttackPatternRightUp2183 dw GeneralMonsterAttackPatternRightDown2184 db BattleMonsterSpriteSheet6Block2185 db 16 2186 db 32+08 2187 db CastleVaniaUnitLevel1CostGold 2188 db CastleVaniaUnitLevel1CostGems 2189 db CastleVaniaUnitLevel1CostRubies 2190 db CastleVaniaUnitLevel1HP 2191 db CastleVaniaUnitLevel1Speed 2192 db CastleVaniaUnitLevel1Attack 2193 db CastleVaniaUnitLevel1Defense 2194 db CastleVaniaUnitLevel1Growth 2195 db CastleVaniaUnitLevel1Damage 2196 db 000 2197 db "Lurcher",255,"    "2201Monster090Table: 2202 dw Monster090Idle2203 dw Monster090Move2204 dw GeneralMonsterAttackPatternRight2205 dw GeneralMonsterAttackPatternLeft2206 dw GeneralMonsterAttackPatternLeftUp2207 dw GeneralMonsterAttackPatternLeftDown2208 dw GeneralMonsterAttackPatternRightUp2209 dw GeneralMonsterAttackPatternRightDown2210 db BattleMonsterSpriteSheet5Block2211 db 16 2212 db 08+08 2213 db SolidSnakeUnitLevel1CostGold 2214 db SolidSnakeUnitLevel1CostGems 2215 db SolidSnakeUnitLevel1CostRubies 2216 db SolidSnakeUnitLevel1HP 2217 db SolidSnakeUnitLevel1Speed 2218 db SolidSnakeUnitLevel1Attack 2219 db SolidSnakeUnitLevel1Defense 2220 db SolidSnakeUnitLevel1Growth 2221 db SolidSnakeUnitLevel1Damage 2222 db 000 2223 db "Scavenger",255,"  "2225Monster091Table: 2226 dw Monster091Idle2227 dw Monster091Move2228 dw GeneralMonsterAttackPatternRight2229 dw GeneralMonsterAttackPatternLeft2230 dw GeneralMonsterAttackPatternLeftUp2231 dw GeneralMonsterAttackPatternLeftDown2232 dw GeneralMonsterAttackPatternRightUp2233 dw GeneralMonsterAttackPatternRightDown2234 db BattleMonsterSpriteSheet6Block2235 db 16 2236 db 32+08 2237 db SolidSnakeUnitLevel2CostGold 2238 db SolidSnakeUnitLevel2CostGems 2239 db SolidSnakeUnitLevel2CostRubies 2240 db SolidSnakeUnitLevel2HP 2241 db SolidSnakeUnitLevel2Speed 2242 db SolidSnakeUnitLevel2Attack 2243 db SolidSnakeUnitLevel2Defense 2244 db SolidSnakeUnitLevel2Growth 2245 db SolidSnakeUnitLevel2Damage 2246 db 000 2247 db "Running Man",2552248 2249Monster092Table: 2250 dw Monster092Idle2251 dw Monster092Move2252 dw Monster092AttackPatternRight2253 dw Monster092AttackPatternLeft2254 dw Monster092AttackPatternLeft2255 dw Monster092AttackPatternLeft2256 dw Monster092AttackPatternRight2257 dw Monster092AttackPatternRight2258 db BattleMonsterSpriteSheet6Block2259 db 16 2260 db 32+08 2261 db SolidSnakeUnitLevel4CostGold 2262 db SolidSnakeUnitLevel4CostGems 2263 db SolidSnakeUnitLevel4CostRubies 2264 db SolidSnakeUnitLevel4HP 2265 db SolidSnakeUnitLevel4Speed 2266 db SolidSnakeUnitLevel4Attack 2267 db SolidSnakeUnitLevel4Defense 2268 db SolidSnakeUnitLevel4Growth 2269 db SolidSnakeUnitLevel4Damage 2270 db RangedMonster 2271 db "Trooper",255,"    "2273Monster093Table: 2274 dw Monster093Idle2275 dw Monster093Move2276 dw Monster093AttackPatternRight2277 dw Monster093AttackPatternLeft2278 dw Monster093AttackPatternLeft2279 dw Monster093AttackPatternLeft2280 dw Monster093AttackPatternRight2281 dw Monster093AttackPatternRight2282 db BattleMonsterSpriteSheet6Block2283 db 16 2284 db 32+08 2285 db SolidSnakeUnitLevel5CostGold 2286 db SolidSnakeUnitLevel5CostGems 2287 db SolidSnakeUnitLevel5CostRubies 2288 db SolidSnakeUnitLevel5HP 2289 db SolidSnakeUnitLevel5Speed 2290 db SolidSnakeUnitLevel5Attack 2291 db SolidSnakeUnitLevel5Defense 2292 db SolidSnakeUnitLevel5Growth 2293 db SolidSnakeUnitLevel5Damage 2294 db RangedMonster 2295 db "Antigas Man",2552296 2297Monster094Table: 2298 dw Monster094Idle2299 dw Monster094Move2300 dw Monster094AttackPatternRight2301 dw Monster094AttackPatternLeft2302 dw Monster094AttackPatternLeft2303 dw Monster094AttackPatternLeft2304 dw Monster094AttackPatternRight2305 dw Monster094AttackPatternRight2306 db BattleMonsterSpriteSheet6Block2307 db 16 2308 db 32+08 2309 db SolidSnakeUnitLevel3CostGold 2310 db SolidSnakeUnitLevel3CostGems 2311 db SolidSnakeUnitLevel3CostRubies 2312 db SolidSnakeUnitLevel3HP 2313 db SolidSnakeUnitLevel3Speed 2314 db SolidSnakeUnitLevel3Attack 2315 db SolidSnakeUnitLevel3Defense 2316 db SolidSnakeUnitLevel3Growth 2317 db SolidSnakeUnitLevel3Damage 2318 db RangedMonster 2319 db "Footman",255,"    "2327Monster095Table: 2328 dw Monster095Idle2329 dw Monster095Move2330 dw Monster095AttackPatternRight2331 dw Monster095AttackPatternLeft2332 dw Monster095AttackPatternLeftUp2333 dw Monster095AttackPatternLeftDown2334 dw Monster095AttackPatternRightUp2335 dw Monster095AttackPatternRightDown2336 db BattleMonsterSpriteSheet8Block2337 db 16 2338 db 24+08 2339 db Ys3UnitLevel5CostGold 2340 db Ys3UnitLevel5CostGems 2341 db Ys3UnitLevel5CostRubies 2342 db Ys3UnitLevel5HP 2343 db Ys3UnitLevel5Speed 2344 db Ys3UnitLevel5Attack 2345 db Ys3UnitLevel5Defense 2346 db Ys3UnitLevel5Growth 2347 db Ys3UnitLevel5Damage 2348 db 000 2349 db "Geld",255,"       "2351Monster096Table: 2352 dw Monster096Idle2353 dw Monster096Move2354 dw Monster096AttackPatternRight2355 dw Monster096AttackPatternLeft2356 dw Monster096AttackPatternLeftUp2357 dw Monster096AttackPatternLeftDown2358 dw Monster096AttackPatternRightUp2359 dw Monster096AttackPatternRightDown2360 db BattleMonsterSpriteSheet8Block2361 db 32 2362 db 24+08 2363 db Ys3UnitLevel4CostGold 2364 db Ys3UnitLevel4CostGems 2365 db Ys3UnitLevel4CostRubies 2366 db Ys3UnitLevel4HP 2367 db Ys3UnitLevel4Speed 2368 db Ys3UnitLevel4Attack 2369 db Ys3UnitLevel4Defense 2370 db Ys3UnitLevel4Growth 2371 db Ys3UnitLevel4Damage 2372 db 000 2373 db "Raddel",255,"     "2374 2375Monster097Table: 2376 dw Monster097Idle2377 dw Monster097Move2378 dw GeneralMonsterAttackPatternRight2379 dw GeneralMonsterAttackPatternLeft2380 dw GeneralMonsterAttackPatternLeftUp2381 dw GeneralMonsterAttackPatternLeftDown2382 dw GeneralMonsterAttackPatternRightUp2383 dw GeneralMonsterAttackPatternRightDown2384 db BattleMonsterSpriteSheet8Block2385 db 16 2386 db 24+08 2387 db Ys3UnitLevel3CostGold 2388 db Ys3UnitLevel3CostGems 2389 db Ys3UnitLevel3CostRubies 2390 db Ys3UnitLevel3HP 2391 db Ys3UnitLevel3Speed 2392 db Ys3UnitLevel3Attack 2393 db Ys3UnitLevel3Defense 2394 db Ys3UnitLevel3Growth 2395 db Ys3UnitLevel3Damage 2396 db 000 2397 db "Bikmorl",255,"    "2398 2399Monster098Table: 2400 dw Monster098Idle2401 dw Monster098Move2402 dw GeneralMonsterAttackPatternRight2403 dw GeneralMonsterAttackPatternLeft2404 dw GeneralMonsterAttackPatternLeftUp2405 dw GeneralMonsterAttackPatternLeftDown2406 dw GeneralMonsterAttackPatternRightUp2407 dw GeneralMonsterAttackPatternRightDown2408 db BattleMonsterSpriteSheet8Block2409 db 16 2410 db 08+08 2411 db Ys3UnitLevel1CostGold 2412 db Ys3UnitLevel1CostGems 2413 db Ys3UnitLevel1CostRubies 2414 db Ys3UnitLevel1HP 2415 db Ys3UnitLevel1Speed 2416 db Ys3UnitLevel1Attack 2417 db Ys3UnitLevel1Defense 2418 db Ys3UnitLevel1Growth 2419 db Ys3UnitLevel1Damage 2420 db 000 2421 db "Slime",255,"      "2422 2423Monster099Table: 2424 dw Monster099Idle2425 dw Monster099Move2426 dw GeneralMonsterAttackPatternRight2427 dw GeneralMonsterAttackPatternLeft2428 dw GeneralMonsterAttackPatternLeftUp2429 dw GeneralMonsterAttackPatternLeftDown2430 dw GeneralMonsterAttackPatternRightUp2431 dw GeneralMonsterAttackPatternRightDown2432 db BattleMonsterSpriteSheet8Block2433 db 16 2434 db 24+08 2435 db Ys3UnitLevel2CostGold 2436 db Ys3UnitLevel2CostGems 2437 db Ys3UnitLevel2CostRubies 2438 db Ys3UnitLevel2HP 2439 db Ys3UnitLevel2Speed 2440 db Ys3UnitLevel2Attack 2441 db Ys3UnitLevel2Defense 2442 db Ys3UnitLevel2Growth 2443 db Ys3UnitLevel2Damage 2444 db 000 2445 db "Keyron",255,"     "2446 2447Monster100Table: 2448 dw Monster100Idle2449 dw Monster100Move2450 dw GeneralMonsterAttackPatternRight2451 dw GeneralMonsterAttackPatternLeft2452 dw GeneralMonsterAttackPatternLeftUp2453 dw GeneralMonsterAttackPatternLeftDown2454 dw GeneralMonsterAttackPatternRightUp2455 dw GeneralMonsterAttackPatternRightDown2456 db BattleMonsterSpriteSheet5Block2457 db 16 2458 db 08+08 2459 db Ys3UnitLevel1CostGold 2460 db Ys3UnitLevel1CostGems 2461 db Ys3UnitLevel1CostRubies 2462 db Ys3UnitLevel1HP 2463 db Ys3UnitLevel1Speed 2464 db Ys3UnitLevel1Attack 2465 db Ys3UnitLevel1Defense 2466 db Ys3UnitLevel1Growth 2467 db Ys3UnitLevel1Damage 2468 db 000 2469 db "Gululmus",255,"   "2470 2471Monster101Table: 2472 dw Monster101Idle2473 dw Monster101Move2474 dw Monster101AttackPatternRight2475 dw Monster101AttackPatternLeft2476 dw Monster101AttackPatternLeftUp2477 dw Monster101AttackPatternLeftDown2478 dw Monster101AttackPatternRightUp2479 dw Monster101AttackPatternRightDown2480 db BattleMonsterSpriteSheet8Block2481 db 48 2482 db 24+08 2483 db Ys3UnitLevel6CostGold 2484 db Ys3UnitLevel6CostGems 2485 db Ys3UnitLevel6CostRubies 2486 db Ys3UnitLevel6HP 2487 db Ys3UnitLevel6Speed 2488 db Ys3UnitLevel6Attack 2489 db Ys3UnitLevel6Defense 2490 db Ys3UnitLevel6Growth 2491 db Ys3UnitLevel6Damage 2492 db 000 2493 db "Sabre Wolf",255," "2494 2500Monster102Table: 2501 dw Monster102Idle2502 dw Monster102Move2503 dw Monster102AttackPatternRight2504 dw Monster102AttackPatternLeft2505 dw Monster102AttackPatternLeftUp2506 dw Monster102AttackPatternLeftDown2507 dw Monster102AttackPatternRightUp2508 dw Monster102AttackPatternRightDown2509 db BattleMonsterSpriteSheet9Block2510 db 32 2511 db 32+08 2512 db YieArKungFuUnitLevel1CostGold 2513 db YieArKungFuUnitLevel1CostGems 2514 db YieArKungFuUnitLevel1CostRubies 2515 db YieArKungFuUnitLevel1HP 2516 db YieArKungFuUnitLevel1Speed 2517 db YieArKungFuUnitLevel1Attack 2518 db YieArKungFuUnitLevel1Defense 2519 db YieArKungFuUnitLevel1Growth 2520 db YieArKungFuUnitLevel1Damage 2521 db 000 2522 db "Lee Young",255,"  "2523 2524Monster103Table: 2525 dw Monster103Idle2526 dw Monster103Move2527 dw Monster103AttackPatternRight2528 dw Monster103AttackPatternLeft2529 dw Monster103AttackPatternLeftUp2530 dw Monster103AttackPatternLeftDown2531 dw Monster103AttackPatternRightUp2532 dw Monster103AttackPatternRightDown2533 db BattleMonsterSpriteSheet9Block2534 db 48 2535 db 40+08 2536 db YieArKungFuUnitLevel2CostGold 2537 db YieArKungFuUnitLevel2CostGems 2538 db YieArKungFuUnitLevel2CostRubies 2539 db YieArKungFuUnitLevel2HP 2540 db YieArKungFuUnitLevel2Speed 2541 db YieArKungFuUnitLevel2Attack 2542 db YieArKungFuUnitLevel2Defense 2543 db YieArKungFuUnitLevel2Growth 2544 db YieArKungFuUnitLevel2Damage 2545 db 000 2546 db "Yen Pei",255,"    "2547 2548Monster104Table: 2549 dw Monster104Idle2550 dw Monster104Move2551 dw Monster104AttackPatternRight2552 dw Monster104AttackPatternLeft2553 dw Monster104AttackPatternLeft2554 dw Monster104AttackPatternLeft2555 dw Monster104AttackPatternRight2556 dw Monster104AttackPatternRight2557 db BattleMonsterSpriteSheet9Block2558 db 32 2559 db 32+08 2560 db YieArKungFuUnitLevel3CostGold 2561 db YieArKungFuUnitLevel3CostGems 2562 db YieArKungFuUnitLevel3CostRubies 2563 db YieArKungFuUnitLevel3HP 2564 db YieArKungFuUnitLevel3Speed 2565 db YieArKungFuUnitLevel3Attack 2566 db YieArKungFuUnitLevel3Defense 2567 db YieArKungFuUnitLevel3Growth 2568 db YieArKungFuUnitLevel3Damage 2569 db RangedMonster 2570 db "Lan Fang",255,"   "2572Monster105Table: 2573 dw Monster105Idle2574 dw Monster105Move2575 dw Monster105AttackPatternRight2576 dw Monster105AttackPatternLeft2577 dw Monster105AttackPatternLeftUp2578 dw Monster105AttackPatternLeftDown2579 dw Monster105AttackPatternRightUp2580 dw Monster105AttackPatternRightDown2581 db BattleMonsterSpriteSheet9Block2582 db 48 2583 db 40+08 2584 db YieArKungFuUnitLevel4CostGold 2585 db YieArKungFuUnitLevel4CostGems 2586 db YieArKungFuUnitLevel4CostRubies 2587 db YieArKungFuUnitLevel4HP 2588 db YieArKungFuUnitLevel4Speed 2589 db YieArKungFuUnitLevel4Attack 2590 db YieArKungFuUnitLevel4Defense 2591 db YieArKungFuUnitLevel4Growth 2592 db YieArKungFuUnitLevel4Damage 2593 db 000 2594 db "Po Chin",255,"    "2596Monster106Table: 2597 dw Monster106Idle2598 dw Monster106Move2599 dw Monster106AttackPatternRight2600 dw Monster106AttackPatternLeft2601 dw Monster106AttackPatternLeftUp2602 dw Monster106AttackPatternLeftDown2603 dw Monster106AttackPatternRightUp2604 dw Monster106AttackPatternRightDown2605 db BattleMonsterSpriteSheet10Block2606 db 48 2607 db 32+08 2608 db YieArKungFuUnitLevel5CostGold 2609 db YieArKungFuUnitLevel5CostGems 2610 db YieArKungFuUnitLevel5CostRubies 2611 db YieArKungFuUnitLevel5HP 2612 db YieArKungFuUnitLevel5Speed 2613 db YieArKungFuUnitLevel5Attack 2614 db YieArKungFuUnitLevel5Defense 2615 db YieArKungFuUnitLevel5Growth 2616 db YieArKungFuUnitLevel5Damage 2617 db 000 2618 db "Wen Hu",255,"     "2620Monster107Table: 2621 dw Monster107Idle2622 dw Monster107Move2623 dw Monster107AttackPatternRight2624 dw Monster107AttackPatternLeft2625 dw Monster107AttackPatternLeftUp2626 dw Monster107AttackPatternLeftDown2627 dw Monster107AttackPatternRightUp2628 dw Monster107AttackPatternRightDown2629 db BattleMonsterSpriteSheet10Block2630 db 48 2631 db 32+08 2632 db YieArKungFuUnitLevel3CostGold 2633 db YieArKungFuUnitLevel3CostGems 2634 db YieArKungFuUnitLevel3CostRubies 2635 db YieArKungFuUnitLevel3HP 2636 db YieArKungFuUnitLevel3Speed 2637 db YieArKungFuUnitLevel3Attack 2638 db YieArKungFuUnitLevel3Defense 2639 db YieArKungFuUnitLevel3Growth 2640 db YieArKungFuUnitLevel3Damage 2641 db 000 2642 db "Wei Chin",255,"   "2644Monster108Table: 2645 dw Monster108Idle2646 dw Monster108Move2647 dw Monster108AttackPatternRight2648 dw Monster108AttackPatternLeft2649 dw Monster108AttackPatternLeftUp2650 dw Monster108AttackPatternLeftDown2651 dw Monster108AttackPatternRightUp2652 dw Monster108AttackPatternRightDown2653 db BattleMonsterSpriteSheet10Block2654 db 32 2655 db 32+08 2656 db YieArKungFuUnitLevel3CostGold 2657 db YieArKungFuUnitLevel3CostGems 2658 db YieArKungFuUnitLevel3CostRubies 2659 db YieArKungFuUnitLevel3HP 2660 db YieArKungFuUnitLevel3Speed 2661 db YieArKungFuUnitLevel3Attack 2662 db YieArKungFuUnitLevel3Defense 2663 db YieArKungFuUnitLevel3Growth 2664 db YieArKungFuUnitLevel3Damage 2665 db 000 2666 db "Mei Ling",255,"   "2668Monster109Table: 2669 dw Monster109Idle2670 dw Monster109Move2671 dw Monster109AttackPatternRight2672 dw Monster109AttackPatternLeft2673 dw Monster109AttackPatternLeft2674 dw Monster109AttackPatternLeft2675 dw Monster109AttackPatternRight2676 dw Monster109AttackPatternRight2677 db BattleMonsterSpriteSheet10Block2678 db 32 2679 db 32+08 2680 db YieArKungFuUnitLevel4CostGold 2681 db YieArKungFuUnitLevel4CostGems 2682 db YieArKungFuUnitLevel4CostRubies 2683 db YieArKungFuUnitLevel4HP 2684 db YieArKungFuUnitLevel4Speed 2685 db YieArKungFuUnitLevel4Attack 2686 db YieArKungFuUnitLevel4Defense 2687 db YieArKungFuUnitLevel4Growth 2688 db YieArKungFuUnitLevel4Damage 2689 db RangedMonster 2690 db "Han Chen",255,"   "2692Monster110Table: 2693 dw Monster110Idle2694 dw Monster110Move2695 dw Monster110AttackPatternRight2696 dw Monster110AttackPatternLeft2697 dw Monster110AttackPatternLeft2698 dw Monster110AttackPatternLeft2699 dw Monster110AttackPatternRight2700 dw Monster110AttackPatternRight2701 db BattleMonsterSpriteSheet10Block2702 db 32 2703 db 40+08 2704 db YieArKungFuUnitLevel6CostGold 2705 db YieArKungFuUnitLevel6CostGems 2706 db YieArKungFuUnitLevel6CostRubies 2707 db YieArKungFuUnitLevel6HP 2708 db YieArKungFuUnitLevel6Speed 2709 db YieArKungFuUnitLevel6Attack 2710 db YieArKungFuUnitLevel6Defense 2711 db YieArKungFuUnitLevel6Growth 2712 db YieArKungFuUnitLevel6Damage 2713 db RangedMonster 2714 db "Li Yen",255,"     "2728Monster111Table: 2729 dw Monster111Idle2730 dw Monster111Move2731 dw GeneralMonsterAttackPatternRight2732 dw GeneralMonsterAttackPatternLeft2733 dw GeneralMonsterAttackPatternLeftUp2734 dw GeneralMonsterAttackPatternLeftDown2735 dw GeneralMonsterAttackPatternRightUp2736 dw GeneralMonsterAttackPatternRightDown2737 db BattleMonsterSpriteSheet8Block2738 db 32 2739 db 24+08 2740 db AkanbeDragonGroupAUnitLevel5CostGold 2741 db AkanbeDragonGroupAUnitLevel5CostGems 2742 db AkanbeDragonGroupAUnitLevel5CostRubies 2743 db AkanbeDragonGroupAUnitLevel5HP 2744 db AkanbeDragonGroupAUnitLevel5Speed 2745 db AkanbeDragonGroupAUnitLevel5Attack 2746 db AkanbeDragonGroupAUnitLevel5Defense 2747 db AkanbeDragonGroupAUnitLevel5Growth 2748 db AkanbeDragonGroupAUnitLevel5Damage 2749 db 000 2750 db "Queen Sora",255," "2752Monster112Table: 2753 dw Monster112Idle2754 dw Monster112Move2755 dw Monster112AttackPatternRight2756 dw Monster112AttackPatternLeft2757 dw Monster112AttackPatternLeft2758 dw Monster112AttackPatternLeft2759 dw Monster112AttackPatternRight2760 dw Monster112AttackPatternRight2761 db BattleMonsterSpriteSheet8Block2762 db 32 2763 db 24+08 2764 db AkanbeDragonGroupAUnitLevel6CostGold 2765 db AkanbeDragonGroupAUnitLevel6CostGems 2766 db AkanbeDragonGroupAUnitLevel6CostRubies 2767 db AkanbeDragonGroupAUnitLevel6HP 2768 db AkanbeDragonGroupAUnitLevel6Speed 2769 db AkanbeDragonGroupAUnitLevel6Attack 2770 db AkanbeDragonGroupAUnitLevel6Defense 2771 db AkanbeDragonGroupAUnitLevel6Growth 2772 db AkanbeDragonGroupAUnitLevel6Damage 2773 db RangedMonster 2774 db "King Mori",255,"  "2776Monster113Table: 2777 dw Monster113Idle2778 dw Monster113Move2779 dw Monster113AttackPatternRight2780 dw Monster113AttackPatternLeft2781 dw Monster113AttackPatternLeft2782 dw Monster113AttackPatternLeft2783 dw Monster113AttackPatternRight2784 dw Monster113AttackPatternRight2785 db BattleMonsterSpriteSheet8Block2786 db 32 2787 db 24+08 2788 db AkanbeDragonGroupAUnitLevel2CostGold 2789 db AkanbeDragonGroupAUnitLevel2CostGems 2790 db AkanbeDragonGroupAUnitLevel2CostRubies 2791 db AkanbeDragonGroupAUnitLevel2HP 2792 db AkanbeDragonGroupAUnitLevel2Speed 2793 db AkanbeDragonGroupAUnitLevel2Attack 2794 db AkanbeDragonGroupAUnitLevel2Defense 2795 db AkanbeDragonGroupAUnitLevel2Growth 2796 db AkanbeDragonGroupAUnitLevel2Damage 2797 db RangedMonster 2798 db "Knight Yama",2552799 2800Monster114Table: 2801 dw Monster114Idle2802 dw Monster114Move2803 dw GeneralMonsterAttackPatternRight2804 dw GeneralMonsterAttackPatternLeft2805 dw GeneralMonsterAttackPatternLeftUp2806 dw GeneralMonsterAttackPatternLeftDown2807 dw GeneralMonsterAttackPatternRightUp2808 dw GeneralMonsterAttackPatternRightDown2809 db BattleMonsterSpriteSheet8Block2810 db 32 2811 db 32+08 2812 db AkanbeDragonGroupBUnitLevel2CostGold 2813 db AkanbeDragonGroupBUnitLevel2CostGems 2814 db AkanbeDragonGroupBUnitLevel2CostRubies 2815 db AkanbeDragonGroupBUnitLevel2HP 2816 db AkanbeDragonGroupBUnitLevel2Speed 2817 db AkanbeDragonGroupBUnitLevel2Attack 2818 db AkanbeDragonGroupBUnitLevel2Defense 2819 db AkanbeDragonGroupBUnitLevel2Growth 2820 db AkanbeDragonGroupBUnitLevel2Damage 2821 db 000 2822 db "Bishop Mori",2552824Monster115Table: 2825 dw Monster115Idle2826 dw Monster115Move2827 dw Monster115AttackPatternRight2828 dw Monster115AttackPatternLeft2829 dw Monster115AttackPatternLeft2830 dw Monster115AttackPatternLeft2831 dw Monster115AttackPatternRight2832 dw Monster115AttackPatternRight2833 db BattleMonsterSpriteSheet10Block2834 db 32 2835 db 24+08 2836 db AkanbeDragonGroupAUnitLevel3CostGold 2837 db AkanbeDragonGroupAUnitLevel3CostGems 2838 db AkanbeDragonGroupAUnitLevel3CostRubies 2839 db AkanbeDragonGroupAUnitLevel3HP 2840 db AkanbeDragonGroupAUnitLevel3Speed 2841 db AkanbeDragonGroupAUnitLevel3Attack 2842 db AkanbeDragonGroupAUnitLevel3Defense 2843 db AkanbeDragonGroupAUnitLevel3Growth 2844 db AkanbeDragonGroupAUnitLevel3Damage 2845 db RangedMonster 2846 db "B. Heichi",255,"  "2848Monster116Table: 2849 dw Monster116Idle2850 dw Monster116Move2851 dw Monster116AttackPatternRight2852 dw Monster116AttackPatternLeft2853 dw Monster116AttackPatternLeftUp2854 dw Monster116AttackPatternLeftDown2855 dw Monster116AttackPatternRightUp2856 dw Monster116AttackPatternRightDown2857 db BattleMonsterSpriteSheet10Block2858 db 32 2859 db 24+08 2860 db AkanbeDragonGroupBUnitLevel3CostGold 2861 db AkanbeDragonGroupBUnitLevel3CostGems 2862 db AkanbeDragonGroupBUnitLevel3CostRubies 2863 db AkanbeDragonGroupBUnitLevel3HP 2864 db AkanbeDragonGroupBUnitLevel3Speed 2865 db AkanbeDragonGroupBUnitLevel3Attack 2866 db AkanbeDragonGroupBUnitLevel3Defense 2867 db AkanbeDragonGroupBUnitLevel3Growth 2868 db AkanbeDragonGroupBUnitLevel3Damage 2869 db 000 2870 db "Roke Mizu",255,"  "2872Monster117Table: 2873 dw Monster117Idle2874 dw Monster117Move2875 dw Monster117AttackPatternRight2876 dw Monster117AttackPatternLeft2877 dw Monster117AttackPatternLeftUp2878 dw Monster117AttackPatternLeftDown2879 dw Monster117AttackPatternRightUp2880 dw Monster117AttackPatternRightDown2881 db BattleMonsterSpriteSheet11Block2882 db 32 2883 db 24+08 2884 db AkanbeDragonGroupAUnitLevel1CostGold 2885 db AkanbeDragonGroupAUnitLevel1CostGems 2886 db AkanbeDragonGroupAUnitLevel1CostRubies 2887 db AkanbeDragonGroupAUnitLevel1HP 2888 db AkanbeDragonGroupAUnitLevel1Speed 2889 db AkanbeDragonGroupAUnitLevel1Attack 2890 db AkanbeDragonGroupAUnitLevel1Defense 2891 db AkanbeDragonGroupAUnitLevel1Growth 2892 db AkanbeDragonGroupAUnitLevel1Damage 2893 db 000 2894 db "Porn Mizu",255,"  "2896Monster118Table: 2897 dw Monster118Idle2898 dw Monster118Move2899 dw Monster118AttackPatternRight2900 dw Monster118AttackPatternLeft2901 dw Monster118AttackPatternLeftUp2902 dw Monster118AttackPatternLeftDown2903 dw Monster118AttackPatternRightUp2904 dw Monster118AttackPatternRightDown2905 db BattleMonsterSpriteSheet11Block2906 db 32 2907 db 24+08 2908 db AkanbeDragonGroupAUnitLevel4CostGold 2909 db AkanbeDragonGroupAUnitLevel4CostGems 2910 db AkanbeDragonGroupAUnitLevel4CostRubies 2911 db AkanbeDragonGroupAUnitLevel4HP 2912 db AkanbeDragonGroupAUnitLevel4Speed 2913 db AkanbeDragonGroupAUnitLevel4Attack 2914 db AkanbeDragonGroupAUnitLevel4Defense 2915 db AkanbeDragonGroupAUnitLevel4Growth 2916 db AkanbeDragonGroupAUnitLevel4Damage 2917 db 000 2918 db "Roke Yama",255,"  "2920Monster119Table: 2921 dw Monster119Idle2922 dw Monster119Move2923 dw Monster119AttackPatternRight2924 dw Monster119AttackPatternLeft2925 dw Monster119AttackPatternLeft2926 dw Monster119AttackPatternLeft2927 dw Monster119AttackPatternRight2928 dw Monster119AttackPatternRight2929 db BattleMonsterSpriteSheet11Block2930 db 32 2931 db 24+08 2932 db AkanbeDragonGroupBUnitLevel1CostGold 2933 db AkanbeDragonGroupBUnitLevel1CostGems 2934 db AkanbeDragonGroupBUnitLevel1CostRubies 2935 db AkanbeDragonGroupBUnitLevel1HP 2936 db AkanbeDragonGroupBUnitLevel1Speed 2937 db AkanbeDragonGroupBUnitLevel1Attack 2938 db AkanbeDragonGroupBUnitLevel1Defense 2939 db AkanbeDragonGroupBUnitLevel1Growth 2940 db AkanbeDragonGroupBUnitLevel1Damage 2941 db RangedMonster 2942 db "Porn Heichi",2552943 2944Monster120Table: 2945 dw Monster120Idle2946 dw Monster120Move2947 dw Monster120AttackPatternRight2948 dw Monster120AttackPatternLeft2949 dw Monster120AttackPatternLeft2950 dw Monster120AttackPatternLeft2951 dw Monster120AttackPatternRight2952 dw Monster120AttackPatternRight2953 db BattleMonsterSpriteSheet11Block2954 db 32 2955 db 24+08 2956 db AkanbeDragonGroupBUnitLevel4CostGold 2957 db AkanbeDragonGroupBUnitLevel4CostGems 2958 db AkanbeDragonGroupBUnitLevel4CostRubies 2959 db AkanbeDragonGroupBUnitLevel4HP 2960 db AkanbeDragonGroupBUnitLevel4Speed 2961 db AkanbeDragonGroupBUnitLevel4Attack 2962 db AkanbeDragonGroupBUnitLevel4Defense 2963 db AkanbeDragonGroupBUnitLevel4Growth 2964 db AkanbeDragonGroupBUnitLevel4Damage 2965 db RangedMonster 2966 db "Yama Knight",2552968Monster121Table: 2969 dw Monster121Idle2970 dw Monster121Move2971 dw GeneralMonsterAttackPatternRight2972 dw GeneralMonsterAttackPatternLeft2973 dw GeneralMonsterAttackPatternLeftUp2974 dw GeneralMonsterAttackPatternLeftDown2975 dw GeneralMonsterAttackPatternRightUp2976 dw GeneralMonsterAttackPatternRightDown2977 db BattleMonsterSpriteSheet11Block2978 db 48 2979 db 56+08 2980 db AkanbeDragonGroupBUnitLevel6CostGold 2981 db AkanbeDragonGroupBUnitLevel6CostGems 2982 db AkanbeDragonGroupBUnitLevel6CostRubies 2983 db AkanbeDragonGroupBUnitLevel6HP 2984 db AkanbeDragonGroupBUnitLevel6Speed 2985 db AkanbeDragonGroupBUnitLevel6Attack 2986 db AkanbeDragonGroupBUnitLevel6Defense 2987 db AkanbeDragonGroupBUnitLevel6Growth 2988 db AkanbeDragonGroupBUnitLevel6Damage 2989 db 000 2990 db "King Heichi",2552992Monster122Table: 2993 dw Monster122Idle2994 dw Monster122Move2995 dw Monster122AttackPatternRight2996 dw Monster122AttackPatternLeft2997 dw Monster122AttackPatternLeftUp2998 dw Monster122AttackPatternLeftDown2999 dw Monster122AttackPatternRightUp3000 dw Monster122AttackPatternRightDown3001 db BattleMonsterSpriteSheet11Block3002 db 16 3003 db 24+08 3004 db RandomBUnitLevel3CostGold 3005 db RandomBUnitLevel3CostGems 3006 db RandomBUnitLevel3CostRubies 3007 db RandomBUnitLevel3HP 3008 db RandomBUnitLevel3Speed 3009 db RandomBUnitLevel3Attack 3010 db RandomBUnitLevel3Defense 3011 db RandomBUnitLevel3Growth 3012 db RandomBUnitLevel3Damage 3013 db 000 3014 db "Spooky",255,"     "3016Monster123Table: 3017 dw Monster123Idle3018 dw Monster123Move3019 dw GeneralMonsterAttackPatternRight3020 dw GeneralMonsterAttackPatternLeft3021 dw GeneralMonsterAttackPatternLeftUp3022 dw GeneralMonsterAttackPatternLeftDown3023 dw GeneralMonsterAttackPatternRightUp3024 dw GeneralMonsterAttackPatternRightDown3025 db BattleMonsterSpriteSheet11Block3026 db 16 3027 db 24+08 3028 db RandomBUnitLevel2CostGold 3029 db RandomBUnitLevel2CostGems 3030 db RandomBUnitLevel2CostRubies 3031 db RandomBUnitLevel2HP 3032 db RandomBUnitLevel2Speed 3033 db RandomBUnitLevel2Attack 3034 db RandomBUnitLevel2Defense 3035 db RandomBUnitLevel2Growth 3036 db RandomBUnitLevel2Damage 3037 db 000 3038 db "Ghosty",255,"     "3040Monster124Table: 3041 dw Monster124Idle3042 dw Monster124Move3043 dw GeneralMonsterAttackPatternRight3044 dw GeneralMonsterAttackPatternLeft3045 dw GeneralMonsterAttackPatternLeftUp3046 dw GeneralMonsterAttackPatternLeftDown3047 dw GeneralMonsterAttackPatternRightUp3048 dw GeneralMonsterAttackPatternRightDown3049 db BattleMonsterSpriteSheet7Block3050 db 16 3051 db 24+08 3052 db RandomAUnitLevel3CostGold 3053 db RandomAUnitLevel3CostGems 3054 db RandomAUnitLevel3CostRubies 3055 db RandomAUnitLevel3HP 3056 db RandomAUnitLevel3Speed 3057 db RandomAUnitLevel3Attack 3058 db RandomAUnitLevel3Defense 3059 db RandomAUnitLevel3Growth 3060 db RandomAUnitLevel3Damage 3061 db 000 3062 db "KuGyoku Den",2553063 3064Monster125Table: 3065 dw Monster125Idle3066 dw Monster125Move3067 dw Monster125AttackPatternRight3068 dw Monster125AttackPatternLeft3069 dw Monster125AttackPatternLeft3070 dw Monster125AttackPatternLeft3071 dw Monster125AttackPatternRight3072 dw Monster125AttackPatternRight3073 db BattleMonsterSpriteSheet7Block3074 db 16 3075 db 16+08 3076 db RandomBUnitLevel2CostGold 3077 db RandomBUnitLevel2CostGems 3078 db RandomBUnitLevel2CostRubies 3079 db RandomBUnitLevel2HP 3080 db RandomBUnitLevel2Speed 3081 db RandomBUnitLevel2Attack-2 3082 db RandomBUnitLevel2Defense-1 3083 db RandomBUnitLevel2Growth 3084 db RandomBUnitLevel2Damage 3085 db RangedMonster 3086 db "GooGoo",255,"     "3088Monster126Table: 3089 dw Monster126Idle3090 dw Monster126Move3091 dw GeneralMonsterAttackPatternRight3092 dw GeneralMonsterAttackPatternLeft3093 dw GeneralMonsterAttackPatternLeftUp3094 dw GeneralMonsterAttackPatternLeftDown3095 dw GeneralMonsterAttackPatternRightUp3096 dw GeneralMonsterAttackPatternRightDown3097 db BattleMonsterSpriteSheet11Block3098 db 16 3099 db 24+08 3100 db RandomBUnitLevel1CostGold 3101 db RandomBUnitLevel1CostGems 3102 db RandomBUnitLevel1CostRubies 3103 db RandomBUnitLevel1HP 3104 db RandomBUnitLevel1Speed 3105 db RandomBUnitLevel1Attack 3106 db RandomBUnitLevel1Defense 3107 db RandomBUnitLevel1Growth 3108 db RandomBUnitLevel1Damage 3109 db 000 3110 db "Sofia",255,"      "3112Monster127Table: 3113 dw Monster127Idle3114 dw Monster127Move3115 dw Monster127AttackPatternRight3116 dw Monster127AttackPatternLeft3117 dw Monster127AttackPatternLeftUp3118 dw Monster127AttackPatternLeftDown3119 dw Monster127AttackPatternRightUp3120 dw Monster127AttackPatternRightDown3121 db BattleMonsterSpriteSheet13Block3122 db 32 3123 db 40+08 3124 db RandomBUnitLevel4CostGold 3125 db RandomBUnitLevel4CostGems 3126 db RandomBUnitLevel4CostRubies 3127 db RandomBUnitLevel4HP 3128 db RandomBUnitLevel4Speed 3129 db RandomBUnitLevel4Attack 3130 db RandomBUnitLevel4Defense 3131 db RandomBUnitLevel4Growth 3132 db RandomBUnitLevel4Damage 3133 db 000 3134 db "Rastan",255,"     "3136Monster128Table: 3137 dw Monster128Idle3138 dw Monster128Move3139 dw Monster128AttackPatternRight3140 dw Monster128AttackPatternLeft3141 dw Monster128AttackPatternLeftUp3142 dw Monster128AttackPatternLeftDown3143 dw Monster128AttackPatternRightUp3144 dw Monster128AttackPatternRightDown3145 db BattleMonsterSpriteSheet13Block3146 db 16 3147 db 32+08 3148 db RandomAUnitLevel5CostGold 3149 db RandomAUnitLevel5CostGems 3150 db RandomAUnitLevel5CostRubies 3151 db RandomAUnitLevel5HP 3152 db RandomAUnitLevel5Speed 3153 db RandomAUnitLevel5Attack 3154 db RandomAUnitLevel5Defense 3155 db RandomAUnitLevel5Growth 3156 db RandomAUnitLevel5Damage 3157 db 000 3158 db "BlasterBot",255," "3160Monster129Table: 3161 dw Monster129Idle3162 dw Monster129Move3163 dw Monster129AttackPatternRight3164 dw Monster129AttackPatternLeft3165 dw Monster129AttackPatternLeft3166 dw Monster129AttackPatternLeft3167 dw Monster129AttackPatternRight3168 dw Monster129AttackPatternRight3169 db BattleMonsterSpriteSheet13Block3170 db 32 3171 db 32+08 3172 db RandomAUnitLevel2CostGold 3173 db RandomAUnitLevel2CostGems 3174 db RandomAUnitLevel2CostRubies 3175 db RandomAUnitLevel2HP 3176 db RandomAUnitLevel2Speed 3177 db RandomAUnitLevel2Attack-3 3178 db RandomAUnitLevel2Defense 3179 db RandomAUnitLevel2Growth 3180 db RandomAUnitLevel2Damage 3181 db RangedMonster 3182 db "Screech",255,"    "3184Monster130Table: 3185 dw Monster130Idle3186 dw Monster130Move3187 dw Monster130AttackPatternRight3188 dw Monster130AttackPatternLeft3189 dw Monster130AttackPatternLeftUp3190 dw Monster130AttackPatternLeftDown3191 dw Monster130AttackPatternRightUp3192 dw Monster130AttackPatternRightDown3193 db BattleMonsterSpriteSheet13Block3194 db 16 3195 db 32+08 3196 db RandomBUnitLevel2CostGold 3197 db RandomBUnitLevel2CostGems 3198 db RandomBUnitLevel2CostRubies 3199 db RandomBUnitLevel2HP 3200 db RandomBUnitLevel2Speed 3201 db RandomBUnitLevel2Attack 3202 db RandomBUnitLevel2Defense 3203 db RandomBUnitLevel2Growth 3204 db RandomBUnitLevel2Damage 3205 db 000 3206 db "Schaefer",255,"   "3208Monster131Table: 3209 dw Monster131Idle3210 dw Monster131Move3211 dw Monster131AttackPatternRight3212 dw Monster131AttackPatternLeft3213 dw Monster131AttackPatternLeftUp3214 dw Monster131AttackPatternLeftDown3215 dw Monster131AttackPatternRightUp3216 dw Monster131AttackPatternRightDown3217 db BattleMonsterSpriteSheet13Block3218 db 16 3219 db 32+08 3220 db RandomAUnitLevel3CostGold 3221 db RandomAUnitLevel3CostGems 3222 db RandomAUnitLevel3CostRubies 3223 db RandomAUnitLevel3HP 3224 db RandomAUnitLevel3Speed 3225 db RandomAUnitLevel3Attack 3226 db RandomAUnitLevel3Defense 3227 db RandomAUnitLevel3Growth 3228 db RandomAUnitLevel3Damage 3229 db 000 3230 db "Jon Sparkle",2553232Monster132Table: 3233 dw Monster132Idle3234 dw Monster132Move3235 dw Monster132AttackPatternRight3236 dw Monster132AttackPatternLeft3237 dw Monster132AttackPatternLeftUp3238 dw Monster132AttackPatternLeftDown3239 dw Monster132AttackPatternRightUp3240 dw Monster132AttackPatternRightDown3241 db BattleMonsterSpriteSheet13Block3242 db 16 3243 db 32+08 3244 db RandomBUnitLevel4CostGold 3245 db RandomBUnitLevel4CostGems 3246 db RandomBUnitLevel4CostRubies 3247 db RandomBUnitLevel4HP 3248 db RandomBUnitLevel4Speed 3249 db RandomBUnitLevel4Attack 3250 db RandomBUnitLevel4Defense 3251 db RandomBUnitLevel4Growth 3252 db RandomBUnitLevel4Damage 3253 db 000 3254 db "Monmon",255,"     "3255 3256Monster133Table: 3257 dw Monster133Idle3258 dw Monster133Move3259 dw Monster133AttackPatternRight3260 dw Monster133AttackPatternLeft3261 dw Monster133AttackPatternLeftUp3262 dw Monster133AttackPatternLeftDown3263 dw Monster133AttackPatternRightUp3264 dw Monster133AttackPatternRightDown3265 db BattleMonsterSpriteSheet13Block3266 db 16 3267 db 32+08 3268 db RandomBUnitLevel3CostGold 3269 db RandomBUnitLevel3CostGems 3270 db RandomBUnitLevel3CostRubies 3271 db RandomBUnitLevel3HP 3272 db RandomBUnitLevel3Speed 3273 db RandomBUnitLevel3Attack 3274 db RandomBUnitLevel3Defense 3275 db RandomBUnitLevel3Growth 3276 db RandomBUnitLevel3Damage 3277 db 000 3278 db "Cob Crusher",2553279 3280Monster134Table: 3281 dw Monster134Idle3282 dw Monster134Move3283 dw Monster134AttackPatternRight3284 dw Monster134AttackPatternLeft3285 dw Monster134AttackPatternLeftUp3286 dw Monster134AttackPatternLeftDown3287 dw Monster134AttackPatternRightUp3288 dw Monster134AttackPatternRightDown3289 db BattleMonsterSpriteSheet11Block3290 db 16 3291 db 24+08 3292 db RandomAUnitLevel2CostGold 3293 db RandomAUnitLevel2CostGems 3294 db RandomAUnitLevel2CostRubies 3295 db RandomAUnitLevel2HP 3296 db RandomAUnitLevel2Speed 3297 db RandomAUnitLevel2Attack 3298 db RandomAUnitLevel2Defense 3299 db RandomAUnitLevel2Growth 3300 db RandomAUnitLevel2Damage 3301 db 000 3302 db "Limb Linger",2553303 3304Monster135Table: 3305 dw Monster135Idle3306 dw Monster135Move3307 dw Monster135AttackPatternRight3308 dw Monster135AttackPatternLeft3309 dw Monster135AttackPatternLeftUp3310 dw Monster135AttackPatternLeftDown3311 dw Monster135AttackPatternRightUp3312 dw Monster135AttackPatternRightDown3313 db BattleMonsterSpriteSheet14Block3314 db 32 3315 db 40+08 3316 db DevaUnitLevel5CostGold 3317 db DevaUnitLevel5CostGems 3318 db DevaUnitLevel5CostRubies 3319 db DevaUnitLevel5HP 3320 db DevaUnitLevel5Speed 3321 db DevaUnitLevel5Attack 3322 db DevaUnitLevel5Defense 3323 db DevaUnitLevel5Growth 3324 db DevaUnitLevel5Damage 3325 db 000 3326 db "Deva",255,"       "3327 3328Monster136Table: 3329 dw Monster136Idle3330 dw Monster136Move3331 dw Monster136AttackPatternRight3332 dw Monster136AttackPatternLeft3333 dw Monster136AttackPatternLeftUp3334 dw Monster136AttackPatternLeftDown3335 dw Monster136AttackPatternRightUp3336 dw Monster136AttackPatternRightDown3337 db BattleMonsterSpriteSheet7Block3338 db 16 3339 db 40+08 3340 db DevaUnitLevel2CostGold 3341 db DevaUnitLevel2CostGems 3342 db DevaUnitLevel2CostRubies 3343 db DevaUnitLevel2HP 3344 db DevaUnitLevel2Speed 3345 db DevaUnitLevel2Attack 3346 db DevaUnitLevel2Defense 3347 db DevaUnitLevel2Growth 3348 db DevaUnitLevel2Damage 3349 db 000 3350 db "Spectroll",255,"  "3351 3352Monster137Table: 3353 dw Monster137Idle3354 dw Monster137Move3355 dw GeneralMonsterAttackPatternRight3356 dw GeneralMonsterAttackPatternLeft3357 dw GeneralMonsterAttackPatternLeftUp3358 dw GeneralMonsterAttackPatternLeftDown3359 dw GeneralMonsterAttackPatternRightUp3360 dw GeneralMonsterAttackPatternRightDown3361 db BattleMonsterSpriteSheet12Block3362 db 32 3363 db 48+08 3364 db DevaUnitLevel4CostGold 3365 db DevaUnitLevel4CostGems 3366 db DevaUnitLevel4CostRubies 3367 db DevaUnitLevel4HP 3368 db DevaUnitLevel4Speed 3369 db DevaUnitLevel4Attack 3370 db DevaUnitLevel4Defense 3371 db DevaUnitLevel4Growth 3372 db DevaUnitLevel4Damage 3373 db 000 3374 db "Yurei Kage",255," "3375 3376Monster138Table: 3377 dw Monster138Idle3378 dw Monster138Move3379 dw GeneralMonsterAttackPatternRight3380 dw GeneralMonsterAttackPatternLeft3381 dw GeneralMonsterAttackPatternLeftUp3382 dw GeneralMonsterAttackPatternLeftDown3383 dw GeneralMonsterAttackPatternRightUp3384 dw GeneralMonsterAttackPatternRightDown3385 db BattleMonsterSpriteSheet12Block3386 db 48 3387 db 40+08 3388 db Usas2UnitLevel5CostGold 3389 db Usas2UnitLevel5CostGems 3390 db Usas2UnitLevel5CostRubies 3391 db Usas2UnitLevel5HP 3392 db Usas2UnitLevel5Speed 3393 db Usas2UnitLevel5Attack 3394 db Usas2UnitLevel5Defense 3395 db Usas2UnitLevel5Growth 3396 db Usas2UnitLevel5Damage 3397 db 000 3398 db "Blob",255,"       "3400Monster139Table: 3401 dw Monster139Idle3402 dw Monster139Move3403 dw Monster139AttackPatternRight3404 dw Monster139AttackPatternLeft3405 dw Monster139AttackPatternLeftUp3406 dw Monster139AttackPatternLeftDown3407 dw Monster139AttackPatternRightUp3408 dw Monster139AttackPatternRightDown3409 db BattleMonsterSpriteSheet12Block3410 db 32 3411 db 32+08 3412 db Usas2UnitLevel4CostGold 3413 db Usas2UnitLevel4CostGems 3414 db Usas2UnitLevel4CostRubies 3415 db Usas2UnitLevel4HP 3416 db Usas2UnitLevel4Speed 3417 db Usas2UnitLevel4Attack 3418 db Usas2UnitLevel4Defense 3419 db Usas2UnitLevel4Growth 3420 db Usas2UnitLevel4Damage 3421 db 000 3422 db "Emir Mystic",2553423 3424Monster140Table: 3425 dw Monster140Idle3426 dw Monster140Move3427 dw Monster140AttackPatternRight3428 dw Monster140AttackPatternLeft3429 dw Monster140AttackPatternLeftUp3430 dw Monster140AttackPatternLeftDown3431 dw Monster140AttackPatternRightUp3432 dw Monster140AttackPatternRightDown3433 db BattleMonsterSpriteSheet14Block3434 db 32 3435 db 32+08 3436 db RandomAUnitLevel5CostGold 3437 db RandomAUnitLevel5CostGems 3438 db RandomAUnitLevel5CostRubies 3439 db RandomAUnitLevel5HP 3440 db RandomAUnitLevel5Speed 3441 db RandomAUnitLevel5Attack 3442 db RandomAUnitLevel5Defense 3443 db RandomAUnitLevel5Growth 3444 db RandomAUnitLevel5Damage 3445 db 000 3446 db "Duncan 7",255,"   "3448Monster141Table: 3449 dw Monster141Idle3450 dw Monster141Move3451 dw GeneralMonsterAttackPatternRight3452 dw GeneralMonsterAttackPatternLeft3453 dw GeneralMonsterAttackPatternLeftUp3454 dw GeneralMonsterAttackPatternLeftDown3455 dw GeneralMonsterAttackPatternRightUp3456 dw GeneralMonsterAttackPatternRightDown3457 db BattleMonsterSpriteSheet7Block3458 db 64 3459 db 64+04 3460 db RandomAUnitLevel6CostGold 3461 db RandomAUnitLevel6CostGems 3462 db RandomAUnitLevel6CostRubies 3463 db RandomAUnitLevel6HP 3464 db RandomAUnitLevel6Speed 3465 db RandomAUnitLevel6Attack 3466 db RandomAUnitLevel6Defense 3467 db RandomAUnitLevel6Growth 3468 db RandomAUnitLevel6Damage 3469 db 000 3470 db "Monstrilla",255," "3472Monster142Table: 3473 dw Monster142Idle3474 dw Monster142Move3475 dw GeneralMonsterAttackPatternRight3476 dw GeneralMonsterAttackPatternLeft3477 dw GeneralMonsterAttackPatternLeftUp3478 dw GeneralMonsterAttackPatternLeftDown3479 dw GeneralMonsterAttackPatternRightUp3480 dw GeneralMonsterAttackPatternRightDown3481 db BattleMonsterSpriteSheet7Block3482 db 32 3483 db 40+08 3484 db RandomAUnitLevel4CostGold 3485 db RandomAUnitLevel4CostGems 3486 db RandomAUnitLevel4CostRubies 3487 db RandomAUnitLevel4HP 3488 db RandomAUnitLevel4Speed 3489 db RandomAUnitLevel4Attack 3490 db RandomAUnitLevel4Defense 3491 db RandomAUnitLevel4Growth 3492 db RandomAUnitLevel4Damage 3493 db 000 3494 db "Biolumia",255,"   "3496Monster143Table: 3497 dw Monster143Idle3498 dw Monster143Move3499 dw Monster143AttackPatternRight3500 dw Monster143AttackPatternLeft3501 dw Monster143AttackPatternLeftUp3502 dw Monster143AttackPatternLeftDown3503 dw Monster143AttackPatternRightUp3504 dw Monster143AttackPatternRightDown3505 db BattleMonsterSpriteSheet14Block3506 db 16 3507 db 32+08 3508 db RandomAUnitLevel1CostGold 3509 db RandomAUnitLevel1CostGems 3510 db RandomAUnitLevel1CostRubies 3511 db RandomAUnitLevel1HP 3512 db RandomAUnitLevel1Speed 3513 db RandomAUnitLevel1Attack 3514 db RandomAUnitLevel1Defense 3515 db RandomAUnitLevel1Growth 3516 db RandomAUnitLevel1Damage 3517 db 000 3518 db "Anna Lee",255,"   "3520Monster144Table: 3521 dw Monster144Idle3522 dw Monster144Move3523 dw Monster144AttackPatternRight3524 dw Monster144AttackPatternLeft3525 dw Monster144AttackPatternLeft3526 dw Monster144AttackPatternLeft3527 dw Monster144AttackPatternRight3528 dw Monster144AttackPatternRight3529 db BattleMonsterSpriteSheet14Block3530 db 16 3531 db 32+08 3532 db RandomBUnitLevel2CostGold 3533 db RandomBUnitLevel2CostGems 3534 db RandomBUnitLevel2CostRubies 3535 db RandomBUnitLevel2HP-3 3536 db RandomBUnitLevel2Speed-1 3537 db RandomBUnitLevel2Attack-2 3538 db RandomBUnitLevel2Defense 3539 db RandomBUnitLevel2Growth 3540 db RandomBUnitLevel2Damage 3541 db RangedMonster 3542 db "Pastry Chef",2553544Monster145Table: 3545 dw Monster145Idle3546 dw Monster145Move3547 dw Monster145AttackPatternRight3548 dw Monster145AttackPatternLeft3549 dw Monster145AttackPatternLeftUp3550 dw Monster145AttackPatternLeftDown3551 dw Monster145AttackPatternRightUp3552 dw Monster145AttackPatternRightDown3553 db BattleMonsterSpriteSheet14Block3554 db 16 3555 db 32+08 3556 db RandomBUnitLevel2CostGold 3557 db RandomBUnitLevel2CostGems 3558 db RandomBUnitLevel2CostRubies 3559 db RandomBUnitLevel2HP 3560 db RandomBUnitLevel2Speed 3561 db RandomBUnitLevel2Attack 3562 db RandomBUnitLevel2Defense 3563 db RandomBUnitLevel2Growth 3564 db RandomBUnitLevel2Damage 3565 db 000 3566 db "Indy Brave",255," "3568Monster146Table: 3569 dw Monster146Idle3570 dw Monster146Move3571 dw GeneralMonsterAttackPatternRight3572 dw GeneralMonsterAttackPatternLeft3573 dw GeneralMonsterAttackPatternLeftUp3574 dw GeneralMonsterAttackPatternLeftDown3575 dw GeneralMonsterAttackPatternRightUp3576 dw GeneralMonsterAttackPatternRightDown3577 db BattleMonsterSpriteSheet14Block3578 db 16 3579 db 32+08 3580 db RandomAUnitLevel3CostGold 3581 db RandomAUnitLevel3CostGems 3582 db RandomAUnitLevel3CostRubies 3583 db RandomAUnitLevel3HP 3584 db RandomAUnitLevel3Speed 3585 db RandomAUnitLevel3Attack 3586 db RandomAUnitLevel3Defense 3587 db RandomAUnitLevel3Growth 3588 db RandomAUnitLevel3Damage 3589 db 000 3590 db "Red Lupin",255,"  "3592Monster147Table: 3593 dw Monster147Idle3594 dw Monster147Move3595 dw GeneralMonsterAttackPatternRight3596 dw GeneralMonsterAttackPatternLeft3597 dw GeneralMonsterAttackPatternLeftUp3598 dw GeneralMonsterAttackPatternLeftDown3599 dw GeneralMonsterAttackPatternRightUp3600 dw GeneralMonsterAttackPatternRightDown3601 db BattleMonsterSpriteSheet13Block3602 db 16 3603 db 32+08 3604 db RandomBUnitLevel3CostGold 3605 db RandomBUnitLevel3CostGems 3606 db RandomBUnitLevel3CostRubies 3607 db RandomBUnitLevel3HP 3608 db RandomBUnitLevel3Speed 3609 db RandomBUnitLevel3Attack 3610 db RandomBUnitLevel3Defense 3611 db RandomBUnitLevel3Growth 3612 db RandomBUnitLevel3Damage 3613 db 000 3614 db "Green Lupin",2553615 3616Monster148Table: 3617 dw Monster148Idle3618 dw Monster148Move3619 dw GeneralMonsterAttackPatternRight3620 dw GeneralMonsterAttackPatternLeft3621 dw GeneralMonsterAttackPatternLeftUp3622 dw GeneralMonsterAttackPatternLeftDown3623 dw GeneralMonsterAttackPatternRightUp3624 dw GeneralMonsterAttackPatternRightDown3625 db BattleMonsterSpriteSheet14Block3626 db 16 3627 db 32+08 3628 db RandomAUnitLevel2CostGold 3629 db RandomAUnitLevel2CostGems 3630 db RandomAUnitLevel2CostRubies 3631 db RandomAUnitLevel2HP 3632 db RandomAUnitLevel2Speed 3633 db RandomAUnitLevel2Attack 3634 db RandomAUnitLevel2Defense 3635 db RandomAUnitLevel2Growth 3636 db RandomAUnitLevel2Damage 3637 db 000 3638 db "Major Mirth",2553639 3640Monster149Table: 3641 dw Monster149Idle3642 dw Monster149Move3643 dw Monster149AttackPatternRight3644 dw Monster149AttackPatternLeft3645 dw Monster149AttackPatternLeft3646 dw Monster149AttackPatternLeft3647 dw Monster149AttackPatternRight3648 dw Monster149AttackPatternRight3649 db BattleMonsterSpriteSheet13Block3650 db 16 3651 db 16+08 3652 db KingsValley2UnitLevel4CostGold 3653 db KingsValley2UnitLevel4CostGems 3654 db KingsValley2UnitLevel4CostRubies 3655 db KingsValley2UnitLevel4HP 3656 db KingsValley2UnitLevel4Speed 3657 db KingsValley2UnitLevel4Attack 3658 db KingsValley2UnitLevel4Defense 3659 db KingsValley2UnitLevel4Growth 3660 db KingsValley2UnitLevel4Damage 3661 db RangedMonster 3662 db "Vic Viper",255,"  "3664Monster150Table: 3665 dw Monster150Idle3666 dw Monster150Move3667 dw Monster150AttackPatternRight3668 dw Monster150AttackPatternLeft3669 dw Monster150AttackPatternLeftUp3670 dw Monster150AttackPatternLeftDown3671 dw Monster150AttackPatternRightUp3672 dw Monster150AttackPatternRightDown3673 db BattleMonsterSpriteSheet6Block3674 db 16 3675 db 16+08 3676 db KingsValley2UnitLevel3CostGold 3677 db KingsValley2UnitLevel3CostGems 3678 db KingsValley2UnitLevel3CostRubies 3679 db KingsValley2UnitLevel3HP 3680 db KingsValley2UnitLevel3Speed 3681 db KingsValley2UnitLevel3Attack 3682 db KingsValley2UnitLevel3Defense 3683 db KingsValley2UnitLevel3Growth 3684 db KingsValley2UnitLevel3Damage 3685 db 000 3686 db "Rock Roll",255,"  "3688Monster151Table: 3689 dw Monster151Idle3690 dw Monster151Move3691 dw GeneralMonsterAttackPatternRight3692 dw GeneralMonsterAttackPatternLeft3693 dw GeneralMonsterAttackPatternLeftUp3694 dw GeneralMonsterAttackPatternLeftDown3695 dw GeneralMonsterAttackPatternRightUp3696 dw GeneralMonsterAttackPatternRightDown3697 db BattleMonsterSpriteSheet6Block3698 db 16 3699 db 16+08 3700 db KingsValley2UnitLevel1CostGold 3701 db KingsValley2UnitLevel1CostGems 3702 db KingsValley2UnitLevel1CostRubies 3703 db KingsValley2UnitLevel1HP 3704 db KingsValley2UnitLevel1Speed 3705 db KingsValley2UnitLevel1Attack 3706 db KingsValley2UnitLevel1Defense 3707 db KingsValley2UnitLevel1Growth 3708 db KingsValley2UnitLevel1Damage 3709 db 000 3710 db "Slouman",255,"    "3712Monster152Table: 3713 dw Monster152Idle3714 dw Monster152Move3715 dw Monster152AttackPatternRight3716 dw Monster152AttackPatternLeft3717 dw Monster152AttackPatternLeftUp3718 dw Monster152AttackPatternLeftDown3719 dw Monster152AttackPatternRightUp3720 dw Monster152AttackPatternRightDown3721 db BattleMonsterSpriteSheet6Block3722 db 16 3723 db 16+08 3724 db KingsValley2UnitLevel2CostGold 3725 db KingsValley2UnitLevel2CostGems 3726 db KingsValley2UnitLevel2CostRubies 3727 db KingsValley2UnitLevel2HP 3728 db KingsValley2UnitLevel2Speed 3729 db KingsValley2UnitLevel2Attack 3730 db KingsValley2UnitLevel2Defense 3731 db KingsValley2UnitLevel2Growth 3732 db KingsValley2UnitLevel2Damage 3733 db 000 3734 db "Pyoncy",255,"     "3742Monster153Table: 3743 dw Monster153Idle3744 dw Monster153Move3745 dw Monster153AttackPatternRight3746 dw Monster153AttackPatternLeft3747 dw Monster153AttackPatternLeft3748 dw Monster153AttackPatternLeft3749 dw Monster153AttackPatternRight3750 dw Monster153AttackPatternRight3751 db BattleMonsterSpriteSheet6Block3752 db 16 3753 db 40+08 3754 db RandomBUnitLevel4CostGold 3755 db RandomBUnitLevel4CostGems 3756 db RandomBUnitLevel4CostRubies 3757 db RandomBUnitLevel4HP-2 3758 db RandomBUnitLevel4Speed 3759 db RandomBUnitLevel4Attack-2 3760 db RandomBUnitLevel4Defense 3761 db RandomBUnitLevel4Growth 3762 db RandomBUnitLevel4Damage 3763 db RangedMonster 3764 db "Andorogynus",2553765 3766Monster154Table: 3767 dw Monster154Idle3768 dw Monster154Move3769 dw GeneralMonsterAttackPatternRight3770 dw GeneralMonsterAttackPatternLeft3771 dw GeneralMonsterAttackPatternLeftUp3772 dw GeneralMonsterAttackPatternLeftDown3773 dw GeneralMonsterAttackPatternRightUp3774 dw GeneralMonsterAttackPatternRightDown3775 db BattleMonsterSpriteSheet6Block3776 db 16 3777 db 32+08 3778 db RandomBUnitLevel5CostGold 3779 db RandomBUnitLevel5CostGems 3780 db RandomBUnitLevel5CostRubies 3781 db RandomBUnitLevel5HP 3782 db RandomBUnitLevel5Speed 3783 db RandomBUnitLevel5Attack 3784 db RandomBUnitLevel5Defense 3785 db RandomBUnitLevel5Growth 3786 db RandomBUnitLevel5Damage 3787 db 000 3788 db "Thexder",255,"    "3790Monster155Table: 3791 dw Monster155Idle3792 dw Monster155Move3793 dw GeneralMonsterAttackPatternRight3794 dw GeneralMonsterAttackPatternLeft3795 dw GeneralMonsterAttackPatternLeftUp3796 dw GeneralMonsterAttackPatternLeftDown3797 dw GeneralMonsterAttackPatternRightUp3798 dw GeneralMonsterAttackPatternRightDown3799 db BattleMonsterSpriteSheet6Block3800 db 16 3801 db 16+08 3802 db RandomAUnitLevel3CostGold 3803 db RandomAUnitLevel3CostGems 3804 db RandomAUnitLevel3CostRubies 3805 db RandomAUnitLevel3HP 3806 db RandomAUnitLevel3Speed 3807 db RandomAUnitLevel3Attack 3808 db RandomAUnitLevel3Defense 3809 db RandomAUnitLevel3Growth 3810 db RandomAUnitLevel3Damage 3811 db 000 3812 db "BounceBot",255,"  "3814Monster156Table: 3815 dw Monster156Idle3816 dw Monster156Move3817 dw GeneralMonsterAttackPatternRight3818 dw GeneralMonsterAttackPatternLeft3819 dw GeneralMonsterAttackPatternLeftUp3820 dw GeneralMonsterAttackPatternLeftDown3821 dw GeneralMonsterAttackPatternRightUp3822 dw GeneralMonsterAttackPatternRightDown3823 db BattleMonsterSpriteSheet11Block3824 db 32 3825 db 24+08 3826 db RandomBUnitLevel6CostGold 3827 db RandomBUnitLevel6CostGems 3828 db RandomBUnitLevel6CostRubies 3829 db RandomBUnitLevel6HP 3830 db RandomBUnitLevel6Speed 3831 db RandomBUnitLevel6Attack 3832 db RandomBUnitLevel6Defense 3833 db RandomBUnitLevel6Growth 3834 db RandomBUnitLevel6Damage 3835 db 000 3836 db "ColossalBot",2553838Monster157Table: 3839 dw Monster157Idle3840 dw Monster157Move3841 dw Monster157AttackPatternRight3842 dw Monster157AttackPatternLeft3843 dw Monster157AttackPatternLeftUp3844 dw Monster157AttackPatternLeftDown3845 dw Monster157AttackPatternRightUp3846 dw Monster157AttackPatternRightDown3847 db BattleMonsterSpriteSheet12Block3848 db 16 3849 db 32+08 3850 db RandomAUnitLevel3CostGold 3851 db RandomAUnitLevel3CostGems 3852 db RandomAUnitLevel3CostRubies 3853 db RandomAUnitLevel3HP 3854 db RandomAUnitLevel3Speed 3855 db RandomAUnitLevel3Attack 3856 db RandomAUnitLevel3Defense 3857 db RandomAUnitLevel3Growth 3858 db RandomAUnitLevel3Damage 3859 db 000 3860 db "SuperRunner",2553861 3862Monster158Table: 3863 dw Monster158Idle3864 dw Monster158Move3865 dw Monster158AttackPatternRight3866 dw Monster158AttackPatternLeft3867 dw Monster158AttackPatternLeft3868 dw Monster158AttackPatternLeft3869 dw Monster158AttackPatternRight3870 dw Monster158AttackPatternRight3871 db BattleMonsterSpriteSheet9Block3872 db 32 3873 db 24+08 3874 db AkanbeDragonGroupBUnitLevel5CostGold 3875 db AkanbeDragonGroupBUnitLevel5CostGems 3876 db AkanbeDragonGroupBUnitLevel5CostRubies 3877 db AkanbeDragonGroupBUnitLevel5HP 3878 db AkanbeDragonGroupBUnitLevel5Speed 3879 db AkanbeDragonGroupBUnitLevel5Attack 3880 db AkanbeDragonGroupBUnitLevel5Defense 3881 db AkanbeDragonGroupBUnitLevel5Growth 3882 db AkanbeDragonGroupBUnitLevel5Damage 3883 db RangedMonster 3884 db "Queen Sora",255," "3890SenkoKyuLevel2Number: equ 523891SenkoKyuLevel2Attack: equ 33892SenkoKyuLevel2Damage: equ 33893SenkoKyuLevel2Defense: equ 73894SenkoKyuLevel2HP: equ 183895SenkoKyuLevel2Speed: equ 33896SenkoKyuLevel2Growth: equ 83897SenkoKyuLevel2CostGold: equ 120/103898SenkoKyuLevel2CostGems: equ 00+Level2Unit3899SenkoKyuLevel2CostRubies: equ 03901Monster159Table: 3902 dw Monster159Idle3903 dw Monster159Move3904 dw Monster159AttackPatternRight3905 dw Monster159AttackPatternLeft3906 dw Monster159AttackPatternLeft3907 dw Monster159AttackPatternLeft3908 dw Monster159AttackPatternRight3909 dw Monster159AttackPatternRight3910 db BattleMonsterSpriteSheet9Block3911 db 16 3912 db 16+08 3913 db SenkoKyuLevel2CostGold 3914 db SenkoKyuLevel2CostGems 3915 db SenkoKyuLevel2CostRubies 3916 db SenkoKyuLevel2HP 3917 db SenkoKyuLevel2Speed 3918 db SenkoKyuLevel2Attack 3919 db SenkoKyuLevel2Defense 3920 db SenkoKyuLevel2Growth 3921 db SenkoKyuLevel2Damage 3922 db RangedMonster 3923 db "Senko Kyu",255,"  "3925Monster160Table: 3926 dw Monster160Idle3927 dw Monster160Move3928 dw GeneralMonsterAttackPatternRight3929 dw GeneralMonsterAttackPatternLeft3930 dw GeneralMonsterAttackPatternLeftUp3931 dw GeneralMonsterAttackPatternLeftDown3932 dw GeneralMonsterAttackPatternRightUp3933 dw GeneralMonsterAttackPatternRightDown3934 db BattleMonsterSpriteSheet9Block3935 db 16 3936 db 16+08 3937 db RandomBUnitLevel1CostGold 3938 db RandomBUnitLevel1CostGems 3939 db RandomBUnitLevel1CostRubies 3940 db RandomBUnitLevel1HP 3941 db RandomBUnitLevel1Speed 3942 db RandomBUnitLevel1Attack 3943 db RandomBUnitLevel1Defense 3944 db RandomBUnitLevel1Growth 3945 db RandomBUnitLevel1Damage 3946 db 000 3947 db "Chucklehook",2553948 3949Monster161Table: 3950 dw Monster161Idle3951 dw Monster161Move3952 dw GeneralMonsterAttackPatternRight3953 dw GeneralMonsterAttackPatternLeft3954 dw GeneralMonsterAttackPatternLeftUp3955 dw GeneralMonsterAttackPatternLeftDown3956 dw GeneralMonsterAttackPatternRightUp3957 dw GeneralMonsterAttackPatternRightDown3958 db BattleMonsterSpriteSheet7Block3959 db 16 3960 db 16+08 3961 db RandomBUnitLevel3CostGold 3962 db RandomBUnitLevel3CostGems 3963 db RandomBUnitLevel3CostRubies 3964 db RandomBUnitLevel3HP 3965 db RandomBUnitLevel3Speed 3966 db RandomBUnitLevel3Attack 3967 db RandomBUnitLevel3Defense 3968 db RandomBUnitLevel3Growth 3969 db RandomBUnitLevel3Damage 3970 db 000 3971 db "Sir Oji",255,"    "3973Monster162Table: 3974 dw Monster162Idle3975 dw Monster162Move3976 dw GeneralMonsterAttackPatternRight3977 dw GeneralMonsterAttackPatternLeft3978 dw GeneralMonsterAttackPatternLeftUp3979 dw GeneralMonsterAttackPatternLeftDown3980 dw GeneralMonsterAttackPatternRightUp3981 dw GeneralMonsterAttackPatternRightDown3982 db BattleMonsterSpriteSheet7Block3983 db 16 3984 db 16+08 3985 db RandomBUnitLevel3CostGold 3986 db RandomBUnitLevel3CostGems 3987 db RandomBUnitLevel3CostRubies 3988 db RandomBUnitLevel3HP 3989 db RandomBUnitLevel3Speed 3990 db RandomBUnitLevel3Attack 3991 db RandomBUnitLevel3Defense 3992 db RandomBUnitLevel3Growth 3993 db RandomBUnitLevel3Damage 3994 db 000 3995 db "Pentaro",255,"    "3997Monster163Table: 3998 dw Monster163Idle3999 dw Monster163Move4000 dw GeneralMonsterAttackPatternRight4001 dw GeneralMonsterAttackPatternLeft4002 dw GeneralMonsterAttackPatternLeftUp4003 dw GeneralMonsterAttackPatternLeftDown4004 dw GeneralMonsterAttackPatternRightUp4005 dw GeneralMonsterAttackPatternRightDown4006 db BattleMonsterSpriteSheet7Block4007 db 16 4008 db 16+08 4009 db RandomBUnitLevel2CostGold 4010 db RandomBUnitLevel2CostGems 4011 db RandomBUnitLevel2CostRubies 4012 db RandomBUnitLevel2HP 4013 db RandomBUnitLevel2Speed 4014 db RandomBUnitLevel2Attack 4015 db RandomBUnitLevel2Defense 4016 db RandomBUnitLevel2Growth 4017 db RandomBUnitLevel2Damage 4018 db 000 4019 db "Moai",255,"       "4021Monster164Table: 4022 dw Monster164Idle4023 dw Monster164Move4024 dw Monster164AttackPatternRight4025 dw Monster164AttackPatternLeft4026 dw Monster164AttackPatternLeftUp4027 dw Monster164AttackPatternLeftDown4028 dw Monster164AttackPatternRightUp4029 dw Monster164AttackPatternRightDown4030 db BattleMonsterSpriteSheet7Block4031 db 16 4032 db 40+08 4033 db RandomBUnitLevel4CostGold 4034 db RandomBUnitLevel4CostGems 4035 db RandomBUnitLevel4CostRubies 4036 db RandomBUnitLevel4HP 4037 db RandomBUnitLevel4Speed 4038 db RandomBUnitLevel4Attack 4039 db RandomBUnitLevel4Defense 4040 db RandomBUnitLevel4Growth 4041 db RandomBUnitLevel4Damage 4042 db 000 4043 db "Thomas",255,"     "4045Monster165Table: 4046 dw Monster165Idle4047 dw Monster165Move4048 dw GeneralMonsterAttackPatternRight4049 dw GeneralMonsterAttackPatternLeft4050 dw GeneralMonsterAttackPatternLeftUp4051 dw GeneralMonsterAttackPatternLeftDown4052 dw GeneralMonsterAttackPatternRightUp4053 dw GeneralMonsterAttackPatternRightDown4054 db BattleMonsterSpriteSheet15Block4055 db 32 4056 db 16+08 4057 db RandomBUnitLevel3CostGold 4058 db RandomBUnitLevel3CostGems 4059 db RandomBUnitLevel3CostRubies 4060 db RandomBUnitLevel3HP 4061 db RandomBUnitLevel3Speed 4062 db RandomBUnitLevel3Attack 4063 db RandomBUnitLevel3Defense 4064 db RandomBUnitLevel3Growth 4065 db RandomBUnitLevel3Damage 4066 db 000 4067 db "BlueSteel",255,"  "4069Monster166Table: 4070 dw Monster166Idle4071 dw Monster166Move4072 dw GeneralMonsterAttackPatternRight4073 dw GeneralMonsterAttackPatternLeft4074 dw GeneralMonsterAttackPatternLeftUp4075 dw GeneralMonsterAttackPatternLeftDown4076 dw GeneralMonsterAttackPatternRightUp4077 dw GeneralMonsterAttackPatternRightDown4078 db BattleMonsterSpriteSheet12Block4079 db 16 4080 db 40+08 4081 db RandomBUnitLevel4CostGold 4082 db RandomBUnitLevel4CostGems 4083 db RandomBUnitLevel4CostRubies 4084 db RandomBUnitLevel4HP 4085 db RandomBUnitLevel4Speed 4086 db RandomBUnitLevel4Attack 4087 db RandomBUnitLevel4Defense 4088 db RandomBUnitLevel4Growth 4089 db RandomBUnitLevel4Damage 4090 db 000 4091 db "Hikodrone",255,"  "4093Monster167Table: 4094 dw Monster167Idle4095 dw Monster167Move4096 dw GeneralMonsterAttackPatternRight4097 dw GeneralMonsterAttackPatternLeft4098 dw GeneralMonsterAttackPatternLeftUp4099 dw GeneralMonsterAttackPatternLeftDown4100 dw GeneralMonsterAttackPatternRightUp4101 dw GeneralMonsterAttackPatternRightDown4102 db BattleMonsterSpriteSheet15Block4103 db 16 4104 db 32+08 4105 db RandomBUnitLevel3CostGold 4106 db RandomBUnitLevel3CostGems 4107 db RandomBUnitLevel3CostRubies 4108 db RandomBUnitLevel3HP 4109 db RandomBUnitLevel3Speed 4110 db RandomBUnitLevel3Attack 4111 db RandomBUnitLevel3Defense 4112 db RandomBUnitLevel3Growth 4113 db RandomBUnitLevel3Damage 4114 db 000 4115 db "Wonder Boy",255," "4117NinjaKunLevel2Number: equ 524118NinjaKunLevel2Attack: equ 34119NinjaKunLevel2Damage: equ 34120NinjaKunLevel2Defense: equ 74121NinjaKunLevel2HP: equ 174122NinjaKunLevel2Speed: equ 34123NinjaKunLevel2Growth: equ 84124NinjaKunLevel2CostGold: equ 120/104125NinjaKunLevel2CostGems: equ 00+Level2Unit4126NinjaKunLevel2CostRubies: equ 04128Monster168Table: 4129 dw Monster168Idle4130 dw Monster168Move4131 dw Monster168AttackPatternRight4132 dw Monster168AttackPatternLeft4133 dw Monster168AttackPatternLeft4134 dw Monster168AttackPatternLeft4135 dw Monster168AttackPatternRight4136 dw Monster168AttackPatternRight4137 db BattleMonsterSpriteSheet15Block4138 db 16 4139 db 16+08 4140 db NinjaKunLevel2CostGold 4141 db NinjaKunLevel2CostGems 4142 db NinjaKunLevel2CostRubies 4143 db NinjaKunLevel2HP 4144 db NinjaKunLevel2Speed 4145 db NinjaKunLevel2Attack 4146 db NinjaKunLevel2Defense 4147 db NinjaKunLevel2Growth 4148 db NinjaKunLevel2Damage 4149 db RangedMonster 4150 db "Ninja Kun",255,"  "4152Monster169Table: 4153 dw Monster169Idle4154 dw Monster169Move4155 dw GeneralMonsterAttackPatternRight4156 dw GeneralMonsterAttackPatternLeft4157 dw GeneralMonsterAttackPatternLeftUp4158 dw GeneralMonsterAttackPatternLeftDown4159 dw GeneralMonsterAttackPatternRightUp4160 dw GeneralMonsterAttackPatternRightDown4161 db BattleMonsterSpriteSheet15Block4162 db 16 4163 db 24+08 4164 db RandomBUnitLevel3CostGold 4165 db RandomBUnitLevel3CostGems 4166 db RandomBUnitLevel3CostRubies 4167 db RandomBUnitLevel3HP 4168 db RandomBUnitLevel3Speed 4169 db RandomBUnitLevel3Attack 4170 db RandomBUnitLevel3Defense 4171 db RandomBUnitLevel3Growth 4172 db RandomBUnitLevel3Damage 4173 db 000 4174 db "Kubiwatari",255," "4176Monster170Table: 4177 dw Monster170Idle4178 dw Monster170Move4179 dw GeneralMonsterAttackPatternRight4180 dw GeneralMonsterAttackPatternLeft4181 dw GeneralMonsterAttackPatternLeftUp4182 dw GeneralMonsterAttackPatternLeftDown4183 dw GeneralMonsterAttackPatternRightUp4184 dw GeneralMonsterAttackPatternRightDown4185 db BattleMonsterSpriteSheet10Block4186 db 32 4187 db 24+08 4188 db RandomBUnitLevel5CostGold 4189 db RandomBUnitLevel5CostGems 4190 db RandomBUnitLevel5CostRubies 4191 db RandomBUnitLevel5HP 4192 db RandomBUnitLevel5Speed 4193 db RandomBUnitLevel5Attack 4194 db RandomBUnitLevel5Defense 4195 db RandomBUnitLevel5Growth 4196 db RandomBUnitLevel5Damage 4197 db 000 4199 db "Flutterbane",2554201Monster171Table: 4202 dw Monster171Idle4203 dw Monster171Move4204 dw GeneralMonsterAttackPatternRight4205 dw GeneralMonsterAttackPatternLeft4206 dw GeneralMonsterAttackPatternLeftUp4207 dw GeneralMonsterAttackPatternLeftDown4208 dw GeneralMonsterAttackPatternRightUp4209 dw GeneralMonsterAttackPatternRightDown4210 db BattleMonsterSpriteSheet8Block4211 db 16 4212 db 24+08 4213 db RandomBUnitLevel1CostGold 4214 db RandomBUnitLevel1CostGems 4215 db RandomBUnitLevel1CostRubies 4216 db RandomBUnitLevel1HP 4217 db RandomBUnitLevel1Speed 4218 db RandomBUnitLevel1Attack 4219 db RandomBUnitLevel1Defense 4220 db RandomBUnitLevel1Growth 4221 db RandomBUnitLevel1Damage 4222 db 000 4223 db "Topple Zip",255," "4225Monster172Table: 4226 dw Monster172Idle4227 dw Monster172Move4228 dw GeneralMonsterAttackPatternRight4229 dw GeneralMonsterAttackPatternLeft4230 dw GeneralMonsterAttackPatternLeftUp4231 dw GeneralMonsterAttackPatternLeftDown4232 dw GeneralMonsterAttackPatternRightUp4233 dw GeneralMonsterAttackPatternRightDown4234 db BattleMonsterSpriteSheet12Block4235 db 16 4236 db 24+08 4237 db RandomBUnitLevel1CostGold 4238 db RandomBUnitLevel1CostGems 4239 db RandomBUnitLevel1CostRubies 4240 db RandomBUnitLevel1HP 4241 db RandomBUnitLevel1Speed 4242 db RandomBUnitLevel1Attack 4243 db RandomBUnitLevel1Defense 4244 db RandomBUnitLevel1Growth 4245 db RandomBUnitLevel1Damage 4246 db 000 4247 db "Topplane",255,"   "4249Monster173Table: 4250 dw Monster173Idle4251 dw Monster173Move4252 dw GeneralMonsterAttackPatternRight4253 dw GeneralMonsterAttackPatternLeft4254 dw GeneralMonsterAttackPatternLeftUp4255 dw GeneralMonsterAttackPatternLeftDown4256 dw GeneralMonsterAttackPatternRightUp4257 dw GeneralMonsterAttackPatternRightDown4258 db BattleMonsterSpriteSheet15Block4259 db 16 4260 db 32+08 4261 db RandomBUnitLevel3CostGold 4262 db RandomBUnitLevel3CostGems 4263 db RandomBUnitLevel3CostRubies 4264 db RandomBUnitLevel3HP 4265 db RandomBUnitLevel3Speed 4266 db RandomBUnitLevel3Attack 4267 db RandomBUnitLevel3Defense 4268 db RandomBUnitLevel3Growth 4269 db RandomBUnitLevel3Damage 4270 db 000 4271 db "Nyancle",255,"    "4273Monster174Table: 4274 dw Monster174Idle4275 dw Monster174Move4276 dw Monster174AttackPatternRight4277 dw Monster174AttackPatternLeft4278 dw Monster174AttackPatternLeftUp4279 dw Monster174AttackPatternLeftDown4280 dw Monster174AttackPatternRightUp4281 dw Monster174AttackPatternRightDown4282 db BattleMonsterSpriteSheet15Block4283 db 32 4284 db 32+08 4285 db RandomBUnitLevel5CostGold 4286 db RandomBUnitLevel5CostGems 4287 db RandomBUnitLevel5CostRubies 4288 db RandomBUnitLevel5HP 4289 db RandomBUnitLevel5Speed 4290 db RandomBUnitLevel5Attack 4291 db RandomBUnitLevel5Defense 4292 db RandomBUnitLevel5Growth 4293 db RandomBUnitLevel5Damage 4294 db 000 4295 db "Ashguine",255,"   "4297Monster175Table: 4298 dw Monster175Idle4299 dw Monster175Move4300 dw GeneralMonsterAttackPatternRight4301 dw GeneralMonsterAttackPatternLeft4302 dw GeneralMonsterAttackPatternLeftUp4303 dw GeneralMonsterAttackPatternLeftDown4304 dw GeneralMonsterAttackPatternRightUp4305 dw GeneralMonsterAttackPatternRightDown4306 db BattleMonsterSpriteSheet15Block4307 db 32 4308 db 48+08 4309 db RandomBUnitLevel1CostGold 4310 db RandomBUnitLevel1CostGems 4311 db RandomBUnitLevel1CostRubies 4312 db RandomBUnitLevel1HP 4313 db RandomBUnitLevel1Speed 4314 db RandomBUnitLevel1Attack 4315 db RandomBUnitLevel1Defense 4316 db RandomBUnitLevel1Growth 4317 db RandomBUnitLevel1Damage 4318 db 000 4319 db "Hard Boiled",2554321Monster176Table: 4322 dw Monster176Idle4323 dw Monster176Move4324 dw Monster176AttackPatternRight4325 dw Monster176AttackPatternLeft4326 dw Monster176AttackPatternLeftUp4327 dw Monster176AttackPatternLeftDown4328 dw Monster176AttackPatternRightUp4329 dw Monster176AttackPatternRightDown4330 db BattleMonsterSpriteSheet15Block4331 db 16 4332 db 16+08 4333 db RandomBUnitLevel1CostGold 4334 db RandomBUnitLevel1CostGems 4335 db RandomBUnitLevel1CostRubies 4336 db RandomBUnitLevel1HP 4337 db RandomBUnitLevel1Speed 4338 db RandomBUnitLevel1Attack 4339 db RandomBUnitLevel1Defense 4340 db RandomBUnitLevel1Growth 4341 db RandomBUnitLevel1Damage 4342 db 000 4343 db "Pingo",255,"      "4345Monster177Table: 4346 dw Monster177Idle4347 dw Monster177Move4348 dw GeneralMonsterAttackPatternRight4349 dw GeneralMonsterAttackPatternLeft4350 dw GeneralMonsterAttackPatternLeftUp4351 dw GeneralMonsterAttackPatternLeftDown4352 dw GeneralMonsterAttackPatternRightUp4353 dw GeneralMonsterAttackPatternRightDown4354 db BattleMonsterSpriteSheet15Block4355 db 16 4356 db 16+08 4357 db RandomBUnitLevel1CostGold 4358 db RandomBUnitLevel1CostGems 4359 db RandomBUnitLevel1CostRubies 4360 db RandomBUnitLevel1HP 4361 db RandomBUnitLevel1Speed 4362 db RandomBUnitLevel1Attack 4363 db RandomBUnitLevel1Defense 4364 db RandomBUnitLevel1Growth 4365 db RandomBUnitLevel1Damage 4366 db 000 4367 db "Doki Bear",255,"  "4369Monster178Table: 4370 dw Monster178Idle4371 dw Monster178Move4372 dw Monster178AttackPatternRight4373 dw Monster178AttackPatternLeft4374 dw Monster178AttackPatternLeftUp4375 dw Monster178AttackPatternLeftDown4376 dw Monster178AttackPatternRightUp4377 dw Monster178AttackPatternRightDown4378 db BattleMonsterSpriteSheet15Block4379 db 16 4380 db 16+08 4381 db RandomBUnitLevel3CostGold 4382 db RandomBUnitLevel3CostGems 4383 db RandomBUnitLevel3CostRubies 4384 db RandomBUnitLevel3HP 4385 db RandomBUnitLevel3Speed 4386 db RandomBUnitLevel3Attack 4387 db RandomBUnitLevel3Defense 4388 db RandomBUnitLevel3Growth 4389 db RandomBUnitLevel3Damage 4390 db 000 4391 db "InspecteurZ",2554392 4393Monster179Table: 4394 dw Monster179Idle4395 dw Monster179Move4396 dw GeneralMonsterAttackPatternRight4397 dw GeneralMonsterAttackPatternLeft4398 dw GeneralMonsterAttackPatternLeftUp4399 dw GeneralMonsterAttackPatternLeftDown4400 dw GeneralMonsterAttackPatternRightUp4401 dw GeneralMonsterAttackPatternRightDown4402 db BattleMonsterSpriteSheet15Block4403 db 16 4404 db 16+08 4405 db RandomBUnitLevel2CostGold 4406 db RandomBUnitLevel2CostGems 4407 db RandomBUnitLevel2CostRubies 4408 db RandomBUnitLevel2HP 4409 db RandomBUnitLevel2Speed 4410 db RandomBUnitLevel2Attack 4411 db RandomBUnitLevel2Defense 4412 db RandomBUnitLevel2Growth 4413 db RandomBUnitLevel2Damage 4414 db 000 4415 db "Thug",255,"       "4417Monster180Table: 4418 dw Monster180Idle4419 dw Monster180Move4420 dw GeneralMonsterAttackPatternRight4421 dw GeneralMonsterAttackPatternLeft4422 dw GeneralMonsterAttackPatternLeftUp4423 dw GeneralMonsterAttackPatternLeftDown4424 dw GeneralMonsterAttackPatternRightUp4425 dw GeneralMonsterAttackPatternRightDown4426 db BattleMonsterSpriteSheet15Block4427 db 16 4428 db 16+08 4429 db RandomBUnitLevel1CostGold 4430 db RandomBUnitLevel1CostGems 4431 db RandomBUnitLevel1CostRubies 4432 db RandomBUnitLevel1HP 4433 db RandomBUnitLevel1Speed 4434 db RandomBUnitLevel1Attack 4435 db RandomBUnitLevel1Defense 4436 db RandomBUnitLevel1Growth 4437 db RandomBUnitLevel1Damage 4438 db 000 4439 db "Goblin",255,"     "4441Monster181Table: 4442 dw Monster181Idle4443 dw Monster181Move4444 dw GeneralMonsterAttackPatternRight4445 dw GeneralMonsterAttackPatternLeft4446 dw GeneralMonsterAttackPatternLeftUp4447 dw GeneralMonsterAttackPatternLeftDown4448 dw GeneralMonsterAttackPatternRightUp4449 dw GeneralMonsterAttackPatternRightDown4450 db BattleMonsterSpriteSheet15Block4451 db 16 4452 db 16+08 4453 db RandomBUnitLevel2CostGold 4454 db RandomBUnitLevel2CostGems 4455 db RandomBUnitLevel2CostRubies 4456 db RandomBUnitLevel2HP 4457 db RandomBUnitLevel2Speed 4458 db RandomBUnitLevel2Attack 4459 db RandomBUnitLevel2Defense 4460 db RandomBUnitLevel2Growth 4461 db RandomBUnitLevel2Damage 4462 db 000 4463 db "Emberhorn",255,"  "4465Monster182Table: 4466 dw Monster182Idle4467 dw Monster182Move4468 dw GeneralMonsterAttackPatternRight4469 dw GeneralMonsterAttackPatternLeft4470 dw GeneralMonsterAttackPatternLeftUp4471 dw GeneralMonsterAttackPatternLeftDown4472 dw GeneralMonsterAttackPatternRightUp4473 dw GeneralMonsterAttackPatternRightDown4474 db BattleMonsterSpriteSheet16Block4475 db 48 4476 db 32+08 4477 db ChukaTaisenUnitLevel1CostGold 4478 db ChukaTaisenUnitLevel1CostGems 4479 db ChukaTaisenUnitLevel1CostRubies 4480 db ChukaTaisenUnitLevel1HP 4481 db ChukaTaisenUnitLevel1Speed 4482 db ChukaTaisenUnitLevel1Attack 4483 db ChukaTaisenUnitLevel1Defense 4484 db ChukaTaisenUnitLevel1Growth 4485 db ChukaTaisenUnitLevel1Damage 4486 db 000 4487 db "Kanton Man",255," "4489Monster183Table: 4490 dw Monster183Idle4491 dw Monster183Move4492 dw Monster183AttackPatternRight4493 dw Monster183AttackPatternLeft4494 dw Monster183AttackPatternLeft4495 dw Monster183AttackPatternLeft4496 dw Monster183AttackPatternRight4497 dw Monster183AttackPatternRight4498 db BattleMonsterSpriteSheet16Block4499 db 32 4500 db 32+08 4501 db ChukaTaisenUnitLevel2CostGold 4502 db ChukaTaisenUnitLevel2CostGems 4503 db ChukaTaisenUnitLevel2CostRubies 4504 db ChukaTaisenUnitLevel2HP 4505 db ChukaTaisenUnitLevel2Speed 4506 db ChukaTaisenUnitLevel2Attack 4507 db ChukaTaisenUnitLevel2Defense 4508 db ChukaTaisenUnitLevel2Growth 4509 db ChukaTaisenUnitLevel2Damage 4510 db RangedMonster 4511 db "Sun Wukong",255," "4513Monster184Table: 4514 dw Monster184Idle4515 dw Monster184Move4516 dw GeneralMonsterAttackPatternRight4517 dw GeneralMonsterAttackPatternLeft4518 dw GeneralMonsterAttackPatternLeftUp4519 dw GeneralMonsterAttackPatternLeftDown4520 dw GeneralMonsterAttackPatternRightUp4521 dw GeneralMonsterAttackPatternRightDown4522 db BattleMonsterSpriteSheet16Block4523 db 32 4524 db 40+08 4525 db ChukaTaisenUnitLevel3CostGold 4526 db ChukaTaisenUnitLevel3CostGems 4527 db ChukaTaisenUnitLevel3CostRubies 4528 db ChukaTaisenUnitLevel3HP 4529 db ChukaTaisenUnitLevel3Speed 4530 db ChukaTaisenUnitLevel3Attack 4531 db ChukaTaisenUnitLevel3Defense 4532 db ChukaTaisenUnitLevel3Growth 4533 db ChukaTaisenUnitLevel3Damage 4534 db 000 4535 db "Shock Scout",2554536 4537Monster185Table: 4538 dw Monster185Idle4539 dw Monster185Move4540 dw GeneralMonsterAttackPatternRight4541 dw GeneralMonsterAttackPatternLeft4542 dw GeneralMonsterAttackPatternLeftUp4543 dw GeneralMonsterAttackPatternLeftDown4544 dw GeneralMonsterAttackPatternRightUp4545 dw GeneralMonsterAttackPatternRightDown4546 db BattleMonsterSpriteSheet16Block4547 db 32 4548 db 40+08 4549 db ChukaTaisenUnitLevel4CostGold 4550 db ChukaTaisenUnitLevel4CostGems 4551 db ChukaTaisenUnitLevel4CostRubies 4552 db ChukaTaisenUnitLevel4HP 4553 db ChukaTaisenUnitLevel4Speed 4554 db ChukaTaisenUnitLevel4Attack 4555 db ChukaTaisenUnitLevel4Defense 4556 db ChukaTaisenUnitLevel4Growth 4557 db ChukaTaisenUnitLevel4Damage 4558 db 000 4559 db "Evil Hermit",2554561Monster186Table: 4562 dw Monster186Idle4563 dw Monster186Move4564 dw GeneralMonsterAttackPatternRight4565 dw GeneralMonsterAttackPatternLeft4566 dw GeneralMonsterAttackPatternLeftUp4567 dw GeneralMonsterAttackPatternLeftDown4568 dw GeneralMonsterAttackPatternRightUp4569 dw GeneralMonsterAttackPatternRightDown4570 db BattleMonsterSpriteSheet16Block4571 db 32 4572 db 40+08 4573 db ChukaTaisenUnitLevel5CostGold 4574 db ChukaTaisenUnitLevel5CostGems 4575 db ChukaTaisenUnitLevel5CostRubies 4576 db ChukaTaisenUnitLevel5HP 4577 db ChukaTaisenUnitLevel5Speed 4578 db ChukaTaisenUnitLevel5Attack 4579 db ChukaTaisenUnitLevel5Defense 4580 db ChukaTaisenUnitLevel5Growth 4581 db ChukaTaisenUnitLevel5Damage 4582 db 000 4583 db "Bad Buddha",255," "4585Monster187Table: 4586 dw Monster187Idle4587 dw Monster187Move4588 dw GeneralMonsterAttackPatternRight4589 dw GeneralMonsterAttackPatternLeft4590 dw GeneralMonsterAttackPatternLeftUp4591 dw GeneralMonsterAttackPatternLeftDown4592 dw GeneralMonsterAttackPatternRightUp4593 dw GeneralMonsterAttackPatternRightDown4594 db BattleMonsterSpriteSheet15Block4595 db 32 4596 db 40+08 4597 db ChukaTaisenUnitLevel6CostGold 4598 db ChukaTaisenUnitLevel6CostGems 4599 db ChukaTaisenUnitLevel6CostRubies 4600 db ChukaTaisenUnitLevel6HP 4601 db ChukaTaisenUnitLevel6Speed 4602 db ChukaTaisenUnitLevel6Attack 4603 db ChukaTaisenUnitLevel6Defense 4604 db ChukaTaisenUnitLevel6Growth 4605 db ChukaTaisenUnitLevel6Damage 4606 db 000 4607 db "Dualhorn",255,"   "46094610GeneralMonsterAttackPatternRight:4611 db 000,003,ShowBeingHitSprite,007,000,InitiateAttack4612GeneralMonsterAttackPatternLeft:4613 db 000,007,ShowBeingHitSprite,003,000,InitiateAttack4614GeneralMonsterAttackPatternLeftUp:4615 db 000,008,ShowBeingHitSprite,004,000,InitiateAttack4616GeneralMonsterAttackPatternLeftDown:4617 db 000,006,ShowBeingHitSprite,002,000,InitiateAttack4618GeneralMonsterAttackPatternRightUp:4619 db 000,002,ShowBeingHitSprite,006,000,InitiateAttack4620GeneralMonsterAttackPatternRightDown:4621 db 000,004,ShowBeingHitSprite,008,000,InitiateAttack46224625RIdle1Monster001: equ $4000 + (000*128) + (000/2) - 1284626RIdle2Monster001: equ $4000 + (000*128) + (016/2) - 1284627RIdle3Monster001: equ $4000 + (000*128) + (032/2) - 1284628RIdle4Monster001: equ $4000 + (000*128) + (048/2) - 1284630LIdle1Monster001: equ $4000 + (000*128) + (112/2) - 1284631LIdle2Monster001: equ $4000 + (000*128) + (096/2) - 1284632LIdle3Monster001: equ $4000 + (000*128) + (080/2) - 1284633LIdle4Monster001: equ $4000 + (000*128) + (064/2) - 1284635Monster001Move: 4636Monster001Idle:4637 db 3 4638 db 6 4639 dw RIdle1Monster0014640 dw RIdle2Monster0014641 dw RIdle3Monster0014642 dw RIdle4Monster0014643 dw RIdle3Monster0014644 dw RIdle2Monster0014645 4646 dw LIdle1Monster0014647 dw LIdle2Monster0014648 dw LIdle3Monster0014649 dw LIdle4Monster0014650 dw LIdle3Monster0014651 dw LIdle2Monster00146524654RIdle1Monster002: equ $4000 + (000*128) + (128/2) - 1284655RIdle2Monster002: equ $4000 + (000*128) + (144/2) - 1284656RIdle3Monster002: equ $4000 + (000*128) + (160/2) - 1284657RIdle4Monster002: equ $4000 + (000*128) + (176/2) - 1284659LIdle1Monster002: equ $4000 + (000*128) + (240/2) - 1284660LIdle2Monster002: equ $4000 + (000*128) + (224/2) - 1284661LIdle3Monster002: equ $4000 + (000*128) + (208/2) - 1284662LIdle4Monster002: equ $4000 + (000*128) + (192/2) - 1284664Monster002Move: 4665Monster002Idle:4666 db 3 4667 db 6 4668 dw RIdle1Monster0024669 dw RIdle2Monster0024670 dw RIdle3Monster0024671 dw RIdle4Monster0024672 dw RIdle3Monster0024673 dw RIdle2Monster0024674 4675 dw LIdle1Monster0024676 dw LIdle2Monster0024677 dw LIdle3Monster0024678 dw LIdle4Monster0024679 dw LIdle3Monster0024680 dw LIdle2Monster00246814683RIdle1Monster003: equ $4000 + (032*128) + (000/2) - 1284684RIdle2Monster003: equ $4000 + (032*128) + (016/2) - 1284685RIdle3Monster003: equ $4000 + (032*128) + (032/2) - 1284686RIdle4Monster003: equ $4000 + (032*128) + (048/2) - 1284688LIdle1Monster003: equ $4000 + (032*128) + (112/2) - 1284689LIdle2Monster003: equ $4000 + (032*128) + (096/2) - 1284690LIdle3Monster003: equ $4000 + (032*128) + (080/2) - 1284691LIdle4Monster003: equ $4000 + (032*128) + (064/2) - 1284693Monster003Move: 4694Monster003Idle:4695 db 5 4696 db 6 4697 dw RIdle1Monster0034698 dw RIdle2Monster0034699 dw RIdle3Monster0034700 dw RIdle4Monster0034701 dw RIdle3Monster0034702 dw RIdle2Monster0034703 4704 dw LIdle1Monster0034705 dw LIdle2Monster0034706 dw LIdle3Monster0034707 dw LIdle4Monster0034708 dw LIdle3Monster0034709 dw LIdle2Monster00347104712RIdle1Monster004: equ $4000 + (032*128) + (128/2) - 1284713RIdle2Monster004: equ $4000 + (032*128) + (144/2) - 1284714RIdle3Monster004: equ $4000 + (032*128) + (160/2) - 1284715RIdle4Monster004: equ $4000 + (032*128) + (176/2) - 1284717LIdle1Monster004: equ $4000 + (032*128) + (240/2) - 1284718LIdle2Monster004: equ $4000 + (032*128) + (224/2) - 1284719LIdle3Monster004: equ $4000 + (032*128) + (208/2) - 1284720LIdle4Monster004: equ $4000 + (032*128) + (192/2) - 1284722Monster004Move: 4723Monster004Idle:4724 db 4 4725 db 6 4726 dw RIdle1Monster0044727 dw RIdle2Monster0044728 dw RIdle3Monster0044729 dw RIdle4Monster0044730 dw RIdle3Monster0044731 dw RIdle2Monster0044732 4733 dw LIdle1Monster0044734 dw LIdle2Monster0044735 dw LIdle3Monster0044736 dw LIdle4Monster0044737 dw LIdle3Monster0044738 dw LIdle2Monster00447394742RIdle1Monster005: equ $4000 + (064*128) + (000/2) - 1284743RIdle2Monster005: equ $4000 + (064*128) + (016/2) - 1284745LIdle1Monster005: equ $4000 + (064*128) + (032/2) - 1284746LIdle2Monster005: equ $4000 + (064*128) + (048/2) - 1284748Monster005Move: 4749Monster005Idle:4750 db 3 4751 db 2 4752 dw RIdle1Monster0054753 dw RIdle2Monster0054754 4755 dw LIdle1Monster0054756 dw LIdle2Monster00547574760RIdle1Monster006: equ $4000 + (068*128) + (064/2) - 1284761RIdle2Monster006: equ $4000 + (068*128) + (080/2) - 1284763LIdle1Monster006: equ $4000 + (068*128) + (096/2) - 1284764LIdle2Monster006: equ $4000 + (068*128) + (112/2) - 1284766Monster006Move: 4767Monster006Idle:4768 db 4 4769 db 2 4770 dw RIdle1Monster0064771 dw RIdle2Monster0064772 4773 dw LIdle1Monster0064774 dw LIdle2Monster00647754778RIdle1Monster007: equ $4000 + (064*128) + (128/2) - 128 4779RIdle2Monster007: equ $4000 + (064*128) + (144/2) - 128 4780Rattack1Monster007: equ $4000 + (064*128) + (160/2) - 128 4782LIdle1Monster007: equ $4000 + (064*128) + (208/2) - 128 4783LIdle2Monster007: equ $4000 + (064*128) + (192/2) - 128 4784Lattack1Monster007: equ $4000 + (064*128) + (176/2) - 128 4786Monster007Move: 4787Monster007Idle:4788 db 4 4789 db 2 4790 dw RIdle1Monster0074791 dw RIdle2Monster0074792 4793 dw LIdle1Monster0074794 dw LIdle2Monster0074796Monster007AttackPatternRight:4797 db AnimateAttack | dw Rattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile4798Monster007AttackPatternLeft:4799 db AnimateAttack | dw Lattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile48004803RIdle1Monster008: equ $4000 + (064*128) + (224/2) - 128 4804RIdle2Monster008: equ $4000 + (064*128) + (240/2) - 128 4805Rattack1Monster008: equ $4000 + (088*128) + (000/2) - 128 4807LIdle1Monster008: equ $4000 + (088*128) + (048/2) - 128 4808LIdle2Monster008: equ $4000 + (088*128) + (032/2) - 128 4809Lattack1Monster008: equ $4000 + (088*128) + (016/2) - 128 4811Monster008Move: 4812Monster008Idle:4813 db 4 4814 db 2 4815 dw RIdle1Monster0084816 dw RIdle2Monster0084817 4818 dw LIdle1Monster0084819 dw LIdle2Monster0084821Monster008AttackPatternRight:4822 db AnimateAttack | dw Rattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile4823Monster008AttackPatternLeft:4824 db AnimateAttack | dw Lattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile48254828RIdle1Monster009: equ $4000 + (088*128) + (064/2) - 128 4829RIdle2Monster009: equ $4000 + (088*128) + (080/2) - 128 4831LIdle1Monster009: equ $4000 + (088*128) + (096/2) - 128 4832LIdle2Monster009: equ $4000 + (088*128) + (112/2) - 128 4834Monster009Move: 4835Monster009Idle:4836 db 4 4837 db 2 4838 dw RIdle1Monster0094839 dw RIdle2Monster0094840 4841 dw LIdle1Monster0094842 dw LIdle2Monster00948434846RIdle1Monster010: equ $4000 + (088*128) + (128/2) - 128 4847RIdle2Monster010: equ $4000 + (088*128) + (144/2) - 128 4849LIdle1Monster010: equ $4000 + (088*128) + (176/2) - 128 4850LIdle2Monster010: equ $4000 + (088*128) + (160/2) - 128 4852Monster010Move: 4853Monster010Idle:4854 db 4 4855 db 2 4856 dw RIdle1Monster0104857 dw RIdle2Monster0104858 4859 dw LIdle1Monster0104860 dw LIdle2Monster01048614864RIdle1Monster011: equ $4000 + (088*128) + (192/2) - 128 4865RIdle2Monster011: equ $4000 + (088*128) + (208/2) - 128 4867LIdle1Monster011: equ $4000 + (088*128) + (224/2) - 128 4868LIdle2Monster011: equ $4000 + (088*128) + (240/2) - 128 4870Monster011Move: 4871Monster011Idle:4872 db 4 4873 db 2 4874 dw RIdle1Monster0114875 dw RIdle2Monster0114876 4877 dw LIdle1Monster0114878 dw LIdle2Monster01148794882RIdle1Monster012: equ $4000 + (112*128) + (000/2) - 128 4883RIdle2Monster012: equ $4000 + (112*128) + (016/2) - 128 4885LIdle1Monster012: equ $4000 + (112*128) + (048/2) - 128 4886LIdle2Monster012: equ $4000 + (112*128) + (032/2) - 128 4888Monster012Move: 4889Monster012Idle:4890 db 4 4891 db 2 4892 dw RIdle1Monster0124893 dw RIdle2Monster0124894 4895 dw LIdle1Monster0124896 dw LIdle2Monster01248974900RIdle1Monster013: equ $4000 + (112*128) + (064/2) - 128 4901RIdle2Monster013: equ $4000 + (112*128) + (080/2) - 128 4902RIdle3Monster013: equ $4000 + (112*128) + (096/2) - 128 4904LIdle1Monster013: equ $4000 + (112*128) + (144/2) - 128 4905LIdle2Monster013: equ $4000 + (112*128) + (128/2) - 128 4906LIdle3Monster013: equ $4000 + (112*128) + (112/2) - 128 4908Monster013Move: 4909Monster013Idle:4910 db 4 4911 db 4 4912 dw RIdle1Monster0134913 dw RIdle2Monster0134914 dw RIdle3Monster0134915 dw RIdle2Monster0134916 4917 dw LIdle1Monster0134918 dw LIdle2Monster0134919 dw LIdle3Monster0134920 dw LIdle2Monster01349214924RIdle1Monster014: equ $4000 + (112*128) + (160/2) - 128 4925RIdle2Monster014: equ $4000 + (112*128) + (176/2) - 128 4927LIdle1Monster014: equ $4000 + (112*128) + (208/2) - 128 4928LIdle2Monster014: equ $4000 + (112*128) + (192/2) - 128 4930Monster014Move: 4931Monster014Idle:4932 db 4 4933 db 2 4934 dw RIdle1Monster0144935 dw RIdle2Monster0144936 4937 dw LIdle1Monster0144938 dw LIdle2Monster01449394942RIdle1Monster015: equ $4000 + (112*128) + (224/2) - 128 4943RIdle2Monster015: equ $4000 + (112*128) + (240/2) - 128 4945LIdle1Monster015: equ $4000 + (136*128) + (000/2) - 128 4946LIdle2Monster015: equ $4000 + (136*128) + (016/2) - 128 4948Monster015Move: 4949Monster015Idle:4950 db 4 4951 db 2 4952 dw RIdle1Monster0154953 dw RIdle2Monster0154954 4955 dw LIdle1Monster0154956 dw LIdle2Monster01549574960RIdle1Monster016: equ $4000 + (068*128) + (000/2) - 128 4961RIdle2Monster016: equ $4000 + (068*128) + (064/2) - 128 4963LIdle1Monster016: equ $4000 + (068*128) + (128/2) - 128 4964LIdle2Monster016: equ $4000 + (068*128) + (192/2) - 128 4966Monster016Move: 4967Monster016Idle:4968 db 4 4969 db 2 4970 dw RIdle1Monster0164971 dw RIdle2Monster0164972 4973 dw LIdle1Monster0164974 dw LIdle2Monster01649754978RIdle1Monster017: equ $4000 + (136*128) + (032/2) - 128 4979RIdle2Monster017: equ $4000 + (136*128) + (064/2) - 128 4981LIdle1Monster017: equ $4000 + (136*128) + (128/2) - 128 4982LIdle2Monster017: equ $4000 + (136*128) + (096/2) - 128 4984Monster017Move: 4985Monster017Idle:4986 db 4 4987 db 2 4988 dw RIdle1Monster0174989 dw RIdle2Monster0174990 4991 dw LIdle1Monster0174992 dw LIdle2Monster01749934995RIdle1Monster018: equ $4000 + (136*128) + (160/2) - 128 4996RIdle2Monster018: equ $4000 + (136*128) + (192/2) - 128 4997RIdle3Monster018: equ $4000 + (136*128) + (224/2) - 128 4998RAttack1Monster018: equ $4000 + (176*128) + (000/2) - 128 5000LIdle1Monster018: equ $4000 + (176*128) + (128/2) - 128 5001LIdle2Monster018: equ $4000 + (176*128) + (096/2) - 128 5002LIdle3Monster018: equ $4000 + (176*128) + (064/2) - 128 5003LAttack1Monster018: equ $4000 + (176*128) + (032/2) - 128 5005Monster018Move: 5006Monster018Idle:5007 db 4 5008 db 3 5009 dw RIdle1Monster0185010 dw RIdle2Monster0185011 dw RIdle3Monster0185012 5013 dw LIdle1Monster0185014 dw LIdle2Monster0185015 dw LIdle3Monster0185017Monster018AttackPatternRight:5018 db 000,003,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,007,InitiateAttack5019Monster018AttackPatternRightUp:5020 db 000,008,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,004,InitiateAttack5021Monster018AttackPatternRightDown:5022 db 000,006,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,002,InitiateAttack5024Monster018AttackPatternLeft:5025 db 000,007,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,003,InitiateAttack5026Monster018AttackPatternLeftUp:5027 db 000,002,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,006,InitiateAttack5028Monster018AttackPatternLeftDown:5029 db 000,004,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,008,InitiateAttack50305033RIdle1Monster019: equ $4000 + (176*128) + (160/2) - 128 5034RIdle2Monster019: equ $4000 + (176*128) + (176/2) - 128 5036LIdle1Monster019: equ $4000 + (176*128) + (208/2) - 128 5037LIdle2Monster019: equ $4000 + (176*128) + (192/2) - 128 5039Monster019Move: 5040Monster019Idle:5041 db 4 5042 db 2 5043 dw RIdle1Monster0195044 dw RIdle2Monster0195045 5046 dw LIdle1Monster0195047 dw LIdle2Monster01950485051RIdle1Monster020: equ $4000 + (136*128) + (000/2) - 128 5052RIdle2Monster020: equ $4000 + (136*128) + (016/2) - 128 5053RIdle3Monster020: equ $4000 + (136*128) + (032/2) - 128 5055LIdle1Monster020: equ $4000 + (136*128) + (080/2) - 128 5056LIdle2Monster020: equ $4000 + (136*128) + (064/2) - 128 5057LIdle3Monster020: equ $4000 + (136*128) + (048/2) - 128 5059Monster020Move: 5060Monster020Idle:5061 db 4 5062 db 4 5063 dw RIdle1Monster0205064 dw RIdle2Monster0205065 dw RIdle3Monster0205066 dw RIdle2Monster0205067 5068 dw LIdle1Monster0205069 dw LIdle2Monster0205070 dw LIdle3Monster0205071 dw LIdle2Monster02050725075RIdle1Monster021: equ $4000 + (176*128) + (224/2) - 128 5076RIdle2Monster021: equ $4000 + (176*128) + (240/2) - 128 5077RIdle3Monster021: equ $4000 + (216*128) + (000/2) - 128 5078RAttack1Monster021: equ $4000 + (216*128) + (016/2) - 128 5079RAttack2Monster021: equ $4000 + (216*128) + (048/2) - 128 5081LIdle1Monster021: equ $4000 + (216*128) + (176/2) - 128 5082LIdle2Monster021: equ $4000 + (216*128) + (160/2) - 128 5083LIdle3Monster021: equ $4000 + (216*128) + (144/2) - 128 5084LAttack1Monster021: equ $4000 + (216*128) + (112/2) - 128 5085LAttack2Monster021: equ $4000 + (216*128) + (080/2) - 128 5087Monster021Move: 5088Monster021Idle:5089 db 4 5090 db 4 5091 dw RIdle1Monster0215092 dw RIdle2Monster0215093 dw RIdle3Monster0215094 dw RIdle2Monster0215095 5096 dw LIdle1Monster0215097 dw LIdle2Monster0215098 dw LIdle3Monster0215099 dw LIdle2Monster0215101Monster021AttackPatternRight:5102 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 003,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 007,128+16,AnimateAttack | dw RIdle1Monster021 | db 000,InitiateAttack5103Monster021AttackPatternRightUp:5104 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 008,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 004,InitiateAttack5105Monster021AttackPatternRightDown:5106 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 006,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 002,InitiateAttack5108Monster021AttackPatternLeft:5109 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,000,AnimateAttack | dw Lattack2Monster021 | db 007,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 003,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,000,InitiateAttack5110Monster021AttackPatternLeftUp:5111 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,002,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,006,InitiateAttack5112Monster021AttackPatternLeftDown:5113 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,004,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,008,InitiateAttack51145117RIdle1Monster022: equ $4000 + (024*128) + (240/2) - 128 5118RIdle2Monster022: equ $4000 + (080*128) + (048/2) - 128 5120LIdle1Monster022: equ $4000 + (080*128) + (080/2) - 128 5121LIdle2Monster022: equ $4000 + (080*128) + (064/2) - 128 5123Monster022Move: 5124Monster022Idle:5125 db 6 5126 db 2 5127 dw RIdle1Monster0225128 dw RIdle2Monster0225129 5130 dw LIdle1Monster0225131 dw LIdle2Monster02251325135RIdle1Monster023: equ $4000 + (000*128) + (240/2) - 128 5136RIdle2Monster023: equ $4000 + (056*128) + (048/2) - 128 5137RAttack1Monster023: equ $4000 + (056*128) + (064/2) - 128 5138RAttack2Monster023: equ $4000 + (056*128) + (080/2) - 128 5139RAttack3Monster023: equ $4000 + (056*128) + (096/2) - 128 5141LIdle1Monster023: equ $4000 + (056*128) + (176/2) - 128 5142LIdle2Monster023: equ $4000 + (056*128) + (160/2) - 128 5143LAttack1Monster023: equ $4000 + (056*128) + (144/2) - 128 5144LAttack2Monster023: equ $4000 + (056*128) + (128/2) - 128 5145LAttack3Monster023: equ $4000 + (056*128) + (112/2) - 128 5147Monster023Move: 5148Monster023Idle:5149 db 6 5150 db 2 5151 dw RIdle1Monster0235152 dw RIdle2Monster0235153 5154 dw LIdle1Monster0235155 dw LIdle2Monster0235157Monster023AttackPatternRight:5158 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,003,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,007,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5159Monster023AttackPatternRightUp:5160 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,002,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,006,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5161Monster023AttackPatternRightDown:5162 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,004,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,008,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5163Monster023AttackPatternLeft:5164 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,007,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,003,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5165Monster023AttackPatternLeftUp:5166 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,008,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,004,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5167Monster023AttackPatternLeftDown:5168 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,006,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,002,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack51695172RIdle1Monster024: equ $4000 + (000*128) + (000/2) - 128 5173RIdle2Monster024: equ $4000 + (000*128) + (048/2) - 128 5174RIdle3Monster024: equ $4000 + (000*128) + (096/2) - 128 5176LIdle1Monster024: equ $4000 + (056*128) + (000/2) - 128 5177LIdle2Monster024: equ $4000 + (000*128) + (192/2) - 128 5178LIdle3Monster024: equ $4000 + (000*128) + (144/2) - 128 5180Monster024Move: 5181Monster024Idle:5182 db 4 5183 db 4 5184 dw RIdle1Monster0245185 dw RIdle2Monster0245186 dw RIdle3Monster0245187 dw RIdle2Monster0245188 5189 dw LIdle1Monster0245190 dw LIdle2Monster0245191 dw LIdle3Monster0245192 dw LIdle2Monster02451935196RIdle1Monster025: equ $4000 + (112*128) + (000/2) - 128 5197RIdle2Monster025: equ $4000 + (112*128) + (016/2) - 128 5198RAttack1Monster025: equ $4000 + (112*128) + (032/2) - 128 5200LIdle1Monster025: equ $4000 + (112*128) + (080/2) - 128 5201LIdle2Monster025: equ $4000 + (112*128) + (064/2) - 128 5202LAttack1Monster025: equ $4000 + (112*128) + (048/2) - 128 5204Monster025Move: 5205Monster025Idle:5206 db 8 5207 db 2 5208 dw RIdle1Monster0255209 dw RIdle2Monster0255210 5211 dw LIdle1Monster0255212 dw LIdle2Monster0255216Monster025AttackPatternRight:5217 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,003,ShowBeingHitSprite,000,007,000,000,InitiateAttack5218Monster025AttackPatternRightUp:5219 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,002,ShowBeingHitSprite,000,006,000,000,InitiateAttack5220Monster025AttackPatternRightDown:5221 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,004,ShowBeingHitSprite,000,008,000,000,InitiateAttack5222Monster025AttackPatternLeft:5223 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,007,ShowBeingHitSprite,000,003,000,000,InitiateAttack5224Monster025AttackPatternLeftUp:5225 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,008,ShowBeingHitSprite,000,004,000,000,InitiateAttack5226Monster025AttackPatternLeftDown:5227 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,006,ShowBeingHitSprite,000,002,000,000,InitiateAttack52325235RIdle1Monster026: equ $4000 + (184*128) + (000/2) - 128 5236RIdle2Monster026: equ $4000 + (184*128) + (016/2) - 128 5237RAttack1Monster026: equ $4000 + (184*128) + (032/2) - 128 5238RAttack2Monster026: equ $4000 + (184*128) + (064/2) - 128 5240LIdle1Monster026: equ $4000 + (184*128) + (176/2) - 128 5241LIdle2Monster026: equ $4000 + (184*128) + (160/2) - 128 5242LAttack1Monster026: equ $4000 + (184*128) + (128/2) - 128 5243LAttack2Monster026: equ $4000 + (184*128) + (096/2) - 128 5245Monster026Move: 5246Monster026Idle:5247 db 7 5248 db 2 5249 dw RIdle1Monster0265250 dw RIdle2Monster0265251 5252 dw LIdle1Monster0265253 dw LIdle2Monster0265254Monster026AttackPatternRight:5255 db AnimateAttack | dw Rattack1Monster026 | db 128+32,000,000,AnimateAttack | dw Rattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster026 | db 128+16,WaitImpactProjectile5256Monster026AttackPatternLeft:5257 db AnimateAttack | dw Lattack1Monster026 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw Lattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster026 | db 128+16,DisplaceRight,WaitImpactProjectile 52585261RIdle1Monster027: equ $4000 + (056*128) + (192/2) - 128 5262RIdle2Monster027: equ $4000 + (056*128) + (208/2) - 128 5264LIdle1Monster027: equ $4000 + (056*128) + (240/2) - 128 5265LIdle2Monster027: equ $4000 + (056*128) + (224/2) - 128 5267Monster027Move: 5268Monster027Idle:5269 db 7 5270 db 2 5271 dw RIdle1Monster0275272 dw RIdle2Monster0275273 5274 dw LIdle1Monster0275275 dw LIdle2Monster02752765279RIdle1Monster028: equ $4000 + (080*128) + (096/2) - 128 5280RIdle2Monster028: equ $4000 + (080*128) + (112/2) - 128 5282LIdle1Monster028: equ $4000 + (080*128) + (144/2) - 128 5283LIdle2Monster028: equ $4000 + (080*128) + (128/2) - 128 5285Monster028Move: 5286Monster028Idle:5287 db 7 5288 db 2 5289 dw RIdle1Monster0285290 dw RIdle2Monster0285291 5292 dw LIdle1Monster0285293 dw LIdle2Monster02852945297RIdle1Monster029: equ $4000 + (080*128) + (160/2) - 128 5298RIdle2Monster029: equ $4000 + (080*128) + (176/2) - 128 5300LIdle1Monster029: equ $4000 + (080*128) + (208/2) - 128 5301LIdle2Monster029: equ $4000 + (080*128) + (192/2) - 128 5303Monster029Move: 5304Monster029Idle:5305 db 7 5306 db 2 5307 dw RIdle1Monster0295308 dw RIdle2Monster0295309 5310 dw LIdle1Monster0295311 dw LIdle2Monster02953125315RIdle1Monster030: equ $4000 + (080*128) + (224/2) - 128 5316RIdle2Monster030: equ $4000 + (080*128) + (240/2) - 128 5318LIdle1Monster030: equ $4000 + (104*128) + (112/2) - 128 5319LIdle2Monster030: equ $4000 + (104*128) + (096/2) - 128 5321Monster030Move: 5322Monster030Idle:5323 db 7 5324 db 2 5325 dw RIdle1Monster0305326 dw RIdle2Monster0305327 5328 dw LIdle1Monster0305329 dw LIdle2Monster03053305333RIdle1Monster031: equ $4000 + (104*128) + (128/2) - 128 5334RIdle2Monster031: equ $4000 + (104*128) + (144/2) - 128 5336LIdle1Monster031: equ $4000 + (104*128) + (176/2) - 128 5337LIdle2Monster031: equ $4000 + (104*128) + (160/2) - 128 5339Monster031Move: 5340Monster031Idle:5341 db 7 5342 db 2 5343 dw RIdle1Monster0315344 dw RIdle2Monster0315345 5346 dw LIdle1Monster0315347 dw LIdle2Monster03153485351RIdle1Monster032: equ $4000 + (104*128) + (192/2) - 128 5352RIdle2Monster032: equ $4000 + (104*128) + (208/2) - 128 5354LIdle1Monster032: equ $4000 + (104*128) + (240/2) - 128 5355LIdle2Monster032: equ $4000 + (104*128) + (224/2) - 128 5357Monster032Move: 5358Monster032Idle:5359 db 7 5360 db 2 5361 dw RIdle1Monster0325362 dw RIdle2Monster0325363 5364 dw LIdle1Monster0325365 dw LIdle2Monster03253665369RIdle1Monster033: equ $4000 + (128*128) + (096/2) - 128 5370RIdle2Monster033: equ $4000 + (128*128) + (112/2) - 128 5372LIdle1Monster033: equ $4000 + (128*128) + (144/2) - 128 5373LIdle2Monster033: equ $4000 + (128*128) + (128/2) - 128 5375Monster033Move: 5376Monster033Idle:5377 db 7 5378 db 2 5379 dw RIdle1Monster0335380 dw RIdle2Monster0335381 5382 dw LIdle1Monster0335383 dw LIdle2Monster03353845387RIdle1Monster034: equ $4000 + (128*128) + (160/2) - 128 5388RIdle2Monster034: equ $4000 + (128*128) + (176/2) - 128 5390LIdle1Monster034: equ $4000 + (128*128) + (208/2) - 128 5391LIdle2Monster034: equ $4000 + (128*128) + (192/2) - 128 5393Monster034Move: 5394Monster034Idle:5395 db 7 5396 db 2 5397 dw RIdle1Monster0345398 dw RIdle2Monster0345399 5400 dw LIdle1Monster0345401 dw LIdle2Monster03454025405RIdle1Monster035: equ $4000 + (128*128) + (224/2) - 128 5406RIdle2Monster035: equ $4000 + (128*128) + (240/2) - 128 5408LIdle1Monster035: equ $4000 + (152*128) + (000/2) - 128 5409LIdle2Monster035: equ $4000 + (152*128) + (016/2) - 128 5411Monster035Move: 5412Monster035Idle:5413 db 7 5414 db 2 5415 dw RIdle1Monster0355416 dw RIdle2Monster0355417 5418 dw LIdle1Monster0355419 dw LIdle2Monster0355420Monster035AttackPatternLeft:5421Monster035AttackPatternRight:5422 db ShootProjectile,WaitImpactProjectile54235426RIdle1Monster036: equ $4000 + (216*128) + (000/2) - 128 5427RIdle2Monster036: equ $4000 + (216*128) + (016/2) - 128 5428RIdle3Monster036: equ $4000 + (216*128) + (032/2) - 128 5429RAttack1Monster036: equ $4000 + (216*128) + (048/2) - 128 5431LIdle1Monster036: equ $4000 + (216*128) + (144/2) - 128 5432LIdle2Monster036: equ $4000 + (216*128) + (128/2) - 128 5433LIdle3Monster036: equ $4000 + (216*128) + (112/2) - 128 5434LAttack1Monster036: equ $4000 + (216*128) + (080/2) - 128 5436Monster036Move: 5437Monster036Idle:5438 db 5 5439 db 4 5440 dw RIdle1Monster0365441 dw RIdle2Monster0365442 dw RIdle3Monster0365443 dw RIdle2Monster0365444 5445 dw LIdle1Monster0365446 dw LIdle2Monster0365447 dw LIdle3Monster0365448 dw LIdle2Monster0365449Monster036AttackPatternRight:5450 db 000,AnimateAttack | dw Rattack1Monster036 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster036 | db 128+16,WaitImpactProjectile5451Monster036AttackPatternLeft:5452 db 000,AnimateAttack | dw Lattack1Monster036 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster036 | db DisplaceRight,128+16,WaitImpactProjectile54535456RIdle1Monster037: equ $4000 + (000*128) + (000/2) - 128 5457RIdle2Monster037: equ $4000 + (000*128) + (016/2) - 128 5458RIdle3Monster037: equ $4000 + (000*128) + (032/2) - 128 5459RIdle4Monster037: equ $4000 + (000*128) + (048/2) - 128 5460RAttack1Monster037: equ $4000 + (000*128) + (064/2) - 128 5461RAttack2Monster037: equ $4000 + (000*128) + (096/2) - 128 5463LIdle1Monster037: equ $4000 + (000*128) + (240/2) - 128 5464LIdle2Monster037: equ $4000 + (000*128) + (224/2) - 128 5465LIdle3Monster037: equ $4000 + (000*128) + (208/2) - 128 5466LIdle4Monster037: equ $4000 + (000*128) + (192/2) - 128 5467LAttack1Monster037: equ $4000 + (000*128) + (160/2) - 128 5468LAttack2Monster037: equ $4000 + (000*128) + (128/2) - 128 5470Monster037Move: 5471Monster037Idle:5472 db 4 5473 db 4 5474 dw RIdle1Monster0375475 dw RIdle2Monster0375476 dw RIdle3Monster0375477 dw RIdle4Monster0375478 5479 dw LIdle1Monster0375480 dw LIdle2Monster0375481 dw LIdle3Monster0375482 dw LIdle4Monster0375483Monster037AttackPatternRight:5484 db AnimateAttack | dw Rattack1Monster037 | db 128+32,000,000,000,AnimateAttack | dw Rattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster037 | db 128+16,WaitImpactProjectile5485Monster037AttackPatternLeft:5486 db AnimateAttack | dw Lattack1Monster037 | db 128+32,DisplaceLeft,000,000,000,AnimateAttack | dw Lattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster037 | db DisplaceRight,128+16,WaitImpactProjectile54875490RIdle1Monster038: equ $4000 + (216*128) + (192/2) - 128 5491RIdle2Monster038: equ $4000 + (216*128) + (208/2) - 128 5493LIdle1Monster038: equ $4000 + (216*128) + (240/2) - 128 5494LIdle2Monster038: equ $4000 + (216*128) + (224/2) - 128 5496Monster038Move: 5497Monster038Idle:5498 db 5 5499 db 2 5500 dw RIdle1Monster0385501 dw RIdle2Monster0385502 5503 dw LIdle1Monster0385504 dw LIdle2Monster03855055508RIdle1Monster039: equ $4000 + (040*128) + (000/2) - 128 5509RIdle2Monster039: equ $4000 + (040*128) + (032/2) - 128 5510RIdle3Monster039: equ $4000 + (040*128) + (064/2) - 128 5512LIdle1Monster039: equ $4000 + (040*128) + (160/2) - 128 5513LIdle2Monster039: equ $4000 + (040*128) + (128/2) - 128 5514LIdle3Monster039: equ $4000 + (040*128) + (096/2) - 128 5516Monster039Move: 5517Monster039Idle:5518 db 3 5519 db 5 5520 dw RIdle1Monster0395521 dw RIdle2Monster0395522 dw RIdle2Monster0395523 dw RIdle3Monster0395524 dw RIdle3Monster0395525 5526 dw LIdle1Monster0395527 dw LIdle2Monster0395528 dw LIdle2Monster0395529 dw LIdle3Monster0395530 dw LIdle3Monster0395531Monster039AttackPatternRight:5532 db 000,AnimateAttack | dw RIdle1Monster039 | db ShootProjectile,WaitImpactProjectile5533Monster039AttackPatternLeft:5534 db 000,AnimateAttack | dw LIdle1Monster039 | db ShootProjectile,WaitImpactProjectile55355538RIdle1Monster040: equ $4000 + (080*128) + (000/2) - 128 5539RIdle2Monster040: equ $4000 + (080*128) + (032/2) - 128 5540RIdle3Monster040: equ $4000 + (080*128) + (064/2) - 128 5541RAttack1Monster040: equ $4000 + (080*128) + (096/2) - 128 5543LIdle1Monster040: equ $4000 + (080*128) + (224/2) - 128 5544LIdle2Monster040: equ $4000 + (080*128) + (192/2) - 128 5545LIdle3Monster040: equ $4000 + (080*128) + (160/2) - 128 5546LAttack1Monster040: equ $4000 + (080*128) + (128/2) - 128 5548Monster040Move: 5549Monster040Idle:5550 db 6 5551 db 3 5552 dw RIdle1Monster0405553 dw RIdle2Monster0405554 dw RIdle3Monster0405555 5556 dw LIdle1Monster0405557 dw LIdle2Monster0405558 dw LIdle3Monster0405559Monster040AttackPatternRight:5560 db 000,AnimateAttack | dw Rattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster040 | db WaitImpactProjectile5561Monster040AttackPatternLeft:5562 db 000,AnimateAttack | dw Lattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster040 | db WaitImpactProjectile55635566RIdle1Monster041: equ $4000 + (224*128) + (128/2) - 128 5567RIdle2Monster041: equ $4000 + (224*128) + (160/2) - 128 5569LIdle1Monster041: equ $4000 + (224*128) + (192/2) - 128 5570LIdle2Monster041: equ $4000 + (224*128) + (224/2) - 128 5572Monster041Move: 5573Monster041Idle:5574 db 1 5575 db 2 5576 dw RIdle1Monster0415577 dw RIdle2Monster0415578 5579 dw LIdle1Monster0415580 dw LIdle2Monster04155815584RIdle1Monster042: equ $4000 + (120*128) + (000/2) - 128 5585RIdle2Monster042: equ $4000 + (120*128) + (032/2) - 128 5587LIdle1Monster042: equ $4000 + (120*128) + (064/2) - 128 5588LIdle2Monster042: equ $4000 + (120*128) + (096/2) - 128 5590Monster042Move: 5591Monster042Idle:5592 db 5 5593 db 2 5594 dw RIdle1Monster0425595 dw RIdle2Monster0425596 5597 dw LIdle1Monster0425598 dw LIdle2Monster04255995602RIdle1Monster043: equ $4000 + (216*128) + (160/2) - 128 5603RIdle2Monster043: equ $4000 + (216*128) + (176/2) - 128 5604RIdle3Monster043: equ $4000 + (216*128) + (192/2) - 128 5605RAttack1Monster043: equ $4000 + (176*128) + (192/2) - 128 5607LIdle1Monster043: equ $4000 + (216*128) + (240/2) - 128 5608LIdle2Monster043: equ $4000 + (216*128) + (224/2) - 128 5609LIdle3Monster043: equ $4000 + (216*128) + (208/2) - 128 5610LAttack1Monster043: equ $4000 + (176*128) + (224/2) - 128 5612Monster043Move: 5613Monster043Idle:5614 db 4 5615 db 3 5616 dw RIdle1Monster0435617 dw RIdle2Monster0435618 dw RIdle3Monster0435619 5620 dw LIdle1Monster0435621 dw LIdle2Monster0435622 dw LIdle3Monster0435623Monster043AttackPatternRight:5624 db 000,AnimateAttack | dw Rattack1Monster043 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster043 | db 128+16,WaitImpactProjectile5625Monster043AttackPatternLeft:5626 db 000,AnimateAttack | dw Lattack1Monster043 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster043 | db DisplaceRight,128+16,WaitImpactProjectile56275630RIdle1Monster044: equ $4000 + (120*128) + (128/2) - 128 5631RIdle2Monster044: equ $4000 + (120*128) + (160/2) - 128 5633LIdle1Monster044: equ $4000 + (120*128) + (224/2) - 128 5634LIdle2Monster044: equ $4000 + (120*128) + (192/2) - 128 5636Monster044Move: 5637Monster044Idle:5638 db 6 5639 db 2 5640 dw RIdle1Monster0445641 dw RIdle2Monster0445642 5643 dw LIdle1Monster0445644 dw LIdle2Monster04456455648RIdle1Monster045: equ $4000 + (224*128) + (000/2) - 128 5649RIdle2Monster045: equ $4000 + (224*128) + (032/2) - 128 5651LIdle1Monster045: equ $4000 + (224*128) + (096/2) - 128 5652LIdle2Monster045: equ $4000 + (224*128) + (064/2) - 128 5654Monster045Move: 5655Monster045Idle:5656 db 9 5657 db 2 5658 dw RIdle1Monster0455659 dw RIdle2Monster0455660 5661 dw LIdle1Monster0455662 dw LIdle2Monster04556635666RIdle1Monster046: equ $4000 + (160*128) + (000/2) - 128 5667RIdle2Monster046: equ $4000 + (160*128) + (032/2) - 128 5669LIdle1Monster046: equ $4000 + (160*128) + (096/2) - 128 5670LIdle2Monster046: equ $4000 + (160*128) + (064/2) - 128 5672Monster046Move: 5673Monster046Idle:5674 db 9 5675 db 2 5676 dw RIdle1Monster0465677 dw RIdle2Monster0465678 5679 dw LIdle1Monster0465680 dw LIdle2Monster04656815684RIdle1Monster047: equ $4000 + (176*128) + (000/2) - 128 5685RIdle2Monster047: equ $4000 + (176*128) + (032/2) - 128 5686RIdle3Monster047: equ $4000 + (176*128) + (064/2) - 128 5688LIdle1Monster047: equ $4000 + (176*128) + (160/2) - 128 5689LIdle2Monster047: equ $4000 + (176*128) + (128/2) - 128 5690LIdle3Monster047: equ $4000 + (176*128) + (096/2) - 128 5692Monster047Move: 5693Monster047Idle:5694 db 13 5695 db 4 5696 dw RIdle1Monster0475697 dw RIdle2Monster0475698 dw RIdle1Monster0475699 dw RIdle3Monster0475700 5701 dw LIdle1Monster0475702 dw LIdle2Monster0475703 dw LIdle1Monster0475704 dw LIdle3Monster0475705Monster047AttackPatternRight:5706 db 000,AnimateAttack | dw RIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile5707Monster047AttackPatternLeft:5708 db 000,AnimateAttack | dw LIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile57095712RIdle1Monster048: equ $4000 + (136*128) + (096/2) - 128 5713RIdle2Monster048: equ $4000 + (136*128) + (112/2) - 128 5714RIdle3Monster048: equ $4000 + (136*128) + (128/2) - 128 5715RIdle4Monster048: equ $4000 + (136*128) + (144/2) - 128 5716RIdle5Monster048: equ $4000 + (136*128) + (160/2) - 128 5718LIdle1Monster048: equ $4000 + (136*128) + (240/2) - 128 5719LIdle2Monster048: equ $4000 + (136*128) + (224/2) - 128 5720LIdle3Monster048: equ $4000 + (136*128) + (208/2) - 128 5721LIdle4Monster048: equ $4000 + (136*128) + (192/2) - 128 5722LIdle5Monster048: equ $4000 + (136*128) + (176/2) - 128 5724Monster048Move: 5725Monster048Idle:5726 db 05 5727 db 8 5728 dw RIdle1Monster0485729 dw RIdle2Monster0485730 dw RIdle3Monster0485731 dw RIdle4Monster0485732 dw RIdle5Monster0485733 dw RIdle4Monster0485734 dw RIdle3Monster0485735 dw RIdle2Monster0485736 5737 dw LIdle1Monster0485738 dw LIdle2Monster0485739 dw LIdle3Monster0485740 dw LIdle4Monster0485741 dw LIdle5Monster0485742 dw LIdle4Monster0485743 dw LIdle3Monster0485744 dw LIdle2Monster04857455748RIdle1Monster049: equ $4000 + (224*128) + (000/2) - 128 5749RIdle2Monster049: equ $4000 + (224*128) + (016/2) - 128 5750RAttack1Monster049: equ $4000 + (224*128) + (032/2) - 128 5752LIdle1Monster049: equ $4000 + (224*128) + (080/2) - 128 5753LIdle2Monster049: equ $4000 + (224*128) + (064/2) - 128 5754LAttack1Monster049: equ $4000 + (224*128) + (048/2) - 128 5756Monster049Move: 5757Monster049Idle:5758 db 06 5759 db 2 5760 dw RIdle1Monster0495761 dw RIdle2Monster0495762 5763 dw LIdle1Monster0495764 dw LIdle2Monster0495765Monster049AttackPatternRight:5766 db AnimateAttack | dw Rattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile5767Monster049AttackPatternLeft:5768 db AnimateAttack | dw Lattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile57705773RIdle1Monster050: equ $4000 + (184*128) + (128/2) - 128 5774RIdle2Monster050: equ $4000 + (184*128) + (144/2) - 128 5776LIdle1Monster050: equ $4000 + (184*128) + (176/2) - 128 5777LIdle2Monster050: equ $4000 + (184*128) + (160/2) - 128 5779Monster050Move: 5780Monster050Idle:5781 db 06 5782 db 2 5783 dw RIdle1Monster0505784 dw RIdle2Monster0505785 5786 dw LIdle1Monster0505787 dw LIdle2Monster05057885791RIdle1Monster051: equ $4000 + (160*128) + (128/2) - 128 5792RIdle2Monster051: equ $4000 + (160*128) + (144/2) - 128 5794LIdle1Monster051: equ $4000 + (160*128) + (176/2) - 128 5795LIdle2Monster051: equ $4000 + (160*128) + (160/2) - 128 5797Monster051Move: 5798Monster051Idle:5799 db 06 5800 db 2 5801 dw RIdle1Monster0515802 dw RIdle2Monster0515803 5804 dw LIdle1Monster0515805 dw LIdle2Monster05158065809RIdle1Monster052: equ $4000 + (160*128) + (192/2) - 128 5810RIdle2Monster052: equ $4000 + (160*128) + (208/2) - 128 5812LIdle1Monster052: equ $4000 + (160*128) + (240/2) - 128 5813LIdle2Monster052: equ $4000 + (160*128) + (224/2) - 128 5815Monster052Move: 5816Monster052Idle:5817 db 06 5818 db 2 5819 dw RIdle1Monster0525820 dw RIdle2Monster0525821 5822 dw LIdle1Monster0525823 dw LIdle2Monster05258245827RIdle1Monster053: equ $4000 + (152*128) + (032/2) - 128 5828RIdle2Monster053: equ $4000 + (152*128) + (048/2) - 128 5830LIdle1Monster053: equ $4000 + (152*128) + (080/2) - 128 5831LIdle2Monster053: equ $4000 + (152*128) + (064/2) - 128 5833Monster053Move: 5834Monster053Idle:5835 db 06 5836 db 2 5837 dw RIdle1Monster0535838 dw RIdle2Monster0535839 5840 dw LIdle1Monster0535841 dw LIdle2Monster05358425845RIdle1Monster054: equ $4000 + (184*128) + (192/2) - 128 5846RIdle2Monster054: equ $4000 + (184*128) + (208/2) - 128 5848LIdle1Monster054: equ $4000 + (184*128) + (240/2) - 128 5849LIdle2Monster054: equ $4000 + (184*128) + (224/2) - 128 5851Monster054Move: 5852Monster054Idle:5853 db 08 5854 db 2 5855 dw RIdle1Monster0545856 dw RIdle2Monster0545857 5858 dw LIdle1Monster0545859 dw LIdle2Monster05458605863RIdle1Monster055: equ $4000 + (000*128) + (000/2) - 128 5864RIdle2Monster055: equ $4000 + (000*128) + (032/2) - 128 5865RAttack1Monster055: equ $4000 + (000*128) + (064/2) - 128 5867LIdle1Monster055: equ $4000 + (000*128) + (160/2) - 128 5868LIdle2Monster055: equ $4000 + (000*128) + (128/2) - 128 5869LAttack1Monster055: equ $4000 + (000*128) + (096/2) - 128 5871Monster055Move: 5872Monster055Idle:5873 db 06 5874 db 2 5875 dw RIdle1Monster0555876 dw RIdle2Monster0555877 5878 dw LIdle1Monster0555879 dw LIdle2Monster0555880Monster055AttackPatternRight:5881 db 000,AnimateAttack | dw RAttack1Monster055 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5882Monster055AttackPatternLeft:5883 db 000,AnimateAttack | dw LAttack1Monster055 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5884Monster055AttackPatternLeftUp:5885 db 000,AnimateAttack | dw LAttack1Monster055 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5886Monster055AttackPatternLeftDown:5887 db 000,AnimateAttack | dw LAttack1Monster055 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5888Monster055AttackPatternRightUp:5889 db 000,AnimateAttack | dw RAttack1Monster055 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5890Monster055AttackPatternRightDown:5891 db 000,AnimateAttack | dw RAttack1Monster055 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack58925895RIdle1Monster056: equ $4000 + (000*128) + (192/2) - 128 5896RIdle2Monster056: equ $4000 + (000*128) + (224/2) - 128 5898LIdle1Monster056: equ $4000 + (040*128) + (224/2) - 128 5899LIdle2Monster056: equ $4000 + (040*128) + (192/2) - 128 5901Monster056Move: 5902Monster056Idle:5903 db 06 5904 db 2 5905 dw RIdle1Monster0565906 dw RIdle2Monster0565907 5908 dw LIdle1Monster0565909 dw LIdle2Monster05659105913RIdle1Monster057: equ $4000 + (040*128) + (000/2) - 128 5914RIdle2Monster057: equ $4000 + (040*128) + (032/2) - 128 5915RIdle3Monster057: equ $4000 + (040*128) + (064/2) - 128 5917LIdle1Monster057: equ $4000 + (040*128) + (160/2) - 128 5918LIdle2Monster057: equ $4000 + (040*128) + (128/2) - 128 5919LIdle3Monster057: equ $4000 + (040*128) + (096/2) - 128 5921Monster057Move: 5922Monster057Idle:5923 db 06 5924 db 4 5925 dw RIdle1Monster0575926 dw RIdle2Monster0575927 dw RIdle3Monster0575928 dw RIdle2Monster0575929 5930 dw LIdle1Monster0575931 dw LIdle2Monster0575932 dw LIdle3Monster0575933 dw LIdle2Monster05759345937RIdle1Monster058: equ $4000 + (080*128) + (000/2) - 128 5938RIdle2Monster058: equ $4000 + (080*128) + (032/2) - 128 5939RAttack1Monster058: equ $4000 + (080*128) + (064/2) - 128 5941LIdle1Monster058: equ $4000 + (080*128) + (160/2) - 128 5942LIdle2Monster058: equ $4000 + (080*128) + (128/2) - 128 5943LAttack1Monster058: equ $4000 + (080*128) + (096/2) - 128 5945Monster058Move: 5946Monster058Idle:5947 db 06 5948 db 2 5949 dw RIdle1Monster0585950 dw RIdle2Monster0585951 5952 dw LIdle1Monster0585953 dw LIdle2Monster0585954Monster058AttackPatternRight:5955 db 000,AnimateAttack | dw RAttack1Monster058 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5956Monster058AttackPatternLeft:5957 db 000,AnimateAttack | dw LAttack1Monster058 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5958Monster058AttackPatternLeftUp:5959 db 000,AnimateAttack | dw LAttack1Monster058 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5960Monster058AttackPatternLeftDown:5961 db 000,AnimateAttack | dw LAttack1Monster058 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5962Monster058AttackPatternRightUp:5963 db 000,AnimateAttack | dw RAttack1Monster058 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5964Monster058AttackPatternRightDown:5965 db 000,AnimateAttack | dw RAttack1Monster058 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack59665969RIdle1Monster059: equ $4000 + (120*128) + (000/2) - 128 5970RIdle2Monster059: equ $4000 + (120*128) + (032/2) - 128 5972LIdle1Monster059: equ $4000 + (120*128) + (096/2) - 128 5973LIdle2Monster059: equ $4000 + (120*128) + (064/2) - 128 5975Monster059Move: 5976Monster059Idle:5977 db 06 5978 db 2 5979 dw RIdle1Monster0595980 dw RIdle2Monster0595981 5982 dw LIdle1Monster0595983 dw LIdle2Monster05959845987RIdle1Monster060: equ $4000 + (120*128) + (128/2) - 128 5988RIdle2Monster060: equ $4000 + (120*128) + (160/2) - 128 5990LIdle1Monster060: equ $4000 + (120*128) + (224/2) - 128 5991LIdle2Monster060: equ $4000 + (120*128) + (192/2) - 128 5993Monster060Move: 5994Monster060Idle:5995 db 06 5996 db 2 5997 dw RIdle1Monster0605998 dw RIdle2Monster0605999 6000 dw LIdle1Monster0606001 dw LIdle2Monster06060026005RIdle1Monster061: equ $4000 + (160*128) + (000/2) - 128 6006RIdle2Monster061: equ $4000 + (160*128) + (048/2) - 128 6008LIdle1Monster061: equ $4000 + (160*128) + (144/2) - 128 6009LIdle2Monster061: equ $4000 + (160*128) + (096/2) - 128 6011Monster061Move: 6012Monster061Idle:6013 db 06 6014 db 2 6015 dw RIdle1Monster0616016 dw RIdle2Monster0616017 6018 dw LIdle1Monster0616019 dw LIdle2Monster06160206023RIdle1Monster062: equ $4000 + (200*128) + (000/2) - 128 6024RIdle2Monster062: equ $4000 + (200*128) + (032/2) - 128 6025RMove1Monster062: equ $4000 + (200*128) + (064/2) - 128 6026RMove2Monster062: equ $4000 + (200*128) + (096/2) - 128 6027RAttack1Monster062: equ $4000 + (080*128) + (192/2) - 128 6029LIdle1Monster062: equ $4000 + (200*128) + (224/2) - 128 6030LIdle2Monster062: equ $4000 + (200*128) + (192/2) - 128 6031LMove1Monster062: equ $4000 + (200*128) + (160/2) - 128 6032LMove2Monster062: equ $4000 + (200*128) + (128/2) - 128 6033LAttack1Monster062: equ $4000 + (160*128) + (192/2) - 128 6035Monster062Move: 6036 db 06 6037 db 2 6038 dw RMove1Monster0626039 dw RMove2Monster0626040 6041 dw LMove1Monster0626042 dw LMove2Monster0626043Monster062Idle:6044 db 06 6045 db 2 6046 dw RIdle1Monster0626047 dw RIdle2Monster0626048 6049 dw LIdle1Monster0626050 dw LIdle2Monster0626051Monster062AttackPatternRight:6052 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6053Monster062AttackPatternLeft:6054 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6055Monster062AttackPatternLeftUp:6056 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6057Monster062AttackPatternLeftDown:6058 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6059Monster062AttackPatternRightUp:6060 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6061Monster062AttackPatternRightDown:6062 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack 60636066RIdle1Monster063: equ $4000 + (208*128) + (192/2) - 128 6067RIdle2Monster063: equ $4000 + (208*128) + (208/2) - 128 6069LIdle1Monster063: equ $4000 + (208*128) + (240/2) - 128 6070LIdle2Monster063: equ $4000 + (208*128) + (224/2) - 128 6072Monster063Move: 6073Monster063Idle:6074 db 06 6075 db 2 6076 dw RIdle1Monster0636077 dw RIdle2Monster0636078 6079 dw LIdle1Monster0636080 dw LIdle2Monster06360816084RIdle1Monster064: equ $4000 + (232*128) + (192/2) - 128 6085RIdle2Monster064: equ $4000 + (232*128) + (208/2) - 128 6087LIdle1Monster064: equ $4000 + (232*128) + (240/2) - 128 6088LIdle2Monster064: equ $4000 + (232*128) + (224/2) - 128 6090Monster064Move: 6091Monster064Idle:6092 db 06 6093 db 2 6094 dw RIdle1Monster0646095 dw RIdle2Monster0646096 6097 dw LIdle1Monster0646098 dw LIdle2Monster06460996102RIdle1Monster065: equ $4000 + (000*128) + (064/2) - 128 6103RIdle2Monster065: equ $4000 + (000*128) + (080/2) - 128 6105LIdle1Monster065: equ $4000 + (000*128) + (112/2) - 128 6106LIdle2Monster065: equ $4000 + (000*128) + (096/2) - 128 6108Monster065Move: 6109Monster065Idle:6110 db 06 6111 db 2 6112 dw RIdle1Monster0656113 dw RIdle2Monster0656114 6115 dw LIdle1Monster0656116 dw LIdle2Monster06561176120RIdle1Monster066: equ $4000 + (152*128) + (096/2) - 128 6121RIdle2Monster066: equ $4000 + (152*128) + (112/2) - 128 6123LIdle1Monster066: equ $4000 + (152*128) + (144/2) - 128 6124LIdle2Monster066: equ $4000 + (152*128) + (128/2) - 128 6126Monster066Move: 6127Monster066Idle:6128 db 06 6129 db 2 6130 dw RIdle1Monster0666131 dw RIdle2Monster0666132 6133 dw LIdle1Monster0666134 dw LIdle2Monster06661356138RIdle1Monster067: equ $4000 + (000*128) + (000/2) - 128 6139RIdle2Monster067: equ $4000 + (000*128) + (016/2) - 128 6141LIdle1Monster067: equ $4000 + (000*128) + (048/2) - 128 6142LIdle2Monster067: equ $4000 + (000*128) + (032/2) - 128 6144Monster067Move: 6145Monster067Idle:6146 db 06 6147 db 2 6148 dw RIdle1Monster0676149 dw RIdle2Monster0676150 6151 dw LIdle1Monster0676152 dw LIdle2Monster06761536156RIdle1Monster068: equ $4000 + (024*128) + (000/2) - 128 6157RIdle2Monster068: equ $4000 + (024*128) + (032/2) - 128 6159LIdle1Monster068: equ $4000 + (024*128) + (096/2) - 128 6160LIdle2Monster068: equ $4000 + (024*128) + (064/2) - 128 6162Monster068Move: 6163Monster068Idle:6164 db 06 6165 db 2 6166 dw RIdle1Monster0686167 dw RIdle2Monster0686168 6169 dw LIdle1Monster0686170 dw LIdle2Monster06861716174RIdle1Monster069: equ $4000 + (024*128) + (128/2) - 128 6175RIdle2Monster069: equ $4000 + (024*128) + (160/2) - 128 6177LIdle1Monster069: equ $4000 + (024*128) + (224/2) - 128 6178LIdle2Monster069: equ $4000 + (024*128) + (192/2) - 128 6180Monster069Move: 6181Monster069Idle:6182 db 06 6183 db 2 6184 dw RIdle1Monster0696185 dw RIdle2Monster0696186 6187 dw LIdle1Monster0696188 dw LIdle2Monster0696189Monster069AttackPatternRight:6190 db 000,AnimateAttack | dw RIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile6191Monster069AttackPatternLeft:6192 db 000,AnimateAttack | dw LIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile61936196RIdle1Monster070: equ $4000 + (184*128) + (192/2) - 128 6197RIdle2Monster070: equ $4000 + (184*128) + (208/2) - 128 6199LIdle1Monster070: equ $4000 + (184*128) + (240/2) - 128 6200LIdle2Monster070: equ $4000 + (184*128) + (224/2) - 128 6202Monster070Move: 6203Monster070Idle:6204 db 06 6205 db 2 6206 dw RIdle1Monster0706207 dw RIdle2Monster0706208 6209 dw LIdle1Monster0706210 dw LIdle2Monster07062116214RIdle1Monster071: equ $4000 + (000*128) + (000/2) - 1286215RIdle2Monster071: equ $4000 + (000*128) + (064/2) - 1286217LIdle1Monster071: equ $4000 + (000*128) + (192/2) - 1286218LIdle2Monster071: equ $4000 + (000*128) + (128/2) - 1286220Monster071Move: 6221Monster071Idle:6222 db 3 6223 db 2 6224 dw RIdle1Monster0716225 dw RIdle2Monster0716226 6227 dw LIdle1Monster0716228 dw LIdle2Monster071622962356237RIdle1Monster072: equ $4000 + (064*128) + (000/2) - 1286238RIdle2Monster072: equ $4000 + (064*128) + (032/2) - 1286240LIdle1Monster072: equ $4000 + (064*128) + (096/2) - 1286241LIdle2Monster072: equ $4000 + (064*128) + (064/2) - 1286243Monster072Move: 6244Monster072Idle:6245 db 8 6246 db 2 6247 dw RIdle1Monster0726248 dw RIdle2Monster0726249 6250 dw LIdle1Monster0726251 dw LIdle2Monster07262526255RIdle1Monster073: equ $4000 + (064*128) + (128/2) - 1286256RIdle2Monster073: equ $4000 + (064*128) + (160/2) - 1286258LIdle1Monster073: equ $4000 + (064*128) + (224/2) - 1286259LIdle2Monster073: equ $4000 + (064*128) + (192/2) - 1286261Monster073Move: 6262Monster073Idle:6263 db 8 6264 db 2 6265 dw RIdle1Monster0736266 dw RIdle2Monster0736267 6268 dw LIdle1Monster0736269 dw LIdle2Monster07362706273RIdle1Monster074: equ $4000 + (000*128) + (128/2) - 1286274RIdle2Monster074: equ $4000 + (000*128) + (144/2) - 1286276LIdle1Monster074: equ $4000 + (000*128) + (176/2) - 1286277LIdle2Monster074: equ $4000 + (000*128) + (160/2) - 1286279Monster074Move: 6280Monster074Idle:6281 db 7 6282 db 2 6283 dw RIdle1Monster0746284 dw RIdle2Monster0746285 6286 dw LIdle1Monster0746287 dw LIdle2Monster07462886291RIdle1Monster075: equ $4000 + (000*128) + (192/2) - 1286292RIdle2Monster075: equ $4000 + (000*128) + (208/2) - 1286294LIdle1Monster075: equ $4000 + (000*128) + (240/2) - 1286295LIdle2Monster075: equ $4000 + (000*128) + (224/2) - 1286297Monster075Move: 6298Monster075Idle:6299 db 7 6300 db 2 6301 dw RIdle1Monster0756302 dw RIdle2Monster0756303 6304 dw LIdle1Monster0756305 dw LIdle2Monster07563066309RIdle1Monster076: equ $4000 + (104*128) + (000/2) - 1286310RIdle2Monster076: equ $4000 + (104*128) + (016/2) - 1286312LIdle1Monster076: equ $4000 + (104*128) + (048/2) - 1286313LIdle2Monster076: equ $4000 + (104*128) + (032/2) - 1286315Monster076Move: 6316Monster076Idle:6317 db 6 6318 db 2 6319 dw RIdle1Monster0766320 dw RIdle2Monster0766321 6322 dw LIdle1Monster0766323 dw LIdle2Monster07663246327RIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286328RIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286329RIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286331LIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286332LIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286333LIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286335Monster077Move: 6336Monster077Idle:6337 db 5 6338 db 4 6339 dw RIdle1Monster0776340 dw RIdle2Monster0776341 dw RIdle3Monster0776342 dw RIdle2Monster0776343 6344 dw LIdle1Monster0776345 dw LIdle2Monster0776346 dw LIdle3Monster0776347 dw LIdle2Monster07763486351RIdle1Monster078: equ $4000 + (096*128) + (240/2) - 1286352RIdle2Monster078: equ $4000 + (176*128) + (240/2) - 1286354LIdle1Monster078: equ $4000 + (176*128) + (240/2) - 1286355LIdle2Monster078: equ $4000 + (096*128) + (240/2) - 1286357Monster078Move: 6358Monster078Idle:6359 db 6 6360 db 2 6361 dw RIdle1Monster0786362 dw RIdle2Monster0786363 6364 dw LIdle1Monster0786365 dw LIdle2Monster07863666369RIdle1Monster079: equ $4000 + (104*128) + (064/2) - 1286370RIdle2Monster079: equ $4000 + (104*128) + (080/2) - 1286372LIdle1Monster079: equ $4000 + (104*128) + (112/2) - 1286373LIdle2Monster079: equ $4000 + (104*128) + (096/2) - 1286375Monster079Move: 6376Monster079Idle:6377 db 6 6378 db 2 6379 dw RIdle1Monster0796380 dw RIdle2Monster0796381 6382 dw LIdle1Monster0796383 dw LIdle2Monster07963846387RIdle1Monster080: equ $4000 + (240*128) + (032/2) - 1286388RIdle2Monster080: equ $4000 + (240*128) + (048/2) - 1286390LIdle1Monster080: equ $4000 + (240*128) + (080/2) - 1286391LIdle2Monster080: equ $4000 + (240*128) + (064/2) - 1286393Monster080Move: 6394Monster080Idle:6395 db 9 6396 db 2 6397 dw RIdle1Monster0806398 dw RIdle2Monster0806399 6400 dw LIdle1Monster0806401 dw LIdle2Monster08064026405RIdle1Monster081: equ $4000 + (104*128) + (128/2) - 1286406RIdle2Monster081: equ $4000 + (104*128) + (144/2) - 1286408LIdle1Monster081: equ $4000 + (104*128) + (176/2) - 1286409LIdle2Monster081: equ $4000 + (104*128) + (160/2) - 1286411Monster081Move: 6412Monster081Idle:6413 db 8 6414 db 2 6415 dw RIdle1Monster0816416 dw RIdle2Monster0816417 6418 dw LIdle1Monster0816419 dw LIdle2Monster08164206423RIdle1Monster082: equ $4000 + (080*128) + (240/2) - 1286424RIdle2Monster082: equ $4000 + (160*128) + (240/2) - 1286426LIdle1Monster082: equ $4000 + (240*128) + (016/2) - 1286427LIdle2Monster082: equ $4000 + (240*128) + (000/2) - 1286429Monster082Move: 6430Monster082Idle:6431 db 6 6432 db 2 6433 dw RIdle1Monster0826434 dw RIdle2Monster0826435 6436 dw LIdle1Monster0826437 dw LIdle2Monster08264386441RIdle1Monster083: equ $4000 + (104*128) + (192/2) - 1286442RIdle2Monster083: equ $4000 + (104*128) + (208/2) - 1286444LIdle1Monster083: equ $4000 + (104*128) + (240/2) - 1286445LIdle2Monster083: equ $4000 + (104*128) + (224/2) - 1286447Monster083Move: 6448Monster083Idle:6449 db 6 6450 db 2 6451 dw RIdle1Monster0836452 dw RIdle2Monster0836453 6454 dw LIdle1Monster0836455 dw LIdle2Monster08364566459RIdle1Monster084: equ $4000 + (224*128) + (128/2) - 1286460RIdle2Monster084: equ $4000 + (224*128) + (144/2) - 1286462LIdle1Monster084: equ $4000 + (224*128) + (176/2) - 1286463LIdle2Monster084: equ $4000 + (224*128) + (160/2) - 1286465Monster084Move: 6466Monster084Idle:6467 db 8 6468 db 2 6469 dw RIdle1Monster0846470 dw RIdle2Monster0846471 6472 dw LIdle1Monster0846473 dw LIdle2Monster08464746477RIdle1Monster085: equ $4000 + (040*128) + (192/2) - 1286478RIdle2Monster085: equ $4000 + (040*128) + (208/2) - 1286480LIdle1Monster085: equ $4000 + (040*128) + (240/2) - 1286481LIdle2Monster085: equ $4000 + (040*128) + (224/2) - 1286483Monster085Move: 6484Monster085Idle:6485 db 9 6486 db 2 6487 dw RIdle1Monster0856488 dw RIdle2Monster0856489 6490 dw LIdle1Monster0856491 dw LIdle2Monster08564926495RIdle1Monster086: equ $4000 + (000*128) + (000/2) - 1286496RIdle2Monster086: equ $4000 + (000*128) + (056/2) - 1286498LIdle1Monster086: equ $4000 + (000*128) + (112/2) - 1286499LIdle2Monster086: equ $4000 + (000*128) + (168/2) - 1286501Monster086Move: 6502Monster086Idle:6503 db 2 6504 db 2 6505 dw RIdle1Monster0866506 dw RIdle2Monster0866507 6508 dw LIdle1Monster0866509 dw LIdle2Monster08665106513RIdle1Monster087: equ $4000 + (128*128) + (128/2) - 1286514RIdle2Monster087: equ $4000 + (128*128) + (144/2) - 1286516LIdle1Monster087: equ $4000 + (128*128) + (176/2) - 1286517LIdle2Monster087: equ $4000 + (128*128) + (160/2) - 1286519Monster087Move: 6520Monster087Idle:6521 db 8 6522 db 2 6523 dw RIdle1Monster0876524 dw RIdle2Monster0876525 6526 dw LIdle1Monster0876527 dw LIdle2Monster08765286531RIdle1Monster088: equ $4000 + (128*128) + (000/2) - 1286532RIdle2Monster088: equ $4000 + (128*128) + (016/2) - 1286534LIdle1Monster088: equ $4000 + (128*128) + (048/2) - 1286535LIdle2Monster088: equ $4000 + (128*128) + (032/2) - 1286537Monster088Move: 6538Monster088Idle:6539 db 8 6540 db 2 6541 dw RIdle1Monster0886542 dw RIdle2Monster0886543 6544 dw LIdle1Monster0886545 dw LIdle2Monster08865466549RIdle1Monster089: equ $4000 + (128*128) + (064/2) - 1286550RIdle2Monster089: equ $4000 + (128*128) + (080/2) - 1286552LIdle1Monster089: equ $4000 + (128*128) + (112/2) - 1286553LIdle2Monster089: equ $4000 + (128*128) + (096/2) - 1286555Monster089Move: 6556Monster089Idle:6557 db 9 6558 db 2 6559 dw RIdle1Monster0896560 dw RIdle2Monster0896561 6562 dw LIdle1Monster0896563 dw LIdle2Monster08965646567RIdle1Monster090: equ $4000 + (240*128) + (096/2) - 1286568RIdle2Monster090: equ $4000 + (240*128) + (112/2) - 1286570LIdle1Monster090: equ $4000 + (240*128) + (144/2) - 1286571LIdle2Monster090: equ $4000 + (240*128) + (128/2) - 1286573Monster090Move: 6574Monster090Idle:6575 db 8 6576 db 2 6577 dw RIdle1Monster0906578 dw RIdle2Monster0906579 6580 dw LIdle1Monster0906581 dw LIdle2Monster09065826585RIdle1Monster091: equ $4000 + (128*128) + (192/2) - 1286586RIdle2Monster091: equ $4000 + (128*128) + (208/2) - 1286588LIdle1Monster091: equ $4000 + (128*128) + (240/2) - 1286589LIdle2Monster091: equ $4000 + (128*128) + (224/2) - 1286591Monster091Move: 6592Monster091Idle:6593 db 7 6594 db 2 6595 dw RIdle1Monster0916596 dw RIdle2Monster0916597 6598 dw LIdle1Monster0916599 dw LIdle2Monster09166006603RIdle1Monster092: equ $4000 + (168*128) + (000/2) - 1286604RIdle2Monster092: equ $4000 + (168*128) + (016/2) - 1286606LIdle1Monster092: equ $4000 + (168*128) + (048/2) - 1286607LIdle2Monster092: equ $4000 + (168*128) + (032/2) - 1286609Monster092Move: 6610Monster092Idle:6611 db 7 6612 db 2 6613 dw RIdle1Monster0926614 dw RIdle2Monster0926615 6616 dw LIdle1Monster0926617 dw LIdle2Monster0926618Monster092AttackPatternLeft:6619Monster092AttackPatternRight:6620 db ShootProjectile,WaitImpactProjectile66216624RIdle1Monster093: equ $4000 + (168*128) + (064/2) - 1286625RIdle2Monster093: equ $4000 + (168*128) + (080/2) - 1286627LIdle1Monster093: equ $4000 + (168*128) + (112/2) - 1286628LIdle2Monster093: equ $4000 + (168*128) + (096/2) - 1286630Monster093Move: 6631Monster093Idle:6632 db 7 6633 db 2 6634 dw RIdle1Monster0936635 dw RIdle2Monster0936636 6637 dw LIdle1Monster0936638 dw LIdle2Monster0936639Monster093AttackPatternLeft:6640Monster093AttackPatternRight:6641 db ShootProjectile,WaitImpactProjectile66426645RIdle1Monster094: equ $4000 + (168*128) + (128/2) - 1286646RIdle2Monster094: equ $4000 + (168*128) + (144/2) - 1286648LIdle1Monster094: equ $4000 + (168*128) + (176/2) - 1286649LIdle2Monster094: equ $4000 + (168*128) + (160/2) - 1286651Monster094Move: 6652Monster094Idle:6653 db 7 6654 db 2 6655 dw RIdle1Monster0946656 dw RIdle2Monster0946657 6658 dw LIdle1Monster0946659 dw LIdle2Monster0946660Monster094AttackPatternLeft:6661Monster094AttackPatternRight:6662 db ShootProjectile,WaitImpactProjectile66636666RIdle1Monster095: equ $4000 + (096*128) + (048/2) - 128 6667RIdle2Monster095: equ $4000 + (096*128) + (064/2) - 128 6668RIdle3Monster095: equ $4000 + (096*128) + (080/2) - 128 6669RAttack1Monster095: equ $4000 + (096*128) + (096/2) - 128 6670RAttack2Monster095: equ $4000 + (096*128) + (112/2) - 128 6671RAttack3Monster095: equ $4000 + (096*128) + (144/2) - 128 6673LIdle1Monster095: equ $4000 + (128*128) + (048/2) - 128 6674LIdle2Monster095: equ $4000 + (128*128) + (032/2) - 128 6675LIdle3Monster095: equ $4000 + (128*128) + (016/2) - 128 6676LAttack1Monster095: equ $4000 + (128*128) + (000/2) - 128 6677LAttack2Monster095: equ $4000 + (032*128) + (224/2) - 128 6678LAttack3Monster095: equ $4000 + (096*128) + (192/2) - 128 6680Monster095Move: 6681Monster095Idle:6682 db 5 6683 db 4 6684 dw RIdle1Monster0956685 dw RIdle2Monster0956686 dw RIdle3Monster0956687 dw RIdle2Monster0956688 6689 dw LIdle1Monster0956690 dw LIdle2Monster0956691 dw LIdle3Monster0956692 dw LIdle2Monster0956693Monster095AttackPatternRight:6694 db 000,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,000,InitiateAttack6695Monster095AttackPatternLeft:6696 db 000,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,000,InitiateAttack6697Monster095AttackPatternLeftUp:6698 db 002,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,006,InitiateAttack6699Monster095AttackPatternLeftDown:6700 db 004,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,008,InitiateAttack6701Monster095AttackPatternRightUp:6702 db 008,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,004,InitiateAttack6703Monster095AttackPatternRightDown:6704 db 006,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,002,InitiateAttack67056708RIdle1Monster096: equ $4000 + (000*128) + (000/2) - 128 6709RIdle2Monster096: equ $4000 + (000*128) + (032/2) - 128 6710RIdle3Monster096: equ $4000 + (000*128) + (064/2) - 128 6711RAttack1Monster096: equ $4000 + (000*128) + (096/2) - 128 6712RAttack2Monster096: equ $4000 + (000*128) + (128/2) - 128 6714LIdle1Monster096: equ $4000 + (032*128) + (032/2) - 128 6715LIdle2Monster096: equ $4000 + (032*128) + (000/2) - 128 6716LIdle3Monster096: equ $4000 + (000*128) + (224/2) - 128 6717LAttack1Monster096: equ $4000 + (000*128) + (192/2) - 128 6718LAttack2Monster096: equ $4000 + (000*128) + (160/2) - 128 6720Monster096Move: 6721Monster096Idle:6722 db 7 6723 db 4 6724 dw RIdle1Monster0966725 dw RIdle2Monster0966726 dw RIdle3Monster0966727 dw RIdle2Monster0966728 6729 dw LIdle1Monster0966730 dw LIdle2Monster0966731 dw LIdle3Monster0966732 dw LIdle2Monster0966733Monster096AttackPatternRight:6734 db 000,AnimateAttack | dw RAttack1Monster096 | db 003,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 007,InitiateAttack6735Monster096AttackPatternLeft:6736 db 000,AnimateAttack | dw LAttack1Monster096 | db 007,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 003,InitiateAttack6737Monster096AttackPatternLeftUp:6738 db 000,AnimateAttack | dw LAttack1Monster096 | db 002,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 006,InitiateAttack6739Monster096AttackPatternLeftDown:6740 db 000,AnimateAttack | dw LAttack1Monster096 | db 004,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 008,InitiateAttack6741Monster096AttackPatternRightUp:6742 db 000,AnimateAttack | dw RAttack1Monster096 | db 008,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 004,InitiateAttack6743Monster096AttackPatternRightDown:6744 db 000,AnimateAttack | dw RAttack1Monster096 | db 006,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 002,InitiateAttack67456748RIdle1Monster097: equ $4000 + (128*128) + (160/2) - 128 6749RIdle2Monster097: equ $4000 + (128*128) + (176/2) - 128 6750RIdle3Monster097: equ $4000 + (128*128) + (192/2) - 128 6752LIdle1Monster097: equ $4000 + (128*128) + (240/2) - 128 6753LIdle2Monster097: equ $4000 + (128*128) + (224/2) - 128 6754LIdle3Monster097: equ $4000 + (128*128) + (208/2) - 128 6756Monster097Move: 6757Monster097Idle:6758 db 3 6759 db 3 6760 dw RIdle1Monster0976761 dw RIdle2Monster0976762 dw RIdle3Monster0976763 6764 dw LIdle1Monster0976765 dw LIdle2Monster0976766 dw LIdle3Monster09767676770RIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6771RIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6772RIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6773RIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6775LIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6776LIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6777LIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6778LIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6780Monster098Move: 6781Monster098Idle:6782 db 3 6783 db 5 6784 dw RIdle1Monster0986785 dw RIdle2Monster0986786 dw RIdle3Monster0986787 dw RIdle4Monster0986788 dw RIdle2Monster0986789 6790 dw LIdle1Monster0986791 dw LIdle2Monster0986792 dw LIdle3Monster0986793 dw LIdle4Monster0986794 dw LIdle2Monster09867956798RIdle1Monster099: equ $4000 + (128*128) + (064/2) - 128 6799RIdle2Monster099: equ $4000 + (128*128) + (080/2) - 128 6800RIdle3Monster099: equ $4000 + (128*128) + (096/2) - 128 6802LIdle1Monster099: equ $4000 + (128*128) + (144/2) - 128 6803LIdle2Monster099: equ $4000 + (128*128) + (128/2) - 128 6804LIdle3Monster099: equ $4000 + (128*128) + (112/2) - 128 6806Monster099Move: 6807Monster099Idle:6808 db 3 6809 db 4 6810 dw RIdle1Monster0996811 dw RIdle2Monster0996812 dw RIdle3Monster0996813 dw RIdle2Monster0996814 6815 dw LIdle1Monster0996816 dw LIdle2Monster0996817 dw LIdle3Monster0996818 dw LIdle2Monster09968196822RIdle1Monster100: equ $4000 + (240*128) + (160/2) - 128 6823RIdle2Monster100: equ $4000 + (240*128) + (176/2) - 128 6825LIdle1Monster100: equ $4000 + (240*128) + (208/2) - 128 6826LIdle2Monster100: equ $4000 + (240*128) + (192/2) - 128 6828Monster100Move: 6829Monster100Idle:6830 db 7 6831 db 2 6832 dw RIdle1Monster1006833 dw RIdle2Monster1006834 6835 dw LIdle1Monster1006836 dw LIdle2Monster10068376840RIdle1Monster101: equ $4000 + (032*128) + (064/2) - 128 6841RIdle2Monster101: equ $4000 + (032*128) + (112/2) - 128 6842RIdle3Monster101: equ $4000 + (032*128) + (160/2) - 128 6843RAttack1Monster101: equ $4000 + (064*128) + (000/2) - 128 6845LIdle1Monster101: equ $4000 + (064*128) + (192/2) - 128 6846LIdle2Monster101: equ $4000 + (064*128) + (144/2) - 128 6847LIdle3Monster101: equ $4000 + (064*128) + (096/2) - 128 6848LAttack1Monster101: equ $4000 + (064*128) + (048/2) - 128 6850Monster101Move: 6851Monster101Idle:6852 db 4 6853 db 3 6854 dw RIdle1Monster1016855 dw RIdle2Monster1016856 dw RIdle3Monster1016857 6858 dw LIdle1Monster1016859 dw LIdle2Monster1016860 dw LIdle3Monster1016861Monster101AttackPatternRight:6862 db AnimateAttack | dw RIdle2Monster101 | db 003,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,007,InitiateAttack6863Monster101AttackPatternLeft:6864 db AnimateAttack | dw LIdle2Monster101 | db 007,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,003,InitiateAttack6865Monster101AttackPatternLeftUp:6866 db AnimateAttack | dw LIdle2Monster101 | db 008,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,004,InitiateAttack6867Monster101AttackPatternLeftDown:6868 db AnimateAttack | dw LIdle2Monster101 | db 006,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,002,InitiateAttack6869Monster101AttackPatternRightUp:6870 db AnimateAttack | dw RIdle2Monster101 | db 002,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,006,InitiateAttack6871Monster101AttackPatternRightDown:6872 db AnimateAttack | dw RIdle2Monster101 | db 004,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,008,InitiateAttack68806883RIdle1Monster102: equ $4000 + (000*128) + (000/2) - 128 6884RIdle2Monster102: equ $4000 + (000*128) + (032/2) - 128 6885Rattack1Monster102: equ $4000 + (000*128) + (064/2) - 128 6886Rattack2Monster102: equ $4000 + (000*128) + (112/2) - 128 6888LIdle1Monster102: equ $4000 + (040*128) + (032/2) - 128 6889LIdle2Monster102: equ $4000 + (040*128) + (000/2) - 128 6890Lattack1Monster102: equ $4000 + (000*128) + (208/2) - 128 6891Lattack2Monster102: equ $4000 + (000*128) + (160/2) - 128 6893Monster102Move:6894Monster102Idle:6895 db 5 6896 db 2 6897 dw RIdle1Monster1026898 dw RIdle2Monster1026899 6900 dw LIdle1Monster1026901 dw LIdle2Monster1026902Monster102AttackPatternRight:6903 db AnimateAttack | dw RIdle1Monster102 | db 003,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 007,InitiateAttack6904Monster102AttackPatternRightUp:6905 db AnimateAttack | dw RIdle1Monster102 | db 008,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 004,InitiateAttack6906Monster102AttackPatternRightDown:6907 db AnimateAttack | dw RIdle1Monster102 | db 006,128+48,AnimateAttack | dw Rattack2Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 002,InitiateAttack6908Monster102AttackPatternLeft:6909 db AnimateAttack | dw LIdle1Monster102 | db 000,007,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,003,000,InitiateAttack6910Monster102AttackPatternLeftUp:6911 db AnimateAttack | dw LIdle1Monster102 | db 000,002,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,006,000,InitiateAttack6912Monster102AttackPatternLeftDown:6913 db AnimateAttack | dw LIdle1Monster102 | db 000,004,128+48,AnimateAttack | dw Lattack2Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,008,000,InitiateAttack69146917RIdle1Monster103: equ $4000 + (080*128) + (000/2) - 128 6918RIdle2Monster103: equ $4000 + (080*128) + (048/2) - 128 6919Rattack1Monster103: equ $4000 + (080*128) + (096/2) - 128 6920Rattack2Monster103: equ $4000 + (080*128) + (144/2) - 128 6922LIdle1Monster103: equ $4000 + (128*128) + (160/2) - 128 6923LIdle2Monster103: equ $4000 + (128*128) + (112/2) - 128 6924Lattack1Monster103: equ $4000 + (128*128) + (064/2) - 128 6925Lattack2Monster103: equ $4000 + (128*128) + (000/2) - 128 6927Monster103Move:6928Monster103Idle:6929 db 5 6930 db 2 6931 dw RIdle1Monster1036932 dw RIdle2Monster1036933 6934 dw LIdle1Monster1036935 dw LIdle2Monster1036936Monster103AttackPatternRight:6937 db AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,InitiateAttack6938Monster103AttackPatternRightUp:6939 db AnimateAttack | dw RIdle2Monster103 | db 008,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 004,InitiateAttack6940Monster103AttackPatternRightDown:6941 db AnimateAttack | dw RIdle2Monster103 | db 006,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 002,InitiateAttack6942Monster103AttackPatternLeft:6943 db AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,InitiateAttack6944Monster103AttackPatternLeftUp:6945 db AnimateAttack | dw LIdle2Monster103 | db 002,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 006,InitiateAttack6946Monster103AttackPatternLeftDown:6947 db AnimateAttack | dw LIdle2Monster103 | db 004,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 008,InitiateAttack69486951RIdle1Monster104: equ $4000 + (040*128) + (064/2) - 128 6952RIdle2Monster104: equ $4000 + (040*128) + (096/2) - 128 6953Rattack1Monster104: equ $4000 + (040*128) + (128/2) - 128 6955LIdle1Monster104: equ $4000 + (040*128) + (224/2) - 128 6956LIdle2Monster104: equ $4000 + (040*128) + (192/2) - 128 6957Lattack1Monster104: equ $4000 + (040*128) + (160/2) - 128 6959Monster104Move:6960Monster104Idle:6961 db 5 6962 db 2 6963 dw RIdle1Monster1046964 dw RIdle2Monster1046965 6966 dw LIdle1Monster1046967 dw LIdle2Monster1046968Monster104AttackPatternRight:6969 db 000,AnimateAttack | dw Rattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster104 | db WaitImpactProjectile6970Monster104AttackPatternLeft:6971 db 000,AnimateAttack | dw Lattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster104 | db WaitImpactProjectile69736976RIdle1Monster105: equ $4000 + (176*128) + (000/2) - 128 6977RIdle2Monster105: equ $4000 + (176*128) + (048/2) - 128 6978Rattack1Monster105: equ $4000 + (080*128) + (208/2) - 128 6980LIdle1Monster105: equ $4000 + (176*128) + (144/2) - 128 6981LIdle2Monster105: equ $4000 + (176*128) + (096/2) - 128 6982Lattack1Monster105: equ $4000 + (128*128) + (208/2) - 128 6984Monster105Move:6985Monster105Idle:6986 db 5 6987 db 2 6988 dw RIdle1Monster1056989 dw RIdle2Monster1056990 6991 dw LIdle1Monster1056992 dw LIdle2Monster1056993Monster105AttackPatternRight:6994 db AnimateAttack | dw RIdle2Monster105 | db 003,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 007,InitiateAttack6995Monster105AttackPatternRightUp:6996 db AnimateAttack | dw RIdle2Monster105 | db 008,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 004,InitiateAttack6997Monster105AttackPatternRightDown:6998 db AnimateAttack | dw RIdle2Monster105 | db 006,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 002,InitiateAttack6999Monster105AttackPatternLeft:7000 db AnimateAttack | dw LIdle2Monster105 | db 007,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 003,InitiateAttack7001Monster105AttackPatternLeftUp:7002 db AnimateAttack | dw LIdle2Monster105 | db 002,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 006,InitiateAttack7003Monster105AttackPatternLeftDown:7004 db AnimateAttack | dw LIdle2Monster105 | db 004,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 008,InitiateAttack70057008RIdle1Monster106: equ $4000 + (040*128) + (000/2) - 128 7009RIdle2Monster106: equ $4000 + (040*128) + (048/2) - 128 7010Rattack1Monster106: equ $4000 + (120*128) + (160/2) - 128 7012LIdle1Monster106: equ $4000 + (040*128) + (208/2) - 128 7013LIdle2Monster106: equ $4000 + (040*128) + (160/2) - 128 7014Lattack1Monster106: equ $4000 + (120*128) + (208/2) - 128 7016Monster106Move:7017Monster106Idle:7018 db 5 7019 db 2 7020 dw RIdle1Monster1067021 dw RIdle2Monster1067022 7023 dw LIdle1Monster1067024 dw LIdle2Monster1067025Monster106AttackPatternRight:7026 db AnimateAttack | dw RIdle2Monster106 | db 003,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 007,InitiateAttack7027Monster106AttackPatternRightUp:7028 db AnimateAttack | dw RIdle2Monster106 | db 008,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 004,InitiateAttack7029Monster106AttackPatternRightDown:7030 db AnimateAttack | dw RIdle2Monster106 | db 006,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 002,InitiateAttack7031Monster106AttackPatternLeft:7032 db AnimateAttack | dw LIdle2Monster106 | db 007,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 003,InitiateAttack7033Monster106AttackPatternLeftUp:7034 db AnimateAttack | dw LIdle2Monster106 | db 002,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 006,InitiateAttack7035Monster106AttackPatternLeftDown:7036 db AnimateAttack | dw LIdle2Monster106 | db 004,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 008,InitiateAttack70377041RIdle1Monster107: equ $4000 + (080*128) + (000/2) - 128 7042RIdle2Monster107: equ $4000 + (080*128) + (048/2) - 128 7043Rattack1Monster107: equ $4000 + (120*128) + (000/2) - 128 7045LIdle1Monster107: equ $4000 + (080*128) + (208/2) - 128 7046LIdle2Monster107: equ $4000 + (080*128) + (160/2) - 128 7047Lattack1Monster107: equ $4000 + (120*128) + (048/2) - 128 7049Monster107Move:7050Monster107Idle:7051 db 5 7052 db 2 7053 dw RIdle1Monster1077054 dw RIdle2Monster1077055 7056 dw LIdle1Monster1077057 dw LIdle2Monster1077058Monster107AttackPatternRight:7059 db AnimateAttack | dw RIdle2Monster107 | db 003,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 007,InitiateAttack7060Monster107AttackPatternRightUp:7061 db AnimateAttack | dw RIdle2Monster107 | db 008,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 004,InitiateAttack7062Monster107AttackPatternRightDown:7063 db AnimateAttack | dw RIdle2Monster107 | db 006,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 002,InitiateAttack7064Monster107AttackPatternLeft:7065 db AnimateAttack | dw LIdle2Monster107 | db 007,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 003,InitiateAttack7066Monster107AttackPatternLeftUp:7067 db AnimateAttack | dw LIdle2Monster107 | db 002,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 006,InitiateAttack7068Monster107AttackPatternLeftDown:7069 db AnimateAttack | dw LIdle2Monster107 | db 004,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 008,InitiateAttack70707073RIdle1Monster108: equ $4000 + (040*128) + (096/2) - 128 7074RIdle2Monster108: equ $4000 + (080*128) + (096/2) - 128 7075Rattack1Monster108: equ $4000 + (160*128) + (000/2) - 128 7077LIdle1Monster108: equ $4000 + (040*128) + (128/2) - 128 7078LIdle2Monster108: equ $4000 + (080*128) + (128/2) - 128 7079Lattack1Monster108: equ $4000 + (160*128) + (048/2) - 128 7081Monster108Move:7082Monster108Idle:7083 db 5 7084 db 2 7085 dw RIdle1Monster1087086 dw RIdle2Monster1087087 7088 dw LIdle1Monster1087089 dw LIdle2Monster1087090Monster108AttackPatternRight:7091 db AnimateAttack | dw RIdle2Monster108 | db 003,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,007,InitiateAttack7092Monster108AttackPatternRightUp:7093 db AnimateAttack | dw RIdle2Monster108 | db 008,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,004,InitiateAttack7094Monster108AttackPatternRightDown:7095 db AnimateAttack | dw RIdle2Monster108 | db 006,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,002,InitiateAttack7096Monster108AttackPatternLeft:7097 db AnimateAttack | dw LIdle2Monster108 | db 007,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,003,InitiateAttack7098Monster108AttackPatternLeftUp:7099 db AnimateAttack | dw LIdle2Monster108 | db 002,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,006,InitiateAttack7100Monster108AttackPatternLeftDown:7101 db AnimateAttack | dw LIdle2Monster108 | db 004,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,008,InitiateAttack71027105RIdle1Monster109: equ $4000 + (000*128) + (000/2) - 128 7106RIdle2Monster109: equ $4000 + (000*128) + (032/2) - 128 7107Rattack1Monster109: equ $4000 + (000*128) + (064/2) - 128 7108Rattack2Monster109: equ $4000 + (000*128) + (096/2) - 128 7110LIdle1Monster109: equ $4000 + (000*128) + (224/2) - 128 7111LIdle2Monster109: equ $4000 + (000*128) + (192/2) - 128 7112Lattack1Monster109: equ $4000 + (000*128) + (160/2) - 128 7113Lattack2Monster109: equ $4000 + (000*128) + (128/2) - 128 7115Monster109Move:7116Monster109Idle:7117 db 5 7118 db 2 7119 dw RIdle1Monster1097120 dw RIdle2Monster1097121 7122 dw LIdle1Monster1097123 dw LIdle2Monster1097124Monster109AttackPatternRight:7125 db 000,AnimateAttack | dw Rattack1Monster109 | db 000,000,AnimateAttack | dw Rattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw RIdle1Monster109 | db WaitImpactProjectile7126Monster109AttackPatternLeft:7127 db 000,AnimateAttack | dw Lattack1Monster109 | db 000,000,AnimateAttack | dw Lattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw LIdle1Monster109 | db WaitImpactProjectile71297132RIdle1Monster110: equ $4000 + (200*128) + (032/2) - 128 7133RIdle2Monster110: equ $4000 + (200*128) + (000/2) - 128 7135LIdle1Monster110: equ $4000 + (200*128) + (064/2) - 128 7136LIdle2Monster110: equ $4000 + (200*128) + (096/2) - 128 7138Monster110Move:7139 db 4 7140 db 1 7141 dw RIdle2Monster1107142 7143 dw LIdle2Monster1107144Monster110Idle:7145 db 12 7146 db 2 7147 dw RIdle1Monster1107148 dw RIdle2Monster1107149 7150 dw LIdle1Monster1107151 dw LIdle2Monster1107152Monster110AttackPatternRight:7153 db AnimateAttack | dw RIdle2Monster110 | db 000,AnimateAttack | dw RIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile7154Monster110AttackPatternLeft:7155 db AnimateAttack | dw LIdle2Monster110 | db 000,AnimateAttack | dw LIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile715771617163RIdle1Monster111: equ $4000 + (160*128) + (064/2) - 128 7164RIdle2Monster111: equ $4000 + (160*128) + (096/2) - 128 7165RIdle3Monster111: equ $4000 + (160*128) + (128/2) - 128 7167LIdle1Monster111: equ $4000 + (160*128) + (224/2) - 128 7168LIdle2Monster111: equ $4000 + (160*128) + (192/2) - 128 7169LIdle3Monster111: equ $4000 + (160*128) + (160/2) - 128 7171Monster111Move:7172Monster111Idle:7173 db 05 7174 db 3 7175 dw RIdle1Monster1117176 dw RIdle2Monster1117177 dw RIdle3Monster1117178 7179 dw LIdle1Monster1117180 dw LIdle2Monster1117181 dw LIdle3Monster11171837186RIdle1Monster112: equ $4000 + (192*128) + (064/2) - 128 7187RIdle2Monster112: equ $4000 + (192*128) + (096/2) - 128 7188RAttack1Monster112: equ $4000 + (192*128) + (128/2) - 128 7190LIdle1Monster112: equ $4000 + (192*128) + (224/2) - 128 7191LIdle2Monster112: equ $4000 + (192*128) + (192/2) - 128 7192LAttack1Monster112: equ $4000 + (192*128) + (160/2) - 128 7194Monster112Move:7195Monster112Idle:7196 db 06 7197 db 2 7198 dw RIdle1Monster1127199 dw RIdle2Monster1127200 7201 dw LIdle1Monster1127202 dw LIdle2Monster1127203Monster112AttackPatternRight:7204 db AnimateAttack | dw RAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile7205Monster112AttackPatternLeft:7206 db AnimateAttack | dw LAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile72087211RIdle1Monster113: equ $4000 + (224*128) + (064/2) - 128 7212RIdle2Monster113: equ $4000 + (224*128) + (096/2) - 128 7213RAttack1Monster113: equ $4000 + (224*128) + (128/2) - 128 7215LIdle1Monster113: equ $4000 + (224*128) + (224/2) - 128 7216LIdle2Monster113: equ $4000 + (224*128) + (192/2) - 128 7217LAttack1Monster113: equ $4000 + (224*128) + (160/2) - 128 7219Monster113Move:7220Monster113Idle:7221 db 09 7222 db 2 7223 dw RIdle1Monster1137224 dw RIdle2Monster1137225 7226 dw LIdle1Monster1137227 dw LIdle2Monster1137228Monster113AttackPatternRight:7229 db AnimateAttack | dw RAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile7230Monster113AttackPatternLeft:7231 db AnimateAttack | dw LAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile72337236RIdle1Monster114: equ $4000 + (176*128) + (000/2) - 128 7237RIdle2Monster114: equ $4000 + (176*128) + (032/2) - 128 7239LIdle1Monster114: equ $4000 + (216*128) + (032/2) - 128 7240LIdle2Monster114: equ $4000 + (216*128) + (000/2) - 128 7242Monster114Move:7243Monster114Idle:7244 db 08 7245 db 2 7246 dw RIdle1Monster1147247 dw RIdle2Monster1147248 7249 dw LIdle1Monster1147250 dw LIdle2Monster11472527255RIdle1Monster115: equ $4000 + (120*128) + (096/2) - 128 7256RIdle2Monster115: equ $4000 + (120*128) + (128/2) - 128 7257RAttack1Monster115: equ $4000 + (184*128) + (128/2) - 128 7259LIdle1Monster115: equ $4000 + (152*128) + (128/2) - 128 7260LIdle2Monster115: equ $4000 + (152*128) + (096/2) - 128 7261LAttack1Monster115: equ $4000 + (216*128) + (128/2) - 128 7263Monster115Move:7264Monster115Idle:7265 db 06 7266 db 2 7267 dw RIdle1Monster1157268 dw RIdle2Monster1157269 7270 dw LIdle1Monster1157271 dw LIdle2Monster1157272Monster115AttackPatternRight:7273 db AnimateAttack | dw RAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile7274Monster115AttackPatternLeft:7275 db AnimateAttack | dw LAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile72777280RIdle1Monster116: equ $4000 + (160*128) + (160/2) - 128 7281RIdle2Monster116: equ $4000 + (160*128) + (192/2) - 128 7282RAttack1Monster116: equ $4000 + (160*128) + (224/2) - 128 7284LIdle1Monster116: equ $4000 + (192*128) + (224/2) - 128 7285LIdle2Monster116: equ $4000 + (192*128) + (192/2) - 128 7286LAttack1Monster116: equ $4000 + (192*128) + (160/2) - 128 7288Monster116Move:7289Monster116Idle:7290 db 06 7291 db 2 7292 dw RIdle1Monster1167293 dw RIdle2Monster1167294 7295 dw LIdle1Monster1167296 dw LIdle2Monster1167297Monster116AttackPatternRight:7298 db AnimateAttack | dw RAttack1Monster116 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7299Monster116AttackPatternRightUp:7300 db AnimateAttack | dw RAttack1Monster116 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7301Monster116AttackPatternRightDown:7302 db AnimateAttack | dw RAttack1Monster116 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7303Monster116AttackPatternLeft:7304 db AnimateAttack | dw LAttack1Monster116 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7305Monster116AttackPatternLeftUp:7306 db AnimateAttack | dw LAttack1Monster116 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7307Monster116AttackPatternLeftDown:7308 db AnimateAttack | dw LAttack1Monster116 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73107313RIdle1Monster117: equ $4000 + (000*128) + (000/2) - 128 7314RIdle2Monster117: equ $4000 + (000*128) + (032/2) - 128 7315RIdle3Monster117: equ $4000 + (000*128) + (064/2) - 128 7316RAttack1Monster117: equ $4000 + (000*128) + (096/2) - 128 7318LIdle1Monster117: equ $4000 + (000*128) + (224/2) - 128 7319LIdle2Monster117: equ $4000 + (000*128) + (192/2) - 128 7320LIdle3Monster117: equ $4000 + (000*128) + (160/2) - 128 7321LAttack1Monster117: equ $4000 + (000*128) + (128/2) - 128 7323Monster117Move:7324Monster117Idle:7325 db 04 7326 db 3 7327 dw RIdle1Monster1177328 dw RIdle2Monster1177329 dw RIdle3Monster1177330 7331 dw LIdle1Monster1177332 dw LIdle2Monster1177333 dw LIdle3Monster1177334Monster117AttackPatternRight:7335 db AnimateAttack | dw RAttack1Monster117 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7336Monster117AttackPatternRightUp:7337 db AnimateAttack | dw RAttack1Monster117 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7338Monster117AttackPatternRightDown:7339 db AnimateAttack | dw RAttack1Monster117 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7340Monster117AttackPatternLeft:7341 db AnimateAttack | dw LAttack1Monster117 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7342Monster117AttackPatternLeftUp:7343 db AnimateAttack | dw LAttack1Monster117 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7344Monster117AttackPatternLeftDown:7345 db AnimateAttack | dw LAttack1Monster117 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73477350RIdle1Monster118: equ $4000 + (064*128) + (000/2) - 128 7351RIdle2Monster118: equ $4000 + (064*128) + (032/2) - 128 7352RAttack1Monster118: equ $4000 + (064*128) + (064/2) - 128 7354LIdle1Monster118: equ $4000 + (064*128) + (160/2) - 128 7355LIdle2Monster118: equ $4000 + (064*128) + (128/2) - 128 7356LAttack1Monster118: equ $4000 + (064*128) + (096/2) - 128 7358Monster118Move:7359Monster118Idle:7360 db 06 7361 db 2 7362 dw RIdle1Monster1187363 dw RIdle2Monster1187364 7365 dw LIdle1Monster1187366 dw LIdle2Monster1187367Monster118AttackPatternRight:7368 db AnimateAttack | dw RAttack1Monster118 | db 003 | db ShowBeingHitSprite,000,000,000,007,InitiateAttack7369Monster118AttackPatternRightUp:7370 db AnimateAttack | dw RAttack1Monster118 | db 002 | db ShowBeingHitSprite,000,000,000,006,InitiateAttack7371Monster118AttackPatternRightDown:7372 db AnimateAttack | dw RAttack1Monster118 | db 004 | db ShowBeingHitSprite,000,000,000,008,InitiateAttack7373Monster118AttackPatternLeft:7374 db AnimateAttack | dw LAttack1Monster118 | db 007 | db ShowBeingHitSprite,000,000,000,003,InitiateAttack7375Monster118AttackPatternLeftUp:7376 db AnimateAttack | dw LAttack1Monster118 | db 008 | db ShowBeingHitSprite,000,000,000,004,InitiateAttack7377Monster118AttackPatternLeftDown:7378 db AnimateAttack | dw LAttack1Monster118 | db 006 | db ShowBeingHitSprite,000,000,000,002,InitiateAttack73807383RIdle1Monster119: equ $4000 + (032*128) + (000/2) - 128 7384RIdle2Monster119: equ $4000 + (032*128) + (032/2) - 128 7385RAttack1Monster119: equ $4000 + (032*128) + (064/2) - 128 7386RAttack2Monster119: equ $4000 + (032*128) + (096/2) - 128 7388LIdle1Monster119: equ $4000 + (032*128) + (224/2) - 128 7389LIdle2Monster119: equ $4000 + (032*128) + (192/2) - 128 7390LAttack1Monster119: equ $4000 + (032*128) + (160/2) - 128 7391LAttack2Monster119: equ $4000 + (032*128) + (128/2) - 128 7393Monster119Move:7394Monster119Idle:7395 db 06 7396 db 2 7397 dw RIdle1Monster1197398 dw RIdle2Monster1197399 7400 dw LIdle1Monster1197401 dw LIdle2Monster1197402Monster119AttackPatternRight:7403 db AnimateAttack | dw RAttack1Monster119 | db 000,000,000,AnimateAttack | dw RAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile7404Monster119AttackPatternLeft:7405 db AnimateAttack | dw LAttack1Monster119 | db 000,000,000,AnimateAttack | dw LAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile74077410RIdle1Monster120: equ $4000 + (064*128) + (192/2) - 128 7411RIdle2Monster120: equ $4000 + (064*128) + (224/2) - 128 7412RAttack1Monster120: equ $4000 + (096*128) + (000/2) - 128 7414LIdle1Monster120: equ $4000 + (096*128) + (096/2) - 128 7415LIdle2Monster120: equ $4000 + (096*128) + (064/2) - 128 7416LAttack1Monster120: equ $4000 + (096*128) + (032/2) - 128 7418Monster120Move:7419Monster120Idle:7420 db 06 7421 db 2 7422 dw RIdle1Monster1207423 dw RIdle2Monster1207424 7425 dw LIdle1Monster1207426 dw LIdle2Monster1207427Monster120AttackPatternRight:7428 db AnimateAttack | dw RAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile7429Monster120AttackPatternLeft:7430 db AnimateAttack | dw LAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile74327435RIdle1Monster121: equ $4000 + (128*128) + (000/2) - 128 7436RIdle2Monster121: equ $4000 + (128*128) + (048/2) - 128 7437RIdle3Monster121: equ $4000 + (128*128) + (096/2) - 128 7439LIdle1Monster121: equ $4000 + (192*128) + (096/2) - 128 7440LIdle2Monster121: equ $4000 + (192*128) + (048/2) - 128 7441LIdle3Monster121: equ $4000 + (192*128) + (000/2) - 128 7443Monster121Move:7444Monster121Idle:7445 db 04 7446 db 4 7447 dw RIdle1Monster1217448 dw RIdle2Monster1217449 dw RIdle1Monster1217450 dw RIdle3Monster1217451 7452 dw LIdle1Monster1217453 dw LIdle2Monster1217454 dw LIdle1Monster1217455 dw LIdle3Monster121745774607462RIdle1Monster122: equ $4000 + (096*128) + (128/2) - 128 7463RIdle2Monster122: equ $4000 + (096*128) + (144/2) - 128 7464RIdle3Monster122: equ $4000 + (096*128) + (160/2) - 128 7465RIdle4Monster122: equ $4000 + (096*128) + (176/2) - 128 7467LIdle1Monster122: equ $4000 + (096*128) + (240/2) - 128 7468LIdle2Monster122: equ $4000 + (096*128) + (224/2) - 128 7469LIdle3Monster122: equ $4000 + (096*128) + (208/2) - 128 7470LIdle4Monster122: equ $4000 + (096*128) + (192/2) - 128 7472Monster122Move:7473Monster122Idle:7474 db 5 7475 db 6 7476 dw RIdle1Monster1227477 dw RIdle2Monster1227478 dw RIdle3Monster1227479 dw RIdle4Monster1227480 dw RIdle3Monster1227481 dw RIdle2Monster1227482 7483 dw LIdle1Monster1227484 dw LIdle2Monster1227485 dw LIdle3Monster1227486 dw LIdle4Monster1227487 dw LIdle3Monster1227488 dw LIdle2Monster1227489Monster122AttackPatternRight:7490 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 003,000,ShowBeingHitSprite,007,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7491Monster122AttackPatternRightUp:7492 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 002,000,ShowBeingHitSprite,006,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7493Monster122AttackPatternRightDown:7494 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 004,000,ShowBeingHitSprite,008,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7495Monster122AttackPatternLeft:7496 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 007,000,ShowBeingHitSprite,003,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7497Monster122AttackPatternLeftUp:7498 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 008,000,ShowBeingHitSprite,004,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7499Monster122AttackPatternLeftDown:7500 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 006,000,ShowBeingHitSprite,002,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack75017504RIdle1Monster123: equ $4000 + (128*128) + (144/2) - 128 7505RIdle2Monster123: equ $4000 + (128*128) + (160/2) - 128 7506RIdle3Monster123: equ $4000 + (128*128) + (176/2) - 128 7507RIdle4Monster123: equ $4000 + (128*128) + (192/2) - 128 7509LIdle1Monster123: equ $4000 + (160*128) + (144/2) - 128 7510LIdle2Monster123: equ $4000 + (128*128) + (240/2) - 128 7511LIdle3Monster123: equ $4000 + (128*128) + (224/2) - 128 7512LIdle4Monster123: equ $4000 + (128*128) + (208/2) - 128 7514Monster123Move:7515Monster123Idle:7516 db 04 7517 db 6 7518 dw RIdle1Monster1237519 dw RIdle2Monster1237520 dw RIdle3Monster1237521 dw RIdle4Monster1237522 dw RIdle3Monster1237523 dw RIdle2Monster1237524 7525 dw LIdle1Monster1237526 dw LIdle2Monster1237527 dw LIdle3Monster1237528 dw LIdle4Monster1237529 dw LIdle3Monster1237530 dw LIdle2Monster12375327535RIdle1Monster124: equ $4000 + (000*128) + (224/2) - 128 7536RIdle2Monster124: equ $4000 + (000*128) + (240/2) - 128 7538LIdle1Monster124: equ $4000 + (032*128) + (240/2) - 128 7539LIdle2Monster124: equ $4000 + (032*128) + (224/2) - 128 7541Monster124Move:7542Monster124Idle:7543 db 08 7544 db 2 7545 dw RIdle1Monster1247546 dw RIdle2Monster1247547 7548 dw LIdle1Monster1247549 dw LIdle2Monster12475517554RIdle1Monster125: equ $4000 + (184*128) + (128/2) - 128 7555RIdle2Monster125: equ $4000 + (184*128) + (144/2) - 128 7556Rattack1Monster125: equ $4000 + (184*128) + (160/2) - 128 7558LIdle1Monster125: equ $4000 + (184*128) + (208/2) - 128 7559LIdle2Monster125: equ $4000 + (184*128) + (192/2) - 128 7560Lattack1Monster125: equ $4000 + (184*128) + (176/2) - 128 7562Monster125Move:7563Monster125Idle:7564 db 07 7565 db 2 7566 dw RIdle1Monster1257567 dw RIdle2Monster1257568 7569 dw LIdle1Monster1257570 dw LIdle2Monster1257571Monster125AttackPatternRight:7572 db AnimateAttack | dw RAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile7573Monster125AttackPatternLeft:7574 db AnimateAttack | dw LAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile757575857587RIdle1Monster126: equ $4000 + (192*128) + (176/2) - 128 7588RIdle2Monster126: equ $4000 + (192*128) + (192/2) - 128 7590LIdle1Monster126: equ $4000 + (192*128) + (224/2) - 128 7591LIdle2Monster126: equ $4000 + (192*128) + (208/2) - 128 7593Monster126Move:7594Monster126Idle:7595 db 08 7596 db 2 7597 dw RIdle1Monster1267598 dw RIdle2Monster1267599 7600 dw LIdle1Monster1267601 dw LIdle2Monster12676027605RIdle1Monster127: equ $4000 + (000*128) + (000/2) - 128 7606RIdle2Monster127: equ $4000 + (000*128) + (032/2) - 128 7607RIdle3Monster127: equ $4000 + (000*128) + (064/2) - 128 7608RAttack1Monster127: equ $4000 + (000*128) + (096/2) - 128 7609RAttack2Monster127: equ $4000 + (000*128) + (128/2) - 128 7610RAttack3Monster127: equ $4000 + (000*128) + (160/2) - 128 7612LIdle1Monster127: equ $4000 + (048*128) + (128/2) - 128 7613LIdle2Monster127: equ $4000 + (048*128) + (096/2) - 128 7614LIdle3Monster127: equ $4000 + (048*128) + (064/2) - 128 7615LAttack1Monster127: equ $4000 + (048*128) + (032/2) - 128 7616LAttack2Monster127: equ $4000 + (048*128) + (000/2) - 128 7617LAttack3Monster127: equ $4000 + (000*128) + (208/2) - 128 7619Monster127Move:7620Monster127Idle:7621 db 06 7622 db 4 7623 dw RIdle1Monster1277624 dw RIdle2Monster1277625 dw RIdle3Monster1277626 dw RIdle2Monster1277627 7628 dw LIdle1Monster1277629 dw LIdle2Monster1277630 dw LIdle3Monster1277631 dw LIdle2Monster1277633Monster127AttackPatternRight:7634 db 000,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 000,InitiateAttack7635Monster127AttackPatternRightUp:7636 db 008,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 004,InitiateAttack7637Monster127AttackPatternRightDown:7638 db 006,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 002,InitiateAttack7639Monster127AttackPatternLeft:7640 db 000,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 000,InitiateAttack7641Monster127AttackPatternLeftUp:7642 db 002,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 006,InitiateAttack7643Monster127AttackPatternLeftDown:7644 db 004,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 008,InitiateAttack76477650RIdle1Monster128: equ $4000 + (096*128) + (000/2) - 128 7651RIdle2Monster128: equ $4000 + (096*128) + (016/2) - 128 7652RIdle3Monster128: equ $4000 + (096*128) + (032/2) - 128 7654LIdle1Monster128: equ $4000 + (096*128) + (080/2) - 128 7655LIdle2Monster128: equ $4000 + (096*128) + (064/2) - 128 7656LIdle3Monster128: equ $4000 + (096*128) + (048/2) - 128 7658Monster128Move:7659 db 08 7660 db 1 7661 dw RIdle2Monster1287662 7663 dw LIdle2Monster1287664Monster128Idle:7665 db 08 7666 db 4 7667 dw RIdle1Monster1287668 dw RIdle2Monster1287669 dw RIdle3Monster1287670 dw RIdle2Monster1287671 7672 dw LIdle1Monster1287673 dw LIdle2Monster1287674 dw LIdle3Monster1287675 dw LIdle2Monster1287676Monster128AttackPatternRight:7677 db AnimateAttack | dw RIdle2Monster128 | db 003 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 007,InitiateAttack7678Monster128AttackPatternRightUp:7679 db AnimateAttack | dw RIdle2Monster128 | db 002 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 006,InitiateAttack7680Monster128AttackPatternRightDown:7681 db AnimateAttack | dw RIdle2Monster128 | db 004 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 008,InitiateAttack7682Monster128AttackPatternLeft:7683 db AnimateAttack | dw LIdle2Monster128 | db 007 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 003,InitiateAttack7684Monster128AttackPatternLeftUp:7685 db AnimateAttack | dw LIdle2Monster128 | db 008 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 004,InitiateAttack7686Monster128AttackPatternLeftDown:7687 db AnimateAttack | dw LIdle2Monster128 | db 006 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 002,InitiateAttack76897692RIdle1Monster129: equ $4000 + (096*128) + (224/2) - 128 7693RIdle2Monster129: equ $4000 + (136*128) + (192/2) - 128 7694RAttack1Monster129: equ $4000 + (136*128) + (224/2) - 128 7696LIdle1Monster129: equ $4000 + (176*128) + (224/2) - 128 7697LIdle2Monster129: equ $4000 + (176*128) + (192/2) - 128 7698LAttack1Monster129: equ $4000 + (176*128) + (160/2) - 128 7700Monster129Move:7701 db 04 7702 db 2 7703 dw RIdle1Monster1297704 dw RIdle2Monster1297705 7706 dw LIdle1Monster1297707 dw LIdle2Monster1297708Monster129Idle:7709 db 08 7710 db 2 7711 dw RIdle1Monster1297712 dw RIdle2Monster1297713 7714 dw LIdle1Monster1297715 dw LIdle2Monster1297716Monster129AttackPatternRight:7717 db AnimateAttack | dw RAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile7718Monster129AttackPatternLeft:7719 db AnimateAttack | dw LAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile 77207723RIdle1Monster130: equ $4000 + (176*128) + (000/2) - 128 7724RIdle2Monster130: equ $4000 + (176*128) + (016/2) - 128 7725RIdle3Monster130: equ $4000 + (176*128) + (032/2) - 128 7726RAttack1Monster130: equ $4000 + (176*128) + (048/2) - 128 7728LIdle1Monster130: equ $4000 + (176*128) + (144/2) - 128 7729LIdle2Monster130: equ $4000 + (176*128) + (128/2) - 128 7730LIdle3Monster130: equ $4000 + (176*128) + (112/2) - 128 7731LAttack1Monster130: equ $4000 + (176*128) + (080/2) - 128 7733Monster130Move:7734Monster130Idle:7735 db 05 7736 db 4 7737 dw RIdle1Monster1307738 dw RIdle2Monster1307739 dw RIdle3Monster1307740 dw RIdle2Monster1307741 7742 dw LIdle1Monster1307743 dw LIdle2Monster1307744 dw LIdle3Monster1307745 dw LIdle2Monster1307746Monster130AttackPatternRight:7747 db AnimateAttack | dw RIdle1Monster130 | db 003,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,007,InitiateAttack7748Monster130AttackPatternRightUp:7749 db AnimateAttack | dw RIdle1Monster130 | db 002,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,006,InitiateAttack7750Monster130AttackPatternRightDown:7751 db AnimateAttack | dw RIdle1Monster130 | db 004,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,008,InitiateAttack7752Monster130AttackPatternLeft:7753 db AnimateAttack | dw LIdle1Monster130 | db 007,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,003,InitiateAttack7754Monster130AttackPatternLeftUp:7755 db AnimateAttack | dw LIdle1Monster130 | db 008,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,004,InitiateAttack7756Monster130AttackPatternLeftDown:7757 db AnimateAttack | dw LIdle1Monster130 | db 006,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,002,InitiateAttack77597762RIdle1Monster131: equ $4000 + (216*128) + (000/2) - 128 7763RIdle2Monster131: equ $4000 + (216*128) + (016/2) - 128 7764RIdle3Monster131: equ $4000 + (216*128) + (032/2) - 128 7765RAttack1Monster131: equ $4000 + (216*128) + (048/2) - 128 7766RAttack2Monster131: equ $4000 + (216*128) + (064/2) - 128 7768LIdle1Monster131: equ $4000 + (216*128) + (144/2) - 128 7769LIdle2Monster131: equ $4000 + (216*128) + (128/2) - 128 7770LIdle3Monster131: equ $4000 + (216*128) + (112/2) - 128 7771LAttack1Monster131: equ $4000 + (216*128) + (096/2) - 128 7772LAttack2Monster131: equ $4000 + (216*128) + (080/2) - 128 7774Monster131Move:7775Monster131Idle:7776 db 05 7777 db 4 7778 dw RIdle1Monster1317779 dw RIdle2Monster1317780 dw RIdle3Monster1317781 dw RIdle2Monster1317782 7783 dw LIdle1Monster1317784 dw LIdle2Monster1317785 dw LIdle3Monster1317786 dw LIdle2Monster1317787Monster131AttackPatternRight:7788 db AnimateAttack | dw RIdle1Monster131 | db 003,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 007,InitiateAttack7789Monster131AttackPatternRightUp:7790 db AnimateAttack | dw RIdle1Monster131 | db 002,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 006,InitiateAttack7791Monster131AttackPatternRightDown:7792 db AnimateAttack | dw RIdle1Monster131 | db 004,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 008,InitiateAttack7793Monster131AttackPatternLeft:7794 db AnimateAttack | dw LIdle1Monster131 | db 007,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 003,InitiateAttack7795Monster131AttackPatternLeftUp:7796 db AnimateAttack | dw LIdle1Monster131 | db 008,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 004,InitiateAttack7797Monster131AttackPatternLeftDown:7798 db AnimateAttack | dw LIdle1Monster131 | db 006,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 002,InitiateAttack78067809RIdle1Monster132: equ $4000 + (136*128) + (000/2) - 128 7810RIdle2Monster132: equ $4000 + (136*128) + (016/2) - 128 7811RAttack1Monster132: equ $4000 + (136*128) + (032/2) - 128 7812RAttack2Monster132: equ $4000 + (136*128) + (064/2) - 128 7814LIdle1Monster132: equ $4000 + (136*128) + (176/2) - 128 7815LIdle2Monster132: equ $4000 + (136*128) + (160/2) - 128 7816LAttack1Monster132: equ $4000 + (136*128) + (128/2) - 128 7817LAttack2Monster132: equ $4000 + (136*128) + (096/2) - 128 7819Monster132Move:7820Monster132Idle:7821 db 08 7822 db 2 7823 dw RIdle1Monster1327824 dw RIdle2Monster1327825 7826 dw LIdle1Monster1327827 dw LIdle2Monster1327828Monster132AttackPatternRight:7829 db AnimateAttack | dw RIdle1Monster132 | db 000,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,000,InitiateAttack7830Monster132AttackPatternRightUp:7831 db AnimateAttack | dw RIdle1Monster132 | db 008,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,004,InitiateAttack7832Monster132AttackPatternRightDown:7833 db AnimateAttack | dw RIdle1Monster132 | db 006,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,002,InitiateAttack7834Monster132AttackPatternLeft:7835 db AnimateAttack | dw LIdle1Monster132 | db 000,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,000,InitiateAttack7836Monster132AttackPatternLeftUp:7837 db AnimateAttack | dw LIdle1Monster132 | db 002,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,006,InitiateAttack7838Monster132AttackPatternLeftDown:7839 db AnimateAttack | dw LIdle1Monster132 | db 004,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,008,InitiateAttack78417844RIdle1Monster133: equ $4000 + (096*128) + (096/2) - 128 7845RIdle2Monster133: equ $4000 + (096*128) + (112/2) - 128 7846RAttack1Monster133: equ $4000 + (096*128) + (128/2) - 128 7848LIdle1Monster133: equ $4000 + (096*128) + (208/2) - 128 7849LIdle2Monster133: equ $4000 + (096*128) + (192/2) - 128 7850LAttack1Monster133: equ $4000 + (096*128) + (160/2) - 128 7852Monster133Move:7853Monster133Idle:7854 db 08 7855 db 2 7856 dw RIdle1Monster1337857 dw RIdle2Monster1337858 7859 dw LIdle1Monster1337860 dw LIdle2Monster1337861Monster133AttackPatternRight:7862 db AnimateAttack | dw RIdle1Monster133 | db 000,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,000,InitiateAttack7863Monster133AttackPatternRightUp:7864 db AnimateAttack | dw RIdle1Monster133 | db 008,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,004,InitiateAttack7865Monster133AttackPatternRightDown:7866 db AnimateAttack | dw RIdle1Monster133 | db 006,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,002,InitiateAttack7867Monster133AttackPatternLeft:7868 db AnimateAttack | dw LIdle1Monster133 | db 000,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,000,InitiateAttack7869Monster133AttackPatternLeftUp:7870 db AnimateAttack | dw LIdle1Monster133 | db 002,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,006,InitiateAttack7871Monster133AttackPatternLeftDown:7872 db AnimateAttack | dw LIdle1Monster133 | db 004,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,008,InitiateAttack78747877RIdle1Monster134: equ $4000 + (192*128) + (240/2) - 128 7878RIdle2Monster134: equ $4000 + (224*128) + (144/2) - 128 7879RAttack1Monster134: equ $4000 + (224*128) + (160/2) - 128 7881LIdle1Monster134: equ $4000 + (224*128) + (240/2) - 128 7882LIdle2Monster134: equ $4000 + (224*128) + (224/2) - 128 7883LAttack1Monster134: equ $4000 + (224*128) + (192/2) - 128 7885Monster134Move:7886Monster134Idle:7887 db 08 7888 db 2 7889 dw RIdle1Monster1347890 dw RIdle2Monster1347891 7892 dw LIdle1Monster1347893 dw LIdle2Monster1347894Monster134AttackPatternRight:7895 db AnimateAttack | dw RIdle1Monster134 | db 000,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,000,InitiateAttack7896Monster134AttackPatternRightUp:7897 db AnimateAttack | dw RIdle1Monster134 | db 008,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,004,InitiateAttack7898Monster134AttackPatternRightDown:7899 db AnimateAttack | dw RIdle1Monster134 | db 006,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,002,InitiateAttack7900Monster134AttackPatternLeft:7901 db AnimateAttack | dw LIdle1Monster134 | db 000,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,000,InitiateAttack7902Monster134AttackPatternLeftUp:7903 db AnimateAttack | dw LIdle1Monster134 | db 002,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,006,InitiateAttack7904Monster134AttackPatternLeftDown:7905 db AnimateAttack | dw LIdle1Monster134 | db 004,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,008,InitiateAttack79077910RIdle1Monster135: equ $4000 + (080*128) + (000/2) - 128 7911RIdle2Monster135: equ $4000 + (080*128) + (032/2) - 128 7912RIdle3Monster135: equ $4000 + (080*128) + (064/2) - 128 7913RIdle4Monster135: equ $4000 + (080*128) + (096/2) - 128 7914RIdle5Monster135: equ $4000 + (080*128) + (128/2) - 128 7915RIdle6Monster135: equ $4000 + (080*128) + (160/2) - 128 7916RAttack1Monster135: equ $4000 + (080*128) + (192/2) - 128 7918LIdle1Monster135: equ $4000 + (128*128) + (192/2) - 128 7919LIdle2Monster135: equ $4000 + (128*128) + (160/2) - 128 7920LIdle3Monster135: equ $4000 + (128*128) + (128/2) - 128 7921LIdle4Monster135: equ $4000 + (128*128) + (096/2) - 128 7922LIdle5Monster135: equ $4000 + (128*128) + (064/2) - 128 7923LIdle6Monster135: equ $4000 + (128*128) + (032/2) - 128 7924LAttack1Monster135: equ $4000 + (128*128) + (000/2) - 128 7926Monster135Move:7927Monster135Idle:7928 db 02 7929 db 6 7930 dw RIdle1Monster1357931 dw RIdle2Monster1357932 dw RIdle3Monster1357933 dw RIdle4Monster1357934 dw RIdle5Monster1357935 dw RIdle6Monster1357936 7937 dw LIdle1Monster1357938 dw LIdle2Monster1357939 dw LIdle3Monster1357940 dw LIdle4Monster1357941 dw LIdle5Monster1357942 dw LIdle6Monster1357943Monster135AttackPatternRight:7944 db AnimateAttack | dw RIdle1Monster135 | db 003,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 007,InitiateAttack7945Monster135AttackPatternRightUp:7946 db AnimateAttack | dw RIdle1Monster135 | db 008,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 004,InitiateAttack7947Monster135AttackPatternRightDown:7948 db AnimateAttack | dw RIdle1Monster135 | db 006,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 002,InitiateAttack7949Monster135AttackPatternLeft:7950 db AnimateAttack | dw LIdle1Monster135 | db 007,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 003,InitiateAttack7951Monster135AttackPatternLeftUp:7952 db AnimateAttack | dw LIdle1Monster135 | db 008,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 004,InitiateAttack7953Monster135AttackPatternLeftDown:7954 db AnimateAttack | dw LIdle1Monster135 | db 006,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 002,InitiateAttack79567959RIdle1Monster136: equ $4000 + (136*128) + (000/2) - 128 7960RIdle2Monster136: equ $4000 + (184*128) + (000/2) - 128 7961RIdle3Monster136: equ $4000 + (184*128) + (016/2) - 128 7962RAttack1Monster136: equ $4000 + (136*128) + (016/2) - 128 7963RAttack2Monster136: equ $4000 + (136*128) + (032/2) - 128 7964RAttack3Monster136: equ $4000 + (136*128) + (048/2) - 128 7965RAttack4Monster136: equ $4000 + (136*128) + (064/2) - 128 7967LIdle1Monster136: equ $4000 + (136*128) + (144/2) - 128 7968LIdle2Monster136: equ $4000 + (184*128) + (048/2) - 128 7969LIdle3Monster136: equ $4000 + (184*128) + (032/2) - 128 7970LAttack1Monster136: equ $4000 + (136*128) + (128/2) - 128 7971LAttack2Monster136: equ $4000 + (136*128) + (112/2) - 128 7972LAttack3Monster136: equ $4000 + (136*128) + (096/2) - 128 7973LAttack4Monster136: equ $4000 + (136*128) + (080/2) - 128 7975Monster136Move:7976Monster136Idle:7977 db 06 7978 db 4 7979 dw RIdle1Monster1367980 dw RIdle2Monster1367981 dw RIdle1Monster1367982 dw RIdle3Monster1367983 7984 dw LIdle1Monster1367985 dw LIdle2Monster1367986 dw LIdle1Monster1367987 dw LIdle3Monster1367988Monster136AttackPatternRight:7989 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 003,003,ShowBeingHitSprite,000,007,007,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7990Monster136AttackPatternRightUp:7991 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 002,002,ShowBeingHitSprite,000,006,006,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7992Monster136AttackPatternRightDown:7993 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 004,004,ShowBeingHitSprite,000,008,008,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7994Monster136AttackPatternLeft:7995 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 007,007,ShowBeingHitSprite,000,003,003,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7996Monster136AttackPatternLeftUp:7997 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 008,008,ShowBeingHitSprite,000,004,004,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7998Monster136AttackPatternLeftDown:7999 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 006,006,ShowBeingHitSprite,000,002,002,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack80018004RIdle1Monster137: equ $4000 + (088*128) + (192/2) - 128 8005RIdle2Monster137: equ $4000 + (144*128) + (192/2) - 128 8006RIdle3Monster137: equ $4000 + (200*128) + (192/2) - 128 8008LIdle1Monster137: equ $4000 + (088*128) + (224/2) - 128 8009LIdle2Monster137: equ $4000 + (144*128) + (224/2) - 128 8010LIdle3Monster137: equ $4000 + (200*128) + (224/2) - 128 8012Monster137Move:8013Monster137Idle:8014 db 05 8015 db 3 8016 dw RIdle1Monster1378017 dw RIdle2Monster1378018 dw RIdle3Monster1378019 8020 dw LIdle1Monster1378021 dw LIdle2Monster1378022 dw LIdle3Monster13780248027RIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8028RIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8029RIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8030RIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8031RIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8032RIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8034LIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8035LIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8036LIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8037LIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8038LIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8039LIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8041Monster138Move:8042Monster138Idle:8043 db 02 8044 db 6 8045 dw RIdle6Monster1388046 dw RIdle1Monster1388047 dw RIdle2Monster1388048 dw RIdle3Monster1388049 dw RIdle4Monster1388050 dw RIdle5Monster1388051 8052 dw LIdle6Monster1388053 dw LIdle1Monster1388054 dw LIdle2Monster1388055 dw LIdle3Monster1388056 dw LIdle4Monster1388057 dw LIdle5Monster13880598062RIdle1Monster139: equ $4000 + (096*128) + (000/2) - 128 8063RIdle2Monster139: equ $4000 + (096*128) + (032/2) - 128 8064RIdle3Monster139: equ $4000 + (096*128) + (064/2) - 128 8065RIdle4Monster139: equ $4000 + (096*128) + (096/2) - 128 8066RIdle5Monster139: equ $4000 + (096*128) + (128/2) - 128 8067RIdle6Monster139: equ $4000 + (096*128) + (160/2) - 128 8068RIdle7Monster139: equ $4000 + (136*128) + (000/2) - 128 8069RIdle8Monster139: equ $4000 + (136*128) + (032/2) - 128 8070Rattack1Monster139: equ $4000 + (136*128) + (064/2) - 128 8072LIdle1Monster139: equ $4000 + (176*128) + (160/2) - 128 8073LIdle2Monster139: equ $4000 + (176*128) + (128/2) - 128 8074LIdle3Monster139: equ $4000 + (176*128) + (096/2) - 128 8075LIdle4Monster139: equ $4000 + (176*128) + (064/2) - 128 8076LIdle5Monster139: equ $4000 + (176*128) + (032/2) - 128 8077LIdle6Monster139: equ $4000 + (176*128) + (000/2) - 128 8078LIdle7Monster139: equ $4000 + (216*128) + (160/2) - 128 8079LIdle8Monster139: equ $4000 + (216*128) + (128/2) - 128 8080Lattack1Monster139: equ $4000 + (216*128) + (080/2) - 128 8082Monster139Move:8083Monster139Idle:8084 db 02 8085 db 8 8086 dw RIdle1Monster1398087 dw RIdle2Monster1398088 dw RIdle3Monster1398089 dw RIdle4Monster1398090 dw RIdle5Monster1398091 dw RIdle6Monster1398092 dw RIdle7Monster1398093 dw RIdle8Monster1398094 8095 dw LIdle1Monster1398096 dw LIdle2Monster1398097 dw LIdle3Monster1398098 dw LIdle4Monster1398099 dw LIdle5Monster1398100 dw LIdle6Monster1398101 dw LIdle7Monster1398102 dw LIdle8Monster1398103Monster139AttackPatternRight:8104 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8105Monster139AttackPatternRightUp:8106 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8107Monster139AttackPatternRightDown:8108 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8109Monster139AttackPatternLeft:8110 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8111Monster139AttackPatternLeftUp:8112 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8113Monster139AttackPatternLeftDown:8114 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack81158118RIdle1Monster140: equ $4000 + (000*128) + (000/2) - 128 8119RIdle2Monster140: equ $4000 + (000*128) + (032/2) - 128 8120RIdle3Monster140: equ $4000 + (000*128) + (064/2) - 128 8121RAttack1Monster140: equ $4000 + (000*128) + (096/2) - 128 8122RAttack2Monster140: equ $4000 + (000*128) + (160/2) - 128 8124LIdle1Monster140: equ $4000 + (040*128) + (192/2) - 128 8125LIdle2Monster140: equ $4000 + (040*128) + (160/2) - 128 8126LIdle3Monster140: equ $4000 + (040*128) + (128/2) - 128 8127LAttack1Monster140: equ $4000 + (040*128) + (064/2) - 128 8128LAttack2Monster140: equ $4000 + (040*128) + (000/2) - 128 8130Monster140Move:8131Monster140Idle:8132 db 04 8133 db 4 8134 dw RIdle1Monster1408135 dw RIdle3Monster1408136 dw RIdle2Monster1408137 dw RIdle3Monster1408138 8139 dw LIdle1Monster1408140 dw LIdle3Monster1408141 dw LIdle2Monster1408142 dw LIdle3Monster1408143Monster140AttackPatternRight:8144 db AnimateAttack | dw RIdle1Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,000,InitiateAttack8145Monster140AttackPatternRightUp:8146 db AnimateAttack | dw RIdle1Monster140 | db 008,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,004,InitiateAttack8147Monster140AttackPatternRightDown:8148 db AnimateAttack | dw RIdle1Monster140 | db 006,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,002,InitiateAttack8149Monster140AttackPatternLeft:8150 db AnimateAttack | dw LIdle1Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,000,InitiateAttack8151Monster140AttackPatternLeftUp:8152 db AnimateAttack | dw LIdle1Monster140 | db 002,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,006,InitiateAttack8153Monster140AttackPatternLeftDown:8154 db AnimateAttack | dw LIdle1Monster140 | db 004,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,008,InitiateAttack81568159RIdle1Monster141: equ $4000 + (068*128) + (000/2) - 128 8160RIdle2Monster141: equ $4000 + (068*128) + (064/2) - 128 8162LIdle1Monster141: equ $4000 + (068*128) + (192/2) - 128 8163LIdle2Monster141: equ $4000 + (068*128) + (128/2) - 128 8165Monster141Move:8166Monster141Idle:8167 db 04 8168 db 2 8169 dw RIdle1Monster1418170 dw RIdle2Monster1418171 8172 dw LIdle1Monster1418173 dw LIdle2Monster14181758178RIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8179RIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8180RIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8182LIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8183LIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8184LIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8186Monster142Move:8187Monster142Idle:8188 db 06 8189 db 3 8190 dw RIdle1Monster1428191 dw RIdle2Monster1428192 dw RIdle3Monster1428193 8194 dw LIdle1Monster1428195 dw LIdle2Monster1428196 dw LIdle3Monster14281988201RIdle1Monster143: equ $4000 + (176*128) + (000/2) - 128 8202RIdle2Monster143: equ $4000 + (176*128) + (016/2) - 128 8203RIdle3Monster143: equ $4000 + (176*128) + (032/2) - 128 8204RAttack1Monster143: equ $4000 + (176*128) + (048/2) - 128 8206LIdle1Monster143: equ $4000 + (176*128) + (112/2) - 128 8207LIdle2Monster143: equ $4000 + (176*128) + (096/2) - 128 8208LIdle3Monster143: equ $4000 + (176*128) + (080/2) - 128 8209LAttack1Monster143: equ $4000 + (176*128) + (064/2) - 128 8211Monster143Move:8212Monster143Idle:8213 db 06 8214 db 4 8215 dw RIdle1Monster1438216 dw RIdle2Monster1438217 dw RIdle1Monster1438218 dw RIdle3Monster1438219 8220 dw LIdle1Monster1438221 dw LIdle2Monster1438222 dw LIdle1Monster1438223 dw LIdle3Monster1438224Monster143AttackPatternRight:8225 db AnimateAttack | dw RAttack1Monster143 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8226Monster143AttackPatternRightUp:8227 db AnimateAttack | dw RAttack1Monster143 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8228Monster143AttackPatternRightDown:8229 db AnimateAttack | dw RAttack1Monster143 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8230Monster143AttackPatternLeft:8231 db AnimateAttack | dw LAttack1Monster143 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8232Monster143AttackPatternLeftUp:8233 db AnimateAttack | dw LAttack1Monster143 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8234Monster143AttackPatternLeftDown:8235 db AnimateAttack | dw LAttack1Monster143 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack82378240RIdle1Monster144: equ $4000 + (216*128) + (032/2) - 128 8241RIdle2Monster144: equ $4000 + (216*128) + (048/2) - 128 8242RAttack1Monster144: equ $4000 + (216*128) + (064/2) - 128 8244LIdle1Monster144: equ $4000 + (216*128) + (112/2) - 128 8245LIdle2Monster144: equ $4000 + (216*128) + (096/2) - 128 8246LAttack1Monster144: equ $4000 + (216*128) + (080/2) - 128 8248Monster144Move:8249Monster144Idle:8250 db 08 8251 db 2 8252 dw RIdle1Monster1448253 dw RIdle2Monster1448254 8255 dw LIdle1Monster1448256 dw LIdle2Monster1448257Monster144AttackPatternRight:8258 db AnimateAttack | dw Rattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile8259Monster144AttackPatternLeft:8260 db AnimateAttack | dw Lattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile82628265RIdle1Monster145: equ $4000 + (216*128) + (128/2) - 128 8266RIdle2Monster145: equ $4000 + (216*128) + (144/2) - 128 8267RIdle3Monster145: equ $4000 + (216*128) + (160/2) - 128 8268RAttack1Monster145: equ $4000 + (216*128) + (176/2) - 128 8270LIdle1Monster145: equ $4000 + (216*128) + (240/2) - 128 8271LIdle2Monster145: equ $4000 + (216*128) + (224/2) - 128 8272LIdle3Monster145: equ $4000 + (216*128) + (208/2) - 128 8273LAttack1Monster145: equ $4000 + (216*128) + (192/2) - 128 8275Monster145Move:8276Monster145Idle:8277 db 06 8278 db 3 8279 dw RIdle1Monster1458280 dw RIdle2Monster1458281 dw RIdle3Monster1458282 8283 dw LIdle1Monster1458284 dw LIdle2Monster1458285 dw LIdle3Monster1458286Monster145AttackPatternRight:8287 db AnimateAttack | dw RAttack1Monster145 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8288Monster145AttackPatternRightUp:8289 db AnimateAttack | dw RAttack1Monster145 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8290Monster145AttackPatternRightDown:8291 db AnimateAttack | dw RAttack1Monster145 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8292Monster145AttackPatternLeft:8293 db AnimateAttack | dw LAttack1Monster145 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8294Monster145AttackPatternLeftUp:8295 db AnimateAttack | dw LAttack1Monster145 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8296Monster145AttackPatternLeftDown:8297 db AnimateAttack | dw LAttack1Monster145 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack83018304RIdle1Monster146: equ $4000 + (176*128) + (128/2) - 128 8305RIdle2Monster146: equ $4000 + (176*128) + (144/2) - 128 8306RIdle3Monster146: equ $4000 + (176*128) + (160/2) - 128 8308LIdle1Monster146: equ $4000 + (176*128) + (208/2) - 128 8309LIdle2Monster146: equ $4000 + (176*128) + (192/2) - 128 8310LIdle3Monster146: equ $4000 + (176*128) + (176/2) - 128 8312Monster146Move:8313Monster146Idle:8314 db 06 8315 db 3 8316 dw RIdle1Monster1468317 dw RIdle2Monster1468318 dw RIdle3Monster1468319 8320 dw LIdle1Monster1468321 dw LIdle2Monster1468322 dw LIdle3Monster14683248327RIdle1Monster147: equ $4000 + (216*128) + (160/2) - 128 8328RIdle2Monster147: equ $4000 + (216*128) + (176/2) - 128 8329RIdle3Monster147: equ $4000 + (216*128) + (192/2) - 128 8331LIdle1Monster147: equ $4000 + (216*128) + (240/2) - 128 8332LIdle2Monster147: equ $4000 + (216*128) + (224/2) - 128 8333LIdle3Monster147: equ $4000 + (216*128) + (208/2) - 128 8335Monster147Move:8336Monster147Idle:8337 db 06 8338 db 3 8339 dw RIdle1Monster1478340 dw RIdle2Monster1478341 dw RIdle3Monster1478342 8343 dw LIdle1Monster1478344 dw LIdle2Monster1478345 dw LIdle3Monster14783478350RIdle1Monster148: equ $4000 + (176*128) + (224/2) - 128 8351RIdle2Monster148: equ $4000 + (176*128) + (240/2) - 128 8353LIdle1Monster148: equ $4000 + (216*128) + (000/2) - 128 8354LIdle2Monster148: equ $4000 + (216*128) + (016/2) - 128 8356Monster148Move:8357Monster148Idle:8358 db 06 8359 db 2 8360 dw RIdle1Monster1488361 dw RIdle2Monster1488362 8363 dw LIdle1Monster1488364 dw LIdle2Monster14883668369RIdle1Monster149: equ $4000 + (048*128) + (160/2) - 128 8370RIdle2Monster149: equ $4000 + (048*128) + (176/2) - 128 8371RIdle3Monster149: equ $4000 + (048*128) + (192/2) - 128 8372RAttack1Monster149: equ $4000 + (048*128) + (208/2) - 128 8373RAttack2Monster149: equ $4000 + (048*128) + (224/2) - 128 8374RAttack3Monster149: equ $4000 + (048*128) + (240/2) - 128 8376LIdle1Monster149: equ $4000 + (072*128) + (240/2) - 128 8377LIdle2Monster149: equ $4000 + (072*128) + (224/2) - 128 8378LIdle3Monster149: equ $4000 + (072*128) + (208/2) - 128 8379LAttack1Monster149: equ $4000 + (072*128) + (192/2) - 128 8380LAttack2Monster149: equ $4000 + (072*128) + (176/2) - 128 8381LAttack3Monster149: equ $4000 + (072*128) + (160/2) - 128 8383Monster149Move:8384Monster149Idle:8385 db 06 8386 db 3 8387 dw RIdle1Monster1498388 dw RIdle2Monster1498389 dw RIdle3Monster1498390 8391 dw LIdle1Monster1498392 dw LIdle2Monster1498393 dw LIdle3Monster1498395Monster149AttackPatternRight:8396 db AnimateAttack | dw Rattack1Monster149 | db 000,000,000,AnimateAttack | dw Rattack2Monster149 | db 000,000,000,AnimateAttack | dw Rattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile8397Monster149AttackPatternLeft:8398 db AnimateAttack | dw Lattack1Monster149 | db 000,000,000,AnimateAttack | dw Lattack2Monster149 | db 000,000,000,AnimateAttack | dw Lattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile84008403RIdle1Monster150: equ $4000 + (208*128) + (128/2) - 128 8404RAttack1Monster150: equ $4000 + (208*128) + (160/2) - 128 8406LIdle1Monster150: equ $4000 + (208*128) + (144/2) - 128 8407LAttack1Monster150: equ $4000 + (208*128) + (176/2) - 128 8409Monster150Move:8410 db 04 8411 db 2 8412 dw RAttack1Monster1508413 dw LAttack1Monster1508414 8415 dw LAttack1Monster1508416 dw RAttack1Monster1508418Monster150Idle:8419 db 10 8420 db 2 8421 dw RIdle1Monster1508422 dw LIdle1Monster1508423 8424 dw LIdle1Monster1508425 dw RIdle1Monster1508427Monster150AttackPatternRight:8428 db AnimateAttack | dw Rattack1Monster150 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8429Monster150AttackPatternLeft:8430 db AnimateAttack | dw LAttack1Monster150 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8431Monster150AttackPatternLeftUp:8432 db AnimateAttack | dw LAttack1Monster150 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8433Monster150AttackPatternLeftDown:8434 db AnimateAttack | dw LAttack1Monster150 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8435Monster150AttackPatternRightUp:8436 db AnimateAttack | dw Rattack1Monster150 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8437Monster150AttackPatternRightDown:8438 db AnimateAttack | dw Rattack1Monster150 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack84408443RIdle1Monster151: equ $4000 + (232*128) + (128/2) - 128 8444RIdle2Monster151: equ $4000 + (232*128) + (144/2) - 128 8446LIdle1Monster151: equ $4000 + (232*128) + (176/2) - 128 8447LIdle2Monster151: equ $4000 + (232*128) + (160/2) - 128 8449Monster151Move:8450Monster151Idle:8451 db 06 8452 db 2 8453 dw RIdle1Monster1518454 dw RIdle2Monster1518455 8456 dw LIdle1Monster1518457 dw LIdle2Monster15184598462RIdle1Monster152: equ $4000 + (208*128) + (192/2) - 128 8463RIdle2Monster152: equ $4000 + (208*128) + (208/2) - 128 8465LIdle1Monster152: equ $4000 + (208*128) + (240/2) - 128 8466LIdle2Monster152: equ $4000 + (208*128) + (224/2) - 128 8468Monster152Move:8469 db 04 8470 db 2 8471 dw RIdle1Monster1528472 dw RIdle2Monster1528473 8474 dw LIdle1Monster1528475 dw LIdle2Monster1528477Monster152Idle:8478 db 08 8479 db 3 8480 dw RIdle1Monster1528481 dw RIdle1Monster1528482 dw RIdle2Monster1528483 8484 dw LIdle1Monster1528485 dw LIdle1Monster1528486 dw LIdle2Monster1528488Monster152AttackPatternRight:8489 db AnimateAttack | dw RIdle2Monster152 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8490Monster152AttackPatternLeft:8491 db AnimateAttack | dw LIdle2Monster152 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8492Monster152AttackPatternLeftUp:8493 db AnimateAttack | dw LIdle2Monster152 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8494Monster152AttackPatternLeftDown:8495 db AnimateAttack | dw LIdle2Monster152 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8496Monster152AttackPatternRightUp:8497 db AnimateAttack | dw RIdle2Monster152 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8498Monster152AttackPatternRightDown:8499 db AnimateAttack | dw RIdle2Monster152 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack85018504RIdle1Monster153: equ $4000 + (208*128) + (000/2) - 128 8505RIdle2Monster153: equ $4000 + (208*128) + (016/2) - 128 8506RIdle3Monster153: equ $4000 + (208*128) + (032/2) - 128 8507RAttack1Monster153: equ $4000 + (208*128) + (048/2) - 128 8509LIdle1Monster153: equ $4000 + (208*128) + (112/2) - 128 8510LIdle2Monster153: equ $4000 + (208*128) + (096/2) - 128 8511LIdle3Monster153: equ $4000 + (208*128) + (080/2) - 128 8512LAttack1Monster153: equ $4000 + (208*128) + (064/2) - 128 8514Monster153Move:8515Monster153Idle:8516 db 06 8517 db 4 8518 dw RIdle1Monster1538519 dw RIdle2Monster1538520 dw RIdle3Monster1538521 dw RIdle2Monster1538522 8523 dw LIdle1Monster1538524 dw LIdle2Monster1538525 dw LIdle3Monster1538526 dw LIdle2Monster1538528Monster153AttackPatternRight:8529 db AnimateAttack | dw Rattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle2Monster153 | db WaitImpactProjectile8530Monster153AttackPatternLeft:8531 db AnimateAttack | dw Lattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle2Monster153 | db WaitImpactProjectile85328535RIdle1Monster154: equ $4000 + (168*128) + (192/2) - 128 8536RIdle2Monster154: equ $4000 + (168*128) + (208/2) - 128 8538LIdle1Monster154: equ $4000 + (168*128) + (240/2) - 128 8539LIdle2Monster154: equ $4000 + (168*128) + (224/2) - 128 8541Monster154Move:8542Monster154Idle:8543 db 09 8544 db 2 8545 dw RIdle1Monster1548546 dw RIdle2Monster1548547 8548 dw LIdle1Monster1548549 dw LIdle2Monster15485518554RIdle1Monster155: equ $4000 + (232*128) + (192/2) - 128 8555RIdle2Monster155: equ $4000 + (232*128) + (208/2) - 128 8557LIdle1Monster155: equ $4000 + (232*128) + (240/2) - 128 8558LIdle2Monster155: equ $4000 + (232*128) + (224/2) - 128 8560Monster155Move:8561Monster155Idle:8562 db 08 8563 db 2 8564 dw RIdle1Monster1558565 dw RIdle2Monster1558566 8567 dw LIdle1Monster1558568 dw LIdle2Monster15585708573RIdle1Monster156: equ $4000 + (160*128) + (160/2) - 128 8574RIdle2Monster156: equ $4000 + (160*128) + (192/2) - 128 8576LIdle1Monster156: equ $4000 + (192*128) + (144/2) - 128 8577LIdle2Monster156: equ $4000 + (160*128) + (224/2) - 128 8579Monster156Move:8580Monster156Idle:8581 db 08 8582 db 2 8583 dw RIdle1Monster1568584 dw RIdle2Monster1568585 8586 dw LIdle1Monster1568587 dw LIdle2Monster15685898592RIdle1Monster157: equ $4000 + (136*128) + (112/2) - 128 8593RIdle2Monster157: equ $4000 + (136*128) + (128/2) - 128 8594RIdle3Monster157: equ $4000 + (136*128) + (144/2) - 128 8595RIdle4Monster157: equ $4000 + (136*128) + (160/2) - 128 8596RAttack1Monster157: equ $4000 + (136*128) + (176/2) - 128 8598LIdle1Monster157: equ $4000 + (216*128) + (064/2) - 128 8599LIdle2Monster157: equ $4000 + (216*128) + (048/2) - 128 8600LIdle3Monster157: equ $4000 + (216*128) + (032/2) - 128 8601LIdle4Monster157: equ $4000 + (216*128) + (016/2) - 128 8602LAttack1Monster157: equ $4000 + (216*128) + (000/2) - 128 8604Monster157Move:8605Monster157Idle:8606 db 04 8607 db 4 8608 dw RIdle1Monster1578609 dw RIdle2Monster1578610 dw RIdle4Monster1578611 dw RIdle3Monster1578612 8613 dw LIdle1Monster1578614 dw LIdle2Monster1578615 dw LIdle4Monster1578616 dw LIdle3Monster1578617Monster157AttackPatternRight:8618 db AnimateAttack | dw RAttack1Monster157 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8619Monster157AttackPatternLeft:8620 db AnimateAttack | dw LAttack1Monster157 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8621Monster157AttackPatternLeftUp:8622 db AnimateAttack | dw LAttack1Monster157 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8623Monster157AttackPatternLeftDown:8624 db AnimateAttack | dw LAttack1Monster157 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8625Monster157AttackPatternRightUp:8626 db AnimateAttack | dw RAttack1Monster157 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8627Monster157AttackPatternRightDown:8628 db AnimateAttack | dw RAttack1Monster157 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack8630 8631 8632 86338636RIdle1Monster158: equ $4000 + (224*128) + (000/2) - 128 8637RIdle2Monster158: equ $4000 + (224*128) + (032/2) - 128 8638RIdle3Monster158: equ $4000 + (224*128) + (064/2) - 128 8639RAttack1Monster158: equ $4000 + (224*128) + (096/2) - 128 8641LIdle1Monster158: equ $4000 + (224*128) + (224/2) - 128 8642LIdle2Monster158: equ $4000 + (224*128) + (192/2) - 128 8643LIdle3Monster158: equ $4000 + (224*128) + (160/2) - 128 8644LAttack1Monster158: equ $4000 + (224*128) + (128/2) - 128 8646Monster158Move:8647Monster158Idle:8648 db 04 8649 db 4 8650 dw RIdle1Monster1588651 dw RIdle2Monster1588652 dw RIdle1Monster1588653 dw RIdle3Monster1588654 8655 dw LIdle1Monster1588656 dw LIdle2Monster1588657 dw LIdle1Monster1588658 dw LIdle3Monster1588659Monster158AttackPatternRight:8660 db AnimateAttack | dw RAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8661Monster158AttackPatternLeft:8662 db AnimateAttack | dw LAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8663 86658668RIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8669RAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8671LIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8672LAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8674Monster159Move:8675Monster159Idle:8676 db 10 8677 db 2 8678 dw RIdle1Monster1598679 dw RAttack1Monster1598680 8681 dw LIdle1Monster1598682 dw LAttack1Monster1598683Monster159AttackPatternRight:8684 db AnimateAttack | dw RAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8685Monster159AttackPatternLeft:8686 db AnimateAttack | dw LAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8687 86888691RIdle1Monster160: equ $4000 + (200*128) + (192/2) - 128 8692RIdle2Monster160: equ $4000 + (200*128) + (208/2) - 128 8694LIdle1Monster160: equ $4000 + (200*128) + (240/2) - 128 8695LIdle2Monster160: equ $4000 + (200*128) + (224/2) - 128 8697Monster160Move:8698Monster160Idle:8699 db 08 8700 db 2 8701 dw RIdle1Monster1608702 dw RIdle2Monster1608703 8704 dw LIdle1Monster1608705 dw LIdle2Monster16087078710RIdle1Monster161: equ $4000 + (184*128) + (064/2) - 128 8711RIdle2Monster161: equ $4000 + (184*128) + (080/2) - 128 8713LIdle1Monster161: equ $4000 + (184*128) + (112/2) - 128 8714LIdle2Monster161: equ $4000 + (184*128) + (096/2) - 128 8716Monster161Move:8717Monster161Idle:8718 db 08 8719 db 2 8720 dw RIdle1Monster1618721 dw RIdle2Monster1618722 8723 dw LIdle1Monster1618724 dw LIdle2Monster16187268729RIdle1Monster162: equ $4000 + (232*128) + (000/2) - 128 8730RIdle2Monster162: equ $4000 + (232*128) + (016/2) - 128 8732LIdle1Monster162: equ $4000 + (232*128) + (048/2) - 128 8733LIdle2Monster162: equ $4000 + (232*128) + (032/2) - 128 8735Monster162Move:8736Monster162Idle:8737 db 08 8738 db 2 8739 dw RIdle1Monster1628740 dw RIdle2Monster1628741 8742 dw LIdle1Monster1628743 dw LIdle2Monster16287458748RIdle1Monster163: equ $4000 + (208*128) + (064/2) - 128 8749RIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8750RIdle3Monster163: equ $4000 + (232*128) + (064/2) - 128 8751RIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8753LIdle1Monster163: equ $4000 + (232*128) + (064/2) - 128 8754LIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8755LIdle3Monster163: equ $4000 + (208*128) + (064/2) - 128 8756LIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8758Monster163Move:8759Monster163Idle:8760 db 05 8761 db 4 8762 dw RIdle1Monster1638763 dw RIdle2Monster1638764 dw RIdle3Monster1638765 dw RIdle4Monster1638766 8767 dw LIdle1Monster1638768 dw LIdle2Monster1638769 dw LIdle3Monster1638770 dw LIdle4Monster16387728775RIdle1Monster164: equ $4000 + (208*128) + (096/2) - 128 8776RIdle2Monster164: equ $4000 + (208*128) + (112/2) - 128 8777RIdle3Monster164: equ $4000 + (208*128) + (128/2) - 128 8778RAttack1Monster164: equ $4000 + (208*128) + (144/2) - 128 8780LIdle1Monster164: equ $4000 + (208*128) + (240/2) - 128 8781LIdle2Monster164: equ $4000 + (208*128) + (224/2) - 128 8782LIdle3Monster164: equ $4000 + (208*128) + (208/2) - 128 8783LAttack1Monster164: equ $4000 + (208*128) + (176/2) - 128 8785Monster164Move:8786Monster164Idle:8787 db 04 8788 db 4 8789 dw RIdle1Monster1648790 dw RIdle2Monster1648791 dw RIdle3Monster1648792 dw RIdle2Monster1648793 8794 dw LIdle1Monster1648795 dw LIdle2Monster1648796 dw LIdle3Monster1648797 dw LIdle2Monster1648799Monster164AttackPatternRight:8800 db AnimateAttack | dw RIdle1Monster164 | db 000,003,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,007,000,InitiateAttack8801Monster164AttackPatternRightUp:8802 db AnimateAttack | dw RIdle1Monster164 | db 000,002,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,006,000,InitiateAttack8803Monster164AttackPatternRightDown:8804 db AnimateAttack | dw RIdle1Monster164 | db 000,004,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,008,000,InitiateAttack8805Monster164AttackPatternLeft:8806 db AnimateAttack | dw LIdle1Monster164 | db 000,007,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,003,000,InitiateAttack8807Monster164AttackPatternLeftUp:8808 db AnimateAttack | dw LIdle1Monster164 | db 000,008,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,004,000,InitiateAttack8809Monster164AttackPatternLeftDown:8810 db AnimateAttack | dw LIdle1Monster164 | db 000,006,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,002,000,InitiateAttack88128815RIdle1Monster165: equ $4000 + (000*128) + (000/2) - 128 8816RIdle2Monster165: equ $4000 + (000*128) + (032/2) - 128 8818LIdle1Monster165: equ $4000 + (000*128) + (096/2) - 128 8819LIdle2Monster165: equ $4000 + (000*128) + (064/2) - 128 8821Monster165Move:8822Monster165Idle:8823 db 08 8824 db 2 8825 dw RIdle1Monster1658826 dw RIdle2Monster1658827 8828 dw LIdle1Monster1658829 dw LIdle2Monster16588318834RIdle1Monster166: equ $4000 + (048*128) + (048/2) - 128 8835RIdle2Monster166: equ $4000 + (048*128) + (064/2) - 128 8836RIdle3Monster166: equ $4000 + (048*128) + (080/2) - 128 8837RIdle4Monster166: equ $4000 + (048*128) + (096/2) - 128 8839LIdle1Monster166: equ $4000 + (048*128) + (160/2) - 128 8840LIdle2Monster166: equ $4000 + (048*128) + (144/2) - 128 8841LIdle3Monster166: equ $4000 + (048*128) + (128/2) - 128 8842LIdle4Monster166: equ $4000 + (048*128) + (112/2) - 128 8844Monster166Move:8845Monster166Idle:8846 db 04 8847 db 6 8848 dw RIdle1Monster1668849 dw RIdle2Monster1668850 dw RIdle3Monster1668851 dw RIdle4Monster1668852 dw RIdle3Monster1668853 dw RIdle2Monster1668854 8855 dw LIdle1Monster1668856 dw LIdle2Monster1668857 dw LIdle3Monster1668858 dw LIdle4Monster1668859 dw LIdle3Monster1668860 dw LIdle2Monster16688628865RIdle1Monster167: equ $4000 + (024*128) + (000/2) - 128 8866RIdle2Monster167: equ $4000 + (024*128) + (016/2) - 128 8867RIdle3Monster167: equ $4000 + (024*128) + (032/2) - 128 8869LIdle1Monster167: equ $4000 + (024*128) + (080/2) - 128 8870LIdle2Monster167: equ $4000 + (024*128) + (064/2) - 128 8871LIdle3Monster167: equ $4000 + (024*128) + (048/2) - 128 8873Monster167Move:8874Monster167Idle:8875 db 03 8876 db 4 8877 dw RIdle3Monster1678878 dw RIdle2Monster1678879 dw RIdle1Monster1678880 dw RIdle2Monster1678881 8882 dw LIdle3Monster1678883 dw LIdle2Monster1678884 dw LIdle1Monster1678885 dw LIdle2Monster16788878890RIdle1Monster168: equ $4000 + (064*128) + (000/2) - 128 8891RIdle2Monster168: equ $4000 + (064*128) + (016/2) - 128 8892RIdle3Monster168: equ $4000 + (064*128) + (032/2) - 128 8893RIdle4Monster168: equ $4000 + (064*128) + (048/2) - 128 8894RIdle5Monster168: equ $4000 + (064*128) + (064/2) - 128 8895RAttack1Monster168: equ $4000 + (064*128) + (080/2) - 128 8896RAttack2Monster168: equ $4000 + (064*128) + (096/2) - 128 8898LIdle1Monster168: equ $4000 + (064*128) + (208/2) - 128 8899LIdle2Monster168: equ $4000 + (064*128) + (192/2) - 128 8900LIdle3Monster168: equ $4000 + (064*128) + (176/2) - 128 8901LIdle4Monster168: equ $4000 + (064*128) + (160/2) - 128 8902LIdle5Monster168: equ $4000 + (064*128) + (144/2) - 128 8903LAttack1Monster168: equ $4000 + (064*128) + (128/2) - 128 8904LAttack2Monster168: equ $4000 + (064*128) + (112/2) - 128 8906Monster168Move:8907Monster168Idle:8908 db 03 8909 db 5 8910 dw RIdle1Monster1688911 dw RIdle2Monster1688912 dw RIdle3Monster1688913 dw RIdle4Monster1688914 dw RIdle5Monster1688915 8916 dw LIdle1Monster1688917 dw LIdle2Monster1688918 dw LIdle3Monster1688919 dw LIdle4Monster1688920 dw LIdle5Monster1688921Monster168AttackPatternRight:8922 db AnimateAttack | dw RAttack1Monster168 | db 000,000,000,AnimateAttack | dw RAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8923Monster168AttackPatternLeft:8924 db AnimateAttack | dw LAttack1Monster168 | db 000,000,000,AnimateAttack | dw LAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8925 89268929RIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8930RIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8931RIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8932RIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8933RIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8934RIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8935RIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8936RIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8938LIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8939LIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8940LIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8941LIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8942LIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8943LIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8944LIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8945LIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8947Monster169Move:8948Monster169Idle:8949 db 01 8950 db 20 8951 dw RIdle1Monster1698952 dw RIdle1Monster1698953 dw RIdle1Monster1698954 dw RIdle1Monster1698955 dw RIdle1Monster1698956 dw RIdle2Monster1698957 dw RIdle3Monster1698958 dw RIdle4Monster1698959 dw RIdle5Monster1698960 dw RIdle6Monster1698961 dw RIdle7Monster1698962 dw RIdle8Monster1698963 dw RIdle8Monster1698964 dw RIdle7Monster1698965 dw RIdle6Monster1698966 dw RIdle5Monster1698967 dw RIdle4Monster1698968 dw RIdle3Monster1698969 dw RIdle2Monster1698970 dw RIdle1Monster1698971 8972 dw RIdle1Monster1698973 dw RIdle1Monster1698974 dw RIdle1Monster1698975 dw RIdle1Monster1698976 dw RIdle1Monster1698977 dw RIdle2Monster1698978 dw RIdle3Monster1698979 dw RIdle4Monster1698980 dw RIdle5Monster1698981 dw RIdle6Monster1698982 dw RIdle7Monster1698983 dw RIdle8Monster1698984 dw RIdle8Monster1698985 dw RIdle7Monster1698986 dw RIdle6Monster1698987 dw RIdle5Monster1698988 dw RIdle4Monster1698989 dw RIdle3Monster1698990 dw RIdle2Monster1698991 dw RIdle1Monster16989938996RIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 8997RIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 8999LIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 9000LIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 9002Monster170Move:9003Monster170Idle:9004 db 04 9005 db 2 9006 dw RIdle1Monster1709007 dw RIdle2Monster1709008 9009 dw LIdle1Monster1709010 dw LIdle2Monster17090129015RIdle1Monster171: equ $4000 + (096*128) + (000/2) - 128 9016RIdle2Monster171: equ $4000 + (096*128) + (016/2) - 128 9018LIdle1Monster171: equ $4000 + (096*128) + (032/2) - 128 9019LIdle2Monster171: equ $4000 + (064*128) + (240/2) - 128 9021Monster171Move:9022Monster171Idle:9023 db 06 9024 db 2 9025 dw RIdle1Monster1719026 dw RIdle2Monster1719027 9028 dw LIdle1Monster1719029 dw LIdle2Monster17190319034RIdle1Monster172: equ $4000 + (048*128) + (176/2) - 128 9035RIdle2Monster172: equ $4000 + (048*128) + (192/2) - 128 9037LIdle1Monster172: equ $4000 + (048*128) + (208/2) - 128 9038LIdle2Monster172: equ $4000 + (048*128) + (224/2) - 128 9040Monster172Move:9041Monster172Idle:9042 db 06 9043 db 2 9044 dw RIdle1Monster1729045 dw RIdle2Monster1729046 9047 dw LIdle1Monster1729048 dw LIdle2Monster17290509053RIdle1Monster173: equ $4000 + (144*128) + (160/2) - 128 9054RIdle2Monster173: equ $4000 + (144*128) + (176/2) - 128 9056LIdle1Monster173: equ $4000 + (144*128) + (208/2) - 128 9057LIdle2Monster173: equ $4000 + (144*128) + (192/2) - 128 9059Monster173Move:9060Monster173Idle:9061 db 06 9062 db 2 9063 dw RIdle1Monster1739064 dw RIdle2Monster1739065 9066 dw LIdle1Monster1739067 dw LIdle2Monster17390699072RIdle1Monster174: equ $4000 + (024*128) + (096/2) - 128 9073RIdle2Monster174: equ $4000 + (024*128) + (128/2) - 128 9074RIdle3Monster174: equ $4000 + (024*128) + (160/2) - 128 9075RAttack1Monster174: equ $4000 + (024*128) + (192/2) - 128 9076RAttack2Monster174: equ $4000 + (024*128) + (224/2) - 128 9078LIdle1Monster174: equ $4000 + (144*128) + (128/2) - 128 9079LIdle2Monster174: equ $4000 + (144*128) + (096/2) - 128 9080LIdle3Monster174: equ $4000 + (144*128) + (064/2) - 128 9081LAttack1Monster174: equ $4000 + (144*128) + (032/2) - 128 9082LAttack2Monster174: equ $4000 + (144*128) + (000/2) - 128 9084Monster174Move:9085Monster174Idle:9086 db 04 9087 db 4 9088 dw RIdle1Monster1749089 dw RIdle2Monster1749090 dw RIdle3Monster1749091 dw RIdle2Monster1749092 9093 dw LIdle1Monster1749094 dw LIdle2Monster1749095 dw LIdle3Monster1749096 dw LIdle2Monster1749098Monster174AttackPatternRight:9099 db AnimateAttack | dw RIdle1Monster174 | db 000,003,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,007,InitiateAttack9100Monster174AttackPatternRightUp:9101 db AnimateAttack | dw RIdle1Monster174 | db 000,008,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,004,InitiateAttack9102Monster174AttackPatternRightDown:9103 db AnimateAttack | dw RIdle1Monster174 | db 000,006,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,002,InitiateAttack9105Monster174AttackPatternLeft:9106 db AnimateAttack | dw LIdle1Monster174 | db 000,007,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,003,InitiateAttack9107Monster174AttackPatternLeftUp:9108 db AnimateAttack | dw LIdle1Monster174 | db 000,002,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,006,InitiateAttack9109Monster174AttackPatternLeftDown:9110 db AnimateAttack | dw LIdle1Monster174 | db 000,004,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,008,InitiateAttack91129115RIdle1Monster175: equ $4000 + (088*128) + (128/2) - 128 9116RIdle2Monster175: equ $4000 + (088*128) + (160/2) - 128 9118LIdle1Monster175: equ $4000 + (088*128) + (192/2) - 128 9119LIdle2Monster175: equ $4000 + (088*128) + (224/2) - 128 9121Monster175Move:9122Monster175Idle:9123 db 06 9124 db 2 9125 dw RIdle1Monster1759126 dw RIdle2Monster1759127 9128 dw LIdle1Monster1759129 dw LIdle2Monster17591319134RIdle1Monster176: equ $4000 + (000*128) + (128/2) - 128 9135RIdle2Monster176: equ $4000 + (000*128) + (144/2) - 128 9136RIdle3Monster176: equ $4000 + (000*128) + (160/2) - 128 9137RAttack1Monster176: equ $4000 + (000*128) + (176/2) - 128 9139LIdle1Monster176: equ $4000 + (000*128) + (240/2) - 128 9140LIdle2Monster176: equ $4000 + (000*128) + (224/2) - 128 9141LIdle3Monster176: equ $4000 + (000*128) + (208/2) - 128 9142LAttack1Monster176: equ $4000 + (000*128) + (192/2) - 128 9144Monster176Move:9145Monster176Idle:9146 db 04 9147 db 4 9148 dw RIdle1Monster1769149 dw RIdle2Monster1769150 dw RIdle1Monster1769151 dw RIdle3Monster1769152 9153 dw LIdle1Monster1769154 dw LIdle2Monster1769155 dw LIdle1Monster1769156 dw LIdle3Monster1769158Monster176AttackPatternRight:9159 db AnimateAttack | dw RIdle1Monster176 | db 003,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,007,InitiateAttack9160Monster176AttackPatternRightUp:9161 db AnimateAttack | dw RIdle1Monster176 | db 008,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,004,InitiateAttack9162Monster176AttackPatternRightDown:9163 db AnimateAttack | dw RIdle1Monster176 | db 006,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,002,InitiateAttack9165Monster176AttackPatternLeft:9166 db AnimateAttack | dw LIdle1Monster176 | db 007,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,003,InitiateAttack9167Monster176AttackPatternLeftUp:9168 db AnimateAttack | dw LIdle1Monster176 | db 002,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,006,InitiateAttack9169Monster176AttackPatternLeftDown:9170 db AnimateAttack | dw LIdle1Monster176 | db 004,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,008,InitiateAttack91729175RIdle1Monster177: equ $4000 + (120*128) + (000/2) - 128 9176RIdle2Monster177: equ $4000 + (120*128) + (016/2) - 128 9178LIdle1Monster177: equ $4000 + (120*128) + (048/2) - 128 9179LIdle2Monster177: equ $4000 + (120*128) + (032/2) - 128 9181Monster177Move:9182Monster177Idle:9183 db 06 9184 db 2 9185 dw RIdle1Monster1779186 dw RIdle2Monster1779187 9188 dw LIdle1Monster1779189 dw LIdle2Monster17791919194RIdle1Monster178: equ $4000 + (064*128) + (224/2) - 128 9195RIdle2Monster178: equ $4000 + (064*128) + (240/2) - 128 9196RAttack1Monster178: equ $4000 + (184*128) + (128/2) - 128 9198LIdle1Monster178: equ $4000 + (184*128) + (176/2) - 128 9199LIdle2Monster178: equ $4000 + (184*128) + (160/2) - 128 9200LAttack1Monster178: equ $4000 + (184*128) + (144/2) - 128 9202Monster178Move:9203Monster178Idle:9204 db 04 9205 db 2 9206 dw RIdle1Monster1789207 dw RIdle2Monster1789208 9209 dw LIdle1Monster1789210 dw LIdle2Monster1789212Monster178AttackPatternRight:9213 db AnimateAttack | dw RIdle1Monster178 | db 003,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,007,InitiateAttack9214Monster178AttackPatternRightUp:9215 db AnimateAttack | dw RIdle1Monster178 | db 008,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,004,InitiateAttack9216Monster178AttackPatternRightDown:9217 db AnimateAttack | dw RIdle1Monster178 | db 006,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,002,InitiateAttack9219Monster178AttackPatternLeft:9220 db AnimateAttack | dw LIdle1Monster178 | db 007,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,003,InitiateAttack9221Monster178AttackPatternLeftUp:9222 db AnimateAttack | dw LIdle1Monster178 | db 002,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,006,InitiateAttack9223Monster178AttackPatternLeftDown:9224 db AnimateAttack | dw LIdle1Monster178 | db 004,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,008,InitiateAttack92279230RIdle1Monster179: equ $4000 + (120*128) + (064/2) - 128 9231RIdle2Monster179: equ $4000 + (120*128) + (080/2) - 128 9233LIdle1Monster179: equ $4000 + (120*128) + (112/2) - 128 9234LIdle2Monster179: equ $4000 + (120*128) + (096/2) - 128 9236Monster179Move:9237Monster179Idle:9238 db 06 9239 db 2 9240 dw RIdle1Monster1799241 dw RIdle2Monster1799242 9243 dw LIdle1Monster1799244 dw LIdle2Monster17992469249RIdle1Monster180: equ $4000 + (184*128) + (000/2) - 128 9250RIdle2Monster180: equ $4000 + (184*128) + (016/2) - 128 9252LIdle1Monster180: equ $4000 + (184*128) + (048/2) - 128 9253LIdle2Monster180: equ $4000 + (184*128) + (032/2) - 128 9255Monster180Move:9256Monster180Idle:9257 db 06 9258 db 2 9259 dw RIdle1Monster1809260 dw RIdle2Monster1809261 9262 dw LIdle1Monster1809263 dw LIdle2Monster18092659268RIdle1Monster181: equ $4000 + (184*128) + (064/2) - 128 9269RIdle2Monster181: equ $4000 + (184*128) + (080/2) - 128 9271LIdle1Monster181: equ $4000 + (184*128) + (112/2) - 128 9272LIdle2Monster181: equ $4000 + (184*128) + (096/2) - 128 9274Monster181Move:9275Monster181Idle:9276 db 06 9277 db 2 9278 dw RIdle1Monster1819279 dw RIdle2Monster1819280 9281 dw LIdle1Monster1819282 dw LIdle2Monster18192849287RIdle1Monster182: equ $4000 + (080*128) + (000/2) - 128 9288RIdle2Monster182: equ $4000 + (080*128) + (048/2) - 128 9289RIdle3Monster182: equ $4000 + (080*128) + (096/2) - 128 9290RIdle4Monster182: equ $4000 + (080*128) + (144/2) - 128 9292LIdle1Monster182: equ $4000 + (216*128) + (144/2) - 128 9293LIdle2Monster182: equ $4000 + (216*128) + (096/2) - 128 9294LIdle3Monster182: equ $4000 + (216*128) + (048/2) - 128 9295LIdle4Monster182: equ $4000 + (216*128) + (000/2) - 128 9297Monster182Move:9298Monster182Idle:9299 db 03 9300 db 4 9301 dw RIdle1Monster1829302 dw RIdle2Monster1829303 dw RIdle3Monster1829304 dw RIdle4Monster1829305 9306 dw LIdle1Monster1829307 dw LIdle2Monster1829308 dw LIdle3Monster1829309 dw LIdle4Monster18293119314RIdle1Monster183: equ $4000 + (000*128) + (000/2) - 128 9315RIdle2Monster183: equ $4000 + (000*128) + (032/2) - 128 9316RIdle3Monster183: equ $4000 + (000*128) + (064/2) - 128 9317RIdle4Monster183: equ $4000 + (000*128) + (096/2) - 128 9318RIdle5Monster183: equ $4000 + (000*128) + (128/2) - 128 9319RIdle6Monster183: equ $4000 + (000*128) + (160/2) - 128 9320RAttack1Monster183: equ $4000 + (000*128) + (192/2) - 128 9322LIdle1Monster183: equ $4000 + (040*128) + (192/2) - 128 9323LIdle2Monster183: equ $4000 + (040*128) + (160/2) - 128 9324LIdle3Monster183: equ $4000 + (040*128) + (128/2) - 128 9325LIdle4Monster183: equ $4000 + (040*128) + (096/2) - 128 9326LIdle5Monster183: equ $4000 + (040*128) + (064/2) - 128 9327LIdle6Monster183: equ $4000 + (040*128) + (032/2) - 128 9328LAttack1Monster183: equ $4000 + (040*128) + (000/2) - 128 9330Monster183Move:9331Monster183Idle:9332 db 03 9333 db 8 9334 dw RIdle1Monster1839335 dw RIdle2Monster1839336 dw RIdle3Monster1839337 dw RIdle4Monster1839338 dw RIdle5Monster1839339 dw RIdle6Monster1839340 dw RIdle3Monster1839341 dw RIdle4Monster1839342 9343 dw LIdle1Monster1839344 dw LIdle2Monster1839345 dw LIdle3Monster1839346 dw LIdle4Monster1839347 dw LIdle5Monster1839348 dw LIdle6Monster1839349 dw LIdle3Monster1839350 dw LIdle4Monster1839352Monster183AttackPatternRight:9353 db AnimateAttack | dw Rattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile9354Monster183AttackPatternLeft:9355 db AnimateAttack | dw Lattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile93579360RIdle1Monster184: equ $4000 + (120*128) + (000/2) - 128 9361RIdle2Monster184: equ $4000 + (120*128) + (032/2) - 128 9362RIdle3Monster184: equ $4000 + (120*128) + (064/2) - 128 9364LIdle1Monster184: equ $4000 + (120*128) + (160/2) - 128 9365LIdle2Monster184: equ $4000 + (120*128) + (128/2) - 128 9366LIdle3Monster184: equ $4000 + (120*128) + (096/2) - 128 9368Monster184Move:9369Monster184Idle:9370 db 04 9371 db 4 9372 dw RIdle1Monster1849373 dw RIdle2Monster1849374 dw RIdle3Monster1849375 dw RIdle2Monster1849376 9377 dw LIdle1Monster1849378 dw LIdle2Monster1849379 dw LIdle3Monster1849380 dw LIdle2Monster18493829385RIdle1Monster185: equ $4000 + (168*128) + (000/2) - 128 9386RIdle2Monster185: equ $4000 + (168*128) + (032/2) - 128 9387RIdle3Monster185: equ $4000 + (168*128) + (064/2) - 128 9389LIdle1Monster185: equ $4000 + (168*128) + (160/2) - 128 9390LIdle2Monster185: equ $4000 + (168*128) + (128/2) - 128 9391LIdle3Monster185: equ $4000 + (168*128) + (096/2) - 128 9393Monster185Move:9394Monster185Idle:9395 db 04 9396 db 4 9397 dw RIdle1Monster1859398 dw RIdle2Monster1859399 dw RIdle3Monster1859400 dw RIdle2Monster1859401 9402 dw LIdle1Monster1859403 dw LIdle2Monster1859404 dw LIdle3Monster1859405 dw LIdle2Monster18594079410RIdle1Monster186: equ $4000 + (120*128) + (192/2) - 128 9411RIdle2Monster186: equ $4000 + (120*128) + (224/2) - 128 9412RIdle3Monster186: equ $4000 + (000*128) + (224/2) - 128 9414LIdle1Monster186: equ $4000 + (168*128) + (224/2) - 128 9415LIdle2Monster186: equ $4000 + (168*128) + (192/2) - 128 9416LIdle3Monster186: equ $4000 + (048*128) + (224/2) - 128 9418Monster186Move:9419Monster186Idle:9420 db 04 9421 db 4 9422 dw RIdle1Monster1869423 dw RIdle2Monster1869424 dw RIdle3Monster1869425 dw RIdle2Monster1869426 9427 dw LIdle1Monster1869428 dw LIdle2Monster1869429 dw LIdle3Monster1869430 dw LIdle2Monster18694329435RIdle1Monster187: equ $4000 + (208*128) + (000/2) - 128 9436RIdle2Monster187: equ $4000 + (208*128) + (032/2) - 128 9437RIdle3Monster187: equ $4000 + (208*128) + (064/2) - 128 9439LIdle1Monster187: equ $4000 + (208*128) + (160/2) - 128 9440LIdle2Monster187: equ $4000 + (208*128) + (128/2) - 128 9441LIdle3Monster187: equ $4000 + (208*128) + (096/2) - 128 9443Monster187Move:9444Monster187Idle:9445 db 03 9446 db 4 9447 dw RIdle1Monster1879448 dw RIdle2Monster1879449 dw RIdle3Monster1879450 dw RIdle2Monster1879451 9452 dw LIdle1Monster1879453 dw LIdle2Monster1879454 dw LIdle3Monster1879455 dw LIdle2Monster1879463MSXHeroes.asm 1051 ds $c000-$,$ff1052dephase10541057BattleMonsterSpriteSheet1Block: equ $551058phase $40001059 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1.SC5",7,208 * 128 1060 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1Bottom48Lines.SC5",7,048 * 128 1061 ds $c000-$,$ff1062dephase10641067BattleMonsterSpriteSheet2Block: equ $571068phase $40001069 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2.SC5",7,208 * 128 1070 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2Bottom48Lines.SC5",7,048 * 128 1071 ds $c000-$,$ff1072dephase10741077BattleMonsterSpriteSheet3Block: equ $591078phase $40001079 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3.SC5",7,208 * 128 1080 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3Bottom48Lines.SC5",7,048 * 128 1081 ds $c000-$,$ff1082dephase10841087BattleMonsterSpriteSheet4Block: equ $5b1088phase $40001089 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4.SC5",7,208 * 128 1090 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4Bottom48Lines.SC5",7,048 * 128 1091 ds $c000-$,$ff1092dephase10941097BattleMonsterSpriteSheet5Block: equ $5d1098phase $40001099 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5.SC5",7,208 * 128 1100 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5Bottom48Lines.SC5",7,048 * 128 1101 ds $c000-$,$ff1102dephase11041107BattleMonsterSpriteSheet6Block: equ $5f1108phase $40001109 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6.SC5",7,208 * 128 1110 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6Bottom48Lines.SC5",7,048 * 128 1111 ds $c000-$,$ff1112dephase11141117BattleMonsterSpriteSheet7Block: equ $611118phase $40001119 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7.SC5",7,208 * 128 1120 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7Bottom48Lines.SC5",7,048 * 128 1121 ds $c000-$,$ff1122dephase11241127BattleMonsterSpriteSheet8Block: equ $631128phase $40001129 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8.SC5",7,208 * 128 1130 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8Bottom48Lines.SC5",7,048 * 128 1131 ds $c000-$,$ff1132dephase11341137CampaignSelectBlock: equ $651138phase $40001139 incbin "..\grapx\TitleScreen\CampaignSelect.SC5",7,212 * 128 1140 ds $c000-$,$ff1141dephase11431146VictoryBlock: equ $671147GentleWinterMiniMapsBlock: equ $671148phase $40001149 incbin "..\grapx\Battlefield\Victory.SC5",7,207 * 128 1150 incbin "..\grapx\hud\GentleWinterMiniMaps.SC5",7,048 * 128 1151 ds $c000-$,$ff1152dephase11541157DefeatBlock: equ $691158phase $40001159 incbin "..\grapx\Battlefield\Defeat.SC5",7,207 * 128 1160 ds $c000-$,$ff1161dephase11631166RetreatBlock: equ $6b1167phase $40001168 incbin "..\grapx\Battlefield\Retreat.SC5",7,117 * 128 1169 ds $8000-$,$ff1170dephase11721175TitleScreenCodeblock: equ $6c1176phase $80001177 TitleScreenCode.asm1HandleTitleScreenCode:2 jp InsertMouseCode3 jp TitleScreenCode4 jp ScenarioSelectCode5 jp CampaignSelectCode78ResetBuildings: db 1, 0, 0, 0, 0, 0, 0, 010InsertMousePalette:11 incbin"..\grapx\TitleScreen\InsertMousePalette.pl"12InsertMouseCode:13 ld a,(MOUSIDBuffer)14 inc a15 jp z,TitleScreenCode16 17 call screenoff19 ld a,420 ld (GameStatus),a 21 ld a,122 ld (activepage),a24 ld hl,ClearPage1And225 call DoCopy26 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady27 call docopy28 29 call SetVButton 30 call SetInsertMouseGraphics 31 call SetInsertMouseText32 xor a33 ld (activepage),a 34 call SetInsertMouseGraphics 35 call SetInsertMouseText36 ld hl,InsertMousePalette37 call SetPalette38 call SetSpatInCastle39 call SetInterruptHandler 41 call screenon42 .engine:43 halt44 ld a,(framecounter)45 inc a46 ld (framecounter),a47 call CheckMouse49 call SwapAndSetPage 50 call PopulateControls 5257 ld a,(NewPrContr)58 bit 5,a 59 jp nz,TitleScreenCode6167 68 ld ix,GenericButtonTable69 call ScenarioSelectCode.CheckButtonMouseInteractionGenericButtons70 call .CheckButtonClicked 72 ld ix,GenericButtonTable73 call ScenarioSelectCode.SetGenericButtons 75 jp .engine77.CheckButtonClicked:78 ret nc79 pop af80 jp TitleScreenCode82SetInsertMouseText:83 call SetInsertMouseFontPage0Y212 85 ld b,093+00 86 ld c,031+00 87 ld hl,TextInsertMouse188 call SetText 90 ld b,080+00 91 ld c,152+00 92 ld hl,TextInsertMouse293 call SetText 94 ret96TextInsertMouse1:97 db "Mouse not detected",25598TextInsertMouse2:99 db " For optimal experience,",254100 db "please connect a mouse...",255102SetInsertMouseFontPage0Y212: 103 ld hl,$4000 + (000*128) + (000/2) - 128104 ld de,$0000 + (212*128) + (000/2) - 128105 ld bc,$0000 + (006*256) + (256/2)106 ld a,CastleOverviewFontBlock 107 jp CopyRamToVramCorrectedWithoutActivePageSetting 109SetVButton:110 ld hl,SetVButtonTable-2111 ld de,GenericButtonTable-2112 ld bc,2+(GenericButtonTableLenghtPerButton*01)113 ldir114 ret116SetVButtonTableGfxBlock: db PlayerStartTurnBlock117SetVButtonTableAmountOfButtons: db 01118SetVButtonTable: 119 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 121.Button1Ytop: equ 146122.Button1YBottom: equ .Button1Ytop + 019123.Button1XLeft: equ 184124.Button1XRight: equ .Button1XLeft + 020127ClearPage1And2:128 db 000,000,000,000 129 db 000,000,000,000 130 db 000,001,000,002 131 db 13+13*16,000,$C0 133SetInsertMouseGraphics:134 ld hl,$4000 + (000*128) + (000/2) - 128135 ld de,$0000 + (024*128) + (048/2) - 128136 ld bc,$0000 + (148*256) + (162/2)137 ld a,ScrollBlock 138 call CopyRamToVramCorrectedCastleOverview 140 ld hl,$4000 + (139*128) + (044/2) - 128141 ld de,$0000 + ((024+53)*128) + ((020+58)/2) - 128142 ld bc,$0000 + (060*256) + (104/2)143 ld a,DefeatBlock 144 call CopyRamToVramCorrectedCastleOverview 146 ld hl,$4000 + (000*128) + (000/2) - 128147 ld de,$0000 + ((024+18)*128) + ((020+60)/2) - 128148 ld bc,$0000 + (112*256) + (106/2)149 ld a,InsertMouseBlock 150 jp CopyRamToVramCorrectedCastleOverview 152CheckMouse:153155 ld a,(framecounter)156 and 63157 ret nz159 ld a,(slot.page12rom) 160 out ($a8),a 161 ld a,Loaderblock 162 call block12 163 ld hl,CHMOUS164 jp (hl)167TitleScreenPalette:168 incbin"..\grapx\TitleScreen\TitleScreenPalette.pl"169TitleScreenCode:170 ld a,TitleSong171 ld (ChangeSong?),a172 173 call screenoff175 ld a,4176 ld (GameStatus),a 177 ld a,1178 ld (activepage),a179 call SetTitleScreenGraphics180 xor a181 ld (activepage),a 182 call SetTitleScreenGraphics183 ld hl,TitleScreenPalette184 call SetPalette185 call SetSpatInCastle186 call SetInterruptHandler 187 call SetTitleScreenButtons188 xor a189 ld (framecounter),a192 .engine:195198 halt199 ld a,(framecounter)200 inc a201 ld (framecounter),a202 call screenonAfter3Frames203 call CheckMouse204 call SwapAndSetPage 205 call PopulateControls 207213 214 ld ix,GenericButtonTable215 call ScenarioSelectCode.CheckButtonMouseInteractionGenericButtons216 call .CheckButtonClicked 218 ld ix,GenericButtonTable219 call ScenarioSelectCode.SetGenericButtons 221 jp .engine223.CheckButtonClicked:224 ret nc226 ld a,b227 cp 1228 jp z,.CollectionPressed229 cp 2230 jp z,.OptionsPressed231 cp 3232 jp z,.LoadGamePressed233 cp 4234 jp z,.CampaignPressed235238 .NewGamePressed:239 pop af240 jp ScenarioSelectCode242 .CampaignPressed:243 pop af244 jp CampaignSelectCode246 .LoadGamePressed:247 ret249 .OptionsPressed:250 ret252 .CollectionPressed:253 ret258SetTitleScreenButtons:259 ld hl,TitleScreenButtonTable-2260 ld de,GenericButtonTable-2261 ld bc,2+(GenericButtonTableLenghtPerButton*5)262 ldir263 ret265TitleScreenButton1Ytop: equ 128266TitleScreenButton1YBottom: equ TitleScreenButton1Ytop + 014267TitleScreenButton1XLeft: equ 094268TitleScreenButton1XRight: equ TitleScreenButton1XLeft + 070270TitleScreenButton2Ytop: equ 143271TitleScreenButton2YBottom: equ TitleScreenButton2Ytop + 016272TitleScreenButton2XLeft: equ 098273TitleScreenButton2XRight: equ TitleScreenButton2XLeft + 062275TitleScreenButton3Ytop: equ 159276TitleScreenButton3YBottom: equ TitleScreenButton3Ytop + 015277TitleScreenButton3XLeft: equ 092278TitleScreenButton3XRight: equ TitleScreenButton3XLeft + 072280TitleScreenButton4Ytop: equ 175281TitleScreenButton4YBottom: equ TitleScreenButton4Ytop + 016282TitleScreenButton4XLeft: equ 104283TitleScreenButton4XRight: equ TitleScreenButton4XLeft + 050285TitleScreenButton5Ytop: equ 191286TitleScreenButton5YBottom: equ TitleScreenButton5Ytop + 015287TitleScreenButton5XLeft: equ 094288TitleScreenButton5XRight: equ TitleScreenButton5XLeft + 068290TitleScreenButtonTableGfxBlock: db TitleScreenButtonsBlock291TitleScreenButtonTableAmountOfButtons: db 5292TitleScreenButtonTable: 293if promo?294 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop+10,TitleScreenButton1YBottom+10,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + ((TitleScreenButton1Ytop+10)*128) + (TitleScreenButton1XLeft/2) - 128 295 db %0100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop+10,TitleScreenButton2YBottom+10,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + ((TitleScreenButton2Ytop+10)*128) + (TitleScreenButton2XLeft/2) - 128 296 db %0100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128297 db %0100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128298 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128299else300 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop,TitleScreenButton1YBottom,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + (TitleScreenButton1Ytop*128) + (TitleScreenButton1XLeft/2) - 128 301 db %1100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop,TitleScreenButton2YBottom,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + (TitleScreenButton2Ytop*128) + (TitleScreenButton2XLeft/2) - 128 302 db %1100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128303 db %1100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128304if CollectionOptionAvailable?305 db %1100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128306else307 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128308endif309endif311DeactivateAllHeroesAndCastles:312 ld a,255313 ld (pl1hero1y+HeroStatus),a314 ld (pl1hero2y+HeroStatus),a315 ld (pl1hero3y+HeroStatus),a316 ld (pl1hero4y+HeroStatus),a317 ld (pl1hero5y+HeroStatus),a318 ld (pl1hero6y+HeroStatus),a319 ld (pl1hero7y+HeroStatus),a320 ld (pl1hero8y+HeroStatus),a322 ld (pl2hero1y+HeroStatus),a323 ld (pl2hero2y+HeroStatus),a324 ld (pl2hero3y+HeroStatus),a325 ld (pl2hero4y+HeroStatus),a326 ld (pl2hero5y+HeroStatus),a327 ld (pl2hero6y+HeroStatus),a328 ld (pl2hero7y+HeroStatus),a329 ld (pl2hero8y+HeroStatus),a331 ld (pl3hero1y+HeroStatus),a332 ld (pl3hero2y+HeroStatus),a333 ld (pl3hero3y+HeroStatus),a334 ld (pl3hero4y+HeroStatus),a335 ld (pl3hero5y+HeroStatus),a336 ld (pl3hero6y+HeroStatus),a337 ld (pl3hero7y+HeroStatus),a338 ld (pl3hero8y+HeroStatus),a340 ld (pl4hero1y+HeroStatus),a341 ld (pl4hero2y+HeroStatus),a342 ld (pl4hero3y+HeroStatus),a343 ld (pl4hero4y+HeroStatus),a344 ld (pl4hero5y+HeroStatus),a345 ld (pl4hero6y+HeroStatus),a346 ld (pl4hero7y+HeroStatus),a347 ld (pl4hero8y+HeroStatus),a349 ld a,255350 ld (Castle1+CastlePlayer),a351 ld (Castle2+CastlePlayer),a352 ld (Castle3+CastlePlayer),a353 ld (Castle4+CastlePlayer),a354 ret356CampaignSelectCode:357 call screenoff358 call DeactivateAllHeroesAndCastles 360 ld a,4361 ld (GameStatus),a 362 ld a,1363 ld (activepage),a364365 ld (ScenarioPage),a366 ld (ScenarioSelected),a367 368 xor a369 ld (LitScenarioButtonInWhichPage?),a370 ld (AmountOfMapsVisibleInCurrentPage),a371 ld hl,0372 ld (WorldPointer),hl373 374 ld a,2375 ld (Difficulty),a 376 ld a,255377 ld (player1StartingTown),a378 ld (player2StartingTown),a379 ld (player3StartingTown),a380 ld (player4StartingTown),a381 382 ld hl,TavernHeroesReset383 ld de,TavernHeroesTable384 ld bc,EndTavernHeroesReset-TavernHeroesReset385 ldir386 387 ld hl,ListOfUnlockedHeroes-1388 .FreeNextHero:389 inc hl390 ld a,(hl)391 or a392 jr z,.EndFreeAllUnlockedHeroes393 cp 255394 jr z,.FreeNextHero395 res 7,(hl)396 jr .FreeNextHero397 .EndFreeAllUnlockedHeroes:398 399 call SetCampaignSelectGraphics400 xor a401 ld (activepage),a 402 call SetCampaignSelectGraphics403 ld hl,InGamePalette404 call SetPalette405 call SetSpatInCastle406 call SetInterruptHandler 407 call SetCampaignSelectButtons408 call SetFontPage0Y212 410 call SetAmountOfCampaignButtons411 call SetAmountOfCampaignPageButtons412 call SetPage1ButtonConstantlyLit413 ld b,28414416 xor a417 ld (framecounter),a418 .engine:419 ld a,(framecounter)420 inc a421 ld (framecounter),a422423 call screenonAfter3Frames424 call CheckMouse425 call SwapAndSetPage 426 call PopulateControls 428434 435 ld ix,GenericButtonTable436 call ScenarioSelectCode.CheckButtonMouseInteractionGenericButtons437 call CheckCampaignSelectButtonClicked 439 ld ix,GenericButtonTable440 call ScenarioSelectCode.SetGenericButtons 443 call SetNamesInCampaignButtons444 call SetVButtonsNextToNames445 call SetTextPage123ButtonsCampaign446 jp .engine448SetTextPage123ButtonsCampaign:449 ld a,(AmountOfMapsUnlocked)450 cp 11-1451 ret c453 ld b,035-6 454 ld c,176 455 ld hl,TextPage1456 call SetText 458 ld b,069-6 459 ld c,176 460 ld hl,TextPage2461 call SetText 463 ld a,(AmountOfMapsUnlocked)464 cp 21-1465 ret c467 ld b,103-6 468 ld c,176 469 ld hl,TextPage3470 call SetText 471 ret473SetVButtonsNextToNames:474 ld a,(AmountOfMapsVisibleInCurrentPage)475 cp 11476 jr c,.EndCheckMaxMapsInCurrentPageCheck477 ld a,10478 .EndCheckMaxMapsInCurrentPageCheck:480 ld b,a481 ld de,$0000 + (028*128) + (120/2) - 128483 .loop:484 ld hl,13*128485 add hl,de486 ex de,hl488 push de489 push bc490 call .SetVbutton491 pop bc492 pop de493 djnz .loop495 496 ld a,(AmountOfMapsVisibleInCurrentPage)497 cp 11498 jp c,.SetNoVbutton500 501 ld a,(ScenarioPage)502 dec a503505 ld b,0506 jr z,.PageFound507 dec a508 ld b,10509 jr z,.PageFound510 ld b,20511 .PageFound:512 ld a,(ScenarioSelected)514 515 ret517 .PageButtonConstantlyLit:518 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128520.SetVbutton:521 ld hl,$4000 + (123*128) + (000/2) - 128522 ld bc,$0000 + (013*256) + (014/2)523 ld a,ScenarioSelectButtonsBlock 524 jp CopyRamToVramCorrectedCastleOverview 526.SetNoVbutton:527 ld hl,$4000 + (123*128) + (014/2) - 128528 ld bc,$0000 + (013*256) + (014/2)529 ld a,ScenarioSelectButtonsBlock 530 jp CopyRamToVramCorrectedCastleOverview 541EndCampaignScreenEngine:542549560571584 call SetTempisr 585 call SetSpatInGame586 xor a587 ld (GameStatus),a 588 ret590CheckCampaignSelectButtonClicked:591 ret nc593 ld a,b594 cp 6595 jp nc,.ScenarioPressed596 cp 3597 jp nc,.Page123Pressed598 cp 2599 jr z,.BeginPressed600603 .BackPressed:604 pop af605 jp TitleScreenCode607 .BeginPressed:608 ld hl,(WorldPointer)609 ld a,h610 or l611 ret z613 pop af614 jp EndCampaignScreenEngine616 .ScenarioPressed:617 ld a,(ScenarioPage)618 ld (LitScenarioButtonInWhichPage?),a619 ld a,15620 sub b621 ld (ScenarioSelected),a623 .LightCurrentActiveScenarioButton:624 625 ld a,(AmountOfMapsVisibleInCurrentPage)626 cp 11627 jr c,.EndCheckMaxMapsInCurrentPageCheck628 ld a,10629 .EndCheckMaxMapsInCurrentPageCheck:631 ld d,0632 ld e,a633 ld hl,GenericButtonTableLenghtPerButton634 call MultiplyHlWithDE 635 push hl636 pop bc638 ld hl,CampaignSelectButtonTable639 ld de,GenericButtonTable640641 ldir643 644 ld a,(ScenarioSelected)645 ld d,0646 ld e,a647 ld hl,GenericButtonTableLenghtPerButton648 call MultiplyHlWithDE 649 ld de,GenericButtonTable+1650 add hl,de651 ex de,hl652 ld hl,.ScenarioButtonConstantlyLit653 ld bc,4654 ldir656 657 ld a,(ScenarioPage)658 dec a659 ld b,0660 jr z,.PageFound661 dec a662 ld b,10663 jr z,.PageFound664 ld b,20665 .PageFound:666 ld a,(ScenarioSelected)667 add a,b 668 ld d,0669 ld e,a670 ld hl,LenghtMapData671 call MultiplyHlWithDE 672 ld de,GentleMaps673 add hl,de674 ld (WorldPointer),hl675 676 677 call .SetSelectedCampaignNameRightTopOfScreen678681 .SetSelectedCampaignNameRightTopOfScreen:682 call ClearCampaignNameAndDescriptionRightTopOfScreen683 ld b,152 684 ld c,021 686 ld hl,(WorldPointer)687 ld de,ScenarioNameAddress+4688 add hl,de690 call SetText 692 693 ld b,149 694 ld c,036 695 inc hl696 call SetText 697 jp SwapAndSetPage 699 .ScenarioButtonConstantlyLit:700 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 128701 .ScenarioButtonNormallyLit:702 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 128716 .Page123Pressed:717 ld b,3718 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+1719 jr z,.ScenarioPageFound720 cp 4721 ld b,2722 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+1723 jr z,.ScenarioPageFound724 ld b,1725 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+1726 .ScenarioPageFound:727 ld a,(ScenarioPage)728 cp b729 ret z730 ld a,b731 ld (ScenarioPage),a733 push de734 call SetAmountOfCampaignPageButtons735 pop de736 ld hl,.PageButtonConstantlyLit737 ld bc,4738 ldir740 741 ld hl,CampaignSelectButtonTable-2742 ld de,GenericButtonTable-2743 ld bc,2+(GenericButtonTableLenghtPerButton*10)744 ldir746 ld a,(ScenarioPage)747 ld b,a748 ld a,(LitScenarioButtonInWhichPage?)749 cp b750 call z,.LightCurrentActiveScenarioButton751 jp SetAmountOfCampaignButtons753 .PageButtonConstantlyLit:754 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128756screenonAfter3Frames:757 ld a,(framecounter)758 and 3759 ret nz760 jp screenon762ScenarioSelectCode:763 call screenoff764 call DeactivateAllHeroesAndCastles 766 ld a,4767 ld (GameStatus),a 768 ld a,1769 ld (activepage),a770771 ld (ScenarioPage),a772 ld (ScenarioSelected),a773 ld a,2774 ld (Difficulty),a 775 ld a,255776 ld (player1StartingTown),a777 ld (player2StartingTown),a778 ld (player3StartingTown),a779 ld (player4StartingTown),a780 781 ld hl,TavernHeroesReset782 ld de,TavernHeroesTable783 ld bc,EndTavernHeroesReset-TavernHeroesReset784 ldir785 786 ld hl,ListOfUnlockedHeroes-1787 .FreeNextHero:788 inc hl789 ld a,(hl)790 or a791 jr z,.EndFreeAllUnlockedHeroes792 cp 255793 jr z,.FreeNextHero794 res 7,(hl)795 jr .FreeNextHero796 .EndFreeAllUnlockedHeroes:797 798 call SetScenarioSelectGraphics799 xor a800 ld (activepage),a 801 call SetScenarioSelectGraphics802 ld hl,InGamePalette803 call SetPalette804 call SetSpatInCastle805 call SetInterruptHandler 806 call SetScenarioSelectButtons808 call SetFontPage0Y212 810 call SetAmountOfScenarioButtons811 call SetAmountOfScenarioPageButtons812 call SetPage1ButtonConstantlyLit813 call SetDifficultyButtonConstantlyLit814 ld b,28815 call .ScenarioPressed816 xor a817 ld (framecounter),a818 .engine:819 ld a,(framecounter)820 inc a821 ld (framecounter),a822823 call screenonAfter3Frames824 call CheckMouse825 call SwapAndSetPage 826 call PopulateControls 828837 838 ld ix,GenericButtonTable839 call .CheckButtonMouseInteractionGenericButtons840 call .CheckScenarioSelectButtonClicked 842 ld ix,GenericButtonTable843 call .SetGenericButtons 846 call SetNamesInScenarioButtons847 call SetTextPage123Buttons848 call SetTextHumanOrCPUButtons849 call SetTextStartingTownButtons850 call CheckRightClickDifficulty851 call CheckRightClickTownAllignment852 jp .engine854 .EndTitleScreenEngine:855 call .SortHumanCPUOFFPlayersAndTown 856 call .SetAmountOfPlayers857 call .SetStartingTown858 call .SetStartingResources859 call .SetStartingHeroes860 call .SetTavernHeroes861 call SetTempisr 862 call SetSpatInGame863 xor a864 ld (GameStatus),a 865 ret867.SetTavernHeroes:868 call .SetMaxAmountOfTavernSlots 869 ld hl,ListOfUnlockedHeroes 870 ld a,r871 call .IncreaseLoop 873 ld iy,TavernHeroesPlayer1875 .FillSlotsLoop:876 push iy877 call .SetTavernHeroesSlot878 pop iy879 inc iy880 djnz .FillSlotsLoop881 ret883 .SetTavernHeroesSlot:884 call .SetTavernHeroLoop885 ld de,TavernHeroTableLenght+1886 add iy,de887 call .SetTavernHeroLoop889 ld a,(amountofplayers)890 cp 2891 ret z893 ld de,TavernHeroTableLenght+1894 add iy,de895 call .SetTavernHeroLoop897 ld a,(amountofplayers)898 cp 3899 ret z901 ld de,TavernHeroTableLenght+1902 add iy,de903 call .SetTavernHeroLoop904 ret906 .SetMaxAmountOfTavernSlots:907 908 call .CheckAmountOfUnlockedHeroes 910 ld a,(amountofplayers)911 ld b,a912 ld a,c913 sub a,b914 ld b,0915 ld c,a 917 ld a,(amountofplayers)918 ld d,0919 ld e,a 920 call DivideBCbyDE 922 ld a,c923 cp 8924 jr c,.EndCheckOverFlow925 ld a,7926 .EndCheckOverFlow:927 ld b,a 928 ret930 .CheckAmountOfUnlockedHeroes: 931 ld hl,ListOfUnlockedHeroes932 ld c,0 933 .CheckAmountOfUnlockedHeroesLoop:934 ld a,(hl)935 or a936 ret z937 inc c938 inc hl939 jr .CheckAmountOfUnlockedHeroesLoop941 .StartOfList:942 ld hl,ListOfUnlockedHeroes944 .SetTavernHeroLoop: 945 ld a,(hl)946 or a947 jr z,.StartOfList948 bit 7,(hl)949 jr z,.TavernHeroFound950 call .IncreaseListWithRandomAmount 951 jr .SetTavernHeroLoop952 .TavernHeroFound:953 ld a,(hl)954 set 7,(hl) 955 ld (iy),a 956 .IncreaseListWithRandomAmount: 957 ld a,r958 and 15 960 .IncreaseLoop: 961 push af962 inc hl963 ld a,(hl)964 or a 965 jr nz,.EndCheckEndOfList966 ld hl,ListOfUnlockedHeroes967 .EndCheckEndOfList:968 pop af969 dec a970 jr nz,.IncreaseLoop971 ret973.SetStartingHeroes:974 ld ix,pl1hero1y975 ld iy,Castle1976 ld a,(player1StartingTown) 977 call .SetStartingHeroForThisPlayer978 ld ix,pl2hero1y979 ld iy,Castle2980 ld a,(player2StartingTown) 981 call .SetStartingHeroForThisPlayer983 ld a,(amountofplayers)984 cp 2985 ret z987 ld ix,pl3hero1y988 ld iy,Castle3989 ld a,(player3StartingTown) 990 call .SetStartingHeroForThisPlayer992 ld a,(amountofplayers)993 cp 3994 ret z996 ld ix,pl4hero1y997 ld iy,Castle4998 ld a,(player4StartingTown) 999 call .SetStartingHeroForThisPlayer1000 ret1002 .SetStartingHeroForThisPlayer:1003 push ix1004 ld b,a1005 add a,a1006 add a,b 1007 ld d,01008 ld e,a1009 ld ix,ListOfHeroAddressesAndAmounts-31010 add ix,de1012 1013 ld e,(ix+2) 1014 ld d,0 1015 ld a,r1016 ld b,01017 ld c,a 1018 call DivideBCbyDE 1020 ld e,(ix)1021 ld d,(ix+1) 1022 add hl,de1023 1024 bit 7,(hl) 1025 jr z,.EndCheckPickRandomHero1026 1028 .PickRandomHeroWithoutCastle:1029 ld hl,HeroesWithoutCastle1030 ld a,r1031 and 31 10331040 ld d,01041 ld e,a1042 add hl,de1043 bit 7,(hl) 1044 jr nz,.PickRandomHeroWithoutCastle1045 .EndCheckPickRandomHero:1046 ld b,(hl) 1047 set 7,(hl) 10491052 pop ix1053 call .SetHero1054 ret1056 .SetHero:1057 push bc 1058 call .ClearHeroSlot1059 call .SetYX 1060 pop bc 1061 call .SetHeroSpecificInfo1062 call .SetManaAndMovementToMax 1063 ret1065 .SetManaAndMovementToMax:1066 call SetHeroMaxMovementPoints.IxAlreadySet1067 ld (ix+HeroMove),a 1069 ld de,ItemIntelligencePointsTable1070 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet1071 push ix1072 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1073 pop ix1074 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1075 ld l,(ix+HeroTotalMana+0)1076 ld h,(ix+HeroTotalMana+1)1077 ld (ix+HeroMana+0),l1078 ld (ix+HeroMana+1),h1079 ret1081 .SetHeroSpecificInfo: 1083 ld hl,HeroAddressesAdol-heroAddressesLenght1084 ld de,heroAddressesLenght 1085 .loop3:1086 add hl,de1087 djnz .loop31088 ld (ix+HeroSpecificInfo+0),l1089 ld (ix+HeroSpecificInfo+1),h1091 1092 ld de,HeroInfoSkill1093 add hl,de1094 ld a,(hl)1095 ld (ix+HeroSkills),a1097 1098 inc hl 1099 ld a,(hl)1100 dec a1101 ld b,01102 ld c,a1103 ld de,111104 call DivideBCbyDE 1106 add hl,hl 1107 add hl,hl 1108 ld de,.HeroSkillPerClassTable1109 add hl,de1110 ld a,(hl)1111 ld (ix+HeroStatAttack),a1112 inc hl1113 ld a,(hl)1114 ld (ix+HeroStatDefense),a1115 inc hl1116 ld a,(hl)1117 ld (ix+HeroStatKnowledge),a1118 inc hl1119 ld a,(hl)1120 ld (ix+HeroStatSpellDamage),a1122 1123 ld a,(iy+CastleLevel1Units) 1124 ld (ix+HeroUnits),a1125 ld l,(iy+CastleLevel1UnitsAvail) 1126 ld h,(iy+CastleLevel1UnitsAvail+1)1127 ld (ix+HeroUnits+1),l1128 ld (ix+HeroUnits+2),h1130 ld a,(iy+CastleLevel2Units) 1131 ld (ix+HeroUnits+3),a1132 ld l,(iy+CastleLevel2UnitsAvail) 1133 ld h,(iy+CastleLevel2UnitsAvail+1)1134 ld (ix+HeroUnits+4),l1135 ld (ix+HeroUnits+5),h1136 ret1138 .HeroSkillPerClassTable:11391140 db 2,1,1,1 1141 db 3,1,1,0 1142 db 1,3,1,0 1143 db 1,2,1,1 1144 1145 db 1,2,1,1 1146 db 1,1,2,1 1147 db 2,1,1,1 1148 1149 db 0,0,3,2 1150 db 1,0,1,3 1151 db 0,1,2,2 1152 db 1,1,2,1 1154 .ClearHeroSlot:1155 ld hl,EmptyHeroRecruitedAtTavern1156 push ix1157 pop de1158 ld bc,lenghtherotable-2 1159 ldir1160 ret1162 .SetYX:1163 ld a,(iy+CastleY) 1164 dec a1165 ld (ix+HeroY),a 1166 ld a,(iy+Castlex) 1167 inc a1168 inc a1169 ld (ix+HeroX),a 1170 ret1173.SetStartingResources:1174 ld a,(Difficulty)1175 dec a1176 ld hl,.ResourcesEasy1177 jr z,.DifficultyFound1178 dec a1179 ld hl,.ResourcesNormal1180 jr z,.DifficultyFound1181 dec a1182 ld hl,.ResourcesHard1183 jr z,.DifficultyFound1184 dec a1185 ld hl,.ResourcesExpert1186 jr z,.DifficultyFound11871188 ld hl,.ResourcesImpossible11891190 1191 .DifficultyFound:1192 push hl1193 ld de,ResourcesPlayer11194 call .SetResources1195 pop hl1196 push hl1197 ld de,ResourcesPlayer21198 call .SetResources1199 pop hl1200 push hl1201 ld de,ResourcesPlayer31202 call .SetResources1203 pop hl1204 push hl1205 ld de,ResourcesPlayer41206 call .SetResources1207 pop hl1208 ret1210 .SetResources:1211 ld bc,101212 ldir1213 ret1214 1215 .ResourcesEasy: dw 30000, 30,30,15,151216 .ResourcesNormal: dw 20000, 20,20,10,101217 .ResourcesHard: dw 15000, 15,15,07,071218 .ResourcesExpert: dw 10000, 10,10,04,041219 .ResourcesImpossible: dw 00000, 00,00,00,001222.SetStartingTown:1223 1224 ld hl,player1StartingTown1225 call SetTextStartingTownButtons.SetTownNameInHl1226 ld de,Castle1+CastleName1227 ld bc,InfoTownLenght1228 ldir 1230 ld hl,player2StartingTown1231 call SetTextStartingTownButtons.SetTownNameInHl1232 ld de,Castle2+CastleName1233 ld bc,InfoTownLenght1234 ldir 1236 ld hl,player3StartingTown1237 call SetTextStartingTownButtons.SetTownNameInHl1238 ld de,Castle3+CastleName1239 ld bc,InfoTownLenght1240 ldir 1242 ld hl,player4StartingTown1243 call SetTextStartingTownButtons.SetTownNameInHl1244 ld de,Castle4+CastleName1245 ld bc,InfoTownLenght1246 ldir 1248 1249 ld hl,player1StartingTown1250 call .ChangeTownInCaseRandomIsSelected1251 call SetTextStartingTownButtons.SetTownNameInHl1252 ld de,Castle1+CastleName1253 ld bc,InfoTownLenght1254 ldir 1256 ld hl,player2StartingTown1257 call .ChangeTownInCaseRandomIsSelected1258 call SetTextStartingTownButtons.SetTownNameInHl1259 ld de,Castle2+CastleName1260 ld bc,InfoTownLenght1261 ldir 1263 ld hl,player3StartingTown1264 ld a,(amountofplayers)1265 cp 31266 call nc,.ChangeTownInCaseRandomIsSelected1267 call SetTextStartingTownButtons.SetTownNameInHl1268 ld de,Castle3+CastleName1269 ld bc,InfoTownLenght1270 ldir 1272 ld hl,player4StartingTown1273 ld a,(amountofplayers)1274 cp 41275 call nc,.ChangeTownInCaseRandomIsSelected1276 call SetTextStartingTownButtons.SetTownNameInHl1277 ld de,Castle4+CastleName1278 ld bc,InfoTownLenght1279 ldir 1280 1281 ld de,Castle1+CastleLevel1282 call .ResetAllBuildings1283 ld de,Castle2+CastleLevel1284 call .ResetAllBuildings1285 ld de,Castle3+CastleLevel1286 call .ResetAllBuildings1287 ld de,Castle4+CastleLevel1288 call .ResetAllBuildings1289 ret1291 .ChangeTownInCaseRandomIsSelected:1292 ld a,(hl)1293 or a1294 ret nz1296 .SetRandomTown:1297 1298 ld a,(TotalAmountOfUnlockedTowns)1299 ld e,a1300 ld d,0 1301 ld a,r1302 ld b,01303 ld c,a 1304 push hl1305 call DivideBCbyDE 1307 ld a,l1308 inc a 1309 pop hl1310 ld b,a 1311 1312 ld a,(player1StartingTown)1313 cp b1314 jr z,.SetRandomTown1315 ld a,(player2StartingTown)1316 cp b1317 jr z,.SetRandomTown1318 ld a,(player3StartingTown)1319 cp b1320 jr z,.SetRandomTown1321 ld a,(player4StartingTown)1322 cp b1323 jr z,.SetRandomTown1325 ld (hl),b1326 ld a,b 1327 ret1329 .ResetAllBuildings:1330 ld hl,ResetBuildings1331 ld bc,81332 ldir1333 ret1335.SetAmountOfPlayers:1336 ld a,21337 ld (amountofplayers),a1339 ld ix,(WorldPointer)1340 ld a,(ix+ScenarioNameAddress)1341 cp "2"1342 ret z1343 1344 ld a,(player3human?) 1345 cp 21346 ret z1347 ld a,31348 ld (amountofplayers),a1350 ld ix,(WorldPointer)1351 ld a,(ix+ScenarioNameAddress)1352 cp "3"1353 ret z 1355 ld a,(player4human?) 1356 cp 21357 ret z1358 ld a,41359 ld (amountofplayers),a1360 ret1362.SortHumanCPUOFFPlayersAndTown:1363 1364 ld a,(player4human?) 1365 cp 21366 jr z,.EndCheckMovePlayer4Up1367 ld a,(player3human?) 1368 cp 21369 jr z,.MovePlayer4Up1370 .EndCheckMovePlayer4Up:1372 1373 ld a,(player3human?) 1374 cp 21375 jr z,.EndCheckMovePlayer3Up1376 ld a,(player2human?) 1377 cp 21378 jr z,.MovePlayer3Up1379 .EndCheckMovePlayer3Up:1381 1382 ld a,(player2human?) 1383 cp 21384 jr z,.EndCheckMovePlayer2Up1385 ld a,(player1human?) 1386 cp 21387 jr z,.MovePlayer2Up1388 .EndCheckMovePlayer2Up:1389 ret1391 .MovePlayer2Up: 1392 ld a,(player2human?) 1393 ld (player1human?),a 1394 ld a,21395 ld (player2human?),a 1397 ld a,(player2StartingTown) 1398 ld (player1StartingTown),a 1399 jp .SortHumanCPUOFFPlayersAndTown1401 .MovePlayer3Up: 1402 ld a,(player3human?) 1403 ld (player2human?),a 1404 ld a,21405 ld (player3human?),a 1407 ld a,(player3StartingTown) 1408 ld (player2StartingTown),a 1409 jp .SortHumanCPUOFFPlayersAndTown1411 .MovePlayer4Up: 1412 ld a,(player4human?) 1413 ld (player3human?),a 1414 ld a,21415 ld (player4human?),a 1417 ld a,(player4StartingTown) 1418 ld (player3StartingTown),a 1419 jp .SortHumanCPUOFFPlayersAndTown1424.CheckScenarioSelectButtonClicked: 1425 ret nc1427 ld a,b1428 cp 191429 jp nc,.ScenarioPressed1430 cp 161431 jp nc,.Page123Pressed1432 cp 141433 jp z,.BackPressed1434 cp 151435 jp z,.BeginPressed1436 cp 101437 jp nc,.HumanOrCPUPressed1438 cp 061439 jp nc,.StartingTownPressed1441 .DifficultyPressed:1442 ld b,11443 cp 51444 jr z,.SetDifficulty1445 ld b,21446 cp 41447 jr z,.SetDifficulty1448 ld b,31449 cp 31450 jr z,.SetDifficulty1451 ld b,41452 cp 21453 jr z,.SetDifficulty1454 ld b,51455 .SetDifficulty:1456 ld a,b1457 ld (Difficulty),a1458 call SetDifficultyButtonConstantlyLit1459 ret1461 .StartingTownPressed:14621463 cp 91464 ld hl,player1StartingTown1465 jr z,.StartingTownFound1466 cp 81467 ld hl,player2StartingTown1468 jr z,.StartingTownFound1469 cp 71470 ld hl,player3StartingTown1471 jr z,.StartingTownFound1472 ld hl,player4StartingTown1473 .StartingTownFound:1474 ld a,(hl)1475 inc a1476 ld (hl),a1477 1478 1479 ld b,0 1480 ld a,(player1StartingTown)1481 cp (hl)1482 jr nz,.EndCheckInUseByPlayer11483 inc b1484 .EndCheckInUseByPlayer1:1485 ld a,(player2StartingTown)1486 cp (hl)1487 jr nz,.EndCheckInUseByPlayer21488 inc b1489 .EndCheckInUseByPlayer2:1490 ld a,(player3StartingTown)1491 cp (hl)1492 jr nz,.EndCheckInUseByPlayer31493 inc b1494 .EndCheckInUseByPlayer3:1495 ld a,(player4StartingTown)1496 cp (hl)1497 jr nz,.EndCheckInUseByPlayer41498 inc b1499 .EndCheckInUseByPlayer4:1500 bit 0,b1501 jr z,.StartingTownFound 1504 ld a,(TotalAmountOfUnlockedTowns)1505 inc a1506 cp (hl)1508 ret nz1509 ld (hl),01510 ret1512 .HumanOrCPUPressed:15131514 cp 131515 ld hl,player1human?1516 jr z,.HumanOrCPUPPressed1517 cp 121518 ld hl,player2human?1519 jr z,.HumanOrCPUPPressed1520 cp 111521 ld hl,player3human?1522 jr z,.HumanOrCPUPPressed1523 ld hl,player4human?1525 .HumanOrCPUPPressed:1526 1527 ld a,(hl) 1528 dec a1529 jr nz,.EndCheckCurrentButtonPressedIsHuman1530 1531 ld c,1 1532 call .CheckAmountOfButtonsCPUorHuman1533 ld a,b 1534 cp 1 1535 ret z1536 .EndCheckCurrentButtonPressedIsHuman:1538 1539 ld a,(hl) 1540 or a1541 jr nz,.EndCheckCurrentButtonPressedIsCPU1542 1543 ld c,1 1544 call .CheckAmountOfButtonsCPUorHuman1545 ld a,b 1546 cp 2 1547 jr nc,.EndCheckCurrentButtonPressedIsCPU1548 1549 ld c,0 1550 call .CheckAmountOfButtonsCPUorHuman1551 ld a,b 1552 cp 2 1553 jr nc,.EndCheckCurrentButtonPressedIsCPU1554 ld (hl),1 1555 ret1556 .EndCheckCurrentButtonPressedIsCPU:1558 ld a,(hl)1559 dec a1560 ld (hl),a1561 cp 2551562 ret nz1563 ld (hl),2 1564 ld a,%1100 00111565 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 1566 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 1567 ld ix,(WorldPointer)1568 ld a,(ix+ScenarioNameAddress)1569 cp "2"1570 ret z1571 ld a,%1100 00111572 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 1573 ld ix,(WorldPointer)1574 ld a,(ix+ScenarioNameAddress)1575 cp "3"1576 ret z1577 ld a,%1100 00111578 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 1579 ret1581 .CheckAmountOfButtonsCPUorHuman:1582 ld b,0 1583 ld a,(player1human?)1584 cp c1585 jr nz,.EndCheckButtonPlayer11586 inc b1587 .EndCheckButtonPlayer1:1588 ld a,(player2human?)1589 cp c1590 jr nz,.EndCheckButtonPlayer21591 inc b1592 .EndCheckButtonPlayer2:1593 1594 ld ix,(WorldPointer)1595 ld a,(ix+ScenarioNameAddress)1596 cp "2"1597 ret z 1599 ld a,(player3human?)1600 cp c1601 jr nz,.EndCheckButtonPlayer31602 inc b1603 .EndCheckButtonPlayer3:1605 ld ix,(WorldPointer)1606 ld a,(ix+ScenarioNameAddress)1607 cp "3"1608 ret z1610 ld a,(player4human?)1611 cp c1612 ret nz1613 inc b1614 ret1616 .BackPressed:1617 pop af1618 jp TitleScreenCode1620 .BeginPressed:1621 pop af1622 jp .EndTitleScreenEngine1624 .Page123Pressed:1625 ld b,31626 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+11627 jr z,.ScenarioPageFound1628 cp 171629 ld b,21630 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+11631 jr z,.ScenarioPageFound1632 ld b,11633 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+11634 .ScenarioPageFound:1635 ld a,(ScenarioPage)1636 cp b1637 ret z1638 ld a,b1639 ld (ScenarioPage),a1641 push de1642 call SetAmountOfScenarioPageButtons1643 pop de1644 ld hl,.PageButtonConstantlyLit1645 ld bc,41646 ldir1648 1649 ld hl,ScenarioSelectButtonTable-21650 ld de,GenericButtonTable-21651 ld bc,2+(GenericButtonTableLenghtPerButton*10)1652 ldir1654 ld a,(ScenarioPage)1655 ld b,a1656 ld a,(LitScenarioButtonInWhichPage?)1657 cp b1658 jp nz,SetAmountOfScenarioButtons1659 call .LightCurrentActiveScenarioButton1660 jp SetAmountOfScenarioButtons1662 .PageButtonConstantlyLit:1663 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1281665 .ScenarioPressed:1666 ld a,(ScenarioPage)1667 ld (LitScenarioButtonInWhichPage?),a1668 ld a,281669 sub b1670 ld (ScenarioSelected),a1672 .LightCurrentActiveScenarioButton:1673 1674 ld a,(AmountOfMapsVisibleInCurrentPage)1675 cp 111676 jr c,.EndCheckMaxMapsInCurrentPageCheck1677 ld a,101678 .EndCheckMaxMapsInCurrentPageCheck:1680 ld d,01681 ld e,a1682 ld hl,GenericButtonTableLenghtPerButton1683 call MultiplyHlWithDE 1684 push hl1685 pop bc1687 ld hl,ScenarioSelectButtonTable1688 ld de,GenericButtonTable16891690 ldir1692 1693 ld a,(ScenarioSelected)1694 ld d,01695 ld e,a1696 ld hl,GenericButtonTableLenghtPerButton1697 call MultiplyHlWithDE 1698 ld de,GenericButtonTable+11699 add hl,de1700 ex de,hl1701 ld hl,.ScenarioButtonConstantlyLit1702 ld bc,41703 ldir1705 1706 ld a,(ScenarioPage)1707 dec a1708 ld b,01709 jr z,.PageFound1710 dec a1711 ld b,101712 jr z,.PageFound1713 ld b,201714 .PageFound:1715 ld a,(ScenarioSelected)1716 add a,b 1717 ld d,01718 ld e,a1719 ld hl,LenghtMapData1720 call MultiplyHlWithDE 1721 ld de,GentleMaps1722 add hl,de1723 ld (WorldPointer),hl1724 1725 1726 call PutMiniMapScenarioSelectScreen1727 call PutMiniMapScenarioSelectScreen1729 1730 call .SetSelectedScenarioNameRightTopOfScreen1731 call .SetSelectedScenarioNameRightTopOfScreen1733 1734 call .SetMaxAmountOfPlayerButtons1735 call .SetMaxAmountOfPlayerButtons1737 ld a,1 1738 ld (player1human?),a1739 xor a 1740 ld (player2human?),a1741 ld (player1StartingTown),a1742 ld (player2StartingTown),a1743 ld (player3StartingTown),a1744 ld (player4StartingTown),a1745 ret1747 .SetMaxAmountOfPlayerButtons:1748 ld a,%1100 00111749 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*15),a 1750 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*16),a 1751 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 1752 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 1754 call ClearPlayerButtons1755 call PutPlayer1and2Buttons1757 xor a 1758 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 1759 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 1760 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 1761 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 1762 1763 ld ix,(WorldPointer)1764 ld a,21765 ld (amountofplayers),a1766 ld a,2 1767 ld (player3human?),a1768 ld (player4human?),a1769 ld a,(ix+ScenarioNameAddress)1770 cp "2"1771 jp z,.SetTextInPlayerButtons1773 call PutPlayer3Buttons1774 ld a,%1100 00111775 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 1776 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 1778 ld a,31779 ld (amountofplayers),a1780 xor a 1781 ld (player3human?),a1782 ld a,(ix+ScenarioNameAddress)1783 cp "3"1784 jp z,.SetTextInPlayerButtons1786 call PutPlayer4Buttons1787 ld a,%1100 00111788 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 1789 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 1790 ld a,41791 ld (amountofplayers),a1792 xor a 1793 ld (player4human?),a1794 1795 .SetTextInPlayerButtons:1796 call SetTextHumanOrCPUButtons1797 call SetTextStartingTownButtons1798 jp SwapAndSetPage 1800 .SetSelectedScenarioNameRightTopOfScreen:1801 call ClearScenarioNameRightTopOfScreen1802 ld b,158 1803 ld c,021 1805 ld hl,(WorldPointer)1806 ld de,ScenarioNameAddress+41807 add hl,de1809 call SetText 1810 jp SwapAndSetPage 1812 .ScenarioButtonConstantlyLit:1813 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1281814 .ScenarioButtonNormallyLit:1815 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1281817 1818 1820.SetGenericButtons: 1821 ld a,(ix+GenericButtonGfxBlock)1822 ld (ButtonGfxBlockCopy),a1824 ld b,(ix+GenericButtonAmountOfButtons)1825 .loop:1826 push bc1827 call .Setbutton1828 pop bc1829 ld de,GenericButtonTableLenghtPerButton1830 add ix,de1832 djnz .loop1833 ret1835 .Setbutton:1836 bit 7,(ix+GenericButtonStatus)1837 ret z 1839 bit 0,(ix+GenericButtonStatus) 1840 res 0,(ix+GenericButtonStatus) 1841 jr nz,.goCopyButton1842 bit 1,(ix+GenericButtonStatus)1843 res 1,(ix+GenericButtonStatus)1844 ret z 1845 .goCopyButton:1847 ld l,(ix+GenericButton_SYSX_Ontouched)1848 ld h,(ix+GenericButton_SYSX_Ontouched+1)1849 bit 6,(ix+GenericButtonStatus)1850 jr nz,.go 1852 ld l,(ix+GenericButton_SYSX_MovedOver)1853 ld h,(ix+GenericButton_SYSX_MovedOver+1)1854 bit 5,(ix+GenericButtonStatus)1855 jr nz,.go 1857 ld l,(ix+GenericButton_SYSX_Clicked)1858 ld h,(ix+GenericButton_SYSX_Clicked+1)1859 .go:1861 1862 ld e,(ix+GenericButton_DYDX)1863 ld d,(ix+GenericButton_DYDX+1)1865 ld a,(ix+GenericButtonYbottom)1866 sub a,(ix+GenericButtonYtop)1867 ld b,a 1868 ld a,(ix+GenericButtonXright)1869 sub a,(ix+GenericButtonXleft)1870 srl a 1871 ld c,a 1874 ld a,(ButtonGfxBlockCopy)18761878 ld de,$8000 + ((212+16)*128) + (000/2) - 128 1879 call CopyRamToVramCorrectedWithoutActivePageSetting 1881 ld a,(activepage)1882 xor 11883 ld (CopyCastleButton2+dPage),a1885 ld a,(ix+GenericButtonXleft)1886 ld (CopyCastleButton2+dx),a1887 ld a,(ix+GenericButtonYtop)1888 ld (CopyCastleButton2+dy),a1890 ld a,(ix+GenericButtonYbottom)1891 sub a,(ix+GenericButtonYtop)1892 ld (CopyCastleButton2+ny),a1894 ld a,(ix+GenericButtonXright)1895 sub a,(ix+GenericButtonXleft)1896 ld (CopyCastleButton2+nx),a1898 ld a,212+161899 ld (CopyCastleButton2+sy),a1901 ld hl,CopyCastleButton21902 call docopy1904 ld a,2121905 ld (CopyCastleButton2+sy),a1907 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1908 call docopy1909 ret1915.CheckButtonMouseInteractionGenericButtons:1916 ld b,(ix+GenericButtonAmountOfButtons)1917 ld de,GenericButtonTableLenghtPerButton1919 .loop2:1920 call .check1921 add ix,de1922 djnz .loop21923 ret1924 1925 .check:1926 bit 7,(ix+GenericButtonStatus) 1927 ret z 1928 1929 ld a,(spat+0) 1930 cp (ix+GenericButtonYtop)1931 jr c,.NotOverButton1932 cp (ix+GenericButtonYbottom)1933 jr nc,.NotOverButton1934 ld a,(spat+1) 1936 add a,061937 1938 cp (ix+GenericButtonXleft)1939 jr c,.NotOverButton1940 cp (ix+GenericButtonXright)1941 jr nc,.NotOverButton1942 19441949 ld a,(Controls)1950 bit 4,a 1951 jr nz,.MouseOverButtonAndSpacePressed1952 bit 4,(ix+GenericButtonStatus) 1953 jr nz,.MenuOptionSelected 1954 .MouseHoverOverButton:1956 1957 ld a,(ix+GenericButtonStatus)1958 and %1111 00001959 cp %1010 00001960 ld (ix+GenericButtonStatus),%1010 00111961 ret z19631964 push bc1965 ld bc,SFX_click1966 call RePlayerSFX_PlayCh11967 pop bc19681969 ret1971 .MouseOverButtonAndSpacePressed:1972 bit 4,(ix+GenericButtonStatus) 1973 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit1974 ld a,(NewPrContr)1975 bit 4,a 1976 jr z,.MouseHoverOverButton1978 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:1979 ld (ix+GenericButtonStatus),%1001 001119811982 push bc1983 ld bc,SFX_coin1984 call RePlayerSFX_PlayCh11985 pop bc19861987 ret1988 1989 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:1990 ld (ix+GenericButtonStatus),%1001 00111991 ret1993 .NotOverButton:1994 bit 4,(ix+GenericButtonStatus) 1995 jr nz,.buttonIsStillLit1996 bit 5,(ix+GenericButtonStatus) 1997 ret z1998 .buttonIsStillLit:1999 ld (ix+GenericButtonStatus),%1100 00112000 ret2002 .MenuOptionSelected:2003 pop af 2004 ld (ix+GenericButtonStatus),%1010 00112005 scf 2007 ld a,b 2008 ld (MenuOptionSelected?),a2009 ret2011TavernHeroesReset:2012db 255 | .TavernHeroesPlayer1: db 001,000,000,000,000,000,000,000,000,0002013db 255 | .TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0002014db 255 | .TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0002015db 255 | .TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0002016EndTavernHeroesReset:2017 2018CoordinatesEasyButton: db 157,157+17, 159,159+20, "  Difficulty: Easy" ,254,254,"Players start with:",254,"   30.000 Gold",254,"   30 Wood",254,"   30 Ore",254,"   15 Gems",254,"   15 Rubies",2552019CoordinatesNormalButton: db 174,174+17, 159,159+20, " Difficulty: Normal" ,254,254,"Players start with:",254,"   20.000 Gold",254,"   20 Wood",254,"   20 Ore",254,"   10 Gems",254,"   10 Rubies",2552020CoordinatesHardButton: db 191,191+17, 159,159+20, "  Difficulty: Hard" ,254,254,"Players start with:",254,"   15.000 Gold",254,"   15 Wood",254,"   15 Ore",254,"   7 Gems",254,"   7 Rubies",2552021CoordinatesExpertButton: db 208,208+17, 159,159+20, " Difficulty: Expert" ,254,254,"Players start with:",254,"   10.000 Gold",254,"   10 Wood",254,"   10 Ore",254,"   4 Gems",254,"   4 Rubies",2552022CoordinatesImpossibleButton: db 225,225+17, 159,159+20, "Difficulty: Impossible",254,254,"Players start with:",254,"   0 Gold",254,"   0 Wood",254,"   0 Ore",254,"   0 Gems",254,"   0 Rubies",2552024CoordinatesCastle1Button: db 186,186+56, 102,102+122025CoordinatesCastle2Button: db 186,186+56, 114,114+122026CoordinatesCastle3Button: db 186,186+56, 126,126+122027CoordinatesCastle4Button: db 186,186+56, 138,138+122029CheckRightClickTownAllignment:2030 ld a,(NewPrContr)2031 bit 5,a 2032 ret z2034 ld ix,CoordinatesCastle1Button2035 ld hl,player1StartingTown2036 ld de,player1human? 2037 call CheckMouseOverRegion2038 bit 0,b2039 jp nz,.SetTownAllignmentWindow2041 ld ix,CoordinatesCastle2Button2042 ld hl,player2StartingTown2043 ld de,player2human? 2044 call CheckMouseOverRegion2045 bit 0,b2046 jp nz,.SetTownAllignmentWindow2048 ld ix,CoordinatesCastle3Button2049 ld hl,player3StartingTown2050 ld de,player3human? 2051 call CheckMouseOverRegion2052 bit 0,b2053 jp nz,.SetTownAllignmentWindow2055 ld ix,CoordinatesCastle4Button2056 ld hl,player4StartingTown2057 ld de,player4human? 2058 call CheckMouseOverRegion2059 bit 0,b2060 ret z2062 .SetTownAllignmentWindow: 2063 ld a,(hl)2064 or a2065 ret z2067 ld a,(de) 2068 cp 22069 ret z2070 2071 push hl 2073 ld hl,$4000 + (055*128) + (092/2) - 1282074 ld de,$0000 + (026*128) + (028/2) - 1282075 ld bc,$0000 + (117*256) + (164/2)2076 ld a,ScenarioSelectButtonsBlock 2077 call CopyRamToVramCorrectedCastleOverview 2079 ld hl,.TextTownAllignment2080 ld b,051 2081 ld c,032 2082 call SetText 2084 ld hl,.TextAssociatedCreatures2085 ld b,071 2086 ld c,043 2087 call SetText 2089 pop hl 2090 ld a,(hl)2091 call SetTextStartingTownButtons.SetTownNameInHl2092 push hl2093 pop iy 2094 ld b,118 2095 ld c,032 2096 call SetText 2098 ld a,(iy+13) 2099 ld (StartingTownLevel1Unit),a2100 ld a,(iy+14) 2101 ld (StartingTownLevel2Unit),a2102 ld a,(iy+15) 2103 ld (StartingTownLevel3Unit),a2104 ld a,(iy+16) 2105 ld (StartingTownLevel4Unit),a2106 ld a,(iy+17) 2107 ld (StartingTownLevel5Unit),a2108 ld a,(iy+18) 2109 ld (StartingTownLevel6Unit),a2111 ld hl,DisplayTownAllignmentAssociatedCreatures2112 call EnterSpecificRoutineHeroOverviewCode2114 ld hl,DisplayMonsterNames2115 call EnterSpecificRoutineInCastleOverviewCode2117 ld a,42118 ld (GameStatus),a 2120 jp WaitKeyPressToGoBackToGame22127.TextTownAllignment: db "Town Allignment:",2552128.TextAssociatedCreatures: db "Associated Creatures:",2552130CheckRightClickDifficulty:2131 ld a,(NewPrContr)2132 bit 5,a 2133 ret z2135 ld ix,CoordinatesEasyButton2136 call CheckMouseOverRegion2137 bit 0,b2138 jp nz,.SetDifficultyWindow2139 ld ix,CoordinatesNormalButton2140 call CheckMouseOverRegion2141 bit 0,b2142 jp nz,.SetDifficultyWindow2143 ld ix,CoordinatesHardButton2144 call CheckMouseOverRegion2145 bit 0,b2146 jp nz,.SetDifficultyWindow2147 ld ix,CoordinatesExpertButton2148 call CheckMouseOverRegion2149 bit 0,b2150 jp nz,.SetDifficultyWindow2151 ld ix,CoordinatesImpossibleButton2152 call CheckMouseOverRegion2153 bit 0,b2154 ret z2156 .SetDifficultyWindow: 2157 ld hl,$4000 + (055*128) + (000/2) - 1282158 ld de,$0000 + (083*128) + (120/2) - 1282159 ld bc,$0000 + (068*256) + (092/2)2160 ld a,ScenarioSelectButtonsBlock 2161 call CopyRamToVramCorrectedCastleOverview 2163 ld de,42164 add ix,de2165 push ix2166 pop hl2167 ld b,129 2168 ld c,089 2169 call SetText 2172 jp WaitKeyPressToGoBackToGame22173 2174CheckMouseOverRegion:2175 res 0,b2177 ld a,(spat+1) 2179 add a,062181 cp (ix)2182 ret c2183 cp (ix+1)2184 ret nc2186 ld a,(spat+0) 2187 cp (ix+2)2188 ret c2189 cp (ix+3)2190 ret nc2192 set 0,b2193 ret2195WaitKeyPressToGoBackToGame2:2196 call SwapAndSetPage 2197 .loop:2198 call PopulateControls 2199 22002204 ld a,(NewPrContr)2205 bit 5,a 2206 jr nz,.End2207 ld a,(NewPrContr)2208 bit 4,a 2209 jr z,.loop2211 .End:2212 xor a2213 ld (NewPrContr),a2215 ld a,(activepage) 2216 or a2217 ld hl,.RestorePage02218 jp z,docopy2219 ld hl,.RestorePage12220 jp docopy2222.RestorePage0:2223 db 000,000,000,0012224 db 000,000,000,0002225 db 000,001,191,0002226 db 000,000,$d0 2227.RestorePage1:2228 db 000,000,000,0002229 db 000,000,000,0012230 db 000,001,191,0002231 db 000,000,$d0 2234SetTextStartingTownButtons:2235 ld a,(player1human?)2236 cp 2 2237 jr z,.EndSetTextStartingTownPlayer12238 ld a,(player1StartingTown)2239 call .SetTownNameInHl2240 ld b,189 2241 ld c,106 2242 call SetText 2243 .EndSetTextStartingTownPlayer1:2245 ld a,(player2human?)2246 cp 2 2247 jr z,.EndSetTextStartingTownPlayer22248 ld a,(player2StartingTown)2249 call .SetTownNameInHl2250 ld b,189 2251 ld c,118 2252 call SetText 2253 .EndSetTextStartingTownPlayer2:2255 ld ix,(WorldPointer)2256 ld a,(ix+ScenarioNameAddress)2257 cp "2"2258 ret z2260 ld a,(player3human?)2261 cp 2 2262 jr z,.EndSetTextStartingTownPlayer32263 ld a,(player3StartingTown)2264 call .SetTownNameInHl2265 ld b,189 2266 ld c,130 2267 call SetText 2268 .EndSetTextStartingTownPlayer3:2270 ld a,(ix+ScenarioNameAddress)2271 cp "3"2272 ret z2274 ld a,(player4human?)2275 cp 2 2276 ret z2277 ld a,(player4StartingTown)2278 call .SetTownNameInHl2279 ld b,189 2280 ld c,142 2281 call SetText 2282 ret2284 .SetTownNameInHl:2285 ld d,02286 ld e,a2287 ld hl,InfoTownLenght2288 call MultiplyHlWithDE 2289 ld de,InfoTownRandom2290 add hl,de 2291 ret2293InfoTownLenght: equ InfoTown1-InfoTownRandom2294InfoTownRandom: db "Random      ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2295InfoTown1: db "Drasle's Den",255,DragonSlayerUnitLevel1Number, DragonSlayerUnitLevel2Number, DragonSlayerUnitLevel3Number, DragonSlayerUnitLevel4Number, DragonSlayerUnitLevel5Number, DragonSlayerUnitLevel6Number | dw DragonSlayerUnitLevel1Growth, DragonSlayerUnitLevel2Growth, DragonSlayerUnitLevel3Growth, DragonSlayerUnitLevel4Growth, DragonSlayerUnitLevel5Growth, DragonSlayerUnitLevel6Growth2296InfoTown2: db "Castlevania ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2297InfoTown3: db "Junker HQ   ",255,SDSnatcherUnitLevel1Number, SDSnatcherUnitLevel2Number, SDSnatcherUnitLevel3Number, SDSnatcherUnitLevel4Number, SDSnatcherUnitLevel5Number, SDSnatcherUnitLevel6Number | dw SDSnatcherUnitLevel1Growth, SDSnatcherUnitLevel2Growth, SDSnatcherUnitLevel3Growth, SDSnatcherUnitLevel4Growth, SDSnatcherUnitLevel5Growth, SDSnatcherUnitLevel6Growth2298InfoTown4: db "Usas        ",255,UsasUnitLevel1Number, UsasUnitLevel2Number, UsasUnitLevel3Number, UsasUnitLevel4Number, UsasUnitLevel5Number, UsasUnitLevel6Number | dw UsasUnitLevel1Growth, UsasUnitLevel2Growth, UsasUnitLevel3Growth, UsasUnitLevel4Growth, UsasUnitLevel5Growth, UsasUnitLevel6Growth2299InfoTown5: db "Goemon      ",255,GoemonUnitLevel1Number, GoemonUnitLevel2Number, GoemonUnitLevel3Number, GoemonUnitLevel4Number, GoemonUnitLevel5Number, GoemonUnitLevel6Number | dw GoemonUnitLevel1Growth, GoemonUnitLevel2Growth, GoemonUnitLevel3Growth, GoemonUnitLevel4Growth, GoemonUnitLevel5Growth, GoemonUnitLevel6Growth23002301InfoTown6: db "Ys3         ",255,Ys3UnitLevel1Number, Ys3UnitLevel2Number, Ys3UnitLevel3Number, Ys3UnitLevel4Number, Ys3UnitLevel5Number, Ys3UnitLevel6Number | dw Ys3UnitLevel1Growth, Ys3UnitLevel2Growth, Ys3UnitLevel3Growth, Ys3UnitLevel4Growth, Ys3UnitLevel5Growth, Ys3UnitLevel6Growth2302InfoTown7: db "Psycho World",255,PsychoWorldUnitLevel1Number, PsychoWorldUnitLevel2Number, PsychoWorldUnitLevel3Number, PsychoWorldUnitLevel4Number, PsychoWorldUnitLevel5Number, PsychoWorldUnitLevel6Number | dw PsychoWorldUnitLevel1Growth, PsychoWorldUnitLevel2Growth, PsychoWorldUnitLevel3Growth, PsychoWorldUnitLevel4Growth, PsychoWorldUnitLevel5Growth, PsychoWorldUnitLevel6Growth2303InfoTown8: db "King Kong   ",255,KingKongUnitLevel1Number, KingKongUnitLevel2Number, KingKongUnitLevel3Number, KingKongUnitLevel4Number, KingKongUnitLevel5Number, KingKongUnitLevel6Number | dw KingKongUnitLevel1Growth, KingKongUnitLevel2Growth, KingKongUnitLevel3Growth, KingKongUnitLevel4Growth, KingKongUnitLevel5Growth, KingKongUnitLevel6Growth2304InfoTown9: db "Golvellius  ",255,GolvelliusUnitLevel1Number, GolvelliusUnitLevel2Number, GolvelliusUnitLevel3Number, GolvelliusUnitLevel4Number, GolvelliusUnitLevel5Number, GolvelliusUnitLevel6Number | dw GolvelliusUnitLevel1Growth, GolvelliusUnitLevel2Growth, GolvelliusUnitLevel3Growth, GolvelliusUnitLevel4Growth, GolvelliusUnitLevel5Growth, GolvelliusUnitLevel6Growth2305InfoTown10: db "Contra Den 1",255,ContraGroupAUnitLevel1Number, ContraGroupAUnitLevel2Number, ContraGroupAUnitLevel3Number, ContraGroupAUnitLevel4Number, ContraGroupAUnitLevel5Number, ContraGroupAUnitLevel6Number | dw ContraGroupAUnitLevel1Growth, ContraGroupAUnitLevel2Growth, ContraGroupAUnitLevel3Growth, ContraGroupAUnitLevel4Growth, ContraGroupAUnitLevel5Growth, ContraGroupAUnitLevel6Growth2306InfoTown11: db "Contra Den 2",255,ContraGroupBUnitLevel1Number, ContraGroupBUnitLevel2Number, ContraGroupBUnitLevel3Number, ContraGroupBUnitLevel4Number, ContraGroupBUnitLevel5Number, ContraGroupBUnitLevel6Number | dw ContraGroupBUnitLevel1Growth, ContraGroupBUnitLevel2Growth, ContraGroupBUnitLevel3Growth, ContraGroupBUnitLevel4Growth, ContraGroupBUnitLevel5Growth, ContraGroupBUnitLevel6Growth23072308InfoTown12: db "Akanbe Den 1",255,AkanbeDragonGroupAUnitLevel1Number, AkanbeDragonGroupAUnitLevel2Number, AkanbeDragonGroupAUnitLevel3Number, AkanbeDragonGroupAUnitLevel4Number, AkanbeDragonGroupAUnitLevel5Number, AkanbeDragonGroupAUnitLevel6Number | dw AkanbeDragonGroupAUnitLevel1Growth, AkanbeDragonGroupAUnitLevel2Growth, AkanbeDragonGroupAUnitLevel3Growth, AkanbeDragonGroupAUnitLevel4Growth, AkanbeDragonGroupAUnitLevel5Growth, AkanbeDragonGroupAUnitLevel6Growth2309InfoTown13: db "Akanbe Den 2",255,AkanbeDragonGroupBUnitLevel1Number, AkanbeDragonGroupBUnitLevel2Number, AkanbeDragonGroupBUnitLevel3Number, AkanbeDragonGroupBUnitLevel4Number, AkanbeDragonGroupBUnitLevel5Number, AkanbeDragonGroupBUnitLevel6Number | dw AkanbeDragonGroupBUnitLevel1Growth, AkanbeDragonGroupBUnitLevel2Growth, AkanbeDragonGroupBUnitLevel3Growth, AkanbeDragonGroupBUnitLevel4Growth, AkanbeDragonGroupBUnitLevel5Growth, AkanbeDragonGroupBUnitLevel6Growth2310InfoTown14: db "YieArKungFu ",255,YieArKungFuUnitLevel1Number, YieArKungFuUnitLevel2Number, YieArKungFuUnitLevel3Number, YieArKungFuUnitLevel4Number, YieArKungFuUnitLevel5Number, YieArKungFuUnitLevel6Number | dw YieArKungFuUnitLevel1Growth, YieArKungFuUnitLevel2Growth, YieArKungFuUnitLevel3Growth, YieArKungFuUnitLevel4Growth, YieArKungFuUnitLevel5Growth, YieArKungFuUnitLevel6Growth2311InfoTown15: db "Bubble Den 1",255,BubbleBobbleGroupAUnitLevel1Number, BubbleBobbleGroupAUnitLevel2Number, BubbleBobbleGroupAUnitLevel3Number, BubbleBobbleGroupAUnitLevel4Number, BubbleBobbleGroupAUnitLevel5Number, BubbleBobbleGroupAUnitLevel6Number | dw BubbleBobbleGroupAUnitLevel1Growth, BubbleBobbleGroupAUnitLevel2Growth, BubbleBobbleGroupAUnitLevel3Growth, BubbleBobbleGroupAUnitLevel4Growth, BubbleBobbleGroupAUnitLevel5Growth, BubbleBobbleGroupAUnitLevel6Growth2312InfoTown16: db "Bubble Den 2",255,BubbleBobbleGroupBUnitLevel1Number, BubbleBobbleGroupBUnitLevel2Number, BubbleBobbleGroupBUnitLevel3Number, BubbleBobbleGroupBUnitLevel4Number, BubbleBobbleGroupBUnitLevel5Number, BubbleBobbleGroupBUnitLevel6Number | dw BubbleBobbleGroupBUnitLevel1Growth, BubbleBobbleGroupBUnitLevel2Growth, BubbleBobbleGroupBUnitLevel3Growth, BubbleBobbleGroupBUnitLevel4Growth, BubbleBobbleGroupBUnitLevel5Growth, BubbleBobbleGroupBUnitLevel6Growth2313InfoTown17: db "Cloud Palace",255,ChukaTaisenUnitLevel1Number, ChukaTaisenUnitLevel2Number, ChukaTaisenUnitLevel3Number, ChukaTaisenUnitLevel4Number, ChukaTaisenUnitLevel5Number, ChukaTaisenUnitLevel6Number | dw ChukaTaisenUnitLevel1Growth, ChukaTaisenUnitLevel2Growth, ChukaTaisenUnitLevel3Growth, ChukaTaisenUnitLevel4Growth, ChukaTaisenUnitLevel5Growth, ChukaTaisenUnitLevel6Growth231423162323ListOfHeroAddressesAndAmounts:2324 dw DragonSlayer4Heroes | db DragonSlayer4HeroesAmount2325 dw CastlevaniaHeroes | db CastlevaniaHeroesAmount2326 dw SDSnatcherHeroes | db SDSnatcherHeroesAmount2327 dw UsasHeroes | db UsasHeroesAmount2328 dw GoemonHeroes | db GoemonHeroesAmount2329 dw Ys3Heroes | db Ys3HeroesAmount2330 dw PsychoWorldHeroes | db PsychoWorldHeroesAmount2331 dw KingKongHeroes | db KingKongHeroesAmount2332 dw GolvelliusHeroes | db GolvelliusHeroesAmount2333 dw ContraGroupAHeroes | db ContraGroupAHeroesAmount2334 dw ContraGroupBHeroes | db ContraGroupBHeroesAmount23352336 dw AkanbeDragonGroupAHeroes | db AkanbeDragonGroupAHeroesAmount2337 dw AkanbeDragonGroupBHeroes | db AkanbeDragonGroupBHeroesAmount2338 dw YieArKungFuHeroes | db YieArKungFuHeroesAmount2339 dw BubbleBobbleGroupAHeroes | db BubbleBobbleGroupAHeroesAmount2340 dw BubbleBobbleGroupBHeroes | db BubbleBobbleGroupBHeroesAmount2341 dw ChukaTaisenHeroes | db ChukaTaisenHeroesAmount2343SetTextHumanOrCPUButtons:2344 ld c,106 2345 ld hl,player1human?2346 call .SetTextHumanOrCPU2348 ld c,118 2349 ld hl,player2human?2350 call .SetTextHumanOrCPU2352 ld ix,(WorldPointer)2353 ld a,(ix+ScenarioNameAddress)2354 cp "2"2355 ret z2357 ld c,130 2358 ld hl,player3human?2359 call .SetTextHumanOrCPU2361 ld a,(ix+ScenarioNameAddress)2362 cp "3"2363 ret z2365 ld c,142 2366 ld hl,player4human?23672370 .SetTextHumanOrCPU:2371 ld a,(hl)2372 or a2373 jp z,.PlayerCPU2374 dec a2375 jp z,.PlayerHuman23762378 .PlayerOFF:2379 ld b,166 2380 ld hl,TextOFF2381 jp SetText 2383 .PlayerCPU:2384 ld b,166 2385 ld hl,TextCPU2386 jp SetText 2388 .PlayerHuman:2389 ld b,161 2390 ld hl,TextHuman2391 jp SetText 2394TextHuman: db "Human",2552395TextCPU: db "CPU",2552396TextOFF: db "OFF",2552398SetTextPage123Buttons:2399 ld a,(AmountOfMapsUnlocked)2400 cp 112401 ret c2403 ld b,035 2404 ld c,176 2405 ld hl,TextPage12406 call SetText 2408 ld b,069 2409 ld c,176 2410 ld hl,TextPage22411 call SetText 2413 ld a,(AmountOfMapsUnlocked)2414 cp 212415 ret c2417 ld b,103 2418 ld c,176 2419 ld hl,TextPage32420 call SetText 2421 ret2423TextPage1: db "Page 1",2552424TextPage2: db "Page 2",2552425TextPage3: db "Page 3",2552427ScenarioNameAddress: equ 152428SetNamesInScenarioButtons:2429 ld b,020 2430 ld c,046 2432 ld hl,GentleMaps+ScenarioNameAddress2433 ld de,LenghtMapData*102435 ld a,(ScenarioPage)2436 dec a2437 jr z,.PageFound2438 add hl,de2439 dec a2440 jr z,.PageFound2441 add hl,de2442 .PageFound:2444 ld a,(AmountOfMapsVisibleInCurrentPage)2445 cp 112446 jr c,.loop2447 ld a,102449 .loop:2450 push af2451 push hl2452 push bc2453 call SetText 2454 pop bc2455 push bc2456 ld b,382457 inc hl2458 call SetText 2459 pop bc2460 push bc2461 ld b,532462 inc hl2463 call SetText 2464 pop bc2465 pop hl2466 ld a,c2467 add a,132468 ld c,a2469 ld de,LenghtMapData2470 add hl,de2471 pop af2472 dec a2473 jr nz,.loop2474 ret2476SetNamesInCampaignButtons:2477 ld b,020 2478 ld c,046 2480 ld hl,GentleMaps+ScenarioNameAddress+42481 ld de,LenghtMapData*102483 ld a,(ScenarioPage)2484 dec a2485 jr z,.PageFound2486 add hl,de2487 dec a2488 jr z,.PageFound2489 add hl,de2490 .PageFound:2492 ld a,(AmountOfMapsVisibleInCurrentPage)2493 cp 112494 jr c,.loop2495 ld a,102497 .loop:2498 push af2499 push hl2500 push bc2501 call SetText 2502 pop bc2503 pop hl2504 ld a,c2505 add a,132506 ld c,a2507 ld de,LenghtMapData2508 add hl,de2509 pop af2510 dec a2511 jr nz,.loop2512 ret2514SetScenarioSelectButtons:2515 ld hl,ScenarioSelectButtonTable-22516 ld de,GenericButtonTable-22517 ld bc,2+(GenericButtonTableLenghtPerButton*28)2518 ldir2519 ret2521SetCampaignSelectButtons:2522 ld hl,CampaignSelectButtonTable-22523 ld de,GenericButtonTable-22524 ld bc,2+(GenericButtonTableLenghtPerButton*15)2525 ldir2526 ret2528SetPage1ButtonConstantlyLit:2529 ld hl,.PageButtonConstantlyLit2530 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+12531 ld bc,42532 ldir2533 ret2534 .PageButtonConstantlyLit:2535 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1282537SetDifficultyButtonConstantlyLit:2538 ld hl,ScenarioSelectButtonTable.DifficultyButtons2539 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*232540 ld bc,GenericButtonTableLenghtPerButton*52541 ldir2543 ld a,(Difficulty)2544 dec a2545 ld hl,.DifficultyEasyConstantlyLit2546 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*23+12547 jr z,.SetDifficultyButtonConstantlyLit2548 dec a2549 ld hl,.DifficultyNormalConstantlyLit2550 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*24+12551 jr z,.SetDifficultyButtonConstantlyLit2552 dec a2553 ld hl,.DifficultyHardConstantlyLit2554 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*25+12555 jr z,.SetDifficultyButtonConstantlyLit2556 dec a2557 ld hl,.DifficultyExpertConstantlyLit2558 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*26+12559 jr z,.SetDifficultyButtonConstantlyLit2560 dec a2561 ld hl,.DifficultyImpossibleConstantlyLit2562 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*27+12563 jr z,.SetDifficultyButtonConstantlyLit2564 .SetDifficultyButtonConstantlyLit:2565 ld bc,42566 ldir2568 call .SetDifficultyText2569 call .SetDifficultyText2570 ret2571 .SetDifficultyText:2572 ld a,(Difficulty)2573 dec a2574 ld b,192 2575 ld hl,TextEasy2576 jr z,.DifficultyFound2577 dec a2578 ld b,188 2579 ld hl,TextNormal2580 jr z,.DifficultyFound2581 dec a2582 ld b,192 2583 ld hl,TextHard2584 jr z,.DifficultyFound2585 dec a2586 ld b,189 2587 ld hl,TextExpert2588 jr z,.DifficultyFound2589 dec a2590 ld b,181 2591 ld hl,TextImpossible2592 jr z,.DifficultyFound2595 .DifficultyFound:2596 push bc2597 push hl2598 call ClearDifficultyTextGraphics2599 pop hl2600 pop bc2601 ld c,179 2602 call SetText 2603 jp SwapAndSetPage 2605 .DifficultyEasyConstantlyLit:2606 dw $4000 + (022*128) + (016/2) - 128, $4000 + (022*128) + (016/2) - 1282607 .DifficultyNormalConstantlyLit:2608 dw $4000 + (022*128) + (066/2) - 128, $4000 + (022*128) + (066/2) - 1282609 .DifficultyHardConstantlyLit:2610 dw $4000 + (022*128) + (118/2) - 128, $4000 + (022*128) + (118/2) - 1282611 .DifficultyExpertConstantlyLit:2612 dw $4000 + (022*128) + (168/2) - 128, $4000 + (022*128) + (168/2) - 1282613 .DifficultyImpossibleConstantlyLit:2614 dw $4000 + (022*128) + (220/2) - 128, $4000 + (022*128) + (220/2) - 1282616TextEasy: db "Easy",2552617TextNormal: db "Normal",2552618TextHard: db "Hard",2552619TextExpert: db "Expert",2552620TextImpossible: db "Impossible",2552622SetAmountOfCampaignPageButtons:26232624 ld a,(AmountOfMapsUnlocked)2625 inc a2626 ld (AmountOfMapsUnlocked),a2628 call SetAmountOfScenarioPageButtons2630 ld a,(AmountOfMapsUnlocked)2631 dec a2632 ld (AmountOfMapsUnlocked),a2633 ret2635SetAmountOfScenarioPageButtons:2636 ld hl,.PageButtonsNormal2637 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*102638 ld bc,52639 ldir2640 ld hl,.PageButtonsNormal2641 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*112642 ld bc,52643 ldir2644 ld hl,.PageButtonsNormal2645 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*122646 ld bc,52647 ldir2649 ld a,(AmountOfMapsUnlocked)2650 cp 212651 ret nc 2652 cp 112653 jr nc,.LockPage3 2654 2655 .LockPage12And3: 2656 xor a 2657 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*10),a2658 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*11),a2659 .LockPage3:2660 xor a 2661 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*12),a2662 ret2664 .PageButtonsNormal:2665 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 1282667SetAmountOfCampaignButtons:26682669 ld a,(AmountOfMapsUnlocked)2670 inc a2671 ld (AmountOfMapsUnlocked),a2673 call ClearCampaignButtonGraphics2674 call SwapAndSetPage 2675 call ClearCampaignButtonGraphics2676 call SetAmountOfScenarioButtons.go2678 ld a,(AmountOfMapsUnlocked)2679 dec a2680 ld (AmountOfMapsUnlocked),a2681 ret2683SetAmountOfScenarioButtons:2684 call ClearScenarioButtonGraphics2685 call SwapAndSetPage 2686 call ClearScenarioButtonGraphics2687 2688 .go:2689 ld a,%1100 00112690 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*0),a2691 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a2692 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a2693 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a2694 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a2695 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a2696 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a2697 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a2698 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a2699 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a2701 ld a,(ScenarioPage)2702 dec a2703 ld b,02704 jr z,.PageFound2705 dec a2706 ld b,102707 jr z,.PageFound2708 ld b,202709 .PageFound:2710 ld a,(AmountOfMapsUnlocked)2711 sub b2712 ld (AmountOfMapsVisibleInCurrentPage),a2713 dec a2714 jr z,.UpToScenario1Unlocked2715 dec a2716 jr z,.UpToScenario2Unlocked2717 dec a2718 jr z,.UpToScenario3Unlocked2719 dec a2720 jr z,.UpToScenario4Unlocked2721 dec a2722 jr z,.UpToScenario5Unlocked2723 dec a2724 jr z,.UpToScenario6Unlocked2725 dec a2726 jr z,.UpToScenario7Unlocked2727 dec a2728 jr z,.UpToScenario8Unlocked2729 dec a2730 jr z,.UpToScenario9Unlocked2731 ret2733 .UpToScenario1Unlocked:2734 xor a2735 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a2736 .UpToScenario2Unlocked:2737 xor a2738 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a2739 .UpToScenario3Unlocked:2740 xor a2741 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a2742 .UpToScenario4Unlocked:2743 xor a2744 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a2745 .UpToScenario5Unlocked:2746 xor a2747 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a2748 .UpToScenario6Unlocked:2749 xor a2750 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a2751 .UpToScenario7Unlocked:2752 xor a2753 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a2754 .UpToScenario8Unlocked:2755 xor a2756 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a2757 .UpToScenario9Unlocked:2758 xor a2759 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a2760 ret2762 2763ScenarioSelectButton1Ytop: equ 043 + (0*13)2764ScenarioSelectButton1YBottom: equ ScenarioSelectButton1Ytop + 0112765ScenarioSelectButton1XLeft: equ 0502766ScenarioSelectButton1XRight: equ ScenarioSelectButton1XLeft + 0962768ScenarioSelectButton2Ytop: equ 043 + (1*13)2769ScenarioSelectButton2YBottom: equ ScenarioSelectButton2Ytop + 0112770ScenarioSelectButton2XLeft: equ 0502771ScenarioSelectButton2XRight: equ ScenarioSelectButton2XLeft + 0962773ScenarioSelectButton3Ytop: equ 043 + (2*13)2774ScenarioSelectButton3YBottom: equ ScenarioSelectButton3Ytop + 0112775ScenarioSelectButton3XLeft: equ 0502776ScenarioSelectButton3XRight: equ ScenarioSelectButton3XLeft + 0962778ScenarioSelectButton4Ytop: equ 043 + (3*13)2779ScenarioSelectButton4YBottom: equ ScenarioSelectButton4Ytop + 0112780ScenarioSelectButton4XLeft: equ 0502781ScenarioSelectButton4XRight: equ ScenarioSelectButton4XLeft + 0962783ScenarioSelectButton5Ytop: equ 043 + (4*13)2784ScenarioSelectButton5YBottom: equ ScenarioSelectButton5Ytop + 0112785ScenarioSelectButton5XLeft: equ 0502786ScenarioSelectButton5XRight: equ ScenarioSelectButton5XLeft + 0962788ScenarioSelectButton6Ytop: equ 043 + (5*13)2789ScenarioSelectButton6YBottom: equ ScenarioSelectButton6Ytop + 0112790ScenarioSelectButton6XLeft: equ 0502791ScenarioSelectButton6XRight: equ ScenarioSelectButton6XLeft + 0962793ScenarioSelectButton7Ytop: equ 043 + (6*13)2794ScenarioSelectButton7YBottom: equ ScenarioSelectButton7Ytop + 0112795ScenarioSelectButton7XLeft: equ 0502796ScenarioSelectButton7XRight: equ ScenarioSelectButton7XLeft + 0962798ScenarioSelectButton8Ytop: equ 043 + (7*13)2799ScenarioSelectButton8YBottom: equ ScenarioSelectButton8Ytop + 0112800ScenarioSelectButton8XLeft: equ 0502801ScenarioSelectButton8XRight: equ ScenarioSelectButton8XLeft + 0962803ScenarioSelectButton9Ytop: equ 043 + (8*13)2804ScenarioSelectButton9YBottom: equ ScenarioSelectButton9Ytop + 0112805ScenarioSelectButton9XLeft: equ 0502806ScenarioSelectButton9XRight: equ ScenarioSelectButton9XLeft + 0962808ScenarioSelectButton10Ytop: equ 043 + (9*13)2809ScenarioSelectButton10YBottom: equ ScenarioSelectButton10Ytop + 0112810ScenarioSelectButton10XLeft: equ 0502811ScenarioSelectButton10XRight: equ ScenarioSelectButton10XLeft + 0962812 2813ScenarioSelectButton11Ytop: equ 1732814ScenarioSelectButton11YBottom: equ ScenarioSelectButton11Ytop + 0112815ScenarioSelectButton11XLeft: equ 0322816ScenarioSelectButton11XRight: equ ScenarioSelectButton11XLeft + 0322818ScenarioSelectButton12Ytop: equ 1732819ScenarioSelectButton12YBottom: equ ScenarioSelectButton12Ytop + 0112820ScenarioSelectButton12XLeft: equ 0662821ScenarioSelectButton12XRight: equ ScenarioSelectButton12XLeft + 0322823ScenarioSelectButton13Ytop: equ 1732824ScenarioSelectButton13YBottom: equ ScenarioSelectButton13Ytop + 0112825ScenarioSelectButton13XLeft: equ 1002826ScenarioSelectButton13XRight: equ ScenarioSelectButton13XLeft + 0322827 2828ScenarioSelectButton14Ytop: equ 1912829ScenarioSelectButton14YBottom: equ ScenarioSelectButton14Ytop + 0152830ScenarioSelectButton14XLeft: equ 1062831ScenarioSelectButton14XRight: equ ScenarioSelectButton14XLeft + 0202833ScenarioSelectButton15Ytop: equ 1912834ScenarioSelectButton15YBottom: equ ScenarioSelectButton15Ytop + 0152835ScenarioSelectButton15XLeft: equ 1322836ScenarioSelectButton15XRight: equ ScenarioSelectButton15XLeft + 0182837 2838ScenarioSelectButton16Ytop: equ 103 + (0*12)2839ScenarioSelectButton16YBottom: equ ScenarioSelectButton16Ytop + 0112840ScenarioSelectButton16XLeft: equ 1582841ScenarioSelectButton16XRight: equ ScenarioSelectButton16XLeft + 0282843ScenarioSelectButton17Ytop: equ 103 + (1*12)2844ScenarioSelectButton17YBottom: equ ScenarioSelectButton17Ytop + 0112845ScenarioSelectButton17XLeft: equ 1582846ScenarioSelectButton17XRight: equ ScenarioSelectButton17XLeft + 0282848ScenarioSelectButton18Ytop: equ 103 + (2*12)2849ScenarioSelectButton18YBottom: equ ScenarioSelectButton18Ytop + 0112850ScenarioSelectButton18XLeft: equ 1582851ScenarioSelectButton18XRight: equ ScenarioSelectButton18XLeft + 0282853ScenarioSelectButton19Ytop: equ 103 + (3*12)2854ScenarioSelectButton19YBottom: equ ScenarioSelectButton19Ytop + 0112855ScenarioSelectButton19XLeft: equ 1582856ScenarioSelectButton19XRight: equ ScenarioSelectButton19XLeft + 0282857 2858ScenarioSelectButton20Ytop: equ 103 + (0*12)2859ScenarioSelectButton20YBottom: equ ScenarioSelectButton20Ytop + 0112860ScenarioSelectButton20XLeft: equ 1862861ScenarioSelectButton20XRight: equ ScenarioSelectButton20XLeft + 0562863ScenarioSelectButton21Ytop: equ 103 + (1*12)2864ScenarioSelectButton21YBottom: equ ScenarioSelectButton21Ytop + 0112865ScenarioSelectButton21XLeft: equ 1862866ScenarioSelectButton21XRight: equ ScenarioSelectButton21XLeft + 0562868ScenarioSelectButton22Ytop: equ 103 + (2*12)2869ScenarioSelectButton22YBottom: equ ScenarioSelectButton22Ytop + 0112870ScenarioSelectButton22XLeft: equ 1862871ScenarioSelectButton22XRight: equ ScenarioSelectButton22XLeft + 0562873ScenarioSelectButton23Ytop: equ 103 + (3*12)2874ScenarioSelectButton23YBottom: equ ScenarioSelectButton23Ytop + 0112875ScenarioSelectButton23XLeft: equ 1862876ScenarioSelectButton23XRight: equ ScenarioSelectButton23XLeft + 0562877 2878ScenarioSelectButton24Ytop: equ 1602879ScenarioSelectButton24YBottom: equ ScenarioSelectButton24Ytop + 0182880ScenarioSelectButton24XLeft: equ 1582881ScenarioSelectButton24XRight: equ ScenarioSelectButton24XLeft + 0162883ScenarioSelectButton25Ytop: equ 1602884ScenarioSelectButton25YBottom: equ ScenarioSelectButton25Ytop + 0182885ScenarioSelectButton25XLeft: equ 1742886ScenarioSelectButton25XRight: equ ScenarioSelectButton25XLeft + 0182888ScenarioSelectButton26Ytop: equ 1602889ScenarioSelectButton26YBottom: equ ScenarioSelectButton26Ytop + 0182890ScenarioSelectButton26XLeft: equ 1922891ScenarioSelectButton26XRight: equ ScenarioSelectButton26XLeft + 0162893ScenarioSelectButton27Ytop: equ 1602894ScenarioSelectButton27YBottom: equ ScenarioSelectButton27Ytop + 0182895ScenarioSelectButton27XLeft: equ 2082896ScenarioSelectButton27XRight: equ ScenarioSelectButton27XLeft + 0182898ScenarioSelectButton28Ytop: equ 1602899ScenarioSelectButton28YBottom: equ ScenarioSelectButton28Ytop + 0182900ScenarioSelectButton28XLeft: equ 2262901ScenarioSelectButton28XRight: equ ScenarioSelectButton28XLeft + 0162903ScenarioSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock2904ScenarioSelectButtonTableAmountOfButtons: db 282905ScenarioSelectButtonTable: 2907 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton1Ytop,ScenarioSelectButton1YBottom,ScenarioSelectButton1XLeft,ScenarioSelectButton1XRight | dw $0000 + (ScenarioSelectButton1Ytop*128) + (ScenarioSelectButton1XLeft/2) - 128 2908 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton2Ytop,ScenarioSelectButton2YBottom,ScenarioSelectButton2XLeft,ScenarioSelectButton2XRight | dw $0000 + (ScenarioSelectButton2Ytop*128) + (ScenarioSelectButton2XLeft/2) - 128 2909 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton3Ytop,ScenarioSelectButton3YBottom,ScenarioSelectButton3XLeft,ScenarioSelectButton3XRight | dw $0000 + (ScenarioSelectButton3Ytop*128) + (ScenarioSelectButton3XLeft/2) - 1282910 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton4Ytop,ScenarioSelectButton4YBottom,ScenarioSelectButton4XLeft,ScenarioSelectButton4XRight | dw $0000 + (ScenarioSelectButton4Ytop*128) + (ScenarioSelectButton4XLeft/2) - 1282911 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton5Ytop,ScenarioSelectButton5YBottom,ScenarioSelectButton5XLeft,ScenarioSelectButton5XRight | dw $0000 + (ScenarioSelectButton5Ytop*128) + (ScenarioSelectButton5XLeft/2) - 1282912 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton6Ytop,ScenarioSelectButton6YBottom,ScenarioSelectButton6XLeft,ScenarioSelectButton6XRight | dw $0000 + (ScenarioSelectButton6Ytop*128) + (ScenarioSelectButton6XLeft/2) - 1282913 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton7Ytop,ScenarioSelectButton7YBottom,ScenarioSelectButton7XLeft,ScenarioSelectButton7XRight | dw $0000 + (ScenarioSelectButton7Ytop*128) + (ScenarioSelectButton7XLeft/2) - 1282914 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton8Ytop,ScenarioSelectButton8YBottom,ScenarioSelectButton8XLeft,ScenarioSelectButton8XRight | dw $0000 + (ScenarioSelectButton8Ytop*128) + (ScenarioSelectButton8XLeft/2) - 1282915 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton9Ytop,ScenarioSelectButton9YBottom,ScenarioSelectButton9XLeft,ScenarioSelectButton9XRight | dw $0000 + (ScenarioSelectButton9Ytop*128) + (ScenarioSelectButton9XLeft/2) - 1282916 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton10Ytop,ScenarioSelectButton10YBottom,ScenarioSelectButton10XLeft,ScenarioSelectButton10XRight | dw $0000 + (ScenarioSelectButton10Ytop*128) + (ScenarioSelectButton10XLeft/2) - 1282917 2918 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton11Ytop,ScenarioSelectButton11YBottom,ScenarioSelectButton11XLeft,ScenarioSelectButton11XRight | dw $0000 + (ScenarioSelectButton11Ytop*128) + (ScenarioSelectButton11XLeft/2) - 1282919 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton12Ytop,ScenarioSelectButton12YBottom,ScenarioSelectButton12XLeft,ScenarioSelectButton12XRight | dw $0000 + (ScenarioSelectButton12Ytop*128) + (ScenarioSelectButton12XLeft/2) - 1282920 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton13Ytop,ScenarioSelectButton13YBottom,ScenarioSelectButton13XLeft,ScenarioSelectButton13XRight | dw $0000 + (ScenarioSelectButton13Ytop*128) + (ScenarioSelectButton13XLeft/2) - 1282921 2922 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db ScenarioSelectButton14Ytop,ScenarioSelectButton14YBottom,ScenarioSelectButton14XLeft,ScenarioSelectButton14XRight | dw $0000 + (ScenarioSelectButton14Ytop*128) + (ScenarioSelectButton14XLeft/2) - 1282923 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db ScenarioSelectButton15Ytop,ScenarioSelectButton15YBottom,ScenarioSelectButton15XLeft,ScenarioSelectButton15XRight | dw $0000 + (ScenarioSelectButton15Ytop*128) + (ScenarioSelectButton15XLeft/2) - 1282924 2925 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton16Ytop,ScenarioSelectButton16YBottom,ScenarioSelectButton16XLeft,ScenarioSelectButton16XRight | dw $0000 + (ScenarioSelectButton16Ytop*128) + (ScenarioSelectButton16XLeft/2) - 1282926 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton17Ytop,ScenarioSelectButton17YBottom,ScenarioSelectButton17XLeft,ScenarioSelectButton17XRight | dw $0000 + (ScenarioSelectButton17Ytop*128) + (ScenarioSelectButton17XLeft/2) - 1282927 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton18Ytop,ScenarioSelectButton18YBottom,ScenarioSelectButton18XLeft,ScenarioSelectButton18XRight | dw $0000 + (ScenarioSelectButton18Ytop*128) + (ScenarioSelectButton18XLeft/2) - 1282928 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton19Ytop,ScenarioSelectButton19YBottom,ScenarioSelectButton19XLeft,ScenarioSelectButton19XRight | dw $0000 + (ScenarioSelectButton19Ytop*128) + (ScenarioSelectButton19XLeft/2) - 1282929 2930 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton20Ytop,ScenarioSelectButton20YBottom,ScenarioSelectButton20XLeft,ScenarioSelectButton20XRight | dw $0000 + (ScenarioSelectButton20Ytop*128) + (ScenarioSelectButton20XLeft/2) - 1282931 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton21Ytop,ScenarioSelectButton21YBottom,ScenarioSelectButton21XLeft,ScenarioSelectButton21XRight | dw $0000 + (ScenarioSelectButton21Ytop*128) + (ScenarioSelectButton21XLeft/2) - 1282932 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton22Ytop,ScenarioSelectButton22YBottom,ScenarioSelectButton22XLeft,ScenarioSelectButton22XRight | dw $0000 + (ScenarioSelectButton22Ytop*128) + (ScenarioSelectButton22XLeft/2) - 1282933 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton23Ytop,ScenarioSelectButton23YBottom,ScenarioSelectButton23XLeft,ScenarioSelectButton23XRight | dw $0000 + (ScenarioSelectButton23Ytop*128) + (ScenarioSelectButton23XLeft/2) - 1282934 2935 .DifficultyButtons:2936 db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (016/2) - 128 | dw $4000 + (022*128) + (032/2) - 128 | db ScenarioSelectButton24Ytop,ScenarioSelectButton24YBottom,ScenarioSelectButton24XLeft,ScenarioSelectButton24XRight | dw $0000 + (ScenarioSelectButton24Ytop*128) + (ScenarioSelectButton24XLeft/2) - 1282937 db %1100 0011 | dw $4000 + (022*128) + (048/2) - 128 | dw $4000 + (022*128) + (066/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | db ScenarioSelectButton25Ytop,ScenarioSelectButton25YBottom,ScenarioSelectButton25XLeft,ScenarioSelectButton25XRight | dw $0000 + (ScenarioSelectButton25Ytop*128) + (ScenarioSelectButton25XLeft/2) - 1282938 db %1100 0011 | dw $4000 + (022*128) + (102/2) - 128 | dw $4000 + (022*128) + (118/2) - 128 | dw $4000 + (022*128) + (134/2) - 128 | db ScenarioSelectButton26Ytop,ScenarioSelectButton26YBottom,ScenarioSelectButton26XLeft,ScenarioSelectButton26XRight | dw $0000 + (ScenarioSelectButton26Ytop*128) + (ScenarioSelectButton26XLeft/2) - 1282939 db %1100 0011 | dw $4000 + (022*128) + (150/2) - 128 | dw $4000 + (022*128) + (168/2) - 128 | dw $4000 + (022*128) + (186/2) - 128 | db ScenarioSelectButton27Ytop,ScenarioSelectButton27YBottom,ScenarioSelectButton27XLeft,ScenarioSelectButton27XRight | dw $0000 + (ScenarioSelectButton27Ytop*128) + (ScenarioSelectButton27XLeft/2) - 1282940 db %1100 0011 | dw $4000 + (022*128) + (204/2) - 128 | dw $4000 + (022*128) + (220/2) - 128 | dw $4000 + (022*128) + (236/2) - 128 | db ScenarioSelectButton28Ytop,ScenarioSelectButton28YBottom,ScenarioSelectButton28XLeft,ScenarioSelectButton28XRight | dw $0000 + (ScenarioSelectButton28Ytop*128) + (ScenarioSelectButton28XLeft/2) - 1282946 2947CampaignSelectButton1Ytop: equ 043 + (0*13)2948CampaignSelectButton1YBottom: equ CampaignSelectButton1Ytop + 0112949CampaignSelectButton1XLeft: equ 0182950CampaignSelectButton1XRight: equ CampaignSelectButton1XLeft + 0962952CampaignSelectButton2Ytop: equ 043 + (1*13)2953CampaignSelectButton2YBottom: equ CampaignSelectButton2Ytop + 0112954CampaignSelectButton2XLeft: equ 0182955CampaignSelectButton2XRight: equ CampaignSelectButton2XLeft + 0962957CampaignSelectButton3Ytop: equ 043 + (2*13)2958CampaignSelectButton3YBottom: equ CampaignSelectButton3Ytop + 0112959CampaignSelectButton3XLeft: equ 0182960CampaignSelectButton3XRight: equ CampaignSelectButton3XLeft + 0962962CampaignSelectButton4Ytop: equ 043 + (3*13)2963CampaignSelectButton4YBottom: equ CampaignSelectButton4Ytop + 0112964CampaignSelectButton4XLeft: equ 0182965CampaignSelectButton4XRight: equ CampaignSelectButton4XLeft + 0962967CampaignSelectButton5Ytop: equ 043 + (4*13)2968CampaignSelectButton5YBottom: equ CampaignSelectButton5Ytop + 0112969CampaignSelectButton5XLeft: equ 0182970CampaignSelectButton5XRight: equ CampaignSelectButton5XLeft + 0962972CampaignSelectButton6Ytop: equ 043 + (5*13)2973CampaignSelectButton6YBottom: equ CampaignSelectButton6Ytop + 0112974CampaignSelectButton6XLeft: equ 0182975CampaignSelectButton6XRight: equ CampaignSelectButton6XLeft + 0962977CampaignSelectButton7Ytop: equ 043 + (6*13)2978CampaignSelectButton7YBottom: equ CampaignSelectButton7Ytop + 0112979CampaignSelectButton7XLeft: equ 0182980CampaignSelectButton7XRight: equ CampaignSelectButton7XLeft + 0962982CampaignSelectButton8Ytop: equ 043 + (7*13)2983CampaignSelectButton8YBottom: equ CampaignSelectButton8Ytop + 0112984CampaignSelectButton8XLeft: equ 0182985CampaignSelectButton8XRight: equ CampaignSelectButton8XLeft + 0962987CampaignSelectButton9Ytop: equ 043 + (8*13)2988CampaignSelectButton9YBottom: equ CampaignSelectButton9Ytop + 0112989CampaignSelectButton9XLeft: equ 0182990CampaignSelectButton9XRight: equ CampaignSelectButton9XLeft + 0962992CampaignSelectButton10Ytop: equ 043 + (9*13)2993CampaignSelectButton10YBottom: equ CampaignSelectButton10Ytop + 0112994CampaignSelectButton10XLeft: equ 0182995CampaignSelectButton10XRight: equ CampaignSelectButton10XLeft + 0962996 2997CampaignSelectButton11Ytop: equ 1732998CampaignSelectButton11YBottom: equ CampaignSelectButton11Ytop + 0112999CampaignSelectButton11XLeft: equ 032-63000CampaignSelectButton11XRight: equ CampaignSelectButton11XLeft + 0323002CampaignSelectButton12Ytop: equ 1733003CampaignSelectButton12YBottom: equ CampaignSelectButton12Ytop + 0113004CampaignSelectButton12XLeft: equ 066-63005CampaignSelectButton12XRight: equ CampaignSelectButton12XLeft + 0323007CampaignSelectButton13Ytop: equ 1733008CampaignSelectButton13YBottom: equ CampaignSelectButton13Ytop + 0113009CampaignSelectButton13XLeft: equ 100-63010CampaignSelectButton13XRight: equ CampaignSelectButton13XLeft + 0323011 3012CampaignSelectButton14Ytop: equ 1913013CampaignSelectButton14YBottom: equ CampaignSelectButton14Ytop + 0153014CampaignSelectButton14XLeft: equ 1063015CampaignSelectButton14XRight: equ CampaignSelectButton14XLeft + 0203017CampaignSelectButton15Ytop: equ 1913018CampaignSelectButton15YBottom: equ CampaignSelectButton15Ytop + 0153019CampaignSelectButton15XLeft: equ 1323020CampaignSelectButton15XRight: equ CampaignSelectButton15XLeft + 0183022CampaignSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock3023CampaignSelectButtonTableAmountOfButtons: db 153024CampaignSelectButtonTable: 3026 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton1Ytop,CampaignSelectButton1YBottom,CampaignSelectButton1XLeft,CampaignSelectButton1XRight | dw $0000 + (CampaignSelectButton1Ytop*128) + (CampaignSelectButton1XLeft/2) - 128 3027 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton2Ytop,CampaignSelectButton2YBottom,CampaignSelectButton2XLeft,CampaignSelectButton2XRight | dw $0000 + (CampaignSelectButton2Ytop*128) + (CampaignSelectButton2XLeft/2) - 128 3028 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton3Ytop,CampaignSelectButton3YBottom,CampaignSelectButton3XLeft,CampaignSelectButton3XRight | dw $0000 + (CampaignSelectButton3Ytop*128) + (CampaignSelectButton3XLeft/2) - 1283029 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton4Ytop,CampaignSelectButton4YBottom,CampaignSelectButton4XLeft,CampaignSelectButton4XRight | dw $0000 + (CampaignSelectButton4Ytop*128) + (CampaignSelectButton4XLeft/2) - 1283030 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton5Ytop,CampaignSelectButton5YBottom,CampaignSelectButton5XLeft,CampaignSelectButton5XRight | dw $0000 + (CampaignSelectButton5Ytop*128) + (CampaignSelectButton5XLeft/2) - 1283031 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton6Ytop,CampaignSelectButton6YBottom,CampaignSelectButton6XLeft,CampaignSelectButton6XRight | dw $0000 + (CampaignSelectButton6Ytop*128) + (CampaignSelectButton6XLeft/2) - 1283032 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton7Ytop,CampaignSelectButton7YBottom,CampaignSelectButton7XLeft,CampaignSelectButton7XRight | dw $0000 + (CampaignSelectButton7Ytop*128) + (CampaignSelectButton7XLeft/2) - 1283033 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton8Ytop,CampaignSelectButton8YBottom,CampaignSelectButton8XLeft,CampaignSelectButton8XRight | dw $0000 + (CampaignSelectButton8Ytop*128) + (CampaignSelectButton8XLeft/2) - 1283034 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton9Ytop,CampaignSelectButton9YBottom,CampaignSelectButton9XLeft,CampaignSelectButton9XRight | dw $0000 + (CampaignSelectButton9Ytop*128) + (CampaignSelectButton9XLeft/2) - 1283035 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton10Ytop,CampaignSelectButton10YBottom,CampaignSelectButton10XLeft,CampaignSelectButton10XRight | dw $0000 + (CampaignSelectButton10Ytop*128) + (CampaignSelectButton10XLeft/2) - 1283036 3037 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton11Ytop,CampaignSelectButton11YBottom,CampaignSelectButton11XLeft,CampaignSelectButton11XRight | dw $0000 + (CampaignSelectButton11Ytop*128) + (CampaignSelectButton11XLeft/2) - 1283038 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton12Ytop,CampaignSelectButton12YBottom,CampaignSelectButton12XLeft,CampaignSelectButton12XRight | dw $0000 + (CampaignSelectButton12Ytop*128) + (CampaignSelectButton12XLeft/2) - 1283039 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton13Ytop,CampaignSelectButton13YBottom,CampaignSelectButton13XLeft,CampaignSelectButton13XRight | dw $0000 + (CampaignSelectButton13Ytop*128) + (CampaignSelectButton13XLeft/2) - 1283040 3041 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db CampaignSelectButton14Ytop,CampaignSelectButton14YBottom,CampaignSelectButton14XLeft,CampaignSelectButton14XRight | dw $0000 + (CampaignSelectButton14Ytop*128) + (CampaignSelectButton14XLeft/2) - 1283042 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db CampaignSelectButton15Ytop,CampaignSelectButton15YBottom,CampaignSelectButton15XLeft,CampaignSelectButton15XRight | dw $0000 + (CampaignSelectButton15Ytop*128) + (CampaignSelectButton15XLeft/2) - 1283045PutPlayer4Buttons:3046 ld hl,$4000 + (139*128) + (158/2) - 1283047 ld de,$0000 + (139*128) + (158/2) - 1283048 ld bc,$0000 + (011*256) + (084/2)3049 ld a,ScenarioSelectBlock 3050 jp CopyRamToVramCorrectedCastleOverview 3052PutPlayer1and2Buttons:3053 ld hl,$4000 + (103*128) + (158/2) - 1283054 ld de,$0000 + (103*128) + (158/2) - 1283055 ld bc,$0000 + (023*256) + (084/2)3056 ld a,ScenarioSelectBlock 3057 jp CopyRamToVramCorrectedCastleOverview 3059PutPlayer3Buttons:3060 ld hl,$4000 + (127*128) + (158/2) - 1283061 ld de,$0000 + (127*128) + (158/2) - 1283062 ld bc,$0000 + (011*256) + (084/2)3063 ld a,ScenarioSelectBlock 3064 jp CopyRamToVramCorrectedCastleOverview 3066ClearPlayerButtons:3067 ld hl,$4000 + (075*128) + (024/2) - 1283068 ld de,$0000 + (103*128) + (158/2) - 1283069 ld bc,$0000 + (047*256) + (084/2)3070 ld a,ScenarioSelectBlock 3071 jp CopyRamToVramCorrectedCastleOverview 3073ClearScenarioNameRightTopOfScreen:3074 ld hl,$4000 + (019*128) + (158/2) - 1283075 ld de,$0000 + (019*128) + (158/2) - 1283076 ld bc,$0000 + (009*256) + (088/2)3077 ld a,ScenarioSelectBlock 3078 jp CopyRamToVramCorrectedCastleOverview 3080ClearCampaignNameAndDescriptionRightTopOfScreen:3081 ld hl,$4000 + (019*128) + (148/2) - 1283082 ld de,$0000 + (019*128) + (148/2) - 1283083 ld bc,$0000 + (166*256) + (098/2)3084 ld a,CampaignSelectBlock 3085 jp CopyRamToVramCorrectedCastleOverview 3087ClearDifficultyTextGraphics:3088 ld hl,$4000 + (179*128) + (168/2) - 1283089 ld de,$0000 + (179*128) + (168/2) - 1283090 ld bc,$0000 + (006*256) + (068/2)3091 ld a,ScenarioSelectBlock 3092 jp CopyRamToVramCorrectedCastleOverview 3094ClearScenarioButtonGraphics:3095 ld hl,$4000 + (043*128) + (020/2) - 1283096 ld de,$0000 + (043*128) + (020/2) - 1283097 ld bc,$0000 + (128*256) + (126/2)3098 ld a,ScenarioSelectBlock 3099 jp CopyRamToVramCorrectedCastleOverview 3101ClearCampaignButtonGraphics:3102 ld hl,$4000 + (040*128) + (018/2) - 1283103 ld de,$0000 + (040*128) + (018/2) - 1283104 ld bc,$0000 + (131*256) + (116/2)3105 ld a,CampaignSelectBlock 3106 jp CopyRamToVramCorrectedCastleOverview 3108SetScenarioSelectGraphics:3109 ld hl,$4000 + (000*128) + (000/2) - 1283110 ld de,$0000 + (000*128) + (000/2) - 1283111 ld bc,$0000 + (212*256) + (256/2)3112 ld a,ScenarioSelectBlock 3113 jp CopyRamToVramCorrectedCastleOverview 3115SetFontPage0Y212: 3116 ld hl,$4000 + (000*128) + (000/2) - 1283117 ld de,$0000 + (212*128) + (000/2) - 1283118 ld bc,$0000 + (006*256) + (256/2)3119 ld a,CastleOverviewFontBlock 3120 jp CopyRamToVramCorrectedWithoutActivePageSetting 3122SetCampaignSelectGraphics:3123 ld hl,$4000 + (000*128) + (000/2) - 1283124 ld de,$0000 + (000*128) + (000/2) - 1283125 ld bc,$0000 + (212*256) + (256/2)3126 ld a,CampaignSelectBlock 3127 jp CopyRamToVramCorrectedCastleOverview 3129SetTitleScreenGraphics:3130 ld hl,$4000 + (000*128) + (000/2) - 1283131 ld de,$0000 + (000*128) + (000/2) - 1283132 ld bc,$0000 + (212*256) + (256/2)3133 ld a,TitleScreenGraphicsBlock 3134 jp CopyRamToVramCorrectedCastleOverview 3138MSXHeroes.asm 1178 ds $c000-$,$ff1179dephase11811184BattleMonsterSpriteSheet9Block: equ $6d1185phase $40001186 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9.SC5",7,208 * 128 1187 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9Bottom48Lines.SC5",7,048 * 128 1188 ds $c000-$,$ff1189dephase11911194BattleMonsterSpriteSheet10Block: equ $6f1195phase $40001196 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10.SC5",7,208 * 128 1197 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10Bottom48Lines.SC5",7,048 * 128 1198 ds $c000-$,$ff1199dephase12011204BattleMonsterSpriteSheet11Block: equ $711205phase $40001206 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11.SC5",7,208 * 128 1207 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11Bottom48Lines.SC5",7,048 * 128 1208 ds $c000-$,$ff1209dephase12111214BattleMonsterSpriteSheet12Block: equ $731215phase $40001216 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12.SC5",7,208 * 128 1217 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12Bottom48Lines.SC5",7,048 * 128 1218 ds $c000-$,$ff1219dephase12211224BattleMonsterSpriteSheet13Block: equ $751225phase $40001226 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13.SC5",7,208 * 128 1227 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13Bottom48Lines.SC5",7,048 * 128 1228 ds $c000-$,$ff1229dephase12311234BattleMonsterSpriteSheet14Block: equ $771235phase $40001236 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14.SC5",7,208 * 128 1237 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14Bottom48Lines.SC5",7,048 * 128 1238 ds $c000-$,$ff1239dephase12411244BattleMonsterSpriteSheet15Block: equ $791245phase $40001246 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15.SC5",7,208 * 128 1247 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15Bottom48Lines.SC5",7,048 * 128 1248 ds $c000-$,$ff1249dephase12511254BattleMonsterSpriteSheet16Block: equ $7b1255phase $40001256 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16.SC5",7,208 * 128 1257 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16Bottom48Lines.SC5",7,048 * 128 1258 ds $c000-$,$ff1259dephase12611264BattleMonsterSpriteSheet17Block: equ $7d1265phase $400012661268 ds $c000-$,$ff1269dephase12711274BattleMonsterSpriteSheet18Block: equ $7f1275phase $400012761278 ds $c000-$,$ff1279dephase12811284CastleOverviewBlock: equ $811285phase $40001286 incbin "..\grapx\CastleOverview\CastleOverview.SC5",7,212 * 128 1287 ds $c000-$,$ff1288dephase12901293RecruitCreatures4MonstersBlock: equ $831294phase $40001295 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster1.SC5",7,30 * 128 1296 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster2.SC5",7,30 * 128 1297 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster3.SC5",7,30 * 128 1298 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster4.SC5",7,30 * 128 1299 ds $8000-$,$ff1300dephase13021305SpellAnimations16Block: equ $841306phase $40001307 incbin "..\grapx\BattleField\SpellAnimations16.SC5",7,128 * 128 1308 ds $8000-$,$ff1309dephase13111314ScenarioSelectButtonsBlock: equ $851315TitleScreenButtonsBlock: equ $851316phase $40001317 incbin "..\grapx\TitleScreen\ScenarioSelectButtons.SC5",7,172 * 128 1318 incbin "..\grapx\TitleScreen\TitleScreenButtons.SC5",7,76 * 128 1319 ds $c000-$,$ff1320dephase13221325ScenarioSelectBlock: equ $871326phase $40001327 incbin "..\grapx\TitleScreen\ScenarioSelect.SC5",7,212 * 128 1328 ds $c000-$,$ff1329dephase13311334SpellAnimations15Block: equ $891335phase $40001336 incbin "..\grapx\BattleField\SpellAnimations15.SC5",7,128 * 128 1337 ds $8000-$,$ff1338dephase13401343TilesGentleBlock: equ $8a1344phase $40001345 incbin "..\grapx\tilesheets\TilesGentle.SC5",7,208 * 128 1346 incbin "..\grapx\tilesheets\TilesGentleBottom48Lines.SC5",7,48 * 128 1347 ds $c000-$,$ff1348dephase13501353TilesGentleDesertBlock: equ $8c1354phase $40001355 incbin "..\grapx\tilesheets\TilesGentleDesert.SC5",7,208 * 128 1356 incbin "..\grapx\tilesheets\TilesGentleDesertBottom48Lines.SC5",7,48 * 128 1357 ds $c000-$,$ff1358dephase13601363TilesGentleAutumnBlock: equ $8e1364phase $40001365 incbin "..\grapx\tilesheets\TilesGentleAutumn.SC5",7,208 * 128 1366 incbin "..\grapx\tilesheets\TilesGentleAutumnBottom48Lines.SC5",7,48 * 128 1367 ds $c000-$,$ff1368dephase13701373TilesGentleWinterBlock: equ $901374phase $40001375 incbin "..\grapx\tilesheets\TilesGentleWinter.SC5",7,208 * 128 1376 incbin "..\grapx\tilesheets\TilesGentleWinterBottom48Lines.SC5",7,48 * 128 1377 ds $c000-$,$ff1378dephase13801383TilesGentleJungleBlock: equ $921384phase $40001385 incbin "..\grapx\tilesheets\TilesGentleJungle.SC5",7,208 * 128 1386 incbin "..\grapx\tilesheets\TilesGentleJungleBottom48Lines.SC5",7,48 * 128 1387 ds $c000-$,$ff1388dephase13901393TilesGentleCaveBlock: equ $941394phase $40001395 incbin "..\grapx\tilesheets\TilesGentleCave.SC5",7,208 * 128 1396 incbin "..\grapx\tilesheets\TilesGentleCaveBottom48Lines.SC5",7,48 * 128 1397 ds $c000-$,$ff1398dephase14001403GentleDesertMap01MapBlock: equ $961404GentleDesertMap01ObjectLayerMapBlock: equ $961405GentleDesertMap02MapBlock: equ $961406GentleDesertMap02ObjectLayerMapBlock: equ $961407GentleDesertMap03MapBlock: equ $961408GentleDesertMap03ObjectLayerMapBlock: equ $961409GentleDesertMap04MapBlock: equ $961410GentleDesertMap04ObjectLayerMapBlock: equ $961412phase $40001413GentleDesertMap01Map:1414 incbin "..\maps\GentleDesertMap01.map.pck"1415GentleDesertMap01ObjectLayerMap:1416 incbin "..\maps\GentleDesertMap01objects.map.pck"1417GentleDesertMap02Map:1418 incbin "..\maps\GentleDesertMap02.map.pck"1419GentleDesertMap02ObjectLayerMap:1420 incbin "..\maps\GentleDesertMap02objects.map.pck"1421GentleDesertMap03Map:1422 incbin "..\maps\GentleDesertMap03.map.pck"1423GentleDesertMap03ObjectLayerMap:1424 incbin "..\maps\GentleDesertMap03objects.map.pck"1425GentleDesertMap04Map:1426 incbin "..\maps\GentleDesertMap04.map.pck"1427GentleDesertMap04ObjectLayerMap:1428 incbin "..\maps\GentleDesertMap04objects.map.pck"1429 ds $8000-$,$ff1430dephase14321435GentleWinterMap01MapBlock: equ $971436GentleWinterMap01ObjectLayerMapBlock: equ $971437GentleWinterMap02MapBlock: equ $971438GentleWinterMap02ObjectLayerMapBlock: equ $971439GentleWinterMap03MapBlock: equ $971440GentleWinterMap03ObjectLayerMapBlock: equ $971441GentleDesertMap05MapBlock: equ $971442GentleDesertMap05ObjectLayerMapBlock: equ $971444phase $40001445GentleDesertMap05Map:1446 incbin "..\maps\GentleDesertMap05.map.pck"1447GentleDesertMap05ObjectLayerMap:1448 incbin "..\maps\GentleDesertMap05objects.map.pck"1449GentleWinterMap01Map:1450 incbin "..\maps\GentleWinterMap01.map.pck"1451GentleWinterMap01ObjectLayerMap:1452 incbin "..\maps\GentleWinterMap01objects.map.pck"1453GentleWinterMap02Map:1454 incbin "..\maps\GentleWinterMap02.map.pck"1455GentleWinterMap02ObjectLayerMap:1456 incbin "..\maps\GentleWinterMap02objects.map.pck"1457GentleWinterMap03Map:1458 incbin "..\maps\GentleWinterMap03.map.pck"1459GentleWinterMap03ObjectLayerMap:1460 incbin "..\maps\GentleWinterMap03objects.map.pck"1461 ds $8000-$,$ff1462dephase14641467GentleWinterMap04MapBlock: equ $981468GentleWinterMap04ObjectLayerMapBlock: equ $981469GentleWinterMap05MapBlock: equ $981470GentleWinterMap05ObjectLayerMapBlock: equ $981471GentleMap01MapBlock: equ $981472GentleMap01ObjectLayerMapBlock: equ $981473phase $40001474GentleWinterMap04Map:1475 incbin "..\maps\GentleWinterMap04.map.pck"1476GentleWinterMap04ObjectLayerMap:1477 incbin "..\maps\GentleWinterMap04objects.map.pck"1478GentleWinterMap05Map:1479 incbin "..\maps\GentleWinterMap05.map.pck"1480GentleWinterMap05ObjectLayerMap:1481 incbin "..\maps\GentleWinterMap05objects.map.pck"1482GentleMap01Map:1483 incbin "..\maps\GentleMap01.map.pck"1484GentleMap01ObjectLayerMap:1485 incbin "..\maps\GentleMap01objects.map.pck"1486 ds $8000-$,$ff1487dephase14891492GentleJungleMap01MapBlock: equ $991493GentleJungleMap01ObjectLayerMapBlock: equ $991494GentleJungleMap02MapBlock: equ $991495GentleJungleMap02ObjectLayerMapBlock: equ $991496GentleJungleMap03MapBlock: equ $991497GentleJungleMap03ObjectLayerMapBlock: equ $991499phase $40001500GentleJungleMap01Map:1501 incbin "..\maps\GentleJungleMap01.map.pck"1502GentleJungleMap01ObjectLayerMap:1503 incbin "..\maps\GentleJungleMap01objects.map.pck"1504GentleJungleMap02Map:1505 incbin "..\maps\GentleJungleMap02.map.pck"1506GentleJungleMap02ObjectLayerMap:1507 incbin "..\maps\GentleJungleMap02objects.map.pck"1508GentleJungleMap03Map:1509 incbin "..\maps\GentleJungleMap03.map.pck"1510GentleJungleMap03ObjectLayerMap:1511 incbin "..\maps\GentleJungleMap03objects.map.pck"1512 ds $8000-$,$ff1513dephase15151518GentleJungleMap04MapBlock: equ $9a1519GentleJungleMap04ObjectLayerMapBlock: equ $9a1520GentleJungleMap05MapBlock: equ $9a1521GentleJungleMap05ObjectLayerMapBlock: equ $9a1523phase $40001524GentleJungleMap04Map:1525 incbin "..\maps\GentleJungleMap04.map.pck"1526GentleJungleMap04ObjectLayerMap:1527 incbin "..\maps\GentleJungleMap04objects.map.pck"1528GentleJungleMap05Map:1529 incbin "..\maps\GentleJungleMap05.map.pck"1530GentleJungleMap05ObjectLayerMap:1531 incbin "..\maps\GentleJungleMap05objects.map.pck"1532 ds $8000-$,$ff1533dephase15351538GentleAutumnMap01MapBlock: equ $9b1539GentleAutumnMap01ObjectLayerMapBlock: equ $9b1540GentleAutumnMap02MapBlock: equ $9b1541GentleAutumnMap02ObjectLayerMapBlock: equ $9b1542GentleAutumnMap03MapBlock: equ $9b1543GentleAutumnMap03ObjectLayerMapBlock: equ $9b1545phase $40001546GentleAutumnMap01Map:1547 incbin "..\maps\GentleAutumnMap01.map.pck"1548GentleAutumnMap01ObjectLayerMap:1549 incbin "..\maps\GentleAutumnMap01objects.map.pck"1550GentleAutumnMap02Map:1551 incbin "..\maps\GentleAutumnMap02.map.pck"1552GentleAutumnMap02ObjectLayerMap:1553 incbin "..\maps\GentleAutumnMap02objects.map.pck"1554GentleAutumnMap03Map:1555 incbin "..\maps\GentleAutumnMap03.map.pck"1556GentleAutumnMap03ObjectLayerMap:1557 incbin "..\maps\GentleAutumnMap03objects.map.pck"1558 ds $8000-$,$ff1559dephase15611564GentleAutumnMap04MapBlock: equ $9c1565GentleAutumnMap04ObjectLayerMapBlock: equ $9c1566GentleAutumnMap05MapBlock: equ $9c1567GentleAutumnMap05ObjectLayerMapBlock: equ $9c1568GentleCaveMap01MapBlock: equ $9c1569GentleCaveMap01ObjectLayerMapBlock: equ $9c1571phase $40001572GentleAutumnMap04Map:1573 incbin "..\maps\GentleAutumnMap04.map.pck"1574GentleAutumnMap04ObjectLayerMap:1575 incbin "..\maps\GentleAutumnMap04objects.map.pck"1576GentleAutumnMap05Map:1577 incbin "..\maps\GentleAutumnMap05.map.pck"1578GentleAutumnMap05ObjectLayerMap:1579 incbin "..\maps\GentleAutumnMap05objects.map.pck"1580GentleCaveMap01Map:1581 incbin "..\maps\GentleCaveMap01.map.pck"1582GentleCaveMap01ObjectLayerMap:1583 incbin "..\maps\GentleCaveMap01objects.map.pck"1584 ds $8000-$,$ff1585dephase15871590GentleCaveMap02MapBlock: equ $9d1591GentleCaveMap02ObjectLayerMapBlock: equ $9d1592GentleCaveMap03MapBlock: equ $9d1593GentleCaveMap03ObjectLayerMapBlock: equ $9d1594GentleCaveMap04MapBlock: equ $9d1595GentleCaveMap04ObjectLayerMapBlock: equ $9d1596GentleCaveMap05MapBlock: equ $9d1597GentleCaveMap05ObjectLayerMapBlock: equ $9d1599phase $40001601GentleCaveMap02Map:1602 incbin "..\maps\GentleCaveMap02.map.pck"1603GentleCaveMap02ObjectLayerMap:1604 incbin "..\maps\GentleCaveMap02objects.map.pck"1605GentleCaveMap03Map:1606 incbin "..\maps\GentleCaveMap03.map.pck"1607GentleCaveMap03ObjectLayerMap:1608 incbin "..\maps\GentleCaveMap03objects.map.pck"1609GentleCaveMap04Map:1610 incbin "..\maps\GentleCaveMap04.map.pck"1611GentleCaveMap04ObjectLayerMap:1612 incbin "..\maps\GentleCaveMap04objects.map.pck"1613GentleCaveMap05Map:1614 incbin "..\maps\GentleCaveMap05.map.pck"1615GentleCaveMap05ObjectLayerMap:1616 incbin "..\maps\GentleCaveMap05objects.map.pck"1617 ds $8000-$,$ff1618dephase16201623GentleMap02MapBlock: equ $9e1624GentleMap02ObjectLayerMapBlock: equ $9e1625GentleMap03MapBlock: equ $9e1626GentleMap03ObjectLayerMapBlock: equ $9e1627GentleMap04MapBlock: equ $9e1628GentleMap04ObjectLayerMapBlock: equ $9e1629GentleMap05MapBlock: equ $9e1630GentleMap05ObjectLayerMapBlock: equ $9e1632phase $40001633GentleMap02Map:1634 incbin "..\maps\GentleMap02.map.pck"1635GentleMap02ObjectLayerMap:1636 incbin "..\maps\GentleMap02objects.map.pck"1637GentleMap03Map:1638 incbin "..\maps\GentleMap03.map.pck"1639GentleMap03ObjectLayerMap:1640 incbin "..\maps\GentleMap03objects.map.pck"1641GentleMap04Map:1642 incbin "..\maps\GentleMap04.map.pck"1643GentleMap04ObjectLayerMap:1644 incbin "..\maps\GentleMap04objects.map.pck"1645GentleMap05Map:1646 incbin "..\maps\GentleMap05.map.pck"1647GentleMap05ObjectLayerMap:1648 incbin "..\maps\GentleMap05objects.map.pck"1649 ds $8000-$,$ff1650dephase16521656phase $40001657 ds $c000-$,$ff1658dephase16601663BattleFieldDesertBlock: equ $a11664phase $40001665 incbin "..\grapx\BattleField\BattleFieldDesert.SC5",7,212 * 128 1666 ds $c000-$,$ff1667dephase16691672BattleFieldCaveBlock: equ $a31673phase $40001674 incbin "..\grapx\BattleField\BattleFieldCave.SC5",7,212 * 128 1675 ds $c000-$,$ff1676dephase16781681BattleFieldGentleBlock: equ $a51682phase $40001683 incbin "..\grapx\BattleField\BattleFieldGentle.SC5",7,212 * 128 1684 ds $c000-$,$ff1685dephase16871690BattleFieldAutumnBlock: equ $a71691phase $40001692 incbin "..\grapx\BattleField\BattleFieldAutumn.SC5",7,212 * 128 1693 ds $c000-$,$ff1694dephase16961699BattleFieldJungleBlock: equ $a91700phase $40001701 incbin "..\grapx\BattleField\BattleFieldJungle.SC5",7,212 * 128 1702 ds $c000-$,$ff1703dephase17051708SpellAnimationsBlock: equ $ab1709phase $40001710 incbin "..\grapx\BattleField\SpellAnimations1.SC5",7,212 * 128 1711 ds $c000-$,$ff1712dephase17141717SpellAnimations2Block: equ $ad1718phase $40001719 incbin "..\grapx\BattleField\SpellAnimations2.SC5",7,192 * 128 1720 incbin "..\grapx\BattleField\SpellAnimations2bottom64lines.SC5",7,064 * 128 1721 ds $c000-$,$ff1722dephase17241727SpellAnimations3Block: equ $af1728phase $40001729 incbin "..\grapx\BattleField\SpellAnimations3.SC5",7,128 * 128 1730 ds $8000-$,$ff1731dephase17331736SpellAnimations4Block: equ $b01737phase $40001738 incbin "..\grapx\BattleField\SpellAnimations4.SC5",7,128 * 128 1739 ds $8000-$,$ff1740dephase17421745SpellAnimations5Block: equ $b11746phase $40001747 incbin "..\grapx\BattleField\SpellAnimations5.SC5",7,128 * 128 1748 ds $8000-$,$ff1749dephase17511754SpellAnimations6Block: equ $b21755phase $40001756 incbin "..\grapx\BattleField\SpellAnimations6.SC5",7,128 * 128 1757 ds $8000-$,$ff1758dephase17601763SpellAnimations7Block: equ $b31764phase $40001765 incbin "..\grapx\BattleField\SpellAnimations7.SC5",7,128 * 128 1766 ds $8000-$,$ff1767dephase17691772SpellAnimations8Block: equ $b41773phase $40001774 incbin "..\grapx\BattleField\SpellAnimations8.SC5",7,128 * 128 1775 ds $8000-$,$ff1776dephase17781781SpellAnimations9Block: equ $b51782phase $40001783 incbin "..\grapx\BattleField\SpellAnimations9.SC5",7,128 * 128 1784 ds $8000-$,$ff1785dephase17871790SpellAnimations10Block: equ $b61791phase $40001792 incbin "..\grapx\BattleField\SpellAnimations10.SC5",7,128 * 128 1793 ds $8000-$,$ff1794dephase17961799SpellAnimations11Block: equ $b71800phase $40001801 incbin "..\grapx\BattleField\SpellAnimations11.SC5",7,128 * 128 1802 ds $8000-$,$ff1803dephase18051808SpellAnimations12Block: equ $b81809phase $40001810 incbin "..\grapx\BattleField\SpellAnimations12.SC5",7,128 * 128 1811 ds $8000-$,$ff1812dephase18141817SpellAnimations13Block: equ $b91818phase $40001819 incbin "..\grapx\BattleField\SpellAnimations13.SC5",7,128 * 128 1820 ds $8000-$,$ff1821dephase18231826SpellAnimations14Block: equ $ba1827phase $40001828 incbin "..\grapx\BattleField\SpellAnimations14.SC5",7,128 * 128 1829 ds $8000-$,$ff1830dephase18321835GentleAutumnMiniMapsBlock: equ $bb1836GentleCaveMiniMapsBlock: equ $bb1837GentleDesertMiniMapsBlock: equ $bb1838GentleJungleMiniMapsBlock: equ $bb1839GentleMiniMapsBlock: equ $bb1840phase $40001841 incbin "..\grapx\hud\GentleAutumnMiniMaps.SC5",7,48 * 128 1842 incbin "..\grapx\hud\GentleCaveMiniMaps.SC5",7,048 * 128 1843 incbin "..\grapx\hud\GentleDesertMiniMaps.SC5",7,048 * 128 1844 incbin "..\grapx\hud\GentleJungleMiniMaps.SC5",7,048 * 128 1845 incbin "..\grapx\hud\GentleMiniMaps.SC5",7,048 * 128 1846 ds $c000-$,$ff1847dephase18491852DiskMenuBlock: equ $bd1853phase $40001854 incbin "..\grapx\DiskMenu\DiskMenu.SC5",7,134 * 128 1855 ds $c000-$,$ff1856dephase18581861BattleFieldWinterBlock: equ $bf1862phase $40001863 incbin "..\grapx\BattleField\BattleFieldWinter.SC5",7,212 * 128 1864 ds $c000-$,$ff1865dephase18671868RomSize: equ 8*1024*1024 1869RomBlockSize: equ 16*1024 1870RomStartAddress: equ $40001873usas2sfx1repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1874 phase $00001875 incbin "usas2sfx1.rep"1876 dephase1877 DS RomBlockSize- $ and (RomBlockSize-1),-1 1879usas2sfx2repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1880 phase $00001881 incbin "usas2sfx2.rep"1882 dephase1883 DS RomBlockSize- $ and (RomBlockSize-1),-1 1885usas2repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1886 phase $00001887 incbin "msxlegends.rep"1888 dephase1889 DS RomBlockSize- $ and (RomBlockSize-1),-1 18931904totallenght: Equ $-MSXHeroes1905 ds (8*$80000)-totallenght,$ff1908Upper4MB:1909 ds (16*$80000)-Upper4MB,$fe1911