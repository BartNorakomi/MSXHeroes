MSXHeroes.asm1 fname "MSXHeroes.rom"2 org $40003MSXHeroes:58 dw "AB",init,0,0,0,0,0,0,"ASCII16X"912memInit: 13 phase $c0001416initMem: 17 call whereAmI 18 ld (romSlot),a19 ld hl,$000020 call findRam 21 ld (page0ram),a22 ld hl,$400023 call findRam 24 ld (page1ram),a25 ld hl,$800026 call findRam 27 ld (page2ram),a28 29 30 and $0331 add a,a32 add a,a33 ld b,a34 ld a,(page1ram)35 and $0336 or b37 add a,a38 add a,a39 ld b,a40 ld a,(page0ram)41 and $0342 or b43 ld b,a44 call $13845 and $c046 or b47 ld b,a48 ld (slot.ram),a49 50 and $f351 ld c,a52 ld a,(romSlot)53 and $0354 add a,a55 add a,a56 or c57 ld (slot.page1rom),a58 59 ld a,b60 and $cf61 ld c,a62 ld a,(romSlot)63 and $0364 add a,a65 add a,a66 add a,a67 add a,a68 or c69 ld (slot.page2rom),a70 71 ld a,b72 and $c373 ld c,a74 ld a,(romSlot)75 and $0376 ld b,a77 add a,a78 add a,a79 or b80 add a,a81 add a,a82 or c83 ld (slot.page12rom),a84 85 ld a,(romSlot)86 ld h,$8087 call $2488 89 ld a,(page1ram)90 ld h,$4091 call $2492 93 ld a,(romSlot)94 ld h,$4095 call $2496 97 ld b,398 ld de,.enaRam99 ld hl,$3ffd100 push hl101.ramOn: 102 push bc103 push de104 push hl105 ld a,(de)106 ld e,a107 ld a,(page0ram)108 call $14109 pop hl110 pop de111 pop bc112 inc de113 inc hl114 djnz .ramOn115 ld a,(page0ram)116 push af117 pop iy118 pop ix119 ld (tempStack),sp120 jp $1c122.done: 123 ld sp,(tempStack)124 ret126.enaRam: 127 jp .done129searchSlot: db 0130searchAddress: dw 0131tempStack: dw 0132page0ram: db 0133page1ram: db 0134page2ram: db 0135romSlot: db 0136139whereAmI: 140 call $138141 rrca142 rrca143 and $03144 ld c,a145 ld b,0146 ld hl,$fcc1147 add hl,bc148 or (hl)149 ld c,a150 inc hl151 inc hl152 inc hl153 inc hl154 ld a,(hl)155 and $0c156 or c157 ret158162findRam: 163 ld bc,4 *256+ 0164 ld (searchAddress),hl165 ld hl,$fcc1166.primary.loop: 167 push bc168 push hl169 ld a,(hl)170 bit 7,a171 jr nz,.secondary172 ld a,c173 call .check174.primary.next: 175 pop hl176 pop bc177 ld a,(searchSlot)178 ret c179 inc hl180 inc c181 djnz .primary.loop182 ld a,-1 183 ld (searchSlot),a184 ret186.secondary: 187 and $80188 or c189 ld b,4190.sec.loop: 191 push bc192 call .check193 pop bc194 jr c,.primary.next195 add a,4196 djnz .sec.loop197 jr .primary.next199.check: 200 ld (searchSlot),a201 call .read202 ld b,a203 cpl204 ld c,a205 call .write206 call .read207 cp c208 jr nz,.noram209 cpl210 call .write211 call .read212 cp b213 jr nz,.noram214 ld a,(searchSlot)215 scf216 ret217.noram: 218 ld a,(searchSlot)219 or a220 ret222.read: 223 push bc224 push hl225 ld a,(searchSlot)226 ld hl,(searchAddress)227 call $0c228 pop hl229 pop bc230 ret232.write: 233 push bc234 push hl235 ld e,a236 ld a,(searchSlot)237 ld hl,(searchAddress)238 call $14239 pop hl240 pop bc241 ret243initMem.length: equ $-initMem244 dephase245249250init:251 ld a,13 252 ld ($f3e9),a 253 ld ($f3ea),a 254 ld ($f3eb),a 256 ld a,13 257 di258 out ($99),a259 ld a,16+128260 out ($99),a261 xor a262 out ($9a),a263 ei264 out ($9a),a266 ld a,5 267 call $5f269 ld a,($180) 270 ld (TurboOn?),a272EXTROM: equ 0015fh273REDCLK: equ 001f5h275 ld c,$7 276 ld ix,REDCLK277 call EXTROM 278 ld (DayOfMonthEenheden),a280 ld c,$8 281 ld ix,REDCLK282 call EXTROM 283 ld (DayOfMonthTientallen),a285 ld c,$9 286 ld ix,REDCLK287 call EXTROM 288 ld (MonthEenheden),a290 ld c,$a 291 ld ix,REDCLK292 call EXTROM 293 ld (MonthTientallen),a295 ld c,$b 296 ld ix,REDCLK297 call EXTROM 298 ld (YearEenheden),a300 ld c,$c 301 ld ix,REDCLK302 call EXTROM 303 ld (YearTientallen),a305309313 ld a,($2d) 314 ld (ComputerID),a316317 ld hl,$F3DF318 ld de,VDP_0319 ld bc,8320 ldir322 ld hl,$FFE7323 ld de,VDP_8324 ld bc,30325 ldir326327 ld sp,$ff00328330 ld a,(VDP_8+1) 331 and %1111 1101 332 or %1000 0000 333 ld (VDP_8+1),a334 di335 out ($99),a336 ld a,9+128337 ei338 out ($99),a340341 ld a,(vdp_8)342 or 32 344 ld (vdp_8),a345 di346 out ($99),a347 ld a,8+128348 ei349 out ($99),a351 xor a352 ld (vdp_8+15),a353 di354 out ($99),a355 ld a,23+128356 ei357 out ($99),a359 di360 im 1361 ld bc,initMem.length362 ld de,initMem363 ld hl,memInit364 ldir365 call initMem367 xor a 368 ld (memblocks.1),a369 ld ($6000),a370 inc a371 ld (memblocks.2),a372 ld ($7000),a374375 ld hl,tempisr376 ld de,$38377 ld bc,6378 ldir380381 ld a,(vdp_0+1)382 or 2 383 ld (vdp_0+1),a384 di385 out ($99),a386 ld a,1+128387 ei388 out ($99),a389391 ld hl,engine392 ld de,engaddr393 ld bc,enlength 394 ldir396 ld hl,enginepage3 397 ld de,enginepage3addr 398 ld bc,enginepage3length 399 ldir401if MusicOn?402 call VGMRePlay403endif405 jp InitiateGame407 408tempisr: 409 push af410 in a,($99) 411 pop af412 ei 413 ret415418enginepage3:419 enginepage3.asm1phase $c0003StartAtTitleScreen?: equ 14StartOfTurnMessageOn?: equ 15MusicOn?: equ 06Music50PercentSpeed?: equ 08Promo?: equ 09CollectionOptionAvailable?: equ 010UnlimitedBuildsPerTurn?: equ 011DisplayNumbers1to6?: equ 013ShowNewlyBoughtBuildingFadingIn?: db 114DiskMenuClicked?: db 015BackToMainMenu?: db 017StopSong: equ 25518TitleSong: equ 119CastleSong: equ 121BattleSong: equ 622WorldSong: equ 227InitiateGame:28 ld hl,CHMOUS29 call ExecuteLoaderRoutine 3135 ld a,336 ld (DisplayStartOfTurnMessage?),a37 ld a,138 ld (whichplayernowplaying?),a 39 xor a40 ld (CampaignFinished?),a4243 ld hl,pl1hero1y44 ld (plxcurrentheroAddress),hl45 ld (CurrentCursorSpriteCharacter),hl46 call SpriteInitialize 48 ld a,249 ld (PlayerThatGetsAttacked),a50 ld hl,pl2hero1y5152 ld (HeroThatGetsAttacked),hl 53 ld a,15457 call LoadSamplesAndPlaySong05861 call LoadAmountOfCampaignsFinished63 if StartAtTitleScreen?64 call TitleScreen65 endif66 StartGame:6770 call LoadWorldMapAndObjectLayerMap 7274 ld hl,FindAndSetCastles 75 call ExecuteLoaderRoutine76 ld hl,PlaceHeroesInCastles 77 call ExecuteLoaderRoutine78 ld hl,ConvertMonstersObjectLayer 79 call ExecuteLoaderRoutine80 ld hl,ShuffleCastleMageGuildSpells 81 call ExecuteLoaderRoutine82 xor a83 ld (framecounter),a85 ld a,WorldSong86 ld (ChangeSong?),a88 call SetCampaignHeroesCastlesResources90 call LoadSaveData104109114121 .WhenExitingCombat:122 call CenterMousePointer123 call SetScreenOff124 call LoadWorldTiles 125 call SetMapPalette126 call SetBattleScreenBlock127 call LoadAllObjectsInVram 128 call SetScreenOff129 call LoadHud 132136 call SetInterruptHandler 137 call SetAllSpriteCoordinatesInPage2 138 call SetAllHeroPosesInVram 139 call InitiatePlayerTurn 140 call ClearMapPage0AndMapPage1141 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady142 call DoCopy144146150157160164173174 jp LevelEngine176LoadAmountOfCampaignsFinished:177 di 178 ld a,(slot.page12rom) 179 out ($a8),a181 ld a,SaveDataBlock11-$100182 ld ($6100),a 184 ld a,($4000)185 ld (AmountOfCampaignsFinished),a186 ret188SetCampaignHeroesCastlesResources:189 ld a,(CampaignMode?)190 or a191 ret z193 ld a,(slot.page12rom) 194 out ($a8),a 195 ld a,CampaignInfoblock196 call block12 197 ld a,TitleScreenCodeblock 198 call block34 199 jp DoSetCampaignHeroesCastlesResources202LoadSaveData?: db 0203LoadSaveData:204 ld a,(LoadSaveData?)205 or a206 ret z207 xor a208 ld (LoadSaveData?),a210 ld a,(SaveGameSelected) 211 cp 255212 ret z214 ld a,(slot.page12rom) 215 out ($a8),a217 di 219 ld a,(SaveGameSelected) 220 add a,a221 add a,a 223 ld ($6100),a 225 ld hl,$4000226 ld de,StartSaveGameData227 ld bc,EndSaveGameData-StartSaveGameData228 ldir230 ld a,(SaveGameSelected) 231 add a,a232 add a,a 233 inc a 235 ld ($6100),a 237 ld a,(slot.page1rom) 238 out ($a8),a240 ld hl,$4000241 ld de,$8000242 ld bc,$4000243 ldir247 ei248 ret253SaveGameToFlash:254 di 256 ld a,(slot.page12rom) 257 out ($a8),a259 ld a,(SaveGameSelected) 260 add a,a261 add a,a 262 ld ($7100),a 264267 268 ld a,(SaveGameSelected) 269 add a,a270 add a,a 271 ld ($7100),a 273 274 ld hl,$8000275 call SectorErase 277 call CheckEraseDone279 280 ld hl,StartSaveGameData281 ld de,$8000282 ld bc,EndSaveGameData-StartSaveGameData283 call FlashWrite285 286 ld a,(SaveGameSelected) 287 add a,a288 add a,a 289 inc a 290 ld ($6100),a 292 ld a,(slot.page1rom) 293 out ($a8),a295 ld a,2 296 out ($fe),a 298 call WriteObjectLayerFirstAndSecond4KB299 call WriteObjectLayerFourth4KB301 302 ld a,(SaveGameSelected) 303 add a,a304 add a,a 305 inc a 306 ld ($7100),a 308 ld a,(slot.page2rom) 309 out ($a8),a311 ld a,2 312 out ($fd),a 314 call WriteObjectLayerThird4KB316318 ld a,(slot.page12rom) 319 out ($a8),a321 ld a,ExtraRoutinesCodeBlock 322 call block12 323 ret325CheckEraseDone:326 ld hl,8000H 327 ld a,0FFH 328 Erase_Wait:329 cp (hl) 330 ret z 331 jr Erase_Wait 333SectorErase: 334 ld a,$aa335 ld ($4aaa),a337 ld a,$55338 ld ($4555),a340 ld a,$80341 ld ($4aaa),a343 ld a,$aa344 ld ($4aaa),a346 ld a,$55347 ld ($4555),a349 ld a,$30350 ld (hl),a351 ret353WriteObjectLayerFirstAndSecond4KB: 354 ld hl,$8000 355 ld de,$4000 356 ld bc,$2000 357 jr FlashWrite359WriteObjectLayerThird4KB: 360 ld hl,$6000 361 ld de,$a000 362 ld bc,$1000 364 .loop:365 ld a,$AA 366 ld ($8AAA),a367 ld a,$55368 ld ($8555),a369 ld a,$A0 370 ld ($8AAA),a372 ldi 373 jp pe,.loop374 ret376WriteObjectLayerFourth4KB: 377 ld hl,$b000 378 ld de,$7000 379 ld bc,$1000 380 jr FlashWrite382FlashWrite: 383 ld a,$AA 384 ld ($4AAA),a385 ld a,$55386 ld ($4555),a387 ld a,$A0 388 ld ($4AAA),a390 ldi 391 jp pe,FlashWrite392 ret398CurrentSongBeingPlayed: db 0399LoadSamplesAndPlaySong0:400 ld a,(RePlayer_playing)401 and a402 ret nz404 ld a,0405 ld (CurrentSongBeingPlayed),a406 call RePlayer_Stop407 ld bc,0 408 ld a,usas2repBlock 409 ld hl,$8000+1410 call RePlayer_Play 411 call RePlayer_Tick 412 ret414SoundData: equ $8000415VGMRePlay:416 ld a,(slot.page12rom) 417 out ($a8),a418 ei419 420 ld a,FormatOPL4_ID421 call RePlayer_Detect 422 call RePlayerSFX_Initialize423 ld a,MusicOn? 424 and A425 ret z426 ld bc,0 427 ld a,usas2repBlock 428 ld hl,$8000+1429 call RePlayer_Play 430 call RePlayer_Tick431 call RePlayer_Stop432 ret434Main_Loop:435 halt436 call RePlayer_Tick437 jp Main_Loop 439RePlayer.asm14 MoonSound.asm16MoonSound_FM_BASE: equ 0C4H7MoonSound_STATUS: equ MoonSound_FM_BASE8MoonSound_FM1_ADDRESS: equ MoonSound_FM_BASE9MoonSound_FM1_DATA: equ MoonSound_FM_BASE + 110MoonSound_FM2_ADDRESS: equ MoonSound_FM_BASE + 211MoonSound_FM2_DATA: equ MoonSound_FM_BASE + 312MoonSound_WAVE_BASE: equ 07EH13MoonSound_WAVE_ADDRESS: equ MoonSound_WAVE_BASE14MoonSound_WAVE_DATA: equ MoonSound_WAVE_BASE + 11617MoonSound_Detect:18 call MoonSound_ReadStatusRegister 19 call MoonSound_ReadStatusRegister20 and a21 ret nz22 ld de,0503H23 call MoonSound_WriteFM2Register 24 ld a,02H25 call MoonSound_ReadWaveRegister 26 and 11100000B27 xor 00100000B28 ret nz29 ld de,0210H30 call MoonSound_WriteWaveRegister 31 scf32 ret34MoonSound_JumpTable:35 jp MoonSound_Process36 jp MoonSound_Mute37 jp MoonSound_Restore3942MoonSound_Process:43MoonSound_Process_Loop:44 ld a,(hl)45 inc hl46 add a,a47 jr nc,MoonSound_Process_FM48 jp p,MoonSound_WriteWave4950 cp ($c1 << 1) and ($ff)51 jp c,MoonSound_Call52 jp z,MoonSound_Return5354 cp ($c3 << 1) and ($ff)55 jp c,MoonSound_Jump56 jp z,MoonSound_WaitLoad5758 sub ($c4 << 1) and ($ff)59 jr z,MoonSound_WriteMemory60 rrca61 ret62MoonSound_Process_FM:63 jp p,MoonSound_WriteFM164 jp MoonSound_WriteFM26668MoonSound_WriteFM1:69 xor 80H - 270 ld c,MoonSound_FM1_DATA71 jp MoonSound_WriteBlock7375MoonSound_WriteFM2:76 xor 100H - 277 ld c,MoonSound_FM2_DATA78 jp MoonSound_WriteBlock8082MoonSound_WriteWave:83 xor 80H - 284 ld c,MoonSound_WAVE_DATA85 jp MoonSound_WriteBlock8788MoonSound_WaitLoad:89 in a,(MoonSound_STATUS)90 and 00000010B91 jr nz,MoonSound_WaitLoad92 jp MoonSound_Process_Loop9495MoonSound_WriteMemory:96 ld c,(hl)97 inc hl98 ld b,(hl)99 inc hl100 call MoonSound_WriteWaveMemory101 jp MoonSound_Process_Loop103106MoonSound_WriteBlock:107 ld e,a108 ld d,0109 ld iy,MoonSound_WriteBlock_Unrolled110 add iy,de111 sla e112 add iy,de113 jp (iy)114MoonSound_WriteBlock_Unrolled:115116 dec c | outi | inc c | outi117 dec c | outi | inc c | outi118 dec c | outi | inc c | outi119 dec c | outi | inc c | outi120 dec c | outi | inc c | outi121 dec c | outi | inc c | outi122 dec c | outi | inc c | outi123 dec c | outi | inc c | outi124 dec c | outi | inc c | outi125 dec c | outi | inc c | outi126 dec c | outi | inc c | outi127 dec c | outi | inc c | outi128 dec c | outi | inc c | outi129 dec c | outi | inc c | outi130 dec c | outi | inc c | outi131 dec c | outi | inc c | outi133 dec c | outi | inc c | outi134 dec c | outi | inc c | outi135 dec c | outi | inc c | outi136 dec c | outi | inc c | outi137 dec c | outi | inc c | outi138 dec c | outi | inc c | outi139 dec c | outi | inc c | outi140 dec c | outi | inc c | outi141 dec c | outi | inc c | outi142 dec c | outi | inc c | outi143 dec c | outi | inc c | outi144 dec c | outi | inc c | outi145 dec c | outi | inc c | outi146 dec c | outi | inc c | outi147 dec c | outi | inc c | outi148 dec c | outi | inc c | outi150 dec c | outi | inc c | outi151 dec c | outi | inc c | outi152 dec c | outi | inc c | outi153 dec c | outi | inc c | outi154 dec c | outi | inc c | outi155 dec c | outi | inc c | outi156 dec c | outi | inc c | outi157 dec c | outi | inc c | outi158 dec c | outi | inc c | outi159 dec c | outi | inc c | outi160 dec c | outi | inc c | outi161 dec c | outi | inc c | outi162 dec c | outi | inc c | outi163 dec c | outi | inc c | outi164 dec c | outi | inc c | outi165 dec c | outi | inc c | outi167 dec c | outi | inc c | outi168 dec c | outi | inc c | outi169 dec c | outi | inc c | outi170 dec c | outi | inc c | outi171 dec c | outi | inc c | outi172 dec c | outi | inc c | outi173 dec c | outi | inc c | outi174 dec c | outi | inc c | outi175 dec c | outi | inc c | outi176 dec c | outi | inc c | outi177 dec c | outi | inc c | outi178 dec c | outi | inc c | outi179 dec c | outi | inc c | outi180 dec c | outi | inc c | outi181 dec c | outi | inc c | outi182 dec c | outi | inc c | outi183184 jp MoonSound_Process_Loop186187MoonSound_Jump:188189 ld e,(hl)190 inc hl191 ld d,(hl)192 inc hl193 ld a,(RePlayer_currentBank)194 add a,(hl)195 inc hl196 add hl,de197 ld (RePlayer_currentBank),a198199 ld (7000H),a200 jp MoonSound_Process_Loop202204MoonSound_Call:205206 ld e,(hl)207 inc hl208 ld d,(hl)209 inc hl210 ld b,(hl)211 inc hl212 ld a,(RePlayer_currentBank)213214 ld (ix + 0),l215 ld (ix + 1),h216 ld (ix + 2),a217 inc ix218 inc ix219 inc ix220 add hl,de221 add a,b222 ld (RePlayer_currentBank),a223224 ld (7000H),a225 jp MoonSound_Process_Loop227229MoonSound_Return:230232 dec ix233 dec ix234 dec ix235 ld l,(ix + 0)236 ld h,(ix + 1)237 ld a,(ix + 2)238 ld (RePlayer_currentBank),a239240 ld (7000H),a241 jp MoonSound_Process_Loop243MoonSound_Mute:244 ld a,0BDH245 call MoonSound_ReadFM1Register246 and 11100000B247 ld e,a248 ld d,0BDH249 call MoonSound_WriteFM1Register250 ld b,9251MoonSound_MuteFM1_Loop:252 ld a,0B9H253 sub b254 ld d,a255 call MoonSound_ReadFM1Register256 and 11011111B257 ld e,a258 call MoonSound_WriteFM1Register259 djnz MoonSound_MuteFM1_Loop260 ld b,9261MoonSound_MuteFM2_Loop:262 ld a,0B9H263 sub b264 ld d,a265 call MoonSound_ReadFM2Register266 and 11011111B267 ld e,a268 call MoonSound_WriteFM2Register269 djnz MoonSound_MuteFM2_Loop270 ld b,24271MoonSound_MuteWave_Loop:272 ld a,80H273 sub b274 ld d,a275 call MoonSound_ReadWaveRegister276 and 00111111B277 or 01000000B278 ld e,a279 call MoonSound_WriteWaveRegister280 djnz MoonSound_MuteWave_Loop281 ret283MoonSound_Restore:284 ret286288MoonSound_WriteFM1Register:289 ld a,d290 out (MoonSound_FM1_ADDRESS),a291 nop 292 ld a,e293 out (MoonSound_FM1_DATA),a294 ret296298MoonSound_ReadFM1Register:299 out (MoonSound_FM1_ADDRESS),a300 nop 301 nop302 in a,(MoonSound_FM1_DATA)303 ret305307MoonSound_WriteFM2Register:308 ld a,d309 out (MoonSound_FM2_ADDRESS),a310 nop 311 ld a,e312 out (MoonSound_FM2_DATA),a313 ret315317MoonSound_ReadFM2Register:318 out (MoonSound_FM2_ADDRESS),a319 nop 320 nop321 in a,(MoonSound_FM2_DATA)322 ret324326MoonSound_WriteWaveRegister:327 ld a,d328 out (MoonSound_WAVE_ADDRESS),a329 cp (ix) 330 ld a,e331 out (MoonSound_WAVE_DATA),a332 ret334336MoonSound_ReadWaveRegister:337 out (MoonSound_WAVE_ADDRESS),a338 cp (ix) 339 nop340 in a,(MoonSound_WAVE_DATA)341 ret343344MoonSound_ReadStatusRegister:345 in a,(MoonSound_STATUS)346 ret348350MoonSound_WriteWaveMemory:351 ld a,06H352 out (MoonSound_WAVE_ADDRESS),a353 dec bc354 inc b355 inc c356 ld a,b357 ld b,c358 ld c,MoonSound_WAVE_DATA359MoonSound_WriteMemory_Loop:360 otir361 dec a362 jr nz,MoonSound_WriteMemory_Loop363 ret364RePlayer.asm5 RePlayerSFX.asm14RePlayerSFX_CHANNEL_COUNT: equ 26RePlayerSFX_Initialize:7 ld de,48 ld ix,RePlayerSFX_channels9 ld b,RePlayerSFX_CHANNEL_COUNT10RePlayerSFX_Initialize_Loop:11 ld (ix + 0),SFX_nop and 0FFH12 ld (ix + 1),SFX_nop >> 813 ld (ix + 2),usas2sfx1repBlock14 ld (ix + 3),115 add ix,de16 djnz RePlayerSFX_Initialize_Loop17 ret1923RePlayerSFX_PlayCh1: 24 ld iy,RePlayerSFX_channels25 di26 ld (iy + 0),c27 ld (iy + 1),b28 ld (iy + 2),usas2sfx1repBlock29 ei30 ld (iy + 3),131 ret3337RePlayerSFX_PlayCh2:38 ld iy,RePlayerSFX_channels + 439 di40 ld (iy + 0),c41 ld (iy + 1),b42 ld (iy + 2),usas2sfx2repBlock43 ei44 ld (iy + 3),145 ret47RePlayerSFX_Tick:48 ld a,(RePlayer_currentBank)49 push af50 ld ix,RePlayerSFX_channels51 ld b,RePlayerSFX_CHANNEL_COUNT52RePlayerSFX_Tick_Loop:53 dec (ix + 3)54 jr nz,RePlayerSFX_Tick_Next55 push bc56 ld l,(ix + 0)57 ld h,(ix + 1)58 ld a,(ix + 2)59 ld (RePlayer_currentBank),a6061 ld (7000H),a62 call RePlayer_Process63 ld (ix + 3),a64 ld a,(RePlayer_currentBank)65 ld (ix + 0),l66 ld (ix + 1),h67 ld (ix + 2),a68 pop bc69RePlayerSFX_Tick_Next:70 inc ix71 inc ix72 inc ix73 inc ix74 djnz RePlayerSFX_Tick_Loop75 pop af76 ld (RePlayer_currentBank),a7778 ld (7000H),a79 ret81RePlayerSFX_channels:82 ds RePlayerSFX_CHANNEL_COUNT * 48485SFX_nop: equ 8001H + 4 * 086SFX_click: equ 8001H + 4 * 187SFX_ShowEnemyStats: equ 8001H + 4 * 188SFX_ShowEnemyHeroStats: equ 8001H + 4 * 189SFX_ButtonHoverOver: equ 8001H + 4 * 190SFX_HeroWalking: equ 8001H + 4 * 191SFX_jump: equ 8001H + 4 * 292SFX_land: equ 8001H + 4 * 393SFX_coin: equ 8001H + 4 * 494SFX_TradeMenu: equ 8001H + 4 * 495SFX_ResourcePickedUp: equ 8001H + 4 * 496SFX_WaterWell: equ 8001H + 4 * 497SFX_GuardTowerEncountered: equ 8001H + 4 * 498SFX_GuardTowerReward: equ 8001H + 4 * 499SFX_ScrollFound: equ 8001H + 4 * 4100SFX_ChestFound: equ 8001H + 4 * 4101SFX_StartOfTurn: equ 8001H + 4 * 4102SFX_HeroLevelUp: equ 8001H + 4 * 4103SFX_LearningStone: equ 8001H + 4 * 4104SFX_SpireOfWisdom: equ 8001H + 4 * 4105SFX_ButtonClicked: equ 8001H + 4 * 4106SFX_meditate: equ 8001H + 4 * 4107SFX_dash: equ 8001H + 4 * 5108SFX_punch: equ 8001H + 4 * 6109SFX_bouncingback: equ 8001H + 4 * 7110SFX_beinghit: equ 8001H + 4 * 8111SFX_test9: equ 8001H + 4 * 9112SFX_shoot1: equ 8001H + 4 * 10113SFX_HeroOverviewMenu: equ 8001H + 4 * 10114SFX_shoot2: equ 8001H + 4 * 11115SFX_shoot3: equ 8001H + 4 * 12116SFX_enemyexplosionsmall: equ 8001H + 4 * 12117SFX_shoot4: equ 8001H + 4 * 13118SFX_enemyexplosionbig: equ 8001H + 4 * 13119SFX_bossdemonshoot: equ 8001H + 4 * 13120SFX_arrow: equ 8001H + 4 * 14121SFX_MonsterDied: equ 8001H + 4 * 14122SFX_roll: equ 8001H + 4 * 15123SFX_test16: equ 8001H + 4 * 16124SFX_bossdemoncleaveattack: equ 8001H + 4 * 16125SFX_test17: equ 8001H + 4 * 17126SFX_test18: equ 8001H + 4 * 18127SFX_enemyhit: equ 8001H + 4 * 18128RePlayer.asm7RePlayer_STACK_CAPACITY: equ 1288FormatOPL4_ID: equ 11012RePlayer_Detect:13 call RePlayer_Detect_Format14 jp c,RePlayer_SetJumpTable15 jp RePlayer_ClearJumpTable1719RePlayer_Detect_Format:2022 cp FormatOPL4_ID23 jp z,FormatOPL4_Detect2426 and a27 ret29FormatOPL4_Detect:30 call MoonSound_Detect31 ld hl,MoonSound_JumpTable32 ret3436RePlayer_SetJumpTable:37 ld de,RePlayer_Process38 ld bc,3 * 339 ldir40 ret4243RePlayer_ClearJumpTable:44 ld hl,RePlayer_Process45 ld de,RePlayer_Process + 146 ld bc,3 * 3 - 147 ld (hl),0C9H 48 ldir49 ret5153RePlayer_Play:54 add hl,bc55 add hl,bc56 add hl,bc57 add hl,bc58 ld b,a59 xor a60 ld (RePlayer_playing),a61 ld a,b62 ld ix,RePlayer_stack6364 ld (ix + 0),l65 ld (ix + 1),h66 ld (ix + 2),a67 inc ix68 inc ix69 inc ix70 ld a,171 ld (ix),a72 ld (RePlayer_stackPointer),ix73 ld (RePlayer_playing),a74 ret76RePlayer_Stop:77 xor a78 ld (RePlayer_playing),a79 call RePlayer_Mute80 ret82RePlayer_Resume:83 call RePlayer_Restore84 ld a,185 ld (RePlayer_playing),a86 ret8894RePlayer_Tick:95 ld a,(slot.page12rom) 96 out ($a8),a98 call RePlayerSFX_Tick100 ld a,(ChangeSong?)101 or a102 jr nz,.ChangeSong103 .DontChangeSong:105 ld a,(RePlayer_playing)106 and a107 ret z108 ld ix,(RePlayer_stackPointer)109 dec (ix)110 ret nz111 ld a,(RePlayer_currentBank)112 push af113114 dec ix115 dec ix116 dec ix117 ld l,(ix + 0)118 ld h,(ix + 1)119 ld a,(ix + 2)120 ld (RePlayer_currentBank),a121122 ld (7000H),a123 call RePlayer_Process124 ld b,a125 ld a,(RePlayer_currentBank)126127 ld (ix + 0),l128 ld (ix + 1),h129 ld (ix + 2),a130 inc ix131 inc ix132 inc ix133 ld (ix),b134 ld (RePlayer_stackPointer),ix135 pop af136 ld (RePlayer_currentBank),a137138 ld (7000H),a139 ret141 .ChangeSong:142 ld hl,CurrentSongBeingPlayed143 cp (hl)144 jr z,.DontChangeSong146 or a147 jp m,.StopSong149 150 cp WorldSong151 jr nz,.EndCheckRandomizeWorldSong152 ld a,r153 and 3154 add a,2156 cp BattleSong157 jr z,.battlesoundfoundbutnotinbattle159 cp 7160 jr c,.EndCheckRandomizeWorldSong161 .battlesoundfoundbutnotinbattle:162 ld a,1163 .EndCheckRandomizeWorldSong:164 166 ld (CurrentSongBeingPlayed),a167 ld c,a168 ld b,0169 push bc170 call RePlayer_Stop171 pop bc 173 ld a,usas2repBlock 174 ld hl,$8000+1175 call RePlayer_Play 177 xor a178 ld (ChangeSong?),a179 ret181 .StopSong:182 call RePlayer_Stop183 xor a184 ld (ChangeSong?),a185 ret186 189203220228240252RePlayer_playing:253 db 0254RePlayer_stackPointer:255 dw RePlayer_stack256RePlayer_stack:257 ds RePlayer_STACK_CAPACITY * 3 + 1258RePlayer_Process:259 db 0C9H, 0, 0260RePlayer_Mute:261 db 0C9H, 0, 0262RePlayer_Restore:263 db 0C9H, 0, 0264enginepage3.asm442ShortestPathTileHandlerQueue:443 ds 2*169,0445 ds 12,255 446ShortestPathBuffer: 447 ds 11 * 12,255449 ds 12,255 451CheckNormalRouteShortestPath:452453 di454456 ld a,(ix+HeroY) 457 ld (movementpath+0),a 458 ld a,(ix+HeroX) 459 ld (movementpath+1),a 460 xor a461 ld (movementpath+2),a 462 ld (movementpath+3),a 464 ld a,(ix+HeroY) 465 cp 6466 jp c,CheckReverseRoute467468 cp 128-6469 jp nc,CheckReverseRoute470 ld a,(ix+HeroX) 471 cp 6472 jp c,CheckReverseRoute473474 cp 128-6475 jp nc,CheckReverseRoute477 478 ld a,(mouseclickx) 479 sub a,(ix+HeroX) 480 jp p,.EndCheckNegativeX481 neg482 .EndCheckNegativeX:483 cp 6484 jp nc,CheckReverseRoute486 ld a,(mouseclicky) 487 sub a,(ix+HeroY) 488 jp p,.EndCheckNegativeY489 neg490 .EndCheckNegativeY:491 cp 6492 jp nc,CheckReverseRoute494 495 call setspritecharacter.SetMappositionMousePointsTo496 ld a,(hl)498 cp 16499 jr c,.noobstacle500 cp 24501 jp c,CheckReverseRoute 502 cp UnwalkableTerrainPieces 503 jp nc,CheckReverseRoute 504 .noobstacle:506 508 ld a,(ix+HeroY) 509 sub a,5-1 510 ld h,0511 ld l,a512 ld de,(maplenght)513 call MultiplyHlWithDE 514 ld de,mapdata515 add hl,de516 518 ld a,(ix+HeroX) 519 sub a,5520 ld e,a521 ld d,0522 add hl,de523 526 527 ld a,11 528 ld de,ShortestPathBuffer529 .CopyColumn:530 ld b,11 531 .CopyRow:532 ex af,af'533 ld a,(hl)535 cp 16536 jr c,.noobstacle2537 cp 24538 jr c,.obstacle2 539 cp UnwalkableTerrainPieces 540 jr c,.noobstacle2 541 542 .obstacle2:543 ld a,200544 jp .ForeGroundFound 545 546 .noobstacle2:547 xor a549552 .ForeGroundFound:553 ld (de),a554 ex af,af'555 inc hl556 inc de557 djnz .CopyRow558 ld bc,128-11 559 add hl,bc560 inc de 561 dec a562 jp nz,.CopyColumn563 564 569 ld hl,ShortestPathBuffer+5+(5*12) 570 ld (hl),64 571 ld (ShortestPathTileHandlerQueue),hl 572 ld a,1 573 ld (.SelfModifyingCodeDistanceNumber),a574 ld b,1 575 ld c,0 577 ld ix,ShortestPathTileHandlerQueue 578 ld iy,ShortestPathTileHandlerQueue 580 .HandleTileLoop:581 call .HandleTile582 inc ix583 inc ix584 ld l,(ix)585 ld h,(ix+1) 586 djnz .HandleTileLoop588 ld a,(.SelfModifyingCodeDistanceNumber)589 inc a 590 ld (.SelfModifyingCodeDistanceNumber),a591 ld a,c592 or a593 ld b,a594 ld c,0595 jp nz,.HandleTileLoop597 .End:598 xor a599 ld (ShortestPathBuffer+5+(5*12)),a 600 601 ld ix,(plxcurrentheroAddress)603 604 ld a,(mouseclickx) 605 ld h,0606 ld l,a607 ld a,(ix+HeroX) 608 sub a,5609 ld d,0610 ld e,a611 or a612 sbc hl,de 613 push hl615 ld a,(mouseclicky) 616 ld h,0617 ld l,a618 ld a,(ix+HeroY) 619 sub a,5620 ld d,0621 ld e,a622 or a623 sbc hl,de 624 ld de,12 625 call MultiplyHlWithDE 626 pop de627 add hl,de628 ld de,ShortestPathBuffer629 add hl,de 630 ld a,(hl) 631 or a632635 jp z,CheckReverseRoute636 jp m,CheckReverseRoute640 add a,a 641 ld d,0642 ld e,a643 ld ix,movementpath644 add ix,de645 646 ld (ix+2),0 647 ld (ix+3),0 649 .NextStepLoop:650 ex af,af'651 call .FindDirectionForThisStep652 ex af,af'653 ld (ix),b 654 ld (ix+1),c 655 dec ix656 dec ix 657 sub a,2658 jp nz,.NextStepLoop659 ret661 .FindDirectionForThisStep:662 ld a,(hl) 663 dec a 665 ld b,+0 666 ld c,+1 667 dec hl 668 cp (hl) 669 ret z671672 ld c,-1 673 inc hl674 inc hl 675 cp (hl) 676 ret z678679 dec b680 ld c,+0 681 ld de,11682 add hl,de 683 cp (hl) 684 ret z686 ld b,+1 688 ld de,-24689 add hl,de 690 cp (hl) 691 ret z693695 inc c696 dec hl 697 cp (hl) 698 ret z700701 ld c,-1 702 inc hl703 inc hl 704 cp (hl) 705 ret z707 ld b,-1 709 ld de,24710 add hl,de 711 cp (hl) 712 ret z714715 ld c,+1 716 dec hl717 dec hl 720 ret722 .HandleTile:723 724 ld de,-13725 add hl,de 726 ld a,(hl)727 or a728 call z,.MarkTileAndPutInQueue729 730 inc hl 731 ld a,(hl)732 or a733 call z,.MarkTileAndPutInQueue735 inc hl 736 ld a,(hl)737 or a738 call z,.MarkTileAndPutInQueue740 ld de,10741 add hl,de 742 ld a,(hl)743 or a744 call z,.MarkTileAndPutInQueue746 inc hl 747 inc hl 748 ld a,(hl)749 or a750 call z,.MarkTileAndPutInQueue752 add hl,de 753 ld a,(hl)754 or a755 call z,.MarkTileAndPutInQueue757 inc hl 758 ld a,(hl)759 or a760 call z,.MarkTileAndPutInQueue762 inc hl 763 ld a,(hl)764 or a765 ret nz767 .MarkTileAndPutInQueue:768 inc iy769 inc iy 770 ld (iy),l771 ld (iy+1),h 772 .SelfModifyingCodeDistanceNumber: equ $+1773 ld (hl),255774 inc c 775 ret782TitleScreen:783 ld a,(slot.page12rom) 784 out ($a8),a 785 ld a,TitleScreenCodeblock 786 call block34 787 jp HandleTitleScreenCode789ExecuteLoaderRoutine:790 ld a,(slot.page1rom) 791 out ($a8),a 792 ld a,Loaderblock 793 call block12 794 jp (hl)796CenterMousePointer:797 ld a,106798 ld (spat+0),a799 ld (spat+4),a800 ld (spat+8),a801 ld a,104802 ld (spat+1),a803 ld (spat+5),a804 ld (spat+9),a805 ret807CopyRamToVram: 808 ld (AddressToWriteFrom),bc809 ld (NXAndNY),de811 ld a,(activepage) 812 or a813 jp nz,CopyRamToVramCorrectedCastleOverview.SetAddress2814 ld de,$8000815 add hl,de 816 jp CopyRamToVramCorrectedCastleOverview.SetAddress2818CopyRamToVramCorrectedWithoutActivePageSetting:819 ex af,af' 821 in a,($a8) 822 push af823 ld a,(memblocks.1)824 push af825 ld a,(memblocks.2)826 push af828 ld a,(slot.page12rom) 829 out ($a8),a 830 ex af,af'831 call block1234 833 ld (AddressToWriteFrom),hl834 ld (NXAndNY),bc835 ld (AddressToWriteTo),de836 call CopyRamToVramCorrectedCastleOverview.AddressesSet838 pop af839 call block34840 pop af841 call block12842 pop af843 out ($a8),a 844 ret846AreWeWritingToVram?: db 0847CopyRamToVramCorrectedCastleOverview:848 ex af,af' 850 in a,($a8) 851 push af852 ld a,(memblocks.1)853 push af854 ld a,(memblocks.2)855 push af857 ld a,(slot.page12rom) 858 out ($a8),a 859 ex af,af'860 call block1234 862 call .go 864 pop af865 call block34866 pop af867 call block12868 pop af869 out ($a8),a 870 ret872 .go:873 ld (AddressToWriteFrom),hl874 ld (NXAndNY),bc876 ld a,(activepage) 877 or a878 ld hl,$0000879 jr nz,.SetAddress 880 ld hl,$8000881 .SetAddress:882 add hl,de883 .SetAddress2:884 ld (AddressToWriteTo),hl885 .AddressesSet:886 ld c,$98 887 ld de,128 889 .loop:890 call .WriteOneLine891 ld a,(NXAndNY+1)892 dec a893 ld (NXAndNY+1),a894 jp nz,.loop895 ret897 .WriteOneLine:898 ld hl,(AddressToWriteTo) 899 add hl,de 900 ld (AddressToWriteTo),hl902 ld a,1903 ld (AreWeWritingToVram?),a905 xor a 908 call SetVdp_Write 910 ld hl,(AddressToWriteFrom) 911 add hl,de 912 ld (AddressToWriteFrom),hl913 ld a,(NXAndNY)914917 ld b,a918 otir920 xor a921 ld (AreWeWritingToVram?),a923 ret925930CopyRamToVramPage3ForBattleEngine:931933 in a,($a8) 934 push af935 ld a,(memblocks.1)936 push af937 ld a,(memblocks.2)938 push af939 ld a,(slot.page12rom) 940 out ($a8),a 942 ld a,(BlockToReadFrom)944 call block1234 946 call .go 948 pop af949 call block34950 pop af951 call block12952 pop af953 out ($a8),a 954 ret956 .go:957 ld c,$98 958 ld de,128 960 .loop:961 call .WriteOneLine962 ld a,(NXAndNY+1)963 dec a964 ld (NXAndNY+1),a965 jp nz,.loop966 ret968 .WriteOneLine:969 ld a,1970 ld hl,(AddressToWriteTo) 971 add hl,de 972 ld (AddressToWriteTo),hl973 di974 call SetVdp_WriteWithoutDisablingOrEnablingInt 976 ld hl,(AddressToWriteFrom) 977 add hl,de 978 ld (AddressToWriteFrom),hl979 ld a,(NXAndNY)980 ld b,a981 otir982 ei983 ret986993998100010021004BattleTextPointer: dw 2551005BattleRound: db 2551006SetBattleText?: db 255 1007BattleText8: db 255 | dw 255 | db 255 ,"           ",255 1008BattleText7: db 255 | dw 255 | db 255 ,"           ",255 1009BattleText6: db 255 | dw 255 | db 255 ,"           ",255 1010BattleText5: db 255 | dw 255 | db 255 ,"           ",255 1011BattleText4: db 255 | dw 255 | db 255 ,"           ",255 1012BattleText3: db 255 | dw 255 | db 255 ,"           ",255 1013BattleText2: db 255 | dw 255 | db 255 ,"           ",255 1014BattleText1: db 255 | dw 255 | db 255 ,"           ",255 1015BattleTextQ: db 255 | dw 255 | db 255 ,"           ",255 1018RemoveDeadMonstersNeutralMonster?: ds 11019AddressOfMonsterAmountHerocollidedWithOnMap: ds 21021FightGuardTowerMonster?: ds 11022GuardTowerMonsterLevel: ds 11023MonsterHerocollidedWithOnMap: ds 11024XAddressOfMonsterHerocollidedWithOnMap: ds 11025MonsterHerocollidedWithOnMapAmount: ds 11027MonsterMovementPathPointer: db 01028MonsterMovementAmountOfSteps: db 01029MonsterMovementPath: ds LenghtMonsterMovementPathTable1030LenghtMonsterMovementPathTable: equ 501032ShowExplosionSprite?: db 01033ExplosionSpriteStep: ds 11035LeftOrRightPlayerLostEntireArmy?: ds 110361038MonsterThatIsRetaliating: ds 21039MonsterThatIsBeingAttacked: ds 21040MonsterThatIsBeingAttackedX: ds 11041MonsterThatIsBeingAttackedNX: ds 11042MonsterThatIsBeingAttackedY: ds 11043MonsterThatIsBeingAttackedNY: ds 11045AEOSpellDamage: ds 21046MonsterThatWasDamagedPreviousCheck: ds 21047CursorXWhereSpellWasCast: ds 11048CursorYWhereSpellWasCast: ds 11050SpellAnimationStep: ds 11051SpellAnimationSpeed: ds 21052SpellAnimationGfxBlock: ds 11054ActiveMonsterAttackingDirection: ds 11055IsCursorOnATile?: db 11056WasCursorOnATilePreviousFrame?: db 11057IsCursorOnATileThisFrame?: db 11058Wait1FrameBeforeWePutGridTile?: db 01059SpellExplanationDisplayed?: db 01060SpellSelected?: db 0 1061CastSpell?: db 0 1062SpellBookButtonPressed?: db 01063SelectedElementInSpellBook: db 0 1064LeftPlayerAlreadyCastSpellThisRound?: ds 11065RightPlayerAlreadyCastSpellThisRound?: ds 11066WaitButtonPressed?: db 01067AutoCombatButtonPressed?: db 01068DefendButtonPressed?: db 01069RetreatButtonPressed?: db 01070SurrenderButtonPressed?: db 01071ShootProjectile?: db 01072IsThereAnyEnemyRightNextToActiveMonster?: db 01073MayRangedAttackBeRetaliated?: ds 11074SetMonsterInBattleFieldGrid?: db 11075LenghtBattleField: equ 281076HeightBattleField: equ 091077MovementLenghtMonsters: equ 81078RepairAmountAboveMonster?: db 11079AmountMonsterBeforeBeingAttacked: ds 21081BufferCursorSpriteChar: ds 21082BufferCursorSpriteCol: ds 21084ListOfMonstersToPut:1085 1086ListOfMonstersToPutMonster1: db 001 | dw 100 | db 012 + (01*08), 056 + (00*16) + 161087ListOfMonstersToPutMonster2: db 002 | dw 500 | db 012 + (00*08), 056 + (01*16) + 161088ListOfMonstersToPutMonster3: db 003 | dw 600 | db 012 + (00*08), 056 + (03*16) + 161089ListOfMonstersToPutMonster4: db 004 | dw 700 | db 012 + (01*08), 056 + (04*16) + 161090ListOfMonstersToPutMonster5: db 005 | dw 800 | db 012 + (01*08), 056 + (06*16) + 161091ListOfMonstersToPutMonster6: db 006 | dw 900 | db 012 + (00*08), 056 + (07*16) + 161093ListOfMonstersToPutMonster7: db 001 | dw 001 | db 012 + (27*08), 056 + (00*16) + 161094ListOfMonstersToPutMonster8: db 000 | dw 000 | db 012 + (26*08), 056 + (01*16) + 161095ListOfMonstersToPutMonster9: db 007 | dw 610 | db 012 + (26*08), 056 + (03*16) + 161096ListOfMonstersToPutMonster10: db 007 | dw 001 | db 012 + (27*08), 056 + (04*16) + 161097ListOfMonstersToPutMonster11: db 007 | dw 810 | db 012 + (25*08), 056 + (06*16) + 161098ListOfMonstersToPutMonster12: db 007 | dw 910 | db 012 + (26*08), 056 + (07*16) + 161100 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 2551101BattleFieldGrid: 1102 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001103 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551104 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001105 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551106 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,0001107 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,2551108 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 1109 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,25511101111EndBattleFieldGrid:1112 db 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255, 2551114BlockToReadFrom: ds 11115AddressToWriteTo: ds 21116AddressToWriteFrom: ds 21117NXAndNY: ds 21119RepairARowOf12PixelsFromBottomOfPage2ToPage3:1120 db 0,0,188+16,21121 db 0,0,172+16,31122 db 0,1,12,01123 db 0,0,$d0 1125TransparantImageBattle:1126 db 000,000,000,31127 db 100,000,100,2551128 db 000,000,000,01129 db 0,%0000 0000,$981131TransparantImageBattleRecoverySprite:1132 db 000,000,000,31133 db 100,000,100,2551134 db 000,000,000,01135 db 0,%0000 0000,$981136 1137EraseMonster:1138 db 000,000,000,21139 db 000,000,000,2551140 db 000,000,000,01141 db 0,%0000 0000,$d01143PutMonsterAmountOnBattleField:1144 db 240,000,249,2551145 db 000,000,000,2551146 db 000,000,007,0001147 db 0,%0000 0000,$981149ClearMonsterAmountOnBattleField:1150 db 240,000,249,2551151 db 000,000,000,2551152 db 000,000,007,0001153 db 0,%0000 0000,$d01155SmoothCornerPutMonsterAmount:1156 db 240,000,249,0001157 db 001,000,249,0001158 db 001,000,007,0001159 db 0,%0000 0000,$901161MonstersSortedOnSpeed:1162 dw Monster1 1163 dw Monster2 1164 dw Monster3 1165 dw Monster4 1166 dw Monster5 1167 dw Monster6 1168 dw Monster7 1169 dw Monster8 1170 dw Monster9 1171 dw Monster10 1172 dw Monster11 1173 .LastMonster:1174 dw Monster12 1176OrderOfMonstersFromHighToLow:1177 dw Monster0 1178 dw Monster1 1179 dw Monster2 1180 dw Monster3 1181 dw Monster4 1182 dw Monster5 1183 dw Monster6 1184 dw Monster7 1185 dw Monster8 1186 dw Monster9 1187 dw Monster10 1188 dw Monster11 1189 dw Monster12 1190 dw Monster13 1192BrokenArrow?: ds 1 1194NeutralEnemyDied?: db 01195SwitchToNextMonster?: db 01196MoVeMonster?: db 01197MonsterMovingRight?: db 01198MonsterAttackingRight?: db 01199MonsterAnimationSpeed: db 01200MonsterAnimationStep: db 01201AttackMonster?: db 01202HandleRetaliation?: db 01203MonsterDied?: db 01204MoveMonsterToY: ds 11205MoveMonsterToX: ds 112061207CurrentActiveMonster: db 11208TotalAmountOfMonstersOnBattleField: equ 1 + 12 1210CasualtiesOverviewCopy:1211 db 020,000,212+16,0001212 db 068,000,144,0001213 db 132,000,022,0001214 db 000,000,$d0 1216MonsterY: equ 01217MonsterX: equ MonsterY+11218MonsterYPrevious: equ MonsterX+11219MonsterXPrevious: equ MonsterYPrevious+11220MonsterSYSX: equ MonsterXPrevious+11221MonsterBlock: equ MonsterSYSX+21222MonsterNY: equ MonsterBlock+11223MonsterNX: equ MonsterNY+11224MonsterNumber: equ MonsterNX+11225MonsterNYPrevious: equ MonsterNumber+11226MonsterNXPrevious: equ MonsterNYPrevious+11227MonsterAmount: equ MonsterNXPrevious+11228MonsterHP: equ MonsterAmount+21229MonsterStatus: equ MonsterHP+11230MonsterStatusEffect1: equ MonsterStatus+11231MonsterStatusEffect2: equ MonsterStatusEffect1+11232MonsterStatusEffect3: equ MonsterStatusEffect2+11233MonsterStatusEffect4: equ MonsterStatusEffect3+11234MonsterStatusEffect5: equ MonsterStatusEffect4+11235LenghtMonsterTable: equ Monster1-Monster01237AmountOfStatusEffects: equ 51238MonsterStatusEnabled: equ 01239MonsterStatusWaiting: equ 11240MonsterStatusDefending: equ 21241MonsterStatusTurnEnded: equ 312451246Monster0:1247.y: db 070 + (00*16) - 641248.x: db 0241249.yprevious: db 070 + (00*16) - 641250.xprevious: db 0241251.SYSXinROM: dw $4000 + (017*128) + (000/2) - 1281252.RomBlock: db BattleFieldObjectsBlock1253.ny: db 20 + 11254.nx: db 161255.Number: db 0001256.nyprevious: db 20 + 11257.nxprevious: db 161258.amount: dw 101259.hp: db 101260.status: db 0 1261.statusEffect1: db 0 1262.statusEffect2: db 0 1263.statusEffect3: db 0 1264.statusEffect4: db 0 1265.statusEffect5: db 0 1268Monster1:1269.y: ds 11270.x: ds 11271.yprevious: ds 11272.xprevious: ds 11273.SYSXinROM: ds 21274.RomBlock: ds 11275.ny: ds 11276.nx: ds 11277.Number: ds 11278.nyprevious: ds 11279.nxprevious: ds 11280.amount: ds 21281.hp: ds 11282.status: db 0 1283.statusEffect1: db 0 1284.statusEffect2: db 0 1285.statusEffect3: db 0 1286.statusEffect4: db 0 1287.statusEffect5: db 0 1300Monster2:1301.y: ds 11302.x: ds 11303.yprevious: ds 11304.xprevious: ds 11305.SYSXinROM: ds 21306.RomBlock: ds 11307.ny: ds 11308.nx: ds 11309.Number: ds 11310.nyprevious: ds 11311.nxprevious: ds 11312.amount: ds 21313.hp: ds 11314.status: db 0 1315.statusEffect1: db 0 1316.statusEffect2: db 0 1317.statusEffect3: db 0 1318.statusEffect4: db 0 1319.statusEffect5: db 0 1321Monster3:1322.y: db 056 + (03*16) - 16 - 81323.x: db 012 + (04*08)1324.yprevious: db 056 + (03*16) - 16 - 81325.xprevious: db 012 + (04*08)1326.SYSXinROM: dw 0001327.RomBlock: db 0001328.ny: db 16 + 81329.nx: db 161330.Number: db 003 1331.nyprevious: db 16 + 81332.nxprevious: db 161333.amount: dw 6771334.hp: db 101335.status: db 0 1336.statusEffect1: db 0 1337.statusEffect2: db 0 1338.statusEffect3: db 0 1339.statusEffect4: db 0 1340.statusEffect5: db 0 1342Monster4:1343.y: db 056 + (00*16) - 321344.x: db 012 + (11*08)1345.yprevious: db 056 + (00*16) - 321346.xprevious: db 012 + (11*08)1347.SYSXinROM: dw 0001348.RomBlock: db 0001349.ny: db 321350.nx: db 161351.Number: db 004 1352.nyprevious: db 321353.nxprevious: db 161354.amount: dw 8231355.hp: db 101356.status: db 0 1357.statusEffect1: db 0 1358.statusEffect2: db 0 1359.statusEffect3: db 0 1360.statusEffect4: db 0 1361.statusEffect5: db 0 1363Monster5:1364.y: db 056 + (08*16) - 16 - 41365.x: db 012 + (01*08)1366.yprevious: db 056 + (08*16) - 16 - 41367.xprevious: db 012 + (01*08)1368.SYSXinROM: dw 0001369.RomBlock: db 0001370.ny: db 16 + 41371.nx: db 161372.Number: db 005 1373.nyprevious: db 16 + 41374.nxprevious: db 161375.amount: dw 9991376.hp: db 101377.status: db 0 1378.statusEffect1: db 0 1379.statusEffect2: db 0 1380.statusEffect3: db 0 1381.statusEffect4: db 0 1382.statusEffect5: db 0 1384Monster6:1385.y: db 056 + (01*16) - 64 - 41386.x: db 012 + (20*08)1387.yprevious: db 056 + (01*16) - 64 - 41388.xprevious: db 012 + (20*08)1389.SYSXinROM: dw 0001390.RomBlock: db 0001391.ny: db 64 + 41392.nx: db 641393.Number: db 006 1394.nyprevious: db 64 + 41395.nxprevious: db 641396.amount: dw 471397.hp: db 011398.status: db 0 1399.statusEffect1: db 0 1400.statusEffect2: db 0 1401.statusEffect3: db 0 1402.statusEffect4: db 0 1403.statusEffect5: db 0 14051407Monster7:1408.y: db 056 + (03*16) - 64 - 41409.x: db 012 + (10*08)1410.yprevious: db 056 + (0*16) - 64 - 41411.xprevious: db 012 + (10*08)1412.SYSXinROM: dw 0001413.RomBlock: db 0001414.ny: db 64 + 41415.nx: db 561416.Number: db 002 1417.nyprevious: db 64 + 41418.nxprevious: db 561419.amount: dw 21420.hp: db 101421.status: db 0 1422.statusEffect1: db 0 1423.statusEffect2: db 0 1424.statusEffect3: db 0 1425.statusEffect4: db 0 1426.statusEffect5: db 0 1428Monster8:1429.y: db 056 + (02*16) - 32 1430.x: db 012 + (17*08) 1431.yprevious: db 056 + (02*16) - 32 1432.xprevious: db 012 + (17*08) 1433.SYSXinROM: dw 0001434.RomBlock: db 0001435.ny: db 321436.nx: db 161437.Number: db 007 1438.nyprevious: db 321439.nxprevious: db 161440.amount: dw 9801441.hp: db 101442.status: db 0 1443.statusEffect1: db 0 1444.statusEffect2: db 0 1445.statusEffect3: db 0 1446.statusEffect4: db 0 1447.statusEffect5: db 0 1449Monster9:1450.y: db 056 + (06*16) - 321451.x: db 012 + (27*08)1452.yprevious: db 056 + (06*16) - 321453.xprevious: db 012 + (27*08)1454.SYSXinROM: dw 0001455.RomBlock: db 0001456.ny: db 321457.nx: db 161458.Number: db 004 1459.nyprevious: db 321460.nxprevious: db 161461.amount: dw 5551462.hp: db 101463.status: db 0 1464.statusEffect1: db 0 1465.statusEffect2: db 0 1466.statusEffect3: db 0 1467.statusEffect4: db 0 1468.statusEffect5: db 0 1470Monster10:1471.y: db 056 + (07*16) - 16 - 81472.x: db 012 + (22*08)1473.yprevious: db 056 + (07*16) - 16 - 81474.xprevious: db 012 + (22*08)1475.SYSXinROM: dw 0001476.RomBlock: db 0001477.ny: db 16 + 81478.nx: db 161479.Number: db 003 1480.nyprevious: db 16 + 81481.nxprevious: db 161482.amount: dw 3331483.hp: db 101484.status: db 0 1485.statusEffect1: db 0 1486.statusEffect2: db 0 1487.statusEffect3: db 0 1488.statusEffect4: db 0 1489.statusEffect5: db 0 1491Monster11:1492.y: db 056 + (08*16) - 16 - 41493.x: db 012 + (21*08)1494.yprevious: db 056 + (08*16) - 16 - 41495.xprevious: db 012 + (21*08)1496.SYSXinROM: dw 0001497.RomBlock: db 0001498.ny: db 16 + 41499.nx: db 161500.Number: db 005 1501.nyprevious: db 16 + 41502.nxprevious: db 161503.amount: dw 8231504.hp: db 101505.status: db 0 1506.statusEffect1: db 0 1507.statusEffect2: db 0 1508.statusEffect3: db 0 1509.statusEffect4: db 0 1510.statusEffect5: db 0 1512Monster12:1513.y: db 056 + (07*16) - 16 - 41514.x: db 012 + (10*08)1515.yprevious: db 056 + (07*16) - 16 - 41516.xprevious: db 012 + (10*08)1517.SYSXinROM: dw 0001518.RomBlock: db 0001519.ny: db 16 + 41520.nx: db 161521.Number: db 005 1522.nyprevious: db 16 + 41523.nxprevious: db 161524.amount: dw 9001525.hp: db 101526.status: db 0 1527.statusEffect1: db 0 1528.statusEffect2: db 0 1529.statusEffect3: db 0 1530.statusEffect4: db 0 1531.statusEffect5: db 0 15331535Monster13:1536.y: db 0401537.x: db 1401538.yprevious: db 1001539.xprevious: db 1401540.SYSXinROM: dw 0001541.RomBlock: db 0001542.ny: db 641543.nx: db 561544.Number: db 0011545.nyprevious: db 641546.nxprevious: db 561547.amount: dw 101548.hp: db 101549.status: db 0 1550.statusEffect1: db 0 1551.statusEffect2: db 0 1552.statusEffect3: db 0 1553.statusEffect4: db 0 1554.statusEffect5: db 0 1556Monster14:1557.y: db 0401558.x: db 2001559.yprevious: db 1001560.xprevious: db 2001561.SYSXinROM: dw 0001562.RomBlock: db 0001563.ny: db 641564.nx: db 401565.Number: db 0011566.nyprevious: db 641567.nxprevious: db 401568.amount: dw 101569.hp: db 101570.status: db 0 1571.statusEffect1: db 0 1572.statusEffect2: db 0 1573.statusEffect3: db 0 1574.statusEffect4: db 0 1575.statusEffect5: db 0 1577ClearMapPage0AndMapPage1:1578 ld hl,mappage01579 ld (hl),101580 ld de,mappage0+11581 ld bc,TilesPerColumn*TilesPerRow * 2 - 11582 ldir1583 ret15851590CopyPage0To1:1591 db 0,0,0,01592 db 0,0,0,11593 db 0,1,0,11594 db 0,0,$d0 1595CopyPage1To0:1596 db 0,0,0,11597 db 0,0,0,01598 db 0,1,212,01599 db 0,0,$d0 1601CopyPage0To1PlayingField:1602 db 0,0,0,01603 db 0,0,0,11604 db 0,1,212,01605 db 0,0,$d0 16081609TextNumber: 1610db "31456",2551612HeroOverViewFirstWindowButtonOffSX: equ 0001613HeroOverViewFirstWindowButtonOffSY: equ 1221614HeroOverViewFirstWindowButtonMouseOverSX: equ 0001615HeroOverViewFirstWindowButtonMouseOverSY: equ 1331616HeroOverViewFirstWindowButtonMouseClickedSX: equ 0001617HeroOverViewFirstWindowButtonMouseClickedSY: equ 1441619HeroOverViewFirstWindowButton1DX: equ HeroOverViewFirstWindowchoicesDX + 0081620HeroOverViewFirstWindowButton1DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (0 * 14)1621HeroOverViewFirstWindowButton2DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (1 * 14)1622HeroOverViewFirstWindowButton3DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (2 * 14)1623HeroOverViewFirstWindowButton4DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (3 * 14)1624HeroOverViewFirstWindowButton5DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (4 * 14)1625HeroOverViewFirstWindowButton6DY: equ HeroOverViewFirstWindowchoicesDY + 047 + (5 * 14) 1627ButtonTableLenght: equ 91628HeroOverviewWindowButton_de: equ 01629HeroOverviewWindowButtonStatus: equ 21630HeroOverviewWindowButtonYtop: equ 31631HeroOverviewWindowButtonYbottom: equ 41632HeroOverviewWindowButtonXleft: equ 51633HeroOverviewWindowButtonXright: equ 61634TextAddress: equ 71635Buttonnynx: equ 71636HeroOverviewWindowAmountOfButtons:equ -11638HeroOverviewFirstWindowButtonTableAmountOfButtons: db 51639HeroOverviewFirstWindowButtonTable: 1640 dw $0000 + (HeroOverViewFirstWindowButton1DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton1DY,HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton11641 dw $0000 + (HeroOverViewFirstWindowButton2DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton2DY,HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton21642 dw $0000 + (HeroOverViewFirstWindowButton3DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton3DY,HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton31643 dw $0000 + (HeroOverViewFirstWindowButton4DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton4DY,HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton41644 dw $0000 + (HeroOverViewFirstWindowButton5DY*128) + (HeroOverViewFirstWindowButton1DX/2) | db %1000 0011, HeroOverViewFirstWindowButton5DY,HeroOverViewFirstWindowButton6DY,HeroOverViewFirstWindowButton1DX,HeroOverViewFirstWindowButton1DX+HeroOverViewFirstWindowButtonNX | dw TextFirstWindowChoicesButton51646HeroOverViewSkillsButtonOffSX: equ 0961647HeroOverViewSkillsButtonOffSY: equ 139-11648HeroOverViewSkillsButtonMouseOverSX: equ 0961649HeroOverViewSkillsButtonMouseOverSY: equ 150-11650HeroOverViewSkillsButtonMouseClickedSX: equ 0961651HeroOverViewSkillsButtonMouseClickedSY: equ 161-11653HeroOverViewSkillsButton1DX: equ HeroOverViewSkillsWindowDX + 0081654HeroOverViewSkillsButton1DY: equ HeroOverViewSkillsWindowDY + 025 + (0 * 14)1655HeroOverViewSkillsButton2DY: equ HeroOverViewSkillsWindowDY + 025 + (1 * 14)1656HeroOverViewSkillsButton3DY: equ HeroOverViewSkillsWindowDY + 025 + (2 * 14)1657HeroOverViewSkillsButton4DY: equ HeroOverViewSkillsWindowDY + 025 + (3 * 14)1658HeroOverViewSkillsButton5DY: equ HeroOverViewSkillsWindowDY + 025 + (4 * 14)1659HeroOverViewSkillsButton6DY: equ HeroOverViewSkillsWindowDY + 025 + (5 * 14) 1660HeroOverViewSkillsButton7DY: equ HeroOverViewSkillsWindowDY + 025 + (6 * 14) 1661HeroOverViewSkillsButton8DY: equ HeroOverViewSkillsWindowDY + 025 + (7 * 14) 1662HeroOverViewSkillsButtonNX: equ 1341664HeroOverviewSkillsButtonTableAmountOfButtons: db 61665HeroOverviewSkillsButtonTable: 1666 dw $0000 + (HeroOverViewSkillsButton1DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton1DY,HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton11667 dw $0000 + (HeroOverViewSkillsButton2DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton2DY,HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton21668 dw $0000 + (HeroOverViewSkillsButton3DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton3DY,HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton31669 dw $0000 + (HeroOverViewSkillsButton4DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton4DY,HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton41670 dw $0000 + (HeroOverViewSkillsButton5DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton5DY,HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton51671 dw $0000 + (HeroOverViewSkillsButton6DY*128) + (HeroOverViewSkillsButton1DX/2) | db %1000 0011, HeroOverViewSkillsButton6DY,HeroOverViewSkillsButton7DY,HeroOverViewSkillsButton1DX,HeroOverViewSkillsButton1DX+HeroOverViewSkillsButtonNX | dw TextSkillsWindowButton61675HeroOverViewSpellBookButton1OffSX: equ 1921676HeroOverViewSpellBookButton1OffSY: equ 0001677HeroOverViewSpellBookButton1MouseOverSX: equ 2021678HeroOverViewSpellBookButton1MouseOverSY: equ 0001679HeroOverViewSpellBookButton1MouseClickedSX: equ 2121680HeroOverViewSpellBookButton1MouseClickedSY: equ 0001682HeroOverViewSpellBookButton2OffSX: equ 1921683HeroOverViewSpellBookButton2OffSY: equ 0351684HeroOverViewSpellBookButton2MouseOverSX: equ 2021685HeroOverViewSpellBookButton2MouseOverSY: equ 0351686HeroOverViewSpellBookButton2MouseClickedSX: equ 2121687HeroOverViewSpellBookButton2MouseClickedSY: equ 0351689HeroOverViewSpellBookButton3OffSX: equ 1921690HeroOverViewSpellBookButton3OffSY: equ 0641691HeroOverViewSpellBookButton3MouseOverSX: equ 2021692HeroOverViewSpellBookButton3MouseOverSY: equ 0641693HeroOverViewSpellBookButton3MouseClickedSX: equ 2121694HeroOverViewSpellBookButton3MouseClickedSY: equ 0641696HeroOverViewSpellBookButton4OffSX: equ 1921697HeroOverViewSpellBookButton4OffSY: equ 0871698HeroOverViewSpellBookButton4MouseOverSX: equ 2021699HeroOverViewSpellBookButton4MouseOverSY: equ 0871700HeroOverViewSpellBookButton4MouseClickedSX: equ 2121701HeroOverViewSpellBookButton4MouseClickedSY: equ 0871704HeroOverViewSpellBookButton1DX: equ HeroOverViewSpellBookWindowDX + 0161705HeroOverViewSpellBookButton1DY: equ HeroOverViewSpellBookWindowDY + 0241706HeroOverViewSpellBookButton2DX: equ HeroOverViewSpellBookWindowDX + 0141707HeroOverViewSpellBookButton2DY: equ HeroOverViewSpellBookWindowDY + 0581708HeroOverViewSpellBookButton3DX: equ HeroOverViewSpellBookWindowDX + 0121709HeroOverViewSpellBookButton3DY: equ HeroOverViewSpellBookWindowDY + 0861710HeroOverViewSpellBookButton4DX: equ HeroOverViewSpellBookWindowDX + 0101711HeroOverViewSpellBookButton4DY: equ HeroOverViewSpellBookWindowDY + 1081712HeroOverViewSpellBookButton5DX: equ HeroOverViewSpellBookWindowDX + 0081713HeroOverViewSpellBookButton5DY: equ HeroOverViewSpellBookWindowDY + 143 1716HeroOverviewSpellBookButtonTableAmountOfButtons: db 31717HeroOverviewSpellBookButtonTable_Earth: 1719 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1720 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1721 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1723HeroOverviewSpellBookButtonTableAmountOfButtons_Fire: db 31724HeroOverviewSpellBookButtonTable_Fire: 1725 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)17261727 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1728 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1730HeroOverviewSpellBookButtonTableAmountOfButtons_Air: db 31731HeroOverviewSpellBookButtonTable_Air: 1732 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1733 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)17341735 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton4DX,HeroOverViewSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1737HeroOverviewSpellBookButtonTableAmountOfButtons_Water: db 31738HeroOverviewSpellBookButtonTable_Water: 1739 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1740 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton2DX,HeroOverViewSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1741 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton3DX,HeroOverViewSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)17421744HeroOverviewSpellBookButtonTable_Earth_Activated: 1745 dw $0000 + (HeroOverViewSpellBookButton1DY*128) + (HeroOverViewSpellBookButton1DX/2) | db %1000 0011, HeroOverViewSpellBookButton1DY,HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1746HeroOverviewSpellBookButtonTable_Fire_Activated: 1747 dw $0000 + (HeroOverViewSpellBookButton2DY*128) + (HeroOverViewSpellBookButton2DX/2) | db %1000 0011, HeroOverViewSpellBookButton2DY,HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1748HeroOverviewSpellBookButtonTable_Air_Activated: 1749 dw $0000 + (HeroOverViewSpellBookButton3DY*128) + (HeroOverViewSpellBookButton3DX/2) | db %1000 0011, HeroOverViewSpellBookButton3DY,HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1750HeroOverviewSpellBookButtonTable_Water_Activated: 1751 dw $0000 + (HeroOverViewSpellBookButton4DY*128) + (HeroOverViewSpellBookButton4DX/2) | db %1000 0011, HeroOverViewSpellBookButton4DY,HeroOverViewSpellBookButton5DY,HeroOverViewSpellBookButton1DX,HeroOverViewSpellBookButton1DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1753ButtonTableSpellBookSYSX_Earth_Activated:1754 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1281755 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1281756 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1281758ButtonTableSpellBookSYSX_Fire_Activated:1759 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1281760 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1281761 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1281763ButtonTableSpellBookSYSX_Air_Activated:1764 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1281765 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1281766 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1281768ButtonTableSpellBookSYSX_Water_Activated:1769 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1281770 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1281771 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1281773BattleSpellBookButtonTableAmountOfButtons_Water: db 41774BattleSpellBookButtonTable: 1775 dw $0000 + (BattleSpellBookButton1DY*128) + (BattleSpellBookButton1DX/2) | db %1000 0011, BattleSpellBookButton1DY,BattleSpellBookButton2DY,BattleSpellBookButton1DX,BattleSpellBookButton1DX+HeroOverViewSpellBookWindowButton1NX | dw $0000 + (HeroOverViewSpellBookWindowButton1NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1776 dw $0000 + (BattleSpellBookButton2DY*128) + (BattleSpellBookButton2DX/2) | db %1000 0011, BattleSpellBookButton2DY,BattleSpellBookButton3DY,BattleSpellBookButton2DX,BattleSpellBookButton2DX+HeroOverViewSpellBookWindowButton2NX | dw $0000 + (HeroOverViewSpellBookWindowButton2NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1777 dw $0000 + (BattleSpellBookButton3DY*128) + (BattleSpellBookButton3DX/2) | db %1000 0011, BattleSpellBookButton3DY,BattleSpellBookButton4DY,BattleSpellBookButton3DX,BattleSpellBookButton3DX+HeroOverViewSpellBookWindowButton3NX | dw $0000 + (HeroOverViewSpellBookWindowButton3NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1778 dw $0000 + (BattleSpellBookButton4DY*128) + (BattleSpellBookButton4DX/2) | db %1000 0011, BattleSpellBookButton4DY,BattleSpellBookButton5DY,BattleSpellBookButton4DX,BattleSpellBookButton4DX+HeroOverViewSpellBookWindowButton4NX | dw $0000 + (HeroOverViewSpellBookWindowButton4NY*256) + (HeroOverViewSpellBookWindowButton1NX/2)1780BattleSpellBookButton1DX: equ SpellBookX + 0161781BattleSpellBookButton1DY: equ SpellBookY + 0241782BattleSpellBookButton2DX: equ SpellBookX + 0141783BattleSpellBookButton2DY: equ SpellBookY + 0581784BattleSpellBookButton3DX: equ SpellBookX + 0121785BattleSpellBookButton3DY: equ SpellBookY + 0861786BattleSpellBookButton4DX: equ SpellBookX + 0101787BattleSpellBookButton4DY: equ SpellBookY + 1081788BattleSpellBookButton5DX: equ SpellBookX + 0081789BattleSpellBookButton5DY: equ SpellBookY + 143 1793HeroOverViewSpellIconButton1DX: equ HeroOverViewSpellBookWindowDX + 0401794HeroOverViewSpellIconButton1DY: equ HeroOverViewSpellBookWindowDY + 0501796HeroOverViewSpellIconButton2DX: equ HeroOverViewSpellBookWindowDX + 0701797HeroOverViewSpellIconButton2DY: equ HeroOverViewSpellBookWindowDY + 0541799HeroOverViewSpellIconButton3DX: equ HeroOverViewSpellBookWindowDX + 0381800HeroOverViewSpellIconButton3DY: equ HeroOverViewSpellBookWindowDY + 0951802HeroOverViewSpellIconButton4DX: equ HeroOverViewSpellBookWindowDX + 0681803HeroOverViewSpellIconButton4DY: equ HeroOverViewSpellBookWindowDY + 0991805HeroOverViewSpellIconButton5DX: equ HeroOverViewSpellBookWindowDX + 1081806HeroOverViewSpellIconButton5DY: equ HeroOverViewSpellBookWindowDY + 0541808HeroOverViewSpellIconButton6DX: equ HeroOverViewSpellBookWindowDX + 1381809HeroOverViewSpellIconButton6DY: equ HeroOverViewSpellBookWindowDY + 0501811HeroOverViewSpellIconButton7DX: equ HeroOverViewSpellBookWindowDX + 1101812HeroOverViewSpellIconButton7DY: equ HeroOverViewSpellBookWindowDY + 0991814HeroOverViewSpellIconButton8DX: equ HeroOverViewSpellBookWindowDX + 1401815HeroOverViewSpellIconButton8DY: equ HeroOverViewSpellBookWindowDY + 09518181820HeroOverViewArmyIconButton1OffSX: equ 1561821HeroOverViewArmyIconButton1OffSY: equ 0211822HeroOverViewArmyIconButton1MouseOverSX: equ 1741823HeroOverViewArmyIconButton1MouseOverSY: equ 0211824HeroOverViewArmyIconButtonMouseClickedSX: equ 1921825HeroOverViewArmyIconButtonMouseClickedSY: equ 0211827HeroOverViewArmyIconButton2OffSX: equ 1561828HeroOverViewArmyIconButton2OffSY: equ 0211829HeroOverViewArmyIconButton2MouseOverSX: equ 1741830HeroOverViewArmyIconButton2MouseOverSY: equ 0211832HeroOverViewArmyIconButton3OffSX: equ 1561833HeroOverViewArmyIconButton3OffSY: equ 0211834HeroOverViewArmyIconButton3MouseOverSX: equ 1741835HeroOverViewArmyIconButton3MouseOverSY: equ 0211837HeroOverViewArmyIconButton4OffSX: equ 1561838HeroOverViewArmyIconButton4OffSY: equ 0211839HeroOverViewArmyIconButton4MouseOverSX: equ 1741840HeroOverViewArmyIconButton4MouseOverSY: equ 0211842HeroOverViewArmyIconButton5OffSX: equ 1561843HeroOverViewArmyIconButton5OffSY: equ 0211844HeroOverViewArmyIconButton5MouseOverSX: equ 1741845HeroOverViewArmyIconButton5MouseOverSY: equ 0211847HeroOverViewArmyIconButton6OffSX: equ 1561848HeroOverViewArmyIconButton6OffSY: equ 0211849HeroOverViewArmyIconButton6MouseOverSX: equ 1741850HeroOverViewArmyIconButton6MouseOverSY: equ 0211852HeroOverViewArmyIconButton1DX: equ HeroOverViewArmyWindowDX + 0301853HeroOverViewArmyIconButton1DY: equ HeroOverViewArmyWindowDY + 0271855HeroOverViewArmyIconButton2DX: equ HeroOverViewArmyWindowDX + 0501856HeroOverViewArmyIconButton2DY: equ HeroOverViewArmyWindowDY + 0271858HeroOverViewArmyIconButton3DX: equ HeroOverViewArmyWindowDX + 0701859HeroOverViewArmyIconButton3DY: equ HeroOverViewArmyWindowDY + 0271861HeroOverViewArmyIconButton4DX: equ HeroOverViewArmyWindowDX + 0901862HeroOverViewArmyIconButton4DY: equ HeroOverViewArmyWindowDY + 0271864HeroOverViewArmyIconButton5DX: equ HeroOverViewArmyWindowDX + 1101865HeroOverViewArmyIconButton5DY: equ HeroOverViewArmyWindowDY + 0271867HeroOverViewArmyIconButton6DX: equ HeroOverViewArmyWindowDX + 1301868HeroOverViewArmyIconButton6DY: equ HeroOverViewArmyWindowDY + 0271870HeroOverviewArmyIconButtonTableLenghtPerIcon: equ HeroOverviewArmyIconButtonTable.endlenght-HeroOverviewArmyIconButtonTable1871HeroOverviewArmyIconButtonTableAmountOfButtons: db 61872HeroOverviewArmyIconButtonTable: 1873 dw $0000 + (HeroOverViewArmyIconButton1DY*128) + (HeroOverViewArmyIconButton1DX/2) | db %1000 0011, HeroOverViewArmyIconButton1DY,HeroOverViewArmyIconButton1DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton1DX,HeroOverViewArmyIconButton1DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1874 .endlenght:1875 dw $0000 + (HeroOverViewArmyIconButton2DY*128) + (HeroOverViewArmyIconButton2DX/2) | db %1000 0011, HeroOverViewArmyIconButton2DY,HeroOverViewArmyIconButton2DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton2DX,HeroOverViewArmyIconButton2DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1876 dw $0000 + (HeroOverViewArmyIconButton3DY*128) + (HeroOverViewArmyIconButton3DX/2) | db %1000 0011, HeroOverViewArmyIconButton3DY,HeroOverViewArmyIconButton3DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton3DX,HeroOverViewArmyIconButton3DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1877 dw $0000 + (HeroOverViewArmyIconButton4DY*128) + (HeroOverViewArmyIconButton4DX/2) | db %1000 0011, HeroOverViewArmyIconButton4DY,HeroOverViewArmyIconButton4DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton4DX,HeroOverViewArmyIconButton4DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1878 dw $0000 + (HeroOverViewArmyIconButton5DY*128) + (HeroOverViewArmyIconButton5DX/2) | db %1000 0011, HeroOverViewArmyIconButton5DY,HeroOverViewArmyIconButton5DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton5DX,HeroOverViewArmyIconButton5DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1879 dw $0000 + (HeroOverViewArmyIconButton6DY*128) + (HeroOverViewArmyIconButton6DX/2) | db %1000 0011, HeroOverViewArmyIconButton6DY,HeroOverViewArmyIconButton6DY+HeroOverViewArmyIconWindowButtonNY,HeroOverViewArmyIconButton6DX,HeroOverViewArmyIconButton6DX+HeroOverViewArmyIconWindowButtonNX | dw $0000 + (HeroOverViewArmyIconWindowButtonNY*256) + (HeroOverViewArmyIconWindowButtonNX/2)1881ButtonTableArmyIconsSYSX:1882 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281883 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281884 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281886 dw $4000 + (HeroOverViewArmyIconButton1OffSY*128) + (HeroOverViewArmyIconButton1OffSX/2) - 1281887 dw $4000 + (HeroOverViewArmyIconButton1MouseOverSY*128) + (HeroOverViewArmyIconButton1MouseOverSX/2) - 1281888 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281890 dw $4000 + (HeroOverViewArmyIconButton3OffSY*128) + (HeroOverViewArmyIconButton3OffSX/2) - 1281891 dw $4000 + (HeroOverViewArmyIconButton3MouseOverSY*128) + (HeroOverViewArmyIconButton3MouseOverSX/2) - 1281892 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281894 dw $4000 + (HeroOverViewArmyIconButton4OffSY*128) + (HeroOverViewArmyIconButton4OffSX/2) - 1281895 dw $4000 + (HeroOverViewArmyIconButton4MouseOverSY*128) + (HeroOverViewArmyIconButton4MouseOverSX/2) - 1281896 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281898 dw $4000 + (HeroOverViewArmyIconButton5OffSY*128) + (HeroOverViewArmyIconButton5OffSX/2) - 1281899 dw $4000 + (HeroOverViewArmyIconButton5MouseOverSY*128) + (HeroOverViewArmyIconButton5MouseOverSX/2) - 1281900 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 1281902 dw $4000 + (HeroOverViewArmyIconButton6OffSY*128) + (HeroOverViewArmyIconButton6OffSX/2) - 1281903 dw $4000 + (HeroOverViewArmyIconButton6MouseOverSY*128) + (HeroOverViewArmyIconButton6MouseOverSX/2) - 1281904 dw $4000 + (HeroOverViewArmyIconButtonMouseClickedSY*128) + (HeroOverViewArmyIconButtonMouseClickedSX/2) - 12819081910CastleButtonsDY: equ 179 1911CopyCastleButton:1912 db 012,0,212,11913 db 008,0,CastleButtonsDY,2551914 db 040,0,031,01915 db 0,%0000 0000,$981916 1917CastleOverviewWindowButton1Ytop: equ CastleButtonsDY1918CastleOverviewWindowButton1YBottom: equ CastleButtonsDY + 311919CastleOverviewWindowButton1XLeft: equ 0081920CastleOverviewWindowButton1XRight: equ CastleOverviewWindowButton1XLeft + 401922CastleOverviewWindowButton2Ytop: equ CastleButtonsDY1923CastleOverviewWindowButton2YBottom: equ CastleButtonsDY + 311924CastleOverviewWindowButton2XLeft: equ 0481925CastleOverviewWindowButton2XRight: equ CastleOverviewWindowButton2XLeft + 401927CastleOverviewWindowButton3Ytop: equ CastleButtonsDY1928CastleOverviewWindowButton3YBottom: equ CastleButtonsDY + 311929CastleOverviewWindowButton3XLeft: equ 0881930CastleOverviewWindowButton3XRight: equ CastleOverviewWindowButton3XLeft + 401932CastleOverviewWindowButton4Ytop: equ CastleButtonsDY1933CastleOverviewWindowButton4YBottom: equ CastleButtonsDY + 311934CastleOverviewWindowButton4XLeft: equ 1281935CastleOverviewWindowButton4XRight: equ CastleOverviewWindowButton4XLeft + 401937CastleOverviewWindowButton5Ytop: equ CastleButtonsDY1938CastleOverviewWindowButton5YBottom: equ CastleButtonsDY + 311939CastleOverviewWindowButton5XLeft: equ 1681940CastleOverviewWindowButton5XRight: equ CastleOverviewWindowButton5XLeft + 401942CastleOverviewWindowButton6Ytop: equ CastleButtonsDY1943CastleOverviewWindowButton6YBottom: equ CastleButtonsDY + 311944CastleOverviewWindowButton6XLeft: equ 2081945CastleOverviewWindowButton6XRight: equ CastleOverviewWindowButton6XLeft + 401948CastleOverviewWindowButtonStatus: equ 01949CastleOverviewWindowButton_dx: equ 11950CastleOverviewWindowButton_SYSX_Ontouched: equ 21951CastleOverviewWindowButton_SYSX_MovedOver: equ 41952CastleOverviewWindowButton_SYSX_Clicked: equ 61953CastleOverviewWindowButtonYtop: equ 81954CastleOverviewWindowButtonYbottom: equ 91955CastleOverviewWindowButtonXleft: equ 101956CastleOverviewWindowButtonXright: equ 111959CastleOverviewButtonTableLenghtPerButton: equ CastleOverviewButtonTable.endlenght-CastleOverviewButtonTable1960CastleOverviewButtonTableAmountOfButtons: db 61961CastleOverviewButtonTable: 1962 db %1100 0011 | db CastleOverviewWindowButton1XLeft | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (031*128) + (000/2) - 128 | dw $4000 + (062*128) + (000/2) - 128 | db CastleOverviewWindowButton1Ytop,CastleOverviewWindowButton1YBottom,CastleOverviewWindowButton1XLeft,CastleOverviewWindowButton1XRight1963 .endlenght:1964 db %1010 0011 | db CastleOverviewWindowButton2XLeft | dw $4000 + (000*128) + (040/2) - 128 | dw $4000 + (031*128) + (040/2) - 128 | dw $4000 + (062*128) + (040/2) - 128 | db CastleOverviewWindowButton2Ytop,CastleOverviewWindowButton2YBottom,CastleOverviewWindowButton2XLeft,CastleOverviewWindowButton2XRight1965 db %1001 0011 | db CastleOverviewWindowButton3XLeft | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (031*128) + (080/2) - 128 | dw $4000 + (062*128) + (080/2) - 128 | db CastleOverviewWindowButton3Ytop,CastleOverviewWindowButton3YBottom,CastleOverviewWindowButton3XLeft,CastleOverviewWindowButton3XRight1966 db %1100 0011 | db CastleOverviewWindowButton4XLeft | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (031*128) + (120/2) - 128 | dw $4000 + (062*128) + (120/2) - 128 | db CastleOverviewWindowButton4Ytop,CastleOverviewWindowButton4YBottom,CastleOverviewWindowButton4XLeft,CastleOverviewWindowButton4XRight1967 db %1100 0011 | db CastleOverviewWindowButton5XLeft | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (031*128) + (160/2) - 128 | dw $4000 + (062*128) + (160/2) - 128 | db CastleOverviewWindowButton5Ytop,CastleOverviewWindowButton5YBottom,CastleOverviewWindowButton5XLeft,CastleOverviewWindowButton5XRight1968 db %1100 0011 | db CastleOverviewWindowButton6XLeft | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (031*128) + (200/2) - 128 | dw $4000 + (062*128) + (200/2) - 128 | db CastleOverviewWindowButton6Ytop,CastleOverviewWindowButton6YBottom,CastleOverviewWindowButton6XLeft,CastleOverviewWindowButton6XRight19701972SingleBuildButton1Ytop: equ 1681973SingleBuildButton1YBottom: equ SingleBuildButton1Ytop + 0091974SingleBuildButton1XLeft: equ 1801975SingleBuildButton1XRight: equ SingleBuildButton1XLeft+0721977SingleBuildButtonTableAmountOfButtons: db 11978SingleBuildButtonTable: 1979 db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 128 | db SingleBuildButton1Ytop,SingleBuildButton1YBottom,SingleBuildButton1XLeft,SingleBuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 19821983WhichBuildingWasClicked?: ds 11984SetTextBuilding: db 11985PutWhichBuildText: ds 21987CopyBuildButton:1988 db 000,0,212,11989 db 004,0,042,2551990 db 050,0,038,01991 db 0,%0000 0000,$981993CopyBuildButtonImage:1994 db 050,0,212,11995 db 004,0,042,2551996 db 050,0,033,01997 db 0,%0000 0000,$981998 1999BuildButton1Ytop: equ 0422000BuildButton1YBottom: equ BuildButton1Ytop + 0382001BuildButton1XLeft: equ 0042002BuildButton1XRight: equ BuildButton1XLeft+502004BuildButton2Ytop: equ 0422005BuildButton2YBottom: equ BuildButton2Ytop + 0382006BuildButton2XLeft: equ 0642007BuildButton2XRight: equ BuildButton2XLeft+502009BuildButton3Ytop: equ 0422010BuildButton3YBottom: equ BuildButton3Ytop + 0382011BuildButton3XLeft: equ 1242012BuildButton3XRight: equ BuildButton3XLeft+502014BuildButton4Ytop: equ 0922015BuildButton4YBottom: equ BuildButton4Ytop + 0382016BuildButton4XLeft: equ 0042017BuildButton4XRight: equ BuildButton4XLeft+502019BuildButton5Ytop: equ 0922020BuildButton5YBottom: equ BuildButton5Ytop + 0382021BuildButton5XLeft: equ 0642022BuildButton5XRight: equ BuildButton5XLeft+502024BuildButton6Ytop: equ 0922025BuildButton6YBottom: equ BuildButton6Ytop + 0382026BuildButton6XLeft: equ 1242027BuildButton6XRight: equ BuildButton6XLeft+502029BuildButton7Ytop: equ 1422030BuildButton7YBottom: equ BuildButton7Ytop + 0382031BuildButton7XLeft: equ 0042032BuildButton7XRight: equ BuildButton7XLeft+502034BuildButton8Ytop: equ 1422035BuildButton8YBottom: equ BuildButton8Ytop + 0382036BuildButton8XLeft: equ 0642037BuildButton8XRight: equ BuildButton8XLeft+502039BuildButton9Ytop: equ 1422040BuildButton9YBottom: equ BuildButton9Ytop + 0382041BuildButton9XLeft: equ 1242042BuildButton9XRight: equ BuildButton9XLeft+502045BuildButtonStatus: equ 02046BuildButton_SYSX_Ontouched: equ 12047BuildButton_SYSX_MovedOver: equ 32048BuildButton_SYSX_Clicked: equ 52049BuildButtonYtop: equ 72050BuildButtonYbottom: equ 82051BuildButtonXleft: equ 92052BuildButtonXright: equ 102053BuildButtonImage_SYSX: equ 112055BuildButtonTableLenghtPerButton: equ BuildButtonTable.endlenght-BuildButtonTable2056BuildButtonTableAmountOfButtons: db 92057BuildButtonTable: 2058 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton1Ytop,BuildButton1YBottom,BuildButton1XLeft,BuildButton1XRight | dw $4000 + (076*128) + (000/2) - 128 | 2059 .endlenght:2060 db %1010 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton2Ytop,BuildButton2YBottom,BuildButton2XLeft,BuildButton2XRight | dw $4000 + (076*128) + (050/2) - 128 | 2061 db %1001 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton3Ytop,BuildButton3YBottom,BuildButton3XLeft,BuildButton3XRight | dw $4000 + (076*128) + (100/2) - 128 | 2062 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton4Ytop,BuildButton4YBottom,BuildButton4XLeft,BuildButton4XRight | dw $4000 + (076*128) + (150/2) - 128 | 2063 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton5Ytop,BuildButton5YBottom,BuildButton5XLeft,BuildButton5XRight | dw $4000 + (076*128) + (200/2) - 128 | 2064 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton6Ytop,BuildButton6YBottom,BuildButton6XLeft,BuildButton6XRight | dw $4000 + (114*128) + (000/2) - 128 | 2065 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton7Ytop,BuildButton7YBottom,BuildButton7XLeft,BuildButton7XRight | dw $4000 + (114*128) + (050/2) - 128 | 2066 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton8Ytop,BuildButton8YBottom,BuildButton8XLeft,BuildButton8XRight | dw $4000 + (114*128) + (100/2) - 128 | 2067 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 128 | db BuildButton9Ytop,BuildButton9YBottom,BuildButton9XLeft,BuildButton9XRight | dw $4000 + (114*128) + (150/2) - 128 | 20692082SelectedCastleRecruitLevelUnit: ds 12083SelectedCastleRecruitUnitWindow: ds 12084SelectedCastleRecruitLevelUnitAmountAvailable: dw 0002085SelectedCastleRecruitLevelUnitRecruitAmount: dw 0002086SelectedCastleRecruitLevelUnitTotalGoldCost: dw 0002087SelectedCastleRecruitLevelUnitTotalCostGems: ds 22088SelectedCastleRecruitLevelUnitTotalCostRubies: ds 220892090RecruitButton1Ytop: equ 0642091RecruitButton1YBottom: equ RecruitButton1Ytop + 0092092RecruitButton1XLeft: equ 0062093RecruitButton1XRight: equ RecruitButton1XLeft+0762095RecruitButton2Ytop: equ 0642096RecruitButton2YBottom: equ RecruitButton2Ytop + 0092097RecruitButton2XLeft: equ 0902098RecruitButton2XRight: equ RecruitButton2XLeft+0762100RecruitButton3Ytop: equ 0642101RecruitButton3YBottom: equ RecruitButton3Ytop + 0092102RecruitButton3XLeft: equ 1742103RecruitButton3XRight: equ RecruitButton3XLeft+0762105RecruitButton4Ytop: equ 1202106RecruitButton4YBottom: equ RecruitButton4Ytop + 0092107RecruitButton4XLeft: equ 0062108RecruitButton4XRight: equ RecruitButton4XLeft + 0762110RecruitButton5Ytop: equ 1202111RecruitButton5YBottom: equ RecruitButton5Ytop + 0092112RecruitButton5XLeft: equ 0902113RecruitButton5XRight: equ RecruitButton5XLeft+0762115RecruitButton6Ytop: equ 1202116RecruitButton6YBottom: equ RecruitButton6Ytop + 0092117RecruitButton6XLeft: equ 1742118RecruitButton6XRight: equ RecruitButton6XLeft+0762122RecruitButtonStatus: equ 02123RecruitButton_SYSX_Ontouched: equ 12124RecruitButton_SYSX_MovedOver: equ 32125RecruitButton_SYSX_Clicked: equ 52126RecruitButtonYtop: equ 72127RecruitButtonYbottom: equ 82128RecruitButtonXleft: equ 92129RecruitButtonXright: equ 102130RecruitButton_DYDX: equ 112132RecruitButtonTableLenghtPerButton: equ RecruitButtonTable.endlenght-RecruitButtonTable2133RecruitButtonTableAmountOfButtons: db 92134RecruitButtonTable: 2135 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton1Ytop,RecruitButton1YBottom,RecruitButton1XLeft,RecruitButton1XRight | dw $0000 + (RecruitButton1Ytop*128) + (RecruitButton1XLeft/2) - 128 2136 .endlenght:2137 db %1010 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton2Ytop,RecruitButton2YBottom,RecruitButton2XLeft,RecruitButton2XRight | dw $0000 + (RecruitButton2Ytop*128) + (RecruitButton2XLeft/2) - 128 2138 db %1001 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton3Ytop,RecruitButton3YBottom,RecruitButton3XLeft,RecruitButton3XRight | dw $0000 + (RecruitButton3Ytop*128) + (RecruitButton3XLeft/2) - 1282139 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton4Ytop,RecruitButton4YBottom,RecruitButton4XLeft,RecruitButton4XRight | dw $0000 + (RecruitButton4Ytop*128) + (RecruitButton4XLeft/2) - 128 2140 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton5Ytop,RecruitButton5YBottom,RecruitButton5XLeft,RecruitButton5XRight | dw $0000 + (RecruitButton5Ytop*128) + (RecruitButton5XLeft/2) - 128 2141 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db RecruitButton6Ytop,RecruitButton6YBottom,RecruitButton6XLeft,RecruitButton6XRight | dw $0000 + (RecruitButton6Ytop*128) + (RecruitButton6XLeft/2) - 128 21432148RecruitButtonMAXYtop: equ 0922149RecruitButtonMAXYBottom: equ RecruitButtonMAXYtop + 0182150RecruitButtonMAXXLeft: equ 1142151RecruitButtonMAXXRight: equ RecruitButtonMAXXLeft + 0262153RecruitButtonBUYYtop: equ 0722154RecruitButtonBUYYBottom: equ RecruitButtonBUYYtop + 0182155RecruitButtonBUYXLeft: equ 1142156RecruitButtonBUYXRight: equ RecruitButtonBUYXLeft + 0262158RecruitButtonPLUSYtop: equ 0842159RecruitButtonPLUSYBottom: equ RecruitButtonPLUSYtop + 0142160RecruitButtonPLUSXLeft: equ 0962161RecruitButtonPLUSXRight: equ RecruitButtonPLUSXLeft + 0142163RecruitButtonMINUSYtop: equ 0842164RecruitButtonMINUSYBottom: equ RecruitButtonMINUSYtop + 0142165RecruitButtonMINUSXLeft: equ 1442166RecruitButtonMINUSXRight: equ RecruitButtonMINUSXLeft + 0142168AmountOfButtons: equ -121692179RecruitButtonMAXBUYTableLenghtPerButton: equ RecruitButtonMAXBUYTable.endlenght-RecruitButtonMAXBUYTable2180RecruitButtonMAXBUYTableAmountOfButtons: db 42181RecruitButtonMAXBUYTable: 2182 db %1100 0011 | dw $4000 + (027*128) + (152/2) - 128 | dw $4000 + (027*128) + (178/2) - 128 | dw $4000 + (027*128) + (204/2) - 128 | db RecruitButtonMAXYtop,RecruitButtonMAXYBottom,RecruitButtonMAXXLeft,RecruitButtonMAXXRight | dw $0000 + (RecruitButtonMAXYtop*128) + (RecruitButtonMAXXLeft/2) - 128 2183 .endlenght:2184 db %1100 0011 | dw $4000 + (045*128) + (162/2) - 128 | dw $4000 + (045*128) + (188/2) - 128 | dw $4000 + (045*128) + (214/2) - 128 | db RecruitButtonBUYYtop,RecruitButtonBUYYBottom,RecruitButtonBUYXLeft,RecruitButtonBUYXRight | dw $0000 + (RecruitButtonBUYYtop*128) + (RecruitButtonBUYXLeft/2) - 128 2185 db %1100 0011 | dw $4000 + (072*128) + (222/2) - 128 | dw $4000 + (086*128) + (222/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonPLUSYtop,RecruitButtonPLUSYBottom,RecruitButtonPLUSXLeft,RecruitButtonPLUSXRight | dw $0000 + (RecruitButtonPLUSYtop*128) + (RecruitButtonPLUSXLeft/2) - 128 2186 db %1100 0011 | dw $4000 + (072*128) + (236/2) - 128 | dw $4000 + (086*128) + (236/2) - 128 | dw $4000 + (100*128) + (222/2) - 128 | db RecruitButtonMINUSYtop,RecruitButtonMINUSYBottom,RecruitButtonMINUSXLeft,RecruitButtonMINUSXRight | dw $0000 + (RecruitButtonMINUSYtop*128) + (RecruitButtonMINUSXLeft/2) - 128 21882190GenericButtonGfxBlock: equ -22191GenericButtonAmountOfButtons: equ -12192GenericButtonStatus: equ 02193GenericButton_SYSX_Ontouched: equ 12194GenericButton_SYSX_MovedOver: equ 32195GenericButton_SYSX_Clicked: equ 52196GenericButtonYtop: equ 72197GenericButtonYbottom: equ 82198GenericButtonXleft: equ 92199GenericButtonXright: equ 102200GenericButton_DYDX: equ 112201GenericButton_NYNX: equ 132203ButtonGfxBlockCopy: ds 12205GenericButtonTableLenghtPerButton: equ GenericButtonTable.endlenght-GenericButtonTable2206GenericButtonTableGfxBlock: ds 12207GenericButtonTableAmountOfButtons: ds 12208GenericButtonTable: 2209 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2210 .endlenght:2211 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2212 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2213 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2214 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2215 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2216 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2217 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2218 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2219 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2220 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2221 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2222 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2223 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2224 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2226 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2227 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2228 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2229 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2230 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2231 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2232 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2233 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2234 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2235 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2236 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2237 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2238 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 22412243GenericButtonTable2GfxBlock: ds 12244GenericButtonTable2AmountOfButtons: ds 12245GenericButtonTable2: 2246 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2247 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2248 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2249 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2250 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2251 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2253 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2254 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2255 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2256 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2257 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 2258 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db 0,0,0,0 | dw $0000 + (0*128) + (0/2) - 128 22602262GenericButtonTable3GfxBlock: db Hero20x11PortraitsBlock2263GenericButtonTable3AmountOfButtons: db 122264GenericButtonTable3: 2266 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (000/2) - 128 | dw $4000 + ((128+25+76)*128) + (020/2) - 128 | dw $4000 + ((128+25+76)*128) + (040/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 2267 db %1100 0011 | dw $4000 + (018*128) + (000/2) - 128 | dw $4000 + (018*128) + (020/2) - 128 | dw $4000 + (018*128) + (040/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 2268 db %1100 0011 | dw $4000 + (018*128) + (060/2) - 128 | dw $4000 + (018*128) + (080/2) - 128 | dw $4000 + (018*128) + (100/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1282269 db %1100 0011 | dw $4000 + (139*128) + (096/2) - 128 | dw $4000 + (139*128) + (116/2) - 128 | dw $4000 + (139*128) + (136/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1282270 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (060/2) - 128 | dw $4000 + ((128+25+76)*128) + (080/2) - 128 | dw $4000 + ((128+25+76)*128) + (100/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1282271 2272 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (120/2) - 128 | dw $4000 + ((128+25+76)*128) + (140/2) - 128 | dw $4000 + ((128+25+76)*128) + (160/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1282273 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1282274 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1282275 db %1100 0011 | dw $4000 + (139*128) + (156/2) - 128 | dw $4000 + (139*128) + (176/2) - 128 | dw $4000 + (139*128) + (196/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1282276 db %1100 0011 | dw $4000 + ((128+25+76)*128) + (180/2) - 128 | dw $4000 + ((128+25+76)*128) + (200/2) - 128 | dw $4000 + ((128+25+76)*128) + (220/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1282277 2278 db %1100 0011 | dw $4000 + (048*128) + (240/2) - 128 | dw $4000 + (064*128) + (240/2) - 128 | dw $4000 + (080*128) + (240/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1282279 2280 db %1100 0011 | dw $4000 + (000*128) + (240/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1282282 2283.Button1Ytop: equ 0552284.Button1YBottom: equ .Button1Ytop + 0112285.Button1XLeft: equ 2062286.Button1XRight: equ .Button1XLeft + 0202288.Button2Ytop: equ 0662289.Button2YBottom: equ .Button2Ytop + 0112290.Button2XLeft: equ 2062291.Button2XRight: equ .Button2XLeft + 0202293.Button3Ytop: equ 0772294.Button3YBottom: equ .Button3Ytop + 0112295.Button3XLeft: equ 2062296.Button3XRight: equ .Button3XLeft + 0202298.Button4Ytop: equ 0882299.Button4YBottom: equ .Button4Ytop + 0112300.Button4XLeft: equ 2062301.Button4XRight: equ .Button4XLeft + 0202303.Button5Ytop: equ 0992304.Button5YBottom: equ .Button5Ytop + 0112305.Button5XLeft: equ 2062306.Button5XRight: equ .Button5XLeft + 0202308 2309.Button6Ytop: equ 0552310.Button6YBottom: equ .Button6Ytop + 0112311.Button6XLeft: equ 2302312.Button6XRight: equ .Button6XLeft + 0202314.Button7Ytop: equ 0662315.Button7YBottom: equ .Button7Ytop + 0112316.Button7XLeft: equ 2302317.Button7XRight: equ .Button7XLeft + 0202319.Button8Ytop: equ 0772320.Button8YBottom: equ .Button8Ytop + 0112321.Button8XLeft: equ 2302322.Button8XRight: equ .Button8XLeft + 0202324.Button9Ytop: equ 0882325.Button9YBottom: equ .Button9Ytop + 0112326.Button9XLeft: equ 2302327.Button9XRight: equ .Button9XLeft + 0202329.Button10Ytop: equ 0992330.Button10YBottom: equ .Button10Ytop + 0112331.Button10XLeft: equ 2302332.Button10XRight: equ .Button10XLeft + 0202334 2335.Button11Ytop: equ 1102336.Button11YBottom: equ .Button11Ytop + 0162337.Button11XLeft: equ 2082338.Button11XRight: equ .Button11XLeft + 0162340 2341.Button12Ytop: equ 1102342.Button12YBottom: equ .Button12Ytop + 0162343.Button12XLeft: equ 2322344.Button12XRight: equ .Button12XLeft + 01623552358MarketPlaceResourceNeeded: ds 12359MarketPlaceResourceToTrade: ds 12361CopyCastleButton2:2362 db 000,0,212,12363 db 100,0,100,2552364 db 020,0,030,02365 db 0,%0000 0000,$982372HeroOverViewInventoryIconButton1OffSX: equ 1462373HeroOverViewInventoryIconButton1OffSY: equ 0002374HeroOverViewInventoryIconButton1MouseOverSX: equ 1462375HeroOverViewInventoryIconButton1MouseOverSY: equ 0202376HeroOverViewInventoryIconButtonMouseClickedSX: equ 2202377HeroOverViewInventoryIconButtonMouseClickedSY: equ 2362379HeroOverViewInventoryIconButton2OffSX: equ 1462380HeroOverViewInventoryIconButton2OffSY: equ 0402381HeroOverViewInventoryIconButton2MouseOverSX: equ 1462382HeroOverViewInventoryIconButton2MouseOverSY: equ 0602384HeroOverViewInventoryIconButton3OffSX: equ 1462385HeroOverViewInventoryIconButton3OffSY: equ 0802386HeroOverViewInventoryIconButton3MouseOverSX: equ 1462387HeroOverViewInventoryIconButton3MouseOverSY: equ 1002389HeroOverViewInventoryIconButton4OffSX: equ 0002390HeroOverViewInventoryIconButton4OffSY: equ 1562391HeroOverViewInventoryIconButton4MouseOverSX: equ 0002392HeroOverViewInventoryIconButton4MouseOverSY: equ 1762394HeroOverViewInventoryIconButton5OffSX: equ 1462395HeroOverViewInventoryIconButton5OffSY: equ 0002396HeroOverViewInventoryIconButton5MouseOverSX: equ 1462397HeroOverViewInventoryIconButton5MouseOverSY: equ 0202399HeroOverViewInventoryIconButton6OffSX: equ 1462400HeroOverViewInventoryIconButton6OffSY: equ 0002401HeroOverViewInventoryIconButton6MouseOverSX: equ 1462402HeroOverViewInventoryIconButton6MouseOverSY: equ 0202404HeroOverViewInventoryIconButton7OffSX: equ 1462405HeroOverViewInventoryIconButton7OffSY: equ 0002406HeroOverViewInventoryIconButton7MouseOverSX: equ 1462407HeroOverViewInventoryIconButton7MouseOverSY: equ 0202409HeroOverViewInventoryIconButton8OffSX: equ 1462410HeroOverViewInventoryIconButton8OffSY: equ 0002411HeroOverViewInventoryIconButton8MouseOverSX: equ 1462412HeroOverViewInventoryIconButton8MouseOverSY: equ 0202414HeroOverViewInventoryIconButton9OffSX: equ 0202415HeroOverViewInventoryIconButton9OffSY: equ 0282416HeroOverViewInventoryIconButton9MouseOverSX: equ 0202417HeroOverViewInventoryIconButton9MouseOverSY: equ 02824182419HeroOverViewInventoryIconButton10OffSX: equ 0002420HeroOverViewInventoryIconButton10OffSY: equ 1562421HeroOverViewInventoryIconButton10MouseOverSX: equ 0002422HeroOverViewInventoryIconButton10MouseOverSY: equ 1762424HeroOverViewInventoryIconButton11OffSX: equ 1462425HeroOverViewInventoryIconButton11OffSY: equ 0002426HeroOverViewInventoryIconButton11MouseOverSX: equ 1462427HeroOverViewInventoryIconButton11MouseOverSY: equ 0202429HeroOverViewInventoryIconButton12OffSX: equ 1462430HeroOverViewInventoryIconButton12OffSY: equ 0002431HeroOverViewInventoryIconButton12MouseOverSX: equ 1462432HeroOverViewInventoryIconButton12MouseOverSY: equ 0202434HeroOverViewInventoryIconButton13OffSX: equ 1462435HeroOverViewInventoryIconButton13OffSY: equ 0002436HeroOverViewInventoryIconButton13MouseOverSX: equ 1462437HeroOverViewInventoryIconButton13MouseOverSY: equ 0202439HeroOverViewInventoryIconButton14OffSX: equ 1462440HeroOverViewInventoryIconButton14OffSY: equ 0002441HeroOverViewInventoryIconButton14MouseOverSX: equ 1462442HeroOverViewInventoryIconButton14MouseOverSY: equ 0202444HeroOverViewInventoryIconButton15OffSX: equ 0202445HeroOverViewInventoryIconButton15OffSY: equ 0282446HeroOverViewInventoryIconButton15MouseOverSX: equ 0202447HeroOverViewInventoryIconButton15MouseOverSY: equ 0282451ButtonTableInventoryIconsSYSX:2452 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282453 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282454 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282456 dw $4000 + (HeroOverViewInventoryIconButton1OffSY*128) + (HeroOverViewInventoryIconButton1OffSX/2) - 1282457 dw $4000 + (HeroOverViewInventoryIconButton1MouseOverSY*128) + (HeroOverViewInventoryIconButton1MouseOverSX/2) - 1282458 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282460 dw $4000 + (HeroOverViewInventoryIconButton3OffSY*128) + (HeroOverViewInventoryIconButton3OffSX/2) - 1282461 dw $4000 + (HeroOverViewInventoryIconButton3MouseOverSY*128) + (HeroOverViewInventoryIconButton3MouseOverSX/2) - 1282462 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282464 dw $4000 + (HeroOverViewInventoryIconButton4OffSY*128) + (HeroOverViewInventoryIconButton4OffSX/2) - 1282465 dw $4000 + (HeroOverViewInventoryIconButton4MouseOverSY*128) + (HeroOverViewInventoryIconButton4MouseOverSX/2) - 1282466 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282468 dw $4000 + (HeroOverViewInventoryIconButton5OffSY*128) + (HeroOverViewInventoryIconButton5OffSX/2) - 1282469 dw $4000 + (HeroOverViewInventoryIconButton5MouseOverSY*128) + (HeroOverViewInventoryIconButton5MouseOverSX/2) - 1282470 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282472 dw $4000 + (HeroOverViewInventoryIconButton6OffSY*128) + (HeroOverViewInventoryIconButton6OffSX/2) - 1282473 dw $4000 + (HeroOverViewInventoryIconButton6MouseOverSY*128) + (HeroOverViewInventoryIconButton6MouseOverSX/2) - 1282474 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282476 dw $4000 + (HeroOverViewInventoryIconButton7OffSY*128) + (HeroOverViewInventoryIconButton7OffSX/2) - 1282477 dw $4000 + (HeroOverViewInventoryIconButton7MouseOverSY*128) + (HeroOverViewInventoryIconButton7MouseOverSX/2) - 1282478 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282480 dw $4000 + (HeroOverViewInventoryIconButton8OffSY*128) + (HeroOverViewInventoryIconButton8OffSX/2) - 1282481 dw $4000 + (HeroOverViewInventoryIconButton8MouseOverSY*128) + (HeroOverViewInventoryIconButton8MouseOverSX/2) - 1282482 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282484 dw $4000 + (HeroOverViewInventoryIconButton9OffSY*128) + (HeroOverViewInventoryIconButton9OffSX/2) - 1282485 dw $4000 + (HeroOverViewInventoryIconButton9MouseOverSY*128) + (HeroOverViewInventoryIconButton9MouseOverSX/2) - 1282486 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 12824872488 dw $4000 + (HeroOverViewInventoryIconButton10OffSY*128) + (HeroOverViewInventoryIconButton10OffSX/2) - 1282489 dw $4000 + (HeroOverViewInventoryIconButton10MouseOverSY*128) + (HeroOverViewInventoryIconButton10MouseOverSX/2) - 1282490 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282492 dw $4000 + (HeroOverViewInventoryIconButton11OffSY*128) + (HeroOverViewInventoryIconButton11OffSX/2) - 1282493 dw $4000 + (HeroOverViewInventoryIconButton11MouseOverSY*128) + (HeroOverViewInventoryIconButton11MouseOverSX/2) - 1282494 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282496 dw $4000 + (HeroOverViewInventoryIconButton12OffSY*128) + (HeroOverViewInventoryIconButton12OffSX/2) - 1282497 dw $4000 + (HeroOverViewInventoryIconButton12MouseOverSY*128) + (HeroOverViewInventoryIconButton12MouseOverSX/2) - 1282498 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282500 dw $4000 + (HeroOverViewInventoryIconButton13OffSY*128) + (HeroOverViewInventoryIconButton13OffSX/2) - 1282501 dw $4000 + (HeroOverViewInventoryIconButton13MouseOverSY*128) + (HeroOverViewInventoryIconButton13MouseOverSX/2) - 1282502 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282504 dw $4000 + (HeroOverViewInventoryIconButton14OffSY*128) + (HeroOverViewInventoryIconButton14OffSX/2) - 1282505 dw $4000 + (HeroOverViewInventoryIconButton14MouseOverSY*128) + (HeroOverViewInventoryIconButton14MouseOverSX/2) - 1282506 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282508 dw $4000 + (HeroOverViewInventoryIconButton15OffSY*128) + (HeroOverViewInventoryIconButton15OffSX/2) - 1282509 dw $4000 + (HeroOverViewInventoryIconButton15MouseOverSY*128) + (HeroOverViewInventoryIconButton15MouseOverSX/2) - 1282510 dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 1282513HeroOverViewInventoryIconButton1DX: equ HeroOverViewInventoryWindowDX + 0202514HeroOverViewInventoryIconButton1DY: equ HeroOverViewInventoryWindowDY + 0282516HeroOverViewInventoryIconButton2DX: equ HeroOverViewInventoryWindowDX + 0642517HeroOverViewInventoryIconButton2DY: equ HeroOverViewInventoryWindowDY + 0282519HeroOverViewInventoryIconButton3DX: equ HeroOverViewInventoryWindowDX + 1082520HeroOverViewInventoryIconButton3DY: equ HeroOverViewInventoryWindowDY + 0282522HeroOverViewInventoryIconButton4DX: equ HeroOverViewInventoryWindowDX + 0202523HeroOverViewInventoryIconButton4DY: equ HeroOverViewInventoryWindowDY + 0532525HeroOverViewInventoryIconButton5DX: equ HeroOverViewInventoryWindowDX + 0642526HeroOverViewInventoryIconButton5DY: equ HeroOverViewInventoryWindowDY + 0532528HeroOverViewInventoryIconButton6DX: equ HeroOverViewInventoryWindowDX + 1082529HeroOverViewInventoryIconButton6DY: equ HeroOverViewInventoryWindowDY + 0532531HeroOverViewInventoryIconButton7DX: equ HeroOverViewInventoryWindowDX + 0202532HeroOverViewInventoryIconButton7DY: equ HeroOverViewInventoryWindowDY + 0782534HeroOverViewInventoryIconButton8DX: equ HeroOverViewInventoryWindowDX + 0642535HeroOverViewInventoryIconButton8DY: equ HeroOverViewInventoryWindowDY + 0782537HeroOverViewInventoryIconButton9DX: equ HeroOverViewInventoryWindowDX + 1082538HeroOverViewInventoryIconButton9DY: equ HeroOverViewInventoryWindowDY + 07825392540HeroOverViewInventoryIconButton10DX: equ HeroOverViewInventoryWindowDX + 0082541HeroOverViewInventoryIconButton10DY: equ HeroOverViewInventoryWindowDY + 1012543HeroOverViewInventoryIconButton11DX: equ HeroOverViewInventoryWindowDX + 0302544HeroOverViewInventoryIconButton11DY: equ HeroOverViewInventoryWindowDY + 1012546HeroOverViewInventoryIconButton12DX: equ HeroOverViewInventoryWindowDX + 0522547HeroOverViewInventoryIconButton12DY: equ HeroOverViewInventoryWindowDY + 1012549HeroOverViewInventoryIconButton13DX: equ HeroOverViewInventoryWindowDX + 0742550HeroOverViewInventoryIconButton13DY: equ HeroOverViewInventoryWindowDY + 1012552HeroOverViewInventoryIconButton14DX: equ HeroOverViewInventoryWindowDX + 0962553HeroOverViewInventoryIconButton14DY: equ HeroOverViewInventoryWindowDY + 1012555HeroOverViewInventoryIconButton15DX: equ HeroOverViewInventoryWindowDX + 1182556HeroOverViewInventoryIconButton15DY: equ HeroOverViewInventoryWindowDY + 1012558HeroOverviewInventoryIconButtonTableLenghtPerIcon: equ HeroOverviewInventoryIconButtonTable.endlenght-HeroOverviewInventoryIconButtonTable2559HeroOverviewInventoryIconButtonTableAmountOfButtons: db 9 + 62560HeroOverviewInventoryIconButtonTable: 2561 dw $0000 + (HeroOverViewInventoryIconButton1DY*128) + (HeroOverViewInventoryIconButton1DX/2) | db %1000 0011, HeroOverViewInventoryIconButton1DY,HeroOverViewInventoryIconButton1DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton1DX,HeroOverViewInventoryIconButton1DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2562 .endlenght:2563 dw $0000 + (HeroOverViewInventoryIconButton2DY*128) + (HeroOverViewInventoryIconButton2DX/2) | db %1000 0011, HeroOverViewInventoryIconButton2DY,HeroOverViewInventoryIconButton2DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton2DX,HeroOverViewInventoryIconButton2DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2564 dw $0000 + (HeroOverViewInventoryIconButton3DY*128) + (HeroOverViewInventoryIconButton3DX/2) | db %1000 0011, HeroOverViewInventoryIconButton3DY,HeroOverViewInventoryIconButton3DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton3DX,HeroOverViewInventoryIconButton3DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2565 dw $0000 + (HeroOverViewInventoryIconButton4DY*128) + (HeroOverViewInventoryIconButton4DX/2) | db %1000 0011, HeroOverViewInventoryIconButton4DY,HeroOverViewInventoryIconButton4DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton4DX,HeroOverViewInventoryIconButton4DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2566 dw $0000 + (HeroOverViewInventoryIconButton5DY*128) + (HeroOverViewInventoryIconButton5DX/2) | db %1000 0011, HeroOverViewInventoryIconButton5DY,HeroOverViewInventoryIconButton5DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton5DX,HeroOverViewInventoryIconButton5DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2567 dw $0000 + (HeroOverViewInventoryIconButton6DY*128) + (HeroOverViewInventoryIconButton6DX/2) | db %1000 0011, HeroOverViewInventoryIconButton6DY,HeroOverViewInventoryIconButton6DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton6DX,HeroOverViewInventoryIconButton6DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2568 dw $0000 + (HeroOverViewInventoryIconButton7DY*128) + (HeroOverViewInventoryIconButton7DX/2) | db %1000 0011, HeroOverViewInventoryIconButton7DY,HeroOverViewInventoryIconButton7DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton7DX,HeroOverViewInventoryIconButton7DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2569 dw $0000 + (HeroOverViewInventoryIconButton8DY*128) + (HeroOverViewInventoryIconButton8DX/2) | db %1000 0011, HeroOverViewInventoryIconButton8DY,HeroOverViewInventoryIconButton8DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton8DX,HeroOverViewInventoryIconButton8DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2570 dw $0000 + (HeroOverViewInventoryIconButton9DY*128) + (HeroOverViewInventoryIconButton9DX/2) | db %1000 0011, HeroOverViewInventoryIconButton9DY,HeroOverViewInventoryIconButton9DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton9DX,HeroOverViewInventoryIconButton9DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2572 dw $0000 + (HeroOverViewInventoryIconButton10DY*128) + (HeroOverViewInventoryIconButton10DX/2) | db %1000 0011, HeroOverViewInventoryIconButton10DY,HeroOverViewInventoryIconButton10DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton10DX,HeroOverViewInventoryIconButton10DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2573 dw $0000 + (HeroOverViewInventoryIconButton11DY*128) + (HeroOverViewInventoryIconButton11DX/2) | db %1000 0011, HeroOverViewInventoryIconButton11DY,HeroOverViewInventoryIconButton11DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton11DX,HeroOverViewInventoryIconButton11DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2574 dw $0000 + (HeroOverViewInventoryIconButton12DY*128) + (HeroOverViewInventoryIconButton12DX/2) | db %1000 0011, HeroOverViewInventoryIconButton12DY,HeroOverViewInventoryIconButton12DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton12DX,HeroOverViewInventoryIconButton12DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2575 dw $0000 + (HeroOverViewInventoryIconButton13DY*128) + (HeroOverViewInventoryIconButton13DX/2) | db %1000 0011, HeroOverViewInventoryIconButton13DY,HeroOverViewInventoryIconButton13DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton13DX,HeroOverViewInventoryIconButton13DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2576 dw $0000 + (HeroOverViewInventoryIconButton14DY*128) + (HeroOverViewInventoryIconButton14DX/2) | db %1000 0011, HeroOverViewInventoryIconButton14DY,HeroOverViewInventoryIconButton14DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton14DX,HeroOverViewInventoryIconButton14DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2577 dw $0000 + (HeroOverViewInventoryIconButton15DY*128) + (HeroOverViewInventoryIconButton15DX/2) | db %1000 0011, HeroOverViewInventoryIconButton15DY,HeroOverViewInventoryIconButton15DY+HeroOverViewInventoryIconWindowButtonNY,HeroOverViewInventoryIconButton15DX,HeroOverViewInventoryIconButton15DX+HeroOverViewInventoryIconWindowButtonNX | dw $0000 + (HeroOverViewInventoryIconWindowButtonNY*256) + (HeroOverViewInventoryIconWindowButtonNX/2)2586HeroOverviewSpellIconButtonTableAmountOfButtons: db 82587HeroOverviewSpellIconButtonTable_Earth: 2588 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2589 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2590 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2591 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2593 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2594 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2595 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2596 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2598db 8 2599HeroOverviewSpellIconButtonTable_Fire: 2600 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2601 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2602 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2603 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2605 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2606 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2607 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2608 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2611db 8 2612HeroOverviewSpellIconButtonTable_Air: 2613 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2614 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2615 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2616 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2618 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2619 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2620 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2621 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2623db 8 2624HeroOverviewSpellIconButtonTable_Water: 2625 dw $0000 + (HeroOverViewSpellIconButton1DY*128) + (HeroOverViewSpellIconButton1DX/2) | db %1000 0011, HeroOverViewSpellIconButton1DY,HeroOverViewSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton1DX,HeroOverViewSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2626 dw $0000 + (HeroOverViewSpellIconButton2DY*128) + (HeroOverViewSpellIconButton2DX/2) | db %1000 0011, HeroOverViewSpellIconButton2DY,HeroOverViewSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton2DX,HeroOverViewSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2627 dw $0000 + (HeroOverViewSpellIconButton3DY*128) + (HeroOverViewSpellIconButton3DX/2) | db %1000 0011, HeroOverViewSpellIconButton3DY,HeroOverViewSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton3DX,HeroOverViewSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2628 dw $0000 + (HeroOverViewSpellIconButton4DY*128) + (HeroOverViewSpellIconButton4DX/2) | db %1000 0011, HeroOverViewSpellIconButton4DY,HeroOverViewSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton4DX,HeroOverViewSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2630 dw $0000 + (HeroOverViewSpellIconButton5DY*128) + (HeroOverViewSpellIconButton5DX/2) | db %1000 0011, HeroOverViewSpellIconButton5DY,HeroOverViewSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton5DX,HeroOverViewSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2631 dw $0000 + (HeroOverViewSpellIconButton6DY*128) + (HeroOverViewSpellIconButton6DX/2) | db %1000 0011, HeroOverViewSpellIconButton6DY,HeroOverViewSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton6DX,HeroOverViewSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2632 dw $0000 + (HeroOverViewSpellIconButton7DY*128) + (HeroOverViewSpellIconButton7DX/2) | db %1000 0011, HeroOverViewSpellIconButton7DY,HeroOverViewSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton7DX,HeroOverViewSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2633 dw $0000 + (HeroOverViewSpellIconButton8DY*128) + (HeroOverViewSpellIconButton8DX/2) | db %1000 0011, HeroOverViewSpellIconButton8DY,HeroOverViewSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,HeroOverViewSpellIconButton8DX,HeroOverViewSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2635db 8 2636BattleSpellIconButtons: 2637 dw $0000 + (BattleSpellIconButton1DY*128) + (BattleSpellIconButton1DX/2) | db %1000 0011, BattleSpellIconButton1DY,BattleSpellIconButton1DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton1DX,BattleSpellIconButton1DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2638 dw $0000 + (BattleSpellIconButton2DY*128) + (BattleSpellIconButton2DX/2) | db %1000 0011, BattleSpellIconButton2DY,BattleSpellIconButton2DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton2DX,BattleSpellIconButton2DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2639 dw $0000 + (BattleSpellIconButton3DY*128) + (BattleSpellIconButton3DX/2) | db %1000 0011, BattleSpellIconButton3DY,BattleSpellIconButton3DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton3DX,BattleSpellIconButton3DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2640 dw $0000 + (BattleSpellIconButton4DY*128) + (BattleSpellIconButton4DX/2) | db %1000 0011, BattleSpellIconButton4DY,BattleSpellIconButton4DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton4DX,BattleSpellIconButton4DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2642 dw $0000 + (BattleSpellIconButton5DY*128) + (BattleSpellIconButton5DX/2) | db %1000 0011, BattleSpellIconButton5DY,BattleSpellIconButton5DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton5DX,BattleSpellIconButton5DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2643 dw $0000 + (BattleSpellIconButton6DY*128) + (BattleSpellIconButton6DX/2) | db %1000 0011, BattleSpellIconButton6DY,BattleSpellIconButton6DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton6DX,BattleSpellIconButton6DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2644 dw $0000 + (BattleSpellIconButton7DY*128) + (BattleSpellIconButton7DX/2) | db %1000 0011, BattleSpellIconButton7DY,BattleSpellIconButton7DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton7DX,BattleSpellIconButton7DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2645 dw $0000 + (BattleSpellIconButton8DY*128) + (BattleSpellIconButton8DX/2) | db %1000 0011, BattleSpellIconButton8DY,BattleSpellIconButton8DY+HeroOverViewSpellIconWindowButtonNY,BattleSpellIconButton8DX,BattleSpellIconButton8DX+HeroOverViewSpellIconWindowButtonNX | dw $0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2647BattleSpellIconButton1DX: equ SpellBookX + 0402648BattleSpellIconButton1DY: equ SpellBookY + 0502649BattleSpellIconButton2DX: equ SpellBookX + 0702650BattleSpellIconButton2DY: equ SpellBookY + 0542651BattleSpellIconButton3DX: equ SpellBookX + 0382652BattleSpellIconButton3DY: equ SpellBookY + 0952653BattleSpellIconButton4DX: equ SpellBookX + 0682654BattleSpellIconButton4DY: equ SpellBookY + 0992655BattleSpellIconButton5DX: equ SpellBookX + 1082656BattleSpellIconButton5DY: equ SpellBookY + 0542657BattleSpellIconButton6DX: equ SpellBookX + 1382658BattleSpellIconButton6DY: equ SpellBookY + 0502659BattleSpellIconButton7DX: equ SpellBookX + 1102660BattleSpellIconButton7DY: equ SpellBookY + 0992661BattleSpellIconButton8DX: equ SpellBookX + 1402662BattleSpellIconButton8DY: equ SpellBookY + 0952666ButtonTableSpellIconsEarthSYSX:2667 dw $4000 + (HeroOverViewSpellIconButton1OffSY*128) + (HeroOverViewSpellIconButton1OffSX/2) - 1282668 dw $4000 + (HeroOverViewSpellIconButton1MouseOverSY*128) + (HeroOverViewSpellIconButton1MouseOverSX/2) - 1282669 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282671 dw $4000 + (HeroOverViewSpellIconButton2OffSY*128) + (HeroOverViewSpellIconButton2OffSX/2) - 1282672 dw $4000 + (HeroOverViewSpellIconButton2MouseOverSY*128) + (HeroOverViewSpellIconButton2MouseOverSX/2) - 1282673 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282675 dw $4000 + (HeroOverViewSpellIconButton3OffSY*128) + (HeroOverViewSpellIconButton3OffSX/2) - 1282676 dw $4000 + (HeroOverViewSpellIconButton3MouseOverSY*128) + (HeroOverViewSpellIconButton3MouseOverSX/2) - 1282677 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282679 dw $4000 + (HeroOverViewSpellIconButton4OffSY*128) + (HeroOverViewSpellIconButton4OffSX/2) - 1282680 dw $4000 + (HeroOverViewSpellIconButton4MouseOverSY*128) + (HeroOverViewSpellIconButton4MouseOverSX/2) - 1282681 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282683 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282684 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282685 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282687 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282688 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282689 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282691 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282692 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282693 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282695 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282696 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282697 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282699ButtonTableSpellIconsFireSYSX:2700 dw $4000 + (HeroOverViewSpellIconButton5OffSY*128) + (HeroOverViewSpellIconButton5OffSX/2) - 1282701 dw $4000 + (HeroOverViewSpellIconButton5MouseOverSY*128) + (HeroOverViewSpellIconButton5MouseOverSX/2) - 1282702 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282704 dw $4000 + (HeroOverViewSpellIconButton6OffSY*128) + (HeroOverViewSpellIconButton6OffSX/2) - 1282705 dw $4000 + (HeroOverViewSpellIconButton6MouseOverSY*128) + (HeroOverViewSpellIconButton6MouseOverSX/2) - 1282706 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282708 dw $4000 + (HeroOverViewSpellIconButton7OffSY*128) + (HeroOverViewSpellIconButton7OffSX/2) - 1282709 dw $4000 + (HeroOverViewSpellIconButton7MouseOverSY*128) + (HeroOverViewSpellIconButton7MouseOverSX/2) - 1282710 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282712 dw $4000 + (HeroOverViewSpellIconButton8OffSY*128) + (HeroOverViewSpellIconButton8OffSX/2) - 1282713 dw $4000 + (HeroOverViewSpellIconButton8MouseOverSY*128) + (HeroOverViewSpellIconButton8MouseOverSX/2) - 1282714 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282716 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282717 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282718 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282720 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282721 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282722 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282724 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282725 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282726 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282728 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282729 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282730 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282732ButtonTableSpellIconsAirSYSX:2733 dw $4000 + (HeroOverViewSpellIconButton9OffSY*128) + (HeroOverViewSpellIconButton9OffSX/2) - 1282734 dw $4000 + (HeroOverViewSpellIconButton9MouseOverSY*128) + (HeroOverViewSpellIconButton9MouseOverSX/2) - 1282735 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282737 dw $4000 + (HeroOverViewSpellIconButton10OffSY*128) + (HeroOverViewSpellIconButton10OffSX/2) - 1282738 dw $4000 + (HeroOverViewSpellIconButton10MouseOverSY*128) + (HeroOverViewSpellIconButton10MouseOverSX/2) - 1282739 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282741 dw $4000 + (HeroOverViewSpellIconButton11OffSY*128) + (HeroOverViewSpellIconButton11OffSX/2) - 1282742 dw $4000 + (HeroOverViewSpellIconButton11MouseOverSY*128) + (HeroOverViewSpellIconButton11MouseOverSX/2) - 1282743 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282745 dw $4000 + (HeroOverViewSpellIconButton12OffSY*128) + (HeroOverViewSpellIconButton12OffSX/2) - 1282746 dw $4000 + (HeroOverViewSpellIconButton12MouseOverSY*128) + (HeroOverViewSpellIconButton12MouseOverSX/2) - 1282747 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282749 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282750 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282751 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282753 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282754 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282755 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282757 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282758 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282759 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282761 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282762 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282763 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282765ButtonTableSpellIconsWaterSYSX:2766 dw $4000 + (HeroOverViewSpellIconButton13OffSY*128) + (HeroOverViewSpellIconButton13OffSX/2) - 1282767 dw $4000 + (HeroOverViewSpellIconButton13MouseOverSY*128) + (HeroOverViewSpellIconButton13MouseOverSX/2) - 1282768 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282770 dw $4000 + (HeroOverViewSpellIconButton14OffSY*128) + (HeroOverViewSpellIconButton14OffSX/2) - 1282771 dw $4000 + (HeroOverViewSpellIconButton14MouseOverSY*128) + (HeroOverViewSpellIconButton14MouseOverSX/2) - 1282772 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282774 dw $4000 + (HeroOverViewSpellIconButton15OffSY*128) + (HeroOverViewSpellIconButton15OffSX/2) - 1282775 dw $4000 + (HeroOverViewSpellIconButton15MouseOverSY*128) + (HeroOverViewSpellIconButton15MouseOverSX/2) - 1282776 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282778 dw $4000 + (HeroOverViewSpellIconButton16OffSY*128) + (HeroOverViewSpellIconButton16OffSX/2) - 1282779 dw $4000 + (HeroOverViewSpellIconButton16MouseOverSY*128) + (HeroOverViewSpellIconButton16MouseOverSX/2) - 1282780 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282782 dw $4000 + (HeroOverViewSpellIconButton17OffSY*128) + (HeroOverViewSpellIconButton17OffSX/2) - 1282783 dw $4000 + (HeroOverViewSpellIconButton17MouseOverSY*128) + (HeroOverViewSpellIconButton17MouseOverSX/2) - 1282784 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282786 dw $4000 + (HeroOverViewSpellIconButton18OffSY*128) + (HeroOverViewSpellIconButton18OffSX/2) - 1282787 dw $4000 + (HeroOverViewSpellIconButton18MouseOverSY*128) + (HeroOverViewSpellIconButton18MouseOverSX/2) - 1282788 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282790 dw $4000 + (HeroOverViewSpellIconButton19OffSY*128) + (HeroOverViewSpellIconButton19OffSX/2) - 1282791 dw $4000 + (HeroOverViewSpellIconButton19MouseOverSY*128) + (HeroOverViewSpellIconButton19MouseOverSX/2) - 1282792 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282794 dw $4000 + (HeroOverViewSpellIconButton20OffSY*128) + (HeroOverViewSpellIconButton20OffSX/2) - 1282795 dw $4000 + (HeroOverViewSpellIconButton20MouseOverSY*128) + (HeroOverViewSpellIconButton20MouseOverSX/2) - 1282796 dw $4000 + (HeroOverViewSpellIconButtonMouseClickedSY*128) + (HeroOverViewSpellIconButtonMouseClickedSX/2) - 1282799HeroOverViewSpellIconButton1OffSX: equ 2242800HeroOverViewSpellIconButton1OffSY: equ 0002801HeroOverViewSpellIconButton1MouseOverSX: equ 2402802HeroOverViewSpellIconButton1MouseOverSY: equ 0002803HeroOverViewSpellIconButtonMouseClickedSX: equ 1922804HeroOverViewSpellIconButtonMouseClickedSY: equ 1502806HeroOverViewSpellIconButton2OffSX: equ 2242807HeroOverViewSpellIconButton2OffSY: equ 0162808HeroOverViewSpellIconButton2MouseOverSX: equ 2402809HeroOverViewSpellIconButton2MouseOverSY: equ 0162811HeroOverViewSpellIconButton3OffSX: equ 2242812HeroOverViewSpellIconButton3OffSY: equ 0322813HeroOverViewSpellIconButton3MouseOverSX: equ 2402814HeroOverViewSpellIconButton3MouseOverSY: equ 0322816HeroOverViewSpellIconButton4OffSX: equ 2242817HeroOverViewSpellIconButton4OffSY: equ 0482818HeroOverViewSpellIconButton4MouseOverSX: equ 2402819HeroOverViewSpellIconButton4MouseOverSY: equ 0482821HeroOverViewSpellIconButton5OffSX: equ 2242822HeroOverViewSpellIconButton5OffSY: equ 0642823HeroOverViewSpellIconButton5MouseOverSX: equ 2402824HeroOverViewSpellIconButton5MouseOverSY: equ 0642826HeroOverViewSpellIconButton6OffSX: equ 2242827HeroOverViewSpellIconButton6OffSY: equ 0802828HeroOverViewSpellIconButton6MouseOverSX: equ 2402829HeroOverViewSpellIconButton6MouseOverSY: equ 0802831HeroOverViewSpellIconButton7OffSX: equ 2242832HeroOverViewSpellIconButton7OffSY: equ 0962833HeroOverViewSpellIconButton7MouseOverSX: equ 2402834HeroOverViewSpellIconButton7MouseOverSY: equ 0962836HeroOverViewSpellIconButton8OffSX: equ 2242837HeroOverViewSpellIconButton8OffSY: equ 1122838HeroOverViewSpellIconButton8MouseOverSX: equ 2402839HeroOverViewSpellIconButton8MouseOverSY: equ 1122841HeroOverViewSpellIconButton9OffSX: equ 2242842HeroOverViewSpellIconButton9OffSY: equ 1282843HeroOverViewSpellIconButton9MouseOverSX: equ 2402844HeroOverViewSpellIconButton9MouseOverSY: equ 1282846HeroOverViewSpellIconButton10OffSX: equ 2242847HeroOverViewSpellIconButton10OffSY: equ 1442848HeroOverViewSpellIconButton10MouseOverSX: equ 2402849HeroOverViewSpellIconButton10MouseOverSY: equ 1442851HeroOverViewSpellIconButton11OffSX: equ 2242852HeroOverViewSpellIconButton11OffSY: equ 1602853HeroOverViewSpellIconButton11MouseOverSX: equ 2402854HeroOverViewSpellIconButton11MouseOverSY: equ 1602856HeroOverViewSpellIconButton12OffSX: equ 2242857HeroOverViewSpellIconButton12OffSY: equ 1762858HeroOverViewSpellIconButton12MouseOverSX: equ 2402859HeroOverViewSpellIconButton12MouseOverSY: equ 1762863HeroOverViewSpellIconButton13OffSX: equ 0002864HeroOverViewSpellIconButton13OffSY: equ 1842865HeroOverViewSpellIconButton13MouseOverSX: equ 0162866HeroOverViewSpellIconButton13MouseOverSY: equ 1842868HeroOverViewSpellIconButton14OffSX: equ 0322869HeroOverViewSpellIconButton14OffSY: equ 1842870HeroOverViewSpellIconButton14MouseOverSX: equ 0482871HeroOverViewSpellIconButton14MouseOverSY: equ 1842873HeroOverViewSpellIconButton15OffSX: equ 0642874HeroOverViewSpellIconButton15OffSY: equ 1842875HeroOverViewSpellIconButton15MouseOverSX: equ 0802876HeroOverViewSpellIconButton15MouseOverSY: equ 1842878HeroOverViewSpellIconButton16OffSX: equ 0962879HeroOverViewSpellIconButton16OffSY: equ 1842880HeroOverViewSpellIconButton16MouseOverSX: equ 1122881HeroOverViewSpellIconButton16MouseOverSY: equ 1842885HeroOverViewSpellIconButton17OffSX: equ 1282886HeroOverViewSpellIconButton17OffSY: equ 1842887HeroOverViewSpellIconButton17MouseOverSX: equ 1442888HeroOverViewSpellIconButton17MouseOverSY: equ 1842890HeroOverViewSpellIconButton18OffSX: equ 1602891HeroOverViewSpellIconButton18OffSY: equ 1842892HeroOverViewSpellIconButton18MouseOverSX: equ 1762893HeroOverViewSpellIconButton18MouseOverSY: equ 1842895HeroOverViewSpellIconButton19OffSX: equ 1922896HeroOverViewSpellIconButton19OffSY: equ 1842897HeroOverViewSpellIconButton19MouseOverSX: equ 2082898HeroOverViewSpellIconButton19MouseOverSY: equ 1842900HeroOverViewSpellIconButton20OffSX: equ 1922901HeroOverViewSpellIconButton20OffSY: equ 1682902HeroOverViewSpellIconButton20MouseOverSX: equ 2082903HeroOverViewSpellIconButton20MouseOverSY: equ 1682906ButtonTableSpellBookSYSX_Earth:29072911 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282912 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282913 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1282915 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282916 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282917 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282919 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282920 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282921 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282923ButtonTableSpellBookSYSX_Fire:2924 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282925 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282926 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 12829282932 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282933 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282934 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282936 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282937 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282938 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282940ButtonTableSpellBookSYSX_Air:2941 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282942 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282943 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1282945 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282946 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282947 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 12829492953 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282954 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282955 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282957ButtonTableSpellBookSYSX_Water:2958 dw $4000 + (HeroOverViewSpellBookButton1OffSY*128) + (HeroOverViewSpellBookButton1OffSX/2) - 1282959 dw $4000 + (HeroOverViewSpellBookButton1MouseOverSY*128) + (HeroOverViewSpellBookButton1MouseOverSX/2) - 1282960 dw $4000 + (HeroOverViewSpellBookButton1MouseClickedSY*128) + (HeroOverViewSpellBookButton1MouseClickedSX/2) - 1282962 dw $4000 + (HeroOverViewSpellBookButton2OffSY*128) + (HeroOverViewSpellBookButton2OffSX/2) - 1282963 dw $4000 + (HeroOverViewSpellBookButton2MouseOverSY*128) + (HeroOverViewSpellBookButton2MouseOverSX/2) - 1282964 dw $4000 + (HeroOverViewSpellBookButton2MouseClickedSY*128) + (HeroOverViewSpellBookButton2MouseClickedSX/2) - 1282966 dw $4000 + (HeroOverViewSpellBookButton3OffSY*128) + (HeroOverViewSpellBookButton3OffSX/2) - 1282967 dw $4000 + (HeroOverViewSpellBookButton3MouseOverSY*128) + (HeroOverViewSpellBookButton3MouseOverSX/2) - 1282968 dw $4000 + (HeroOverViewSpellBookButton3MouseClickedSY*128) + (HeroOverViewSpellBookButton3MouseClickedSX/2) - 1282970 dw $4000 + (HeroOverViewSpellBookButton4OffSY*128) + (HeroOverViewSpellBookButton4OffSX/2) - 1282971 dw $4000 + (HeroOverViewSpellBookButton4MouseOverSY*128) + (HeroOverViewSpellBookButton4MouseOverSX/2) - 1282972 dw $4000 + (HeroOverViewSpellBookButton4MouseClickedSY*128) + (HeroOverViewSpellBookButton4MouseClickedSX/2) - 1282974ActivatedSkillsButton: ds 229752977SetSkillsDescription?: db 12978MenuOptionSelected?: db 02979MenuOptionSelected?Backup: db 2552980MenuOptionSelected?BackupLastFrame: db 2552982PreviousButtonClicked: ds 12983PreviousButtonClickedIX: ds 22984AreWeInTavern1OrRecruit2?: ds 12986PreviousButton2Clicked: ds 12987PreviousButton2ClickedIX: ds 22990LenghtTextSkillsDescription: equ EndFirstLine-TextSkillsWindowButton12991TextSkillsWindowButton1: 2992 db "                                 ",2552993EndFirstLine:2994 db "                                 ",2542995 db "                                 ",2542996 db "                                 ",2552997TextSkillsWindowButton2: 2998 db "                                 ",255 2999 db "                                 ",2543000 db "                                 ",2543001 db "                                 ",2553002TextSkillsWindowButton3: 3003 db "                                 ",255 3004 db "                                 ",2543005 db "                                 ",2543006 db "                                 ",2553007TextSkillsWindowButton4: 3008 db "                                 ",255 3009 db "                                 ",2543010 db "                                 ",2543011 db "                                 ",2553012TextSkillsWindowButton5: 3013 db "                                 ",255 3014 db "                                 ",2543015 db "                                 ",2543016 db "                                 ",2553017TextSkillsWindowButton6: 3018 db "                                 ",255 3019 db "                                 ",2543020 db "                                 ",2543021 db "                                 ",2553023ButtonOff: equ 03024ButtonMouseOver: equ 23025ButtonOMouseClicked: equ 43026ButtonTableSYSX:3027 dw $4000 + (HeroOverViewFirstWindowButtonOffSY*128) + (HeroOverViewFirstWindowButtonOffSX/2) - 1283028 dw $4000 + (HeroOverViewFirstWindowButtonMouseOverSY*128) + (HeroOverViewFirstWindowButtonMouseOverSX/2) - 1283029 dw $4000 + (HeroOverViewFirstWindowButtonMouseClickedSY*128) + (HeroOverViewFirstWindowButtonMouseClickedSX/2) - 1283031ButtonTableSkillsSYSX:3032 dw $4000 + (HeroOverViewSkillsButtonOffSY*128) + (HeroOverViewSkillsButtonOffSX/2) - 1283033 dw $4000 + (HeroOverViewSkillsButtonMouseOverSY*128) + (HeroOverViewSkillsButtonMouseOverSX/2) - 1283034 dw $4000 + (HeroOverViewSkillsButtonMouseClickedSY*128) + (HeroOverViewSkillsButtonMouseClickedSX/2) - 1283036BCStored: ds 23037TextAddresspointer: ds 23038TextPointer: ds 23039TextDX: ds 13041PutLetter:3042 db 000,000,212,000 3043 db 010,000,010,001 3044 db 005,000,005,000 3045 db 000,000,$98 3047EnterHeroOverviewMenu:3048 ld a,13049 ld (GameStatus),a 3051 ld a,(slot.page12rom) 3052 out ($a8),a 3054 ld a,HeroOverviewCodeBlock 3055 call block12 3057 xor a3058 ld (MenuOptionSelected?),a3059 ld a,2553060 ld (MenuOptionSelected?Backup),a 3061 ld (MenuOptionSelected?BackupLastFrame),a3063 xor a3064 ld (SetHeroOverViewMenu?),a3067 call HeroOverviewCode30683074 xor a3075 ld (GameStatus),a 3077 ld hl,CursorBoots3078 ld (CurrentCursorSpriteCharacter),hl3080 call ClearMapPage0AndMapPage1 3082 ld a,(slot.page1rom) 3083 out ($a8),a 3085 xor a3086 ld (vblankintflag),a3087 3088 ld (putmovementstars?),a3089 ld (mouseclickx),a 3090 ld (mouseclicky),a 3099 ld a,%0001 00003100 ld (ControlsOnInterrupt),a3101 ret3103SetSpatInCastle:3104 ld hl,SpatInCastle3105 ld de,spat + (3*4)3106 ld bc,13*43107 ldir3108 ret3110SetSpatInGame:3111 ld hl,SpatInGame3112 ld de,spat + (3*4)3113 ld bc,13*43114 ldir3115 ret3117ChangeSong?: db 03118ReloadAllObjectsInVram?: db 0 3119SetNewBuilding?: db 0 3120EnterCastle:3121 ld a,StopSong3122 ld (ChangeSong?),a3124 ld a,23125 ld (GameStatus),a 3127 in a,($a8) 3128 push af 3129 ld a,(memblocks.1)3130 push af3132 ld a,(slot.page12rom) 3133 out ($a8),a 3135 ld a,CastleOverviewCodeBlock 3136 call block1234 3138 call SetSpatInCastle3140 call CastleOverviewCode31413147 ld a,StopSong3148 ld (ChangeSong?),a3149 halt 3151 call SetSpatInGame3153 pop af3154 call block12 3155 pop af3156 out ($a8),a 3158 xor a3159 ld (GameStatus),a 3160 ld (vblankintflag),a3161 3162 ld (putmovementstars?),a3163 ld (mouseclickx),a 3164 ld (mouseclicky),a 3165 ld (framecounter),a31663167 ld (movehero?),a 31683174 ld a,%0001 00003175 ld (ControlsOnInterrupt),a3177 call SetTempisr 3179 ld a,(mappointery)3180 ld b,a3181 ld a,(mappointerx)3182 ld c,a3183 push bc 3184 3185 call SetScreenOff3187 ld a,(ReloadAllObjectsInVram?) 3188 or a3189 call nz,LoadAllObjectsInVram 3190 xor a3191 ld (ReloadAllObjectsInVram?),a 3193 ld hl,InGamePalette3194 call SetPalette3195 call LoadHud 3196 call SetInterruptHandler 3197 call SetAllSpriteCoordinatesInPage2 3198 call SetAllHeroPosesInVram 3199 call InitiatePlayerTurn 3200 call ClearMapPage0AndMapPage13201 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady3202 call DoCopy32033204 call CenterMousePointer3206 ld hl,03207 ld (CurrentCursorSpriteCharacter),hl3209 pop bc 3210 ld a,b3211 ld (mappointery),a3212 ld a,c3213 ld (mappointerx),a3215 ld a,WorldSong3216 ld (ChangeSong?),a3218 jp LevelEngine3220SwapAndSetPage:3221 ld a,(activepage) 3222 xor 1 3223 ld (activepage),a 3224 jp SetPageSpecial 3226SwapButDontSetPage:3227 ld a,(activepage) 3228 xor 1 3229 ld (activepage),a 3230 ret3232EnterCombat:3233 ld a,StopSong3234 ld (ChangeSong?),a3236 ld a,33237 ld (GameStatus),a 3239 in a,($a8) 3240 push af 3241 ld a,(memblocks.1)3242 push af3244 ld a,(slot.page12rom) 3245 out ($a8),a 3247 ld a,BattleCodeBlock 3248 call block1234 3250 call SetSpatInCastle3251 call InitiateBattle3252 halt 3253 call SetSpatInGame3255 pop af3256 call block12 3257 pop af3258 out ($a8),a 3260 xor a3261 ld (GameStatus),a 3262 ld (vblankintflag),a3263 3264 ld (putmovementstars?),a3265 ld (mouseclickx),a 3266 ld (mouseclicky),a 3267 ld (framecounter),a3268 ld (movehero?),a 3269 ld (WhichHudButtonClicked?),a3270 ld (MenuOptionSelected?),a3272 xor a 3273 di3274 out ($99),a3275 ld a,23+1283276 ei3277 out ($99),a3279 call SetTempisr 3281 ld a,WorldSong3282 ld (ChangeSong?),a3284 jp StartGame.WhenExitingCombat3286SetAllSpriteCoordinatesInPage2:3287 ld hl,0*128+(000/2) - 128 3288 ld (pl1hero1y+HeroDYDX),hl3289 ld hl,0*128+(016/2) - 128 3290 ld (pl1hero2y+HeroDYDX),hl3291 ld hl,0*128+(032/2) - 128 3292 ld (pl1hero3y+HeroDYDX),hl3293 ld hl,0*128+(048/2) - 128 3294 ld (pl1hero4y+HeroDYDX),hl3295 ld hl,0*128+(064/2) - 128 3296 ld (pl1hero5y+HeroDYDX),hl3297 ld hl,0*128+(080/2) - 128 3298 ld (pl1hero6y+HeroDYDX),hl3299 ld hl,0*128+(096/2) - 128 3300 ld (pl1hero7y+HeroDYDX),hl3301 ld hl,0*128+(112/2) - 128 3302 ld (pl1hero8y+HeroDYDX),hl3303 3304 ld hl,0*128+(128/2) - 128 3305 ld (pl2hero1y+HeroDYDX),hl3306 ld hl,0*128+(144/2) - 128 3307 ld (pl2hero2y+HeroDYDX),hl3308 ld hl,0*128+(160/2) - 128 3309 ld (pl2hero3y+HeroDYDX),hl3310 ld hl,0*128+(176/2) - 128 3311 ld (pl2hero4y+HeroDYDX),hl3312 ld hl,0*128+(192/2) - 128 3313 ld (pl2hero5y+HeroDYDX),hl3314 ld hl,0*128+(208/2) - 128 3315 ld (pl2hero6y+HeroDYDX),hl3316 ld hl,0*128+(224/2) - 128 3317 ld (pl2hero7y+HeroDYDX),hl3318 ld hl,0*128+(240/2) - 128 3319 ld (pl2hero8y+HeroDYDX),hl3320 3321 ld hl,32*128+(000/2) - 128 3322 ld (pl3hero1y+HeroDYDX),hl3323 ld hl,32*128+(016/2) - 128 3324 ld (pl3hero2y+HeroDYDX),hl3325 ld hl,32*128+(032/2) - 128 3326 ld (pl3hero3y+HeroDYDX),hl3327 ld hl,32*128+(048/2) - 128 3328 ld (pl3hero4y+HeroDYDX),hl3329 ld hl,32*128+(064/2) - 128 3330 ld (pl3hero5y+HeroDYDX),hl3331 ld hl,32*128+(080/2) - 128 3332 ld (pl3hero6y+HeroDYDX),hl3333 ld hl,32*128+(096/2) - 128 3334 ld (pl3hero7y+HeroDYDX),hl3335 ld hl,32*128+(112/2) - 128 3336 ld (pl3hero8y+HeroDYDX),hl3337 3338 ld hl,32*128+(128/2) - 128 3339 ld (pl4hero1y+HeroDYDX),hl3340 ld hl,32*128+(144/2) - 128 3341 ld (pl4hero2y+HeroDYDX),hl3342 ld hl,32*128+(160/2) - 128 3343 ld (pl4hero3y+HeroDYDX),hl3344 ld hl,32*128+(176/2) - 128 3345 ld (pl4hero4y+HeroDYDX),hl3346 ld hl,32*128+(192/2) - 128 3347 ld (pl4hero5y+HeroDYDX),hl3348 ld hl,32*128+(208/2) - 128 3349 ld (pl4hero6y+HeroDYDX),hl3350 ld hl,32*128+(224/2) - 128 3351 ld (pl4hero7y+HeroDYDX),hl3352 ld hl,32*128+(240/2) - 128 3353 ld (pl4hero8y+HeroDYDX),hl3354 ret3356LoadAllObjectsInVram: 3357 ld hl,$4000 + (000*128) + (000/2) - 1283358 ld (AddressToWriteFrom),hl3359 ld de,$0000 + (064*128) + (000/2) - 128 3360 ld (AddressToWriteTo),de 3361 ld bc,$0000 + (192*256) + (256/2)3362 ld (NXAndNY),bc3363 ld a,World1ObjectsBlock 3364 ld (BlockToReadFrom),a3365 jp CopyRamToVramPage3ForBattleEngine 3367SetMapPalette:3368 ld a,(ix+7) 3369 ld (InGamePalette),a3370 ld a,(ix+8) 3371 ld (InGamePalette+1),a3372 ld a,(ix+9) 3373 ld (InGamePalette+2),a3374 ld a,(ix+10) 3375 ld (InGamePalette+3),a3377 ld hl,InGamePalette3378 jp SetPalette 3380SetBattleScreenBlock:3381 ld a,(ix+11) 3382 ld (BattleGraphicsBlock),a3383 ret3385CastleOverviewPalette:33863387 incbin"..\grapx\CastleOverview\CastleOverview.pl"33883390LoadHud:3391 ld a,13392 ld (activepage),a 3394 ld hl,$4000 + (000*128) + (000/2) - 1283395 ld de,$0000 + (000*128) + (000/2) - 1283396 ld bc,$0000 + (212*256) + (256/2)3397 ld a,HudNewBlock 3398 call CopyRamToVramCorrectedCastleOverview 34003403 ld hl,LoadMiniMap 3404 call ExecuteLoaderRoutine3406 call RepairDecorationEdgesHud3408 ld hl,SetCastlesInMiniMap 3409 call ExecuteLoaderRoutine3411 ld hl,CopyPage0To13412 call docopy3414 ld hl,CopyMovementArrows1 3415 call docopy3416 ld hl,CopyMovementArrows2 3417 call docopy3418 ld hl,CopyMovementBlackArrows1 3419 call docopy3420 ld hl,CopyMovementBlackArrows2 3421 call docopy34233431 ret3433CopyMovementArrows1:3434 db 10,0,13,03435 db 96,0,222,03436 db 160,0,10,03437 db 0,0,$d03439CopyMovementArrows2:3440 db 10,0,23,03441 db 96,0,246,03442 db 160,0,10,03443 db 0,0,$d03445CopyMovementBlackArrows1:3446 db 10,0,33,03447 db 96,0,222,13448 db 160,0,10,03449 db 0,0,$d03451CopyMovementBlackArrows2:3452 db 10,0,43,03453 db 96,0,246,13454 db 160,0,10,03455 db 0,0,$d03458RepairDecorationEdgesHud: 3459 ld hl,$4000 + (005*128) + (202/2) - 1283460 ld de,256*005 + 202 3461 ld bc,$0000 + (005*256) + (050/2)3462 ld a,HudNewBlock 3463 exx3464 ex af,af'3465 ld hl,CopyTransparantImageEXX3466 call EnterSpecificRoutineInCastleOverviewCode3468 ld hl,$4000 + (050*128) + (202/2) - 1283469 ld de,256*050 + 202 3470 ld bc,$0000 + (003*256) + (050/2)3471 ld a,HudNewBlock 3472 exx3473 ex af,af'3474 ld hl,CopyTransparantImageEXX3475 jp EnterSpecificRoutineInCastleOverviewCode3477LoadWorldTiles:3478 ld ix,(WorldPointer)3479 3480 ld a,(slot.page1rom) 3481 out ($a8),a 3482 ld a,Loaderblock 3483 call block12 3485 ld hl,$4000 + (000*128) + (000/2) - 1283486 ld (AddressToWriteFrom),hl3487 ld de,$8000 + (000*128) + (000/2) - 128 3488 ld (AddressToWriteTo),de 3489 ld bc,$0000 + (000*256) + (256/2)3490 ld (NXAndNY),bc3491 ld a,(ix+6) 3492 ld (BlockToReadFrom),a3493 jp CopyRamToVramPage3ForBattleEngine 3497LoadWorldMapAndObjectLayerMap:3498 ld ix,(WorldPointer)3499 3500 ld a,(slot.page1rom) 3501 out ($a8),a 3502 ld a,Loaderblock 3503 call block12 3505 ld l,(ix+4) 3506 ld h,(ix+5) 3507 push hl3508 ld a,(ix+3) 3509 push af3510 ld a,(ix+0) 3511 ld l,(ix+1) 3512 ld h,(ix+2)3513 35143515 call block12 3517 ld a,1 3518 out ($fe),a 3519 3520 ld de,$80003521 call Depack35233524 pop af3525 call block12 3527 ld a,2 3528 out ($fe),a 3530 pop hl3531 ld de,$80003532 call Depack3533 ret3535CopyTilePiece:3536 db 0,0,0,33537 db XMiniMap,0,YMiniMap,03538 db 1,0,1,03539 db 0,%0000 0000,$983540 3541InGamePalette:3542 incbin"..\grapx\tilesheets\PaletteGentleCave.pl"35433550SetInterruptHandler:3551 di3552 ld hl,InterruptHandler 3553 ld ($38+1),hl 3554 ld a,$c3 3555 ld ($38),a3556 3557 ld a,(VDP_0) 3558 and %1110 111135593560 ld (VDP_0),a 3561 out ($99),a3562 ld a,1283563 ei3564 out ($99),a3565 ret3567 3568SetTempisr: 35693570 di3571 ld hl,.tempisr3572 ld de,$383573 ld bc,63574 ldir3575 ei3576 ret3578.tempisr:3579 push af3580 in a,($99) 3581 pop af3582 ei 3583 ret3585sprcoladdr: equ $74003586sprattaddr: equ $76003587sprcharaddr: equ $78003588SpriteInitialize:3589 ld a,(vdp_0+1)3590 or 2 3591 di3592 out ($99),a3593 ld a,1+1283594 ei3595 out ($99),a3597 ld a,%1110 11113598 ld (vdp_0+5),a3599 di36003601 out ($99),a 3602 ld a,5+1283603 out ($99),a36043605 ld a,%0000 0000 3606 ld (vdp_8+3),a3607 out ($99),a3608 ld a,11+1283609 out ($99),a3610 36113612 ld a,%0000 11113613 ld (vdp_0+6),a36143615 out ($99),a 3616 ld a,6+1283617 ei3618 out ($99),a3619 ret3621SetPage: 3622 di3623 out ($99),a3624 ld a,2+1283625 ei3626 out ($99),a3627 ret36323640364236483654365936623675block12High:3676 di3677 ld (memblocks.1),a3678 ld ($6100),a3679 ei3680 ret368236893700block12: 3701 di3702 ld (memblocks.1),a3703 ld ($6000),a3704 ei3705 ret3707block34: 3708 di3709 ld (memblocks.2),a3710 ld ($7000),a3711 ei3712 ret3714block1234: 3715 di3716 ld (memblocks.1),a3717 ld ($6000),a3718 inc a3719 ld (memblocks.2),a3720 ld ($7000),a3721 ei3722 ret3724TinyCopyWhichFunctionsAsWaitVDPReady:3725 db 0,0,0,03726 db 0,0,0,03727 db 1,0,1,03728 db 0,%0000 0000,$983730BuildingFadeIn:3731 db 0,0,0,13732 db 0,0,0,23733 db 1,0,1,03734 db 0,%0000 0000,$983736DoCopy:3737 ld a,323738 di3739 out ($99),a3740 ld a,17+1283741 ei3742 out ($99),a3743 ld c,$9b3744.vdpready:3745 ld a,23746 di3747 out ($99),a3748 ld a,15+1283749 out ($99),a3750 in a,($99)3751 rra3752 ld a,03753 out ($99),a3754 ld a,15+1283755 ei3756 out ($99),a3757 jr c,.vdpready37593763 dw $a3ed,$a3ed,$a3ed,$a3ed3764 dw $a3ed,$a3ed,$a3ed,$a3ed3765 dw $a3ed,$a3ed,$a3ed,$a3ed3766 dw $a3ed,$a3ed,$a3ed3767 ret3769currentpage: ds 13770sprcoltableaddress: ds 23771spratttableaddress: ds 23772sprchatableaddress: ds 23773invissprcoltableaddress: ds 23774invisspratttableaddress: ds 23775invissprchatableaddress: ds 23777SetPalette:3778 xor a3779 di3780 out ($99),a3781 ld a,16+1283782 out ($99),a3783 ld bc,$209A3784 otir3785 ei3786 ret37883791SetVdp_Read: rlc h3792 rla3793 rlc h3794 rla3795 srl h3796 srl h3797 di3798 out ($99),a 3799 ld a,14+1283800 out ($99),a3801 ld a,l 3803 out ($99),a3804 ld a,h 3805 ei 3806 out ($99),a3807 ret3808 38093812SetVdp_Write: 38133814 rlc h3815 rla3816 rlc h3817 rla3818 srl h3819 srl h3820 di3821 out ($99),a 3822 ld a,14+1283823 out ($99),a38243826 ld a,l 3828 out ($99),a3829 ld a,h 3830 or 64 3831 ei3832 out ($99),a 3833 ret38353838SetVdp_WriteWithoutDisablingOrEnablingInt: 38393840 rlc h3841 rla3842 rlc h3843 rla3844 srl h3845 srl h3846 out ($99),a 3847 ld a,14+1283848 out ($99),a38493851 ld a,l 3853 out ($99),a3854 ld a,h 3855 or 64 3856 out ($99),a 3857 ret3859Depack: 3860 inc hl 3861 inc hl 3862 inc hl3863 inc hl3865 ld a,1283866 3867 exx3868 ld de,13869 exx3870 3871.depack_loop:3872 call .getbits3873 jr c,.output_compressed 3874 ldi 3876 jr .depack_loop3877 38783879.output_compressed:3880 ld c,(hl) 3881 inc hl 3883.output_match:3884 ld b,03885 bit 7,c3886 jr z,.output_match1 3888 call .getbits3889 call .rlbgetbits3890 call .rlbgetbits3891 call .rlbgetbits3893 jr c,.output_match1 3894 res 7,c 3895.output_match1:3896 inc bc3897 38983900 exx 3901 ld h,d3902 ld l,e 3903 ld b,e 39053906.get_gamma_value_size:3907 exx3908 call .getbits3909 exx3910 jr nc,.get_gamma_value_size_end 3911 inc b 3912 jr .get_gamma_value_size 3914.get_gamma_value_bits:3915 exx3916 call .getbits3917 exx3918 3919 adc hl,hl 3920.get_gamma_value_size_end:3921 djnz .get_gamma_value_bits 3923.get_gamma_value_end:3924 inc hl 3925 exx 3926 3927 ret c39283930 push hl 3932 exx3933 push hl 3934 exx3936 ld h,d3937 ld l,e 3938 sbc hl,bc 3940 pop bc 3942 ldir 3944 pop hl 3946 jr .depack_loop3948.rlbgetbits:3949 rl b3950.getbits:3951 add a,a3952 ret nz3953 ld a,(hl)3954 inc hl3955 rla3956 ret 39583959freezecontrols?: db 039603965PopulateControls:3966 ld a,(freezecontrols?)3967 or a3968 jp nz,.freezecontrols39703972 3973 ld a,15 3974 di3975 out ($a0),a3976 ld a,$8f3977 out ($a1),a3978 ld a,14 3979 out ($a0),a3980 ei3981 in a,($a2)3982 cpl3983 and $3f 3984 ld c,a3986 ld de,$04F03987 3988 in a,($aa)3989 and e3990 or 63991 out ($aa),a3992 in a,($a9)3993 cpl3994 and $20 3995 rlca 3996 or c3997 ld c,a 3998 3999 in a,($aa) 4000 and e4001 or d4002 out ($aa),a4003 in a,($a9)4004 cpl4005 and d 4006 ld b,a4007 in a,($aa)4008 and e4009 or 84010 out ($aa),a4011 in a,($a9)4012 cpl 4013 and $F1 4014 rlca 4015 or b 4016 rla 4017 rla 4018 rla 4019 ld b,a4020 rla 4021 rla 4022 rla 4023 and d 4024 or b 4025 or c 4026 4027 ld b,a4028 ld hl,Controls4029 ld a,(hl)4030 xor b4031 and b4032 ld (NewPrContr),a4033 ld (hl),b40354039 ret4041.freezecontrols:4042 xor a4043 ld (Controls),a4044 ld (NewPrContr),a4045 ret4047PopulateControlsOnInterrupt: 4048 ld a,15 4050 out ($a0),a4051 ld a,$8f4052 out ($a1),a4053 ld a,14 4054 out ($a0),a40554056 in a,($a2)4057 cpl4058 and $3f 4059 ld c,a4061 ld de,$04F04062 4063 in a,($aa)4064 and e4065 or 64066 out ($aa),a4067 in a,($a9)4068 cpl4069 and $20 4070 rlca 4071 or c4072 ld c,a 4073 4074 in a,($aa) 4075 and e4076 or d4077 out ($aa),a4078 in a,($a9)4079 cpl4080 and d 4081 ld b,a4082 in a,($aa)4083 and e4084 or 84085 out ($aa),a4086 in a,($a9)4087 cpl 4088 and $F1 4089 rlca 4090 or b 4091 rla 4092 rla 4093 rla 4094 ld b,a4095 rla 4096 rla 4097 rla 4098 and d 4099 or b 4100 or c 4101 4102 ld b,a4103 ld hl,ControlsOnInterrupt4104 ld a,(hl)4105 xor b4106 and b4107 ld (NewPrControlsOnInterrupt),a4108 ld (hl),b4110 ld a,(keys+6)4111 bit 1,a 4112 ret nz4114 ld a,(ControlsOnInterrupt)4115 and %1111 00004116 ld (ControlsOnInterrupt),a4117 ret4119SetScreenOff:4120 ld a,(vdp_0+1) 4121 and %1011 11114122 jr SetScreenon.go4124SetScreenon:4125 ld a,(vdp_0+1) 4126 or %0100 00004127 .go:4128 ld (vdp_0+1),a4129 di4130 out ($99),a4131 ld a,1+1284132 ei4133 out ($99),a4134 ret4136outix384:4137 call outix2564138 jp outix1284139outix352:4140 call outix2564141 jp outix964142outix320:4143 call outix2564144 jp outix644145outix288:4146 call outix2564147 jp outix324148outix256: 4149 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4150outix250: 4151 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4152outix224:4153 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4154outix208: 4155 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4156outix192: 4157 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi4158outix176: 4159 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4160outix160:4161 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4162outix144: 4163 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4164outix128: 4165 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4166outix112:4167 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4168outix96: 4169 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4170outix80: 4171 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi4172outix64: 4173 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4174outix48:4175 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4176outix32: 4177 outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi outi 4178outix16: 4179 outi outi outi outi outi outi outi outi4180outix8: 4181 outi outi outi outi outi outi outi outi 4182 ret 4191Scroll: 4192 ld iy,(plxcurrentheroAddress)4193 ld b,6 4194 .CheckEmptyOpenSlotLoop:4195 ld a,(iy+HeroInventory+9) 4196 cp 454197 jr z,.EmptySlotFound4198 inc iy4199 djnz .CheckEmptyOpenSlotLoop4200 ret4201 .EmptySlotFound: 4202 ld a,34203 ld (ScrollFound?),a 4204 xor a4205 ld (movehero?),a4206 ld (hl),a 4207 inc hl4208 ld a,(hl) 4209 ld (hl),0 4210 sub 192-46 4211 ld (iy+HeroInventory+9),a4212 cp 464213 jp z,.Level1Scroll4214 cp 474215 jp z,.Level2Scroll4216 cp 484217 jp z,.Level3Scroll4219 .Level4Scroll:4220 call .AddSpellSchoolToSpellLevel 4221 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4222 ret z 4223 ld c,a 4225 4226 ld a,65 4227 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4228 ret z 4229 ld a,61 4230 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4231 ret z 4232 ld a,49 4233 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4234 ret z 4235 ld a,53 4236 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4237 ret z 4238 ld a,57 4239 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4240 ret z 4241 ld a,c 4242 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4244 .Level3Scroll:4245 call .AddSpellSchoolToSpellLevel 4246 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4247 ret z 4248 ld c,a 4250 4251 ld a,52 4252 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4253 ret z 4254 ld a,64 4255 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4256 ret z 4257 ld a,60 4258 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4259 ret z 4260 ld a,48 4261 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4262 ret z 4263 ld a,56 4264 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4265 ret z 4266 ld a,c 4267 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4269 .Level2Scroll:4270 call .AddSpellSchoolToSpellLevel 4271 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4272 ret z 4273 ld c,a 4275 4276 ld a,59 4277 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4278 ret z 4279 ld a,63 4280 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4281 ret z 4282 ld a,55 4283 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4284 ret z 4285 ld a,51 4286 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4287 ret z 4288 ld a,47 4289 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4290 ret z 4291 ld a,c 4292 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4294 .Level1Scroll:4295 call .AddSpellSchoolToSpellLevel 4296 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4297 ret z 4298 ld c,a 4300 4301 ld a,62 4302 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4303 ret z 4304 ld a,58 4305 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4306 ret z 4307 ld a,54 4308 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4309 ret z 4310 ld a,50 4311 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4312 ret z 4313 ld a,46 4314 call .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4315 ret z 4316 ld a,c 4317 jp .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell 4319 .SetAndCheckIfHeroAlreadyHasThisScrollOrSpell: 4320 ld (iy+HeroInventory+9),a4321 ld (SpellScrollInventoryNumber),a 4323 ld b,0 4324 cp (ix+HeroInventory+9)4325 call z,.ScrollFound4326 cp (ix+HeroInventory+10)4327 call z,.ScrollFound4328 cp (ix+HeroInventory+11)4329 call z,.ScrollFound4330 cp (ix+HeroInventory+12)4331 call z,.ScrollFound4332 cp (ix+HeroInventory+13)4333 call z,.ScrollFound4334 cp (ix+HeroInventory+14)4335 call z,.ScrollFound4337 dec b 4338 ret nz4339 4340 4341 cp 46 4342 jr z,.CheckEarthLevel14343 cp 47 4344 jr z,.CheckEarthLevel24345 cp 48 4346 jr z,.CheckEarthLevel34347 cp 49 4348 jr z,.CheckEarthLevel44350 cp 50 4351 jr z,.CheckFireLevel14352 cp 51 4353 jr z,.CheckFireLevel24354 cp 52 4355 jr z,.CheckFireLevel34356 cp 53 4357 jr z,.CheckFireLevel44359 cp 54 4360 jr z,.CheckAirLevel14361 cp 55 4362 jr z,.CheckAirLevel24363 cp 56 4364 jr z,.CheckAirLevel34365 cp 57 4366 jr z,.CheckAirLevel44368 cp 58 4369 jr z,.CheckWaterLevel14370 cp 59 4371 jr z,.CheckWaterLevel24372 cp 60 4373 jr z,.CheckWaterLevel34374 cp 61 4375 jr z,.CheckWaterLevel44377 cp 62 4378 jr z,.CheckAllSchoolsLevel14379 cp 63 4380 jr z,.CheckAllSchoolsLevel24381 cp 64 4382 jr z,.CheckAllSchoolsLevel34383 cp 65 4384 jr z,.CheckAllSchoolsLevel44386 .CheckEarthLevel1:4387 bit 0,(ix+HeroEarthSpells) 4388 ret4389 .CheckEarthLevel2:4390 bit 1,(ix+HeroEarthSpells) 4391 ret4392 .CheckEarthLevel3:4393 bit 2,(ix+HeroEarthSpells) 4394 ret4395 .CheckEarthLevel4:4396 bit 3,(ix+HeroEarthSpells) 4397 ret4399 .CheckFireLevel1:4400 bit 0,(ix+HeroFireSpells) 4401 ret4402 .CheckFireLevel2:4403 bit 1,(ix+HeroFireSpells) 4404 ret4405 .CheckFireLevel3:4406 bit 2,(ix+HeroFireSpells) 4407 ret4408 .CheckFireLevel4:4409 bit 3,(ix+HeroFireSpells) 4410 ret4412 .CheckAirLevel1:4413 bit 0,(ix+HeroAirSpells) 4414 ret4415 .CheckAirLevel2:4416 bit 1,(ix+HeroAirSpells) 4417 ret4418 .CheckAirLevel3:4419 bit 2,(ix+HeroAirSpells) 4420 ret4421 .CheckAirLevel4:4422 bit 3,(ix+HeroAirSpells) 4423 ret4425 .CheckWaterLevel1:4426 bit 0,(ix+HeroWaterSpells) 4427 ret4428 .CheckWaterLevel2:4429 bit 1,(ix+HeroWaterSpells) 4430 ret4431 .CheckWaterLevel3:4432 bit 2,(ix+HeroWaterSpells) 4433 ret4434 .CheckWaterLevel4:4435 bit 3,(ix+HeroWaterSpells) 4436 ret4438 .CheckAllSchoolsLevel1:4439 bit 0,(ix+HeroAllSchoolsSpells) 4440 ret4441 .CheckAllSchoolsLevel2:4442 bit 1,(ix+HeroAllSchoolsSpells) 4443 ret4444 .CheckAllSchoolsLevel3:4445 bit 2,(ix+HeroAllSchoolsSpells) 4446 ret4447 .CheckAllSchoolsLevel4:4448 bit 3,(ix+HeroAllSchoolsSpells) 4449 ret4451 .ScrollFound:4452 inc b 4453 ret4455 .AddSpellSchoolToSpellLevel: 4456 ld ix,(plxcurrentheroAddress)4457 ld d,04458 ld e,(ix+HeroMove)4459 ld hl,(Date)4460 add hl,de4461 push hl4462 pop bc4463 ld de,5 4464 call DivideBCbyDE 4465 ld a,l 4466 add a,a4467 add a,a 4468 add a,(iy+HeroInventory+9) 4469 ret4476ListOfUnlockedMonstersLevel1:4477 db 160 4478 db 130 4479 db 167 4480 db 170 4481 db 145 4482 db 147 4483 db 148 4484 db 163 4485 db 166 4486 db 164 4487 db 177 4488 db 182 4489 db 188 4490 db 191 4491 db 000 4492ListOfUnlockedMonstersLevel2:4493 db 161 4494 db 129 4495 db 131 4496 db 136 4497 db 171 4499 db 139 4500 db 144 4501 db 146 4502 db 150 4503 db 153 4504 db 154 4505 db 165 4506 db 173 4507 db 175 4508 db 178 4509 db 180 4510 db 185 4511 db 186 4512 db 190 4513 db 187 4514 db 000 4515ListOfUnlockedMonstersLevel3:4516 db 162 4517 db 128 4518 db 134 4519 db 169 4520 db 141 4521 db 142 4522 db 149 4523 db 151 4524 db 152 4525 db 168 4526 db 143 4527 db 174 4528 db 179 4529 db 181 4530 db 183 4531 db 184 4532 db 156 4533 db 189 4534 db 000 4535ListOfUnlockedMonstersLevel4:45364538 db 132 4539 db 172 4540 db 140 4541 db 135 4542 db 138 4543 db 176 4544 db 159 4545 db 155 4546 db 000 4547ListOfUnlockedMonstersLevel5:45484550 db 133 4551 db 158 4552 db 157 4553 db 137 4554 db 000 4555 db 000 4556ListOfUnlockedMonstersLevel6:4557 db 255 4558 db 000 4560MonsterLevel1Pointer: dw ListOfUnlockedMonstersLevel14561MonsterLevel2Pointer: dw ListOfUnlockedMonstersLevel24562MonsterLevel3Pointer: dw ListOfUnlockedMonstersLevel34563MonsterLevel4Pointer: dw ListOfUnlockedMonstersLevel44564MonsterLevel5Pointer: dw ListOfUnlockedMonstersLevel54565MonsterLevel6Pointer: dw ListOfUnlockedMonstersLevel64567TotalAmountOfUnlockedTowns: db 17 4569ListOfUnlockedHeroes:4570DragonSlayer4HeroesAmount: equ CastlevaniaHeroes-DragonSlayer4Heroes4571DragonSlayer4Heroes:45724573db 04 4574db 06 4575db 08 4576db 10 4577db 26 4578db 39 4579db 41 4581CastlevaniaHeroesAmount: equ SDSnatcherHeroes-CastlevaniaHeroes4582CastlevaniaHeroes:45834584db 28 4585db 30 4586db 32 4588SDSnatcherHeroesAmount: equ UsasHeroes-SDSnatcherHeroes4589SDSnatcherHeroes:45904591db 21 4592db 22 4593db 23 4594db 57 4595db 58 4596db 59 4597db 60 4599UsasHeroesAmount: equ GoemonHeroes-UsasHeroes4600UsasHeroes:46014602db 19 4603db 47 4605GoemonHeroesAmount: equ Ys3Heroes-GoemonHeroes4606GoemonHeroes: 4608db 02 4609db 15 4611Ys3HeroesAmount: equ PsychoWorldHeroes-Ys3Heroes4612Ys3Heroes:46134614db 01 4616PsychoWorldHeroesAmount: equ KingKongHeroes-PsychoWorldHeroes4617PsychoWorldHeroes:46184619db 13 4621KingKongHeroesAmount: equ ContraGroupAHeroes-KingKongHeroes4622KingKongHeroes:46234624db 20 4626ContraGroupAHeroesAmount: equ ContraGroupBHeroes-ContraGroupAHeroes4627ContraGroupAHeroes:46284629db 25 4631ContraGroupBHeroesAmount: equ GolvelliusHeroes-ContraGroupBHeroes4632ContraGroupBHeroes:46334634db 72 4636GolvelliusHeroesAmount: equ HeroesWithoutCastle-GolvelliusHeroes4637GolvelliusHeroes:46384639db 24 4640db 43 4642HeroesWithoutCastle:46434644db 03 4645db 05 4646db 17 46484649db 07 4650db 09 4651db 18 4652db 27 4653db 29 4654db 31 4655db 33 4656db 35 4657db 37 46594660db 12 4661db 16 4662db 14 46644665db 11 46674668db 34 46704671db 36 4672db 38 46744675db 40 46774678db 42 46804681db 44 46834684db 45 46864687db 46 46894690db 48 4691db 49 46934694db 50 4695db 52 46974698db 51 4699db 53 4700db 55 47024703db 54 4704db 56 47064707db 61 47094710db 62 47124713db 63 47154716db 64 47184719db 65 47214722db 66 47244725db 67 47274728db 68 4729db 69 4730db 70 4731db 71 47334734db 73 47364737db 74 4738db 75 47404741db 76 4743EndListHeroes:4744db 00 474647534754YieArKungFuHeroesAmount: equ 14755YieArKungFuHeroes:4756BubbleBobbleGroupAHeroesAmount: equ 14757BubbleBobbleGroupAHeroes:4758BubbleBobbleGroupBHeroesAmount: equ 14759BubbleBobbleGroupBHeroes:4760AkanbeDragonGroupAHeroesAmount: equ 14761AkanbeDragonGroupAHeroes:4762AkanbeDragonGroupBHeroesAmount: equ 14763AkanbeDragonGroupBHeroes:4764ChukaTaisenHeroesAmount: equ 14765ChukaTaisenHeroes:47674773db 255 4776HeroInfoName: equ 04777HeroInfoClass: equ HeroInfoName+184778HeroInfoSpriteBlock: equ HeroInfoClass+134779HeroInfoSYSX: equ HeroInfoSpriteBlock+1 4780HeroInfoPortrait10x18SYSX: equ HeroInfoSYSX+24781HeroButton20x11SYSX: equ HeroInfoPortrait10x18SYSX+24782HeroInfoPortrait16x30SYSX: equ HeroButton20x11SYSX+24783HeroInfoSkill: equ HeroInfoPortrait16x30SYSX+24784HeroInfoNumber: equ HeroInfoSkill+14786SkillInLevelUpSlot1: db 14787SkillInLevelUpSlot2: db 14788PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?: ds 14789PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?: ds 14791 4795heroAddressesLenght: equ HeroAddressesGoemon1 - HeroAddressesAdol 4796HeroAddressesAdol: db "Adol",255,"             ","Knight      ",255,AdolSpriteBlock| dw HeroSYSXAdol,HeroPortrait10x18SYSXAdol,HeroButton20x11SYSXAdol,HeroPortrait16x30SYSXAdol | db 01 | db 001 |4797HeroAddressesGoemon1: db "Goemon",255,"           ","Barbarian   ",255,Goemon1SpriteBlock| dw HeroSYSXGoemon1,HeroPortrait10x18SYSXGoemon1,HeroButton20x11SYSXGoemon1,HeroPortrait16x30SYSXGoemon1 | db 04 | db 002 |4798HeroAddressesPixy: db "Faerie Pixie",255,"     ","Shieldbearer",255,PixySpriteBlock| dw HeroSYSXPixy,HeroPortrait10x18SYSXPixy,HeroButton20x11SYSXPixy,HeroPortrait16x30SYSXPixy | db 07 | db 003 |4799HeroAddressesDrasle1: db "Royas Worzen",255,"     ","Overlord    ",255,Drasle1SpriteBlock| dw HeroSYSXDrasle1,HeroPortrait10x18SYSXDrasle1,HeroButton20x11SYSXDrasle1,HeroPortrait16x30SYSXDrasle1 | db 10 | db 004 |4800HeroAddressesLatok: db "Latok",255,"            ","Alchemist   ",255,LatokSpriteBlock| dw HeroSYSXLatok,HeroPortrait10x18SYSXLatok,HeroButton20x11SYSXLatok,HeroPortrait16x30SYSXLatok | db 13 | db 005 |4801HeroAddressesDrasle2: db "Lyll Worzen",255,"      ","Sage        ",255,Drasle2SpriteBlock| dw HeroSYSXDrasle2,HeroPortrait10x18SYSXDrasle2,HeroButton20x11SYSXDrasle2,HeroPortrait16x30SYSXDrasle2 | db 16 | db 006 |4802HeroAddressesSnake1: db "Snake",255,"            ","Ranger      ",255,Snake1SpriteBlock| dw HeroSYSXSnake1,HeroPortrait10x18SYSXSnake1,HeroButton20x11SYSXSnake1,HeroPortrait16x30SYSXSnake1 | db 19 | db 007 |4803HeroAddressesDrasle3: db "Maia Worzen",255,"      ","Wizzard     ",255,Drasle3SpriteBlock| dw HeroSYSXDrasle3,HeroPortrait10x18SYSXDrasle3,HeroButton20x11SYSXDrasle3,HeroPortrait16x30SYSXDrasle3 | db 22 | db 008 |4805HeroAddressesSnake2: db "Solid Snake",255,"      ","Battle Mage ",255,Snake2SpriteBlock| dw HeroSYSXSnake2,HeroPortrait10x18SYSXSnake2,HeroButton20x11SYSXSnake2,HeroPortrait16x30SYSXSnake2 | db 25 | db 009 |4806HeroAddressesDrasle4: db "Xemn Worzen",255,"      ","Scholar     ",255,Drasle4SpriteBlock| dw HeroSYSXDrasle4,HeroPortrait10x18SYSXDrasle4,HeroButton20x11SYSXDrasle4,HeroPortrait16x30SYSXDrasle4 | db 28 | db 010 |4807HeroAddressesAshguine: db "Ashguine",255,"         ","Necromancer ",255,AshguineSpriteBlock| dw HeroSYSXAshguine,HeroPortrait10x18SYSXAshguine,HeroButton20x11SYSXAshguine,HeroPortrait16x30SYSXAshguine | db 31 | db 011 |4808HeroAddressesUndeadline1: db "Leon",255,"             ","Knight      ",255,Undeadline1SpriteBlock| dw HeroSYSXUndeadline1,HeroPortrait10x18SYSXUndeadline1,HeroButton20x11SYSXUndeadline1,HeroPortrait16x30SYSXUndeadline1 | db 01 | db 012 |4809HeroAddressesPsychoWorld: db "Lucia",255,"            ","Barbarian   ",255,PsychoWorldSpriteBlock| dw HeroSYSXPsychoWorld,HeroPortrait10x18SYSXPsychoWorld,HeroButton20x11SYSXPsychoWorld,HeroPortrait16x30SYSXPsychoWorld | db 04 | db 013 |4810HeroAddressesUndeadline2: db "Ruika",255,"            ","Shieldbearer",255,Undeadline2SpriteBlock| dw HeroSYSXUndeadline2,HeroPortrait10x18SYSXUndeadline2,HeroButton20x11SYSXUndeadline2,HeroPortrait16x30SYSXUndeadline2 | db 07 | db 014 |4811HeroAddressesGoemon2: db "Ebisumaru",255,"        ","Overlord    ",255,Goemon2SpriteBlock| dw HeroSYSXGoemon2,HeroPortrait10x18SYSXGoemon2,HeroButton20x11SYSXGoemon2,HeroPortrait16x30SYSXGoemon2 | db 10 | db 015 |4812HeroAddressesUndeadline3: db "Dino",255,"             ","Alchemist   ",255,Undeadline3SpriteBlock| dw HeroSYSXUndeadline3,HeroPortrait10x18SYSXUndeadline3,HeroButton20x11SYSXUndeadline3,HeroPortrait16x30SYSXUndeadline3 | db 13 | db 016 |4814HeroAddressesFray: db "Fray",255,"             ","Sage        ",255,FraySpriteBlock| dw HeroSYSXFray,HeroPortrait10x18SYSXFray,HeroButton20x11SYSXFray,HeroPortrait16x30SYSXFray | db 16 | db 017 |4815HeroAddressesBlackColor: db "Black color",255,"      ","Ranger      ",255,BlackColorSpriteBlock| dw HeroSYSXBlackColor,HeroPortrait10x18SYSXBlackColor,HeroButton20x11SYSXBlackColor,HeroPortrait16x30SYSXBlackColor | db 19 | db 018 |4816HeroAddressesWit: db "Wit",255,"              ","Wizzard     ",255,WitSpriteBlock| dw HeroSYSXWit,HeroPortrait10x18SYSXWit,HeroButton20x11SYSXWit,HeroPortrait16x30SYSXWit | db 22 | db 019 |4817HeroAddressesMitchell: db "Dr. Hank Mitchell",255, "Battle Mage ",255,MitchellSpriteBlock| dw HeroSYSXMitchell,HeroPortrait10x18SYSXMitchell,HeroButton20x11SYSXMitchell,HeroPortrait16x30SYSXMitchell | db 25 | db 020 |4818HeroAddressesJanJackGibson: db "Jan Jack Gibson",255,"  ","Scholar     ",255,JanJackGibsonSpriteBlock| dw HeroSYSXJanJackGibson,HeroPortrait10x18SYSXJanJackGibson,HeroButton20x11SYSXJanJackGibson,HeroPortrait16x30SYSXJanJackGibson | db 28 | db 021 |4819HeroAddressesGillianSeed: db "Gillian Seed",255,"     ","Necromancer ",255,GillianSeedSpriteBlock| dw HeroSYSXGillianSeed,HeroPortrait10x18SYSXGillianSeed,HeroButton20x11SYSXGillianSeed,HeroPortrait16x30SYSXGillianSeed | db 31 | db 022 |4820HeroAddressesSnatcher: db "Snatcher",255,"         ","Knight      ",255,SnatcherSpriteBlock| dw HeroSYSXSnatcher,HeroPortrait10x18SYSXSnatcher,HeroButton20x11SYSXSnatcher,HeroPortrait16x30SYSXSnatcher | db 01 | db 023 |4821HeroAddressesGolvellius: db "Kelesis",255,"          ","Barbarian   ",255,GolvelliusSpriteBlock| dw HeroSYSXGolvellius,HeroPortrait10x18SYSXGolvellius,HeroButton20x11SYSXGolvellius,HeroPortrait16x30SYSXGolvellius | db 04 | db 024 |4823HeroAddressesBillRizer: db "Bill Rizer",255,"       ","Shieldbearer",255,BillRizerSpriteBlock| dw HeroSYSXBillRizer,HeroPortrait10x18SYSXBillRizer,HeroButton20x11SYSXBillRizer,HeroPortrait16x30SYSXBillRizer | db 07 | db 025 |4824HeroAddressesPochi: db "Pochi Worzen",255,"     ","Overlord    ",255,PochiSpriteBlock| dw HeroSYSXPochi,HeroPortrait10x18SYSXPochi,HeroButton20x11SYSXPochi,HeroPortrait16x30SYSXPochi | db 10 | db 026 |4825HeroAddressesGreyFox: db "Grey Fox",255,"         ","Alchemist   ",255,GreyFoxSpriteBlock| dw HeroSYSXGreyFox,HeroPortrait10x18SYSXGreyFox,HeroButton20x11SYSXGreyFox,HeroPortrait16x30SYSXGreyFox | db 13 | db 027 |4826HeroAddressesTrevorBelmont: db "Trevor Belmont",255,"   ","Sage        ",255,TrevorBelmontSpriteBlock| dw HeroSYSXTrevorBelmont,HeroPortrait10x18SYSXTrevorBelmont,HeroButton20x11SYSXTrevorBelmont,HeroPortrait16x30SYSXTrevorBelmont | db 16 | db 028 |4827HeroAddressesBigBoss: db "Big Boss",255,"         ","Ranger      ",255,BigBossSpriteBlock| dw HeroSYSXBigBoss,HeroPortrait10x18SYSXBigBoss,HeroButton20x11SYSXBigBoss,HeroPortrait16x30SYSXBigBoss | db 19 | db 029 |4828HeroAddressesSimonBelmont: db "Simon Belmont",255,"    ","Wizzard     ",255,SimonBelmontSpriteBlock | dw HeroSYSXSimonBelmont,HeroPortrait10x18SYSXSimonBelmont,HeroButton20x11SYSXSimonBelmont,HeroPortrait16x30SYSXSimonBelmont | db 22 | db 030 |4829HeroAddressesDrPettrovich: db "Doctor Pettrovich",255, "Battle Mage ",255,DrPettrovichSpriteBlock | dw HeroSYSXDrPettrovich,HeroPortrait10x18SYSXDrPettrovich,HeroButton20x11SYSXDrPettrovich,HeroPortrait16x30SYSXDrPettrovich | db 25 | db 031 |4830HeroAddressesRichterBelmont: db "Richter Belmont",255,"  ","Necromancer ",255,RichterBelmontSpriteBlock| dw HeroSYSXRichterBelmont,HeroPortrait10x18SYSXRichterBelmont,HeroButton20x11SYSXRichterBelmont,HeroPortrait16x30SYSXRichterBelmont | db 31 | db 032 |4832HeroAddressesUltraBox: db "Ultrabox",255,"         ","Scholar     ",255,UltraboxSpriteBlock| dw HeroSYSXUltrabox,HeroPortrait10x18SYSXUltrabox,HeroButton20x11SYSXUltrabox,HeroPortrait16x30SYSXUltrabox | db 28 | db 033 |4833HeroAddressesLoganSerios: db "Logan Serios",255,"     ","Knight      ",255,LoganSeriosSpriteBlock| dw HeroSYSXLoganSerios,HeroPortrait10x18SYSXLoganSerios,HeroButton20x11SYSXLoganSerios,HeroPortrait16x30SYSXLoganSerios | db 01 | db 034 |4834HeroAddressesHollyWhite: db "Holly White",255,"      ","Barbarian   ",255,HollyWhiteSpriteBlock| dw HeroSYSXHollyWhite,HeroPortrait10x18SYSXHollyWhite,HeroButton20x11SYSXHollyWhite,HeroPortrait16x30SYSXHollyWhite | db 04 | db 035 |4835HeroAddressesMercies: db "Mercies ",255,"         ","Shieldbearer",255,MerciesSpriteBlock| dw HeroSYSXMercies,HeroPortrait10x18SYSXMercies,HeroButton20x11SYSXMercies,HeroPortrait16x30SYSXMercies | db 07 | db 036 |4836HeroAddressesNatashaRomanenko:db "Nastasha",255,"         ","Overlord    ",255,NatashaRomanenkoSpriteBlock | dw HeroSYSXNatashaRomanenko,HeroPortrait10x18SYSXNatashaRomanenko,HeroButton20x11SYSXNatashaRomanenko,HeroPortrait16x30SYSXNatashaRomanenko | db 10 | db 037 |4837HeroAddressesRuth: db "Ruth ",255,"            ","Alchemist   ",255,RuthSpriteBlock| dw HeroSYSXRuth,HeroPortrait10x18SYSXRuth,HeroButton20x11SYSXRuth,HeroPortrait16x30SYSXRuth | db 13 | db 038 |4838HeroAddressesGeera: db "Geera Worzen",255,"     ","Sage        ",255,GeeraSpriteBlock| dw HeroSYSXGeera,HeroPortrait10x18SYSXGeera,HeroButton20x11SYSXGeera,HeroPortrait16x30SYSXGeera | db 16 | db 039 |4839HeroAddressesYoungNoble: db "Young Noble",255,"      ","Ranger      ",255,YoungNobleSpriteBlock| dw HeroSYSXYoungNoble,HeroPortrait10x18SYSXYoungNoble,HeroButton20x11SYSXYoungNoble,HeroPortrait16x30SYSXYoungNoble | db 19 | db 040 |4841HeroAddressesDawel: db "Dawel Worzen",255,"     ","Wizzard     ",255,DawelSpriteBlock| dw HeroSYSXDawel,HeroPortrait10x18SYSXDawel,HeroButton20x11SYSXDawel,HeroPortrait16x30SYSXDawel | db 22 | db 041 |4842HeroAddressesPocky: db "Pocky",255,"            ","Battle Mage ",255,PockySpriteBlock| dw HeroSYSXPocky,HeroPortrait10x18SYSXPocky,HeroButton20x11SYSXPocky,HeroPortrait16x30SYSXPocky | db 25 | db 042 |4843HeroAddressesKelesisTheCook: db "Kelesis The Cook",255," ","Scholar     ",255,KelesisTheCookSpriteBlock| dw HeroSYSXKelesisTheCook,HeroPortrait10x18SYSXKelesisTheCook,HeroButton20x11SYSXKelesisTheCook,HeroPortrait16x30SYSXKelesisTheCook | db 28 | db 043 |4844HeroAddressesLolo: db "Lolo",255,"             ","Necromancer ",255,LoloSpriteBlock| dw HeroSYSXLolo,HeroPortrait10x18SYSXLolo,HeroButton20x11SYSXLolo,HeroPortrait16x30SYSXLolo | db 31 | db 044 |4845HeroAddressesPippols: db "Pippols",255,"          ","Knight      ",255,PippolsSpriteBlock| dw HeroSYSXPippols,HeroPortrait10x18SYSXPippols,HeroButton20x11SYSXPippols,HeroPortrait16x30SYSXPippols | db 01 | db 045 |4846HeroAddressesRandar: db "Randar",255,"           ","Barbarian   ",255,RandarSpriteBlock| dw HeroSYSXRandar,HeroPortrait10x18SYSXRandar,HeroButton20x11SYSXRandar,HeroPortrait16x30SYSXRandar | db 04 | db 046 |4847HeroAddressesCles: db "Cles",255,"             ","Shieldbearer",255,ClesSpriteBlock| dw HeroSYSXCles,HeroPortrait10x18SYSXCles,HeroButton20x11SYSXCles,HeroPortrait16x30SYSXCles | db 07 | db 047 |4848HeroAddressesLuice: db "Luice",255,"            ","Overlord    ",255,LuiceSpriteBlock| dw HeroSYSXLuice,HeroPortrait10x18SYSXLuice,HeroButton20x11SYSXLuice,HeroPortrait16x30SYSXLuice | db 10 | db 048 |4850HeroAddressesDick: db "Dick",255,"             ","Alchemist   ",255,DickSpriteBlock| dw HeroSYSXDick,HeroPortrait10x18SYSXDick,HeroButton20x11SYSXDick,HeroPortrait16x30SYSXDick | db 13 | db 049 |4851HeroAddressesAphrodite: db "Aphrodite",255,"        ","Sage        ",255,AphroditeSpriteBlock| dw HeroSYSXAphrodite,HeroPortrait10x18SYSXAphrodite,HeroButton20x11SYSXAphrodite,HeroPortrait16x30SYSXAphrodite | db 16 | db 050 |4852HeroAddressesTienRen: db "Tien Ren",255,"         ","Ranger      ",255,TienRenSpriteBlock| dw HeroSYSXTienRen,HeroPortrait10x18SYSXTienRen,HeroButton20x11SYSXTienRen,HeroPortrait16x30SYSXTienRen | db 19 | db 051 |4853HeroAddressesPopolon: db "Popolon",255,"          ","Wizzard     ",255,PopolonSpriteBlock| dw HeroSYSXPopolon,HeroPortrait10x18SYSXPopolon,HeroButton20x11SYSXPopolon,HeroPortrait16x30SYSXPopolon | db 22 | db 052 |4854HeroAddressesHoMei: db "Ho Mei",255,"           ","Battle Mage ",255,HoMeiSpriteBlock| dw HeroSYSXHoMei,HeroPortrait10x18SYSXHoMei,HeroButton20x11SYSXHoMei,HeroPortrait16x30SYSXHoMei | db 25 | db 053 |4855HeroAddressesPriestessKi: db "Priestess Ki",255,"     ","Scholar     ",255,PriestessKiSpriteBlock| dw HeroSYSXPriestessKi,HeroPortrait10x18SYSXPriestessKi,HeroButton20x11SYSXPriestessKi,HeroPortrait16x30SYSXPriestessKi | db 28 | db 054 |4856HeroAddressesMeiHong: db "Mei Hong",255,"         ","Necromancer ",255,MeiHongSpriteBlock| dw HeroSYSXMeiHong,HeroPortrait10x18SYSXMeiHong,HeroButton20x11SYSXMeiHong,HeroPortrait16x30SYSXMeiHong | db 31 | db 055 |4857HeroAddressesPrinceGilgamesh: db "Prince Gilgamesh",255," ","Knight      ",255,PrinceGilgameshSpriteBlock| dw HeroSYSXPrinceGilgamesh,HeroPortrait10x18SYSXPrinceGilgamesh,HeroButton20x11SYSXPrinceGilgamesh,HeroPortrait16x30SYSXPrinceGilgamesh | db 01 | db 056 |4859HeroAddressesRandomHajile: db "Random Hajile",255,"    ","Barbarian   ",255,RandomHajileSpriteBlock| dw HeroSYSXRandomHajile,HeroPortrait10x18SYSXRandomHajile,HeroButton20x11SYSXRandomHajile,HeroPortrait16x30SYSXRandomHajile | db 04 | db 057 |4860HeroAddressesBensonCunningham:db "Benson Cunningham",255, "Shieldbearer",255,BensonCunninghamSpriteBlock| dw HeroSYSXBensonCunningham,HeroPortrait10x18SYSXBensonCunningham,HeroButton20x11SYSXBensonCunningham,HeroPortrait16x30SYSXBensonCunningham | db 07 | db 058 |4861HeroAddressesJamieSeed: db "Jamie Seed",255,"       ","Overlord    ",255,JamieSeedSpriteBlock| dw HeroSYSXJamieSeed,HeroPortrait10x18SYSXJamieSeed,HeroButton20x11SYSXJamieSeed,HeroPortrait16x30SYSXJamieSeed | db 10 | db 059 |4862HeroAddressesArmoredSnatcher: db "Armored Snatcher",255," ","Alchemist   ",255,ArmoredSnatcherSpriteBlock| dw HeroSYSXArmoredSnatcher,HeroPortrait10x18SYSXArmoredSnatcher,HeroButton20x11SYSXArmoredSnatcher,HeroPortrait16x30SYSXArmoredSnatcher | db 13 | db 060 |4863HeroAddressesDruid: db "Druid",255,"            ","Sage        ",255,DruidSpriteBlock| dw HeroSYSXDruid,HeroPortrait10x18SYSXDruid,HeroButton20x11SYSXDruid,HeroPortrait16x30SYSXDruid | db 16 | db 061 |4864HeroAddressesJeddaChef: db "Jedda Chef",255,"       ","Ranger      ",255,JeddaChefSpriteBlock| dw HeroSYSXJeddaChef,HeroPortrait10x18SYSXJeddaChef,HeroButton20x11SYSXJeddaChef,HeroPortrait16x30SYSXJeddaChef | db 19 | db 062 |4865HeroAddressesMomotaru: db "Momotaru",255,"         ","Wizzard     ",255,MomotaruSpriteBlock| dw HeroSYSXMomotaru,HeroPortrait10x18SYSXMomotaru,HeroButton20x11SYSXMomotaru,HeroPortrait16x30SYSXMomotaru | db 22 | db 063 |4866HeroAddressesLuka: db "Luka",255,"             ","Battle Mage ",255,LukaSpriteBlock| dw HeroSYSXLuka,HeroPortrait10x18SYSXLuka,HeroButton20x11SYSXLuka,HeroPortrait16x30SYSXLuka | db 25 | db 064 |4868HeroAddressesHeiwaAndButako: db "Heiwa and Butako",255," ","Scholar     ",255,HeiwaAndButakoSpriteBlock| dw HeroSYSXHeiwaAndButako,HeroPortrait10x18SYSXHeiwaAndButako,HeroButton20x11SYSXHeiwaAndButako,HeroPortrait16x30SYSXHeiwaAndButako | db 28 | db 065 |4869HeroAddressesAce: db "Ace",255,"              ","Necromancer ",255,AceSpriteBlock| dw HeroSYSXAce,HeroPortrait10x18SYSXAce,HeroButton20x11SYSXAce,HeroPortrait16x30SYSXAce | db 31 | db 066 |4870HeroAddressesSpaceExplorer01: db "Space Explorer 01",255, "Knight      ",255,SpaceExplorer01SpriteBlock| dw HeroSYSXSpaceExplorer01,HeroPortrait10x18SYSXSpaceExplorer01,HeroButton20x11SYSXSpaceExplorer01,HeroPortrait16x30SYSXSpaceExplorer01 | db 01 | db 067 |4871HeroAddressesFern: db "Feru",255,"             ","Barbarian   ",255,FernSpriteBlock| dw HeroSYSXFern,HeroPortrait10x18SYSXFern,HeroButton20x11SYSXFern,HeroPortrait16x30SYSXFern | db 04 | db 068 |4872HeroAddressesHorn: db "Horn",255,"             ","Shieldbearer",255,HornSpriteBlock| dw HeroSYSXHorn,HeroPortrait10x18SYSXHorn,HeroButton20x11SYSXHorn,HeroPortrait16x30SYSXHorn | db 07 | db 069 |4873HeroAddressesPixie: db "Pixie",255,"            ","Overlord    ",255,PixieSpriteBlock| dw HeroSYSXPixie,HeroPortrait10x18SYSXPixie,HeroButton20x11SYSXPixie,HeroPortrait16x30SYSXPixie | db 10 | db 070 |4874HeroAddressesFreyaJerbain: db "Freya Jerbain",255,"    ","Alchemist   ",255,FreyaJerbainSpriteBlock| dw HeroSYSXFreyaJerbain,HeroPortrait10x18SYSXFreyaJerbain,HeroButton20x11SYSXFreyaJerbain,HeroPortrait16x30SYSXFreyaJerbain | db 13 | db 071 |4875HeroAddressesLanceBean: db "Lance Bean",255,"       ","Sage        ",255,LanceBeanSpriteBlock| dw HeroSYSXLanceBean,HeroPortrait10x18SYSXLanceBean,HeroButton20x11SYSXLanceBean,HeroPortrait16x30SYSXLanceBean | db 16 | db 072 |4877HeroAddressesThiharis: db "Thiharis",255,"         ","Ranger      ",255,ThiharisSpriteBlock| dw HeroSYSXThiharis,HeroPortrait10x18SYSXThiharis,HeroButton20x11SYSXThiharis,HeroPortrait16x30SYSXThiharis | db 19 | db 073 |4878HeroAddressesPampas: db "Pampas",255,"           ","Wizzard     ",255,PampasSpriteBlock| dw HeroSYSXPampas,HeroPortrait10x18SYSXPampas,HeroButton20x11SYSXPampas,HeroPortrait16x30SYSXPampas | db 22 | db 074 |4879HeroAddressesSelene: db "Selene",255,"           ","Battle Mage ",255,SeleneSpriteBlock| dw HeroSYSXSelene,HeroPortrait10x18SYSXSelene,HeroButton20x11SYSXSelene,HeroPortrait16x30SYSXSelene | db 25 | db 075 |4880HeroAddressesSkooter: db "Skooter",255,"          ","Scholar     ",255,SkooterSpriteBlock| dw HeroSYSXSkooter,HeroPortrait10x18SYSXSkooter,HeroButton20x11SYSXSkooter,HeroPortrait16x30SYSXSkooter | db 28 | db 076 |4882HeroSYSXAdol: equ $4000+(000*128)+((64+000)/2)-128 4883HeroSYSXGoemon1: equ $4000+(000*128)+((64+128)/2)-128 4884HeroSYSXPixy: equ $4000+(032*128)+((64+000)/2)-128 4885HeroSYSXDrasle1: equ $4000+(032*128)+((64+128)/2)-128 4886HeroSYSXLatok: equ $4000+(064*128)+((64+000)/2)-128 4887HeroSYSXDrasle2: equ $4000+(064*128)+((64+128)/2)-128 4888HeroSYSXSnake1: equ $4000+(096*128)+((64+000)/2)-128 4889HeroSYSXDrasle3: equ $4000+(096*128)+((64+128)/2)-128 4890HeroSYSXSnake2: equ $4000+(000*128)+((64+000)/2)-128 4891HeroSYSXDrasle4: equ $4000+(000*128)+((64+128)/2)-128 4892HeroSYSXAshguine: equ $4000+(032*128)+((64+000)/2)-128 4893HeroSYSXUndeadline1: equ $4000+(032*128)+((64+128)/2)-128 4894HeroSYSXPsychoWorld: equ $4000+(064*128)+((64+000)/2)-128 4895HeroSYSXUndeadline2: equ $4000+(064*128)+((64+128)/2)-128 4896HeroSYSXGoemon2: equ $4000+(096*128)+((64+000)/2)-128 4897HeroSYSXUndeadline3: equ $4000+(096*128)+((64+128)/2)-128 4899HeroSYSXFray: equ $4000+(000*128)+((64+000)/2)-128 4900HeroSYSXBlackColor: equ $4000+(000*128)+((64+128)/2)-128 4901HeroSYSXWit: equ $4000+(032*128)+((64+000)/2)-128 4902HeroSYSXMitchell: equ $4000+(032*128)+((64+128)/2)-128 4903HeroSYSXJanJackGibson:equ $4000+(064*128)+((64+000)/2)-128 4904HeroSYSXGillianSeed: equ $4000+(064*128)+((64+128)/2)-128 4905HeroSYSXSnatcher: equ $4000+(096*128)+((64+000)/2)-128 4906HeroSYSXGolvellius: equ $4000+(096*128)+((64+128)/2)-128 4907HeroSYSXBillRizer: equ $4000+(000*128)+((64+000)/2)-128 4908HeroSYSXPochi: equ $4000+(000*128)+((64+128)/2)-128 4909HeroSYSXGreyFox: equ $4000+(032*128)+((64+000)/2)-128 4910HeroSYSXTrevorBelmont:equ $4000+(032*128)+((64+128)/2)-128 4911HeroSYSXBigBoss: equ $4000+(064*128)+((64+000)/2)-128 4912HeroSYSXSimonBelmont: equ $4000+(064*128)+((64+128)/2)-128 4913HeroSYSXDrPettrovich: equ $4000+(096*128)+((64+000)/2)-128 4914HeroSYSXRichterBelmont:equ $4000+(096*128)+((64+128)/2)-128 4916HeroSYSXUltrabox: equ $4000+(000*128)+((64+000)/2)-128 4917HeroSYSXLoganSerios: equ $4000+(000*128)+((64+128)/2)-128 4918HeroSYSXHollyWhite: equ $4000+(032*128)+((64+000)/2)-128 4919HeroSYSXMercies: equ $4000+(032*128)+((64+128)/2)-128 4920HeroSYSXNatashaRomanenko: equ $4000+(064*128)+((64+000)/2)-128 4921HeroSYSXRuth: equ $4000+(064*128)+((64+128)/2)-128 4922HeroSYSXGeera: equ $4000+(096*128)+((64+000)/2)-128 4923HeroSYSXYoungNoble: equ $4000+(096*128)+((64+128)/2)-128 4924HeroSYSXDawel: equ $4000+(000*128)+((64+000)/2)-128 4925HeroSYSXPocky: equ $4000+(000*128)+((64+128)/2)-128 4926HeroSYSXKelesisTheCook: equ $4000+(032*128)+((64+000)/2)-128 4927HeroSYSXLolo: equ $4000+(032*128)+((64+128)/2)-128 4928HeroSYSXPippols: equ $4000+(064*128)+((64+000)/2)-128 4929HeroSYSXRandar: equ $4000+(064*128)+((64+128)/2)-128 4930HeroSYSXCles: equ $4000+(096*128)+((64+000)/2)-128 4931HeroSYSXLuice: equ $4000+(096*128)+((64+128)/2)-128 4933HeroSYSXDick: equ $4000+(000*128)+((64+000)/2)-128 4934HeroSYSXAphrodite: equ $4000+(000*128)+((64+128)/2)-128 4935HeroSYSXTienRen: equ $4000+(032*128)+((64+000)/2)-128 4936HeroSYSXPopolon: equ $4000+(032*128)+((64+128)/2)-128 4937HeroSYSXHoMei: equ $4000+(064*128)+((64+000)/2)-128 4938HeroSYSXPriestessKi: equ $4000+(064*128)+((64+128)/2)-128 4939HeroSYSXMeiHong: equ $4000+(096*128)+((64+000)/2)-128 4940HeroSYSXPrinceGilgamesh: equ $4000+(096*128)+((64+128)/2)-128 4941HeroSYSXRandomHajile: equ $4000+(000*128)+((64+000)/2)-128 4942HeroSYSXBensonCunningham: equ $4000+(000*128)+((64+128)/2)-128 4943HeroSYSXJamieSeed: equ $4000+(032*128)+((64+000)/2)-128 4944HeroSYSXArmoredSnatcher: equ $4000+(032*128)+((64+128)/2)-128 4945HeroSYSXDruid: equ $4000+(064*128)+((64+000)/2)-128 4946HeroSYSXMomotaru: equ $4000+(064*128)+((64+128)/2)-128 4947HeroSYSXLuka: equ $4000+(096*128)+((64+000)/2)-128 4948HeroSYSXHeiwaAndButako: equ $4000+(096*128)+((64+128)/2)-128 4950HeroSYSXAce: equ $4000+(000*128)+((64+000)/2)-128 4951HeroSYSXSpaceExplorer01: equ $4000+(000*128)+((64+128)/2)-128 4952HeroSYSXFern: equ $4000+(032*128)+((64+000)/2)-128 4953HeroSYSXHorn: equ $4000+(032*128)+((64+128)/2)-128 4954HeroSYSXPixie: equ $4000+(064*128)+((64+000)/2)-128 4955HeroSYSXFreyaJerbain: equ $4000+(064*128)+((64+128)/2)-128 4956HeroSYSXLanceBean: equ $4000+(096*128)+((64+000)/2)-128 4957HeroSYSXThiharis: equ $4000+(096*128)+((64+128)/2)-128 4958HeroSYSXPampas: equ $4000+(000*128)+((64+000)/2)-128 4959HeroSYSXSelene: equ $4000+(000*128)+((64+128)/2)-128 4960HeroSYSXSkooter: equ $4000+(032*128)+((64+000)/2)-128 4961HeroSYSXJeddaChef: equ $4000+(032*128)+((64+128)/2)-128 4967498750065025503650495050HeroPortrait16x30SYSXAdol: equ $8000+(000*128)+(000/2)-128 5051HeroPortrait16x30SYSXGoemon1: equ $8000+(000*128)+(016/2)-128 5052HeroPortrait16x30SYSXPixy: equ $8000+(000*128)+(032/2)-128 5053HeroPortrait16x30SYSXDrasle1: equ $8000+(000*128)+(048/2)-128 5054HeroPortrait16x30SYSXLatok: equ $8000+(000*128)+(064/2)-128 5055HeroPortrait16x30SYSXDrasle2: equ $8000+(000*128)+(080/2)-128 5056HeroPortrait16x30SYSXSnake1: equ $8000+(000*128)+(096/2)-128 5057HeroPortrait16x30SYSXDrasle3: equ $8000+(000*128)+(112/2)-128 5058HeroPortrait16x30SYSXSnake2: equ $8000+(000*128)+(128/2)-128 5059HeroPortrait16x30SYSXDrasle4: equ $8000+(000*128)+(144/2)-128 5060HeroPortrait16x30SYSXAshguine: equ $8000+(000*128)+(160/2)-128 5061HeroPortrait16x30SYSXUndeadline1: equ $8000+(000*128)+(176/2)-128 5062HeroPortrait16x30SYSXPsychoWorld: equ $8000+(000*128)+(192/2)-128 5063HeroPortrait16x30SYSXUndeadline2: equ $8000+(000*128)+(208/2)-128 5064HeroPortrait16x30SYSXGoemon2: equ $8000+(000*128)+(224/2)-128 5065HeroPortrait16x30SYSXUndeadline3: equ $8000+(000*128)+(240/2)-128 5067HeroPortrait16x30SYSXFray: equ $8000+(030*128)+(000/2)-128 5068HeroPortrait16x30SYSXBlackColor: equ $8000+(030*128)+(016/2)-128 5069HeroPortrait16x30SYSXWit: equ $8000+(030*128)+(032/2)-128 5070HeroPortrait16x30SYSXMitchell: equ $8000+(030*128)+(048/2)-128 5071HeroPortrait16x30SYSXJanJackGibson:equ $8000+(030*128)+(064/2)-128 5072HeroPortrait16x30SYSXGillianSeed: equ $8000+(030*128)+(080/2)-128 5073HeroPortrait16x30SYSXSnatcher: equ $8000+(030*128)+(096/2)-128 5074HeroPortrait16x30SYSXGolvellius: equ $8000+(030*128)+(112/2)-128 5075HeroPortrait16x30SYSXBillRizer: equ $8000+(030*128)+(128/2)-128 5076HeroPortrait16x30SYSXPochi: equ $8000+(030*128)+(144/2)-128 5077HeroPortrait16x30SYSXGreyFox: equ $8000+(030*128)+(160/2)-128 5078HeroPortrait16x30SYSXTrevorBelmont:equ $8000+(030*128)+(176/2)-128 5079HeroPortrait16x30SYSXBigBoss: equ $8000+(030*128)+(192/2)-128 5080HeroPortrait16x30SYSXSimonBelmont: equ $8000+(030*128)+(208/2)-128 5081HeroPortrait16x30SYSXDrPettrovich: equ $8000+(030*128)+(224/2)-128 5082HeroPortrait16x30SYSXRichterBelmont:equ $8000+(030*128)+(240/2)-128 5084HeroPortrait16x30SYSXUltrabox: equ $8000+(060*128)+(000/2)-128 5085HeroPortrait16x30SYSXLoganSerios: equ $8000+(060*128)+(016/2)-128 5086HeroPortrait16x30SYSXHollyWhite: equ $8000+(060*128)+(032/2)-128 5087HeroPortrait16x30SYSXMercies: equ $8000+(060*128)+(048/2)-128 5088HeroPortrait16x30SYSXNatashaRomanenko:equ $8000+(060*128)+(064/2)-128 5089HeroPortrait16x30SYSXRuth: equ $8000+(060*128)+(080/2)-128 5090HeroPortrait16x30SYSXGeera: equ $8000+(060*128)+(096/2)-128 5091HeroPortrait16x30SYSXyoungNoble: equ $8000+(060*128)+(112/2)-128 5092HeroPortrait16x30SYSXDawel: equ $8000+(060*128)+(128/2)-128 5093HeroPortrait16x30SYSXPocky: equ $8000+(060*128)+(144/2)-128 5094HeroPortrait16x30SYSXKelesisTheCook:equ $8000+(060*128)+(160/2)-128 5095HeroPortrait16x30SYSXLolo: equ $8000+(060*128)+(176/2)-128 5096HeroPortrait16x30SYSXPippols: equ $8000+(060*128)+(192/2)-128 5097HeroPortrait16x30SYSXRandar: equ $8000+(060*128)+(208/2)-128 5098HeroPortrait16x30SYSXCles: equ $8000+(060*128)+(224/2)-128 5099HeroPortrait16x30SYSXLuice: equ $8000+(060*128)+(240/2)-128 5101HeroPortrait16x30SYSXDick: equ $8000+(090*128)+(000/2)-128 5102HeroPortrait16x30SYSXAphrodite: equ $8000+(090*128)+(016/2)-128 5103HeroPortrait16x30SYSXTienRen: equ $8000+(090*128)+(032/2)-128 5104HeroPortrait16x30SYSXPopolon: equ $8000+(090*128)+(048/2)-128 5105HeroPortrait16x30SYSXHoMei: equ $8000+(090*128)+(064/2)-128 5106HeroPortrait16x30SYSXPriestessKi: equ $8000+(090*128)+(080/2)-128 5107HeroPortrait16x30SYSXMeiHong: equ $8000+(090*128)+(096/2)-128 5108HeroPortrait16x30SYSXPrinceGilgamesh: equ $8000+(090*128)+(112/2)-128 5109HeroPortrait16x30SYSXRandomHajile: equ $8000+(090*128)+(128/2)-128 5110HeroPortrait16x30SYSXBensonCunningham: equ $8000+(090*128)+(144/2)-128 5111HeroPortrait16x30SYSXJamieSeed: equ $8000+(090*128)+(160/2)-128 5112HeroPortrait16x30SYSXArmoredSnatcher: equ $8000+(090*128)+(176/2)-128 5113HeroPortrait16x30SYSXDruid: equ $8000+(090*128)+(192/2)-128 5115HeroPortrait16x30SYSXMomotaru: equ $8000+(090*128)+(208/2)-128 5116HeroPortrait16x30SYSXLuka: equ $8000+(090*128)+(224/2)-128 5117HeroPortrait16x30SYSXHeiwaAndButako: equ $8000+(090*128)+(240/2)-128 5118HeroPortrait16x30SYSXAce: equ $8000+(120*128)+(000/2)-128 5119HeroPortrait16x30SYSXSpaceExplorer01: equ $8000+(120*128)+(016/2)-128 5120HeroPortrait16x30SYSXFern: equ $8000+(120*128)+(032/2)-128 5121HeroPortrait16x30SYSXHorn: equ $8000+(120*128)+(048/2)-128 5122HeroPortrait16x30SYSXPixie: equ $8000+(120*128)+(064/2)-128 5123HeroPortrait16x30SYSXFreyaJerbain: equ $8000+(120*128)+(080/2)-128 5124HeroPortrait16x30SYSXLanceBean: equ $8000+(120*128)+(096/2)-128 5125HeroPortrait16x30SYSXThiharis: equ $8000+(120*128)+(112/2)-128 5126HeroPortrait16x30SYSXPampas: equ $8000+(120*128)+(128/2)-128 5127HeroPortrait16x30SYSXSelene: equ $8000+(120*128)+(144/2)-128 5128HeroPortrait16x30SYSXSkooter: equ $8000+(120*128)+(160/2)-128 5129HeroPortrait16x30SYSXJeddaChef: equ $8000+(120*128)+(176/2)-128 5131Difficulty: ds 1 5132ScenarioPage: ds 15133SaveGameSelected: ds 1 5134LitScenarioButtonInWhichPage?: ds 15135AmountOfMapsVisibleInCurrentPage: ds 15136PlayerWhoLostAHeroInBattle?: ds 15137PlayerLostHeroInBattle?: db 05139AmountOfCampaignsFinished: db 05141AmountOfMapsUnlocked: 5142if promo?5143db 35144else5145db 305146endif5147QuickTipsNumber: db StartOfGameQuickTips-25149ds 400 5154endenginepage3:5155dephase5156enginepage3length: Equ $-enginepage35158variables: org $c000+enginepage3length5159slot: 51605170.ram: rb 15171.page1rom: rb 15172.page2rom: rb 15173.page12rom: rb 15175memblocks:5176.1: rb 15177.2: rb 15179Replayer_Currentbank: equ $-1518151845187VDP_0: rb 85188VDP_8: rb 305190DayOfMonthEenheden: rb 15191DayOfMonthTientallen: rb 15192MonthEenheden: rb 15193MonthTientallen: rb 15194YearEenheden: rb 1 5195YearTientallen: rb 1 5196ComputerID: rb 1 5198TurboOn?: rb 1 5200engaddr: equ $03e5201loader.address: equ $80005202enginepage3addr: equ $c0005204sx: equ 05205sy: equ 25206spage: equ 35207dx: equ 45208dy: equ 65209dpage: equ 7 5210nx: equ 85211ny: equ 105212clr: equ 125213copydirection: equ 135214copytype: equ 145216framecounter: rb 15218Controls: rb 15219NewPrContr: rb 15220oldControls: rb 15222ControlsOnInterrupt: rb 15223NewPrControlsOnInterrupt: rb 15225BattleGraphicsBlock: rb 15227endenginepage3variables: equ $+enginepage3length5228org variables5230MSXHeroes.asm 421424engine:425phase engaddr426 engine.asm1LevelEngine:312 call HandleAIWorldMap13 call CheckBackToMainMenu 14 call DisplayDiskMenu 15 call DisplayHeroLevelUp 16 call DisplayScrollFound 17 call DisplayChestFound 18 call DisplayLearningStone 19 call DisplaySpireOfWisdom 20 call DisplayGuardTowerReward 21 call DisplayStartOfTurnMessage 22 call DisplayEnemyStatsRightClick 23 call DisplayEnemyHeroStatsRightClick 24 call CheckEnterTradeMenuBetween2FriendlyHeroes25 call GoCheckEnterHeroOverviewMenu 27 call PopulateControls 28 call PopulateKeyMatrix 29 call scrollscreen 30 call MiniMapSquareIconInteraction31 call movehero 32 call SetHeroPoseInVram 33 call buildupscreen 34 call MoveMiniMapSquareIcon36 call CheckEnterCastle 38 ld ix,(plxcurrentheroAddress)39 ld a,(ix+HeroStatus)40 cp 25541 jr z,.EndHeroChecks 42 call SetHeroMaxMovementPoints 43 call CheckHeroLevelUp 44 call CheckHeroCollidesWithEnemyHero 45 call CheckHeroPicksUpItem46 call AnimateHeroes 47 call CheckEnterCombat48 .EndHeroChecks:49 call CheckHeroCollidesWithMonster 5153 call putbottomobjects54 call putbottomcastles55 call putbottomheroes 56 call puttopobjects57 call puttopheroes 58 call puttopcastles59 call putmovementstars61 call HandleHud 62 call CheckPlayerEliminated 6470 ld a,(framecounter)71 inc a72 ld (framecounter),a74 ld a,(PreviousVblankIntFlag)75 ld b,a77 ld hl,vblankintflag 78 ld a,(hl)79 ld (PreviousVblankIntFlag),a81 ld a,b 82 ld hl,vblankintflag 83 .checkflag:84 cp (hl)85 jr nc,.checkflag86 ld (hl),08889 ld a,(framecounter)90 cp 291 call z,SetScreenOn9397105 106109112 jp LevelEngine120138145152164168174 178 183185188194 202207228vblankintflag2: ds 1229PreviousVblankIntFlag: db 1230page1bank: ds 1231page2bank: ds 1232vblank:233 push bc234 push de235 push hl236 push ix237 push iy238 exx239 ex af,af'240 push af241 push bc242 push de243 push hl247255 256 ld a,(LockMiniMapOn?)257 or a258 jr z,.EndCheckSlowdown259264 ld a,(ControlsOnInterrupt)265 and %0000 1111266 jr z,.EndCheckSlowdown268 ld a,(vblankintflag2)269 inc a 270 ld (vblankintflag2),a 271 and 15272 jr nz,.skip273 .EndCheckSlowdown:274 276 call PopulateControlsOnInterrupt 277 call PopulateKeyMatrix 278 call MovePointer 279 call MiniMapSquareIconInteractionOnInterrupt280 .skip:282285 ld a,(memblocks.1) 286 push af287 ld a,(memblocks.2) 288 push af289 in a,($a8) 290 push af 292 if Music50PercentSpeed?293 ld a,(vblankintflag)294 bit 0,a295 call z,RePlayer_Tick 296 else297 call RePlayer_Tick 298 endif300 ld a,(slot.page1rom) 301 out ($a8),a303 ld a,1 304 out ($fe),a 306311 call checktriggermapscreen 313318 call checktriggerhud 320 ld a,2 321 out ($fe),a 323 ld a,(AreWeWritingToVram?)324 or a325 call z,setspritecharacter 327 ld a,(page1bank) 328 out ($fe),a 330 pop af331 out ($a8),a 332 pop af333 ld ($7000),a 334 pop af335 ld ($6000),a 336 337 ld a,(AreWeWritingToVram?)338 or a339 call z,putsprite 341 ld a,(vblankintflag)342 inc a 343 ld (vblankintflag),a 345 pop hl 346 pop de 347 pop bc 348 pop af 349 ex af,af' 350 exx351 pop iy 352 pop ix 353 pop hl 354 pop de 355 pop bc 356 pop af 357 ei358 ret360CurrentLineIntHeight: ds 1361CastleInterruptHandler:362 push af363 364 ld a,1 365 out ($99),a366 ld a,15+128367 out ($99),a368 in a,($99) 369 rrca370 jp c,LineintCastleScreen 371 372 xor a 373 out ($99),a374 ld a,15+128375 out ($99),a376 in a,($99) 377 rlca378 jp c,VblankCastleScreen379 380 pop af 381 ei382 ret384VblankCastleScreen:385 push hl386 push bc388 ld a,(CurrentLineIntHeight)389 cp FirstLineintHeightCastleMagicGuild390 jr z,.SkipSettingPaletteOnVblank392 ld hl,InGamePalette393 call SetPaletteOnInterrupt394 .SkipSettingPaletteOnVblank:396 pop bc397 pop hl398 jp vblank400LineintFlag: ds 1401LineintCastleScreen:402 push hl403 push bc405 ld a,(LineintFlag)406 inc a407 ld (LineintFlag),a409 ld a,(AreWeInTavern1OrRecruit2?)410 dec a411 ld a,(CurrentLineIntHeight)412 jr nz,.EndCheckTavern413 cp FirstLineintHeightCastleTavern414 jp z,.FirstLineIntCastleTavernScreen415 cp SecondLineintHeightCastleTavern416 jp z,.SecondLineIntCastleTavernScreen417 .EndCheckTavern:419 cp FirstLineintHeightCastleRecruit420 jr z,.FirstLineIntCastleRecruitScreen421 cp SecondLineintHeightCastleRecruit422 jr z,.SecondLineIntCastleRecruitScreen424 cp FirstLineintHeightCastleMagicGuild425 jr z,.FirstLineIntCastleMagicGuildScreen426 cp SecondLineintHeightCastleMagicGuild427 jr z,.SecondLineIntCastleMagicGuildScreen429 cp FirstLineintHeightCastleMarket430 jp z,.LineIntCastlemarketScreen431 cp SecondLineintHeightCastleMarket432 jp z,.LineIntCastlemarketScreen433 cp ThirdLineintHeightCastleMarket434 jp z,.LineIntCastlemarketScreen436 ld hl,CastleOverviewPalette437 call SetPaletteOnInterrupt439 pop bc440 pop hl442 pop af 443 ei444 ret 446 .SecondLineIntCastleRecruitScreen:447 ld a,2 448 out ($99),a449 ld a,15+128 450 out ($99),a451 452.Waitline: 453 in a,($99) 454 and %0010 0000 455 jr z,.Waitline456 457 ld hl,InGamePalette458 call SetPaletteOnInterrupt460 ld a,FirstLineintHeightCastleRecruit461 ld (CurrentLineIntHeight),a462 out ($99),a463 ld a,19+128 464 out ($99),a 466 pop bc467 pop hl469 pop af 470 ei471 ret 473 .FirstLineIntCastleRecruitScreen:474 ld hl,CastleOverviewPalette475 call SetPaletteOnInterrupt477 ld a,SecondLineintHeightCastleRecruit478 ld (CurrentLineIntHeight),a479 out ($99),a480 ld a,19+128 481 out ($99),a 483 pop bc484 pop hl486 pop af 487 ei488 ret 490 .FirstLineIntCastleMagicGuildScreen:491 ld hl,InGamePalette492 call SetPaletteOnInterrupt494 ld a,SecondLineintHeightCastleMagicGuild495 ld (CurrentLineIntHeight),a496 out ($99),a497 ld a,19+128 498 out ($99),a 500 pop bc501 pop hl503 pop af 504 ei505 ret 507 .SecondLineIntCastleMagicGuildScreen:508 ld hl,CastleOverviewPalette509 call SetPaletteOnInterrupt511 ld a,FirstLineintHeightCastleMagicGuild512 ld (CurrentLineIntHeight),a513 out ($99),a514 ld a,19+128 515 out ($99),a 517 pop bc518 pop hl520 pop af 521 ei522 ret 524 .LineIntCastlemarketScreen:525 ld hl,CastleOverviewPalette526 call SetPaletteOnInterrupt528 pop bc529 pop hl531 pop af 532 ei533 ret 535 .FirstLineIntCastleTavernScreen:536 ld hl,CastleOverviewPalette537 call SetPaletteOnInterrupt539 ld a,SecondLineintHeightCastleTavern540 ld (CurrentLineIntHeight),a541 out ($99),a542 ld a,19+128 543 out ($99),a 545 pop bc546 pop hl548 pop af 549 ei550 ret 552 .SecondLineIntCastleTavernScreen:553 ld hl,InGamePalette554 call SetPaletteOnInterrupt556 ld a,FirstLineintHeightCastleTavern557 ld (CurrentLineIntHeight),a558 out ($99),a559 ld a,19+128 560 out ($99),a 562 pop bc563 pop hl565 pop af 566 ei567 ret 569SetPaletteOnInterrupt:570 xor a571 out ($99),a572 ld a,16+128573 out ($99),a574 ld c,$9a575 outi | outi | outi | outi | outi | outi | outi | outi576 outi | outi | outi | outi | outi | outi | outi | outi577 outi | outi | outi | outi | outi | outi | outi | outi578 outi | outi | outi | outi | outi | outi | outi | outi579 ret581vblankintflag: db 0582583InterruptHandler:584 push af586 xor a 587 out ($99),a588 ld a,15+128589 out ($99),a590 in a,($99) 591 rlca592 jp c,vblank 593 594 pop af 595 ei596 ret598CheckBackToMainMenu:599 ld a,(BackToMainMenu?)600 or a601 ret z602 xor a603 ld (BackToMainMenu?),a605 jp InitiateGame607DisplayDiskMenu:608 ld a,(DiskMenuClicked?)609 dec a610 ret m611 ld (DiskMenuClicked?),a612 jp nz,DisableScrollScreen614 ld a,1615 ld (GameStatus),a 616 call ClearMapPage0AndMapPage1 618 ld hl,DisplayDiskMenuCOde619 call EnterSpecificRoutineInExtraRoutines621 ld a,3 622 ld (SetHeroArmyAndStatusInHud?),a623 ret625HandleAIWorldMap:626 call checkcurrentplayerhuman 627 ret nz628 629 ld hl,EndTurn630 jp EnterSpecificRoutineInCastleOverviewCode 631 ret633CheckPlayerEliminated:634 ld hl,CheckIfAPlayerGotEliminated635 jp EnterSpecificRoutineInExtraRoutines636 637EnterCombat?: db 0638CheckEnterCombat:639 ld a,(EnterCombat?)640 dec a641 ret m642 ld (EnterCombat?),a643 pop af 644 jp EnterCombat645 646AnimateHeroes:647 ld a,(movehero?)648 or a 649 ret nz651 ld a,(framecounter)652 and 3653 ret nz654 ld ix,(plxcurrentheroAddress) 655 ld e,(ix+HeroSpecificInfo+0) 656 ld d,(ix+HeroSpecificInfo+1)657 push de658 pop ix 659 ld a,(ix+HeroinfoSYSX+0) 660 xor 8661 ld (ix+HeroinfoSYSX+0),a 662 ret664DivideBCbyDE:665670Div16:671 ld hl,0672 ld a,b673 ld b,8674Div16_Loop1:675 rla676 adc hl,hl677 sbc hl,de678 jr nc,Div16_NoAdd1679 add hl,de680Div16_NoAdd1:681 djnz Div16_Loop1682 rla683 cpl684 ld b,a685 ld a,c686 ld c,b687 ld b,8688Div16_Loop2:689 rla690 adc hl,hl691 sbc hl,de692 jr nc,Div16_NoAdd2693 add hl,de694Div16_NoAdd2:695 djnz Div16_Loop2696 rla697 cpl698 ld b,c699 ld c,a700 ret702MultiplyHlWithDE:703 push hl704 pop bc705710Mult16:711 ld a,b712 ld b,16713Mult16_Loop:714 add hl,hl715 sla c716 rla717 jr nc,Mult16_NoAdd718 add hl,de719Mult16_NoAdd:720 djnz Mult16_Loop721 ret723EnemyHeroThatPointerIsOn: ds 2724DisplayEnemyHeroStatsRightClick?: db 0725DisplayEnemyHeroStatsRightClick:726 ld a,(DisplayEnemyHeroStatsRightClick?)727 dec a728 ret m729 ld (DisplayEnemyHeroStatsRightClick?),a730 jp nz,DisableScrollScreen 732 call ClearMapPage0AndMapPage1 734 ld a,1735 ld (GameStatus),a 737 ld hl,DisplayEnemyHeroStatsWindowCode738 jp EnterSpecificRoutineHeroOverviewCode740DisplayEnemyStatsRightClick?: db 0741DisplayEnemyStatsRightClick:742 ld a,(DisplayEnemyStatsRightClick?)743 dec a744 ret m745 ld (DisplayEnemyStatsRightClick?),a746 jp nz,DisableScrollScreen 748 call ClearMapPage0AndMapPage1 749 ld hl,ShowEnemyStats750 ld a,(MonsterHerocollidedWithOnMap)751 cp 128752 jp nc,EnterSpecificRoutineInBattleCode754 ld hl,ShowItemStats755 jp EnterSpecificRoutineInExtraRoutines757758MiniMapSquareIconInteraction:759 ld a,(SetMiniMap?)760 dec a761 ret m762 ld (SetMiniMap?),a764 ld a,(spat+1) 765 sub 200766 ret c 767 ld b,a768 add a,a 769 add a,b 770 cp 117771 jr c,.EndCheckOverFlowX772 ld a,116773 .EndCheckOverFlowX:774 ld (mappointerx),a776 ld a,(spat+0) 777 sub 9778 jr nc,.notcarry779 xor a780 .notcarry:781 ld b,a782 add a,a 783 add a,b 784 cp 117785 jr c,.EndCheckOverFlowY786 ld a,116787 .EndCheckOverFlowY:788 ld (mappointery),a789 ret791SetMiniMap?: db 0792LockMiniMapOn?: db 0 793MiniMapSquareIconInteractionOnInterrupt:794 ld a,(GameStatus) 795 or a796 ret nz797802 ld a,(ControlsOnInterrupt)803 bit 4,a 804 jr z,.LockOff805 806 ld a,(spat+0) 807 cp 48808 jr c,.endCheckWithinYRange809 ld a,(LockMiniMapOn?)810 or a811 ret z813 ld a,48814 ld (spat+0),a 815 ld (spat+4),a 816 ld (spat+8),a 817 .endCheckWithinYRange:819 ld a,(spat+1) 820 cp 200821 jr nc,.endCheckWithinXRange822 ld a,(LockMiniMapOn?)823 or a824 ret z826 ld a,200827 ld (spat+1),a 828 ld (spat+5),a 829 ld (spat+9),a 830 .endCheckWithinXRange:832 ld a,1833 ld (LockMiniMapOn?),a834 ld (SetMiniMap?),a835 ret837 .LockOff:838 xor a839 ld (LockMiniMapOn?),a840 ret842846MoveMiniMapSquareIcon:847 ld a,(mappointery)848 ld e,a849 ld c,3850 call Div8851 add a,004852 ld (spat+60),a 854 ld a,(mappointerx)855 ld e,a856 ld c,3857 call Div8858 add a,196859 ld (spat+61),a 860 ret862867Div8:868 xor a869 ld b,8870Div8_Loop:871 rl e872 rla873 sub c874 jr nc,Div8_NoAdd875 add a,c876Div8_NoAdd:877 djnz Div8_Loop878 ld b,a879 ld a,e880 rla881 cpl882 ret884Backdrop:885 ld a,r886 .in:887 di888 out ($99),a889 ld a,7+128890 ei891 out ($99),a 892 ret896WhichHudButtonClicked?: db 0897checktriggerhud:898 ld a,(GameStatus) 899 or a900 ret nz902910 ld ix,GenericButtonTable3911 call CheckButtonInteractionControlsOnInt912 call CheckIfHeroButtonShouldRemainLit913 ret915918924925CheckButtonInteractionControlsOnInt:926 ld hl,ControlsOnInterrupt927 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeControlsOnOffInterrupt),hl928 ld hl,NewPrControlsOnInterrupt929 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeNewPrControlsOnOffInterrupt),hl930 jr CheckButtonMouseInteractionGenericButtonsInEngine932CheckButtonInteractionControlsNotOnInt:933 ld hl,Controls934 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeControlsOnOffInterrupt),hl935 ld hl,NewPrContr936 ld (CheckButtonMouseInteractionGenericButtonsInEngine.SelfModifyingCodeNewPrControlsOnOffInterrupt),hl937939CheckButtonMouseInteractionGenericButtonsInEngine:940 ld b,(ix+GenericButtonAmountOfButtons)941 ld de,GenericButtonTableLenghtPerButton943 .loop:944 call .check945 add ix,de946 djnz .loop947 ret948 949 .check:951 bit 7,(ix+GenericButtonStatus) 952 ret z 953 954 ld a,(spat+0) 955 cp (ix+GenericButtonYtop)956 jr c,.NotOverButton957 cp (ix+GenericButtonYbottom)958 jr nc,.NotOverButton959 ld a,(spat+1) 961 add a,06962 963 cp (ix+GenericButtonXleft)964 jr c,.NotOverButton965 cp (ix+GenericButtonXright)966 jr nc,.NotOverButton967 969974.SelfModifyingCodeControlsOnOffInterrupt: equ $+1975 ld a,(ControlsOnInterrupt)976 bit 4,a 977 jr nz,.MouseOverButtonAndSpacePressed978 bit 4,(ix+GenericButtonStatus) 979 jr nz,.MenuOptionSelected 980 .MouseHoverOverButton:983 984 bit 5,(ix+GenericButtonStatus) 985 ld (ix+GenericButtonStatus),%1010 0011986 ret nz988 push iy989 push bc990 ld bc,SFX_ButtonHoverOver991 call RePlayerSFX_PlayCh1992 pop bc993 pop iy994 ret996 .MouseOverButtonAndSpacePressed:997 bit 4,(ix+GenericButtonStatus) 998 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit999.SelfModifyingCodeNewPrControlsOnOffInterrupt: equ $+11000 ld a,(NewPrControlsOnInterrupt)1001 bit 4,a 1002 jr z,.MouseHoverOverButton1004 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:1005 ld (ix+GenericButtonStatus),%1001 00111007 push iy1008 push bc1009 ld bc,SFX_ButtonClicked1010 call RePlayerSFX_PlayCh11011 pop bc1012 pop iy1013 ret1014 1015 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:1016 ld (ix+GenericButtonStatus),%1001 00111017 ret1019 .NotOverButton:1020 bit 4,(ix+GenericButtonStatus) 1021 jr nz,.buttonIsStillLit1022 bit 5,(ix+GenericButtonStatus) 1023 ret z1024 .buttonIsStillLit:1025 ld (ix+GenericButtonStatus),%1100 00111026 ret1028 .MenuOptionSelected:1029 pop af 1030 ld (ix+GenericButtonStatus),%1010 00111031 scf 1032 1033 ld a,b1034 ld (WhichHudButtonClicked?),a 1035 ret1046SetTotalManaHero:10471052 ld de,ItemIntelligencePointsTable1053 ld hl,SetAdditionalStatFromInventoryItemsInHL 1054 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1055 .SetAdditionalStatFromInventoryItemsInHLDone:1056 ld e,(ix+HeroStatKnowledge)1057 ld d,01058 add hl,de 1060 add hl,hl 1061 push hl1062 pop de1063 add hl,hl 1064 add hl,hl 1065 add hl,de 1066 ld (ix+HeroTotalMana+0),l1067 ld (ix+HeroTotalMana+1),h1068 1069 ld a,022 1070 cp (ix+HeroSkills+0)1071 jr z,.HeroHasBasicIntelligence1072 cp (ix+HeroSkills+1)1073 jr z,.HeroHasBasicIntelligence1074 cp (ix+HeroSkills+2)1075 jr z,.HeroHasBasicIntelligence1076 cp (ix+HeroSkills+3)1077 jr z,.HeroHasBasicIntelligence1078 cp (ix+HeroSkills+4)1079 jr z,.HeroHasBasicIntelligence1080 cp (ix+HeroSkills+5)1081 jr z,.HeroHasBasicIntelligence1083 ld a,023 1084 cp (ix+HeroSkills+0)1085 jr z,.HeroHasAdvancedIntelligence1086 cp (ix+HeroSkills+1)1087 jr z,.HeroHasAdvancedIntelligence1088 cp (ix+HeroSkills+2)1089 jr z,.HeroHasAdvancedIntelligence1090 cp (ix+HeroSkills+3)1091 jr z,.HeroHasAdvancedIntelligence1092 cp (ix+HeroSkills+4)1093 jr z,.HeroHasAdvancedIntelligence1094 cp (ix+HeroSkills+5)1095 jr z,.HeroHasAdvancedIntelligence1097 ld a,024 1098 cp (ix+HeroSkills+0)1099 jr z,.HeroHasExpertIntelligence1100 cp (ix+HeroSkills+1)1101 jr z,.HeroHasExpertIntelligence1102 cp (ix+HeroSkills+2)1103 jr z,.HeroHasExpertIntelligence1104 cp (ix+HeroSkills+3)1105 jr z,.HeroHasExpertIntelligence1106 cp (ix+HeroSkills+4)1107 jr z,.HeroHasExpertIntelligence1108 cp (ix+HeroSkills+5)1109 jr z,.HeroHasExpertIntelligence1110 ret1112 1113 .HeroHasBasicIntelligence:1114 ld c,(ix+HeroTotalMana+0)1115 ld b,(ix+HeroTotalMana+1)1116 ld de,41117 call DivideBCbyDE 1118 ld l,(ix+HeroTotalMana+0)1119 ld h,(ix+HeroTotalMana+1)1120 add hl,bc1121 ld (ix+HeroTotalMana+0),l1122 ld (ix+HeroTotalMana+1),h1123 ret1125 1126 .HeroHasAdvancedIntelligence:1127 ld c,(ix+HeroTotalMana+0)1128 ld b,(ix+HeroTotalMana+1)1129 ld de,21130 call DivideBCbyDE 1131 ld l,(ix+HeroTotalMana+0)1132 ld h,(ix+HeroTotalMana+1)1133 add hl,bc1134 ld (ix+HeroTotalMana+0),l1135 ld (ix+HeroTotalMana+1),h1136 ret1138 1139 .HeroHasExpertIntelligence:1140 ld l,(ix+HeroTotalMana+0)1141 ld h,(ix+HeroTotalMana+1)1142 add hl,hl 1143 ld (ix+HeroTotalMana+0),l1144 ld (ix+HeroTotalMana+1),h1145 ret1147SetHeroMaxMovementPoints:1148 ld ix,(plxcurrentheroAddress)1149 .IxAlreadySet:1150 ld b,0 1151 call .CheckMovementSpeedBonusForLogistics1152 ld c,0 1153 call .CheckMovementSpeedBonusForPlanesWalkers1154 ld d,0 1155 call .CheckMovementSpeedBonusForGripfast1157 ld a,201158 add a,b1159 add a,c1160 add a,d1161 ld (ix+HeroTotalMove),a1162 ret1164 .CheckMovementSpeedBonusForPlanesWalkers:1165 ld a,(ix+HeroInventory+4) 1166 cp 022 1167 ret nz1168 ld c,3 1169 ret1171 .CheckMovementSpeedBonusForGripfast:1172 ld a,(ix+HeroInventory+5) 1173 cp 025 1174 ret nz1175 ld d,2 1176 ret1178 .CheckMovementSpeedBonusForLogistics:1179 ld a,(ix+HeroSkills+0)1180 call .CheckSkil1181 ld a,(ix+HeroSkills+1)1182 call .CheckSkil1183 ld a,(ix+HeroSkills+2)1184 call .CheckSkil1185 ld a,(ix+HeroSkills+3)1186 call .CheckSkil1187 ld a,(ix+HeroSkills+4)1188 call .CheckSkil1189 ld a,(ix+HeroSkills+5)1190 call .CheckSkil1191 ret1193 .CheckSkil:1194 cp 19 1195 jr z,.BasicLogisticsFound1196 cp 20 1197 jr z,.AdvancedLogisticsFound1198 cp 21 1199 jr z,.ExpertLogisticsFound1200 ret1202 .BasicLogisticsFound:1203 ld b,2 1204 ret1205 .AdvancedLogisticsFound:1206 ld b,4 1207 ret1208 .ExpertLogisticsFound:1209 ld b,6 1210 ret1212SetText: 1213 ld a,2121214 ld (PutLetter+sy),a 1215 ld a,(GameStatus) 1216 cp 31217 jr nz,.GoSetText1218 ld a,2501219 ld (PutLetter+sy),a 1220 .GoSetText:1221 1223 ld a,61224 ld (PutLetter+ny),a 1226 ld a,b1227 ld (PutLetter+dx),a 1228 ld (TextDX),a1229 ld a,c1230 ld (PutLetter+dy),a 1231 ld (TextAddresspointer),hl 12321238 ld a,(activepage) 1239.SelfModifyingCodeSetTextInCurrentPage: equ $+11240 xor 1 1241 ld (PutLetter+dPage),a 1243 ld de,-11244 ld (TextPointer),de 1245 .NextLetter:1246 ld de,(TextPointer)1247 inc de1248 ld (TextPointer),de 1250 ld hl,(TextAddresspointer)12521254 add hl,de1256 ld a,(hl) 1257 cp 255 1258 ret z1259 cp 254 1260 jp z,.NextLine1261 cp TextSpace 1262 jp z,.Space1263 cp TextPercentageSymbol 1264 jp z,.TextPercentageSymbol1265 cp TextPlusSymbol 1266 jp z,.TextPlusSymbol1267 cp TextMinusSymbol 1268 jp z,.TextMinusSymbol1269 cp TextApostrofeSymbol 1270 jp z,.TextApostrofeSymbol1271 cp TextColonSymbol 1272 jp z,.TextColonSymbol1273 cp TextSlashSymbol 1274 jp z,.TextSlashSymbol1275 cp TextQuestionMarkSymbol 1276 jp z,.TextQuestionMarkSymbol1277 cp TextCommaSymbol 1278 jp z,.TextCommaSymbol1279 cp TextDotSymbol 1280 jp z,.TextDotSymbol1281 cp TextOpeningParenthesisSymbol 1282 jp z,.TextOpeningParenthesisSymbol1283 cp TextClosingParenthesisSymbol 1284 jp z,.TextClosingParenthesisSymbol1286 cp TextNumber0+101287 jr c,.Number1289 sub $411290 ld hl,.TextCoordinateTable 1291 add a,a 1292 ld d,01293 ld e,a1295 add hl,de1296 1297 .GoPutLetter:1298 ld a,(hl) 1299 ld (PutLetter+sx),a 1300 inc hl1301 ld a,(hl) 1302 ld (PutLetter+nx),a 1304 ld hl,PutLetter1305 call DoCopy1307 ld hl,PutLetter+nx 1308 ld a,(PutLetter+dx) 1309 add a,(hl) 1310 inc a 1311 ld (PutLetter+dx),a 1312 1313 jp .NextLetter1315 .Number:1316 sub TextNumber0 1317 add a,a 1318 ld d,01319 ld e,a 1321 ld hl,.TextNumberSymbolsSXNX1322 add hl,de1323 jr .GoPutLetter1324 1325 .TextPercentageSymbol:1326 ld hl,.TextPercentageSymbolSXNX 1327 jr .GoPutLetter1329 .TextPlusSymbol:1330 ld hl,.TextPlusSymbolSXNX 1331 jr .GoPutLetter1333 .TextMinusSymbol:1334 ld hl,.TextMinusSymbolSXNX 1335 jr .GoPutLetter1337 .TextApostrofeSymbol:1338 ld hl,.TextApostrofeSymbolSXNX 1339 jr .GoPutLetter1341 .TextColonSymbol:1342 ld hl,.TextColonSymbolSXNX 1343 jr .GoPutLetter1345 .TextSlashSymbol:1346 ld hl,.TextSlashSymbolSXNX 1347 jr .GoPutLetter1349 .TextQuestionMarkSymbol:1350 ld hl,.TextQuestionMarkSymbolSXNX 1351 jr .GoPutLetter1353 .TextCommaSymbol:1354 ld hl,.TextCommaSymbolSXNX 1355 jr .GoPutLetter1357 .TextDotSymbol:1358 ld hl,.TextDotSymbolSXNX 1359 jr .GoPutLetter1361 .TextOpeningParenthesisSymbol:1362 ld hl,.TextOpeningParenthesisSymbolSXNX 1363 jr .GoPutLetter1365 .TextClosingParenthesisSymbol:1366 ld hl,.TextClosingParenthesisSymbolSXNX 1367 jr .GoPutLetter1369 .Space:1370 ld a,(PutLetter+dx) 1371 add a,51372 ld (PutLetter+dx),a 1373 jp .NextLetter1375 .NextLine:1376 ld a,(PutLetter+dy) 1377 add a,71378 ld (PutLetter+dy),a 1379 ld a,(TextDX)1380 ld (PutLetter+dx),a 1381 jp .NextLetter13831384.TextNumberSymbolsSXNX: db 171,4, 175,2, 177,4, 181,3, 184,3, 187,3, 191,3, 195,4, 199,3, 203,3, 158,4 1385.TextSlashSymbolSXNX: db 158+49,4 1386.TextPercentageSymbolSXNX: db 162+49,4 1387.TextPlusSymbolSXNX: db 166+49,5 1388.TextMinusSymbolSXNX: db 169+49,5 1389.TextApostrofeSymbolSXNX: db 053,1 1390.TextColonSymbolSXNX: db 008,1 1391.TextQuestionMarkSymbolSXNX: db 223,3 1392.TextCommaSymbolSXNX: db 226,2 1393.TextDotSymbolSXNX: db 207,1 1394.TextOpeningParenthesisSymbolSXNX: db 133,2 1395.TextClosingParenthesisSymbolSXNX: db 134,2 13971398.TextCoordinateTable: db 084,3, 087,3, 090,3, 093,3, 096,3, 099,3, 102,4, 107,3, 110,3, 113,3, 116,4, 120,3, 123,5, 129,4, 133,3, 136,3, 139,3, 142,3, 145,3, 148,3, 151,3, 154,3, 157,5, 162,3, 165,3, 168,313991400ds 121401.TextCoordinateTableSmall: db 000,4, 004,3, 007,3, 010,3, 013,3, 016,2, 019,3, 022,3, 025,1, 026,2, 028,3, 032,1, 033,5, 038,3, 042,3, 046,3, 050,3, 054,2, 057,3, 060,2, 062,3, 065,3, 068,5, 073,3, 076,3, 080,41403SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0:14041405 ld de,10001406 call CompareHLwithDE1407 jr c,.NumberIsSmallerThan10001408 1410 add hl,de1411 ld de,100001412 call CompareHLwithDE1413 jr c,.NumberIsSmallerThan100001414 1416 add hl,de1417 push bc1418 push iy1419 call SetNumber16BitCastle.ConvertToDecimal16bit1420 ld iy,TextNumber1421 ld (iy+2),"k"1422 ld (iy+3),2551423 pop iy1424 pop bc1425 ld hl,TextNumber1426 jp SetText1428 .NumberIsSmallerThan10000:1429 add hl,de1430 push bc1431 push iy1432 call SetNumber16BitCastle.ConvertToDecimal16bit1434 ld iy,TextNumber1435 ld a,(iy+1)1436 ld (iy+2),a1437 ld (iy+1),"."1438 ld (iy+3),"k"1439 ld (iy+4),2551441 pop iy1442 pop bc1444 ld hl,TextNumber1445 jp SetText1447 .NumberIsSmallerThan1000:1448 add hl,de1449 1450SetNumber16BitCastleSkipIfAmountIs0:1451 ld a,h1452 cp l1453 ret z1455SetNumber16BitCastle: 1456 push bc1457 push iy1458 call .ConvertToDecimal16bit1459 pop iy1460 pop bc1462 ld hl,TextNumber1463 jp SetText1465 .ConvertToDecimal16bit:1466 ld iy,TextNumber1467 ld e,0 1469 .Check10000Folds:1470 ld d,$30 1472 .Loop10000Fold:1473 or a1474 ld bc,100001475 sbc hl,bc 1476 jr c,.Set10000Fold1477 inc d1478 jr .Loop10000Fold1480 .Set10000Fold:1481 ld a,d1482 cp $301483 jr z,.EndSet10000Fold 1484 ld e,1 1485 ld (iy),d 1486 inc iy1487 .EndSet10000Fold:1489 add hl,bc1491 .Check1000Folds:1492 ld d,$30 1494 .Loop1000Fold:1495 or a1496 ld bc,10001497 sbc hl,bc 1498 jr c,.Set1000Fold1499 inc d1500 jr .Loop1000Fold1502 .Set1000Fold:1503 bit 0,e1504 jr nz,.DoSet1000Fold 1505 ld a,d1506 cp $301507 jr z,.EndSet1000Fold 1508 ld e,1 1509 .DoSet1000Fold:1510 ld (iy),d 1511 inc iy1512 .EndSet1000Fold:1514 add hl,bc1516 .Check100Folds:1517 ld d,$30 1519 .Loop100Fold:1520 or a1521 ld bc,1001522 sbc hl,bc 1523 jr c,.Set100Fold1524 inc d1525 jr .Loop100Fold1527 .Set100Fold:1528 bit 0,e1529 jr nz,.DoSet100Fold 1530 ld a,d1531 cp $301532 jr nz,.DoSet100Fold 1534 ld a,(PutLetter+dx) 1535 add a,41536 ld (PutLetter+dx),a 1539 jr .EndSet100Fold 1541 .DoSet100Fold:1542 ld e,1 1543 ld (iy),d 1544 inc iy1545 .EndSet100Fold:1547 add hl,bc1549 .Check10Folds:1550 ld d,$30 1552 .Loop10Fold:1553 or a1554 ld bc,101555 sbc hl,bc 1556 jr c,.Set10Fold1557 inc d1558 jr .Loop10Fold1560 .Set10Fold:1561 bit 0,e1562 jr nz,.DoSet10Fold1563 ld a,d1564 cp $301565 jr nz,.DoSet10Fold 1567 ld a,(PutLetter+dx) 1568 add a,31569 ld (PutLetter+dx),a 1571 jr .EndSet10Fold 1573 .DoSet10Fold:1574 ld e,1 1575 ld (iy),d 1576 inc iy1577 .EndSet10Fold:1579 .Check1Fold:1580 ld bc,10 + $301581 add hl,bc1582 15831584 ld (iy),l 1585 ld (iy+1),255 1586 ret1596HeroXPTable:1597 dw 01000 1598 dw 02000 1599 dw 03200 1600 dw 04600 1601 dw 06200 1602 dw 08000 1603 dw 10000 1604 dw 12200 1605 dw 14700 1606 dw 17500 1607 dw 20600 1608 dw 24320 1609 dw 28784 1610 dw 34140 1611 dw 40567 1612 dw 48279 1613 dw 57533 1614 dw 65535 1616CheckHeroLevelUp:1617 ld a,(HeroLevelUp?) 1618 or a1619 ret nz1620 1621 ld ix,(plxcurrentheroAddress)1622 ld a,(ix+HeroLevel) 1623 cp 181624 ret z1626 add a,a1627 ld d,01628 ld e,a1629 ld hl,HeroXPTable-21630 add hl,de1631 ld e,(hl)1632 inc hl1633 ld d,(hl) 1634 1635 ld l,(ix+HeroXp+0) 1636 ld h,(ix+HeroXp+1)1637 or a1638 sbc hl,de1639 ret c1641 inc (ix+HeroLevel) 1642 ld a,31643 ld (HeroLevelUp?),a 1644 ret1646UpdateHUd:1647 ld hl,UpdateHudCode1648 jp EnterSpecificRoutineInCastleOverviewCode1650HeroLevelUp?: db 01651DisplayHeroLevelUp:1652 ld a,(HeroLevelUp?)1653 dec a1654 ret m1655 ld (HeroLevelUp?),a1656 jp nz,DisableScrollScreen1658 ld a,11659 ld (GameStatus),a 1660 call ClearMapPage0AndMapPage1 1662 ld hl,HeroLevelUpCode1663 jp EnterSpecificRoutineInCastleOverviewCode1665DisplayGuardTowerReward?: db 01666GuardTowerReward: ds 21667DisplayGuardTowerReward:1668 ld a,(DisplayGuardTowerReward?)1669 dec a1670 ret m1671 ld (DisplayGuardTowerReward?),a1672 jp nz,DisableScrollScreen1674 ld a,11675 ld (GameStatus),a 1676 call ClearMapPage0AndMapPage1 1678 ld hl,DisplayGuardTowerRewardCOde1679 call EnterSpecificRoutineInBattleCode1680 jp UpdateHUd1682DisplaySpireOfWisdom?: db 01683DisplaySpireOfWisdom:1684 ld a,(DisplaySpireOfWisdom?)1685 dec a1686 ret m1687 ld (DisplaySpireOfWisdom?),a1688 jp nz,DisableScrollScreen1690 ld a,11691 ld (GameStatus),a 1692 call ClearMapPage0AndMapPage1 1694 ld hl,DisplaySpireOfWisdomCOde1695 call EnterSpecificRoutineInExtraRoutines1696 jp UpdateHUd1698DisplayLearningStone?: db 01699DisplayLearningStone:1700 ld a,(DisplayLearningStone?)1701 dec a1702 ret m1703 ld (DisplayLearningStone?),a1704 jp nz,DisableScrollScreen1706 ld a,11707 ld (GameStatus),a 1708 call ClearMapPage0AndMapPage1 1710 ld hl,DisplayLearningStoneCOde1711 jp EnterSpecificRoutineInCastleOverviewCode1712 1713ChestFound?: db 01714BigChest?: ds 11715DisplayChestFound:1716 ld a,(ChestFound?)1717 dec a1718 ret m1719 ld (ChestFound?),a1720 jp nz,DisableScrollScreen1722 ld a,11723 ld (GameStatus),a 1724 call ClearMapPage0AndMapPage1 1726 ld hl,DisplayChestCode1727 jp EnterSpecificRoutineInCastleOverviewCode1729ScrollFound?: db 01730SpellScrollInventoryNumber: ds 1 1731DisplayScrollFound:1732 ld a,(ScrollFound?)1733 dec a1734 ret m1735 ld (ScrollFound?),a1736 jp nz,DisableScrollScreen1738 ld a,11739 ld (GameStatus),a 1740 call ClearMapPage0AndMapPage1 1742 ld hl,DisplayScrollCode1743 jp EnterSpecificRoutineInCastleOverviewCode1745CastleCodeSetAdditionalStatFromInventoryItemsInHL:1746 jp EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1748DisplayStartOfTurnMessage?: db 31749DisplayQuickTips?: db 11750DisplayStartOfTurnMessage:1751 if StartOfTurnMessageOn?1752 else1753 ret1754 endif1756 ld a,(DisplayStartOfTurnMessage?)1757 dec a1758 ret m1759 ld (DisplayStartOfTurnMessage?),a1760 ret nz1762 ld a,11763 ld (GameStatus),a 1764 call ClearMapPage0AndMapPage1 1766 ld hl,DisplayStartOfTurnMessageCode1767 call EnterSpecificRoutineInCastleOverviewCode1769 ld a,(DisplayQuickTips?)1770 or a1771 ret z1773 ld a,11774 ld (GameStatus),a 1776 ld hl,DisplayQuickTipsCode1777 jp EnterSpecificRoutineInCastleOverviewCode1779DisableScrollScreen:1780 ld a,11781 ld (DisableScrollScreen?),a1782 ret1783EnableScrollScreen:1784 xor a1785 ld (DisableScrollScreen?),a1786 ld (freezecontrols?),a1787 ld (WhichHudButtonClicked?),a1788 ld (MenuOptionSelected?),a1789 ret1791HandleHud: 1792 ld hl,HudCode1793 jp EnterSpecificRoutineInCastleOverviewCode1795EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters:1796 ld (.SelfModifyingCodeRoutine),hl1798 ld a,(memblocks.1) 1799 push af1800 ld a,(memblocks.2) 1801 push af1802 in a,($a8) 1803 push af 1805 ld a,(slot.page12rom) 1806 out ($a8),a1808 ld a,CastleOverviewCodeBlock 1809 call block1234 1811 .SelfModifyingCodeRoutine: equ $+11812 call $ffff1814 pop af1815 out ($a8),a 1816 pop af1817 call block34 1818 pop af1819 call block12 1820 ret1822EnterSpecificRoutineHeroOverviewCode:1823 ld (.SelfModifyingCodeRoutine),hl1825 ld a,(memblocks.1) 1826 push af1827 ld a,(memblocks.2) 1828 push af1829 in a,($a8) 1830 push af 1832 ld a,(slot.page12rom) 1833 out ($a8),a1835 ld a,HeroOverviewCodeBlock 1836 call block1234 1838 .SelfModifyingCodeRoutine: equ $+11839 call $ffff1841 pop af1842 out ($a8),a 1843 pop af1844 call block34 1845 pop af1846 call block12 1848 xor a1849 ld (vblankintflag),a1850 ld (GameStatus),a 1851 ld hl,01852 ld (CurrentCursorSpriteCharacter),hl1853 jp EnableScrollScreen1855EnterSpecificRoutineInExtraRoutines:1856 ld (.SelfModifyingCodeRoutine),hl1858 ld a,(memblocks.1) 1859 push af1860 ld a,(memblocks.2) 1861 push af1862 in a,($a8) 1863 push af 1865 ld a,(slot.page12rom) 1866 out ($a8),a1868 ld a,ExtraRoutinesCodeBlock 1869 call block12 1871 .SelfModifyingCodeRoutine: equ $+11872 call $ffff1874 pop af1875 out ($a8),a 1876 pop af1877 call block34 1878 pop af1879 call block12 1881 xor a1882 ld (vblankintflag),a1883 ld (GameStatus),a 1884 ld hl,01885 ld (CurrentCursorSpriteCharacter),hl1886 jp EnableScrollScreen1888EnterSpecificRoutineInCastleOverviewCode:1889 ld (.SelfModifyingCodeRoutine),hl1891 ld a,(memblocks.1) 1892 push af1893 ld a,(memblocks.2) 1894 push af1895 in a,($a8) 1896 push af 1898 ld a,(slot.page12rom) 1899 out ($a8),a1901 ld a,CastleOverviewCodeBlock 1902 call block1234 1904 .SelfModifyingCodeRoutine: equ $+11905 call $ffff1907 pop af1908 out ($a8),a 1909 pop af1910 call block34 1911 pop af1912 call block12 1914 xor a1915 ld (vblankintflag),a1916 ld (GameStatus),a 1917 ld hl,01918 ld (CurrentCursorSpriteCharacter),hl1919 jp EnableScrollScreen1921EnterSpecificRoutineInBattleCode:1922 ld (.SelfModifyingCodeRoutine),hl1924 ld a,(memblocks.1) 1925 push af1926 ld a,(memblocks.2) 1927 push af1928 in a,($a8) 1929 push af 1931 ld a,(slot.page12rom) 1932 out ($a8),a1934 ld a,BattleCodeBlock 1935 call block12 1937 .SelfModifyingCodeRoutine: equ $+11938 call $ffff1940 pop af1941 out ($a8),a 1942 pop af1943 call block34 1944 pop af1945 call block12 1947 xor a1948 ld (vblankintflag),a1949 ld (GameStatus),a 1950 ld hl,01951 ld (CurrentCursorSpriteCharacter),hl1952 jp EnableScrollScreen1954HeroWeTradeWith: ds 21955HeroCollidesWithFriendlyHero?: ds 11956CheckEnterTradeMenuBetween2FriendlyHeroes:19571964 ld a,(HeroCollidesWithFriendlyHero?)1965 dec a1966 ret m1967 ld (HeroCollidesWithFriendlyHero?),a1968 jp nz,DisableScrollScreen196919711972 ld a,11973 ld (GameStatus),a 1975 ld hl,TradeMenuCode1976 call EnterSpecificRoutineInCastleOverviewCode1978 xor a1979 ld (vblankintflag),a1980 ld (putmovementstars?),a 1981 ld (mouseclickx),a 1982 ld (mouseclicky),a 1983 ld (framecounter),a1984 ld (movehero?),a 1985 call ClearMapPage0AndMapPage1 1986 ld hl,CursorBoots1987 ld (CurrentCursorSpriteCharacter),hl1988 ret1993CheckHeroCollidesWithFriendlyHero: 1994 ld ix,(plxcurrentheroAddress)1995 19961997 ld a,(whichplayernowplaying?) | cp 1 | ld iy,pl1hero1y | jp z,.CheckHeroTouchesFriendlyHero1998 ld a,(whichplayernowplaying?) | cp 2 | ld iy,pl2hero1y | jp z,.CheckHeroTouchesFriendlyHero1999 ld a,(whichplayernowplaying?) | cp 3 | ld iy,pl3hero1y | jp z,.CheckHeroTouchesFriendlyHero2000 ld a,(whichplayernowplaying?) | cp 4 | ld iy,pl4hero1y | jp z,.CheckHeroTouchesFriendlyHero2001 ret2003 .CheckHeroTouchesFriendlyHero: 2004 ld b,amountofheroesperplayer2005 .checkpointerFriendlyloop:2006 push ix2007 pop hl2008 push iy2009 pop de2010 call CompareHLwithDE2011 jr z,.endcheck12013 ld a,(iy+HeroStatus) 2014 cp 255 2015 jr z,.endcheck1 2016 cp 254 2017 jr z,.endcheck12019 ld a,(ix+HeroY)2020 cp (iy+HeroY)2021 jr nz,.endcheck12023 ld a,(ix+HeroX)2024 cp (iy+HeroX)2025 jr z,.HeroTouchesFriendlyHero2026 .endcheck1:2027 ld de,lenghtherotable2028 add iy,de2029 djnz .checkpointerFriendlyloop2030 ret2032 .HeroTouchesFriendlyHero:2033 ld (HeroWeTradeWith),iy 2034 scf2035 ret2037SetMappositionHero: 2038 ld ix,(plxcurrentheroAddress)2040 2041 ld a,(ix+HeroY)2042 inc a 2045 ld de,(maplenght)2046 ld h,02047 ld l,a2048 call MultiplyHlWithDE 2053 ld bc,mapdata 2054 add hl,bc2055 ld c,(ix+HeroX)2056 ld b,02057 add hl,bc 20622069 ret2071CheckHeroCollidesWithGuardTower:2072 ld a,2 2073 ld (page1bank),a2074 out ($fe),a 2076 ld a,(RemoveDeadMonstersNeutralMonster?)2077 or a2078 jp nz,CheckHeroCollidesWithMonster.RemoveDeadMonstersNeutralMonster2080 ld ix,(plxcurrentheroAddress)2081 ld a,(ix+HeroStatus)2082 cp 2552083 ret z2085 Call SetMappositionHero 2087 ld a,(hl)2088 cp 762089 ret nz2091 inc hl 2092 ld a,(hl)2093 ld (MonsterHerocollidedWithOnMapAmount),a2094 or a2095 ret z2097 inc hl 2098 ld a,(hl)2099 sub 1912100 ld (GuardTowerMonsterLevel),a2101 dec hl2102 xor a2103 ld (movehero?),a2104 ld (FightGuardTowerMonster?),a2106 push hl2107 ld a,12108 ld (GameStatus),a 2109 call ClearMapPage0AndMapPage1 2110 ld hl,DisplayGuardTowerCOde2111 call EnterSpecificRoutineInBattleCode2112 pop hl2114 ld a,(FightGuardTowerMonster?)2115 or a2116 ret z2117 2118 dec hl2119 xor a 2120 jp CheckHeroCollidesWithMonster.NormalMonster2122CheckHeroCollidesWithMonster:2123 ld a,2 2124 ld (page1bank),a2125 out ($fe),a 2127 ld a,(RemoveDeadMonstersNeutralMonster?)2128 or a2129 jr nz,.RemoveDeadMonstersNeutralMonster2131 ld ix,(plxcurrentheroAddress)2132 ld a,(ix+HeroStatus)2133 cp 2552134 ret z2136 Call SetMappositionHero 2138 ld a,(hl)2139 cp 1922140 ret nc 2141 cp 76 2142 jr z,.CheckIfGuardTowerJustDied2143 cp 1282144 ret c 2146 .NormalMonster:2147 ld (MonsterHerocollidedWithOnMap),a2148 ld a,l2149 ld (XAddressOfMonsterHerocollidedWithOnMap),a2151 ld a,(NeutralEnemyDied?)2152 or a2153 jr nz,.ThisEnemyJustDied2155 inc hl2156 ld (AddressOfMonsterAmountHerocollidedWithOnMap),hl2157 ld a,(hl)2158 ld (MonsterHerocollidedWithOnMapAmount),a2160 ld hl,02161 ld (HeroThatGetsAttacked),hl 2162 jp EnterCombat2164 .RemoveDeadMonstersNeutralMonster:2165 ld hl,(AddressOfMonsterAmountHerocollidedWithOnMap)2166 ld (hl),a 2167 xor a2168 ld (RemoveDeadMonstersNeutralMonster?),a 2169 ret2171 .ThisEnemyJustDied:2172 .CheckIfGuardTowerJustDied:2173 ld a,(NeutralEnemyDied?)2174 or a2175 ret z2177 xor a2178 ld (NeutralEnemyDied?),a2180 inc hl 2181 ld (hl),a 2182 dec hl2184 ld a,(hl)2185 cp 762186 jr z,.GuardTowerDied2187 ld (hl),0 2189 or a2190 sbc hl,de 2191 ld a,(hl)2193 cp 1922194 ret c2195 ld (hl),0 2196 ret2198 .GuardTowerDied: 2199 inc hl2200 inc hl2202 ld d,02203 ld a,(hl) 2204 sub 191 2205 ld e,a2206 ld (hl),0 2207 inc hl2208 ld a,(hl) 2209 ld (hl),0 2211 sub 191 2212 ld h,02213 ld l,a2214 call MultiplyHlWithDE 2215 ld de,2502216 call MultiplyHlWithDE 2217 ld (GuardTowerReward),hl22192228223622442251 ld a,52252 ld (DisplayGuardTowerReward?),a2253 ret2255SetResourcesCurrentPlayerinIX:2256 ld a,(whichplayernowplaying?)2257 .PlayerAlreadySetInA:2258 ld ix,ResourcesPlayer12259 cp 12260 ret z2261 ld ix,ResourcesPlayer22262 cp 22263 ret z2264 ld ix,ResourcesPlayer32265 cp 32266 ret z2267 ld ix,ResourcesPlayer422682270 ret2272CheckHeroPicksUpItem:2273 Call SetMappositionHero 2275 ld a,2 2276 ld (page1bank),a2277 out ($fe),a 2279 ld a,(hl)2280 or a2281 ret z2282 cp 1282283 ret nc 2285 2286 push af2287 call SetResourcesCurrentPlayerinIX 2288 ld a,32289 ld (SetResources?),a2290 ld (ChangeManaAndMovement?),a 2291 pop af2293 cp 652294 jp z,.TreasureChestBig2295 cp 662296 jp z,.TreasureChestSmall2297 cp 672298 jp z,.Wood2299 cp 682300 jp z,.Ore2301 cp 692302 jp z,.Gems2303 cp 702304 jp z,.Rubies2305 cp 712306 jp z,.Gold2307 cp 722308 jp z,.WaterWell2309 cp 732310 jp z,.LearningStone2311 cp 742312 jp z,.SpireOfWisdom2313 cp 752314 jp z,Scroll2315 cp 76 2316 ret z 2318.InventoryItems:2319 2320 sub 832321 ld c,a2322 ld ix,(plxcurrentheroAddress)2324 .CheckAll9SlotsLoop:2325 sub 52326 jr c,.AppropriateInvventorySlotFound2327 inc ix 2328 jr .CheckAll9SlotsLoop2330 .SetItemInExtraSlots:2331 ld ix,(plxcurrentheroAddress)2332 ld b,6 2334 .loop:2335 ld a,(ix+HeroInventory+9)2336 cp 045 2337 jr z,.SetItem2338 inc ix2339 djnz .loop2340 ret2341 2342 .SetItem:2343 ld (ix+HeroInventory+9),c2344 jr .EndInventoryPickupRoutineAndUpdateHud2346 .AppropriateInvventorySlotFound:2347 ld a,(ix+HeroInventory+0)2348 cp 45 2349 jp nz,.SetItemInExtraSlots 2350 ld (ix+HeroInventory+0),c2351 .EndInventoryPickupRoutineAndUpdateHud:2352 xor a2353 ld (movehero?),a2354 ld (hl),a 2355 ld a,32356 ld (SetHeroArmyAndStatusInHud?),a2357 call SetHeroMaxMovementPoints2358 jp SetTotalManaHero237623902397.WaterWell:2398 ld ix,(plxcurrentheroAddress)2399 ld a,(ix+HeroTotalMove)2400 cp (ix+HeroMove)2401 ld (ix+HeroMove),a2402 ret z2403 xor a2404 ld (movehero?),a 2406 ld e,(ix+HeroSpecificInfo+0) 2407 ld d,(ix+HeroSpecificInfo+1)2408 push de2409 pop ix 2410 2411 ld a,(ix+HeroinfoSYSX+0) 2412 and %0100 1000 2413 or a,128 + (096 / 2) 2414 xor 82415 ld (ix+HeroinfoSYSX+0),a 2417 ld bc,SFX_WaterWell2418 jp RePlayerSFX_PlayCh1 2420.SpireOfWisdom:2421 call .CheckSpireOfWisdomAlreadyVisited2422 ret nz2424 xor a2425 ld (movehero?),a2426 ld a,32427 ld (DisplaySpireOfWisdom?),a2428 ret2430.CheckSpireOfWisdomAlreadyVisited:2431 ld ix,(plxcurrentheroAddress)2433 inc hl2434 ld a,(hl) 2435 sub 1922436 jr z,.SpireOfWisdom12437 dec a2438 jr z,.SpireOfWisdom22439 dec a2440 jr z,.SpireOfWisdom32441 dec a2442 jr z,.SpireOfWisdom42443 dec a2444 jr z,.SpireOfWisdom524452447 2448 .SpireOfWisdom6:2449 bit 4,(ix+HeroAirSpells)2450 ret nz2451 set 4,(ix+HeroAirSpells)2452 ret2453 .SpireOfWisdom5:2454 bit 5,(ix+HeroAirSpells)2455 ret nz2456 set 5,(ix+HeroAirSpells)2457 ret2458 .SpireOfWisdom4:2459 bit 6,(ix+HeroAirSpells)2460 ret nz2461 set 6,(ix+HeroAirSpells)2462 ret2463 .SpireOfWisdom3:2464 bit 7,(ix+HeroAirSpells)2465 ret nz2466 set 7,(ix+HeroAirSpells)2467 ret2468 .SpireOfWisdom2:2469 bit 4,(ix+HeroFireSpells)2470 ret nz2471 set 4,(ix+HeroFireSpells)2472 ret2473 .SpireOfWisdom1:2474 bit 5,(ix+HeroFireSpells)2475 ret nz2476 set 5,(ix+HeroFireSpells)2477 ret2479.LearningStone:2480 call .CheckLearningStoneAlreadyVisited2481 ret nz2483 xor a2484 ld (movehero?),a2485 ld a,32486 ld (DisplayLearningStone?),a2487 ret2489.CheckLearningStoneAlreadyVisited:2490 ld ix,(plxcurrentheroAddress)2492 inc hl2493 ld a,(hl) 2494 sub 1922495 jr z,.LearningStone12496 dec a2497 jr z,.LearningStone22498 dec a2499 jr z,.LearningStone32500 dec a2501 jr z,.LearningStone42502 dec a2503 jr z,.LearningStone525042506 2507 .LearningStone6:2508 bit 6,(ix+HeroFireSpells)2509 ret nz2510 set 6,(ix+HeroFireSpells)2511 ret2512 .LearningStone5:2513 bit 7,(ix+HeroFireSpells)2514 ret nz2515 set 7,(ix+HeroFireSpells)2516 ret2517 .LearningStone4:2518 bit 4,(ix+HeroEarthSpells)2519 ret nz2520 set 4,(ix+HeroEarthSpells)2521 ret2522 .LearningStone3:2523 bit 5,(ix+HeroEarthSpells)2524 ret nz2525 set 5,(ix+HeroEarthSpells)2526 ret2527 .LearningStone2:2528 bit 6,(ix+HeroEarthSpells)2529 ret nz2530 set 6,(ix+HeroEarthSpells)2531 ret2532 .LearningStone1:2533 bit 7,(ix+HeroEarthSpells)2534 ret nz2535 set 7,(ix+HeroEarthSpells)2536 ret2538.TreasureChestSmall:2539 xor a2540 ld (movehero?),a2541 ld (hl),a 2542 ld a,32543 ld (ChestFound?),a2544 ld a,02545 ld (BigChest?),a2546 ret2548.TreasureChestBig:2549 xor a2550 ld (movehero?),a2551 ld (hl),a 2552 ld a,32553 ld (ChestFound?),a2554 ld a,12555 ld (BigChest?),a2556 ret2558.SfxResourcePickedUp:2559 ld bc,SFX_ResourcePickedUp2560 jp RePlayerSFX_PlayCh1 2562.Gold:2563 xor a2564 ld (movehero?),a2565 ld (hl),a 2566 ld de,5002567 ld l,(ix+0) 2568 ld h,(ix+1)2569 add hl,de2570 ld (ix+0),l2571 ld (ix+1),h 2572 jr .SfxResourcePickedUp2574.Wood:2575 xor a2576 ld (movehero?),a2577 ld (hl),a 2578 ld de,52579 ld l,(ix+2) 2580 ld h,(ix+3)2581 add hl,de2582 ld (ix+2),l2583 ld (ix+3),h 2584 jr .SfxResourcePickedUp2586.Ore:2587 xor a2588 ld (movehero?),a2589 ld (hl),a 2590 ld de,52591 ld l,(ix+4) 2592 ld h,(ix+5)2593 add hl,de2594 ld (ix+4),l2595 ld (ix+5),h 2596 jr .SfxResourcePickedUp2598.Gems:2599 xor a2600 ld (movehero?),a2601 ld (hl),a 2602 ld de,52603 ld l,(ix+6) 2604 ld h,(ix+7)2605 add hl,de2606 ld (ix+6),l2607 ld (ix+7),h 2608 jr .SfxResourcePickedUp2610.Rubies:2611 xor a2612 ld (movehero?),a2613 ld (hl),a 2614 ld de,52615 ld l,(ix+8) 2616 ld h,(ix+9)2617 add hl,de2618 ld (ix+8),l2619 ld (ix+9),h 2620 jr .SfxResourcePickedUp2622NXAndNY10x18HeroPortraits: equ 018*256 + (010/2) 2623NXAndNY14x9HeroPortraits: equ 009*256 + (014/2) 2624DYDXHeroWindow10x18InHud: equ 132*128 + (204/2) - 128 2625DYDXFirstHeroWindow14x9InHud: equ 067*128 + (208/2) - 128 2626DYDXSecondHeroWindow14x9InHud: equ 078*128 + (208/2) - 128 2627DYDXThirdHeroWindow14x9InHud: equ 089*128 + (208/2) - 128 2630SetResources?: db 32631SetHeroArmyAndStatusInHud?: db 32633CheckEnterCastle:2634 ld a,(PlayerLostHeroInBattle?)2635 or a2636 ret nz2638 ld a,(EnterCastle?)2639 or a2640 ret z2641 xor a2642 ld (EnterCastle?),a2643 pop af 2644 ld iy,(WhichCastleIsPointerPointingAt?)2645 jp EnterCastle2647CheckHeroEntersCastle:2648 ld ix,(plxcurrentheroAddress)2649 ld iy,Castle12650 call .GoCheck2651 ld iy,Castle22652 call .GoCheck2653 ld iy,Castle32654 call .GoCheck2655 ld iy,Castle42656 call .GoCheck2657 ret2659 .GoCheck:2660 ld a,(iy+CastleY) 2661 dec a2662 cp (ix+Heroy)2663 ret nz2664 ld a,(iy+CastleX)2665 inc a2666 inc a2667 cp (ix+Herox)2668 ret nz2670 ld a,(whichplayernowplaying?) 2671 cp (iy+CastlePlayer)2672 jr nz,.TakeOverCastle 2674 ld a,(PlayerLostHeroInBattle?)2675 or a2676 ret nz2678 ld a,(ix+HeroStatus) 2679 cp 0022680 ret z 2681 cp 2542682 ret z 2684 2685 ld (ix+HeroStatus),002 2686 2687 pop af 2688 pop af 2690 2691 ld e,(ix+HeroSpecificInfo+0) 2692 ld d,(ix+HeroSpecificInfo+1)2693 push de2694 pop ix 2695 2696 ld a,(ix+HeroinfoSYSX+0) 2697 and %0100 1000 2698 or a,128 + (064 / 2) 2699 xor 82700 ld (ix+HeroinfoSYSX+0),a2702 jp EnterCastle2703 2704.TakeOverCastle: 2705 push af2706 ld a,(iy+CastlePlayer)2707 ld (PlayerWhoLostAHeroInBattle?),a2708 inc a2709 jr z,.NeutralCastleFound 2710 ld a,32711 ld (PlayerLostHeroInBattle?),a2712 .NeutralCastleFound:2713 pop af2714 2715 ld (iy+CastlePlayer),a2716 pop af 2717 ret2718 2719 2720CheckHeroCollidesWithEnemyHero:2721 ld ix,(plxcurrentheroAddress)2722 27232724 ld de,lenghtherotable2725 ld hl,lenghtherotable*(amountofheroesperplayer-1)2726 ld a,(whichplayernowplaying?) | cp 1 | ld a,1 | ld bc,pl1hero8y | ld iy,pl1hero1y | call nz,.CheckHeroTouchesEnemyHero2727 ld a,(whichplayernowplaying?) | cp 2 | ld a,2 | ld bc,pl2hero8y | ld iy,pl2hero1y | call nz,.CheckHeroTouchesEnemyHero2728 ld a,(whichplayernowplaying?) | cp 3 | ld a,3 | ld bc,pl3hero8y | ld iy,pl3hero1y | call nz,.CheckHeroTouchesEnemyHero2729 ld a,(whichplayernowplaying?) | cp 4 | ld a,4 | ld bc,pl4hero8y | ld iy,pl4hero1y | call nz,.CheckHeroTouchesEnemyHero2730 ret2732 .CheckHeroTouchesEnemyHero: 2733 ld (PlayerThatGetsAttacked),a2734 ld (LastHeroForPlayerThatGetsAttacked),bc2735 ld b,amountofheroesperplayer2736 .checkpointerenemyloop:2737 ld a,(iy+HeroStatus) 2738 inc a 2739 jp z,.endcheck1 2741 ld a,(ix+HeroY)2742 cp (iy+HeroY)2743 jp nz,.endcheck12745 ld a,(ix+HeroX)2746 cp (iy+HeroX)2747 jp z,.HeroTouchesEnemyHero2748 .endcheck1:2749 add iy,de2750 or a2751 sbc hl,de 2752 djnz .checkpointerenemyloop2753 ret2755 .HeroTouchesEnemyHero:2756 ld (HeroThatGetsAttacked),iy 2757 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl2758 pop af2759 pop af 2760 jp EnterCombat2762LastHeroForPlayerThatGetsAttacked: ds 22763PlayerThatGetsAttacked: ds 12764HeroThatGetsAttacked: ds 227652766AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked: ds 22768CheckIfHeroButtonShouldRemainLit: 2769 ld a,(currentherowindowclicked)2770 2771 cp 12772 ld ix,ButtonHeroWindow1 2773 ld hl,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2774 jr z,.checkherobutton2776 cp 22777 ld ix,ButtonHeroWindow2 2778 ld hl,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2779 jr z,.checkherobutton2781 cp 32782 ld ix,ButtonHeroWindow3 2783 ld hl,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2784 ret nz2785 2786 .checkherobutton: 2787 ld a,(ix+ButtonLit?) 2788 or a2789 ret z 2791 bit 4,(hl) 2792 ret nz2793 2794 ld (hl),%1010 0011 2795 ret2797CompareHLwithDE:2798 or a2799 sbc hl,de2800 ret2802ButtonLit?: equ 0 2803ButtonHeroWindow1: db 02804ButtonHeroWindow2: db 02805ButtonHeroWindow3: db 02806ButtonCastleWindow1: db 02807ButtonCastleWindow2: db 02808ButtonCastleWindow3: db 02810CastleWindownY: equ 102811CastleWindownX: equ 202812HerowindowNY: equ 102813HerowindowNX: equ 142815centrescreenforthisCastle:2816 ld a,TilesPerColumn2817 ld b,a2818 ld a,(mapheight)2819 sub a,b2820 ld b,a2822 ld a,TilesPerRow2823 ld c,a2824 ld a,(maplenght)2825 sub a,c2826 ld c,a2827 2828 ld a,(ix+CastleY) 2829 sub a,TilesPerColumn/2 - 12830 jp nc,.notoutofscreentop2831 xor a2832.notoutofscreentop: 2833 ld (mappointery),a2835 cp b2836 jp c,.notoutofscreenbottom2837 ld a,b2838 ld (mappointery),a2839.notoutofscreenbottom: 2840 2841 ld a,(ix+CastleX) 2842 sub a,TilesPerRow/22843 jp nc,.notoutofscreenleft2844 xor a2845.notoutofscreenleft: 2846 ld (mappointerx),a2848 cp c2849 jp c,.notoutofscreenright2850 ld a,c2851 ld (mappointerx),a2852.notoutofscreenright: 2853 ret2855ActivateFirstActiveHeroForCurrentPlayer:2856 xor a2857 ld (herowindowpointer),a 2858 ld (CastleWindowPointer),a 2859 ld (currentherowindowclicked),a 2861 call SetHero1ForCurrentPlayerInIX2862 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime28642865 ld (plxcurrentheroAddress),ix 2866 call FirstHeroWindowClicked 2867 xor a2868 ld (SetHeroOverViewMenu?),a2870 InitiatePlayerTurn:2871 ld a,2 2872 ld (ButtonHeroWindow1+ButtonLit?),a2873 ld (ButtonHeroWindow2+ButtonLit?),a2874 ld (ButtonHeroWindow3+ButtonLit?),a2876 ld (ButtonCastleWindow1+ButtonLit?),a2877 ld (ButtonCastleWindow2+ButtonLit?),a2878 ld (ButtonCastleWindow3+ButtonLit?),a28802884 ld ix,(plxcurrentheroAddress)2885 call centrescreenforthishero.GoCenter2886 ld a,(ix+HeroStatus) 2887 cp 254 2888 jr z,ActivateFirstActiveHeroForCurrentPlayer2889 cp 255 2890 call z,CenterScreenOnPlayersCastleAndNoActiveHero2891 2892 2893 2894 ld a,3 2895 ld (SetHeroesInWindows?),a 2896 ld (SetCastlesInWindows?),a 2897 ld (SetHeroArmyAndStatusInHud?),a2898 ld (SetResources?),a2899 ld a,42900 ld (ChangeManaAndMovement?),a 2902 call CheckIfCurrentPlayerIsDisabled 2903 ret nc2904 call SetNextPlayersTurn 2905 jp ActivateFirstActiveHeroForCurrentPlayer2907CheckIfCurrentPlayerIsDisabled: 2908 ld a,(whichplayernowplaying?) 2909 ld ix,Castle1 | cp (ix+CastlePlayer) | ret z2910 ld ix,Castle2 | cp (ix+CastlePlayer) | ret z2911 ld ix,Castle3 | cp (ix+CastlePlayer) | ret z2912 ld ix,Castle4 | cp (ix+CastlePlayer) | ret z2914 call SetHero1ForCurrentPlayerInIX 2916 ld b,72917 .loop:2918 ld a,(ix+HeroStatus)2919 cp 1 2920 ret z2921 ld de,lenghtherotable2922 add ix,de2923 djnz .loop2925 scf 2926 ret2928 2929SetNextPlayersTurn:2930 ld a,(amountofplayers) 2931 ld b,a2932 ld a,(whichplayernowplaying?)2933 cp b2934 jp nz,.endchecklastplayer2935 xor a2936 .endchecklastplayer: 2937 inc a2938 ld (whichplayernowplaying?),a2939 ret2941CenterScreenOnPlayersCastleAndNoActiveHero:2942 ld a,0 2943 ld (ButtonHeroWindow1+ButtonLit?),a2944CenterScreenOnPlayersCastle: 2945 call SetCastleUsingCastleWindowPointerInIX2946 jp centrescreenforthisCastle2948SetCastleUsingCastleWindowPointerInIX:2949 ld a,(CastleWindowPointer) 2950 ld c,a 2951 ld a,(whichplayernowplaying?)2952 ld b,AmountOfCastles2953 ld ix,Castle12954 ld de,LenghtCastleTable2955 .SearchLoop:2956 cp (ix+CastlePlayer)2957 jp z,.CastleFound2958 add ix,de2959 djnz .SearchLoop2960 2961 pop af2962 ret2964 .CastleFound:2965 dec c2966 ret m2967 add ix,de2968 djnz .SearchLoop2969 2970 pop af2971 ret2973 .SearchNextCastle: 2974 add ix,de2975 cp (ix+CastlePlayer)2976 ret z 2977 djnz .SearchNextCastle2978 2979 pop af2980 ret 2983ThirdHeroWindowClicked:2984 call SetHero1ForCurrentPlayerInIX2985 call SetHeroForWindow3DeterminedByHeroWindowPointerInIX2986 2987 ld a,(ix+HeroStatus) 2988 cp 255 2989 ret z 2991 ld a,32992 ld (currentherowindowclicked),a 2993 jp centrescreenforthishero2995SecondHeroWindowClicked:2996 call SetHero1ForCurrentPlayerInIX2997 call SetHeroForWindow2DeterminedByHeroWindowPointerInIX2998 2999 ld a,(ix+HeroStatus) 3000 cp 255 3001 ret z 3003 ld a,23004 ld (currentherowindowclicked),a 3005 jp centrescreenforthishero3007FirstHeroWindowClicked: 3008 call SetHero1ForCurrentPlayerInIX3009 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX3010 3011 ld a,(ix+HeroStatus) 3012 cp 255 3013 ret z 3015 ld a,13016 ld (currentherowindowclicked),a 3017 jp centrescreenforthishero3019CenterScreenForCurrentHero:3020 ld ix,(plxcurrentheroAddress)3021 jp centrescreenforthishero.GoCenter3022 3023centrescreenforthishero:3024 ld a,2 3025 ld (ButtonHeroWindow1+ButtonLit?),a3026 ld (ButtonHeroWindow2+ButtonLit?),a3027 ld (ButtonHeroWindow3+ButtonLit?),a3028 ld a,33029 ld (SetHeroArmyAndStatusInHud?),a3031 ld hl,(plxcurrentheroAddress)3032 push hl3033 ld (plxcurrentheroAddress),ix3035 ld a,(mappointery)3036 ld b,a3037 ld a,(mappointerx)3038 ld c,a3039 push bc3041 call .GoCenter3043 pop bc3044 3045 ld hl,(plxcurrentheroAddress)3046 pop de3047 xor a3048 sbc hl,de3049 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3051 ld a,(mappointery)3052 ld h,a3053 ld a,(mappointerx)3054 ld l,a3055 xor a3056 sbc hl,bc3057 jr nz,.AnotherHeroIsSelectedOrMappointerIsDifferent3059 ld a,23060 ld (SetHeroOverViewMenu?),a 3061 xor a3062 ld (freezecontrols?),a3063 ret3065 .AnotherHeroIsSelectedOrMappointerIsDifferent:3066 xor a3067 ld (putmovementstars?),a3068 ld (mouseclickx),a 3069 ld (mouseclicky),a 3070 ld (movementpathpointer),a3071 ld (movehero?),a3072 ret30743075.GoCenter:3077 ld a,TilesPerColumn3078 ld b,a3079 ld a,(mapheight)3080 sub a,b3081 ld b,a3083 ld a,TilesPerRow3084 ld c,a3085 ld a,(maplenght)3086 sub a,c3087 ld c,a3088 3089 ld a,(ix+HeroY) 3090 sub a,TilesPerColumn/2 - 13091 jp nc,.notoutofscreentop3092 xor a3093.notoutofscreentop: 3094 ld (mappointery),a3096 cp b3097 jp c,.notoutofscreenbottom3098 ld a,b3099 ld (mappointery),a3100.notoutofscreenbottom: 3101 3102 ld a,(ix+HeroX) 3103 sub a,TilesPerRow/23104 jp nc,.notoutofscreenleft3105 xor a3106.notoutofscreenleft: 3107 ld (mappointerx),a3109 cp c3110 jp c,.notoutofscreenright3111 ld a,c3112 ld (mappointerx),a3113.notoutofscreenright: 3114 ret3116CheckHeroArrowUp:3117 ld a,(herowindowpointer)3118 sub a,13119 ret c3120 ld (herowindowpointer),a3122 call SetHero1ForCurrentPlayerInIX3123 call SetHeroUsingHeroWindowPointer3124 call FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime3126 ld a,33127 ld (SetHeroesInWindows?),a 3128 ld (ChangeManaAndMovement?),a3130 ld a,2 3131 ld (ButtonHeroWindow1+ButtonLit?),a3132 ld (ButtonHeroWindow2+ButtonLit?),a3133 ld (ButtonHeroWindow3+ButtonLit?),a3135 ld a,(currentherowindowclicked)3136 inc a3137 ld (currentherowindowclicked),a3138 ret3140CheckCastleArrowUp:3141 ld a,(CastleWindowPointer)3142 sub a,13143 ret c3144 ld (CastleWindowPointer),a3146 ld a,33147 ld (SetCastlesInWindows?),a 3148 3149 ld a,2 3150 ld (ButtonCastleWindow1+ButtonLit?),a3151 ld (ButtonCastleWindow2+ButtonLit?),a3152 ld (ButtonCastleWindow3+ButtonLit?),a 3153 ret3155CheckHeroArrowDown:3156 3170 ld a,(herowindowpointer)3171 add a,13172 cp 63173 ret nc3174 ld (herowindowpointer),a3176 call SetHero1ForCurrentPlayerInIX3177 call SetHeroUsingHeroWindowPointer3178 call FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime3180 ld a,33181 ld (SetHeroesInWindows?),a 3182 ld (ChangeManaAndMovement?),a3184 ld a,2 3185 ld (ButtonHeroWindow1+ButtonLit?),a3186 ld (ButtonHeroWindow2+ButtonLit?),a3187 ld (ButtonHeroWindow3+ButtonLit?),a3189 ld a,(currentherowindowclicked)3190 dec a3191 ld (currentherowindowclicked),a3192 ret3194CheckCastleArrowDown:3195 ld a,(CastleWindowPointer)3196 add a,13197 cp 43198 ret nc3199 ld (CastleWindowPointer),a3201 ld a,33202 ld (SetCastlesInWindows?),a 3203 3204 ld a,2 3205 ld (ButtonCastleWindow1+ButtonLit?),a3206 ld (ButtonCastleWindow2+ButtonLit?),a3207 ld (ButtonCastleWindow3+ButtonLit?),a 3208 ret3210movehero:3211 ld a,(movehero?)3212 or a 3213 jp z,CheckHeroEntersCastle 3214 call .GoMove3215 call CheckHeroCollidesWithGuardTower 3216 jp CenterScreenForCurrentHero3218 .GoMove:3219 ld a,(movementpathpointer)3220 add a,23221 ld (movementpathpointer),a3222 3223 ld e,a3224 ld d,03225 ld hl,movementpath3226 add hl,de3227 3228 ld b,(hl) 3229 inc hl3230 ld c,(hl) 3231 ld a,b3232 or c3233 jp nz,.domovehero3234 3235 .endmovement:3236 xor a3237 ld (movehero?),a 3238 ret3239 3240 .domovehero:3241 ld ix,(plxcurrentheroAddress)32423243 3244 ld a,(ix+HeroMove)3245 sub a,1 3246 jr c,.endmovement3247 ld (ix+HeroMove),a32493258 ld a,33259 ld (ChangeManaAndMovement?),a3261 ld a,(ix+HeroY)3262 add a,b 3263 ld (ix+HeroY),a3264 ld a,(ix+Herox)3265 add a,c 3266 ld (ix+HeroX),a3268 push ix3269 push bc3270 call CheckHeroCollidesWithFriendlyHero 3271 pop bc3272 pop ix3273 jp nc,.animate 3275 3276 ld a,(ix+HeroY)3277 sub a,b 3278 ld (ix+HeroY),a3279 ld a,(ix+Herox)3280 sub a,c 3281 ld (ix+HeroX),a3283 ld a,33284 ld (HeroCollidesWithFriendlyHero?),a3285 ld a,13286 ld (ChangeManaAndMovement?),a 3287 jp .endmovement3288 3289 .animate:3290 push bc3291 ld bc,SFX_HeroWalking3292 call RePlayerSFX_PlayCh1 3293 pop bc3295 ld (ix+HeroStatus),001 3296 ld e,(ix+HeroSpecificInfo+0) 3297 ld d,(ix+HeroSpecificInfo+1)3298 push de3299 pop ix 3301 3302 ld a,c3303 or a 3304 jp m,.HeroMovesLeft3305 dec a3306 jr z,.HereMovesRight3307 ld a,b 3308 or a 3309 jp m,.HeroMovesUp3310 dec a3311 ret nz3312 3313 .HeroMovesDown:33143315 ld a,(ix+HeroinfoSYSX+0) 3316 and %0100 1000 3317 or a,128 + (064 / 2) 3318 xor 833193320 ld (ix+HeroinfoSYSX+0),a3321 ret3322 3323 .HeroMovesUp:33243325 ld a,(ix+HeroinfoSYSX+0) 3326 and %0100 1000 3327 or a,128 + (096 / 2) 3328 xor 833293330 ld (ix+HeroinfoSYSX+0),a 3331 ret3333 .HereMovesRight:33343335 ld a,(ix+HeroinfoSYSX+0) 3336 and %0100 1000 3337 or a,128 + (000 / 2) 3338 xor 833393340 ld (ix+HeroinfoSYSX+0),a 3341 ret3342 3343 .HeroMovesLeft:33443345 ld a,(ix+HeroinfoSYSX+0) 3346 and %0100 1000 3347 or a,128 + (032 / 2) 3348 xor 833493350 ld (ix+HeroinfoSYSX+0),a 3351 ret3353SetAllHeroPosesInVram: 3354 ld a,(slot.page1rom) 3355 out ($a8),a 3357 ld ix,pl1hero1y | call SetHeroPoseInVram.go3358 ld ix,pl1hero2y | call SetHeroPoseInVram.go3359 ld ix,pl1hero3y | call SetHeroPoseInVram.go3360 ld ix,pl1hero4y | call SetHeroPoseInVram.go3361 ld ix,pl1hero5y | call SetHeroPoseInVram.go3362 ld ix,pl1hero6y | call SetHeroPoseInVram.go3363 ld ix,pl1hero7y | call SetHeroPoseInVram.go3364 ld ix,pl1hero8y | call SetHeroPoseInVram.go3366 ld ix,pl2hero1y | call SetHeroPoseInVram.go3367 ld ix,pl2hero2y | call SetHeroPoseInVram.go3368 ld ix,pl2hero3y | call SetHeroPoseInVram.go3369 ld ix,pl2hero4y | call SetHeroPoseInVram.go3370 ld ix,pl2hero5y | call SetHeroPoseInVram.go3371 ld ix,pl2hero6y | call SetHeroPoseInVram.go3372 ld ix,pl2hero7y | call SetHeroPoseInVram.go3373 ld ix,pl2hero8y | call SetHeroPoseInVram.go3375 ld ix,pl3hero1y | call SetHeroPoseInVram.go3376 ld ix,pl3hero2y | call SetHeroPoseInVram.go3377 ld ix,pl3hero3y | call SetHeroPoseInVram.go3378 ld ix,pl3hero4y | call SetHeroPoseInVram.go3379 ld ix,pl3hero5y | call SetHeroPoseInVram.go3380 ld ix,pl3hero6y | call SetHeroPoseInVram.go3381 ld ix,pl3hero7y | call SetHeroPoseInVram.go3382 ld ix,pl3hero8y | call SetHeroPoseInVram.go3384 ld ix,pl4hero1y | call SetHeroPoseInVram.go3385 ld ix,pl4hero2y | call SetHeroPoseInVram.go3386 ld ix,pl4hero3y | call SetHeroPoseInVram.go3387 ld ix,pl4hero4y | call SetHeroPoseInVram.go 3388 ld ix,pl4hero5y | call SetHeroPoseInVram.go 3389 ld ix,pl4hero6y | call SetHeroPoseInVram.go 3390 ld ix,pl4hero7y | call SetHeroPoseInVram.go3391 ld ix,pl4hero8y | call SetHeroPoseInVram.go3392 ret3393 3394NXAndNY16x32HeroSprites: equ 032*256 + (016/2) 3395SetHeroPoseInVram:3396 ld a,(slot.page1rom) 3397 out ($a8),a 3399 ld ix,(plxcurrentheroAddress)3400 .go:34013404 push ix3405 ld c,(ix+HeroSpecificInfo+0) 3406 ld b,(ix+HeroSpecificInfo+1)3407 push bc3408 pop ix3409 ld c,(ix+HeroinfoSYSX+0) 3410 ld b,(ix+HeroinfoSYSX+1) 3411 pop ix3413 ld l,(ix+HeroDYDX+0)3414 ld h,(ix+HeroDYDX+1) 3415 ld de,NXAndNY16x32HeroSprites 34193420 ld (AddressToWriteFrom),bc3421 ld (NXAndNY),de3422 ld (AddressToWriteTo),hl3424 3425 ld e,(ix+HeroSpecificInfo+0) 3426 ld d,(ix+HeroSpecificInfo+1)3427 push de3428 pop ix3430 ld a,(ix+HeroInfoSpriteBlock) 3432 call block12 3435 ld c,$98 3436 ld de,128 3437 di3439 .loop:3440 call .WriteOneLine3441 ld a,(NXAndNY+1)3442 dec a3443 ld (NXAndNY+1),a3444 jp nz,.loop3445 ei3446 ret3448 .WriteOneLine:34493450 ld a,1 3451 ld hl,(AddressToWriteTo) 3452 add hl,de 3453 ld (AddressToWriteTo),hl3454 call SetVdp_WriteWithoutDisablingOrEnablingInt 3456 ld hl,(AddressToWriteFrom) 3457 add hl,de 3458 ld (AddressToWriteFrom),hl3459 ld a,(NXAndNY)3460 ld b,a3461 otir3462 ret3464RemainingMovementPointsHero: db 63465putmovementstars:3466 ld a,(putmovementstars?)3467 or a3468 ret z3470 ld a,(movementpath+0) 3471 inc a3472 ld (ystar),a3473 ld a,(movementpath+1) 3474 ld (xstar),a3476 ld hl,movementpath+23477 3478 ld ix,(plxcurrentheroAddress)3479 ld a,(ix+HeroMove)3480 inc a3481 ld (RemainingMovementPointsHero),a3482 xor a3483 ld (putstar+sPage),a3484 3485 .loop:3486 ld b,(hl) 3487 ld a,(ystar)3488 add a,b3489 ld (ystar),a3490 inc hl3491 ld c,(hl) 3492 ld a,(xstar)3493 add a,c3494 ld (xstar),a3496 ld a,c3497 or b3498 ret z3500 call FindArrowDirection3501 ld (putstar+sx),a3502 3504 ld a,(RemainingMovementPointsHero)3505 dec a3506 ld (RemainingMovementPointsHero),a3507 jr nz,.EndCheckOutOfMovementPoints3508 ld a,13509 ld (putstar+sPage),a3510 .EndCheckOutOfMovementPoints:3512 push hl3513 call doputstar3514 pop hl3515 inc hl3516 jp .loop3518doputstar:3519 ld a,(activepage) 3520 or a3521 ld hl,mappage13522 jp z,.mirrorpageset3523 ld hl,mappage03524.mirrorpageset:3526 ld a,(mappointerx)3527 ld b,a3528 ld a,(xstar) 3529 sub a,b3530 ret c 3531 cp TilesPerRow3532 ret nc 3534 ld d,03535 ld e,a 3536 3537 add a,a 3538 add a,a 3539 add a,a 3540 add a,a 3543 add a,buildupscreenXoffset+3 3544 3545 ld (putstar+dx),a3547 ld a,(mappointery)3548 ld b,a3549 ld a,(ystar) 3550 sub a,b3551 ret c 3552 cp TilesPerColumn3553 ret nc 3554 ld b,a 3555 add a,a 3556 add a,a 3557 add a,a 3558 add a,a 3561 add a,buildupscreenYoffset+4 3563 ld (putstar+dy),a35653568 add hl,de3569 3570 3571 3574 push hl3575 ld de,TilesPerRow3576 ld h,03577 ld l,b3578 call MultiplyHlWithDE 3579 pop de3580 add hl,de35833593 ld a,(hl)3594 ld (hl),255359535973598 cp amountoftransparantpieces3599 jp c,.behindtree3600 cp 2543601 jp nc,.behindheroorcastle3603 ld a,2223604 ld (putstar+sy),a3605 ld hl,putstar3606 jp docopy3607.behindtree:3608.behindheroorcastle:3609 ld a,2463610 ld (putstar+sy),a3611 ld hl,putstar3612 jp docopy36133615putstar:3616 db 0,0,212,03617 db 255,0,255,03618 db 10,0,10,03619 db 0,%0000 0000,$98 3621FindArrowDirection:3622 3623 bit 7,c3624 jp nz,.ArrowLeft3625 bit 0,c3626 jp nz,.ArrowRight3627 bit 7,b3628 jp nz,.ArrowUpConfirmed3630 .ArrowDownConfirmed:3631 call .CheckNextStep 3632 bit 7,c3633 ld a,13*10 + 86 3634 ret nz3635 bit 0,c3636 ld a,12*10 + 86 3637 ret nz3638 ld a,5*10 + 863639 ret3641 .ArrowUpConfirmed:3642 call .CheckNextStep 3643 bit 7,c3644 ld a,15*10 + 86 3645 ret nz3646 bit 0,c3647 ld a,10*10 + 86 3648 ret nz3649 ld a,1*10 + 863650 ret3652 .ArrowRight:3653 bit 7,b3654 jp nz,.ArrowRightUpConfirmed3655 bit 0,b3656 jp z,.ArrowRightConfirmed3658 .ArrowRightDownConfirmed:3659 call .CheckNextStep 3660 ld a,c3661 or b3662 ld a,4*10 + 863663 ret z3664 bit 0,b3665 ld a,03*10 + 86 3666 ret z3667 bit 0,c3668 ld a,05*10 + 86 3669 ret z3670 ld a,4*10 + 863671 ret3673 .ArrowRightUpConfirmed:3674 call .CheckNextStep 3675 ld a,c3676 or b3677 ld a,2*10 + 863678 ret z3679 bit 7,b3680 ld a,03*10 + 86 3681 ret z3682 bit 0,c3683 ld a,01*10 + 86 3684 ret z3685 ld a,2*10 + 863686 ret3687 3688 .ArrowRightConfirmed:3689 call .CheckNextStep 3690 bit 7,b3691 ld a,09*10 + 86 3692 ret nz3693 bit 0,b3694 ld a,11*10 + 86 3695 ret nz3696 ld a,3*10 + 863697 ret3699 .ArrowLeft:3700 bit 7,b3701 jp nz,.ArrowLeftUpConfirmed3702 bit 0,b3703 jp z,.ArrowLeftConfirmed3705 .ArrowLeftDownConfirmed:3706 call .CheckNextStep 3707 ld a,c3708 or b3709 ld a,6*10 + 863710 ret z3711 bit 0,b3712 ld a,07*10 + 86 3713 ret z3714 bit 7,c3715 ld a,05*10 + 86 3716 ret z3717 ld a,6*10 + 863718 ret3720 .ArrowLeftUpConfirmed:3721 call .CheckNextStep 3722 ld a,c3723 or b3724 ld a,8*10 + 863725 ret z3726 bit 7,b3727 ld a,07*10 + 86 3728 ret z3729 bit 7,c3730 ld a,01*10 + 86 3731 ret z3732 ld a,8*10 + 863733 ret3735 .ArrowLeftConfirmed:3736 call .CheckNextStep 3737 bit 7,b3738 ld a,16*10 + 86 3739 ret nz3740 bit 0,b3741 ld a,14*10 + 86 3742 ret nz3743 ld a,7*10 + 863744 ret3746 .CheckNextStep:3747 inc hl3748 ld b,(hl) 3749 inc hl3750 ld c,(hl) 3751 dec hl3752 dec hl3753 ret3755EnterCastle?: db 03756CheckEnterHeroCastle:3757 ld hl,(CurrentCursorSpriteCharacter)3758 ld de,CursorEnterCastle3759 call CompareHLwithDE3760 ret nz 3762 ld a,13763 ld (EnterCastle?),a3764 pop af 3765 ret3767SetHeroOverViewMenu?: db 03768CheckEnterHeroOverviewMenu: 3769 ld hl,(CurrentCursorSpriteCharacter)3770 ld de,CursorHand3771 call CompareHLwithDE3772 ret nz 3774 ld ix,(plxcurrentheroAddress)3775 ld a,(ix+HeroStatus)3776 cp 2553777 ret z 3779 ld a,13780 ld (SetHeroOverViewMenu?),a3781 pop af 3782 ret3784GoCheckEnterHeroOverviewMenu:3785 ld a,(SetHeroOverViewMenu?)3786 dec a3787 ret m3788 ld (SetHeroOverViewMenu?),a3789 jp nz,DisableScrollScreen 3790 jp EnterHeroOverviewMenu 379237973803checktriggermapscreen:3804 ld a,(GameStatus) 3805 or a3806 ret nz38083812 ld a,(spat+1) 3813 cp SX_Hud 3814 ret nc 38163821 ld a,(NewPrControlsOnInterrupt)3822 bit 4,a 3823 ret z3825 call checkcurrentplayerhuman 3826 ret z 3828 ld a,(movehero?)3829 or a3830 jr z,.EndCheckStopHeroMovement 3831 xor a3832 ld (movehero?),a 3833 ret3834 .EndCheckStopHeroMovement:3836 call CheckEnterHeroOverviewMenu3837 call CheckEnterHeroCastle3839 .initputstars: 3840 ld ix,(plxcurrentheroAddress)3841 ld a,(ix+HeroStatus) 3842 or a3843 ret m 3845 ld a,13846 ld (putmovementstars?),a3848 3849 ld a,(mouseclickx) 3850 ld d,a3851 ld a,(mouseclicky) 3852 ld e,a3854 3855 ld a,(spat+1) 3858 sub a,63860 and %1111 00003861 srl a 3862 srl a 3863 srl a 3864 srl a 3865 ld b,a 3866 ld a,(mappointerx)3867 add a,b3868 ld (mouseclickx),a 3869 ld c,a3871 ld a,(spat) 3872 sub a,18 3873 jp nc,.notcarry23874 xor a3875 .notcarry2:3876 and %1111 00003877 srl a 3878 srl a 3879 srl a 3880 srl a 3881 ld b,a 3882 ld a,(mappointery)3883 add a,b3884 ld (mouseclicky),a 3885 3886 3887 cp e3888 jp nz,CheckNormalRouteShortestPath3889 ld a,c3890 cp d3891 jp nz,CheckNormalRouteShortestPath3893 3894 xor a3895 ld (putmovementstars?),a3896 ld (movementpathpointer),a3897 ld (mouseclickx),a 3898 ld (mouseclicky),a 3899 ld a,13900 ld (movehero?),a3901 ret 3903CheckNormalRoute:3904 ld a,(ix+HeroY) 3905 ld (movementpath+0),a 3906 ld (heroymirror),a3907 ld a,(ix+HeroX) 3908 ld (movementpath+1),a 3909 ld (heroxmirror),a3911 ld hl,movementpath+2 3913 .loop:39143915 call GetTileNrAtHeroMirrorYX3916 cp 163917 jr c,.noobstacle3918 cp 243919 jr c,.obstacle3920 cp UnwalkableTerrainPieces 3921 jr c,.noobstacle3922.obstacle:3923 dec hl3924 dec hl3925 ld c,03926 ld d,03927 jr .EndSetVerticalMovement3929.noobstacle:39303931 3932 ld a,(mouseclickx)3933 ld e,a3934 ld a,(heroxmirror)3935 cp e3936 ld c,0 3937 jp z,.EndSetHorizontalMovement3938 ld c,1 3939 jp c,.EndSetHorizontalMovement3940 ld c,-1 3941 .EndSetHorizontalMovement:3943 ld a,(mouseclicky)3944 ld e,a3945 ld a,(heroymirror)3946 cp e3947 ld d,0 3948 jp z,.EndSetVerticalMovement3949 ld d,1 3950 jp c,.EndSetVerticalMovement3951 ld d,-1 3952 .EndSetVerticalMovement:3954 ld (hl),d 3955 inc hl3956 ld (hl),c 3957 inc hl3959 ld a,c3960 or d3961 ret z39633967 ld a,(heroxmirror)3968 add a,c3969 ld (heroxmirror),a3970 ld a,(heroymirror)3971 add a,d3972 ld (heroymirror),a3973 jp .loop3975InvertReverseRoute:3976 ld a,(ix+HeroY) 3977 ld (movementpath+0),a 3978 ld a,(ix+HeroX) 3979 ld (movementpath+1),a 3981 ld de,movementpath+2 3983 dec hl 3984 dec hl 3985 dec hl 3986 dec hl 3988 call .loop3989 dec de3990 dec de3991 xor a3992 ld (de),a 3993 inc de 3994 ld (de),a 3995 ret3997 .loop:3998 ld a,(hl) 3999 cp 1284000 ret z4001 neg4002 ld (de),a 4003 4004 inc hl 4005 inc de 4007 ld a,(hl) 4008 neg4009 ld (de),a 4011 dec hl 4012 dec hl 4013 dec hl 4014 inc de 4015 jr .loop4017CheckReverseRoute:4018 ld a,(mouseclicky)4019 ld (movementpathReverse+0),a 4020 ld (heroymirror),a4021 ld a,(mouseclickx)4022 ld (movementpathReverse+1),a 4023 ld (heroxmirror),a4024 ld hl,movementpathReverse+2 4026 .loop:40274028 call GetTileNrAtHeroMirrorYX4029 cp 164030 jr c,.noobstacle4031 cp 244032 jp c,CheckNormalRoute4033 cp UnwalkableTerrainPieces 4034 jp nc,CheckNormalRoute4035 .noobstacle:40364037 4038 ld a,(ix+HeroX) 4039 ld e,a4040 ld a,(heroxmirror)4041 cp e4042 ld c,0 4043 jp z,.EndSetHorizontalMovement4044 ld c,1 4045 jp c,.EndSetHorizontalMovement4046 ld c,-1 4047 .EndSetHorizontalMovement:4049 ld a,(ix+HeroY) 4050 ld e,a4051 ld a,(heroymirror)4052 cp e4053 ld d,0 4054 jp z,.EndSetVerticalMovement4055 ld d,1 4056 jp c,.EndSetVerticalMovement4057 ld d,-1 4058 .EndSetVerticalMovement:4060 ld (hl),d 4061 inc hl4062 ld (hl),c 4063 inc hl4065 ld a,c4066 or d4067 jp z,InvertReverseRoute4069 ld a,(heroxmirror)4070 add a,c4071 ld (heroxmirror),a4072 ld a,(heroymirror)4073 add a,d4074 ld (heroymirror),a4075 jp .loop4077GetTileNrAtHeroMirrorYX:4078 push hl4079 4081 ld a,(heroymirror)4082 inc a4083 ld l,a4084 ld h,04085 ld de,(maplenght)4086 call MultiplyHlWithDE 4087 ld de,mapdata4088 add hl,de4089 4091 ld a,(heroxmirror)4092 ld e,a4093 ld d,04094 add hl,de4095 4097 ld a,(hl) 4098 pop hl4099 ret41014108puttopcastles:4109 ld hl,Castle14110 call .doputcastletop4111 ld hl,Castle24112 call .doputcastletop4113 ld hl,Castle34114 call .doputcastletop4115 ld hl,Castle441164118.doputcastletop:4119 xor a4120 ld (putcastle+sx),a4121 ld a,(hl) 4122 or a4123 ret z 4124 sub a,34125 ld (TempVariableCastleY),a4126 inc hl4127 ld a,(hl) 4128 inc a4129 ld (TempVariableCastleX),a4130 call putbottomcastles.puttwopieces4132 ld a,(putcastle+sx)4133 add a,164134 ld (putcastle+sx),a4135 ld a,(TempVariableCastleY)4136 inc a4137 ld (TempVariableCastleY),a4138 ld a,(TempVariableCastleX)4139 sub a,24140 ld (TempVariableCastleX),a4141 call putbottomcastles.putthreepieces4142ret4143 ld a,(putcastle+sx)4144 add a,164145 ld (putcastle+sx),a4146 ld a,(TempVariableCastleY)4147 inc a4148 ld (TempVariableCastleY),a4149 ld a,(TempVariableCastleX)4150 sub a,24151 ld (TempVariableCastleX),a4152 call putbottomcastles.PutOnePiece4153 ld a,(putcastle+sx)4154 add a,164155 ld (putcastle+sx),a4156 ld a,(TempVariableCastleX)4157 add a,24158 ld (TempVariableCastleX),a4159 call putbottomcastles.PutOnePiece4160 ret4162putbottomcastles:4163 ld hl,Castle14164 call .doputcastle4165 ld hl,Castle24166 call .doputcastle4167 ld hl,Castle34168 call .doputcastle4169 ld hl,Castle441704172.doputcastle:4173 ld a,(hl) 4174 or a4175 ret z 4176 dec a4177 ld (TempVariableCastleY),a4178 inc hl4179 ld a,(hl) 4180 ld (TempVariableCastleX),a4182 ld a,0804183 ld (putcastle+sx),a4184 call .PutOnePiece4185 4186 ld a,(TempVariableCastleX)4187 add a,24188 ld (TempVariableCastleX),a4189 ld a,0964190 ld (putcastle+sx),a4191 call .PutOnePiece4192 4193 ld a,(TempVariableCastleX)4194 sub a,24195 ld (TempVariableCastleX),a4196 4197 ld a,1124198 ld (putcastle+sx),a4199 ld a,(TempVariableCastleY)4200 inc a4201 ld (TempVariableCastleY),a4203.putthreepieces:4204 call .PutOnePiece4205 ld a,(putcastle+sx)4206 add a,164207 ld (putcastle+sx),a4208 ld a,(TempVariableCastleX)4209 inc a4210 ld (TempVariableCastleX),a4211.puttwopieces:4212 call .PutOnePiece4213 ld a,(putcastle+sx)4214 add a,164215 ld (putcastle+sx),a4216 ld a,(TempVariableCastleX)4217 inc a4218 ld (TempVariableCastleX),a4219.PutOnePiece:4220 ld a,(activepage) 4221 or a4222 ld hl,mappage14223 jp z,.mirrorpageset4224 ld hl,mappage04225.mirrorpageset:4227 ld a,(mappointerx)4228 ld b,a4229 ld a,(TempVariableCastleX)4230 sub a,b4231 ret c4232 cp TilesPerRow4233 ret nc4235 ld d,04236 ld e,a 4237 4238 add a,a 4239 add a,a 4240 add a,a 4241 add a,a 4243 add a,buildupscreenXoffset 4245 ld (putcastle+dx),a4247 ld a,(mappointery)4248 ld b,a4249 ld a,(TempVariableCastleY) 4250 sub a,b4251 ret c 4252 cp TilesPerColumn4253 ret nc 4255 ld b,a 4256 add a,a 4257 add a,a 4258 add a,a 4259 add a,a 4261 add a,buildupscreenYoffset 4263 ld (putcastle+dy),a42654268 add hl,de4269 4270 4271 4273 push hl4274 ld de,TilesPerRow4275 ld h,04276 ld l,b4277 call MultiplyHlWithDE 4278 pop de4279 add hl,de428242874293 ld (hl),25542944296 ld hl,putcastle4297 jp docopy4299putbottomheroes:4300 ld hl,doputheros.WaterTileFoundBottomHero4301 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4303 ld a,(activepage) 4304 or a4305 ld hl,mappage14306 jr z,.mirrorpageset4307 ld hl,mappage04308.mirrorpageset:4309 ld (doputheros.SelfModifyingCodeSetPointerInMapToHero),hl4311 ld a,164312 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4313 ld a,14314 ld (doputheros.SelfModifyingCodeAddYToHero),a4315 jp doputheros4317puttopheroes:4318 ld hl,doputheros.WaterTileFoundTopHero4319 ld (doputheros.SelfmodifyingCodeWaterTileJumpAddress),hl4320 4321 xor a4322 ld (doputheros.SelfModifyingCodeAddYToSYHero),a4323 ld (doputheros.SelfModifyingCodeAddYToHero),a4325doputheros: 4326 ld hl,256*00 + 000 | ld ix,pl1hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4327 ld hl,256*00 + 016 | ld ix,pl1hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4328 ld hl,256*00 + 032 | ld ix,pl1hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4329 ld hl,256*00 + 048 | ld ix,pl1hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4330 ld hl,256*00 + 064 | ld ix,pl1hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4331 ld hl,256*00 + 080 | ld ix,pl1hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4332 ld hl,256*00 + 096 | ld ix,pl1hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4333 ld hl,256*00 + 112 | ld ix,pl1hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4335 ld hl,256*00 + 128 | ld ix,pl2hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4336 ld hl,256*00 + 144 | ld ix,pl2hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4337 ld hl,256*00 + 160 | ld ix,pl2hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4338 ld hl,256*00 + 176 | ld ix,pl2hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4339 ld hl,256*00 + 192 | ld ix,pl2hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4340 ld hl,256*00 + 208 | ld ix,pl2hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4341 ld hl,256*00 + 224 | ld ix,pl2hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4342 ld hl,256*00 + 240 | ld ix,pl2hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4344 ld hl,256*32 + 000 | ld ix,pl3hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4345 ld hl,256*32 + 016 | ld ix,pl3hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4346 ld hl,256*32 + 032 | ld ix,pl3hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4347 ld hl,256*32 + 048 | ld ix,pl3hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4348 ld hl,256*32 + 064 | ld ix,pl3hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4349 ld hl,256*32 + 080 | ld ix,pl3hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4350 ld hl,256*32 + 096 | ld ix,pl3hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4351 ld hl,256*32 + 112 | ld ix,pl3hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4353 ld hl,256*32 + 128 | ld ix,pl4hero1y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4354 ld hl,256*32 + 144 | ld ix,pl4hero2y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4355 ld hl,256*32 + 160 | ld ix,pl4hero3y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4356 ld hl,256*32 + 176 | ld ix,pl4hero4y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4357 ld hl,256*32 + 192 | ld ix,pl4hero5y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4358 ld hl,256*32 + 208 | ld ix,pl4hero6y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4359 ld hl,256*32 + 224 | ld ix,pl4hero7y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4360 ld hl,256*32 + 240 | ld ix,pl4hero8y | ld a,(ix+HeroStatus) | or a | call p,.doputhero4361 ret43624371.doputhero:4372 ld a,(mappointery) 4373 ld b,a4374 ld a,(ix+HeroY) 4375 .SelfModifyingCodeAddYToHero: equ $+14376 add a,0004377 sub a,b4378 ret c 4379 cp TilesPerColumn4380 ret nc 4381 ld c,a 4383 ld a,(mappointerx) 4384 ld b,a4385 ld a,(ix+HeroX) 4386 sub a,b4387 ret c 4388 cp TilesPerRow4389 ret nc 4391 ld d,04392 ld e,a 4393 4394 add a,a 4395 add a,a 4396 add a,a 4397 add a,a 4398 add a,buildupscreenXoffset 4399 ld (putherotopbottom+dx),a 4401 ld a,c 4402 add a,a 4403 add a,a 4404 add a,a 4405 add a,a 4406 add a,buildupscreenYoffset 4407 ld (putherotopbottom+dy),a 4409 ld a,l 4410 ld (putherotopbottom+sx),a 4412 ld a,h 4413 .SelfModifyingCodeAddYToSYHero: equ $+14414 add a,0004415 ld (putherotopbottom+sy),a 4416 4417 .SelfModifyingCodeSetPointerInMapToHero: equ $+14418 ld hl,00004419 add hl,de 4420 4422 push hl4423 ld de,TilesPerRow4424 ld h,04425 ld l,c4426 call MultiplyHlWithDE 4427 pop de4428 add hl,de4429 4430 4432 44334443 ld a,(hl) 4444 cp 254 4445 call z,.behindheroandtree 4446 ld (hl),255 4447 cp amountoftransparantpieces 4448 jp nc,.notbehindtree 4449 ld (hl),254 4450 cp non_see_throughpieces 4451 ret c 4453.FirstWaterpiece: equ 584454 cp .FirstWaterpiece 4455 .SelfmodifyingCodeWaterTileJumpAddress: equ $+14456 jp nc,$ffff4458 4459 ld d,a 4460 ld hl,putherotopbottom4461 call docopy 44634468 4469 ld a,d 4470 add a,a 4471 ld e,a4472 ld d,04473 ld hl,mirrortransparentpieces-324474 add hl,de 4475 .WaterTileEntry:4476 ld a,(hl)4477 ld (putbackgroundoverhero+sy),a4478 inc hl 4479 ld a,(hl)4480 ld (putbackgroundoverhero+sx),a4481 4482 ld a,(putherotopbottom+dy)4483 ld (putbackgroundoverhero+dy),a4484 ld a,(putherotopbottom+dx)4485 ld (putbackgroundoverhero+dx),a4486 ld hl,putbackgroundoverhero4487 jp docopy 4489 .WaterTileFoundTopHero:4490 4491 ld hl,putherotopbottom4492 jp docopy 4494 .WaterTileFoundBottomHero:4495 ld hl,putherotopbottom4496 call docopy 4497 ld hl,.WaterTile4498 jr .WaterTileEntry4500 .WaterTile: db 080,2404502 .notbehindtree:4503 ld hl,putherotopbottom4504 jp docopy 4506 .behindheroandtree: 4508 push hl4509 ld a,(putherotopbottom+dx)4511 sub a,buildupscreenXoffset 4513 srl a 4514 srl a 4515 srl a 4516 srl a 4517 ld b,a 4523 ld a,(putherotopbottom+dy)4525 sub a,buildupscreenYoffset 4527 srl a 4528 srl a 4529 srl a 4530 srl a 4531 ld c,a 45334535 ld hl,mapdata4536 ld de,(mappointerx)4537 ld a,e4538 add a,b4539 ld e,a4540 add hl,de4541 4542 4543 4544 ld a,(mappointery)4545 add a,c45474548 push hl4549 ld de,(maplenght)4550 ld h,04551 ld l,a4552 call MultiplyHlWithDE 4553 pop de4554 add hl,de455545594568 ld a,(hl) 4570 pop hl4571 ret4573SetHero1ForCurrentPlayerInIX: 4574 ld a,(whichplayernowplaying?)4575 dec a4576 ld ix,pl1hero1y4577 ret z4578 dec a4579 ld ix,pl2hero1y4580 ret z4581 dec a4582 ld ix,pl3hero1y4583 ret z4584 ld ix,pl4hero1y4585 ret4587SetHeroUsingHeroWindowPointer: 4588 ld de,lenghtherotable4590 ld a,(herowindowpointer)4591 or a4592 ret z4593 ld b,a4594 .loop:4595 add ix,de4596 djnz .loop 4597 ret4599FindHeroThatIsNotInCastleAndDecreaseHeroWindowPointerEachTime:4600 ld a,(ix+HeroStatus) 4601 cp 2544602 ret nz4603 ld de,-lenghtherotable4604 add ix,de4605 ld a,(herowindowpointer)4606 sub a,14607 jp c,CheckHeroArrowDown4608 ld (herowindowpointer),a4609 jp FindHeroThatIsNotInCastle 4611FindHeroThatIsNotInCastleAndIncreaseHeroWindowPointerEachTime:4612 ld a,(ix+HeroStatus) 4613 cp 2544614 ret nz4615 ld de,lenghtherotable4616 add ix,de4617 ld a,(herowindowpointer)4618 add a,14619 cp 84620 ret nc4621 ld (herowindowpointer),a4622 jp FindHeroThatIsNotInCastle4623 4624FindHeroThatIsNotInCastle:4625 ld a,(ix+HeroStatus) 4626 cp 2544627 ret nz4628 add ix,de4629 jp FindHeroThatIsNotInCastle 4631SetHeroForWindow1DeterminedByHeroWindowPointerInIX:4632 call SetHeroUsingHeroWindowPointer 4633 jp FindHeroThatIsNotInCastle4634 4635SetHeroForWindow2DeterminedByHeroWindowPointerInIX:4636 call SetHeroUsingHeroWindowPointer 4637 call FindHeroThatIsNotInCastle4638 add ix,de4639 jp FindHeroThatIsNotInCastle4641SetHeroForWindow3DeterminedByHeroWindowPointerInIX:4642 call SetHeroUsingHeroWindowPointer 4643 call FindHeroThatIsNotInCastle4644 add ix,de4645 call FindHeroThatIsNotInCastle4646 add ix,de4647 jp FindHeroThatIsNotInCastle4649ChangeManaAndMovement?: db 34650herowindowpointer: db 0 4651SetHeroesInWindows?: db 3 4652CastleWindowPointer: db 0 4653SetCastlesInWindows?: db 34655checkcurrentplayerhuman: 4657 ld a,(whichplayernowplaying?)4658 ld hl,player1human?4659 ld b,44660.loop:4661 dec a4662 jp z,.playerfound4663 inc hl4664 djnz .loop4665.playerfound:4666 or (hl) 4672 ret46734675MOUSIDBuffer: ds 1 4676MSEPRTBuffer: ds 1 4678MOUSID: ds 1 4679MSEPRT: ds 1 46814682MovePointer: 4683 ld a,(GameStatus) 4684 cp 44685 jr z,.EndCheckFreezePointer4686 call checkcurrentplayerhuman 4687 ret z4688 .EndCheckFreezePointer:4690 ld a,(MOUSID)4691 or a4692 jp z,ReadOutKeyboardAndMovePointer4693 469446994705RDPADL:4706 LD DE,(MSEPRT)4707 LD A,15 4708 CALL RD_PSG4709 AND %1000 1111 4710 OR E 4711 LD E,A47134714 ld a,(GameStatus) 4715 cp 24716 ld h,240 4717 ld l,000 4718 jr nc,.XBorderSet4719 ld h,xcoorspriteright 4720 ld l,xcoordinateStartPlayfield 4721 .XBorderSet:47234724 LD B,40 4725 LD C,20 4726 CALL RPDL.24727 CALL RPDL.04728 LD c,A 47304731 jp m,.MoveLeft47324733 .MoveRight:4734 ld a,(spat+1)4735 add a,c4736 jr c,.SetRightBorder4737 cp h 4738 jr c,.SetxRight4739 .SetRightBorder:4740 ld a,h 4741 .SetxRight:4742 ld (spat+1),a4743 ld (spat+5),a4744 ld (spat+9),a4745 jp .EndMoveLeft 474647484749 .MoveLeft:4750 ld a,(spat+1)4751 add a,c4752 jr nc,.SetLeftBorder4753 cp l4754 jr nc,.SetXLeft 4755 .SetLeftBorder:4756 ld a,l 4757 .SetXLeft:4758 ld (spat+1),a4759 ld (spat+5),a4760 ld (spat+9),a4761 .EndMoveLeft:476247644765 ld a,(GameStatus) 4766 cp 34767 ld h,016 4768 ld l,218 4769 jr z,.YBorderSet4771 cp 24772 ld h,000 4773 ld l,1964774 jr nc,.YBorderSet4776 ld h,ycoordinateStartPlayfield4777 ld l,ycoorspritebottom4778 .YBorderSet:47804781 LD B,40 4782 LD C,20 4783 CALL RPDL.14784 CALL RPDL.04785 LD c,A 47874788 jp m,.MoveUp47894790 .MoveDown:4791 ld a,(spat+0)4792 add a,c4793 jr c,.SetDownBorder4794 cp l4795 jr c,.SetYDown4796 .SetDownBorder:4797 ld a,l 4798 .SetYDown:4799 cp 2164800 jr z,.Y216Found4801 ld (spat+0),a4802 ld (spat+4),a4803 ld (spat+8),a4804 jp .EndMoveUp 480548074808 .MoveUp:4809 ld a,(spat+0)4810 add a,c4811 jr nc,.SetUpBorder4812 cp h4813 jr nc,.SetYUp 4814 .SetUpBorder:4815 ld a,h 4816 .SetYUp:4818 cp 2164819 jp nz,.EndCheck2164820 .Y216Found:4821 ld a,2154822 .EndCheck216:4824 ld (spat+0),a4825 ld (spat+4),a4826 ld (spat+8),a4827 .EndMoveUp:48284830 EI 4831 RET 4832 4833RPDL.0: RLCA 4834 RLCA 4835 RLCA 4836 RLCA 4837 LD D,A4838 CALL RPDL.14839 OR D4840 NEG 4841 RET 4842 4843RPDL.1: LD B,74844 LD C,64845RPDL.2: LD A,154846 CALL WR_PSG4847 LD A,(MSEPRT)4848 AND $304849 XOR E4850 LD E,A4851DLYCAL: CALL DLY_M24852 LD A,144853 CALL RD_PSG4854 AND $0F4855 RET 4856 48574859DLY_M2: DJNZ DLY_M24860 RET 48614869 4870RD_PSG: DI 4871 OUT ($A0),A4872 NOP 4873 NOP 4874 IN A,($A2)4875 EI 4876 RET 4877WR_PSG: DI 4878 OUT ($A0),A4879 LD A,E4880 OUT ($A1),A4881 EI 4882 RET 4900movecursory: 4901 ex af,af'4902 ld a,(GameStatus) 4904 ld e,016 4905 cp 34906 ld d,212-16 + 6 +16 4907 jr z,.XBorderSet4909 ld e,0004910 cp 24911 ld d,212-164912 jr nc,.XBorderSet4913 ld d,ycoorspritebottom4914 ld e,ycoordinateStartPlayfield4915 .XBorderSet:4916 ex af,af'4919 ld hl,spat+0 4920 or a 4921 jp m,.up4922 .down:4923 add a,(hl)4924 jp c,.outofscreenbottom4925 cp d4926 jp c,.sety4927 .outofscreenbottom:4928 ld a,d4929 jp .sety4930 .up:4931 add a,(hl)4933 ret nc4935 cp e 4937 jp nc,.sety4938 ld a,e4939 .sety:4940 ld (hl),a4941 ret4943movecursorx:4944 ex af,af'4945 ld a,(GameStatus) 4946 cp 24947 ld d,256-164948 ld e,0004949 jr nc,.XBorderSet4950 ld d,xcoorspriteright4951 ld e,xcoordinateStartPlayfield4952 .XBorderSet:4953 ex af,af'4954 4955 ld hl,spat+1 4956 or a 4957 jp m,.left4958 .right:4959 add a,(hl)4960 jp c,.outofscreenright4961 cp d 4962 jp c,.setx4963 .outofscreenright:4964 ld a,d 4965 jp .setx4966 .left:4967 add a,(hl)4968 ret nc4969 4970 cp e 4972 jp nc,.setx4973 ld a,e 4974 .setx:4975 ld (hl),a4976 ret4978PopulateKeyMatrix:4979 in a,($aa)4980 and %111100004981 ld d,a4982 ld c,$a94983 ld b,114984 ld hl,keys + 114985.Loop: ld a,d4986 or b4987 out ($aa),a4988 ind4989 jp nz,.Loop4990 ld a,d4991 out ($aa),a4992 ind4993 ret4994 49954997keys: equ $fbe54998ReadOutKeyboardAndMovePointer:49995004 ld a,(ControlsOnInterrupt)5005 ld bc,0 50075008.right:5009 bit 3,a 5010 jp z,.down5011 inc b5012.down:5013 bit 1,a 5014 jp z,.up5015 inc c5016.up:5017 bit 0,a 5018 jp z,.left5019 dec c5020.left:5021 bit 2,a 5022 jp z,.end5023 dec b5024.end:5026 ld a,(keys+6)5027 bit 0,a 5028 jp nz,.endcheckshift5029 ld a,b5030 add a,a5031 ld b,a5032 ld a,c5033 add a,a5034 ld c,a5035.endcheckshift:5037 ld a,b5038 add a,a5039 call movecursorx 5040 ld a,c5041 add a,a5042 call movecursory 5044 ld a,(spat+0)5045 cp 2165046 jp nz,.EndCheck216 5047 ld a,2155048 ld (spat+0),a5049 .EndCheck216:5050 ld (spat+4),a5051 ld (spat+8),a5052 ld a,(spat+1)5053 ld (spat+5),a5054 ld (spat+9),a5055 ret5057ycoordinateStartPlayfield: equ 045058xcoordinateStartPlayfield: equ 065059ycoorspritebottom: equ 1805060xcoorspriteright: equ 2395062GameStatus: db 0 5063SX_Hud: equ 196 5064spritecharacter: db 255 5065setspritecharacter: 5066 ld a,(GameStatus) 5067 or a5068 jr z,.Ingame5069 dec a5070 jr z,.HeroOverview5071 dec a5072 jr z,.CastleOverview5073 dec a5074 jr z,.Battle5076 .Battle:5077 ld a,(slot.page12rom) 5078 out ($a8),a5079 ld a,BattleCodeBlock5080 ld ($6000),a 5081 ld a,BattleCodePage2Block5082 ld ($7000),a 5084 ld a,(ShowExplosionSprite?) 5085 or a5086 call nz,HandleExplosionSprite5087 ld a,(ShootProjectile?)5088 or a5089 call nz,HandleProjectileSprite5091 5092 ld a,(LeftOrRightPlayerLostEntireArmy?)5093 or a5094 jr z,.SelfModifyingCodeSpriteCharacterBattle-15095 ld hl,CursorHand5096 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl5097 ld hl,SpriteColCursorSprites5098 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5099 5100 .SelfModifyingCodeSpriteCharacterBattle: Equ $+15101 ld hl,CursorHand5102 jp .setcharacter5104 .CastleOverview:5105 ld hl,SpriteColPoiterInCastleSprite5106 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5107 ld hl,CursorPointerIncastle5108 jp .setcharacter5110 .HeroOverview:5111 ld hl,CursorHand5112 jp .setcharacter5114 .Ingame:5115 ld hl,SpriteColCursorSprites5116 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl5117 ld a,(LockMiniMapOn?)5118 or a5119 ld hl,CursorHand5120 jp nz,.setcharacter51215126 ld a,(ControlsOnInterrupt)5127 bit 2,a 5128 jr z,.EndCheckShowScrollArrowLeft5129 ld a,(spat+1) 5130 cp xcoordinateStartPlayfield5131 jp z,.ShowScrollArrowLeft 5132 .EndCheckShowScrollArrowLeft:51345139 ld a,(ControlsOnInterrupt)5140 bit 3,a 5141 jr z,.EndCheckShowScrollArrowRight5142 ld a,(spat+1) 5143 cp xcoorspriteright5144 jp z,.ShowScrollArrowRight 5145 .EndCheckShowScrollArrowRight:51475152 ld a,(ControlsOnInterrupt)5153 bit 0,a 5154 jr z,.EndCheckShowScrollArrowTop5155 ld a,(spat) 5156 cp ycoordinateStartPlayfield51585159 jp z,.ShowScrollArrowTop 5160 .EndCheckShowScrollArrowTop:51625167 ld a,(ControlsOnInterrupt)5168 bit 1,a 5169 jr z,.EndCheckShowScrollArrowBottom5170 ld a,(spat) 5171 cp ycoorspritebottom 5172 jp z,.ShowScrollArrowBottom 5173 .EndCheckShowScrollArrowBottom:51755179 ld a,(spat+1) 5180 cp SX_Hud 5181 jp nc,.MousepointInHud 518451875188 ld a,(spat+1) 5189 add a,addxtomouseDiagonalPointer 5190 and %1111 00005191 srl a 5192 srl a 5193 srl a 5194 srl a 5195 ld l,a5196 ld a,(mappointerx)5197 add a,l5198 ld l,a5199 ld (mouseposx),a5201 ld a,(spat) 5203 add a,addytomouseDiagonalPointer 5205 jp c,.notcarry25206 xor a5207.notcarry2:5208 and %1111 00005209 srl a 5210 srl a 5211 srl a 5212 srl a 5213 ld h,a5214 ld a,(mappointery)5215 add a,h5216 ld h,a5217 ld (mouseposy),a52185220 ld de,lenghtherotable5221 ld a,(whichplayernowplaying?) | cp 1 | ld ix,pl1hero1y | call .checkpointeronhero 5222 ld a,(whichplayernowplaying?) | cp 2 | ld ix,pl2hero1y | call .checkpointeronhero 5223 ld a,(whichplayernowplaying?) | cp 3 | ld ix,pl3hero1y | call .checkpointeronhero 5224 ld a,(whichplayernowplaying?) | cp 4 | ld ix,pl4hero1y | call .checkpointeronhero 5225 .EndCheckPointerOnHero:5227 call .CheckPointerOnCastle 5228 call .checkpointeroncreature 5230 ld ix,(plxcurrentheroAddress)5231 ld a,(ix+HeroStatus)5232 cp 2555233 ld hl,CursorHand5234 jp z,.setcharacter 5236 call .checkpointeritem 5237 jp .shoe 5240 .CheckPointerOnCastle:5241 call .SetMappositionMousePointsTo 5243 ld a,(hl) 5244 cp 2545245 jr z,.PointerOnCentreOfCastle5247 sbc hl,de5248 ld a,(hl) 5249 cp 2545250 ret nz5252 .PointerOnEntranceOfCastle: 5253 call .SetCastleEntranceMousePointsToInIX5254 call .CheckFriendlyCastle5255 jr z,.FriendlyCastleShowCursorWalkingBoots5257 .EnemyCastle:5258 pop af 5260 ld ix,(plxcurrentheroAddress)5261 ld a,(ix+HeroStatus)5262 cp 2555263 ld hl,CursorHand5264 jp z,.setcharacter 5266 ld hl,CursorSwords5267 jp .setcharacter5269 .FriendlyCastleShowCursorWalkingBoots:5270 pop af 5272 ld ix,(plxcurrentheroAddress)5273 ld a,(ix+HeroStatus)5274 cp 2555275 ld hl,CursorHand5276 jp z,.setcharacter 5278 ld hl,CursorWalkingBoots5279 jp .setcharacter5280 5281 .PointerOnCentreOfCastle: 5282 call .SetCastleCentreMousePointsToInIX5283 call .CheckFriendlyCastle5284 ret nz 5286 .FriendlyCastle:5287 ld (WhichCastleIsPointerPointingAt?),ix5288 pop af 5289 ld hl,CursorEnterCastle5290 jp .setcharacter5292 .CheckFriendlyCastle:5293 ld a,(whichplayernowplaying?)5294 cp (ix+CastlePlayer)5295 ret5297 .SetCastleCentreMousePointsToInIX:5298 ld ix,Castle1 | call .check | ret z5299 ld ix,Castle2 | call .check | ret z5300 ld ix,Castle3 | call .check | ret z5301 ld ix,Castle45302 ret5303 .check:5304 ld a,(mouseposx) 5305 dec a5306 cp (ix+CastleX)5307 ret nz5308 ld a,(mouseposy) 5309 inc a5310 cp (ix+CastleY)5311 ret5313 .SetCastleEntranceMousePointsToInIX:5314 ld ix,Castle1 | call .check2 | ret z5315 ld ix,Castle2 | call .check2 | ret z5316 ld ix,Castle3 | call .check2 | ret z5317 ld ix,Castle45318 ret5319 .check2:5320 ld a,(mouseposx) 5321 dec a5322 dec a5323 cp (ix+CastleX)5324 ret nz5325 ld a,(mouseposy) 5326 inc a5327 dec a5328 cp (ix+CastleY)5329 ret5331 .checkpointeritem:5332 call .SetMappositionMousePointsTo 5333 ld a,(hl)5334 cp 1285335 ret nc 5337 cp 64 5338 ret z53405341 or a5342 ret z5344 pop af 53465351 ld a,(NewPrControlsOnInterrupt)5352 bit 5,a 5353 jr nz,.TrigBPressed5355 ld hl,CursorWalkingBoots5356 jp .setcharacter5358 .checkpointeroncreature:5359 call .SetMappositionMousePointsTo 5361 ld a,(hl)5362 cp 1925363 ret nc 5366 cp 1285367 ret c 5369 pop af 53715376 ld a,(NewPrControlsOnInterrupt)5377 bit 5,a 5378 jr nz,.TrigBPressed5380 ld ix,(plxcurrentheroAddress)5381 ld a,(ix+HeroStatus)5382 cp 2555383 ld hl,CursorHand5384 jp z,.setcharacter 5386 ld hl,CursorSwords5387 jp .setcharacter5389 .TrigBPressed:5390 ld a,35391 ld (DisplayEnemyStatsRightClick?),a5393 ld a,(hl) 5394 ld (MonsterHerocollidedWithOnMap),a5395 ld a,l5396 ld (XAddressOfMonsterHerocollidedWithOnMap),a5397 inc hl 5398 ld a,(hl) 5399 ld (MonsterHerocollidedWithOnMapAmount),a5400 ret5402 .SetMappositionMousePointsTo: 540554105414 ld a,(mouseposy) 54165418 ld de,(maplenght)5419 ld h,05420 ld l,a5421 call MultiplyHlWithDE 5422 ld bc,mapdata 5424 add hl,bc54255427 .SetX:5428 ld a,(mouseposx)5429 ld c,a5430 ld b,05431 add hl,bc5432 ret5434.checkpointeronhero: 5435 jp z,.checkpointerfriend5436 jp .checkpointerenemy5438 5439 .checkpointerenemy:5440 ld b,amountofheroesperplayer5441 .checkpointerenemyloop:5442 5443 ld a,h 5445 dec a5447 cp (ix+HeroY) 5448 jp nz,.endcheck15449 ld a,l 5450 cp (ix+HeroX) 5451 jp nz,.endcheck15452 ld a,(ix+HeroStatus) 5453 or a5454 jp p,.pointeronenemyhero5455 5456 .endcheck1:5457 add ix,de 5458 djnz .checkpointerenemyloop5459 ret5461 .pointeronenemyhero:5462 pop af 54645469 ld a,(NewPrControlsOnInterrupt)5470 bit 5,a 5471 jr nz,.TrigBPressedEnemyHero5473 ld ix,(plxcurrentheroAddress)5474 ld a,(ix+HeroStatus)5475 cp 2555476 ld hl,CursorHand5477 jp z,.setcharacter 5479 ld hl,CursorSwords5480 jp .setcharacter5481 5483 .TrigBPressedEnemyHero:5484 ld a,35485 ld (DisplayEnemyHeroStatsRightClick?),a5486 ld (EnemyHeroThatPointerIsOn),ix5487 ret5490 .checkpointerfriend: 5491 ld b,amountofheroesperplayer5492 .CheckPointerFriendlyHeroLoop:5493 ld a,h 5495 dec a5497 cp (ix+HeroY) 5498 jp nz,.endcheck25499 ld a,l 5500 cp (ix+HeroX) 5501 jp nz,.endcheck25502 ld a,(ix+HeroStatus) 5503 or a5504 jp p,.PointerIsOnFriendlyHero5505 .endcheck2:5506 add ix,de 5507 djnz .CheckPointerFriendlyHeroLoop5508 ret5510 .PointerIsOnFriendlyHero:5511 pop af 5513 ld hl,(plxcurrentheroAddress)5514 push ix 5515 pop bc5516 xor a5517 sbc hl,bc5518 ld hl,CursorHand5519 jp z,.setcharacter5520 ld hl,CursorSwitchingArrows5521 jp .setcharacter5523.MousepointInHud: 5524 ld hl,CursorHand5525 jp .setcharacter5527.shoe:5528 ld hl,CursorBoots5529 jp .setcharacter5530 5531.ShowScrollArrowBottom:5532 ld hl,CursorArrowDown5533 jp .setcharacter5535.ShowScrollArrowTop:5536 ld hl,CursorArrowUp5537 jp .setcharacter5539.ShowScrollArrowRight:55405545 ld a,(ControlsOnInterrupt)5546 bit 0,a 5547 jr z,.EndCheckShowScrollArrowTopAndRight5548 ld a,(spat) 5549 cp ycoordinateStartPlayfield5550 jp z,.ShowScrollArrowTopAndRight 5551 .EndCheckShowScrollArrowTopAndRight:55535558 ld a,(ControlsOnInterrupt)5559 bit 1,a 5560 jr z,.EndCheckShowScrollArrowBottomAndRight5561 ld a,(spat) 5562 cp ycoorspritebottom5563 jp z,.ShowScrollArrowBottomAndRight5564 .EndCheckShowScrollArrowBottomAndRight:5566.right:5567 ld hl,CursorArrowRight5568 jp .setcharacter5570.ShowScrollArrowTopAndRight:5571 ld hl,CursorArrowRightUp5572 jp .setcharacter5574.ShowScrollArrowBottomAndRight:5575 ld hl,CursorArrowRightDown5576 jp .setcharacter5578.ShowScrollArrowLeft:55795584 ld a,(ControlsOnInterrupt)5585 bit 0,a 5586 jr z,.EndCheckShowScrollArrowTopAndLeft5587 ld a,(spat) 5588 cp ycoordinateStartPlayfield5589 jp z,.ShowScrollArrowTopAndLeft 5590 .EndCheckShowScrollArrowTopAndLeft:55935598 ld a,(ControlsOnInterrupt)5599 bit 1,a 5600 jr z,.EndCheckShowScrollArrowBottomAndLeft5601 ld a,(spat) 5602 cp ycoorspritebottom 5603 jp z,.ShowScrollArrowBottomAndLeft 5604 .EndCheckShowScrollArrowBottomAndLeft:5606.left:5607 ld hl,CursorArrowLeft5608 jp .setcharacter5610.ShowScrollArrowTopAndLeft:5611 ld hl,CursorArrowLeftUp 5612 jp .setcharacter5614.ShowScrollArrowBottomAndLeft:5615 ld hl,CursorArrowDownLeft5616 jp .setcharacter5618.setcharacter: 5619 ld de,(CurrentCursorSpriteCharacter)5620 call CompareHLwithDE 5621 ret z5622 add hl,de5623 ld (CurrentCursorSpriteCharacter),hl5624 .CastleEntry:5625 56265627 xor a 5628 ld hl,sprcharaddr 5629 call SetVdp_Write5631 ld hl,(CurrentCursorSpriteCharacter)5632 5633 ld c,$985634 call outix96 56375639 xor a 5640 ld hl,sprcoladdr 5641 call SetVdp_Write5642 ld c,$985644 .SelfModifyingCodeSpriteColors: equ $+15645 ld hl,SpriteColCursorSprites5646 56475649 5650 call outix48 56535655 xor a 5656 ld hl,sprcharaddr+(3*32) 5657 call SetVdp_Write5659 ld hl,SpriteCharMapSprites5660 ld c,$985661 call outix208 5662 call outix208 5664 xor a 5665 ld hl,sprcoladdr+(3*16) 5666 call SetVdp_Write5667 ld c,$985669 ld hl,SpriteColMapSprites5670 call outix208 5671 ret5674CurrentCursorSpriteCharacter: dw CursorHand5676CursorArrowUp: equ SpriteCharCursorSprites + (00 * 32*3)5677CursorArrowRightUp: equ SpriteCharCursorSprites + (01 * 32*3)5678CursorArrowRight: equ SpriteCharCursorSprites + (02 * 32*3)5679CursorArrowRightDown: equ SpriteCharCursorSprites + (03 * 32*3)5680CursorArrowDown: equ SpriteCharCursorSprites + (04 * 32*3)5681CursorArrowDownLeft: equ SpriteCharCursorSprites + (05 * 32*3)5682CursorArrowLeft: equ SpriteCharCursorSprites + (06 * 32*3)5683CursorArrowLeftUp: equ SpriteCharCursorSprites + (07 * 32*3)5684CursorSwitchingArrows: equ SpriteCharCursorSprites + (08 * 32*3)5685CursorBoots: equ SpriteCharCursorHandDiagonal 5686CursorWalkingBoots: equ SpriteCharCursorSprites + (10 * 32*3)5687CursorHand: equ SpriteCharCursorSprites + (11 * 32*3)5688CursorSwords: equ SpriteCharCursorSprites + (12 * 32*3)5689CursorEnterCastle: equ SpriteCharCursorSprites + (13 * 32*3)5690CursorProhibitionSign: equ SpriteProhibitionSignChar5691CursorBowAndArrow: equ SpriteBowAndArrowChar5692CursorBrokenArrow: equ SpriteBowAndArrowChar + (01 * 32*3)5693CursorPointerIncastle: equ SpritePoiterInCastleChar5695CursorBootsOld: equ SpriteCharCursorSprites + (09 * 32*3)5698CursorSwordLeftUp: equ SpriteCharSword8DirectionsSprites + (00 * 32*3)5699CursorSwordLeftDown: equ SpriteCharSword8DirectionsSprites + (01 * 32*3)5700CursorSwordRightUp: equ SpriteCharSword8DirectionsSprites + (02 * 32*3)5701CursorSwordRightDown: equ SpriteCharSword8DirectionsSprites + (03 * 32*3)5702CursorSwordRight: equ SpriteCharSword8DirectionsSprites + (04 * 32*3)5703CursorSwordLeft: equ SpriteCharSword8DirectionsSprites + (05 * 32*3)5704CursorSwordUp: equ SpriteCharSword8DirectionsSprites + (06 * 32*3)5705CursorSwordDown: equ SpriteCharSword8DirectionsSprites + (07 * 32*3)5707colorlightgreen: equ 015708colormidgreen: equ 025709colorblue: equ 045710colorlightbrown: equ 055711colormiddlebrown: equ 065712colordarkbrown: equ 075713colordarkred: equ 085714colorred: equ 095715colorsnowishwhite: equ 105716colorpink: equ 115717colorwhite: equ 125718colorblack: equ 135719colordarklightgrey: equ 145720colordarkDarkgrey: equ 155723SpriteCharCursorHandDiagonal:5724 incbin "../sprites/sprconv FOR SINGLE SPRITES/HandPointerDiagonal.spr",0,32*3 * 15727SpriteCharCursorSprites:5728 incbin "../sprites/sprconv FOR SINGLE SPRITES/CursorSprites.spr",0,32*3 * 145729SpriteProhibitionSignChar:5730 ../sprites/ProhibitionSign.tgs.gen16 db %000000007 db %000000118 db %000011009 db %0001000010 db %0010001111 db %0010010012 db %0100100113 db %0100101014 db %0100110015 db %0100100016 db %0010000117 db %0010001118 db %0001000019 db %0000110020 db %0000001121 db %0000000022 db %0000000023 db %1100000024 db %0011000025 db %0000100026 db %1100010027 db %1000010028 db %0001001029 db %0011001030 db %0101001031 db %1001001032 db %0010010033 db %1100010034 db %0000100035 db %0011000036 db %1100000037 db %000000003943 db %0000000044 db %0000000045 db %0000001046 db %0000111147 db %0001110048 db %0001100049 db %0011000050 db %0011000051 db %0011000152 db %0011001153 db %0001111054 db %0001110055 db %0000110056 db %0000000057 db %0000000058 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %1110000063 db %0011000064 db %0011100065 db %0110110066 db %1100110067 db %1000110068 db %0000110069 db %0000100070 db %0001100071 db %0011000072 db %0000000073 db %0000000074 db %000000007678 db %0000000079 db %0000000080 db %0000000181 db %0000000082 db %0000000083 db %0000000084 db %0000000085 db %0000000186 db %0000001087 db %0000010088 db %0000000089 db %0000000090 db %0000001191 db %0000001192 db %0000000093 db %0000000094 db %0000000095 db %0000000096 db %1100000097 db %0001000098 db %0000100099 db %01000000100 db %10000000101 db %00000000102 db %00000000103 db %00000000104 db %00010000105 db %00100000106 db %11000000107 db %11000000108 db %00000000109 db %00000000111engine.asm5731SpriteProhibitionSignColor:5732 ../sprites/ProhibitionSign.tcs.gen12 db $003 db $0D4 db $0D5 db $006 db $0D7 db $0D8 db $0D9 db $0D10 db $0D11 db $0D12 db $0D13 db $0D14 db $0D15 db $0D16 db $0D17 db $0020 db $0021 db $0022 db $0A23 db $0924 db $0925 db $0926 db $0927 db $0928 db $0929 db $0930 db $0931 db $0932 db $0933 db $0034 db $0035 db $0038 db $0039 db $0040 db $0B41 db $0842 db $0843 db $0B44 db $0B45 db $0B46 db $0B47 db $0B48 db $0A49 db $0B50 db $0B51 db $0852 db $0053 db $0054engine.asm5733SpriteCharSword8DirectionsSprites:5734 ../sprites/Swords8Directions.tgs.gen16 db %000000007 db %011110008 db %011111009 db %0111001010 db %0100000111 db %0010000012 db %0001000013 db %0000100014 db %0000010015 db %0000001016 db %0000000117 db %0000000018 db %0000001119 db %0000001120 db %0000000121 db %0000000022 db %0000000023 db %0000000024 db %0000000025 db %0000000026 db %0000000027 db %1000000028 db %0100010029 db %0010111030 db %0001001031 db %0011101032 db %1111110033 db %1110110034 db %1111011035 db %0011001136 db %1100101037 db %000001003944 db %0000000045 db %0000000046 db %0011100047 db %0011110048 db %0011001049 db %0001100150 db %0000110051 db %0000011052 db %0000001153 db %0000000154 db %0000000055 db %0000000056 db %0000000057 db %0000000158 db %0000000059 db %0000000060 db %0000000061 db %0000000062 db %0000000063 db %0000000064 db %0000000065 db %0000000066 db %1000000067 db %0100010068 db %0110010069 db %1111010070 db %1110100071 db %0101000072 db %0010100073 db %1100110074 db %0000010075 db %000000007782 db %0000000083 db %0111100084 db %0111110085 db %0111111086 db %0111111187 db %0011111188 db %0001111189 db %0000111190 db %0000011191 db %0000001192 db %0000000193 db %0000000094 db %0000001195 db %0000001096 db %0000000197 db %0000000098 db %0000000099 db %00000000100 db %00000000101 db %00000000102 db %00000000103 db %10000000104 db %11000100105 db %11101010106 db %11110010107 db %11111010108 db %11110100109 db %11101100110 db %11010010111 db %00110001112 db %11001010113 db %00000100115120 db %00000000121 db %00000001122 db %00000011123 db %00000011124 db %00000000125 db %00000001126 db %00000010127 db %00000100128 db %00001000129 db %00010000130 db %00100000131 db %01000001132 db %01110010133 db %01111100134 db %01111000135 db %00000000136 db %00000100137 db %11001010138 db %00110011139 db %11110110140 db %11101100141 db %11111100142 db %00111010143 db %00010010144 db %00101110145 db %01000100146 db %10000000147 db %00000000148 db %00000000149 db %00000000150 db %00000000151 db %00000000153158 db %00000000159 db %00000000160 db %00000001161 db %00000000162 db %00000000163 db %00000000164 db %00000001165 db %00000011166 db %00000110167 db %00001100168 db %00011001169 db %00110010170 db %00111100171 db %00111000172 db %00000000173 db %00000000174 db %00000000175 db %00000100176 db %11001100177 db %00101000178 db %01010000179 db %11101000180 db %11110100181 db %01100100182 db %01000100183 db %10000000184 db %00000000185 db %00000000186 db %00000000187 db %00000000188 db %00000000189 db %00000000191196 db %00000000197 db %00000001198 db %00000010199 db %00000011200 db %00000000201 db %00000001202 db %00000011203 db %00000111204 db %00001111205 db %00011111206 db %00111111207 db %01111111208 db %01111110209 db %01111100210 db %01111000211 db %00000000212 db %00000100213 db %11001010214 db %00110001215 db %11010010216 db %11101100217 db %11110100218 db %11111010219 db %11110010220 db %11101010221 db %11000100222 db %10000000223 db %00000000224 db %00000000225 db %00000000226 db %00000000227 db %00000000229234 db %00000000235 db %00000000236 db %00000000237 db %00000000238 db %00000000239 db %00000001240 db %00100010241 db %01110100242 db %01001000243 db %01011100244 db %00111111245 db %00110111246 db %01101111247 db %11001100248 db %01010011249 db %00100000250 db %00000000251 db %00011110252 db %00111110253 db %01001110254 db %10000010255 db %00000100256 db %00001000257 db %00010000258 db %00100000259 db %01000000260 db %10000000261 db %00000000262 db %11000000263 db %11000000264 db %10000000265 db %00000000267272 db %00000000273 db %00000000274 db %00000000275 db %00000000276 db %00000000277 db %00000000278 db %00000001279 db %00100010280 db %00100110281 db %00101111282 db %00010111283 db %00001010284 db %00010100285 db %00110011286 db %00100000287 db %00000000288 db %00000000289 db %00000000290 db %00011100291 db %00111100292 db %01001100293 db %10011000294 db %00110000295 db %01100000296 db %11000000297 db %10000000298 db %00000000299 db %00000000300 db %00000000301 db %10000000302 db %00000000303 db %00000000305310 db %00000000311 db %00000000312 db %00000000313 db %00000000314 db %00000000315 db %00000001316 db %00100011317 db %01010111318 db %01001111319 db %01011111320 db %00101111321 db %00110111322 db %01001011323 db %10001100324 db %01010011325 db %00100000326 db %00000000327 db %00011110328 db %00111110329 db %01111110330 db %11111110331 db %11111100332 db %11111000333 db %11110000334 db %11100000335 db %11000000336 db %10000000337 db %00000000338 db %11000000339 db %01000000340 db %10000000341 db %00000000343348 db %00100000349 db %01010011350 db %11001100351 db %01101111352 db %00110111353 db %00111111354 db %01011100355 db %01001000356 db %01110100357 db %00100010358 db %00000001359 db %00000000360 db %00000000361 db %00000000362 db %00000000363 db %00000000364 db %00000000365 db %10000000366 db %11000000367 db %11000000368 db %00000000369 db %10000000370 db %01000000371 db %00100000372 db %00010000373 db %00001000374 db %00000100375 db %10000010376 db %01001110377 db %00111110378 db %00011110379 db %00000000381386 db %00000000387 db %00100000388 db %00110011389 db %00010100390 db %00001010391 db %00010111392 db %00101111393 db %00100110394 db %00100010395 db %00000001396 db %00000000397 db %00000000398 db %00000000399 db %00000000400 db %00000000401 db %00000000402 db %00000000403 db %00000000404 db %10000000405 db %00000000406 db %00000000407 db %00000000408 db %10000000409 db %11000000410 db %01100000411 db %00110000412 db %10011000413 db %01001100414 db %00111100415 db %00011100416 db %00000000417 db %00000000419424 db %00100000425 db %01010011426 db %10001100427 db %01001011428 db %00110111429 db %00101111430 db %01011111431 db %01001111432 db %01010111433 db %00100011434 db %00000001435 db %00000000436 db %00000000437 db %00000000438 db %00000000439 db %00000000440 db %00000000441 db %10000000442 db %01000000443 db %11000000444 db %00000000445 db %10000000446 db %11000000447 db %11100000448 db %11110000449 db %11111000450 db %11111100451 db %11111110452 db %01111110453 db %00111110454 db %00011110455 db %00000000457462 db %00000000463 db %00001110464 db %00011110465 db %00110100466 db %00101000467 db %11111111468 db %01011000469 db %10011000470 db %10011111471 db %11111111472 db %00101000473 db %00110100474 db %00011110475 db %00001110476 db %00000000477 db %00000000478 db %00000000479 db %00000000480 db %00000000481 db %00000000482 db %00000000483 db %11111110484 db %00000001485 db %00000000486 db %11111111487 db %11111110488 db %00000000489 db %00000000490 db %00000000491 db %00000000492 db %00000000493 db %00000000495500 db %00000000501 db %00000000502 db %00000100503 db %00001000504 db %00010000505 db %00010000506 db %10110000507 db %11110111508 db %11110111509 db %00010000510 db %00010000511 db %00001000512 db %00000100513 db %00000000514 db %00000000515 db %00000000516 db %00000000517 db %00000000518 db %00000000519 db %00000000520 db %00000000521 db %00000000522 db %00000000523 db %11111111524 db %11111110525 db %00000000526 db %00000000527 db %00000000528 db %00000000529 db %00000000530 db %00000000531 db %00000000533538 db %00000000539 db %00001110540 db %00011010541 db %00110100542 db %00101000543 db %11101111544 db %00001111545 db %00001111546 db %00001111547 db %11101111548 db %00101000549 db %00110100550 db %00011010551 db %00001110552 db %00000000553 db %00000000554 db %00000000555 db %00000000556 db %00000000557 db %00000000558 db %00000000559 db %11111110560 db %11111111561 db %11111111562 db %11111111563 db %11111110564 db %00000000565 db %00000000566 db %00000000567 db %00000000568 db %00000000569 db %00000000571576 db %00000000577 db %00000000578 db %00000000579 db %00000000580 db %00000000581 db %00000000582 db %01111111583 db %10000000584 db %00000000585 db %11111111586 db %01111111587 db %00000000588 db %00000000589 db %00000000590 db %00000000591 db %00000000592 db %00000000593 db %00000000594 db %01110000595 db %01111000596 db %00101100597 db %00010100598 db %11111111599 db %00011001600 db %00011001601 db %11111010602 db %11111111603 db %00010100604 db %00101100605 db %01111000606 db %01110000607 db %00000000609614 db %00000000615 db %00000000616 db %00000000617 db %00000000618 db %00000000619 db %00000000620 db %00000000621 db %00000000622 db %11111111623 db %01111111624 db %00000000625 db %00000000626 db %00000000627 db %00000000628 db %00000000629 db %00000000630 db %00000000631 db %00000000632 db %00000000633 db %00100000634 db %00010000635 db %00001000636 db %00001000637 db %00001111638 db %11101111639 db %11101101640 db %00001000641 db %00001000642 db %00010000643 db %00100000644 db %00000000645 db %00000000647652 db %00000000653 db %00000000654 db %00000000655 db %00000000656 db %00000000657 db %00000000658 db %01111111659 db %11111111660 db %11111111661 db %11111111662 db %01111111663 db %00000000664 db %00000000665 db %00000000666 db %00000000667 db %00000000668 db %00000000669 db %00000000670 db %01110000671 db %01011000672 db %00101100673 db %00010100674 db %11110111675 db %11110000676 db %11110000677 db %11110000678 db %11110111679 db %00010100680 db %00101100681 db %01011000682 db %01110000683 db %00000000685690 db %00000010691 db %00000100692 db %00000100693 db %00000100694 db %00000100695 db %00000100696 db %00000100697 db %00000100698 db %00000100699 db %01100100700 db %01110100701 db %01101111702 db %00110111703 db %00011100704 db %00000110705 db %00000101706 db %10000000707 db %11000000708 db %11000000709 db %11000000710 db %11000000711 db %11000000712 db %11000000713 db %11000000714 db %11000000715 db %11001100716 db %11011100717 db %11101100718 db %11011000719 db %01110000720 db %01000000721 db %11000000723728 db %00000001729 db %00000001730 db %00000001731 db %00000001732 db %00000001733 db %00000001734 db %00000001735 db %00000001736 db %00000001737 db %00000001738 db %00100001739 db %00010000740 db %00001111741 db %00000011742 db %00000001743 db %00000011744 db %00000000745 db %10000000746 db %10000000747 db %10000000748 db %10000000749 db %10000000750 db %10000000751 db %10000000752 db %10000000753 db %10000000754 db %10001000755 db %00010000756 db %11100000757 db %10000000758 db %10000000759 db %10000000761766 db %00000011767 db %00000111768 db %00000111769 db %00000111770 db %00000111771 db %00000111772 db %00000111773 db %00000111774 db %00000111775 db %01100111776 db %01010111777 db %01101111778 db %00110000779 db %00011100780 db %00000100781 db %00000100782 db %10000000783 db %11000000784 db %11000000785 db %11000000786 db %11000000787 db %11000000788 db %11000000789 db %11000000790 db %11000000791 db %11001100792 db %11010100793 db %11101100794 db %00011000795 db %01110000796 db %01000000797 db %01000000799804 db %00000111805 db %00000100806 db %00011100807 db %00110111808 db %01101111809 db %01110100810 db %01100100811 db %00000100812 db %00000100813 db %00000100814 db %00000100815 db %00000100816 db %00000100817 db %00000100818 db %00000100819 db %00000010820 db %01000000821 db %11000000822 db %01110000823 db %11011000824 db %11101100825 db %11011100826 db %11001100827 db %11000000828 db %11000000829 db %11000000830 db %11000000831 db %11000000832 db %11000000833 db %11000000834 db %11000000835 db %10000000837842 db %00000011843 db %00000011844 db %00000011845 db %00001111846 db %00010000847 db %00100001848 db %00000001849 db %00000001850 db %00000001851 db %00000001852 db %00000001853 db %00000001854 db %00000001855 db %00000001856 db %00000001857 db %00000001858 db %10000000859 db %00000000860 db %10000000861 db %11100000862 db %00010000863 db %10001000864 db %10000000865 db %10000000866 db %10000000867 db %10000000868 db %10000000869 db %10000000870 db %10000000871 db %10000000872 db %10000000873 db %00000000875880 db %00000100881 db %00000100882 db %00011100883 db %00110000884 db %01101111885 db %01010111886 db %01100111887 db %00000111888 db %00000111889 db %00000111890 db %00000111891 db %00000111892 db %00000111893 db %00000111894 db %00000111895 db %00000011896 db %01000000897 db %01000000898 db %01110000899 db %00011000900 db %11101100901 db %11010100902 db %11001100903 db %11000000904 db %11000000905 db %11000000906 db %11000000907 db %11000000908 db %11000000909 db %11000000910 db %11000000911 db %10000000912engine.asm5735SpriteBowAndArrowChar:5736 incbin "../sprites/sprconv FOR SINGLE SPRITES/BowAndArrow.spr",0,32*3 * 025737SpritePoiterInCastleChar:5738 incbin "../sprites/sprconv FOR SINGLE SPRITES/PointerInCastle.spr",0,32*3 * 015740SpriteColPoiterInCastleSprite:5741 ds 16,colorlightbrown| ds 16,colormiddlebrown+64 | ds 16,colorwhite+645742SpriteColCursorSprites:5743 ds 16,colorlightgreen| ds 16,colormidgreen+64 | ds 16,colorwhite+645745SpriteCharMapSprites:5746 ../sprites/MapCornerLeftTop.tgs.gen12 db 873 db 924 db 2085 db 966 db 647 db 648 db 1289 db 12810 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 19219 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 25235 db 24036 db 16037 db 19238 db 12839 db 12840 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5747 ../sprites/MapCornerRightTop.tgs.gen12 db 33 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 23419 db 5820 db 1121 db 422 db 223 db 224 db 125 db 126 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 6351 db 1552 db 753 db 354 db 155 db 156 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 066engine.asm5748 ../sprites/MapCornerLeftBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 12811 db 12812 db 6413 db 12814 db 3215 db 22416 db 24817 db 25418 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 12845 db 6446 db 19247 db 4848 db 17249 db 16350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 19266engine.asm5749 ../sprites/MapCornerRightBottom.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 127 db 128 db 229 db 130 db 431 db 732 db 3133 db 12734 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 350 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 161 db 262 db 363 db 1264 db 5365 db 19766engine.asm5750 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5751 ../sprites/MapRightSide.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 122 db 123 db 224 db 225 db 226 db 227 db 228 db 229 db 230 db 131 db 132 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 156 db 157 db 158 db 159 db 160 db 161 db 162 db 063 db 064 db 065 db 066engine.asm5752 ../sprites/MiniMapSquareIcon.tgs.gen15sprite0tgs:6 db %000000017 db %000000018 db %000000019 db %0000000110 db %0000000111 db %0000000112 db %0000000113 db %0000000114 db %0000000115 db %0000000016 db %0000000017 db %0000000018 db %0000000019 db %0000000020 db %0000000021 db %0000000022 db %1111111123 db %0000000124 db %0000000125 db %0000000126 db %0000000127 db %0000000128 db %0000000129 db %0000000130 db %1111111131 db %0000000032 db %0000000033 db %0000000034 db %0000000035 db %0000000036 db %0000000037 db %0000000039engine.asm5753SpriteColMapSprites:5754 ../sprites/MapCornerLeftTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7924 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5755 ../sprites/MapCornerRightTop.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 139 db 1310 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 7819 db 7820 db 7821 db 7822 db 7923 db 7824 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534engine.asm5756 ../sprites/MapCornerLeftBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5757 ../sprites/MapCornerRightBottom.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 1511 db 1312 db 1313 db 1014 db 1315 db 1016 db 1017 db 1018 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 7929 db 7730 db 7931 db 7732 db 7733 db 7734engine.asm5758 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5759 ../sprites/MapRightSide.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 138 db 139 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7924 db 7925 db 7926 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534engine.asm5760 ../sprites/MiniMapSquareIcon.tcs.gen1 db colorwhite2 db colorwhite3 db colorwhite4 db colorwhite5 db colorwhite6 db colorwhite7 db colorwhite8 db colorwhite9 db colorwhite10 db colorwhite11 db colorwhite12 db colorwhite13 db colorwhite14 db colorwhite15 db colorwhite16 db colorwhiteengine.asm5761 5762putsprite:5763 xor a 5764 ld hl,sprattaddr 5765 call SetVdp_Write5766 ld hl,spat 5767 ld c,$985768 call outix128 5769 ret5771spat: 5772 db 100,100,00,0 ,100,100,04,0 ,100,100,08,0 ,004,006,12,05773 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05774 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05775 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05777 db 230,230,64,0 ,230,230,68,0 ,230,230,72,0 ,230,230,76,05778 db 230,230,80,0 ,230,230,84,0 ,230,230,88,0 ,230,230,92,05779 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05780 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05782SpatInCastle: 5783 db 230,230,00,05784 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05785 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05786 db 230,230,00,0 ,230,230,00,0 ,230,230,00,0 ,230,230,00,05788SpatInGame: 5789 db 004,006,12,05790 db 004,006,16,0 ,004,182,20,0 ,004,182,24,0 ,180,006,28,05791 db 180,006,32,0 ,180,182,36,0 ,180,182,40,0 ,046,182,44,05792 db 046,182,48,0 ,119,182,52,0 ,119,182,56,0 ,025,230,60,05794DisableScrollScreen?: db 05795scrollscreen: 5796 ld a,(DisableScrollScreen?)5797 or a5798 ret nz5800 call checkcurrentplayerhuman 5801 ret z 58035808 ld a,(Controls)5809 ld d,a 5810 ld bc,0 58125816 ld a,(keys+6)5817 bit 1,a 5818 jp nz,.EndCheckCTRL5819 5820 ld a,(Controls) 5821 and %1111 00005822 ld (Controls),a5824 bit 2,d 5825 jr z,.EndCheckCTRLAndLeft 5826 dec b5827 .EndCheckCTRLAndLeft:5829 bit 3,d 5830 jr z,.EndCheckCTRLAndRight5831 inc b5832 .EndCheckCTRLAndRight:5834 bit 0,d 5835 jr z,.EndCheckCTRLAndUp5836 dec c5837 .EndCheckCTRLAndUp:5839 bit 1,d 5840 jr z,.endcheck5841 inc c5842 jp .endcheck5843 .EndCheckCTRL:5845 .left: 5846 ld a,(spat+1) 5847 cp xcoordinateStartPlayfield5848 jr nz,.right5849 bit 2,d 5850 jr z,.right5851 dec b5853 .right: 5854 cp xcoorspriteright5855 jr nz,.up5856 bit 3,d 5857 jr z,.up5858 inc b5860 .up: 5861 ld a,(spat) 5862 cp ycoordinateStartPlayfield58635864 jr nz,.down5865 bit 0,d 5866 jr z,.down5867 dec c5869 .down: 5870 cp ycoorspritebottom5871 jr nz,.endcheck5872 bit 1,d 5873 jr z,.endcheck5874 inc c5875 .endcheck:5877 ld a,(maplenght) 5878 sub a,TilesPerRow-1 5879 ld d,a5880 ld a,(mapheight)5881 sub a,TilesPerColumn-15882 ld e,a5884 call .ScrollMap5885 ld a,(keys+6)5886 bit 0,a 5887 ret nz5889 .ScrollMap:5890 ld a,(mappointerx)5891 add a,b 5892 cp d 5893 jp nc,.endmovex5894 ld (mappointerx),a5895 .endmovex:5897 ld a,(mappointery)5898 add a,c 5899 cp e 5900 ret nc5901 ld (mappointery),a 5902 ret 5904SetPageSpecial: 5905 ld a,0*32+315906 jr z,.setpage5907 ld a,1*32+315908 .setpage: 5909 di5910 out ($99),a5911 ld a,2+1285912 ei5913 out ($99),a5914 ret5916buildupscreenYoffset: equ 55917buildupscreenXoffset: equ 65918TilesPerColumn: equ 1259195920TilesPerRow: equ 1259215922mapdata: equ $80005924maplenght: dw 1285925mapheight: db 1285927mappage0:5928 ds TilesPerColumn*TilesPerRow,2555929mappage1:5930 ds TilesPerColumn*TilesPerRow,2555932putbottomobjects:5933 Call SetMapposition 5935 ld a,(activepage)5936 or a5937 ld de,mappage1 5938 jr z,.mirrorpageset5939 ld de,mappage0 5940 .mirrorpageset:5942 ld a,buildupscreenYoffset 5943 ld (Copy16x16Tile+dy),a5945 ld bc,TilesPerColumn*256 + 16 5946 .loop:5947 push bc5948 ld a,buildupscreenXoffset 5949 ld (Copy16x16Tile+dx),a 5950 call PutRowBottomObjects 5952 ld a,(Copy16x16Tile+dy) 5953 add a,c5954 ld (Copy16x16Tile+dy),a 5956 ld bc,128 - 12 5957 add hl,bc 5959 pop bc5960 djnz .loop5961 ret5962 ret5964PutRowBottomObjects:5965 ld b,TilesPerRow 5966 .loop:5967 call PutBottomObjectFromObjectLayer 5968 inc hl 5969 inc de 5971 ld a,(Copy16x16Tile+dx)5972 add a,c5973 ld (Copy16x16Tile+dx),a5975 djnz .loop5976 ret5978PutBottomObjectFromObjectLayer: 5979 ld a,2 5980 ld (page1bank),a5981 out ($fe),a 5983 ld a,2 5984 ld (Copy16x16Tile+sPage),a5985 ld a,$98 5986 ld (Copy16x16Tile+copytype),a5988 ld a,(hl)5989 or a5990 ret z5991 cp 1925992 ret nc 5994 ld a,2555995 ld (de),a 5996 ld a,(hl)5997 jp PutTile.go5999PutTopObjects:6000 Call SetMapposition 6002 ld a,(activepage)6003 or a6004 ld de,mappage1 6005 jr z,.mirrorpageset6006 ld de,mappage0 6007 .mirrorpageset:6009 ld a,buildupscreenYoffset 6010 ld (Copy16x16Tile+dy),a6012 ld bc,TilesPerColumn*256 + 16 6013 .loop:6014 push bc6015 ld a,buildupscreenXoffset 6016 ld (Copy16x16Tile+dx),a 6017 call PutRowTopObjects 6019 ld a,(Copy16x16Tile+dy) 6020 add a,c6021 ld (Copy16x16Tile+dy),a 6023 ld bc,128 - 12 6024 add hl,bc 6026 pop bc6027 djnz .loop6028 ret6030PutRowTopObjects:6031 ld b,TilesPerRow 6032 .loop:6033 call PutTopObjectFromObjectLayer 6034 inc hl 6035 inc de 6037 ld a,(Copy16x16Tile+dx)6038 add a,c6039 ld (Copy16x16Tile+dx),a6041 djnz .loop6042 ret6044PutTopObjectFromObjectLayer: 6045 ld a,2 6046 ld (page1bank),a6047 out ($fe),a 6049 ld a,2 6050 ld (Copy16x16Tile+sPage),a6051 ld a,$98 6052 ld (Copy16x16Tile+copytype),a6054 ld a,(hl)6056 if DisplayNumbers1to6?6057 cp 1926058 else6059 cp 192+6 6060 endif 6061 ret c 6063 ld a,2556064 ld (de),a 6065 ld a,(hl)6066 jp PutTile.go6068SetMapposition: 6069 ld a,(mappointery) 6072 ld de,(maplenght)6073 ld h,06074 ld l,a6075 call MultiplyHlWithDE 6079 ld de,mapdata 6080 add hl,de6081 ld de,(mappointerx)6082 add hl,de 608560886096 ret6098buildupscreen:6099 Call SetMapposition 6101 ld a,(activepage) 6102 ld (Copy16x16Tile+dpage),a 6103 ld (putherotopbottom+dpage),a6104 ld (putcastle+dpage),a6105 ld (putbackgroundoverhero+dpage),a6106 ld (putstar+dpage),a61076109 ld (putlettre+dpage),a6110 xor 1 6111 ld (activepage),a 6112 ld de,mappage1 6113 jr z,.mirrorpageset6114 ld de,mappage0 6115 .mirrorpageset:6116 call SetPageSpecial 6118 ex de,hl 6119 ld a,buildupscreenYoffset 6120 ld (Copy16x16Tile+dy),a6122 ld bc,TilesPerColumn*256 + 16 6123 .loop:6124 push bc6125 ld a,buildupscreenXoffset 6126 ld (Copy16x16Tile+dx),a 6127 call putrow 6129 ld a,(Copy16x16Tile+dy) 6130 add a,c6131 ld (Copy16x16Tile+dy),a 6133 ld bc,128 - 12 6134 ex de,hl6135 add hl,bc 6136 ex de,hl6138 pop bc6139 djnz .loop6140 ret6142putrow: 6143 ld b,TilesPerRow 6144.loop:6145 call PutTile 6147 inc hl6148 inc de6150 ld a,(Copy16x16Tile+dx)6151 add a,c6152 ld (Copy16x16Tile+dx),a6154 djnz .loop6155 ret6157PutTile: 6158 ld a,1 6159 ld (page1bank),a6160 out ($fe),a 6162 ld a,3 6163 ld (Copy16x16Tile+sPage),a6164 ld a,$d0 6165 ld (Copy16x16Tile+copytype),a6167 ld a,(de) 6168 cp (hl) 6169 ret z 6170 ld (hl),a6172 .go:6173 exx 6174 ld e,a 6175 add a,a 6176 add a,a 6177 add a,a 6178 add a,a 6179 ld (Copy16x16Tile+sx),a6180 6182 6183 ld a,e6184 ld d,-16185.setsy:6186 sub a,166187 inc d6188 jp nc,.setsy6189 ld a,d6190 add a,a 6191 add a,a 6192 add a,a 6193 add a,a 6194 ld (Copy16x16Tile+sy),a6195 6197 ld hl,Copy16x16Tile6198 call docopy6199 exx6200 ret6202Copy16x16Tile:6203 db 255,000,255,0036204 db 255,000,255,0006205 db 016,000,016,0006206 db 000,000,$d0 6208BackupImagePage0Ready?: db 0 6209FreeToUseFastCopy0: 6210 db 000,000,000,000 6211 db 000,000,000,000 6212 db 000,000,000,000 6213 db 000,%0000 0000,$D0 6215BackupImagePage1Ready?: db 0 6216FreeToUseFastCopy1: 6217 db 000,000,000,000 6218 db 000,000,000,000 6219 db 000,000,000,000 6220 db 000,%0000 0000,$D0 622262286234ScreenOff:6235 ld a,(VDP_0+1) 6236 and %1011 11116237 di6238 out ($99),a6239 ld a,1+1286240 ei6241 out ($99),a6242 ret6244ScreenOn:6245 ld a,(VDP_0+1) 6246 or %0100 00006247 di6248 out ($99),a6249 ld a,1+1286250 ei6251 out ($99),a6252 ret6254activepage: db 06255mappointerx: dw 06256mappointery: db 06257heroymirror: ds 16258heroxmirror: ds 16260non_see_throughpieces: equ 16 6261amountoftransparantpieces: equ 64 6262UnwalkableTerrainPieces: equ 149 6264mirrortransparentpieces: 6266 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 048,128, 080,144, 048,160, 080,128, 064,176, 064,192, 064,224, 064,2406267 db 064,000, 064,016, 064,032, 064,048, 064,064, 064,080, 064,096, 064,112, 064,128, 064,144, 064,160, 080,160, 080,176, 080,192, 048,224, 048,2406268 db 080,000, 080,016, 080,032, 080,048, 080,064, 080,080, 080,096, 080,1126270putbackgroundoverhero:6271 db 16,0,64,36272 db 255,0,255,06273 db 16,0,16,06274 db 0,%0000 0000,$98 62756277putherotopbottom:6278 db 224,0,0,26279 db 96,0,96,06280 db 16,0,16,06281 db 0,%0000 0000,$98 6283putcastle:6284 db 255,0,208,36285 db 255,0,255,06286 db 16,0,16,06287 db 0,%0000 0000,$98 62886290putlettre:6291 db 0,0,212,16292 db 40,0,40,06293 db 16,0,5,06294 db 0,%0000 0000,$98 62966302mouseposy: ds 16303mouseposx: ds 16304mouseclicky: ds 16305mouseclickx: ds 16306addxtomouse: equ 86307addxtomouseDiagonalPointer: equ -663086309addytomouse: equ 46310addytomouseDiagonalPointer: equ -26312HeroTotalManaBeforeLevelingUp: ds 16313amountofheroesperplayer: equ 86314lenghtherotable: equ pl1hero2y-pl1hero1y6316HeroY: equ 06317HeroX: equ 16318HeroXp: equ 26319HeroMove: equ 46320HeroTotalMove: equ 56321HeroMana: equ 66322HeroTotalMana: equ 86323HeroManarec: equ 106324HeroStatus: equ 11 6325HeroUnits: equ 12 6326HeroStatAttack: equ 306327HeroStatDefense: equ 316328HeroStatKnowledge: equ 326329HeroStatSpellDamage: equ 336330HeroSkills: equ 346331HeroLevel: equ 406332HeroEarthSpells: equ 416333HeroFireSpells: equ 426334HeroAirSpells: equ 436335HeroWaterSpells: equ 446336HeroAllSchoolsSpells: equ 456337HeroInventory: equ 46 6338HeroSpecificInfo: equ 616339HeroDYDX: equ 63 6340lenghtinventorytable: equ 9 + 663416342EmptyHeroRecruitedAtTavern:6343.heroy: ds 16344.herox: ds 16345.heroxp: dw 0006346.heromove: db 20,206347.heromana: dw 10,106348.heromanarec:db 5 6349.herostatus: db 2 6350.HeroUnits: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6351.HeroStatAttack: db 16352.HeroStatDefense: db 16353.HeroStatKnowledge: db 1 6354.HeroStatSpellDamage: db 1 6355.HeroSkills: db 0,0,0,0,0,06356.HeroLevel: db 16357.EarthSpells: db %0000 0000 6358.FireSpells: db %0000 0000 6359.AirSpells: db %0000 0000 6360.WaterSpells: db %0000 0000 6361.AllSchoolsSpells: db %0000 0000 6362.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6363.HeroSpecificInfo: ds 2636463716375StartSaveGameData:6377pl1hero1y: db 36378pl1hero1x: db 36379pl1hero1xp: dw 0 6380pl1hero1move: db 20,206381pl1hero1mana: dw 50,106382pl1hero1manarec:db 5 6383pl1hero1status: db 2 6386Pl1Hero1Units: db ContraGroupBUnitLevel1Number | dw 150 | db ContraGroupBUnitLevel2Number | dw 130 | db 000 | dw 000 | db ContraGroupBUnitLevel4Number | dw 130 | db ContraGroupBUnitLevel5Number | dw 100 | db ContraGroupBUnitLevel6Number | dw 100 6387Pl1Hero1StatAttack: db 06388Pl1Hero1StatDefense: db 06389Pl1Hero1StatKnowledge: db 1 6390Pl1Hero1StatSpellDamage: db 9 6393.HeroSkills: db 13,0,0,0,0,06394.HeroLevel: db 16395.EarthSpells: db %0000 0000 6396.FireSpells: db %0000 00006397.AirSpells: db %0000 00006398.WaterSpells: db %0000 00006399.AllSchoolsSpells: db %0000 000064006403.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 6404.HeroSpecificInfo: dw HeroAddressesSnake16405.HeroDYDX: dw $ffff 6408 6414pl1hero2y: db $1c6415pl1hero2x: db $336416pl1hero2xp: dw 00006417pl1hero2move: db 06,206418pl1hero2mana: dw 10,106419pl1hero2manarec:db 5 6420pl1hero2status: db 255 6421Pl1Hero2Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6422.HeroStatAttack: db 16423.HeroStatDefense: db 16424.HeroStatKnowledge: db 1 6425.HeroStatSpellDamage: db 1 6426.HeroSkills: db 31,0,0,0,0,06427.HeroLevel: db 16428.EarthSpells: db %0000 0000 6429.FireSpells: db %0000 00006430.AirSpells: db %0000 00006431.WaterSpells: db %0000 00006432.AllSchoolsSpells: db %0000 00006433.Inventory: db 045,045,045,045,045,045,045,045,044, 016,027,033,043,038,0396434.HeroSpecificInfo: db 255,2556435.HeroDYDX: dw $ffff 6437pl1hero3y: db 01 6438pl1hero3x: db 036439pl1hero3xp: dw 00006440pl1hero3move: db 20,206441pl1hero3mana: dw 10,106442pl1hero3manarec:db 5 6443pl1hero3status: db 255 6444Pl1Hero3Units: db 001 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6445.HeroStatAttack: db 16446.HeroStatDefense: db 16447.HeroStatKnowledge: db 1 6448.HeroStatSpellDamage: db 1 6449.HeroSkills: db 8,30,24,0,0,06450.HeroLevel: db 16451.EarthSpells: db %0000 0000 6452.FireSpells: db %0000 00006453.AirSpells: db %0000 00006454.WaterSpells: db %0000 00006455.AllSchoolsSpells: db %0000 00006456.Inventory: ds lenghtinventorytable,0456457.HeroSpecificInfo: db 255,2556458.HeroDYDX: dw $ffff 6460pl1hero4y: db 00 6461pl1hero4x: db 00 6462pl1hero4xp: dw 00006463pl1hero4move: db 20,206464pl1hero4mana: dw 10,206465pl1hero4manarec:db 5 6466pl1hero4status: db 255 6467Pl1Hero4Units: db 006 | dw 010 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6468.HeroStatAttack: db 16469.HeroStatDefense: db 16470.HeroStatKnowledge: db 1 6471.HeroStatSpellDamage: db 1 6472.HeroSkills: db 33,10,1,0,0,06473.HeroLevel: db 16474.EarthSpells: db %0000 0001 6475.FireSpells: db %0000 00016476.AirSpells: db %0000 00016477.WaterSpells: db %0000 00016478.AllSchoolsSpells: db %0000 00016479.Inventory: ds lenghtinventorytable,0456480.HeroSpecificInfo: db 255,2556481.HeroDYDX: dw $ffff 6483pl1hero5y: db 00 6484pl1hero5x: db 01 6485pl1hero5xp: dw 00006486pl1hero5move: db 20,206487pl1hero5mana: dw 10,206488pl1hero5manarec:db 5 6489pl1hero5status: db 255 6490Pl1Hero5Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6491.HeroStatAttack: db 16492.HeroStatDefense: db 16493.HeroStatKnowledge: db 1 6494.HeroStatSpellDamage: db 1 6495.HeroSkills: db 33,10,1,0,0,06496.HeroLevel: db 16497.EarthSpells: db %0000 0001 6498.FireSpells: db %0000 00016499.AirSpells: db %0000 00016500.WaterSpells: db %0000 00016501.AllSchoolsSpells: db %0000 00016502.Inventory: ds lenghtinventorytable,0456503.HeroSpecificInfo: db 255,2556504.HeroDYDX: dw $ffff 6506pl1hero6y: db 00 6507.pl1hero6x: db 02 6508.pl1hero6xp: dw 00006509.pl1hero6move: db 20,206510.pl1hero6mana: dw 10,206511.pl1hero6manarec:db 5 6512.pl1hero6status: db 255 6513.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6514.HeroStatAttack: db 16515.HeroStatDefense: db 16516.HeroStatKnowledge: db 1 6517.HeroStatSpellDamage: db 1 6518.HeroSkills: db 33,10,1,0,0,186519.HeroLevel: db 16520.EarthSpells: db %0000 0001 6521.FireSpells: db %0000 00016522.AirSpells: db %0000 00016523.WaterSpells: db %0000 00016524.AllSchoolsSpells: db %0000 00016525.Inventory: ds lenghtinventorytable,0456526.HeroSpecificInfo: db 255,2556527.HeroDYDX: dw $ffff 6529pl1hero7y: db 00 6530.pl1hero6x: db 03 6531.pl1hero6xp: dw 00006532.pl1hero6move: db 20,206533.pl1hero6mana: dw 10,206534.pl1hero6manarec:db 5 6535.pl1hero6status: db 255 6536.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6537.HeroStatAttack: db 16538.HeroStatDefense: db 16539.HeroStatKnowledge: db 1 6540.HeroStatSpellDamage: db 1 6541.HeroSkills: db 33,10,1,0,0,186542.HeroLevel: db 16543.EarthSpells: db %0000 0001 6544.FireSpells: db %0000 00016545.AirSpells: db %0000 00016546.WaterSpells: db %0000 00016547.AllSchoolsSpells: db %0000 00016548.Inventory: ds lenghtinventorytable,0456549.HeroSpecificInfo: db 255,2556550.HeroDYDX: dw $ffff 6552pl1hero8y: db 00 6553.pl1hero6x: db 04 6554.pl1hero6xp: dw 00006555.pl1hero6move: db 20,206556.pl1hero6mana: dw 10,206557.pl1hero6manarec:db 5 6558.pl1hero6status: db 255 6559.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6560.HeroStatAttack: db 16561.HeroStatDefense: db 16562.HeroStatKnowledge: db 1 6563.HeroStatSpellDamage: db 1 6564.HeroSkills: db 33,10,1,0,0,186565.HeroLevel: db 16566.EarthSpells: db %0000 0001 6567.FireSpells: db %0000 00016568.AirSpells: db %0000 00016569.WaterSpells: db %0000 00016570.AllSchoolsSpells: db %0000 00016571.Inventory: ds lenghtinventorytable,0456572.HeroSpecificInfo: db 255,2556573.HeroDYDX: dw $ffff 6575pl1hero9y: db 00 6576.pl1hero6x: db 00 6577.pl1hero6xp: dw 00006578.pl1hero6move: db 00,006579.pl1hero6mana: dw 00,006580.pl1hero6manarec:db 0 6581.pl1hero6status: db 255 65836584pl2hero1y: db 36585pl2hero1x: db 665866587pl2hero1xp: dw 00006588pl2hero1move: db 20,206589pl2hero1mana: dw 50,106590pl2hero1manarec:db 5 6591pl2hero1status: db 1 6594Pl2Hero1Units: db 1 | dw 001 | db 001 | dw 010 | db 001 | dw 100 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6595.HeroStatAttack: db 06596.HeroStatDefense: db 06597.HeroStatKnowledge: db 1 6598.HeroStatSpellDamage: db 1 6599.HeroSkills: db 13,0,0,0,0,06600.HeroLevel: db 16601.EarthSpells: db %0000 1111 6602.FireSpells: db %0000 11116603.AirSpells: db %0000 11116604.WaterSpells: db %0000 11116605.AllSchoolsSpells: db %0000 111166066607.Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,0456608.HeroSpecificInfo: dw HeroAddressesDrasle16609.HeroDYDX: dw $ffff 6613pl2hero2y: db 00 6614.pl1hero2x: db 04 6615.pl1hero6xp: dw 00006616.pl1hero6move: db 20,206617.pl1hero6mana: dw 10,206618.pl1hero6manarec:db 5 6619.pl1hero6status: db 1 6620.Pl1Hero6Units: db 023 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6621.HeroStatAttack: db 16622.HeroStatDefense: db 16623.HeroStatKnowledge: db 1 6624.HeroStatSpellDamage: db 1 6625.HeroSkills: db 33,10,1,0,0,186626.HeroLevel: db 16627.EarthSpells: db %0000 0001 6628.FireSpells: db %0000 00016629.AirSpells: db %0000 00016630.WaterSpells: db %0000 00016631.AllSchoolsSpells: db %0000 00016632.Inventory: ds lenghtinventorytable,0456633.HeroSpecificInfo: dw HeroAddressesDrasle26634.HeroDYDX: dw $ffff 66376638pl2hero3y: ds lenghtherotable,2556639pl2hero4y: ds lenghtherotable,2556640pl2hero5y: ds lenghtherotable,2556641pl2hero6y: ds lenghtherotable,2556642pl2hero7y: ds lenghtherotable,2556643pl2hero8y: ds lenghtherotable,2556645pl2hero9y: db 00 6646.pl1hero6x: db 00 6647.pl1hero6xp: dw 00006648.pl1hero6move: db 00,006649.pl1hero6mana: dw 00,006650.pl1hero6manarec:db 0 6651.pl1hero6status: db 255 66536654pl3hero1y: db 806655pl3hero1x: db 406656pl3hero1xp: dw 00006657pl3hero1move: db 20,206658pl3hero1mana: dw 20,206659pl3hero1manarec:db 2 6660pl3hero1status: db 255 6661Pl3Hero1Units: db 033 | dw 103 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6662.HeroStatAttack: db 16663.HeroStatDefense: db 16664.HeroStatKnowledge: db 1 6665.HeroStatSpellDamage: db 1 6666.HeroSkills: db 33,10,1,0,18,06667.HeroLevel: db 16668.EarthSpells: db %0000 0000 6669.FireSpells: db %0000 00006670.AirSpells: db %0000 00006671.WaterSpells: db %0000 00006672.AllSchoolsSpells: db %0000 00006673.Inventory: ds lenghtinventorytable,0456674.HeroSpecificInfo: dw HeroAddressesGolvellius6675.HeroDYDX: dw $ffff 6677pl3hero2y: ds lenghtherotable,2556678pl3hero3y: ds lenghtherotable,2556679pl3hero4y: ds lenghtherotable,2556680pl3hero5y: ds lenghtherotable,2556681pl3hero6y: ds lenghtherotable,2556682pl3hero7y: ds lenghtherotable,2556683pl3hero8y: ds lenghtherotable,2556685pl3hero9y: db 00 6686.pl1hero6x: db 00 6687.pl1hero6xp: dw 00006688.pl1hero6move: db 00,006689.pl1hero6mana: dw 00,006690.pl1hero6manarec:db 0 6691.pl1hero6status: db 255 66936694pl4hero1y: db 1006695pl4hero1x: db 1006696pl4hero1xp: dw 00006697pl4hero1move: db 10,206698pl4hero1mana: dw 10,206699pl4hero1manarec:db 2 6700pl4hero1status: db 255 6701Pl4Hero1Units: db 053 | dw 001 | db 065 | dw 001 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 6702.HeroStatAttack: db 16703.HeroStatDefense: db 16704.HeroStatKnowledge: db 1 6705.HeroStatSpellDamage: db 1 6706.HeroSkills: db 33,10,1,0,0,06707.HeroLevel: db 16708.EarthSpells: db %0000 0000 6709.FireSpells: db %0000 00006710.AirSpells: db %0000 00006711.WaterSpells: db %0000 00006712.AllSchoolsSpells: db %0000 00006713.Inventory: ds lenghtinventorytable,0456714.HeroSpecificInfo: dw HeroAddressesDrasle16715.HeroDYDX: dw $ffff 6717pl4hero2y: ds lenghtherotable,2556718pl4hero3y: ds lenghtherotable,2556719pl4hero4y: ds lenghtherotable,2556720pl4hero5y: ds lenghtherotable,2556721pl4hero6y: ds lenghtherotable,2556722pl4hero7y: ds lenghtherotable,2556723pl4hero8y: ds lenghtherotable,2556725pl4hero9y: db 00 6726.pl1hero6x: db 00 6727.pl1hero6xp: dw 00006728.pl1hero6move: db 00,006729.pl1hero6mana: dw 00,006730.pl1hero6manarec:db 0 6731.pl1hero6status: db 255 67336735CastleY: equ 06736CastleX: equ CastleY+16737CastlePlayer: equ CastleX+16738CastleLevel: equ CastlePlayer+16739CastleTavern: equ CastleLevel+16740CastleMarket: equ CastleTavern+16741CastleMageGuildLevel: equ CastleMarket+16742CastleBarracksLevel: equ CastleMageGuildLevel+16743CastleSawmillLevel: equ CastleBarracksLevel+16744CastleMineLevel: equ CastleSawmillLevel+16745AlreadyBuiltThisTurn?: equ CastleMineLevel+16746CastleName: equ AlreadyBuiltThisTurn?+16747CastleLevel1Units: equ CastleName+136748CastleLevel2Units: equ CastleLevel1Units+16749CastleLevel3Units: equ CastleLevel2Units+16750CastleLevel4Units: equ CastleLevel3Units+16751CastleLevel5Units: equ CastleLevel4Units+16752CastleLevel6Units: equ CastleLevel5Units+16753CastleLevel1UnitsAvail: equ CastleLevel6Units+16754CastleLevel2UnitsAvail: equ CastleLevel1UnitsAvail+26755CastleLevel3UnitsAvail: equ CastleLevel2UnitsAvail+26756CastleLevel4UnitsAvail: equ CastleLevel3UnitsAvail+26757CastleLevel5UnitsAvail: equ CastleLevel4UnitsAvail+26758CastleLevel6UnitsAvail: equ CastleLevel5UnitsAvail+26760AmountOfCastles: equ 46761LenghtCastleTable: equ Castle2-Castle16762 6764Castle1: db 255, 255, 255, 6, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth6765Castle2: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, usasUnitLevel1Number, usasUnitLevel2Number, usasUnitLevel3Number, usasUnitLevel4Number, usasUnitLevel5Number, usasUnitLevel6Number | dw usasUnitLevel1Growth, usasUnitLevel2Growth, usasUnitLevel3Growth, usasUnitLevel4Growth, usasUnitLevel5Growth, usasUnitLevel6Growth6766Castle3: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, sdsnatcherUnitLevel1Number, sdsnatcherUnitLevel2Number, sdsnatcherUnitLevel3Number, sdsnatcherUnitLevel4Number, sdsnatcherUnitLevel5Number, sdsnatcherUnitLevel6Number | dw sdsnatcherUnitLevel1Growth, sdsnatcherUnitLevel2Growth, sdsnatcherUnitLevel3Growth, sdsnatcherUnitLevel4Growth, sdsnatcherUnitLevel5Growth, sdsnatcherUnitLevel6Growth6767Castle4: db 255, 255, 255, 1, 1, 1, 1, 6, 0, 0, 0, "Outer Heave1",255, psychoworldUnitLevel1Number, psychoworldUnitLevel2Number, psychoworldUnitLevel3Number, psychoworldUnitLevel4Number, psychoworldUnitLevel5Number, psychoworldUnitLevel6Number | dw psychoworldUnitLevel1Growth, psychoworldUnitLevel2Growth, psychoworldUnitLevel3Growth, psychoworldUnitLevel4Growth, psychoworldUnitLevel5Growth, psychoworldUnitLevel6Growth6768Castle5: db 255, 255, 25567696770WhichCastleIsPointerPointingAt?: ds 26771TempVariableCastleY: ds 16772TempVariableCastleX: ds 16774TavernHeroesTable:6775TavernHero1: equ 0 | TavernHero2: equ 1 | TavernHero3: equ 26776TavernHeroTableLenght: equ TavernHeroesPlayer2-TavernHeroesPlayer1-16777db 255 | TavernHeroesPlayer1: db 076,000,000,000,000,000,000,000,000,0006778db 255 | TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0006779db 255 | TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0006780db 255 | TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0006782AmountOfResourcesOffered: ds 26783AmountOfResourcesRequired: ds 26784CheckRequirementsWhichBuilding?: ds 26785ResourcesPlayer1:6786.Gold: dw 20009 6787.Wood: dw 20 6788.Ore: dw 20 6789.Gems: dw 10 6790.Rubies: dw 10 6791ResourcesPlayer2:6792.Gold: dw 20000 6793.Wood: dw 20 6794.Ore: dw 20 6795.Gems: dw 10 6796.Rubies: dw 10 6797ResourcesPlayer3:6798.Gold: dw 50006799.Wood: dw 3006800.Ore: dw 1006801.Gems: dw 606802.Rubies: dw 306803ResourcesPlayer4:6804.Gold: dw 50006805.Wood: dw 3006806.Ore: dw 1006807.Gems: dw 606808.Rubies: dw 306810 6811Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 16812Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 16813Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 06814Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 06816StartingTownLevel1Unit: ds 16817StartingTownLevel2Unit: ds 16818StartingTownLevel3Unit: ds 16819StartingTownLevel4Unit: ds 16820StartingTownLevel5Unit: ds 16821StartingTownLevel6Unit: ds 16823player1StartingTown: db 255 6824player2StartingTown: db 255 6825player3StartingTown: db 255 6826player4StartingTown: db 255 6828amountofplayers: db 36829player1human?: db 1 6830player2human?: db 16831player3human?: db 16832player4human?: db 26833whichplayernowplaying?: db 16835movementpathpointer: ds 1 6836movehero?: ds 16837movementspeed: ds 16839putmovementstars?: db 06840movementpath: ds 48*2 6841 db 128,1286842movementpathReverse: ds 48*2 6843ystar: ds 16844xstar: ds 16846CampaignMode?: ds 16847ScenarioSelected: ds 16849currentherowindowclicked: db 16850plxcurrentheroAddress: dw pl1hero1y6852WorldPointer: dw GentleAutumnMap0468536859Date: dw 0 6860DaysToCompleteCampaign: ds 16861CampaignText: ds CampaignTextLenght6862CampaignFinished?: db 0686468666873EndSaveGameData:6874SaveGameDataLenght: equ EndSaveGameData-StartSaveGameData6875MSXHeroes.asm 427endengine:428dephase429enlength: Equ $-engine431434 ds $c000-$,$ff 436437 ds $4000439440 ds $4000442445Loaderblock: equ $04446phase $4000447 loader.asm116243547LenghtMapData: equ GentleAutumnMap01-GentleMap0348GentleMaps:50GentleMap03: db GentleMap03MapBlock | dw GentleMap03Map | db GentleMap03ObjectLayerMapBlock | dw GentleMap03ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (100/2) - 128 | db "2",255,"S",255,"Pochi is Lost         ",255,"Icy gusts battered the",254,"Worzen residence.     ",254,"Pochi, their loyal    ",254,"dragon-dog, went      ",254,"missing. Royas, the   ",254,"youngest, stood quiet,",254,"his brow furrowed as  ",254,"he stretched out      ",254,"telepathically.       ",254,"Pochi's message was   ",254,"faint, echoing from an",254,"unfamiliar, oppressive",254,"place - the ominous   ",254,"castle in the north.  ",254,"'Pochi needs us',     ",254,"Royas finally declared",254,"with a firm voice.    ",254, 254,"Will the Worzen family",254,"rescue their beloved  ",254,"companion?            ",25551GentleAutumnMap01: db GentleAutumnMap01MapBlock | dw GentleAutumnMap01Map | db GentleAutumnMap01ObjectLayerMapBlock | dw GentleAutumnMap01ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (000/2) - 128 | db "3",255,"M",255,"Crossroads of Courage ",255,"An urgent plea pierces",254,"the Worzen home.      ",254,"Two fallen fortresses ",254,"cry for aid:          ",254,"Castlevania, overrun  ",254,"by ghouls and skeletal",254,"horrors, and Castle   ",254,"Junker HQ, swarming   ",254,"with the infamous     ",254,"Snatchers.            ",254,"The Worzen family,    ",254,"known for their       ",254,"unwavering courage and",254,"diverse skills, stands",254,"at the precipice of a ",254,"perilous choice.      ",254, 254,"Can you forge a unique",254,"strategy to reclaim   ",254,"both fortresses?      ",254,"                      ",255 52GentleDesertMap03: db GentleDesertMap03MapBlock | dw GentleDesertMap03Map | db GentleDesertMap03ObjectLayerMapBlock | dw GentleDesertMap03ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (100/2) - 128 | db "2",255,"M",255,"Whispers in the Sand  ",255,"Scorching sand lashed ",254,"Wit's face as he and  ",254,"Cles, his companion,  ",254,"stalked towards the   ",254,"mirage shimmering in  ",254,"the distance.         ",254,"Rumors echoed: Trevor ",254,"Belmont, the hero,    ",254,"lost to darkness.     ",254, 254,"Their goal: reach the ",254,"castle, infiltrate its",254,"defenses, and somehow ",254,"confront Trevor.      ",254,"Not to subdue, but to ",254,"help the once renowned",254,"vampire hunter, now   ",254,"consumed by darkness. ",254,"                      ",254,"                      ",254,"                      ",25553GentleWinterMap05: db GentleWinterMap05MapBlock | dw GentleWinterMap05Map | db GentleWinterMap05ObjectLayerMapBlock | dw GentleWinterMap05ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (200/2) - 128 | db "4",255,"S",255,"An Arctic Alliance    ",255,"Frigid plains erupt in",254,"war. Goemon and       ",254,"Ebisumaru, blades     ",254,"drawn, stand with the ",254,"Belmonts against an   ",254,"unholy alliance:      ",254,"Junker HQ have joined ",254,"forces with the       ",254,"Worzen's arcane might.",254, 254,"You, wielding Goemon's",254,"agility, Ebisumaru's  ",254,"flames, and the       ",254,"Belmonts' whips, must ",254,"overcome this dark    ",254,"pact in a desperate   ",254,"fight for supremacy.  ",254,"Will your alliance    ",254,"triumph, or will the  ",254,"frozen lands succumb  ",254,"to a new power?       ",25554GentleMap04: db GentleMap04MapBlock | dw GentleMap04Map | db GentleMap04ObjectLayerMapBlock | dw GentleMap04ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (150/2) - 128 | db "4",255,"M",255,"Felghana's Champion   ",255,"In the rugged terrain ",254,"of Felghana, Adol sets",254,"out on a daring quest.",254,"With sword in hand, he",254,"faces three formidable",254,"foes, each guarding a ",254,"mighty fortress. The  ",254,"fate of the land rests",254,"on his shoulders as he",254,"storms through enemy  ",254,"lines.                ",254,"                      ",254,"Adol's determination  ",254,"and courage shine as  ",254,"he presses forward,   ",254,"conquering one castle ",254,"after another,        ",254,"bringing peace to the ",254,"war-torn realm.       ",254,"                      ",254, 25555GentleCaveMap01: db GentleCaveMap01MapBlock | dw GentleCaveMap01Map | db GentleCaveMap01ObjectLayerMapBlock | dw GentleCaveMap01ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (000/2) - 128 | db "2",255,"M",255,"Mildew and Moonlight  ",255,"In the depths of the  ",254,"earth, Lucia, a       ",254,"formidable sorcerer,  ",254,"embarks on a quest to ",254,"uncover ancient       ",254,"secrets.              ",254,"Descending into       ",254,"cavernous depths she  ",254,"seeks the lost castle ",254,"guarded by the        ",254,"legendary Adol.       ",254, 254,"Armed with powerful   ",254,"magic, she navigates  ",254,"treacherous passages, ",254,"overcoming fierce     ",254,"guardians to reach her",254,"elusive goal.         ",254,"                      ",254,"                      ",254,"                      ",25556GentleJungleMap05: db GentleJungleMap05MapBlock | dw GentleJungleMap05Map | db GentleJungleMap05ObjectLayerMapBlock | dw GentleJungleMap05ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (200/2) - 128 | db "3",255,"M",255,"A Jungle Expedition   ",255,"In the dense, murky   ",254,"jungle, Dr. Hank      ",254,"Mitchell ventures     ",254,"forth, navigating     ",254,"treacherous swamps and",254,"overgrown paths.      ",254,"His mission: to reach ",254,"the formidable castle ",254,"guarded by the        ",254,"sorceress Lucia.      ",254,"                      ",254,"Meanwhile, Lucia      ",254,"senses his approach   ",254,"and prepares her      ",254,"defenses, weaving     ",254,"spells to thwart his  ",254,"advance.              ",254, 254,"                      ",254,"                      ",254,"                      ",25557GentleAutumnMap02: db GentleAutumnMap02MapBlock | dw GentleAutumnMap02Map | db GentleAutumnMap02ObjectLayerMapBlock | dw GentleAutumnMap02ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (050/2) - 128 | db "2",255,"M",255,"The Valley of Doom    ",255,"In the heart of the   ",254,"Valley of Doom,       ",254,"Kelesis embarks on a  ",254,"perilous quest. With  ",254,"just two months to    ",254,"reach Dr. Hank        ",254,"Mitchell's castle, the",254,"stakes are high.      ",254, 254,"A powerful magical    ",254,"artifact, hidden      ",254,"within the castle's   ",254,"depths, is due to be  ",254,"activated by the next ",254,"full moon. This would ",254,"have catastrophic     ",254,"consequences, plunging",254,"the entire kingdom    ",254,"into darkness and     ",254,"chaos.                ",254,"                      ",25558GentleJungleMap02: db GentleJungleMap02MapBlock | dw GentleJungleMap02Map | db GentleJungleMap02ObjectLayerMapBlock | dw GentleJungleMap02ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (050/2) - 128 | db "2",255,"M",255,"A Jungle Retreat      ",255,"Bill Rizer ventures   ",254,"through the dense     ",254,"jungle, seeking an    ",254,"escape to Drasle's    ",254,"Den.                  ",254,"He stumbles upon a    ",254,"hidden cave, hopeful  ",254,"for safe passage.     ",254,"Inside, he encounters ",254,"Pochi, the family     ",254,"dragon-dog, whose     ",254,"warm welcome is       ",254,"uncertain.            ",254,"With cautious steps,  ",254,"Bill approaches,      ",254,"hoping for friendship ",254,"amidst the uncertainty",254,"of the jungle's       ",254,"depths.               ",254, 254,"                      ",25559GentleWinterMap03: db GentleWinterMap03MapBlock | dw GentleWinterMap03Map | db GentleWinterMap03ObjectLayerMapBlock | dw GentleWinterMap03ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (100/2) - 128 | db "4",255,"S",255,"Rally Against Rizer   ",255,"Amidst the towering   ",254,"walls of an armed     ",254,"fortress, Bill Rizer, ",254,"wielding his army,    ",254,"prepares for battle.  ",254,"                      ",254,"You assemble a team   ",254,"of MSX legends to     ",254,"counter his forces.   ",254,"Together you          ",254,"strategize to breach  ",254,"the fortress and      ",254,"confront Bill Rizer.  ",254, 254,"Choose your heroes    ",254,"wisely and prepare for",254,"the ultimate showdown.",254,"Victory or defeat     ",254,"awaits within the     ",254,"fortress's walls.     ",254,"                      ",25561GentleAutumnMap03: db GentleAutumnMap03MapBlock | dw GentleAutumnMap03Map | db GentleAutumnMap03ObjectLayerMapBlock | dw GentleAutumnMap03ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (100/2) - 128 | db "3",255,"L",255,"Into the Fray         ",255,"Fray, a spirited young",254,"sorceress, sets out   ",254,"from her humble home  ",254,"in search of          ",254,"adventure.            ",254, 254,"Her quest?            ",254,"To conquer the two    ",254,"formidable castles    ",254,"that loom over her    ",254,"realm like ancient    ",254,"guardians.            ",254,"                      ",254,"As Fray's quest       ",254,"unfolds, she embraces ",254,"the unknown with      ",254,"courage and           ",254,"determination, ready  ",254,"to conquer whatever   ",254,"obstacles stand in her",254,"path.                 ",25562GentleJungleMap04: db GentleJungleMap04MapBlock | dw GentleJungleMap04Map | db GentleJungleMap04ObjectLayerMapBlock | dw GentleJungleMap04ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (150/2) - 128 | db "4",255,"L",255,"The Soldier's Path    ",255,"Solid Snake traverses ",254,"rugged terrain and    ",254,"encounters perilous   ",254,"obstacles. Along the  ",254,"way, he marches       ",254,"toward the castle in  ",254,"the northwest, to form",254,"a powerful alliance.  ",254, 254,"As he unites with the ",254,"castle's forces, Solid",254,"Snake leads the charge",254,"against the foes in   ",254,"the southern castles, ",254,"using his tactical    ",254,"prowess and combat    ",254,"skills to secure      ",254,"victory and bring     ",254,"peace to the land.    ",254,"                      ",254,"                      ",25563GentleCaveMap05: db GentleCaveMap05MapBlock | dw GentleCaveMap05Map | db GentleCaveMap05ObjectLayerMapBlock | dw GentleCaveMap05ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (200/2) - 128 | db "2",255,"M",255,"Where East Meets West ",255,"A formidable sorcerer ",254,"named Dino reigns with",254,"dark power.           ",254,"His tyranny threatens ",254,"the land.             ",254,"                      ",254,"Only by launching a   ",254,"coordinated assault   ",254,"from both the west and",254,"east can he be        ",254,"defeated.             ",254, 254,"Two heroes arise.     ",254,"                      ",254,"Get ready to confront ",254,"Dino's might.         ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25564GentleWinterMap04: db GentleWinterMap04MapBlock | dw GentleWinterMap04Map | db GentleWinterMap04ObjectLayerMapBlock | dw GentleWinterMap04ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (150/2) - 128 | db "4",255,"M",255,"Three Reigns Fallen   ",255,"In a realm not yet    ",254,"touched by the sun's  ",254,"descent, Ashguine, the",254,"formidable warrior,   ",254,"embarks on a conquest ",254,"that will echo through",254,"history. With each    ",254,"step, he lays claim to",254,"three kingdoms, his   ",254,"blade a beacon of     ",254,"relentless            ",254,"determination.        ",254, 254,"As the day unfolds,   ",254,"the kingdoms tremble, ",254,"unaware of the force  ",254,"that approaches,      ",254,"destined to reshape   ",254,"their destiny with the",254,"singular might of one ",254,"determined soul.      ",25565GentleDesertMap01: db GentleDesertMap01MapBlock | dw GentleDesertMap01Map | db GentleDesertMap01ObjectLayerMapBlock | dw GentleDesertMap01ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (000/2) - 128 | db "4",255,"L",255,"Prince Logan's Odyssey",255,"In the realm of       ",254,"Isrenhasa, Prince     ",254,"Logan embarks on a    ",254,"perilous quest to save",254,"his kingdom from      ",254,"darkness.             ",254,"He sets forth to free ",254,"two kingdoms ensnared ",254,"by sinister forces.   ",254,"Prince Logan must     ",254,"unlock the secrets of ",254,"ancient magic to      ",254,"restore peace to his  ",254,"world.                ",254,"With each step, he    ",254,"draws closer to       ",254,"fulfilling his destiny",254,"and vanquishing the   ",254,"shadows that threaten ",254,"to consume Isrenhasa. ",254, 25566GentleMap05: db GentleMap05MapBlock | dw GentleMap05Map | db GentleMap05ObjectLayerMapBlock | dw GentleMap05ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (200/2) - 128 | db "4",255,"L",255,"Chronicles of Herzog  ",255,"In a strategic        ",254,"alliance, Mercies and ",254,"Ruth unite to broaden ",254,"their dominion.       ",254,"Together, they aim to ",254,"seize three pivotal   ",254,"fortresses.           ",254,"With synchronized     ",254,"tactics and unyielding",254,"determination, they   ",254,"march towards victory.",254, 254,"As allies turned      ",254,"champions, they forge ",254,"an indomitable force, ",254,"unstoppable in their  ",254,"pursuit of territorial",254,"supremacy.            ",254,"                      ",254,"                      ",254,"                      ",25567GentleAutumnMap05: db GentleAutumnMap05MapBlock | dw GentleAutumnMap05Map | db GentleAutumnMap05ObjectLayerMapBlock | dw GentleAutumnMap05ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (200/2) - 128 | db "4",255,"M",255,"Reign of the Druid    ",255,"In a land of forgotten",254,"kingdoms, the Young   ",254,"Noble, lost and alone,",254,"stumbles upon four    ",254,"abandoned castles.    ",254, 254,"Amidst the ruins, he  ",254,"learns of an evil     ",254,"druid's reign of      ",254,"darkness.             ",254,"                      ",254,"With courage as his   ",254,"only weapon, he       ",254,"confronts the         ",254,"malevolent foe,       ",254,"determined to restore ",254,"light to the forsaken ",254,"realm.                ",254,"                      ",254,"                      ",254,"                      ",25568GentleWinterMap02: db GentleWinterMap02MapBlock | dw GentleWinterMap02Map | db GentleWinterMap02ObjectLayerMapBlock | dw GentleWinterMap02ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (050/2) - 128 | db "2",255,"M",255,"Pocky's Castle Crusade",255,"In the mystical world ",254,"of Pocky and Rocky,   ",254,"our brave hero, Pocky,",254,"embarks on a daring   ",254,"quest to conquer a    ",254,"towering castle       ",254,"shrouded in darkness. ",254,"                      ",254,"Armed with his trusty ",254,"broomstick and        ",254,"unwavering            ",254,"determination, Pocky  ",254,"faces treacherous     ",254,"traps and fierce foes.",254,"                      ",254,"Will Pocky emerge as a",254,"true hero, revered by ",254,"all who dwell in the  ",254,"realm?                ",254,"                      ",254, 25569GentleMap01: db GentleMap01MapBlock | dw GentleMap01Map | db GentleMap01ObjectLayerMapBlock | dw GentleMap01ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (000/2) - 128 | db "4",255,"L",255,"Lololand              ",255,"In the whimsical land ",254,"of Eggerland, our hero",254,"Lolo embarks on a     ",254,"grand adventure.      ",254, 254,"With a gleam in his   ",254,"eye and a puzzle-     ",254,"solving mind, he sets ",254,"out to explore the    ",254,"vast kingdom.         ",254,"Along the way, he     ",254,"encounters mischievous",254,"creatures and tricky  ",254,"traps, but Lolo's     ",254,"determination never   ",254,"wavers. With a mix of ",254,"wit and charm, he     ",254,"outsmarts every       ",254,"challenge, leaving a  ",254,"trail of laughter in  ",254,"his wake.             ",25570GentleCaveMap03: db GentleCaveMap03MapBlock | dw GentleCaveMap03Map | db GentleCaveMap03ObjectLayerMapBlock | dw GentleCaveMap03ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (100/2) - 128 | db "2",255,"M",255,"Comical Cavern Clash  ",255,"In the depths of a    ",254,"mysterious cave,      ",254,"Pippols and Lolo      ",254,"engage in a friendly  ",254,"competition.          ",254,"Armed with creativity,",254,"they gather creatures ",254,"far and wide to build ",254,"their armies.         ",254, 254,"Pippols recruits      ",254,"mighty dwarves and    ",254,"mischievous goblins,  ",254,"while Lolo enlists    ",254,"brave adventurers and ",254,"cunning monsters.     ",254,"                      ",254,"As their armies grow, ",254,"so does the excitement",254,"of the impending      ",254,"showdown.             ",25572GentleJungleMap01: db GentleJungleMap01MapBlock | dw GentleJungleMap01Map | db GentleJungleMap01ObjectLayerMapBlock | dw GentleJungleMap01ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (000/2) - 128 | db "4",255,"L",255,"Randar's Last Stand   ",255,"You, the valiant      ",254,"player, command a trio",254,"of mighty fortresses, ",254,"brimming with heroes  ",254,"itching for adventure.",254,"                      ",254,"With just four months ",254,"on the clock, the race",254,"is on to amass the    ",254,"most eccentric army   ",254,"imaginable and storm  ",254,"Randar's unsuspecting ",254,"stronghold.           ",254, 254,"Get ready to conquer  ",254,"with a grin in this   ",254,"uproarious clash of   ",254,"castles.              ",254,"                      ",254,"                      ",254,"                      ",25573GentleDesertMap02: db GentleDesertMap02MapBlock | dw GentleDesertMap02Map | db GentleDesertMap02ObjectLayerMapBlock | dw GentleDesertMap02ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (050/2) - 128 | db "4",255,"L",255,"A Desert Blood Moon   ",255,"The desert sun beat   ",254,"down on Luice and     ",254,"Dick, two adventurers ",254,"as mismatched as      ",254,"flip-flops on a camel.",254,"                      ",254,"Their mission: retake ",254,"the Three Sunken      ",254,"Spires, glorious      ",254,"sandcastles stolen by ",254,"the nefarious Belmont ",254,"family.               ",254,"                      ",254,"Through trials and    ",254,"triumphs, Luice and   ",254,"Dick prove that even  ",254,"in the harshest of    ",254,"landscapes,           ",254,"friendship and bravery",254,"prevail.              ",254, 25574GentleWinterMap01: db GentleWinterMap01MapBlock | dw GentleWinterMap01Map | db GentleWinterMap01ObjectLayerMapBlock | dw GentleWinterMap01ObjectLayerMap | db TilesGentleWinterBlock | incbin"..\grapx\tilesheets\PaletteGentleWinter.pl",0,4 | db BattleFieldWinterBlock | db GentleWinterMiniMapsBlock | dw $4000 + (207*128) + (000/2) - 128 | db "2",255,"M",255,"A Beloved Journey     ",255,"Popolon and Aphrodite ",254,"embark on a frosty    ",254,"adventure, seeking the",254,"coveted Emerald Gloves",254,"hidden in the icy     ",254,"realm.                ",254,"Through snowstorms and",254,"perilous cliffs, they ",254,"press on, facing      ",254,"challenges and        ",254,"adversaries.          ",254, 254,"But the final showdown",254,"awaits as they        ",254,"approach the Gloves.  ",254,"                      ",254,"Ruika, the mighty     ",254,"ninja warrior stands  ",254,"in their way, ready to",254,"unleash her full      ",254,"might.                ",25575GentleAutumnMap04: db GentleAutumnMap04MapBlock | dw GentleAutumnMap04Map | db GentleAutumnMap04ObjectLayerMapBlock | dw GentleAutumnMap04ObjectLayerMap | db TilesGentleAutumnBlock | incbin"..\grapx\tilesheets\PaletteGentleAutumn.pl",0,4 | db BattleFieldAutumnBlock | db GentleAutumnMiniMapsBlock | dw $4000 + (000*128) + (150/2) - 128 | db "2",255,"S",255,"Amber Skies, Rogue AI ",255,"In the golden hues of ",254,"autumn, amidst the    ",254,"rustling leaves of    ",254,"Illusion City, Tien   ",254,"Ren, Ho Mei, and Mei  ",254,"Hong embark on a      ",254,"daring mission.       ",254, 254,"Armed with their      ",254,"trusty snatchers, they",254,"confront a rogue AI   ",254,"snatcher threatening  ",254,"the city's peace.     ",254,"                      ",254,"Can they restore order",254,"to Illusion City and  ",254,"protect it from the   ",254,"chaos within, amidst  ",254,"the enchanting beauty ",254,"of the autumn         ",254,"landscape?            ",2557677GentleDesertMap04: db GentleDesertMap04MapBlock | dw GentleDesertMap04Map | db GentleDesertMap04ObjectLayerMapBlock | dw GentleDesertMap04ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (150/2) - 128 | db "2",255,"S",255,"Dragons' Deliverance  ",255,"In a race against the ",254,"clock, you embark on a",254,"daring mission to stop",254,"Dr. Hank Mitchell's   ",254,"sinister plans.       ",254, 254,"With just two months  ",254,"on the clock, the fate",254,"of mythical dragons   ",254,"hangs in the balance  ",254,"within the confines of",254,"his menacing castle.  ",254,"                      ",254,"You set out to        ",254,"confront the nefarious",254,"Dr. Mitchell and      ",254,"liberate the captive  ",254,"creatures before it's ",254,"too late.             ",254,"                      ",254,"The clock is ticking..",25578GentleCaveMap04: db GentleCaveMap04MapBlock | dw GentleCaveMap04Map | db GentleCaveMap04ObjectLayerMapBlock | dw GentleCaveMap04ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (150/2) - 128 | db "2",255,"M",255,"Hunting Dr. Mitchell  ",255,"In pursuit of Dr. Hank",254,"Mitchell, you delve   ",254,"into the labyrinthine ",254,"cave system.          ",254,"Confronting him in his",254,"fortress, you discover",254,"his upgraded dragon   ",254,"army.                 ",254,"                      ",254,"You prepare to thwart ",254,"his sinister plans    ",254,"once more.            ",254,"                      ",254,"Time is of the essence",254,"as you brace for the  ",254,"ultimate showdown to  ",254,"safeguard the realm   ",254,"from his tyranny.     ",254,"                      ",254,"                      ",254, 25579GentleJungleMap03: db GentleJungleMap03MapBlock | dw GentleJungleMap03Map | db GentleJungleMap03ObjectLayerMapBlock | dw GentleJungleMap03ObjectLayerMap | db TilesGentleJungleBlock | incbin"..\grapx\tilesheets\PaletteGentleJungle.pl",0,4 | db BattleFieldJungleBlock | db GentleJungleMiniMapsBlock | dw $4000 + (144*128) + (100/2) - 128 | db "3",255,"M",255,"Heart of the Jungle   ",255,"Bill Rizer, amidst the",254,"dense jungle foliage, ",254,"faces his ultimate    ",254,"challenge. With laser ",254,"precision, he battles ",254,"through swarms of     ",254,"enemies.              ",254,"                      ",254,"The air thickens with ",254,"anticipation as he    ",254,"approaches two        ",254,"fortresses, guarded by",254,"the formidable        ",254,"adversaries Big Boss  ",254,"and Grey Fox.         ",254,"                      ",254,"Victory is within     ",254,"reach as Bill's       ",254,"indomitable spirit    ",254,"drives him onward.    ",254, 25580GentleMap02: db GentleMap02MapBlock | dw GentleMap02Map | db GentleMap02ObjectLayerMapBlock | dw GentleMap02ObjectLayerMap | db TilesGentleBlock | incbin"..\grapx\tilesheets\PaletteGentle.pl",0,4 | db BattleFieldGentleBlock | db GentleMiniMapsBlock | dw $4000 + (192*128) + (050/2) - 128 | db "3",255,"M",255,"Dawn of the Ninja     ",255,"In the shadowy veil of",254,"night, Ninja Ruika    ",254,"rallies her skilled   ",254,"warriors, sworn to    ",254,"reclaim two pillaged  ",254,"towns.                ",254,"                      ",254,"With swift precision, ",254,"they traverse rugged  ",254,"terrain, their resolve",254,"unyielding.           ",254, 254,"Amidst the whispering ",254,"winds, their mission  ",254,"is clear: restore     ",254,"peace to the ravaged  ",254,"lands.                ",254,"                      ",254,"                      ",254,"                      ",254,"                      ",25581GentleDesertMap05: db GentleDesertMap05MapBlock | dw GentleDesertMap05Map | db GentleDesertMap05ObjectLayerMapBlock | dw GentleDesertMap05ObjectLayerMap | db TilesGentleDesertBlock | incbin"..\grapx\tilesheets\PaletteGentleDesert.pl",0,4 | db BattleFieldDesertBlock | db GentleDesertMiniMapsBlock | dw $4000 + (096*128) + (200/2) - 128 | db "2",255,"S",255,"Pixy's Bubble Symphony",255,"In the heart of the   ",254,"scorching desert, Pixy",254,"embarks on her daring ",254,"quest, accompanied by ",254,"the whimsical         ",254,"creatures from the    ",254,"magical realm of      ",254,"Bubble Bobble.        ",254,"                      ",254,"She sets her sights on",254,"the castle to the     ",254,"south, where the      ",254,"nefarious Doctor      ",254,"Pettrovich awaits.    ",254, 254,"Can she conquer the   ",254,"castle and restore    ",254,"peace to the desert   ",254,"realm?                ",254,"                      ",254,"                      ",25582GentleCaveMap02: db GentleCaveMap02MapBlock | dw GentleCaveMap02Map | db GentleCaveMap02ObjectLayerMapBlock | dw GentleCaveMap02ObjectLayerMap | db TilesGentleCaveBlock | incbin"..\grapx\tilesheets\PaletteGentleCave.pl",0,4 | db BattleFieldCaveBlock | db GentleCaveMiniMapsBlock | dw $4000 + (048*128) + (050/2) - 128 | db "4",255,"L",255,"A Worzen Family Epic  ",255,"In the depths of the  ",254,"cave dwellings, the   ",254,"Worzen family, under  ",254,"your leadership, faces",254,"relentless adversaries",254,"to reclaim their      ",254,"throne.               ",254,"                      ",254,"With every strike and ",254,"spell, they fight on, ",254,"determined to triumph ",254,"in three palaces and  ",254,"restore their rightful",254,"rule.                 ",254,"                      ",254,"Victory hangs in the  ",254,"balance as they press ",254,"forward, unwavering in",254,"their resolve.        ",254,"                      ",254, 25584899398 99MiniMapBlock: equ 12 100MiniMapAddress: equ 13101 102103XMiniMap: equ 203104YMiniMap: equ 005105LoadMiniMap:106 ld ix,(WorldPointer)107 ld l,(ix+MiniMapAddress) 108 ld h,(ix+MiniMapAddress+1) 109 ld de,$0000 + (YMiniMap*128) + (XMiniMap/2) - 128110 ld bc,$0000 + (048*256) + (050/2)111 ld a,(ix+MiniMapBlock) 112 jp CopyRamToVramCorrectedCastleOverview 114XMiniMapScenarioSelectScreen: equ 174115YMiniMapScenarioSelectScreen: equ 033116PutMiniMapScenarioSelectScreen:117 ld ix,(WorldPointer)118 ld l,(ix+MiniMapAddress) 119 ld h,(ix+MiniMapAddress+1) 120 ld de,$0000 + (YMiniMapScenarioSelectScreen*128) + (XMiniMapScenarioSelectScreen/2) - 128121 ld bc,$0000 + (048*256) + (050/2)122 ld a,(ix+MiniMapBlock) 123 call CopyRamToVramCorrectedCastleOverview 124 halt125 ld ix,(WorldPointer)126 call SetMapPalette127 jp SwapAndSetPage 129ShuffleCastleMageGuildSpells: 130 ld a,r131 and 3132 ld hl,.Castle1Spells133 jr z,.SpellsFound134 dec a135 ld hl,.Castle2Spells136 jr z,.SpellsFound137 dec a138 ld hl,.Castle3Spells139 jr z,.SpellsFound140141 ld hl,.Castle4Spells142144 .SpellsFound:145 ld de,Castle1Spells146 ld bc,4*4 147 ldir148 ret150 151.Castle1Spells: db % 1 1 0 0, % 0 1 0 1, % 1 0 1 0, % 0 0 1 1152.Castle2Spells: db % 0 1 1 0, % 1 0 1 0, % 0 1 0 1, % 1 0 0 1153.Castle3Spells: db % 0 0 1 1, % 0 1 0 1, % 1 0 1 0, % 1 1 0 0154.Castle4Spells: db % 1 0 0 1, % 1 0 1 0, % 0 1 0 1, % 0 1 1 0155.Castle5Spells: db % 0 1 0 1, % 1 0 1 0, % 0 0 1 1, % 1 1 0 0156.Castle6Spells: db % 1 0 1 0, % 0 1 0 1, % 1 0 0 1, % 0 1 1 0157.Castle7Spells: db % 0 1 0 1, % 1 0 1 0, % 1 1 0 0, % 0 0 1 1158.Castle8Spells: db % 1 0 1 0, % 0 1 0 1, % 0 1 1 0, % 1 0 0 1160SetCastlesInMiniMap:161 ld ix,Castle1162 call .SetCastle163 ld ix,Castle2164 call .SetCastle165 ld ix,Castle3166 call .SetCastle167 ld ix,Castle4168 call .SetCastle169 ret171 .SetCastle:172174 ld a,(ix+CastleX)175 cp 255176 ret z177 ld h,0178 ld l,a179 ld de,3 180 call MultiplyHlWithDE 181 push hl182 pop bc183 ld de,8 184 call DivideBCbyDE 185 push bc186 187 ld l,(ix+CastleY)188 ld h,0189 ld de,3 190 call MultiplyHlWithDE 191 push hl192 pop bc193 ld de,8 194 call DivideBCbyDE 196 pop de197 ld a,c198 add YMiniMap-2199 ld d,a201 ld a,e202 add XMiniMap-1203 ld e,a204 205 ld hl,$4000 + (071*128) + (212/2) - 128206207 ld bc,$0000 + (004*256) + (004/2)208 ld a,HudNewBlock 209 exx210 ex af,af'211 ld hl,CopyTransparantImageEXX212 jp EnterSpecificRoutineInCastleOverviewCode214ConvertMonstersObjectLayer:215 218 220 221 ld hl,$8000-1223 .loopAndXorA:224 xor a225 .loop:226 inc hl227 bit 6,h 228 ret nz230 or (hl)231 jp z,.loop232 233 .Check:234 cp 7235 jr nc,.loopAndXorA237 dec a238 jp z,.Level1Monster239 dec a240 jr z,.Level2Monster241 dec a242 jr z,.Level3Monster243 dec a244 jr z,.Level4Monster245 dec a246 jr z,.Level5Monster248 .Level6Monster:249 ld de,(MonsterLevel6Pointer)250 ld a,(de)251 cp 255252 jr z,.Level5Monster253 call .ConvertLevelToMonster254 jr nz,.SetMonsterLevel6Pointer255 ld de,ListOfUnlockedMonstersLevel6256 .SetMonsterLevel6Pointer:257 ld (MonsterLevel6Pointer),de258 jp .loopAndXorA260 .Level5Monster:261 ld de,(MonsterLevel5Pointer)262 ld a,(de)263 cp 255264 jr z,.Level4Monster265 call .ConvertLevelToMonster266 jr nz,.SetMonsterLevel5Pointer267 ld de,ListOfUnlockedMonstersLevel5268 .SetMonsterLevel5Pointer:269 ld (MonsterLevel5Pointer),de270 jp .loopAndXorA272 .Level4Monster:273 ld de,(MonsterLevel4Pointer)274 ld a,(de)275 cp 255276 jr z,.Level3Monster277 call .ConvertLevelToMonster278 jr nz,.SetMonsterLevel4Pointer279 ld de,ListOfUnlockedMonstersLevel4280 .SetMonsterLevel4Pointer:281 ld (MonsterLevel4Pointer),de282 jp .loopAndXorA284 .Level3Monster:285 ld de,(MonsterLevel3Pointer)286 call .ConvertLevelToMonster287 jr nz,.SetMonsterLevel3Pointer288 ld de,ListOfUnlockedMonstersLevel3289 .SetMonsterLevel3Pointer:290 ld (MonsterLevel3Pointer),de291 jp .loopAndXorA293 .Level2Monster:294 ld de,(MonsterLevel2Pointer)295 call .ConvertLevelToMonster296 jr nz,.SetMonsterLevel2Pointer297 ld de,ListOfUnlockedMonstersLevel2298 .SetMonsterLevel2Pointer:299 ld (MonsterLevel2Pointer),de300 jp .loopAndXorA301 302 .Level1Monster:303 ld de,(MonsterLevel1Pointer)304 call .ConvertLevelToMonster305 jr nz,.SetMonsterLevel1Pointer306 ld de,ListOfUnlockedMonstersLevel1307 .SetMonsterLevel1Pointer:308 ld (MonsterLevel1Pointer),de309 jp .loopAndXorA311 .ConvertLevelToMonster:312 ld a,(de)313 ld (hl),a314 cp 160 315 jr nc,.EndCheck1Or2TilesInSize316 ld bc,-128317 add hl,bc318 add a,64+6 319 ld (hl),a320 sbc hl,bc321 322 .EndCheck1Or2TilesInSize:323 inc de324 ld a,(de)325 or a326 ret328CastleTileNr: equ 254329Number1Tile: equ 192330FindAndSetCastles: 331 ld a,255332 ld (Castle1+CastlePlayer),a 333 ld (Castle2+CastlePlayer),a334 ld (Castle3+CastlePlayer),a335 ld (Castle4+CastlePlayer),a336 ld (Castle1+CastleY),a 337 ld (Castle2+CastleY),a338 ld (Castle3+CastleY),a339 ld (Castle4+CastleY),a340 ld (Castle1+CastleX),a 341 ld (Castle2+CastleX),a342 ld (Castle3+CastleX),a343 ld (Castle4+CastleX),a345 348 350 351 ld hl,$8000-1352 .SetCastleTileNrAndGoloop:353 ld a,CastleTileNr354 .loop:355 inc hl356 bit 6,h 357 ret nz358 cp (hl)359 jr nz,.loop361 ld a,l 362 and 127363 dec a364 ld e,a 366 push hl367 push hl368 pop bc370 inc hl 371 ld a,(hl)372 sub a,Number1Tile-1373 374 cp 1375 ld iy,player1human? 376 ld ix,Castle1377 jr z,.CastleNrFound378 cp 2379 ld iy,player2human? 380 ld ix,Castle2 381 jr z,.CastleNrFound382 cp 3383 ld iy,player3human? 384 ld ix,Castle3385 jr z,.CastleNrFound386 ld iy,player4human? 387 ld ix,Castle4388 .CastleNrFound:389 390 ld (ix+CastlePlayer),a391 ld a,(iy)392 cp 2 393 jr nz,.EndCheckPlayerOff394 ld (ix+CastlePlayer),255 395 .EndCheckPlayerOff:397 ld (ix+CastleX),e398 ld (hl),0 400 ld de,128401 call DivideBCbyDE 402 403 ld a,c 404 inc a405 ld (ix+CastleY),a 407 pop hl408 jp .SetCastleTileNrAndGoloop410PlaceHeroesInCastles: 411 ld ix,Castle1412 ld iy,pl1hero1y413 call .SetHeroInCastle415 ld ix,Castle2416 ld iy,pl2hero1y417 call .SetHeroInCastle419 ld a,(amountofplayers)420 cp 2421 ret z423 ld ix,Castle3424 ld iy,pl3hero1y425 call .SetHeroInCastle427 ld a,(amountofplayers)428 cp 3429 ret z431 ld ix,Castle4432 ld iy,pl4hero1y433 call .SetHeroInCastle434 ret436 .SetHeroInCastle:437 ld a,(ix+CastleY)438 dec a439 ld (iy+HeroY),a440 ld a,(ix+CastleX)441 add a,2442 ld (iy+HeroX),a443 ld (iy+HeroStatus),2 444 ret446447CHMOUS: 448 call .go449 LD a,(MOUSIDBuffer)450 LD (MOUSID),A451 LD a,(MSEPRTBuffer)452 LD (MSEPRT),A453 ret454 .go:456 CALL .MOUSIN457 LD A,$10 458 LD (MSEPRTBuffer),A459 CALL .CHMS.0460 JP NC,.MOUSIN461 LD A,$60 462 LD (MSEPRTBuffer),A463 CALL .CHMS.0464 JP NC,.MOUSIN465 466 XOR A 467 LD (MOUSIDBuffer),A468470 RET 471 472 473.MOUSIN: LD A,255474 LD (MOUSIDBuffer),A475 LD HL,DLY_M2 486 EI 487 RET 488 489.CHMS.0: LD B,40 490.CHMS.1: PUSH BC491 CALL .RDPADL492 LD A,H 493 CP 1 494 JP NZ,.CHMS.2495 LD A,L 496 CP 1497 JP NZ,.CHMS.2498 POP BC499 DJNZ .CHMS.1500 SCF 501 RET 502.CHMS.2: POP BC 503 AND A 504 RET 507510.RDPADL: PUSH BC511 PUSH DE512 513 LD DE,(MSEPRTBuffer)514 LD A,15 515 CALL RD_PSG516 AND %10001111 517 OR E 518 LD E,A519 520521 LD B,40 522 LD C,20 523 CALL .RPDL.2524 CALL .RPDL.0525 LD H,A526 527528 CALL .RPDL.1529 CALL .RPDL.0530 LD L,A531 532 EI 533 POP DE534 POP BC535 RET 536 537.RPDL.0: RLCA 538 RLCA 539 RLCA 540 RLCA 541 LD D,A542 CALL .RPDL.1543 OR D544 NEG 545 RET 546 547.RPDL.1: LD B,7548 LD C,6549.RPDL.2: LD A,15550 CALL WR_PSG551 LD A,(MSEPRTBuffer)552 AND $30553 XOR E554 LD E,A555.DLYCAL: CALL DLY_M2556 LD A,14557 CALL RD_PSG558 AND $0F559 RET 560MSXHeroes.asm 448endLoader:449 ds $8000-$,$ff 450dephase452455InsertMouseBlock: equ $05456phase $4000457 incbin "..\grapx\TitleScreen\InsertMouse.SC5",7,112 * 128 458 ds $8000-$,$ff459dephase461AdolSpriteBlock: equ HeroesSpritesBlock1462Goemon1SpriteBlock: equ HeroesSpritesBlock1463PixySpriteBlock: equ HeroesSpritesBlock1464Drasle1SpriteBlock: equ HeroesSpritesBlock1465LatokSpriteBlock: equ HeroesSpritesBlock1466Drasle2SpriteBlock: equ HeroesSpritesBlock1467Snake1SpriteBlock: equ HeroesSpritesBlock1468Drasle3SpriteBlock: equ HeroesSpritesBlock1470Snake2SpriteBlock: equ HeroesSpritesBlock2471Drasle4SpriteBlock: equ HeroesSpritesBlock2472AshguineSpriteBlock: equ HeroesSpritesBlock2473Undeadline1SpriteBlock: equ HeroesSpritesBlock2474PsychoWorldSpriteBlock: equ HeroesSpritesBlock2475Undeadline2SpriteBlock: equ HeroesSpritesBlock2476Goemon2SpriteBlock: equ HeroesSpritesBlock2477Undeadline3SpriteBlock: equ HeroesSpritesBlock2479FraySpriteBlock: equ HeroesSpritesBlock3480BlackColorSpriteBlock: equ HeroesSpritesBlock3481WitSpriteBlock: equ HeroesSpritesBlock3482MitchellSpriteBlock: equ HeroesSpritesBlock3483JanJackGibsonSpriteBlock: equ HeroesSpritesBlock3484GillianSeedSpriteBlock: equ HeroesSpritesBlock3485SnatcherSpriteBlock: equ HeroesSpritesBlock3486GolvelliusSpriteBlock: equ HeroesSpritesBlock3488BillRizerSpriteBlock: equ HeroesSpritesBlock4489PochiSpriteBlock: equ HeroesSpritesBlock4490GreyFoxSpriteBlock: equ HeroesSpritesBlock4491TrevorBelmontSpriteBlock: equ HeroesSpritesBlock4492BigBossSpriteBlock: equ HeroesSpritesBlock4493SimonBelmontSpriteBlock: equ HeroesSpritesBlock4494DrPettrovichSpriteBlock: equ HeroesSpritesBlock4495RichterBelmontSpriteBlock: equ HeroesSpritesBlock4497UltraBoxSpriteBlock: equ HeroesSpritesBlock5498LoganSeriosSpriteBlock: equ HeroesSpritesBlock5499HollyWhiteSpriteBlock: equ HeroesSpritesBlock5500MerciesSpriteBlock: equ HeroesSpritesBlock5501NatashaRomanenkoSpriteBlock: equ HeroesSpritesBlock5502RuthSpriteBlock: equ HeroesSpritesBlock5503GeeraSpriteBlock: equ HeroesSpritesBlock5504YoungNobleSpriteBlock: equ HeroesSpritesBlock5506DawelSpriteBlock: equ HeroesSpritesBlock6507PockySpriteBlock: equ HeroesSpritesBlock6508KelesisTheCookSpriteBlock: equ HeroesSpritesBlock6509LoloSpriteBlock: equ HeroesSpritesBlock6510PippolsSpriteBlock: equ HeroesSpritesBlock6511RandarSpriteBlock: equ HeroesSpritesBlock6512ClesSpriteBlock: equ HeroesSpritesBlock6513LuiceSpriteBlock: equ HeroesSpritesBlock6515DickSpriteBlock: equ HeroesSpritesBlock7516AphroditeSpriteBlock: equ HeroesSpritesBlock7517TienRenSpriteBlock: equ HeroesSpritesBlock7518PopolonSpriteBlock: equ HeroesSpritesBlock7519HoMeiSpriteBlock: equ HeroesSpritesBlock7520PriestessKiSpriteBlock: equ HeroesSpritesBlock7521MeiHongSpriteBlock: equ HeroesSpritesBlock7522PrinceGilgameshSpriteBlock: equ HeroesSpritesBlock7524RandomHajileSpriteBlock: equ HeroesSpritesBlock8525BensonCunninghamSpriteBlock: equ HeroesSpritesBlock8526JamieSeedSpriteBlock: equ HeroesSpritesBlock8527ArmoredSnatcherSpriteBlock: equ HeroesSpritesBlock8528DruidSpriteBlock: equ HeroesSpritesBlock8529MomotaruSpriteBlock: equ HeroesSpritesBlock8530LukaSpriteBlock: equ HeroesSpritesBlock8531HeiwaAndButakoSpriteBlock: equ HeroesSpritesBlock8533AceSpriteBlock: equ HeroesSpritesBlock9534SpaceExplorer01SpriteBlock: equ HeroesSpritesBlock9535FernSpriteBlock: equ HeroesSpritesBlock9536HornSpriteBlock: equ HeroesSpritesBlock9537PixieSpriteBlock: equ HeroesSpritesBlock9538FreyaJerbainSpriteBlock: equ HeroesSpritesBlock9539LanceBeanSpriteBlock: equ HeroesSpritesBlock9540ThiharisSpriteBlock: equ HeroesSpritesBlock9542PampasSpriteBlock: equ HeroesSpritesBlock10543SeleneSpriteBlock: equ HeroesSpritesBlock10544SkooterSpriteBlock: equ HeroesSpritesBlock10545JeddaChefSpriteBlock: equ HeroesSpritesBlock10547550HeroesSpritesBlock1: equ $06551HeroesSpritesBlock2: equ HeroesSpritesBlock1 + 1552phase $4000553 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1.SC5",7,208 * 128 554 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet1Bottom48Lines.SC5",7,48 * 128 555 ds $c000-$,$ff556dephase558561HeroesSpritesBlock3: equ HeroesSpritesBlock1 + 2562HeroesSpritesBlock4: equ HeroesSpritesBlock1 + 3563phase $4000564 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2.SC5",7,208 * 128 565 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet2Bottom48Lines.SC5",7,48 * 128 566 ds $c000-$,$ff567dephase569572HeroesSpritesBlock5: equ HeroesSpritesBlock1 + 4573HeroesSpritesBlock6: equ HeroesSpritesBlock1 + 5574phase $4000575 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3.SC5",7,208 * 128 576 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet3Bottom48Lines.SC5",7,48 * 128 577 ds $c000-$,$ff578dephase580583HeroesSpritesBlock7: equ HeroesSpritesBlock1 + 6584HeroesSpritesBlock8: equ HeroesSpritesBlock1 + 7585phase $4000586 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4.SC5",7,208 * 128 587 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet4Bottom48Lines.SC5",7,48 * 128 588 ds $c000-$,$ff589dephase591594HeroesSpritesBlock9: equ HeroesSpritesBlock1 + 8595HeroesSpritesBlock10: equ HeroesSpritesBlock1 + 9596phase $4000597 incbin "..\grapx\HeroesSprites\HeroesSpritesSheet5.SC5",7,192 * 128 598 ds $c000-$,$ff599dephase601604Enemy14x14PortraitsBlock: equ $10605phase $4000606 incbin "..\grapx\MonsterSprites\14x14Portraits.SC5",7,212 * 128 607 ds $c000-$,$ff608dephase610613Hero10x18PortraitsBlock: equ $12614phase $4000615 incbin "..\grapx\HeroesSprites\10x18Portraits.SC5",7,72 * 128 616 ds $8000-$,$ff617dephase619622phase $8000623QuickTipsBlock: equ $13624 QuickTips.asm1TextQuickTip1: db "As the kingdom's network of",2542 db "marketplaces in towns expands,",2543 db "the scales of fortune tilt",2544 db "increasingly in favor of the",2545 db "player, unveiling a more",2546 db "exquisite advantage.",2558TextQuickTip2: db "Using a keyboard ?",2549 db "Press and hold the Shift key to",25410 db "double the pointer's speed,",25411 db "and hold the Ctrl key to scroll",25412 db "directly through the map.",25514TextQuickTip3: db "Pressing the right mouse button",25415 db "or 'm' on your keyboard lets you",25416 db "close the window you're",25417 db "in or exit the castle screen.",25519TextQuickTip4:20 db "When a hero retreats from",25421 db "battle, they halt their",25422 db "contribution of experience to the",25423 db "enemy. Be assured, they shall",25424 db "soon embark on a graceful",25425 db "journey back to your tavern.",25527TextQuickTip5:28 db "Recruit a second hero early. They",25429 db "can take care of gathering",25430 db "supplies, allowing your main hero",25431 db "to explore and fight freely. Down",25432 db "the line, use a chain of heroes",25433 db "to move troops around super fast.",25535TextQuickTip6:36 db "Ensure your gold income outpaces",25437 db "expenses without leaving yourself",25438 db "defenseless early on. Swiftly",25439 db "acquire a capital. They're",25440 db "invaluable and boost troop",25441 db "production.",25543TextQuickTip7:44 db "The game favors centralization.",25445 db "Avoid building anything except",25446 db "town hall and city hall in",25447 db "secondary towns. These buildings",25448 db "are crucial for generating gold",25449 db "and nothing else.",25551TextQuickTip8:52 db "The Speed stat dictates both",25453 db "movement and turn order, making",25454 db "Earthbound a potent combat spell.",25455 db "A hero skilled in Earth Magic",25456 db "can cripple entire armies with",25457 db "a single cast.",25559TextQuickTip9:60 db "Melee units are crucial for",25461 db "engaging ranged units effectively,",25462 db "as ranged units are significantly",25463 db "weaker in close combat.",25464 db "Additionally, ranged units deal",25465 db "reduced damage from long range.",25567TextQuickTip10:68 db "Range penalty is a 50% reduction",25469 db "of damage for ranged attacks.",25470 db "It occurs when the target is",25471 db "further than 8 hexes from the",25472 db "shooter.",25574TextQuickTip11:75 db "Heroes ending their turn in a",25476 db "town with a Mage Guild will",25477 db "have their Spell Points fully",25478 db "restored by the start of their",25479 db "next turn.",25580 81TextQuickTip12:82 db "Every hero can learn level 1",25483 db "spells. Develop basic, advanced,",25484 db "and expert wisdom to gain",25485 db "access to level 2, 3, and 4",25486 db "spells.",25587 88TextQuickTip13:89 db "Although you can have up to 8",25490 db "heroes, consider carefully before",25491 db "recruiting more heroes.",25492 db "Usually, two or three suffice,",25493 db "but more may be necessary later",25494 db "on. Use your judgment wisely.",25596TextQuickTip14:97 db "You can build a town quickly by",25498 db "purchasing creature barracks for",25499 db "early combat or focus on",254100 db "upgrading to a Capitol for faster",254101 db "income and securing a stronger",254102 db "late game position.",255104TextQuickTip15:105 db "The creatures possessing the",254106 db "highest movement speed can opt",254107 db "to act first or wait until the",254108 db "end of their turn during combat.",255109 110TextQuickTip16:111 db "Strategically develop heroes.",254112 db "Warriors focus on non-magical",254113 db "skills, avoiding wisdom,",254114 db "while wizards prioritize magic.",255116TextQuickTip17:117 db "Sacrifice a pawn, win the game:",254118 db "Single units can serve as",254119 db "expendable buffers, absorbing",254120 db "hits for your main army and",254121 db "thereby shielding it from",254122 db "retaliatory strikes.",255123 124TextQuickTip18:125 db "Sacrifice a pawn, win the game:",254126 db "Single units can serve as",254127 db "expendable buffers, absorbing",254128 db "hits for your main army and",254129 db "thereby shielding it from",254130 db "retaliatory strikes.",255131 132TextQuickTip19:133 db "Access details about enemy",254134 db "stacks, items, and objects by",254135 db "right-clicking on the adventure",254136 db "map or pressing 'm' on your",254137 db "keyboard.",255139TextQuickTip20:140 db "You can check an enemy's level",254141 db "and size by right-clicking on",254142 db "them or pressing 'm'.",254143 db "The size order is:",254144 db "a few, several, many, numerous,",254145 db "a horde, and countless.",255147TextQuickTip21:148 db "In the cadence of combat,",254149 db "defending creatures with matched",254150 db "speed may claim the first step",254151 db "in battle on their turn,",254152 db "preceding their attacking",254153 db "counterparts.",255155TextQuickTip22:156 db "Consider the map size and ",254157 db "distance to opponents as crucial",254158 db "factors in determining whether",254159 db "to pursue an early or late game",254160 db "victory.",255162TextQuickTip23:163 db "The Armorer skill strengthens your",254164 db "creatures, reducing physical blows",254165 db "from both melee and ranged",254166 db "attackers. However, magical",254167 db "attacks from enemy heroes still",254168 db "pierce these defenses.",255170TextQuickTip24:171 db "A unit's speed indicates how",254172 db "many hexagonal tiles it can",254173 db "traverse on the battlefield,",254174 db "starting from the leftmost tile",254175 db "the unit occupies.",255177TextQuickTip25:178 db "Transferring army units between",254179 db "heroes deducts one movement",254180 db "point from the initiating hero.",254181 db "However, swapping units inside",254182 db "a castle does not consume a",254183 db "movement point.",255185TextQuickTip26:186 db "When an attacking unit's attack",254187 db "surpasses the defending unit's",254188 db "defense, it gains a 5% damage",254189 db "bonus per point difference,",254190 db "up to 300%.",255192TextQuickTip27:193 db "When a defending unit's defense",254194 db "exceeds the attacker's attack,",254195 db "the attacker suffers a 2.5%",254196 db "damage penalty per point deficit,",254197 db "up to 30%.",255199TextQuickTip28:200 db "A creature may opt to defend",254201 db "during its phase, gaining a 20%",254202 db "bonus to its defense rating",254203 db "(after accounting for item",254204 db "bonuses and spell effects) and",254205 db "forfeits the remainder of its turn.",255207TextQuickTip29:208 db "During combat, the spell",254209 db "duration can be determined",254210 db "using the formula:",254211 db "spell duration equals spell",254212 db "damage divided by 3, plus 2.",255213 214TextQuickTip30:215 db "Retreating is cost-free, yet",254216 db "you forfeit all creatures.",254217 db "Surrendering incurs a fee, but",254218 db "your creatures remain intact.",254219 db "The Hero can be rehired upon",254220 db "returning to the tavern.",255222TextQuickTip31:223 db "When your hero finds a scroll",254224 db "on the world map, they gain the",254225 db "capability to cast the spell it",254226 db "contains, even without the",254227 db "wisdom skill typically needed.",255229TextQuickTip32:230 db "Occupying the defending hero slot",254231 db "in a castle grants +1 defense.",254232 db "Additionally, if castle walls exist,",254233 db "the hero's defense increases by",254234 db "+5.",255235 236TextQuickTip33:237 db "Scattered among scrolls are",254238 db "special universal spells not",254239 db "teachable within mage guilds.",255241TextQuickTip34:242 db "The HUD shows your heroes'",254243 db "available movement points next",254244 db "to their hero portrait on the",254245 db "left, and their total mana",254246 db "points on the right.",255248249StartOfGameQuickTips: equ 35251TextQuickTip35:252 db "You can double-click on a",254253 db "location on the adventure map",254254 db "to move there. When your hero's",254255 db "movement points are depleted,",254256 db "click the hourglass to end your",254257 db "turn and recharge.",255259TextQuickTip36:260 db "Enter your castle by clicking its",254261 db "center or double-clicking the",254262 db "castle icon in the HUD.",254263 db "Begin constructing new structures",254264 db "to define your expanding empire.",255266TextQuickTip37:267 db "You're limited to constructing one",254268 db "building per turn. Plan ahead to",254269 db "decide whether to focus on",254270 db "generating income, enhancing",254271 db "magic, or summoning creatures.",255273TextQuickTip38:274 db "Can't find your hero ?",254275 db "Clicking the hero icon in the HUD",254276 db "will focus the screen on your",254277 db "hero's location. Clicking the castle",254278 db "icon will do the same for your",254279 db "castle.",255281TextQuickTip39:282 db "On the adventure map, you can",254283 db "gather resources necessary for",254284 db "constructing specific buildings.",254285 db "Additionally, you may stumble",254286 db "upon potent artifacts and scrolls",254287 db "that enhance your hero's prowess.",255289TextQuickTip40:290 db "Clicking on your hero or double-",254291 db "clicking your hero's icon in the",254292 db "HUD will open the hero menu,",254293 db "allowing you to access your",254294 db "hero's skills, inventory, army",254295 db "arrangement, spells, and stats.",255297TextQuickTip41:298 db "Each hero belongs to a specific",254299 db "class. This class determines their",254300 db "starting set of primary skills and",254301 db "influences the probability of",254302 db "acquiring new primary and",254303 db "secondary skills as they level up.",255305TextQuickTip42:306 db "In the hero menu's army window,",254307 db "you can rearrange and split your",254308 db "units. This allows you to create",254309 db "tactical formations, like using",254310 db "melee units as a shield for your",254311 db "ranged attackers.",255313TextQuickTip43:314 db "Prioritize information.",254315 db "Before engaging in combat,",254316 db "right-click on enemies to view",254317 db "their size and level. This crucial",254318 db "intel helps you estimate your",254319 db "odds of success.",255321TextQuickTip44:322 db "Combat follows a turn-based",254323 db "system, wherein each creature",254324 db "has the option to move, attack",254325 db "if within range, defend for a",254326 db "+20% defense bonus, or opt to",254327 db "delay their action until later.",255329TextQuickTip45:330 db "Each hero belongs to one of 3",254331 db "categories: Might, Adventure, or",254332 db "Wizardry.",254333 db "Plan your city's structures",254334 db "strategically to best complement",254335 db "their strengths.",255337TextQuickTip46:338 db "When your foe's forces are",254339 db "dwindling in combat, make a",254340 db "concerted effort to eliminate them",254341 db "in one decisive assault, leaving",254342 db "no chance for retreat.",255344TextQuickTip47:345 db "Defeating a hero grants you",254346 db "access to their equipment,",254347 db "expanding your arsenal.",254348 db "But remember, only what you can",254349 db "physically hold becomes yours.",255351TextQuickTip48:352 db "Creatures require a hero's",254353 db "guidance to be recruited. If your",254354 db "main hero is unavailable, consider",254355 db "acquiring another hero solely for",254356 db "the purpose of transporting these",254357 db "creatures.",255359TextQuickTip49:360 db "Upon obtaining a scroll, the game",254361 db "endeavors to assist your hero",254362 db "by granting them a scroll",254363 db "corresponding to a spell they",254364 db "haven't yet obtained or learned.",255366TextQuickTip50:367 db "A creature's damage is its actual",254368 db "offensive output during combat.",254369 db "However, its attack and defense",254370 db "serve as modifiers that determine",254371 db "the extent to which its damage",254372 db "increases or decreases.",255374LastQuickTip: equ 50379MSXHeroes.asm625 ds $c000-$,$ff626dephase628631Hero20x11PortraitsBlock: equ $14632phase $4000633 incbin "..\grapx\HeroesSprites\20x11Portraits.SC5",7,208 * 128 634 incbin "..\grapx\HeroesSprites\20x11PortraitsBottom48lines.SC5",7,048 * 128 635 ds $c000-$,$ff636dephase638641TitleScreenGraphicsBlock: equ $16642phase $4000643if Promo?644 incbin "..\grapx\TitleScreen\TitleScreenPromo.SC5",7,212 * 128 645else646 incbin "..\grapx\TitleScreen\TitleScreen.SC5",7,212 * 128 647endif648 ds $c000-$,$ff649dephase651654World1ObjectsBlock: equ $18655phase $4000656 incbin "..\grapx\tilesheets\world1Objects.SC5",7+(64*128),144 * 128 657 incbin "..\grapx\tilesheets\world1ObjectsBottom48Lines.SC5",7,48 * 128 658 ds $c000-$,$ff659dephase661664HeroOverviewGraphicsBlock: equ $1a665phase $4000666 incbin "..\grapx\HeroOverview\HeroOverviewGraphics.SC5",7,171 * 128 667 ds $c000-$,$ff668dephase670673HeroOverviewCodeBlock: equ $1c674phase $4000675 HeroOverviewCode.asm113HeroOverViewFirstWindowchoicesSX: equ 00014HeroOverViewFirstWindowchoicesSY: equ 00015HeroOverViewFirstWindowchoicesDX: equ 058 - 0516HeroOverViewFirstWindowchoicesDY: equ 03717HeroOverViewFirstWindowchoicesNX: equ 10618HeroOverViewFirstWindowchoicesNY: equ 12220HeroOverViewFirstWindowButtonNY: equ 01121HeroOverViewFirstWindowButtonNX: equ 0902325HeroOverViewSkillsWindowSX: equ 10626HeroOverViewSkillsWindowSY: equ 00027HeroOverViewSkillsWindowDX: equ 03028HeroOverViewSkillsWindowDY: equ 02529HeroOverViewSkillsWindowNX: equ 15030HeroOverViewSkillsWindowNY: equ 139-132HeroOverViewSkillsWindowButtonNY: equ 01133HeroOverViewSkillsWindowButtonNX: equ 1343537HeroOverViewStatusWindowSX: equ 00038HeroOverViewStatusWindowSY: equ 00039HeroOverViewStatusWindowDX: equ 02840HeroOverViewStatusWindowDY: equ 04041HeroOverViewStatusWindowNX: equ 15042HeroOverViewStatusWindowNY: equ 1164446HeroOverViewSpellBookWindowSX: equ 00047HeroOverViewSpellBookWindowSY: equ 00048HeroOverViewSpellBookWindowDX: equ 00649HeroOverViewSpellBookWindowDY: equ 00950HeroOverViewSpellBookWindowNX: equ 19251HeroOverViewSpellBookWindowNY: equ 18453HeroOverViewSpellBookWindowButton1NY: equ 035 - 154HeroOverViewSpellBookWindowButton1NX: equ 01055HeroOverViewSpellBookWindowButton2NY: equ 029 - 156HeroOverViewSpellBookWindowButton2NX: equ 01057HeroOverViewSpellBookWindowButton3NY: equ 023 - 158HeroOverViewSpellBookWindowButton3NX: equ 01059HeroOverViewSpellBookWindowButton4NY: equ 03560HeroOverViewSpellBookWindowButton4NX: equ 01062HeroOverViewSpellIconWindowButtonNY: equ 01663HeroOverViewSpellIconWindowButtonNX: equ 01665HeroOverViewInventoryIconWindowButtonNY: equ 02066HeroOverViewInventoryIconWindowButtonNX: equ 0206971HeroOverViewSpellBackdropSX: equ 19272HeroOverViewSpellBackdropSY: equ 12273HeroOverViewSpell1backdropDY: equ HeroOverViewSpellBookWindowDY + 04474HeroOverViewSpell1backdropDX: equ HeroOverViewSpellBookWindowDX + 03475HeroOverViewSpellbackdropNX: equ 02876HeroOverViewSpellbackdropNY: equ 02878HeroOverViewSpell2backdropDY: equ HeroOverViewSpellBookWindowDY + 04879HeroOverViewSpell2backdropDX: equ HeroOverViewSpellBookWindowDX + 06480HeroOverViewSpell3backdropDY: equ HeroOverViewSpellBookWindowDY + 08981HeroOverViewSpell3backdropDX: equ HeroOverViewSpellBookWindowDX + 03282HeroOverViewSpell4backdropDY: equ HeroOverViewSpellBookWindowDY + 09383HeroOverViewSpell4backdropDX: equ HeroOverViewSpellBookWindowDX + 06284HeroOverViewSpell5backdropDY: equ HeroOverViewSpellBookWindowDY + 04885HeroOverViewSpell5backdropDX: equ HeroOverViewSpellBookWindowDX + 10286HeroOverViewSpell6backdropDY: equ HeroOverViewSpellBookWindowDY + 04487HeroOverViewSpell6backdropDX: equ HeroOverViewSpellBookWindowDX + 13288HeroOverViewSpell7backdropDY: equ HeroOverViewSpellBookWindowDY + 09389HeroOverViewSpell7backdropDX: equ HeroOverViewSpellBookWindowDX + 10490HeroOverViewSpell8backdropDY: equ HeroOverViewSpellBookWindowDY + 08991HeroOverViewSpell8backdropDX: equ HeroOverViewSpellBookWindowDX + 1349394Spell01IconSX: equ 22495Spell01IconSY: equ 00096Spell02IconSX: equ 22497Spell02IconSY: equ 01698Spell03IconSX: equ 22499Spell03IconSY: equ 032100Spell04IconSX: equ 224101Spell04IconSY: equ 048102103Spell05IconSX: equ 224104Spell05IconSY: equ 064105Spell06IconSX: equ 224106Spell06IconSY: equ 080107Spell07IconSX: equ 224108Spell07IconSY: equ 096109Spell08IconSX: equ 224110Spell08IconSY: equ 112111112Spell09IconSX: equ 224113Spell09IconSY: equ 128114Spell10IconSX: equ 224115Spell10IconSY: equ 144116Spell11IconSX: equ 224117Spell11IconSY: equ 160118Spell12IconSX: equ 224119Spell12IconSY: equ 176120121Spell13IconSX: equ 000122Spell13IconSY: equ 184123Spell14IconSX: equ 032124Spell14IconSY: equ 184125Spell15IconSX: equ 064126Spell15IconSY: equ 184127Spell16IconSX: equ 096128Spell16IconSY: equ 184129130Spell17IconSX: equ 128131Spell17IconSY: equ 184132Spell18IconSX: equ 160133Spell18IconSY: equ 184134Spell19IconSX: equ 192135Spell19IconSY: equ 184136Spell20IconSX: equ 192137Spell20IconSY: equ 168140Spell1DY: equ HeroOverViewSpellBookWindowDY + 050141Spell1DX: equ HeroOverViewSpellBookWindowDX + 040142Spell2DY: equ HeroOverViewSpellBookWindowDY + 054143Spell2DX: equ HeroOverViewSpellBookWindowDX + 070144Spell3DY: equ HeroOverViewSpellBookWindowDY + 095145Spell3DX: equ HeroOverViewSpellBookWindowDX + 038146Spell4DY: equ HeroOverViewSpellBookWindowDY + 099147Spell4DX: equ HeroOverViewSpellBookWindowDX + 068148Spell5DY: equ HeroOverViewSpellBookWindowDY + 054149Spell5DX: equ HeroOverViewSpellBookWindowDX + 108150Spell6DY: equ HeroOverViewSpellBookWindowDY + 050151Spell6DX: equ HeroOverViewSpellBookWindowDX + 138152Spell7DY: equ HeroOverViewSpellBookWindowDY + 099153Spell7DX: equ HeroOverViewSpellBookWindowDX + 110154Spell8DY: equ HeroOverViewSpellBookWindowDY + 095155Spell8DX: equ HeroOverViewSpellBookWindowDX + 140157SpellIconNX: equ 016158SpellIconNY: equ 016160162HeroOverViewInventoryWindowSX: equ 000163HeroOverViewInventoryWindowSY: equ 000164HeroOverViewInventoryWindowDX: equ 030165HeroOverViewInventoryWindowDY: equ 024166HeroOverViewInventoryWindowNX: equ 146167HeroOverViewInventoryWindowNY: equ 156169InventoryItemNY: equ 020170InventoryItemNx: equ 020171172InventoryItem01DY: equ HeroOverViewInventoryWindowDY + 028173InventoryItem01Dx: equ HeroOverViewInventoryWindowDX + 020174InventoryItem02DY: equ HeroOverViewInventoryWindowDY + 028175InventoryItem02Dx: equ HeroOverViewInventoryWindowDX + 064176InventoryItem03DY: equ HeroOverViewInventoryWindowDY + 028177InventoryItem03Dx: equ HeroOverViewInventoryWindowDX + 108179InventoryItem04DY: equ HeroOverViewInventoryWindowDY + 053180InventoryItem04Dx: equ HeroOverViewInventoryWindowDX + 020181InventoryItem05DY: equ HeroOverViewInventoryWindowDY + 053182InventoryItem05Dx: equ HeroOverViewInventoryWindowDX + 064183InventoryItem06DY: equ HeroOverViewInventoryWindowDY + 053184InventoryItem06Dx: equ HeroOverViewInventoryWindowDX + 108186InventoryItem07DY: equ HeroOverViewInventoryWindowDY + 078187InventoryItem07Dx: equ HeroOverViewInventoryWindowDX + 020188InventoryItem08DY: equ HeroOverViewInventoryWindowDY + 078189InventoryItem08Dx: equ HeroOverViewInventoryWindowDX + 064190InventoryItem09DY: equ HeroOverViewInventoryWindowDY + 078191InventoryItem09Dx: equ HeroOverViewInventoryWindowDX + 108192193InventoryItem10DY: equ HeroOverViewInventoryWindowDY + 101194InventoryItem10Dx: equ HeroOverViewInventoryWindowDX + 008195InventoryItem11DY: equ HeroOverViewInventoryWindowDY + 101196InventoryItem11Dx: equ HeroOverViewInventoryWindowDX + 030197InventoryItem12DY: equ HeroOverViewInventoryWindowDY + 101198InventoryItem12Dx: equ HeroOverViewInventoryWindowDX + 052199InventoryItem13DY: equ HeroOverViewInventoryWindowDY + 101200InventoryItem13Dx: equ HeroOverViewInventoryWindowDX + 074201InventoryItem14DY: equ HeroOverViewInventoryWindowDY + 101202InventoryItem14Dx: equ HeroOverViewInventoryWindowDX + 096203InventoryItem15DY: equ HeroOverViewInventoryWindowDY + 101204InventoryItem15Dx: equ HeroOverViewInventoryWindowDX + 118206ScrollIconNR: equ 46207InventoryIconTableSYSX: 208 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 209 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 128210 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 211 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 128212 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 213 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 128214 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 215 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 128216 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 217 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 128219 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 220 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 128221 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 222 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 128223 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 224 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 128225 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 226 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 128227 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 228 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 128230 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 231 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 128232 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 233 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 128234 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 235 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 128236 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 237 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 128238 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 239 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 128241 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 242 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 128243 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 244 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 128245 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 246 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 128247 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 248 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 128249 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 250 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 128252 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 253 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 128254 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 255 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 128256 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 257 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 128258 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 259 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 128260 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 261 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 128263 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 264 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 128265 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 266 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 128267 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 268 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 128269 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 270 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 128271 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 272 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 128276 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 277 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 128278 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 279 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 128280 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 281 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 128282 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 283 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 128284 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 285 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 128287 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 288 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 128289 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 290 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 128291 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 292 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 128293 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 294 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 128295 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 296 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 128298 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 299 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 128300 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 301 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 128302 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 303 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 128304 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 305 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 128306 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 307 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 128309 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 310 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 128312 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 313 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 128315InventoryItem00ButtonOffSY: equ 000 316InventoryItem00ButtonOffSX: equ 146317InventoryItem00MouseOverSY: equ 020318InventoryItem00MouseOverSX: equ 146319InventoryItem01ButtonOffSY: equ 000 320InventoryItem01ButtonOffSX: equ 166321InventoryItem01MouseOverSY: equ 020322InventoryItem01MouseOverSX: equ 166323InventoryItem02ButtonOffSY: equ 000 324InventoryItem02ButtonOffSX: equ 186325InventoryItem02MouseOverSY: equ 020326InventoryItem02MouseOverSX: equ 186327InventoryItem03ButtonOffSY: equ 000 328InventoryItem03ButtonOffSX: equ 206329InventoryItem03MouseOverSY: equ 020330InventoryItem03MouseOverSX: equ 206331InventoryItem04ButtonOffSY: equ 000 332InventoryItem04ButtonOffSX: equ 226333InventoryItem04MouseOverSY: equ 020334InventoryItem04MouseOverSX: equ 226336InventoryItem05ButtonOffSY: equ 040 337InventoryItem05ButtonOffSX: equ 146338InventoryItem05MouseOverSY: equ 060339InventoryItem05MouseOverSX: equ 146340InventoryItem06ButtonOffSY: equ 040 341InventoryItem06ButtonOffSX: equ 166342InventoryItem06MouseOverSY: equ 060343InventoryItem06MouseOverSX: equ 166344InventoryItem07ButtonOffSY: equ 040 345InventoryItem07ButtonOffSX: equ 186346InventoryItem07MouseOverSY: equ 060347InventoryItem07MouseOverSX: equ 186348InventoryItem08ButtonOffSY: equ 040 349InventoryItem08ButtonOffSX: equ 206350InventoryItem08MouseOverSY: equ 060351InventoryItem08MouseOverSX: equ 206352InventoryItem09ButtonOffSY: equ 040 353InventoryItem09ButtonOffSX: equ 226354InventoryItem09MouseOverSY: equ 060355InventoryItem09MouseOverSX: equ 226357InventoryItem10ButtonOffSY: equ 080 358InventoryItem10ButtonOffSX: equ 146359InventoryItem10MouseOverSY: equ 100360InventoryItem10MouseOverSX: equ 146361InventoryItem11ButtonOffSY: equ 080 362InventoryItem11ButtonOffSX: equ 166363InventoryItem11MouseOverSY: equ 100364InventoryItem11MouseOverSX: equ 166365InventoryItem12ButtonOffSY: equ 080 366InventoryItem12ButtonOffSX: equ 186367InventoryItem12MouseOverSY: equ 100368InventoryItem12MouseOverSX: equ 186369InventoryItem13ButtonOffSY: equ 080 370InventoryItem13ButtonOffSX: equ 206371InventoryItem13MouseOverSY: equ 100372InventoryItem13MouseOverSX: equ 206373InventoryItem14ButtonOffSY: equ 080 374InventoryItem14ButtonOffSX: equ 226375InventoryItem14MouseOverSY: equ 100376InventoryItem14MouseOverSX: equ 226378InventoryItem15ButtonOffSY: equ 156 379InventoryItem15ButtonOffSX: equ 000380InventoryItem15MouseOverSY: equ 176381InventoryItem15MouseOverSX: equ 000382InventoryItem16ButtonOffSY: equ 156 383InventoryItem16ButtonOffSX: equ 020384InventoryItem16MouseOverSY: equ 176385InventoryItem16MouseOverSX: equ 020386InventoryItem17ButtonOffSY: equ 156 387InventoryItem17ButtonOffSX: equ 040388InventoryItem17MouseOverSY: equ 176389InventoryItem17MouseOverSX: equ 040390InventoryItem18ButtonOffSY: equ 156 391InventoryItem18ButtonOffSX: equ 060392InventoryItem18MouseOverSY: equ 176393InventoryItem18MouseOverSX: equ 060394InventoryItem19ButtonOffSY: equ 156 395InventoryItem19ButtonOffSX: equ 080396InventoryItem19MouseOverSY: equ 176397InventoryItem19MouseOverSX: equ 080399InventoryItem20ButtonOffSY: equ 156 400InventoryItem20ButtonOffSX: equ 100401InventoryItem20MouseOverSY: equ 176402InventoryItem20MouseOverSX: equ 100403InventoryItem21ButtonOffSY: equ 156 404InventoryItem21ButtonOffSX: equ 120405InventoryItem21MouseOverSY: equ 176406InventoryItem21MouseOverSX: equ 120407InventoryItem22ButtonOffSY: equ 156 408InventoryItem22ButtonOffSX: equ 140409InventoryItem22MouseOverSY: equ 176410InventoryItem22MouseOverSX: equ 140411InventoryItem23ButtonOffSY: equ 156 412InventoryItem23ButtonOffSX: equ 160413InventoryItem23MouseOverSY: equ 176414InventoryItem23MouseOverSX: equ 160415InventoryItem24ButtonOffSY: equ 156 416InventoryItem24ButtonOffSX: equ 180417InventoryItem24MouseOverSY: equ 176418InventoryItem24MouseOverSX: equ 180420InventoryItem25ButtonOffSY: equ 156 421InventoryItem25ButtonOffSX: equ 200422InventoryItem25MouseOverSY: equ 176423InventoryItem25MouseOverSX: equ 200424InventoryItem26ButtonOffSY: equ 156 425InventoryItem26ButtonOffSX: equ 220426InventoryItem26MouseOverSY: equ 176427InventoryItem26MouseOverSX: equ 220428InventoryItem27ButtonOffSY: equ 196 429InventoryItem27ButtonOffSX: equ 000430InventoryItem27MouseOverSY: equ 216431InventoryItem27MouseOverSX: equ 000432InventoryItem28ButtonOffSY: equ 196 433InventoryItem28ButtonOffSX: equ 020434InventoryItem28MouseOverSY: equ 216435InventoryItem28MouseOverSX: equ 020436InventoryItem29ButtonOffSY: equ 196 437InventoryItem29ButtonOffSX: equ 040438InventoryItem29MouseOverSY: equ 216439InventoryItem29MouseOverSX: equ 040441InventoryItem30ButtonOffSY: equ 196 442InventoryItem30ButtonOffSX: equ 060443InventoryItem30MouseOverSY: equ 216444InventoryItem30MouseOverSX: equ 060445InventoryItem31ButtonOffSY: equ 196 446InventoryItem31ButtonOffSX: equ 080447InventoryItem31MouseOverSY: equ 216448InventoryItem31MouseOverSX: equ 080449InventoryItem32ButtonOffSY: equ 196 450InventoryItem32ButtonOffSX: equ 100451InventoryItem32MouseOverSY: equ 216452InventoryItem32MouseOverSX: equ 100453InventoryItem33ButtonOffSY: equ 196 454InventoryItem33ButtonOffSX: equ 120455InventoryItem33MouseOverSY: equ 216456InventoryItem33MouseOverSX: equ 120457InventoryItem34ButtonOffSY: equ 196 458InventoryItem34ButtonOffSX: equ 140459InventoryItem34MouseOverSY: equ 216460InventoryItem34MouseOverSX: equ 140462InventoryItem35ButtonOffSY: equ 196 463InventoryItem35ButtonOffSX: equ 160464InventoryItem35MouseOverSY: equ 216465InventoryItem35MouseOverSX: equ 160466InventoryItem36ButtonOffSY: equ 196 467InventoryItem36ButtonOffSX: equ 180468InventoryItem36MouseOverSY: equ 216469InventoryItem36MouseOverSX: equ 180470InventoryItem37ButtonOffSY: equ 196 471InventoryItem37ButtonOffSX: equ 200472InventoryItem37MouseOverSY: equ 216473InventoryItem37MouseOverSX: equ 200474InventoryItem38ButtonOffSY: equ 196 475InventoryItem38ButtonOffSX: equ 220476InventoryItem38MouseOverSY: equ 216477InventoryItem38MouseOverSX: equ 220478InventoryItem39ButtonOffSY: equ 236 479InventoryItem39ButtonOffSX: equ 000480InventoryItem39MouseOverSY: equ 236481InventoryItem39MouseOverSX: equ 020483InventoryItem40ButtonOffSY: equ 236 484InventoryItem40ButtonOffSX: equ 040485InventoryItem40MouseOverSY: equ 120486InventoryItem40MouseOverSX: equ 146487InventoryItem41ButtonOffSY: equ 236 488InventoryItem41ButtonOffSX: equ 060489InventoryItem41MouseOverSY: equ 120490InventoryItem41MouseOverSX: equ 166491InventoryItem42ButtonOffSY: equ 236 492InventoryItem42ButtonOffSX: equ 080493InventoryItem42MouseOverSY: equ 120494InventoryItem42MouseOverSX: equ 186495InventoryItem43ButtonOffSY: equ 236 496InventoryItem43ButtonOffSX: equ 100497InventoryItem43MouseOverSY: equ 120498InventoryItem43MouseOverSX: equ 206499InventoryItem44ButtonOffSY: equ 236 500InventoryItem44ButtonOffSX: equ 120501InventoryItem44MouseOverSY: equ 120502InventoryItem44MouseOverSX: equ 226504InventoryItem45ButtonOffSY: equ 236 505InventoryItem45ButtonOffSX: equ 200506InventoryItem45MouseOverSY: equ 236507InventoryItem45MouseOverSX: equ 180509InventoryItem46ButtonOffSY: equ 236 510InventoryItem46ButtonOffSX: equ 140511InventoryItem46MouseOverSY: equ 236512InventoryItem46MouseOverSX: equ 160514516HeroOverViewArmyWindowSX: equ 000517HeroOverViewArmyWindowSY: equ 000518HeroOverViewArmyWindowDX: equ 024519HeroOverViewArmyWindowDY: equ 040520HeroOverViewArmyWindowNX: equ 156521HeroOverViewArmyWindowNY: equ 067 523HeroOverViewArmyIconWindowButtonNY: equ 030524HeroOverViewArmyIconWindowButtonNX: equ 018528DisplayEnemyHeroStatsWindowCode:529 call .SetHeroOverViewArmyWindow 530 call .Set16x30HeroIcon 531 ld ix,(EnemyHeroThatPointerIsOn)532 call SetArmyIconsAndAmount.army 534 call SwapAndSetPage 535 call .SetHeroOverViewArmyWindow 536 call .Set16x30HeroIcon 537 ld ix,(EnemyHeroThatPointerIsOn)538 call SetArmyIconsAndAmount.army 540 ld bc,SFX_ShowEnemyHeroStats541 call RePlayerSFX_PlayCh1543 .engine:544 call PopulateControls 546 ld a,(Controls)547 bit 5,a 548 ret nz550 call CheckEndHeroOverviewArmy 551 halt552 jp .engine554.Set16x30HeroIcon:555 ld ix,(EnemyHeroThatPointerIsOn)557 558 ld l,(ix+HeroSpecificInfo+0) 559 ld h,(ix+HeroSpecificInfo+1)560 push hl561 pop ix563 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 564 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 565 ld bc,$4000566 xor a567 sbc hl,bc569 ld bc,NXAndNY16x30HeroIcon570 ld a,Hero16x30PortraitsBlock 571 ld de,DYDX16x30HeroIconArmyWindow 572 jp CopyRamToVramCorrectedCastleOverview 574 578580582587.SetHeroOverViewArmyWindow:588 ld hl,$4000 + (066*128) + (HeroOverViewArmyWindowSX/2) -128589 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)590 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)591 ld a,ArmyGraphicsBlock592 jp CopyRamToVramCorrectedCastleOverview 595HeroOverviewArmyWindowCode:596 ld a,3 597 ld (SetHeroArmyAndStatusInHud?),a599603 call SetHeroOverViewArmyWindow 604 call Set16x30HeroIcon 605 call SetArmyIconsAndAmount 606 call UpdateHUd607 ld a,1608 ld (GameStatus),a 609 call SwapAndSetPage 610 call SetHeroOverViewArmyWindow 611 call Set16x30HeroIcon 612 call SetArmyIconsAndAmount 613 call UpdateHUd614 ld a,1615 ld (GameStatus),a 616 617 .engine:618 call PopulateControls 620 ld a,(Controls)621 bit 5,a 622 ret nz624 ld ix,HeroOverviewArmyIconButtonTable625 ld iy,ButtonTableArmyIconsSYSX626 call CheckButtonMouseInteraction628 ld a,(MenuOptionSelected?)629 or a630 jp nz,.ButtonPressed631633 call MarkLastPressedButtonArmy 636 ld ix,HeroOverviewArmyIconButtonTable637 call SetButtonStatusAndText4 638 call SetArmyIconsAndAmount 641 call SwapAndSetPage 642 call CheckEndHeroOverviewArmy 643 halt644 jp .engine646 .ButtonPressed:647 ld (MenuOptionSelected?Backup),a649 xor a650 ld (MenuOptionSelected?),a651653 ld (ix+HeroOverviewWindowButtonStatus),%1000 0011654655 jp HeroOverviewArmyWindowCode657MarkLastPressedButtonArmy: 658 ld a,(MenuOptionSelected?Backup) 659 cp 255 660 ret z661 ld a,(MenuOptionSelected?BackupLastFrame)662 cp 255663 jr z,.Set665 ld b,a666 ld a,(MenuOptionSelected?Backup) 667 cp b668 jr nz,.DifferentButtonPressed670 ld b,a671 ld a,6672 sub a,b674 ld ix,HeroOverviewArmyIconButtonTable675 ld de,HeroOverviewArmyIconButtonTableLenghtPerIcon676 .loop:677 jr z,.Found678 add ix,de679 dec a680 jr .loop681 .Found: 683684 push ix685 ld a,(MenuOptionSelected?Backup) 686 ld b,a687 ld a,6688 sub a,b 689 ld ix,(plxcurrentheroAddress)690 ld d,0691 ld e,a692 add ix,de 693 add ix,de 694 add ix,de 696 ld a,(ix+HeroUnits+1) 697 cp (ix+HeroUnits+2) 698 pop ix699 jp z,.end700702 ld (ix+2),%0100 0011 703 .Set:704 ld a,(MenuOptionSelected?Backup) 705 ld (MenuOptionSelected?BackupLastFrame),a706 ret708 .DifferentButtonPressed:709713714 ld a,(MenuOptionSelected?Backup) 715 ld b,a716 ld a,6717 sub a,b 718 ld ix,(plxcurrentheroAddress)719 ld d,0720 ld e,a721 add ix,de 722 add ix,de 723 add ix,de 725 ld a,(ix+HeroUnits+1) 726 or (ix+HeroUnits+2) 727 jp nz,.EndCheck1728 730 731 ld a,(MenuOptionSelected?BackupLastFrame) 732 ld b,a733 ld a,6734 sub a,b 735 ld ix,(plxcurrentheroAddress)736 ld d,0737 ld e,a738 add ix,de 739 add ix,de 740 add ix,de 741 ld l,(ix+HeroUnits+1) 742 ld h,(ix+HeroUnits+2) 743 dec hl744 ld (ix+HeroUnits+1),l 745 ld (ix+HeroUnits+2),h 746 ld c,(ix+HeroUnits+0) 748 ld a,(ix+HeroUnits+1) 749 or (ix+HeroUnits+2) 750 jr nz,.EndCheckZero751 ld (ix+HeroUnits+0),0 752 .EndCheckZero:753 755 756 ld a,(MenuOptionSelected?Backup)757 ld b,a758 ld a,6759 sub a,b 760 ld ix,(plxcurrentheroAddress)761 ld d,0762 ld e,a 763 add ix,de 764 add ix,de 765 add ix,de 767 ld (ix+HeroUnits+0),c 768 ld (ix+HeroUnits+1),1 769 ld (ix+HeroUnits+2),0 770 jp .end771 772 .EndCheck1:774775 ld a,(MenuOptionSelected?Backup) 776 ld b,a777 ld a,6778 sub a,b 779 ld ix,(plxcurrentheroAddress)780 ld d,0781 ld e,a782 add ix,de 783 add ix,de 784 add ix,de 786 ld c,(ix+HeroUnits+0) 788 ld a,(MenuOptionSelected?BackupLastFrame) 789 ld b,a790 ld a,6791 sub a,b 792 ld ix,(plxcurrentheroAddress)793 ld d,0794 ld e,a795 add ix,de 796 add ix,de 797 add ix,de 799 ld a,(ix+HeroUnits+0) 801 cp c802 jp nz,.EndCheck2804 805 ld (ix+HeroUnits+0),0 806 ld l,(ix+HeroUnits+1) 807 ld h,(ix+HeroUnits+2) 809 ld (ix+HeroUnits+1),0 810 ld (ix+HeroUnits+2),0 812 ld a,(MenuOptionSelected?Backup) 813 ld b,a814 ld a,6815 sub a,b 816 ld ix,(plxcurrentheroAddress)817 ld d,0818 ld e,a819 add ix,de 820 add ix,de 821 add ix,de822 ld e,(ix+HeroUnits+1) 823 ld d,(ix+HeroUnits+2) 824 add hl,de826 ld (ix+HeroUnits+1),l 827 ld (ix+HeroUnits+2),h 828 jp .end829 .EndCheck2:832834835 push iy837 ld a,(MenuOptionSelected?Backup) 838 ld b,a839 ld a,6840 sub a,b 841 ld ix,(plxcurrentheroAddress)842 ld d,0843 ld e,a844 add ix,de 845 add ix,de 846 add ix,de 848 ld a,(MenuOptionSelected?BackupLastFrame)849 ld b,a850 ld a,6851 sub a,b852 ld iy,(plxcurrentheroAddress)853 ld d,0854 ld e,a855 add iy,de856 add iy,de857 add iy,de859 ld a,(ix+HeroUnits+0) 860 ld b,(ix+HeroUnits+1) 861 ld c,(ix+HeroUnits+2) 863 ld d,(iy+HeroUnits+0) 864 ld e,(iy+HeroUnits+1) 865 ld h,(iy+HeroUnits+2) 867 ld (ix+HeroUnits+0),d 868 ld (ix+HeroUnits+1),e 869 ld (ix+HeroUnits+2),h 871 ld (iy+HeroUnits+0),a 872 ld (iy+HeroUnits+1),b 873 ld (iy+HeroUnits+2),c 875 pop iy877 .end:878 xor a879 ld (MenuOptionSelected?),a880 ld a,255881 ld (MenuOptionSelected?Backup),a 882 ld (MenuOptionSelected?BackupLastFrame),a883 pop af 884 jp HeroOverviewArmyWindowCode 904NXAndNY16x30HeroIcon: equ 030*256 + (016/2) 905DYDX16x30HeroIconArmyWindow: equ (HeroOverViewArmyWindowDY+28)*128 + ((HeroOverViewArmyWindowDX+10)/2) - 128 907Set16x30HeroIcon:908 ld ix,(plxcurrentheroAddress)910 911 ld l,(ix+HeroSpecificInfo+0) 912 ld h,(ix+HeroSpecificInfo+1)913 push hl914 pop ix916 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 917 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 918 ld bc,$4000919 xor a920 sbc hl,bc922 ld bc,NXAndNY16x30HeroIcon923 ld a,Hero16x30PortraitsBlock 924 ld de,DYDX16x30HeroIconArmyWindow 925 jp CopyRamToVramCorrectedCastleOverview 927 931933935940SetAddressHeroPortrait16x30SYSXinBC:941 ld l,(ix+HeroSpecificInfo+0) 942 ld h,(ix+HeroSpecificInfo+1)943 push hl944 pop ix946 ld c,(ix+HeroInfoPortrait16x30SYSX+0) 947 ld b,(ix+HeroInfoPortrait16x30SYSX+1) 948951 ret953SetArmyIconsAndAmount:954 ld ix,(plxcurrentheroAddress)956 call .army957960 .amount:961 ld l,(ix+HeroUnits+01)962 ld h,(ix+HeroUnits+02)963 ld b,HeroOverViewArmyWindowDX + 031 + 2964 ld c,HeroOverViewArmyWindowDY + 056965 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0967 ld l,(ix+HeroUnits+04)968 ld h,(ix+HeroUnits+05)969 ld b,HeroOverViewArmyWindowDX + 051 + 2970 ld c,HeroOverViewArmyWindowDY + 056971 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0973 ld l,(ix+HeroUnits+07)974 ld h,(ix+HeroUnits+08)975 ld b,HeroOverViewArmyWindowDX + 071 + 2976 ld c,HeroOverViewArmyWindowDY + 056977 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0979 ld l,(ix+HeroUnits+10)980 ld h,(ix+HeroUnits+11)981 ld b,HeroOverViewArmyWindowDX + 091 + 2982 ld c,HeroOverViewArmyWindowDY + 056983 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0985 ld l,(ix+HeroUnits+13)986 ld h,(ix+HeroUnits+14)987 ld b,HeroOverViewArmyWindowDX + 111 + 2988 ld c,HeroOverViewArmyWindowDY + 056989 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0991 ld l,(ix+HeroUnits+16)992 ld h,(ix+HeroUnits+17)993 ld b,HeroOverViewArmyWindowDX + 131 + 2994 ld c,HeroOverViewArmyWindowDY + 056995 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs0996 ret998 .army:999 ld a,(ix+HeroUnits+00) 1000 call .SetSYSX1001 ld de,DYDXUnit1WindowInHud14x24 1002 call CopyTransparantImageHeroOverviewCode 1004 ld a,(ix+HeroUnits+03) 1005 call .SetSYSX1006 ld de,DYDXUnit2WindowInHud14x24 1007 call CopyTransparantImageHeroOverviewCode 1009 ld a,(ix+HeroUnits+06) 1010 call .SetSYSX1011 ld de,DYDXUnit3WindowInHud14x24 1012 call CopyTransparantImageHeroOverviewCode 1014 ld a,(ix+HeroUnits+09) 1015 call .SetSYSX1016 ld de,DYDXUnit4WindowInHud14x24 1017 call CopyTransparantImageHeroOverviewCode 1019 ld a,(ix+HeroUnits+12) 1020 call .SetSYSX1021 ld de,DYDXUnit5WindowInHud14x24 1022 call CopyTransparantImageHeroOverviewCode 1024 ld a,(ix+HeroUnits+15) 1025 call .SetSYSX1026 ld de,DYDXUnit6WindowInHud14x24 1027 call CopyTransparantImageHeroOverviewCode 1028 ret1030 .SetSYSX: 1031 cp 1801032 jr c,.EndCheckOverFlow1033 sub 1801034 ld l,a1035 ld a,Enemy14x24PortraitsBlockPart2 1036 jr .EntryPart21038 .EndCheckOverFlow:1039 ld l,a1040 ld a,Enemy14x24PortraitsBlock 1041 .EntryPart2:1042 ld h,01043 add hl,hl 1044 ld de,UnitSYSXTable14x24Portraits1045 add hl,de1046 ld c,(hl)1047 inc hl1048 ld b,(hl) 1049 push bc1050 pop hl1052 ld bc,NXAndNY14x24CharaterPortraits1053 ret1055DisplayTownAllignmentAssociatedCreatures:1056 ld a,(StartingTownLevel1Unit)1057 call SetArmyIconsAndAmount.SetSYSX1058 ld de,DYDXUnit1TownAllignment 1059 call CopyTransparantImageHeroOverviewCode 1061 ld a,(StartingTownLevel2Unit)1062 call SetArmyIconsAndAmount.SetSYSX1063 ld de,DYDXUnit2TownAllignment 1064 call CopyTransparantImageHeroOverviewCode 1066 ld a,(StartingTownLevel3Unit)1067 call SetArmyIconsAndAmount.SetSYSX1068 ld de,DYDXUnit3TownAllignment 1069 call CopyTransparantImageHeroOverviewCode 1071 ld a,(StartingTownLevel4Unit)1072 call SetArmyIconsAndAmount.SetSYSX1073 ld de,DYDXUnit4TownAllignment 1074 call CopyTransparantImageHeroOverviewCode 1076 ld a,(StartingTownLevel5Unit)1077 call SetArmyIconsAndAmount.SetSYSX1078 ld de,DYDXUnit5TownAllignment 1079 call CopyTransparantImageHeroOverviewCode 1081 ld a,(StartingTownLevel6Unit)1082 call SetArmyIconsAndAmount.SetSYSX1083 ld de,DYDXUnit6TownAllignment 1084 call CopyTransparantImageHeroOverviewCode 1085 ret1087NXAndNY14x24CharaterPortraits: equ 024*256 + (014/2) 1088DYDXUnit1WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+32)1089DYDXUnit2WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+52)1090DYDXUnit3WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+72)1091DYDXUnit4WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+92)1092DYDXUnit5WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+112)1093DYDXUnit6WindowInHud14x24: equ 256*(HeroOverViewArmyWindowDY+30) + (HeroOverViewArmyWindowDX+132)1095DYDXUnit1TownAllignment: equ 256*(056) + (051)1096DYDXUnit2TownAllignment: equ 256*(056) + (103)1097DYDXUnit3TownAllignment: equ 256*(056) + (155)1098DYDXUnit4TownAllignment: equ 256*(100) + (051)1099DYDXUnit5TownAllignment: equ 256*(100) + (103)1100DYDXUnit6TownAllignment: equ 256*(100) + (155)1103 1104UnitSYSXTable14x24Portraits: 1105 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1281106 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-1281107 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-1281108 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-1281109 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-1281110 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-1281111 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-1281113 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-1281114 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-1281115 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-1281116 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-1281119CopyTransparantImageHeroOverviewCode: 11201121 push af1122 ld a,b1123 ld (CopyCastleButton2+ny),a1124 ld a,c1125 add a,a1126 ld (CopyCastleButton2+nx),a1127 pop af1129 push de1130 ld de,$8000 + (212*128) + (000/2) - 128 1131 call CopyRamToVramCorrectedWithoutActivePageSetting 1132 pop de1134 ld a,(activepage)1135 xor 11136 ld (CopyCastleButton2+dPage),a1138 ld a,d1139 ld (CopyCastleButton2+dy),a1140 ld a,e1141 ld (CopyCastleButton2+dx),a1143 ld hl,CopyCastleButton21144 call docopy1146 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1147 jp docopy11501160HeroOverviewInventoryWindowCode:1161 call SetHeroOverViewInventoryWindow 1162 call SetInventoryIcons 1163 call UpdateHUd1164 ld a,11165 ld (GameStatus),a 1166 call SwapAndSetPage 1167 call SetHeroOverViewInventoryWindow 1168 call SetInventoryIcons 1169 call CreateInventoryListForCurrHero 1170 call UpdateHUd1171 ld a,11172 ld (GameStatus),a 1174 .engine:1175 call PopulateControls 1176 call SetTotalManaHero1178 ld a,(Controls)1179 bit 5,a 1180 ret nz1182 ld ix,HeroOverviewInventoryIconButtonTable1183 ld iy,ButtonTableInventoryIconsSYSX1184 call CheckButtonMouseInteraction1185 ld a,(MenuOptionSelected?)1186 or a1187 jp nz,.InventoryIconPressed11891190 call SetTextInventoryItem 1192 call MarkLastPressedButton 1193 ld ix,HeroOverviewInventoryIconButtonTable1194 call SetButtonStatusAndText3 1198 call SwapAndSetPage 1199 call CheckEndHeroOverviewInventory 1200 halt1201 jp .engine1203 .InventoryIconPressed:1204 ld (MenuOptionSelected?Backup),a1206 xor a1207 ld (MenuOptionSelected?),a12081209 ld a,31210 ld (SetSkillsDescription?),a 1211 ld (ix+HeroOverviewWindowButtonStatus),%1000 00111212 jp HeroOverviewInventoryWindowCode1218MarkLastPressedButton: 1219 ld a,(MenuOptionSelected?Backup) 1220 cp 255 1221 ret z1222 ld a,(MenuOptionSelected?BackupLastFrame)1223 cp 2551224 jr z,.Set1226 ld b,a1227 ld a,(MenuOptionSelected?Backup) 1228 cp b1229 jr nz,.DifferentButtonPressed1231 ld b,a1232 ld a,151233 sub a,b1234 12351236 push af1237 ld ix,(plxcurrentheroAddress)1238 ld d,01239 ld e,a1240 add ix,de 1241 ld a,(ix+HeroInventory) 1243 cp 0451244 jr nz,.NotEmpty1245 ld a,2551246 ld (MenuOptionSelected?Backup),a 1247 ld (MenuOptionSelected?BackupLastFrame),a1248 pop af1249 ret1250 .NotEmpty:1251 pop af1255 ld ix,HeroOverviewInventoryIconButtonTable1256 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1257 .loop:1258 jr z,.Found1259 add ix,de1260 dec a1261 jr .loop1263 .Found: 1264 ld (ix+2),%0100 0011 1266 .Set:1267 ld a,(MenuOptionSelected?Backup) 1268 ld (MenuOptionSelected?BackupLastFrame),a1269 ret1271 .DifferentButtonPressed:127212771278 ld a,(MenuOptionSelected?Backup) 1279 cp 71280 jr c,.EndCheck11281 ld a,(MenuOptionSelected?BackupLastFrame)1282 cp 71283 jr nc,.UnableToSwapItems1284 .EndCheck1:12861287 ld a,(MenuOptionSelected?Backup) 1288 cp 71289 jr nc,.MenuOptionSelected?BackupLastFrame_GoesToSlot1to91290 ld a,(MenuOptionSelected?BackupLastFrame)1291 cp 15 - 91292 jp c,SwapInventoryItems 12941295 .MenuOptionSelected?Backup_GoesToSlot1to9:1296 ld a,(MenuOptionSelected?BackupLastFrame)1297 ld c,a1298 ld a,(MenuOptionSelected?Backup) 1299 jr .go1301 .MenuOptionSelected?BackupLastFrame_GoesToSlot1to9:1302 ld a,(MenuOptionSelected?Backup) 1303 ld c,a1304 ld a,(MenuOptionSelected?BackupLastFrame)13051307 .go:1308 ld b,a1309 ld a,151310 sub a,b 1311 ld ix,(plxcurrentheroAddress)1312 ld d,01313 ld e,a1314 add ix,de 1315 ld a,(ix+HeroInventory) 1316 cp 046 1317 jp nc,.UnableToSwapItems 1318 1319 sub 51320 ld b,151321 jr c,.InventorySlotFound 1322 sub 51323 ld b,141324 jr c,.InventorySlotFound 1325 sub 51326 ld b,131327 jr c,.InventorySlotFound 1328 sub 51329 ld b,121330 jr c,.InventorySlotFound 1331 sub 51332 ld b,111333 jr c,.InventorySlotFound 1334 sub 51335 ld b,101336 jr c,.InventorySlotFound 1337 sub 51338 ld b,091339 jr c,.InventorySlotFound 1340 sub 51341 ld b,081342 jr c,.InventorySlotFound 1343 sub 51344 ld b,071345 jr c,.InventorySlotFound 1347 jp SwapInventoryItems 1349 .InventorySlotFound: 1350 ld a,c1351 cp b1352 jp nz,.UnableToSwapItems13531354 jp SwapInventoryItems 1356 .UnableToSwapItems:1357 ld a,(MenuOptionSelected?Backup) 1358 ld b,a1359 ld a,151360 sub a,b1361 13621368 ld ix,HeroOverviewInventoryIconButtonTable1369 ld de,HeroOverviewInventoryIconButtonTableLenghtPerIcon1370 .loop2:1371 jr z,.Found21372 add ix,de1373 dec a1374 jr .loop21376 .Found2: 1377 ld (ix+2),%1000 0011 1378 ld a,(MenuOptionSelected?Backup) 1379 ld (MenuOptionSelected?BackupLastFrame),a1380 ret1382SwapInventoryItems: 1383 push iy1385 ld a,(MenuOptionSelected?Backup) 1386 ld b,a1387 ld a,151388 sub a,b 1389 ld ix,(plxcurrentheroAddress)1390 ld d,01391 ld e,a1392 add ix,de 1394 ld a,(MenuOptionSelected?BackupLastFrame)1395 ld b,a1396 ld a,151397 sub a,b1398 ld iy,(plxcurrentheroAddress)1399 ld d,01400 ld e,a1401 add iy,de 1403 ld b,(iy+HeroInventory) 1404 ld a,(ix+HeroInventory) 1405 ld (iy+HeroInventory),a 1406 ld (ix+HeroInventory),b 1408 pop iy1410 xor a1411 ld (MenuOptionSelected?),a1412 ld a,2551413 ld (MenuOptionSelected?Backup),a 1414 ld (MenuOptionSelected?BackupLastFrame),a1416 pop af 1417 ld a,11418 ld (SetSkillsDescription?),a 1419 jp HeroOverviewInventoryWindowCode 1421SetTextInventoryItem: 1422 ld a,(SetSkillsDescription?)1423 dec a1424 ret z1425 ld (SetSkillsDescription?),a 1427 ld a,(MenuOptionSelected?Backup) 1428 ld b,a1429 ld a,151430 sub a,b1431 1432 ld ix,(plxcurrentheroAddress)1433 ld d,01434 ld e,a1435 add ix,de 1436 ld a,(ix+HeroInventory) 1437 1438 ld ix,InventoryDescriptionList1439 add a,a 1440 ld e,a1441 add ix,de1442 ld l,(ix)1443 ld h,(ix+1)1444 .SetText:1446 ld b,HeroOverViewSpellBookWindowDX + 030 + 11447 ld c,HeroOverViewSpellBookWindowDY + 159 - 161448 jp SetText1450InventoryDescriptionList:1451 dw DescriptionSword1, DescriptionSword2, DescriptionSword3, DescriptionSword4, DescriptionSword51452 dw DescriptionArmor1, DescriptionArmor2, DescriptionArmor3, DescriptionArmor4, DescriptionArmor51453 dw DescriptionShield1, DescriptionShield2, DescriptionShield3, DescriptionShield4, DescriptionShield51454 dw DescriptionHelmet1, DescriptionHelmet2, DescriptionHelmet3, DescriptionHelmet4, DescriptionHelmet51455 dw DescriptionBoots1, DescriptionBoots2, DescriptionBoots3, DescriptionBoots4, DescriptionBoots51456 dw DescriptionGloves1, DescriptionGloves2, DescriptionGloves3, DescriptionGloves4, DescriptionGloves51457 dw DescriptionRing1, DescriptionRing2, DescriptionRing3, DescriptionRing4, DescriptionRing51458 dw DescriptionNecklace1, DescriptionNecklace2, DescriptionNecklace3, DescriptionNecklace4, DescriptionNecklace51459 dw DescriptionRobe1, DescriptionRobe2, DescriptionRobe3, DescriptionRobe4, DescriptionRobe51460 dw DescriptionEmpty1461 dw DescriptionScrollEarth1, DescriptionScrollEarth2, DescriptionScrollEarth3, DescriptionScrollEarth41462 dw DescriptionScrollFire1, DescriptionScrollFire2, DescriptionScrollFire3, DescriptionScrollFire41463 dw DescriptionScrollAir1, DescriptionScrollAir2, DescriptionScrollAir3, DescriptionScrollAir41464 dw DescriptionScrollWater1, DescriptionScrollWater2, DescriptionScrollWater3, DescriptionScrollWater41465 dw DescriptionScrollUniversal1, DescriptionScrollUniversal2, DescriptionScrollUniversal3, DescriptionScrollUniversal41467 1468DescriptionSword1: db "Dagger Time",254 | DaggerTimeAttack: equ 1 1469 db "Attack +",DaggerTimeAttack+$30,2551471 1472DescriptionSword2: db "Sword of Bahrain",254 | SwordOfBahrainAttack: equ 21473 db "Attack +2",2551475 1476DescriptionSword3: db "Hell Slayer",254 | HellSlayerAttack: equ 5 | HellSlayerDefence: equ -21477 db "Attack +5",2541478 db "Defense -2",2551480 1481DescriptionSword4: db "The Butterfly",254 | ButterflyAttack: equ 1 | ButterflyDefence: equ 1 | ButterflyIntelligence: equ 1 | ButterflySpellDamage: equ 11482 db "All primary attributes",2541483 db "+1",2551485 1486DescriptionSword5: db "swiftblade",254 | SwiftbladeAttack: equ 5 | SwiftbladeUnitSpeed: equ 11487 db "Attack + 5",2541488 db "Unit movement speed +1",2551490 1491DescriptionArmor1: db "Regalia Di Pleb",254 | RegaliaDiPlebDefence: equ 1 | RegaliaDiPlebUnitSpeed: equ 11492 db "Defense +1",2541493 db "Unit movement speed +1",2551495 1496DescriptionArmor2: db "Young Blood's Armor",254 | YoungBloodsArmorDefence: equ 21497 db "Defense +2",2551499 1500DescriptionArmor3: db "The Juggernaut",254 | TheJuggernautDefence: equ 4 | TheJuggernautUnitSpeed: equ -11501 db "Defense +4",2541502 db "Unit movement speed - 1",2551504 1505DescriptionArmor4: db "Yojimbo the Ronin",254 | YojumboTheRoninDefence: equ 41506 db "Defense +4",2541507 db "-2.5% enemy spell damage",2551509 1510DescriptionArmor5: db "Caesar's Chestplate",254 | CeasarsChestplateDefence: equ 5 | CaesarsChestplateUnitHp: equ 21511 db "Defense +5",2541512 db "Max hp units +2",2551514 1515DescriptionShield1: db "Greenleaf Shield",254 | GreenleafShieldDefence: equ 11516 db "Defense +1",2551518 1519DescriptionShield2: db "Wooden shield",254 | WoodenShieldDefence: equ 21520 db "Defense +2",2551522 1523 db "Defense +3",2541524DescriptionShield3: db "The Bram Stoker",254 | TheBramStokerDefence: equ 21525 db "Defense +2",2551526 db "-5% enemy spell damage",2551528 1529DescriptionShield4: db "Impenetrable shield",254 | ImpenetrableShieldDefence: equ 41530 db "Defense +4",2551532 1533DescriptionShield5: db "Hallowed Roundel",254 | TrainingShieldDefence: equ 51534 db "Defense +5",2551536 1537DescriptionHelmet1: db "Yatta Shi-ne",254 | YattaShiNeDefence: equ 1 | YattaShiNeSpellDamage: equ 11538 db "Spell power +1",2541539 db "Defense +1",2551541 1542DescriptionHelmet2: db "Fire hood",2541543 db "Spell power +2",254 | FireHoodSpellDamage: equ 21544 db "+2.5% spell damage",2551546 1547DescriptionHelmet3: db "Cerebro",2541548 db "Intelligence +3",255 | CerebroIntelligence: equ 31550 1551DescriptionHelmet4: db "The Viridescent",254 | TheViridescentDefence: equ 3 | TheViridescentUnitHp: equ 31552 db "Defense +3",2541553 db "Max hp units +3",2551555 1556DescriptionHelmet5: db "Pikemen's Helmet",254 | PikemensHelmetDefence: equ 5 | PikemensHelmetUnitSpeed: equ 11557 db "Defense +5",2541558 db "Unit movement speed +1",2551560 1561DescriptionBoots1: db "Shadow Tramper",254 | ShadowTramperUnitSpeed: equ 11562 db "Unit movement speed +1",2551564 1565DescriptionBoots2: db "Dusk Rover",2541566 db "-2.5% enemy spell damage",2551568 1569DescriptionBoots3: db "Planeswalkers",2541570 db "+3 max movement points",2541571 db "for hero on worldmap",2551573 1574DescriptionBoots4: db "Knight's Night Slippers",2541575 db "-7.5% enemy spell damage",2551577 1578DescriptionBoots5: db "Sturdy Boots",254 | SturdyBootsUnitSpeed: equ 31579 db "Unit movement speed +3",2551581 1582DescriptionGloves1: db "Gripfast",2541583 db "+2 max movement points",2541584 db "for hero on worldmap",2551586 1587DescriptionGloves2: db "Iron Hand",254 | IronHandUnitSpeed: equ -11588 db "-5% enemy spell damage",2541589 db "Unit movement speed -1",2551591 1592DescriptionGloves3: db "Elk Skin Gloves",254 | ElkSkinGlovesUnitHp: equ 2 | ElkSkinGlovesAttack: equ 21593 db "Attack +2",2541594 db "Max hp units +2",2551596 1597DescriptionGloves4: db "Venomous gauntlet",2541598 db "+7.5% spell damage",2551600 1601DescriptionGloves5: db "Emerald Gloves",254 | EmeraldGlovesIntelligence: equ 51602 db "Intelligence +5",2551604 1605DescriptionRing1: db "Small Ring",254 | SmallRingSpellDamage: equ 11606 db "Spell power +1",2551608 1609DescriptionRing2: db "Cyclops",254 | CyclopsIntelligence: equ 21610 db "Intelligence +2",2551612 1613DescriptionRing3: db "Scarlet Ring",254 | ScarletRingAttack: equ 1 | ScarletRingDefence: equ 1 | ScarletRingIntelligence: equ 1 | ScarletRingSpellPower: equ 1 1614 db "All primary attributes",2541615 db "+1",2551617 1618DescriptionRing4: db "Bronze Ring",2541619 db "-7.5% enemy spell damage",2551621 1622DescriptionRing5: db "Hypnotising Ring",2541623 db "-10% enemy spell damage",2551625 1626DescriptionNecklace1: db "The Blue Topaz",2541627 db "-2.5% enemy spell damage",2551629 1630DescriptionNecklace2: db "Good Luck Charm",2541631 db "+5% spell damage",2551633 1634DescriptionNecklace3: db "Negligee of Teeth",254 | NegligeeOfTeethIntelligence: equ 1 | NegligeeOfTeethSpellPower: equ 21635 db "Intelligence +1",2541636 db "Spell power +2",2551638 1639DescriptionNecklace4: db "Skull of the Unborn",2541640 db "Increases Necromancy",2541641 db "skill by 10%",2551643 1644DescriptionNecklace5: db "The Choker",254 | TheChokerSpellPower: equ 61645 db "Spell power +6",2551647 1648DescriptionRobe1: db "The King's Garment",2541649 db "Increases wealth by",2541650 db "125 gold per day",2551652 1653DescriptionRobe2: db "Priest's Cope",254 | PriestsCopeIntelligence: equ 2 1654 db "-2.5% enemy spell damage",2541655 db "Intelligence +2",2551657 1658DescriptionRobe3: db "Enchanted Robe",254 | EnchantedRobeSpellPower: equ 31659 db "Spell power +3",2551661 1662DescriptionRobe4: db "Rural Vest",254 | RuralVestUnitHp: equ 41663 db "Max hp units +4",2551665 1666DescriptionRobe5: db "Labcoat",254 | LabCoatSpellPower: equ 7 | LabcoatUnitHp: equ -21667 db "Spell power +7",2541668 db "Max hp units -2",2551670 1671DescriptionEmpty: db 2551673 1674DescriptionScrollEarth1: db "SpellScroll: Earthbound",2551675DescriptionScrollEarth2: db "SpellScroll: Plate Armor",2551676DescriptionScrollEarth3: db "SpellScroll: Resurrection",2551677DescriptionScrollEarth4: db "SpellScroll: Earthshock",2551679DescriptionScrollFire1: db "SpellScroll: Curse",2551680DescriptionScrollFire2: db "SpellScroll: Blinding Fog",2551681DescriptionScrollFire3: db "SpellScroll: Implosion",2551682DescriptionScrollFire4: db "SpellScroll: Sunstrike",2551684DescriptionScrollAir1: db "SpellScroll: Haste",2551685DescriptionScrollAir2: db "SpellScroll: ShieldBreaker",2551686DescriptionScrollAir3: db "SpellScroll: Claw Back",2551687DescriptionScrollAir4: db "SpellScroll: Spell Bubble",2551689DescriptionScrollWater1: db "SpellScroll: Cure",2551690DescriptionScrollWater2: db "SpellScroll: Ice Peak",2551691DescriptionScrollWater3: db "SpellScroll: Hypnosis",2551692DescriptionScrollWater4: db "SpellScroll: Frost Ring",2551694DescriptionScrollUniversal1: db "SpellScroll: Magic Arrows",2551695DescriptionScrollUniversal2: db "SpellScroll: Frenzy",2551696DescriptionScrollUniversal3: db "SpellScroll: Teleport",2551697DescriptionScrollUniversal4: db "SpellScroll: Primal Instinct",2551699CreateInventoryListForCurrHero: 1700 ld ix,(plxcurrentheroAddress)1701 ld iy,ButtonTableInventoryIconsSYSX1703 ld b,9+6 1705 .loop:1706 ld a,(ix+HeroInventory) 1707 call CheckScrollIcon 1708 add a,a 1709 add a,a 1710 ld d,01711 ld e,a1712 ld hl,InventoryIconTableSYSX1713 add hl,de1714 ld a,(hl)1715 ld (iy+0),a 1716 inc hl1717 ld a,(hl)1718 ld (iy+1),a 1719 inc hl1720 ld a,(hl)1721 ld (iy+2),a 1722 inc hl1723 ld a,(hl)1724 ld (iy+3),a 1725 ld de,61726 add iy,de 1727 inc ix 1728 djnz .loop1729 ret1731CheckScrollIcon:1732 cp ScrollIconNR1733 ret c1734 ld a,ScrollIconNR1735 ret1737SetInventoryIcons:1738 ld ix,(plxcurrentheroAddress)1740 call .SetIconHLBCandA1741 ld de,$0000 + (InventoryItem01DY*128) + (InventoryItem01DX/2)1742 call CopyRamToVramCorrectedCastleOverview 1744 call .SetIconHLBCandA 1745 ld de,$0000 + (InventoryItem02DY*128) + (InventoryItem02DX/2)1746 call CopyRamToVramCorrectedCastleOverview 1748 call .SetIconHLBCandA 1749 ld de,$0000 + (InventoryItem03DY*128) + (InventoryItem03DX/2)1750 call CopyRamToVramCorrectedCastleOverview 1752 call .SetIconHLBCandA 1753 ld de,$0000 + (InventoryItem04DY*128) + (InventoryItem04DX/2)1754 call CopyRamToVramCorrectedCastleOverview 1756 call .SetIconHLBCandA 1757 ld de,$0000 + (InventoryItem05DY*128) + (InventoryItem05DX/2)1758 call CopyRamToVramCorrectedCastleOverview 1760 call .SetIconHLBCandA 1761 ld de,$0000 + (InventoryItem06DY*128) + (InventoryItem06DX/2)1762 call CopyRamToVramCorrectedCastleOverview 1764 call .SetIconHLBCandA 1765 ld de,$0000 + (InventoryItem07DY*128) + (InventoryItem07DX/2)1766 call CopyRamToVramCorrectedCastleOverview 1768 call .SetIconHLBCandA 1769 ld de,$0000 + (InventoryItem08DY*128) + (InventoryItem08DX/2)1770 call CopyRamToVramCorrectedCastleOverview 1772 call .SetIconHLBCandA 1773 ld de,$0000 + (InventoryItem09DY*128) + (InventoryItem09DX/2)1774 call CopyRamToVramCorrectedCastleOverview 1776 1777 call .SetIconHLBCandA 1778 ld de,$0000 + (InventoryItem10DY*128) + (InventoryItem10DX/2)1779 call CopyRamToVramCorrectedCastleOverview 1781 call .SetIconHLBCandA 1782 ld de,$0000 + (InventoryItem11DY*128) + (InventoryItem11DX/2)1783 call CopyRamToVramCorrectedCastleOverview 1785 call .SetIconHLBCandA 1786 ld de,$0000 + (InventoryItem12DY*128) + (InventoryItem12DX/2)1787 call CopyRamToVramCorrectedCastleOverview 1789 call .SetIconHLBCandA 1790 ld de,$0000 + (InventoryItem13DY*128) + (InventoryItem13DX/2)1791 call CopyRamToVramCorrectedCastleOverview 1793 call .SetIconHLBCandA 1794 ld de,$0000 + (InventoryItem14DY*128) + (InventoryItem14DX/2)1795 call CopyRamToVramCorrectedCastleOverview 1797 call .SetIconHLBCandA 1798 ld de,$0000 + (InventoryItem15DY*128) + (InventoryItem15DX/2)1799 call CopyRamToVramCorrectedCastleOverview 1800 ret1802 .SetIconHLBCandA:1803 ld a,(ix+HeroInventory) 1804 call CheckScrollIcon 1805 add a,a 1806 add a,a 1807 ld iy,InventoryIconTableSYSX1808 ld d,01809 ld e,a1810 add iy,de1811 ld l,(iy)1812 ld h,(iy+1)1813 inc ix1814 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1815 ld a,InventoryGraphicsBlock1816 ret1819PlaceWaterSpellsInSpellBook:1820 ld ix,(plxcurrentheroAddress)1822 1823 xor a1824 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1825 ld a,58 1826 call CheckSpellScrollAvailable 1827 jr z,.PlaceWaterSpellLevel11828 bit 0,(ix+HeroWaterSpells)1829 jr z,.EndPlaceWaterSpell11830 .PlaceWaterSpellLevel1:1831 ld a,%1000 00111832 ld (HeroOverviewSpellIconButtonTable_Water + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1833 1834 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281835 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1836 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1837 ld a,SpellBookGraphicsBlock 1838 call CopyRamToVramCorrectedCastleOverview 1839 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1281840 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1841 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1842 ld a,SpellBookGraphicsBlock 1843 call CopyRamToVramCorrectedCastleOverview 1844 .EndPlaceWaterSpell1:1846 xor a1847 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1848 ld a,59 1849 call CheckSpellScrollAvailable 1850 jr z,.PlaceWaterSpellLevel21851 bit 1,(ix+HeroWaterSpells)1852 jr z,.EndPlaceWaterSpell21853 .PlaceWaterSpellLevel2:1854 ld a,%1000 00111855 ld (HeroOverviewSpellIconButtonTable_Water + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1856 1857 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281858 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1859 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1860 ld a,SpellBookGraphicsBlock 1861 call CopyRamToVramCorrectedCastleOverview 1862 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1281863 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1864 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1865 ld a,SpellBookGraphicsBlock 1866 call CopyRamToVramCorrectedCastleOverview 1867 .EndPlaceWaterSpell2:1869 xor a1870 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1871 ld a,60 1872 call CheckSpellScrollAvailable 1873 jr z,.PlaceWaterSpellLevel31874 bit 2,(ix+HeroWaterSpells)1875 jr z,.EndPlaceWaterSpell31876 .PlaceWaterSpellLevel3: 1877 ld a,%1000 00111878 ld (HeroOverviewSpellIconButtonTable_Water + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1879 1880 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281881 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1882 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1883 ld a,SpellBookGraphicsBlock 1884 call CopyRamToVramCorrectedCastleOverview 1885 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1281886 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1887 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1888 ld a,SpellBookGraphicsBlock 1889 call CopyRamToVramCorrectedCastleOverview 1890 .EndPlaceWaterSpell3:1892 xor a1893 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1894 ld a,61 1895 call CheckSpellScrollAvailable 1896 jr z,.PlaceWaterSpellLevel41897 bit 3,(ix+HeroWaterSpells)1898 jr z,.EndPlaceWaterSpell41899 .PlaceWaterSpellLevel4: 1900 ld a,%1000 00111901 ld (HeroOverviewSpellIconButtonTable_Water + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1902 1903 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281904 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)1905 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1906 ld a,SpellBookGraphicsBlock 1907 call CopyRamToVramCorrectedCastleOverview 1908 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1281909 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)1910 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1911 ld a,SpellBookGraphicsBlock 1912 call CopyRamToVramCorrectedCastleOverview 1913 .EndPlaceWaterSpell4:1914 jp PlaceAllSpellSchoolSpellsInSpellBook1916PlaceAirSpellsInSpellBook:1917 ld ix,(plxcurrentheroAddress)1919 1920 xor a1921 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1922 ld a,54 1923 call CheckSpellScrollAvailable 1924 jr z,.PlaceAirSpellLevel11925 bit 0,(ix+HeroAirSpells)1926 jr z,.EndPlaceAirSpell11927 .PlaceAirSpellLevel1:1928 ld a,%1000 00111929 ld (HeroOverviewSpellIconButtonTable_Air + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1930 1931 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281932 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)1933 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1934 ld a,SpellBookGraphicsBlock 1935 call CopyRamToVramCorrectedCastleOverview 1936 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1281937 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)1938 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1939 ld a,SpellBookGraphicsBlock 1940 call CopyRamToVramCorrectedCastleOverview 1941 .EndPlaceAirSpell1:1943 xor a1944 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1945 ld a,55 1946 call CheckSpellScrollAvailable 1947 jr z,.PlaceAirSpellLevel21948 bit 1,(ix+HeroAirSpells)1949 jr z,.EndPlaceAirSpell21950 .PlaceAirSpellLevel2:1951 ld a,%1000 00111952 ld (HeroOverviewSpellIconButtonTable_Air + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1954 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281955 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)1956 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1957 ld a,SpellBookGraphicsBlock 1958 call CopyRamToVramCorrectedCastleOverview 1959 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1281960 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)1961 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1962 ld a,SpellBookGraphicsBlock 1963 call CopyRamToVramCorrectedCastleOverview 1964 .EndPlaceAirSpell2:1966 xor a1967 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1968 ld a,56 1969 call CheckSpellScrollAvailable 1970 jr z,.PlaceAirSpellLevel31971 bit 2,(ix+HeroAirSpells)1972 jr z,.EndPlaceAirSpell31973 .PlaceAirSpellLevel3:1974 ld a,%1000 00111975 ld (HeroOverviewSpellIconButtonTable_Air + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a1977 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1281978 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)1979 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)1980 ld a,SpellBookGraphicsBlock 1981 call CopyRamToVramCorrectedCastleOverview 1982 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1281983 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)1984 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)1985 ld a,SpellBookGraphicsBlock 1986 call CopyRamToVramCorrectedCastleOverview 1987 .EndPlaceAirSpell3:1989 xor a1990 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 1991 ld a,57 1992 call CheckSpellScrollAvailable 1993 jr z,.PlaceAirSpellLevel41994 bit 3,(ix+HeroAirSpells)1995 jr z,.EndPlaceAirSpell41996 .PlaceAirSpellLevel4:1997 ld a,%1000 00111998 ld (HeroOverviewSpellIconButtonTable_Air + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2000 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282001 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2002 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2003 ld a,SpellBookGraphicsBlock 2004 call CopyRamToVramCorrectedCastleOverview 2005 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282006 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2007 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2008 ld a,SpellBookGraphicsBlock 2009 call CopyRamToVramCorrectedCastleOverview 2010 .EndPlaceAirSpell4:2011 jp PlaceAllSpellSchoolSpellsInSpellBook2012 2013PlaceFireSpellsInSpellBook:2014 ld ix,(plxcurrentheroAddress)2016 2017 xor a2018 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2019 ld a,50 2020 call CheckSpellScrollAvailable 2021 jr z,.PlaceFireSpellLevel12022 bit 0,(ix+HeroFireSpells)2023 jr z,.EndPlaceFireSpell12024 .PlaceFireSpellLevel1:2025 ld a,%1000 00112026 ld (HeroOverviewSpellIconButtonTable_Fire + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2027 2028 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282029 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2030 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2031 ld a,SpellBookGraphicsBlock 2032 call CopyRamToVramCorrectedCastleOverview 2033 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282034 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2035 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2036 ld a,SpellBookGraphicsBlock 2037 call CopyRamToVramCorrectedCastleOverview 2038 .EndPlaceFireSpell1:2040 xor a2041 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2042 ld a,51 2043 call CheckSpellScrollAvailable 2044 jr z,.PlaceFireSpellLevel22045 bit 1,(ix+HeroFireSpells)2046 jr z,.EndPlaceFireSpell22047 .PlaceFireSpellLevel2:2048 ld a,%1000 00112049 ld (HeroOverviewSpellIconButtonTable_Fire + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2050 2051 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282052 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2053 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2054 ld a,SpellBookGraphicsBlock 2055 call CopyRamToVramCorrectedCastleOverview 2056 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282057 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2058 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2059 ld a,SpellBookGraphicsBlock 2060 call CopyRamToVramCorrectedCastleOverview 2061 .EndPlaceFireSpell2:2063 xor a2064 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2065 ld a,52 2066 call CheckSpellScrollAvailable 2067 jr z,.PlaceFireSpellLevel32068 bit 2,(ix+HeroFireSpells)2069 jr z,.EndPlaceFireSpell32070 .PlaceFireSpellLevel3:2071 ld a,%1000 00112072 ld (HeroOverviewSpellIconButtonTable_Fire + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2073 2074 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282075 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2076 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2077 ld a,SpellBookGraphicsBlock 2078 call CopyRamToVramCorrectedCastleOverview 2079 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282080 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2081 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2082 ld a,SpellBookGraphicsBlock 2083 call CopyRamToVramCorrectedCastleOverview 2084 .EndPlaceFireSpell3:2086 xor a2087 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2088 ld a,53 2089 call CheckSpellScrollAvailable 2090 jr z,.PlaceFireSpellLevel42091 bit 3,(ix+HeroFireSpells)2092 jr z,.EndPlaceFireSpell42093 .PlaceFireSpellLevel4:2094 ld a,%1000 00112095 ld (HeroOverviewSpellIconButtonTable_Fire + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2097 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282098 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2099 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2100 ld a,SpellBookGraphicsBlock 2101 call CopyRamToVramCorrectedCastleOverview 2102 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282103 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2104 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2105 ld a,SpellBookGraphicsBlock 2106 call CopyRamToVramCorrectedCastleOverview 2107 .EndPlaceFireSpell4:2108 jp PlaceAllSpellSchoolSpellsInSpellBook2111CheckSpellScrollAvailable: 2112 cp (ix+HeroInventory+9)2113 ret z2114 cp (ix+HeroInventory+10)2115 ret z2116 cp (ix+HeroInventory+11)2117 ret z2118 cp (ix+HeroInventory+12)2119 ret z2120 cp (ix+HeroInventory+13)2121 ret z2122 cp (ix+HeroInventory+14)2123 ret2124 2125PlaceEarthSpellsInSpellBook:2126 ld ix,(plxcurrentheroAddress)2128 2129 xor a2130 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2131 ld a,46 2132 call CheckSpellScrollAvailable 2133 jr z,.PlaceEarthSpellLevel12134 bit 0,(ix+HeroEarthSpells)2135 jr z,.EndPlaceEarthSpell12136 .PlaceEarthSpellLevel1:2137 ld a,%1000 00112138 ld (HeroOverviewSpellIconButtonTable_Earth + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2139 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282140 ld de,$0000 + (HeroOverViewSpell1backdropDY*128) + (HeroOverViewSpell1backdropDX/2)2141 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2142 ld a,SpellBookGraphicsBlock 2143 call CopyRamToVramCorrectedCastleOverview 2144 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282145 ld de,$0000 + (Spell1DY*128) + (Spell1DX/2)2146 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2147 ld a,SpellBookGraphicsBlock 2148 call CopyRamToVramCorrectedCastleOverview 2149 .EndPlaceEarthSpell1:2151 xor a2152 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2153 ld a,47 2154 call CheckSpellScrollAvailable 2155 jr z,.PlaceEarthSpellLevel22156 bit 1,(ix+HeroEarthSpells)2157 jr z,.EndPlaceEarthSpell22158 .PlaceEarthSpellLevel2:2159 ld a,%1000 00112160 ld (HeroOverviewSpellIconButtonTable_Earth + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2161 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282162 ld de,$0000 + (HeroOverViewSpell2backdropDY*128) + (HeroOverViewSpell2backdropDX/2)2163 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2164 ld a,SpellBookGraphicsBlock 2165 call CopyRamToVramCorrectedCastleOverview 2166 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282167 ld de,$0000 + (Spell2DY*128) + (Spell2DX/2)2168 ld bc,$0000 + (SpellIconNY* 256) + (SpellIconNX/2)2169 ld a,SpellBookGraphicsBlock 2170 call CopyRamToVramCorrectedCastleOverview 2171 .EndPlaceEarthSpell2:2173 xor a2174 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2175 ld a,48 2176 call CheckSpellScrollAvailable 2177 jr z,.PlaceEarthSpellLevel32178 bit 2,(ix+HeroEarthSpells)2179 jr z,.EndPlaceEarthSpell32180 .PlaceEarthSpellLevel3:2181 ld a,%1000 00112182 ld (HeroOverviewSpellIconButtonTable_Earth + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2183 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282184 ld de,$0000 + (HeroOverViewSpell3backdropDY*128) + (HeroOverViewSpell3backdropDX/2)2185 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2186 ld a,SpellBookGraphicsBlock 2187 call CopyRamToVramCorrectedCastleOverview 2188 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282189 ld de,$0000 + (Spell3DY*128) + (Spell3DX/2)2190 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2191 ld a,SpellBookGraphicsBlock 2192 call CopyRamToVramCorrectedCastleOverview 2193 .EndPlaceEarthSpell3:2195 xor a2196 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2197 ld a,49 2198 call CheckSpellScrollAvailable 2199 jr z,.PlaceEarthSpellLevel42200 bit 3,(ix+HeroEarthSpells)2201 jr z,.EndPlaceEarthSpell42202 .PlaceEarthSpellLevel4:2203 ld a,%1000 00112204 ld (HeroOverviewSpellIconButtonTable_Earth + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a2205 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282206 ld de,$0000 + (HeroOverViewSpell4backdropDY*128) + (HeroOverViewSpell4backdropDX/2)2207 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2208 ld a,SpellBookGraphicsBlock 2209 call CopyRamToVramCorrectedCastleOverview 2210 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282211 ld de,$0000 + (Spell4DY*128) + (Spell4DX/2)2212 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2213 ld a,SpellBookGraphicsBlock 2214 call CopyRamToVramCorrectedCastleOverview 2215 .EndPlaceEarthSpell4:2216 jp PlaceAllSpellSchoolSpellsInSpellBook2218PlaceAllSpellSchoolSpellsInSpellBook:2219 ld ix,(plxcurrentheroAddress)2220 2221 2222 xor a2223 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2224 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2225 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2226 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2227 ld a,62 2228 call CheckSpellScrollAvailable 2229 jr z,.PlaceUniversalSpellLevel12230 bit 0,(ix+HeroAllSchoolsSpells)2231 jr z,.EndPlaceAllSchoolsSpell1 2232 .PlaceUniversalSpellLevel1:2233 ld a,%1000 00112234 ld (HeroOverviewSpellIconButtonTable_Earth + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2235 ld (HeroOverviewSpellIconButtonTable_Fire+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2236 ld (HeroOverviewSpellIconButtonTable_Air + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2237 ld (HeroOverviewSpellIconButtonTable_Water+ (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2238 2239 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282240 ld de,$0000 + (HeroOverViewSpell5backdropDY*128) + (HeroOverViewSpell5backdropDX/2)2241 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2242 ld a,SpellBookGraphicsBlock 2243 call CopyRamToVramCorrectedCastleOverview 2244 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282245 ld de,$0000 + (Spell5DY*128) + (Spell5DX/2)2246 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2247 ld a,SpellBookGraphicsBlock 2248 call CopyRamToVramCorrectedCastleOverview 2249 .EndPlaceAllSchoolsSpell1:2251 xor a2252 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2253 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2254 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2255 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2256 ld a,63 2257 call CheckSpellScrollAvailable 2258 jr z,.PlaceUniversalSpellLevel22259 bit 1,(ix+HeroAllSchoolsSpells)2260 jr z,.EndPlaceAllSchoolsSpell2 2261 .PlaceUniversalSpellLevel2:2262 ld a,%1000 00112263 ld (HeroOverviewSpellIconButtonTable_Earth + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2264 ld (HeroOverviewSpellIconButtonTable_Fire+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2265 ld (HeroOverviewSpellIconButtonTable_Air + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2266 ld (HeroOverviewSpellIconButtonTable_Water+ (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2268 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282269 ld de,$0000 + (HeroOverViewSpell6backdropDY*128) + (HeroOverViewSpell6backdropDX/2)2270 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2271 ld a,SpellBookGraphicsBlock 2272 call CopyRamToVramCorrectedCastleOverview 2273 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282274 ld de,$0000 + (Spell6DY*128) + (Spell6DX/2)2275 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2276 ld a,SpellBookGraphicsBlock 2277 call CopyRamToVramCorrectedCastleOverview 2278 .EndPlaceAllSchoolsSpell2:2280 xor a2281 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2282 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2283 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2284 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2285 ld a,64 2286 call CheckSpellScrollAvailable 2287 jr z,.PlaceUniversalSpellLevel32288 bit 2,(ix+HeroAllSchoolsSpells)2289 jr z,.EndPlaceAllSchoolsSpell3 2290 .PlaceUniversalSpellLevel3:2291 ld a,%1000 00112292 ld (HeroOverviewSpellIconButtonTable_Earth + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2293 ld (HeroOverviewSpellIconButtonTable_Fire+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2294 ld (HeroOverviewSpellIconButtonTable_Air + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2295 ld (HeroOverviewSpellIconButtonTable_Water+ (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2297 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282298 ld de,$0000 + (HeroOverViewSpell7backdropDY*128) + (HeroOverViewSpell7backdropDX/2)2299 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2300 ld a,SpellBookGraphicsBlock 2301 call CopyRamToVramCorrectedCastleOverview 2302 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282303 ld de,$0000 + (Spell7DY*128) + (Spell7DX/2)2304 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2305 ld a,SpellBookGraphicsBlock 2306 call CopyRamToVramCorrectedCastleOverview 2307 .EndPlaceAllSchoolsSpell3:2309 xor a2310 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2311 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2312 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2313 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2314 ld a,65 2315 call CheckSpellScrollAvailable 2316 jr z,.PlaceUniversalSpellLevel42317 bit 3,(ix+HeroAllSchoolsSpells)2318 jr z,.EndPlaceAllSchoolsSpell42319 .PlaceUniversalSpellLevel4:2320 ld a,%1000 00112321 ld (HeroOverviewSpellIconButtonTable_Earth + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2322 ld (HeroOverviewSpellIconButtonTable_Fire+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2323 ld (HeroOverviewSpellIconButtonTable_Air + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2324 ld (HeroOverviewSpellIconButtonTable_Water+ (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 2326 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1282327 ld de,$0000 + (HeroOverViewSpell8backdropDY*128) + (HeroOverViewSpell8backdropDX/2)2328 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)2329 ld a,SpellBookGraphicsBlock 2330 call CopyRamToVramCorrectedCastleOverview 2331 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282332 ld de,$0000 + (Spell8DY*128) + (Spell8DX/2)2333 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)2334 ld a,SpellBookGraphicsBlock 2335 call CopyRamToVramCorrectedCastleOverview 2336 .EndPlaceAllSchoolsSpell4:2337 ret2340HeroOverviewSpellBookWindowCode_Water:23412342 call SetHeroOverViewSpellBookWindow 2343 call ClearWhiteWindow2344 call ActivateButton_Water2345 call PlaceWaterSpellsInSpellBook2346 call SwapAndSetPage 2347 call SetHeroOverViewSpellBookWindow 2348 call ClearWhiteWindow2349 call ActivateButton_Water2350 call PlaceWaterSpellsInSpellBook2352 .engine:2353 call PopulateControls 2355 ld a,(Controls)2356 bit 5,a 2357 ret nz2358 2359 ld ix,HeroOverviewSpellBookButtonTable_Water2360 ld iy,ButtonTableSpellBookSYSX_Water2361 call CheckButtonMouseInteraction2362 ld a,(MenuOptionSelected?)2363 or a2364 jp nz,.ElementalButtonPressed2366 call CheckEndHeroOverviewSpellBook 2368 ld ix,HeroOverviewSpellBookButtonTable_Water2369 call SetButtonStatusAndText2 23742377 ld ix,HeroOverviewSpellIconButtonTable_Water2378 ld iy,ButtonTableSpellIconsWaterSYSX2379 call CheckButtonMouseInteraction2381 ld a,(MenuOptionSelected?)2382 or a2383 jp nz,.SpellIconPressed23852387 call SetSpellExplanation_Water 2389 ld ix,HeroOverviewSpellIconButtonTable_Water2390 call SetButtonStatusAndText2 23922395 2396 call SwapAndSetPage 2398 halt2399 jp .engine2401 .ElementalButtonPressed:2402 cp 1 2403 jp z,AirSelected2404 cp 2 2405 jp z,FireSelected2406 cp 3 2407 jp z,EarthSelected2408 ret2412 .SpellIconPressed:2413 ld (MenuOptionSelected?Backup),a2414 xor a2415 ld (MenuOptionSelected?),a24162417 ld a,32418 ld (SetSkillsDescription?),a 2419 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112420 jp HeroOverviewSpellBookWindowCode_Water2442HeroOverviewSpellBookWindowCode_Air:24432444 call SetHeroOverViewSpellBookWindow 2445 call ClearWhiteWindow2446 call ActivateButton_Air2447 call PlaceAirSpellsInSpellBook2448 call SwapAndSetPage 2449 call SetHeroOverViewSpellBookWindow 2450 call ClearWhiteWindow2451 call ActivateButton_Air2452 call PlaceAirSpellsInSpellBook2454 .engine:2455 call PopulateControls 2457 ld a,(Controls)2458 bit 5,a 2459 ret nz2460 2461 ld ix,HeroOverviewSpellBookButtonTable_Air2462 ld iy,ButtonTableSpellBookSYSX_Air2463 call CheckButtonMouseInteraction2464 ld a,(MenuOptionSelected?)2465 or a2466 jp nz,.ElementalButtonPressed2468 call CheckEndHeroOverviewSpellBook 2470 ld ix,HeroOverviewSpellBookButtonTable_Air2471 call SetButtonStatusAndText2 24752478 ld ix,HeroOverviewSpellIconButtonTable_Air2479 ld iy,ButtonTableSpellIconsAirSYSX2480 call CheckButtonMouseInteraction2482 ld a,(MenuOptionSelected?)2483 or a2484 jp nz,.SpellIconPressed24862488 call SetSpellExplanation_Air 2490 ld ix,HeroOverviewSpellIconButtonTable_Air2491 call SetButtonStatusAndText2 24932496 call SwapAndSetPage 2498 halt2499 jp .engine2501 .ElementalButtonPressed:2502 cp 1 2503 jp z,WaterSelected2504 cp 2 2505 jp z,FireSelected2506 cp 3 2507 jp z,EarthSelected2508 ret2509 2513 .SpellIconPressed:2514 ld (MenuOptionSelected?Backup),a2515 xor a2516 ld (MenuOptionSelected?),a25172518 ld a,32519 ld (SetSkillsDescription?),a 2520 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112521 jp HeroOverviewSpellBookWindowCode_Air2524 2525 2526 2527 2528 2529 2530 2531HeroOverviewSpellBookWindowCode_Fire:25322533 call SetHeroOverViewSpellBookWindow 2534 call ClearWhiteWindow2535 call ActivateButton_Fire2536 call PlaceFireSpellsInSpellBook2537 call SwapAndSetPage 2538 call SetHeroOverViewSpellBookWindow 2539 call ClearWhiteWindow2540 call ActivateButton_Fire2541 call PlaceFireSpellsInSpellBook2543 .engine:2544 call PopulateControls 2546 ld a,(Controls)2547 bit 5,a 2548 ret nz2549 2550 ld ix,HeroOverviewSpellBookButtonTable_Fire2551 ld iy,ButtonTableSpellBookSYSX_Fire2552 call CheckButtonMouseInteraction2553 ld a,(MenuOptionSelected?)2554 or a2555 jp nz,.ElementalButtonPressed2557 call CheckEndHeroOverviewSpellBook 2559 ld ix,HeroOverviewSpellBookButtonTable_Fire2560 call SetButtonStatusAndText2 25662569 ld ix,HeroOverviewSpellIconButtonTable_Fire2570 ld iy,ButtonTableSpellIconsFireSYSX2571 call CheckButtonMouseInteraction2573 ld a,(MenuOptionSelected?)2574 or a2575 jp nz,.SpellIconPressed25772579 call SetSpellExplanation_Fire 2581 ld ix,HeroOverviewSpellIconButtonTable_Fire2582 call SetButtonStatusAndText2 25842589 call SwapAndSetPage 2591 halt2592 jp .engine2594 .ElementalButtonPressed:2595 cp 1 2596 jp z,WaterSelected2597 cp 2 2598 jp z,AirSelected2599 cp 3 2600 jp z,EarthSelected2601 ret2610 .SpellIconPressed:2611 ld (MenuOptionSelected?Backup),a2612 xor a2613 ld (MenuOptionSelected?),a26142615 ld a,32616 ld (SetSkillsDescription?),a 2617 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112618 jp HeroOverviewSpellBookWindowCode_Fire2636HeroOverviewSpellBookWindowCode_Earth:263926422643 call SetHeroOverViewSpellBookWindow 2644 call ClearWhiteWindow2645 call ActivateButton_Earth 2646 call PlaceEarthSpellsInSpellBook 2647 call SwapAndSetPage 2648 call SetHeroOverViewSpellBookWindow 2649 call ClearWhiteWindow2650 call ActivateButton_Earth2651 call PlaceEarthSpellsInSpellBook 2653 .engine:2654 call PopulateControls 2656 ld a,(Controls)2657 bit 5,a 2658 ret nz2660 ld ix,HeroOverviewSpellBookButtonTable_Earth2661 ld iy,ButtonTableSpellBookSYSX_Earth2662 call CheckButtonMouseInteraction2663 ld a,(MenuOptionSelected?)2664 or a2665 jp nz,.ElementalButtonPressed2667 call CheckEndHeroOverviewSpellBook 2669 ld ix,HeroOverviewSpellBookButtonTable_Earth2670 call SetButtonStatusAndText2 26732676 ld ix,HeroOverviewSpellIconButtonTable_Earth2677 ld iy,ButtonTableSpellIconsEarthSYSX2678 call CheckButtonMouseInteraction2680 ld a,(MenuOptionSelected?)2681 or a2682 jp nz,.SpellIconPressed26842686 call SetSpellExplanation_Earth 2688 ld ix,HeroOverviewSpellIconButtonTable_Earth2689 call SetButtonStatusAndText2 269126942698270227042717 call SwapAndSetPage 2719 halt2720 jp .engine2726 .SpellIconPressed:2727 ld (MenuOptionSelected?Backup),a2728 xor a2729 ld (MenuOptionSelected?),a27302731 ld a,32732 ld (SetSkillsDescription?),a 2733 ld (ix+HeroOverviewWindowButtonStatus),%1000 00112734 jp HeroOverviewSpellBookWindowCode_Earth2736 .ElementalButtonPressed:2737 cp 1 2738 jp z,WaterSelected2739 cp 2 2740 jp z,AirSelected2741 cp 3 2742 jp z,FireSelected2743 ret2745ClearWhiteWindow:2746 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+28)/2) -1282747 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2748 ld bc,$0000 + (18*256) + (20/2)2749 ld a,SpellBookGraphicsBlock2750 jp CopyRamToVramCorrectedCastleOverview 2752SetWhiteWindow:2753 ld hl,$4000 + ((HeroOverViewSpellBookWindowSY+159)*128) + ((HeroOverViewSpellBookWindowSX+008)/2) -1282754 ld de,$0000 + ((HeroOverViewSpellBookWindowDY+159)*128) + ((HeroOverViewSpellBookWindowDX+008)/2)2755 ld bc,$0000 + (18*256) + (20/2)2756 ld a,SpellBookGraphicsBlock2757 jp CopyRamToVramCorrectedCastleOverview 2759SpellDescriptions:2761.DescriptionEarth4: db "Earthbound",2542762 db "Reduces the speed of the selected",2542763 db "enemy unit by 50%",2552765.DescriptionEarth3: db "Plate Armor",2542766 db "Increases the defense of the selected",2542767 db "friendly unit by 5.",2552769.DescriptionEarth2: db "Resurrection",2542770 db "Revives a segment of deceased",2542771 db "friendly living creatures.",2552773.DescriptionEarth1: db "Earthshock",2542774 db "Deals damage to all creatures in target",2542775 db "and adjacent hexes.",2552778.DescriptionFire4: db "Curse",2542779 db "Causes the selected enemy unit to deal",2542780 db "-3 damage when attacking.",2552782.DescriptionFire3: db "Blinding Fog",2542783 db "Target ranged unit deals 50% less",2542784 db "damage.",2552786.DescriptionFire2: db "Implosion",2542787 db "Deals damage to enemy unit and",2542788 db "adjecent units.",2552790.DescriptionFire1: db "Sunstrike",2542791 db "Calls down a solar beam to incinerate",2542792 db "a single enemy unit.",2552794.Descriptionair4: db "Haste",2542795 db "Increases the speed of the selected",2542796 db "friendly unit by 3.",2552798.Descriptionair3: db "Shieldbreaker",2542799 db "Reduces the defense of the selected ",2542800 db "enemy unit by 4.",2552802.Descriptionair2: db "Claw Back",2542803 db "Target allied unit has unlimited",2542804 db "retaliations each round.",2552806.Descriptionair1: db "Spell Bubble",2542807 db "Target friendly unit has a 75% chance",2542808 db "to deflect a single enemy spell.",2552811.Descriptionwater4: db "Cure",2542812 db "Dissipates all harmful spell effects",2542813 db "while restoring a set amount of HP.",2552815.Descriptionwater3: db "Ice Peak",2542816 db "Conjures an ice shard from the ground,",2542817 db "impaling a single enemy.",2552819.Descriptionwater2: db "Hypnosis",2542820 db "Enemy unit cant attack until attacked,",2542821 db "dispelled or effect wears off.",2552824.Descriptionwater1: db "Frost Ring",2542825 db "Causes damage to all units adjacent to",2542826 db "the central hex.",2552829.DescriptionAllSpellSchools4: db "magic arrows",2542830 db "Unleashes a relentless volley of arrows",2542831 db "at a single enemy unit.",2552833.DescriptionAllSpellSchools3: db "Frenzy",2542834 db "Friendly unit's damage increases by 5",2542835 db "while its defense decreases by 5.",2552837.DescriptionAllSpellSchools2: db "Teleport",2542838 db "Instantaneously displaces an allied",2542839 db "troop to an an unoccupied space.",2552841.DescriptionAllSpellSchools1: db "Primal Instinct",2542842 db "Friendly unit receives +3 damage,",2542843 db "+3 defense and +3 speed.",2552846SetSpellExplanation_Water:2847 ld a,(SetSkillsDescription?)2848 dec a2849 ret z2850 ld (SetSkillsDescription?),a 2852 call .GoSetText2853 call .SetSpellIcon2854 call .SetCost28552856 ret2858 .SetDamage:2859 ld a,(MenuOptionSelected?Backup)2860 cp 1 2861 ld b,DamageAllSpellSchools12862 jp z,DamageAmountFound2863 cp 2 2864 ld b,DamageAllSpellSchools22865 jp z,DamageAmountFound2866 cp 3 2867 ld b,DamageAllSpellSchools32868 jp z,DamageAmountFound2869 cp 4 2870 ld b,DamageAllSpellSchools42871 jp z,DamageAmountFound2873 cp 5 2874 ld b,DamageWaterSpell12875 jp z,DamageAmountFound2876 cp 6 2877 ld b,DamageWaterSpell22878 jp z,DamageAmountFound2879 cp 7 2880 ld b,DamageWaterSpell32881 jp z,DamageAmountFound2882 ld b,DamageWaterSpell42883 jp DamageAmountFound2885 .SetCost:2886 ld a,(MenuOptionSelected?Backup) 2887 cp 1 2888 ld b,CostAllSpellSchools12889 jp z,CostAmountFound2890 cp 2 2891 ld b,CostAllSpellSchools22892 jp z,CostAmountFound2893 cp 3 2894 ld b,CostAllSpellSchools32895 jp z,CostAmountFound2896 cp 4 2897 ld b,CostAllSpellSchools42898 jp z,CostAmountFound2900 cp 5 2901 ld b,CostWaterSpell12902 jp z,CostAmountFound2903 cp 6 2904 ld b,CostWaterSpell22905 jp z,CostAmountFound2906 cp 7 2907 ld b,CostWaterSpell32908 jp z,CostAmountFound2909 ld b,CostWaterSpell42910 jp CostAmountFound2912 .SetSpellIcon:2913 call SetWhiteWindow2915 ld a,(MenuOptionSelected?Backup)2917 cp 1 2918 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282919 jp z,.SetIcon2920 cp 2 2921 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282922 jp z,.SetIcon2923 cp 3 2924 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282925 jp z,.SetIcon2926 cp 42927 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282928 jp z,.SetIcon 2929 cp 5 2930 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282931 jp z,.SetIcon2932 cp 6 2933 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282934 jp z,.SetIcon2935 cp 7 2936 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282937 jp z,.SetIcon2938 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282939 .SetIcon:2940 2941 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)2942 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2943 ld a,SpellBookGraphicsBlock 2944 jp CopyRamToVramCorrectedCastleOverview 2946 .GoSetText:2947 ld a,(MenuOptionSelected?Backup)2949 cp 1 2950 ld hl,SpellDescriptions.DescriptionAllSpellSchools12951 jp z,.SetText2952 cp 2 2953 ld hl,SpellDescriptions.DescriptionAllSpellSchools22954 jp z,.SetText2955 cp 3 2956 ld hl,SpellDescriptions.DescriptionAllSpellSchools32957 jp z,.SetText2958 cp 42959 ld hl,SpellDescriptions.DescriptionAllSpellSchools42960 jp z,.SetText2963 cp 5 2964 ld hl,SpellDescriptions.Descriptionwater12965 jp z,.SetText2966 cp 6 2967 ld hl,SpellDescriptions.Descriptionwater22968 jp z,.SetText2969 cp 7 2970 ld hl,SpellDescriptions.Descriptionwater32971 jp z,.SetText2972 ld hl,SpellDescriptions.Descriptionwater42973 .SetText:2975 ld b,HeroOverViewSpellBookWindowDX + 0302976 ld c,HeroOverViewSpellBookWindowDY + 1592977 jp SetText2986SetSpellExplanation_Air:2987 ld a,(SetSkillsDescription?)2988 dec a2989 ret z2990 ld (SetSkillsDescription?),a 2992 call .GoSetText2993 call .SetSpellIcon2994 call .SetCost29952996 ret2998 .SetDamage:2999 ld a,(MenuOptionSelected?Backup)3000 cp 1 3001 ld b,DamageAllSpellSchools13002 jp z,DamageAmountFound3003 cp 2 3004 ld b,DamageAllSpellSchools23005 jp z,DamageAmountFound3006 cp 3 3007 ld b,DamageAllSpellSchools33008 jp z,DamageAmountFound3009 cp 4 3010 ld b,DamageAllSpellSchools43011 jp z,DamageAmountFound3013 cp 5 3014 ld b,DamageAirSpell13015 jp z,DamageAmountFound3016 cp 6 3017 ld b,DamageAirSpell23018 jp z,DamageAmountFound3019 cp 7 3020 ld b,DamageAirSpell33021 jp z,DamageAmountFound3022 ld b,DamageAirSpell43023 jp DamageAmountFound3025 .SetCost:3026 ld a,(MenuOptionSelected?Backup) 3027 cp 1 3028 ld b,CostAllSpellSchools13029 jp z,CostAmountFound3030 cp 2 3031 ld b,CostAllSpellSchools23032 jp z,CostAmountFound3033 cp 3 3034 ld b,CostAllSpellSchools33035 jp z,CostAmountFound3036 cp 4 3037 ld b,CostAllSpellSchools43038 jp z,CostAmountFound3040 cp 5 3041 ld b,CostAirSpell13042 jp z,CostAmountFound3043 cp 6 3044 ld b,CostAirSpell23045 jp z,CostAmountFound3046 cp 7 3047 ld b,CostAirSpell33048 jp z,CostAmountFound3049 ld b,CostAirSpell43050 jp CostAmountFound3052 .SetSpellIcon:3053 call SetWhiteWindow3055 ld a,(MenuOptionSelected?Backup)3057 cp 1 3058 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283059 jp z,.SetIcon3060 cp 2 3061 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283062 jp z,.SetIcon3063 cp 3 3064 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283065 jp z,.SetIcon3066 cp 43067 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283068 jp z,.SetIcon3069 3070 cp 5 3071 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283072 jp z,.SetIcon3073 cp 6 3074 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283075 jp z,.SetIcon3076 cp 7 3077 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283078 jp z,.SetIcon3079 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283080 .SetIcon:3081 3082 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3083 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3084 ld a,SpellBookGraphicsBlock 3085 jp CopyRamToVramCorrectedCastleOverview 3087 .GoSetText:3088 ld a,(MenuOptionSelected?Backup)3090 cp 1 3091 ld hl,SpellDescriptions.DescriptionAllSpellSchools13092 jp z,.SetText3093 cp 2 3094 ld hl,SpellDescriptions.DescriptionAllSpellSchools23095 jp z,.SetText3096 cp 3 3097 ld hl,SpellDescriptions.DescriptionAllSpellSchools33098 jp z,.SetText3099 cp 43100 ld hl,SpellDescriptions.DescriptionAllSpellSchools43101 jp z,.SetText3103 cp 5 3104 ld hl,SpellDescriptions.DescriptionAir13105 jp z,.SetText3106 cp 6 3107 ld hl,SpellDescriptions.DescriptionAir23108 jp z,.SetText3109 cp 7 3110 ld hl,SpellDescriptions.DescriptionAir33111 jp z,.SetText3112 ld hl,SpellDescriptions.DescriptionAir43113 .SetText:3115 ld b,HeroOverViewSpellBookWindowDX + 0303116 ld c,HeroOverViewSpellBookWindowDY + 1593117 jp SetText3144SetSpellExplanation_Fire:3145 ld a,(SetSkillsDescription?)3146 dec a3147 ret z3148 ld (SetSkillsDescription?),a 3150 call .GoSetText3151 call .SetSpellIcon3152 call .SetCost31533154 ret3156 .SetDamage:3157 ld a,(MenuOptionSelected?Backup)3158 cp 1 3159 ld b,DamageAllSpellSchools13160 jp z,DamageAmountFound3161 cp 2 3162 ld b,DamageAllSpellSchools23163 jp z,DamageAmountFound3164 cp 3 3165 ld b,DamageAllSpellSchools33166 jp z,DamageAmountFound3167 cp 4 3168 ld b,DamageAllSpellSchools43169 jp z,DamageAmountFound3171 cp 5 3172 ld b,DamageFireSpell13173 jp z,DamageAmountFound3174 cp 6 3175 ld b,DamageFireSpell23176 jp z,DamageAmountFound3177 cp 7 3178 ld b,DamageFireSpell33179 jp z,DamageAmountFound3180 ld b,DamageFireSpell43181 jp DamageAmountFound3183 .SetCost:3184 ld a,(MenuOptionSelected?Backup) 3185 cp 1 3186 ld b,CostAllSpellSchools13187 jp z,CostAmountFound3188 cp 2 3189 ld b,CostAllSpellSchools23190 jp z,CostAmountFound3191 cp 3 3192 ld b,CostAllSpellSchools33193 jp z,CostAmountFound3194 cp 4 3195 ld b,CostAllSpellSchools43196 jp z,CostAmountFound3198 cp 5 3199 ld b,CostFireSpell13200 jp z,CostAmountFound3201 cp 6 3202 ld b,CostFireSpell23203 jp z,CostAmountFound3204 cp 7 3205 ld b,CostFireSpell33206 jp z,CostAmountFound3207 ld b,CostFireSpell43208 jp CostAmountFound3210 .SetSpellIcon:3211 call SetWhiteWindow3213 ld a,(MenuOptionSelected?Backup)3214 cp 1 3215 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283216 jp z,.SetIcon3217 cp 2 3218 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283219 jp z,.SetIcon3220 cp 3 3221 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283222 jp z,.SetIcon3223 cp 43224 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283225 jp z,.SetIcon3226 cp 5 3227 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283228 jp z,.SetIcon3229 cp 6 3230 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283231 jp z,.SetIcon3232 cp 7 3233 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283234 jp z,.SetIcon3235 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283236 .SetIcon:3237 3238 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3239 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3240 ld a,SpellBookGraphicsBlock 3241 jp CopyRamToVramCorrectedCastleOverview 3243 .GoSetText:3244 ld a,(MenuOptionSelected?Backup)3245 cp 1 3246 ld hl,SpellDescriptions.DescriptionAllSpellSchools13247 jp z,.SetText3248 cp 2 3249 ld hl,SpellDescriptions.DescriptionAllSpellSchools23250 jp z,.SetText3251 cp 3 3252 ld hl,SpellDescriptions.DescriptionAllSpellSchools33253 jp z,.SetText3254 cp 43255 ld hl,SpellDescriptions.DescriptionAllSpellSchools43256 jp z,.SetText3258 cp 5 3259 ld hl,SpellDescriptions.DescriptionFire13260 jp z,.SetText3261 cp 6 3262 ld hl,SpellDescriptions.DescriptionFire23263 jp z,.SetText3264 cp 7 3265 ld hl,SpellDescriptions.DescriptionFire33266 jp z,.SetText3267 cp 83268 ld hl,SpellDescriptions.DescriptionFire43269 jp z,.SetText3270 .SetText:3272 ld b,HeroOverViewSpellBookWindowDX + 0303273 ld c,HeroOverViewSpellBookWindowDY + 1593274 jp SetText3292DamageAmountFound:3293 ld a,b3294 or a3295 ret z3297 ld b,HeroOverViewSpellBookWindowDX + 1683298 ld c,HeroOverViewSpellBookWindowDY + 1733299 push iy3300 ld l,a3301 ld h,03302 call SetNumber16BitCastle3303 pop iy3305 ld b,HeroOverViewSpellBookWindowDX + 1323306 ld c,HeroOverViewSpellBookWindowDY + 1733307 ld hl,.TextDamage3308 jp SetText3309 .TextDamage: db "Damage:",2553311CostAmountFound:3312 ld a,b3313 or a3314 ret z3315 ld b,HeroOverViewSpellBookWindowDX + 1743316 ld c,HeroOverViewSpellBookWindowDY + 1593317 push iy3318 ld l,a3319 ld h,03320 call SetNumber16BitCastle3321 pop iy3323 ld b,HeroOverViewSpellBookWindowDX + 1483324 ld c,HeroOverViewSpellBookWindowDY + 1593325 ld hl,.TextCost3326 jp SetText3327 .TextCost: db "Cost:",2553329333633393352SetSpellExplanation_Earth: 3353 ld a,(SetSkillsDescription?)3354 dec a3355 ret z3356 ld (SetSkillsDescription?),a 3358 call .GoSetText3359 call .SetSpellIcon3360 call .SetCost33613362 ret3364 .SetDamage:3365 ld a,(MenuOptionSelected?Backup)3366 cp 1 3367 ld b,DamageAllSpellSchools13368 jp z,DamageAmountFound3369 cp 2 3370 ld b,DamageAllSpellSchools23371 jp z,DamageAmountFound3372 cp 3 3373 ld b,DamageAllSpellSchools33374 jp z,DamageAmountFound3375 cp 4 3376 ld b,DamageAllSpellSchools43377 jp z,DamageAmountFound3379 cp 5 3380 ld b,DamageEarthSpell13381 jp z,DamageAmountFound3382 cp 6 3383 ld b,DamageEarthSpell23384 jp z,DamageAmountFound3385 cp 7 3386 ld b,DamageEarthSpell33387 jp z,DamageAmountFound3388 ld b,DamageEarthSpell43389 jp DamageAmountFound3391 .SetCost:3392 ld a,(MenuOptionSelected?Backup) 3393 cp 1 3394 ld b,CostAllSpellSchools13395 jp z,CostAmountFound3396 cp 2 3397 ld b,CostAllSpellSchools23398 jp z,CostAmountFound3399 cp 3 3400 ld b,CostAllSpellSchools33401 jp z,CostAmountFound3402 cp 4 3403 ld b,CostAllSpellSchools43404 jp z,CostAmountFound3406 cp 5 3407 ld b,CostEarthSpell13408 jp z,CostAmountFound3409 cp 6 3410 ld b,CostEarthSpell23411 jp z,CostAmountFound3412 cp 7 3413 ld b,CostEarthSpell33414 jp z,CostAmountFound3415 ld b,CostEarthSpell43416 jp CostAmountFound3419 .SetSpellIcon:3420 call SetWhiteWindow3422 ld a,(MenuOptionSelected?Backup)3423 cp 1 3424 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1283425 jp z,.SetIcon3426 cp 2 3427 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1283428 jp z,.SetIcon3429 cp 3 3430 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1283431 jp z,.SetIcon3432 cp 43433 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1283434 jp z,.SetIcon3435 3436 cp 5 3437 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283438 jp z,.SetIcon3439 cp 6 3440 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283441 jp z,.SetIcon3442 cp 7 3443 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283444 jp z,.SetIcon3445 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283446 .SetIcon:3447 3448 ld de,$0000 + ((HeroOverViewSpellBookWindowDY + 160) *128) + ((HeroOverViewSpellBookWindowDx+10)/2)3449 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)3450 ld a,SpellBookGraphicsBlock 3451 jp CopyRamToVramCorrectedCastleOverview 3453 .GoSetText:3454 ld a,(MenuOptionSelected?Backup)3456 cp 1 3457 ld hl,SpellDescriptions.DescriptionAllSpellSchools13458 jp z,.SetText3459 cp 2 3460 ld hl,SpellDescriptions.DescriptionAllSpellSchools23461 jp z,.SetText3462 cp 3 3463 ld hl,SpellDescriptions.DescriptionAllSpellSchools33464 jp z,.SetText3465 cp 43466 ld hl,SpellDescriptions.DescriptionAllSpellSchools43467 jp z,.SetText3469 cp 5 3470 ld hl,SpellDescriptions.DescriptionEarth13471 jp z,.SetText3472 cp 6 3473 ld hl,SpellDescriptions.DescriptionEarth23474 jp z,.SetText3475 cp 7 3476 ld hl,SpellDescriptions.DescriptionEarth33477 jp z,.SetText3478 ld hl,SpellDescriptions.DescriptionEarth43479 .SetText:3481 ld b,HeroOverViewSpellBookWindowDX + 0303482 ld c,HeroOverViewSpellBookWindowDY + 1593483 jp SetText3485DamageAllSpellSchools4: equ 103486DamageAllSpellSchools3: equ 03487DamageAllSpellSchools2: equ 03488DamageAllSpellSchools1: equ 03490DamageEarthSpell4: equ 03491DamageEarthSpell3: equ 03492DamageEarthSpell2: equ 03493DamageEarthSpell1: equ 503495DamageFireSpell4: equ 03496DamageFireSpell3: equ 03497DamageFireSpell2: equ 153498DamageFireSpell1: equ 203500DamageAirSpell4: equ 03501DamageAirSpell3: equ 03502DamageAirSpell2: equ 03503DamageAirSpell1: equ 03505DamageWaterSpell4: equ 03506DamageWaterSpell3: equ 303507DamageWaterSpell2: equ 03508DamageWaterSpell1: equ 303510EarthSelected:3511 xor a3512 ld (MenuOptionSelected?),a 3513 jp HeroOverviewSpellBookWindowCode_Earth3515FireSelected:3516 xor a3517 ld (MenuOptionSelected?),a 3518 jp HeroOverviewSpellBookWindowCode_Fire3520AirSelected:3521 xor a3522 ld (MenuOptionSelected?),a 3523 jp HeroOverviewSpellBookWindowCode_Air3524 3525WaterSelected:3526 xor a3527 ld (MenuOptionSelected?),a 3528 jp HeroOverviewSpellBookWindowCode_Water3532ResetStatusSpellBookButtons: 35333540 ret3542ActivateButton_Earth:3543 ld ix,HeroOverviewSpellBookButtonTable_Earth_Activated3544 ld iy,ButtonTableSpellBookSYSX_Earth_Activated3545 jr SetElementalButton3547ActivateButton_Fire:3548 ld ix,HeroOverviewSpellBookButtonTable_Fire_Activated3549 ld iy,ButtonTableSpellBookSYSX_Fire_Activated3550 jr SetElementalButton3552ActivateButton_Air:3553 ld ix,HeroOverviewSpellBookButtonTable_Air_Activated3554 ld iy,ButtonTableSpellBookSYSX_Air_Activated3555 jr SetElementalButton3557ActivateButton_Water:3558 ld ix,HeroOverviewSpellBookButtonTable_Water_Activated3559 ld iy,ButtonTableSpellBookSYSX_Water_Activated3560 jr SetElementalButton3562SetElementalButton:3563 ld l,(iy+ButtonOMouseClicked)3564 ld h,(iy+ButtonOMouseClicked+1)3565 3566 ld e,(ix+HeroOverviewWindowButton_de)3567 ld d,(ix+HeroOverviewWindowButton_de+1)3569 ld c,(ix+Buttonnynx)3570 ld b,(ix+Buttonnynx+1)3572 ld a,SpellBookGraphicsBlock 3573 call CopyRamToVramCorrectedCastleOverview 3574 ret3577HeroOverviewStatusWindowCode:3578 call SetHeroOverViewStatusWindow 3579 call SetStatusTextAttack3580 call SwapAndSetPage 3581 call SetHeroOverViewStatusWindow 3582 call SetStatusTextAttack3584 .engine:3585 call PopulateControls 35873592 ld a,(Controls)3593 bit 5,a 3594 ret nz3596 call CheckEndHeroOverviewStatus 3597 halt3598 jp .engine3600HeroOverviewSkillsWindowCode:3601 call SetHeroSkillsInTable3603 ld a, %1000 0011 3604 ld (HeroOverviewSkillsButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3605 ld (HeroOverviewSkillsButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3606 ld (HeroOverviewSkillsButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3607 ld (HeroOverviewSkillsButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3608 ld (HeroOverviewSkillsButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3609 ld (HeroOverviewSkillsButtonTable + 5*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3611 call SetHeroOverViewSkillsWindow 3613 ld ix,HeroOverviewSkillsButtonTable3614 ld iy,ButtonTableSkillsSYSX3615 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3616 call SetButtonStatusAndText 3617 call SwapAndSetPage 3618 call SetHeroOverViewSkillsWindow 3620 .engine:3621 call PopulateControls 3623 ld a,(Controls)3624 bit 5,a 3625 ret nz3627 ld ix,HeroOverviewSkillsButtonTable3628 ld iy,ButtonTableSkillsSYSX3630 call CheckButtonMouseInteraction3631 ld a,(MenuOptionSelected?)3632 or a3633 jp nz,.MenuOptionSelected3635 call SetSkillExplanation 3636 call CheckEndHeroOverviewSkills 3637 ld ix,HeroOverviewSkillsButtonTable3638 ld bc,$0000 + (HeroOverViewSkillsWindowButtonNY*256) + (HeroOverViewSkillsWindowButtonNX/2)3639 call SetButtonStatusAndText 3640 call SwapAndSetPage 3641 3642 halt3643 jp .engine3645 .MenuOptionSelected:3646 xor a3647 ld (MenuOptionSelected?),a3648 ld (ActivatedSkillsButton),ix3649 ld a,33650 ld (SetSkillsDescription?),a 3651 jp HeroOverviewSkillsWindowCode3653TextLevel:3654 db "Level",2553655SetTextNameHeroAndLevel:3656 ld ix,(plxcurrentheroAddress)3657 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013658 ld c,HeroOverViewFirstWindowchoicesDY + 0083659 ld l,(ix+HeroSpecificInfo+0) 3660 ld h,(ix+HeroSpecificInfo+1)3661 call SetText3663 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013664 ld c,HeroOverViewFirstWindowchoicesDY + 0323665 ld hl,TextLevel3666 call SetText 3668 ld b,HeroOverViewFirstWindowchoicesDx + 050 - 0013669 ld c,HeroOverViewFirstWindowchoicesDY + 0323670 ld a,(ix+HeroLevel) 3671 ld l,a3672 ld h,03673 call SetNumber16BitCastle 3675 ld l,(ix+HeroSpecificInfo+0)3676 ld h,(ix+HeroSpecificInfo+1)3677 ld de,HeroInfoClass3678 add hl,de 3679 ld b,HeroOverViewFirstWindowchoicesDx + 030 - 0013680 ld c,HeroOverViewFirstWindowchoicesDY + 0163681 jp SetText 3683DYDX16x30HeroIconAtHeroOverview: equ (HeroOverViewFirstWindowchoicesDY+10)*128 + ((HeroOverViewFirstWindowchoicesDX+10)/2) - 128 3684Set16x30HeroIconAtHeroOverviewCode:3685 ld ix,(plxcurrentheroAddress)3687 3688 ld l,(ix+HeroSpecificInfo+0) 3689 ld h,(ix+HeroSpecificInfo+1)3690 push hl3691 pop ix3693 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3694 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3695 ld bc,$40003696 xor a3697 sbc hl,bc3699 ld bc,NXAndNY16x30HeroIcon3700 ld a,Hero16x30PortraitsBlock 3701 ld de,DYDX16x30HeroIconAtHeroOverview 3702 jp CopyRamToVramCorrectedCastleOverview 3705 3709371137133718HeroOverviewCode:3719call screenon3721 ld bc,SFX_HeroOverviewMenu3722 call RePlayerSFX_PlayCh13724 ld a,33725 ld (SetHeroArmyAndStatusInHud?),a3727 ld a, %1000 0011 3728 ld (HeroOverviewFirstWindowButtonTable + 0*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3729 ld (HeroOverviewFirstWindowButtonTable + 1*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3730 ld (HeroOverviewFirstWindowButtonTable + 2*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3731 ld (HeroOverviewFirstWindowButtonTable + 3*ButtonTableLenght + HeroOverviewWindowButtonStatus),a3732 ld (HeroOverviewFirstWindowButtonTable + 4*ButtonTableLenght + HeroOverviewWindowButtonStatus),a37363739 call SetHeroOverViewFirstWindow 3740 call Set16x30HeroIconAtHeroOverviewCode3741 call SetTextNameHeroAndLevel 3743 ld ix,HeroOverviewFirstWindowButtonTable3744 ld iy,ButtonTableSYSX3745 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3746 call SetButtonStatusAndText 3748 call SwapAndSetPage 3749 call SetHeroOverViewFirstWindow 3750 call Set16x30HeroIconAtHeroOverviewCode3751 call SetTextNameHeroAndLevel 37533758 ld a,%0001 00003759 ld (Controls),a 3761 .engine: 3762 call PopulateControls 37643769 ld a,(Controls)3770 bit 5,a 3771 ret nz3773 ld ix,HeroOverviewFirstWindowButtonTable3774 ld iy,ButtonTableSYSX3775 call CheckButtonMouseInteraction3777 ld a,(MenuOptionSelected?)3778 or a3779 jr nz,.MenuOptionSelected3781 call CheckEndHeroOverviewFirstWindow 3783 ld ix,HeroOverviewFirstWindowButtonTable3784 ld bc,$0000 + (HeroOverViewFirstWindowButtonNY*256) + (HeroOverViewFirstWindowButtonNX/2)3785 call SetButtonStatusAndText 3786 call SwapAndSetPage 37883789 jp .engine3791 .MenuOptionSelected:3792 cp 1 3793 jr z,.StatusSelected3794 cp 2 3795 jr z,.SpellBookSelected3796 cp 3 3797 jr z,.ArmySelected3798 cp 4 3799 jr z,.InventorySelected3800 cp 5 3801 jr z,.SkillsSelected3803 xor a3804 ld (MenuOptionSelected?),a3805 ret3807 .InventorySelected:3808 xor a3809 ld (MenuOptionSelected?),a 3810 jp HeroOverviewInventoryWindowCode3812 .StatusSelected:3813 xor a3814 ld (MenuOptionSelected?),a 3815 jp HeroOverviewStatusWindowCode3817 .ArmySelected:3818 xor a3819 ld (MenuOptionSelected?),a3820 jp HeroOverviewArmyWindowCode3822 .SpellBookSelected:3823 xor a3824 ld (MenuOptionSelected?),a 3825 jp HeroOverviewSpellBookWindowCode_Earth3826 3827 .SkillsSelected:3828 xor a3829 ld (MenuOptionSelected?),a 3830 jp HeroOverviewSkillsWindowCode3833SetStatusTextAttack:3834 ld ix,(plxcurrentheroAddress)3836 ld de,ItemAttackPointsTable3837 ld hl,SetAdditionalStatFromInventoryItemsInHL 3838 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3839 ld e,(ix+HeroStatAttack) 3840 ld d,03841 add hl,de3842 ld b,HeroOverViewStatusWindowDX + 056 + 004-33843 ld c,HeroOverViewStatusWindowDY + 0343844 call SetNumber16BitCastle3846 ld de,ItemDefencePointsTable3847 ld hl,SetAdditionalStatFromInventoryItemsInHL 3848 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3849 ld e,(ix+HeroStatDefense)3850 ld d,03851 add hl,de3853 bit 7,h 3854 jr z,.SetDefense3855 ld hl,03856 .SetDefense:3858 ld b,HeroOverViewStatusWindowDX + 067 + 004 -23859 ld c,HeroOverViewStatusWindowDY + 0343860 call SetNumber16BitCastle3862 ld de,ItemIntelligencePointsTable3863 ld hl,SetAdditionalStatFromInventoryItemsInHL 3864 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3865 ld e,(ix+HeroStatKnowledge)3866 ld d,03867 add hl,de 3868 ld b,HeroOverViewStatusWindowDX + 075 + 004 +23869 ld c,HeroOverViewStatusWindowDY + 0343870 call SetNumber16BitCastle3872 ld de,ItemSpellDamagePointsTable3873 ld hl,SetAdditionalStatFromInventoryItemsInHL 3874 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3875 ld e,(ix+HeroStatSpelldamage)3876 ld d,03877 add hl,de3878 ld b,HeroOverViewStatusWindowDX + 084 + 004 +53879 ld c,HeroOverViewStatusWindowDY + 0343880 call SetNumber16BitCastle3882 ld a,(ix+HeroLevel)3883 ld b,HeroOverViewStatusWindowDX + 0913884 ld c,HeroOverViewStatusWindowDY + 0453885 ld h,03886 ld l,a3887 call SetNumber16BitCastle3889 ld a,(ix+HeroLevel) 3890 cp 183891 ld hl,57533 3892 jr z,.XpSet3893 3894 ld l,(ix+HeroXp)3895 ld h,(ix+HeroXp+1)3896 .XpSet:3897 ld b,HeroOverViewStatusWindowDX + 0683898 ld c,HeroOverViewStatusWindowDY + 0593899 call SetNumber16BitCastle3901 ld a,(PutLetter+dx) 3902 add a,43903 ld b,a 3904 ld c,HeroOverViewStatusWindowDY + 059 3905 ld hl,TextSlash3906 call SetText3908 ld a,(ix+HeroLevel) 3909 cp 183910 ld hl,57533 3911 jr z,.XpMaxSet3912 3913 ld a,(ix+HeroLevel) 3914 add a,a3915 ld d,03916 ld e,a3917 ld hl,HeroXPTable-23918 add hl,de3919 ld e,(hl)3920 inc hl3921 ld d,(hl) 3922 ex de,hl3923 .XpMaxSet:3924 ld a,(PutLetter+dx) 3925 add a,43926 ld b,a 3927 ld c,HeroOverViewStatusWindowDY + 0593928 call SetNumber16BitCastle3930 ld a,(ix+HeroMove)3931 ld b,HeroOverViewStatusWindowDX + 1043932 ld c,HeroOverViewStatusWindowDY + 0733933 ld h,03934 ld l,a3935 call SetNumber16BitCastle3937 ld a,(ix+HeroTotalMove)3938 ld b,HeroOverViewStatusWindowDX + 1243939 ld c,HeroOverViewStatusWindowDY + 0733940 ld h,03941 ld l,a3942 call SetNumber16BitCastle3944 ld b,HeroOverViewStatusWindowDX + 0933945 ld c,HeroOverViewStatusWindowDY + 0873946 ld l,(ix+HeroMana+0)3947 ld h,(ix+HeroMana+1)3948 call SetNumber16BitCastle3950 call SetTotalManaHero3952 ld b,HeroOverViewStatusWindowDX + 1163953 ld c,HeroOverViewStatusWindowDY + 0873954 ld l,(ix+HeroTotalMana+0)3955 ld h,(ix+HeroTotalMana+1)3956 call SetNumber16BitCastle3958 ld a,(ix+HeroManarec)3959 ld b,HeroOverViewStatusWindowDX + 0983960 ld c,HeroOverViewStatusWindowDY + 1013961 ld h,03962 ld l,a3963 call SetNumber16BitCastle3964 ret3966TextSlash: db "/",2553970CheckEndHeroOverviewArmy:3971 ld a,(NewPrContr)3972 bit 4,a 3973 ret z3975 ld a,(spat+0) 3976 cp HeroOverViewArmyWindowDY3977 jr c,.NotOverHeroOverViewArmyWindow3978 cp HeroOverViewArmyWindowDY+HeroOverViewArmyWindowNY3979 jr nc,.NotOverHeroOverViewArmyWindow3980 3981 ld a,(spat+1) 3983 add a,063985 cp HeroOverViewArmyWindowDX3986 jr c,.NotOverHeroOverViewArmyWindow3987 cp HeroOverViewArmyWindowDX+HeroOverViewArmyWindowNX3988 ret c3990 .NotOverHeroOverViewArmyWindow:3991 pop af3992 ret 3994CheckEndHeroOverviewInventory:3995 ld a,(NewPrContr)3996 bit 4,a 3997 ret z3999 ld a,(spat+0) 4000 cp HeroOverViewInventoryWindowDY4001 jr c,.NotOverHeroOverViewInventoryWindow4002 cp HeroOverViewInventoryWindowDY+HeroOverViewInventoryWindowNY4003 jr nc,.NotOverHeroOverViewInventoryWindow4004 4005 ld a,(spat+1) 4007 add a,064009 cp HeroOverViewInventoryWindowDX4010 jr c,.NotOverHeroOverViewInventoryWindow4011 cp HeroOverViewInventoryWindowDX+HeroOverViewInventoryWindowNX4012 ret c4014 .NotOverHeroOverViewInventoryWindow:4015 pop af4016 ret 4018CheckEndHeroOverviewSpellBook:4019 ld a,(NewPrContr)4020 bit 4,a 4021 ret z4023 ld a,(spat+0) 4024 cp HeroOverViewSpellBookWindowDY4025 jr c,.NotOverHeroOverViewSpellBookWindow4026 cp HeroOverViewSpellBookWindowDY+HeroOverViewSpellBookWindowNY4027 jr nc,.NotOverHeroOverViewSpellBookWindow4028 4029 ld a,(spat+1) 4031 add a,064033 cp HeroOverViewSpellBookWindowDX4034 jr c,.NotOverHeroOverViewSpellBookWindow4035 cp HeroOverViewSpellBookWindowDX+HeroOverViewSpellBookWindowNX4036 ret c4038 .NotOverHeroOverViewSpellBookWindow:4039 pop af4040 ret 4042CheckEndHeroOverviewStatus:4043 ld a,(NewPrContr)4044 bit 4,a 4045 ret z4047 ld a,(spat+0) 4048 cp HeroOverViewStatusWindowDY4049 jr c,.NotOverHeroOverViewStatusWindow4050 cp HeroOverViewStatusWindowDY+HeroOverViewStatusWindowNY4051 jr nc,.NotOverHeroOverViewStatusWindow4052 4053 ld a,(spat+1) 4055 add a,064057 cp HeroOverViewStatusWindowDX4058 jr c,.NotOverHeroOverViewStatusWindow4059 cp HeroOverViewStatusWindowDX+HeroOverViewStatusWindowNX4060 ret c4062 .NotOverHeroOverViewStatusWindow:4063 pop af4064 ret 4066CheckEndHeroOverviewSkills:4067 ld a,(NewPrContr)4068 bit 4,a 4069 ret z4071 ld a,(spat+0) 4072 cp HeroOverViewSkillsWindowDY4073 jr c,.NotOverHeroOverViewSkillsWindow4074 cp HeroOverViewSkillsWindowDY+HeroOverViewSkillsWindowNY4075 jr nc,.NotOverHeroOverViewSkillsWindow4076 4077 ld a,(spat+1) 4079 add a,064081 cp HeroOverViewSkillsWindowDX4082 jr c,.NotOverHeroOverViewSkillsWindow4083 cp HeroOverViewSkillsWindowDX+HeroOverViewSkillsWindowNX4084 ret c4086 .NotOverHeroOverViewSkillsWindow:4087 pop af4088 ret 4090CheckEndHeroOverviewFirstWindow: 4091 ld a,(NewPrContr)4092 bit 4,a 4093 ret z4095 ld a,(spat+0) 4096 cp HeroOverViewFirstWindowchoicesDY4097 jr c,.NotOverHeroOverViewFirstWindowChoices4098 cp HeroOverViewFirstWindowchoicesDY+HeroOverViewFirstWindowchoicesNY4099 jr nc,.NotOverHeroOverViewFirstWindowChoices4100 4101 ld a,(spat+1) 4103 add a,064105 cp HeroOverViewFirstWindowchoicesDX4106 jr c,.NotOverHeroOverViewFirstWindowChoices4107 cp HeroOverViewFirstWindowchoicesDX+HeroOverViewFirstWindowchoicesNX4108 ret c4110 .NotOverHeroOverViewFirstWindowChoices:4111 pop af4112 ret 4114SetHeroSkillsInTable:4115 ld ix,(plxcurrentheroAddress)4117 ld a,(ix+HeroSkills+0)4118 ld de,TextSkillsWindowButton14119 call .SetheroSkill4121 ld a,(ix+HeroSkills+1)4122 ld de,TextSkillsWindowButton24123 call .SetheroSkill4125 ld a,(ix+HeroSkills+2)4126 ld de,TextSkillsWindowButton34127 call .SetheroSkill4129 ld a,(ix+HeroSkills+3)4130 ld de,TextSkillsWindowButton44131 call .SetheroSkill4133 ld a,(ix+HeroSkills+4)4134 ld de,TextSkillsWindowButton54135 call .SetheroSkill4137 ld a,(ix+HeroSkills+5)4138 ld de,TextSkillsWindowButton64139 call .SetheroSkill4140 ret4142 .SetheroSkill:4143 ld l,a4144 ld h,04145 add hl,hl 4146 add hl,hl 4147 add hl,hl 4148 push hl4149 add hl,hl 4150 add hl,hl 4151 add hl,hl 4152 add hl,hl 4153 pop bc4154 add hl,bc 4156 ld bc,SkillEmpty4157 add hl,bc4158 ld bc,LenghtSkillDescription4159 ldir4160 ret4163CheckButtonMouseInteraction:4164 ld b,(ix+HeroOverviewWindowAmountOfButtons)4165 ld de,ButtonTableLenght4167 .loop:4168 call .check4169 add ix,de4170 djnz .loop4171 ret4172 4173 .check:4174 ld a,(ix+HeroOverviewWindowButtonStatus)4175 or a4176 ret z4177 4178 ld a,(spat+0) 4179 cp (ix+HeroOverviewWindowButtonYtop)4180 jr c,.NotOverButton4181 cp (ix+HeroOverviewWindowButtonYbottom)4182 jr nc,.NotOverButton4183 ld a,(spat+1) 4185 add a,064187 cp (ix+HeroOverviewWindowButtonXleft)4188 jr c,.NotOverButton4189 cp (ix+HeroOverviewWindowButtonXright)4190 jr nc,.NotOverButton4191 4198 ld a,(Controls)4199 bit 4,a 4200 jr nz,.MouseOverButtonAndSpacePressed4201 bit 5,(ix+HeroOverviewWindowButtonStatus) 4202 jr nz,MenuOptionSelected 4203 .MouseHoverOverButton:42044206 bit 6,(ix+HeroOverviewWindowButtonStatus) 4207 ld (ix+HeroOverviewWindowButtonStatus),%0100 00114208 ret nz4210 push iy4211 push bc4212 ld bc,SFX_ButtonHoverOver4213 call RePlayerSFX_PlayCh24214 pop bc4215 pop iy4216 ret4218 .MouseOverButtonAndSpacePressed:4219 bit 5,(ix+HeroOverviewWindowButtonStatus) 4220 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit4221 ld a,(NewPrContr)4222 bit 4,a 4223 jr z,.MouseHoverOverButton4225 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:4226 ld (ix+HeroOverviewWindowButtonStatus),%0010 001142284229 push iy4230 push bc4231 ld bc,SFX_ButtonClicked4232 call RePlayerSFX_PlayCh14233 pop bc4234 pop iy42354236 ret4237 4238 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:4239 ld (ix+HeroOverviewWindowButtonStatus),%0010 00114240 ret4242 .NotOverButton:4243 bit 5,(ix+HeroOverviewWindowButtonStatus) 4244 jr nz,.buttonIsStillLit4245 bit 6,(ix+HeroOverviewWindowButtonStatus) 4246 ret z4247 .buttonIsStillLit:4248 ld (ix+HeroOverviewWindowButtonStatus),%1000 00114249 ret4251MenuOptionSelected:4252 ld a,b 4253 ld (MenuOptionSelected?),a4254 pop af 4255 ret4257SetButtonStatusAndText4:42584262 ld (BCStored),bc4264 ld b,(ix+HeroOverviewWindowAmountOfButtons)4265 .loop:4266 push bc4267 call .Setbutton4268 pop bc4269 ld de,ButtonTableLenght4270 add ix,de4273 ld de,6 4274 add iy,de4277 djnz .loop4278 ret4280 .Setbutton:4281 bit 0,(ix+HeroOverviewWindowButtonStatus)4282 jr nz,.bit0isSet4283 bit 1,(ix+HeroOverviewWindowButtonStatus)4284 ret z4285 4286 .bit1isSet:4287 res 1,(ix+HeroOverviewWindowButtonStatus)4288 jr .goCopyButton4289 .bit0isSet:4290 res 0,(ix+HeroOverviewWindowButtonStatus) 4291 .goCopyButton:4293 bit 7,(ix+HeroOverviewWindowButtonStatus)4294 ld l,(iy+ButtonOff)4295 ld h,(iy+ButtonOff+1)4296 jr nz,.go 4297 bit 6,(ix+HeroOverviewWindowButtonStatus)4298 ld l,(iy+ButtonMouseOver)4299 ld h,(iy+ButtonMouseOver+1)4300 jr nz,.go 4302 ld l,(iy+ButtonOMouseClicked)4303 ld h,(iy+ButtonOMouseClicked+1)4304 .go:4305 4306 ld e,(ix+HeroOverviewWindowButton_de)4307 ld d,(ix+HeroOverviewWindowButton_de+1)4308 ld bc,(BCStored)4310 ld c,(ix+Buttonnynx)4311 ld b,(ix+Buttonnynx+1)4313 ld a,ArmyGraphicsBlock 4314 call CopyRamToVramCorrectedCastleOverview 4315 ret4317SetButtonStatusAndText3:43184322 ld (BCStored),bc4324 ld b,(ix+HeroOverviewWindowAmountOfButtons)4325 .loop:4326 push bc4327 call .Setbutton4328 pop bc4329 ld de,ButtonTableLenght4330 add ix,de4333 ld de,6 4334 add iy,de4337 djnz .loop4338 ret4340 .Setbutton:4341 bit 0,(ix+HeroOverviewWindowButtonStatus)4342 jr nz,.bit0isSet4343 bit 1,(ix+HeroOverviewWindowButtonStatus)4344 ret z4345 4346 .bit1isSet:4347 res 1,(ix+HeroOverviewWindowButtonStatus)4348 jr .goCopyButton4349 .bit0isSet:4350 res 0,(ix+HeroOverviewWindowButtonStatus) 4351 .goCopyButton:4353 bit 7,(ix+HeroOverviewWindowButtonStatus)4354 ld l,(iy+ButtonOff)4355 ld h,(iy+ButtonOff+1)4356 jr nz,.go 4357 bit 6,(ix+HeroOverviewWindowButtonStatus)4358 ld l,(iy+ButtonMouseOver)4359 ld h,(iy+ButtonMouseOver+1)4360 jr nz,.go 4362 ld l,(iy+ButtonOMouseClicked)4363 ld h,(iy+ButtonOMouseClicked+1)4364 .go:4365 4366 ld e,(ix+HeroOverviewWindowButton_de)4367 ld d,(ix+HeroOverviewWindowButton_de+1)4368 ld bc,(BCStored)4370 ld c,(ix+Buttonnynx)4371 ld b,(ix+Buttonnynx+1)4373 ld a,InventoryGraphicsBlock 4374 call CopyRamToVramCorrectedCastleOverview 4375 ret4377SetButtonStatusAndText2: 4382 ld (BCStored),bc4384 ld b,(ix+HeroOverviewWindowAmountOfButtons)4385 .loop:4386 push bc4387 call .Setbutton4388 pop bc4389 ld de,ButtonTableLenght4390 add ix,de4393 ld de,6 4394 add iy,de4397 djnz .loop4398 ret4400 .Setbutton:4401 bit 0,(ix+HeroOverviewWindowButtonStatus)4402 jr nz,.bit0isSet4403 bit 1,(ix+HeroOverviewWindowButtonStatus)4404 ret z4405 4406 .bit1isSet:4407 res 1,(ix+HeroOverviewWindowButtonStatus)4408 jr .goCopyButton4409 .bit0isSet:4410 res 0,(ix+HeroOverviewWindowButtonStatus) 4411 .goCopyButton:4413 bit 7,(ix+HeroOverviewWindowButtonStatus)4414 ld l,(iy+ButtonOff)4415 ld h,(iy+ButtonOff+1)4416 jr nz,.go 4417 bit 6,(ix+HeroOverviewWindowButtonStatus)4418 ld l,(iy+ButtonMouseOver)4419 ld h,(iy+ButtonMouseOver+1)4420 jr nz,.go 4422 ld l,(iy+ButtonOMouseClicked)4423 ld h,(iy+ButtonOMouseClicked+1)4424 .go:4425 4426 ld e,(ix+HeroOverviewWindowButton_de)4427 ld d,(ix+HeroOverviewWindowButton_de+1)4428 ld bc,(BCStored)4430 ld c,(ix+Buttonnynx)4431 ld b,(ix+Buttonnynx+1)4433 ld a,SpellBookGraphicsBlock 4434 call CopyRamToVramCorrectedCastleOverview 4435 ret4437SetButtonStatusAndText: 44414445 ld (BCStored),bc4447 ld b,(ix+HeroOverviewWindowAmountOfButtons)4448 .loop:4449 push bc4450 call .Setbutton4451 pop bc4452 ld de,ButtonTableLenght4453 add ix,de4454 djnz .loop4455 ret4457 .Setbutton:4458 bit 0,(ix+HeroOverviewWindowButtonStatus)4459 jr nz,.bit0isSet4460 bit 1,(ix+HeroOverviewWindowButtonStatus)4461 ret z4462 4463 .bit1isSet:4464 res 1,(ix+HeroOverviewWindowButtonStatus)4465 jr .goCopyButton4466 .bit0isSet:4467 res 0,(ix+HeroOverviewWindowButtonStatus) 4468 .goCopyButton:4470 bit 7,(ix+HeroOverviewWindowButtonStatus)4471 ld l,(iy+ButtonOff)4472 ld h,(iy+ButtonOff+1)4473 jr nz,.go 4474 bit 6,(ix+HeroOverviewWindowButtonStatus)4475 ld l,(iy+ButtonMouseOver)4476 ld h,(iy+ButtonMouseOver+1)4477 jr nz,.go 4479 ld l,(iy+ButtonOMouseClicked)4480 ld h,(iy+ButtonOMouseClicked+1)4481 .go:4482 4483 ld e,(ix+HeroOverviewWindowButton_de)4484 ld d,(ix+HeroOverviewWindowButton_de+1)4485 ld bc,(BCStored)4487 ld a,HeroOverviewGraphicsBlock 4488 call CopyRamToVramCorrectedCastleOverview 4489 44904491 4492SetTextInButton:4493 ld l,(ix+TextAddress)4494 ld h,(ix+TextAddress+1) 4497 ld a,(ix+HeroOverviewWindowButtonYtop)4498 add a,444994500 ld c,a4501 ld a,(ix+HeroOverviewWindowButtonXleft)4502 add a,345034504 ld b,a4505 jp SetText4507SetSkillExplanation:4508 ld a,(SetSkillsDescription?)4509 dec a4510 ret z4511 ld (SetSkillsDescription?),a 4512 4513 ld ix,(ActivatedSkillsButton)4514 ld b,0374515 ld c,1384516 ld l,(ix+TextAddress)4517 ld h,(ix+TextAddress+1) 4518 ld de,LenghtTextSkillsDescription4519 add hl,de4520 jp SetText4522TextPlusSymbol: equ $2b4523TextMinusSymbol: equ $2d4524TextPercentageSymbol: equ $254525TextSpace: equ $204526TextNumber0: equ $304527TextApostrofeSymbol: equ $274528TextColonSymbol: equ $3a4529TextSlashSymbol: equ $2f4530TextQuestionMarkSymbol: equ $3f4531TextCommaSymbol: equ $2c4532TextDotSymbol: equ $2e4533TextOpeningParenthesisSymbol: equ $284534TextClosingParenthesisSymbol: equ $294536TextFirstWindowChoicesButton1: db "Skills",2554537TextFirstWindowChoicesButton2: db "Inventory",2554538TextFirstWindowChoicesButton3: db "Army",2554539TextFirstWindowChoicesButton4: db "Spell Book",2554540TextFirstWindowChoicesButton5: db "Status",2554542LenghtSkillDescription: equ SkillArcheryAdvanced-SkillArcheryBasic4543SkillEmpty:4544 db "                                 ",255 4545 db "                                 ",2544546 db "                                 ",2544547 db "                                 ",2554548SkillArcheryBasic:4549 db "Basic Archery                    ",255 4550 db "Basic Archery                    ",2544551 db "The ranged Attack damage of your ",2544552 db "units is increased by 10%        ",2554553SkillArcheryAdvanced:4554 db "Advanced Archery                 ",2554555 db "Advanced Archery                 ",2544556 db "The ranged Attack damage of your ",2544557 db "units is increased by 20%        ",2554558SkillArcheryExpert:4559 db "Expert Archery                   ",2554560 db "Expert Archery                   ",2544561 db "The ranged Attack damage of your ",2544562 db "units is increased by 50%        ",2554563SkillOffenceBasic:4564 db "Basic Offence                    ",255 4565 db "Basic Offence                    ",2544566 db "The hand to hand damage of your  ",2544567 db "units is increased by 10%        ",2554568SkillOffenceAdvanced:4569 db "Advanced Offence                 ",2554570 db "Advanced Offence                 ",2544571 db "The hand to hand damage of your  ",2544572 db "units is increased by 20%        ",2554573SkillOffenceExpert:4574 db "Expert Offence                   ",2554575 db "Expert Offence                   ",2544576 db "The hand to hand damage of your  ",2544577 db "units is increased by 30%        ",25545784579SkillArmourerBasic:4580 db "Basic Armorer                    ",255 4581 db "Basic Armorer                    ",2544582 db "Damage inflicted on your army is ",2544583 db "reduced by 5%                    ",2554584SkillArmourerAdvanced:4585 db "Advanced Armorer                 ",2554586 db "Advanced Armorer                 ",2544587 db "Damage inflicted on your army is ",2544588 db "reduced by 10%                   ",2554589SkillArmourerExpert:4590 db "Expert Armorer                   ",2554591 db "Expert Armorer                   ",2544592 db "Damage inflicted on your army is ",2544593 db "reduced by 15%                   ",2554594SkillResistanceBasic:4595 db "Basic Resistance                 ",255 4596 db "Basic Resistance                 ",2544597 db "Grants your units a 10% chance to",2544598 db "block individual targeted spells ",2554599SkillResistanceAdvanced:4600 db "Advanced Resistance              ",2554601 db "Advanced Resistance              ",2544602 db "Grants your units a 15% chance to",2544603 db "block individual targeted spells ",2554604SkillResistanceExpert:4605 db "Expert Resistance                ",2554606 db "Expert Resistance                ",2544607 db "Grants your units a 20% chance to",2544608 db "block individual targeted spells ",2554620SkillEstatesBasic:4621 db "Basic Estates                    ",255 4622 db "Basic Estates                    ",2544623 db "Your hero generates an extra 125 ",2544624 db "Gold per day.                    ",2554625SkillEstatesAdvanced:4626 db "Advanced Estates                 ",2554627 db "Advanced Estates                 ",2544628 db "Your hero generates an extra 250 ",2544629 db "Gold per day.                    ",2554630SkillEstatesExpert:4631 db "Expert Estates                   ",2554632 db "Expert Estates                   ",2544633 db "Your hero generates an extra 500 ",2544634 db "Gold per day.                    ",2554635SkillLearningBasic:4636 db "Basic Learning                   ",255 4637 db "Basic Learning                   ",2544638 db "Your hero's accumulated          ",2544639 db "experience is amplified by 10%   ",2554640SkillLearningAdvanced:4641 db "Advanced Learning                ",2554642 db "Advanced Learning                ",2544643 db "Your hero's accumulated          ",2544644 db "experience is amplified by 20%   ",2554645SkillLearningExpert:4646 db "Expert Learning                  ",2554647 db "Expert Learning                  ",2544648 db "Your hero's accumulated          ",2544649 db "experience is amplified by 30%   ",2554650SkillLogisticsBasic:4651 db "Basic Logistics                  ",255 4652 db "Basic Logistics                  ",2544653 db "An additional 10% is added to    ",2544654 db "your hero's land movement range. ",2554655SkillLogisticsAdvanced:4656 db "Advanced Logistics               ",2554657 db "Advanced Logistics               ",2544658 db "An additional 20% is added to    ",2544659 db "your hero's land movement range. ",2554660SkillLogisticsExpert:4661 db "Expert Logistics                 ",2554662 db "Expert Logistics                 ",2544663 db "An additional 30% is added to    ",2544664 db "your hero's land movement range. ",2554669SkillIntelligenceBasic:4670 db "Basic Intelligence               ",255 4671 db "Basic Intelligence               ",2544672 db "Boosts your hero's maximum spell ",2544673 db "points by 25%                    ",2554674SkillIntelligenceAdvanced:4675 db "Advanced Intelligence            ",2554676 db "Advanced Intelligence            ",2544677 db "Boosts your hero's maximum spell ",2544678 db "points by 50%                    ",2554679SkillIntelligenceExpert:4680 db "Expert Intelligence              ",2554681 db "Expert Intelligence              ",2544682 db "Boosts your hero's maximum spell ",2544683 db "points by 100%                   ",2554684SkillSorceryBasic:4685 db "Basic Sorcery                    ",255 4686 db "Basic Sorcery                    ",2544687 db "An additional 5% is added to     ",2544688 db "your hero's spell damage.        ",2554689SkillSorceryAdvanced:4690 db "Advanced Sorcery                 ",2554691 db "Advanced Sorcery                 ",2544692 db "An additional 10% is added to    ",2544693 db "your hero's spell damage.        ",2554694SkillSorceryExpert:4695 db "Expert Sorcery                   ",2554696 db "Expert Sorcery                   ",2544697 db "An additional 15% is added to    ",2544698 db "your hero's spell damage.        ",2554699SkillWisdomBasic:4700 db "Basic Wisdom                     ",255 4701 db "Basic Wisdom                     ",2544702 db "Your hero is capable of learning ",2544703 db "spells of level 2 and lower.     ",2554704SkillWisdomAdvanced:4705 db "Advanced Wisdom                  ",2554706 db "Advanced Wisdom                  ",2544707 db "Your hero is capable of learning ",2544708 db "spells of level 3 and lower.     ",2554709SkillWisdomExpert:4710 db "Expert Wisdom                    ",2554711 db "Expert Wisdom                    ",2544712 db "Your hero is capable of learning ",2544713 db "all spells.                      ",2554715SkillNecromancyBasic:4716 db "Basic Necromancy                 ",255 4717 db "Basic Necromancy                 ",2544718 db "Revives 10% of enemy creatures   ",2544719 db "that have fallen in battle.      ",2554720SkillNecromancyAdvanced:4721 db "Advanced Necromancy              ",2554722 db "Advanced Necromancy              ",2544723 db "Revives 20% of enemy creatures   ",2544724 db "that have fallen in battle.      ",2554725SkillNecromancyExpert:4726 db "Expert Necromancy                ",2554727 db "Expert Necromancy                ",2544728 db "Revives 1/3 of enemy creatures   ",2544729 db "that have fallen in battle.      ",25547324739 4740SetHeroOverViewFirstWindow:4741 ld hl,$4000 + (HeroOverViewFirstWindowchoicesSY*128) + (HeroOverViewFirstWindowchoicesSX/2) -1284742 ld de,$0000 + (HeroOverViewFirstWindowchoicesDY*128) + (HeroOverViewFirstWindowchoicesDX/2)4743 ld bc,$0000 + (HeroOverViewFirstWindowchoicesNY*256) + (HeroOverViewFirstWindowchoicesNX/2)4744 ld a,HeroOverviewGraphicsBlock 4745 jp CopyRamToVramCorrectedCastleOverview 4747SetHeroOverViewSkillsWindow:4748 ld hl,$4000 + (HeroOverViewSkillsWindowSY*128) + (HeroOverViewSkillsWindowSX/2) -1284749 ld de,$0000 + (HeroOverViewSkillsWindowDY*128) + (HeroOverViewSkillsWindowDX/2)4750 ld bc,$0000 + (HeroOverViewSkillsWindowNY*256) + (HeroOverViewSkillsWindowNX/2)4751 ld a,HeroOverviewGraphicsBlock 4752 jp CopyRamToVramCorrectedCastleOverview 4754SetHeroOverViewStatusWindow:4755 ld hl,$4000 + (HeroOverViewStatusWindowSY*128) + (HeroOverViewStatusWindowSX/2) -1284756 ld de,$0000 + (HeroOverViewStatusWindowDY*128) + (HeroOverViewStatusWindowDX/2)4757 ld bc,$0000 + (HeroOverViewStatusWindowNY*256) + (HeroOverViewStatusWindowNX/2)4758 ld a,HeroOverviewStatusGraphicsBlock4759 jp CopyRamToVramCorrectedCastleOverview 4761SetHeroOverViewSpellBookWindow:4762 ld hl,$4000 + (HeroOverViewSpellBookWindowSY*128) + (HeroOverViewSpellBookWindowSX/2) -1284763 ld de,$0000 + (HeroOverViewSpellBookWindowDY*128) + (HeroOverViewSpellBookWindowDX/2)4764 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4765 ld a,SpellBookGraphicsBlock4766 jp CopyRamToVramCorrectedCastleOverview 4768SetHeroOverViewInventoryWindow:4769 ld hl,$4000 + (HeroOverViewInventoryWindowSY*128) + (HeroOverViewInventoryWindowSX/2) -1284770 ld de,$0000 + (HeroOverViewInventoryWindowDY*128) + (HeroOverViewInventoryWindowDX/2)4771 ld bc,$0000 + (HeroOverViewInventoryWindowNY*256) + (HeroOverViewInventoryWindowNX/2)4772 ld a,InventoryGraphicsBlock4773 jp CopyRamToVramCorrectedCastleOverview 4775SetHeroOverViewArmyWindow:4776 ld hl,$4000 + (HeroOverViewArmyWindowSY*128) + (HeroOverViewArmyWindowSX/2) -1284777 ld de,$0000 + (HeroOverViewArmyWindowDY*128) + (HeroOverViewArmyWindowDX/2)4778 ld bc,$0000 + (HeroOverViewArmyWindowNY*256) + (HeroOverViewArmyWindowNX/2)4779 ld a,ArmyGraphicsBlock4780 jp CopyRamToVramCorrectedCastleOverview 4783MSXHeroes.asm676 ds $8000-$,$ff677dephase679682HeroOverviewStatusGraphicsBlock: equ $1d683phase $4000684 incbin "..\grapx\HeroOverview\StatusWindow.SC5",7,116 * 128 685 ds $c000-$,$ff686dephase688691SpellBookGraphicsBlock: equ $1f692phase $4000693 incbin "..\grapx\HeroOverview\SpellBook.SC5",7,200 * 128 694 ds $c000-$,$ff695dephase697700InventoryGraphicsBlock: equ $21701phase $4000702 incbin "..\grapx\HeroOverview\Inventory.SC5",7,208 * 128 703 incbin "..\grapx\HeroOverview\InventoryBottom48Lines.SC5",7,48 * 128 704 ds $c000-$,$ff705dephase707710ArmyGraphicsBlock: equ $23711phase $4000712 incbin "..\grapx\HeroOverview\Army.SC5",7,133 * 128 713 ds $c000-$,$ff714dephase716719HeroArmyTransferGraphicsBlock: equ $25720phase $4000721 incbin "..\grapx\HeroOverview\HeroArmyTransfer.SC5",7,137 * 128 722 ds $c000-$,$ff723dephase725728Hero16x30PortraitsBlock: equ $27729phase $4000730 incbin "..\grapx\HeroesSprites\16x30Portraits.SC5",7,150 * 128 731 ds $c000-$,$ff732dephase734737Enemy14x24PortraitsBlock: equ $29738phase $4000739 incbin "..\grapx\MonsterSprites\14x24Portraits.SC5",7,208 * 128 740 incbin "..\grapx\MonsterSprites\14x24PortraitsBottom48lines.SC5",7,032 * 128 741 ds $c000-$,$ff742dephase744747Enemy14x24PortraitsBlockPart2: equ $2b748phase $4000749 incbin "..\grapx\MonsterSprites\14x24PortraitsPart2.SC5",7,24 * 128 750 ds $8000-$,$ff751dephase753756IndividualBuildingsBlock: equ $2c757phase $4000758 incbin "..\grapx\CastleOverview\IndividualBuildings.SC5",7,188 * 128 759 ds $c000-$,$ff760dephase762765IndividualBuildingsPage2Block: equ $2e766phase $4000767 incbin "..\grapx\CastleOverview\IndividualBuildingsPage2.SC5",7,142 * 128 768 ds $c000-$,$ff769dephase771774ButtonsBlock: equ $30775phase $4000776 incbin "..\grapx\CastleOverview\Buttons.SC5",7,093 * 128 777 ds $c000-$,$ff778dephase780783BuildBlock: equ $32784phase $4000785 incbin "..\grapx\CastleOverview\build.SC5",7,212 * 128 786 ds $c000-$,$ff787dephase789792ButtonsBuildBlock: equ $34793phase $4000794 incbin "..\grapx\CastleOverview\ButtonsBuild.SC5",7,166 * 128 795 ds $c000-$,$ff796dephase798801RecruitCreaturesBlock: equ $36802phase $4000803 incbin "..\grapx\CastleOverview\RecruitCreatures.SC5",7,212 * 128 804 ds $c000-$,$ff805dephase807810ButtonsRecruitBlock: equ $38811phase $4000812 incbin "..\grapx\CastleOverview\ButtonsRecruitCreatures.SC5",7,139 * 128 813 ds $c000-$,$ff814dephase816819MagicGuildBlock: equ $3a820phase $4000821 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",7,25 * 128 822 incbin "..\grapx\CastleOverview\MagicGuild.SC5",25 * 128 + 7,154 * 128 823 incbin "..\grapx\CastleOverview\MagicGuildCastlePalette.SC5",179 * 128 + 7,33 * 128 824 ds $c000-$,$ff825dephase827830ChamberOfCommerceBlock: equ $3c831phase $4000832 incbin "..\grapx\CastleOverview\ChamberOfCommerce.SC5",7,80 * 128 833 incbin "..\grapx\CastleOverview\ChamberOfCommerceCastlePalette.SC5",80 * 128 + 7,132 * 128 834 ds $c000-$,$ff835dephase837840ChamberOfCommerceButtonsBlock: equ $3e841phase $4000842 incbin "..\grapx\CastleOverview\ButtonsChamberOfCommerce.SC5",7,152 * 128 843 ds $c000-$,$ff844dephase846849TavernBlock: equ $40850phase $4000851 incbin "..\grapx\CastleOverview\Tavern.SC5",7,131 * 128 852 incbin "..\grapx\CastleOverview\TavernCastlePalette.SC5",131 * 128 + 7,32 * 128 853 incbin "..\grapx\CastleOverview\Tavern.SC5",163 * 128 + 7,049 * 128 854 ds $c000-$,$ff855dephase857860CastleOverviewCodeBlock: equ $42861CastleOverviewFontBlock: equ $42862phase $4000863 incbin "..\grapx\CastleOverview\font.SC5",7,6 * 128 864 CastleOverviewCode.asm11625ShowRecruitWindowForSelectedUnit: 26 xor a 27 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 28 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 29 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 30 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 31 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 32 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 33 ld a,%1100 001134 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 35 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 36 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 37 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 39 call .SetUnit 41 42 ld hl,$4000 + (047*128) + (000/2) - 12843 ld de,$0000 + (032*128) + (048/2) - 12844 ld bc,$0000 + (084*256) + (162/2)45 ld a,ButtonsRecruitBlock 46 call CopyRamToVramCorrectedCastleOverview 48 call SetCastleOverViewFontPage0Y212 50 call .army51 call .name52 call .cost53 call .Gemscost54 call .Rubiescost56 call .amountavailable57 call .recruitamount58 ret60.TotalRubiescost:61 ld a,(SelectedCastleRecruitLevelUnit)62 ld b,063+123 63 ld c,083 64 ld de,$0000 + (078*128) + ((074+97)/2) - 128 65 call .SetTotalRubiescost66 ret68.TotalGemscost:69 ld a,(SelectedCastleRecruitLevelUnit)70 ld b,063+123 71 ld c,083 72 ld de,$0000 + (078*128) + ((074+97)/2) - 128 73 call .SetTotalGemscost74 ret76 .SetTotalGemscost:77 push de78 call SetGemsCostSelectedCreatureInHL79 ld a,h80 or l81 jr z,.Zero 83 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)84 push bc85 call MultiplyHlWithDE86 pop bc88 call SetNumber16BitCastle 89 90 91 ld hl,$4000 + (000*128) + (228/2) - 1289293 pop de94 ld bc,$0000 + (013*256) + (014/2)95 ld a,ButtonsRecruitBlock 96 jp CopyRamToVramCorrectedCastleOverview 98 .SetTotalRubiescost:99 push de100 call SetRubiesCostSelectedCreatureInHL102 ld a,h103 or l104 jr z,.Zero 106 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)107 push bc108 call MultiplyHlWithDE109 pop bc111 call SetNumber16BitCastle 112 113 114 ld hl,$4000 + (000*128) + (242/2) - 128115116 pop de117 ld bc,$0000 + (013*256) + (014/2)118 ld a,ButtonsRecruitBlock 119 jp CopyRamToVramCorrectedCastleOverview 121 .Zero: 122 pop de123 ret125.totalcost:126 ld hl,(SelectedCastleRecruitLevelUnitTotalGoldCost)127 ld b,177128 ld c,071 129 jp SetNumber16BitCastle131.Rubiescost:132 ld a,(SelectedCastleRecruitLevelUnit)133 ld b,063+6 134 ld c,083 135 ld de,$0000 + (078*128) + (052/2) - 128 136 call SetAvailableRecruitArmy.SetRubiescost138.Gemscost:139 ld a,(SelectedCastleRecruitLevelUnit)140 ld b,063+6 141 ld c,083 142 ld de,$0000 + (078*128) + (052/2) - 128 143 jp SetAvailableRecruitArmy.SetGemscost145.cost:146 ld a,(SelectedCastleRecruitLevelUnit)147 ld b,072 148 ld c,071 150 call SetCostSelectedCreatureInHL 151 call SetNumber16BitCastle152 ret153 154.name:155 ld a,(SelectedCastleRecruitLevelUnit)156 ld b,125 157 ld c,038 159 call SetMonsterTableInIXCastleOverview 161 push ix162 pop hl163 ld de,MonsterTableName164 add hl,de165 call SetText167 168 ld a,CastleOverviewCodeBlock 169 call block1234 170 ret172.recruitamount:173 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)174 ld b,177175 ld c,103 176 jp SetNumber16BitCastle178.amountavailable:179 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)180 ld b,090181 ld c,103 182 jp SetNumber16BitCastle184.army:185 ld a,(SelectedCastleRecruitLevelUnit)186 call SetDefendingHeroArmyAndAmount.SetSYSX 187 ld de,050*256 + 120 188 call CopyTransparantImage 189 ret191.SetUnit:192 ld hl,SelectedCastleRecruitLevelUnit193 ld a,b 194 ld (SelectedCastleRecruitUnitWindow),a195 196 cp 6197 ld c,(iy+CastleLevel1Units+00)198 ld (hl),c199 ld e,(iy+CastleLevel1UnitsAvail+00)200 ld d,(iy+CastleLevel1UnitsAvail+01)201 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de202 ret z203 cp 5204 ld c,(iy+CastleLevel1Units+01)205 ld (hl),c206 ld e,(iy+CastleLevel1UnitsAvail+02)207 ld d,(iy+CastleLevel1UnitsAvail+03)208 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de209 ret z210 cp 4211 ld c,(iy+CastleLevel1Units+02)212 ld (hl),c213 ld e,(iy+CastleLevel1UnitsAvail+04)214 ld d,(iy+CastleLevel1UnitsAvail+05)215 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de216 ret z217 cp 3218 ld c,(iy+CastleLevel1Units+03)219 ld (hl),c220 ld e,(iy+CastleLevel1UnitsAvail+06)221 ld d,(iy+CastleLevel1UnitsAvail+07)222 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de223 ret z224 cp 2225 ld c,(iy+CastleLevel1Units+04)226 ld (hl),c227 ld e,(iy+CastleLevel1UnitsAvail+08)228 ld d,(iy+CastleLevel1UnitsAvail+09)229 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de230 ret z231232 ld c,(iy+CastleLevel1Units+05)233 ld (hl),c234 ld e,(iy+CastleLevel1UnitsAvail+10)235 ld d,(iy+CastleLevel1UnitsAvail+11)236 ld (SelectedCastleRecruitLevelUnitAmountAvailable),de237238 ret251DisplayMonsterNames:252 ld a,(StartingTownLevel1Unit)253 ld b,058+(0*48) 254 ld c,086 255 call .SetMonsterName256 ld a,(StartingTownLevel2Unit)257 ld b,062+(1*48) 258 ld c,086 259 call .SetMonsterName260 ld a,(StartingTownLevel3Unit)261 ld b,066+(2*48) 262 ld c,086 263 call .SetMonsterName265 ld a,(StartingTownLevel4Unit)266 ld b,058+(0*48) 267 ld c,130 268 call .SetMonsterName269 ld a,(StartingTownLevel5Unit)270 ld b,062+(1*48) 271 ld c,130 272 call .SetMonsterName273 ld a,(StartingTownLevel6Unit)274 ld b,066+(2*48) 275 ld c,130 279 .SetMonsterName:280 call SetMonsterTableInIXCastleOverview 281 push ix282 pop hl283 ld de,MonsterTableName284 add hl,de286 call CenterHeroNameHasGainedALevel287 jp SetText291SetAvailableRecruitArmy:292 call SetCastleOverViewFontPage0Y212 294 call .army295 call .NamesAndAmount296 call .cost297 call .Gemscost298 call .Rubiescost299 call .attack300 call .defense301 call .HP302 call .SetBrownRecruitBarIf0UnitsAvailable303 call .SetInactiveWindowIfUnavailable304 ret306.SetBrownRecruitBarIf0UnitsAvailable:307 ld a,(iy+CastleLevel1UnitsAvail+00)308 or (iy+CastleLevel1UnitsAvail+01)309 call z,.Level1Units0Available311 ld a,(iy+CastleLevel2UnitsAvail+00)312 or (iy+CastleLevel2UnitsAvail+01)313 call z,.Level2Units0Available315 ld a,(iy+CastleLevel3UnitsAvail+00)316 or (iy+CastleLevel3UnitsAvail+01)317 call z,.Level3Units0Available319 ld a,(iy+CastleLevel4UnitsAvail+00)320 or (iy+CastleLevel4UnitsAvail+01)321 call z,.Level4Units0Available323 ld a,(iy+CastleLevel5UnitsAvail+00)324 or (iy+CastleLevel5UnitsAvail+01)325 call z,.Level5Units0Available327 ld a,(iy+CastleLevel6UnitsAvail+00)328 or (iy+CastleLevel6UnitsAvail+01)329 call z,.Level6Units0Available330 ret332 .Level1Units0Available:333 ld hl,$4000 + (063*128) + (162/2) - 128334 ld de,$0000 + ((034+30)*128) + ((005+001)/2) - 128 335 ld bc,$0000 + (009*256) + (076/2)336 ld a,ButtonsRecruitBlock 337 call CopyRamToVramCorrectedCastleOverview 338 xor a 339 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 340 ret341 342 .Level2Units0Available:343 ld hl,$4000 + (063*128) + (162/2) - 128344 ld de,$0000 + ((034+30)*128) + ((089+001)/2) - 128 345 ld bc,$0000 + (009*256) + (076/2)346 ld a,ButtonsRecruitBlock 347 call CopyRamToVramCorrectedCastleOverview 348 xor a 349 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 350 ret352 .Level3Units0Available:353 ld hl,$4000 + (063*128) + (162/2) - 128354 ld de,$0000 + ((034+30)*128) + ((173+001)/2) - 128 355 ld bc,$0000 + (009*256) + (076/2)356 ld a,ButtonsRecruitBlock 357 call CopyRamToVramCorrectedCastleOverview 358 xor a 359 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 360 ret362 .Level4Units0Available:363 ld hl,$4000 + (063*128) + (162/2) - 128364 ld de,$0000 + ((090+30)*128) + ((005+001)/2) - 128 365 ld bc,$0000 + (009*256) + (076/2)366 ld a,ButtonsRecruitBlock 367 call CopyRamToVramCorrectedCastleOverview 368 xor a 369 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 370 ret372 .Level5Units0Available:373 ld hl,$4000 + (063*128) + (162/2) - 128374 ld de,$0000 + ((090+30)*128) + ((089+001)/2) - 128 375 ld bc,$0000 + (009*256) + (076/2)376 ld a,ButtonsRecruitBlock 377 call CopyRamToVramCorrectedCastleOverview 378 xor a 379 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 380 ret382 .Level6Units0Available:383 ld hl,$4000 + (063*128) + (162/2) - 128384 ld de,$0000 + ((090+30)*128) + ((173+001)/2) - 128 385 ld bc,$0000 + (009*256) + (076/2)386 ld a,ButtonsRecruitBlock 387 call CopyRamToVramCorrectedCastleOverview 388 xor a 389 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 390 ret392 393.SetInactiveWindowIfUnavailable:394 ld a,(iy+CastleBarracksLevel+00)395 cp 6396 ret z397 cp 5398 jr z,.Level6UnitsUnavailable399 cp 4400 jr z,.Level5UnitsUnavailable401 cp 3402 jr z,.Level4UnitsUnavailable403 cp 2404 jr z,.Level3UnitsUnavailable406 .Level2UnitsUnavailable:407 ld hl,$4000 + (000*128) + (076/2) - 128408 ld de,$0000 + ((034-09)*128) + ((089+001)/2) - 128 409 ld bc,$0000 + (047*256) + (076/2)410 ld a,ButtonsRecruitBlock 411 call CopyRamToVramCorrectedCastleOverview 412 xor a 413 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 415 .Level3UnitsUnavailable:416 ld hl,$4000 + (000*128) + (076/2) - 128417 ld de,$0000 + ((034-09)*128) + ((173+001)/2) - 128 418 ld bc,$0000 + (047*256) + (076/2)419 ld a,ButtonsRecruitBlock 420 call CopyRamToVramCorrectedCastleOverview 421 xor a 422 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 424 .Level4UnitsUnavailable:425 ld hl,$4000 + (000*128) + (076/2) - 128426 ld de,$0000 + ((090-09)*128) + ((005+001)/2) - 128 427 ld bc,$0000 + (047*256) + (076/2)428 ld a,ButtonsRecruitBlock 429 call CopyRamToVramCorrectedCastleOverview 430 xor a 431 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 433 .Level5UnitsUnavailable:434 ld hl,$4000 + (000*128) + (076/2) - 128435 ld de,$0000 + ((090-09)*128) + ((089+001)/2) - 128 436 ld bc,$0000 + (047*256) + (076/2)437 ld a,ButtonsRecruitBlock 438 call CopyRamToVramCorrectedCastleOverview 439 xor a 440 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 442 .Level6UnitsUnavailable:443 ld hl,$4000 + (000*128) + (076/2) - 128444 ld de,$0000 + ((090-09)*128) + ((173+001)/2) - 128 445 ld bc,$0000 + (047*256) + (076/2)446 ld a,ButtonsRecruitBlock 447 call CopyRamToVramCorrectedCastleOverview 448 xor a 449 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 450 ret452.Rubiescost:453 ld a,(iy+CastleLevel1Units+00)454 ld b,005+45 455 ld c,043 456 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 457 call .SetRubiescost459 ld a,(iy+CastleLevel1Units+01)460 ld b,089+45 461 ld c,043 462 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 463 call .SetRubiescost465 ld a,(iy+CastleLevel1Units+02)466 ld b,173+45 467 ld c,043 468 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 469 call .SetRubiescost471 ld a,(iy+CastleLevel1Units+03)472 ld b,005+45 473 ld c,099 474 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 475 call .SetRubiescost477 ld a,(iy+CastleLevel1Units+04)478 ld b,089+45 479 ld c,099 480 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 481 call .SetRubiescost483 ld a,(iy+CastleLevel1Units+05)484 ld b,173+45 485 ld c,099 486 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 487 call .SetRubiescost488 ret490 .SetRubiescost:491 push de492 call SetRubiesCostSelectedCreatureInHL493 ld a,h494 or l495 jr z,.Zero 497 call SetNumber16BitCastle498 499 500 ld hl,$4000 + (000*128) + (242/2) - 128501502 pop de503 ld bc,$0000 + (013*256) + (014/2)504 ld a,ButtonsRecruitBlock 505 jp CopyRamToVramCorrectedCastleOverview 507.Gemscost:508 ld a,(iy+CastleLevel1Units+00)509 ld b,005+45 510 ld c,043 511 ld de,$0000 + ((034+05)*128) + ((005+030)/2) - 128 512 call .SetGemscost514 ld a,(iy+CastleLevel1Units+01)515 ld b,089+45 516 ld c,043 517 ld de,$0000 + ((034+05)*128) + ((089+030)/2) - 128 518 call .SetGemscost520 ld a,(iy+CastleLevel1Units+02)521 ld b,173+45 522 ld c,043 523 ld de,$0000 + ((034+05)*128) + ((173+030)/2) - 128 524 call .SetGemscost526 ld a,(iy+CastleLevel1Units+03)527 ld b,005+45 528 ld c,099 529 ld de,$0000 + ((090+05)*128) + ((005+030)/2) - 128 530 call .SetGemscost532 ld a,(iy+CastleLevel1Units+04)533 ld b,089+45 534 ld c,099 535 ld de,$0000 + ((090+05)*128) + ((089+030)/2) - 128 536 call .SetGemscost538 ld a,(iy+CastleLevel1Units+05)539 ld b,173+45 540 ld c,099 541 ld de,$0000 + ((090+05)*128) + ((173+030)/2) - 128 542 call .SetGemscost543 ret545 .SetGemscost:546 push de547 call SetGemsCostSelectedCreatureInHL548 ld a,h549 or l550 jr z,.Zero 552 call SetNumber16BitCastle553 554 555 ld hl,$4000 + (000*128) + (228/2) - 128556557 pop de558 ld bc,$0000 + (013*256) + (014/2)559 ld a,ButtonsRecruitBlock 560 jp CopyRamToVramCorrectedCastleOverview 562 .Zero: 563 pop de564 ret567 .attack:568 ld a,(iy+CastleLevel1Units+00)569 ld b,083-14 570 ld c,038 571 call .SetAttack573 ld a,(iy+CastleLevel1Units+01)574 ld b,167-14 575 ld c,038 576 call .SetAttack578 ld a,(iy+CastleLevel1Units+02)579 ld b,251-14 580 ld c,038 581 call .SetAttack583 ld a,(iy+CastleLevel1Units+03)584 ld b,083-14 585 ld c,038+56 586 call .SetAttack588 ld a,(iy+CastleLevel1Units+04)589 ld b,167-14 590 ld c,038+56 591 call .SetAttack593 ld a,(iy+CastleLevel1Units+05)594 ld b,251-14 595 ld c,038+56 596 call .SetAttack 597 ret599 .SetAttack:600 call SetAttackSelectedCreatureInHL 601 call SetNumber16BitCastle602 ret603 604 .defense:605 ld a,(iy+CastleLevel1Units+00)606 ld b,083-14 607 ld c,047 608 call .SetDefense610 ld a,(iy+CastleLevel1Units+01)611 ld b,167-14 612 ld c,047 613 call .SetDefense615 ld a,(iy+CastleLevel1Units+02)616 ld b,251-14 617 ld c,047 618 call .SetDefense620 ld a,(iy+CastleLevel1Units+03)621 ld b,083-14 622 ld c,047+56 623 call .SetDefense625 ld a,(iy+CastleLevel1Units+04)626 ld b,167-14 627 ld c,047+56 628 call .SetDefense630 ld a,(iy+CastleLevel1Units+05)631 ld b,251-14 632 ld c,047+56 633 call .SetDefense 634 ret636 .SetDefense:637 call SetDefenseSelectedCreatureInHL 638 call SetNumber16BitCastle639 ret641 .HP:642 ld a,(iy+CastleLevel1Units+00)643 ld b,083-14 644 ld c,056 645 call .SetHP647 ld a,(iy+CastleLevel1Units+01)648 ld b,167-14 649 ld c,056 650 call .SetHP652 ld a,(iy+CastleLevel1Units+02)653 ld b,251-14 654 ld c,056 655 call .SetHP657 ld a,(iy+CastleLevel1Units+03)658 ld b,083-14 659 ld c,056+56 660 call .SetHP662 ld a,(iy+CastleLevel1Units+04)663 ld b,167-14 664 ld c,056+56 665 call .SetHP667 ld a,(iy+CastleLevel1Units+05)668 ld b,251-14 669 ld c,056+56 670 call .SetHP 671 ret673 .SetHP:674 call SetHPSelectedCreatureInHL 675 call SetNumber16BitCastle676 ret677 678 .cost:679 ld a,(iy+CastleLevel1Units+00)680 ld b,005+023 681 ld c,055 682 call .SetCost684 ld a,(iy+CastleLevel1Units+01)685 ld b,089+023 686 ld c,055 687 call .SetCost689 ld a,(iy+CastleLevel1Units+02)690 ld b,173+023 691 ld c,055 692 call .SetCost694 ld a,(iy+CastleLevel1Units+03)695 ld b,005+023 696 ld c,111 697 call .SetCost699 ld a,(iy+CastleLevel1Units+04)700 ld b,089+023 701 ld c,111 702 call .SetCost704 ld a,(iy+CastleLevel1Units+05)705 ld b,173+023 706 ld c,111 707 call .SetCost708 ret710 .SetCost:711 call SetCostSelectedCreatureInHL 713 call SetNumber16BitCastle714 ret715 716 .setname:717 ret718 719 .NamesAndAmount:720 ld a,(iy+CastleLevel1Units+00)721 ld b,007 722 ld c,027 723 ld l,(iy+CastleLevel1UnitsAvail+00)724 ld h,(iy+CastleLevel1UnitsAvail+01) 725 call .SetNameAndAmount727 ld a,(iy+CastleLevel1Units+01)728 ld b,091 729 ld c,027 730 ld l,(iy+CastleLevel1UnitsAvail+02)731 ld h,(iy+CastleLevel1UnitsAvail+03) 732 call .SetNameAndAmount734 ld a,(iy+CastleLevel1Units+02)735 ld b,175 736 ld c,027 737 ld l,(iy+CastleLevel1UnitsAvail+04)738 ld h,(iy+CastleLevel1UnitsAvail+05) 739 call .SetNameAndAmount741 ld a,(iy+CastleLevel1Units+03)742 ld b,007 743 ld c,083 744 ld l,(iy+CastleLevel1UnitsAvail+06)745 ld h,(iy+CastleLevel1UnitsAvail+07)746 call .SetNameAndAmount748 ld a,(iy+CastleLevel1Units+04)749 ld b,091 750 ld c,083 751 ld l,(iy+CastleLevel1UnitsAvail+08)752 ld h,(iy+CastleLevel1UnitsAvail+09)753 call .SetNameAndAmount755 ld a,(iy+CastleLevel1Units+05)756 ld b,175 757 ld c,083 758 ld l,(iy+CastleLevel1UnitsAvail+10)759 ld h,(iy+CastleLevel1UnitsAvail+11)760 call .SetNameAndAmount761 ret763 .SetNameAndAmount:764 push hl 766 call SetMonsterTableInIXCastleOverview 768 push ix769 pop hl770 ld de,MonsterTableName771 add hl,de773 push bc774 call SetText775 pop bc777 ld a,(PutLetter+dx) 778 ld b,a779 780 ld hl,.TextSemiColon781 push bc782 call SetText783 pop bc785 ld a,(PutLetter+dx) 786 add a,3787 ld b,a788 pop hl 789 call SetNumber16BitCastle791 792 ld a,CastleOverviewCodeBlock 793 call block1234 794 ret796.TextSemiColon: db ":",255797 798.army:799 ld a,(iy+CastleLevel1Units) 800 call SetDefendingHeroArmyAndAmount.SetSYSX 801 ld de,DYDXUnit1Window 802 call CopyTransparantImage 804 ld a,(iy+CastleLevel2Units) 805 call SetDefendingHeroArmyAndAmount.SetSYSX 806 ld de,DYDXUnit2Window 807 call CopyTransparantImage 809 ld a,(iy+CastleLevel3Units) 810 call SetDefendingHeroArmyAndAmount.SetSYSX 811 ld de,DYDXUnit3Window 812 call CopyTransparantImage 814 ld a,(iy+CastleLevel4Units) 815 call SetDefendingHeroArmyAndAmount.SetSYSX 816 ld de,DYDXUnit4Window 817 call CopyTransparantImage 819 ld a,(iy+CastleLevel5Units) 820 call SetDefendingHeroArmyAndAmount.SetSYSX 821 ld de,DYDXUnit5Window 822 call CopyTransparantImage 824 ld a,(iy+CastleLevel6Units) 825 call SetDefendingHeroArmyAndAmount.SetSYSX 826 ld de,DYDXUnit6Window 827 call CopyTransparantImage 828 ret830DYDXUnit1Window: equ 038*256 + 008+1 831DYDXUnit2Window: equ 038*256 + 092+1 832DYDXUnit3Window: equ 038*256 + 176+1 833DYDXUnit4Window: equ 094*256 + 008+1 834DYDXUnit5Window: equ 094*256 + 092+1 835DYDXUnit6Window: equ 094*256 + 176+1 837SetCostSelectedCreatureInHL: 838 call SetMonsterTableInIXCastleOverview 839 ld h,0840 ld l,(ix+MonsterTableCostGold)842 add hl,hl 843 push hl844 add hl,hl 845 add hl,hl 846 pop de847 add hl,de 849 850 ld a,CastleOverviewCodeBlock 851 call block1234 852 ret854SetGemsCostSelectedCreatureInHL:855 call SetMonsterTableInIXCastleOverview 856 ld h,0857 ld l,(ix+MonsterTableCostGems)859 res 7,l 860 res 6,l861 res 5,l863 864 ld a,CastleOverviewCodeBlock 865 call block1234 866 ret868SetRubiesCostSelectedCreatureInHL:869 call SetMonsterTableInIXCastleOverview 870 ld h,0871 ld l,(ix+MonsterTableCostRubies)873 874 ld a,CastleOverviewCodeBlock 875 call block1234 876 ret878SetHPSelectedCreatureInHL:879 call SetMonsterTableInIXCastleOverview 880 ld h,0881 ld l,(ix+MonsterTableHp)883 884 ld a,CastleOverviewCodeBlock 885 call block1234 886 ret888SetAttackSelectedCreatureInHL:889 call SetMonsterTableInIXCastleOverview 890 ld h,0891 ld l,(ix+MonsterTableAttack)893 894 ld a,CastleOverviewCodeBlock 895 call block1234 896 ret898SetDefenseSelectedCreatureInHL:899 call SetMonsterTableInIXCastleOverview 900 ld h,0901 ld l,(ix+MonsterTableDefense)903 904 ld a,CastleOverviewCodeBlock 905 call block1234 906 ret908SetGrowthSelectedCreatureInHL:909 call SetMonsterTableInIXCastleOverview 910 ld h,0911 ld l,(ix+MonsterTableGrowth)913 914 ld a,CastleOverviewCodeBlock 915 call block1234 916 ret918SetMonsterTableInIXCastleOverview: 919 ld h,0920 ld l,a 921 922 ld a,MonsterAddressesForBattle1Block923 call block34 925 push bc926 ld ix,Monster001Table-LengthMonsterAddressesTable 927 ld de,LengthMonsterAddressesTable928 call MultiplyHlWithDE 929 push hl930 pop de931 add ix,de 932 pop bc933 ret935SettavernHeroSkill:936 ld a,HeroOverviewCodeBlock 937 call block34 939 ld a,(ix+TavernHero1)940 ld b,004+04 941 ld c,043+44 942 call .SetHeroSkill944 ld a,(ix+TavernHero2)945 ld b,090+04 946 ld c,043+44 947 call .SetHeroSkill949 ld a,(ix+TavernHero3)950 ld b,176+04 951 ld c,043+44 952 call .SetHeroSkill954 ld a,CastleOverviewCodeBlock 955 call block1234 956 ret958 .SetHeroSkill:959 or a960 ret z962 push ix 963 push bc964 ld b,a965 ld ix,HeroAddressesAdol-heroAddressesLenght966 ld de,heroAddressesLenght967 .loop:968 add ix,de969 djnz .loop970 pop bc971 972 ld a,(ix+HeroInfoSkill) 973 ld l,a974 ld h,0975 add hl,hl 976 add hl,hl 977 add hl,hl 978 push hl979 add hl,hl 980 add hl,hl 981 add hl,hl 982 add hl,hl 983 pop de984 add hl,de 985 ld de,SkillEmpty+$4000986 add hl,de988 call SetText 989 pop ix 990 ret992SetTextBuildingWhenClicked:993 ld a,(SetTextBuilding)994 dec a995 ret z996 ld (SetTextBuilding),a998 call ClearTextBuildWindow999 call SetSingleBuildButtonColor1000 call SetCastleOverViewFontPage0Y212 1002 ld hl,(PutWhichBuildText)1003 ld b,1821004 ld c,0471005 jp SetText100810161024SetTradingHeroesInventoryIcons:1025 ld ix,(plxcurrentheroAddress)1026 ld de,9 1027 add ix,de1029 1030 call .SetIconHLBCandA 1031 ld de,$0000 + (076*128) + (036/2)1032 call CopyRamToVramCorrectedCastleOverview 1034 call .SetIconHLBCandA 1035 ld de,$0000 + (076*128) + (058/2)1036 call CopyRamToVramCorrectedCastleOverview 1038 call .SetIconHLBCandA 1039 ld de,$0000 + (076*128) + (080/2)1040 call CopyRamToVramCorrectedCastleOverview 1042 call .SetIconHLBCandA 1043 ld de,$0000 + (076*128) + (102/2)1044 call CopyRamToVramCorrectedCastleOverview 1046 call .SetIconHLBCandA 1047 ld de,$0000 + (076*128) + (124/2)1048 call CopyRamToVramCorrectedCastleOverview 1050 call .SetIconHLBCandA 1051 ld de,$0000 + (076*128) + (146/2)1052 call CopyRamToVramCorrectedCastleOverview 1054 ld ix,(HeroWeTradeWith) 1055 ld de,9 1056 add ix,de1058 1059 call .SetIconHLBCandA 1060 ld de,$0000 + (140*128) + (036/2)1061 call CopyRamToVramCorrectedCastleOverview 1063 call .SetIconHLBCandA 1064 ld de,$0000 + (140*128) + (058/2)1065 call CopyRamToVramCorrectedCastleOverview 1067 call .SetIconHLBCandA 1068 ld de,$0000 + (140*128) + (080/2)1069 call CopyRamToVramCorrectedCastleOverview 1071 call .SetIconHLBCandA 1072 ld de,$0000 + (140*128) + (102/2)1073 call CopyRamToVramCorrectedCastleOverview 1075 call .SetIconHLBCandA 1076 ld de,$0000 + (140*128) + (124/2)1077 call CopyRamToVramCorrectedCastleOverview 1079 call .SetIconHLBCandA 1080 ld de,$0000 + (140*128) + (146/2)1081 call CopyRamToVramCorrectedCastleOverview 1082 ret1084 .SetIconHLBCandA:1085 ld a,(ix+HeroInventory) 1086 call .CheckScrollIcon 1087 add a,a 1088 add a,a 1089 ld iy,.InventoryIconTableSYSX1090 ld d,01091 ld e,a1092 add iy,de1093 ld l,(iy)1094 ld h,(iy+1)1095 inc ix1096 ld bc,$0000 + (InventoryItemNY*256) + (InventoryItemNX/2)1097 ld a,InventoryGraphicsBlock1098 ret1099 1100 .CheckScrollIcon:1101 cp ScrollIconNR1102 ret c1103 ld a,ScrollIconNR1104 ret 1106.InventoryIconTableSYSX: 1107 dw $4000 + (InventoryItem00ButtonOffSY*128) + (InventoryItem00ButtonOffSX/2) - 128 1108 dw $4000 + (InventoryItem00MouseOverSY*128) + (InventoryItem00MouseOverSX/2) - 1281109 dw $4000 + (InventoryItem01ButtonOffSY*128) + (InventoryItem01ButtonOffSX/2) - 128 1110 dw $4000 + (InventoryItem01MouseOverSY*128) + (InventoryItem01MouseOverSX/2) - 1281111 dw $4000 + (InventoryItem02ButtonOffSY*128) + (InventoryItem02ButtonOffSX/2) - 128 1112 dw $4000 + (InventoryItem02MouseOverSY*128) + (InventoryItem02MouseOverSX/2) - 1281113 dw $4000 + (InventoryItem03ButtonOffSY*128) + (InventoryItem03ButtonOffSX/2) - 128 1114 dw $4000 + (InventoryItem03MouseOverSY*128) + (InventoryItem03MouseOverSX/2) - 1281115 dw $4000 + (InventoryItem04ButtonOffSY*128) + (InventoryItem04ButtonOffSX/2) - 128 1116 dw $4000 + (InventoryItem04MouseOverSY*128) + (InventoryItem04MouseOverSX/2) - 1281118 dw $4000 + (InventoryItem05ButtonOffSY*128) + (InventoryItem05ButtonOffSX/2) - 128 1119 dw $4000 + (InventoryItem05MouseOverSY*128) + (InventoryItem05MouseOverSX/2) - 1281120 dw $4000 + (InventoryItem06ButtonOffSY*128) + (InventoryItem06ButtonOffSX/2) - 128 1121 dw $4000 + (InventoryItem06MouseOverSY*128) + (InventoryItem06MouseOverSX/2) - 1281122 dw $4000 + (InventoryItem07ButtonOffSY*128) + (InventoryItem07ButtonOffSX/2) - 128 1123 dw $4000 + (InventoryItem07MouseOverSY*128) + (InventoryItem07MouseOverSX/2) - 1281124 dw $4000 + (InventoryItem08ButtonOffSY*128) + (InventoryItem08ButtonOffSX/2) - 128 1125 dw $4000 + (InventoryItem08MouseOverSY*128) + (InventoryItem08MouseOverSX/2) - 1281126 dw $4000 + (InventoryItem09ButtonOffSY*128) + (InventoryItem09ButtonOffSX/2) - 128 1127 dw $4000 + (InventoryItem09MouseOverSY*128) + (InventoryItem09MouseOverSX/2) - 1281129 dw $4000 + (InventoryItem10ButtonOffSY*128) + (InventoryItem10ButtonOffSX/2) - 128 1130 dw $4000 + (InventoryItem10MouseOverSY*128) + (InventoryItem10MouseOverSX/2) - 1281131 dw $4000 + (InventoryItem11ButtonOffSY*128) + (InventoryItem11ButtonOffSX/2) - 128 1132 dw $4000 + (InventoryItem11MouseOverSY*128) + (InventoryItem11MouseOverSX/2) - 1281133 dw $4000 + (InventoryItem12ButtonOffSY*128) + (InventoryItem12ButtonOffSX/2) - 128 1134 dw $4000 + (InventoryItem12MouseOverSY*128) + (InventoryItem12MouseOverSX/2) - 1281135 dw $4000 + (InventoryItem13ButtonOffSY*128) + (InventoryItem13ButtonOffSX/2) - 128 1136 dw $4000 + (InventoryItem13MouseOverSY*128) + (InventoryItem13MouseOverSX/2) - 1281137 dw $4000 + (InventoryItem14ButtonOffSY*128) + (InventoryItem14ButtonOffSX/2) - 128 1138 dw $4000 + (InventoryItem14MouseOverSY*128) + (InventoryItem14MouseOverSX/2) - 1281140 dw $4000 + (InventoryItem15ButtonOffSY*128) + (InventoryItem15ButtonOffSX/2) - 128 1141 dw $4000 + (InventoryItem15MouseOverSY*128) + (InventoryItem15MouseOverSX/2) - 1281142 dw $4000 + (InventoryItem16ButtonOffSY*128) + (InventoryItem16ButtonOffSX/2) - 128 1143 dw $4000 + (InventoryItem16MouseOverSY*128) + (InventoryItem16MouseOverSX/2) - 1281144 dw $4000 + (InventoryItem17ButtonOffSY*128) + (InventoryItem17ButtonOffSX/2) - 128 1145 dw $4000 + (InventoryItem17MouseOverSY*128) + (InventoryItem17MouseOverSX/2) - 1281146 dw $4000 + (InventoryItem18ButtonOffSY*128) + (InventoryItem18ButtonOffSX/2) - 128 1147 dw $4000 + (InventoryItem18MouseOverSY*128) + (InventoryItem18MouseOverSX/2) - 1281148 dw $4000 + (InventoryItem19ButtonOffSY*128) + (InventoryItem19ButtonOffSX/2) - 128 1149 dw $4000 + (InventoryItem19MouseOverSY*128) + (InventoryItem19MouseOverSX/2) - 1281151 dw $4000 + (InventoryItem20ButtonOffSY*128) + (InventoryItem20ButtonOffSX/2) - 128 1152 dw $4000 + (InventoryItem20MouseOverSY*128) + (InventoryItem20MouseOverSX/2) - 1281153 dw $4000 + (InventoryItem21ButtonOffSY*128) + (InventoryItem21ButtonOffSX/2) - 128 1154 dw $4000 + (InventoryItem21MouseOverSY*128) + (InventoryItem21MouseOverSX/2) - 1281155 dw $4000 + (InventoryItem22ButtonOffSY*128) + (InventoryItem22ButtonOffSX/2) - 128 1156 dw $4000 + (InventoryItem22MouseOverSY*128) + (InventoryItem22MouseOverSX/2) - 1281157 dw $4000 + (InventoryItem23ButtonOffSY*128) + (InventoryItem23ButtonOffSX/2) - 128 1158 dw $4000 + (InventoryItem23MouseOverSY*128) + (InventoryItem23MouseOverSX/2) - 1281159 dw $4000 + (InventoryItem24ButtonOffSY*128) + (InventoryItem24ButtonOffSX/2) - 128 1160 dw $4000 + (InventoryItem24MouseOverSY*128) + (InventoryItem24MouseOverSX/2) - 1281162 dw $4000 + (InventoryItem25ButtonOffSY*128) + (InventoryItem25ButtonOffSX/2) - 128 1163 dw $4000 + (InventoryItem25MouseOverSY*128) + (InventoryItem25MouseOverSX/2) - 1281164 dw $4000 + (InventoryItem26ButtonOffSY*128) + (InventoryItem26ButtonOffSX/2) - 128 1165 dw $4000 + (InventoryItem26MouseOverSY*128) + (InventoryItem26MouseOverSX/2) - 1281166 dw $4000 + (InventoryItem27ButtonOffSY*128) + (InventoryItem27ButtonOffSX/2) - 128 1167 dw $4000 + (InventoryItem27MouseOverSY*128) + (InventoryItem27MouseOverSX/2) - 1281168 dw $4000 + (InventoryItem28ButtonOffSY*128) + (InventoryItem28ButtonOffSX/2) - 128 1169 dw $4000 + (InventoryItem28MouseOverSY*128) + (InventoryItem28MouseOverSX/2) - 1281170 dw $4000 + (InventoryItem29ButtonOffSY*128) + (InventoryItem29ButtonOffSX/2) - 128 1171 dw $4000 + (InventoryItem29MouseOverSY*128) + (InventoryItem29MouseOverSX/2) - 1281175 dw $4000 + (InventoryItem30ButtonOffSY*128) + (InventoryItem30ButtonOffSX/2) - 128 1176 dw $4000 + (InventoryItem30MouseOverSY*128) + (InventoryItem30MouseOverSX/2) - 1281177 dw $4000 + (InventoryItem31ButtonOffSY*128) + (InventoryItem31ButtonOffSX/2) - 128 1178 dw $4000 + (InventoryItem31MouseOverSY*128) + (InventoryItem31MouseOverSX/2) - 1281179 dw $4000 + (InventoryItem32ButtonOffSY*128) + (InventoryItem32ButtonOffSX/2) - 128 1180 dw $4000 + (InventoryItem32MouseOverSY*128) + (InventoryItem32MouseOverSX/2) - 1281181 dw $4000 + (InventoryItem33ButtonOffSY*128) + (InventoryItem33ButtonOffSX/2) - 128 1182 dw $4000 + (InventoryItem33MouseOverSY*128) + (InventoryItem33MouseOverSX/2) - 1281183 dw $4000 + (InventoryItem34ButtonOffSY*128) + (InventoryItem34ButtonOffSX/2) - 128 1184 dw $4000 + (InventoryItem34MouseOverSY*128) + (InventoryItem34MouseOverSX/2) - 1281186 dw $4000 + (InventoryItem35ButtonOffSY*128) + (InventoryItem35ButtonOffSX/2) - 128 1187 dw $4000 + (InventoryItem35MouseOverSY*128) + (InventoryItem35MouseOverSX/2) - 1281188 dw $4000 + (InventoryItem36ButtonOffSY*128) + (InventoryItem36ButtonOffSX/2) - 128 1189 dw $4000 + (InventoryItem36MouseOverSY*128) + (InventoryItem36MouseOverSX/2) - 1281190 dw $4000 + (InventoryItem37ButtonOffSY*128) + (InventoryItem37ButtonOffSX/2) - 128 1191 dw $4000 + (InventoryItem37MouseOverSY*128) + (InventoryItem37MouseOverSX/2) - 1281192 dw $4000 + (InventoryItem38ButtonOffSY*128) + (InventoryItem38ButtonOffSX/2) - 128 1193 dw $4000 + (InventoryItem38MouseOverSY*128) + (InventoryItem38MouseOverSX/2) - 1281194 dw $4000 + (InventoryItem39ButtonOffSY*128) + (InventoryItem39ButtonOffSX/2) - 128 1195 dw $4000 + (InventoryItem39MouseOverSY*128) + (InventoryItem39MouseOverSX/2) - 1281197 dw $4000 + (InventoryItem40ButtonOffSY*128) + (InventoryItem40ButtonOffSX/2) - 128 1198 dw $4000 + (InventoryItem40MouseOverSY*128) + (InventoryItem40MouseOverSX/2) - 1281199 dw $4000 + (InventoryItem41ButtonOffSY*128) + (InventoryItem41ButtonOffSX/2) - 128 1200 dw $4000 + (InventoryItem41MouseOverSY*128) + (InventoryItem41MouseOverSX/2) - 1281201 dw $4000 + (InventoryItem42ButtonOffSY*128) + (InventoryItem42ButtonOffSX/2) - 128 1202 dw $4000 + (InventoryItem42MouseOverSY*128) + (InventoryItem42MouseOverSX/2) - 1281203 dw $4000 + (InventoryItem43ButtonOffSY*128) + (InventoryItem43ButtonOffSX/2) - 128 1204 dw $4000 + (InventoryItem43MouseOverSY*128) + (InventoryItem43MouseOverSX/2) - 1281205 dw $4000 + (InventoryItem44ButtonOffSY*128) + (InventoryItem44ButtonOffSX/2) - 128 1206 dw $4000 + (InventoryItem44MouseOverSY*128) + (InventoryItem44MouseOverSX/2) - 1281208 dw $4000 + (InventoryItem45ButtonOffSY*128) + (InventoryItem45ButtonOffSX/2) - 128 1209 dw $4000 + (InventoryItem45MouseOverSY*128) + (InventoryItem45MouseOverSX/2) - 1281211 dw $4000 + (InventoryItem46ButtonOffSY*128) + (InventoryItem46ButtonOffSX/2) - 128 1212 dw $4000 + (InventoryItem46MouseOverSY*128) + (InventoryItem46MouseOverSX/2) - 1281218UpdateHudCode:1219 ld a,31220 ld (SetHeroArmyAndStatusInHud?),a 1221 call SetHeroArmyAndStatusInHud 1222 ret1224HudCode:1225 call checkcurrentplayerhuman 1226 ret z1228 call SetHeroArmyAndStatusInHud 1229 call SetCastlesInWindows 1230 call SetResources1232 1235 call .CheckButtonClicked 1237 call checkcurrentplayerhuman 1238 ret z1240 call SetHeroesInWindows 1242 call SetManaAndMovementBars 1244 ld ix,GenericButtonTable31245 call SetGenericButtons 1247 ret1249.CheckButtonClicked: 1250 ld a,(WhichHudButtonClicked?)1251 or a1252 ret z1253 ld b,a1254 xor a1255 ld (WhichHudButtonClicked?),a1257 ld a,b1258 cp 121259 jp z,CheckHeroArrowUp1260 cp 111261 jp z,FirstHeroWindowClicked1262 cp 101263 jp z,SecondHeroWindowClicked1264 cp 091265 jp z,ThirdHeroWindowClicked1266 cp 081267 jp z,CheckHeroArrowDown1269 cp 071270 jp z,CheckCastleArrowUp1271 cp 061272 jp z,FirstCastleWindowClicked1273 cp 051274 jp z,SecondCastleWindowClicked1275 cp 041276 jp z,ThirdCastleWindowClicked1277 cp 031278 jp z,CheckCastleArrowDown1279 cp 021280 jp z,EndTurn1281 cp 011282 jp z,DiskMenu1283 ret1285DiskMenu:1286 ld a,31287 ld (DiskMenuClicked?),a 1288 ret1290EndTurn:1291 ld a,21292 ld (DisplayStartOfTurnMessage?),a1294 call SetHero1ForCurrentPlayerInIX1296 1297 ld b,amountofheroesperplayer 1298 .loop:1300 1301 ld l,(ix+HeroTotalMana+0)1302 ld h,(ix+HeroTotalMana+1) 1303 ld e,(ix+HeroMana+0)1304 ld d,(ix+HeroMana+1)1305 or a1306 sbc hl,de1307 jr c,.EndSetMana1308 1309 ld l,(ix+HeroMana+0)1310 ld h,(ix+HeroMana+1)1311 ld d,01312 ld e,(ix+HeroManarec+0)1313 add hl,de 1314 ld e,(ix+HeroTotalMana+0)1315 ld d,(ix+HeroTotalMana+1) 1316 sbc hl,de1317 jp c,.nooverflowmana1318 ld l,(ix+HeroTotalMana+0)1319 ld h,(ix+HeroTotalMana+1) 1320 jr .SetMana1321 .nooverflowmana:1322 add hl,de1323 .SetMana:1324 ld (ix+HeroMana+0),l1325 ld (ix+HeroMana+1),h1326 .EndSetMana:1328 ld a,(ix+HeroTotalMove) 1329 ld (ix+HeroMove),a 1330 ld de,lenghtherotable1331 add ix,de 1332 djnz .loop1334 call SetNextPlayersTurnAndCheckPlayerEliminated1335 1336 ld hl,(Date) 1337 ld a,h1338 or l1339 jr z,.EndCheckNoIncomeDay1 1340 call AddCastlesIncomeToPlayer 1341 call AddCastlesSawmillResources 1342 call AddCastlesMineResources 1343 call AddEstatesIncomeToPlayer 1344 call AddKingsGarmentIncomeToPlayer 1345 .EndCheckNoIncomeDay1:1347 call ActivateFirstActiveHeroForCurrentPlayer1348 xor a1349 ld (SetHeroOverViewMenu?),a 1350 ret1352IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn:1353 ld hl,(Date)1354 inc hl1355 ld (Date),hl1356 call AddCreaturesToPools 1357 call SetAndRotateTavernHeroes 1358 call RefillManaHeroesInCastles 1359 jp ClearAlreadyBuiltThisTurnCastles1361SetNextPlayersTurnAndCheckPlayerEliminated:1362 call SetNextPlayersTurn1364 ld a,(whichplayernowplaying?) 1365 dec a1366 call z,IncDatePlayer1AddCreaturesRotateTavernHeroesRefillManaClearAlreadyBuiltThisTurn1368 ld a,(whichplayernowplaying?) 1369 ld b,a1370 dec a1371 ld hl,pl1hero1y+HeroStatus 1372 jr z,.PlayerFound1373 dec a1374 ld hl,pl2hero1y+HeroStatus 1375 jr z,.PlayerFound1376 dec a1377 ld hl,pl3hero1y+HeroStatus 1378 jr z,.PlayerFound13791380 ld hl,pl4hero1y+HeroStatus 1383 .PlayerFound:1384 ld a,(hl) 1385 inc a 1386 ret nz1387 1388 ld a,(Castle1+CastlePlayer)1389 cp b1390 ret z1391 ld a,(Castle2+CastlePlayer)1392 cp b1393 ret z1394 ld a,(Castle3+CastlePlayer)1395 cp b1396 ret z1397 ld a,(Castle4+CastlePlayer)1398 cp b1399 ret z1400 1401 jr SetNextPlayersTurnAndCheckPlayerEliminated1403AddCreaturesToPools: 1405 ld bc,(Date)1406 ld de,7 1407 call DivideBCbyDE 1408 ld a,h 1409 or l1410 ret nz1412 ld ix,Castle11413 call .AddCreatures1414 ld ix,Castle21415 call .AddCreatures1416 ld ix,Castle31417 call .AddCreatures1418 ld ix,Castle41419 call .AddCreatures1420 ret1421 1422 .AddCreatures:1423 ld a,(ix+CastleBarracksLevel)1424 or a1425 ret z1426 dec a1427 jp z,.BarracksLevel11428 dec a1429 jp z,.BarracksLevel21430 dec a1431 jp z,.BarracksLevel31432 dec a1433 jp z,.BarracksLevel41434 dec a1435 jp z,.BarracksLevel51437 .BarracksLevel6:1438 ld a,(ix+CastleLevel6Units)1439 push ix1440 call SetGrowthSelectedCreatureInHL 1441 pop ix 1442 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1443 ld e,(ix+CastleLevel6UnitsAvail)1444 ld d,(ix+CastleLevel6UnitsAvail+1)1445 add hl,de1446 ld (ix+CastleLevel6UnitsAvail),l1447 ld (ix+CastleLevel6UnitsAvail+1),h1449 .BarracksLevel5:1450 ld a,(ix+CastleLevel5Units)1451 push ix1452 call SetGrowthSelectedCreatureInHL 1453 pop ix1454 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1455 ld e,(ix+CastleLevel5UnitsAvail)1456 ld d,(ix+CastleLevel5UnitsAvail+1)1457 add hl,de1458 ld (ix+CastleLevel5UnitsAvail),l1459 ld (ix+CastleLevel5UnitsAvail+1),h1461 .BarracksLevel4:1462 ld a,(ix+CastleLevel4Units)1463 push ix1464 call SetGrowthSelectedCreatureInHL 1465 pop ix1466 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1467 ld e,(ix+CastleLevel4UnitsAvail)1468 ld d,(ix+CastleLevel4UnitsAvail+1)1469 add hl,de1470 ld (ix+CastleLevel4UnitsAvail),l1471 ld (ix+CastleLevel4UnitsAvail+1),h1473 .BarracksLevel3:1474 ld a,(ix+CastleLevel3Units)1475 push ix1476 call SetGrowthSelectedCreatureInHL 1477 pop ix1478 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1479 ld e,(ix+CastleLevel3UnitsAvail)1480 ld d,(ix+CastleLevel3UnitsAvail+1)1481 add hl,de1482 ld (ix+CastleLevel3UnitsAvail),l1483 ld (ix+CastleLevel3UnitsAvail+1),h1485 .BarracksLevel2:1486 ld a,(ix+CastleLevel2Units)1487 push ix1488 call SetGrowthSelectedCreatureInHL 1489 pop ix1490 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1491 ld e,(ix+CastleLevel2UnitsAvail)1492 ld d,(ix+CastleLevel2UnitsAvail+1)1493 add hl,de1494 ld (ix+CastleLevel2UnitsAvail),l1495 ld (ix+CastleLevel2UnitsAvail+1),h1497 .BarracksLevel1:1498 ld a,(ix+CastleLevel1Units)1499 push ix1500 call SetGrowthSelectedCreatureInHL 1501 pop ix1502 call .Apply50or100PercentAddedGrowthForCitadelOrCapitol1503 ld e,(ix+CastleLevel1UnitsAvail)1504 ld d,(ix+CastleLevel1UnitsAvail+1)1505 add hl,de1506 ld (ix+CastleLevel1UnitsAvail),l1507 ld (ix+CastleLevel1UnitsAvail+1),h1508 ret1510.Apply50or100PercentAddedGrowthForCitadelOrCapitol:1511 ld a,(ix+CastleLevel)1512 cp 4 1513 ld de,02 1514 jp z,SetChestText.ApplyPercentBasedBoost1515 cp 5 1516 ld de,01 1517 jp nc,SetChestText.ApplyPercentBasedBoost1518 ret1520SetManaAndMovementToMax:1521 call SetHeroMaxMovementPoints.IxAlreadySet1522 ld (ix+HeroMove),a 1524 ld de,ItemIntelligencePointsTable1525 push ix1526 call SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 1527 pop ix1528 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1530 ld l,(ix+HeroTotalMana+0)1531 ld h,(ix+HeroTotalMana+1)1532 ld (ix+HeroMana+0),l1533 ld (ix+HeroMana+1),h1534 ret1536ClearAlreadyBuiltThisTurnCastles:1537 xor a1538 ld (Castle1+AlreadyBuiltThisTurn?),a1539 ld (Castle2+AlreadyBuiltThisTurn?),a1540 ld (Castle3+AlreadyBuiltThisTurn?),a1541 ld (Castle4+AlreadyBuiltThisTurn?),a1542 ret1545RefillManaHeroesInCastles:1546 ld ix,pl1hero1y1547 call .RefillThisPlayer1548 ld ix,pl2hero1y1549 call .RefillThisPlayer1550 ld ix,pl3hero1y1551 call .RefillThisPlayer1552 ld ix,pl4hero1y15531555 .RefillThisPlayer:1556 ld b,amountofheroesperplayer1557 ld de,lenghtherotable1558 1559 .loop:1560 ld a,(ix+HeroStatus) 1561 cp 21562 jr z,.Refill1563 cp 2541564 jr z,.Refill1565 add ix,de1566 djnz .loop 1567 ret1569 .Refill:1570 ld l,(ix+HeroTotalMana+0)1571 ld h,(ix+HeroTotalMana+1) 1572 ld (ix+HeroMana+0),l1573 ld (ix+HeroMana+1),h1574 djnz .loop 1575 ret1577SetAndRotateTavernHeroes: 1578 ld hl,TavernHeroesPlayer1+11579 ld de,TavernHeroesPlayer11580 ld bc,TavernHeroesPlayer1+TavernHeroTableLenght-21581 call .RotateForThisPlayer 1582 ld hl,TavernHeroesPlayer2+11583 ld de,TavernHeroesPlayer21584 ld bc,TavernHeroesPlayer2+TavernHeroTableLenght-21585 call .RotateForThisPlayer 1586 ld hl,TavernHeroesPlayer3+11587 ld de,TavernHeroesPlayer31588 ld bc,TavernHeroesPlayer3+TavernHeroTableLenght-21589 call .RotateForThisPlayer 1590 ld hl,TavernHeroesPlayer4+11591 ld de,TavernHeroesPlayer41592 ld bc,TavernHeroesPlayer4+TavernHeroTableLenght-21593 call .RotateForThisPlayer 1594 ret1596 .RotateForThisPlayer:1597 push bc1598 ld a,(de) 1599 ex af,af' 1600 ld bc,TavernHeroTableLenght-11601 ldir1602 1603 1604 pop hl1605 .loop:1606 ld a,(hl)1607 or a1608 jr nz,.HeroFound1609 dec hl1610 jr .loop1612 .HeroFound:1613 inc hl1614 ex af,af' 1615 ld (hl),a1616 ret1618AddKingsGarmentIncomeToPlayer:1619 call SetHero1ForCurrentPlayerInIX1621 ld b,amountofheroesperplayer1622 .loop:1623 push ix1624 call .CheckSkill1625 pop ix1626 1627 ld de,lenghtherotable1628 add ix,de 1629 djnz .loop1630 ret1631 1632 .CheckSkill:1633 ld a,(ix+HeroStatus) 1634 cp 2551635 ret z 1636 ld a,(ix+Heroy)1637 cp 255 1638 ret z 1640 ld a,(ix+HeroInventory+8) 1641 cp 040 1642 ret nz1644 call SetResourcesCurrentPlayerinIX 1645 1646 ld l,(ix+0)1647 ld h,(ix+1)1648 ld de,1251649 add hl,de1650 ret c1651 ld (ix+0),l1652 ld (ix+1),h1653 ret1655AddEstatesIncomeToPlayer: 1656 call SetHero1ForCurrentPlayerInIX1658 ld c,amountofheroesperplayer1659 .loop:1660 ld b,6 1661 push ix1662 call .CheckSkill1663 pop ix1664 1665 ld de,lenghtherotable1666 add ix,de 1667 dec c1668 jr nz,.loop1669 ret1670 1671 .CheckSkill:1672 ld a,(ix+HeroStatus) 1673 cp 2551674 ret z 1675 ld a,(ix+Heroy)1676 cp 255 1677 ret z 1679 ld a,(ix+HeroSkills)1680 cp 131681 ld de,1251682 jr z,.EstatesFound 1683 cp 141684 ld de,2501685 jr z,.EstatesFound 1686 cp 151687 ld de,5001688 jr z,.EstatesFound 1690 inc ix 1691 djnz .CheckSkill1692 ret1694.EstatesFound:1695 call SetResourcesCurrentPlayerinIX 1696 1697 ld l,(ix+0)1698 ld h,(ix+1)1699 add hl,de1700 ret c1701 ld (ix+0),l1702 ld (ix+1),h1703 ret1705AddCastlesMineResources: 1706 call SetResourcesCurrentPlayerinIX 1708 ld iy,Castle11709 call .CheckCastle1710 ld iy,Castle21711 call .CheckCastle1712 ld iy,Castle31713 call .CheckCastle1714 ld iy,Castle41715 call .CheckCastle1716 ret1718 .CheckCastle:1719 ld a,(whichplayernowplaying?) 1720 cp (iy+CastlePlayer) 1721 ret nz 1723 ld a,(iy+CastleMineLevel) 1724 or a1725 ret z1726 cp 11727 ld de,0001 1728 ld bc,000 1729 ld hl,000 1730 jr z,.MineLevelFound1731 cp 21732 ld de,0002 1733 ld bc,001 1734 ld hl,000 1735 jr z,.MineLevelFound1736 ld de,0003 1737 ld bc,001 1738 ld hl,001 1739 .MineLevelFound:1741 push de1742 1743 ld e,(ix+8)1744 ld d,(ix+9)1745 add hl,de1746 pop de1747 ret c1748 ld (ix+8),l1749 ld (ix+9),h1751 1752 ld l,(ix+6)1753 ld h,(ix+7)1754 add hl,bc1755 ret c1756 ld (ix+6),l1757 ld (ix+7),h1759 1760 ld l,(ix+4)1761 ld h,(ix+5)1762 add hl,de1763 ret c1764 ld (ix+4),l1765 ld (ix+5),h1766 ret1768AddCastlesSawmillResources: 1769 call SetResourcesCurrentPlayerinIX 1771 ld iy,Castle11772 call .CheckCastle1773 ld iy,Castle21774 call .CheckCastle1775 ld iy,Castle31776 call .CheckCastle1777 ld iy,Castle41778 call .CheckCastle1779 ret1781 .CheckCastle:1782 ld a,(whichplayernowplaying?) 1783 cp (iy+CastlePlayer) 1784 ret nz 1786 ld a,(iy+CastleSawmillLevel) 1787 or a1788 ret z1789 cp 11790 ld de,0001 1791 jr z,.SawmillLevelFound1792 cp 21793 ld de,0002 1794 jr z,.SawmillLevelFound1795 ld de,0003 1796 .SawmillLevelFound:1798 1799 ld l,(ix+2)1800 ld h,(ix+3)1801 add hl,de1802 ret c1803 ld (ix+2),l1804 ld (ix+3),h1805 ret1807AddCastlesIncomeToPlayer: 1808 call SetResourcesCurrentPlayerinIX 1810 ld iy,Castle11811 call .CheckCastle1812 ld iy,Castle21813 call .CheckCastle1814 ld iy,Castle31815 call .CheckCastle1816 ld iy,Castle41817 call .CheckCastle1818 ret1820 .CheckCastle:1821 ld a,(whichplayernowplaying?) 1822 cp (iy+CastlePlayer) 1823 ret nz 1825 ld a,(iy+CastleLevel) 1826 cp 11827 ld de,500 1828 jr z,.CastleLevelFound1829 cp 21830 ld de,1000 1831 jr z,.CastleLevelFound1832 cp 31833 ld de,2000 1834 jr z,.CastleLevelFound1835 cp 41836 ld de,3000 1837 jr z,.CastleLevelFound1838 ld de,4000 1839 .CastleLevelFound:1841 1842 ld l,(ix+0)1843 ld h,(ix+1)1844 add hl,de1845 ret c1846 ld (ix+0),l1847 ld (ix+1),h1848 ret1850SetResources:1851 ld a,(SetResources?)1852 dec a1853 ret z1854 ld (SetResources?),a1856 call SetCastleOverViewFontPage0Y212 1857 call ClearResourcesHud1858 call SetResourcesCurrentPlayerinIX1860 1861 ld b,229 1862 ld c,204 1863 ld l,(ix+0)1864 ld h,(ix+1)1865 call SetNumber16BitCastle 1867 ld b,032+004 1868 ld c,204 1869 ld l,(ix+2)1870 ld h,(ix+3)1871 call SetNumber16BitCastle 1873 ld b,078+004 1874 ld c,204 1875 ld l,(ix+4)1876 ld h,(ix+5)1877 call SetNumber16BitCastle 1879 ld b,124+004 1880 ld c,204 1881 ld l,(ix+6)1882 ld h,(ix+7)1883 call SetNumber16BitCastle 1885 ld b,169+004 1886 ld c,204 1887 ld l,(ix+8)1888 ld h,(ix+9)1889 call SetNumber16BitCastle 1890 ret1892ClearResourcesHud: 1893 1894 ld hl,$4000 + (204*128) + (032/2) - 1281895 ld de,$0000 + (204*128) + (032/2) - 1281896 ld bc,$0000 + (005*256) + (224/2)1897 ld a,HudNewBlock 1898 jp CopyRamToVramCorrectedCastleOverview 1900SetHeroArmyAndStatusInHud:1901 call checkcurrentplayerhuman 1902 ret z1904 ld a,(SetHeroArmyAndStatusInHud?)1905 dec a1906 ret z1907 ld (SetHeroArmyAndStatusInHud?),a1909 call ClearHeroStatsAndArmyUnitsAmount1910 ld ix,(plxcurrentheroAddress)1911 ld a,(ix+HeroStatus)1912 cp 2551913 ret z 1915 call SetCastleOverViewFontPage0Y212 1916 call SetArmyUnits1917 call SetArmyUnitsAmount1918 call SetHeroPortrait10x181919 call SetHeroStats1920 ret1922ClearHeroStatsAndArmyUnitsAmount:1923 ld hl,$4000 + (122*128) + (202/2) - 1281924 ld de,$0000 + (122*128) + (202/2) - 1281925 ld bc,$0000 + (075*256) + (052/2)1926 ld a,HudNewBlock 1927 jp CopyRamToVramCorrectedCastleOverview 1929SetHeroStats:1930 ld ix,(plxcurrentheroAddress)1932 ld de,ItemAttackPointsTable1933 call SetAdditionalStatFromInventoryItemsInHL1934 ld e,(ix+HeroStatAttack) 1935 ld d,01936 add hl,de1937 ld b,216+001 1938 ld c,145 1939 call SetNumber16BitCastle1941 ld de,ItemDefencePointsTable1942 call SetAdditionalStatFromInventoryItemsInHL1943 ld e,(ix+HeroStatDefense) 1944 ld d,01945 add hl,de1946 1947 bit 7,h 1948 jr z,.SetDefense1949 ld hl,01950 .SetDefense:1951 1952 ld b,225+001 1953 ld c,145 1954 call SetNumber16BitCastle1956 ld de,ItemIntelligencePointsTable1957 call SetAdditionalStatFromInventoryItemsInHL1958 ld e,(ix+HeroStatKnowledge) 1959 ld d,01960 add hl,de1961 ld b,234+001 1962 ld c,145 1963 call SetNumber16BitCastle1965 ld de,ItemSpellDamagePointsTable1966 call SetAdditionalStatFromInventoryItemsInHL1967 ld e,(ix+HeroStatSpelldamage) 1968 ld d,01969 add hl,de1970 ld b,243+001 1971 ld c,145 1972 call SetNumber16BitCastle1973 ret1975SetAdditionalStatFromInventoryItemsInHL:1976 ld ix,(plxcurrentheroAddress)1977 .IxAlreadySet:1979 ld b,05 1980 ld c,0 1981 ld hl,0 1983 call .loop 1984 call .loop 1985 call .loop 1986 call .loop 1987 call .loop 1988 call .loop 1989 call .loop 1990 call .loop 1991 call .loop 1992 ld ix,(plxcurrentheroAddress)1993 ret1995 .loop:1996 call .Check1997 inc de 1998 inc c 1999 djnz .loop2001 inc ix2002 ld b,05 2003 ret2005 .Check:2006 ld a,(ix+HeroInventory+0) 2007 cp c 2008 ret nz2009 ld a,(de) 2010 push bc2011 ld b,02013 or a2014 jp p,.positive2015 dec b2016 .positive:2018 ld c,a2019 add hl,bc2020 pop bc2021 ret 2023ItemSpellDamagePointsTable:20242025 db 02026 db 02027 db 02028 db ButterflySpellDamage 2029 db 020302031 db 02032 db 02033 db 02034 db 02035 db 020362037 db 02038 db 02039 db 02040 db 02041 db 020422043 db YattaShiNeSpellDamage 2044 db FireHoodSpellDamage 2045 db 02046 db 02047 db 020482049 db 02050 db 02051 db 02052 db 02053 db 020542055 db 02056 db 02057 db 02058 db 02059 db 020602061 db SmallRingSpellDamage 2062 db 02063 db ScarletRingSpellPower 2064 db 02065 db 020662067 db 02068 db 02069 db NegligeeOfTeethSpellPower 2070 db 02071 db TheChokerSpellPower 2073 db 02074 db 02075 db EnchantedRobeSpellPower 2076 db 02077 db LabCoatSpellPower 2078 2079ItemIntelligencePointsTable:20802081 db 02082 db 02083 db 02084 db ButterflyIntelligence 2085 db 020862087 db 02088 db 02089 db 02090 db 02091 db 020922093 db 02094 db 02095 db 02096 db 02097 db 020982099 db 02100 db 02101 db CerebroIntelligence 2102 db 02103 db 021042105 db 02106 db 02107 db 02108 db 02109 db 021102111 db 02112 db 02113 db 02114 db 02115 db EmeraldGlovesIntelligence 2117 db 02118 db CyclopsIntelligence 2119 db ScarletRingSpellPower 2120 db 02121 db 021222123 db 02124 db 02125 db NegligeeOfTeethIntelligence 2126 db 02127 db 021282129 db 02130 db PriestsCopeIntelligence 2131 db 02132 db 02133 db 02134 2135ItemDefencePointsTable:21362137 db 02138 db 02139 db HellSlayerDefence 2140 db ButterflyDefence 2141 db 021422143 db RegaliaDiPlebDefence 2144 db YoungBloodsArmorDefence 2145 db TheJuggernautDefence 2146 db YojumboTheRoninDefence 2147 db CeasarsChestplateDefence 2149 db GreenLeafShieldDefence 2150 db WoodenShieldDefence 2151 db TheBramStokerDefence 2152 db ImpenetrableShieldDefence 2153 db TrainingShieldDefence 2155 db YattaShiNeDefence 2156 db 02157 db 02158 db TheViridescentDefence 2159 db PikemensHelmetDefence 2161 db 02162 db 02163 db 02164 db 02165 db 021662167 db 02168 db 02169 db 02170 db 02171 db 021722173 db 02174 db 02175 db ScarletRingDefence 2176 db 02177 db 021782179 db 02180 db 02181 db 02182 db 02183 db 021842185 db 02186 db 02187 db 02188 db 02189 db 02190 2191ItemAttackPointsTable:21922193 db DaggerTimeAttack 2194 db SwordOfBahrainAttack2195 db HellSlayerAttack2196 db ButterflyAttack2197 db SwiftbladeAttack2199 db 02200 db 02201 db 02202 db 02203 db 022042205 db 02206 db 02207 db 02208 db 02209 db 022102211 db 02212 db 02213 db 02214 db 02215 db 022162217 db 02218 db 02219 db 02220 db 02221 db 022222223 db 02224 db 02225 db ElkSkinGlovesAttack 2226 db 02227 db 022282229 db 02230 db 02231 db ScarletRingAttack 2232 db 02233 db 022342235 db 02236 db 02237 db 02238 db 02239 db 022402241 db 02242 db 02243 db 02244 db 02245 db 02247ItemUnitSpeedPointsTable:22482249 db 02250 db 02251 db 02252 db 02253 db SwiftbladeUnitSpeed2255 db RegaliaDiPlebUnitSpeed2256 db 02257 db TheJuggernautUnitSpeed2258 db 02259 db 022602261 db 02262 db 02263 db 02264 db 02265 db 022662267 db 02268 db 02269 db 02270 db 02271 db PikemensHelmetUnitSpeed2273 db ShadowTramperUnitSpeed2274 db 02275 db 02276 db 02277 db SturdyBootsUnitSpeed2279 db 02280 db IronHandUnitSpeed2281 db 02282 db 02283 db 022842285 db 02286 db 02287 db 02288 db 02289 db 022902291 db 02292 db 02293 db 02294 db 02295 db 022962297 db 02298 db 02299 db 02300 db 02301 db 02303ItemUnitHpPointsTable:23042305 db 02306 db 02307 db 02308 db 02309 db 023102311 db 02312 db 02313 db 02314 db 02315 db CaesarsChestplateUnitHp2317 db 02318 db 02319 db 02320 db 02321 db 023222323 db 02324 db 02325 db 02326 db TheViridescentUnitHp2327 db 023282329 db 02330 db 02331 db 02332 db 02333 db 023342335 db 02336 db 02337 db ElkSkinGlovesUnitHp2338 db 02339 db 023402341 db 02342 db 02343 db 02344 db 02345 db 023462347 db 02348 db 02349 db 02350 db 02351 db 023522353 db 02354 db 02355 db 02356 db RuralVestUnitHp2357 db LabcoatUnitHp2360SetHeroPortrait10x18:2361 ld ix,(plxcurrentheroAddress)2362 ld c,(ix+HeroSpecificInfo+0) 2363 ld b,(ix+HeroSpecificInfo+1)2364 push bc2365 pop ix2366 ld a,Hero10x18PortraitsBlock 2367 ld l,(ix+HeroInfoPortrait10x18SYSX+0) 2368 ld h,(ix+HeroInfoPortrait10x18SYSX+1) 2369 ld de,DYDXHeroWindow10x18InHud 2370 ld bc,NXAndNY10x18HeroPortraits 2371 call CopyRamToVramCorrectedCastleOverview 2372 ret2374HeroPortrait10x18SYSXAdol: equ $4000+(000*128)+(000/2)-128 2375HeroPortrait10x18SYSXGoemon1: equ $4000+(000*128)+(010/2)-128 2376HeroPortrait10x18SYSXPixy: equ $4000+(000*128)+(020/2)-128 2377HeroPortrait10x18SYSXDrasle1: equ $4000+(000*128)+(030/2)-128 2378HeroPortrait10x18SYSXLatok: equ $4000+(000*128)+(040/2)-128 2379HeroPortrait10x18SYSXDrasle2: equ $4000+(000*128)+(050/2)-128 2380HeroPortrait10x18SYSXSnake1: equ $4000+(000*128)+(060/2)-128 2381HeroPortrait10x18SYSXDrasle3: equ $4000+(000*128)+(070/2)-128 2383HeroPortrait10x18SYSXSnake2: equ $4000+(000*128)+(080/2)-128 2384HeroPortrait10x18SYSXDrasle4: equ $4000+(000*128)+(090/2)-128 2385HeroPortrait10x18SYSXAshguine: equ $4000+(000*128)+(100/2)-128 2386HeroPortrait10x18SYSXUndeadline1: equ $4000+(000*128)+(110/2)-128 2387HeroPortrait10x18SYSXPsychoWorld: equ $4000+(000*128)+(120/2)-128 2388HeroPortrait10x18SYSXUndeadline2: equ $4000+(000*128)+(130/2)-128 2389HeroPortrait10x18SYSXGoemon2: equ $4000+(000*128)+(140/2)-128 2390HeroPortrait10x18SYSXUndeadline3: equ $4000+(000*128)+(150/2)-128 2392HeroPortrait10x18SYSXFray: equ $4000+(000*128)+(160/2)-128 2393HeroPortrait10x18SYSXBlackColor: equ $4000+(000*128)+(170/2)-128 2394HeroPortrait10x18SYSXWit: equ $4000+(000*128)+(180/2)-128 2395HeroPortrait10x18SYSXMitchell: equ $4000+(000*128)+(190/2)-128 2396HeroPortrait10x18SYSXJanJackGibson:equ $4000+(000*128)+(200/2)-128 2397HeroPortrait10x18SYSXGillianSeed: equ $4000+(000*128)+(210/2)-128 2398HeroPortrait10x18SYSXSnatcher: equ $4000+(000*128)+(220/2)-128 2399HeroPortrait10x18SYSXGolvellius: equ $4000+(000*128)+(230/2)-128 2401HeroPortrait10x18SYSXBillRizer: equ $4000+(000*128)+(240/2)-128 2402HeroPortrait10x18SYSXPochi: equ $4000+(018*128)+(000/2)-128 2403HeroPortrait10x18SYSXGreyFox: equ $4000+(018*128)+(010/2)-128 2404HeroPortrait10x18SYSXTrevorBelmont:equ $4000+(018*128)+(020/2)-128 2405HeroPortrait10x18SYSXBigBoss: equ $4000+(018*128)+(030/2)-128 2406HeroPortrait10x18SYSXSimonBelmont: equ $4000+(018*128)+(040/2)-128 2407HeroPortrait10x18SYSXDrPettrovich: equ $4000+(018*128)+(050/2)-128 2408HeroPortrait10x18SYSXRichterBelmont:equ $4000+(018*128)+(060/2)-128 2410HeroPortrait10x18SYSXUltrabox: equ $4000+(018*128)+(070/2)-128 2411HeroPortrait10x18SYSXLoganSerios: equ $4000+(018*128)+(080/2)-128 2412HeroPortrait10x18SYSXHollyWhite: equ $4000+(018*128)+(090/2)-128 2413HeroPortrait10x18SYSXMercies: equ $4000+(018*128)+(100/2)-128 2414HeroPortrait10x18SYSXNatashaRomanenko: equ $4000+(018*128)+(110/2)-128 2415HeroPortrait10x18SYSXRuth: equ $4000+(018*128)+(120/2)-128 2416HeroPortrait10x18SYSXGeera: equ $4000+(018*128)+(130/2)-128 2417HeroPortrait10x18SYSXYoungNoble: equ $4000+(018*128)+(140/2)-128 2419HeroPortrait10x18SYSXDawel: equ $4000+(018*128)+(150/2)-128 2420HeroPortrait10x18SYSXPocky: equ $4000+(018*128)+(160/2)-128 2421HeroPortrait10x18SYSXKelesisTheCook: equ $4000+(018*128)+(170/2)-128 2422HeroPortrait10x18SYSXLolo: equ $4000+(018*128)+(180/2)-128 2423HeroPortrait10x18SYSXPippols: equ $4000+(018*128)+(190/2)-128 2424HeroPortrait10x18SYSXRandar: equ $4000+(018*128)+(200/2)-128 2425HeroPortrait10x18SYSXCles: equ $4000+(018*128)+(210/2)-128 2426HeroPortrait10x18SYSXLuice: equ $4000+(018*128)+(220/2)-128 2428HeroPortrait10x18SYSXDick: equ $4000+(018*128)+(230/2)-128 2429HeroPortrait10x18SYSXAphrodite: equ $4000+(018*128)+(240/2)-128 2430HeroPortrait10x18SYSXTienRen: equ $4000+(036*128)+(000/2)-128 2431HeroPortrait10x18SYSXPopolon: equ $4000+(036*128)+(010/2)-128 2432HeroPortrait10x18SYSXHoMei: equ $4000+(036*128)+(020/2)-128 2433HeroPortrait10x18SYSXPriestessKi: equ $4000+(036*128)+(030/2)-128 2434HeroPortrait10x18SYSXMeiHong: equ $4000+(036*128)+(040/2)-128 2435HeroPortrait10x18SYSXPrinceGilgamesh: equ $4000+(036*128)+(050/2)-128 2436HeroPortrait10x18SYSXRandomHajile: equ $4000+(036*128)+(060/2)-128 2437HeroPortrait10x18SYSXBensonCunningham: equ $4000+(036*128)+(070/2)-128 2438HeroPortrait10x18SYSXJamieSeed: equ $4000+(036*128)+(080/2)-128 2439HeroPortrait10x18SYSXArmoredSnatcher: equ $4000+(036*128)+(090/2)-128 2440HeroPortrait10x18SYSXDruid: equ $4000+(036*128)+(100/2)-128 2442HeroPortrait10x18SYSXMomotaru: equ $4000+(036*128)+(110/2)-128 2443HeroPortrait10x18SYSXLuka: equ $4000+(036*128)+(120/2)-128 2444HeroPortrait10x18SYSXHeiwaAndButako: equ $4000+(036*128)+(130/2)-128 2445HeroPortrait10x18SYSXAce: equ $4000+(036*128)+(140/2)-128 2446HeroPortrait10x18SYSXSpaceExplorer01: equ $4000+(036*128)+(150/2)-128 2447HeroPortrait10x18SYSXFern: equ $4000+(036*128)+(160/2)-128 2448HeroPortrait10x18SYSXHorn: equ $4000+(036*128)+(170/2)-128 2449HeroPortrait10x18SYSXPixie: equ $4000+(036*128)+(180/2)-128 2450HeroPortrait10x18SYSXFreyaJerbain: equ $4000+(036*128)+(190/2)-128 2451HeroPortrait10x18SYSXLanceBean: equ $4000+(036*128)+(200/2)-128 2452HeroPortrait10x18SYSXThiharis: equ $4000+(036*128)+(210/2)-128 2453HeroPortrait10x18SYSXPampas: equ $4000+(036*128)+(220/2)-128 2454HeroPortrait10x18SYSXSelene: equ $4000+(036*128)+(230/2)-128 2455HeroPortrait10x18SYSXSkooter: equ $4000+(036*128)+(240/2)-128 2456HeroPortrait10x18SYSXJeddaChef: equ $4000+(054*128)+(000/2)-128 2464SetArmyUnits:2465 ld a,(ix+HeroUnits+00) 2466 call SetDefendingHeroArmyAndAmount.SetSYSX 2467 ld de,DYDXUnit1WindowInHud 2468 call CopyTransparantImage 2470 ld a,(ix+HeroUnits+03) 2471 call SetDefendingHeroArmyAndAmount.SetSYSX 2472 ld de,DYDXUnit2WindowInHud 2473 call CopyTransparantImage 2475 ld a,(ix+HeroUnits+06) 2476 call SetDefendingHeroArmyAndAmount.SetSYSX 2477 ld de,DYDXUnit3WindowInHud 2478 call CopyTransparantImage 2480 ld a,(ix+HeroUnits+09) 2481 call SetDefendingHeroArmyAndAmount.SetSYSX 2482 ld de,DYDXUnit4WindowInHud 2483 call CopyTransparantImage 2485 ld a,(ix+HeroUnits+12) 2486 call SetDefendingHeroArmyAndAmount.SetSYSX 2487 ld de,DYDXUnit5WindowInHud 2488 call CopyTransparantImage 2490 ld a,(ix+HeroUnits+15) 2491 call SetDefendingHeroArmyAndAmount.SetSYSX 2492 ld de,DYDXUnit6WindowInHud 2493 call CopyTransparantImage 2494 ret2496NXAndNY14x14CharaterPortraits: equ 014*256 + (014/2) 2497DYDXUnit1WindowInHud: equ 153*256 + 204 2498DYDXUnit2WindowInHud: equ 153*256 + 220 2499DYDXUnit3WindowInHud: equ 153*256 + 236 2500DYDXUnit4WindowInHud: equ 176*256 + 204 2501DYDXUnit5WindowInHud: equ 176*256 + 220 2502DYDXUnit6WindowInHud: equ 176*256 + 236 2504SetArmyUnitsAmount:2505 ld l,(ix+HeroUnits+01)2506 ld h,(ix+HeroUnits+02)2507 ld b,204 + 12508 ld c,1692509 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02511 ld l,(ix+HeroUnits+04)2512 ld h,(ix+HeroUnits+05)2513 ld b,220 + 12514 ld c,1692515 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02517 ld l,(ix+HeroUnits+07)2518 ld h,(ix+HeroUnits+08)2519 ld b,236 + 12520 ld c,1692521 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02523 ld l,(ix+HeroUnits+10)2524 ld h,(ix+HeroUnits+11)2525 ld b,204 + 12526 ld c,1922527 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02529 ld l,(ix+HeroUnits+13)2530 ld h,(ix+HeroUnits+14)2531 ld b,220 + 12532 ld c,1922533 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02535 ld l,(ix+HeroUnits+16)2536 ld h,(ix+HeroUnits+17)2537 ld b,236 + 12538 ld c,1922539 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs02540 ret2542SetManaAndMovementBars:2543 ld a,(ChangeManaAndMovement?)2544 dec a2545 ret z2546 ld (ChangeManaAndMovement?),a2548 call EraseManaandMovementBars2549 call .PutManaandMovementBars25502553 ret2555.PutManaandMovementBars:2556 call SetHero1ForCurrentPlayerInIX2557 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2559 ld de,$0000 + (067*128) + (226/2) - 1282560 ld hl,$0000 + (067*128) + (204/2) - 1282561 call .PutManaAndMovement 2563 ld de,$0000 + (078*128) + (226/2) - 1282564 ld hl,$0000 + (078*128) + (204/2) - 1282565 call .PutManaAndMovement 2567 ld de,$0000 + (089*128) + (226/2) - 1282568 ld hl,$0000 + (089*128) + (204/2) - 1282569 call .PutManaAndMovement 2570 ret2572 .PutManaAndMovement:2573 ld a,(ix+HeroStatus) 2574 cp 255 2575 ret z2576 cp 254 2577 jp nz,.EndCheckInCastle2578 2579 ld bc,lenghtherotable2580 add ix,bc 2581 jp .PutManaAndMovement2582 .EndCheckInCastle:2583 push hl2584 call PutManaBar 2585 pop de2586 call PutMovementBar 2587 ld bc,lenghtherotable2588 add ix,bc 2589 ret2591 PutManaBar:2592 exx2594 2595 ld l,(ix+HeroMana+0) 2596 ld h,(ix+HeroMana+1) 2597 ld de,102598 call MultiplyHlWithDE 2600 push hl2601 pop bc2602 ld e,(ix+HeroTotalMana+0) 2603 ld d,(ix+HeroTotalMana+1) 2604 call DivideBCbyDE 2606 ld a,c2607 or a2608 ld bc,$4000 + ((107+25+76)*128) + (042/2) - 1282609 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02610 dec a2611 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282612 jr z,.EndSearchPercentageMovement2613 dec a2614 ld bc,$4000 + ((107+25+76)*128) + (038/2) - 1282615 jr z,.EndSearchPercentageMovement2616 dec a2617 ld bc,$4000 + ((107+25+76)*128) + (036/2) - 1282618 jr z,.EndSearchPercentageMovement2619 dec a2620 ld bc,$4000 + ((107+25+76)*128) + (034/2) - 1282621 jr z,.EndSearchPercentageMovement2622 dec a2623 ld bc,$4000 + ((107+25+76)*128) + (032/2) - 1282624 jr z,.EndSearchPercentageMovement2625 dec a2626 ld bc,$4000 + ((107+25+76)*128) + (030/2) - 1282627 jr z,.EndSearchPercentageMovement2628 dec a2629 ld bc,$4000 + ((107+25+76)*128) + (028/2) - 1282630 jr z,.EndSearchPercentageMovement2631 dec a2632 ld bc,$4000 + ((107+25+76)*128) + (026/2) - 1282633 jr z,.EndSearchPercentageMovement2634 dec a2635 ld bc,$4000 + ((107+25+76)*128) + (024/2) - 1282636 jr z,.EndSearchPercentageMovement2637 ld bc,$4000 + ((107+25+76)*128) + (022/2) - 1282638 jr .EndSearchPercentageMovement2640 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2641 ld a,(ix+HeroMana+0) 2642 ld h,(ix+HeroMana+1) 2643 or h2644 jr z,.EndSearchPercentageMovement2645 ld bc,$4000 + ((107+25+76)*128) + (040/2) - 1282647 .EndSearchPercentageMovement:2648 push bc2649 exx2650 pop hl2651 ld bc,$0000 + (010*256) + (002/2)2652 ld a,Hero20x11PortraitsBlock 2653 call CopyRamToVramCorrectedCastleOverview 2654 ret2656 PutMovementBar:2657 exx2658 2659 ld h,02660 ld l,(ix+HeroMove) 2661 ld de,102662 call MultiplyHlWithDE 2664 push hl2665 pop bc2666 ld d,02667 ld e,(ix+HeroTotalMove) 2668 call DivideBCbyDE 2670 ld a,c2671 or a2672 ld bc,$4000 + ((107+25+76)*128) + (020/2) - 1282673 jr z,.EndSearchPercentageMovementSmallExceptionWhenAlmost02674 dec a2675 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282676 jr z,.EndSearchPercentageMovement2677 dec a2678 ld bc,$4000 + ((107+25+76)*128) + (016/2) - 1282679 jr z,.EndSearchPercentageMovement2680 dec a2681 ld bc,$4000 + ((107+25+76)*128) + (014/2) - 1282682 jr z,.EndSearchPercentageMovement2683 dec a2684 ld bc,$4000 + ((107+25+76)*128) + (012/2) - 1282685 jr z,.EndSearchPercentageMovement2686 dec a2687 ld bc,$4000 + ((107+25+76)*128) + (010/2) - 1282688 jr z,.EndSearchPercentageMovement2689 dec a2690 ld bc,$4000 + ((107+25+76)*128) + (008/2) - 1282691 jr z,.EndSearchPercentageMovement2692 dec a2693 ld bc,$4000 + ((107+25+76)*128) + (006/2) - 1282694 jr z,.EndSearchPercentageMovement2695 dec a2696 ld bc,$4000 + ((107+25+76)*128) + (004/2) - 1282697 jr z,.EndSearchPercentageMovement2698 dec a2699 ld bc,$4000 + ((107+25+76)*128) + (002/2) - 1282700 jr z,.EndSearchPercentageMovement2701 ld bc,$4000 + ((107+25+76)*128) + (000/2) - 1282702 jr .EndSearchPercentageMovement2704 .EndSearchPercentageMovementSmallExceptionWhenAlmost0:2705 ld a,(ix+HeroMove) 2706 and a2707 jr z,.EndSearchPercentageMovement2708 ld bc,$4000 + ((107+25+76)*128) + (018/2) - 1282710 .EndSearchPercentageMovement:2711 push bc2712 exx2713 pop hl2714 ld bc,$0000 + (010*256) + (002/2)2715 ld a,Hero20x11PortraitsBlock 2716 call CopyRamToVramCorrectedCastleOverview 2717 ret2719EraseManaandMovementBars:2720 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282721 ld de,$0000 + (067*128) + (204/2) - 1282722 ld bc,$0000 + (010*256) + (002/2)2723 ld a,Hero20x11PortraitsBlock 2724 call CopyRamToVramCorrectedCastleOverview 2726 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282727 ld de,$0000 + (078*128) + (204/2) - 1282728 ld bc,$0000 + (010*256) + (002/2)2729 ld a,Hero20x11PortraitsBlock 2730 call CopyRamToVramCorrectedCastleOverview 2732 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282733 ld de,$0000 + (089*128) + (204/2) - 1282734 ld bc,$0000 + (010*256) + (002/2)2735 ld a,Hero20x11PortraitsBlock 2736 call CopyRamToVramCorrectedCastleOverview 2738 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282739 ld de,$0000 + (067*128) + (226/2) - 1282740 ld bc,$0000 + (010*256) + (002/2)2741 ld a,Hero20x11PortraitsBlock 2742 call CopyRamToVramCorrectedCastleOverview 2744 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282745 ld de,$0000 + (078*128) + (226/2) - 1282746 ld bc,$0000 + (010*256) + (002/2)2747 ld a,Hero20x11PortraitsBlock 2748 call CopyRamToVramCorrectedCastleOverview 2750 ld hl,$4000 + ((107+25+76)*128) + (020/2) - 1282751 ld de,$0000 + (089*128) + (226/2) - 1282752 ld bc,$0000 + (010*256) + (002/2)2753 ld a,Hero20x11PortraitsBlock 2754 call CopyRamToVramCorrectedCastleOverview 2755 ret27582760SetCastlesInWindows: 2761 ld a,(SetCastlesInWindows?)2762 dec a2763 ret z2764 ld (SetCastlesInWindows?),a2766 call ClearCastleButtons 2768 call SetCastleUsingCastleWindowPointerInIX2769 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2770 call .setCastlewindow2772 call SetCastleUsingCastleWindowPointerInIX2773 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2774 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2775 call .setCastlewindow2777 call SetCastleUsingCastleWindowPointerInIX2778 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2779 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2780 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2781 jp .setCastlewindow2783 .setCastlewindow:2784 2786 ld hl,CastleButtonGrassLand2787 2796 2797 ld bc,72798 ldir2799 ret2801CastleButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (156/2) - 128 | dw $4000 + ((139+25+76)*128) + (176/2) - 128 | dw $4000 + ((139+25+76)*128) + (196/2) - 1282802CastleButtonGrassLand: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (000/2) - 128 | dw $4000 + ((117+25+76)*128) + (020/2) - 128 | dw $4000 + ((117+25+76)*128) + (040/2) - 1282803CastleButtonSwamp: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (060/2) - 128 | dw $4000 + ((117+25+76)*128) + (080/2) - 128 | dw $4000 + ((117+25+76)*128) + (100/2) - 1282804CastleButtonHell: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (120/2) - 128 | dw $4000 + ((117+25+76)*128) + (140/2) - 128 | dw $4000 + ((117+25+76)*128) + (160/2) - 1282805CastleButtonSnow: db %1100 0011 | dw $4000 + ((117+25+76)*128) + (180/2) - 128 | dw $4000 + ((117+25+76)*128) + (200/2) - 128 | dw $4000 + ((117+25+76)*128) + (220/2) - 1282807ClearCastleButtons:2808 ld hl,CastleButton20x11SYSXEmpty2809 ld de,GenericButtonTable3+(6*GenericButtonTableLenghtPerButton)2810 ld bc,72811 ldir2813 ld hl,CastleButton20x11SYSXEmpty2814 ld de,GenericButtonTable3+(7*GenericButtonTableLenghtPerButton)2815 ld bc,72816 ldir2818 ld hl,CastleButton20x11SYSXEmpty2819 ld de,GenericButtonTable3+(8*GenericButtonTableLenghtPerButton)2820 ld bc,72821 ldir2822 ret2825ThirdCastleWindowClicked:2826 call SetCastleUsingCastleWindowPointerInIX2827 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2828 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle 2829 jp GoCenterAndCheckEnter2830 2831SecondCastleWindowClicked:2832 call SetCastleUsingCastleWindowPointerInIX2833 call SetCastleUsingCastleWindowPointerInIX.SearchNextCastle2834 jp GoCenterAndCheckEnter2836FirstCastleWindowClicked:2837 call SetCastleUsingCastleWindowPointerInIX28382840 GoCenterAndCheckEnter: 2841 ld a,(mappointery)2842 ld b,a2843 ld a,(mappointerx)2844 ld c,a2845 push bc 2846 2847 call centrescreenforthisCastle2849 pop bc2850 2851 ld a,(mappointery)2852 ld h,a2853 ld a,(mappointerx)2854 ld l,a2855 xor a2856 sbc hl,bc2857 ret nz2859 ld (WhichCastleIsPointerPointingAt?),ix2860 ld a,12861 ld (EnterCastle?),a2862 ret28642866SetHeroesInWindows:2867 ld a,(SetHeroesInWindows?)2868 dec a2869 ret z2870 ld (SetHeroesInWindows?),a2872 call ClearHeroButtons 2873 call SetHero1ForCurrentPlayerInIX2874 call SetHeroForWindow1DeterminedByHeroWindowPointerInIX2876 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2877 call .setherowindow2878 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2879 call .setherowindow2880 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2882 .setherowindow:2883 ld a,(ix+HeroStatus) 2884 cp 2552885 ret z2886 cp 254 2887 jp nz,.EndCheckInCastle2888 2889 ld bc,lenghtherotable2890 add ix,bc 2891 jp .setherowindow2892 .EndCheckInCastle:2894 ld c,(ix+HeroSpecificInfo+0) 2895 ld b,(ix+HeroSpecificInfo+1)2896 push bc2897 pop iy2898 ld l,(iy+HeroButton20x11SYSX+0) 2899 ld h,(iy+HeroButton20x11SYSX+1) 2901 ld bc,72902 ldir2904 ld de,lenghtherotable2905 add ix,de 2906 ret2908ClearHeroButtons:2909 ld hl,HeroButton20x11SYSXEmpty2910 ld de,GenericButtonTable3+(1*GenericButtonTableLenghtPerButton)2911 ld bc,72912 ldir2914 ld hl,HeroButton20x11SYSXEmpty2915 ld de,GenericButtonTable3+(2*GenericButtonTableLenghtPerButton)2916 ld bc,72917 ldir2919 ld hl,HeroButton20x11SYSXEmpty2920 ld de,GenericButtonTable3+(3*GenericButtonTableLenghtPerButton)2921 ld bc,72922 ldir2923 ret2925HeroButton20x11SYSXEmpty: db %1100 0011 | dw $4000 + ((139+25+76)*128) + (096/2) - 128 | dw $4000 + ((139+25+76)*128) + (116/2) - 128 | dw $4000 + ((139+25+76)*128) + (136/2) - 1282927HeroButton20x11SYSXAdol: db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (020/2) - 128 | dw $4000 + (000*128) + (040/2) - 1282928HeroButton20x11SYSXGoemon1: db %1100 0011 | dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (000*128) + (080/2) - 128 | dw $4000 + (000*128) + (100/2) - 1282929HeroButton20x11SYSXPixy: db %1100 0011 | dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (000*128) + (160/2) - 1282930HeroButton20x11SYSXDrasle1: db %1100 0011 | dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (000*128) + (220/2) - 1282932HeroButton20x11SYSXLatok: db %1100 0011 | dw $4000 + (011*128) + (000/2) - 128 | dw $4000 + (011*128) + (020/2) - 128 | dw $4000 + (011*128) + (040/2) - 1282933HeroButton20x11SYSXDrasle2: db %1100 0011 | dw $4000 + (011*128) + (060/2) - 128 | dw $4000 + (011*128) + (080/2) - 128 | dw $4000 + (011*128) + (100/2) - 1282934HeroButton20x11SYSXSnake1: db %1100 0011 | dw $4000 + (011*128) + (120/2) - 128 | dw $4000 + (011*128) + (140/2) - 128 | dw $4000 + (011*128) + (160/2) - 1282935HeroButton20x11SYSXDrasle3: db %1100 0011 | dw $4000 + (011*128) + (180/2) - 128 | dw $4000 + (011*128) + (200/2) - 128 | dw $4000 + (011*128) + (220/2) - 1282937HeroButton20x11SYSXSnake2: db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (020/2) - 128 | dw $4000 + (022*128) + (040/2) - 1282938HeroButton20x11SYSXDrasle4: db %1100 0011 | dw $4000 + (022*128) + (060/2) - 128 | dw $4000 + (022*128) + (080/2) - 128 | dw $4000 + (022*128) + (100/2) - 1282939HeroButton20x11SYSXAshguine: db %1100 0011 | dw $4000 + (022*128) + (120/2) - 128 | dw $4000 + (022*128) + (140/2) - 128 | dw $4000 + (022*128) + (160/2) - 1282940HeroButton20x11SYSXUndeadline1: db %1100 0011 | dw $4000 + (022*128) + (180/2) - 128 | dw $4000 + (022*128) + (200/2) - 128 | dw $4000 + (022*128) + (220/2) - 1282942HeroButton20x11SYSXPsychoWorld: db %1100 0011 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (033*128) + (020/2) - 128 | dw $4000 + (033*128) + (040/2) - 1282943HeroButton20x11SYSXUndeadline2: db %1100 0011 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (033*128) + (080/2) - 128 | dw $4000 + (033*128) + (100/2) - 1282944HeroButton20x11SYSXGoemon2: db %1100 0011 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (033*128) + (140/2) - 128 | dw $4000 + (033*128) + (160/2) - 1282945HeroButton20x11SYSXUndeadline3: db %1100 0011 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (033*128) + (200/2) - 128 | dw $4000 + (033*128) + (220/2) - 1282947HeroButton20x11SYSXFray: db %1100 0011 | dw $4000 + (044*128) + (000/2) - 128 | dw $4000 + (044*128) + (020/2) - 128 | dw $4000 + (044*128) + (040/2) - 1282948HeroButton20x11SYSXBlackColor: db %1100 0011 | dw $4000 + (044*128) + (060/2) - 128 | dw $4000 + (044*128) + (080/2) - 128 | dw $4000 + (044*128) + (100/2) - 1282949HeroButton20x11SYSXWit: db %1100 0011 | dw $4000 + (044*128) + (120/2) - 128 | dw $4000 + (044*128) + (140/2) - 128 | dw $4000 + (044*128) + (160/2) - 1282950HeroButton20x11SYSXMitchell: db %1100 0011 | dw $4000 + (044*128) + (180/2) - 128 | dw $4000 + (044*128) + (200/2) - 128 | dw $4000 + (044*128) + (220/2) - 1282952HeroButton20x11SYSXJanJackGibson: db %1100 0011 | dw $4000 + (055*128) + (000/2) - 128 | dw $4000 + (055*128) + (020/2) - 128 | dw $4000 + (055*128) + (040/2) - 1282953HeroButton20x11SYSXGillianSeed: db %1100 0011 | dw $4000 + (055*128) + (060/2) - 128 | dw $4000 + (055*128) + (080/2) - 128 | dw $4000 + (055*128) + (100/2) - 1282954HeroButton20x11SYSXSnatcher: db %1100 0011 | dw $4000 + (055*128) + (120/2) - 128 | dw $4000 + (055*128) + (140/2) - 128 | dw $4000 + (055*128) + (160/2) - 1282955HeroButton20x11SYSXGolvellius: db %1100 0011 | dw $4000 + (055*128) + (180/2) - 128 | dw $4000 + (055*128) + (200/2) - 128 | dw $4000 + (055*128) + (220/2) - 1282957HeroButton20x11SYSXBillRizer: db %1100 0011 | dw $4000 + (066*128) + (000/2) - 128 | dw $4000 + (066*128) + (020/2) - 128 | dw $4000 + (066*128) + (040/2) - 1282958HeroButton20x11SYSXPochi: db %1100 0011 | dw $4000 + (066*128) + (060/2) - 128 | dw $4000 + (066*128) + (080/2) - 128 | dw $4000 + (066*128) + (100/2) - 1282959HeroButton20x11SYSXGreyFox: db %1100 0011 | dw $4000 + (066*128) + (120/2) - 128 | dw $4000 + (066*128) + (140/2) - 128 | dw $4000 + (066*128) + (160/2) - 1282960HeroButton20x11SYSXTrevorBelmont: db %1100 0011 | dw $4000 + (066*128) + (180/2) - 128 | dw $4000 + (066*128) + (200/2) - 128 | dw $4000 + (066*128) + (220/2) - 1282962HeroButton20x11SYSXBigBoss: db %1100 0011 | dw $4000 + (077*128) + (000/2) - 128 | dw $4000 + (077*128) + (020/2) - 128 | dw $4000 + (077*128) + (040/2) - 1282963HeroButton20x11SYSXSimonBelmont: db %1100 0011 | dw $4000 + (077*128) + (060/2) - 128 | dw $4000 + (077*128) + (080/2) - 128 | dw $4000 + (077*128) + (100/2) - 1282964HeroButton20x11SYSXDrPettrovich: db %1100 0011 | dw $4000 + (077*128) + (120/2) - 128 | dw $4000 + (077*128) + (140/2) - 128 | dw $4000 + (077*128) + (160/2) - 1282965HeroButton20x11SYSXRichterBelmont: db %1100 0011 | dw $4000 + (077*128) + (180/2) - 128 | dw $4000 + (077*128) + (200/2) - 128 | dw $4000 + (077*128) + (220/2) - 1282967HeroButton20x11SYSXUltrabox: db %1100 0011 | dw $4000 + (088*128) + (000/2) - 128 | dw $4000 + (088*128) + (020/2) - 128 | dw $4000 + (088*128) + (040/2) - 1282968HeroButton20x11SYSXLoganSerios: db %1100 0011 | dw $4000 + (088*128) + (060/2) - 128 | dw $4000 + (088*128) + (080/2) - 128 | dw $4000 + (088*128) + (100/2) - 1282969HeroButton20x11SYSXHollyWhite: db %1100 0011 | dw $4000 + (088*128) + (120/2) - 128 | dw $4000 + (088*128) + (140/2) - 128 | dw $4000 + (088*128) + (160/2) - 1282970HeroButton20x11SYSXMercies: db %1100 0011 | dw $4000 + (088*128) + (180/2) - 128 | dw $4000 + (088*128) + (200/2) - 128 | dw $4000 + (088*128) + (220/2) - 1282972HeroButton20x11SYSXNatashaRomanenko:db %1100 0011 | dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (020/2) - 128 | dw $4000 + (099*128) + (040/2) - 1282973HeroButton20x11SYSXRuth: db %1100 0011 | dw $4000 + (099*128) + (060/2) - 128 | dw $4000 + (099*128) + (080/2) - 128 | dw $4000 + (099*128) + (100/2) - 1282974HeroButton20x11SYSXGeera: db %1100 0011 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (140/2) - 128 | dw $4000 + (099*128) + (160/2) - 1282975HeroButton20x11SYSXYoungNoble: db %1100 0011 | dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (200/2) - 128 | dw $4000 + (099*128) + (220/2) - 1282977HeroButton20x11SYSXDawel: db %1100 0011 | dw $4000 + (110*128) + (000/2) - 128 | dw $4000 + (110*128) + (020/2) - 128 | dw $4000 + (110*128) + (040/2) - 1282978HeroButton20x11SYSXPocky: db %1100 0011 | dw $4000 + (110*128) + (060/2) - 128 | dw $4000 + (110*128) + (080/2) - 128 | dw $4000 + (110*128) + (100/2) - 1282979HeroButton20x11SYSXKelesisTheCook: db %1100 0011 | dw $4000 + (110*128) + (120/2) - 128 | dw $4000 + (110*128) + (140/2) - 128 | dw $4000 + (110*128) + (160/2) - 1282980HeroButton20x11SYSXLolo: db %1100 0011 | dw $4000 + (110*128) + (180/2) - 128 | dw $4000 + (110*128) + (200/2) - 128 | dw $4000 + (110*128) + (220/2) - 1282982HeroButton20x11SYSXPippols: db %1100 0011 | dw $4000 + (121*128) + (000/2) - 128 | dw $4000 + (121*128) + (020/2) - 128 | dw $4000 + (121*128) + (040/2) - 1282983HeroButton20x11SYSXRandar: db %1100 0011 | dw $4000 + (121*128) + (060/2) - 128 | dw $4000 + (121*128) + (080/2) - 128 | dw $4000 + (121*128) + (100/2) - 1282984HeroButton20x11SYSXCles: db %1100 0011 | dw $4000 + (121*128) + (120/2) - 128 | dw $4000 + (121*128) + (140/2) - 128 | dw $4000 + (121*128) + (160/2) - 1282985HeroButton20x11SYSXLuice: db %1100 0011 | dw $4000 + (121*128) + (180/2) - 128 | dw $4000 + (121*128) + (200/2) - 128 | dw $4000 + (121*128) + (220/2) - 1282987HeroButton20x11SYSXDick: db %1100 0011 | dw $4000 + (132*128) + (000/2) - 128 | dw $4000 + (132*128) + (020/2) - 128 | dw $4000 + (132*128) + (040/2) - 1282988HeroButton20x11SYSXAphrodite: db %1100 0011 | dw $4000 + (132*128) + (060/2) - 128 | dw $4000 + (132*128) + (080/2) - 128 | dw $4000 + (132*128) + (100/2) - 1282989HeroButton20x11SYSXTienRen: db %1100 0011 | dw $4000 + (132*128) + (120/2) - 128 | dw $4000 + (132*128) + (140/2) - 128 | dw $4000 + (132*128) + (160/2) - 1282990HeroButton20x11SYSXPopolon: db %1100 0011 | dw $4000 + (132*128) + (180/2) - 128 | dw $4000 + (132*128) + (200/2) - 128 | dw $4000 + (132*128) + (220/2) - 1282992HeroButton20x11SYSXHoMei: db %1100 0011 | dw $4000 + (143*128) + (000/2) - 128 | dw $4000 + (143*128) + (020/2) - 128 | dw $4000 + (143*128) + (040/2) - 1282993HeroButton20x11SYSXPriestessKi: db %1100 0011 | dw $4000 + (143*128) + (060/2) - 128 | dw $4000 + (143*128) + (080/2) - 128 | dw $4000 + (143*128) + (100/2) - 1282994HeroButton20x11SYSXMeiHong: db %1100 0011 | dw $4000 + (143*128) + (120/2) - 128 | dw $4000 + (143*128) + (140/2) - 128 | dw $4000 + (143*128) + (160/2) - 1282995HeroButton20x11SYSXPrinceGilgamesh: db %1100 0011 | dw $4000 + (143*128) + (180/2) - 128 | dw $4000 + (143*128) + (200/2) - 128 | dw $4000 + (143*128) + (220/2) - 1282997HeroButton20x11SYSXRandomHajile: db %1100 0011 | dw $4000 + (154*128) + (000/2) - 128 | dw $4000 + (154*128) + (020/2) - 128 | dw $4000 + (154*128) + (040/2) - 1282998HeroButton20x11SYSXBensonCunningham: db %1100 0011 | dw $4000 + (154*128) + (060/2) - 128 | dw $4000 + (154*128) + (080/2) - 128 | dw $4000 + (154*128) + (100/2) - 1282999HeroButton20x11SYSXJamieSeed: db %1100 0011 | dw $4000 + (154*128) + (120/2) - 128 | dw $4000 + (154*128) + (140/2) - 128 | dw $4000 + (154*128) + (160/2) - 1283000HeroButton20x11SYSXArmoredSnatcher: db %1100 0011 | dw $4000 + (154*128) + (180/2) - 128 | dw $4000 + (154*128) + (200/2) - 128 | dw $4000 + (154*128) + (220/2) - 1283002HeroButton20x11SYSXDruid: db %1100 0011 | dw $4000 + (165*128) + (000/2) - 128 | dw $4000 + (165*128) + (020/2) - 128 | dw $4000 + (165*128) + (040/2) - 1283003HeroButton20x11SYSXMomotaru: db %1100 0011 | dw $4000 + (165*128) + (060/2) - 128 | dw $4000 + (165*128) + (080/2) - 128 | dw $4000 + (165*128) + (100/2) - 1283004HeroButton20x11SYSXLuka: db %1100 0011 | dw $4000 + (165*128) + (120/2) - 128 | dw $4000 + (165*128) + (140/2) - 128 | dw $4000 + (165*128) + (160/2) - 1283005HeroButton20x11SYSXHeiwaAndButako: db %1100 0011 | dw $4000 + (165*128) + (180/2) - 128 | dw $4000 + (165*128) + (200/2) - 128 | dw $4000 + (165*128) + (220/2) - 1283007HeroButton20x11SYSXAce: db %1100 0011 | dw $4000 + (176*128) + (000/2) - 128 | dw $4000 + (176*128) + (020/2) - 128 | dw $4000 + (176*128) + (040/2) - 1283008HeroButton20x11SYSXSpaceExplorer01: db %1100 0011 | dw $4000 + (176*128) + (060/2) - 128 | dw $4000 + (176*128) + (080/2) - 128 | dw $4000 + (176*128) + (100/2) - 1283009HeroButton20x11SYSXFern: db %1100 0011 | dw $4000 + (176*128) + (120/2) - 128 | dw $4000 + (176*128) + (140/2) - 128 | dw $4000 + (176*128) + (160/2) - 1283010HeroButton20x11SYSXHorn: db %1100 0011 | dw $4000 + (176*128) + (180/2) - 128 | dw $4000 + (176*128) + (200/2) - 128 | dw $4000 + (176*128) + (220/2) - 1283012HeroButton20x11SYSXPixie: db %1100 0011 | dw $4000 + (187*128) + (000/2) - 128 | dw $4000 + (187*128) + (020/2) - 128 | dw $4000 + (187*128) + (040/2) - 1283013HeroButton20x11SYSXFreyaJerbain: db %1100 0011 | dw $4000 + (187*128) + (060/2) - 128 | dw $4000 + (187*128) + (080/2) - 128 | dw $4000 + (187*128) + (100/2) - 1283014HeroButton20x11SYSXLanceBean: db %1100 0011 | dw $4000 + (187*128) + (120/2) - 128 | dw $4000 + (187*128) + (140/2) - 128 | dw $4000 + (187*128) + (160/2) - 1283015HeroButton20x11SYSXThiharis: db %1100 0011 | dw $4000 + (187*128) + (180/2) - 128 | dw $4000 + (187*128) + (200/2) - 128 | dw $4000 + (187*128) + (220/2) - 1283017HeroButton20x11SYSXPampas: db %1100 0011 | dw $4000 + (198*128) + (060/2) - 128 | dw $4000 + (198*128) + (080/2) - 128 | dw $4000 + (198*128) + (220/2) - 1283018HeroButton20x11SYSXSelene: db %1100 0011 | dw $4000 + (198*128) + (120/2) - 128 | dw $4000 + (198*128) + (140/2) - 128 | dw $4000 + (198*128) + (040/2) - 1283019HeroButton20x11SYSXSkooter: db %1100 0011 | dw $4000 + (198*128) + (180/2) - 128 | dw $4000 + (198*128) + (200/2) - 128 | dw $4000 + (198*128) + (100/2) - 1283020HeroButton20x11SYSXJeddaChef: db %1100 0011 | dw $4000 + (240*128) + (000/2) - 128 | dw $4000 + (240*128) + (020/2) - 128 | dw $4000 + (240*128) + (160/2) - 1283023HeroLevelUpCode:30243025 ld ix,(plxcurrentheroAddress)3026 ld a,(ix+HeroTotalMana)3027 ld (HeroTotalManaBeforeLevelingUp),a3029 ld a,r3030 ld (framecounter),a 3032 ld a,255 3033 ld (PreviousButtonClicked),a 3034 ld ix,GenericButtonTable3035 ld (PreviousButtonClickedIX),ix3037 call SetLevelUpButtons3038 call IncreasePrimairySkill3040 call SetLevelUpGraphics 3041 call SetLevelUpHeroIcon3042 call SetPrimairySkillUpIcon 3043 call SetLevelUpText3044 call SwapAndSetPage 3045 call SetLevelUpGraphics 3046 call SetLevelUpHeroIcon3047 call SetPrimairySkillUpIcon 3048 call SetLevelUpText3050 ld bc,SFX_HeroLevelUp3051 call RePlayerSFX_PlayCh1 3053 .engine: 3054 call SwapAndSetPage 3055 call PopulateControls 30573066 3067 ld ix,GenericButtonTable3068 call CheckButtonInteractionControlsNotOnInt3070 call .CheckButtonClicked 3074 3075 ld ix,(PreviousButtonClickedIX) 3076 ld a,(ix+GenericButtonStatus)3077 push af3078 ld a,(PreviousButtonClicked)3079 cp 2553080 jr z,.EndMarkButton 3081 ld (ix+GenericButtonStatus),%1010 00113082 .EndMarkButton:3083 3086 ld ix,GenericButtonTable3087 call SetGenericButtons 3090 3091 pop af3092 ld ix,(PreviousButtonClickedIX) 3093 ld (ix+GenericButtonStatus),a3094 30983100 halt3101 jp .engine3103 .CheckButtonClicked:3104 ret nc3105 ld a,%1100 00113106 ld (GenericButtonTable),a 3108 ld a,b3109 cp 3 3110 jr z,.VButton3111 ld (PreviousButtonClicked),a3112 ld (PreviousButtonClickedIX),ix3113 cp 2 3114 jr z,.LeftSkillButton3115 3116 .RightSkillButton: 3117 ld a,(SkillInLevelUpSlot2)3118 jp SetLevelUpHeroSkillsInTable3120 .LeftSkillButton:3121 ld a,(SkillInLevelUpSlot1)3122 jp SetLevelUpHeroSkillsInTable3123 3124 .VButton:3125 pop af 3126 ld a,(PreviousButtonClicked)3127 cp 2 3128 jr z,.AddSkillOnTheLeft3130 .AddSkillOnTheRight:3131 ld ix,(plxcurrentheroAddress) 3132 ld a,(SkillInLevelUpSlot2)3133 ld b,a3134 ld a,(PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?)3135 jp AddThisSkillToHero3137 .AddSkillOnTheLeft:3138 ld ix,(plxcurrentheroAddress) 3139 ld a,(SkillInLevelUpSlot1)3140 ld b,a3141 ld a,(PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?)3142 jp AddThisSkillToHero3144SetLevelUpHeroSkillsInTable:3145 ex af,af'3146 ld a,HeroOverviewCodeBlock 3147 call block34 3149 ex af,af'3150 ld de,TextSkillsWindowButton13151 call .SetheroSkill3153 ld a,CastleOverviewCodeBlock 3154 call block1234 3156 ld hl,$4000 + (147*128) + (006/2) - 1283157 ld de,$0000 + (162*128) + (028/2) - 1283158 ld bc,$0000 + (020*256) + (148/2)3159 ld a,LevelUpBlock 3160 call CopyRamToVramCorrectedCastleOverview 3162 ld b,030 3163 ld c,162 3164 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3165 call SetText 3166 call SwapAndSetPage 3168 ld hl,$4000 + (147*128) + (006/2) - 1283169 ld de,$0000 + (162*128) + (028/2) - 1283170 ld bc,$0000 + (020*256) + (148/2)3171 ld a,LevelUpBlock 3172 call CopyRamToVramCorrectedCastleOverview 3174 ld b,030 3175 ld c,162 3176 ld hl,TextSkillsWindowButton1+LenghtTextSkillsDescription3177 jp SetText 3179 .SetheroSkill:3180 ld l,a3181 ld h,03182 add hl,hl 3183 add hl,hl 3184 add hl,hl 3185 push hl3186 add hl,hl 3187 add hl,hl 3188 add hl,hl 3189 add hl,hl 3190 pop bc3191 add hl,bc 3192 ld bc,SkillEmpty+$40003193 add hl,bc3194 ld bc,LenghtSkillDescription3195 ldir3196 ret3206AddThisSkillToHero:3207 call .goAdd3208 call SetTotalManaHero3209 ld a,(HeroTotalManaBeforeLevelingUp)3210 ld b,a3211 ld a,(ix+HeroTotalMana)3212 sub a,b 3213 add a,(ix+HeroMana) 3214 ld (ix+HeroMana),a3215 ret3217 .goAdd:3218 cp 13219 jr z,.HeroSlot13220 cp 23221 jr z,.HeroSlot23222 cp 33223 jr z,.HeroSlot33224 cp 43225 jr z,.HeroSlot43226 cp 53227 jr z,.HeroSlot53228 cp 63229 jr z,.HeroSlot63230 3231 .SkillShouldBePlacedInaFreeSlot:3232 xor a3233 cp (ix+HeroSkills+1)3234 jr z,.HeroSlot23235 cp (ix+HeroSkills+2)3236 jr z,.HeroSlot33237 cp (ix+HeroSkills+3)3238 jr z,.HeroSlot43239 cp (ix+HeroSkills+4)3240 jr z,.HeroSlot53242 .HeroSlot6:3243 ld (ix+HeroSkills+5),b3244 ret3245 .HeroSlot5:3246 ld (ix+HeroSkills+4),b3247 ret3248 .HeroSlot4:3249 ld (ix+HeroSkills+3),b3250 ret3251 .HeroSlot3:3252 ld (ix+HeroSkills+2),b3253 ret3254 .HeroSlot2:3255 ld (ix+HeroSkills+1),b3256 ret3257 .HeroSlot1:3258 ld (ix+HeroSkills+0),b3259 ret 3272SetLevelUpButtons:3273 ld hl,LevelUpButtonTable-23274 ld de,GenericButtonTable-23275 ld bc,2+(GenericButtonTableLenghtPerButton*03)3276 ldir3278 call .SetButtons3280 ld a,(SkillInLevelUpSlot1)3281 ld hl,SkillInLevelUpSlot23282 cp (hl)3283 ret nz3285 ld a,863286 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXleft),a3287 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXleft),a3288 ld a,86+303289 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*01)+GenericButtonXright),a3290 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*02)+GenericButtonXright),a3291 ret3294 .SetButtons:3296 ld ix,(plxcurrentheroAddress) 3298 ld a,(ix+HeroSkills+0) 3302 exx3303 ld hl,SkillInLevelUpSlot13304 ld bc,PlaceSkillInLevelUpSlot1IntoWhichHeroSlot?3305 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*01+13306 exx3308 cp 133309 jp c,.SetLeftButtonMightRightButtonAdventureOrWizzardry3310 cp 223311 jp c,.SetLeftButtonAdventureRightButtonWizzardryOrMight3312 jp .SetLeftButtonWizzardryRightButtonMightOrAdventure3314 .SetLeftButtonWizzardryRightButtonMightOrAdventure:3315 call SetButtonWizzardry3316 exx3317 ld hl,SkillInLevelUpSlot23318 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3319 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13320 exx3321 ld a,r3322 and 13323 jp z,SetButtonMight3324 jp SetButtonAdventure3326 .SetLeftButtonMightRightButtonAdventureOrWizzardry:3327 call SetButtonMight3328 exx3329 ld hl,SkillInLevelUpSlot23330 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3331 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13332 exx3333 ld a,r3334 and 13335 jp z,SetButtonAdventure3336 jp SetButtonWizzardry3338 .SetLeftButtonAdventureRightButtonWizzardryOrMight:3339 call SetButtonAdventure3340 exx3341 ld hl,SkillInLevelUpSlot23342 ld bc,PlaceSkillInLevelUpSlot2IntoWhichHeroSlot?3343 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*02+13344 exx3345 ld a,r3346 and 13347 jp z,SetButtonWizzardry3348 jp SetButtonMight3350SetSkillButton: 3351 inc b 3352 ld a,b3353 exx3354 ld (hl),a 3355 exx3356 ld a,c3357 exx3358 ld (bc),a3359 push de3360 exx3361 pop de3362 ld bc,63363 ldir3364 ret3366CheckAmountOfExpertSkills_Wizzardry:3367 ld b,0 3368 ld a,24 3369 call SearchExpertSkill3370 ld a,27 3371 call SearchExpertSkill3372 ld a,30 3373 call SearchExpertSkill3374 ld a,33 3375 call SearchExpertSkill3376 ret3378CheckAmountOfExpertSkills_Adventure:3379 ld b,0 3380 ld a,15 3381 call SearchExpertSkill3382 ld a,18 3383 call SearchExpertSkill3384 ld a,21 3385 call SearchExpertSkill3386 ret3390SetButtonWizzardry:3391 call IsItPossibleToLevelOrSetAWizzardrySkill?3392 jp c,SetButtonAdventure 3394 call CheckAmountOfExpertSkills_Wizzardry3395 ld a,b3396 cp 43397 jp z,SetButtonAdventure 3399 ld a,r3400 and 33401 jr z,.Intelligence3402 dec a3403 jr z,.Sorcery3404 dec a3405 jr z,.Wisdom3407 .Necromancy:3408 call IsItPossibleToLevelOrSetNecromancy?3409 jr c,.Wisdom 3411 ld b,31 3412 call CheckSkillAvailable 3413 jr c,.Wisdom 3414 ld hl,ButtonNecromancy3415 jp SetSkillButton3417 .Wisdom:3418 call IsItPossibleToLevelOrSetWisdom?3419 jr c,.Sorcery 3421 ld b,28 3422 call CheckSkillAvailable 3423 jr c,.Sorcery 3424 ld hl,ButtonWisdom3425 jp SetSkillButton3427 .Sorcery:3428 call IsItPossibleToLevelOrSetSorcery?3429 jr c,.Intelligence 3431 ld b,25 3432 call CheckSkillAvailable 3433 jr c,.Intelligence 3434 ld hl,ButtonSorcery3435 jp SetSkillButton3437 .Intelligence: 3438 call IsItPossibleToLevelOrSetIntelligence?3439 jr c,.Necromancy 3441 ld b,22 3442 call CheckSkillAvailable 3443 jr c,.Necromancy 3444 ld hl,ButtonIntelligence3445 jp SetSkillButton34473448SetButtonAdventure:3449 call IsItPossibleToLevelOrSetAnAdventureSkill?3450 jp c,SetButtonMight 3452 call CheckAmountOfExpertSkills_Adventure3453 ld a,b3454 cp 33455 jp z,SetButtonMight 3457 ld a,r3458 and 33459 jr z,.Estates3460 dec a3461 jr z,.Learning3462 dec a3463 jr z,.Logistics3465 .Learning:3466 call IsItPossibleToLevelOrSetLearning?3467 jr c,.Logistics 3469 ld b,16 3470 call CheckSkillAvailable 3471 jr c,.Logistics 3472 ld hl,ButtonLearning3473 jp SetSkillButton3475 .Logistics:3476 call IsItPossibleToLevelOrSetLogistics?3477 jr c,.Estates 3479 ld b,19 3480 call CheckSkillAvailable 3481 jr c,.Estates 3482 ld hl,ButtonLogistics3483 jp SetSkillButton3484 3485 .Estates:3486 call IsItPossibleToLevelOrSetEstates?3487 jr c,.Learning 3489 ld b,13 3490 call CheckSkillAvailable 3491 jr c,.Learning 3492 ld hl,ButtonEstates3493 jp SetSkillButton3496CheckAmountOfExpertSkills_Might:3497 ld b,0 3498 ld a,03 3499 call SearchExpertSkill3500 ld a,06 3501 call SearchExpertSkill3502 ld a,09 3503 call SearchExpertSkill3504 ld a,12 3505 call SearchExpertSkill3506 ret3508SearchExpertSkill:3509 cp (ix+HeroSkills+0) 3510 jr z,.ExpertSkillFound3511 cp (ix+HeroSkills+1) 3512 jr z,.ExpertSkillFound3513 cp (ix+HeroSkills+2) 3514 jr z,.ExpertSkillFound3515 cp (ix+HeroSkills+3) 3516 jr z,.ExpertSkillFound3517 cp (ix+HeroSkills+4) 3518 jr z,.ExpertSkillFound3519 cp (ix+HeroSkills+5) 3520 jr z,.ExpertSkillFound3521 ret3522 .ExpertSkillFound:3523 inc b3524 ret35263527IsItPossibleToLevelOrSetAMightSkill?: 3528 xor a3529 call CheckSkill 3530 ld a,1 3531 call CheckSkill 3532 ld a,2 3533 call CheckSkill 3535 ld a,4 3536 call CheckSkill 3537 ld a,5 3538 call CheckSkill 3540 ld a,7 3541 call CheckSkill 3542 ld a,8 3543 call CheckSkill 3545 ld a,10 3546 call CheckSkill 3547 ld a,11 3548 call CheckSkill 3550 scf3551 ret35533554IsItPossibleToLevelOrSetAnAdventureSkill?: 3555 xor a3556 call CheckSkill 3557 ld a,13 3558 call CheckSkill 3559 ld a,14 3560 call CheckSkill 3562 ld a,16 3563 call CheckSkill 3564 ld a,17 3565 call CheckSkill 3567 ld a,19 3568 call CheckSkill 3569 ld a,20 3570 call CheckSkill 3572 scf3573 ret35753576IsItPossibleToLevelOrSetAWizzardrySkill?: 3577 xor a3578 call CheckSkill 3579 ld a,22 3580 call CheckSkill 3581 ld a,23 3582 call CheckSkill 3584 ld a,25 3585 call CheckSkill 3586 ld a,26 3587 call CheckSkill 3589 ld a,28 3590 call CheckSkill 3591 ld a,29 3592 call CheckSkill 3594 ld a,31 3595 call CheckSkill 3596 ld a,32 3597 call CheckSkill 3599 scf3600 ret3601 3602IsItPossibleToLevelOrSetNecromancy?:3603 xor a3604 call CheckSkill 3605 ld a,31 3606 call CheckSkill 3607 ld a,32 3608 call CheckSkill 3610 scf3611 ret3613IsItPossibleToLevelOrSetWisdom?:3614 xor a3615 call CheckSkill 3616 ld a,28 3617 call CheckSkill 3618 ld a,29 3619 call CheckSkill 3621 scf3622 ret3624IsItPossibleToLevelOrSetSorcery?:3625 xor a3626 call CheckSkill 3627 ld a,25 3628 call CheckSkill 3629 ld a,26 3630 call CheckSkill 3632 scf3633 ret3635IsItPossibleToLevelOrSetIntelligence?:3636 xor a3637 call CheckSkill 3638 ld a,22 3639 call CheckSkill 3640 ld a,23 3641 call CheckSkill 3643 scf3644 ret3646IsItPossibleToLevelOrSetLogistics?:3647 xor a3648 call CheckSkill 3649 ld a,19 3650 call CheckSkill 3651 ld a,20 3652 call CheckSkill 3654 scf3655 ret3657IsItPossibleToLevelOrSetLearning?:3658 xor a3659 call CheckSkill 3660 ld a,16 3661 call CheckSkill 3662 ld a,17 3663 call CheckSkill 3665 scf3666 ret3668IsItPossibleToLevelOrSetEstates?:3669 xor a3670 call CheckSkill 3671 ld a,13 3672 call CheckSkill 3673 ld a,14 3674 call CheckSkill 3676 scf3677 ret3679IsItPossibleToLevelOrSetResistance?:3680 xor a3681 call CheckSkill 3682 ld a,10 3683 call CheckSkill 3684 ld a,11 3685 call CheckSkill 3687 scf3688 ret3690IsItPossibleToLevelOrSetArmourer?:3691 xor a3692 call CheckSkill 3693 ld a,7 3694 call CheckSkill 3695 ld a,8 3696 call CheckSkill 3698 scf3699 ret3701IsItPossibleToLevelOrSetOffence?:3702 xor a3703 call CheckSkill 3704 ld a,4 3705 call CheckSkill 3706 ld a,5 3707 call CheckSkill 3709 scf3710 ret3712IsItPossibleToLevelOrSetArchery?:3713 xor a3714 call CheckSkill 3715 ld a,1 3716 call CheckSkill 3717 ld a,2 3718 call CheckSkill 3720 scf3721 ret3723CheckSkill:3724 cp (ix+HeroSkills+0) 3725 jr z,.SkillFound3726 cp (ix+HeroSkills+1) 3727 jr z,.SkillFound3728 cp (ix+HeroSkills+2) 3729 jr z,.SkillFound3730 cp (ix+HeroSkills+3) 3731 jr z,.SkillFound3732 cp (ix+HeroSkills+4) 3733 jr z,.SkillFound3734 cp (ix+HeroSkills+5) 3735 jr z,.SkillFound3736 ret3737 .SkillFound:3738 pop bc 3739 ret37413742SetButtonMight:3743 call IsItPossibleToLevelOrSetAMightSkill?3744 jp c,SetButtonWizzardry 3745 3746 call CheckAmountOfExpertSkills_Might3747 ld a,b3748 cp 43749 jp z,SetButtonWizzardry 3750 3751 ld a,r3752 and 33753 jr z,.Archery3754 dec a3755 jr z,.Offence3756 dec a3757 jr z,.Armourer3759 .Resistance:3760 call IsItPossibleToLevelOrSetResistance?3761 jr c,.Armourer 3763 ld b,10 3764 call CheckSkillAvailable 3765 jr c,.Armourer 3766 ld hl,ButtonResistance3767 jp SetSkillButton3769 .Armourer:3770 call IsItPossibleToLevelOrSetArmourer?3771 jr c,.Offence 3772 3773 ld b,07 3774 call CheckSkillAvailable 3775 jr c,.Offence 3776 ld hl,ButtonArmourer3777 jp SetSkillButton3779 .Offence:3780 call IsItPossibleToLevelOrSetOffence?3781 jr c,.Archery 3783 ld b,04 3784 call CheckSkillAvailable 3785 jr c,.Archery 3786 ld hl,ButtonOffence3787 jp SetSkillButton3788 3789 .Archery:3790 call IsItPossibleToLevelOrSetArchery?3791 jr c,.Resistance 3793 ld b,01 3794 call CheckSkillAvailable 3795 jr c,.Resistance 3796 ld hl,ButtonArchery3797 jp SetSkillButton38003801ButtonArchery: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 1283802ButtonOffence: dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 1283803ButtonArmourer: dw $4000 + (000*128) + (060/2) - 128 | dw $4000 + (033*128) + (060/2) - 128 | dw $4000 + (066*128) + (060/2) - 1283804ButtonResistance: dw $4000 + (000*128) + (090/2) - 128 | dw $4000 + (033*128) + (090/2) - 128 | dw $4000 + (066*128) + (090/2) - 12838053806ButtonEstates: dw $4000 + (000*128) + (120/2) - 128 | dw $4000 + (033*128) + (120/2) - 128 | dw $4000 + (066*128) + (120/2) - 1283807ButtonLearning: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (033*128) + (150/2) - 128 | dw $4000 + (066*128) + (150/2) - 1283808ButtonLogistics: dw $4000 + (000*128) + (180/2) - 128 | dw $4000 + (033*128) + (180/2) - 128 | dw $4000 + (066*128) + (180/2) - 12838093810ButtonIntelligence:dw $4000 + (000*128) + (210/2) - 128 | dw $4000 + (033*128) + (210/2) - 128 | dw $4000 + (066*128) + (210/2) - 1283811ButtonSorcery: dw $4000 + (099*128) + (000/2) - 128 | dw $4000 + (099*128) + (030/2) - 128 | dw $4000 + (099*128) + (060/2) - 1283812ButtonWisdom: dw $4000 + (099*128) + (090/2) - 128 | dw $4000 + (099*128) + (120/2) - 128 | dw $4000 + (099*128) + (150/2) - 1283813ButtonNecromancy: dw $4000 + (099*128) + (180/2) - 128 | dw $4000 + (099*128) + (210/2) - 128 | dw $4000 + (132*128) + (000/2) - 1283815CheckSkillAvailable:3816 3817 ld a,(ix+HeroSkills+0) 3818 ld c,1 3819 cp b3820 ret z3821 ld a,(ix+HeroSkills+1) 3822 ld c,2 3823 cp b3824 ret z3825 ld a,(ix+HeroSkills+2) 3826 ld c,3 3827 cp b3828 ret z3829 ld a,(ix+HeroSkills+3) 3830 ld c,4 3831 cp b3832 ret z3833 ld a,(ix+HeroSkills+4) 3834 ld c,5 3835 cp b3836 ret z3837 ld a,(ix+HeroSkills+5) 3838 ld c,6 3839 cp b3840 ret z3841 3842 inc b3843 ld a,(ix+HeroSkills+0) 3844 ld c,1 3845 cp b3846 ret z3847 ld a,(ix+HeroSkills+1) 3848 ld c,2 3849 cp b3850 ret z3851 ld a,(ix+HeroSkills+2) 3852 ld c,3 3853 cp b3854 ret z3855 ld a,(ix+HeroSkills+3) 3856 ld c,4 3857 cp b3858 ret z3859 ld a,(ix+HeroSkills+4) 3860 ld c,5 3861 cp b3862 ret z3863 ld a,(ix+HeroSkills+5) 3864 ld c,6 3865 cp b3866 ret z3867 3868 inc b3869 ld a,(ix+HeroSkills+0) 3870 cp b3871 jr z,.ExpertSkillAlreadyLearned3872 ld a,(ix+HeroSkills+1) 3873 cp b3874 jr z,.ExpertSkillAlreadyLearned3875 ld a,(ix+HeroSkills+2) 3876 cp b3877 jr z,.ExpertSkillAlreadyLearned3878 ld a,(ix+HeroSkills+3) 3879 cp b3880 jr z,.ExpertSkillAlreadyLearned3881 ld a,(ix+HeroSkills+4) 3882 cp b3883 jr z,.ExpertSkillAlreadyLearned3884 ld a,(ix+HeroSkills+5) 3885 cp b3886 jr z,.ExpertSkillAlreadyLearned3887 dec b3888 dec b3889 dec b3890 ld c,7 3891 or a 3892 ret3894 .ExpertSkillAlreadyLearned:3895 scf3896 ret3899390639113919LevelUpButtonTableGfxBlock: db SecondarySkillsButtonsBlock3920LevelUpButtonTableAmountOfButtons: db 33921LevelUpButtonTable: 3924 db %0100 0011 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 3925 3926 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (033*128) + (000/2) - 128 | dw $4000 + (066*128) + (000/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 3927 3928 db %1100 0011 | dw $4000 + (000*128) + (030/2) - 128 | dw $4000 + (033*128) + (030/2) - 128 | dw $4000 + (066*128) + (030/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1283930.Button1Ytop: equ 1373931.Button1YBottom: equ .Button1Ytop + 0193932.Button1XLeft: equ 1563933.Button1XRight: equ .Button1XLeft + 0203935.Button2Ytop: equ 1113936.Button2YBottom: equ .Button2Ytop + 0333937.Button2XLeft: equ 0623938.Button2XRight: equ .Button2XLeft + 0303940.Button3Ytop: equ 1113941.Button3YBottom: equ .Button3Ytop + 0333942.Button3XLeft: equ 1123943.Button3XRight: equ .Button3XLeft + 0303945SetLevelUpHeroIcon:3946 ld ix,(plxcurrentheroAddress) 3947 ld l,(ix+HeroSpecificInfo+0) 3948 ld h,(ix+HeroSpecificInfo+1)3949 push hl3950 pop ix3951 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 3952 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 3953 ld bc,$40003954 xor a3955 sbc hl,bc3956 ld de,$0000 + (034*128) + (094/2) - 1283957 ld bc,NXAndNY16x30HeroIcon3958 ld a,Hero16x30PortraitsBlock 3959 jp CopyRamToVramCorrectedCastleOverview 3961TextLevelUp2:3962 db "has gained a level",2553963TextLevelUp3:3964 db "level",2553965TextLevelUp5a:3966 db "  Attack + 1",2553967TextLevelUp5b:3968 db "  Defense + 1",2553969TextLevelUp5c:3970 db " Knowledge + 1",2553971TextLevelUp5d:3972 db "Spell Power + 1",2553973TextLevelUp6:3974 db "or",2553975 3976CenterHeroNameHasGainedALevel:3977 ld d,0 3978 push hl3979 .loop:3980 ld a,(hl)3981 cp 2553982 jr z,.EndNameFound3983 inc d3984 inc hl3985 dec b3986 dec b3987 jr .loop3988 .EndNameFound:3989 pop hl3990 ret3991 3992SetLevelUpText:3993 call SetCastleOverViewFontPage0Y212 3995 ld ix,(plxcurrentheroAddress) 3997 ld b,032+(17*2) 3998 ld c,022+00 3999 ld l,(ix+HeroSpecificInfo+0) 4000 ld h,(ix+HeroSpecificInfo+1)4001 call CenterHeroNameHasGainedALevel4002 call SetText 4004 ld a,(PutLetter+dx) 4005 add a,54006 4007 ld b,a 4008 ld c,022+00 4009 ld hl,TextLevelUp24010 call SetText 4012 4013 ld b,073-00 4014 ld c,071+00 4015 ld hl,TextLevelUp34016 call SetText 4018 ld a,(ix+HeroLevel) 4019 ld l,a4020 ld h,04021 ld b,094-00 4022 ld c,071+00 4023 call SetNumber16BitCastle4024 4025 ld l,(ix+HeroSpecificInfo+0) 4026 ld h,(ix+HeroSpecificInfo+1)4027 ld de,HeroInfoClass4028 add hl,de4030 ld a,(PutLetter+dx) 4031 add a,54032 ld b,a 4033 ld c,071+00 4034 call SetText 4036 call SetPrimairySkillLevelUpInA4037 or a4038 ld hl,TextLevelUp5a 4039 jr z,.PrimairySkillUpFound4040 dec a4041 ld hl,TextLevelUp5b 4042 jr z,.PrimairySkillUpFound4043 dec a4044 ld hl,TextLevelUp5c 4045 jr z,.PrimairySkillUpFound4046 ld hl,TextLevelUp5d 4047 .PrimairySkillUpFound: 4048 ld b,072+00 4049 ld c,102+00 4050 call SetText 4052 ld b,099+00 4053 ld c,125+00 4054 ld hl,TextLevelUp64055 call SetText 4057 ld a,(SkillInLevelUpSlot1)4058 ld l,a4059 ld h,04060 add hl,hl 4061 push hl4062 pop bc4063 add hl,hl 4064 add hl,hl 4065 push hl4066 pop de4067 add hl,hl 4068 add hl,de 4069 add hl,bc 4070 ld de,SkillTextEmpty4071 add hl,de4073 ld a,(SkillInLevelUpSlot1)4074 ld b,a4075 ld a,(SkillInLevelUpSlot2)4076 cp b4077 ld b,(062+112)/2 4078 jp z,.SkillsAreTheSame4079 4080 ld b,062+00 4081 ld c,145+00 4082 call SetText 4084 ld a,(SkillInLevelUpSlot2)4085 ld l,a4086 ld h,04087 add hl,hl 4088 push hl4089 pop bc4090 add hl,hl 4091 add hl,hl 4092 push hl4093 pop de4094 add hl,hl 4095 add hl,de 4096 add hl,bc 4097 ld de,SkillTextEmpty4098 add hl,de4099 ld b,112+00 4101 .SkillsAreTheSame:4102 ld c,145+00 4103 call SetText 4104 ret4106SkillTextEmpty:4107 db "            ",254 4108 db "            ",2554109SkillTextArcheryBasic:4110 db "Basic       ",254 4111 db "Archery     ",2554112SkillTextArcheryAdvanced:4113 db "Advanced    ",2544114 db "Archery     ",2554115SkillTextArcheryExpert:4116 db "Expert      ",2544117 db "Archery     ",2554118SkillTextOffenceBasic:4119 db "Basic       ",254 4120 db "Offence     ",2554121SkillTextOffenceAdvanced:4122 db "Advanced    ",2544123 db "Offence     ",2554124SkillTextOffenceExpert:4125 db "Expert      ",2544126 db "Offence     ",2554127SkillTextArmourerBasic:4128 db "Basic       ",254 4129 db "Armorer     ",2554130SkillTextArmourerAdvanced:4131 db "Advanced    ",2544132 db "Armorer     ",2554133SkillTextArmourerExpert:4134 db "Expert      ",2544135 db "Armorer     ",2554136SkillTextresistanceBasic:4137 db "Basic       ",254 4138 db "Resistance  ",2554139SkillTextresistanceAdvanced:4140 db "Advanced    ",2544141 db "Resistance  ",2554142SkillTextresistanceExpert:4143 db "Expert      ",2544144 db "Resistance  ",2554145SkillTextestatesBasic:4146 db "Basic       ",254 4147 db "Estates     ",2554148SkillTextestatesAdvanced:4149 db "Advanced    ",2544150 db "Estates     ",2554151SkillTextestatesExpert:4152 db "Expert      ",2544153 db "Estates     ",2554154SkillTextlearningBasic:4155 db "Basic       ",254 4156 db "Learning    ",2554157SkillTextlearningAdvanced:4158 db "Advanced    ",2544159 db "Learning    ",2554160SkillTextlearningExpert:4161 db "Expert      ",2544162 db "Learning    ",2554163SkillTextlogisticsBasic:4164 db "Basic       ",254 4165 db "Logistics   ",2554166SkillTextlogisticsAdvanced:4167 db "Advanced    ",2544168 db "Logistics   ",2554169SkillTextlogisticsExpert:4170 db "Expert      ",2544171 db "Logistics   ",2554172SkillTextintelligenceBasic:4173 db "Basic       ",254 4174 db "Intelligence",2554175SkillTextintelligenceAdvanced:4176 db "Advanced    ",2544177 db "Intelligence",2554178SkillTextintelligenceExpert:4179 db "Expert      ",2544180 db "Intelligence",2554181SkillTextsorceryBasic:4182 db "Basic       ",254 4183 db "Sorcery     ",2554184SkillTextsorceryAdvanced:4185 db "Advanced    ",2544186 db "Sorcery     ",2554187SkillTextsorceryExpert:4188 db "Expert      ",2544189 db "Sorcery     ",2554190SkillTextwisdomBasic:4191 db "Basic       ",254 4192 db "Wisdom      ",2554193SkillTextwisdomAdvanced:4194 db "Advanced    ",2544195 db "Wisdom      ",2554196SkillTextwisdomExpert:4197 db "Expert      ",2544198 db "Wisdom      ",2554199SkillTextnecromancyBasic:4200 db "Basic       ",254 4201 db "Necromancy  ",2554202SkillTextnecromancyAdvanced:4203 db "Advanced    ",2544204 db "Necromancy  ",2554205SkillTextnecromancyExpert:4206 db "Expert      ",2544207 db "Necromancy  ",2554209SetLevelUpGraphics:4210 ld hl,$4000 + (000*128) + (000/2) - 128 4211 ld de,$0000 + (015*128) + (022/2) - 1284212 ld bc,$0000 + (173*256) + (160/2)4213 ld a,LevelUpBlock 4214 jp CopyRamToVramCorrectedCastleOverview 4216SetPrimairySkillUpIcon:4217 call SetPrimairySkillLevelUpInA4218 or a 4219 ld hl,$4000 + (132*128) + (090/2) - 128 4220 jr z,.PrimairySkillUpFound4221 dec a 4222 ld hl,$4000 + (132*128) + (106/2) - 128 4223 jr z,.PrimairySkillUpFound4224 dec a 4225 ld hl,$4000 + (132*128) + (122/2) - 128 4226 jr z,.PrimairySkillUpFound4227 ld hl,$4000 + (132*128) + (138/2) - 128 4228 .PrimairySkillUpFound: 4230 ld de,$0000 + (081*128) + (094/2) - 1284231 ld bc,$0000 + (016*256) + (016/2)4232 ld a,SecondarySkillsButtonsBlock 4233 jp CopyRamToVramCorrectedCastleOverview 4235IncreasePrimairySkill:4236 ld a,34237 ld (SetHeroArmyAndStatusInHud?),a4239 call SetPrimairySkillLevelUpInA4240 or a 4241 jr z,.AttackUp4242 dec a 4243 jr z,.DefenseUp4244 dec a 4245 jr z,.KnowledgeUp4247 .SpellDamageUp: 4248 inc (ix+HeroStatSpellDamage)4249 ret4250 .KnowledgeUp:4251 inc (ix+HeroStatKnowledge)4252 ret4253 .DefenseUp:4254 inc (ix+HeroStatDefense)4255 ret4256 .AttackUp:4257 inc (ix+HeroStatAttack)4258 ret4260PrimairySkillLevelUpMight:4261 db 0,1,0,1,0,1,2,34262PrimairySkillLevelUpAdventure:4263 db 0,1,2,3,0,1,2,34264PrimairySkillLevelUpWizzardry:4265 db 2,3,2,3,2,3,0,14267SetPrimairySkillLevelUpInA:4268 ld ix,(plxcurrentheroAddress) 4270 ld a,(ix+HeroSkills+0) 4272 cp 134273 ld hl,PrimairySkillLevelUpMight4274 jp c,.ClassFound4275 cp 224276 ld hl,PrimairySkillLevelUpAdventure4277 jp c,.ClassFound4278 ld hl,PrimairySkillLevelUpWizzardry4279 .ClassFound:4281 ld a,(framecounter)4282 and 74283 ld d,04284 ld e,a4285 add hl,de4286 ld a,(hl)4287 ret4294DisplayChestCode:4295call ScreenOn4296 ld a,255 4297 ld (PreviousButtonClicked),a 4298 ld ix,GenericButtonTable4299 ld (PreviousButtonClickedIX),ix4301 call SetChestButtons4302 4303 call SetChestGraphics 4304 call SetChestText4305 call SwapAndSetPage 4306 call SetChestGraphics 4307 call SetChestText4309 ld bc,SFX_ChestFound4310 call RePlayerSFX_PlayCh1 4311 .engine: 4312 call SwapAndSetPage 4313 call PopulateControls 43154324 4325 ld ix,GenericButtonTable4326 call CheckButtonInteractionControlsNotOnInt4328 call .CheckButtonClicked 4332 4333 ld ix,(PreviousButtonClickedIX) 4334 ld a,(ix+GenericButtonStatus)4335 push af4336 ld a,(PreviousButtonClicked)4337 cp 2554338 jr z,.EndMarkButton 4339 ld (ix+GenericButtonStatus),%1010 00114340 .EndMarkButton:4341 4344 ld ix,GenericButtonTable4345 call SetGenericButtons 4348 4349 pop af4350 ld ix,(PreviousButtonClickedIX) 4351 ld (ix+GenericButtonStatus),a4352 43584360 halt4361 jp .engine4363 .CheckButtonClicked:4364 ret nc4365 ld a,%1100 00114366 ld (GenericButtonTable),a 4368 ld a,b4369 cp 3 4370 jr z,.VButton4371 ld (PreviousButtonClicked),a4372 ld (PreviousButtonClickedIX),ix4373 cp 2 4374 jr z,.MoneyButton4375 4376 .XPButton: 4377 ret4379 .MoneyButton:4380 ret4381 4382 .VButton:4383 pop af 4384 ld a,(PreviousButtonClicked)4385 cp 2 4386 jr z,.AddMoney4388 .AddXp:4389 ld ix,(plxcurrentheroAddress) 4391 ld a,(BigChest?)4392 or a4393 ld hl,750 4394 jr z,.SetAmountOfXp 4395 ld hl,1000 4396 .SetAmountOfXp:43994400 call SetChestText.AddXPBoostFromLearning 4401 4403 ld e,(ix+HeroXp+0)4404 ld d,(ix+HeroXp+1)4405 add hl,de4406 ret c4407 ld (ix+HeroXp+0),l4408 ld (ix+HeroXp+1),h4409 ret4411 .AddMoney:4412 call SetResourcesCurrentPlayerinIX 4413 4414 ld a,(BigChest?)4415 or a4416 ld de,1000 4417 jr z,.SetAmountOfGold 4418 ld de,1500 4419 .SetAmountOfGold: 4420 4421 ld l,(ix+0)4422 ld h,(ix+1)4423 add hl,de4424 ret c4425 ld (ix+0),l4426 ld (ix+1),h4427 ld a,34428 ld (SetResources?),a 4429 ret 4431SetChestButtons:4432 ld hl,ChestButtonTable-24433 ld de,GenericButtonTable-24434 ld bc,2+(GenericButtonTableLenghtPerButton*03)4435 ldir4436 ret4438ChestButtonTableGfxBlock: db PlayerStartTurnBlock4439ChestButtonTableAmountOfButtons: db 34440ChestButtonTable: 4443 db %0100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4444 4445 db %1100 0011 | dw $4000 + (000*128) + (184/2) - 128 | dw $4000 + (032*128) + (184/2) - 128 | dw $4000 + (064*128) + (184/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 4446 4447 db %1100 0011 | dw $4000 + (000*128) + (216/2) - 128 | dw $4000 + (032*128) + (216/2) - 128 | dw $4000 + (064*128) + (216/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1284449.Button1Ytop: equ 1574450.Button1YBottom: equ .Button1Ytop + 0194451.Button1XLeft: equ 1644452.Button1XRight: equ .Button1XLeft + 0204454.Button2Ytop: equ 1374455.Button2YBottom: equ .Button2Ytop + 0324456.Button2XLeft: equ 0584457.Button2XRight: equ .Button2XLeft + 0324459.Button3Ytop: equ 1374460.Button3YBottom: equ .Button3Ytop + 0324461.Button3XLeft: equ 1164462.Button3XRight: equ .Button3XLeft + 0324465TextChest1:4466 db "Chest",2554467TextChest2:4468 db "Having scoured the land you stumble",2544469 db "upon hidden treasure: The choice lies",2544470 db "between claiming the gold or bestowing",2544471 db "it upon peasants for enlightenment.",2554472TextChest3:4473 db "Which do you choose ?",2554474TextChest4:4475 db "or",2554477 4478SetChestText:4479 call SetCastleOverViewFontPage0Y212 4481 ld b,093+00 4482 ld c,022+00 4483 ld hl,TextChest14484 call SetText 4486 ld b,025+00 4487 ld c,032+00 4488 ld hl,TextChest24489 call SetText 4491 ld b,061+00 4492 ld c,130+00 4493 ld hl,TextChest34494 call SetText 4496 ld b,097+00 4497 ld c,151+00 4498 ld hl,TextChest44499 call SetText 4501 ld a,(BigChest?)4502 or a4503 ld hl,1000 4504 jr z,.SetAmountOfGold 4505 ld hl,1500 4506 .SetAmountOfGold:4507 ld b,065+00 4508 ld c,171+00 4509 call SetNumber16BitCastle4511 ld a,(BigChest?)4512 or a4513 ld hl,750 4514 jr z,.SetAmountOfXp 4515 ld hl,1000 4516 .SetAmountOfXp:4518 ld ix,(plxcurrentheroAddress) 4519 call .AddXPBoostFromLearning 4520 4522 4523 ld b,121+00 4524 ld c,171+00 4525 call SetNumber16BitCastle4526 ret4530.AddXPBoostFromLearning: 4531 ld a,(ix+HeroSkills+0)4532 call .CheckSkillLearning4533 ld a,(ix+HeroSkills+1)4534 call .CheckSkillLearning4535 ld a,(ix+HeroSkills+2)4536 call .CheckSkillLearning4537 ld a,(ix+HeroSkills+3)4538 call .CheckSkillLearning4539 ld a,(ix+HeroSkills+4)4540 call .CheckSkillLearning4541 ld a,(ix+HeroSkills+5)4542 call .CheckSkillLearning4543 ret4545 .CheckSkillLearning:4546 cp 16 4547 jr z,.BasicLearningFound4548 cp 17 4549 jr z,.AdvancedLearningFound4550 cp 18 4551 jr z,.ExpertLearningFound4552 ret4554 .BasicLearningFound:4555 ld de,10 4556 jp .ApplyPercentBasedBoost4558 .AdvancedLearningFound:4559 ld de,5 4560 jp .ApplyPercentBasedBoost4562 .ExpertLearningFound:4563 ld de,10 4564 call .ApplyPercentBasedBoost4565 add hl,bc 4566 add hl,bc 4567 ret4569.ApplyPercentBasedBoost:4570 push hl 4571 4572 push hl4573 pop bc45744575 call DivideBCbyDE 4577 pop hl4578 add hl,bc 4579 ret4582SetChestGraphics:4583 ld hl,$4000 + (000*128) + (000/2) - 128 4584 ld de,$0000 + (015*128) + (016/2) - 1284585 ld bc,$0000 + (168*256) + (174/2)4586 ld a,ChestBlock 4587 call CopyRamToVramCorrectedCastleOverview 4589 ld a,(BigChest?)4590 or a4591 ret nz 4593 ld hl,$4000 + (000*128) + (174/2) - 128 4594 ld de,$0000 + (064*128) + (074/2) - 1284595 ld bc,$0000 + (062*256) + (058/2)4596 ld a,ChestBlock 4597 jp CopyRamToVramCorrectedCastleOverview 4600DisplayLearningStoneCOde:4601 call SetScrollVButton4602 4603 call SetLearningStoneGraphics 4604 call SetLearningStoneText4605 call SwapAndSetPage 4606 call SetLearningStoneGraphics 4607 call SetLearningStoneText4609 ld bc,SFX_LearningStone4610 call RePlayerSFX_PlayCh1 4612 ld ix,(plxcurrentheroAddress) 4613 ld hl,10004614 call .AddXPBoostFromLearning 4616 ld e,(ix+HeroXp+0)4617 ld d,(ix+HeroXp+1)4618 add hl,de4619 jp c,DisplayScrollCode.engine4620 ld (ix+HeroXp+0),l4621 ld (ix+HeroXp+1),h4622 jp DisplayScrollCode.engine4624.AddXPBoostFromLearning: 4625 ld a,(ix+HeroSkills+0)4626 call .CheckSkillLearning4627 ld a,(ix+HeroSkills+1)4628 call .CheckSkillLearning4629 ld a,(ix+HeroSkills+2)4630 call .CheckSkillLearning4631 ld a,(ix+HeroSkills+3)4632 call .CheckSkillLearning4633 ld a,(ix+HeroSkills+4)4634 call .CheckSkillLearning4635 ld a,(ix+HeroSkills+5)4636 call .CheckSkillLearning4637 ret4639 .CheckSkillLearning:4640 cp 16 4641 jr z,.BasicLearningFound4642 cp 17 4643 jr z,.AdvancedLearningFound4644 cp 18 4645 jr z,.ExpertLearningFound4646 ret4648 .BasicLearningFound:4649 ld de,10 4650 jp .ApplyPercentBasedBoost4652 .AdvancedLearningFound:4653 ld de,5 4654 jp .ApplyPercentBasedBoost4656 .ExpertLearningFound:4657 ld de,10 4658 call .ApplyPercentBasedBoost4659 add hl,bc 4660 add hl,bc 4661 ret4663.ApplyPercentBasedBoost:4664 push hl 4665 4666 push hl4667 pop bc46684669 call DivideBCbyDE 4671 pop hl4672 add hl,bc 4673 ret4675SetLearningStoneText:4676 call SetCastleOverViewFontPage0Y212 4678 ld b,077+00 4679 ld c,031+00 4680 ld hl,TextLearningStone14681 call SetText 4683 ld b,030+00 4684 ld c,114+00 4685 ld hl,TextLearningStone24686 call SetText 4688 ld b,083+00 4689 ld c,160+00 4690 ld hl,TextLearningStone34691 call SetText 4693 ld ix,(plxcurrentheroAddress) 4694 ld hl,10004695 call DisplayLearningStoneCOde.AddXPBoostFromLearning 4696 ld b,092+00 4697 ld c,160+00 4698 jp SetNumber16BitCastle4700TextLearningStone1:4701 db "Learning Stone",2554702TextLearningStone2:4703 db "Peering into the learning stone,",2544704 db "you are amazed to see answers to",2544705 db "questions you have pondered for",2544706 db "years. The stone abruptly stills,",2544707 db "but the realization washes over",2544708 db "you - you have learned much.",2554709TextLearningStone3:4710 db "+     XP",2554712DisplayScrollCode:4713 call SetScrollVButton4714 call SetScrollGraphics 4715 call SetScrollText4716 call SwapAndSetPage 4717 call SetScrollGraphics 4718 call SetScrollText4720 ld bc,SFX_ScrollFound4721 call RePlayerSFX_PlayCh1 4723 .engine: 4724 call SwapAndSetPage 4725 call PopulateControls 47274732 ld a,(NewPrContr)4733 bit 5,a 4734 ret nz4736 4737 ld ix,GenericButtonTable4738 call CheckButtonInteractionControlsNotOnInt4740 call .CheckButtonClicked 4742 ld ix,GenericButtonTable4743 call SetGenericButtons 4745 call .CheckEndWindow 4747 halt4748 jp .engine4750 .CheckButtonClicked:4751 ret nc4752 pop af4753 ret4755 .CheckEndWindow:4756 ld a,(NewPrContr)4757 bit 4,a 4758 ret z4760 ld a,(spat+0) 4761 cp 024 4762 jr c,.Exit4763 cp 024+148 4764 jr nc,.Exit4765 4766 ld a,(spat+1) 4768 add a,064770 cp 020 4771 jr c,.Exit4772 cp 020+162 4773 ret c4775 .Exit:4776 pop af4777 ret4780SetScrollVButton:4781 ld hl,SetScrollVButtonTable-24782 ld de,GenericButtonTable-24783 ld bc,2+(GenericButtonTableLenghtPerButton*01)4784 ldir4785 ret4787SetScrollVButtonTableGfxBlock: db PlayerStartTurnBlock4788SetScrollVButtonTableAmountOfButtons: db 014789SetScrollVButtonTable: 4790 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 4792.Button1Ytop: equ 1464793.Button1YBottom: equ .Button1Ytop + 0194794.Button1XLeft: equ 1544795.Button1XRight: equ .Button1XLeft + 0204798TextScroll1:4799 db "Ancient scroll discovered",2554800TextScroll2:4801 db "Unearthing an ancient scroll, you",2544802 db "imbue your spellbook with its",2544803 db "mystic spell.",2554804TextScroll3:4805 db "Hypnotism",2554807EarthSpellLevel1: db "  Earthbound   ",2554808EarthSpellLevel2: db "  Plate Armor  ",2554809EarthSpellLevel3: db " Resurrection  ",2554810EarthSpellLevel4: db "  Earthshock   ",2554811FireSpellLevel1: db "    Curse      ",2554812FireSpellLevel2: db " Blinding Fog  ",2554813FireSpellLevel3: db "   Implosion   ",2554814FireSpellLevel4: db "   Sunstrike   ",2554815AirSpellLevel1: db "    Haste      ",2554816AirSpellLevel2: db " ShieldBreaker ",2554817AirSpellLevel3: db "   Claw Back   ",2554818AirSpellLevel4: db " Spell Bubble  ",2554819WaterSpellLevel1: db "     Cure      ",2554820WaterSpellLevel2: db "   Ice Peak    ",2554821WaterSpellLevel3: db "   Hypnosis    ",2554822WaterSpellLevel4: db "   Frost Ring  ",2554823UniversalSpellLevel1: db " Magic Arrows  ",2554824UniversalSpellLevel2: db "    Frenzy     ",2554825UniversalSpellLevel3: db "   Teleport    ",2554826UniversalSpellLevel4: db "Primal Instinct",2554828 4829SetScrollText:4830 call SetCastleOverViewFontPage0Y212 4832 ld b,053+00 4833 ld c,031+00 4834 ld hl,TextScroll14835 call SetText 4837 ld b,030+00 4838 ld c,041+00 4839 ld hl,TextScroll24840 call SetText 4842 ld a,(SpellScrollInventoryNumber) 4843 sub a,464844 ld h,04845 ld l,a4846 ld de,164847 call MultiplyHlWithDE 4848 ld de,EarthSpellLevel14849 add hl,de4851 ld b,073+00 4852 ld c,147+00 4854 call SetText 4855 ret4858SetLearningStoneGraphics:4859 ld hl,$4000 + (000*128) + (000/2) - 1284860 ld de,$0000 + (024*128) + (020/2) - 1284861 ld bc,$0000 + (148*256) + (162/2)4862 ld a,ScrollBlock 4863 call CopyRamToVramCorrectedCastleOverview 4865 ld hl,$4000 + (139*128) + (044/2) - 1284866 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1284867 ld bc,$0000 + (060*256) + (104/2)4868 ld a,DefeatBlock 4869 call CopyRamToVramCorrectedCastleOverview 4871 ld hl,$4000 + (000*128) + (210/2) - 1284872 ld de,$0000 + ((024+19)*128) + ((020+60)/2) - 1284873 ld bc,$0000 + (068*256) + (038/2)4874 ld a,DefeatBlock 4875 jp CopyRamToVramCorrectedCastleOverview 4877SetScrollGraphics:4878 ld hl,$4000 + (000*128) + (000/2) - 1284879 ld de,$0000 + (024*128) + (020/2) - 1284880 ld bc,$0000 + (148*256) + (162/2)4881 ld a,ScrollBlock 4882 jp CopyRamToVramCorrectedCastleOverview 4884DisplayQuickTipsCode:4885 call SetQuickTipsButtons4886 halt4887 halt4888 halt4889 halt4890 call SetPlayerStartTurnGraphics 4892 if Promo?4893 ld a,(QuickTipsNumber)4894 inc a4895 cp LastQuickTip4896 jr nz,.EndCheckLastQuickTip4897 xor a4898 .EndCheckLastQuickTip:4899 ld (QuickTipsNumber),a4900 else4901 ld a,r4902 endif4904 push af 4905 call SetQuickTipsText4906 call SwapAndSetPage 4907 call SetPlayerStartTurnGraphics 4908 pop af 4909 call SetQuickTipsText4911 .engine: 4912 call SwapAndSetPage 4913 call PopulateControls 49154920 ld a,(NewPrContr)4921 bit 5,a 4922 ret nz4924 4925 ld ix,GenericButtonTable4926 call CheckButtonInteractionControlsNotOnInt4928 call .CheckButtonClicked 4930 ld ix,GenericButtonTable4931 call SetGenericButtons 4933 call .CheckEndWindow 4935 halt4936 jp .engine4938 .CheckButtonClicked:4939 ret nc4941 ld a,(DisplayQuickTips?)4942 xor 14943 ld (DisplayQuickTips?),a4944 ld hl,QuicktipsOff4945 jr z,.SetQuicktipsOnOff4946 ld hl,QuicktipsOn4947 .SetQuicktipsOnOff:4948 ld de,GenericButtonTable+14949 ld bc,64950 ldir4951 ret4953 .CheckEndWindow:4954 ld a,(NewPrContr)4955 bit 4,a 4956 ret z4958 ld a,(spat+0) 4959 cp 046 4960 jr c,.Exit4961 cp 046+095 4962 jr nc,.Exit4963 4964 ld a,(spat+1) 4966 add a,064968 cp 030 4969 jr c,.Exit4970 cp 030+144 4971 ret c4973 .Exit:4974 pop af4975 ret4977TextDidYouKnow: db "Did you know ?",2554978TextShowTipsAtStart: db "Show tips at start of turn ?",2554980ListOfQuickTips: 4981 dw TextQuickTip1 ,TextQuickTip2 ,TextQuickTip3 ,TextQuickTip4 ,TextQuickTip5 ,TextQuickTip6 ,TextQuickTip7 ,TextQuickTip8 ,TextQuickTip9 ,TextQuickTip104982 dw TextQuickTip11,TextQuickTip12,TextQuickTip13,TextQuickTip14,TextQuickTip15,TextQuickTip16,TextQuickTip17,TextQuickTip18,TextQuickTip19,TextQuickTip204983 dw TextQuickTip21,TextQuickTip22,TextQuickTip23,TextQuickTip24,TextQuickTip25,TextQuickTip26,TextQuickTip27,TextQuickTip28,TextQuickTip29,TextQuickTip304984 dw TextQuickTip31,TextQuickTip32,TextQuickTip33,TextQuickTip34,TextQuickTip35,TextQuickTip36,TextQuickTip37,TextQuickTip38,TextQuickTip39,TextQuickTip404985 dw TextQuickTip41,TextQuickTip42,TextQuickTip43,TextQuickTip44,TextQuickTip45,TextQuickTip46,TextQuickTip47,TextQuickTip48,TextQuickTip49,TextQuickTip504986 4987TotalAmountOfQuickTips: equ 504990SetQuickTipsText:49914992 push af 4994 ld b,069+00 4995 ld c,053+00 4996 ld hl,TextDidYouKnow4997 call SetText 4999 ld a,QuickTipsBlock 5000 call block34 5002 pop af 5003 ld b,05004 ld c,a5005 ld de,TotalAmountOfQuickTips 5006 call DivideBCbyDE 5007 add hl,hl5008 ld de,ListOfQuickTips5009 add hl,de5010 ld e,(hl)5011 inc hl5012 ld d,(hl)5013 ex de,hl50155017 ld b,038+00 5018 ld c,064+00 5019 call SetText 5021 ld b,047+00 5022 ld c,115+00 5023 ld hl,TextShowTipsAtStart 5024 call SetText 5026 ld a,CastleOverviewCodeBlock 5027 call block1234 5028 ret5030SetQuickTipsButtons:5031 ld hl,QuickTipsButtonTable-25032 ld de,GenericButtonTable-25033 ld bc,2+(GenericButtonTableLenghtPerButton*01)5034 ldir5035 ret5037QuicktipsOn: dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 1285038QuicktipsOff: dw $4000 + (057*128) + (158/2) - 128 | dw $4000 + (069*128) + (158/2) - 128 | dw $4000 + (081*128) + (158/2) - 1285040QuickTipsButtonTableGfxBlock: db PlayerStartTurnBlock5041QuickTipsButtonTableAmountOfButtons: db 015042QuickTipsButtonTable: 5043 db %1100 0011 | dw $4000 + (057*128) + (144/2) - 128 | dw $4000 + (069*128) + (144/2) - 128 | dw $4000 + (081*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5045.Button1Ytop: equ 1225046.Button1YBottom: equ .Button1Ytop + 0125047.Button1XLeft: equ 0965048.Button1XRight: equ .Button1XLeft + 0145055CopyInactivePageToActivePage:5056 ld a,(activepage)5057 or a5058 ld hl,CopyPage1To05059 jp z,DoCopy5060 ld hl,CopyPage0To1PlayingField5061 jp DoCopy5062 5064DisplayStartOfTurnMessageCode:5065call ScreenOn5066 call SetPlayerStartTurnVButton5067 5068 call SetPlayerStartTurnGraphics 5069 call SetPlayerStartTurnText5070 call CopyInactivePageToActivePage50725075 ld bc,SFX_StartOfTurn5076 call RePlayerSFX_PlayCh1 5077 .engine: 5078 call SwapAndSetPage 5079 call PopulateControls 50815086 ld a,(Controls)5087 bit 5,a 5088 ret nz5090 5091 ld ix,GenericButtonTable5092 call CheckButtonInteractionControlsNotOnInt5094 call .CheckButtonClicked 5096 ld ix,GenericButtonTable5097 call SetGenericButtons 50995101 halt5102 jp .engine5104 .CheckButtonClicked:5105 ret nc5106 pop af5107 ret5109TextDate: db "Day:   Week:   Month:",2555110TextPlayerTurn: db "Player  's turn",2555112TextRemainingDaysForCampaign:5113 db "Remaining days to complete",2545114 db "     Campaign:",2555116CampaignFailedText: db "Mission failed. The campaign",2545117 db "was not finished in time.",2555119CampaignFinishedText: db "You have successfully completed",2545120 db "the campaign.",2545121 db " ",2545122 db "Return to the main menu and",2545123 db "prepare for your next challenge.",2555125SetPlayerStartTurnText:5126 call SetCastleOverViewFontPage0Y212 5128 ld b,056+00 5129 ld c,053+00 5130 ld hl,TextDate 5131 call SetText 5133 5134 ld bc,(Date)5135 ld de,7 5136 call DivideBCbyDE 5137 inc hl 5138 ld b,069+04 5139 ld c,053+00 5140 call SetNumber16BitCastle5142 5143 ld bc,(Date)5144 ld de,7 5145 call DivideBCbyDE 5147 5148 ld de,4 5149 call DivideBCbyDE 5150 push bc 5151 inc hl5152 ld b,104+04 5153 ld c,053+00 5154 call SetNumber16BitCastle5156 5157 pop hl5158 inc hl5159 ld b,142+04 5160 ld c,053+00 5161 call SetNumber16BitCastle5163ld a,(date)5164ld b,a5165ld a,(date+1)5166or a5167jr nz,.notzero5168ld a,2051695170ld a,7051715172.notzero:5175 ld a,(CampaignMode?)5176 or a5177 jr z,.ScenarioMode5179 ld a,(CampaignFinished?)5180 or a5181 jr nz,CampaignFinished5183 5184 ld b,050+00 5185 ld c,091+00 5186 ld hl,TextRemainingDaysForCampaign5187 call SetText 5189 ld a,(DaysToCompleteCampaign)5190 ld l,a5191 ld h,05192 ld de,(Date)5193 xor a5194 dec hl5195 sbc hl,de5196 jr nc,.StillTimeLeft5198 .OutOfTime:5199 ld hl,05200 ld b,118+00 5201 ld c,098+00 5202 call SetNumber16BitCastle5204 5205 ld b,040+00 5206 ld c,070+00 5207 ld hl,CampaignFailedText5208 call SetText 5209 ret5211 .StillTimeLeft:5212 inc hl5213 ld b,118+00 5214 ld c,098+00 5215 call SetNumber16BitCastle5217 5218 ld b,040+00 5219 ld c,070+00 5220 ld hl,CampaignText5221 call SetText 5222 ret5224 .ScenarioMode:5225 5226 ld b,075+00 5227 ld c,091+00 5228 ld hl,TextPlayerTurn 5229 call SetText 5231 ld a,(whichplayernowplaying?)5232 ld h,05233 ld l,a5234 ld b,095+06 5235 ld c,091+00 5236 call SetNumber16BitCastle5237 ret5239CampaignFinished:5240 ld b,040+00 5241 ld c,070+00 5242 ld hl,CampaignFinishedText5243 call SetText 5244 ret5246SetPlayerStartTurnGraphics:5247 ld hl,$4000 + (000*128) + (000/2) - 1285248 ld de,$0000 + (046*128) + (030/2) - 1285249 ld bc,$0000 + (095*256) + (144/2)5250 ld a,PlayerStartTurnBlock 5251 jp CopyRamToVramCorrectedCastleOverview 5253SetPlayerStartTurnVButton:5254 ld hl,PlayerStartTurnVButtonTable-25255 ld de,GenericButtonTable-25256 ld bc,2+(GenericButtonTableLenghtPerButton*01)5257 ldir5258 ret5260PlayerStartTurnVButtonTableGfxBlock: db PlayerStartTurnBlock5261PlayerStartTurnVButtonTableAmountOfButtons: db 015262PlayerStartTurnVButtonTable: 5263 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 5265.Button1Ytop: equ 1145266.Button1YBottom: equ .Button1Ytop + 0195267.Button1XLeft: equ 0925268.Button1XRight: equ .Button1XLeft + 0205273TradeMenuCode:5274 ld bc,SFX_TradeMenu5275 call RePlayerSFX_PlayCh15277 ld a,3 5279 ld (ChangeManaAndMovement?),a 5281 ld a,255 5282 ld (PreviousButtonClicked),a5283 ld (PreviousButton2Clicked),a5284 5285 ld ix,GenericButtonTable5286 ld (PreviousButtonClickedIX),ix5288 ld ix,GenericButtonTable25289 ld (PreviousButton2ClickedIX),ix5291 call SetTradingHeroesArmyButtons5292 call SetTradingHeroesInventoryButtons5293 call SetHeroArmyTransferGraphics 5294 call SetTradingHeroesAndArmy5295 call SetTradingHeroesInventoryIcons5296 call SwapAndSetPage 5297 call SetHeroArmyTransferGraphics 5298 call SetTradingHeroesAndArmy5299 call SetTradingHeroesInventoryIcons5301 .engine: 5302 call SwapAndSetPage 5303 call PopulateControls 53055310 ld a,(Controls)5311 bit 5,a 5312 ret nz5314 call UpdateHUd5315 ld a,15316 ld (GameStatus),a 5318 5319 ld ix,GenericButtonTable25320 call CheckButtonInteractionControlsNotOnInt5322 call .CheckButtonClickedTradingHeroesInventory 5324 5325 ld ix,(PreviousButton2ClickedIX) 5326 ld a,(ix+GenericButtonStatus)5327 push af5328 ld a,(PreviousButton2Clicked)5329 cp 2555330 jr z,.EndMarkButton2 5331 ld (ix+GenericButtonStatus),%1010 00115332 .EndMarkButton2:5333 5335 ld ix,GenericButtonTable25336 call SetGenericButtons 5338 5339 pop af5340 ld ix,(PreviousButton2ClickedIX) 5341 ld (ix+GenericButtonStatus),a5342 5347 5348 ld ix,GenericButtonTable 5349 call CheckButtonInteractionControlsNotOnInt5351 call .CheckButtonClickedTradingHeroesArmy 5353 5354 ld ix,(PreviousButtonClickedIX) 5355 ld a,(ix+GenericButtonStatus)5356 push af5357 ld a,(PreviousButtonClicked)5358 cp 2555359 jr z,.EndMarkButton 5360 ld (ix+GenericButtonStatus),%1001 00115361 .EndMarkButton:5362 5364 ld ix,GenericButtonTable5365 call SetGenericButtons 5367 5368 pop af5369 ld ix,(PreviousButtonClickedIX) 5370 ld (ix+GenericButtonStatus),a5371 5378 call CheckEndTradeMenuWindow 5380 halt5381 jp .engine5385.CheckButtonClickedTradingHeroesInventory:5386 ret nc 5388 ld a,2555389 ld (PreviousButtonClicked),a5392 5397 5398 ld a,(PreviousButton2Clicked)5399 cp b5400 jr nz,.EndCheck1b5401 ld a,2555402 ld (PreviousButton2Clicked),a5403 ret5404 .EndCheck1b:5406 5407 ld a,(PreviousButton2Clicked)5408 cp 255 5409 jr nz,.EndCheck2b5411 ld a,b 5412 cp 65413 jp nc,.CheckTradingHero 5415 .CheckHeroWeTradeWith:5416 push ix5417 ld ix,(HeroWeTradeWith) 5418 ld a,65419 sub a,b 5420 ld d,05421 ld e,a5422 add ix,de 5424 ld a,(ix+HeroInventory+9) 5425 cp 045 5426 pop ix5427 ret z5428 jp .HighlightNewButton2 5429 5430 .CheckTradingHero: 5431 push ix5432 ld ix,(plxcurrentheroAddress) 5433 ld a,125434 sub a,b 5435 ld d,05436 ld e,a5437 add ix,de 5439 ld a,(ix+HeroInventory+9) 5440 cp 045 5441 pop ix5442 ret z5443 jp .HighlightNewButton2 5444 .EndCheck2b:5446 5447 ld d,b 5448 call .SetInventorySlotOfHeroInIX 5449 ld c,(ix+HeroInventory+9) 5451 ld a,(PreviousButton2Clicked)5452 ld d,a5453 call .SetInventorySlotOfHeroInIX 5454 ld d,(ix+HeroInventory+9) 5455 ld (ix+HeroInventory+9),c 5456 ld c,d5458 ld d,b 5459 call .SetInventorySlotOfHeroInIX 5460 ld (ix+HeroInventory+9),c 5462 pop af5463 jp TradeMenuCode5465 .HighlightNewButton2:5466 ld a,b 5467 ld (PreviousButton2Clicked),a5468 ld (PreviousButton2ClickedIX),ix5469 ret5471.SetInventorySlotOfHeroInIX:5472 ld a,d5473 cp 75474 jp nc,.TradingHero 5476 .HeroWeTradeWith:5477 ld ix,(HeroWeTradeWith) 5478 ld a,65479 sub a,d5480 ld d,05481 ld e,a5482 add ix,de 5483 ret5484 5485 .TradingHero: 5486 ld ix,(plxcurrentheroAddress) 5487 ld a,125488 sub a,d5489 ld d,05490 ld e,a5491 add ix,de 5492 ret5495.CheckButtonClickedTradingHeroesArmy: 5496 ret nc 5498 ld a,2555499 ld (PreviousButton2Clicked),a5501 5506 5507 ld a,(PreviousButtonClicked)5508 cp b5509 jr nz,.EndCheck15510 ld a,2555511 ld (PreviousButtonClicked),a5512 ret5513 .EndCheck1:5515 5516 ld a,(PreviousButtonClicked)5517 cp 255 5518 jr nz,.EndCheck25520 ld a,b 5521 cp 85522 jp c,.CheckVisitingHero 5524 .CheckDefendingHero:5525 ld c,254 5526 push bc5527 push ix55285529 ld ix,(plxcurrentheroAddress) 5531 pop ix5532 pop bc55335535 ld a,b 5536 cp 145537 jp z,.HighlightNewButton 5539 ld b,a5540 ld a,135541 sub a,b 5542 ld d,05543 ld e,a5545 ld c,254 5546 push bc5547 push ix5548 push de55495550 ld ix,(plxcurrentheroAddress) 5551 pop de5553 add ix,de 5554 add ix,de 5555 add ix,de 5557 ld a,(ix+HeroUnits+1) 5558 cp (ix+HeroUnits+2) 5559 pop ix5560 pop bc5561 ret z5562 5563 jp .HighlightNewButton 5564 5565 .CheckVisitingHero:5566 ld c,002 5567 push bc5568 push ix55695570 ld ix,(HeroWeTradeWith) 5571 pop ix5572 pop bc55735575 ld a,b 5576 cp 075577 jp z,.HighlightNewButton 5579 ld b,a5580 ld a,065581 sub a,b 5582 ld d,05583 ld e,a5585 ld c,002 5586 push bc5587 push ix5588 push de55895590 ld ix,(HeroWeTradeWith) 5591 pop de5593 add ix,de 5594 add ix,de 5595 add ix,de 5597 ld a,(ix+HeroUnits+1) 5598 cp (ix+HeroUnits+2) 5599 pop ix5600 pop bc5601 ret z5602 5603 jp .HighlightNewButton 5604 .EndCheck2:5606 56085610561656185621562456265628 ld c,002 5629 push bc5630 push ix56315632 ld ix,(HeroWeTradeWith) 5634 pop ix5635 pop bc56365637 ld c,254 5638 push bc5639 push ix56405641 ld ix,(plxcurrentheroAddress) 5643 pop ix5644 pop bc56455647 ld a,(PreviousButtonClicked)5648 cp 014 5649 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero5650 ld a,b 5651 cp 7 5652 jr z,.SwapVisitingHeroWithDefendingHero5653 .EndCheckPreviousButtonClickedWasDefendingHero:5654 5655 ld a,(PreviousButtonClicked)5656 cp 007 5657 jr nz,.EndCheck45658 ld a,b 5659 cp 014 5660 jr nz,.EndCheck45662 .SwapVisitingHeroWithDefendingHero:5663 ld c,002 5664 push bc5665 push ix56665667 ld ix,(HeroWeTradeWith) 5669 push ix 5670 ld c,254 5672 ld ix,(plxcurrentheroAddress) 5674 ld (ix+HeroStatus),002 5675 pop ix 5676 ld (ix+HeroStatus),254 5677 pop ix5678 pop bc5679 pop af 5681 jp .ExitVisitingAndDefendingArmyRoutine5682 .EndCheck4:56845686 ld a,(PreviousButtonClicked)5687 cp 014 5688 jr nz,.EndCheck55689 ld a,b 5690 cp 7 5691 jr nz,.EndCheck55692 5693 .ChangeDefendingHeroIntoVisitingHero:5694 ld c,254 5695 push bc5696 push ix56975698 ld ix,(plxcurrentheroAddress) 5700 ld (ix+HeroStatus),002 5701 pop ix5702 pop bc 5703 pop af 5704 jp .ExitVisitingAndDefendingArmyRoutine5705 .EndCheck5:57075709 ld a,(PreviousButtonClicked)5710 cp 007 5711 jr nz,.EndCheck65712 ld a,b 5713 cp 014 5714 jr nz,.EndCheck65716 .ChangeVisitingHeroIntoDefendingHero:5717 ld c,002 5718 push bc5719 push ix57205721 ld ix,(HeroWeTradeWith) 5723 ld (ix+HeroStatus),254 5724 pop ix5725 pop bc 5726 pop af 5727 jp .ExitVisitingAndDefendingArmyRoutine5728 .EndCheck6:57305731 ld a,(PreviousButtonClicked) 5732 cp 014 5733 jr nz,.EndCheck75734 ld a,2555735 ld (PreviousButtonClicked),a5736 ret5737 .EndCheck7:57395740 ld a,(PreviousButtonClicked) 5741 cp 007 5742 jr nz,.EndCheck85743 ld a,2555744 ld (PreviousButtonClicked),a5745 ret5746 .EndCheck8:57485750 ld a,b 5751 cp 14 5752 jp z,.ResetButtons5753 cp 07 5754 jp z,.ResetButtons5755 ld a,(PreviousButtonClicked)5756 cp 14 5757 jp z,.ResetButtons5758 cp 07 5759 jp z,.ResetButtons57615763 ld a,b 5764 cp 85765 jp nc,.EndCheck95766 ld a,(PreviousButtonClicked)5767 cp 85768 jp nc,.EndCheck95770 ld a,065771 sub a,b 5772 ld d,05773 ld e,a5775 ld c,002 5776 push bc5777 push ix5778 push de57795780 ld ix,(HeroWeTradeWith) 5782 pop de5784 add ix,de 5785 add ix,de 5786 add ix,de 5788 ld a,(ix+HeroUnits+1) 5789 or (ix+HeroUnits+2) 5790 pop ix5791 pop bc5792 jp nz,.EndCheck95793 5795 5796 ld a,(PreviousButtonClicked)5797 ld c,a5798 ld a,065799 sub a,c5800 ld d,05801 ld e,a5803 ld c,002 5804 push bc5805 push ix5806 push de58075808 ld ix,(HeroWeTradeWith) 5810 pop de5812 add ix,de 5813 add ix,de 5814 add ix,de 5816 ld l,(ix+HeroUnits+1) 5817 ld h,(ix+HeroUnits+2) 5818 dec hl5819 ld (ix+HeroUnits+1),l 5820 ld (ix+HeroUnits+2),h 5821 ld l,(ix+HeroUnits+0) 5823 ld a,(ix+HeroUnits+1) 5824 or (ix+HeroUnits+2) 5825 jr nz,.EndCheckZero5826 ld (ix+HeroUnits+0),0 5827 .EndCheckZero:5828 pop ix5829 pop bc5830 5832 5833 ld a,065834 sub a,b 5835 ld d,05836 ld e,a5838 ld c,002 5839 push bc5840 push ix5841 push de58425843 ld ix,(HeroWeTradeWith) 5845 pop de5847 add ix,de 5848 add ix,de 5849 add ix,de 5851 ld (ix+HeroUnits+0),l 5852 ld (ix+HeroUnits+1),1 5853 ld (ix+HeroUnits+2),0 5854 pop ix5855 pop bc5856 5858 pop af 5859 jp .ExitVisitingAndDefendingArmyRoutine5860 .EndCheck9:58625863 ld a,b 5864 cp 85865 jp c,.EndCheck9b5866 ld a,(PreviousButtonClicked)5867 cp 85868 jp c,.EndCheck9b5870 ld a,135871 sub a,b 5872 ld d,05873 ld e,a5875 ld c,254 5876 push bc5877 push ix5878 push de58795880 ld ix,(plxcurrentheroAddress) 5882 pop de5884 add ix,de 5885 add ix,de 5886 add ix,de 5888 ld a,(ix+HeroUnits+1) 5889 or (ix+HeroUnits+2) 5890 pop ix5891 pop bc5892 jp nz,.EndCheck9b5893 5895 5896 ld a,(PreviousButtonClicked)5897 ld c,a5898 ld a,135899 sub a,c5900 ld d,05901 ld e,a5903 ld c,254 5904 push bc5905 push ix5906 push de59075908 ld ix,(plxcurrentheroAddress) 5910 pop de5912 add ix,de 5913 add ix,de 5914 add ix,de 5916 ld l,(ix+HeroUnits+1) 5917 ld h,(ix+HeroUnits+2) 5918 dec hl5919 ld (ix+HeroUnits+1),l 5920 ld (ix+HeroUnits+2),h 5921 ld l,(ix+HeroUnits+0) 5923 ld a,(ix+HeroUnits+1) 5924 or (ix+HeroUnits+2) 5925 jr nz,.EndCheckZerob5926 ld (ix+HeroUnits+0),0 5927 .EndCheckZerob:5928 pop ix5929 pop bc5930 5932 5933 ld a,135934 sub a,b 5935 ld d,05936 ld e,a5938 ld c,254 5939 push bc5940 push ix5941 push de59425943 ld ix,(plxcurrentheroAddress) 5945 pop de5947 add ix,de 5948 add ix,de 5949 add ix,de 5951 ld (ix+HeroUnits+0),l 5952 ld (ix+HeroUnits+1),1 5953 ld (ix+HeroUnits+2),0 5954 pop ix5955 pop bc5956 5958 pop af 5959 jp .ExitVisitingAndDefendingArmyRoutine5960 .EndCheck9b:59635965 ld a,b 5966 cp 85967 jp nc,.EndCheck105968 ld a,(PreviousButtonClicked)5969 cp 85970 jp nc,.EndCheck105972 ld a,065973 sub a,b 5974 ld d,05975 ld e,a5977 ld c,002 5978 push bc5979 push ix5980 push de59815982 ld ix,(HeroWeTradeWith) 5984 pop de5986 add ix,de 5987 add ix,de 5988 add ix,de 5990 ld l,(ix+HeroUnits+0) 5991 pop ix5992 pop bc5994 ld a,(PreviousButtonClicked)5995 ld c,a5996 ld a,065997 sub a,c 5998 ld d,05999 ld e,a6001 ld c,002 6002 push bc6003 push ix6004 push de60056006 ld ix,(HeroWeTradeWith) 6008 pop de6010 add ix,de 6011 add ix,de 6012 add ix,de 6014 ld a,(ix+HeroUnits+0) 6015 cp l6016 jp nz,.EndCheck10WithPopIXandBC6018 ld (ix+HeroUnits+0),0 6019 ld l,(ix+HeroUnits+1) 6020 ld h,(ix+HeroUnits+2) 6022 ld (ix+HeroUnits+1),0 6023 ld (ix+HeroUnits+2),0 6024 6025 6026 pop ix6027 pop bc6028 6029 ld a,066030 sub a,b 6031 ld d,06032 ld e,a6034 ld c,002 6035 push bc6036 push ix6037 push de60386039 ld ix,(HeroWeTradeWith) 6041 pop de6043 add ix,de 6044 add ix,de 6045 add ix,de 6047 ld e,(ix+HeroUnits+1) 6048 ld d,(ix+HeroUnits+2) 6049 add hl,de6051 ld (ix+HeroUnits+1),l 6052 ld (ix+HeroUnits+2),h 6054 pop ix6055 pop bc 6056 pop af 6057 jp .ExitVisitingAndDefendingArmyRoutine6059 .EndCheck10WithPopIXandBC:6060 pop ix6061 pop bc6062 .EndCheck10:60646065 ld a,b 6066 cp 86067 jp c,.EndCheck10b6068 ld a,(PreviousButtonClicked)6069 cp 86070 jp c,.EndCheck10b6072 ld a,136073 sub a,b 6074 ld d,06075 ld e,a6077 ld c,254 6078 push bc6079 push ix6080 push de60816082 ld ix,(plxcurrentheroAddress) 6084 pop de6086 add ix,de 6087 add ix,de 6088 add ix,de 6090 ld l,(ix+HeroUnits+0) 6091 pop ix6092 pop bc6095 ld a,(PreviousButtonClicked)6096 ld c,a6097 ld a,136098 sub a,c 6099 ld d,06100 ld e,a6102 ld c,254 6103 push bc6104 push ix6105 push de61066107 ld ix,(plxcurrentheroAddress) 6108 pop de6110 add ix,de 6111 add ix,de 6112 add ix,de 6114 ld a,(ix+HeroUnits+0) 6115 cp l6116 jp nz,.EndCheck10bWithPopIXandBC6118 ld (ix+HeroUnits+0),0 6119 ld l,(ix+HeroUnits+1) 6120 ld h,(ix+HeroUnits+2) 6122 ld (ix+HeroUnits+1),0 6123 ld (ix+HeroUnits+2),0 6124 6125 6126 pop ix6127 pop bc6128 6129 ld a,136130 sub a,b 6131 ld d,06132 ld e,a6134 ld c,254 6135 push bc6136 push ix6137 push de61386139 ld ix,(plxcurrentheroAddress) 6140 pop de6142 add ix,de 6143 add ix,de 6144 add ix,de 6146 ld e,(ix+HeroUnits+1) 6147 ld d,(ix+HeroUnits+2) 6148 add hl,de6150 ld (ix+HeroUnits+1),l 6151 ld (ix+HeroUnits+2),h 6153 pop ix6154 pop bc 6155 pop af 6156 jp .ExitVisitingAndDefendingArmyRoutine6158 .EndCheck10bWithPopIXandBC:6159 pop ix6160 pop bc6161 .EndCheck10b:61636166 ld c,002 6167 push bc6168 push ix61696170 ld ix,(HeroWeTradeWith) 6171 pop ix6172 pop bc61736175 ld c,254 6176 push bc6177 push ix61786179 ld ix,(plxcurrentheroAddress) 6180 pop ix6181 pop bc61826185 6186 ld c,002 6187 push bc6188 push ix61896190 ld ix,(HeroWeTradeWith) 6191 call CheckHeroHasAtLeast2CreatureSlotsFilled6192 pop ix6193 pop bc6194 jp c,.EndCheck11 6197 6198 ld a,b 6199 cp 86200 jp c,.EndCheck116202 6203 ld a,136204 sub a,b 6205 ld d,06206 ld e,a6208 ld c,254 6209 push bc6210 push ix6211 push de62126213 ld ix,(plxcurrentheroAddress) 6214 pop de6216 add ix,de 6217 add ix,de 6218 add ix,de 6220 ld a,(ix+HeroUnits+1) 6221 or (ix+HeroUnits+2) 6222 pop ix6223 pop bc6224 jp nz,.EndCheck116225 6227 6228 ld a,(PreviousButtonClicked)6229 ld c,a6230 ld a,066231 sub a,c6232 ld d,06233 ld e,a6235 ld c,002 6236 push bc6237 push ix6238 push de62396240 ld ix,(HeroWeTradeWith) 6241 pop de6243 add ix,de 6244 add ix,de 6245 add ix,de 6247 ld a,(ix+HeroUnits+0) 6248 ex af,af'6249 ld l,(ix+HeroUnits+1) 6250 ld h,(ix+HeroUnits+2) 6252 ld (ix+HeroUnits+0),0 6253 ld (ix+HeroUnits+1),0 6254 ld (ix+HeroUnits+2),0 6256 pop ix6257 pop bc6259 ld a,136260 sub a,b 6261 ld d,06262 ld e,a6264 ld c,254 6265 push bc6266 push ix6267 push de62686269 ld ix,(plxcurrentheroAddress) 6270 pop de6272 add ix,de 6273 add ix,de 6274 add ix,de 6276 ex af,af'6277 ld (ix+HeroUnits+0),a 6278 ld (ix+HeroUnits+1),l 6279 ld (ix+HeroUnits+2),h 6281 pop ix6282 pop bc6283 pop af 6284 jp .ExitVisitingAndDefendingArmyRoutine6285 6286 .EndCheck11:62886294 6295 ld c,254 6296 push bc6297 push ix62986299 ld ix,(plxcurrentheroAddress) 6300 call CheckHeroHasAtLeast2CreatureSlotsFilled6301 pop ix6302 pop bc6303 jp c,.EndCheck11b 6306 6307 ld a,b 6308 cp 86309 jp nc,.EndCheck11b6311 6312 ld a,066313 sub a,b 6314 ld d,06315 ld e,a6317 ld c,002 6318 push bc6319 push ix6320 push de63216322 ld ix,(HeroWeTradeWith) 6323 pop de6325 add ix,de 6326 add ix,de 6327 add ix,de 6329 ld a,(ix+HeroUnits+1) 6330 or (ix+HeroUnits+2) 6331 pop ix6332 pop bc6333 jp nz,.EndCheck11b6334 6336 6337 ld a,(PreviousButtonClicked)6338 ld c,a6339 ld a,136340 sub a,c6341 ld d,06342 ld e,a6344 ld c,254 6345 push bc6346 push ix6347 push de63486349 ld ix,(plxcurrentheroAddress) 6350 pop de6352 add ix,de 6353 add ix,de 6354 add ix,de 6356 ld a,(ix+HeroUnits+0) 6357 ex af,af'6358 ld l,(ix+HeroUnits+1) 6359 ld h,(ix+HeroUnits+2) 6361 ld (ix+HeroUnits+0),0 6362 ld (ix+HeroUnits+1),0 6363 ld (ix+HeroUnits+2),0 6365 pop ix6366 pop bc6368 ld a,066369 sub a,b 6370 ld d,06371 ld e,a6373 ld c,002 6374 push bc6375 push ix6376 push de63776378 ld ix,(HeroWeTradeWith) 6379 pop de6381 add ix,de 6382 add ix,de 6383 add ix,de 6385 ex af,af'6386 ld (ix+HeroUnits+0),a 6387 ld (ix+HeroUnits+1),l 6388 ld (ix+HeroUnits+2),h 6390 pop ix6391 pop bc6392 pop af 6393 jp .ExitVisitingAndDefendingArmyRoutine6394 6395 .EndCheck11b:63976399 6400 ld c,002 6401 push bc6402 push ix64036404 ld ix,(HeroWeTradeWith) 6405 call CheckHeroHasAtLeast2CreatureSlotsFilled6406 pop ix6407 pop bc6408 jp c,.EndCheck12 6411 6412 ld a,b 6413 cp 86414 jp c,.EndCheck126416 6417 ld a,(PreviousButtonClicked)6418 ld c,a6419 ld a,066420 sub a,c6421 ld d,06422 ld e,a6424 ld c,002 6425 push bc6426 push ix6427 push de64286429 ld ix,(HeroWeTradeWith) 6430 pop de6432 add ix,de 6433 add ix,de 6434 add ix,de 6435 ld l,(ix+HeroUnits+0) 6436 pop ix6437 pop bc6438 6439 ld a,136440 sub a,b 6441 ld d,06442 ld e,a6444 ld c,254 6445 push bc6446 push ix6447 push de64486449 ld ix,(plxcurrentheroAddress) 6450 pop de6452 add ix,de 6453 add ix,de 6454 add ix,de 6455 ld a,(ix+HeroUnits+0) 6456 cp l6457 pop ix6458 pop bc6459 jp nz,.EndCheck126460 6462 6463 ld a,(PreviousButtonClicked)6464 ld c,a6465 ld a,066466 sub a,c6467 ld d,06468 ld e,a6470 ld c,002 6471 push bc6472 push ix6473 push de64746475 ld ix,(HeroWeTradeWith) 6476 pop de6478 add ix,de 6479 add ix,de 6480 add ix,de 6482 ld l,(ix+HeroUnits+1) 6483 ld h,(ix+HeroUnits+2) 6485 ld (ix+HeroUnits+0),0 6486 ld (ix+HeroUnits+1),0 6487 ld (ix+HeroUnits+2),0 6489 pop ix6490 pop bc6492 ld a,136493 sub a,b 6494 ld d,06495 ld e,a6497 ld c,254 6498 push bc6499 push ix6500 push de65016502 ld ix,(plxcurrentheroAddress) 6503 pop de6505 add ix,de 6506 add ix,de 6507 add ix,de 6509 ld e,(ix+HeroUnits+1) 6510 ld d,(ix+HeroUnits+2) 6511 add hl,de6512 ld (ix+HeroUnits+1),l 6513 ld (ix+HeroUnits+2),h 6515 pop ix6516 pop bc6517 pop af 6518 jp .ExitVisitingAndDefendingArmyRoutine6519 6520 .EndCheck12:6521 65226524 ld c,254 6525 push bc6526 push ix65276528 ld ix,(plxcurrentheroAddress) 6529 call CheckHeroHasAtLeast2CreatureSlotsFilled6530 pop ix6531 pop bc6532 jp c,.EndCheck12b 6535 6536 ld a,b 6537 cp 86538 jp nc,.EndCheck12b6540 6541 ld a,(PreviousButtonClicked)6542 ld c,a6543 ld a,136544 sub a,c6545 ld d,06546 ld e,a6548 ld c,254 6549 push bc6550 push ix6551 push de65526553 ld ix,(plxcurrentheroAddress) 6554 pop de6556 add ix,de 6557 add ix,de 6558 add ix,de 6559 ld l,(ix+HeroUnits+0) 6560 pop ix6561 pop bc6562 6563 ld a,066564 sub a,b 6565 ld d,06566 ld e,a6568 ld c,002 6569 push bc6570 push ix6571 push de65726573 ld ix,(HeroWeTradeWith) 6574 pop de6576 add ix,de 6577 add ix,de 6578 add ix,de 6579 ld a,(ix+HeroUnits+0) 6580 cp l6581 pop ix6582 pop bc6583 jp nz,.EndCheck12b6584 6586 6587 ld a,(PreviousButtonClicked)6588 ld c,a6589 ld a,136590 sub a,c6591 ld d,06592 ld e,a6594 ld c,254 6595 push bc6596 push ix6597 push de65986599 ld ix,(plxcurrentheroAddress) 6600 pop de6602 add ix,de 6603 add ix,de 6604 add ix,de 6606 ld l,(ix+HeroUnits+1) 6607 ld h,(ix+HeroUnits+2) 6609 ld (ix+HeroUnits+0),0 6610 ld (ix+HeroUnits+1),0 6611 ld (ix+HeroUnits+2),0 6613 pop ix6614 pop bc6616 ld a,066617 sub a,b 6618 ld d,06619 ld e,a6621 ld c,002 6622 push bc6623 push ix6624 push de66256626 ld ix,(HeroWeTradeWith) 6627 pop de6629 add ix,de 6630 add ix,de 6631 add ix,de 6633 ld e,(ix+HeroUnits+1) 6634 ld d,(ix+HeroUnits+2) 6635 add hl,de6636 ld (ix+HeroUnits+1),l 6637 ld (ix+HeroUnits+2),h 6639 pop ix6640 pop bc6641 pop af 6642 jp .ExitVisitingAndDefendingArmyRoutine6643 6644 .EndCheck12b:66466648 6649 ld a,b 6650 call .SetHeroUnitsInIX6652 ld a,(ix+HeroUnits+0) 6653 ex af,af'6654 ld l,(ix+HeroUnits+1) 6655 ld h,(ix+HeroUnits+2) 6657 ld a,l6658 or h6659 jp z,.ResetButtons 6660 exx6662 ld a,(PreviousButtonClicked) 6663 call .SetHeroUnitsInIX6665 ld a,(ix+HeroUnits+0) 6666 ex af,af'6667 ld (ix+HeroUnits+0),a 6668 ld l,(ix+HeroUnits+1) 6669 ld h,(ix+HeroUnits+2) 6671 ld a,l6672 or h6673 jp z,.ResetButtons 6675 exx6676 ld (ix+HeroUnits+1),l 6677 ld (ix+HeroUnits+2),h 6679 ld a,b 6680 call .SetHeroUnitsInIX6681 ex af,af'6682 ld (ix+HeroUnits+0),a 6683 exx6684 ld (ix+HeroUnits+1),l 6685 ld (ix+HeroUnits+2),h 6686 6687 pop af 6688 jp .ExitVisitingAndDefendingArmyRoutine6689 6690 .EndCheck13:6691 6692 .HighlightNewButton:6693 ld a,b 6694 ld (PreviousButtonClicked),a6695 ld (PreviousButtonClickedIX),ix6696 ret6698 .ResetButtons:6699 ld a,255 6700 ld (PreviousButtonClicked),a6701 ret6703.SetHeroUnitsInIX:6704 cp 86705 jp c,.VisitingHero6707 .DefendingHero:6708 ld c,a6709 ld a,136710 sub a,c 6711 ld d,06712 ld e,a6714 ld c,254 6715 push bc6716 push de67176718 ld ix,(plxcurrentheroAddress) 6719 pop de6720 pop bc6721 add ix,de 6722 add ix,de 6723 add ix,de 6724 ret6725 6726 .VisitingHero: 6727 ld c,a6728 ld a,066729 sub a,c 6730 ld d,06731 ld e,a6733 ld c,002 6734 push bc6735 push de67366737 ld ix,(HeroWeTradeWith) 6738 pop de6739 pop bc6740 add ix,de 6741 add ix,de 6742 add ix,de 6743 ret6746.ExitVisitingAndDefendingArmyRoutine: 6747 ld a,255 6748 ld (PreviousButtonClicked),a6749 call SetCastleOverViewFontPage0Y212 6757 call SetHeroArmyTransferGraphics 6758 call SetTradingHeroesAndArmy6759 call SetTradingHeroesInventoryIcons6760 call SwapAndSetPage 6761 call SetHeroArmyTransferGraphics 6762 call SetTradingHeroesInventoryIcons6763 call SetTradingHeroesAndArmy6764 jp .engine6823CheckEndTradeMenuWindow:6824 ld a,(NewPrContr)6825 bit 4,a 6826 ret z6828 ld a,(spat+0) 6829 cp 030 6830 jr c,.Exit6831 cp 030+137 6832 jr nc,.Exit6833 6834 ld a,(spat+1) 6836 add a,066838 cp 024 6839 jr c,.Exit6840 cp 024+156 6841 ret c6843 .Exit:6844 pop af6845 ret6854SetTradingHeroesInventoryButtons:6855 ld hl,TradingHeroesInventoryButtonTable-26856 ld de,GenericButtonTable2-26857 ld bc,2+(GenericButtonTableLenghtPerButton*12)6858 ldir6860 .CreateInventoryListTradingHeroes: 6861 ld ix,(plxcurrentheroAddress)6862 ld de,9 6863 add ix,de6865 ld iy,GenericButtonTable2+16866 ld b,6 6867 call .loop6870 ld ix,(HeroWeTradeWith)6871 ld de,9 6872 add ix,de6874 ld b,6 6875 .loop:6876 ld a,(ix+HeroInventory) 6877 call SetTradingHeroesInventoryIcons.CheckScrollIcon 6878 add a,a 6879 add a,a 6880 ld d,06881 ld e,a6882 ld hl,SetTradingHeroesInventoryIcons.InventoryIconTableSYSX6883 add hl,de6884 ld a,(hl)6885 ld (iy+0),a6886 inc hl6887 ld a,(hl)6888 ld (iy+1),a6889 inc hl6890 ld a,(hl)6891 ld (iy+2),a6892 inc hl6893 ld a,(hl)6894 ld (iy+3),a6895 ld de,GenericButtonTableLenghtPerButton6896 add iy,de 6897 inc ix 6898 djnz .loop6899 ret6903TradingHeroesInventoryButtonTableGfxBlock: db InventoryGraphicsBlock6904TradingHeroesInventoryButtonTableAmountOfButtons: db 126905TradingHeroesInventoryButtonTable: 6907 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 6908 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 6909 db %1100 0011 | dw $4000 + (021*128) + (170/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1286910 db %1100 0011 | dw $4000 + (180*128) + (100/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1286911 db %1100 0011 | dw $4000 + (050*128) + (050/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1286912 db %1100 0011 | dw $4000 + (060*128) + (060/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1286914 db %1100 0011 | dw $4000 + (040*128) + (040/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1286915 db %1100 0011 | dw $4000 + (030*128) + (030/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1286916 db %1100 0011 | dw $4000 + (020*128) + (020/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1286917 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1286918 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1286919 db %1100 0011 | dw $4000 + (056*128) + (176/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (HeroOverViewInventoryIconButtonMouseClickedSY*128) + (HeroOverViewInventoryIconButtonMouseClickedSX/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1286921.Button1Ytop: equ 0776922.Button1YBottom: equ .Button1Ytop + 0206923.Button1XLeft: equ 0366924.Button1XRight: equ .Button1XLeft + 0206926.Button2Ytop: equ 0776927.Button2YBottom: equ .Button2Ytop + 0206928.Button2XLeft: equ 0586929.Button2XRight: equ .Button2XLeft + 0206931.Button3Ytop: equ 0776932.Button3YBottom: equ .Button3Ytop + 0206933.Button3XLeft: equ 0806934.Button3XRight: equ .Button3XLeft + 0206936.Button4Ytop: equ 0776937.Button4YBottom: equ .Button4Ytop + 0206938.Button4XLeft: equ 1026939.Button4XRight: equ .Button4XLeft + 0206941.Button5Ytop: equ 0776942.Button5YBottom: equ .Button5Ytop + 0206943.Button5XLeft: equ 1246944.Button5XRight: equ .Button5XLeft + 0206946.Button6Ytop: equ 0776947.Button6YBottom: equ .Button6Ytop + 0206948.Button6XLeft: equ 1466949.Button6XRight: equ .Button6XLeft + 0206953.Button7Ytop: equ 1416954.Button7YBottom: equ .Button7Ytop + 0206955.Button7XLeft: equ 0366956.Button7XRight: equ .Button7XLeft + 0206958.Button8Ytop: equ 1416959.Button8YBottom: equ .Button8Ytop + 0206960.Button8XLeft: equ 0586961.Button8XRight: equ .Button8XLeft + 0206963.Button9Ytop: equ 1416964.Button9YBottom: equ .Button9Ytop + 0206965.Button9XLeft: equ 0806966.Button9XRight: equ .Button9XLeft + 0206968.Button10Ytop: equ 1416969.Button10YBottom: equ .Button10Ytop + 0206970.Button10XLeft: equ 1026971.Button10XRight: equ .Button10XLeft + 0206973.Button11Ytop: equ 1416974.Button11YBottom: equ .Button11Ytop + 0206975.Button11XLeft: equ 1246976.Button11XRight: equ .Button11XLeft + 0206978.Button12Ytop: equ 1416979.Button12YBottom: equ .Button12Ytop + 0206980.Button12XLeft: equ 1466981.Button12XRight: equ .Button12XLeft + 0206990SetTradingHeroesArmyButtons:6991 ld hl,TradingHeroesButtonTable-26992 ld de,GenericButtonTable-26993 ld bc,2+(GenericButtonTableLenghtPerButton*14)6994 ldir6995 ret6997TradingHeroesButtonTableGfxBlock: db HeroArmyTransferGraphicsBlock6998TradingHeroesButtonTableAmountOfButtons: db 146999TradingHeroesButtonTable: 7001 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 7002 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 7003 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1287004 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1287005 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1287006 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1287007 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1287009 db %0100 0011 | dw $4000 + (000*128) + (156/2) - 128 | dw $4000 + (000*128) + (176/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1287010 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1287011 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1287012 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1287013 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1287014 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1287015 db %1100 0011 | dw $4000 + (034*128) + (156/2) - 128 | dw $4000 + (034*128) + (174/2) - 128 | dw $4000 + (034*128) + (192/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1287017.Button1Ytop: equ 0387018.Button1YBottom: equ .Button1Ytop + 0347019.Button1XLeft: equ 0327020.Button1XRight: equ .Button1XLeft + 0207022.Button2Ytop: equ 0407023.Button2YBottom: equ .Button2Ytop + 0307024.Button2XLeft: equ 0547025.Button2XRight: equ .Button2XLeft + 0187027.Button3Ytop: equ 0407028.Button3YBottom: equ .Button3Ytop + 0307029.Button3XLeft: equ 0747030.Button3XRight: equ .Button3XLeft + 0187032.Button4Ytop: equ 0407033.Button4YBottom: equ .Button4Ytop + 0307034.Button4XLeft: equ 0947035.Button4XRight: equ .Button4XLeft + 0187037.Button5Ytop: equ 0407038.Button5YBottom: equ .Button5Ytop + 0307039.Button5XLeft: equ 1147040.Button5XRight: equ .Button5XLeft + 0187042.Button6Ytop: equ 0407043.Button6YBottom: equ .Button6Ytop + 0307044.Button6XLeft: equ 1347045.Button6XRight: equ .Button6XLeft + 0187047.Button7Ytop: equ 0407048.Button7YBottom: equ .Button7Ytop + 0307049.Button7XLeft: equ 1547050.Button7XRight: equ .Button7XLeft + 0187054.Button8Ytop: equ 1027055.Button8YBottom: equ .Button8Ytop + 0347056.Button8XLeft: equ 0327057.Button8XRight: equ .Button8XLeft + 0207059.Button9Ytop: equ 1047060.Button9YBottom: equ .Button9Ytop + 0307061.Button9XLeft: equ 0547062.Button9XRight: equ .Button9XLeft + 0187064.Button10Ytop: equ 1047065.Button10YBottom: equ .Button10Ytop + 0307066.Button10XLeft: equ 0747067.Button10XRight: equ .Button10XLeft + 0187069.Button11Ytop: equ 1047070.Button11YBottom: equ .Button11Ytop + 0307071.Button11XLeft: equ 0947072.Button11XRight: equ .Button11XLeft + 0187074.Button12Ytop: equ 1047075.Button12YBottom: equ .Button12Ytop + 0307076.Button12XLeft: equ 1147077.Button12XRight: equ .Button12XLeft + 0187079.Button13Ytop: equ 1047080.Button13YBottom: equ .Button13Ytop + 0307081.Button13XLeft: equ 1347082.Button13XRight: equ .Button13XLeft + 0187084.Button14Ytop: equ 1047085.Button14YBottom: equ .Button14Ytop + 0307086.Button14XLeft: equ 1547087.Button14XRight: equ .Button14XLeft + 0187108SetTradingHeroesAndArmy:7109 call SetCastleOverViewFontPage0Y212 7111 call SetActiveTradingHero7112 call SetHeroWhoGetsTradeWith7113 call SetActiveTradingHeroArmyAndAmount7114 call SetHeroWhoGetsTradeWithArmyAndAmount7115 ret7123SetActiveTradingHero: 7124 ld ix,(plxcurrentheroAddress)7125 ld de,$0000 + (040*128) + (034/2) - 1287126 jp DoSetVisitingOrDefendingHero7127 7128SetHeroWhoGetsTradeWith: 7129 ld ix,(HeroWeTradeWith) 7130 ld de,$0000 + (104*128) + (034/2) - 1287131 jp DoSetVisitingOrDefendingHero7137SetActiveTradingHeroArmyAndAmount:7138 ld ix,(plxcurrentheroAddress)7141 call .army71427145 .amount:7146 ld l,(ix+HeroUnits+01)7147 ld h,(ix+HeroUnits+02)7148 ld b,0567149 ld c,0617150 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07152 ld l,(ix+HeroUnits+04)7153 ld h,(ix+HeroUnits+05)7154 ld b,0767155 ld c,0617156 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07158 ld l,(ix+HeroUnits+07)7159 ld h,(ix+HeroUnits+08)7160 ld b,0967161 ld c,0617162 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07164 ld l,(ix+HeroUnits+10)7165 ld h,(ix+HeroUnits+11)7166 ld b,1167167 ld c,0617168 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07170 ld l,(ix+HeroUnits+13)7171 ld h,(ix+HeroUnits+14)7172 ld b,1367173 ld c,0617174 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07176 ld l,(ix+HeroUnits+16)7177 ld h,(ix+HeroUnits+17)7178 ld b,1567179 ld c,0617180 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07181 ret7183 .army:7184 ld a,(ix+HeroUnits+00) 7185 call SetDefendingHeroArmyAndAmount.SetSYSX 7186 ld de,.DYDXDefendingHeroUnit1 7187 call CopyTransparantImage 7189 ld a,(ix+HeroUnits+03) 7190 call SetDefendingHeroArmyAndAmount.SetSYSX 7191 ld de,.DYDXDefendingHeroUnit2 7192 call CopyTransparantImage 7194 ld a,(ix+HeroUnits+06) 7195 call SetDefendingHeroArmyAndAmount.SetSYSX 7196 ld de,.DYDXDefendingHeroUnit3 7197 call CopyTransparantImage 7199 ld a,(ix+HeroUnits+09) 7200 call SetDefendingHeroArmyAndAmount.SetSYSX 7201 ld de,.DYDXDefendingHeroUnit4 7202 call CopyTransparantImage 7204 ld a,(ix+HeroUnits+12) 7205 call SetDefendingHeroArmyAndAmount.SetSYSX 7206 ld de,.DYDXDefendingHeroUnit5 7207 call CopyTransparantImage 7209 ld a,(ix+HeroUnits+15) 7210 call SetDefendingHeroArmyAndAmount.SetSYSX 7211 ld de,.DYDXDefendingHeroUnit6 7212 call CopyTransparantImage 7213 ret7215.DYDXDefendingHeroUnit1: equ 044*256 + 056 7216.DYDXDefendingHeroUnit2: equ 044*256 + 076 7217.DYDXDefendingHeroUnit3: equ 044*256 + 096 7218.DYDXDefendingHeroUnit4: equ 044*256 + 116 7219.DYDXDefendingHeroUnit5: equ 044*256 + 136 7220.DYDXDefendingHeroUnit6: equ 044*256 + 156 7222SetHeroWhoGetsTradeWithArmyAndAmount:7223 ld ix,(HeroWeTradeWith)7226 call .army72277230 .amount:7231 ld l,(ix+HeroUnits+01)7232 ld h,(ix+HeroUnits+02)7233 ld b,0567234 ld c,1257235 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07237 ld l,(ix+HeroUnits+04)7238 ld h,(ix+HeroUnits+05)7239 ld b,0767240 ld c,1257241 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07243 ld l,(ix+HeroUnits+07)7244 ld h,(ix+HeroUnits+08)7245 ld b,0967246 ld c,1257247 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07249 ld l,(ix+HeroUnits+10)7250 ld h,(ix+HeroUnits+11)7251 ld b,1167252 ld c,1257253 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07255 ld l,(ix+HeroUnits+13)7256 ld h,(ix+HeroUnits+14)7257 ld b,1367258 ld c,1257259 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07261 ld l,(ix+HeroUnits+16)7262 ld h,(ix+HeroUnits+17)7263 ld b,1567264 ld c,1257265 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs07266 ret7268 .army:7269 ld a,(ix+HeroUnits+00) 7270 call SetDefendingHeroArmyAndAmount.SetSYSX 7271 ld de,.DYDXVisitingHeroUnit1 7272 call CopyTransparantImage 7274 ld a,(ix+HeroUnits+03) 7275 call SetDefendingHeroArmyAndAmount.SetSYSX 7276 ld de,.DYDXVisitingHeroUnit2 7277 call CopyTransparantImage 7279 ld a,(ix+HeroUnits+06) 7280 call SetDefendingHeroArmyAndAmount.SetSYSX 7281 ld de,.DYDXVisitingHeroUnit3 7282 call CopyTransparantImage 7284 ld a,(ix+HeroUnits+09) 7285 call SetDefendingHeroArmyAndAmount.SetSYSX 7286 ld de,.DYDXVisitingHeroUnit4 7287 call CopyTransparantImage 7289 ld a,(ix+HeroUnits+12) 7290 call SetDefendingHeroArmyAndAmount.SetSYSX 7291 ld de,.DYDXVisitingHeroUnit5 7292 call CopyTransparantImage 7294 ld a,(ix+HeroUnits+15) 7295 call SetDefendingHeroArmyAndAmount.SetSYSX 7296 ld de,.DYDXVisitingHeroUnit6 7297 call CopyTransparantImage 7298 ret7300.DYDXVisitingHeroUnit1: equ 108*256 + 056 7301.DYDXVisitingHeroUnit2: equ 108*256 + 076 7302.DYDXVisitingHeroUnit3: equ 108*256 + 096 7303.DYDXVisitingHeroUnit4: equ 108*256 + 116 7304.DYDXVisitingHeroUnit5: equ 108*256 + 136 7305.DYDXVisitingHeroUnit6: equ 108*256 + 156 7335ExitVisitingAndDefendingArmyRoutine: 7336 ld a,255 7337 ld (PreviousButtonClicked),a7338 call SetCastleOverViewFontPage0Y212 7340 call SetVisitingAndDefendingHeroesAndArmyWindow 7341 call SetVisitingAndDefendingHeroesAndArmy7342 call SwapAndSetPage 7343 call SetVisitingAndDefendingHeroesAndArmyWindow 7344 call SetVisitingAndDefendingHeroesAndArmy7346 ld a,(AreWeInTavern1OrRecruit2?)7347 dec a7348 jp z,CastleOverviewTavernCode.engine7349 jp CastleOverviewRecruitCode.engine7352FirstLineintHeightCastleTavern: equ 1257353SecondLineintHeightCastleTavern: equ 16073557357SetCastleTavernInterruptHandler:7358 di7359 ld hl,CastleInterruptHandler 7360 ld ($38+1),hl 7361 ld a,$c3 7362 ld ($38),a7363 7364 ld a,(VDP_0) 7365 or 16 7366 ld (VDP_0),a 7367 out ($99),a7368 ld a,1287369 out ($99),a7371 ld a,FirstLineintHeightCastleTavern7372 ld (CurrentLineIntHeight),a7373 out ($99),a7374 ld a,19+128 7375 ei7376 out ($99),a 7377 ret7379CastleOverviewTavernCode:7380 call SetScreenOff7382 ld a,17383 ld (AreWeInTavern1OrRecruit2?),a7385 ld a,255 7386 ld (PreviousButtonClicked),a7387 ld ix,GenericButtonTable7388 ld (PreviousButtonClickedIX),ix7390 call SetTavernButtons7391 call SetDefendingAndVisitingHeroButtons7393 ld hl,InGamePalette7394 call SetPalette7396 xor a7397 ld (activepage),a 7398 7399 ld a,%1100 00117400 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 7401 xor a7402 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 7403 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 7404 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 7405 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 7406 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 7408 ld a,1327409 call SetExitButtonHeight7410 7411 call SetTavernGraphics 7412 call SetResourcesPlayer7413 call SetVisitingAndDefendingHeroesAndArmy7414 call SetTavernHeroes7416 ld hl,CopyPage1To07417 call docopy7419 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady7420 call docopy7422 call SetCastleTavernInterruptHandler7423 7424 .engine:7425 call SwapAndSetPage 7426 call PopulateControls 74287433 ld a,(Controls)7434 bit 5,a 7435 jp nz,CastleOverviewCode7437 7438 ld ix,CastleOverviewButtonTable 7439 call CheckButtonMouseInteractionCastle7441 ld ix,CastleOverviewButtonTable7442 call SetCastleButtons 7445 7446 ld ix,GenericButtonTable 7447 call CheckButtonInteractionControlsNotOnInt7449 call .CheckButtonClickedVisitingAndDefendingHeroesAndArmy 7451 7452 ld ix,(PreviousButtonClickedIX) 7453 ld a,(ix+GenericButtonStatus)7454 push af7455 ld a,(PreviousButtonClicked)7456 cp 2557457 jr z,.EndMarkButton 7458 ld (ix+GenericButtonStatus),%1001 00117459 .EndMarkButton:7460 7462 ld ix,GenericButtonTable7463 call SetGenericButtons 7465 7466 pop af7467 ld ix,(PreviousButtonClickedIX) 7468 ld (ix+GenericButtonStatus),a7469 7472 7474 7475 ld ix,GenericButtonTable2 7476 call CheckButtonInteractionControlsNotOnInt7477 call .CheckTavernButtonClicked 7479 ld ix,GenericButtonTable27480 call SetGenericButtons 7483 call WaitVblank7484 call SetScreenOn7485 jp .engine7487.CheckButtonClickedVisitingAndDefendingHeroesAndArmy: 7488 ret nc 7490 7495 7496 ld a,(PreviousButtonClicked)7497 cp b7498 jr nz,.EndCheck17499 ld a,2557500 ld (PreviousButtonClicked),a7501 ret7502 .EndCheck1:7504 7505 ld a,(PreviousButtonClicked)7506 cp 255 7507 jr nz,.EndCheck27509 ld a,b 7510 cp 87511 jp c,.CheckVisitingHero 7513 .CheckDefendingHero:7514 ld c,254 7515 push bc7516 push ix7517 call SetVisitingOrDefendingHeroInIX 7518 pop ix7519 pop bc7520 ret c 7522 ld a,b 7523 cp 147524 jp z,.HighlightNewButton 7526 ld b,a7527 ld a,137528 sub a,b 7529 ld d,07530 ld e,a7532 ld c,254 7533 push bc7534 push ix7535 push de7536 call SetVisitingOrDefendingHeroInIX 7537 pop de7539 add ix,de 7540 add ix,de 7541 add ix,de 7543 ld a,(ix+HeroUnits+1) 7544 cp (ix+HeroUnits+2) 7545 pop ix7546 pop bc7547 ret z7548 7549 jp .HighlightNewButton 7550 7551 .CheckVisitingHero:7552 ld c,002 7553 push bc7554 push ix7555 call SetVisitingOrDefendingHeroInIX 7556 pop ix7557 pop bc7558 ret c 7560 ld a,b 7561 cp 077562 jp z,.HighlightNewButton 7564 ld b,a7565 ld a,067566 sub a,b 7567 ld d,07568 ld e,a7570 ld c,002 7571 push bc7572 push ix7573 push de7574 call SetVisitingOrDefendingHeroInIX 7575 pop de7577 add ix,de 7578 add ix,de 7579 add ix,de 7581 ld a,(ix+HeroUnits+1) 7582 cp (ix+HeroUnits+2) 7583 pop ix7584 pop bc7585 ret z7586 7587 jp .HighlightNewButton 7588 .EndCheck2:7590 75927594760076027605760876107612 ld c,002 7613 push bc7614 push ix7615 call SetVisitingOrDefendingHeroInIX 7616 pop ix7617 pop bc7618 jr c,.EndCheck47619 ld c,254 7620 push bc7621 push ix7622 call SetVisitingOrDefendingHeroInIX 7623 pop ix7624 pop bc7625 jr c,.EndCheck47626 7627 ld a,(PreviousButtonClicked)7628 cp 014 7629 jr nz,.EndCheckPreviousButtonClickedWasDefendingHero7630 ld a,b 7631 cp 7 7632 jr z,.SwapVisitingHeroWithDefendingHero7633 .EndCheckPreviousButtonClickedWasDefendingHero:7634 7635 ld a,(PreviousButtonClicked)7636 cp 007 7637 jr nz,.EndCheck47638 ld a,b 7639 cp 014 7640 jr nz,.EndCheck47642 .SwapVisitingHeroWithDefendingHero:7643 ld c,002 7644 push bc7645 push ix7646 call SetVisitingOrDefendingHeroInIX 7647 push ix 7648 ld c,254 7649 call SetVisitingOrDefendingHeroInIX 7650 ld (ix+HeroStatus),002 7651 pop ix 7652 ld (ix+HeroStatus),254 7653 pop ix7654 pop bc7655 pop af 7657 jp ExitVisitingAndDefendingArmyRoutine7658 .EndCheck4:76607662 ld a,(PreviousButtonClicked)7663 cp 014 7664 jr nz,.EndCheck57665 ld a,b 7666 cp 7 7667 jr nz,.EndCheck57668 7669 .ChangeDefendingHeroIntoVisitingHero:7670 ld c,254 7671 push bc7672 push ix7673 call SetVisitingOrDefendingHeroInIX 7674 ld (ix+HeroStatus),002 7675 pop ix7676 pop bc 7677 pop af 7678 jp ExitVisitingAndDefendingArmyRoutine7679 .EndCheck5:76817683 ld a,(PreviousButtonClicked)7684 cp 007 7685 jr nz,.EndCheck67686 ld a,b 7687 cp 014 7688 jr nz,.EndCheck67690 .ChangeVisitingHeroIntoDefendingHero:7691 ld c,002 7692 push bc7693 push ix7694 call SetVisitingOrDefendingHeroInIX 7695 ld (ix+HeroStatus),254 7696 pop ix7697 pop bc 7698 pop af 7699 jp ExitVisitingAndDefendingArmyRoutine7700 .EndCheck6:77027703 ld a,(PreviousButtonClicked) 7704 cp 014 7705 jr nz,.EndCheck77706 ld a,2557707 ld (PreviousButtonClicked),a7708 ret7709 .EndCheck7:77117712 ld a,(PreviousButtonClicked) 7713 cp 007 7714 jr nz,.EndCheck87715 ld a,2557716 ld (PreviousButtonClicked),a7717 ret7718 .EndCheck8:77207722 ld a,b 7723 cp 14 7724 jp z,.ResetButtons7725 cp 07 7726 jp z,.ResetButtons7727 ld a,(PreviousButtonClicked)7728 cp 14 7729 jp z,.ResetButtons7730 cp 07 7731 jp z,.ResetButtons77337736 ld a,b 7737 cp 87738 jp nc,.EndCheck97739 ld a,(PreviousButtonClicked)7740 cp 87741 jp nc,.EndCheck97743 ld a,067744 sub a,b 7745 ld d,07746 ld e,a7748 ld c,002 7749 push bc7750 push ix7751 push de7752 call SetVisitingOrDefendingHeroInIX 7753 pop de7755 add ix,de 7756 add ix,de 7757 add ix,de 7759 ld a,(ix+HeroUnits+1) 7760 or (ix+HeroUnits+2) 7761 pop ix7762 pop bc7763 jp nz,.EndCheck97764 7766 7767 ld a,(PreviousButtonClicked)7768 ld c,a7769 ld a,067770 sub a,c7771 ld d,07772 ld e,a7774 ld c,002 7775 push bc7776 push ix7777 push de7778 call SetVisitingOrDefendingHeroInIX 7779 pop de7781 add ix,de 7782 add ix,de 7783 add ix,de 7785 ld l,(ix+HeroUnits+1) 7786 ld h,(ix+HeroUnits+2) 7787 dec hl7788 ld (ix+HeroUnits+1),l 7789 ld (ix+HeroUnits+2),h 7790 ld l,(ix+HeroUnits+0) 7792 ld a,(ix+HeroUnits+1) 7793 or (ix+HeroUnits+2) 7794 jr nz,.EndCheckZero7795 ld (ix+HeroUnits+0),0 7796 .EndCheckZero:7797 pop ix7798 pop bc7799 7801 7802 ld a,067803 sub a,b 7804 ld d,07805 ld e,a7807 ld c,002 7808 push bc7809 push ix7810 push de7811 call SetVisitingOrDefendingHeroInIX 7812 pop de7814 add ix,de 7815 add ix,de 7816 add ix,de 7818 ld (ix+HeroUnits+0),l 7819 ld (ix+HeroUnits+1),1 7820 ld (ix+HeroUnits+2),0 7821 pop ix7822 pop bc7823 7825 pop af 7826 jp ExitVisitingAndDefendingArmyRoutine7827 .EndCheck9:78297830 ld a,b 7831 cp 87832 jp c,.EndCheck9b7833 ld a,(PreviousButtonClicked)7834 cp 87835 jp c,.EndCheck9b7837 ld a,137838 sub a,b 7839 ld d,07840 ld e,a7842 ld c,254 7843 push bc7844 push ix7845 push de7846 call SetVisitingOrDefendingHeroInIX 7847 pop de7849 add ix,de 7850 add ix,de 7851 add ix,de 7853 ld a,(ix+HeroUnits+1) 7854 or (ix+HeroUnits+2) 7855 pop ix7856 pop bc7857 jp nz,.EndCheck9b7858 7860 7861 ld a,(PreviousButtonClicked)7862 ld c,a7863 ld a,137864 sub a,c7865 ld d,07866 ld e,a7868 ld c,254 7869 push bc7870 push ix7871 push de7872 call SetVisitingOrDefendingHeroInIX 7873 pop de7875 add ix,de 7876 add ix,de 7877 add ix,de 7879 ld l,(ix+HeroUnits+1) 7880 ld h,(ix+HeroUnits+2) 7881 dec hl7882 ld (ix+HeroUnits+1),l 7883 ld (ix+HeroUnits+2),h 7884 ld l,(ix+HeroUnits+0) 7886 ld a,(ix+HeroUnits+1) 7887 or (ix+HeroUnits+2) 7888 jr nz,.EndCheckZerob7889 ld (ix+HeroUnits+0),0 7890 .EndCheckZerob:7891 pop ix7892 pop bc7893 7895 7896 ld a,137897 sub a,b 7898 ld d,07899 ld e,a7901 ld c,254 7902 push bc7903 push ix7904 push de7905 call SetVisitingOrDefendingHeroInIX 7906 pop de7908 add ix,de 7909 add ix,de 7910 add ix,de 7912 ld (ix+HeroUnits+0),l 7913 ld (ix+HeroUnits+1),1 7914 ld (ix+HeroUnits+2),0 7915 pop ix7916 pop bc7917 7919 pop af 7920 jp ExitVisitingAndDefendingArmyRoutine7921 .EndCheck9b:79247926 ld a,b 7927 cp 87928 jp nc,.EndCheck107929 ld a,(PreviousButtonClicked)7930 cp 87931 jp nc,.EndCheck107933 ld a,067934 sub a,b 7935 ld d,07936 ld e,a7938 ld c,002 7939 push bc7940 push ix7941 push de7942 call SetVisitingOrDefendingHeroInIX 7943 pop de7945 add ix,de 7946 add ix,de 7947 add ix,de 7949 ld l,(ix+HeroUnits+0) 7950 pop ix7951 pop bc7953 ld a,(PreviousButtonClicked)7954 ld c,a7955 ld a,067956 sub a,c 7957 ld d,07958 ld e,a7960 ld c,002 7961 push bc7962 push ix7963 push de7964 call SetVisitingOrDefendingHeroInIX 7965 pop de7967 add ix,de 7968 add ix,de 7969 add ix,de 7971 ld a,(ix+HeroUnits+0) 7972 cp l7973 jp nz,.EndCheck10WithPopIXandBC7975 ld (ix+HeroUnits+0),0 7976 ld l,(ix+HeroUnits+1) 7977 ld h,(ix+HeroUnits+2) 7979 ld (ix+HeroUnits+1),0 7980 ld (ix+HeroUnits+2),0 7981 7982 7983 pop ix7984 pop bc7985 7986 ld a,067987 sub a,b 7988 ld d,07989 ld e,a7991 ld c,002 7992 push bc7993 push ix7994 push de7995 call SetVisitingOrDefendingHeroInIX 7996 pop de7998 add ix,de 7999 add ix,de 8000 add ix,de 8002 ld e,(ix+HeroUnits+1) 8003 ld d,(ix+HeroUnits+2) 8004 add hl,de8006 ld (ix+HeroUnits+1),l 8007 ld (ix+HeroUnits+2),h 8009 pop ix8010 pop bc 8011 pop af 8012 jp ExitVisitingAndDefendingArmyRoutine8014 .EndCheck10WithPopIXandBC:8015 pop ix8016 pop bc8017 .EndCheck10:80198020 ld a,b 8021 cp 88022 jp c,.EndCheck10b8023 ld a,(PreviousButtonClicked)8024 cp 88025 jp c,.EndCheck10b8027 ld a,138028 sub a,b 8029 ld d,08030 ld e,a8032 ld c,254 8033 push bc8034 push ix8035 push de8036 call SetVisitingOrDefendingHeroInIX 8037 pop de8039 add ix,de 8040 add ix,de 8041 add ix,de 8043 ld l,(ix+HeroUnits+0) 8044 pop ix8045 pop bc8048 ld a,(PreviousButtonClicked)8049 ld c,a8050 ld a,138051 sub a,c 8052 ld d,08053 ld e,a8055 ld c,254 8056 push bc8057 push ix8058 push de8059 call SetVisitingOrDefendingHeroInIX 8060 pop de8062 add ix,de 8063 add ix,de 8064 add ix,de 8066 ld a,(ix+HeroUnits+0) 8067 cp l8068 jp nz,.EndCheck10bWithPopIXandBC8070 ld (ix+HeroUnits+0),0 8071 ld l,(ix+HeroUnits+1) 8072 ld h,(ix+HeroUnits+2) 8074 ld (ix+HeroUnits+1),0 8075 ld (ix+HeroUnits+2),0 8076 8077 8078 pop ix8079 pop bc8080 8081 ld a,138082 sub a,b 8083 ld d,08084 ld e,a8086 ld c,254 8087 push bc8088 push ix8089 push de8090 call SetVisitingOrDefendingHeroInIX 8091 pop de8093 add ix,de 8094 add ix,de 8095 add ix,de 8097 ld e,(ix+HeroUnits+1) 8098 ld d,(ix+HeroUnits+2) 8099 add hl,de8101 ld (ix+HeroUnits+1),l 8102 ld (ix+HeroUnits+2),h 8104 pop ix8105 pop bc 8106 pop af 8107 jp ExitVisitingAndDefendingArmyRoutine8109 .EndCheck10bWithPopIXandBC:8110 pop ix8111 pop bc8112 .EndCheck10b:81148117 ld c,002 8118 push bc8119 push ix8120 call SetVisitingOrDefendingHeroInIX 8121 pop ix8122 pop bc8123 jp c,.EndCheck12b8125 ld c,254 8126 push bc8127 push ix8128 call SetVisitingOrDefendingHeroInIX 8129 pop ix8130 pop bc8131 jp c,.EndCheck12b8132 8134 8135 ld c,002 8136 push bc8137 push ix8138 call SetVisitingOrDefendingHeroInIX 8139 call CheckHeroHasAtLeast2CreatureSlotsFilled8140 pop ix8141 pop bc8142 jp c,.EndCheck11 8145 8146 ld a,b 8147 cp 88148 jp c,.EndCheck118150 8151 ld a,138152 sub a,b 8153 ld d,08154 ld e,a8156 ld c,254 8157 push bc8158 push ix8159 push de8160 call SetVisitingOrDefendingHeroInIX 8161 pop de8163 add ix,de 8164 add ix,de 8165 add ix,de 8167 ld a,(ix+HeroUnits+1) 8168 or (ix+HeroUnits+2) 8169 pop ix8170 pop bc8171 jp nz,.EndCheck118172 8174 8175 ld a,(PreviousButtonClicked)8176 ld c,a8177 ld a,068178 sub a,c8179 ld d,08180 ld e,a8182 ld c,002 8183 push bc8184 push ix8185 push de8186 call SetVisitingOrDefendingHeroInIX 8187 pop de8189 add ix,de 8190 add ix,de 8191 add ix,de 8193 ld a,(ix+HeroUnits+0) 8194 ex af,af'8195 ld l,(ix+HeroUnits+1) 8196 ld h,(ix+HeroUnits+2) 8198 ld (ix+HeroUnits+0),0 8199 ld (ix+HeroUnits+1),0 8200 ld (ix+HeroUnits+2),0 8202 pop ix8203 pop bc8205 ld a,138206 sub a,b 8207 ld d,08208 ld e,a8210 ld c,254 8211 push bc8212 push ix8213 push de8214 call SetVisitingOrDefendingHeroInIX 8215 pop de8217 add ix,de 8218 add ix,de 8219 add ix,de 8221 ex af,af'8222 ld (ix+HeroUnits+0),a 8223 ld (ix+HeroUnits+1),l 8224 ld (ix+HeroUnits+2),h 8226 pop ix8227 pop bc8228 pop af 8229 jp ExitVisitingAndDefendingArmyRoutine8230 8231 .EndCheck11:82338235 ld c,254 8236 push bc8237 push ix8238 call SetVisitingOrDefendingHeroInIX 8239 call CheckHeroHasAtLeast2CreatureSlotsFilled8240 pop ix8241 pop bc8242 jp c,.EndCheck11b 8245 8246 ld a,b 8247 cp 88248 jp nc,.EndCheck11b8250 8251 ld a,068252 sub a,b 8253 ld d,08254 ld e,a8256 ld c,002 8257 push bc8258 push ix8259 push de8260 call SetVisitingOrDefendingHeroInIX 8261 pop de8263 add ix,de 8264 add ix,de 8265 add ix,de 8267 ld a,(ix+HeroUnits+1) 8268 or (ix+HeroUnits+2) 8269 pop ix8270 pop bc8271 jp nz,.EndCheck11b8272 8274 8275 ld a,(PreviousButtonClicked)8276 ld c,a8277 ld a,138278 sub a,c8279 ld d,08280 ld e,a8282 ld c,254 8283 push bc8284 push ix8285 push de8286 call SetVisitingOrDefendingHeroInIX 8287 pop de8289 add ix,de 8290 add ix,de 8291 add ix,de 8293 ld a,(ix+HeroUnits+0) 8294 ex af,af'8295 ld l,(ix+HeroUnits+1) 8296 ld h,(ix+HeroUnits+2) 8298 ld (ix+HeroUnits+0),0 8299 ld (ix+HeroUnits+1),0 8300 ld (ix+HeroUnits+2),0 8302 pop ix8303 pop bc8305 ld a,068306 sub a,b 8307 ld d,08308 ld e,a8310 ld c,002 8311 push bc8312 push ix8313 push de8314 call SetVisitingOrDefendingHeroInIX 8315 pop de8317 add ix,de 8318 add ix,de 8319 add ix,de 8321 ex af,af'8322 ld (ix+HeroUnits+0),a 8323 ld (ix+HeroUnits+1),l 8324 ld (ix+HeroUnits+2),h 8326 pop ix8327 pop bc8328 pop af 8329 jp ExitVisitingAndDefendingArmyRoutine8330 8331 .EndCheck11b:83338335 8336 ld c,002 8337 push bc8338 push ix8339 call SetVisitingOrDefendingHeroInIX 8340 call CheckHeroHasAtLeast2CreatureSlotsFilled8341 pop ix8342 pop bc8343 jp c,.EndCheck12 8346 8347 ld a,b 8348 cp 88349 jp c,.EndCheck128351 8352 ld a,(PreviousButtonClicked)8353 ld c,a8354 ld a,068355 sub a,c8356 ld d,08357 ld e,a8359 ld c,002 8360 push bc8361 push ix8362 push de8363 call SetVisitingOrDefendingHeroInIX 8364 pop de8366 add ix,de 8367 add ix,de 8368 add ix,de 8369 ld l,(ix+HeroUnits+0) 8370 pop ix8371 pop bc8372 8373 ld a,138374 sub a,b 8375 ld d,08376 ld e,a8378 ld c,254 8379 push bc8380 push ix8381 push de8382 call SetVisitingOrDefendingHeroInIX 8383 pop de8385 add ix,de 8386 add ix,de 8387 add ix,de 8388 ld a,(ix+HeroUnits+0) 8389 cp l8390 pop ix8391 pop bc8392 jp nz,.EndCheck128393 8395 8396 ld a,(PreviousButtonClicked)8397 ld c,a8398 ld a,068399 sub a,c8400 ld d,08401 ld e,a8403 ld c,002 8404 push bc8405 push ix8406 push de8407 call SetVisitingOrDefendingHeroInIX 8408 pop de8410 add ix,de 8411 add ix,de 8412 add ix,de 8414 ld l,(ix+HeroUnits+1) 8415 ld h,(ix+HeroUnits+2) 8417 ld (ix+HeroUnits+0),0 8418 ld (ix+HeroUnits+1),0 8419 ld (ix+HeroUnits+2),0 8421 pop ix8422 pop bc8424 ld a,138425 sub a,b 8426 ld d,08427 ld e,a8429 ld c,254 8430 push bc8431 push ix8432 push de8433 call SetVisitingOrDefendingHeroInIX 8434 pop de8436 add ix,de 8437 add ix,de 8438 add ix,de 8440 ld e,(ix+HeroUnits+1) 8441 ld d,(ix+HeroUnits+2) 8442 add hl,de8443 ld (ix+HeroUnits+1),l 8444 ld (ix+HeroUnits+2),h 8446 pop ix8447 pop bc8448 pop af 8449 jp ExitVisitingAndDefendingArmyRoutine8450 8451 .EndCheck12:8452 84538455 ld c,254 8456 push bc8457 push ix8458 call SetVisitingOrDefendingHeroInIX 8459 call CheckHeroHasAtLeast2CreatureSlotsFilled8460 pop ix8461 pop bc8462 jp c,.EndCheck12b 8465 8466 ld a,b 8467 cp 88468 jp nc,.EndCheck12b8470 8471 ld a,(PreviousButtonClicked)8472 ld c,a8473 ld a,138474 sub a,c8475 ld d,08476 ld e,a8478 ld c,254 8479 push bc8480 push ix8481 push de8482 call SetVisitingOrDefendingHeroInIX 8483 pop de8485 add ix,de 8486 add ix,de 8487 add ix,de 8488 ld l,(ix+HeroUnits+0) 8489 pop ix8490 pop bc8491 8492 ld a,068493 sub a,b 8494 ld d,08495 ld e,a8497 ld c,002 8498 push bc8499 push ix8500 push de8501 call SetVisitingOrDefendingHeroInIX 8502 pop de8504 add ix,de 8505 add ix,de 8506 add ix,de 8507 ld a,(ix+HeroUnits+0) 8508 cp l8509 pop ix8510 pop bc8511 jp nz,.EndCheck12b8512 8514 8515 ld a,(PreviousButtonClicked)8516 ld c,a8517 ld a,138518 sub a,c8519 ld d,08520 ld e,a8522 ld c,254 8523 push bc8524 push ix8525 push de8526 call SetVisitingOrDefendingHeroInIX 8527 pop de8529 add ix,de 8530 add ix,de 8531 add ix,de 8533 ld l,(ix+HeroUnits+1) 8534 ld h,(ix+HeroUnits+2) 8536 ld (ix+HeroUnits+0),0 8537 ld (ix+HeroUnits+1),0 8538 ld (ix+HeroUnits+2),0 8540 pop ix8541 pop bc8543 ld a,068544 sub a,b 8545 ld d,08546 ld e,a8548 ld c,002 8549 push bc8550 push ix8551 push de8552 call SetVisitingOrDefendingHeroInIX 8553 pop de8555 add ix,de 8556 add ix,de 8557 add ix,de 8559 ld e,(ix+HeroUnits+1) 8560 ld d,(ix+HeroUnits+2) 8561 add hl,de8562 ld (ix+HeroUnits+1),l 8563 ld (ix+HeroUnits+2),h 8565 pop ix8566 pop bc8567 pop af 8568 jp ExitVisitingAndDefendingArmyRoutine8569 8570 .EndCheck12b:85728575 8576 ld a,b 8577 cp 8 8578 jp c,.EndCheckbothSlotsClickedBelongToDefendingHero8579 ld a,(PreviousButtonClicked)8580 cp 88581 jp nc,.Swap8582 .EndCheckbothSlotsClickedBelongToDefendingHero:8584 8585 ld a,b 8586 cp 8 8587 jp nc,.EndCheckbothSlotsClickedBelongToVisitingHero8588 ld a,(PreviousButtonClicked)8589 cp 88590 jp c,.Swap8591 .EndCheckbothSlotsClickedBelongToVisitingHero:8593 8594 ld c,002 8595 push bc8596 push de8597 call SetVisitingOrDefendingHeroInIX 8598 pop de8599 pop bc8600 jp c,.ResetButtons 8601 8602 ld c,254 8603 push bc8604 push de8605 call SetVisitingOrDefendingHeroInIX 8606 pop de8607 pop bc8608 jp c,.ResetButtons 8615 .Swap:8616 ld a,b 8617 call .SetHeroUnitsInIX8619 ld a,(ix+HeroUnits+0) 8620 ex af,af'8621 ld l,(ix+HeroUnits+1) 8622 ld h,(ix+HeroUnits+2) 8624 ld a,l8625 or h8626 jp z,.ResetButtons 8627 exx8629 ld a,(PreviousButtonClicked) 8630 call .SetHeroUnitsInIX8632 ld a,(ix+HeroUnits+0) 8633 ex af,af'8634 ld (ix+HeroUnits+0),a 8635 ld l,(ix+HeroUnits+1) 8636 ld h,(ix+HeroUnits+2) 8638 ld a,l8639 or h8640 jp z,.ResetButtons 8642 exx8643 ld (ix+HeroUnits+1),l 8644 ld (ix+HeroUnits+2),h 8646 ld a,b 8647 call .SetHeroUnitsInIX8648 ex af,af'8649 ld (ix+HeroUnits+0),a 8650 exx8651 ld (ix+HeroUnits+1),l 8652 ld (ix+HeroUnits+2),h 8653 8654 pop af 8655 jp ExitVisitingAndDefendingArmyRoutine8656 8657 .EndCheck13:8658 8659 .HighlightNewButton:8660 ld a,b 8661 ld (PreviousButtonClicked),a8662 ld (PreviousButtonClickedIX),ix8663 ret8665 .ResetButtons:8666 ld a,255 8667 ld (PreviousButtonClicked),a8668 ret8670.SetHeroUnitsInIX:8671 cp 88672 jp c,.VisitingHero8674 .DefendingHero:8675 ld c,a8676 ld a,138677 sub a,c 8678 ld d,08679 ld e,a8681 ld c,254 8682 push bc8683 push de8684 call SetVisitingOrDefendingHeroInIX 8685 pop de8686 pop bc8687 add ix,de 8688 add ix,de 8689 add ix,de 8690 ret8691 8692 .VisitingHero: 8693 ld c,a8694 ld a,068695 sub a,c 8696 ld d,08697 ld e,a8699 ld c,002 8700 push bc8701 push de8702 call SetVisitingOrDefendingHeroInIX 8703 pop de8704 pop bc8705 add ix,de 8706 add ix,de 8707 add ix,de 8708 ret8716.CheckTavernButtonClicked: 8717 ret nc8719 ld a,002 8720 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8721 ld c,002 8722 push bc 8723 call SetVisitingOrDefendingHeroInIX 8724 pop bc 8725 jr c,.go 8727 ld a,254 8728 ld (EmptyHeroRecruitedAtTavern+HeroStatus),a8729 ld c,254 8730 push bc 8731 call SetVisitingOrDefendingHeroInIX 8732 pop bc 8733 ret nc 8734 .go:8736 ld a,b8737 cp 38738 jr z,.TavernButton1Pressed8739 cp 28740 jr z,.TavernButton2Pressed87418744 .TavernButton3Pressed:8745 push ix8746 call SetTavernHeroesTablePlayerinIX8747 ld a,(ix+TavernHero3) 8748 pop ix8749 or a8750 ret z 8751 call .Reduce2000Gold 8752 ret c 8753 call .SetHeroStats 8754 push ix8755 call SetTavernHeroesTablePlayerinIX8756 ld (ix+TavernHero3),000 8757 pop ix8758 jp .HeroRecruited8760 .TavernButton2Pressed:8761 push ix8762 call SetTavernHeroesTablePlayerinIX8763 ld a,(ix+TavernHero2) 8764 pop ix8765 or a8766 ret z 8767 call .Reduce2000Gold 8768 ret c 8769 call .SetHeroStats 8770 push ix8771 call SetTavernHeroesTablePlayerinIX8772 ld (ix+TavernHero2),000 8773 pop ix8774 jp .HeroRecruited8776 .TavernButton1Pressed:8777 push ix8778 call SetTavernHeroesTablePlayerinIX8779 ld a,(ix+TavernHero1) 8780 pop ix8781 or a8782 ret z 8783 call .Reduce2000Gold 8784 ret c 8785 call .SetHeroStats 8786 push ix8787 call SetTavernHeroesTablePlayerinIX8788 ld (ix+TavernHero1),000 8789 pop ix8790 jp .HeroRecruited8792 .HeroRecruited:8793 call SetResourcesPlayer8794 call SetVisitingAndDefendingHeroesAndArmy8795 call SetTavernHeroes8796 call SetTavernButtons8797 ld ix,GenericButtonTable28798 call SetGenericButtons 8800 call SwapAndSetPage 8802 call SetResourcesPlayer8803 call SetVisitingAndDefendingHeroesAndArmy8804 call SetTavernHeroes8805 call SetTavernButtons8806 ld ix,GenericButtonTable28807 call SetGenericButtons 8808 pop af 8809 jp CastleOverviewTavernCode.engine8811 .SetHeroStats: 8812 push af 8813 call .CheckIsHeroAHeroThatHasFled?8814 call SetEmptyHeroSlotForCurrentPlayerInIX8815 call .ClearHeroSlot 8816 call .SetYX 8817 pop af 8819 8820 ld b,a 8821 ld hl,HeroAddressesAdol-heroAddressesLenght8822 ld de,heroAddressesLenght 8823 .loop2:8824 add hl,de8825 djnz .loop28826 ld (ix+HeroSpecificInfo+0),l8827 ld (ix+HeroSpecificInfo+1),h8828 8829 8830 ld de,HeroInfoSkill8831 add hl,de8832 ld a,(hl)8833 ld (ix+HeroSkills),a8834 8835 8836 inc hl 8837 ld a,(hl)8838 dec a8839 ld b,08840 ld c,a8841 ld de,118842 call DivideBCbyDE 8844 add hl,hl 8845 add hl,hl 8846 ld de,.HeroSkillPerClassTable8847 add hl,de8848 ld a,(hl)8849 ld (ix+HeroStatAttack),a8850 inc hl8851 ld a,(hl)8852 ld (ix+HeroStatDefense),a8853 inc hl8854 ld a,(hl)8855 ld (ix+HeroStatKnowledge),a8856 inc hl8857 ld a,(hl)8858 ld (ix+HeroStatSpellDamage),a8859 8860 8861 ld a,(iy+CastleLevel1Units) 8862 ld (ix+HeroUnits),a8864 8865 call SetManaAndMovementToMax 8866 ret8867 8868 .HeroSkillPerClassTable:88698870 db 2,1,1,1 8871 db 3,1,1,0 8872 db 1,3,1,0 8873 db 1,2,1,1 8874 8875 db 1,2,1,1 8876 db 1,1,2,1 8877 db 2,1,1,1 8878 8879 db 0,0,3,2 8880 db 1,0,1,3 8881 db 0,1,2,2 8882 db 1,1,2,1 8883 8884 .Reduce2000Gold:8885 push af8886 call SetResourcesCurrentPlayerinIX 8888 ld l,(ix+0)8889 ld h,(ix+1) 8890 ld de,20008891 or a8892 pop af8893 sbc hl,de8894 ret c8895 ld (ix+0),l8896 ld (ix+1),h 8897 ret8899 .ClearHeroSlot:8900 ld hl,EmptyHeroRecruitedAtTavern8901 push ix8902 pop de8903 ld bc,lenghtherotable-2 8904 ldir8905 ret8907 .SetYX:8908 ld a,(iy+CastleY) 8909 dec a8910 ld (ix+HeroY),a 8911 ld a,(iy+Castlex) 8912 inc a8913 inc a8914 ld (ix+HeroX),a 8915 ret8917.CheckIsHeroAHeroThatHasFled?:8918 ld c,a 8919 ld b,amountofheroesperplayer8920 ld a,(whichplayernowplaying?)8921 cp 1 | ld ix,pl1hero1y | jr z,.GoFindHero8922 cp 2 | ld ix,pl2hero1y | jr z,.GoFindHero8923 cp 3 | ld ix,pl3hero1y | jr z,.GoFindHero8924 cp 4 | ld ix,pl4hero1y | jr z,.GoFindHero8926 .GoFindHero:8927 ld l,(ix+HeroSpecificInfo+0) 8928 ld h,(ix+HeroSpecificInfo+1)8929 ld de,HeroInfoNumber8930 add hl,de8931 ld a,(hl) 8932 cp c8933 jr z,.HeroFound8934 ld de,lenghtherotable8935 add ix,de8936 djnz .GoFindHero8937 ret8939 .HeroFound:8940 8942 ld a,(ix+HeroUnits)8943 cp UnitWhenRetreated8944 jr nz,.EndCheckRetreated8945 ld a,(iy+CastleLevel1Units) 8946 ld (ix+HeroUnits),a8947 ld (ix+HeroUnits+1),18948 .EndCheckRetreated:8949 8950 pop af 8952 ld a,(EmptyHeroRecruitedAtTavern+HeroStatus)8953 ld (ix+heroStatus),a 8955 8956 call SetManaAndMovementToMax 8958 call .SetYX8959 call .FaceHeroLookingDown8961 pop af8962 ret 8964 .FaceHeroLookingDown:8965 8966 ld e,(ix+HeroSpecificInfo+0) 8967 ld d,(ix+HeroSpecificInfo+1)8968 push de8969 pop ix 8971 ld a,(ix+HeroinfoSYSX+0) 8972 and %0100 1000 8973 or a,128 + (064 / 2) 8974 xor 88975 ld (ix+HeroinfoSYSX+0),a8976 ret8981CheckHeroHasAtLeast2CreatureSlotsFilled:8982 ld b,0 8983 ld a,(ix+HeroUnits+1) 8984 or (ix+HeroUnits+2) 8985 jr z,.DefendingHeroCreatureSlot1Empty8986 inc b8987 .DefendingHeroCreatureSlot1Empty:8988 ld a,(ix+HeroUnits+4) 8989 or (ix+HeroUnits+5) 8990 jr z,.DefendingHeroCreatureSlot2Empty8991 inc b8992 .DefendingHeroCreatureSlot2Empty:8993 ld a,(ix+HeroUnits+7) 8994 or (ix+HeroUnits+8) 8995 jr z,.DefendingHeroCreatureSlot3Empty8996 inc b8997 .DefendingHeroCreatureSlot3Empty:8998 ld a,(ix+HeroUnits+10) 8999 or (ix+HeroUnits+11) 9000 jr z,.DefendingHeroCreatureSlot4Empty9001 inc b9002 .DefendingHeroCreatureSlot4Empty:9003 ld a,(ix+HeroUnits+13) 9004 or (ix+HeroUnits+14) 9005 jr z,.DefendingHeroCreatureSlot5Empty9006 inc b9007 .DefendingHeroCreatureSlot5Empty:9008 ld a,(ix+HeroUnits+16) 9009 or (ix+HeroUnits+17) 9010 jr z,.DefendingHeroCreatureSlot6Empty9011 inc b9012 .DefendingHeroCreatureSlot6Empty:9013 ld a,b9014 cp 29015 ret9017SetEmptyHeroSlotForCurrentPlayerInIX:9018 ld b,amountofheroesperplayer9019 ld a,(whichplayernowplaying?)9020 cp 1 | ld ix,pl1hero1y | jr z,.GoFindEmptySlotLoop9021 cp 2 | ld ix,pl2hero1y | jr z,.GoFindEmptySlotLoop9022 cp 3 | ld ix,pl3hero1y | jr z,.GoFindEmptySlotLoop9023 cp 4 | ld ix,pl4hero1y | jr z,.GoFindEmptySlotLoop9025 .GoFindEmptySlotLoop:9026 ld a,(ix+HeroStatus)9027 cp 2559028 ret z9029 ld de,lenghtherotable9030 add ix,de9031 djnz .GoFindEmptySlotLoop9033 pop af 9034 pop af 9035 pop af 9036 ret9038SetTavernHeroes:9039 call SetTavernHeroesTablePlayerinIX9040 call SettavernHeroIcons9041 call SettavernHeroNames9042 call SettavernHeroClass9043 call SettavernHeroSkill9044 call EraseTavernHeroWindowWhenUnavailable9045 ret9047SetTavernHeroesTablePlayerinIX:9048 ld a,(whichplayernowplaying?)9049 ld ix,TavernHeroesPlayer19050 cp 19051 ret z9052 ld ix,TavernHeroesPlayer29053 cp 29054 ret z9055 ld ix,TavernHeroesPlayer39056 cp 39057 ret z9058 ld ix,TavernHeroesPlayer490599061 ret9063EraseTavernHeroWindowWhenUnavailable:9064 ld a,(ix+TavernHero1)9065 or a9066 ld de,$0000 + (045*128) + (006/2) - 1289067 call z,.EraseWindow9068 ld a,(ix+TavernHero2)9069 or a9070 ld de,$0000 + (045*128) + (092/2) - 1289071 call z,.EraseWindow9072 ld a,(ix+TavernHero3)9073 or a9074 ld de,$0000 + (045*128) + (178/2) - 1289075 call z,.EraseWindow9076 ret9078 .EraseWindow:9079 ld hl,$4000 + (055*128) + (180/2) - 1289080 ld bc,$0000 + (070*256) + (072/2)9081 ld a,BuildBlock 9082 jp CopyRamToVramCorrectedCastleOverview 9103TextClass: db "Class:",2559104SettavernHeroClass:9105 ld hl,TextClass9106 ld b,004+28 9107 ld c,048+02 9108 call SetText 9110 ld hl,TextClass9111 ld b,090+28 9112 ld c,048+02 9113 call SetText 9115 ld hl,TextClass9116 ld b,176+28 9117 ld c,048+02 9118 call SetText 9120 ld a,(ix+TavernHero1)9121 ld b,004+28 9122 ld c,058+00 9123 call .SetHeroClass9125 ld a,(ix+TavernHero2)9126 ld b,090+28 9127 ld c,058+00 9128 call .SetHeroClass9130 ld a,(ix+TavernHero3)9131 ld b,176+28 9132 ld c,058+00 9133 call .SetHeroClass9134 ret9136 .SetHeroClass:9137 or a9138 ret z9140 push bc9142 ld b,a9143 ld hl,HeroAddressesAdol-heroAddressesLenght+HeroInfoClass9144 ld de,heroAddressesLenght9145 .loop:9146 add hl,de9147 djnz .loop9149 pop bc9150 9151 call SetText 9152 ret9156SettavernHeroNames:9157 9158 ld hl,$4000 + (034*128) + (004/2) - 1289159 ld de,$0000 + (034*128) + (004/2) - 1289160 ld bc,$0000 + (007*256) + (248/2)9161 ld a,TavernBlock 9162 call CopyRamToVramCorrectedCastleOverview 9164 ld a,(ix+TavernHero1)9165 ld b,004+06+(17*2) 9166 ld c,035+00 9167 call .SetHeroName9169 ld a,(ix+TavernHero2)9170 ld b,090+06+(17*2) 9171 ld c,035+00 9172 call .SetHeroName9174 ld a,(ix+TavernHero3)9175 ld b,176+06+(17*2) 9176 ld c,035+00 9177 call .SetHeroName9178 ret9180 .SetHeroName:9181 or a9182 ret z9184 push bc9186 ld b,a9187 ld hl,HeroAddressesAdol-heroAddressesLenght9188 ld de,heroAddressesLenght9189 .loop:9190 add hl,de9191 djnz .loop9193 pop bc9195 call CenterHeroNameHasGainedALevel9196 call SetText 9197 ret9198 9199SettavernHeroIcons: 9200 ld a,(ix+TavernHero1)9201 ld de,DYDX16x30HeroIconTavernWindow19202 call .SetHeroIcon9203 ld a,(ix+TavernHero2)9204 ld de,DYDX16x30HeroIconTavernWindow29205 call .SetHeroIcon9206 ld a,(ix+TavernHero3)9207 ld de,DYDX16x30HeroIconTavernWindow39208 call .SetHeroIcon9209 ret9210 9211 .SetHeroIcon:9212 or a9213 ret z9215 push ix 9216 push de 9217 ld b,a9218 ld ix,HeroAddressesAdol-heroAddressesLenght9219 ld de,heroAddressesLenght9220 .loop:9221 add ix,de9222 djnz .loop9224 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9225 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9226 ld bc,$40009227 xor a9228 sbc hl,bc9230 pop de 9231 pop ix 9232 ld bc,NXAndNY16x30HeroIcon9233 ld a,Hero16x30PortraitsBlock 9234 jp CopyRamToVramCorrectedCastleOverview 9236DYDX16x30HeroIconTavernWindow1: equ $0000 + (047*128) + (008/2) - 1289237DYDX16x30HeroIconTavernWindow2: equ $0000 + (047*128) + (094/2) - 1289238DYDX16x30HeroIconTavernWindow3: equ $0000 + (047*128) + (180/2) - 1289241SetVisitingAndDefendingHeroesAndArmy:9242 call SetVisitingHero9243 call SetDefendingHero9244 call SetVisitingHeroArmyAndAmount9245 call SetDefendingHeroArmyAndAmount9246 ret9248SetDefendingHeroArmyAndAmount:9249 ld c,254 9250 call SetVisitingOrDefendingHeroInIX 9251 ret c9253 call .army92549257 .amount:9258 ld l,(ix+HeroUnits+01)9259 ld h,(ix+HeroUnits+02)9260 ld b,0299261 ld c,1979262 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09264 ld l,(ix+HeroUnits+04)9265 ld h,(ix+HeroUnits+05)9266 ld b,0459267 ld c,1979268 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09270 ld l,(ix+HeroUnits+07)9271 ld h,(ix+HeroUnits+08)9272 ld b,0619273 ld c,1979274 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09276 ld l,(ix+HeroUnits+10)9277 ld h,(ix+HeroUnits+11)9278 ld b,0779279 ld c,1979280 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09282 ld l,(ix+HeroUnits+13)9283 ld h,(ix+HeroUnits+14)9284 ld b,0939285 ld c,1979286 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09288 ld l,(ix+HeroUnits+16)9289 ld h,(ix+HeroUnits+17)9290 ld b,1099291 ld c,1979292 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09293 ret9295 .army:9296 ld a,(ix+HeroUnits+00) 9297 call .SetSYSX 9298 ld de,DYDXDefendingHeroUnit1 9299 call CopyTransparantImage 9301 ld a,(ix+HeroUnits+03) 9302 call .SetSYSX 9303 ld de,DYDXDefendingHeroUnit2 9304 call CopyTransparantImage 9306 ld a,(ix+HeroUnits+06) 9307 call .SetSYSX 9308 ld de,DYDXDefendingHeroUnit3 9309 call CopyTransparantImage 9311 ld a,(ix+HeroUnits+09) 9312 call .SetSYSX 9313 ld de,DYDXDefendingHeroUnit4 9314 call CopyTransparantImage 9316 ld a,(ix+HeroUnits+12) 9317 call .SetSYSX 9318 ld de,DYDXDefendingHeroUnit5 9319 call CopyTransparantImage 9321 ld a,(ix+HeroUnits+15) 9322 call .SetSYSX 9323 ld de,DYDXDefendingHeroUnit6 9324 call CopyTransparantImage 9325 ret9327 .SetSYSX: 9328 ld h,09329 ld l,a9330 add hl,hl 9331 ld de,UnitSYSXTable14x14Portraits9332 add hl,de9333 ld c,(hl)9334 inc hl9335 ld b,(hl) 9336 push bc9337 pop hl9339 ld a,Enemy14x14PortraitsBlock 9340 ld bc,NXAndNY14x14CharaterPortraits9341 ret9343 9344UnitSYSXTable14x14Portraits: 9345 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-1289346 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-1289347 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-1289348 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-1289349 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-1289350 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-1289351 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-1289353 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-1289354 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-1289355 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-1289356 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-1289358DYDXDefendingHeroUnit1: equ 256*181 + 028 9359DYDXDefendingHeroUnit2: equ 256*181 + 044 9360DYDXDefendingHeroUnit3: equ 256*181 + 060 9361DYDXDefendingHeroUnit4: equ 256*181 + 076 9362DYDXDefendingHeroUnit5: equ 256*181 + 092 9363DYDXDefendingHeroUnit6: equ 256*181 + 108 9365SetVisitingHeroArmyAndAmount:9366 ld c,002 9367 call SetVisitingOrDefendingHeroInIX 9368 ret c9370 call .army93719374 .amount:9375 ld l,(ix+HeroUnits+01)9376 ld h,(ix+HeroUnits+02)9377 ld b,1579378 ld c,1979379 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09381 ld l,(ix+HeroUnits+04)9382 ld h,(ix+HeroUnits+05)9383 ld b,1739384 ld c,1979385 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09387 ld l,(ix+HeroUnits+07)9388 ld h,(ix+HeroUnits+08)9389 ld b,1899390 ld c,1979391 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09393 ld l,(ix+HeroUnits+10)9394 ld h,(ix+HeroUnits+11)9395 ld b,2059396 ld c,1979397 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09399 ld l,(ix+HeroUnits+13)9400 ld h,(ix+HeroUnits+14)9401 ld b,2219402 ld c,1979403 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09405 ld l,(ix+HeroUnits+16)9406 ld h,(ix+HeroUnits+17)9407 ld b,2379408 ld c,1979409 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs09410 ret9412 .army:9413 ld a,(ix+HeroUnits+00) 9414 call SetDefendingHeroArmyAndAmount.SetSYSX 9415 ld de,DYDXVisitingHeroUnit1 9416 call CopyTransparantImage 9418 ld a,(ix+HeroUnits+03) 9419 call SetDefendingHeroArmyAndAmount.SetSYSX 9420 ld de,DYDXVisitingHeroUnit2 9421 call CopyTransparantImage 9423 ld a,(ix+HeroUnits+06) 9424 call SetDefendingHeroArmyAndAmount.SetSYSX 9425 ld de,DYDXVisitingHeroUnit3 9426 call CopyTransparantImage 9428 ld a,(ix+HeroUnits+09) 9429 call SetDefendingHeroArmyAndAmount.SetSYSX 9430 ld de,DYDXVisitingHeroUnit4 9431 call CopyTransparantImage 9433 ld a,(ix+HeroUnits+12) 9434 call SetDefendingHeroArmyAndAmount.SetSYSX 9435 ld de,DYDXVisitingHeroUnit5 9436 call CopyTransparantImage 9438 ld a,(ix+HeroUnits+15) 9439 call SetDefendingHeroArmyAndAmount.SetSYSX 9440 ld de,DYDXVisitingHeroUnit6 9441 call CopyTransparantImage 9442 ret9444DYDXVisitingHeroUnit1: equ 256*181 + 156 9445DYDXVisitingHeroUnit2: equ 256*181 + 172 9446DYDXVisitingHeroUnit3: equ 256*181 + 188 9447DYDXVisitingHeroUnit4: equ 256*181 + 204 9448DYDXVisitingHeroUnit5: equ 256*181 + 220 9449DYDXVisitingHeroUnit6: equ 256*181 + 236 9451SetVisitingOrDefendingHeroInIX: 9452 ld a,(whichplayernowplaying?)9453 cp 1 | ld ix,pl1hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9454 cp 2 | ld ix,pl2hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9455 cp 3 | ld ix,pl3hero1y | jr z,.CheckHeroVisitingOrDefendingCastle9456 cp 4 | ld ix,pl4hero1y | jr z,.CheckHeroVisitingOrDefendingCastle 9458 .CheckHeroVisitingOrDefendingCastle:9459 ld b,amountofheroesperplayer9460 .loop:9461 call .DoCheckHero 9462 ld de,lenghtherotable9463 add ix,de 9464 djnz .loop9465 add ix,de 9466 scf 9467 ret9469 .DoCheckHero:9470 ld a,(iy+CastleY) 9471 dec a9472 cp (ix+Heroy)9473 ret nz9474 ld a,(iy+CastleX)9475 inc a9476 inc a9477 cp (ix+Herox)9478 ret nz9479 ld a,(ix+HeroStatus) 9480 cp c 9481 ret nz9483 pop bc 9484 ret9486SetDefendingHero:9487 ld c,254 9488 call SetVisitingOrDefendingHeroInIX 9490 ld de,$0000 + (176*128) + (004/2) - 1289491 jp c,SetNoHeroVisitingOrDefendingCastle9492 ld de,DYDX16x30HeroIconAtDefendingHeroWindow9493 jp DoSetVisitingOrDefendingHero9494 9495SetVisitingHero: 9496 ld c,002 9497 call SetVisitingOrDefendingHeroInIX 9499 ld de,$0000 + (176*128) + (132/2) - 1289500 jp c,SetNoHeroVisitingOrDefendingCastle9501 ld de,DYDX16x30HeroIconAtVisitingHeroWindow9502 jp DoSetVisitingOrDefendingHero9504SetNoHeroVisitingOrDefendingCastle:9505 ld hl,$4000 + (013*128) + (230/2) - 1289506 ld bc,$0000 + (028*256) + (020/2)9507 ld a,ButtonsRecruitBlock 9508 jp CopyRamToVramCorrectedCastleOverview 9510DoSetVisitingOrDefendingHero:9511 9512 ld l,(ix+HeroSpecificInfo+0) 9513 ld h,(ix+HeroSpecificInfo+1)9514 push hl9515 pop ix9517 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 9518 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 9519 ld bc,$40009520 xor a9521 sbc hl,bc9523 ld bc,NXAndNY16x30HeroIcon9524 ld a,Hero16x30PortraitsBlock 9525 jp CopyRamToVramCorrectedCastleOverview 9527DYDX16x30HeroIconAtVisitingHeroWindow: equ $0000 + (176*128) + (134/2) - 1289528DYDX16x30HeroIconAtDefendingHeroWindow: equ $0000 + (176*128) + (006/2) - 1289530SetDefendingAndVisitingHeroButtons:9531 ld hl,DefendingAndVisitingHeroButtonTable-29532 ld de,GenericButtonTable-29533 ld bc,2+(GenericButtonTableLenghtPerButton*14)9534 ldir9535 ret9537DefendingAndVisitingHeroButtonTableGfxBlock: db ButtonsRecruitBlock9538DefendingAndVisitingHeroButtonTableAmountOfButtons: db 149539DefendingAndVisitingHeroButtonTable: 9541 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9542 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 9543 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 1289544 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 1289545 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 1289546 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button6Ytop,.Button6YBottom,.Button6XLeft,.Button6XRight | dw $0000 + (.Button6Ytop*128) + (.Button6XLeft/2) - 1289547 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button7Ytop,.Button7YBottom,.Button7XLeft,.Button7XRight | dw $0000 + (.Button7Ytop*128) + (.Button7XLeft/2) - 1289549 db %1100 0011 | dw $4000 + (072*128) + (162/2) - 128 | dw $4000 + (072*128) + (182/2) - 128 | dw $4000 + (072*128) + (202/2) - 128 | db .Button8Ytop,.Button8YBottom,.Button8XLeft,.Button8XRight | dw $0000 + (.Button8Ytop*128) + (.Button8XLeft/2) - 1289550 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button9Ytop,.Button9YBottom,.Button9XLeft,.Button9XRight | dw $0000 + (.Button9Ytop*128) + (.Button9XLeft/2) - 1289551 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button10Ytop,.Button10YBottom,.Button10XLeft,.Button10XRight | dw $0000 + (.Button10Ytop*128) + (.Button10XLeft/2) - 1289552 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button11Ytop,.Button11YBottom,.Button11XLeft,.Button11XRight | dw $0000 + (.Button11Ytop*128) + (.Button11XLeft/2) - 1289553 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button12Ytop,.Button12YBottom,.Button12XLeft,.Button12XRight | dw $0000 + (.Button12Ytop*128) + (.Button12XLeft/2) - 1289554 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button13Ytop,.Button13YBottom,.Button13XLeft,.Button13XRight | dw $0000 + (.Button13Ytop*128) + (.Button13XLeft/2) - 1289555 db %1100 0011 | dw $4000 + (106*128) + (162/2) - 128 | dw $4000 + (106*128) + (178/2) - 128 | dw $4000 + (106*128) + (194/2) - 128 | db .Button14Ytop,.Button14YBottom,.Button14XLeft,.Button14XRight | dw $0000 + (.Button14Ytop*128) + (.Button14XLeft/2) - 1289557.Button1Ytop: equ 1749558.Button1YBottom: equ .Button1Ytop + 0349559.Button1XLeft: equ 0049560.Button1XRight: equ .Button1XLeft + 0209562.Button2Ytop: equ 1769563.Button2YBottom: equ .Button2Ytop + 0309564.Button2XLeft: equ 0279565.Button2XRight: equ .Button2XLeft + 0169567.Button3Ytop: equ 1769568.Button3YBottom: equ .Button3Ytop + 0309569.Button3XLeft: equ 0439570.Button3XRight: equ .Button3XLeft + 0169572.Button4Ytop: equ 1769573.Button4YBottom: equ .Button4Ytop + 0309574.Button4XLeft: equ 0599575.Button4XRight: equ .Button4XLeft + 0169577.Button5Ytop: equ 1769578.Button5YBottom: equ .Button5Ytop + 0309579.Button5XLeft: equ 0759580.Button5XRight: equ .Button5XLeft + 0169582.Button6Ytop: equ 1769583.Button6YBottom: equ .Button6Ytop + 0309584.Button6XLeft: equ 0919585.Button6XRight: equ .Button6XLeft + 0169587.Button7Ytop: equ 1769588.Button7YBottom: equ .Button7Ytop + 0309589.Button7XLeft: equ 1079590.Button7XRight: equ .Button7XLeft + 0169594.Button8Ytop: equ 1749595.Button8YBottom: equ .Button8Ytop + 0349596.Button8XLeft: equ 004 + 1289597.Button8XRight: equ .Button8XLeft + 0209599.Button9Ytop: equ 1769600.Button9YBottom: equ .Button9Ytop + 0309601.Button9XLeft: equ 027 + 1289602.Button9XRight: equ .Button9XLeft + 0169604.Button10Ytop: equ 1769605.Button10YBottom: equ .Button10Ytop + 0309606.Button10XLeft: equ 043 + 1289607.Button10XRight: equ .Button10XLeft + 0169609.Button11Ytop: equ 1769610.Button11YBottom: equ .Button11Ytop + 0309611.Button11XLeft: equ 059 + 1289612.Button11XRight: equ .Button11XLeft + 0169614.Button12Ytop: equ 1769615.Button12YBottom: equ .Button12Ytop + 0309616.Button12XLeft: equ 075 + 1289617.Button12XRight: equ .Button12XLeft + 0169619.Button13Ytop: equ 1769620.Button13YBottom: equ .Button13Ytop + 0309621.Button13XLeft: equ 091 + 1289622.Button13XRight: equ .Button13XLeft + 0169624.Button14Ytop: equ 1769625.Button14YBottom: equ .Button14Ytop + 0309626.Button14XLeft: equ 107 + 1289627.Button14XRight: equ .Button14XLeft + 0169644SetTavernButtons:9645 ld hl,TavernButtonTable-29646 ld de,GenericButtonTable2-29647 ld bc,2+(GenericButtonTableLenghtPerButton*3)9648 ldir9650 call .SetRedButtonsIfPlayerHasInsufficientFunds9651 call .SetBrownButtonIfHeroIsAlreadyRecruited9652 ret9654 .SetBrownButtonIfHeroIsAlreadyRecruited:9655 call SetTavernHeroesTablePlayerinIX9656 ld a,(ix+TavernHero1) 9657 or a9658 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*0)9659 call z,.AlreadyRecruitedSetBrown9661 ld a,(ix+TavernHero2) 9662 or a9663 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*1)9664 call z,.AlreadyRecruitedSetBrown9666 ld a,(ix+TavernHero3) 9667 or a9668 ld de,GenericButtonTable2+1+(GenericButtonTableLenghtPerButton*2)9669 call z,.AlreadyRecruitedSetBrown9670 ret9672 .AlreadyRecruitedSetBrown:9673 ld hl,.BrownButton9674 ld bc,69675 ldir9676 ret9678 .BrownButton:9679 dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 128 | dw $4000 + (038*128) + (076/2) - 1289680 9681 .SetRedButtonsIfPlayerHasInsufficientFunds:9682 call SetResourcesCurrentPlayerinIX9684 9685 ld l,(ix+0)9686 ld h,(ix+1) 9687 ld de,20009688 xor a9689 sbc hl,de9690 ret nc9691 9692 ld hl,TavernButtonTableWhenNotEnoughCash9693 ld de,GenericButtonTable29694 ld bc,GenericButtonTableLenghtPerButton*39695 ldir9696 ret9704TavernButton1Ytop: equ 1189705TavernButton1YBottom: equ TavernButton1Ytop + 0099706TavernButton1XLeft: equ 0049707TavernButton1XRight: equ TavernButton1XLeft + 0769709TavernButton2Ytop: equ 1189710TavernButton2YBottom: equ TavernButton2Ytop + 0099711TavernButton2XLeft: equ 0909712TavernButton2XRight: equ TavernButton2XLeft + 0769714TavernButton3Ytop: equ 1189715TavernButton3YBottom: equ TavernButton3Ytop + 0099716TavernButton3XLeft: equ 1769717TavernButton3XRight: equ TavernButton3XLeft + 0769719TavernButtonTableLenghtPerButton: equ TavernButtonTable.endlenght-TavernButtonTable9720TavernButtonTableGfxBlock: db ButtonsRecruitBlock9721TavernButtonTableAmountOfButtons: db 39722TavernButtonTable: 9723 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9724 .endlenght:9725 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9726 db %1100 0011 | dw $4000 + (000*128) + (152/2) - 128 | dw $4000 + (009*128) + (152/2) - 128 | dw $4000 + (018*128) + (152/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289728TavernButtonTableWhenNotEnoughCash: 9729 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton1Ytop,TavernButton1YBottom,TavernButton1XLeft,TavernButton1XRight | dw $0000 + (TavernButton1Ytop*128) + (TavernButton1XLeft/2) - 128 9730 .endlenght:9731 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton2Ytop,TavernButton2YBottom,TavernButton2XLeft,TavernButton2XRight | dw $0000 + (TavernButton2Ytop*128) + (TavernButton2XLeft/2) - 128 9732 db %1100 0011 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | dw $4000 + (063*128) + (162/2) - 128 | db TavernButton3Ytop,TavernButton3YBottom,TavernButton3XLeft,TavernButton3XRight | dw $0000 + (TavernButton3Ytop*128) + (TavernButton3XLeft/2) - 1289740FirstLineintHeightCastleMarket: equ 0749741SecondLineintHeightCastleMarket: equ 1179742ThirdLineintHeightCastleMarket: equ 1599743SetCastleMarketInterruptHandler:9744 di9745 ld hl,CastleInterruptHandler 9746 ld ($38+1),hl 9747 ld a,$c3 9748 ld ($38),a9749 9750 ld a,(VDP_0) 9751 or 16 9752 ld (VDP_0),a 9753 out ($99),a9754 ld a,1289755 out ($99),a9757 ld a,FirstLineintHeightCastleMarket9758 ld (CurrentLineIntHeight),a9759 out ($99),a9760 ld a,19+128 9761 ei9762 out ($99),a 9763 ret9765SetCastleMarketInterruptSecondLine:9766 ld a,SecondLineintHeightCastleMarket9767 ld (CurrentLineIntHeight),a9768 out ($99),a9769 ld a,19+128 9770 ei9771 out ($99),a 9772 ret9774SetCastleMarketInterruptThirdLine:9775 ld a,ThirdLineintHeightCastleMarket9776 ld (CurrentLineIntHeight),a9777 out ($99),a9778 ld a,19+128 9779 ei9780 out ($99),a 9781 ret9783CastleOverviewMarketPlaceCode:9784 call SetScreenOff9786 call SetMarketPlaceButtons9788 ld a,255 9789 ld (PreviousButtonClicked),a9790 ld (PreviousButton2Clicked),a9791 ld ix,GenericButtonTable9792 ld (PreviousButtonClickedIX),ix9793 ld (PreviousButton2ClickedIX),ix9795 ld hl,InGamePalette9796 call SetPalette9798 xor a9799 ld (activepage),a 9800 9801 ld a,%1100 00119802 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 9803 xor a9804 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 9805 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 9806 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 9807 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 9808 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 9810 call SetMarketPlaceGraphics 9811 call SetResourcesPlayer9813 ld hl,CopyPage1To09814 call docopy9816 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9817 call docopy9819 call SetCastleMarketInterruptHandler9820 9821 .engine:9822 call SwapAndSetPage 9823 call PopulateControls 98259830 ld a,(Controls)9831 bit 5,a 9832 jp nz,CastleOverviewCode9834 9835 ld ix,CastleOverviewButtonTable 9836 call CheckButtonMouseInteractionCastle9838 ld ix,CastleOverviewButtonTable9839 call SetCastleButtons 9842 9843 ld ix,GenericButtonTable 9844 call CheckButtonInteractionControlsNotOnInt9845 call .CheckButtonClicked 9849 9850 ld ix,(PreviousButtonClickedIX) 9851 ld a,(ix+GenericButtonStatus)9852 push af9853 ld a,(PreviousButtonClicked)9854 cp 2559855 jr z,.EndMarkButton 9856 ld (ix+GenericButtonStatus),%1010 00119857 .EndMarkButton:9858 9860 9861 ld ix,(PreviousButton2ClickedIX) 9862 ld a,(ix+GenericButtonStatus)9863 push af9864 ld a,(PreviousButton2Clicked)9865 cp 2559866 jr z,.EndMarkButton2 9867 ld (ix+GenericButtonStatus),%1010 00119868 .EndMarkButton2:9869 9875 ld ix,GenericButtonTable9876 call SetGenericButtons 9879 9880 pop af9881 ld ix,(PreviousButton2ClickedIX) 9882 ld (ix+GenericButtonStatus),a9883 9885 9886 pop af9887 ld ix,(PreviousButtonClickedIX) 9888 ld (ix+GenericButtonStatus),a9889 9894 98969897 call SetScreenOn9898 jp .engine9900.CheckButtonClicked: 9901 ret nc9903 ld a,b 9904 cp 9 9905 jp nc,.WhichResourceDoYouNeedClicked9906 cp 4 9907 jp nc,.WhichResourceWillYouTradeClicked9908 cp 39909 jp z,.PlusButtonPressed9910 cp 29911 jp z,.BuyButtonPressed9912 cp 19913 jp z,.MinusButtonPressed9914 ret9915 9916 .BuyButtonPressed:9917 9918 call SetResourcesCurrentPlayerinIX9919 ld a,(MarketPlaceResourceNeeded)9920 cp 09 9921 jr z,.IXPointsToResourceNeededCheckOverflow9922 inc ix9923 inc ix9924 cp 13 9925 jr z,.IXPointsToResourceNeededCheckOverflow9926 inc ix9927 inc ix9928 cp 12 9929 jr z,.IXPointsToResourceNeededCheckOverflow9930 inc ix9931 inc ix9932 cp 11 9933 jr z,.IXPointsToResourceNeededCheckOverflow9934 inc ix9935 inc ix9936 cp 10 9937 jr z,.IXPointsToResourceNeededCheckOverflow9939 .IXPointsToResourceNeededCheckOverflow:9940 ld l,(ix+0)9941 ld h,(ix+1) 9942 ld de,(AmountOfResourcesOffered)9943 add hl,de 9944 ret c9945 9947 9948 call SetResourcesCurrentPlayerinIX9949 ld a,(MarketPlaceResourceToTrade) 9950 cp 04 9951 jr z,.IXPointsToResourceRequired9952 inc ix9953 inc ix9954 cp 08 9955 jr z,.IXPointsToResourceRequired9956 inc ix9957 inc ix9958 cp 07 9959 jr z,.IXPointsToResourceRequired9960 inc ix9961 inc ix9962 cp 06 9963 jr z,.IXPointsToResourceRequired9964 inc ix9965 inc ix9966 cp 05 9967 jr z,.IXPointsToResourceRequired9969 .IXPointsToResourceRequired:9970 ld l,(ix+0)9971 ld h,(ix+1) 9972 ld de,(AmountOfResourcesRequired)9973 xor a9974 sbc hl,de 9975 ret c9976 ld (ix+0),l9977 ld (ix+1),h 9980 9981 call SetResourcesCurrentPlayerinIX9982 ld a,(MarketPlaceResourceNeeded)9983 cp 09 9984 jr z,.IXPointsToResourceNeeded9985 inc ix9986 inc ix9987 cp 13 9988 jr z,.IXPointsToResourceNeeded9989 inc ix9990 inc ix9991 cp 12 9992 jr z,.IXPointsToResourceNeeded9993 inc ix9994 inc ix9995 cp 11 9996 jr z,.IXPointsToResourceNeeded9997 inc ix9998 inc ix9999 cp 10 10000 jr z,.IXPointsToResourceNeeded10002 .IXPointsToResourceNeeded:10003 ld l,(ix+0)10004 ld h,(ix+1) 10005 ld de,(AmountOfResourcesOffered)10006 add hl,de 10007 ld (ix+0),l10008 ld (ix+1),h 10011 call SetResourcesPlayer10012 call SwapAndSetPage 10013 call SetResourcesPlayer10014 ret10015 10016 .WoodNeeded:10017 inc ix10018 inc ix 10019 ret10020 10021 .MinusButtonPressed:10022 call .SetTradeCostInHL 10023 ld e,(hl)10024 inc hl10025 ld d,(hl) 10026 inc hl10027 ld c,(hl)10028 inc hl10029 ld b,(hl) 10031 10032 ld hl,(AmountOfResourcesOffered)10033 xor a10034 sbc hl,de10035 ret z10036 ld (AmountOfResourcesOffered),hl10037 ld hl,(AmountOfResourcesRequired)10038 xor a10039 sbc hl,bc10040 ld (AmountOfResourcesRequired),hl10042 call .ClearAmountsOfferedAndRequired10043 call .SetTotalAmountOfferedVSRequired10044 call SwapAndSetPage 10045 call .ClearAmountsOfferedAndRequired10046 call .SetTotalAmountOfferedVSRequired10047 ret10048 10049 .PlusButtonPressed:10050 call .SetTradeCostInHL 10051 ld e,(hl)10052 inc hl10053 ld d,(hl) 10054 inc hl10055 ld c,(hl)10056 inc hl10057 ld b,(hl) 10059 10060 ld hl,(AmountOfResourcesRequired)10061 add hl,bc10062 ret c10064 ld hl,(AmountOfResourcesOffered)10065 add hl,de10066 ret c10067 ld (AmountOfResourcesOffered),hl10068 ld hl,(AmountOfResourcesRequired)10069 add hl,bc10070 ld (AmountOfResourcesRequired),hl10072 call .ClearAmountsOfferedAndRequired10073 call .SetTotalAmountOfferedVSRequired10074 call SwapAndSetPage 10075 call .ClearAmountsOfferedAndRequired10076 call .SetTotalAmountOfferedVSRequired10077 ret10079 .ClearAmountsOfferedAndRequired:10080 ld hl,$4000 + (131*128) + (052/2) - 12810081 ld de,$0000 + (147*128) + (054/2) - 12810082 ld bc,$0000 + (006*256) + (036/2)10083 ld a,ChamberOfCommerceButtonsBlock 10084 call CopyRamToVramCorrectedCastleOverview 10086 ld hl,$4000 + (131*128) + (052/2) - 12810087 ld de,$0000 + (147*128) + (170/2) - 12810088 ld bc,$0000 + (006*256) + (036/2)10089 ld a,ChamberOfCommerceButtonsBlock 10090 call CopyRamToVramCorrectedCastleOverview 10091 ret10092 10093 .WhichResourceWillYouTradeClicked:10094 ld (PreviousButton2Clicked),a 10095 ld (PreviousButton2ClickedIX),ix 10096 10097 ld (MarketPlaceResourceToTrade),a10099 call SetCastleOverViewFontPage0Y212 10101 ld a,%1100 0011 10102 ld (GenericButtonTable+10*GenericButtonTableLenghtPerButton),a 10103 ld (GenericButtonTable+11*GenericButtonTableLenghtPerButton),a 10104 ld (GenericButtonTable+12*GenericButtonTableLenghtPerButton),a 10105 10106 .EntryPointWhenClickedOnWhichResourceDoYouNeed:10107 call .SetIcanOfferYouWindow10108 call .SetIconResourceNeeded10109 call .SetIconResourceToTrade10110 call .SetTextResourceNeeded10111 call .SetTextResourceToTrade10112 call .SetCost10113 call .SetTotalAmountOfferedVSRequired10114 call SwapAndSetPage 10115 call .SetIcanOfferYouWindow10116 call .SetIconResourceNeeded10117 call .SetIconResourceToTrade10118 call .SetTextResourceNeeded10119 call .SetTextResourceToTrade10120 call .SetCost10121 call .SetTotalAmountOfferedVSRequired10122 ret10124 .SetTotalAmountOfferedVSRequired:10125 ld b,054 10126 ld c,147 10127 ld hl,(AmountOfResourcesOffered)10128 call SetNumber16BitCastle 10130 ld b,181 10131 ld c,147 10132 ld hl,(AmountOfResourcesRequired)10133 call SetNumber16BitCastle 10134 ret10136 .SetCost:10137 call .SetTradeCostInHL10138 10139 ld e,(hl)10140 inc hl10141 ld d,(hl)10142 ld (AmountOfResourcesOffered),de10143 inc hl10144 ld e,(hl)10145 inc hl10146 ld d,(hl)10147 ld (AmountOfResourcesRequired),de10149 ld b,069+005 10150 ld c,128 10151 ld hl,(AmountOfResourcesOffered)10152 call SetNumber16BitCastle 10154 ld b,167 10155 ld c,128 10156 ld hl,(AmountOfResourcesRequired)10157 call SetNumber16BitCastle 10158 ret1016010171.TextCostRequireWoodTradeStone: dw 0001,000710172.TextCostRequireWoodTradeGems: dw 0001,000310173.TextCostRequireWoodTradeGold: dw 0001,166710174.TextCostRequireGemTradeStone: dw 0001,001310175.TextCostRequireGemTradeGems: dw 0001,000710176.TextCostRequireGemTradeGold: dw 0001,333310177.TextCostRequireGoldTradeWood: dw 0037,000110178.TextCostRequireGoldTradeRuby: dw 0075,000110179.TextCostRequireGoldTradeGold: dw 0001,00011018010181.TextCostRequireWoodTradeStone2: dw 0001,000510182.TextCostRequireWoodTradeGems2: dw 0001,000310183.TextCostRequireWoodTradeGold2: dw 0001,125010184.TextCostRequireGemTradeStone2: dw 0001,001010185.TextCostRequireGemTradeGems2: dw 0001,000510186.TextCostRequireGemTradeGold2: dw 0001,250010187.TextCostRequireGoldTradeWood2: dw 0050,000110188.TextCostRequireGoldTradeRuby2: dw 0100,000110189.TextCostRequireGoldTradeGold2: dw 0001,00011019010191.TextCostRequireWoodTradeStone3: dw 0001,000410192.TextCostRequireWoodTradeGems3: dw 0001,000210193.TextCostRequireWoodTradeGold3: dw 0001,100010194.TextCostRequireGemTradeStone3: dw 0001,000810195.TextCostRequireGemTradeGems3: dw 0001,000410196.TextCostRequireGemTradeGold3: dw 0001,200010197.TextCostRequireGoldTradeWood3: dw 0062,000110198.TextCostRequireGoldTradeRuby3: dw 0125,000110199.TextCostRequireGoldTradeGold3: dw 0001,000110203 .SetTradeCostInHL:10204 call .DoSetTradeCost10205 call .SetAmountOfMarketPlacesInB 10206 ld a,b10207 or a10208 ret z10209 cp 310210 jr c,.loop10211 ld b,2 10212 .loop:10213 ld de,3610214 add hl,de10215 djnz .loop10216 ret10217 10218 .SetAmountOfMarketPlacesInB:10219 ld a,(whichplayernowplaying?)10220 ld b,-1 10221 ld ix,Castle1 | cp (ix+CastlePlayer) | call z,.check10222 ld ix,Castle2 | cp (ix+CastlePlayer) | call z,.check10223 ld ix,Castle3 | cp (ix+CastlePlayer) | call z,.check10224 ld ix,Castle4 | cp (ix+CastlePlayer) | call z,.check10225 ret10227 .check:10228 bit 0,(ix+CastleMarket)10229 ret z10230 inc b10231 ret10233 10234 .DoSetTradeCost:10235 ld a,(MarketPlaceResourceNeeded)10236 cp 12 10237 jp nc,.RequireWoodOrStone10238 cp 10 10239 jp nc,.RequireGemsOrRubies10241 .RequireGold:10242 ld a,(MarketPlaceResourceToTrade) 10243 cp 07 10244 ld hl,.TextCostRequireGoldTradeWood10245 ret nc10246 cp 05 10247 ld hl,.TextCostRequireGoldTradeRuby10248 ret nc10249 ld hl,.TextCostRequireGoldTradeGold10250 ret 10251 10252 .RequireGemsOrRubies:10253 ld a,(MarketPlaceResourceToTrade) 10254 cp 07 10255 ld hl,.TextCostRequireGemTradeStone10256 ret nc10257 cp 05 10258 ld hl,.TextCostRequireGemTradeGems10259 ret nc10260 ld hl,.TextCostRequireGemTradeGold10261 ret10262 10263 .RequireWoodOrStone:10264 ld a,(MarketPlaceResourceToTrade) 10265 cp 07 10266 ld hl,.TextCostRequireWoodTradeStone10267 ret nc10268 cp 05 10269 ld hl,.TextCostRequireWoodTradeGems10270 ret nc10271 ld hl,.TextCostRequireWoodTradeGold10272 ret10274 .SetTextResourceNeeded:10275 ld a,(MarketPlaceResourceNeeded)10276 call .SetTextResourceInHL10277 ld b,12710278 ld c,12810279 jp SetText10281 .SetTextResourceToTrade:10282 ld a,(MarketPlaceResourceToTrade)10283 call .SetTextResourceInHL10284 ld b,22710285 ld c,12810286 jp SetText10288 .SetTextResourceInHL:10289 ld hl,.TextWood10290 cp 1310291 ret z10292 cp 810293 ret z10295 ld hl,.TextStone10296 cp 1210297 ret z10298 cp 710299 ret z10301 ld hl,.TextGems10302 cp 1110303 ret z10304 cp 610305 ret z10307 ld hl,.TextRubies10308 cp 1010309 ret z10310 cp 510311 ret z10313 ld hl,.TextGold1031410318 ret10320.TextWood: db "wood",25510321.TextStone: db "stone",25510322.TextGems: db "gems",25510323.TextRubies: db "rubies",25510324.TextGold: db "gold",25510326 10327 .SetIcanOfferYouWindow:10328 ld hl,$4000 + (109*128) + (000/2) - 12810329 ld de,$0000 + (123*128) + (000/2) - 12810330 ld bc,$0000 + (043*256) + (256/2)10331 ld a,ChamberOfCommerceButtonsBlock 10332 call CopyRamToVramCorrectedCastleOverview 10333 jp SetCastleMarketInterruptThirdLine10335 .SetIconResourceNeeded:10336 ld a,(MarketPlaceResourceNeeded)10337 call .SetResourceInHL 1033810339 ld de,$0000 + (138*128) + (024/2) - 12810340 ld bc,$0000 + (022*256) + (028/2)10341 ld a,ChamberOfCommerceButtonsBlock 10342 jp CopyRamToVramCorrectedCastleOverview 10344 .SetIconResourceToTrade:10345 ld a,(MarketPlaceResourceToTrade)10346 call .SetResourceInHL1034710348 ld de,$0000 + (138*128) + (206/2) - 12810349 ld bc,$0000 + (022*256) + (028/2)10350 ld a,ChamberOfCommerceButtonsBlock 10351 jp CopyRamToVramCorrectedCastleOverview 10353 .SetResourceInHL:10354 ld hl,$4000 + (000*128) + (000/2) - 128 10355 cp 1310356 ret z10357 cp 810358 ret z10360 ld hl,$4000 + (000*128) + (028/2) - 128 10361 cp 1210362 ret z10363 cp 710364 ret z10366 ld hl,$4000 + (000*128) + (056/2) - 128 10367 cp 1110368 ret z10369 cp 610370 ret z10372 ld hl,$4000 + (000*128) + (084/2) - 128 10373 cp 1010374 ret z10375 cp 510376 ret z10378 ld hl,$4000 + (000*128) + (112/2) - 128 10383 ret10385 10386 .WhichResourceDoYouNeedClicked:10387 ld (PreviousButtonClicked),a 10388 ld (PreviousButtonClickedIX),ix10389 10390 ld (MarketPlaceResourceNeeded),a10392 ld a,(GenericButtonTable+10*GenericButtonTableLenghtPerButton) 10393 bit 7,a 10394 jp nz,.EntryPointWhenClickedOnWhichResourceDoYouNeed10395 10396 ld a,(GenericButtonTable+5*GenericButtonTableLenghtPerButton) 10397 bit 7,a10398 ret nz10399 10400 ld a,%1100 0011 10401 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a 10402 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a 10403 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a 10404 ld (GenericButtonTable+8*GenericButtonTableLenghtPerButton),a 10405 ld (GenericButtonTable+9*GenericButtonTableLenghtPerButton),a 10406 10407 call .SetWhichResourceWillYouTradeWindow10408 call SwapAndSetPage 10409 .SetWhichResourceWillYouTradeWindow:10410 ld hl,$4000 + (066*128) + (000/2) - 12810411 ld de,$0000 + (080*128) + (000/2) - 12810412 ld bc,$0000 + (043*256) + (256/2)10413 ld a,ChamberOfCommerceButtonsBlock 10414 call CopyRamToVramCorrectedCastleOverview 10415 jp SetCastleMarketInterruptSecondLine10416 10417SetMarketPlaceButtons:10418 ld hl,MarketPlaceButtonTable-210419 ld de,GenericButtonTable-210420 ld bc,2+(GenericButtonTableLenghtPerButton*13)10421 ldir10422 ret10424MarketPlaceButton1Ytop: equ 05210425MarketPlaceButton1YBottom: equ MarketPlaceButton1Ytop + 02210426MarketPlaceButton1XLeft: equ 03010427MarketPlaceButton1XRight: equ MarketPlaceButton1XLeft + 02810429MarketPlaceButton2Ytop: equ 05210430MarketPlaceButton2YBottom: equ MarketPlaceButton2Ytop + 02210431MarketPlaceButton2XLeft: equ 07210432MarketPlaceButton2XRight: equ MarketPlaceButton2XLeft + 02810434MarketPlaceButton3Ytop: equ 05210435MarketPlaceButton3YBottom: equ MarketPlaceButton3Ytop + 02210436MarketPlaceButton3XLeft: equ 11410437MarketPlaceButton3XRight: equ MarketPlaceButton3XLeft + 02810439MarketPlaceButton4Ytop: equ 05210440MarketPlaceButton4YBottom: equ MarketPlaceButton4Ytop + 02210441MarketPlaceButton4XLeft: equ 15610442MarketPlaceButton4XRight: equ MarketPlaceButton4XLeft + 02810444MarketPlaceButton5Ytop: equ 05210445MarketPlaceButton5YBottom: equ MarketPlaceButton5Ytop + 02210446MarketPlaceButton5XLeft: equ 19810447MarketPlaceButton5XRight: equ MarketPlaceButton5XLeft + 02810449MarketPlaceButton6Ytop: equ 09510450MarketPlaceButton6YBottom: equ MarketPlaceButton6Ytop + 02210451MarketPlaceButton6XLeft: equ 03010452MarketPlaceButton6XRight: equ MarketPlaceButton6XLeft + 02810454MarketPlaceButton7Ytop: equ 09510455MarketPlaceButton7YBottom: equ MarketPlaceButton7Ytop + 02210456MarketPlaceButton7XLeft: equ 07210457MarketPlaceButton7XRight: equ MarketPlaceButton7XLeft + 02810459MarketPlaceButton8Ytop: equ 09510460MarketPlaceButton8YBottom: equ MarketPlaceButton8Ytop + 02210461MarketPlaceButton8XLeft: equ 11410462MarketPlaceButton8XRight: equ MarketPlaceButton8XLeft + 02810464MarketPlaceButton9Ytop: equ 09510465MarketPlaceButton9YBottom: equ MarketPlaceButton9Ytop + 02210466MarketPlaceButton9XLeft: equ 15610467MarketPlaceButton9XRight: equ MarketPlaceButton9XLeft + 02810469MarketPlaceButton10Ytop: equ 09510470MarketPlaceButton10YBottom: equ MarketPlaceButton10Ytop + 02210471MarketPlaceButton10XLeft: equ 19810472MarketPlaceButton10XRight: equ MarketPlaceButton10XLeft + 02810476MarketPlaceButton11Ytop: equ 14310477MarketPlaceButton11YBottom: equ MarketPlaceButton11Ytop + 01410478MarketPlaceButton11XLeft: equ 09210479MarketPlaceButton11XRight: equ MarketPlaceButton11XLeft + 01410481MarketPlaceButton12Ytop: equ 14110482MarketPlaceButton12YBottom: equ MarketPlaceButton12Ytop + 01810483MarketPlaceButton12XLeft: equ 11610484MarketPlaceButton12XRight: equ MarketPlaceButton12XLeft + 02610486MarketPlaceButton13Ytop: equ 14310487MarketPlaceButton13YBottom: equ MarketPlaceButton13Ytop + 01410488MarketPlaceButton13XLeft: equ 15210489MarketPlaceButton13XRight: equ MarketPlaceButton13XLeft + 01410491MarketPlaceButtonTableLenghtPerButton: equ MarketPlaceButtonTable.endlenght-MarketPlaceButtonTable10492MarketPlaceButtonTableGfxBlock: db ChamberOfCommerceButtonsBlock10493MarketPlaceButtonTableAmountOfButtons: db 1310494MarketPlaceButtonTable: 10496 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton1Ytop,MarketPlaceButton1YBottom,MarketPlaceButton1XLeft,MarketPlaceButton1XRight | dw $0000 + (MarketPlaceButton1Ytop*128) + (MarketPlaceButton1XLeft/2) - 128 10497 .endlenght:10498 db %1010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton2Ytop,MarketPlaceButton2YBottom,MarketPlaceButton2XLeft,MarketPlaceButton2XRight | dw $0000 + (MarketPlaceButton2Ytop*128) + (MarketPlaceButton2XLeft/2) - 128 10499 db %1001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton3Ytop,MarketPlaceButton3YBottom,MarketPlaceButton3XLeft,MarketPlaceButton3XRight | dw $0000 + (MarketPlaceButton3Ytop*128) + (MarketPlaceButton3XLeft/2) - 12810500 db %1100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton4Ytop,MarketPlaceButton4YBottom,MarketPlaceButton4XLeft,MarketPlaceButton4XRight | dw $0000 + (MarketPlaceButton4Ytop*128) + (MarketPlaceButton4XLeft/2) - 128 10501 db %1100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton5Ytop,MarketPlaceButton5YBottom,MarketPlaceButton5XLeft,MarketPlaceButton5XRight | dw $0000 + (MarketPlaceButton5Ytop*128) + (MarketPlaceButton5XLeft/2) - 128 10502 10503 db %0100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (044*128) + (000/2) - 128 | db MarketPlaceButton6Ytop,MarketPlaceButton6YBottom,MarketPlaceButton6XLeft,MarketPlaceButton6XRight | dw $0000 + (MarketPlaceButton6Ytop*128) + (MarketPlaceButton6XLeft/2) - 128 10504 db %0010 0011 | dw $4000 + (000*128) + (028/2) - 128 | dw $4000 + (022*128) + (028/2) - 128 | dw $4000 + (044*128) + (028/2) - 128 | db MarketPlaceButton7Ytop,MarketPlaceButton7YBottom,MarketPlaceButton7XLeft,MarketPlaceButton7XRight | dw $0000 + (MarketPlaceButton7Ytop*128) + (MarketPlaceButton7XLeft/2) - 128 10505 db %0001 0011 | dw $4000 + (000*128) + (056/2) - 128 | dw $4000 + (022*128) + (056/2) - 128 | dw $4000 + (044*128) + (056/2) - 128 | db MarketPlaceButton8Ytop,MarketPlaceButton8YBottom,MarketPlaceButton8XLeft,MarketPlaceButton8XRight | dw $0000 + (MarketPlaceButton8Ytop*128) + (MarketPlaceButton8XLeft/2) - 12810506 db %0100 0011 | dw $4000 + (000*128) + (084/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | dw $4000 + (044*128) + (084/2) - 128 | db MarketPlaceButton9Ytop,MarketPlaceButton9YBottom,MarketPlaceButton9XLeft,MarketPlaceButton9XRight | dw $0000 + (MarketPlaceButton9Ytop*128) + (MarketPlaceButton9XLeft/2) - 128 10507 db %0100 0011 | dw $4000 + (000*128) + (112/2) - 128 | dw $4000 + (022*128) + (112/2) - 128 | dw $4000 + (044*128) + (112/2) - 128 | db MarketPlaceButton10Ytop,MarketPlaceButton10YBottom,MarketPlaceButton10XLeft,MarketPlaceButton10XRight | dw $0000 + (MarketPlaceButton10Ytop*128) + (MarketPlaceButton10XLeft/2) - 128 10508 10509 db %0100 0011 | dw $4000 + (000*128) + (140/2) - 128 | dw $4000 + (014*128) + (140/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton11Ytop,MarketPlaceButton11YBottom,MarketPlaceButton11XLeft,MarketPlaceButton11XRight | dw $0000 + (MarketPlaceButton11Ytop*128) + (MarketPlaceButton11XLeft/2) - 128 10510 db %0010 0011 | dw $4000 + (042*128) + (140/2) - 128 | dw $4000 + (042*128) + (166/2) - 128 | dw $4000 + (042*128) + (192/2) - 128 | db MarketPlaceButton12Ytop,MarketPlaceButton12YBottom,MarketPlaceButton12XLeft,MarketPlaceButton12XRight | dw $0000 + (MarketPlaceButton12Ytop*128) + (MarketPlaceButton12XLeft/2) - 128 10511 db %0001 0011 | dw $4000 + (000*128) + (154/2) - 128 | dw $4000 + (014*128) + (154/2) - 128 | dw $4000 + (028*128) + (140/2) - 128 | db MarketPlaceButton13Ytop,MarketPlaceButton13YBottom,MarketPlaceButton13XLeft,MarketPlaceButton13XRight | dw $0000 + (MarketPlaceButton13Ytop*128) + (MarketPlaceButton13XLeft/2) - 12810514FirstLineintHeightCastleMagicGuild: equ 02310515SecondLineintHeightCastleMagicGuild: equ 17310516SetCastleMagicGuildInterruptHandler:10517 di10518 ld hl,CastleInterruptHandler 10519 ld ($38+1),hl 10520 ld a,$c3 10521 ld ($38),a10522 10523 ld a,(VDP_0) 10524 or 16 10525 ld (VDP_0),a 10526 out ($99),a10527 ld a,12810528 out ($99),a10530 ld a,FirstLineintHeightCastleMagicGuild10531 ld (CurrentLineIntHeight),a10532 out ($99),a10533 ld a,19+128 10534 ei10535 out ($99),a 10536 ret10538CastleOverviewMagicGuildCode:10539 call SetScreenOff10541 call SetMagicGuildButtons10543 ld hl,InGamePalette10544 call SetPalette10546 xor a10547 ld (activepage),a 10548 10549 ld a,%1100 001110550 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 10551 xor a10552 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 10553 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 10554 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 10555 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 10556 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 10558 call SetMagicGuildGraphics 10560 ld hl,CopyPage1To010561 call docopy10563 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10564 call docopy10566 call SetCastleMagicGuildInterruptHandler10567 10568 .engine: 10569 call SwapAndSetPage 10570 call PopulateControls 1057210577 ld a,(Controls)10578 bit 5,a 10579 jp nz,CastleOverviewCode10581 10582 ld ix,CastleOverviewButtonTable 10583 call CheckButtonMouseInteractionCastle10585 ld ix,CastleOverviewButtonTable10586 call SetCastleButtons 10589 10590 ld ix,GenericButtonTable 10591 call CheckButtonInteractionControlsNotOnInt10592 call .CheckButtonClicked 10594 ld ix,GenericButtonTable10595 call SetGenericButtons 10598 call WaitVblank10599 call SetScreenOn10600 jp .engine10602.CheckButtonClicked: 10603 ret nc10605 push bc 10606 call SetCastleOverViewFontPage0Y212 10607 call .ClearTextWindow10608 call .SetSpellIcon10609 pop bc 10610 push bc 10611 call .SetText10612 call SwapAndSetPage 10613 call .ClearTextWindow10614 call .SetSpellIcon10615 pop bc 10616 call .SetText10617 ret10619 .ClearTextWindow:10620 ld hl,$4000 + (154*128) + (006/2) - 12810621 ld de,$0000 + (154*128) + (006/2) - 12810622 ld bc,$0000 + (020*256) + (244/2)10623 ld a,MagicGuildBlock 10624 jp CopyRamToVramCorrectedCastleOverview 10626 .SetSpellIcon:10627 ld hl,$4000 + (126*128) + (196/2) - 12810628 ld de,$0000 + (154*128) + (008/2) - 12810629 ld bc,$0000 + (020*256) + (020/2)10630 ld a,SpellBookGraphicsBlock 10631 jp CopyRamToVramCorrectedCastleOverview 10633.SetText:10634 ld a,b10635 cp 810636 ld de,(GenericButtonTable+1+0*GenericButtonTableLenghtPerButton)10637 jp z,.ButtonFound10638 cp 710639 ld de,(GenericButtonTable+1+1*GenericButtonTableLenghtPerButton)10640 jp z,.ButtonFound10641 cp 610642 ld de,(GenericButtonTable+1+2*GenericButtonTableLenghtPerButton)10643 jp z,.ButtonFound10644 cp 510645 ld de,(GenericButtonTable+1+3*GenericButtonTableLenghtPerButton)10646 jp z,.ButtonFound10647 cp 410648 ld de,(GenericButtonTable+1+4*GenericButtonTableLenghtPerButton)10649 jp z,.ButtonFound10650 cp 310651 ld de,(GenericButtonTable+1+5*GenericButtonTableLenghtPerButton)10652 jp z,.ButtonFound10653 cp 210654 ld de,(GenericButtonTable+1+6*GenericButtonTableLenghtPerButton)10655 jp z,.ButtonFound10656 ld de,(GenericButtonTable+1+7*GenericButtonTableLenghtPerButton)10657 .ButtonFound:10658 ld hl,EarthLevel1Untouched10659 call CompareHLwithDE10660 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth410661 jp z,.SpellFound10662 ld hl,EarthLevel2Untouched10663 call CompareHLwithDE10664 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth310665 jp z,.SpellFound10666 ld hl,EarthLevel3Untouched10667 call CompareHLwithDE10668 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth210669 jp z,.SpellFound10670 ld hl,EarthLevel4Untouched10671 call CompareHLwithDE10672 ld hl,SpellDescriptionsMagicGuild.DescriptionEarth110673 jp z,.SpellFound10675 ld hl,FireLevel1Untouched10676 call CompareHLwithDE10677 ld hl,SpellDescriptionsMagicGuild.DescriptionFire410678 jp z,.SpellFound10679 ld hl,FireLevel2Untouched10680 call CompareHLwithDE10681 ld hl,SpellDescriptionsMagicGuild.DescriptionFire310682 jp z,.SpellFound10683 ld hl,FireLevel3Untouched10684 call CompareHLwithDE10685 ld hl,SpellDescriptionsMagicGuild.DescriptionFire210686 jp z,.SpellFound10687 ld hl,FireLevel4Untouched10688 call CompareHLwithDE10689 ld hl,SpellDescriptionsMagicGuild.DescriptionFire110690 jp z,.SpellFound10692 ld hl,AirLevel1Untouched10693 call CompareHLwithDE10694 ld hl,SpellDescriptionsMagicGuild.DescriptionAir410695 jp z,.SpellFound10696 ld hl,AirLevel2Untouched10697 call CompareHLwithDE10698 ld hl,SpellDescriptionsMagicGuild.DescriptionAir310699 jp z,.SpellFound10700 ld hl,AirLevel3Untouched10701 call CompareHLwithDE10702 ld hl,SpellDescriptionsMagicGuild.DescriptionAir210703 jp z,.SpellFound10704 ld hl,AirLevel4Untouched10705 call CompareHLwithDE10706 ld hl,SpellDescriptionsMagicGuild.DescriptionAir110707 jp z,.SpellFound10709 ld hl,WaterLevel1Untouched10710 call CompareHLwithDE10711 ld hl,SpellDescriptionsMagicGuild.DescriptionWater410712 jp z,.SpellFound10713 ld hl,WaterLevel2Untouched10714 call CompareHLwithDE10715 ld hl,SpellDescriptionsMagicGuild.DescriptionWater310716 jp z,.SpellFound10717 ld hl,WaterLevel3Untouched10718 call CompareHLwithDE10719 ld hl,SpellDescriptionsMagicGuild.DescriptionWater210720 jp z,.SpellFound10721 ld hl,WaterLevel4Untouched10722 call CompareHLwithDE10723 ld hl,SpellDescriptionsMagicGuild.DescriptionWater110724 jp z,.SpellFound10725 10726 .SpellFound:10727 push hl10728 10729 ex de,hl1073010731 ld de,$0000 + (156*128) + (010/2) - 12810732 ld bc,$0000 + (016*256) + (016/2)10733 ld a,SpellBookGraphicsBlock 10734 call CopyRamToVramCorrectedCastleOverview 10736 pop hl10737 ld b,03110738 ld c,15410739 jp SetText10741SpellDescriptionsMagicGuild:10743.DescriptionEarth4: db "Earthbound",25410744 db "Applies a 50% movement speed debuff to the selected",25410745 db "enemy unit.",25510747.DescriptionEarth3: db "Plate Armor",25410748 db "Increases the defense of the selected friendly unit",25410749 db "by 5.",25510751.DescriptionEarth2: db "Resurrection",25410752 db "Revives a segment of deceased friendly living",25410753 db "creatures.",25510755.DescriptionEarth1: db "Earthshock",25410756 db "Deals damage to all creatures in target and adjacent",25410757 db "hexes.",25510760.DescriptionFire4: db "Curse",25410761 db "Causes the selected enemy unit to deal -3 damage",25410762 db "when attacking.",25510764.DescriptionFire3: db "Blinding Fog",25410765 db "Target ranged unit deals 50% less damage.",25510767.DescriptionFire2: db "Implosion",25410768 db "Deals damage to enemy unit and adjecent units.",25510770.DescriptionFire1: db "Sunstrike",25410771 db "Calls down a solar beam to incinerate a single enemy",25410772 db "unit.",25510774.Descriptionair4: db "Haste",25410775 db "Increases the speed of the selected friendly unit by 3.",25510777.Descriptionair3: db "Shieldbreaker",25410778 db "Reduces the defense of the selected enemy unit by 4.",25510780.Descriptionair2: db "Claw Back",25410781 db "Target allied unit has unlimited retaliations each round.",25510783.Descriptionair1: db "Spell Bubble",25410784 db "Target friendly unit has a 75% chance to deflect a",25410785 db "single enemy spell.",25510788.Descriptionwater4: db "Cure",25410789 db "Dissipates all harmful spell effects while restoring a set",25410790 db "amount of HP.",25510792.Descriptionwater3: db "Ice Peak",25410793 db "Conjures an ice shard from the ground, impaling a",25410794 db "single enemy.",25510796.Descriptionwater2: db "Hypnosis",25410797 db "Enemy unit cant attack until attacked, dispelled or",25410798 db "effect wears off.",25510801.Descriptionwater1: db "Frost Ring",25410802 db "Causes damage to all units adjacent to the central hex.",25510805SetGenericButtons: 10806 ld a,(ix+GenericButtonGfxBlock)10807 ld (ButtonGfxBlockCopy),a10809 ld b,(ix+GenericButtonAmountOfButtons)10810 .loop:10811 push bc10812 call .Setbutton10813 pop bc10814 ld de,GenericButtonTableLenghtPerButton10815 add ix,de10817 djnz .loop10818 ret10820 .Setbutton:10821 bit 7,(ix+GenericButtonStatus)10822 ret z 10824 bit 0,(ix+GenericButtonStatus) 10825 res 0,(ix+GenericButtonStatus) 10826 jr nz,.goCopyButton10827 bit 1,(ix+GenericButtonStatus)10828 res 1,(ix+GenericButtonStatus)10829 ret z 10830 .goCopyButton:10832 ld l,(ix+GenericButton_SYSX_Ontouched)10833 ld h,(ix+GenericButton_SYSX_Ontouched+1)10834 bit 6,(ix+GenericButtonStatus)10835 jr nz,.go 10837 ld l,(ix+GenericButton_SYSX_MovedOver)10838 ld h,(ix+GenericButton_SYSX_MovedOver+1)10839 bit 5,(ix+GenericButtonStatus)10840 jr nz,.go 10842 ld l,(ix+GenericButton_SYSX_Clicked)10843 ld h,(ix+GenericButton_SYSX_Clicked+1)10844 .go:10846 10847 ld e,(ix+GenericButton_DYDX)10848 ld d,(ix+GenericButton_DYDX+1)10850 ld a,(ix+GenericButtonYbottom)10851 sub a,(ix+GenericButtonYtop)10852 ld b,a 10853 ld a,(ix+GenericButtonXright)10854 sub a,(ix+GenericButtonXleft)10855 srl a 10856 ld c,a 10859 ld a,(ButtonGfxBlockCopy)1086310869108721087410876 ld de,$8000 + (212*128) + (000/2) - 128 10877 call CopyRamToVramCorrectedWithoutActivePageSetting 10879 ld a,(activepage)10880 xor 110881 ld (CopyCastleButton2+dPage),a10883 ld a,(ix+GenericButtonXleft)10884 ld (CopyCastleButton2+dx),a10885 ld a,(ix+GenericButtonYtop)10886 ld (CopyCastleButton2+dy),a10888 ld a,(ix+GenericButtonYbottom)10889 sub a,(ix+GenericButtonYtop)10890 ld (CopyCastleButton2+ny),a10892 ld a,(ix+GenericButtonXright)10893 sub a,(ix+GenericButtonXleft)10894 ld (CopyCastleButton2+nx),a10896 ld hl,CopyCastleButton210897 call docopy1089810900 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady10901 call docopy10902 ret10904MagicGuildButtonTableGfxBlock: db SpellBookGraphicsBlock10905MagicGuildButtonTableAmountOfButtons: db 810906MagicGuildButtonTable: 10908EarthLevel1Button:10909 db %1100 0011 | dw EarthLevel1Untouched | dw EarthLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel1Y ,MagicGuildEarthLevel1Y+16 ,MagicGuildEarthLevel1X ,MagicGuildEarthLevel1X+16 | dw $0000 + (MagicGuildEarthLevel1Y*128) + (MagicGuildEarthLevel1X/2) - 128 |10910FireLevel1Button:10911 db %1100 0011 | dw FireLevel1Untouched | dw FireLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel1Y , MagicGuildFireLevel1Y+16 , MagicGuildFireLevel1X , MagicGuildFireLevel1X+16 | dw $0000 + (MagicGuildFireLevel1Y*128) + (MagicGuildFireLevel1X/2) - 128 |10912AirLevel1Button:10913 db %1100 0011 | dw AirLevel1Untouched | dw AirLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel1Y , MagicGuildAirLevel1Y+16 , MagicGuildAirLevel1X , MagicGuildAirLevel1X+16 | dw $0000 + (MagicGuildAirLevel1Y*128) + (MagicGuildAirLevel1X/2) - 128 |10914WaterLevel1Button:10915 db %1100 0011 | dw WaterLevel1Untouched | dw WaterLevel1Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel1Y, MagicGuildWaterLevel1Y+16, MagicGuildWaterLevel1X, MagicGuildWaterLevel1X+16 | dw $0000 + (MagicGuildWaterLevel1Y*128) + (MagicGuildWaterLevel1X/2) - 128 | 1091710918EarthLevel2Button:10919 db %1100 0011 | dw EarthLevel2Untouched | dw EarthLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel2Y ,MagicGuildEarthLevel2Y+16 ,MagicGuildEarthLevel2X ,MagicGuildEarthLevel2X+16 | dw $0000 + (MagicGuildEarthLevel2Y*128) + (MagicGuildEarthLevel2X/2) - 128 |10920FireLevel2Button:10921 db %1100 0011 | dw FireLevel2Untouched | dw FireLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel2Y , MagicGuildFireLevel2Y+16 , MagicGuildFireLevel2X , MagicGuildFireLevel2X+16 | dw $0000 + (MagicGuildFireLevel2Y*128) + (MagicGuildFireLevel2X/2) - 128 |10922AirLevel2Button:10923 db %1100 0011 | dw AirLevel2Untouched | dw AirLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel2Y , MagicGuildAirLevel2Y+16 , MagicGuildAirLevel2X , MagicGuildAirLevel2X+16 | dw $0000 + (MagicGuildAirLevel2Y*128) + (MagicGuildAirLevel2X/2) - 128 |10924WaterLevel2Button:10925 db %1100 0011 | dw WaterLevel2Untouched | dw WaterLevel2Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel2Y, MagicGuildWaterLevel2Y+16, MagicGuildWaterLevel2X, MagicGuildWaterLevel2X+16 | dw $0000 + (MagicGuildWaterLevel2Y*128) + (MagicGuildWaterLevel2X/2) - 128 | 1092710928EarthLevel3Button:10929 db %1100 0011 | dw EarthLevel3Untouched | dw EarthLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel3Y ,MagicGuildEarthLevel3Y+16 ,MagicGuildEarthLevel3X ,MagicGuildEarthLevel3X+16 | dw $0000 + (MagicGuildEarthLevel3Y*128) + (MagicGuildEarthLevel3X/2) - 128 |10930FireLevel3Button:10931 db %1100 0011 | dw FireLevel3Untouched | dw FireLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel3Y , MagicGuildFireLevel3Y+16 , MagicGuildFireLevel3X , MagicGuildFireLevel3X+16 | dw $0000 + (MagicGuildFireLevel3Y*128) + (MagicGuildFireLevel3X/2) - 128 |10932AirLevel3Button:10933 db %1100 0011 | dw AirLevel3Untouched | dw AirLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel3Y , MagicGuildAirLevel3Y+16 , MagicGuildAirLevel3X , MagicGuildAirLevel3X+16 | dw $0000 + (MagicGuildAirLevel3Y*128) + (MagicGuildAirLevel3X/2) - 128 |10934WaterLevel3Button:10935 db %1100 0011 | dw WaterLevel3Untouched | dw WaterLevel3Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel3Y, MagicGuildWaterLevel3Y+16, MagicGuildWaterLevel3X, MagicGuildWaterLevel3X+16 | dw $0000 + (MagicGuildWaterLevel3Y*128) + (MagicGuildWaterLevel3X/2) - 128 | 1093710938EarthLevel4Button:10939 db %1100 0011 | dw EarthLevel4Untouched | dw EarthLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildEarthLevel4Y ,MagicGuildEarthLevel4Y+16 ,MagicGuildEarthLevel4X ,MagicGuildEarthLevel4X+16 | dw $0000 + (MagicGuildEarthLevel4Y*128) + (MagicGuildEarthLevel4X/2) - 128 |10940FireLevel4Button:10941 db %1100 0011 | dw FireLevel4Untouched | dw FireLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildFireLevel4Y , MagicGuildFireLevel4Y+16 , MagicGuildFireLevel4X , MagicGuildFireLevel4X+16 | dw $0000 + (MagicGuildFireLevel4Y*128) + (MagicGuildFireLevel4X/2) - 128 |10942AirLevel4Button:10943 db %1100 0011 | dw AirLevel4Untouched | dw AirLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildAirLevel4Y , MagicGuildAirLevel4Y+16 , MagicGuildAirLevel4X , MagicGuildAirLevel4X+16 | dw $0000 + (MagicGuildAirLevel4Y*128) + (MagicGuildAirLevel4X/2) - 128 |10944WaterLevel4Button:10945 db %1100 0011 | dw WaterLevel4Untouched | dw WaterLevel4Touched | dw $4000 + (150*128) + (192/2) - 128 | db MagicGuildWaterLevel4Y, MagicGuildWaterLevel4Y+16, MagicGuildWaterLevel4X, MagicGuildWaterLevel4X+16 | dw $0000 + (MagicGuildWaterLevel4Y*128) + (MagicGuildWaterLevel4X/2) - 128 | 10947SetCastleSpellsInIX:10948 push iy10949 pop de10950 ld hl,Castle110951 ld ix,Castle1Spells10952 call CompareHLwithDE10953 ret z10955 ld hl,Castle210956 ld ix,Castle2Spells10957 call CompareHLwithDE10958 ret z10960 ld hl,Castle310961 ld ix,Castle3Spells10962 call CompareHLwithDE10963 ret z10965 ld hl,Castle410966 ld ix,Castle4Spells10967 call CompareHLwithDE10968 ret z10969 ret10971SetMagicGuildButtons:10972 ld hl,MagicGuildButtonTable-210973 ld de,GenericButtonTable-210974 ld bc,2+(GenericButtonTableLenghtPerButton*8)10975 ldir10977 call SetCastleSpellsInIX10978 ld de,GenericButtonTable10980 10981 ld hl,EarthLevel1Button10982 bit 0,(ix+0)10983 call nz,.AddButton10984 ld hl,FireLevel1Button10985 bit 0,(ix+1)10986 call nz,.AddButton10987 ld hl,AirLevel1Button10988 bit 0,(ix+2)10989 call nz,.AddButton10990 ld hl,WaterLevel1Button10991 bit 0,(ix+3)10992 call nz,.AddButton10994 ld hl,EarthLevel2Button10995 bit 1,(ix+0)10996 call nz,.AddButton10997 ld hl,FireLevel2Button10998 bit 1,(ix+1)10999 call nz,.AddButton11000 ld hl,AirLevel2Button11001 bit 1,(ix+2)11002 call nz,.AddButton11003 ld hl,WaterLevel2Button11004 bit 1,(ix+3)11005 call nz,.AddButton11007 ld hl,EarthLevel3Button11008 bit 2,(ix+0)11009 call nz,.AddButton11010 ld hl,FireLevel3Button11011 bit 2,(ix+1)11012 call nz,.AddButton11013 ld hl,AirLevel3Button11014 bit 2,(ix+2)11015 call nz,.AddButton11016 ld hl,WaterLevel3Button11017 bit 2,(ix+3)11018 call nz,.AddButton11020 ld hl,EarthLevel4Button11021 bit 3,(ix+0)11022 call nz,.AddButton11023 ld hl,FireLevel4Button11024 bit 3,(ix+1)11025 call nz,.AddButton11026 ld hl,AirLevel4Button11027 bit 3,(ix+2)11028 call nz,.AddButton11029 ld hl,WaterLevel4Button11030 bit 3,(ix+3)11031 call nz,.AddButton11033 ld a,(iy+CastleMageGuildLevel)11034 cp 411035 ret z11036 xor a11037 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a11038 ld (GenericButtonTable+7*GenericButtonTableLenghtPerButton),a11040 ld a,(iy+CastleMageGuildLevel)11041 cp 311042 ret z11043 xor a11044 ld (GenericButtonTable+4*GenericButtonTableLenghtPerButton),a11045 ld (GenericButtonTable+5*GenericButtonTableLenghtPerButton),a11047 ld a,(iy+CastleMageGuildLevel)11048 cp 211049 ret z11050 xor a11051 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a11052 ld (GenericButtonTable+3*GenericButtonTableLenghtPerButton),a11053 ret11055 .AddButton:11056 ld bc,GenericButtonTableLenghtPerButton11057 ldir11058 ret1106011061MagicGuildEarthLevel1Y: equ 04611062MagicGuildEarthLevel1X: equ 03411063MagicGuildEarthLevel2Y: equ 04611064MagicGuildEarthLevel2X: equ 07211065MagicGuildEarthLevel3Y: equ 06911066MagicGuildEarthLevel3X: equ 03411067MagicGuildEarthLevel4Y: equ 06911068MagicGuildEarthLevel4X: equ 07211070MagicGuildFireLevel1Y: equ 10511071MagicGuildFireLevel1X: equ 03411072MagicGuildFireLevel2Y: equ 10511073MagicGuildFireLevel2X: equ 07211074MagicGuildFireLevel3Y: equ 12811075MagicGuildFireLevel3X: equ 03411076MagicGuildFireLevel4Y: equ 12811077MagicGuildFireLevel4X: equ 07211079MagicGuildAirLevel1Y: equ 04611080MagicGuildAirLevel1X: equ 16611081MagicGuildAirLevel2Y: equ 04611082MagicGuildAirLevel2X: equ 20411083MagicGuildAirLevel3Y: equ 06911084MagicGuildAirLevel3X: equ 16611085MagicGuildAirLevel4Y: equ 06911086MagicGuildAirLevel4X: equ 20411088MagicGuildWaterLevel1Y: equ 10511089MagicGuildWaterLevel1X: equ 16611090MagicGuildWaterLevel2Y: equ 10511091MagicGuildWaterLevel2X: equ 20411092MagicGuildWaterLevel3Y: equ 12811093MagicGuildWaterLevel3X: equ 16611094MagicGuildWaterLevel4Y: equ 12811095MagicGuildWaterLevel4X: equ 2041109711098EarthLevel1Untouched: equ $4000 + (000*128) + (224/2) - 12811099EarthLevel1Touched: equ $4000 + (000*128) + (240/2) - 12811100EarthLevel2Untouched: equ $4000 + (016*128) + (224/2) - 12811101EarthLevel2Touched: equ $4000 + (016*128) + (240/2) - 12811102EarthLevel3Untouched: equ $4000 + (032*128) + (224/2) - 12811103EarthLevel3Touched: equ $4000 + (032*128) + (240/2) - 12811104EarthLevel4Untouched: equ $4000 + (048*128) + (224/2) - 12811105EarthLevel4Touched: equ $4000 + (048*128) + (240/2) - 12811107FireLevel1Untouched: equ $4000 + (064*128) + (224/2) - 12811108FireLevel1Touched: equ $4000 + (064*128) + (240/2) - 12811109FireLevel2Untouched: equ $4000 + (080*128) + (224/2) - 12811110FireLevel2Touched: equ $4000 + (080*128) + (240/2) - 12811111FireLevel3Untouched: equ $4000 + (096*128) + (224/2) - 12811112FireLevel3Touched: equ $4000 + (096*128) + (240/2) - 12811113FireLevel4Untouched: equ $4000 + (112*128) + (224/2) - 12811114FireLevel4Touched: equ $4000 + (112*128) + (240/2) - 12811116AirLevel1Untouched: equ $4000 + (128*128) + (224/2) - 12811117AirLevel1Touched: equ $4000 + (128*128) + (240/2) - 12811118AirLevel2Untouched: equ $4000 + (144*128) + (224/2) - 12811119AirLevel2Touched: equ $4000 + (144*128) + (240/2) - 12811120AirLevel3Untouched: equ $4000 + (160*128) + (224/2) - 12811121AirLevel3Touched: equ $4000 + (160*128) + (240/2) - 12811122AirLevel4Untouched: equ $4000 + (176*128) + (224/2) - 12811123AirLevel4Touched: equ $4000 + (176*128) + (240/2) - 12811125WaterLevel1Untouched: equ $4000 + (184*128) + (000/2) - 12811126WaterLevel1Touched: equ $4000 + (184*128) + (016/2) - 12811127WaterLevel2Untouched: equ $4000 + (184*128) + (032/2) - 12811128WaterLevel2Touched: equ $4000 + (184*128) + (048/2) - 12811129WaterLevel3Untouched: equ $4000 + (184*128) + (064/2) - 12811130WaterLevel3Touched: equ $4000 + (184*128) + (080/2) - 12811131WaterLevel4Untouched: equ $4000 + (184*128) + (096/2) - 12811132WaterLevel4Touched: equ $4000 + (184*128) + (112/2) - 12811135SetExitButtonHeight:11136 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYtop),a11137 ld (CopyCastleButton+dy),a11138 add a,3111139 ld (CastleOverviewButtonTable + (5*CastleOverviewButtonTableLenghtPerButton) + CastleOverviewWindowButtonYbottom),a11140 ret11142CastleOverviewRecruitCode:11143 call SetScreenOff11145 ld a,211146 ld (AreWeInTavern1OrRecruit2?),a11149 ld a,255 11150 ld (PreviousButtonClicked),a11151 ld ix,GenericButtonTable11152 ld (PreviousButtonClickedIX),ix11153 call SetDefendingAndVisitingHeroButtons11154 ld hl,InGamePalette11155 call SetPalette11157 xor a11158 ld (activepage),a 11160 ld hl,011161 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11162 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11163 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11164 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11165 11166 ld a,%1100 001111167 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 11168 xor a11169 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 11170 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 11171 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 11172 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 11173 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 11175 ld a,13311176 call SetExitButtonHeight11178 xor a11179 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11180 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11181 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11182 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11184 ld a,%1100 0011 11185 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11186 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11187 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11188 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11189 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11190 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11192 call SetRecruitGraphics 11193 call SetResourcesPlayer11194 call SetVisitingAndDefendingHeroesAndArmy11195 call SetAvailableRecruitArmy 11196 call SetVisitingAndDefendingHeroesAndArmy1119811201 ld hl,CopyPage1To011202 call docopy11204 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady11205 call docopy11207 call SetCastleRecruitInterruptHandler11208 11209 .engine: 11210 call SwapAndSetPage 11211 call PopulateControls 1121311218 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11219 or a11220 ld a,(Controls)11221 jr z,.NotInRecruitMAXBUYWindow11222 bit 5,a 11223 call nz,ExitSingleUnitRecruitWindow11224 .NotInRecruitMAXBUYWindow:11225 bit 5,a 11226 jp nz,CastleOverviewCode11228 11229 ld ix,GenericButtonTable 11230 call CheckButtonInteractionControlsNotOnInt11232 call CastleOverviewTavernCode.CheckButtonClickedVisitingAndDefendingHeroesAndArmy 11234 11235 ld ix,(PreviousButtonClickedIX) 11236 ld a,(ix+GenericButtonStatus)11237 push af11238 ld a,(PreviousButtonClicked)11239 cp 25511240 jr z,.EndMarkButton 11241 ld (ix+GenericButtonStatus),%1001 001111242 .EndMarkButton:11243 11245 ld ix,GenericButtonTable11246 call SetGenericButtons 11248 11249 pop af11250 ld ix,(PreviousButtonClickedIX) 11251 ld (ix+GenericButtonStatus),a11252 11255 11256 ld ix,CastleOverviewButtonTable 11257 call CheckButtonMouseInteractionCastle11259 ld ix,CastleOverviewButtonTable11260 call SetCastleButtons 11263 11264 ld ix,RecruitButtonTable 11265 call CheckButtonMouseInteractionRecruitButtons11267 ld ix,RecruitButtonTable11268 call SetRecruitButtons 1127111274 call SwapAndSetPage 11275 ld ix,RecruitButtonTable11276 call SetRecruitButtons 11277 call SwapAndSetPage 11279 11280 ld ix,RecruitButtonMAXBUYTable 11281 call CheckButtonMouseInteractionRecruitMAXBUYButtons11283 ld ix,RecruitButtonMAXBUYTable11284 call SetRecruitMAXBUYButtons 11287 call CheckEndRecruitUnitWindow 11289 call WaitVblank11290 call SetScreenOn11291 jp .engine11293FirstLineintHeightCastleRecruit: equ 12611294SecondLineintHeightCastleRecruit: equ 16011295SetCastleRecruitInterruptHandler:11296 di11297 ld hl,CastleInterruptHandler 11298 ld ($38+1),hl 11299 ld a,$c3 11300 ld ($38),a11301 11302 ld a,(VDP_0) 11303 or 16 11304 ld (VDP_0),a 11305 out ($99),a11306 ld a,12811307 out ($99),a11309 ld a,FirstLineintHeightCastleRecruit11310 ld (CurrentLineIntHeight),a11311 out ($99),a11312 ld a,19+128 11313 ei11314 out ($99),a 11315 ret11317CheckEndRecruitUnitWindow:11318 ld a,(RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton) 11319 or a11320 ret z11322 ld a,(NewPrContr)11323 bit 4,a 11324 ret z11326 ld a,(spat+0) 11327 cp 032 11328 jr c,ExitSingleUnitRecruitWindow11329 cp 032+092 11330 jr nc,ExitSingleUnitRecruitWindow11331 11332 ld a,(spat+1) 11334 add a,0611336 cp 048 11337 jr c,ExitSingleUnitRecruitWindow11338 cp 048+162 11339 ret c11341ExitSingleUnitRecruitWindow:11342 ld hl,011343 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11344 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl11345 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl11346 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl11348 xor a11349 ld (RecruitButtonMAXBUYTable+0*RecruitButtonMAXBUYTableLenghtPerButton),a 11350 ld (RecruitButtonMAXBUYTable+1*RecruitButtonMAXBUYTableLenghtPerButton),a 11351 ld (RecruitButtonMAXBUYTable+2*RecruitButtonMAXBUYTableLenghtPerButton),a 11352 ld (RecruitButtonMAXBUYTable+3*RecruitButtonMAXBUYTableLenghtPerButton),a 11354 ld a,%1100 0011 11355 ld (RecruitButtonTable+0*RecruitButtonTableLenghtPerButton),a 11356 ld (RecruitButtonTable+1*RecruitButtonTableLenghtPerButton),a 11357 ld (RecruitButtonTable+2*RecruitButtonTableLenghtPerButton),a 11358 ld (RecruitButtonTable+3*RecruitButtonTableLenghtPerButton),a 11359 ld (RecruitButtonTable+4*RecruitButtonTableLenghtPerButton),a 11360 ld (RecruitButtonTable+5*RecruitButtonTableLenghtPerButton),a 11362 call SetRecruitGraphics6CreatureWindows 11363 call SetAvailableRecruitArmy 11364 call SetResourcesPlayer11365 call SwapAndSetPage 11366 call SetRecruitGraphics6CreatureWindows 11367 call SetAvailableRecruitArmy 11368 call SetResourcesPlayer11369 11370 pop af 11372 jp ExitVisitingAndDefendingArmyRoutine1137411379SetRecruitMAXBUYButtons: 11380 ld b,(ix+AmountOfButtons)11381 .loop:11382 push bc11383 call .Setbutton11384 pop bc11385 ld de,RecruitButtonMAXBUYTableLenghtPerButton11386 add ix,de11388 djnz .loop11389 ret11391 .Setbutton:11392 bit 7,(ix+RecruitButtonStatus)11393 ret z 11395 bit 0,(ix+RecruitButtonStatus) 11396 res 0,(ix+RecruitButtonStatus) 11397 jr nz,.goCopyButton11398 bit 1,(ix+RecruitButtonStatus)11399 res 1,(ix+RecruitButtonStatus)11400 ret z 11401 .goCopyButton:11403 ld l,(ix+RecruitButton_SYSX_Ontouched)11404 ld h,(ix+RecruitButton_SYSX_Ontouched+1)11405 bit 6,(ix+RecruitButtonStatus)11406 jr nz,.go 11408 ld l,(ix+RecruitButton_SYSX_MovedOver)11409 ld h,(ix+RecruitButton_SYSX_MovedOver+1)11410 bit 5,(ix+RecruitButtonStatus)11411 jr nz,.go 11413 ld l,(ix+RecruitButton_SYSX_Clicked)11414 ld h,(ix+RecruitButton_SYSX_Clicked+1)11415 .go:11417 11418 ld e,(ix+RecruitButton_DYDX)11419 ld d,(ix+RecruitButton_DYDX+1)11422 ld a,(ix+GenericButtonYbottom)11423 sub a,(ix+GenericButtonYtop)11424 ld b,a 11425 ld a,(ix+GenericButtonXright)11426 sub a,(ix+GenericButtonXleft)11427 srl a 11428 ld c,a 1143211433 ld a,ButtonsRecruitBlock 11434 call CopyRamToVramCorrectedCastleOverview 11436 ret11447CheckButtonMouseInteractionRecruitMAXBUYButtons:11448 ld b,(ix+AmountOfButtons)11449 ld de,RecruitButtonMAXBUYTableLenghtPerButton11451 .loop:11452 call .check11453 add ix,de11454 djnz .loop11455 ret11456 11457 .check:11458 bit 7,(ix+RecruitButtonStatus) 11459 ret z 11460 11461 ld a,(spat+0) 11462 cp (ix+RecruitButtonYtop)11463 jr c,.NotOverButton11464 cp (ix+RecruitButtonYbottom)11465 jr nc,.NotOverButton11466 ld a,(spat+1) 11468 add a,0611470 cp (ix+RecruitButtonXleft)11471 jr c,.NotOverButton11472 cp (ix+RecruitButtonXright)11473 jr nc,.NotOverButton11474 1147611482 ld a,(Controls)11483 bit 4,a 11484 jr nz,.MouseOverButtonAndSpacePressed11485 bit 4,(ix+RecruitButtonStatus) 11486 jr nz,.MenuOptionSelected 11487 .MouseHoverOverButton:11488 11489 bit 5,(ix+RecruitButtonStatus) 11490 ld (ix+RecruitButtonStatus),%1010 001111491 ret nz11493 push iy11494 push bc11495 ld bc,SFX_ButtonHoverOver11496 call RePlayerSFX_PlayCh111497 pop bc11498 pop iy11499 ret11501 .MouseOverButtonAndSpacePressed:11502 bit 4,(ix+RecruitButtonStatus) 11503 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit11504 ld a,(NewPrContr)11505 bit 4,a 11506 jr z,.MouseHoverOverButton11508 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:11509 ld (ix+RecruitButtonStatus),%1001 001111510 push iy11511 push bc11512 ld bc,SFX_ButtonClicked11513 call RePlayerSFX_PlayCh111514 pop bc11515 pop iy11516 ret11517 11518 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:11519 ld (ix+RecruitButtonStatus),%1001 001111520 ret11522 .NotOverButton:11523 bit 4,(ix+RecruitButtonStatus) 11524 jr nz,.buttonIsStillLit11525 bit 5,(ix+RecruitButtonStatus) 11526 ret z11527 .buttonIsStillLit:11528 ld (ix+RecruitButtonStatus),%1100 001111529 ret11531 .MenuOptionSelected:11532 pop af 11533 ld (ix+RecruitButtonStatus),%1010 001111534 ld a,b11535 cp 411536 jr z,.BuyButtonPressed11537 cp 311538 jr z,.MaxButtonPressed11539 cp 211540 jr z,.PlusButtonPressed11541 cp 111542 jr z,.MinusButtonPressed11543 ret11545 .MinusButtonPressed:11546 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11547 ld a,l11548 or h11549 ret z 11550 11551 dec hl11552 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11554 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11555 inc hl11556 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11558 call .GoSetAvailableAmountRecruitAmountAndTotalCost11559 call SwapAndSetPage 11560 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11562 .PlusButtonPressed:11563 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11564 ld a,l11565 or h11566 ret z 11568 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11569 inc hl1157111572 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11574 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11575 dec hl1157711578 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11580 call .GoSetAvailableAmountRecruitAmountAndTotalCost11581 call SwapAndSetPage 11582 jp .GoSetAvailableAmountRecruitAmountAndTotalCost11586 .MaxButtonPressed:11587 call SetCastleOverViewFontPage0Y212 11589 call .SetAvailableAmountRecruitAmountAndTotalCost11590 call SwapAndSetPage 11591 call .SetAvailableAmountRecruitAmountAndTotalCost11592 ret11594 .BuyButtonPressed:11595 11596 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11597 ld a,d11598 or e11599 jp z,ExitSingleUnitRecruitWindow 11601 11602 ld c,002 11603 call .CheckAddCreaturesToVisitingHero11604 jr nc,.UnitsAdded 11605 ld c,254 11606 call .CheckAddCreaturesToVisitingHero11607 jr nc,.UnitsAdded 11609 11611 11612 ld hl,$4000 + (132*128) + (160/2) - 12811613 ld de,$0000 + (067*128) + (080/2) - 12811614 ld bc,$0000 + (041*256) + (096/2)11615 ld a,LevelUpBlock 11616 call CopyRamToVramCorrectedCastleOverview 11617 call SwapAndSetPage 11618 .WaitTriggerPressed:11619 call PopulateControls 11625 ld a,(NewPrContr)11626 and %0011 000011627 jr z,.WaitTriggerPressed11628 jp ExitSingleUnitRecruitWindow11632 .UnitsAdded: 11633 call SetResourcesCurrentPlayerinIX11634 11635 ld l,(ix+0)11636 ld h,(ix+1) 11637 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11638 xor a11639 sbc hl,de11640 ld (ix+0),l11641 ld (ix+1),h 11643 ld l,(ix+6)11644 ld h,(ix+7) 11645 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)11646 xor a11647 sbc hl,de11648 ld (ix+6),l11649 ld (ix+7),h 11651 ld l,(ix+8)11652 ld h,(ix+9) 11653 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)11654 xor a11655 sbc hl,de11656 ld (ix+8),l11657 ld (ix+9),h 11659 call .SubtractPurchasedUnitsFromCastle11660 jp ExitSingleUnitRecruitWindow11662 .CheckAddCreaturesToVisitingHero:11663 call SetVisitingOrDefendingHeroInIX 11664 ret c 11666 ld a,(SelectedCastleRecruitLevelUnit)11667 ld b,a11668 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)11670 11671 ld a,(SelectedCastleRecruitLevelUnit)11672 cp (ix+HeroUnits+0) 11673 jp z,.Slot1SameUnit11674 cp (ix+HeroUnits+3) 11675 jp z,.Slot2SameUnit11676 cp (ix+HeroUnits+6) 11677 jp z,.Slot3SameUnit11678 cp (ix+HeroUnits+9) 11679 jp z,.Slot4SameUnit11680 cp (ix+HeroUnits+12) 11681 jp z,.Slot5SameUnit11682 cp (ix+HeroUnits+15) 11683 jp z,.Slot6SameUnit11684 11685 11686 xor a11687 cp (ix+HeroUnits+0) 11688 jp z,.Slot1IsEmpty11689 cp (ix+HeroUnits+3) 11690 jp z,.Slot2IsEmpty11691 cp (ix+HeroUnits+6) 11692 jp z,.Slot3IsEmpty11693 cp (ix+HeroUnits+9) 11694 jp z,.Slot4IsEmpty11695 cp (ix+HeroUnits+12) 11696 jp z,.Slot5IsEmpty11697 cp (ix+HeroUnits+15) 11698 jp z,.Slot6IsEmpty11699 scf11700 ret11701 11702 .Slot1SameUnit:11703 ld e,(ix+HeroUnits+1) 11704 ld d,(ix+HeroUnits+2) 11705 add hl,de11706 ld (ix+HeroUnits+1),l 11707 ld (ix+HeroUnits+2),h 11708 ret11709 .Slot2SameUnit:11710 ld e,(ix+HeroUnits+4) 11711 ld d,(ix+HeroUnits+5) 11712 add hl,de11713 ld (ix+HeroUnits+4),l 11714 ld (ix+HeroUnits+5),h 11715 ret11716 .Slot3SameUnit:11717 ld e,(ix+HeroUnits+7) 11718 ld d,(ix+HeroUnits+8) 11719 add hl,de11720 ld (ix+HeroUnits+7),l 11721 ld (ix+HeroUnits+8),h 11722 ret11723 .Slot4SameUnit:11724 ld e,(ix+HeroUnits+10) 11725 ld d,(ix+HeroUnits+11) 11726 add hl,de11727 ld (ix+HeroUnits+10),l 11728 ld (ix+HeroUnits+11),h 11729 ret11730 .Slot5SameUnit:11731 ld e,(ix+HeroUnits+13) 11732 ld d,(ix+HeroUnits+14) 11733 add hl,de11734 ld (ix+HeroUnits+13),l 11735 ld (ix+HeroUnits+14),h 11736 ret11737 .Slot6SameUnit:11738 ld e,(ix+HeroUnits+16) 11739 ld d,(ix+HeroUnits+17) 11740 add hl,de11741 ld (ix+HeroUnits+16),l 11742 ld (ix+HeroUnits+17),h 11743 ret11745 .Slot1IsEmpty:11746 ld (ix+HeroUnits+0),b 11747 ld (ix+HeroUnits+1),l 11748 ld (ix+HeroUnits+2),h 11749 ret11750 .Slot2IsEmpty:11751 ld (ix+HeroUnits+3),b 11752 ld (ix+HeroUnits+4),l 11753 ld (ix+HeroUnits+5),h 11754 ret11755 .Slot3IsEmpty:11756 ld (ix+HeroUnits+6),b 11757 ld (ix+HeroUnits+7),l 11758 ld (ix+HeroUnits+8),h 11759 ret11760 .Slot4IsEmpty:11761 ld (ix+HeroUnits+9),b 11762 ld (ix+HeroUnits+10),l 11763 ld (ix+HeroUnits+11),h 11764 ret11765 .Slot5IsEmpty:11766 ld (ix+HeroUnits+12),b 11767 ld (ix+HeroUnits+13),l 11768 ld (ix+HeroUnits+14),h 11769 ret11770 .Slot6IsEmpty:11771 ld (ix+HeroUnits+15),b 11772 ld (ix+HeroUnits+16),l 11773 ld (ix+HeroUnits+17),h 11774 ret11779.SubtractPurchasedUnitsFromCastle:11780 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11781 ld a,(SelectedCastleRecruitUnitWindow)11782 cp 611783 jr nz,.EndCheckUnitLevel1 11784 ld l,(iy+CastleLevel1UnitsAvail+00)11785 ld h,(iy+CastleLevel1UnitsAvail+01)11786 sbc hl,de11787 ld (iy+CastleLevel1UnitsAvail+00),l11788 ld (iy+CastleLevel1UnitsAvail+01),h11789 ret11790 .EndCheckUnitLevel1:11792 cp 511793 jr nz,.EndCheckUnitLevel2 11794 ld l,(iy+CastleLevel1UnitsAvail+02)11795 ld h,(iy+CastleLevel1UnitsAvail+03)11796 sbc hl,de11797 ld (iy+CastleLevel1UnitsAvail+02),l11798 ld (iy+CastleLevel1UnitsAvail+03),h11799 ret11800 .EndCheckUnitLevel2:11802 cp 411803 jr nz,.EndCheckUnitLevel3 11804 ld l,(iy+CastleLevel1UnitsAvail+04)11805 ld h,(iy+CastleLevel1UnitsAvail+05)11806 sbc hl,de11807 ld (iy+CastleLevel1UnitsAvail+04),l11808 ld (iy+CastleLevel1UnitsAvail+05),h11809 ret11810 .EndCheckUnitLevel3:11812 cp 311813 jr nz,.EndCheckUnitLevel411814 ld l,(iy+CastleLevel1UnitsAvail+06)11815 ld h,(iy+CastleLevel1UnitsAvail+07)11816 sbc hl,de11817 ld (iy+CastleLevel1UnitsAvail+06),l11818 ld (iy+CastleLevel1UnitsAvail+07),h11819 ret11820 .EndCheckUnitLevel4:11822 cp 211823 jr nz,.EndCheckUnitLevel511824 ld l,(iy+CastleLevel1UnitsAvail+08)11825 ld h,(iy+CastleLevel1UnitsAvail+09)11826 sbc hl,de11827 ld (iy+CastleLevel1UnitsAvail+08),l11828 ld (iy+CastleLevel1UnitsAvail+09),h11829 ret11830 .EndCheckUnitLevel5:11832 cp 111833 jr nz,.EndCheckUnitLevel611834 ld l,(iy+CastleLevel1UnitsAvail+10)11835 ld h,(iy+CastleLevel1UnitsAvail+11)11836 sbc hl,de11837 ld (iy+CastleLevel1UnitsAvail+10),l11838 ld (iy+CastleLevel1UnitsAvail+11),h11839 ret11840 .EndCheckUnitLevel6:11841 ret11848.SetAvailableAmountRecruitAmountAndTotalCost:11849 11850 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11851 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11852 add hl,de11853 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11854 ld hl,011855 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11857 .GoSetAvailableAmountRecruitAmountAndTotalCost:11859 11860 ld hl,$4000 + (118*128) + (040/2) - 12811861 ld de,$0000 + (103*128) + (088/2) - 12811862 ld bc,$0000 + (005*256) + (026/2)11863 ld a,ButtonsRecruitBlock 11864 call CopyRamToVramCorrectedCastleOverview 11866 11867 ld hl,$4000 + (086*128) + (122/2) - 12811868 ld de,$0000 + (071*128) + (170/2) - 12811869 ld bc,$0000 + (037*256) + (036/2)11870 ld a,ButtonsRecruitBlock 11871 call CopyRamToVramCorrectedCastleOverview 11873 call .SetTotalCost 11875 11876 call SetResourcesCurrentPlayerinIX11877 11878 ld l,(ix+0)11879 ld h,(ix+1) 11880 ld de,(SelectedCastleRecruitLevelUnitTotalGoldCost)11881 xor a11882 sbc hl,de 11883 jr nc,.EndCheckEnoughGoldToRecruitALLunits11885 11886 ld a,(SelectedCastleRecruitLevelUnit)11887 call SetCostSelectedCreatureInHL 11888 push hl 11889 call SetResourcesCurrentPlayerinIX11890 11891 ld c,(ix+0)11892 ld b,(ix+1) 11893 pop de 11895 call DivideBCbyDE 11897 11898 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11899 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11900 add hl,de11901 sbc hl,bc11902 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11903 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11904 call .SetTotalCost11905 .EndCheckEnoughGoldToRecruitALLunits:11910 11911 call SetResourcesCurrentPlayerinIX11912 11913 ld l,(ix+6)11914 ld h,(ix+7) 11915 ld de,(SelectedCastleRecruitLevelUnitTotalCostGems)11916 xor a11917 sbc hl,de 11918 jr nc,.EndCheckEnoughGemsToRecruitALLunits11920 11921 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11922 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11923 add hl,de11924 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11925 ld hl,011926 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11928 11929 ld a,(SelectedCastleRecruitLevelUnit)11930 call SetGemsCostSelectedCreatureInHL 11931 push hl 11932 call SetResourcesCurrentPlayerinIX11933 11934 ld c,(ix+6)11935 ld b,(ix+7) 11936 pop de 11938 call DivideBCbyDE 11940 11941 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11942 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11943 add hl,de11944 sbc hl,bc11945 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11946 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11947 call .SetTotalCost 11948 .EndCheckEnoughGemsToRecruitALLunits:11955 11956 call SetResourcesCurrentPlayerinIX11957 11958 ld l,(ix+8)11959 ld h,(ix+9) 11960 ld de,(SelectedCastleRecruitLevelUnitTotalCostRubies)11961 xor a11962 sbc hl,de 11963 jr nc,.EndCheckEnoughRubiesToRecruitALLunits11965 11966 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11967 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11968 add hl,de11969 ld (SelectedCastleRecruitLevelUnitRecruitAmount),hl11970 ld hl,011971 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11973 11974 ld a,(SelectedCastleRecruitLevelUnit)11975 call SetRubiesCostSelectedCreatureInHL 11976 push hl 11977 call SetResourcesCurrentPlayerinIX11978 11979 ld c,(ix+8)11980 ld b,(ix+9) 11981 pop de 11983 call DivideBCbyDE 11985 11986 ld hl,(SelectedCastleRecruitLevelUnitAmountAvailable)11987 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)11988 add hl,de11989 sbc hl,bc11990 ld (SelectedCastleRecruitLevelUnitAmountAvailable),hl11991 ld (SelectedCastleRecruitLevelUnitRecruitAmount),bc11992 call .SetTotalCost11993 .EndCheckEnoughRubiesToRecruitALLunits:11996 call ShowRecruitWindowForSelectedUnit.amountavailable11997 call ShowRecruitWindowForSelectedUnit.recruitamount11999 ld hl,(SelectedCastleRecruitLevelUnitRecruitAmount)12000 ld a,h12001 or l12002 ret z12004 call ShowRecruitWindowForSelectedUnit.totalcost12005 call ShowRecruitWindowForSelectedUnit.TotalGemscost12006 call ShowRecruitWindowForSelectedUnit.TotalRubiescost12007 ret12009 .SetTotalCost:12010 12011 ld a,(SelectedCastleRecruitLevelUnit)12012 call SetCostSelectedCreatureInHL 12013 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12014 call MultiplyHlWithDE12015 ld (SelectedCastleRecruitLevelUnitTotalGoldCost),hl12017 12018 ld a,(SelectedCastleRecruitLevelUnit)12019 call SetGemsCostSelectedCreatureInHL 12020 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12021 call MultiplyHlWithDE12022 ld (SelectedCastleRecruitLevelUnitTotalCostGems),hl12024 12025 ld a,(SelectedCastleRecruitLevelUnit)12026 call SetRubiesCostSelectedCreatureInHL 12027 ld de,(SelectedCastleRecruitLevelUnitRecruitAmount)12028 call MultiplyHlWithDE12029 ld (SelectedCastleRecruitLevelUnitTotalCostRubies),hl12030 ret12045SetRecruitButtons: 12046 ld b,612047 .loop:12048 push bc12049 call .Setbutton12050 pop bc12051 ld de,RecruitButtonTableLenghtPerButton12052 add ix,de12054 djnz .loop12055 ret12057 .Setbutton:12058 bit 7,(ix+RecruitButtonStatus)12059 ret z 12061 bit 0,(ix+RecruitButtonStatus) 12062 res 0,(ix+RecruitButtonStatus) 12063 jr nz,.goCopyButton12064 bit 1,(ix+RecruitButtonStatus)12065 res 1,(ix+RecruitButtonStatus)12066 ret z 12067 .goCopyButton:12069 ld l,(ix+RecruitButton_SYSX_Ontouched)12070 ld h,(ix+RecruitButton_SYSX_Ontouched+1)12071 bit 6,(ix+RecruitButtonStatus)12072 jr nz,.go 12074 ld l,(ix+RecruitButton_SYSX_MovedOver)12075 ld h,(ix+RecruitButton_SYSX_MovedOver+1)12076 bit 5,(ix+RecruitButtonStatus)12077 jr nz,.go 12079 ld l,(ix+RecruitButton_SYSX_Clicked)12080 ld h,(ix+RecruitButton_SYSX_Clicked+1)12081 .go:12083 12084 ld e,(ix+RecruitButton_DYDX)12085 ld d,(ix+RecruitButton_DYDX+1)12087 ld bc,$0000 + (009*256) + (076/2) 12088 ld a,ButtonsRecruitBlock 12089 call CopyRamToVramCorrectedCastleOverview 12091 ret12104CheckButtonMouseInteractionRecruitButtons:12105 ld b,612106 ld de,RecruitButtonTableLenghtPerButton12108 .loop:12109 call .check12110 add ix,de12111 djnz .loop12112 ret12113 12114 .check:12115 bit 7,(ix+RecruitButtonStatus) 12116 ret z 12117 12118 ld a,(spat+0) 12119 cp (ix+RecruitButtonYtop)12120 jr c,.NotOverButton12121 cp (ix+RecruitButtonYbottom)12122 jr nc,.NotOverButton12123 ld a,(spat+1) 12125 add a,0612127 cp (ix+RecruitButtonXleft)12128 jr c,.NotOverButton12129 cp (ix+RecruitButtonXright)12130 jr nc,.NotOverButton12131 1213312139 ld a,(Controls)12140 bit 4,a 12141 jr nz,.MouseOverButtonAndSpacePressed12142 bit 4,(ix+RecruitButtonStatus) 12143 jr nz,.MenuOptionSelected 12144 .MouseHoverOverButton:12145 12146 bit 5,(ix+RecruitButtonStatus) 12147 ld (ix+RecruitButtonStatus),%1010 001112148 ret nz12150 push iy12151 push bc12152 ld bc,SFX_ButtonHoverOver12153 call RePlayerSFX_PlayCh112154 pop bc12155 pop iy12156 ret12158 .MouseOverButtonAndSpacePressed:12159 bit 4,(ix+RecruitButtonStatus) 12160 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12161 ld a,(NewPrContr)12162 bit 4,a 12163 jr z,.MouseHoverOverButton12165 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12166 ld (ix+RecruitButtonStatus),%1001 001112167 push iy12168 push bc12169 ld bc,SFX_ButtonClicked12170 call RePlayerSFX_PlayCh112171 pop bc12172 pop iy12173 ret12175 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12176 ld (ix+RecruitButtonStatus),%1001 001112177 ret12179 .NotOverButton:12180 bit 4,(ix+RecruitButtonStatus) 12181 jr nz,.buttonIsStillLit12182 bit 5,(ix+RecruitButtonStatus) 12183 ret z12184 .buttonIsStillLit:12185 ld (ix+RecruitButtonStatus),%1100 001112186 ret12188 .MenuOptionSelected:12189 pop af 12193 push bc 12194 call ShowRecruitWindowForSelectedUnit12195 call SwapAndSetPage 12196 pop bc12197 call ShowRecruitWindowForSelectedUnit12198 ret12211 12212 12229CastleOverviewBuildCode: 12230 call SetScreenOff12232 call Set9BuildButtons 12234 ld hl,CastleOverviewPalette12235 call SetPalette12237 xor a12238 ld (activepage),a 12240 call SetBuildGraphics 12241 call SetResourcesPlayer12243 ld hl,CopyPage1To012244 call docopy12246 ld a,%1100 001112247 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 12248 xor a12249 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 12250 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 12251 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 12252 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 12253 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 12255 ld a,%1100 001112256 ld (BuildButtonTable+0*BuildButtonTableLenghtPerButton),a 12257 ld (BuildButtonTable+1*BuildButtonTableLenghtPerButton),a 12258 ld (BuildButtonTable+2*BuildButtonTableLenghtPerButton),a 12259 ld (BuildButtonTable+3*BuildButtonTableLenghtPerButton),a 12260 ld (BuildButtonTable+4*BuildButtonTableLenghtPerButton),a 12261 ld (BuildButtonTable+5*BuildButtonTableLenghtPerButton),a 12262 ld (BuildButtonTable+6*BuildButtonTableLenghtPerButton),a 12263 ld (BuildButtonTable+7*BuildButtonTableLenghtPerButton),a 12264 ld (BuildButtonTable+8*BuildButtonTableLenghtPerButton),a 12266 ld hl,SetSingleBuildButtonColor.putgreen12267 ld de,SingleBuildButtonTable12268 ld bc,712269 ldir12271 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12272 call docopy12274 call SetCastleBuildInterruptHandler12275 12276 .engine: 12277 call SwapAndSetPage 12278 call PopulateControls 1228012285 ld a,(Controls)12286 bit 5,a 12287 jp nz,CastleOverviewCode12289 12290 ld ix,CastleOverviewButtonTable 12291 call CheckButtonMouseInteractionCastle12293 ld ix,CastleOverviewButtonTable12294 call SetCastleButtons 12297 12298 ld ix,BuildButtonTable 12299 call CheckButtonMouseInteractionBuildButtons12301 ld ix,BuildButtonTable12302 call SetBuildButtons 12303 call SetTextBuildingWhenClicked 12306 call SetVandXSymbols12309 12310 ld ix,SingleBuildButtonTable 12311 call CheckButtonMouseInteractionSingleBuildButton12313 ld ix,SingleBuildButtonTable12314 call SetSingleBuildButton 12317 call WaitVblank12318 call SetScreenOn12319 jp .engine12321lineintheightCastleBuild: equ 1412322SetCastleBuildInterruptHandler:12323 di12324 ld hl,CastleInterruptHandler 12325 ld ($38+1),hl 12326 ld a,$c3 12327 ld ($38),a12328 12329 ld a,(VDP_0) 12330 or 16 12331 ld (VDP_0),a 12332 out ($99),a12333 ld a,12812334 out ($99),a12336 ld a,lineintheightCastleBuild12337 ld (CurrentLineIntHeight),a12338 out ($99),a12339 ld a,19+128 12340 ei12341 out ($99),a 12342 ret12344xOffsetVandX: equ 3912345YOffsetVandX: equ +012347BlueBuildButton: equ $4000 + (000*128) + (000/2) - 12812348GreenBuildButton: equ $4000 + (000*128) + (150/2) - 12812349RedBuildButton: equ $4000 + (038*128) + (050/2) - 12812352SetVandXSymbols:12353 12354 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12355 ld de,GreenBuildButton12356 call CompareHLwithDE12357 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12358 call z,.SetGreenButton12360 12361 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12362 ld de,GreenBuildButton12363 call CompareHLwithDE12364 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12365 call z,.SetGreenButton12367 12368 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12369 ld de,GreenBuildButton12370 call CompareHLwithDE12371 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12372 call z,.SetGreenButton12374 12375 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12376 ld de,GreenBuildButton12377 call CompareHLwithDE12378 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12379 call z,.SetGreenButton12381 12382 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12383 ld de,GreenBuildButton12384 call CompareHLwithDE12385 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12386 call z,.SetGreenButton12388 12389 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12390 ld de,GreenBuildButton12391 call CompareHLwithDE12392 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12393 call z,.SetGreenButton12395 12396 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12397 ld de,GreenBuildButton12398 call CompareHLwithDE12399 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12400 call z,.SetGreenButton12402 12403 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12404 ld de,GreenBuildButton12405 call CompareHLwithDE12406 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12407 call z,.SetGreenButton12409 12410 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12411 ld de,GreenBuildButton12412 call CompareHLwithDE12413 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12414 call z,.SetGreenButton12416 12417 ld hl,(BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton))12418 ld de,RedBuildButton12419 call CompareHLwithDE12420 ld de,256*(042 + YOffsetVandX) + (004 + xOffsetVandX)12421 call z,.SetRedButton12423 12424 ld hl,(BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton))12425 ld de,RedBuildButton12426 call CompareHLwithDE12427 ld de,256*(042 + YOffsetVandX) + (064 + xOffsetVandX)12428 call z,.SetRedButton12430 12431 ld hl,(BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton))12432 ld de,RedBuildButton12433 call CompareHLwithDE12434 ld de,256*(042 + YOffsetVandX) + (124 + xOffsetVandX)12435 call z,.SetRedButton12437 12438 ld hl,(BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton))12439 ld de,RedBuildButton12440 call CompareHLwithDE12441 ld de,256*(092 + YOffsetVandX) + (004 + xOffsetVandX)12442 call z,.SetRedButton12444 12445 ld hl,(BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton))12446 ld de,RedBuildButton12447 call CompareHLwithDE12448 ld de,256*(092 + YOffsetVandX) + (064 + xOffsetVandX)12449 call z,.SetRedButton12451 12452 ld hl,(BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton))12453 ld de,RedBuildButton12454 call CompareHLwithDE12455 ld de,256*(092 + YOffsetVandX) + (124 + xOffsetVandX)12456 call z,.SetRedButton12458 12459 ld hl,(BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton))12460 ld de,RedBuildButton12461 call CompareHLwithDE12462 ld de,256*(142 + YOffsetVandX) + (004 + xOffsetVandX)12463 call z,.SetRedButton12465 12466 ld hl,(BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton))12467 ld de,RedBuildButton12468 call CompareHLwithDE12469 ld de,256*(142 + YOffsetVandX) + (064 + xOffsetVandX)12470 call z,.SetRedButton12472 12473 ld hl,(BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton))12474 ld de,RedBuildButton12475 call CompareHLwithDE12476 ld de,256*(142 + YOffsetVandX) + (124 + xOffsetVandX)12477 call z,.SetRedButton12478 ret12480.SetGreenButton:12481 ld hl,$4000 + (114*128) + (200/2) - 128 12482 ld bc,$0000 + (017*256) + (018/2) 12483 ld a,ButtonsBuildBlock 12484 call CopyTransparantImage12485 ret12487.SetRedButton:12488 ld hl,$4000 + (115*128) + (218/2) - 128 12489 ld bc,$0000 + (016*256) + (014/2) 12490 ld a,ButtonsBuildBlock 12491 call CopyTransparantImage12492 ret12495CopyTransparantImageEXX:12496 ex af,af'12497 exx1249812503CopyTransparantImage: 1250412505 push af12506 ld a,b12507 ld (CopyCastleButton2+ny),a12508 ld a,c12509 add a,a12510 ld (CopyCastleButton2+nx),a12511 pop af12513 push de12514 ld de,$8000 + (212*128) + (000/2) - 128 12515 call CopyRamToVramCorrectedWithoutActivePageSetting 12516 pop de12518 ld a,(activepage)12519 xor 112520 ld (CopyCastleButton2+dPage),a12522 ld a,d12523 ld (CopyCastleButton2+dy),a12524 ld a,e12525 ld (CopyCastleButton2+dx),a12527 ld hl,CopyCastleButton212528 call docopy12530 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady12531 jp docopy12533CheckButtonMouseInteractionSingleBuildButton: 12534 bit 7,(ix+BuildButtonStatus) 12535 ret z 12536 12537 ld a,(spat+0) 12538 cp (ix+BuildButtonYtop)12539 jr c,.NotOverButton12540 cp (ix+BuildButtonYbottom)12541 jr nc,.NotOverButton12542 ld a,(spat+1) 12544 add a,0612546 cp (ix+BuildButtonXleft)12547 jr c,.NotOverButton12548 cp (ix+BuildButtonXright)12549 jr nc,.NotOverButton12550 1255212558 ld a,(Controls)12559 bit 4,a 12560 jr nz,.MouseOverButtonAndSpacePressed12561 bit 4,(ix+BuildButtonStatus) 12562 jr nz,.MenuOptionSelected 12563 .MouseHoverOverButton:12564 12565 bit 5,(ix+BuildButtonStatus) 12566 ld (ix+BuildButtonStatus),%1010 001112567 ret nz12569 push iy12570 push bc12571 ld bc,SFX_ButtonHoverOver12572 call RePlayerSFX_PlayCh112573 pop bc12574 pop iy12575 ret12576 .MouseOverButtonAndSpacePressed:12577 bit 4,(ix+BuildButtonStatus) 12578 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit12579 ld a,(NewPrContr)12580 bit 4,a 12581 jr z,.MouseHoverOverButton12583 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:12584 ld (ix+BuildButtonStatus),%1001 001112585 push iy12586 push bc12587 ld bc,SFX_ButtonClicked12588 call RePlayerSFX_PlayCh112589 pop bc12590 pop iy12591 ret12592 12593 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:12594 ld (ix+BuildButtonStatus),%1001 001112595 ret12597 .NotOverButton:12598 bit 4,(ix+BuildButtonStatus) 12599 jr nz,.buttonIsStillLit12600 bit 5,(ix+BuildButtonStatus) 12601 ret z12602 .buttonIsStillLit:12603 ld (ix+BuildButtonStatus),%1100 001112604 ret12606 .MenuOptionSelected:12607 12609 12610 ld (ix+BuildButtonStatus),%1010 001112612 12613 ld a,(SingleBuildButtonTable+1)12614 ld e,a12615 ld a,(SingleBuildButtonTable+2)12616 ld d,a12617 ld hl,$4000 + (148*128) + (144/2) - 12812618 xor a12619 sbc hl,de12620 ret nz12621 12623 ld a,(WhichBuildingWasClicked?)12624 cp 1 12625 jr z,.CityWalls12626 cp 2 12627 jr z,.BarracksTower12628 cp 3 12629 jr z,.Barracks12630 cp 4 12631 jr z,.Mine12632 cp 5 12633 jr z,.Sawmill12634 cp 6 12635 jr z,.MagicGuild12636 cp 7 12637 jr z,.Tavern12638 cp 8 12639 jr z,.MarketPlace12640 cp 9 12641 jr z,.Castle12643 .CityWalls: 12644 .Castle:12645 ld a,(iy+CastleLevel)12646 cp 512647 jr z,.CityWallsNewBuilding12648 inc (iy+CastleLevel)12649 jp PurchaseBuilding12650 .CityWallsNewBuilding:12651 ld a,8 12652 ld (SetNewBuilding?),a12653 jp PurchaseBuilding12655 .MarketPlace: 12656 ld a,7 12657 ld (SetNewBuilding?),a12658 jp PurchaseBuilding12660 .Tavern:12661 ld a,6 12662 ld (SetNewBuilding?),a12663 jp PurchaseBuilding12665 .MagicGuild:12666 ld a,(iy+CastleMageGuildLevel)12667 or a12668 jr z,.MagicGuildNewBuilding12669 inc (iy+CastleMageGuildLevel)12670 jp PurchaseBuilding12671 .MagicGuildNewBuilding:12672 ld a,5 12673 ld (SetNewBuilding?),a12674 jp PurchaseBuilding12676 .Sawmill:12677 ld a,(iy+CastleSawmillLevel)12678 or a12679 jr z,.SawmillNewBuilding12680 inc (iy+CastleSawmillLevel)12681 jp PurchaseBuilding12682 .SawmillNewBuilding:12683 ld a,3 12684 ld (SetNewBuilding?),a12685 jp PurchaseBuilding12687 .Mine:12688 ld a,(iy+CastleMineLevel)12689 or a12690 jr z,.MineNewBuilding12691 inc (iy+CastleMineLevel)12692 jp PurchaseBuilding12693 .MineNewBuilding:12694 ld a,4 12695 ld (SetNewBuilding?),a12696 jp PurchaseBuilding12698 .BarracksTower:12699 .Barracks:12700 ld a,(iy+CastleBarracksLevel)12701 or a12702 jr z,.BarracksNewBuilding12703 cp 512704 jr z,.BarracksTowerNewBuilding12705 inc (iy+CastleBarracksLevel)12706 jp PurchaseBuilding12707 .BarracksTowerNewBuilding:12708 ld a,2 12709 ld (SetNewBuilding?),a12710 jp PurchaseBuilding12711 .BarracksNewBuilding:12712 ld a,1 12713 ld (SetNewBuilding?),a12714 jp PurchaseBuilding12716PurchaseBuilding:12717 if UnlimitedBuildsPerTurn?=012718 ld (iy+AlreadyBuiltThisTurn?),112719 endif12721 12722 ld ix,(CheckRequirementsWhichBuilding?)12723 ld e,(ix+0)12724 ld d,(ix+1) 12725 call SetResourcesCurrentPlayerinIX12726 ld l,(ix+0)12727 ld h,(ix+1) 12728 xor a12729 sbc hl,de12730 ld (ix+0),l12731 ld (ix+1),h 12733 12734 ld ix,(CheckRequirementsWhichBuilding?)12735 ld e,(ix+2)12736 ld d,(ix+3) 12737 call SetResourcesCurrentPlayerinIX12738 ld l,(ix+2)12739 ld h,(ix+3) 12740 xor a12741 sbc hl,de12742 ld (ix+2),l12743 ld (ix+3),h 12745 12746 ld ix,(CheckRequirementsWhichBuilding?)12747 ld e,(ix+4)12748 ld d,(ix+5) 12749 call SetResourcesCurrentPlayerinIX12750 ld l,(ix+4)12751 ld h,(ix+5) 12752 xor a12753 sbc hl,de12754 ld (ix+4),l12755 ld (ix+5),h 12757 12758 ld ix,(CheckRequirementsWhichBuilding?)12759 ld e,(ix+6)12760 ld d,(ix+7) 12761 call SetResourcesCurrentPlayerinIX12762 ld l,(ix+6)12763 ld h,(ix+7) 12764 xor a12765 sbc hl,de12766 ld (ix+6),l12767 ld (ix+7),h 12769 12770 ld ix,(CheckRequirementsWhichBuilding?)12771 ld e,(ix+8)12772 ld d,(ix+9) 12773 call SetResourcesCurrentPlayerinIX12774 ld l,(ix+8)12775 ld h,(ix+9) 12776 xor a12777 sbc hl,de12778 ld (ix+8),l12779 ld (ix+9),h 12781 pop af12782 jp CastleOverviewCode127831278612799SetSingleBuildButton: 12800 bit 7,(ix+BuildButtonStatus)12801 ret z 12803 bit 0,(ix+BuildButtonStatus) 12804 res 0,(ix+BuildButtonStatus) 12805 jr nz,.goCopyButton12806 bit 1,(ix+BuildButtonStatus)12807 res 1,(ix+BuildButtonStatus)12808 ret z 12809 .goCopyButton:12811 ld l,(ix+BuildButton_SYSX_Ontouched)12812 ld h,(ix+BuildButton_SYSX_Ontouched+1)12813 bit 6,(ix+BuildButtonStatus)12814 jr nz,.go 12816 ld l,(ix+BuildButton_SYSX_MovedOver)12817 ld h,(ix+BuildButton_SYSX_MovedOver+1)12818 bit 5,(ix+BuildButtonStatus)12819 jr nz,.go 12821 ld l,(ix+BuildButton_SYSX_Clicked)12822 ld h,(ix+BuildButton_SYSX_Clicked+1)12823 .go:12825 12826 ld de,$0000 + (168*128) + (180/2) - 128 12827 ld bc,$0000 + (009*256) + (072/2) 12828 ld a,ButtonsBuildBlock 12829 call CopyRamToVramCorrectedCastleOverview 12831 ret12847Set9BuildButtons: 12848 call .Castle12849 call .MarketPlace12850 call .Tavern12851 call .MagicGuild12852 call .Sawmill12853 call .Mine12854 call .Barracks12855 call .BarracksTower12856 call .CityWalls12857 ret12859 .CityWalls:12860 ld de,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)12861 ld a,(iy+CastleLevel)12862 cp 612863 jp z,.Green12864 bit 0,(iy+AlreadyBuiltThisTurn?)12865 jp nz,.Red12866 ld hl,CityWallsCost12867 ld (CheckRequirementsWhichBuilding?),hl12868 jp .CheckRequirementsBuildingMetCityWalls12870 .BarracksTower:12871 ld de,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)12872 ld a,(iy+CastleBarracksLevel)12873 cp 612874 jp z,.Green12875 bit 0,(iy+AlreadyBuiltThisTurn?)12876 jp nz,.Red12877 ld hl,BarracksTowerCost12878 ld (CheckRequirementsWhichBuilding?),hl12879 jp .CheckRequirementsBuildingMetBarracksTower12881 .Barracks:12882 ld de,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)12883 ld a,(iy+CastleBarracksLevel)12884 cp 512885 jp nc,.Green12886 bit 0,(iy+AlreadyBuiltThisTurn?)12887 jp nz,.Red1288812894 ld a,(iy+CastleBarracksLevel)12895 or a12896 ld hl,BarracksLevel1Cost12897 jp z,.BarracksLevelFound12898 dec a12899 ld hl,BarracksLevel2Cost12900 jp z,.BarracksLevelFound12901 dec a12902 ld hl,BarracksLevel3Cost12903 jp z,.BarracksLevelFound12904 dec a12905 ld hl,BarracksLevel4Cost12906 jp z,.BarracksLevelFound12907 ld hl,BarracksLevel5Cost12908 .BarracksLevelFound:12919 ld (CheckRequirementsWhichBuilding?),hl12920 jp .CheckRequirementsBuildingMet12923 .Mine:12924 ld de,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)12925 ld a,(iy+CastleMineLevel)12926 cp 312927 jp z,.Green12928 bit 0,(iy+AlreadyBuiltThisTurn?)12929 jp nz,.Red1293012935 ld a,(iy+CastleMineLevel)12936 or a12937 ld hl,MineLevel1Cost12938 jp z,.MineLevelFound12939 dec a12940 ld hl,MineLevel2Cost12941 jp z,.MineLevelFound12942 ld hl,MineLevel3Cost12943 .MineLevelFound:12954 ld (CheckRequirementsWhichBuilding?),hl12955 jp .CheckRequirementsBuildingMet12957 .Sawmill:12958 ld de,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)12959 ld a,(iy+CastleSawmillLevel)12960 cp 312961 jp z,.Green12962 bit 0,(iy+AlreadyBuiltThisTurn?)12963 jp nz,.Red1296412968 ld a,(iy+CastleSawmillLevel)12969 or a12970 ld hl,SawmillLevel1Cost12971 jp z,.SawmillLevelFound12972 dec a12973 ld hl,SawmillLevel2Cost12974 jp z,.SawmillLevelFound12975 ld hl,SawmillLevel3Cost12976 .SawmillLevelFound:12984 ld (CheckRequirementsWhichBuilding?),hl12985 jp .CheckRequirementsBuildingMet12987 .MagicGuild:12988 ld de,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)12989 ld a,(iy+CastleMageGuildLevel)12990 cp 412991 jp z,.Green12992 bit 0,(iy+AlreadyBuiltThisTurn?)12993 jp nz,.Red1299412998 ld a,(iy+CastleMageGuildLevel)12999 or a13000 ld hl,MagicGuildLevel1Cost13001 jp z,.MagicGuildLevelFound13002 dec a13003 ld hl,MagicGuildLevel2Cost13004 jp z,.MagicGuildLevelFound13005 dec a13006 ld hl,MagicGuildLevel3Cost13007 jp z,.MagicGuildLevelFound13008 ld hl,MagicGuildLevel4Cost13009 .MagicGuildLevelFound:13021 ld (CheckRequirementsWhichBuilding?),hl13022 jp .CheckRequirementsBuildingMet13024 .Tavern:13025 ld de,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)13026 bit 0,(iy+CastleTavern)13027 jp nz,.Green13028 bit 0,(iy+AlreadyBuiltThisTurn?)13029 jp nz,.Red13030 ld hl,TavernCost13031 ld (CheckRequirementsWhichBuilding?),hl13032 jp .CheckRequirementsBuildingMet13033 13034 .MarketPlace:13035 ld de,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)13036 bit 0,(iy+CastleMarket)13037 jp nz,.Green13038 bit 0,(iy+AlreadyBuiltThisTurn?)13039 jp nz,.Red13040 ld hl,MarketPlaceCost13041 ld (CheckRequirementsWhichBuilding?),hl13042 jp .CheckRequirementsBuildingMet13043 13044 .Castle:13045 ld de,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)13046 bit 0,(iy+AlreadyBuiltThisTurn?)13047 jp nz,.Red13049 ld a,(iy+CastleLevel)13050 cp 513051 jp nc,.Green13053 ld a,(iy+CastleLevel)13054 cp 113055 ld hl,CastleLevel2Cost13056 ld (CheckRequirementsWhichBuilding?),hl13057 jp z,.CheckRequirementsBuildingMetCastleLevel213059 cp 213060 ld hl,CastleLevel3Cost13061 ld (CheckRequirementsWhichBuilding?),hl13062 jp z,.CheckRequirementsBuildingMetCastleLevel313064 cp 313065 ld hl,CastleLevel4Cost13066 ld (CheckRequirementsWhichBuilding?),hl13067 jp z,.CheckRequirementsBuildingMet1306913070 ld hl,CastleLevel5Cost13071 ld (CheckRequirementsWhichBuilding?),hl1307213073 jp .CheckRequirementsBuildingMet13074 13075 .Blue:13076 ld hl,.BlueButton13077 ld bc,6 13078 ldir13079 ret13080 13081 .Red:13082 ld hl,.RedButton13083 ld bc,6 13084 ldir13085 ret13086 13087 .Green:13088 ld hl,.GreenButton13089 ld bc,6 13090 ldir13091 ret13093.BlueButton: dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (050/2) - 128 | dw $4000 + (000*128) + (100/2) - 12813094.GreenButton: dw $4000 + (000*128) + (150/2) - 128 | dw $4000 + (000*128) + (200/2) - 128 | dw $4000 + (038*128) + (000/2) - 12813095.RedButton: dw $4000 + (038*128) + (050/2) - 128 | dw $4000 + (038*128) + (100/2) - 128 | dw $4000 + (038*128) + (150/2) - 12813097.CheckRequirementsBuildingMetCastleLevel2:13098 ld a,(iy+CastleTavern) 13099 or a13100 jp z,.Red13101 jp .CheckRequirementsBuildingMet13103.CheckRequirementsBuildingMetCastleLevel3:13104 ld a,(iy+CastleMarket) 13105 or a13106 jp z,.Red13107 ld a,(iy+CastleMageGuildLevel) 13108 or a13109 jp z,.Red13110 jp .CheckRequirementsBuildingMet13112.CheckRequirementsBuildingMetBarracksTower:13113 ld a,(iy+CastleBarracksLevel) 13114 cp 513115 jp nz,.Red13116 jp .CheckRequirementsBuildingMet13118.CheckRequirementsBuildingMetCityWalls:13119 ld a,(iy+CastleLevel) 13120 cp 513121 jp nz,.Red13122 jp .CheckRequirementsBuildingMet13124.CheckRequirementsBuildingMet:13125 13126 call SetResourcesCurrentPlayerinIX13127 ld l,(ix+0)13128 ld h,(ix+1) 13129 ld ix,(CheckRequirementsWhichBuilding?)13130 ld c,(ix+0)13131 ld b,(ix+1) 13132 xor a13133 sbc hl,bc13134 jp c,.Red 13136 13137 call SetResourcesCurrentPlayerinIX13138 ld l,(ix+2)13139 ld h,(ix+3) 13140 ld ix,(CheckRequirementsWhichBuilding?)13141 ld c,(ix+2)13142 ld b,(ix+3) 13143 xor a13144 sbc hl,bc13145 jp c,.Red 13147 13148 call SetResourcesCurrentPlayerinIX13149 ld l,(ix+4)13150 ld h,(ix+5) 13151 ld ix,(CheckRequirementsWhichBuilding?)13152 ld c,(ix+4)13153 ld b,(ix+5) 13154 xor a13155 sbc hl,bc13156 jp c,.Red 13158 13159 call SetResourcesCurrentPlayerinIX13160 ld l,(ix+6)13161 ld h,(ix+7) 13162 ld ix,(CheckRequirementsWhichBuilding?)13163 ld c,(ix+6)13164 ld b,(ix+7) 13165 xor a13166 sbc hl,bc13167 jp c,.Red 13169 13170 call SetResourcesCurrentPlayerinIX13171 ld l,(ix+8)13172 ld h,(ix+9) 13173 ld ix,(CheckRequirementsWhichBuilding?)13174 ld c,(ix+8)13175 ld b,(ix+9) 13176 xor a13177 sbc hl,bc13178 jp c,.Red 13179 jp .Blue 13181SetSingleBuildButtonColor:13182 push iy13184 ld a,(WhichBuildingWasClicked?)13186 cp 1 13187 ld iy,BuildButtonTable+1+(8*BuildButtonTableLenghtPerButton)13188 jr z,.BuildingFound13189 cp 2 13190 ld iy,BuildButtonTable+1+(7*BuildButtonTableLenghtPerButton)13191 jr z,.BuildingFound13192 cp 3 13193 ld iy,BuildButtonTable+1+(6*BuildButtonTableLenghtPerButton)13194 jr z,.BuildingFound13195 cp 4 13196 ld iy,BuildButtonTable+1+(5*BuildButtonTableLenghtPerButton)13197 jr z,.BuildingFound13198 cp 5 13199 ld iy,BuildButtonTable+1+(4*BuildButtonTableLenghtPerButton)13200 jr z,.BuildingFound13201 cp 6 13202 ld iy,BuildButtonTable+1+(3*BuildButtonTableLenghtPerButton)13203 jr z,.BuildingFound13204 cp 7 13205 ld iy,BuildButtonTable+1+(2*BuildButtonTableLenghtPerButton)13206 jr z,.BuildingFound13207 cp 8 13208 ld iy,BuildButtonTable+1+(1*BuildButtonTableLenghtPerButton)13209 jr z,.BuildingFound13210 cp 9 13211 ld iy,BuildButtonTable+1+(0*BuildButtonTableLenghtPerButton)13212 jr z,.BuildingFound13215 .BuildingFound:13216 ld e,(iy)13217 ld d,(iy+1) 13219 pop iy13221 ld hl,$4000 + (000*128) + (000/2) - 128 13222 xor a13223 sbc hl,de13224 jr z,.blue13225 13226 ld hl,$4000 + (000*128) + (150/2) - 128 13227 xor a13228 sbc hl,de13229 jr z,.green13231 ld hl,$4000 + (038*128) + (050/2) - 128 13232 xor a13233 sbc hl,de13234 jr z,.red13236 13237 .red:13238 ld hl,.putred13239 ld de,SingleBuildButtonTable13240 ld bc,713241 ldir13242 ret13243 13244 .green:13245 ld hl,.putgreen13246 ld de,SingleBuildButtonTable13247 ld bc,713248 ldir13249 ret13250 13251 .blue:13252 ld hl,.putblue13253 ld de,SingleBuildButtonTable13254 ld bc,713255 ldir13256 ret13258.putred: db %1100 0011 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 128 | dw $4000 + (148*128) + (072/2) - 12813259.putgreen: db %1100 0011 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 128 | dw $4000 + (148*128) + (000/2) - 12813260.putblue: db %1100 0011 | dw $4000 + (148*128) + (144/2) - 128 | dw $4000 + (157*128) + (000/2) - 128 | dw $4000 + (157*128) + (072/2) - 12813299CheckButtonMouseInteractionBuildButtons:13300 ld b,913301 ld de,BuildButtonTableLenghtPerButton13303 .loop:13304 call .check13305 add ix,de13306 djnz .loop13307 ret13308 13309 .check:13310 bit 7,(ix+BuildButtonStatus) 13311 ret z 13312 13313 ld a,(spat+0) 13314 cp (ix+BuildButtonYtop)13315 jr c,.NotOverButton13316 cp (ix+BuildButtonYbottom)13317 jr nc,.NotOverButton13318 ld a,(spat+1) 13320 add a,0613322 cp (ix+BuildButtonXleft)13323 jr c,.NotOverButton13324 cp (ix+BuildButtonXright)13325 jr nc,.NotOverButton13326 1332813334 ld a,(Controls)13335 bit 4,a 13336 jr nz,.MouseOverButtonAndSpacePressed13337 bit 4,(ix+BuildButtonStatus) 13338 jr nz,.MenuOptionSelected 13339 .MouseHoverOverButton:13340 13341 bit 5,(ix+BuildButtonStatus) 13342 ld (ix+BuildButtonStatus),%1010 001113343 ret nz13345 push iy13346 push bc13347 ld bc,SFX_ButtonHoverOver13348 call RePlayerSFX_PlayCh113349 pop bc13350 pop iy13351 ret13353 .MouseOverButtonAndSpacePressed:13354 bit 4,(ix+BuildButtonStatus) 13355 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit13356 ld a,(NewPrContr)13357 bit 4,a 13358 jr z,.MouseHoverOverButton13360 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:13361 ld (ix+BuildButtonStatus),%1001 001113362 push iy13363 push bc13364 ld bc,SFX_ButtonClicked13365 call RePlayerSFX_PlayCh113366 pop bc13367 pop iy13368 ret13369 13370 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:13371 ld (ix+BuildButtonStatus),%1001 001113372 ret13374 .NotOverButton:13375 bit 4,(ix+BuildButtonStatus) 13376 jr nz,.buttonIsStillLit13377 bit 5,(ix+BuildButtonStatus) 13378 ret z13379 .buttonIsStillLit:13380 ld (ix+BuildButtonStatus),%1100 001113381 ret13383 .MenuOptionSelected:13384 pop af 13385 ld (ix+BuildButtonStatus),%1010 001113387 ld a,313388 ld (SetTextBuilding),a13390 ld a,b13391 cp 1 13392 jp z,.CityWalls13393 cp 2 13394 jp z,.BarracksTower13395 cp 3 13396 jp z,.Barracks13397 cp 4 13398 jp z,.Mine13399 cp 5 13400 jp z,.Sawmill13401 cp 6 13402 jp z,.MagicGuild13403 cp 7 13404 jp z,.Tavern13405 cp 8 13406 jp z,.MarketPlace13407 cp 9 13408 jp z,.Castle13410 .MarketPlace:13411 ld a,(iy+CastleMarket)13412 or a13413 ld de,MarketPlaceCost13414 ld hl,TextMarketPlace13415 jp z,.SetWhichTextToPut13416 ld hl,TextMarketPlaceFinished13417 jp .SetWhichTextToPut13419 .Tavern:13420 ld a,(iy+CastleTavern)13421 or a13422 ld de,TavernCost13423 ld hl,TextTavern13424 jp z,.SetWhichTextToPut13425 ld hl,TextTavernFinished13426 jp .SetWhichTextToPut13428 .BarracksTower:13429 ld a,(iy+CastleBarracksLevel)13430 cp 613431 ld de,BarracksTowerCost13432 ld hl,TextBarracksTower13433 jp nz,.SetWhichTextToPut13434 ld hl,TextBarracksTowerFinished13435 jp .SetWhichTextToPut13437 .CityWalls:13438 ld a,(iy+CastleLevel)13439 cp 613440 ld de,CityWallsCost13441 ld hl,TextCityWalls13442 jp nz,.SetWhichTextToPut13443 ld hl,TextCityWallsFinished13444 jp .SetWhichTextToPut13445 13446 .Barracks:13447 ld a,(iy+CastleBarracksLevel)13448 cp 013449 ld de,BarracksLevel1Cost13450 ld hl,TextBarracksLevel113451 jp z,.SetWhichTextToPut13452 cp 113453 ld de,BarracksLevel2Cost13454 ld hl,TextBarracksLevel213455 jp z,.SetWhichTextToPut13456 cp 213457 ld de,BarracksLevel3Cost13458 ld hl,TextBarracksLevel313459 jp z,.SetWhichTextToPut13460 cp 313461 ld de,BarracksLevel4Cost13462 ld hl,TextBarracksLevel413463 jp z,.SetWhichTextToPut13464 cp 413465 ld de,BarracksLevel5Cost13466 ld hl,TextBarracksLevel513467 jp z,.SetWhichTextToPut13468 ld hl,TextBarracksLevel5Finished13469 jp .SetWhichTextToPut13471 .Mine:13472 ld a,(iy+CastleMineLevel)13473 cp 013474 ld de,MineLevel1Cost13475 ld hl,TextMineLevel113476 jp z,.SetWhichTextToPut13477 cp 113478 ld de,MineLevel2Cost13479 ld hl,TextMineLevel213480 jp z,.SetWhichTextToPut13481 cp 213482 ld de,MineLevel3Cost13483 ld hl,TextMineLevel313484 jp z,.SetWhichTextToPut13485 ld hl,TextMineLevel3Finished13486 jp .SetWhichTextToPut13488 .Sawmill:13489 ld a,(iy+CastleSawmillLevel)13490 cp 013491 ld de,SawmillLevel1Cost 13492 ld hl,TextSawmillLevel113493 jp z,.SetWhichTextToPut13494 cp 113495 ld de,SawmillLevel2Cost 13496 ld hl,TextSawmillLevel213497 jp z,.SetWhichTextToPut13498 cp 213499 ld de,SawmillLevel3Cost 13500 ld hl,TextSawmillLevel313501 jp z,.SetWhichTextToPut13502 ld hl,TextSawmillLevel3Finished13503 jp .SetWhichTextToPut13505 .MagicGuild:13506 ld a,(iy+CastleMageGuildLevel)13507 cp 013508 ld de,MagicGuildLevel1Cost13509 ld hl,TextMagicGuildLevel113510 jp z,.SetWhichTextToPut13511 cp 113512 ld de,MagicGuildLevel2Cost13513 ld hl,TextMagicGuildLevel213514 jp z,.SetWhichTextToPut13515 cp 213516 ld de,MagicGuildLevel3Cost13517 ld hl,TextMagicGuildLevel313518 jp z,.SetWhichTextToPut13519 cp 313520 ld de,MagicGuildLevel4Cost13521 ld hl,TextMagicGuildLevel413522 jp z,.SetWhichTextToPut13523 ld hl,TextMagicGuildLevel4Finished13524 jp .SetWhichTextToPut13526 .Castle:13527 ld a,(iy+CastleLevel)13528 cp 113529 ld de,CastleLevel2Cost13530 ld hl,TextCastleLevel213531 jp z,.SetWhichTextToPut13532 cp 213533 ld de,CastleLevel3Cost13534 ld hl,TextCastleLevel313535 jp z,.SetWhichTextToPut13536 cp 313537 ld de,CastleLevel4Cost13538 ld hl,TextCastleLevel413539 jp z,.SetWhichTextToPut13540 cp 413541 ld de,CastleLevel5Cost13542 ld hl,TextCastleLevel513543 jp z,.SetWhichTextToPut13544 ld hl,TextCastleLevel5Finished13545 jp .SetWhichTextToPut13547 .SetWhichTextToPut:13548 ld (CheckRequirementsWhichBuilding?),de13549 ld (PutWhichBuildText),hl13550 ld a,b13551 ld (WhichBuildingWasClicked?),a13552 ret13554TextCastleLevel2: 13555 db "   Town Hall",25413556 db " ",25413557 db "Generates 1000",25413558 db "gold per day",25413559 db " ",25413560 db "Cost:",25413561 db "2500 Gold",25413562 db " ",25413563 db "Requirements:",25413564 db "Tavern",2551356613569CastleLevel2Cost: 13570.Gold: dw 250013571.Wood: dw 00013572.Ore: dw 00013573.Gems: dw 00013574.Rubies: dw 00013578TextCastleLevel3: 13579 db "   City Hall",25413580 db " ",25413581 db "Generates 2000",25413582 db "gold per day",25413583 db " ",25413584 db "Cost:",25413585 db "5000 Gold",25413586 db " ",25413587 db "Requirements:",25413588 db "Magic Guild",25413589 db "Level 1",25413590 db "Market Place",25513592CastleLevel3Cost: 13593.Gold: dw 500013594.Wood: dw 00013595.Ore: dw 00013596.Gems: dw 00013597.Rubies: dw 00013599TextCastleLevel4: 13600 db "    Citadel",25413601 db " ",25413602 db "Generates 3000",25413603 db "gold per day",25413604 db " ",25413605 db "increases the",25413606 db "production of",25413607 db "all creatures",25413608 db "by 50%",25413609 db " ",25413610 db "Cost:",25413611 db "7500 Gold",25413612 db "+10 wood",25413613 db "+10 ore",25513615CastleLevel4Cost: 13616.Gold: dw 750013617.Wood: dw 01013618.Ore: dw 01013619.Gems: dw 00013620.Rubies: dw 00013622TextCastleLevel5: 13623 db "    Capitol",25413624 db " ",25413625 db "Generates 4000",25413626 db "gold per day",25413627 db " ",25413628 db "increases the",25413629 db "production of",25413630 db "all creatures",25413631 db "by 100%",25413632 db " ",25413633 db "Cost:",25413634 db "10000 Gold",25413635 db "+20 wood",25413636 db "+20 ore",25513637TextCastleLevel5Finished: 13638 db "    Capitol",25413639 db " ",25413640 db "Generates 4000",25413641 db "gold per day",25413642 db " ",25413643 db "increases the",25413644 db "production of",25413645 db "all creatures",25413646 db "by 100%",25513648CastleLevel5Cost: 13649.Gold: dw 1000013650.Wood: dw 02013651.Ore: dw 02013652.Gems: dw 00013653.Rubies: dw 00013655TextMarketPlace: 13656 db "  Market Place",25413657 db " ",25413658 db "Facilitates the",25413659 db "commerce of",25413660 db "crucial resources",25413661 db " ",25413662 db "Cost:",25413663 db "500 Gold",25413664 db "+5 Wood",25513665TextMarketPlaceFinished: 13666 db "  Market Place",25413667 db " ",25413668 db "Facilitates the",25413669 db "commerce of",25413670 db "crucial resources",25513672MarketPlaceCost:13673.Gold: dw 50013674.Wood: dw 0513675.Ore: dw 0013676.Gems: dw 0013677.Rubies: dw 0013679TextTavern: 13680 db "    Tavern",25413681 db " ",25413682 db "Grants the ",25413683 db "capability to",25413684 db "enlist visiting",25413685 db "heroes into",25413686 db "service",25413687 db " ",25413688 db "Cost:",25413689 db "500 Gold",25413690 db "+5 Wood",25513691TextTavernFinished: 13692 db "    Tavern",25413693 db " ",25413694 db "Grants the ",25413695 db "capability to",25413696 db "enlist visiting",25413697 db "heroes into",25413698 db "service",25513699 13700TavernCost:13701.Gold: dw 50013702.Wood: dw 0513703.Ore: dw 0013704.Gems: dw 0013705.Rubies: dw 0013707TextMagicGuildLevel1: 13708 db " Magic Guild 1",25413709 db " ",25413710 db "Adds two level 1",25413711 db "spells to the",25413712 db "magic guild",25413713 db " ",25413714 db "An overnight stay",25413715 db "at the Castle",25413716 db "completely refills",25413717 db "heroes' magic",25413718 db "points.",25413719 db " ",25413720 db "Cost:",25413721 db "2000 Gold",25413722 db "+5 Wood",25413723 db "+5 Ore",25513725MagicGuildLevel1Cost:13726.Gold: dw 200013727.Wood: dw 0513728.Ore: dw 0513729.Gems: dw 0013730.Rubies: dw 0013732TextMagicGuildLevel2: 13733 db " Magic Guild 2",25413734 db " ",25413735 db "Adds two level 2",25413736 db "spells to the",25413737 db "magic guild",25413738 db " ",25413739 db "Visiting heroes",25413740 db "can learn these",25413741 db "spells",25413742 db " ",25413743 db "Cost:",25413744 db "1000 Gold",25413745 db "+5 Wood",25413746 db "+5 Ore",25413747 db "+5 Gems",25413748 db "+5 Rubies",25513750MagicGuildLevel2Cost:13751.Gold: dw 100013752.Wood: dw 0513753.Ore: dw 0513754.Gems: dw 0513755.Rubies: dw 0513757TextMagicGuildLevel3: 13758 db " Magic Guild 3",25413759 db " ",25413760 db "Adds two level 3",25413761 db "spells to the",25413762 db "magic guild",25413763 db " ",25413764 db "Visiting heroes",25413765 db "can learn these",25413766 db "spells",25413767 db " ",25413768 db "Cost:",25413769 db "1000 Gold",25413770 db "+5 Wood",25413771 db "+5 Ore",25413772 db "+6 Gems",25413773 db "+6 Rubies",25513775MagicGuildLevel3Cost:13776.Gold: dw 100013777.Wood: dw 0513778.Ore: dw 0513779.Gems: dw 0613780.Rubies: dw 0613782TextMagicGuildLevel4: 13783 db " Magic Guild 4",25413784 db " ",25413785 db "Adds two level 4",25413786 db "spells to the",25413787 db "magic guild",25413788 db " ",25413789 db "Visiting heroes",25413790 db "can learn these",25413791 db "spells",25413792 db " ",25413793 db "Cost:",25413794 db "1000 Gold",25413795 db "+5 Wood",25413796 db "+5 Ore",25413797 db "+8 Gems",25413798 db "+8 Rubies",25513799TextMagicGuildLevel4Finished: 13800 db " Magic Guild 4",25413801 db " ",25413802 db "Adds two level 4",25413803 db "spells to the",25413804 db "magic guild",25413805 db " ",25413806 db "Visiting heroes",25413807 db "can learn these",25413808 db "spells if their",25413809 db "skill requirements",25413810 db "are met",25513811MagicGuildLevel4Cost:13812.Gold: dw 100013813.Wood: dw 0513814.Ore: dw 0513815.Gems: dw 0813816.Rubies: dw 0813818TextSawmillLevel1: 13819 db "  Sawmill 1",25413820 db " ",25413821 db "Produces:",25413822 db "+1 wood",25413823 db "per day",25413824 db " ",25413825 db "Cost:",25413826 db "1000 Gold",25513828SawmillLevel1Cost:13829.Gold: dw 100013830.Wood: dw 0013831.Ore: dw 0013832.Gems: dw 0013833.Rubies: dw 0013835TextSawmillLevel2: 13836 db "  Sawmill 2",25413837 db " ",25413838 db "Produces:",25413839 db "+2 wood",25413840 db "per day",25413841 db " ",25413842 db "Cost:",25413843 db "1500 Gold",25513845SawmillLevel2Cost:13846.Gold: dw 150013847.Wood: dw 0013848.Ore: dw 0013849.Gems: dw 0013850.Rubies: dw 0013852TextSawmillLevel3: 13853 db "  Sawmill 3",25413854 db " ",25413855 db "Produces:",25413856 db "+3 wood",25413857 db "per day",25413858 db " ",25413859 db "Cost:",25413860 db "2000 Gold",25513861TextSawmillLevel3Finished: 13862 db "  Sawmill 3",25413863 db " ",25413864 db "Produces:",25413865 db "+3 wood",25413866 db "per day",25513867SawmillLevel3Cost:13868.Gold: dw 200013869.Wood: dw 0013870.Ore: dw 0013871.Gems: dw 0013872.Rubies: dw 0013874TextMineLevel1: 13875 db "   Mine 1",25413876 db " ",25413877 db "Produces:",25413878 db "+1 ore",25413879 db "per day",25413880 db " ",25413881 db "Cost:",25413882 db "1000 Gold",25513884MineLevel1Cost:13885.Gold: dw 100013886.Wood: dw 0013887.Ore: dw 0013888.Gems: dw 0013889.Rubies: dw 0013891TextMineLevel2: 13892 db "   Mine 2",25413893 db " ",25413894 db "Produces:",25413895 db "+2 ore",25413896 db "+1 gem",25413897 db "per day",25413898 db " ",25413899 db "Cost:",25413900 db "2000 Gold",25513902MineLevel2Cost:13903.Gold: dw 200013904.Wood: dw 0013905.Ore: dw 0013906.Gems: dw 0013907.Rubies: dw 0013909TextMineLevel3: 13910 db "   Mine 3",25413911 db " ",25413912 db "Produces:",25413913 db "+3 ore",25413914 db "+1 gem",25413915 db "+1 ruby",25413916 db "per day",25413917 db " ",25413918 db "Cost:",25413919 db "2500 Gold",25513920TextMineLevel3Finished: 13921 db "   Mine 3",25413922 db " ",25413923 db "Produces:",25413924 db "+3 ore",25413925 db "+1 gem",25413926 db "+1 ruby",25413927 db "per day",25513928 13929MineLevel3Cost:13930.Gold: dw 250013931.Wood: dw 0013932.Ore: dw 0013933.Gems: dw 0013934.Rubies: dw 0013936TextBarracksLevel1: 13937 db "  Barracks 1",25413938 db " ",25413939 db "Manufactures",25413940 db "level 1 creatures",25413941 db "each bearing",25413942 db "their own unique",25413943 db "attributes and",25413944 db "powers",25413945 db " ",25413946 db "Replenishes every",25413947 db "week",25413948 db " ",25413949 db "Cost:",25413950 db "500 Gold",25413951 db "+5 Wood",25513953BarracksLevel1Cost:13954.Gold: dw 50013955.Wood: dw 0513956.Ore: dw 0013957.Gems: dw 0013958.Rubies: dw 0013960TextBarracksLevel2: 13961 db "  Barracks 2",25413962 db " ",25413963 db "Manufactures",25413964 db "level 2 creatures",25413965 db "each bearing",25413966 db "their own unique",25413967 db "attributes and",25413968 db "powers",25413969 db " ",25413970 db "Replenishes every",25413971 db "week",25413972 db " ",25413973 db "Cost:",25413974 db "1000 Gold",25413975 db "+5 Wood",25413976 db "+5 Ore",25513978BarracksLevel2Cost:13979.Gold: dw 100013980.Wood: dw 0513981.Ore: dw 0513982.Gems: dw 0013983.Rubies: dw 0013985TextBarracksLevel3: 13986 db "  Barracks 3",25413987 db " ",25413988 db "Manufactures",25413989 db "level 3 creatures",25413990 db "each bearing",25413991 db "their own unique",25413992 db "attributes and",25413993 db "powers",25413994 db " ",25413995 db "Replenishes every",25413996 db "week",25413997 db " ",25413998 db "Cost:",25413999 db "1500 Gold",25414000 db "+5 Ore",25514002BarracksLevel3Cost:14003.Gold: dw 150014004.Wood: dw 0014005.Ore: dw 0514006.Gems: dw 0014007.Rubies: dw 0014009TextBarracksLevel4: 14010 db "  Barracks 4",25414011 db " ",25414012 db "Manufactures",25414013 db "level 4 creatures",25414014 db " ",25414015 db "Replenishes every",25414016 db "week",25414017 db " ",25414018 db "Cost:",25414019 db "2000 Gold",25414020 db "+3 Wood",25414021 db "+3 Ore",25414022 db "+1 Gems",25414023 db "+1 Rubies",25514025BarracksLevel4Cost:14026.Gold: dw 200014027.Wood: dw 0314028.Ore: dw 0314029.Gems: dw 0114030.Rubies: dw 0114032TextBarracksLevel5: 14033 db "  Barracks 5",25414034 db " ",25414035 db "Manufactures",25414036 db "level 5 creatures",25414037 db "each bearing",25414038 db "their own unique",25414039 db "attributes and",25414040 db "powers",25414041 db " ",25414042 db "Replenishes every",25414043 db "week",25414044 db " ",25414045 db "Cost:",25414046 db "5000 Gold",25414047 db "+15 Wood",25514048TextBarracksLevel5Finished:14049 db "  Barracks 5",25414050 db " ",25414051 db "Manufactures",25414052 db "level 5 creatures",25414053 db "each bearing",25414054 db "their own unique",25414055 db "attributes and",25414056 db "powers",25414057 db " ",25414058 db "Replenishes every",25414059 db "week",25514062BarracksLevel5Cost:14063.Gold: dw 500014064.Wood: dw 1514065.Ore: dw 0014066.Gems: dw 0014067.Rubies: dw 0014069TextBarracksTower: 14070 db " Barracks Tower",25414071 db " ",25414072 db "Manufactures",25414073 db "level 6 creatures",25414074 db " ",25414075 db "Replenishes every",25414076 db "week",25414077 db " ",25414078 db "Cost:",25414079 db "20000 Gold",25414080 db "+10 Gems",25414081 db "+10 Rubies",25414082 db " ",25414083 db "Requirements:",25414084 db "Barracks 5",25514085TextBarracksTowerFinished: 14086 db " Barracks Tower",25414087 db " ",25414088 db "Manufactures",25414089 db "level 6 creatures",25414090 db "each bearing",25414091 db "their own unique",25414092 db "attributes and",25414093 db "powers",25414094 db " ",25414095 db "Replenishes every",25414096 db "week",25514097 14098BarracksTowerCost:14099.Gold: dw 2000014100.Wood: dw 0014101.Ore: dw 0014102.Gems: dw 1014103.Rubies: dw 1014105TextCityWalls: 14106 db "   City Walls",25414107 db " ",25414108 14109 db "Strengthens city",25414110 db "defenses with",25414111 db "fortified walls,",25414112 db "granting heroes in",25414113 db "the defending hero",25414114 db "slot + 5 defense",25414115 14116 db " ",25414117 db "Cost:",25414118 db "2000 Gold",25414119 db "+5 Wood",25414120 db "+5 Ore",25414121 db " ",25414122 db "Requirements:",25414123 db "Capitol",25514124TextCityWallsFinished: 14125 db "   City Walls",25414126 db " ",25414127 db "Enhances your",25414128 db "city's security",25414129 db "through fortified",25414130 db "walls that stand",25414131 db "resolute against",25414132 db "relentless sieges",25414133 db " ",25414134 db "The defending hero",25414135 db "slot grants heroes",25414136 db "+5 defense",25514141CityWallsCost:14142.Gold: dw 200014143.Wood: dw 514144.Ore: dw 514145.Gems: dw 0014146.Rubies: dw 0014159SetBuildButtons: 14160 ld b,914161 .loop:14162 push bc14163 call .Setbutton14164 pop bc14165 ld de,BuildButtonTableLenghtPerButton14166 add ix,de14168 djnz .loop14169 ret14171 .Setbutton:14172 bit 7,(ix+BuildButtonStatus)14173 ret z 14175 bit 0,(ix+BuildButtonStatus) 14176 res 0,(ix+BuildButtonStatus) 14177 jr nz,.goCopyButton14178 bit 1,(ix+BuildButtonStatus)14179 res 1,(ix+BuildButtonStatus)14180 ret z 14181 .goCopyButton:14183 ld l,(ix+BuildButton_SYSX_Ontouched)14184 ld h,(ix+BuildButton_SYSX_Ontouched+1)14185 bit 6,(ix+BuildButtonStatus)14186 jr nz,.go 14188 ld l,(ix+BuildButton_SYSX_MovedOver)14189 ld h,(ix+BuildButton_SYSX_MovedOver+1)14190 bit 5,(ix+BuildButtonStatus)14191 jr nz,.go 14193 ld l,(ix+BuildButton_SYSX_Clicked)14194 ld h,(ix+BuildButton_SYSX_Clicked+1)14195 .go:14197 14198 ld de,$8000 + (212*128) + (000/2) - 128 14199 ld bc,$0000 + (038*256) + (050/2) 14200 ld a,ButtonsBuildBlock 14201 call CopyRamToVramCorrectedWithoutActivePageSetting 14203 ld a,(activepage)14204 xor 114205 ld (CopyBuildButton+dPage),a14206 ld (CopyBuildButtonImage+dPage),a14208 14209 ld a,(ix+BuildButtonYtop)14210 ld (CopyBuildButton+dy),a14211 ld (CopyBuildButtonImage+dy),a14212 ld a,(ix+BuildButtonXleft)14213 ld (CopyBuildButton+dx),a14214 ld (CopyBuildButtonImage+dx),a14216 ld hl,CopyBuildButton14217 call docopy14219 14220 ld l,(ix+BuildButtonImage_SYSX)14221 ld h,(ix+BuildButtonImage_SYSX+1)14222 ld de,$8000 + (212*128) + (050/2) - 128 14223 ld bc,$0000 + (033*256) + (050/2) 14224 ld a,ButtonsBuildBlock 14225 call CopyRamToVramCorrectedWithoutActivePageSetting 14226 14227 ld hl,CopyBuildButtonImage14228 call docopy1422914231 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14232 call docopy14233 ret14253TextGoldPerDay: db "Gold/day",25514255SetNameCastleAndDailyIncome:14256 call SetCastleOverViewFontPage0Y212 14257 ld b,20014258 ld c,214260 push iy14261 pop hl14262 ld de,CastleName14263 add hl,de14264 call SetText14266 ld c,009 14267 ld b,196+004 14269 ld a,(iy+CastleLevel)14270 cp 1 14271 ld hl,50014272 jr z,.CastleLevelFound14274 ld b,196 14276 cp 2 14277 ld hl,100014278 jr z,.CastleLevelFound14280 cp 3 14281 ld hl,200014282 jr z,.CastleLevelFound14284 cp 4 14285 ld hl,300014286 jr z,.CastleLevelFound14288 cp 5 14289 ld hl,400014290 jr z,.CastleLevelFound14291 14292 .CastleLevelFound:14294 call SetNumber16BitCastle 14296 ld b,21914297 ld c,00914298 ld hl,TextGoldPerDay14299 call SetText14301 14302 ld b,23014303 ld c,01614304 ld hl,.TextDay14305 call SetText14307 14308 ld bc,(Date)14309 ld de,7 14310 call DivideBCbyDE 14311 inc hl 14312 ld b,248 14313 ld c,016 14314 jp SetNumber16BitCastle14316 .TextDay: db "Day:",25514318HandleAllHeroesLearnMagicGuildSpells:14319 push iy14320 14321 ld ix,pl1hero1y14322 ld b,amountofheroesperplayer14323 call .loop14324 ld ix,pl2hero1y14325 ld b,amountofheroesperplayer14326 call .loop14327 ld ix,pl3hero1y14328 ld b,amountofheroesperplayer14329 call .loop14330 ld ix,pl4hero1y14331 ld b,amountofheroesperplayer14332 call .loop14334 pop iy14335 ret14337 .loop:14338 push bc14339 call .CheckHero14340 pop bc14341 ld de,lenghtherotable14342 add ix,de14343 djnz .loop14344 ret14346 .CheckHero: 14347 ld a,(ix+HeroStatus) 14348 cp 214349 jr z,.CheckWhichCastle14350 cp 25414351 ret nz14353 .CheckWhichCastle: 14354 ld iy,Castle114355 call .FindCastle14356 ld iy,Castle214357 call .FindCastle14358 ld iy,Castle314359 call .FindCastle14360 ld iy,Castle414361 call .FindCastle14362 ld iy,Castle514363 call .FindCastle14364 ret14366 .FindCastle:14367 ld a,(ix+HeroY) 14368 inc a 14369 cp (iy+CastleY)14370 ret nz14372 ld a,(ix+HeroX) 14373 dec a 14374 dec a 14375 cp (iy+CastleX)14376 ret nz14377 14378 pop af 14380 ld b,(iy+CastleMageGuildLevel) 14381 14382 push ix14385 14392 call SetCastleSpellsInIX 14393 pop iy 14395 ld c,(ix+0) 14396 call .CheckLevel234SpellsPossibleToLearn14397 ld a,c14398 or (iy+HeroEarthSpells)14399 ld (iy+HeroEarthSpells),a14400 ld c,(ix+1) 14401 call .CheckLevel234SpellsPossibleToLearn14402 ld a,c14403 or (iy+HeroFireSpells)14404 ld (iy+HeroFireSpells),a14405 ld c,(ix+2) 14406 call .CheckLevel234SpellsPossibleToLearn14407 ld a,c14408 or (iy+HeroAirSpells)14409 ld (iy+HeroAirSpells),a14410 ld c,(ix+3) 14411 call .CheckLevel234SpellsPossibleToLearn14412 ld a,c14413 or (iy+HeroWaterSpells)14414 ld (iy+HeroWaterSpells),a14415 14416 push iy14417 pop ix 14418 ret14420.CheckLevel234SpellsPossibleToLearn: 14421 call .CheckMageGuildLevel14423 14424 ld a,30 14425 cp (iy+HeroSkills+0)14426 ret z14427 cp (iy+HeroSkills+1)14428 ret z14429 cp (iy+HeroSkills+2)14430 ret z14431 cp (iy+HeroSkills+3)14432 ret z14433 cp (iy+HeroSkills+4)14434 ret z14435 cp (iy+HeroSkills+5)14436 ret z14438 res 3,c 14440 ld a,29 14441 cp (iy+HeroSkills+0)14442 ret z14443 cp (iy+HeroSkills+1)14444 ret z14445 cp (iy+HeroSkills+2)14446 ret z14447 cp (iy+HeroSkills+3)14448 ret z14449 cp (iy+HeroSkills+4)14450 ret z14451 cp (iy+HeroSkills+5)14452 ret z14454 res 2,c 14456 ld a,28 14457 cp (iy+HeroSkills+0)14458 ret z14459 cp (iy+HeroSkills+1)14460 ret z14461 cp (iy+HeroSkills+2)14462 ret z14463 cp (iy+HeroSkills+3)14464 ret z14465 cp (iy+HeroSkills+4)14466 ret z14467 cp (iy+HeroSkills+5)14468 ret z14470 res 1,c 14471 ret14473.CheckMageGuildLevel:14474 ld a,b 14475 cp 414476 ret z14477 res 3,c 14479 cp 314480 ret z14481 res 2,c 14483 cp 214484 ret z14485 res 1,c 14486 14487 cp 114488 ret z14489 res 0,c 14490 ret14492 14499CastleOverviewCode: 14500 call SetInterruptHandler 14502 ld a,314503 ld (SetResources?),a1450514508 14509 ld c,254 14510 call SetVisitingOrDefendingHeroInIX 14511 push ix14512 ld c,002 14513 call SetVisitingOrDefendingHeroInIX 14514 push ix14515 14517 call .goEnterCastle14519 14520 ld c,002 14521 call SetVisitingOrDefendingHeroInIX 14522 push ix14523 pop hl14524 pop de14525 call CompareHLwithDE 14526 jr z,.Same14528 pop af 14529 jp ActivateFirstActiveHeroForCurrentPlayer 14530 14531 .Same:14532 ld c,254 14533 call SetVisitingOrDefendingHeroInIX 14534 push ix14535 pop hl14536 pop de14537 call CompareHLwithDE 14538 ret z14539 jp ActivateFirstActiveHeroForCurrentPlayer 14540 14541 .goEnterCastle:14543 call SetScreenOff14545 ld hl,CastleOverviewPalette14546 call SetPalette14548 xor a14549 ld (activepage),a 14551 ld a,(ShowNewlyBoughtBuildingFadingIn?)14552 or a14553 jr nz,.EndCheckShowNewlyBoughtBuilding14554 call EnableNewBuilding14555 xor a14556 ld (SetNewBuilding?),a14557 .EndCheckShowNewlyBoughtBuilding:14559 call SetCastleOverviewGraphics 14560 call SwapAndSetPage 14561 call SetIndividualBuildings 14562 call SwapAndSetPage 14563 call SetNameCastleAndDailyIncome14565 ld hl,CopyPage1To014566 call docopy14568 call FadeInNewlyBoughtBuilding14570 ld a,17914571 call SetExitButtonHeight14572 call SetActiveCastleOverviewButtons14573 14574 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14575 call docopy14576 call HandleAllHeroesLearnMagicGuildSpells14578 ld a,CastleSong14579 ld (ChangeSong?),a 14581 .engine:14582 call SwapAndSetPage 14583 call PopulateControls 14589 ld a,(Controls)14590 bit 5,a 14591 ret nz14593 ld ix,CastleOverviewButtonTable 14594 call CheckButtonMouseInteractionCastleMainScreen14596 ld ix,CastleOverviewButtonTable14597 call SetCastleButtons 14599 call WaitVblank14600 call SetScreenOn 14601 jp .engine14603WaitVblank:14604 ld a,(vblankintflag) 14605 ld hl,vblankintflag14606 .checkflag:14607 cp (hl)14608 jr z,.checkflag14609 ret14611CopyPage2To0:14612 db 0,0,0,214613 db 0,0,0,014614 db 0,1,212,014615 db 0,0,$d0 14616CopyPage0To2:14617 db 0,0,0,014618 db 0,0,0,214619 db 0,1,212,014620 db 0,0,$d0 14621 14622EnableNewBuilding:14623 ld a,(SetNewBuilding?) 14624 dec a14625 jr z,.barracks14626 dec a14627 jr z,.barracksUpgrade14628 dec a14629 jr z,.sawmill14630 dec a14631 jr z,.mine14632 dec a14633 jr z,.mageguild14634 dec a14635 jr z,.tavern14636 dec a14637 jr z,.market14638 dec a14639 jr z,.citywalls14640 ret14642 .citywalls:14643 ld (iy+CastleLevel),614644 ret14646 .market:14647 ld (iy+CastleMarket),114648 ret14650 .tavern:14651 ld (iy+CastleTavern),114652 ret14654 .mageguild:14655 ld (iy+CastleMageGuildLevel),114656 ret14658 .mine:14659 ld (iy+CastleMineLevel),114660 ret14662 .sawmill:14663 ld (iy+CastleSawmillLevel),114664 ret14666 .barracksUpgrade:14667 ld (iy+CastleBarracksLevel),614668 ret14670 .barracks:14671 ld (iy+CastleBarracksLevel),114672 ret14674SetVariablesNewBuilding:14675 ld a,(SetNewBuilding?) 14676 dec a14677 jr z,.barracks14678 dec a14679 jr z,.barracksUpgrade14680 dec a14681 jr z,.sawmill14682 dec a14683 jr z,.mine14684 dec a14685 jr z,.mageguild14686 dec a14687 jr z,.tavern14688 dec a14689 jr z,.market14690 dec a14691 jr z,.citywalls14692 ret14694 .citywalls:14695 ld b,CityWallsSX14696 ld c,CityWallsSY14697 ld l,CityWallsSX+CityWallsNX14698 ld h,CityWallsSY+CityWallsNY14699 ld e,1 14700 ret14702 .market:14703 ld b,MarketSX14704 ld c,MarketSY14705 ld l,MarketSX+MarketNX14706 ld h,MarketSY+MarketNY14707 ld e,1 14708 ret14710 .tavern:14711 ld b,TavernSX14712 ld c,TavernSY14713 ld l,TavernSX+TavernNX14714 ld h,TavernSY+TavernNY14715 ld e,0 14716 ret14718 .mageguild:14719 ld b,MageGuildSX14720 ld c,MageGuildSY14721 ld l,MageGuildSX+MageGuildNX14722 ld h,MageGuildSY+MageGuildNY14723 ld e,0 14724 ret14726 .mine:14727 ld b,mineSX14728 ld c,mineSY14729 ld l,mineSX+mineNX14730 ld h,mineSY+mineNY14731 ld e,0 14732 ret14734 .sawmill:14735 ld b,sawmillSX14736 ld c,sawmillSY14737 ld l,sawmillSX+sawmillNX14738 ld h,sawmillSY+sawmillNY14739 ld e,0 14740 ret14742 .barracksUpgrade:14743 ld b,barracksUpgradeSX14744 ld c,barracksUpgradeSY14745 ld l,barracksUpgradeSX+barracksUpgradeNX14746 ld h,barracksUpgradeSY+barracksUpgradeNY14747 ld e,1 14748 ret14750 .barracks:14751 ld b,BarracksSX14752 ld c,BarracksSY14753 ld l,BarracksSX+BarracksNX14754 ld h,BarracksSY+BarracksNY14755 ld e,1 14756 ret14758 BarracksSX: equ 176-214759 BarracksSY: equ 05714760 BarracksNX: equ 08014761 BarracksNY: equ 10114763 BarracksUpgradeSX: equ 20214764 BarracksUpgradeSY: equ 00614765 BarracksUpgradeNX: equ 048 + 514766 BarracksUpgradeNY: equ 08814768 SawMillSX: equ 03214769 SawMillSY: equ 10114770 SawMillNX: equ 06014771 SawMillNY: equ 03514773 MineSX: equ 05014774 MineSY: equ 12614775 MineNX: equ 12614776 MineNY: equ 05214778 MageGuildSX: equ 00014779 MageGuildSY: equ 01914780 MageGuildNX: equ 04814781 MageGuildNY: equ 16814783 TavernSX: equ 06014784 TavernSY: equ 09714785 TavernNX: equ 15814786 TavernNY: equ 11514788 MarketSX: equ 16614789 MarketSY: equ 10614790 MarketNX: equ 090 - 214791 MarketNY: equ 08814793 CityWallsSX: equ 00014794 CityWallsSY: equ 18514795 CityWallsNX: equ 25514796 CityWallsNY: equ 02714798FadeInNewlyBoughtBuilding:14799 ld a,(SetNewBuilding?)14800 or a14801 ret z14803 ld a,114804 ld (ReloadAllObjectsInVram?),a 14806 ld a,(VDP_0+8) 14807 or %0000001014808 ld (VDP_0+8),a14809 di14810 out ($99),a14811 ld a,8+12814812 ei14813 out ($99),a14815 ld hl,CopyPage0To214816 call docopy 14817 call SetScreenOn 14819 xor a14820 ld (activepage),a 14821 call SetCastleOverviewGraphics 14822 ld a,2*32+3114823 call SetPageSpecial.setpage 14825 ld a,114826 ld (activepage),a 14828 call EnableNewBuilding14829 call SetIndividualBuildings 14831 xor a14832 ld (activepage),a 14833 call SetNameCastleAndDailyIncome14835 14837 call SetVariablesNewBuilding14838 ld d,.AmountOfBuildingSteps14839 .AmountOfBuildingSteps: equ 1314841 exx14842 ld c,$9b 14843 ld d,32 14844 ld e,17+128 14845 exx14847 ld a,b 14848 call GoBuildBuildingPart14849 call GoBuildBuildingPart14850 call GoBuildBuildingPart14851 call GoBuildBuildingPart14852 call GoBuildBuildingPart14853 call GoBuildBuildingPart14854 call GoBuildBuildingPart14855 call GoBuildBuildingPart14856 call GoBuildBuildingPart14857 call GoBuildBuildingPart14858 call GoBuildBuildingPart14859 call GoBuildBuildingPart14860 call GoBuildBuildingPart14862 ld hl,CopyPage2To014863 call docopy14864 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady14865 call docopy14867 xor a14868 ld (SetNewBuilding?),a14870 ld a,(VDP_0+8) 14871 and %1111110114872 ld (VDP_0+8),a14873 di14874 out ($99),a14875 ld a,8+12814876 ei14877 out ($99),a14878 ret14880GoBuildBuildingPartBuildingThatTouchRightEdge:14881 .loop:14882 exx14883 ld hl,BuildingFadeIn 14884 ld a,d14885 di14886 out ($99),a14887 ld a,e14888 ei14889 out ($99),a14891 dw $a3ed,$a3ed,$a3ed,$a3ed14892 dw $a3ed,$a3ed,$a3ed,$a3ed14893 dw $a3ed,$a3ed,$a3ed,$a3ed14894 dw $a3ed,$a3ed,$a3ed14895 exx14896 14897 ld a,(BuildingFadeIn+sx)14898 add a,d 14899 jr nc,.go14900 add a,b 14901 ld (BuildingFadeIn+sx),a14902 ld (BuildingFadeIn+dx),a14904 ld a,(BuildingFadeIn+sy)14905 inc a14906 cp h 14907 ret nc14908 ld (BuildingFadeIn+sy),a14909 ld (BuildingFadeIn+dy),a14910 jp .loop14912 .go:14913 ld (BuildingFadeIn+sx),a14914 ld (BuildingFadeIn+dx),a14915 jp .loop14917GoBuildBuildingPart:14918 push af14920 ld (BuildingFadeIn+sx),a14921 ld (BuildingFadeIn+dx),a14922 ld a,c 14923 ld (BuildingFadeIn+sy),a14924 ld (BuildingFadeIn+dy),a 14925 bit 0,e14926 call nz,GoBuildBuildingPartBuildingThatTouchRightEdge.loop14927 bit 0,e14928 call z,.loop14930 pop af14931 inc a14932 ret14934 .loop:14935 exx14936 ld hl,BuildingFadeIn 14937 ld a,d14938 di14939 out ($99),a14940 ld a,e14941 ei14942 out ($99),a14944 dw $a3ed,$a3ed,$a3ed,$a3ed14945 dw $a3ed,$a3ed,$a3ed,$a3ed14946 dw $a3ed,$a3ed,$a3ed,$a3ed14947 dw $a3ed,$a3ed,$a3ed14948 exx14949 14950 ld a,(BuildingFadeIn+sx)14951 add a,d 14952 cp l 14953 jr c,.go14954 sub a,l 14955 add a,b 14956 ld (BuildingFadeIn+sx),a14957 ld (BuildingFadeIn+dx),a14959 ld a,(BuildingFadeIn+sy)14960 inc a14961 cp h 14962 ret nc14963 ld (BuildingFadeIn+sy),a14964 ld (BuildingFadeIn+dy),a14965 jp .loop14967 .go:14968 ld (BuildingFadeIn+sx),a14969 ld (BuildingFadeIn+dx),a14970 jp .loop14973SetActiveCastleOverviewButtons:14974 ld a,%1100 001114975 ld (CastleOverviewButtonTable+0*CastleOverviewButtonTableLenghtPerButton),a 14976 ld (CastleOverviewButtonTable+5*CastleOverviewButtonTableLenghtPerButton),a 14977 xor a14978 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 14979 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 14980 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 14981 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 14983 ld a,(iy+CastleBarracksLevel)14984 or a14985 jr z,.EndCheckBarracks14986 ld a,%1100 001114987 ld (CastleOverviewButtonTable+1*CastleOverviewButtonTableLenghtPerButton),a 14988 .EndCheckBarracks:14990 ld a,(iy+CastleMageGuildLevel)14991 or a14992 jr z,.EndCheckMageGuild14993 ld a,%1100 001114994 ld (CastleOverviewButtonTable+2*CastleOverviewButtonTableLenghtPerButton),a 14995 .EndCheckMageGuild:14997 ld a,(iy+CastleMarket)14998 or a14999 jr z,.EndCheckMarket15000 ld a,%1100 001115001 ld (CastleOverviewButtonTable+3*CastleOverviewButtonTableLenghtPerButton),a 15002 .EndCheckMarket:15004 ld a,(iy+CastleTavern)15005 or a15006 jr z,.EndCheckTavern15007 ld a,%1100 001115008 ld (CastleOverviewButtonTable+4*CastleOverviewButtonTableLenghtPerButton),a 15009 .EndCheckTavern:15010 ret15012SetCastleButtons: 15013 ld b,615014 .loop:15015 push bc15016 call .Setbutton15017 pop bc15018 ld de,CastleOverviewButtonTableLenghtPerButton15019 add ix,de15021 djnz .loop15022 ret15024 .Setbutton:15025 bit 7,(ix+CastleOverviewWindowButtonStatus)15026 ret z 15028 bit 0,(ix+CastleOverviewWindowButtonStatus)15029 jr nz,.bit0isSet15030 bit 1,(ix+CastleOverviewWindowButtonStatus)15031 ret z15032 15033 .bit1isSet:15034 res 1,(ix+CastleOverviewWindowButtonStatus)15035 jr .goCopyButton15036 .bit0isSet:15037 res 0,(ix+CastleOverviewWindowButtonStatus) 15038 .goCopyButton:15040 ld l,(ix+CastleOverviewWindowButton_SYSX_Ontouched)15041 ld h,(ix+CastleOverviewWindowButton_SYSX_Ontouched+1)15042 bit 6,(ix+CastleOverviewWindowButtonStatus)15043 jr nz,.go 15045 ld l,(ix+CastleOverviewWindowButton_SYSX_MovedOver)15046 ld h,(ix+CastleOverviewWindowButton_SYSX_MovedOver+1)15047 bit 5,(ix+CastleOverviewWindowButtonStatus)15048 jr nz,.go 15050 ld l,(ix+CastleOverviewWindowButton_SYSX_Clicked)15051 ld h,(ix+CastleOverviewWindowButton_SYSX_Clicked+1)1505215054 .go:1505615057 ld de,$8000 + (212*128) + (012/2) - 128 15058 ld bc,$0000 + (031*256) + (040/2) 15059 ld a,ButtonsBlock 15060 call CopyRamToVramCorrectedWithoutActivePageSetting 15062 ld a,(activepage)15063 xor 115064 ld (CopyCastleButton+dPage),a15066 ld a,(ix+CastleOverviewWindowButton_dx)15067 ld (CopyCastleButton+dx),a15069 ld hl,CopyCastleButton15070 call docopy1507115073 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady15074 call docopy15075 ret15077CheckButtonMouseInteractionCastleMainScreen:15078 ld b,615079 ld de,CastleOverviewButtonTableLenghtPerButton15081 .loop:15082 call .check15083 add ix,de15084 djnz .loop15085 ret15086 15087 .check:15088 bit 7,(ix+CastleOverviewWindowButtonStatus)15089 ret z15090 15091 ld a,(spat+0) 15092 cp (ix+CastleOverviewWindowButtonYtop)15093 jr c,.NotOverButton15094 cp (ix+CastleOverviewWindowButtonYbottom)15095 jr nc,.NotOverButton15096 ld a,(spat+1) 15098 add a,0615100 cp (ix+CastleOverviewWindowButtonXleft)15101 jr c,.NotOverButton15102 cp (ix+CastleOverviewWindowButtonXright)15103 jr nc,.NotOverButton15104 1510615112 ld a,(Controls)15113 bit 4,a 15114 jr nz,.MouseOverButtonAndSpacePressed15115 bit 4,(ix+CastleOverviewWindowButtonStatus) 15116 jr nz,.MenuOptionSelected 15117 .MouseHoverOverButton:1511815120 15121 bit 5,(ix+CastleOverviewWindowButtonStatus) 15122 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115123 ret nz15125 push iy15126 push bc15127 ld bc,SFX_ButtonHoverOver15128 call RePlayerSFX_PlayCh115129 pop bc15130 pop iy15131 ret15133 .MouseOverButtonAndSpacePressed:15134 bit 4,(ix+CastleOverviewWindowButtonStatus) 15135 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15136 ld a,(NewPrContr)15137 bit 4,a 15138 jr z,.MouseHoverOverButton15140 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15141 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115142 push iy15143 push bc15144 ld bc,SFX_ButtonClicked15145 call RePlayerSFX_PlayCh115146 pop bc15147 pop iy15148 ret15149 15150 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15151 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115152 ret15154 .NotOverButton:15155 bit 4,(ix+CastleOverviewWindowButtonStatus) 15156 jr nz,.buttonIsStillLit15157 bit 5,(ix+CastleOverviewWindowButtonStatus) 15158 ret z15159 .buttonIsStillLit:15160 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115161 ret15163 .MenuOptionSelected:15164 ld a,b15165 cp 1 15166 jr nz,.EndCheckExit15167 pop af 15168 pop af 15169 ret15170 .EndCheckExit:15172 cp 2 15173 jr nz,.EndCheckTavern15174 15175 pop af 15176 pop af 15177 jp CastleOverviewTavernCode 15178 ret15179 .EndCheckTavern:15181 cp 3 15182 jr nz,.EndCheckMarket15183 15184 pop af 15185 pop af 15186 jp CastleOverviewMarketPlaceCode 15187 .EndCheckMarket:15189 cp 4 15190 jr nz,.EndCheckMagicGuild15191 15192 pop af 15193 pop af 15194 jp CastleOverviewMagicGuildCode 15195 .EndCheckMagicGuild:15197 cp 5 15198 jr nz,.EndCheckRecruit15199 15200 pop af 15201 pop af 15202 jp CastleOverviewRecruitCode 15203 .EndCheckRecruit:15205 15206 pop af 15207 pop af 15208 jp CastleOverviewBuildCode 1521015211CheckButtonMouseInteractionCastle:15212 ld b,615213 ld de,CastleOverviewButtonTableLenghtPerButton15215 .loop:15216 call .check15217 add ix,de15218 djnz .loop15219 ret15220 15221 .check:15222 bit 7,(ix+CastleOverviewWindowButtonStatus)15223 ret z15224 15225 ld a,(spat+0) 15226 cp (ix+CastleOverviewWindowButtonYtop)15227 jr c,.NotOverButton15228 cp (ix+CastleOverviewWindowButtonYbottom)15229 jr nc,.NotOverButton15230 ld a,(spat+1) 15232 add a,0615234 cp (ix+CastleOverviewWindowButtonXleft)15235 jr c,.NotOverButton15236 cp (ix+CastleOverviewWindowButtonXright)15237 jr nc,.NotOverButton15238 1524015246 ld a,(Controls)15247 bit 4,a 15248 jr nz,.MouseOverButtonAndSpacePressed15249 bit 4,(ix+CastleOverviewWindowButtonStatus) 15250 jr nz,.MenuOptionSelected 15251 .MouseHoverOverButton:15252 15253 bit 5,(ix+CastleOverviewWindowButtonStatus) 15254 ld (ix+CastleOverviewWindowButtonStatus),%1010 001115255 ret nz15257 push iy15258 push bc15259 ld bc,SFX_ButtonHoverOver15260 call RePlayerSFX_PlayCh115261 pop bc15262 pop iy15263 ret15265 .MouseOverButtonAndSpacePressed:15266 bit 4,(ix+CastleOverviewWindowButtonStatus) 15267 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit15268 ld a,(NewPrContr)15269 bit 4,a 15270 jr z,.MouseHoverOverButton15272 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:15273 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115274 push iy15275 push bc15276 ld bc,SFX_ButtonClicked15277 call RePlayerSFX_PlayCh115278 pop bc15279 pop iy15280 ret15281 15282 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:15283 ld (ix+CastleOverviewWindowButtonStatus),%1001 001115284 ret15286 .NotOverButton:15287 bit 4,(ix+CastleOverviewWindowButtonStatus) 15288 jr nz,.buttonIsStillLit15289 bit 5,(ix+CastleOverviewWindowButtonStatus) 15290 ret z15291 .buttonIsStillLit:15292 ld (ix+CastleOverviewWindowButtonStatus),%1100 001115293 ret15295 .MenuOptionSelected:15296 pop af 15297 pop af 15298 jp CastleOverviewCode15299 15301SetIndividualBuildings:1530215303 ld a,(iy+CastleBarracksLevel)15304 or a15305 jr z,.EndCheckBarracks15306 ld hl,$4000 + (000*128) + (000/2) - 128 15307 ld de,$0000 + (057*128) + (176/2) - 128 15308 ld bc,$0000 + (101*256) + (080/2) 15309 ld a,IndividualBuildingsBlock 15310 call CopyRamToVramCorrectedCastleOverview 15311 ld hl,CopyBarracks15312 call docopy15313 .EndCheckBarracks:1531515316 ld a,(iy+CastleBarracksLevel)15317 cp 615318 jr nz,.EndCheckBarracksUpgrade15319 ld hl,$4000 + (100*128) + (160/2) - 128 15320 ld de,$0000 + (006*128) + (202/2) - 128 15321 ld bc,$0000 + (088*256) + (048/2) 15322 ld a,IndividualBuildingsBlock 15323 call CopyRamToVramCorrectedCastleOverview 15324 ld hl,CopyBarracksUpgrade15325 call docopy15326 .EndCheckBarracksUpgrade:1532815329 ld a,(iy+CastleSawmillLevel)15330 or a15331 jr z,.EndCheckSawmill15332 ld hl,$4000 + (101*128) + (000/2) - 128 15333 ld de,$0000 + (101*128) + (032/2) - 128 15334 ld bc,$0000 + (035*256) + (060/2) 15335 ld a,IndividualBuildingsBlock 15336 call CopyRamToVramCorrectedCastleOverview 15337 ld hl,CopySawmill15338 call docopy15339 .EndCheckSawmill:1534115342 ld a,(iy+CastleMineLevel)15343 or a15344 jr z,.EndCheckMine15345 ld hl,$4000 + (136*128) + (000/2) - 128 15346 ld de,$0000 + (150*128) + (000/2) - 128 15347 ld bc,$0000 + (052*256) + (126/2) 15348 ld a,IndividualBuildingsBlock 15349 call CopyRamToVramCorrectedCastleOverview 15350 ld hl,CopyMine15351 call docopy15352 .EndCheckMine:1535415355 ld a,(iy+CastleMageGuildLevel)15356 or a15357 jr z,.EndCheckMageGuild15358 ld hl,$4000 + (000*128) + (208/2) - 128 15359 ld de,$0000 + (019*128) + (000/2) - 128 15360 ld bc,$0000 + (168*256) + (048/2) 15361 ld a,IndividualBuildingsBlock 15362 call CopyRamToVramCorrectedCastleOverview 15363 ld hl,CopyMageGuild15364 call docopy15365 .EndCheckMageGuild:15367 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady15368 call docopy1537015371 ld a,(iy+CastleTavern)15372 or a15373 jr z,.EndCheckTavern15374 ld hl,$4000 + (000*128) + (000/2) - 128 15375 ld de,$0000 + (097*128) + (060/2) - 128 15376 ld bc,$0000 + (115*256) + (158/2) 15377 ld a,IndividualBuildingsPage2Block 15378 call CopyRamToVramCorrectedCastleOverview 15379 ld hl,CopyTavern15380 call docopy15381 .EndCheckTavern:1538315384 ld a,(iy+CastleMarket)15385 or a15386 jr z,.EndCheckMarket15387 ld hl,$4000 + (000*128) + (080/2) - 128 15388 ld de,$0000 + (000*128) + (000/2) - 128 15389 ld bc,$0000 + (088*256) + (090/2) 15390 ld a,IndividualBuildingsBlock 15391 call CopyRamToVramCorrectedCastleOverview 15392 ld hl,CopyChamberOfCommerce15393 call docopy15394 .EndCheckMarket:1539615397 ld a,(iy+CastleLevel)15398 cp 615399 jr nz,.EndCheckCityWalls15400 ld hl,$4000 + (115*128) + (000/2) - 128 15401 ld de,$0000 + (185*128) + (000/2) - 128 15402 ld bc,$0000 + (027*256) + (256/2) 15403 ld a,IndividualBuildingsPage2Block 15404 call CopyRamToVramCorrectedCastleOverview 15405 ld hl,CopyCityWalls15406 call docopy15407 .EndCheckCityWalls:15408 ret15410SetCastleOverviewGraphics: 15411 ld hl,$4000 + (000*128) + (000/2) - 12815412 ld de,$0000 + (000*128) + (000/2) - 12815413 ld bc,$0000 + (212*256) + (256/2)15414 ld a,CastleOverviewBlock 15415 jp CopyRamToVramCorrectedCastleOverview 15417SetBuildGraphics: 15418 ld hl,$4000 + (000*128) + (000/2) - 12815419 ld de,$0000 + (000*128) + (000/2) - 12815420 ld bc,$0000 + (212*256) + (256/2)15421 ld a,BuildBlock 15422 call CopyRamToVramCorrectedCastleOverview 15424 15425 ld hl,$4000 + (000*128) + (000/2) - 12815426 ld de,$0000 + (000*128) + (000/2) - 12815427 ld bc,$0000 + (020*256) + (256/2)15428 ld a,ChamberOfCommerceBlock 15429 jp CopyRamToVramCorrectedCastleOverview 15431ClearTextBuildWindow:15432 ld hl,$4000 + (046*128) + (180/2) - 12815433 ld de,$0000 + (046*128) + (180/2) - 12815434 ld bc,$0000 + (131*256) + (072/2)15435 ld a,BuildBlock 15436 jp CopyRamToVramCorrectedCastleOverview 15438SetCastleOverViewFontPage0Y212: 15439 ld hl,$4000 + (000*128) + (000/2) - 12815440 ld de,$0000 + (212*128) + (000/2) - 12815441 ld bc,$0000 + (006*256) + (256/2)15442 ld a,CastleOverviewFontBlock 15443 jp CopyRamToVramCorrectedWithoutActivePageSetting 15445SetRecruitGraphics:15446 ld hl,$4000 + (000*128) + (000/2) - 12815447 ld de,$0000 + (000*128) + (000/2) - 12815448 ld bc,$0000 + (212*256) + (256/2)15449 ld a,RecruitCreaturesBlock 15450 call CopyRamToVramCorrectedCastleOverview 15452 ld a,r15453 and 315454 ld hl,$4000 + (000*128) + (000/2) - 12815455 jr z,.MonsterFound15456 dec a15457 ld hl,$4000 + (030*128) + (000/2) - 12815458 jr z,.MonsterFound15459 dec a15460 ld hl,$4000 + (060*128) + (000/2) - 12815461 jr z,.MonsterFound15462 ld hl,$4000 + (090*128) + (000/2) - 12815463 .MonsterFound:15464 ld de,$0000 + (133*128) + (000/2) - 12815465 ld bc,$0000 + (030*256) + (256/2)15466 ld a,RecruitCreatures4MonstersBlock 15467 jp CopyRamToVramCorrectedCastleOverview 15469SetRecruitGraphics6CreatureWindows:15470 ld hl,$4000 + (026*128) + (000/2) - 12815471 ld de,$0000 + (026*128) + (000/2) - 12815472 ld bc,$0000 + (103*256) + (256/2)15473 ld a,RecruitCreaturesBlock 15474 jp CopyRamToVramCorrectedCastleOverview 15476SetVisitingAndDefendingHeroesAndArmyWindow:15477 ld hl,$4000 + (174*128) + (004/2) - 12815478 ld de,$0000 + (174*128) + (004/2) - 12815479 ld bc,$0000 + (034*256) + (248/2)15480 ld a,RecruitCreaturesBlock 15481 jp CopyRamToVramCorrectedCastleOverview 15483SetMagicGuildGraphics:15484 ld hl,$4000 + (000*128) + (000/2) - 12815485 ld de,$0000 + (000*128) + (000/2) - 12815486 ld bc,$0000 + (212*256) + (256/2)15487 ld a,MagicGuildBlock 15488 jp CopyRamToVramCorrectedCastleOverview 15490SetMarketPlaceGraphics:15491 ld hl,$4000 + (000*128) + (000/2) - 12815492 ld de,$0000 + (000*128) + (000/2) - 12815493 ld bc,$0000 + (212*256) + (256/2)15494 ld a,ChamberOfCommerceBlock 15495 jp CopyRamToVramCorrectedCastleOverview 15497SetTavernGraphics:15498 ld hl,$4000 + (000*128) + (000/2) - 12815499 ld de,$0000 + (000*128) + (000/2) - 12815500 ld bc,$0000 + (212*256) + (256/2)15501 ld a,TavernBlock 15502 jp CopyRamToVramCorrectedCastleOverview 15504SetHeroArmyTransferGraphics:15505 ld hl,$4000 + (000*128) + (000/2) - 12815506 ld de,$0000 + (030*128) + (024/2) - 12815507 ld bc,$0000 + (137*256) + (156/2)15508 ld a,HeroArmyTransferGraphicsBlock 15509 jp CopyRamToVramCorrectedCastleOverview 15511CopyBarracks:15512 db 176,0,057,015513 db 176,0,057,115514 db 080,0,101,015515 db 0,%0000 0000,$9815517CopyBarracksUpgrade:15518 db 202,0,006,015519 db 202,0,006,115520 db 048,0,088,015521 db 0,%0000 0000,$9815523CopySawmill:15524 db 032,0,101,015525 db 032,0,101,115526 db 060,0,035,015527 db 0,%0000 0000,$9815529CopyMine:15530 db 000,0,150,015531 db 050,0,126,115532 db 126,0,052,015533 db 0,%0000 0000,$9815535CopyMageGuild:15536 db 000,0,019,015537 db 000,0,019,115538 db 048,0,168,015539 db 0,%0000 0000,$9815541CopyTavern:15542 db 060,0,097,015543 db 060,0,097,115544 db 158,0,115,015545 db 0,%0000 0000,$9815547CopyChamberOfCommerce:15548 db 000,0,000,015549 db 166,0,106,115550 db 090,0,088,015551 db 0,%0000 0000,$9815553CopyCityWalls:15554 db 000,0,185,015555 db 000,0,185,115556 db 000,1,027,015557 db 0,%0000 0000,$9815559SetResourcesPlayer:15560 call SetCastleOverViewFontPage0Y212 15562 ld hl,$4000 + (007*128) + (032/2) - 12815563 ld de,$0000 + (007*128) + (032/2) - 12815564 ld bc,$0000 + (005*256) + (220/2)15565 ld a,ChamberOfCommerceBlock 15566 call CopyRamToVramCorrectedCastleOverview 15568 call SetResourcesCurrentPlayerinIX15570 15571 ld b,217 15572 ld c,007 15573 ld l,(ix+0)15574 ld h,(ix+1)15575 call SetNumber16BitCastle 15577 ld b,035 15578 ld c,007 15579 ld l,(ix+2)15580 ld h,(ix+3)15581 call SetNumber16BitCastle 15583 ld b,078 15584 ld c,007 15585 ld l,(ix+4)15586 ld h,(ix+5)15587 call SetNumber16BitCastle 15589 ld b,122 15590 ld c,007 15591 ld l,(ix+6)15592 ld h,(ix+7)15593 call SetNumber16BitCastle 15595 ld b,166 15596 ld c,007 15597 ld l,(ix+8)15598 ld h,(ix+9)15599 call SetNumber16BitCastle 15600 ret15602MSXHeroes.asm865 ds $c000-$,$ff866dephase868871PlayerStartTurnBlock: equ $44872phase $4000873 incbin "..\grapx\HeroOverview\PlayerStartTurnWindow.SC5",7,95 * 128 874 ds $8000-$,$ff875dephase877880SpritesWeaponsBlock: equ $45881phase $4000882SpriteCharKingMori:883 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tgs.gen12 db 03 db 164 db 165 db 366 db 07 db 08 db 329 db 3210 db 6311 db 012 db 013 db 1614 db 6415 db 3216 db 317 db 318 db 019 db 9620 db 9621 db 222 db 123 db 424 db 025 db 026 db 25427 db 228 db 229 db 030 db 031 db 1832 db 433 db 434 db 035 db 036 db 037 db 438 db 6339 db 6340 db 9541 db 9542 db 3243 db 3144 db 3145 db 11146 db 19147 db 048 db 349 db 050 db 051 db 052 db 9653 db 054 db 25455 db 25156 db 25257 db 25258 db 259 db 25360 db 25361 db 25462 db 25463 db 1664 db 065 db 066 db 067 db 068 db 4469 db 070 db 5471 db 4872 db 8073 db 8074 db 075 db 1676 db 2477 db 10478 db 17679 db 080 db 3681 db 082 db 083 db 084 db 14685 db 12886 db 687 db 1188 db 1289 db 490 db 091 db 592 db 593 db 694 db 5495 db 12896 db 15497 db 09899 db 0100 db 6101 db 6102 db 64103 db 128104 db 32105 db 0106 db 0107 db 127108 db 64109 db 64110 db 0111 db 0112 db 72113 db 32114 db 32115 db 0116 db 8117 db 8118 db 36119 db 0120 db 0121 db 4122 db 4123 db 252124 db 0125 db 0126 db 8127 db 2128 db 4129 db 192130 db 192131 db 0132 db 0133 db 6134 db 0135 db 127136 db 223137 db 63138 db 63139 db 64140 db 191141 db 191142 db 127143 db 127144 db 8145 db 0146 db 0147 db 0148 db 0149 db 0150 db 32151 db 252152 db 252153 db 250154 db 250155 db 4156 db 248157 db 248158 db 246159 db 253160 db 0161 db 192162 db 0163 db 0164 db 0165 db 73166 db 1167 db 96168 db 208169 db 48170 db 32171 db 0172 db 160173 db 160174 db 96175 db 108176 db 1177 db 89178 db 0179 db 0180 db 0181 db 52182 db 0183 db 108184 db 12185 db 10186 db 10187 db 0188 db 8189 db 24190 db 22191 db 13192 db 0193 db 36194 db 0195MSXHeroes.asm884SpriteColKingMori:885 ..\grapx\MonsterSprites\SpriesWeapons\KingMori.tcs.gen12 db 2553 db 134 db 25 db 26 db 27 db 108 db 109 db 1010 db 1211 db 1012 db 1013 db 1014 db 215 db 216 db 217 db 1318 db 25519 db 25520 db 7421 db 7422 db 7623 db 7624 db 7625 db 7626 db 7727 db 7628 db 7629 db 7630 db 7631 db 7432 db 7433 db 25534 db 25535 db 25536 db 7737 db 7638 db 7739 db 7740 db 7741 db 7742 db 25543 db 7744 db 7745 db 7746 db 7747 db 7648 db 7749 db 2555051 db 25552 db 1353 db 254 db 255 db 256 db 1057 db 1058 db 1059 db 1260 db 1061 db 1062 db 1063 db 264 db 265 db 266 db 1367 db 25568 db 25569 db 7470 db 7471 db 7672 db 7673 db 7674 db 7675 db 7776 db 7677 db 7678 db 7679 db 7680 db 7481 db 7482 db 25583 db 25584 db 25585 db 7786 db 7687 db 7788 db 7789 db 7790 db 7791 db 25592 db 7793 db 7794 db 7795 db 7796 db 7697 db 7798 db 25599MSXHeroes.asm886SpriteCharBubbleBobble:887 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tgs.gen12 db 33 db 154 db 315 db 586 db 1157 db 1238 db 2519 db 23810 db 22811 db 22412 db 11213 db 11214 db 6015 db 3116 db 1517 db 318 db 19219 db 24020 db 24821 db 6022 db 1423 db 1424 db 725 db 726 db 727 db 3928 db 9429 db 17430 db 12431 db 24832 db 24033 db 19234 db 035 db 1236 db 1937 db 438 db 839 db 8540 db 18141 db 17042 db 16443 db 16044 db 8045 db 8046 db 4447 db 1948 db 1249 db 050 db 051 db 4852 db 20053 db 054 db 055 db 1056 db 557 db 558 db 559 db 3760 db 12261 db 23462 db 11663 db 20064 db 4865 db 066 db 067 db 068 db 069 db 4270 db 8571 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 5286 db 1087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 15101 db 31102 db 62103 db 127104 db 127105 db 255106 db 238107 db 228108 db 224109 db 112110 db 112111 db 60112 db 31113 db 15114 db 3115 db 192116 db 240117 db 248118 db 60119 db 14120 db 14121 db 7122 db 7123 db 7124 db 39125 db 126126 db 238127 db 124128 db 248129 db 240130 db 192131 db 0132 db 12133 db 19134 db 42135 db 85136 db 85137 db 181138 db 170139 db 164140 db 160141 db 80142 db 80143 db 44144 db 19145 db 12146 db 0147 db 0148 db 48149 db 200150 db 52151 db 10152 db 10153 db 5154 db 5155 db 5156 db 37157 db 122158 db 234159 db 116160 db 200161 db 48162 db 0163 db 0164 db 0165 db 0166 db 0167 db 81168 db 81169 db 177170 db 0171 db 0172 db 0173 db 80174 db 80175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 10184 db 10185 db 5186 db 0187 db 0188 db 0189 db 90190 db 170191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm888SpriteColBubbleBobble:889 ..\grapx\MonsterSprites\SpriesWeapons\BubbleBobble.tcs.gen12 db 133 db 14 db 15 db 16 db 17 db 18 db 19 db 110 db 111 db 112 db 113 db 114 db 115 db 116 db 117 db 1318 db 25519 db 7720 db 7721 db 6622 db 6623 db 7624 db 7625 db 7726 db 7727 db 7728 db 7629 db 7630 db 7731 db 7732 db 7733 db 25534 db 25535 db 25536 db 25537 db 7738 db 7639 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 453 db 454 db 455 db 456 db 457 db 458 db 459 db 460 db 461 db 462 db 463 db 464 db 465 db 466 db 1367 db 25568 db 7769 db 7770 db 7771 db 7672 db 7673 db 7674 db 7775 db 7776 db 7777 db 7678 db 7679 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 7788 db 7789 db 7790 db 25591 db 25592 db 25593 db 7794 db 7795 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm890SpriteCharAxeMan:891 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tgs.gen12 db 13 db 04 db 05 db 86 db 377 db 238 db 319 db 410 db 3011 db 6112 db 3013 db 1314 db 415 db 016 db 017 db 018 db 12819 db 19220 db 9621 db 17622 db 21623 db 23624 db 25425 db 19826 db 9627 db 3228 db 14429 db 7230 db 3631 db 1832 db 933 db 634 db 035 db 136 db 137 db 5138 db 5939 db 5640 db 2741 db 5942 db 24343 db 25144 db 12545 db 6246 db 3047 db 1448 db 649 db 050 db 051 db 052 db 12853 db 19254 db 22455 db 24056 db 25457 db 5658 db 12859 db 19260 db 22461 db 24062 db 5663 db 2864 db 1465 db 466 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 11289 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 3100 db 7101 db 15102 db 7103 db 15104 db 31105 db 5106 db 10107 db 4108 db 9109 db 19110 db 36111 db 72112 db 144113 db 32114 db 64115 db 0116 db 0117 db 184118 db 96119 db 72120 db 240121 db 96122 db 113123 db 251124 db 246125 db 108126 db 88127 db 112128 db 224129 db 192130 db 0131 db 0132 db 0133 db 2134 db 31135 db 62136 db 31137 db 123138 db 7139 db 15140 db 14141 db 28142 db 56143 db 112144 db 224145 db 192146 db 0147 db 0148 db 0149 db 16150 db 184151 db 176152 db 176153 db 152154 db 158155 db 60156 db 120157 db 240158 db 224159 db 128160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 124169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 96197 db 144198 db 72199 db 36200 db 18201 db 9202 db 4203 db 6204 db 99205 db 127206 db 55207 db 27208 db 13209 db 6210 db 3211 db 1212 db 0213 db 0214 db 0215 db 32216 db 176217 db 120218 db 188219 db 120220 db 32221 db 248222 db 232223 db 164224 db 16225 db 0226 db 0227 db 128228 db 32229 db 112230 db 56231 db 28232 db 15233 db 7234 db 3235 db 1236 db 28237 db 127238 db 15239 db 7240 db 3241 db 1242 db 0243 db 0244 db 0245 db 96246 db 112247 db 120248 db 124249 db 190250 db 223251 db 207252 db 220253 db 216254 db 28255 db 220256 db 204257 db 128258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 14270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 3295 db 7296 db 14297 db 26298 db 54299 db 111300 db 223301 db 142302 db 6303 db 15304 db 18305 db 6306 db 29307 db 0308 db 0309 db 2310 db 4311 db 9312 db 18313 db 36314 db 200315 db 144316 db 32317 db 80318 db 160319 db 248320 db 240321 db 224322 db 240323 db 224324 db 192325 db 0326 db 0327 db 0328 db 1329 db 7330 db 15331 db 30332 db 60333 db 121334 db 25335 db 13336 db 13337 db 29338 db 8339 db 0340 db 0341 db 0342 db 3343 db 7344 db 14345 db 28346 db 56347 db 112348 db 240349 db 224350 db 222351 db 248352 db 124353 db 248354 db 64355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 0365 db 0366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 0381 db 0382 db 0383 db 62384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm892SpriteColAxeMan:893 ..\grapx\MonsterSprites\SpriesWeapons\AxeMan.tcs.gen12 db 133 db 134 db 135 db 136 db 137 db 138 db 99 db 1310 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1418 db 25519 db 7820 db 7821 db 7822 db 7823 db 7824 db 7725 db 7826 db 7827 db 7828 db 7829 db 7830 db 7831 db 7832 db 7833 db 7934 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7941 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1452 db 1453 db 1454 db 1355 db 1356 db 957 db 1358 db 1359 db 1360 db 1361 db 1362 db 1363 db 1364 db 1365 db 1366 db 1367 db 25568 db 25569 db 7970 db 7871 db 7872 db 7773 db 7874 db 7875 db 7876 db 7877 db 7878 db 7879 db 7880 db 7881 db 7882 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 25590 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 14101 db 13102 db 13103 db 13104 db 13105 db 13106 db 13107 db 13108 db 13109 db 9110 db 13111 db 13112 db 13113 db 13114 db 13115 db 13116 db 79117 db 78118 db 78119 db 78120 db 78121 db 78122 db 78123 db 78124 db 78125 db 77126 db 78127 db 78128 db 78129 db 78130 db 78131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 79142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 13150 db 13151 db 13152 db 13153 db 13154 db 13155 db 13156 db 13157 db 13158 db 13159 db 9160 db 13161 db 13162 db 14163 db 14164 db 14165 db 255166 db 78167 db 78168 db 78169 db 78170 db 78171 db 78172 db 78173 db 78174 db 78175 db 77176 db 78177 db 78178 db 79179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 255189 db 255190 db 255191 db 78192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm894SpriteCharGeneralBullet1:895 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tgs.gen12 db 03 db 04 db 05 db 36 db 77 db 158 db 309 db 2810 db 3011 db 3112 db 1513 db 714 db 315 db 016 db 017 db 018 db 019 db 020 db 021 db 12822 db 19223 db 22424 db 24025 db 11226 db 24027 db 24028 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 439 db 340 db 641 db 442 db 643 db 344 db 845 db 446 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 6455 db 12856 db 19257 db 6458 db 19259 db 12860 db 3261 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 872 db 1773 db 1974 db 1775 db 1676 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 3288 db 1689 db 14490 db 1691 db 1692 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm896SpriteColGeneralBullet1:897 ..\grapx\MonsterSprites\SpriesWeapons\GeneralBullet1.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7723 db 7524 db 7525 db 7526 db 7527 db 7528 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7641 db 7642 db 7643 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm898SpriteCharContraBullet:899 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 159 db 710 db 011 db 712 db 1513 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 12825 db 12826 db 6427 db 12828 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 842 db 1543 db 844 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 6458 db 16059 db 6460 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 474 db 875 db 476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 3291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 1106 db 1107 db 2108 db 1109 db 1110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 240122 db 224123 db 0124 db 224125 db 240126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 2139 db 5140 db 2141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 16155 db 240156 db 16157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 4172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 32187 db 16188 db 32189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm900SpriteColContraBullet:901 ..\grapx\MonsterSprites\SpriesWeapons\ContraBullet.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1011 db 1012 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7726 db 7627 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7842 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 1059 db 1060 db 1061 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7775 db 7676 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7891 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm902SpriteCharGrenadier:903 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tgs.gen12 db 03 db 04 db 05 db 06 db 97 db 158 db 59 db 510 db 1511 db 1512 db 1513 db 914 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 19223 db 22424 db 4825 db 1626 db 20827 db 24028 db 22429 db 19230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 640 db 1041 db 1042 db 043 db 244 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 3256 db 19257 db 22458 db 3259 db 4860 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 275 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 1689 db 1690 db 1691 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 3104 db 7105 db 12106 db 8107 db 11108 db 15109 db 7110 db 3111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 144120 db 240121 db 160122 db 160123 db 240124 db 240125 db 240126 db 144127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 4137 db 3138 db 7139 db 4140 db 12141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 96153 db 80154 db 80155 db 0156 db 64157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 8170 db 8171 db 8172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 64188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm904SpriteColGrenadier:905 ..\grapx\MonsterSprites\SpriesWeapons\Grenadier.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 1313 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7425 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 1362 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7474 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm906SpriteCharHandGrenade:907 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 69 db 1210 db 911 db 1112 db 1513 db 1514 db 715 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 9623 db 17624 db 14425 db 11226 db 22427 db 22428 db 22429 db 19230 db 12831 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 141 db 342 db 643 db 444 db 1045 db 1346 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 6456 db 9657 db 12858 db 059 db 060 db 16061 db 6462 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 172 db 473 db 874 db 875 db 976 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 14488 db 14489 db 11290 db 3291 db 9692 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 15104 db 28105 db 30106 db 31107 db 31108 db 15109 db 7110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 64122 db 32123 db 96124 db 144125 db 176126 db 224127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 3137 db 1138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 128154 db 192155 db 128156 db 96157 db 64158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 24169 db 20170 db 26171 db 20172 db 10173 db 7174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 64185 db 0186 db 32187 db 96188 db 144189 db 144190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 1200 db 3201 db 7202 db 7203 db 7204 db 14205 db 9206 db 13207 db 6208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 224216 db 240217 db 240218 db 208219 db 144220 db 48221 db 96222 db 128223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 2233 db 5234 db 0235 db 0236 db 1237 db 6238 db 2239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 176249 db 80250 db 32251 db 96252 db 192253 db 128254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 6267 db 4268 db 14269 db 9270 db 9271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 144283 db 16284 db 16285 db 32286 db 128287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 7298 db 13299 db 9300 db 6301 db 4302 db 2303 db 3304 db 1305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 224315 db 240316 db 248317 db 248318 db 120319 db 56320 db 240321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 2331 db 6332 db 1333 db 3334 db 1335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 0349 db 0350 db 128351 db 192352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 9363 db 9364 db 6365 db 4366 db 0367 db 2368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 224379 db 80380 db 40381 db 88382 db 40383 db 24384 db 0385 db 0386 db 0387 db 0388 db 0389MSXHeroes.asm908SpriteColHandGrenade:909 ..\grapx\MonsterSprites\SpriesWeapons\HandGrenade.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 48 db 49 db 410 db 411 db 412 db 413 db 414 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7424 db 7425 db 7426 db 7427 db 7428 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7740 db 7741 db 7742 db 7743 db 7744 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 457 db 458 db 459 db 460 db 461 db 462 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7473 db 7474 db 7475 db 7476 db 7477 db 7478 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 13104 db 4105 db 4106 db 4107 db 4108 db 4109 db 4110 db 4111 db 13112 db 255113 db 255114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 77121 db 77122 db 74123 db 74124 db 74125 db 74126 db 74127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 77139 db 77140 db 77141 db 77142 db 77143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 4155 db 4156 db 4157 db 4158 db 4159 db 4160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 74171 db 74172 db 74173 db 74174 db 74175 db 74176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 255193 db 255194 db 255195 db 255196 db 255197MSXHeroes.asm910SpriteCharVanguard:911 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tgs.gen12 db 03 db 04 db 05 db 146 db 197 db 148 db 2519 db 12810 db 6411 db 12712 db 6313 db 3114 db 1415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 1226 db 727 db 25528 db 25429 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 1439 db 24340 db 25341 db 25542 db 25543 db 12144 db 5745 db 1946 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 24856 db 25257 db 24758 db 24959 db 25560 db 25461 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 1072 db 24973 db 074 db 12875 db 5976 db 1077 db 1078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 25289 db 790 db 091 db 25492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 48107 db 224108 db 255109 db 127110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 112119 db 200120 db 112121 db 223122 db 1123 db 2124 db 254125 db 252126 db 248127 db 112128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 31137 db 63138 db 239139 db 159140 db 255141 db 127142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 112152 db 207153 db 191154 db 255155 db 255156 db 158157 db 156158 db 200159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 63170 db 224171 db 0172 db 127173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 80185 db 159186 db 0187 db 1188 db 220189 db 80190 db 80191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm912SpriteColVanguard:913 ..\grapx\MonsterSprites\SpriesWeapons\Vanguard.tcs.gen12 db 2553 db 2554 db 2555 db 136 db 137 db 108 db 109 db 1010 db 1011 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 7823 db 7724 db 7625 db 7626 db 7627 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 7840 db 7741 db 7742 db 7743 db 7844 db 7845 db 7846 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 1355 db 1356 db 1057 db 1058 db 1059 db 1060 db 1261 db 1262 db 1263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 7872 db 7773 db 7674 db 7675 db 7676 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7889 db 7790 db 7791 db 7792 db 7893 db 7894 db 7895 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm914SpriteCharLanFang:915 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 639 db 010 db 12711 db 12712 db 9513 db 3114 db 615 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 2426 db 24827 db 19228 db 12829 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 8843 db 7044 db 6445 db 2546 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 858 db 5659 db 6460 db 12861 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 6374 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 22490 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 6102 db 31103 db 95104 db 127105 db 127106 db 0107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 128120 db 192121 db 248122 db 24123 db 248124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 25135 db 64136 db 70137 db 88138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 128152 db 64153 db 56154 db 8155 db 0156 db 0157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 63171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 224187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 7197 db 31198 db 63199 db 63200 db 127201 db 127202 db 127203 db 0204 db 0205 db 0206 db 0207 db 0208 db 0209 db 0210 db 0211 db 0212 db 240213 db 240214 db 240215 db 240216 db 240217 db 240218 db 248219 db 8220 db 24221 db 56222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 6229 db 25230 db 36231 db 32232 db 88233 db 64234 db 88235 db 127236 db 0237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 16245 db 80246 db 16247 db 16248 db 16249 db 16250 db 24251 db 244252 db 8253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 64268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 4284 db 32285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 15294 db 15295 db 15296 db 15297 db 15298 db 15299 db 31300 db 16301 db 24302 db 28303 db 0304 db 0305 db 0306 db 0307 db 0308 db 0309 db 224310 db 248311 db 252312 db 252313 db 254314 db 254315 db 254316 db 0317 db 0318 db 0319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 8326 db 10327 db 8328 db 8329 db 8330 db 8331 db 24332 db 47333 db 16334 db 0335 db 0336 db 0337 db 0338 db 0339 db 0340 db 0341 db 96342 db 152343 db 36344 db 4345 db 26346 db 2347 db 26348 db 254349 db 0350 db 0351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 32365 db 4366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 2381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 1395 db 3396 db 31397 db 24398 db 31399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 96409 db 248410 db 250411 db 254412 db 254413 db 0414 db 252415 db 0416 db 0417 db 0418 db 0419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 1427 db 2428 db 28429 db 16430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 0441 db 152442 db 2443 db 98444 db 26445 db 0446 db 0447 db 0448 db 0449 db 0450 db 0451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 7462 db 0463 db 0464 db 0465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 252478 db 0479 db 0480 db 0481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 0488 db 0489 db 0490 db 0491 db 0492 db 0493 db 31494 db 24495 db 31496 db 3497 db 1498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 0509 db 252510 db 0511 db 254512 db 254513 db 250514 db 248515 db 96516 db 0517 db 0518 db 0519 db 0520 db 0521 db 0522 db 0523 db 0524 db 0525 db 0526 db 16527 db 28528 db 2529 db 1530 db 0531 db 0532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 0541 db 0542 db 0543 db 26544 db 98545 db 2546 db 152547 db 0548 db 0549 db 0550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 7559 db 0560 db 0561 db 0562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 252575 db 0576 db 0577 db 0578 db 0579 db 0580 db 0581 db 0582 db 0583584 db 0585 db 0586 db 0587 db 0588 db 0589 db 28590 db 24591 db 16592 db 31593 db 15594 db 15595 db 15596 db 15597 db 15598 db 15599 db 7600 db 0601 db 0602 db 0603 db 0604 db 0605 db 0606 db 0607 db 0608 db 254609 db 254610 db 254611 db 252612 db 252613 db 248614 db 224615 db 128616 db 0617 db 0618 db 0619 db 0620 db 0621 db 0622 db 16623 db 47624 db 24625 db 8626 db 8627 db 8628 db 8629 db 10630 db 8631 db 0632 db 0633 db 0634 db 0635 db 0636 db 0637 db 0638 db 0639 db 254640 db 26641 db 2642 db 26643 db 4644 db 36645 db 152646 db 96647 db 0648 db 0649 db 0650 db 0651 db 0652 db 0653 db 0654 db 4655 db 32656 db 0657 db 0658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 0669 db 0670 db 0671 db 2672 db 0673 db 0674 db 0675 db 0676 db 0677 db 0678 db 0679 db 0680681 db 0682 db 0683 db 0684 db 0685 db 0686 db 0687 db 0688 db 0689 db 127690 db 127691 db 127692 db 63693 db 63694 db 31695 db 7696 db 1697 db 0698 db 0699 db 0700 db 0701 db 0702 db 56703 db 24704 db 8705 db 248706 db 240707 db 240708 db 240709 db 240710 db 240711 db 240712 db 224713 db 0714 db 0715 db 0716 db 0717 db 0718 db 0719 db 0720 db 127721 db 88722 db 64723 db 88724 db 32725 db 36726 db 25727 db 6728 db 0729 db 0730 db 0731 db 0732 db 0733 db 0734 db 0735 db 8736 db 244737 db 24738 db 16739 db 16740 db 16741 db 16742 db 80743 db 16744 db 0745 db 0746 db 0747 db 0748 db 0749 db 0750 db 0751 db 0752 db 64753 db 0754 db 0755 db 0756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 0767 db 32768 db 4769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777MSXHeroes.asm916SpriteColLanFang:917 ..\grapx\MonsterSprites\SpriesWeapons\LanFang.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 1010 db 1211 db 1212 db 1213 db 1214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7526 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 1354 db 1255 db 1256 db 1257 db 1258 db 1059 db 1360 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 7771 db 7772 db 7773 db 7774 db 7575 db 25576 db 25577 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7691 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 12101 db 12102 db 12103 db 12104 db 12105 db 12106 db 12107 db 10108 db 10109 db 13110 db 255111 db 255112 db 255113 db 255114 db 255115 db 255116 db 77117 db 77118 db 77119 db 77120 db 77121 db 77122 db 77123 db 76124 db 75125 db 255126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 77140 db 76141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 12150 db 12151 db 12152 db 12153 db 12154 db 12155 db 12156 db 10157 db 10158 db 13159 db 255160 db 255161 db 255162 db 255163 db 255164 db 255165 db 77166 db 77167 db 77168 db 77169 db 77170 db 77171 db 77172 db 76173 db 75174 db 255175 db 255176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 77189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 255199 db 255200 db 13201 db 12202 db 12203 db 12204 db 12205 db 10206 db 13207 db 255208 db 255209 db 255210 db 255211 db 255212 db 255213 db 255214 db 255215 db 255216 db 255217 db 77218 db 77219 db 77220 db 77221 db 75222 db 255223 db 255224 db 255225 db 255226 db 255227 db 255228 db 255229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 76238 db 255239 db 255240 db 255241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 255248 db 255249 db 255250 db 255251 db 255252 db 255253 db 13254 db 10255 db 12256 db 12257 db 12258 db 12259 db 13260 db 255261 db 255262 db 255263 db 255264 db 255265 db 255266 db 255267 db 255268 db 255269 db 255270 db 75271 db 77272 db 77273 db 77274 db 77275 db 255276 db 255277 db 255278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 76287 db 255288 db 255289 db 255290 db 255291 db 255292 db 255293 db 255294 db 255295296 db 255297 db 255298 db 255299 db 255300 db 255301 db 13302 db 10303 db 10304 db 12305 db 12306 db 12307 db 12308 db 12309 db 12310 db 12311 db 13312 db 255313 db 255314 db 255315 db 255316 db 255317 db 255318 db 75319 db 76320 db 77321 db 77322 db 77323 db 77324 db 77325 db 77326 db 77327 db 255328 db 255329 db 255330 db 255331 db 255332 db 255333 db 255334 db 76335 db 77336 db 255337 db 255338 db 255339 db 255340 db 255341 db 255342 db 255343 db 255344345 db 255346 db 255347 db 255348 db 255349 db 255350 db 13351 db 10352 db 10353 db 12354 db 12355 db 12356 db 12357 db 12358 db 12359 db 12360 db 13361 db 255362 db 255363 db 255364 db 255365 db 255366 db 255367 db 75368 db 76369 db 77370 db 77371 db 77372 db 77373 db 77374 db 77375 db 77376 db 255377 db 255378 db 255379 db 255380 db 255381 db 255382 db 255383 db 76384 db 77385 db 255386 db 255387 db 255388 db 255389 db 255390 db 255391 db 255392 db 255393MSXHeroes.asm918SpriteCharHanChen:919 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tgs.gen12 db 03 db 74 db 315 db 636 db 1037 db 1268 db 2549 db 25510 db 25511 db 25512 db 25513 db 12714 db 12715 db 6316 db 3117 db 1518 db 1819 db 19920 db 24221 db 12022 db 10123 db 22024 db 25425 db 11826 db 25427 db 25428 db 25429 db 25230 db 25231 db 24832 db 24033 db 19234 db 035 db 736 db 3137 db 6338 db 12639 db 10340 db 19541 db 23142 db 25543 db 12744 db 6345 db 1546 db 047 db 048 db 049 db 050 db 051 db 19452 db 24453 db 15654 db 22855 db 11656 db 11857 db 14258 db 14259 db 25260 db 24861 db 22462 db 063 db 064 db 065 db 066 db 067 db 768 db 3169 db 6370 db 12771 db 6772 db 23073 db 25574 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 19284 db 24085 db 14486 db 12487 db 8488 db 11889 db 690 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098MSXHeroes.asm920SpriteColHanChen:921 ..\grapx\MonsterSprites\SpriesWeapons\HanChen.tcs.gen12 db 93 db 94 db 95 db 106 db 97 db 108 db 109 db 1010 db 1311 db 1312 db 1313 db 1314 db 1315 db 1316 db 1317 db 1318 db 25519 db 7520 db 7621 db 7622 db 7423 db 7624 db 7725 db 7726 db 7927 db 7928 db 7929 db 7930 db 25531 db 25532 db 25533 db 25534 db 25535 db 7936 db 7937 db 7738 db 7639 db 7740 db 7841 db 7842 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm922SpriteCharLiYen:923 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2499 db 25510 db 25511 db 6312 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 25224 db 25525 db 25526 db 23127 db 24028 db 24829 db 4830 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 24941 db 24742 db 22343 db 5644 db 745 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 12357 db 12758 db 23159 db 4860 db 20061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 24973 db 774 db 19375 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 389 db 5690 db 3991 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 63105 db 255106 db 255107 db 231108 db 15109 db 31110 db 12111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 159122 db 255123 db 255124 db 252125 db 224126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 222138 db 254139 db 231140 db 12141 db 19142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 159154 db 239155 db 251156 db 28157 db 224158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 192170 db 28171 db 228172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 159186 db 224187 db 131188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm924SpriteColLiYen:925 ..\grapx\MonsterSprites\SpriesWeapons\LiYen.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 138 db 49 db 410 db 411 db 1212 db 1213 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 7625 db 7626 db 7627 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 458 db 459 db 460 db 1261 db 1262 db 1363 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7674 db 7675 db 7676 db 7777 db 7778 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm926SpriteCharKnightYama:927 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tgs.gen12 db 03 db 04 db 35 db 76 db 157 db 318 db 319 db 6310 db 6311 db 3112 db 3113 db 1514 db 715 db 116 db 017 db 018 db 019 db 020 db 12821 db 22422 db 24023 db 24824 db 24825 db 25226 db 25227 db 25228 db 24829 db 24030 db 22431 db 12832 db 033 db 034 db 035 db 036 db 037 db 438 db 339 db 040 db 841 db 1642 db 1743 db 844 db 845 db 446 db 647 db 048 db 049 db 050 db 051 db 052 db 053 db 9654 db 055 db 19256 db 3257 db 20858 db 6459 db 12860 db 061 db 062 db 9663 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 871 db 2372 db 2073 db 4174 db 4675 db 1876 db 2177 db 878 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 14487 db 4088 db 20089 db 3690 db 14891 db 10092 db 13693 db 1694 db 095 db 096 db 097 db 098MSXHeroes.asm928SpriteColKnightYama:929 ..\grapx\MonsterSprites\SpriesWeapons\KnightYama.tcs.gen12 db 2553 db 2554 db 135 db 96 db 97 db 98 db 99 db 910 db 911 db 912 db 913 db 914 db 915 db 1316 db 25517 db 25518 db 25519 db 25520 db 25521 db 7722 db 7523 db 7524 db 7525 db 7526 db 7527 db 7528 db 7529 db 7530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm930SpriteCharBisshopHeichi:931 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 2559 db 8010 db 17611 db 25512 db 22413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 24825 db 626 db 327 db 25528 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 17542 db 7943 db 3144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 24858 db 25259 db 25560 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 6476 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 690 db 391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 31106 db 96107 db 192108 db 255109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 255122 db 10123 db 13124 db 255125 db 7126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 31139 db 63140 db 255141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 0154 db 245155 db 242156 db 248157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 96171 db 192172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 0188 db 2189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm932SpriteColBisshopHeichi:933 ..\grapx\MonsterSprites\SpriesWeapons\BisshopHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 139 db 410 db 411 db 412 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 7426 db 7427 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7742 db 7743 db 7844 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 1358 db 459 db 460 db 461 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 25574 db 7475 db 7476 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 7791 db 7792 db 7893 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm934SpriteCharPornHeichi:935 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tgs.gen12 db 03 db 04 db 05 db 06 db 1247 db 2558 db 1959 db 19210 db 12711 db 12712 db 12713 db 12414 db 12415 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 20624 db 25525 db 5126 db 25227 db 25428 db 20629 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 13140 db 12841 db 12842 db 12843 db 12844 db 12845 db 13146 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 20656 db 4957 db 158 db 259 db 160 db 4961 db 20662 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 6073 db 6374 db 6375 db 6376 db 6077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 20490 db 24891 db 20492 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 115105 db 255106 db 204107 db 63108 db 127109 db 115110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 62120 db 255121 db 195122 db 3123 db 254124 db 254125 db 254126 db 62127 db 62128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 115137 db 140138 db 128139 db 64140 db 128141 db 140142 db 115143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 193153 db 1154 db 1155 db 1156 db 1157 db 1158 db 193159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 51171 db 31172 db 51173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 60186 db 252187 db 252188 db 252189 db 60190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm936SpriteColPornHeichi:937 ..\grapx\MonsterSprites\SpriesWeapons\PornHeichi.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 18 db 19 db 110 db 211 db 212 db 213 db 214 db 1315 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7841 db 7842 db 7843 db 7844 db 7845 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 157 db 158 db 159 db 260 db 261 db 262 db 263 db 1364 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7890 db 7891 db 7892 db 7893 db 7894 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm938SpriteCharYamaKnight:939 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tgs.gen12 db 03 db 14 db 155 db 636 db 1277 db 1268 db 619 db 6110 db 2911 db 3012 db 1413 db 1414 db 615 db 616 db 217 db 118 db 6219 db 25520 db 24921 db 23022 db 15223 db 9624 db 12825 db 026 db 027 db 12828 db 12829 db 12830 db 12831 db 12832 db 12833 db 034 db 035 db 136 db 1537 db 6238 db 11239 db 9640 db 4941 db 4942 db 2543 db 2444 db 1245 db 1246 db 447 db 448 db 149 db 050 db 051 db 19352 db 19353 db 654 db 2455 db 9656 db 12857 db 058 db 059 db 12860 db 12861 db 12862 db 12863 db 12864 db 065 db 066 db 067 db 068 db 1469 db 4870 db 6471 db 6472 db 3373 db 3374 db 1775 db 1676 db 877 db 878 db 179 db 180 db 081 db 082 db 083 db 084 db 185 db 686 db 2487 db 9688 db 12889 db 090 db 091 db 12892 db 12893 db 12894 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 3103 db 15104 db 63105 db 126106 db 129107 db 126108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 48117 db 248118 db 248119 db 252120 db 252121 db 60122 db 222123 db 94124 db 46125 db 47126 db 23127 db 23128 db 11129 db 11130 db 6131 db 0132 db 0133 db 0134 db 3135 db 15136 db 60137 db 112138 db 129139 db 126140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 200150 db 216151 db 12152 db 12153 db 12154 db 198155 db 70156 db 38157 db 35158 db 19159 db 19160 db 9161 db 9162 db 0163 db 0164 db 0165 db 0166 db 3167 db 12168 db 48169 db 64170 db 129171 db 126172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 8183 db 4184 db 4185 db 4186 db 194187 db 66188 db 34189 db 33190 db 17191 db 17192 db 4193 db 4194 db 0195196 db 0197 db 1198 db 1199 db 1200 db 1201 db 1202 db 1203 db 0204 db 0205 db 1206 db 6207 db 25208 db 103209 db 159210 db 255211 db 124212 db 128213 db 64214 db 96215 db 96216 db 112217 db 112218 db 120219 db 184220 db 188221 db 188222 db 126223 db 254224 db 252225 db 240226 db 128227 db 0228 db 0229 db 0230 db 1231 db 1232 db 1233 db 1234 db 1235 db 0236 db 0237 db 1238 db 6239 db 24240 db 96241 db 131242 db 131243 db 0244 db 0245 db 128246 db 32247 db 32248 db 48249 db 48250 db 24251 db 152252 db 140253 db 140254 db 6255 db 14256 db 124257 db 240258 db 128259 db 0260 db 0261 db 0262 db 0263 db 0264 db 1265 db 1266 db 1267 db 0268 db 0269 db 1270 db 6271 db 24272 db 96273 db 128274 db 0275 db 0276 db 0277 db 0278 db 128279 db 128280 db 16281 db 16282 db 8283 db 136284 db 132285 db 132286 db 2287 db 2288 db 12289 db 112290 db 0291 db 0292293 db 96294 db 208295 db 208296 db 232297 db 232298 db 244299 db 116300 db 122301 db 123302 db 60303 db 63304 db 63305 db 31306 db 31307 db 12308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 0316 db 126317 db 129318 db 126319 db 252320 db 240321 db 192322 db 0323 db 0324 db 0325 db 0326 db 144327 db 144328 db 200329 db 200330 db 196331 db 100332 db 98333 db 99334 db 48335 db 48336 db 48337 db 27338 db 19339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 0348 db 126349 db 129350 db 14351 db 60352 db 240353 db 192354 db 0355 db 0356 db 0357 db 0358 db 32359 db 32360 db 136361 db 136362 db 132363 db 68364 db 66365 db 67366 db 32367 db 32368 db 32369 db 16370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 126381 db 129382 db 2383 db 12384 db 48385 db 192386 db 0387 db 0388 db 0389MSXHeroes.asm940SpriteColYamaKnight:941 ..\grapx\MonsterSprites\SpriesWeapons\YamaKnight.tcs.gen12 db 133 db 94 db 85 db 86 db 87 db 88 db 89 db 810 db 811 db 812 db 813 db 814 db 915 db 916 db 1317 db 1318 db 25519 db 7720 db 7321 db 7322 db 7323 db 7324 db 7325 db 7326 db 7327 db 7328 db 7329 db 7330 db 7731 db 7732 db 7833 db 25534 db 25535 db 25536 db 7737 db 7738 db 7739 db 7740 db 7741 db 7742 db 7743 db 7744 db 7745 db 7746 db 7847 db 7848 db 25549 db 2555051 db 25552 db 1353 db 954 db 855 db 856 db 857 db 858 db 859 db 860 db 861 db 862 db 863 db 864 db 965 db 966 db 1367 db 25568 db 25569 db 7770 db 7371 db 7372 db 7373 db 7374 db 7375 db 7376 db 7377 db 7378 db 7379 db 7380 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 7787 db 7788 db 7789 db 7790 db 7791 db 7792 db 7793 db 7794 db 7795 db 7796 db 7897 db 7898 db 25599100 db 13101 db 13102 db 9103 db 9104 db 8105 db 8106 db 8107 db 8108 db 8109 db 8110 db 8111 db 8112 db 8113 db 8114 db 9115 db 13116 db 255117 db 78118 db 77119 db 77120 db 73121 db 73122 db 73123 db 73124 db 73125 db 73126 db 73127 db 73128 db 73129 db 73130 db 77131 db 255132 db 255133 db 255134 db 78135 db 78136 db 77137 db 77138 db 77139 db 77140 db 77141 db 77142 db 77143 db 77144 db 77145 db 77146 db 255147 db 255148149 db 13150 db 9151 db 9152 db 8153 db 8154 db 8155 db 8156 db 8157 db 8158 db 8159 db 8160 db 8161 db 8162 db 9163 db 13164 db 255165 db 255166 db 77167 db 77168 db 73169 db 73170 db 73171 db 73172 db 73173 db 73174 db 73175 db 73176 db 73177 db 73178 db 77179 db 255180 db 255181 db 255182 db 78183 db 78184 db 77185 db 77186 db 77187 db 77188 db 77189 db 77190 db 77191 db 77192 db 77193 db 77194 db 255195 db 255196 db 255197MSXHeroes.asm942SpriteCharGooGoo:943 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tgs.gen12 db 03 db 04 db 05 db 06 db 647 db 648 db 1279 db 12710 db 12711 db 6412 db 6413 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 25225 db 25426 db 25227 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 19140 db 3241 db 042 db 3243 db 19144 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 25256 db 457 db 258 db 459 db 25260 db 061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 12873 db 12874 db 12875 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 289 db 190 db 291 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 63106 db 127107 db 63108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 2120 db 2121 db 254122 db 254123 db 254124 db 2125 db 2126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 63137 db 32138 db 64139 db 32140 db 63141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 253153 db 4154 db 0155 db 4156 db 253157 db 0158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 64170 db 128171 db 64172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 1186 db 1187 db 1188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm944SpriteColGooGoo:945 ..\grapx\MonsterSprites\SpriesWeapons\GooGoo.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 78 db 69 db 610 db 611 db 712 db 1313 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7125 db 7126 db 7127 db 7728 db 25529 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 7741 db 7742 db 7743 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 1356 db 757 db 658 db 659 db 660 db 761 db 1362 db 25563 db 25564 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 7773 db 7174 db 7175 db 7176 db 7777 db 25578 db 25579 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 7790 db 7791 db 7792 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm946SpriteCharScreech:947 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tgs.gen12 db 03 db 284 db 285 db 506 db 1147 db 48 db 49 db 6710 db 8211 db 5312 db 3013 db 3014 db 015 db 016 db 017 db 018 db 019 db 11220 db 11221 db 25222 db 23623 db 1624 db 025 db 24826 db 21627 db 20028 db 5629 db 6030 db 2831 db 832 db 033 db 034 db 035 db 036 db 2037 db 438 db 3639 db 040 db 12241 db 442 db 3743 db 344 db 1845 db 3046 db 047 db 048 db 049 db 050 db 051 db 052 db 11253 db 8854 db 12055 db 1656 db 12057 db 1658 db 9659 db 4860 db 3261 db 3662 db 2063 db 064 db 065 db 066 db 067 db 068 db 3469 db 4270 db 7471 db 5672 db 6673 db 12374 db 7475 db 4076 db 3377 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 13685 db 13286 db 13287 db 088 db 12089 db 13690 db 13691 db 20092 db 6893 db 094 db 095 db 096 db 097 db 09899 db 0100 db 14101 db 14102 db 63103 db 55104 db 8105 db 0106 db 31107 db 27108 db 19109 db 28110 db 60111 db 56112 db 16113 db 0114 db 0115 db 0116 db 56117 db 56118 db 76119 db 78120 db 32121 db 32122 db 194123 db 74124 db 172125 db 120126 db 120127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 14134 db 26135 db 30136 db 8137 db 30138 db 8139 db 6140 db 12141 db 4142 db 36143 db 40144 db 0145 db 0146 db 0147 db 0148 db 0149 db 40150 db 32151 db 36152 db 0153 db 94154 db 32155 db 164156 db 192157 db 72158 db 120159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 17166 db 33167 db 33168 db 0169 db 30170 db 17171 db 17172 db 19173 db 34174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 68182 db 84183 db 82184 db 28185 db 66186 db 222187 db 82188 db 20189 db 132190 db 0191 db 0192 db 0193 db 0194 db 0195MSXHeroes.asm948SpriteColScreech:949 ..\grapx\MonsterSprites\SpriesWeapons\Screech.tcs.gen12 db 2553 db 134 db 25 db 16 db 17 db 28 db 29 db 110 db 111 db 112 db 213 db 114 db 115 db 1316 db 25517 db 25518 db 25519 db 25520 db 6721 db 6622 db 6623 db 6724 db 7625 db 6626 db 6627 db 6628 db 6729 db 7730 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 7737 db 7638 db 7639 db 7640 db 7741 db 7642 db 7643 db 7644 db 7745 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 1353 db 254 db 155 db 156 db 257 db 258 db 159 db 160 db 161 db 262 db 163 db 164 db 1365 db 25566 db 25567 db 25568 db 25569 db 6770 db 6671 db 6672 db 6773 db 7674 db 6675 db 6676 db 6677 db 6778 db 7779 db 7780 db 25581 db 25582 db 25583 db 25584 db 25585 db 7786 db 7687 db 7688 db 7689 db 7790 db 7691 db 7692 db 7693 db 7794 db 25595 db 25596 db 25597 db 25598 db 25599MSXHeroes.asm950SpriteCharPastryChef:951 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tgs.gen12 db 03 db 04 db 15 db 46 db 147 db 468 db 2479 db 25510 db 25511 db 24712 db 4613 db 1414 db 415 db 116 db 017 db 018 db 2019 db 15620 db 20621 db 23822 db 23123 db 11924 db 11925 db 11926 db 11927 db 11928 db 11929 db 23130 db 23831 db 20632 db 15633 db 2034 db 035 db 036 db 137 db 438 db 1039 db 4240 db 21341 db 10942 db 10943 db 21344 db 4245 db 1046 db 447 db 148 db 049 db 050 db 851 db 14852 db 7453 db 17054 db 16555 db 8556 db 8557 db 8558 db 8559 db 8560 db 8561 db 16562 db 17063 db 7464 db 14865 db 866 db 067 db 068 db 069 db 470 db 471 db 3272 db 073 db 074 db 075 db 076 db 3277 db 478 db 479 db 080 db 081 db 082 db 083 db 12884 db 12885 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 12896 db 12897 db 09899 db 40100 db 57101 db 115102 db 119103 db 231104 db 238105 db 238106 db 238107 db 238108 db 238109 db 238110 db 231111 db 119112 db 115113 db 57114 db 40115 db 0116 db 0117 db 128118 db 32119 db 112120 db 116121 db 239122 db 255123 db 255124 db 239125 db 116126 db 112127 db 32128 db 128129 db 0130 db 0131 db 16132 db 41133 db 82134 db 85135 db 165136 db 170137 db 170138 db 170139 db 170140 db 170141 db 170142 db 165143 db 85144 db 82145 db 41146 db 16147 db 0148 db 0149 db 128150 db 32151 db 80152 db 84153 db 171154 db 182155 db 182156 db 171157 db 84158 db 80159 db 32160 db 128161 db 0162 db 0163 db 0164 db 1165 db 1166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 1177 db 1178 db 0179 db 0180 db 0181 db 0182 db 32183 db 32184 db 4185 db 0186 db 0187 db 0188 db 0189 db 4190 db 32191 db 32192 db 0193 db 0194 db 0195MSXHeroes.asm952SpriteColPastryChef:953 ..\grapx\MonsterSprites\SpriesWeapons\PastryChef.tcs.gen12 db 133 db 124 db 125 db 126 db 127 db 128 db 129 db 1210 db 1211 db 1212 db 1213 db 1214 db 1215 db 1216 db 1217 db 1318 db 7819 db 7720 db 7721 db 7722 db 7723 db 7724 db 7725 db 7726 db 7727 db 7728 db 7729 db 7730 db 7731 db 7732 db 7733 db 7834 db 25535 db 7936 db 7837 db 7938 db 7839 db 7940 db 25541 db 25542 db 25543 db 25544 db 7945 db 7846 db 7947 db 7848 db 7949 db 2555051 db 1352 db 1253 db 1254 db 1255 db 1256 db 1257 db 1258 db 1259 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 7868 db 7769 db 7770 db 7771 db 7772 db 7773 db 7774 db 7775 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 7883 db 25584 db 7985 db 7886 db 7987 db 7888 db 7989 db 25590 db 25591 db 25592 db 25593 db 7994 db 7895 db 7996 db 7897 db 7998 db 25599MSXHeroes.asm954SpriteCharVicViper:955 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 1279 db 12810 db 12811 db 12712 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 3223 db 11224 db 25425 db 12726 db 12727 db 25428 db 11229 db 3230 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 12741 db 042 db 043 db 12744 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 8056 db 22257 db 3258 db 3259 db 22260 db 8061 db 062 db 063 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 25574 db 25575 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 19390 db 19391 db 092 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 2103 db 7104 db 3105 db 3106 db 2107 db 3108 db 7109 db 7110 db 15111 db 15112 db 30113 db 30114 db 12115 db 48116 db 120117 db 120118 db 240119 db 240120 db 224121 db 240122 db 120123 db 208124 db 128125 db 128126 db 0127 db 0128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 2135 db 5136 db 0137 db 0138 db 3139 db 2140 db 4141 db 4142 db 9143 db 9144 db 18145 db 18146 db 0147 db 0148 db 72149 db 72150 db 144151 db 144152 db 128153 db 64154 db 232155 db 80156 db 128157 db 128158 db 0159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 2169 db 3170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 32185 db 144186 db 0187 db 0188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 12197 db 30198 db 30199 db 15200 db 15201 db 7202 db 15203 db 30204 db 11205 db 1206 db 1207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 64216 db 224217 db 192218 db 192219 db 64220 db 192221 db 224222 db 224223 db 240224 db 240225 db 120226 db 120227 db 48228 db 0229 db 18230 db 18231 db 9232 db 9233 db 1234 db 2235 db 23236 db 10237 db 1238 db 1239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 64248 db 160249 db 0250 db 0251 db 192252 db 64253 db 32254 db 32255 db 144256 db 144257 db 72258 db 72259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 4266 db 9267 db 0268 db 0269 db 0270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 64282 db 192283 db 0284 db 0285 db 0286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292293 db 0294 db 0295 db 0296 db 0297 db 4298 db 14299 db 127300 db 254301 db 254302 db 127303 db 14304 db 4305 db 0306 db 0307 db 0308 db 0309 db 0310 db 0311 db 0312 db 0313 db 0314 db 0315 db 254316 db 1317 db 1318 db 254319 db 0320 db 0321 db 0322 db 0323 db 0324 db 0325 db 0326 db 0327 db 0328 db 0329 db 0330 db 10331 db 123332 db 4333 db 4334 db 123335 db 10336 db 0337 db 0338 db 0339 db 0340 db 0341 db 0342 db 0343 db 0344 db 0345 db 0346 db 0347 db 254348 db 0349 db 0350 db 254351 db 0352 db 0353 db 0354 db 0355 db 0356 db 0357 db 0358 db 0359 db 0360 db 0361 db 0362 db 0363 db 0364 db 131365 db 131366 db 0367 db 0368 db 0369 db 0370 db 0371 db 0372 db 0373 db 0374 db 0375 db 0376 db 0377 db 0378 db 0379 db 0380 db 255381 db 255382 db 0383 db 0384 db 0385 db 0386 db 0387 db 0388 db 0389390 db 0391 db 0392 db 0393 db 0394 db 0395 db 1396 db 1397 db 11398 db 30399 db 15400 db 7401 db 15402 db 15403 db 30404 db 30405 db 12406 db 48407 db 120408 db 120409 db 240410 db 240411 db 224412 db 224413 db 192414 db 64415 db 192416 db 192417 db 224418 db 64419 db 0420 db 0421 db 0422 db 0423 db 0424 db 0425 db 0426 db 0427 db 1428 db 1429 db 10430 db 23431 db 2432 db 1433 db 9434 db 9435 db 18436 db 18437 db 0438 db 0439 db 72440 db 72441 db 144442 db 144443 db 32444 db 32445 db 64446 db 192447 db 0448 db 0449 db 160450 db 64451 db 0452 db 0453 db 0454 db 0455 db 0456 db 0457 db 0458 db 0459 db 0460 db 0461 db 0462 db 0463 db 9464 db 4465 db 0466 db 0467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 0474 db 0475 db 0476 db 0477 db 0478 db 0479 db 192480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486487 db 12488 db 30489 db 30490 db 15491 db 15492 db 7493 db 7494 db 3495 db 2496 db 3497 db 3498 db 7499 db 2500 db 0501 db 0502 db 0503 db 0504 db 0505 db 0506 db 0507 db 0508 db 128509 db 128510 db 208511 db 120512 db 240513 db 224514 db 240515 db 240516 db 120517 db 120518 db 48519 db 0520 db 18521 db 18522 db 9523 db 9524 db 4525 db 4526 db 2527 db 3528 db 0529 db 0530 db 5531 db 2532 db 0533 db 0534 db 0535 db 0536 db 0537 db 0538 db 0539 db 0540 db 128541 db 128542 db 80543 db 232544 db 64545 db 128546 db 144547 db 144548 db 72549 db 72550 db 0551 db 0552 db 0553 db 0554 db 0555 db 0556 db 0557 db 0558 db 0559 db 0560 db 3561 db 2562 db 0563 db 0564 db 0565 db 0566 db 0567 db 0568 db 0569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 0576 db 144577 db 32578 db 0579 db 0580 db 0581 db 0582 db 0583MSXHeroes.asm956SpriteColVicViper:957 ..\grapx\MonsterSprites\SpriesWeapons\VicViper.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 98 db 99 db 910 db 911 db 912 db 913 db 1314 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 7724 db 7725 db 7526 db 7527 db 7728 db 7729 db 25530 db 25531 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 7642 db 7643 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 1352 db 953 db 954 db 955 db 956 db 957 db 958 db 959 db 1260 db 1261 db 1262 db 1263 db 1264 db 1265 db 1266 db 1367 db 25568 db 7769 db 7770 db 7771 db 7772 db 7573 db 7574 db 7675 db 7776 db 7777 db 7778 db 7779 db 7780 db 7781 db 7782 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 7789 db 7790 db 25591 db 25592 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 13101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 12109 db 12110 db 12111 db 12112 db 12113 db 12114 db 12115 db 13116 db 255117 db 77118 db 77119 db 77120 db 77121 db 75122 db 75123 db 76124 db 77125 db 77126 db 77127 db 77128 db 77129 db 77130 db 77131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 77138 db 77139 db 255140 db 255141 db 255142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148149 db 255150 db 255151 db 255152 db 255153 db 13154 db 9155 db 9156 db 9157 db 9158 db 9159 db 9160 db 13161 db 255162 db 255163 db 255164 db 255165 db 255166 db 255167 db 255168 db 255169 db 255170 db 77171 db 77172 db 75173 db 75174 db 77175 db 77176 db 255177 db 255178 db 255179 db 255180 db 255181 db 255182 db 255183 db 255184 db 255185 db 255186 db 255187 db 255188 db 76189 db 76190 db 255191 db 255192 db 255193 db 255194 db 255195 db 255196 db 255197198 db 13199 db 12200 db 12201 db 12202 db 12203 db 12204 db 12205 db 12206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 13214 db 255215 db 77216 db 77217 db 77218 db 77219 db 77220 db 77221 db 77222 db 76223 db 75224 db 75225 db 77226 db 77227 db 77228 db 77229 db 255230 db 255231 db 255232 db 255233 db 255234 db 255235 db 255236 db 255237 db 255238 db 255239 db 77240 db 77241 db 255242 db 255243 db 255244 db 255245 db 255246247 db 13248 db 12249 db 12250 db 12251 db 12252 db 12253 db 12254 db 12255 db 9256 db 9257 db 9258 db 9259 db 9260 db 9261 db 9262 db 13263 db 255264 db 77265 db 77266 db 77267 db 77268 db 77269 db 77270 db 77271 db 76272 db 75273 db 75274 db 77275 db 77276 db 77277 db 77278 db 255279 db 255280 db 255281 db 255282 db 255283 db 255284 db 255285 db 255286 db 255287 db 255288 db 77289 db 77290 db 255291 db 255292 db 255293 db 255294 db 255295MSXHeroes.asm958SpriteCharAndorogynus:959 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tgs.gen12 db 03 db 04 db 15 db 26 db 77 db 78 db 39 db 110 db 011 db 112 db 213 db 714 db 715 db 316 db 117 db 018 db 019 db 020 db 12821 db 6422 db 22423 db 22424 db 19225 db 12826 db 027 db 12828 db 6429 db 22430 db 22431 db 19232 db 12833 db 034 db 035 db 036 db 037 db 138 db 439 db 440 db 241 db 042 db 043 db 044 db 145 db 446 db 447 db 248 db 049 db 050 db 051 db 052 db 053 db 12854 db 3255 db 16056 db 6457 db 058 db 059 db 060 db 12861 db 3262 db 16063 db 6464 db 065 db 066 db 067 db 068 db 069 db 070 db 271 db 072 db 073 db 074 db 075 db 076 db 077 db 278 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 6487 db 088 db 089 db 090 db 091 db 092 db 093 db 6494 db 095 db 096 db 097 db 098MSXHeroes.asm960SpriteColAndorogynus:961 ..\grapx\MonsterSprites\SpriesWeapons\Andorogynus.tcs.gen12 db 2553 db 2554 db 135 db 136 db 127 db 128 db 129 db 1310 db 25511 db 1312 db 1313 db 1214 db 1215 db 1216 db 1317 db 25518 db 25519 db 25520 db 25521 db 7822 db 7723 db 7724 db 7725 db 25526 db 25527 db 25528 db 7829 db 7730 db 7731 db 7732 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 7839 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 7846 db 25547 db 25548 db 25549 db 25550MSXHeroes.asm962SpriteCharNinjaKun:963 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 18 db 19 db 110 db 1511 db 712 db 713 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 12823 db 12824 db 12825 db 24026 db 24827 db 19228 db 19229 db 19230 db 19231 db 12832 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 1543 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 12059 db 860 db 19261 db 062 db 12863 db 064 db 065 db 066 db 067 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 1576 db 077 db 078 db 079 db 080 db 081 db 082 db 083 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 11292 db 093 db 094 db 095 db 096 db 097 db 09899 db 0100 db 0101 db 0102 db 0103 db 0104 db 4105 db 7106 db 7107 db 1108 db 3109 db 3110 db 7111 db 6112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 48121 db 112122 db 224123 db 64124 db 224125 db 240126 db 112127 db 16128 db 0129 db 0130 db 0131 db 0132 db 0133 db 0134 db 0135 db 0136 db 0137 db 7138 db 3139 db 0140 db 0141 db 3142 db 6143 db 0144 db 0145 db 0146 db 0147 db 0148 db 0149 db 0150 db 0151 db 0152 db 0153 db 96154 db 224155 db 32156 db 0157 db 112158 db 16159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 2172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 0182 db 0183 db 0184 db 0185 db 0186 db 0187 db 192188 db 0189 db 0190 db 0191 db 0192 db 0193 db 0194 db 0195196 db 0197 db 0198 db 0199 db 0200 db 1201 db 1202 db 1203 db 1204 db 7205 db 15206 db 15207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 128218 db 128219 db 248220 db 248221 db 192222 db 192223 db 192224 db 192225 db 64226 db 0227 db 0228 db 0229 db 0230 db 0231 db 0232 db 0233 db 0234 db 0235 db 0236 db 7237 db 0238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 112253 db 16254 db 192255 db 0256 db 64257 db 0258 db 0259 db 0260 db 0261 db 0262 db 0263 db 0264 db 0265 db 0266 db 0267 db 0268 db 0269 db 15270 db 0271 db 0272 db 0273 db 0274 db 0275 db 0276 db 0277 db 0278 db 0279 db 0280 db 0281 db 0282 db 0283 db 0284 db 0285 db 96286 db 0287 db 0288 db 0289 db 0290 db 0291 db 0292MSXHeroes.asm964SpriteColNinjaKun:965 ..\grapx\MonsterSprites\SpriesWeapons\NinjaKun.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 137 db 138 db 139 db 1310 db 1211 db 912 db 1213 db 1314 db 1215 db 1216 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 7727 db 7428 db 7729 db 25530 db 7731 db 25532 db 25533 db 25534 db 25535 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 7644 db 25545 db 25546 db 25547 db 25548 db 25549 db 2555051 db 25552 db 25553 db 25554 db 25555 db 25556 db 1357 db 1258 db 1259 db 960 db 1361 db 1262 db 1263 db 1264 db 25565 db 25566 db 25567 db 25568 db 25569 db 25570 db 25571 db 25572 db 25573 db 7774 db 7775 db 7476 db 25577 db 7778 db 7779 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 25586 db 25587 db 25588 db 25589 db 25590 db 25591 db 7692 db 25593 db 25594 db 25595 db 25596 db 25597 db 25598 db 25599100 db 255101 db 255102 db 255103 db 255104 db 13105 db 13106 db 13107 db 13108 db 12109 db 9110 db 12111 db 13112 db 12113 db 12114 db 255115 db 255116 db 255117 db 255118 db 255119 db 255120 db 255121 db 255122 db 255123 db 255124 db 77125 db 74126 db 77127 db 255128 db 77129 db 255130 db 255131 db 255132 db 255133 db 255134 db 255135 db 255136 db 255137 db 255138 db 255139 db 255140 db 255141 db 76142 db 255143 db 255144 db 255145 db 255146 db 255147 db 255148MSXHeroes.asm966 ds $8000-$,$ff967dephase969972ScrollBlock: equ $46973phase $4000974 incbin "..\grapx\ObjectsOnMap\Scroll.SC5",7,162 * 128 975 ds $c000-$,$ff976dephase978981ChestBlock: equ $48982phase $4000983 incbin "..\grapx\ObjectsOnMap\Chest.SC5",7,174 * 128 984 ds $c000-$,$ff985dephase987990LevelUpBlock: equ $4a991phase $4000992 incbin "..\grapx\HeroOverview\LevelUp.SC5",7,173 * 128 993 ds $c000-$,$ff994dephase996999HudNewBlock: equ $4c1000phase $40001001 incbin "..\grapx\hud\HudNew.SC5",7,212 * 128 1002 ds $c000-$,$ff1003dephase10051008SecondarySkillsButtonsBlock: equ $4e1009phase $40001010 incbin "..\grapx\HeroOverview\SecondarySkillsButtons.SC5",7,165 * 128 1011 ds $c000-$,$ff1012dephase10141015BattleCodeBlock: equ $501016phase $40001017 BattleCode.asm1CheckEnemyAI:2 ld a,(MoVeMonster?) 3 or a4 ret nz6 ld a,(SwitchToNextMonster?)7 or a8 ret nz10 call SetCurrentActiveMOnsterInIX11 push ix12 pop hl13 ld a,l14 or h 15 jr z,.NeutralOrComputerControlledMonsterFound17 ld a,(HeroThatGetsAttacked) 18 or a 19 jr z,.EndCheckPlayerGetsAttackIsHuman?21 ld a,(PlayerThatGetsAttacked) 22 ld hl,player1human?-123 ld d,024 ld e,a25 add hl,de26 ld a,(hl)27 or a28 ret nz 29 .EndCheckPlayerGetsAttackIsHuman?:31 ld a,(CurrentActiveMonster) 32 cp 733 jp c,.HumanPlayerFound 34 35 .NeutralOrComputerControlledMonsterFound:36 call SetMonsterTableInIY 38 call SetTotalMonsterSpeedInHL 39 ld c,l41 ld d,(iy+MonsterTableSpecialAbility)424445 ld a,BattleCodePage2Block 46 call block34 47 call HandleEnemyAI 49 ret51.HumanPlayerFound:52 ld a,(AutoCombatButtonPressed?)53 or a54 ret z55 jr .NeutralOrComputerControlledMonsterFound57HandleMonsters:586062 call CheckRightClickToDisplayInfo 63 call CheckSpaceToMoveMonster64 call CheckMonsterDied 65 call CheckSwitchToNextMonster66 call SetCurrentMonsterInBattleFieldGrid 67 call CheckEnemyAI 6970 ld a,BattleCodePage2Block 71 call block34 72 call SetBattleText73 call AnimateAutoCombatButton74 call HandleSpellBook 75 call HandleSpellCast 7879 call SetCurrentActiveMOnsterInIX80 call StoreSYSXNYNXAndBlock 81 call EraseMonsterPreviousFrame 82 call MoveMonster 83 call CheckWaitButtonPressed84 call CheckDefendButtonPressed85 call AnimateMonster 8788 ld ix,Monster089 call StoreSYSXNYNXAndBlock 91 call CheckWasCursorOnATilePreviousFrame92 ld a,(WasCursorOnATilePreviousFrame?)93 or a94 jr z,.EndEraseGridTile96 call EraseMonsterPreviousFrame 98 .EndEraseGridTile:100 call MoveMonster 101 call SortMonstersFromHighToLow 103104 call SetCurrentActiveMOnsterInIX105 call SetAmountUnderMonster106 call StoreSYSXNYNXAndBlock 107 call PutMonster 109110 ld a,(MoVeMonster?) 111 or a112 jr nz,.EndPutGridTile113 ld a,(SwitchToNextMonster?)114 or a115 jr nz,.EndPutGridTile117 call CheckIsCursorOnATileThisFrame118 call SetcursorWhenGridTileIsActive 120 ld a,(IsCursorOnATileThisFrame?)121 or a122 jr z,.EndPutGridTile123 124 ld ix,Monster0125 call StoreSYSXNYNXAndBlock 126 call PutMonster 127 .EndPutGridTile:129130 call SetCurrentActiveMOnsterInIX131 call StoreSYSXNYNXAndBlock 132 call Recover134135 ld a,(MoVeMonster?) 136 or a137 jr nz,.EndRecoverGridTile138 ld a,(SwitchToNextMonster?)139 or a140 jr nz,.EndRecoverGridTile141 ld a,(IsCursorOnATileThisFrame?)142 or a143 jr z,.EndRecoverGridTile145 ld ix,Monster0146 call StoreSYSXNYNXAndBlock 147 call Recover148 .EndRecoverGridTile:149 ret151PressMToLookAtPage2And3:152 ld a,(NewPrContr)153 bit 5,a 154 call nz,.SetPage2156 ld a,(NewPrContr)157 bit 6,a 158 ret z160.SetPage3:161 ld a,3*32+31162 call SetPageSpecial.setpage163 jp .WaitKeyPress165.SetPage2:166 ld a,2*32+31167 call SetPageSpecial.setpage168 jp .WaitKeyPress170.WaitKeyPress:171 call PopulateControls 172 ld a,(NewPrContr)173 bit 4,a 174 jp z,.WaitKeyPress175 ret177BattleScreenVerticalOffset: equ 16178InitiateBattle:179call screenoff183188 ld a,BattleScreenVerticalOffset 189 di190 out ($99),a191 ld a,23+128192 ei193 out ($99),a195201 xor a202 ld (MonsterDied?),a 203 ld (SurrenderButtonPressed?),a 204 ld (RetreatButtonPressed?),a 205 ld (MonsterAnimationStep),a206 ld (MonsterAnimationSpeed),a207 ld (MoVeMonster?),a208 ld (LeftOrRightPlayerLostEntireArmy?),a209 ld (AutoCombatButtonPressed?),a210 ld (LeftPlayerAlreadyCastSpellThisRound?),a211 ld (RightPlayerAlreadyCastSpellThisRound?),a212216217 ld a,BattleCodePage2Block 218 call block34 219 call ClearBattleFieldGridStartOfBattle220 call ClearBattleText221222 call SetFontPage0Y250 223 call SetBattleButtons224226 call BuildUpBattleFieldAndPutMonsters228 ld a,BattleSong229 ld (ChangeSong?),a231 .engine:232234 ld a,(framecounter)235 inc a236 ld (framecounter),a238 call SwapAndSetPage 239 call PopulateControls 240 call HandleMonsters241 call CheckVictoryOrDefeat 242 call CheckRetreatOrSurrender 244 245 ld ix,GenericButtonTable246 call CheckButtonInteractionControlsNotOnInt247 call .CheckBattleButtonClicked 249 ld ix,GenericButtonTable250 call .SetGenericButtons 252 253262 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady263 call DoCopy265270273 274 ld a,01 275 ld hl,vblankintflag 276 .checkflag:277 cp (hl)278 jr nc,.checkflag279 ld (hl),0280 halt281 call screenon282 jp .engine284.CheckBattleButtonClicked: 285 ret nc287 ld a,(MoVeMonster?) 288 or a289 jr nz,.CheckAutoCombatButton 291 ld a,(SwitchToNextMonster?)292 or a293 jr nz,.CheckAutoCombatButton 295 ld a,b296 cp 9297 jp z,.DiskOptionsButtonPressed298 cp 8299 jp z,.RetreatButtonPressed300 cp 7301 jp z,.SurrenderButtonPressed302 cp 6303 jr z,.WaitButtonPressed304 cp 5305 jr z,.DefendButtonPressed306 cp 4307 jr z,.SpellBookButtonPressed308 cp 2309 jr z,.BattleTextUpButtonPressed310 cp 1311 jr z,.BattleTextDownButtonPressed312 .CheckAutoCombatButton:313 ld a,b314 cp 3315 jr z,.AutoCombatButtonPressed316 ret318.BattleTextDownButtonPressed:319 ld hl,(BattleTextPointer)320 ld bc,BattleTextQ-BattleText1321 add hl,bc323 ld de,BattleText1324 call CompareHLwithDE 325 ret nc326 327 add hl,de328 ld (BattleTextPointer),hl330 ld a,128331 ld (SetBattleText?),a332 ret334.BattleTextUpButtonPressed:335 ld hl,(BattleTextPointer)336 ld bc,BattleTextQ-BattleText1337 or a338 sbc hl,bc340 ld de,BattleText8341 call CompareHLwithDE 342 ret c343 344 add hl,de345 ld (BattleTextPointer),hl347 ld a,128348 ld (SetBattleText?),a349 ret350 351.AutoCombatButtonPressed:352 ld a,(AutoCombatButtonPressed?)353 xor 1354 ld (AutoCombatButtonPressed?),a355 ret357.WaitButtonPressed:358 ld a,1359 ld (WaitButtonPressed?),a360 ret362.SpellBookButtonPressed:363 364 ld hl,(GenericButtonTable + (5*GenericButtonTableLenghtPerButton) + 1)365 ld de,$4000 + (090*128) + (214/2) - 128366 call CompareHLwithDE 367 ret z369 ld a,1370 ld (SpellBookButtonPressed?),a371 jp EndSpellSelected373.DefendButtonPressed:374 ld a,1375 ld (DefendButtonPressed?),a376 ret378.SurrenderButtonPressed:379 380 ld hl,(GenericButtonTable + (2*GenericButtonTableLenghtPerButton) + 1)381 ld de,$4000 + (110*128) + (178/2) - 128382 call CompareHLwithDE 383 ret z385 ld a,1386 ld (SurrenderButtonPressed?),a387 jp EndSpellSelected389.RetreatButtonPressed:390 391 ld hl,(GenericButtonTable + (1*GenericButtonTableLenghtPerButton) + 1)392 ld de,$4000 + (110*128) + (160/2) - 128393 call CompareHLwithDE 394 ret z396 ld a,1397 ld (RetreatButtonPressed?),a398 jp EndSpellSelected400.DiskOptionsButtonPressed:401 jp EndSpellSelected403.SetGenericButtons: 404 ld a,(ix+GenericButtonGfxBlock)405 ld (ButtonGfxBlockCopy),a407 ld b,(ix+GenericButtonAmountOfButtons)408 .loop:409 push bc410 call .Setbutton411 pop bc412 ld de,GenericButtonTableLenghtPerButton413 add ix,de415 djnz .loop416 ret418 .Setbutton:419 bit 7,(ix+GenericButtonStatus)420 ret z 422 bit 0,(ix+GenericButtonStatus) 423 res 0,(ix+GenericButtonStatus) 424 jr nz,.goCopyButton425 bit 1,(ix+GenericButtonStatus)426 res 1,(ix+GenericButtonStatus)427 ret z 428 .goCopyButton:430 ld l,(ix+GenericButton_SYSX_Ontouched)431 ld h,(ix+GenericButton_SYSX_Ontouched+1)432 bit 6,(ix+GenericButtonStatus)433 jr nz,.go 435 ld l,(ix+GenericButton_SYSX_MovedOver)436 ld h,(ix+GenericButton_SYSX_MovedOver+1)437 bit 5,(ix+GenericButtonStatus)438 jr nz,.go 440 ld l,(ix+GenericButton_SYSX_Clicked)441 ld h,(ix+GenericButton_SYSX_Clicked+1)442 .go:444 445 ld e,(ix+GenericButton_DYDX)446 ld d,(ix+GenericButton_DYDX+1)448 ld a,(ix+GenericButtonYbottom)449 sub a,(ix+GenericButtonYtop)450 ld b,a 451 ld a,(ix+GenericButtonXright)452 sub a,(ix+GenericButtonXleft)453 srl a 454 ld c,a 457 ld a,(ButtonGfxBlockCopy)459461 ld de,$8000 + ((212+16)*128) + (000/2) - 128 462 call CopyRamToVramCorrectedWithoutActivePageSetting 464 ld a,(activepage)465 xor 1466 ld (CopyCastleButton2+dPage),a468 ld a,(ix+GenericButtonXleft)469 ld (CopyCastleButton2+dx),a470 ld a,(ix+GenericButtonYtop)471 ld (CopyCastleButton2+dy),a473 ld a,(ix+GenericButtonYbottom)474 sub a,(ix+GenericButtonYtop)475 ld (CopyCastleButton2+ny),a477 ld a,(ix+GenericButtonXright)478 sub a,(ix+GenericButtonXleft)479 ld (CopyCastleButton2+nx),a481 ld a,212+16482 ld (CopyCastleButton2+sy),a484 ld hl,CopyCastleButton2485 call docopy487 ld a,212488 ld (CopyCastleButton2+sy),a490 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady491 call docopy492 ret494SetMonsterTableInIY:495 ld a,(slot.page12rom) 496 out ($a8),a 498 499 ld a,MonsterAddressesForBattle1Block 500 call block34 502 ld h,0503 ld l,(ix+MonsterNumber)504 ld de,LengthMonsterAddressesTable505 call MultiplyHlWithDE 506 ld iy,Monster001Table-LengthMonsterAddressesTable 507 ex de,hl508 add iy,de509 ret511515 519522531SetMonsterTableInIYNeutralMonster:532 ld a,MonsterAddressesForBattle1Block 533 call block34 535 536 call SetNeutralMonsterHeroCollidedWithInA538 ld h,0539 ld l,a540 ld de,LengthMonsterAddressesTable541 call MultiplyHlWithDE 542 ld iy,Monster001Table-LengthMonsterAddressesTable 543 ex de,hl544 add iy,de545 ret557CheckRetreatOrSurrender:558 ld a,(SurrenderButtonPressed?)559 or a 560 jp nz,SurrenderButtonPressed561 ld a,(RetreatButtonPressed?)562 or a 563 jp nz,RetreatButtonPressed564 ret566CalculateCostToSurrender: 567 ld a,(CurrentActiveMonster) 568 cp 7569 jr c,.LeftPlayerSurrendered571 .RightPlayerSurrendered:572 ld ix,Monster7573 call .CalculateCostMonsters574 push hl576 ld ix,Monster8577 call .CalculateCostMonsters578 pop de579 add hl,de580 push hl582 ld ix,Monster9583 call .CalculateCostMonsters584 pop de585 add hl,de586 push hl588 ld ix,Monster10589 call .CalculateCostMonsters590 pop de591 add hl,de592 push hl594 ld ix,Monster11595 call .CalculateCostMonsters596 pop de597 add hl,de598 push hl600 ld ix,Monster12601 call .CalculateCostMonsters602 pop de603 add hl,de604 605 606 ld de,5607 call MultiplyHlWithDE 608 ret610 .LeftPlayerSurrendered:611 ld ix,Monster1612 call .CalculateCostMonsters613 push hl615 ld ix,Monster2616 call .CalculateCostMonsters617 pop de618 add hl,de619 push hl621 ld ix,Monster3622 call .CalculateCostMonsters623 pop de624 add hl,de625 push hl627 ld ix,Monster4628 call .CalculateCostMonsters629 pop de630 add hl,de631 push hl633 ld ix,Monster5634 call .CalculateCostMonsters635 pop de636 add hl,de637 push hl639 ld ix,Monster6640 call .CalculateCostMonsters641 pop de642 add hl,de644 645 ld de,5646 call MultiplyHlWithDE 647 ret649 .CalculateCostMonsters:650 push ix651 call SetMonsterTableInIY 652 ld d,0653 ld e,(iy+MonsterTableCostGold)654 pop ix655 ld l,(ix+MonsterAmount)656 ld h,(ix+MonsterAmount+1)657 call MultiplyHlWithDE 658 ret660SurrenderButtonPressed:661 xor a662 ld (SurrenderButtonPressed?),a664 ld (MoVeMonster?),a 665 or a666 ret nz 668 call .BackupBackGround669 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady670 call DoCopy672 ld hl,$4000 + (000*128) + (000/2) - 128673 ld de,$0000 + ((120+16)*128) + (014/2) - 128674 ld bc,$0000 + (059*256) + (228/2)675 ld a,RetreatBlock 676 call CopyRamToVramCorrectedCastleOverview 678 call CalculateCostToSurrender 680 681 ld b,125 682 ld c,142+16 684 call SetNumber16BitCastle685 686 687 ld a,(CurrentActiveMonster) 688 cp 7689 ld ix,(HeroThatGetsAttacked) 690 jr c,.CurrentActiveHeroFound691 ld ix,(plxcurrentheroAddress)692 .CurrentActiveHeroFound:693 ld b,123 694 ld c,135+16 695 ld l,(ix+HeroSpecificInfo+0) 696 ld h,(ix+HeroSpecificInfo+1)697 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel698 call SetText 699 700 call SwapAndSetPage 701 call CheckVictoryOrDefeat.CopyActivePageToInactivePage702 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady703 call DoCopy705 call SetSurrenderButtons707 .engine:708 call SwapAndSetPage 709 call PopulateControls 711 712 ld ix,GenericButtonTable2713 call CheckButtonInteractionControlsNotOnInt714 call .CheckSurrenderButtonClicked 716 ld ix,GenericButtonTable2717 call InitiateBattle.SetGenericButtons 720 ld a,(NewPrContr)721 bit 5,a 722 call nz,.NoPressed723 jp .engine725.CheckSurrenderButtonClicked: 726 ret nc728 ld a,b729 cp 2730 jr z,.YesPressed731733 734 .NoPressed:735 call .RestoreBackGround736 pop af 737 ret739 .YesPressed:740 741 ld a,(CurrentActiveMonster) 742 cp 7743 jr c,.LeftPlayerSurrendered744 .RightPlayerSurrendered:745 call CalculateXpGainedLeftPlayer 746 ld ix,(plxcurrentheroAddress) 748 ld e,(ix+HeroXp+0)749 ld d,(ix+HeroXp+1)750 add hl,de751 jr c,.EndCheckOverflow1752 ld (ix+HeroXp+0),l753 ld (ix+HeroXp+1),h754 .EndCheckOverflow1:755 jr .EndCheckOverflow2757 .LeftPlayerSurrendered:758 call CalculateXpGainedRightPlayer 759 ld ix,(HeroThatGetsAttacked) 761 ld e,(ix+HeroXp+0)762 ld d,(ix+HeroXp+1)763 add hl,de764 jr c,.EndCheckOverflow2765 ld (ix+HeroXp+0),l766 ld (ix+HeroXp+1),h767 .EndCheckOverflow2: 769 call ExchangeSurrenderGoldBetweenHeroes770 call RemoveDeadMonstersAttacker771 call RemoveDeadMonstersDefender773 774 ld a,(CurrentActiveMonster) 775 cp 7776 ld ix,(plxcurrentheroAddress)777 jr c,.CurrentActiveHeroFound1778 ld ix,(HeroThatGetsAttacked) 779 .CurrentActiveHeroFound1:781 call HeroFledSurrendering782 pop af 783 pop af 785 ld a,StopSong786 ld (ChangeSong?),a787 ret789.RestoreBackGround:790 ld a,(activepage) 791 or a792 jr z,.ActivePageIs0793 794 .ActivePageIs1:795 ld hl,.RestorePage3toPage0796 call docopy797 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady798 call DoCopy 799 call SwapAndSetPage 800 ld hl,.RestorePage3toPage1801 call docopy802 ret803 .ActivePageIs0: 804 ld hl,.RestorePage3toPage1805 call docopy806 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady807 call DoCopy 808 call SwapAndSetPage 809 ld hl,.RestorePage3toPage0810 call docopy811 ret813.BackupBackGround:814 ld a,(activepage) 815 or a816 ld hl,.BackupPage1toPage3817 jp z,docopy818 ld hl,.BackupPage0toPage3819 jp docopy821.BackupPage1toPage3:822 db 014,000,120+16,001823 db 000,000,256-59,003824 db 228,000,059,000825 db 000,000,$d0 826.BackupPage0toPage3:827 db 014,000,120+16,000828 db 000,000,256-59,003829 db 228,000,059,000830 db 000,000,$d0 832.RestorePage3toPage0:833 db 000,000,256-59,003834 db 014,000,120+16,000835 db 228,000,059,000836 db 000,000,$d0 837.RestorePage3toPage1:838 db 000,000,256-59,003839 db 014,000,120+16,001840 db 228,000,059,000841 db 000,000,$d0 850ExchangeSurrenderGoldBetweenHeroes:851 call CalculateCostToSurrender 852 push hl853 pop de855 856 ld a,(CurrentActiveMonster) 857 cp 7858 ld a,(whichplayernowplaying?) 859 jr c,.SurrenderingPlayerFound860 ld a,(PlayerThatGetsAttacked)861 .SurrenderingPlayerFound:863 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA864 ld l,(ix+0)865 ld h,(ix+1) 866 or a867 sbc hl,de 868 ld (ix+0),l869 ld (ix+1),h 871 872 ld a,(CurrentActiveMonster) 873 cp 7874 ld a,(PlayerThatGetsAttacked)875 jr c,.VictoriousPlayerFound876 ld a,(whichplayernowplaying?) 877 .VictoriousPlayerFound:879 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA880 ld l,(ix+0)881 ld h,(ix+1) 882 add hl,de 883 ret c884 ld (ix+0),l885 ld (ix+1),h 886 ret893SetSurrenderButtons:894 ld hl,SurrenderButtonTable-2895 ld de,GenericButtonTable2-2896 ld bc,2+(GenericButtonTableLenghtPerButton*2)897 ldir899 call CalculateCostToSurrender 900 push hl901 pop de903 ld a,(CurrentActiveMonster) 904 cp 7905 ld a,(whichplayernowplaying?) 906 jr c,.SurrenderingPlayerFound907 ld a,(PlayerThatGetsAttacked)908 .SurrenderingPlayerFound:910 call SetResourcesCurrentPlayerinIX.PlayerAlreadySetInA911 ld l,(ix+0)912 ld h,(ix+1) 913 or a914 sbc hl,de 915 ret nc917 xor a918 ld (GenericButtonTable2),a 919 ret921SurrenderButton1Ytop: equ 153+16922SurrenderButton1YBottom: equ SurrenderButton1Ytop + 019923SurrenderButton1XLeft: equ 062924SurrenderButton1XRight: equ SurrenderButton1XLeft + 020926SurrenderButton2Ytop: equ 154+16927SurrenderButton2YBottom: equ SurrenderButton2Ytop + 018928SurrenderButton2XLeft: equ 174929SurrenderButton2XRight: equ SurrenderButton2XLeft + 020931SurrenderButtonTableGfxBlock: db RetreatBlock932SurrenderButtonTableAmountOfButtons: db 2933SurrenderButtonTable: 934 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db SurrenderButton1Ytop,SurrenderButton1YBottom,SurrenderButton1XLeft,SurrenderButton1XRight | dw $0000 + (SurrenderButton1Ytop*128) + (SurrenderButton1XLeft/2) - 128 935 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db SurrenderButton2Ytop,SurrenderButton2YBottom,SurrenderButton2XLeft,SurrenderButton2XRight | dw $0000 + (SurrenderButton2Ytop*128) + (SurrenderButton2XLeft/2) - 128 937RetreatButtonPressed:938 xor a939 ld (RetreatButtonPressed?),a941 ld (MoVeMonster?),a 942 or a943 ret nz 945 call SurrenderButtonPressed.BackupBackGround946 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady947 call DoCopy949 ld hl,$4000 + (058*128) + (000/2) - 128950 ld de,$0000 + ((120+16)*128) + (014/2) - 128951 ld bc,$0000 + (059*256) + (228/2)952 ld a,RetreatBlock 953 call CopyRamToVramCorrectedCastleOverview 955 call SwapAndSetPage 956 call CheckVictoryOrDefeat.CopyActivePageToInactivePage957 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady958 call DoCopy960 call SetRetreatButtons962 .engine:963 call SwapAndSetPage 964 call PopulateControls 966 967 ld ix,GenericButtonTable2968 call CheckButtonInteractionControlsNotOnInt969 call .CheckRetreatButtonClicked 971 ld ix,GenericButtonTable2972 call InitiateBattle.SetGenericButtons 975 ld a,(NewPrContr)976 bit 5,a 977 call nz,SurrenderButtonPressed.NoPressed978 jp .engine980.CheckRetreatButtonClicked: 981 ret nc983 ld a,b984 cp 2985 jr z,.YesPressed986988 989 .NoPressed:990 call SurrenderButtonPressed.RestoreBackGround992 pop af 993 ret995 .YesPressed:996 997 ld a,(CurrentActiveMonster) 998 cp 7999 jr c,.LeftPlayerRetreated1000 .RightPlayerRetreated:1001 call CalculateXpGainedLeftPlayer 1002 ld ix,(plxcurrentheroAddress) 1004 ld e,(ix+HeroXp+0)1005 ld d,(ix+HeroXp+1)1006 add hl,de1007 jr c,.EndCheckOverflow11008 ld (ix+HeroXp+0),l1009 ld (ix+HeroXp+1),h1010 .EndCheckOverflow1:1011 jr .EndCheckOverflow21013 .LeftPlayerRetreated:1014 call CalculateXpGainedRightPlayer 1015 ld ix,(HeroThatGetsAttacked) 1017 ld e,(ix+HeroXp+0)1018 ld d,(ix+HeroXp+1)1019 add hl,de1020 jr c,.EndCheckOverflow21021 ld (ix+HeroXp+0),l1022 ld (ix+HeroXp+1),h1023 .EndCheckOverflow2: 1025 call RemoveDeadMonstersAttacker1026 call RemoveDeadMonstersDefender1027 1028 1029 ld a,(CurrentActiveMonster) 1030 cp 71031 ld ix,(plxcurrentheroAddress)1032 jr c,.CurrentActiveHeroFound1033 ld ix,(HeroThatGetsAttacked) 1034 .CurrentActiveHeroFound:1036 call HeroFledRetreating1037 pop af 1038 pop af 1040 ld a,StopSong1041 ld (ChangeSong?),a1042 ret1044SetRetreatButtons:1045 ld hl,SurrenderButtonTable-21046 ld de,GenericButtonTable2-21047 ld bc,2+(GenericButtonTableLenghtPerButton*2)1048 ldir1049 ret1053RemoveDeadMonstersAttacker:1054 1055 ld iy,(plxcurrentheroAddress) 1057 ld a,(Monster1+MonsterAmount)1058 ld (iy+HeroUnits+1),a1059 ld a,(Monster1+MonsterAmount+1)1060 ld (iy+HeroUnits+2),a 1061 or (iy+HeroUnits+1)1062 jr nz,.EndCheck0UnitsLeftSlot11063 ld (iy+HeroUnits+0),0 1064 .EndCheck0UnitsLeftSlot1:1066 ld a,(Monster2+MonsterAmount)1067 ld (iy+HeroUnits+4),a1068 ld a,(Monster2+MonsterAmount+1)1069 ld (iy+HeroUnits+5),a 1070 or (iy+HeroUnits+4)1071 jr nz,.EndCheck0UnitsLeftSlot21072 ld (iy+HeroUnits+3),0 1073 .EndCheck0UnitsLeftSlot2:1075 ld a,(Monster3+MonsterAmount)1076 ld (iy+HeroUnits+7),a1077 ld a,(Monster3+MonsterAmount+1)1078 ld (iy+HeroUnits+8),a 1079 or (iy+HeroUnits+7)1080 jr nz,.EndCheck0UnitsLeftSlot31081 ld (iy+HeroUnits+6),0 1082 .EndCheck0UnitsLeftSlot3:1084 ld a,(Monster4+MonsterAmount)1085 ld (iy+HeroUnits+10),a1086 ld a,(Monster4+MonsterAmount+1)1087 ld (iy+HeroUnits+11),a 1088 or (iy+HeroUnits+10)1089 jr nz,.EndCheck0UnitsLeftSlot41090 ld (iy+HeroUnits+9),0 1091 .EndCheck0UnitsLeftSlot4:1093 ld a,(Monster5+MonsterAmount)1094 ld (iy+HeroUnits+13),a1095 ld a,(Monster5+MonsterAmount+1)1096 ld (iy+HeroUnits+14),a 1097 or (iy+HeroUnits+13)1098 jr nz,.EndCheck0UnitsLeftSlot51099 ld (iy+HeroUnits+12),0 1100 .EndCheck0UnitsLeftSlot5:1102 ld a,(Monster6+MonsterAmount)1103 ld (iy+HeroUnits+16),a1104 ld a,(Monster6+MonsterAmount+1)1105 ld (iy+HeroUnits+17),a 1106 or (iy+HeroUnits+16)1107 jr nz,.EndCheck0UnitsLeftSlot61108 ld (iy+HeroUnits+15),0 1109 .EndCheck0UnitsLeftSlot6:1110 ret1112RemoveDeadMonstersDefender:1113 1114 ld iy,(HeroThatGetsAttacked) 1116 push iy1117 pop hl1118 ld a,l1119 or h1120 jr z,.RemoveDeadMonstersNeutralMonster1122 ld a,(Monster7+MonsterAmount)1123 ld (iy+HeroUnits+1),a1124 ld a,(Monster7+MonsterAmount+1)1125 ld (iy+HeroUnits+2),a 1126 or (iy+HeroUnits+1)1127 jr nz,.EndCheck0UnitsLeftSlot11128 ld (iy+HeroUnits+0),0 1129 .EndCheck0UnitsLeftSlot1:1131 ld a,(Monster8+MonsterAmount)1132 ld (iy+HeroUnits+4),a1133 ld a,(Monster8+MonsterAmount+1)1134 ld (iy+HeroUnits+5),a 1135 or (iy+HeroUnits+4)1136 jr nz,.EndCheck0UnitsLeftSlot21137 ld (iy+HeroUnits+3),0 1138 .EndCheck0UnitsLeftSlot2:1140 ld a,(Monster9+MonsterAmount)1141 ld (iy+HeroUnits+7),a1142 ld a,(Monster9+MonsterAmount+1)1143 ld (iy+HeroUnits+8),a 1144 or (iy+HeroUnits+7)1145 jr nz,.EndCheck0UnitsLeftSlot31146 ld (iy+HeroUnits+6),0 1147 .EndCheck0UnitsLeftSlot3:1149 ld a,(Monster10+MonsterAmount)1150 ld (iy+HeroUnits+10),a1151 ld a,(Monster10+MonsterAmount+1)1152 ld (iy+HeroUnits+11),a 1153 or (iy+HeroUnits+10)1154 jr nz,.EndCheck0UnitsLeftSlot41155 ld (iy+HeroUnits+9),0 1156 .EndCheck0UnitsLeftSlot4:1158 ld a,(Monster11+MonsterAmount)1159 ld (iy+HeroUnits+13),a1160 ld a,(Monster11+MonsterAmount+1)1161 ld (iy+HeroUnits+14),a 1162 or (iy+HeroUnits+13)1163 jr nz,.EndCheck0UnitsLeftSlot51164 ld (iy+HeroUnits+12),0 1165 .EndCheck0UnitsLeftSlot5:1167 ld a,(Monster12+MonsterAmount)1168 ld (iy+HeroUnits+16),a1169 ld a,(Monster12+MonsterAmount+1)1170 ld (iy+HeroUnits+17),a 1171 or (iy+HeroUnits+16)1172 jr nz,.EndCheck0UnitsLeftSlot61173 ld (iy+HeroUnits+15),0 1174 .EndCheck0UnitsLeftSlot6:1175 ret1177.RemoveDeadMonstersNeutralMonster:1178 ld hl,0 1180 ld ix,Monster71181 call .CheckAmountOfMonstersRemaining1182 ld ix,Monster81183 call .CheckAmountOfMonstersRemaining1184 ld ix,Monster91185 call .CheckAmountOfMonstersRemaining1186 ld ix,Monster101187 call .CheckAmountOfMonstersRemaining1188 ld ix,Monster111189 call .CheckAmountOfMonstersRemaining1190 ld ix,Monster121191 call .CheckAmountOfMonstersRemaining1193 ld de,51194 sbc hl,de1195 ld a,Number1Tile 1196 jr c,.SetAmount1198 ld de,81199 sbc hl,de1200 ld a,Number1Tile+1 1201 jr c,.SetAmount1203 ld de,161204 sbc hl,de1205 ld a,Number1Tile+2 1206 jr c,.SetAmount1208 ld de,321209 sbc hl,de1210 ld a,Number1Tile+3 1211 jr c,.SetAmount1213 ld de,321214 sbc hl,de1215 ld a,Number1Tile+4 1216 jr c,.SetAmount12181220 ld a,Number1Tile+5 1223 .SetAmount:1224 ld (RemoveDeadMonstersNeutralMonster?),a1225 ret1226 1227 .CheckAmountOfMonstersRemaining: 1228 ld e,(ix+MonsterAmount)1229 ld d,(ix+MonsterAmount+1)1230 add hl,de1231 ret1233CalculateXpGainedRightPlayer:1234 1235 ld iy,(plxcurrentheroAddress) 1236 ld l,(iy+HeroUnits+1)1237 ld h,(iy+HeroUnits+2) 1238 ld ix,Monster11239 call CalculateXpGainedLeftPlayer.CalculateXpGained1240 push hl1242 ld iy,(plxcurrentheroAddress) 1243 ld l,(iy+HeroUnits+4)1244 ld h,(iy+HeroUnits+5) 1245 ld ix,Monster21246 call CalculateXpGainedLeftPlayer.CalculateXpGained1247 pop de1248 add hl,de1249 push hl1251 ld iy,(plxcurrentheroAddress) 1252 ld l,(iy+HeroUnits+7)1253 ld h,(iy+HeroUnits+8) 1254 ld ix,Monster31255 call CalculateXpGainedLeftPlayer.CalculateXpGained1256 pop de1257 add hl,de1258 push hl1260 ld iy,(plxcurrentheroAddress) 1261 ld l,(iy+HeroUnits+10)1262 ld h,(iy+HeroUnits+11) 1263 ld ix,Monster41264 call CalculateXpGainedLeftPlayer.CalculateXpGained1265 pop de1266 add hl,de1267 push hl1269 ld iy,(plxcurrentheroAddress) 1270 ld l,(iy+HeroUnits+13)1271 ld h,(iy+HeroUnits+14) 1272 ld ix,Monster51273 call CalculateXpGainedLeftPlayer.CalculateXpGained1274 pop de1275 add hl,de1276 push hl1278 ld iy,(plxcurrentheroAddress) 1279 ld l,(iy+HeroUnits+16)1280 ld h,(iy+HeroUnits+17) 1281 ld ix,Monster61282 call CalculateXpGainedLeftPlayer.CalculateXpGained1283 pop de1284 add hl,de1285 add hl,hl 1287 ld ix,(HeroThatGetsAttacked) 1288 call AddXPBoostFromLearning 1289 ret1291CalculateXpGainedLeftPlayer:1292 ld ix,(HeroThatGetsAttacked) 1293 push ix1294 pop hl1295 ld a,l1296 or h1297 jp z,CalculateXpGainedWhenRightPlayerIsNeutralMonster1299 1300 ld iy,(HeroThatGetsAttacked) 1301 ld l,(iy+HeroUnits+1)1302 ld h,(iy+HeroUnits+2) 1303 ld ix,Monster71304 call .CalculateXpGained1305 push hl1307 ld iy,(HeroThatGetsAttacked) 1308 ld l,(iy+HeroUnits+4)1309 ld h,(iy+HeroUnits+5) 1310 ld ix,Monster81311 call .CalculateXpGained1312 pop de1313 add hl,de1314 push hl1316 ld iy,(HeroThatGetsAttacked) 1317 ld l,(iy+HeroUnits+7)1318 ld h,(iy+HeroUnits+8) 1319 ld ix,Monster91320 call .CalculateXpGained1321 pop de1322 add hl,de1323 push hl1325 ld iy,(HeroThatGetsAttacked) 1326 ld l,(iy+HeroUnits+10)1327 ld h,(iy+HeroUnits+11) 1328 ld ix,Monster101329 call .CalculateXpGained1330 pop de1331 add hl,de1332 push hl1334 ld iy,(HeroThatGetsAttacked) 1335 ld l,(iy+HeroUnits+13)1336 ld h,(iy+HeroUnits+14) 1337 ld ix,Monster111338 call .CalculateXpGained1339 pop de1340 add hl,de1341 push hl1343 ld iy,(HeroThatGetsAttacked) 1344 ld l,(iy+HeroUnits+16)1345 ld h,(iy+HeroUnits+17) 1346 ld ix,Monster121347 call .CalculateXpGained1348 pop de1349 add hl,de1350 add hl,hl 1351 1352 ld ix,(plxcurrentheroAddress) 1353 call AddXPBoostFromLearning 1354 ret1356 .CalculateXpGained:1357 ld e,(ix+MonsterAmount)1358 ld d,(ix+MonsterAmount+1)1360 or a1361 sbc hl,de 1362 ret z 1364 push hl 1365 call SetTotalMonsterHPInHL 1366 push hl1367 pop de13691371 pop hl1373 call MultiplyHlWithDE 1374 ret1376CalculateXpGainedWhenRightPlayerIsNeutralMonster:1377 call SetMonsterTableInIYNeutralMonster1378 ld d,01379 ld e,(iy+MonsterTableHp) 1380 call SetAllMonstersInMonsterTable.SetAmountInA1381 ld h,01382 ld l,a1383 call MultiplyHlWithDE 1385 add hl,hl 1387 ld ix,(plxcurrentheroAddress) 1388 call AddXPBoostFromLearning 1389 ret1391AddXPBoostFromLearning: 1392 ld a,(ix+HeroSkills+0)1393 call .CheckSkillLearning1394 ld a,(ix+HeroSkills+1)1395 call .CheckSkillLearning1396 ld a,(ix+HeroSkills+2)1397 call .CheckSkillLearning1398 ld a,(ix+HeroSkills+3)1399 call .CheckSkillLearning1400 ld a,(ix+HeroSkills+4)1401 call .CheckSkillLearning1402 ld a,(ix+HeroSkills+5)1403 call .CheckSkillLearning1404 ret1406 .CheckSkillLearning:1407 cp 16 1408 jr z,.BasicLearningFound1409 cp 17 1410 jr z,.AdvancedLearningFound1411 cp 18 1412 jr z,.ExpertLearningFound1413 ret1415 .BasicLearningFound:1416 ld de,10 1417 jp ApplyPercentBasedBoost1419 .AdvancedLearningFound:1420 ld de,5 1421 jp ApplyPercentBasedBoost1423 .ExpertLearningFound:1424 ld de,10 1425 call ApplyPercentBasedBoost1426 add hl,bc 1427 add hl,bc 1428 ret1430CheckVictoryOrDefeat:1431 ld a,(MoVeMonster?) 1432 or a1433 ret nz1435 call .CheckLeftPlayerLostEntireArmy1436 call .CheckRightPlayerLostEntireArmy1437 ret1439 .CheckLeftPlayerLostEntireArmy:1440 ld a,(Monster1+MonsterHP)1441 or a1442 ret nz1443 ld a,(Monster2+MonsterHP)1444 or a1445 ret nz1446 ld a,(Monster3+MonsterHP)1447 or a1448 ret nz1449 ld a,(Monster4+MonsterHP)1450 or a1451 ret nz1452 ld a,(Monster5+MonsterHP)1453 or a1454 ret nz1455 ld a,(Monster6+MonsterHP)1456 or a1457 ret nz1458 1460 ld a,11461 ld (LeftOrRightPlayerLostEntireArmy?),a 1462 ld a,(ShowExplosionSprite?) 1463 or a1464 ret nz1466 ld a,StopSong1467 ld (ChangeSong?),a1469 ld a,1 1470 ld (activepage),a 1471 call SwapAndSetPage 1473 ld hl,$4000 + (000*128) + (000/2) - 1281474 ld de,$0000 + ((002+16)*128) + (024/2) - 1281475 ld bc,$0000 + (207*256) + (210/2)14761478 ld a,DefeatBlock 1482 call CopyRamToVramCorrectedCastleOverview 1484 1485 ld ix,(plxcurrentheroAddress) 1486 call .SetLeftHero1488 1489 ld ix,(HeroThatGetsAttacked) 1490 call .SetRightHero1492 ld ix,(HeroThatGetsAttacked) 1493 push ix1494 pop hl1495 ld a,l1496 or h1497 jr z,.EndAddXpToRightPlayer 1498 1499 call CalculateXpGainedRightPlayer 1500 ld ix,(HeroThatGetsAttacked) 1502 ld e,(ix+HeroXp+0)1503 ld d,(ix+HeroXp+1)1504 add hl,de1505 jr c,.EndAddXpToRightPlayer1506 ld (ix+HeroXp+0),l1507 ld (ix+HeroXp+1),h1508 .EndAddXpToRightPlayer:15101511 ld a,BattleCodePage2Block 1512 call block34 1513 call SetBattlefieldCasualtiesAttacker1514 call SetBattlefieldCasualtiesDefender15151517 call RemoveDeadMonstersDefender1518 1519 call SwapAndSetPage 1520 call .CopyActivePageToInactivePage1521 call SetVictoryOrDefeatButton1523 .engine2:1524 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1525 call DoCopy1527 call SwapAndSetPage 1528 call PopulateControls 1530 1531 ld ix,GenericButtonTable21532 call CheckButtonInteractionControlsNotOnInt1533 call .CheckVictoryOrDefeatButtonClicked 1535 ld ix,GenericButtonTable21536 call InitiateBattle.SetGenericButtons 1539 ld a,(NewPrContr)1540 bit 5,a 1541 jp z,.engine21543 1544 call DeactivateHeroThatAttacks 1545 1546 pop de1547 pop de1548 ret1549 1550.CheckVictoryOrDefeatButtonClicked:1551 ret nc1552 1553 1554 call DeactivateHeroThatAttacks 1556 1557 call FirstHeroWindowClicked 1558 1559 pop de1560 pop de1561 pop de1562 ret1564 .CheckRightPlayerLostEntireArmy:1565 ld a,(Monster7+MonsterHP)1566 or a1567 ret nz1568 ld a,(Monster8+MonsterHP)1569 or a1570 ret nz1571 ld a,(Monster9+MonsterHP)1572 or a1573 ret nz1574 ld a,(Monster10+MonsterHP)1575 or a1576 ret nz1577 ld a,(Monster11+MonsterHP)1578 or a1579 ret nz1580 ld a,(Monster12+MonsterHP)1581 or a1582 ret nz1583 1585 ld a,11586 ld (LeftOrRightPlayerLostEntireArmy?),a 1587 ld a,(ShowExplosionSprite?) 1588 or a1589 ret nz1591 ld a,StopSong1592 ld (ChangeSong?),a1593 1594 ld a,1 1595 ld (activepage),a 1596 call SwapAndSetPage 1598 ld hl,$4000 + (000*128) + (000/2) - 1281599 ld de,$0000 + ((002+16)*128) + (024/2) - 1281600 ld bc,$0000 + (127*256) + (210/2)1601 ld a,VictoryBlock 1602 call CopyRamToVramCorrectedCastleOverview 1604 ld hl,$4000 + (127*128) + (000/2) - 1281605 ld de,$0000 + ((002+127+16)*128) + (024/2) - 1281606 ld bc,$0000 + ((207-127)*256) + (210/2)1607 ld a,DefeatBlock 1608 call CopyRamToVramCorrectedCastleOverview 1610 1611 ld ix,(plxcurrentheroAddress) 1612 call .SetLeftHero1614 1615 ld ix,(HeroThatGetsAttacked) 1616 call .SetRightHero1618 call CalculateXpGainedLeftPlayer 1620 push hl1621 ld ix,(plxcurrentheroAddress) 1623 ld e,(ix+HeroXp+0)1624 ld d,(ix+HeroXp+1)1625 add hl,de1626 jr c,.EndCheckOverflow1627 ld (ix+HeroXp+0),l1628 ld (ix+HeroXp+1),h1629 .EndCheckOverflow:1630 pop hl1632 1633 ld b,112 1634 ld c,116+16 1635 call SetNumber16BitCastle1636 16371638 ld a,BattleCodePage2Block 1639 call block34 1640 call SetBattlefieldCasualtiesAttacker1641 call SetBattlefieldCasualtiesDefender16421644 call RemoveDeadMonstersAttacker1646 call SwapAndSetPage 1647 call .CopyActivePageToInactivePage1648 call SetVictoryOrDefeatButton16501651 ld a,BattleCodePage2Block 1652 call block34 1653 call HandleNecromancy 1654 call AttackingHeroTakesItemsDefendingHero16551657 .engine:1658 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1659 call DoCopy1661 call SwapAndSetPage 1662 call PopulateControls 1664 1665 ld ix,GenericButtonTable21666 call CheckButtonInteractionControlsNotOnInt1667 call .CheckVictoryOrDefeatButtonClicked2 1669 ld ix,GenericButtonTable21670 call InitiateBattle.SetGenericButtons 1673 ld a,(NewPrContr)1674 bit 5,a 1675 jp z,.engine 1677 1678 call DeactivateHeroThatGetsAttacked 1679 1680 pop de1681 pop de1682 ret1683 1684.CheckVictoryOrDefeatButtonClicked2:1685 ret nc1686 1687 1688 call DeactivateHeroThatGetsAttacked 1689 1690 pop de1691 pop de1692 pop de1693 ret1695.SetLeftHero:1696 push ix1697 ld l,(ix+HeroSpecificInfo+0) 1698 ld h,(ix+HeroSpecificInfo+1)1699 push hl1700 pop ix1701 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1702 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1703 ld bc,$40001704 xor a1705 sbc hl,bc1706 ld de,$0000 + ((011+16)*128) + (032/2) - 1281707 ld bc,NXAndNY16x30HeroIcon1708 ld a,Hero16x30PortraitsBlock 1709 call CopyRamToVramCorrectedCastleOverview 1711 1712 pop ix1713 ld b,090 1714 ld c,013+16 1715 ld l,(ix+HeroSpecificInfo+0) 1716 ld h,(ix+HeroSpecificInfo+1)1717 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1718 call SetText 1720 ld b,121 1721 ld c,109+16 1722 ld l,(ix+HeroSpecificInfo+0) 1723 ld h,(ix+HeroSpecificInfo+1)1724 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1725 call SetText 1726 ret1728 .SetRightHero:1729 push ix1730 pop hl1731 ld a,l1732 or h1733 jr z,.RightHeroIsANeutralMonster1734 1735 push ix1736 ld l,(ix+HeroSpecificInfo+0) 1737 ld h,(ix+HeroSpecificInfo+1)1738 push hl1739 pop ix1740 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 1741 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 1742 ld bc,$40001743 xor a1744 sbc hl,bc1745 ld de,$0000 + ((011+16)*128) + (210/2) - 1281746 ld bc,NXAndNY16x30HeroIcon1747 ld a,Hero16x30PortraitsBlock 1748 call CopyRamToVramCorrectedCastleOverview 1750 1751 pop ix1752 ld b,166 1753 ld c,013+16 1754 ld l,(ix+HeroSpecificInfo+0) 1755 ld h,(ix+HeroSpecificInfo+1)1756 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1757 call SetText 1758 ret1760 .RightHeroIsANeutralMonster:1761 call SetNeutralMonsterHeroCollidedWithInA1762 call CheckRightClickToDisplayInfo.SetSYSX1763 exx1764 ld de,256*(015+16) + (211)1765 exx1766 ld de,$0000 + ((015+16)*128) + (210/2) - 1281767 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 1769 call SetMonsterTableInIYNeutralMonster1770 push iy1771 pop hl1772 ld de,MonsterTableName1773 add hl,de1775 1776 ld b,166 1777 ld c,013+16 1779 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel1780 call SetText1781 ret1783 .CopyActivePageToInactivePage:1784 ld a,(activepage) 1785 or a1786 ld hl,.CopyPage0toPage11787 jp z,docopy1788 ld hl,.CopyPage1toPage01789 jp docopy1791.CopyPage1toPage0:1792 db 000,000,016,0011793 db 000,000,016,0001794 db 000,001,212,0001795 db 000,000,$d0 1796.CopyPage0toPage1:1797 db 000,000,016,0001798 db 000,000,016,0011799 db 000,001,212,0001800 db 000,000,$d0 1802SetVictoryOrDefeatButton:1803 ld hl,VictoryOrDefeatButtonTable-21804 ld de,GenericButtonTable2-21805 ld bc,2+(GenericButtonTableLenghtPerButton*1)1806 ldir1807 ret1809VictoryOrDefeatButton1Ytop: equ 183 + 161810VictoryOrDefeatButton1YBottom: equ VictoryOrDefeatButton1Ytop + 0191811VictoryOrDefeatButton1XLeft: equ 2081812VictoryOrDefeatButton1XRight: equ VictoryOrDefeatButton1XLeft + 0201814VictoryOrDefeatButtonTableGfxBlock: db RetreatBlock1815VictoryOrDefeatButtonTableAmountOfButtons: db 11816VictoryOrDefeatButtonTable: 1817 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db VictoryOrDefeatButton1Ytop,VictoryOrDefeatButton1YBottom,VictoryOrDefeatButton1XLeft,VictoryOrDefeatButton1XRight | dw $0000 + (VictoryOrDefeatButton1Ytop*128) + (VictoryOrDefeatButton1XLeft/2) - 128 1820CheckRightClickToDisplayInfo:18211825 ld a,(MoVeMonster?) 1826 or a1827 ret nz1829 ld a,(NewPrContr)1830 bit 5,a 1831 ret z1833 1839 ld ix,Monster11840 call .CheckMonster1841 ld ix,Monster21842 call .CheckMonster1843 ld ix,Monster31844 call .CheckMonster1845 ld ix,Monster41846 call .CheckMonster1847 ld ix,Monster51848 call .CheckMonster1849 ld ix,Monster61850 call .CheckMonster1851 ld ix,Monster71852 call .CheckMonster1853 ld ix,Monster81854 call .CheckMonster1855 ld ix,Monster91856 call .CheckMonster1857 ld ix,Monster101858 call .CheckMonster1859 ld ix,Monster111860 call .CheckMonster1861 ld ix,Monster121862 call .CheckMonster1864 call CheckPointerOnAttackingHero1865 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1866 call docopy 1867 call CheckPointerOnDefendingHero1868 ret1870 .CheckMonster:1871 call .Check1TileMonsterStandsOn 1872 1873 ld a,(ix+MonsterNX)1874 cp 171875 ret c1876 ld a,(Monster0+MonsterX)1877 ld c,a1878 ld a,(ix+MonsterX)1879 add a,161880 call .Check1882 1883 ld a,(ix+MonsterNX)1884 cp 331885 ret c1886 ld a,(Monster0+MonsterX)1887 ld c,a1888 ld a,(ix+MonsterX)1889 add a,321890 call .Check1892 1893 ld a,(ix+MonsterNX)1894 cp 571895 ret c1896 ld a,(Monster0+MonsterX)1897 ld c,a1898 ld a,(ix+MonsterX)1899 add a,481900 call .Check1901 ret1902 .Check1TileMonsterStandsOn: 1903 ld a,(Monster0+MonsterX)1904 ld c,a1905 ld a,(ix+MonsterX)1907 .Check:1908 cp c1909 ret nz1911 ld a,(ix+MonsterY)1912 ld c,a1913 ld a,(ix+MonsterNY)1914 add a,c1915 ld c,a1917 ld a,(Monster0+MonsterY)1918 add a,0171919 cp c1920 ret nz1922 pop af1923 pop af1924 1925 ld de,$0000 + ((000+16)*128) + (000/2) - 1281927 ld a,(spat+1) 1928 sub 321929 jr nc,.NotCarryX1930 xor a1931 .NotCarryX:1932 cp 1261933 jr c,.NoOverFlowRight1934 ld a,1261935 .NoOverFlowRight:1937 res 0,a1939 push af 1941 srl a 1942 ld h,01943 ld l,a1944 add hl,de1945 ex de,hl1946 1947 ld a,(spat+0) 1948 ld b,-501949 cp 701950 jr nc,.CursorTopOfScreen1951 ld b,321952 .CursorTopOfScreen:1953 add a,b1954 1955 1956 sub a,241957 jr nc,.NotCarryY1958 xor a1959 .NotCarryY:1960 cp 1131961 jr c,.NoOverFlowBottom1962 ld a,1131963 .NoOverFlowBottom:1965 res 0,a1967 push af 1969 ld h,01970 ld l,a1971 add hl,hl 1972 add hl,hl 1973 add hl,hl 1974 add hl,hl 1975 add hl,hl 1976 add hl,hl 1977 add hl,hl 1978 add hl,de1979 ex de,hl1981 1982 ld hl,$4000 + (061*128) + (162/2) - 1281983 ld bc,$0000 + (070*256) + (086/2)1984 ld a,ScrollBlock 1985 push de1986 pop iy 1987 call CopyRamToVramCorrectedCastleOverview 1989 1990 push iy1991 call SetMonsterTableInIY 1992 ld a,(iy+MonsterTableSpecialAbility)1993 pop iy1994 cp RangedMonster1995 jp nz,.EndCheckMonsterIsRanged1997 push iy1998 pop de 1999 ld hl,10/2 + (49*128)2000 add hl,de2001 ex de,hl2002 ld hl,$4000 + (131*128) + (162/2) - 1282003 ld bc,$0000 + (014*256) + (014/2)2004 ld a,ScrollBlock 2005 call CopyRamToVramCorrectedCastleOverview 2006 .EndCheckMonsterIsRanged:2008 ld a,(ix+MonsterNumber)2009 call .SetSYSX20112013 ex af,af'2014 pop af 2015 add a,23+132016 ld d,a2017 pop af 2018 add a,92019 ld e,a2020 push af2021 ld a,d 2022 push af2023 ex af,af'2025 call CopyTransparantImageBattleCode 2027 2028 ld a,(ix+MonsterStatusEffect1)2029 ld hl,68/2 + (16*128) 2030 call .SetStatusSpellEffectIcon2032 ld a,(ix+MonsterStatusEffect2)2033 ld hl,68/2 + (30*128) 2034 call .SetStatusSpellEffectIcon2036 ld a,(ix+MonsterStatusEffect3)2037 ld hl,54/2 + (16*128) 2038 call .SetStatusSpellEffectIcon2040 ld a,(ix+MonsterStatusEffect4)2041 ld hl,54/2 + (30*128) 2042 call .SetStatusSpellEffectIcon2044 ld a,(ix+MonsterStatusEffect5)2045 ld hl,68/2 + (43*128) 2046 call .SetStatusSpellEffectIcon2048 2049 pop af 2050 add a,48-23+122051 ld c,a 2052 pop af 2053 add a,41-82054 ld b,a 2055 push bc2057 ld h,02058 ld l,(ix+MonsterHP)2059 call SetNumber16BitCastle2061 2062 ld a,(PutLetter+dy) 2063 ld c,a 2064 ld a,(PutLetter+dx) 2065 ld b,a 2067 ld hl,.TextSlash2068 call SetText2070 2071 call SetTotalMonsterHPInHL 2073 ld a,(PutLetter+dy) 2074 ld c,a 2075 ld a,(PutLetter+dx) 2076 ld b,a 2078 call SetNumber16BitCastle2080 2081 call SetTotalMonsterSpeedInHL 2083 pop bc2084 ld a,c 2085 sub a,102086 ld c,a 2087 push bc2089 call SetNumber16BitCastle2091 2092 call SetTotalMonsterDefenseInHL 2094 pop bc2095 ld a,c 2096 sub a,102097 ld c,a 2098 push bc2100 call SetNumber16BitCastle2102 2103 call SetTotalMonsterAttackInHL 2105 pop bc2106 ld a,c 2107 sub a,92108 ld c,a 2109 push bc2111 call SetNumber16BitCastle2113 2114 call SetTotalMonsterDamageInHL 2116 pop bc2117 ld a,c 2118 sub a,92119 ld c,a 2120 push bc2122 call SetNumber16BitCastle2124 2125 pop bc2126 ld a,c 2127 sub a,122128 ld c,a 2130 ld a,b 2131 sub a,202132 ld b,a 2133 2134 push iy2135 pop hl2136 ld de,MonsterTableName2137 add hl,de2138 call SetText2140 jp WaitKeyPressToGoBackToGame2142 .SetStatusSpellEffectIcon:2143 push iy2144 pop de 2145 add hl,de2146 ex de,hl2147 ld hl,$4000 + (151*128) + (032/2) - 1282149 and %1111 0000 2150 srl a 2151 ld b,02152 ld c,a2153 add hl,bc2155 ld bc,$0000 + (012*256) + (012/2)2156 ld a,SecondarySkillsButtonsBlock 2157 jp CopyRamToVramCorrectedCastleOverview 2160 .TextSlash: db "/",2552162 .SetSYSX: 2163 cp 1802164 jr c,.EndCheckOverFlow2165 sub 1802166 ld l,a2167 ld a,Enemy14x24PortraitsBlockPart2 2168 jr .EntryPart22170 .EndCheckOverFlow:2171 ld l,a2172 ld a,Enemy14x24PortraitsBlock 2173 .EntryPart2:2174 ld h,021762177 push af2178 ld a,BattleCodePage2Block 2179 call block34 2180 pop af2182 add hl,hl 2183 ld de,UnitSYSXTable14x24Portraits22184 add hl,de2185 ld c,(hl)2186 inc hl2187 ld b,(hl) 2188 push bc2189 pop hl2191 ld bc,NXAndNY14x24CharaterPortraits2193 ret2194 2197CopyTransparantImageBattleCode: 21982199 push af2200 ld a,b2201 ld (CopyCastleButton2+ny),a2202 ld a,c2203 add a,a2204 ld (CopyCastleButton2+nx),a2205 pop af2207 push de2208 ld de,$8000 + ((212+16)*128) + (000/2) - 128 2209 call CopyRamToVramCorrectedWithoutActivePageSetting 2210 pop de2212 ld a,(activepage)2213 xor 12214 ld (CopyCastleButton2+dPage),a2216 ld a,d2217 ld (CopyCastleButton2+dy),a2218 ld a,e2219 ld (CopyCastleButton2+dx),a2221 ld a,212+162222 ld (CopyCastleButton2+sy),a2224 ld hl,CopyCastleButton22225 call docopy2227 ld a,2122228 ld (CopyCastleButton2+sy),a2230 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2231 jp docopy2233SetTotalMonsterHPInHL: 2234 call SetMonsterTableInIY 2235 push ix2236 2237 push ix2238 pop hl 2239 ld de,Monster72240 call CompareHLwithDE 2241 ld ix,(plxcurrentheroAddress) 2242 jr c,.HeroFound2243 ld ix,(HeroThatGetsAttacked) 2244 push ix2245 pop hl2247 ld a,l2248 or h2249 jr nz,.HeroFound 2250 ld hl,0 2251 jr .endAddHP2252 .HeroFound:2253 2255 ld de,ItemUnitHpPointsTable2256 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2257 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2258 .endAddHP:2259 pop ix2261 ld d,02262 ld e,(iy+MonsterTableHp)2263 add hl,de 2264 ret2266SetTotalMonsterSpeedInHL: 2267 push ix2268 2269 push ix2270 pop hl 2271 ld de,Monster72272 call CompareHLwithDE 2273 ld ix,(plxcurrentheroAddress) 2274 jr c,.HeroFound2275 ld ix,(HeroThatGetsAttacked) 2276 push ix2277 pop hl2279 ld a,l2280 or h2281 jr nz,.HeroFound 2282 ld hl,0 2283 jr .endAddSpeed2284 .HeroFound:2285 2287 ld de,ItemUnitSpeedPointsTable2288 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2289 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2290 .endAddSpeed:2291 pop ix 2293 ld d,02294 ld e,(iy+MonsterTableSpeed)2295 add hl,de 2297 ld b,HasteSpellNumber 2298 call CheckPresenceStatusEffect 2299 jr nz,.EndCheckHaste2300 ld de,3 2301 add hl,de2302 .EndCheckHaste:2304 ld b,InnerBeastSpellNumber 2305 call CheckPresenceStatusEffect 2306 jr nz,.EndCheckInnerBeast2307 ld de,3 2308 add hl,de2309 .EndCheckInnerBeast: 2311 ld b,EarthBoundSpellNumber 2312 call CheckPresenceStatusEffect 2313 jr nz,.EndCheckEarthBound2314 push hl2315 pop bc2316 ld de,2 2317 call DivideBCbyDE 2318 push bc2319 pop hl2320 .EndCheckEarthBound:2321 ret2323CheckPresenceStatusEffect:2324 ld a,(ix+MonsterStatusEffect1) 2325 and %1111 00002326 cp b2327 ret z2328 ld a,(ix+MonsterStatusEffect2) 2329 and %1111 00002330 cp b2331 ret z2332 ld a,(ix+MonsterStatusEffect3) 2333 and %1111 00002334 cp b2335 ret z2336 ld a,(ix+MonsterStatusEffect4) 2337 and %1111 00002338 cp b2339 ret z2340 ld a,(ix+MonsterStatusEffect5) 2341 and %1111 00002342 cp b2343 ret2345CheckPresenceSpellBubble:2346 ld a,(ix+MonsterStatusEffect1) 2347 and %1111 00002348 cp c2349 ret z2350 inc ix2351 djnz CheckPresenceSpellBubble2352 ret2354RemoveSpell: 2355 ld a,(ix+MonsterStatusEffect1) 2356 and %1111 00002357 cp b2358 jr nz,.SpellNotFoundStatus12359 ld (ix+MonsterStatusEffect1),0 2360 .SpellNotFoundStatus1:2361 ld a,(ix+MonsterStatusEffect2) 2362 and %1111 00002363 cp b2364 jr nz,.SpellNotFoundStatus22365 ld (ix+MonsterStatusEffect2),0 2366 .SpellNotFoundStatus2:2367 ld a,(ix+MonsterStatusEffect3) 2368 and %1111 00002369 cp b2370 jr nz,.SpellNotFoundStatus32371 ld (ix+MonsterStatusEffect3),0 2372 .SpellNotFoundStatus3:2373 ld a,(ix+MonsterStatusEffect4) 2374 and %1111 00002375 cp b2376 jr nz,.SpellNotFoundStatus42377 ld (ix+MonsterStatusEffect4),0 2378 .SpellNotFoundStatus4:2379 ld a,(ix+MonsterStatusEffect5) 2380 and %1111 00002381 ret nz2382 ld (ix+MonsterStatusEffect5),0 2383 ret2385AddDefenseFromDefendingInCastleOrCastleWalls:2386 ld a,(ix+HeroStatus) 2387 cp 2542388 ret nz2389 inc hl 2390 .CheckWhichCastle: 2391 push iy2392 ld iy,Castle12393 call .FindCastle2394 ld iy,Castle22395 call .FindCastle2396 ld iy,Castle32397 call .FindCastle2398 ld iy,Castle42399 call .FindCastle2400 ld iy,Castle52401 call .FindCastle2402 pop iy2403 ret2405 .FindCastle:2406 ld a,(ix+HeroY) 2407 inc a 2408 cp (iy+CastleY)2409 ret nz2411 ld a,(ix+HeroX) 2412 dec a 2413 dec a 2414 cp (iy+CastleX)2415 ret nz2416 2417 ld a,(iy+CastleLevel) 2418 cp 62419 ret nz2420 ld de,52421 add hl,de 2422 ret2424SetTotalMonsterDefenseInHL: 2425 push ix2426 2427 push ix2428 pop hl 2429 ld de,Monster72430 call CompareHLwithDE 2431 ld ix,(plxcurrentheroAddress) 2432 jr c,.HeroFound2433 ld ix,(HeroThatGetsAttacked) 2434 push ix2435 pop hl2437 ld a,l2438 or h2439 jr nz,.HeroFound 2440 ld hl,0 2441 jr .endAddDefense2442 .HeroFound:2443 2445 ld de,ItemDefencePointsTable2446 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2447 push ix2448 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2449 pop ix2451 ld d,02452 ld e,(ix+HeroStatDefense)2453 add hl,de 2454 call AddDefenseFromDefendingInCastleOrCastleWalls2456 bit 7,h 2457 jr z,.SetDefense2458 ld hl,02459 .SetDefense:2461 .endAddDefense:2462 pop ix2464 ld d,02465 ld e,(iy+MonsterTableDefense)2466 add hl,de 2468 ld b,PlateArmorSpellNumber 2469 call CheckPresenceStatusEffect 2470 jr nz,.EndCheckPlateArmor2471 ld de,5 2472 add hl,de2473 .EndCheckPlateArmor:2475 ld b,InnerBeastSpellNumber 2476 call CheckPresenceStatusEffect 2477 jr nz,.EndCheckInnerBeast2478 ld de,3 2479 add hl,de2480 .EndCheckInnerBeast:2482 ld b,ShieldBreakerSpellNumber 2483 call CheckPresenceStatusEffect 2484 jr nz,.EndCheckShieldBreaker2485 ld de,-4 2486 add hl,de2487 bit 7,h 2488 jr z,.EndCheckShieldBreaker2489 ld hl,0 2490 .EndCheckShieldBreaker:2492 ld b,FrenzySpellNumber 2493 call CheckPresenceStatusEffect 2494 jr nz,.EndCheckFrenzy2495 ld de,-5 2496 add hl,de2497 bit 7,h 2498 jr z,.EndCheckFrenzy2499 ld hl,0 2500 .EndCheckFrenzy:2502 2503 ld a,(ix+MonsterStatus) 2504 and %0111 11112505 cp MonsterStatusDefending 2506 ret nz2508 ld de,05 2509 call ApplyPercentBasedBoost 2511 ld a,c 2512 or a2513 ret nz2514 ld bc,12515 add hl,bc 2518 ret2521 2524SetTotalMonsterDamageENTIRESTACKInHL: 2525 push ix2526 2527 push ix2528 pop hl 2529 ld de,Monster72530 call CompareHLwithDE 2531 ld ix,(plxcurrentheroAddress) 2532 jr c,.HeroFound2533 ld ix,(HeroThatGetsAttacked) 2534 push ix2535 pop hl2537 ld a,l2538 or h2539 jr z,.setDamageNeutralMonster2540 .HeroFound:2541 2543 ld h,02544 ld l,(iy+MonsterTableDamage) 2546 pop ix2547 call SetTotalMonsterDamageInHL.ProcessInnerBeast 2548 call SetTotalMonsterDamageInHL.ProcessFrenzy 2549 call SetTotalMonsterDamageInHL.ProcessCurse 2550 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2552 call .MultiplyDamageWIthAllUnitsInStack2554 2555 push hl2556 push ix2557 pop hl 2558 ld de,Monster72559 call CompareHLwithDE 2560 ld ix,(plxcurrentheroAddress) 2561 jr c,.HeroFound22562 ld ix,(HeroThatGetsAttacked) 2563 .HeroFound2:2564 pop hl2565 call SetTotalMonsterDamageInHL.AddDamageFromSkills 2567 ld a,l2568 or h2569 ret nz2570 ld hl,1 2571 ret2573 .setDamageNeutralMonster:2574 ld h,02575 ld l,(iy+MonsterTableDamage)2576 pop ix2577 call SetTotalMonsterDamageInHL.ProcessCurse 2578 call SetTotalMonsterDamageInHL.ProcessBlindingFog 2580 call .MultiplyDamageWIthAllUnitsInStack2582 ld a,l2583 or h2584 ret nz2585 ld hl,1 2586 ret2588 .MultiplyDamageWIthAllUnitsInStack:2589 push hl2590 call SetCurrentActiveMOnsterInIX2591 pop de2592 ld l,(ix+MonsterAmount)2593 ld h,(ix+MonsterAmount+1)2594 jp MultiplyHlWithDE 2596SetTotalMonsterDamageInHL: 2597 push ix2598 2599 push ix2600 pop hl 2601 ld de,Monster72602 call CompareHLwithDE 2603 ld ix,(plxcurrentheroAddress) 2604 jr c,.HeroFound2605 ld ix,(HeroThatGetsAttacked) 2606 push ix2607 pop hl2609 ld a,l2610 or h2611 jr z,.setDamageNeutralMonster2612 .HeroFound:2613 2615 ld h,02616 ld l,(iy+MonsterTableDamage) 2618 pop ix2619 call .ProcessInnerBeast 2620 call .ProcessFrenzy 2621 call .ProcessCurse 2622 call .ProcessBlindingFog 2624 2625 push hl2626 push ix2627 pop hl 2628 ld de,Monster72629 call CompareHLwithDE 2630 ld ix,(plxcurrentheroAddress) 2631 jr c,.HeroFound22632 ld ix,(HeroThatGetsAttacked) 2633 .HeroFound2:2634 pop hl2635 call .AddDamageFromSkills 2637 ld a,l2638 or h2639 ret nz2640 ld hl,1 2641 ret2643 .setDamageNeutralMonster:2644 ld h,02645 ld l,(iy+MonsterTableDamage)2646 pop ix2647 call .ProcessCurse 2648 call .ProcessBlindingFog 2649 ld a,l2650 or h2651 ret nz2652 ld hl,1 2653 ret2655 .ProcessInnerBeast:2656 ld b,InnerBeastSpellNumber 2657 call CheckPresenceStatusEffect 2658 ret nz2659 ld de,3 2660 add hl,de2661 ret2663 .ProcessFrenzy:2664 ld b,FrenzySpellNumber 2665 call CheckPresenceStatusEffect 2666 ret nz2667 ld de,+5 2668 add hl,de2669 ret2671 .ProcessCurse:2672 ld b,CurseSpellNumber 2673 call CheckPresenceStatusEffect 2674 ret nz2675 ld de,-3 2676 add hl,de2677 bit 7,h 2678 ret z2679 ld hl,1 2680 ret2682 .ProcessBlindingFog:2683 ld b,BlindingFogSpellNumber 2684 call CheckPresenceStatusEffect 2685 ret nz2686 push hl2687 pop bc2688 ld de,2 2689 call DivideBCbyDE 2690 push bc2691 pop hl2692 ret2694 .AddDamageFromSkills:2695 2696 ld a,(iy+MonsterTableSpecialAbility)2697 cp RangedMonster2698 jp z,.MonsterIsRanged2700 .MonsterIsMelee:2701 ld a,(ix+HeroSkills+0)2702 call .CheckSkillOffence2703 ld a,(ix+HeroSkills+1)2704 call .CheckSkillOffence2705 ld a,(ix+HeroSkills+2)2706 call .CheckSkillOffence2707 ld a,(ix+HeroSkills+3)2708 call .CheckSkillOffence2709 ld a,(ix+HeroSkills+4)2710 call .CheckSkillOffence2711 ld a,(ix+HeroSkills+5)2712 call .CheckSkillOffence2713 ret2715 .CheckSkillOffence:2716 cp 04 2717 jr z,.BasicOffenceFound2718 cp 05 2719 jr z,.AdvancedOffenceFound2720 cp 06 2721 jr z,.ExpertOffenceFound2722 ret2724 .BasicOffenceFound:2725 ld de,10 2726 jp ApplyPercentBasedBoost2728 .AdvancedOffenceFound:2729 ld de,5 2730 jp ApplyPercentBasedBoost2732 .ExpertOffenceFound:2733 ld de,10 2734 call ApplyPercentBasedBoost2735 add hl,bc 2736 add hl,bc 2737 ret2739 .MonsterIsRanged:2740 ld a,(ix+HeroSkills+0)2741 call .CheckSkilArchery2742 ld a,(ix+HeroSkills+1)2743 call .CheckSkilArchery2744 ld a,(ix+HeroSkills+2)2745 call .CheckSkilArchery2746 ld a,(ix+HeroSkills+3)2747 call .CheckSkilArchery2748 ld a,(ix+HeroSkills+4)2749 call .CheckSkilArchery2750 ld a,(ix+HeroSkills+5)2751 call .CheckSkilArchery2752 ret2754 .CheckSkilArchery:2755 cp 01 2756 jr z,.BasicArcheryFound2757 cp 02 2758 jr z,.AdvancedArcheryFound2759 cp 03 2760 jr z,.ExpertArcheryFound2761 ret2763 .BasicArcheryFound: 2764 ld de,10 2765 jp ApplyPercentBasedBoost2767 .AdvancedArcheryFound: 2768 ld de,5 2769 jp ApplyPercentBasedBoost2771 .ExpertArcheryFound: 2772 ld de,2 2773 jp ApplyPercentBasedBoost2775SetTotalMonsterAttackInHL: 2776 push ix2777 2778 push ix2779 pop hl 2780 ld de,Monster72781 call CompareHLwithDE 2782 ld ix,(plxcurrentheroAddress) 2783 jr c,.HeroFound2784 ld ix,(HeroThatGetsAttacked) 2785 push ix2786 pop hl2788 ld a,l2789 or h2790 jr z,.setAttackNeutralMonster2791 .HeroFound:2792 2794 2795 ld de,ItemAttackPointsTable2796 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2797 push ix2798 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2799 pop ix2801 ld d,02802 ld e,(iy+MonsterTableAttack) 2803 add hl,de 2805 ld d,02806 ld e,(ix+HeroStatAttack)2807 add hl,de 2809 pop ix2810 ret2812 .setAttackNeutralMonster:2813 ld h,02814 ld l,(iy+MonsterTableAttack)2815 pop ix2816 ret2818ApplyPercentBasedBoost:2819 push hl 2820 2821 push hl2822 pop bc28232824 call DivideBCbyDE 2826 pop hl2827 add hl,bc 2828 ret2830CheckPointerOnDefendingHero:2831 ld a,(spat)2832 cp 38+242833 ret nc2834 cp 06+242835 ret c2836 ld a,(spat+1)2837 cp 2362838 ret c2840 ld hl,(HeroThatGetsAttacked) 2841 ld a,l2842 or h2843 ret z2845 ld hl,$4000 + (000*128) + (162/2) - 1282846 ld de,$0000 + (040*128) + ((18+134)/2) - 1282847 ld bc,$0000 + (062*256) + (086/2)2848 ld a,ScrollBlock 2849 call CopyRamToVramCorrectedCastleOverview 2851 2852 ld ix,(HeroThatGetsAttacked) 2853 ld l,(ix+HeroSpecificInfo+0) 2854 ld h,(ix+HeroSpecificInfo+1)2855 push hl2856 pop ix2857 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 2858 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 2859 ld bc,$40002860 xor a2861 sbc hl,bc2862 ld de,$0000 + ((040+021)*128) + ((018+10+134)/2) - 1282863 ld bc,NXAndNY16x30HeroIcon2864 ld a,Hero16x30PortraitsBlock 2865 call CopyRamToVramCorrectedCastleOverview 2867 2868 ld ix,(HeroThatGetsAttacked) 2869 ld de,ItemAttackPointsTable2870 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2871 push ix2872 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2873 pop ix2874 ld e,(ix+HeroStatAttack) 2875 ld d,02876 add hl,de2877 ld b,060+134 2878 ld c,060 2879 call SetNumber16BitCastle2881 2882 ld de,ItemDefencePointsTable2883 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2884 push ix2885 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2886 pop ix2887 ld e,(ix+HeroStatDefense) 2888 ld d,02889 add hl,de2890 call AddDefenseFromDefendingInCastleOrCastleWalls2892 bit 7,h 2893 jr z,.SetDefense2894 ld hl,02895 .SetDefense:2898 ld b,060+134 2899 ld c,069 2900 call SetNumber16BitCastle2902 2903 ld l,(ix+HeroMana)2904 ld h,(ix+HeroMana+1)2905 ld b,060+134 2906 ld c,078 2907 call SetNumber16BitCastle2908 2909 2910 ld a,(PutLetter+dy) 2911 ld c,a 2912 ld a,(PutLetter+dx) 2913 ld b,a 2914 ld hl,CheckPointerOnAttackingHero.TextSlash2915 call SetText2917 2918 ld a,(PutLetter+dy) 2919 ld c,a 2920 ld a,(PutLetter+dx) 2921 ld b,a 2922 ld l,(ix+HeroTotalMana)2923 ld h,(ix+HeroTotalMana+1)2924 call SetNumber16BitCastle2926 2927 ld de,ItemSpellDamagePointsTable2928 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet2929 push ix2930 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2931 pop ix2932 ld e,(ix+HeroStatSpelldamage)2933 ld d,02934 add hl,de29362938 ld b,060+134 2939 ld c,088 2940 call SetNumber16BitCastle2942 2943 ld b,064+134 2944 ld c,047 2945 ld l,(ix+HeroSpecificInfo+0) 2946 ld h,(ix+HeroSpecificInfo+1)2947 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel2948 call SetText 2950 jp WaitKeyPressToGoBackToGame2952CheckPointerOnAttackingHero:2953 ld a,(spat)2954 cp 38+242955 ret nc2956 cp 06+242957 ret c2958 ld a,(spat+1)2959 cp 102960 ret nc2962 ld hl,$4000 + (000*128) + (162/2) - 1282963 ld de,$0000 + (040*128) + (018/2) - 1282964 ld bc,$0000 + (062*256) + (086/2)2965 ld a,ScrollBlock 2966 call CopyRamToVramCorrectedCastleOverview 2968 2969 ld ix,(plxcurrentheroAddress) 2970 ld l,(ix+HeroSpecificInfo+0) 2971 ld h,(ix+HeroSpecificInfo+1)2972 push hl2973 pop ix2974 ld l,(ix+HeroInfoPortrait16x30SYSX+0) 2975 ld h,(ix+HeroInfoPortrait16x30SYSX+1) 2976 ld bc,$40002977 xor a2978 sbc hl,bc2979 ld de,$0000 + ((040+021)*128) + ((018+10)/2) - 1282980 ld bc,NXAndNY16x30HeroIcon2981 ld a,Hero16x30PortraitsBlock 2982 call CopyRamToVramCorrectedCastleOverview 2984 2985 ld ix,(plxcurrentheroAddress)2986 ld de,ItemAttackPointsTable2987 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2988 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 2989 ld e,(ix+HeroStatAttack) 2990 ld d,02991 add hl,de2992 ld b,060 2993 ld c,060 2994 call SetNumber16BitCastle2996 2997 ld de,ItemDefencePointsTable2998 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 2999 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters 3000 ld e,(ix+HeroStatDefense) 3001 ld d,03002 add hl,de3003 call AddDefenseFromDefendingInCastleOrCastleWalls3005 bit 7,h 3006 jr z,.SetDefense3007 ld hl,03008 .SetDefense:3011 ld b,060 3012 ld c,069 3013 call SetNumber16BitCastle3015 3016 ld l,(ix+HeroMana)3017 ld h,(ix+HeroMana+1)3018 ld b,060 3019 ld c,078 3020 call SetNumber16BitCastle3021 3022 3023 ld a,(PutLetter+dy) 3024 ld c,a 3025 ld a,(PutLetter+dx) 3026 ld b,a 3027 ld hl,.TextSlash3028 call SetText3030 3031 ld a,(PutLetter+dy) 3032 ld c,a 3033 ld a,(PutLetter+dx) 3034 ld b,a 3035 ld l,(ix+HeroTotalMana)3036 ld h,(ix+HeroTotalMana+1)3037 call SetNumber16BitCastle3039 3040 ld de,ItemSpellDamagePointsTable3041 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 3042 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters3043 ld e,(ix+HeroStatSpelldamage)3044 ld d,03045 add hl,de30473049 ld b,060 3050 ld c,088 3051 call SetNumber16BitCastle3053 3054 ld b,064 3055 ld c,047 3057 ld l,(ix+HeroSpecificInfo+0) 3058 ld h,(ix+HeroSpecificInfo+1)3059 call .CenterHeroNameHasGainedALevel3060 call SetText 3062 jp WaitKeyPressToGoBackToGame3064 .TextSlash: db "/",2553065 .CenterHeroNameHasGainedALevel:3066 ld d,0 3067 push hl3068 .loop:3069 ld a,(hl)3070 cp 2553071 jr z,.EndNameFound3072 inc d3073 inc hl3074 dec b3075 dec b3076 jr .loop3077 .EndNameFound:3078 pop hl3079 ret3081WaitKeyPressToGoBackToGame:3082 ld hl,CursorHand3083 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl3084 ld hl,SpriteColCursorSprites3085 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl3087 call SwapAndSetPage 3088 .loop:3089 call PopulateControls 3090 30913095 ld a,(NewPrContr)3096 bit 5,a 3097 jr nz,.End3098 ld a,(NewPrContr)3099 bit 4,a 3100 jr z,.loop3102 .End:3103 xor a3104 ld (NewPrContr),a3106 ld a,(activepage) 3107 or a3108 ld hl,.RestorePage03109 jp z,docopy3110 ld hl,.RestorePage13111 jp docopy3113.RestorePage0:3114 db 000,000,000,0013115 db 000,000,000,0003116 db 000,001,191,0003117 db 000,000,$d0 3118.RestorePage1:3119 db 000,000,000,0003120 db 000,000,000,0013121 db 000,001,191,0003122 db 000,000,$d0 3124CheckWaitButtonPressed:31253133 ld a,(WaitButtonPressed?)3134 dec a3135 ret m3136 ld (WaitButtonPressed?),a3138 ld (MoVeMonster?),a 3139 or a3140 ret nz 3141 3142 call SetCurrentActiveMOnsterInIX3143 ld a,(ix+MonsterStatus) 3144 and %0111 11113145 cp MonsterStatusWaiting3146 ret z 3148 ld a,(ix+MonsterStatus) 3149 and %1000 0003150 or a,MonsterStatusWaiting3151 ld (ix+MonsterStatus),a3153 xor a3154 ld (MoVeMonster?),a 3155 ld (MonsterMovementPathPointer),a3156 ld (MonsterAnimationSpeed),a3157 ld (MonsterAnimationStep),a3159 ld a,13160 ld (SwitchToNextMonster?),a3161 3162 3163 ld a,1 3164 .EntryPointForDefendButtonPressed:3165 ld (BattleTextQ),a3166 ld a,23167 ld (SetBattleText?),a 3169 ld a,(ix+MonsterAmount) 3170 or (ix+MonsterAmount+1)3171 ld (BattleTextQ+3),a 3175 SetMonsterNameInBattleTextQ4:3176 call SetMonsterTableInIY 3177 push iy3178 pop hl3179 ld de,MonsterTableName3180 add hl,de3181 ld de,BattleTextQ+4 3182 ld bc,123183 ldir3184 ret31873188CheckDefendButtonPressed:31893197 ld a,(DefendButtonPressed?)3198 dec a3199 ret m3200 ld (DefendButtonPressed?),a3202 ld (MoVeMonster?),a 3203 or a3204 ret nz 3206 ld a,(ix+MonsterStatus) 3207 and %1000 0003208 or a,MonsterStatusDefending3209 ld (ix+MonsterStatus),a3211 xor a3212 ld (MoVeMonster?),a 3213 ld (MonsterMovementPathPointer),a3214 ld (MonsterAnimationSpeed),a3215 ld (MonsterAnimationStep),a3217 ld a,13218 ld (SwitchToNextMonster?),a3220 call SetMonsterTableInIY 3221 call SetTotalMonsterDefenseInHL 3224 ld a,c3225 ld (BattleTextQ+1),a 3227 ld a,2 3228 jp CheckWaitButtonPressed.EntryPointForDefendButtonPressed3229 3230 ret32323239ShowEnemyStats:32403241 call SetEnemyStatsWindow 3242 call SwapAndSetPage 3243 3244 ld bc,SFX_SpireOfWisdom3245 call RePlayerSFX_PlayCh1 3247 .engine:3248 call PopulateControls 32503255 ld a,(NewPrContr)3256 and %0011 00003257 jr nz,.end3258 jr .engine 3260 .end:3261 ld a,%0011 00003262 ld (ControlsOnInterrupt),a 3263 ret3265SetEnemyStatsWindow:3266 ld de,$0000 + (007*128) + (008/2) - 1283268 ld a,(spat+1) 3269 sub 323270 jr nc,.NotCarryX3271 xor a3272 .NotCarryX:3273 cp 1263274 jr c,.NoOverFlowRight3275 ld a,1263276 .NoOverFlowRight:3278 res 0,a3280 ld b,a 3282 srl a 3283 ld h,03284 ld l,a3285 add hl,de3286 ex de,hl3287 3288 ld a,(spat+0) 3289 ld c,-503290 cp 703291 jr nc,.CursorTopOfScreen3292 ld c,323293 .CursorTopOfScreen:3294 add a,c3296 sub a,243297 jr nc,.NotCarryY3298 xor a3299 .NotCarryY:3300 cp 1193301 jr c,.NoOverFlowBottom3302 ld a,1193303 .NoOverFlowBottom:3305 ld c,a 3306 push bc3308 ld h,03309 ld l,a3310 add hl,hl 3311 add hl,hl 3312 add hl,hl 3313 add hl,hl 3314 add hl,hl 3315 add hl,hl 3316 add hl,hl 3317 add hl,de3318 ex de,hl3319 3320 ld hl,$4000 + (062*128) + (174/2) - 1283321 ld bc,$0000 + (069*256) + (062/2)3322 ld a,ChestBlock 3323 push de3324 call CopyRamToVramCorrectedCastleOverview 3326 3327 call SetMonsterTableInIYNeutralMonster3328 pop de3329 ld a,(iy+MonsterTableSpecialAbility)3330 cp RangedMonster3331 jp nz,.EndCheckRanged3332 ld hl,40/2 + (22*128)3333 add hl,de3334 ex de,hl3335 ld hl,$4000 + (131*128) + (176/2) - 1283336 ld bc,$0000 + (016*256) + (018/2)3337 ld a,ScrollBlock 3338 call CopyRamToVramCorrectedCastleOverview 3339 .EndCheckRanged:3341 3343 call SetNeutralMonsterHeroCollidedWithInA3344 call CheckRightClickToDisplayInfo.SetSYSX3346 exx3347 pop bc 3348 push bc3349 push af3350 ld a,b 3351 add a,31+13352 ld e,a3354 ld a,c 3355 add a,283356 ld d,a3357 pop af3358 exx3360 call BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 3362 pop bc 3364 ld a,c 3365 add a,143366 ld c,a3368 ld a,b 3369 add a,16+223370 ld b,a3371 ld a,4 3373 push bc3375 call SetMonsterTableInIYNeutralMonster 3376 push iy3377 pop hl3378 ld de,MonsterTableName3379 add hl,de3380 pop bc3381 push bc3382 3383 call CheckPointerOnAttackingHero.CenterHeroNameHasGainedALevel3384 call SetText 3386 pop bc3388 ld a,c 3389 add a,433390 ld c,a 3391 ld a,b 3392 add a,8-223393 ld b,a 3395 call SetAmountInHL3397 push bc3398 call SetText 3399 pop bc3401 ld a,c3402 add a,073403 ld c,a 3404 ld a,b3405 add a,233406 ld b,a 3407 push bc3409 call SetMonsterTableInIYNeutralMonster3410 pop bc3412 ld a,(iy+MonsterTableCostGems)3413 and %1110 00003414 cp Level1Unit3415 ld hl,13416 jp z,SetNumber16BitCastle3417 cp Level2Unit3418 ld hl,23419 jp z,SetNumber16BitCastle3420 cp Level3Unit3421 ld hl,33422 jp z,SetNumber16BitCastle3423 cp Level4Unit3424 ld hl,43425 jp z,SetNumber16BitCastle3426 cp Level5Unit3427 ld hl,53428 jp z,SetNumber16BitCastle3429 cp Level6Unit3430 ld hl,63431 jp z,SetNumber16BitCastle3433SetAmountInHL: 3434 3435 call SetAllMonstersInMonsterTable.SetAmountInA3436 cp 53437 ld hl,TextAFew3438 ret c3439 cp 133440 ld hl,TextSeveral3441 ret c3442 cp 293443 ld hl,TextMany3444 ret c3445 cp 613446 ld hl,TextNumerous3447 ret c3448 cp 933449 ld hl,TextAHorde3450 ret c34513452 ld hl,TextCountless3453 ret3456TextAFew: db " A Few",2553457TextSeveral: db "Several",2553458TextMany: db " Many",2553459TextNumerous: db "Numerous",2553460TextAHorde: db "A horde",2553461TextCountless: db "Countless",2553474ListOfMonsters:3475 db 021 3476 db 022 3477 db 019 3478 db 091 3479 db 092 3480 db 093 3481 db 094 3482 db 139 3483 db 136 3484 db 154 3485 db 153 3486 db 134 3487 db 132 3488 db 133 3489 db 147 3490 db 146 3491 db 148 3492 db 143 3493 db 088 3494 db 089 3495 db 126 3496 db 157 3497 db 130 3498 db 131 3499 db 124 3500 db 144 3501 db 145 3502 db 164 3503 db 167 3504 db 128 3505 db 140 3506 db 142 3507 db 030 3508 db 032 3509 db 034 3510 db 053 3511 db 070 3512 db 067 3513 db 098 3514 db 090 3515 db 155 3516 db 150 3517 db 151 3518 db 152 3519 db 149 3520 db 125 3521 db 122 3522 db 123 3523 db 087 3524 db 082 3525 db 079 3526 db 078 3527 db 159 3528 db 169 3529 db 160 3530 db 161 3531 db 162 3532 db 163 3533 db 168 3535 db 181 3536 db 180 3537 db 178 3538 db 179 3539 db 177 3540 3541ListOfGuardTowerMonsters:3542.level1:3543 db 175 3544 db 176 3545 db 171 3546 db 172 3548.level2:3549 db 057 3550 db 173 3551 db 055 3552 db 129 3554.level3:3555 db 107 3556 db 173 3557 db 108 3558 db 165 3560.level4:3561 db 109 3562 db 137 3563 db 166 3564 db 127 3566.level5:3567 db 174 3568 db 138 3569 db 170 3570 db 135 3572.level6:3573 db 141 3574 db 156 3575 db 141 3576 db 156 3578GuardTowerMonster:3579 call .GetMonsterInHL3580 ld ix,(plxcurrentheroAddress)3581 ld a,(ix+HeroX)3582 and 33583 ld d,03584 ld e,a3585 add hl,de3586 ld a,(hl)3587 ret3589 .GetMonsterInHL:3590 ld a,(GuardTowerMonsterLevel)3591 dec a3592 ld hl,ListOfGuardTowerMonsters.level13593 ret z3594 dec a3595 ld hl,ListOfGuardTowerMonsters.level23596 ret z3597 dec a3598 ld hl,ListOfGuardTowerMonsters.level33599 ret z3600 dec a3601 ld hl,ListOfGuardTowerMonsters.level43602 ret z3603 dec a3604 ld hl,ListOfGuardTowerMonsters.level53605 ret z3606 ld hl,ListOfGuardTowerMonsters.level63607 ret3609SetNeutralMonsterHeroCollidedWithInA:3610 ld a,(MonsterHerocollidedWithOnMap)3611 or a3612 jr z,GuardTowerMonster3613 sub a,128 3614 ld d,03615 ld e,a3616 ld hl,ListOfMonsters3617 add hl,de3618 ld a,(hl) 3619 ret3621SetAllMonstersInMonsterTable:3622 ld ix,(plxcurrentheroAddress)3623 ld a,(ix+HeroUnits+00) 3624 ld (ListOfMonstersToPut+00),a3625 ld l,(ix+HeroUnits+01) 3626 ld h,(ix+HeroUnits+02) 3627 ld (ListOfMonstersToPut+01),hl3629 ld a,(ix+HeroUnits+03) 3630 ld (ListOfMonstersToPut+05),a3631 ld l,(ix+HeroUnits+04) 3632 ld h,(ix+HeroUnits+05) 3633 ld (ListOfMonstersToPut+06),hl3635 ld a,(ix+HeroUnits+06) 3636 ld (ListOfMonstersToPut+10),a3637 ld l,(ix+HeroUnits+07) 3638 ld h,(ix+HeroUnits+08) 3639 ld (ListOfMonstersToPut+11),hl3641 ld a,(ix+HeroUnits+09) 3642 ld (ListOfMonstersToPut+15),a3643 ld l,(ix+HeroUnits+10) 3644 ld h,(ix+HeroUnits+11) 3645 ld (ListOfMonstersToPut+16),hl3647 ld a,(ix+HeroUnits+12) 3648 ld (ListOfMonstersToPut+20),a3649 ld l,(ix+HeroUnits+13) 3650 ld h,(ix+HeroUnits+14) 3651 ld (ListOfMonstersToPut+21),hl3653 ld a,(ix+HeroUnits+15) 3654 ld (ListOfMonstersToPut+25),a3655 ld l,(ix+HeroUnits+16) 3656 ld h,(ix+HeroUnits+17) 3657 ld (ListOfMonstersToPut+26),hl3659 ld hl,(HeroThatGetsAttacked) 3660 ld a,l3661 or h3662 jp nz,.DefenderHasAHero3664 3665 xor a3666 ld hl,03667 ld (ListOfMonstersToPut+30),a3668 ld (ListOfMonstersToPut+31),hl3669 ld (ListOfMonstersToPut+35),a3670 ld (ListOfMonstersToPut+36),hl3671 ld (ListOfMonstersToPut+40),a3672 ld (ListOfMonstersToPut+41),hl3673 ld (ListOfMonstersToPut+45),a3674 ld (ListOfMonstersToPut+46),hl3675 ld (ListOfMonstersToPut+50),a3676 ld (ListOfMonstersToPut+51),hl3677 ld (ListOfMonstersToPut+55),a3678 ld (ListOfMonstersToPut+56),hl36803682 ld a,r3683 and 33684 jr z,.Situation2 3685 dec a3686 jr z,.Situation3 3687 3688 .Situation1: 3689 call SetNeutralMonsterHeroCollidedWithInA 3690 ld (ListOfMonstersToPut+40),a3691 call .SetAmountInA3693 ld l,a3694 ld h,03695 ld (ListOfMonstersToPut+41),hl3696 jp .EndSetAllMonsters3698 .Situation2: 3699 call SetNeutralMonsterHeroCollidedWithInA 3700 ld (ListOfMonstersToPut+40),a3701 ld (ListOfMonstersToPut+45),a3702 call .SetAmountInA3703 cp 13704 jr nz,.EndCheckTotalAmountIs13705 xor a3706 ld (ListOfMonstersToPut+40),a3707 ld a,13708 .EndCheckTotalAmountIs1:3709 srl a 3710 ld l,a3711 ld h,03712 ld (ListOfMonstersToPut+41),hl3713 ld de,03714 adc hl,de 3715 ld (ListOfMonstersToPut+46),hl3716 jp .EndSetAllMonsters3718 .Situation3: 3719 call SetNeutralMonsterHeroCollidedWithInA 3720 ld (ListOfMonstersToPut+45),a3721 ex af,af'3722 call .SetAmountInA3723 ld e,a3724 ld c,3 3725 call Div8 3726 ld l,a3727 ld h,03728 or a3729 jr z,.DivisionResultIs0 3730 ex af,af'3731 ld (ListOfMonstersToPut+35),a3732 ld (ListOfMonstersToPut+40),a3733 ex af,af'3734 ld (ListOfMonstersToPut+36),hl3735 ld (ListOfMonstersToPut+41),hl3736 .DivisionResultIs0:3737 ld d,03738 ld e,b3739 add hl,de 3740 ld (ListOfMonstersToPut+46),hl3741 jp .EndSetAllMonsters3743 .SetAmountInA:3744 ld a,(MonsterHerocollidedWithOnMapAmount)3745 sub a,Number1Tile3746 jr z,.Amount1 3747 dec a3748 jr z,.Amount23749 dec a3750 jr z,.Amount33751 dec a3752 jr z,.Amount43753 dec a3754 jr z,.Amount53756 .Amount6: 3757 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3758 and 313759 add a,933760 ret3762 .Amount5: 3763 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3764 and 313765 add a,613766 ret3768 .Amount4: 3769 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3770 and 313771 add a,293772 ret3774 .Amount3: 3775 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3776 and 153777 add a,133778 ret3780 .Amount2: 3781 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3782 and 73783 add a,53784 ret3785 3786 .Amount1: 3787 ld a,(XAddressOfMonsterHerocollidedWithOnMap) 3788 and 33789 inc a3790 ret3792 .DefenderHasAHero:3793 ld ix,(HeroThatGetsAttacked)3794 ld a,(ix+HeroUnits+00) 3795 ld (ListOfMonstersToPut+30),a3796 ld l,(ix+HeroUnits+01) 3797 ld h,(ix+HeroUnits+02) 3798 ld (ListOfMonstersToPut+31),hl3800 ld a,(ix+HeroUnits+03) 3801 ld (ListOfMonstersToPut+35),a3802 ld l,(ix+HeroUnits+04) 3803 ld h,(ix+HeroUnits+05) 3804 ld (ListOfMonstersToPut+36),hl3806 ld a,(ix+HeroUnits+06) 3807 ld (ListOfMonstersToPut+40),a3808 ld l,(ix+HeroUnits+07) 3809 ld h,(ix+HeroUnits+08) 3810 ld (ListOfMonstersToPut+41),hl3812 ld a,(ix+HeroUnits+09) 3813 ld (ListOfMonstersToPut+45),a3814 ld l,(ix+HeroUnits+10) 3815 ld h,(ix+HeroUnits+11) 3816 ld (ListOfMonstersToPut+46),hl3818 ld a,(ix+HeroUnits+12) 3819 ld (ListOfMonstersToPut+50),a3820 ld l,(ix+HeroUnits+13) 3821 ld h,(ix+HeroUnits+14) 3822 ld (ListOfMonstersToPut+51),hl3824 ld a,(ix+HeroUnits+15) 3825 ld (ListOfMonstersToPut+55),a3826 ld l,(ix+HeroUnits+16) 3827 ld h,(ix+HeroUnits+17) 3828 ld (ListOfMonstersToPut+56),hl3830 .EndSetAllMonsters:3831 ld ix,ListOfMonstersToPut3832 ld iy,Monster13833 ld b,1 3835 call .SetMonster3836 call .SetMonster3837 call .SetMonster3838 call .SetMonster3839 call .SetMonster3840 call .SetMonster3842 call .SetMonster3843 call .SetMonster3844 call .SetMonster3845 call .SetMonster3846 call .SetMonster3847 call .SetMonster3848 ret3850 .SetMonster:3851 push bc3853 xor a3854 ld (iy+MonsterStatus),a 3855 ld (iy+MonsterStatusEffect1),a 3856 ld (iy+MonsterStatusEffect2),a 3857 ld (iy+MonsterStatusEffect3),a 3858 ld (iy+MonsterStatusEffect4),a 3859 ld (iy+MonsterStatusEffect5),a 3860 3861 ld a,(ix+1)3862 ld (iy+MonsterAmount),a3863 ld a,(ix+2)3864 ld (iy+MonsterAmount+1),a3865 ld a,(ix)3866 ld (iy+MonsterNumber),a3868 push ix3869 push iy3870 push af 3872 ld a,b3873 ld (CurrentActiveMonster),a3874 call SetCurrentActiveMOnsterInIX3876 call SetTotalMonsterHPInHL 3877 ld e,l3879 ld b,(iy+MonsterTableSpriteSheetBlock)3880 ld c,(iy+MonsterTableNX)3881 ld d,(iy+MonsterTableNY)38823884 pop af 3885 or a3886 jr nz,.Not03887 ld e,03888 .Not0:3889 ld (ix+MonsterHP),e3891 ld l,(iy+0)3892 ld h,(iy+1) 3893 push hl3894 pop iy 3896 ld a,(CurrentActiveMonster) 3897 cp 73898 jr c,.MonsterIsFacingRight3900 .MonsterIsFacingLeft:3901 push de3902 ld a,(iy+1) 3903 add a,a3904 ld d,03905 ld e,a3906 add iy,de 3907 pop de3909 .MonsterIsFacingRight:3910 ld l,(iy+3)3911 ld h,(iy+2) 3913 pop iy3914 pop ix3916 ld (iy+MonsterSYSX),h3917 ld (iy+MonsterSYSX+1),l3919 ld (iy+MonsterBlock),b3920 ld (iy+MonsterNX),c3921 ld (iy+MonsterNXPrevious),c3922 ld (iy+MonsterNY),d3923 ld (iy+MonsterNYPrevious),d3924 ld a,(ix+3)3925 ld (iy+MonsterX),a3926 ld (iy+MonsterXPrevious),a3931 ld a,(CurrentActiveMonster) 3932 cp 73933 jr c,.EndCheckAdjustXForMonstersOnTheRight3935 ld a,c 3936 cp 173937 jp c,.EndCheckAdjustXForMonstersOnTheRight3939 ld a,(iy+MonsterX)3940 sub a,163941 ld (iy+MonsterX),a3942 ld (iy+MonsterXPrevious),a3944 ld a,c 3945 cp 333946 jp c,.EndCheckAdjustXForMonstersOnTheRight3948 ld a,(iy+MonsterX)3949 sub a,163950 ld (iy+MonsterX),a3951 ld (iy+MonsterXPrevious),a3953 ld a,c 3954 cp 57 3955 jp c,.EndCheckAdjustXForMonstersOnTheRight3957 ld a,(iy+MonsterX)3958 sub a,163959 ld (iy+MonsterX),a3960 ld (iy+MonsterXPrevious),a3962 .EndCheckAdjustXForMonstersOnTheRight:3968 ld a,(ix+4)3969 sub a,d3970 ld (iy+MonsterY),a3971 ld (iy+MonsterYPrevious),a3973 ld a,(iy+MonsterHP)3974 or a3975 jr nz,.NotZero3977 3978 ld (iy+MonsterX),2553979 ld (iy+MonsterXPrevious),2553980 ld (iy+MonsterY),2123981 ld (iy+MonsterYPrevious),2123982 .NotZero:3984 3985 ld de,53986 add ix,de 3987 3988 ld de,LenghtMonsterTable3989 add iy,de 3990 3991 pop bc3992 inc b3993 ret3995SetCurrentActiveMOnsterInIX:3996 ld a,(CurrentActiveMonster)3997 inc a3998 ld b,a3999 ld ix,Monster0-LenghtMonsterTable4001 .loop:4002 ld de,LenghtMonsterTable4003 add ix,de4004 djnz .loop4005 ret4007AnimateMonster:4008 call SetCurrentActiveMOnsterInIX4009 call SetMonsterTableInIY 4011 ld a,(MoVeMonster?) 4012 cp 14013 jr nz,.EndCheckMoveMonster4014 inc iy4015 inc iy 4016 .EndCheckMoveMonster:4018 ld a,(MoVeMonster?) 4019 cp 24020 jp z,.MonsterAttacksAnimateOnlyOnGeneralAttackPattern4022 ld l,(iy+0)4023 ld h,(iy+1) 4024 push hl4025 pop iy 4027 push iy4028 call .animate4029 pop iy4031 4032 ld a,(MonsterAnimationSpeed)4033 inc a4034 cp (iy+0) 4035 jr nz,.EndCheckAnimate4036 ld a,(MonsterAnimationStep) 4037 inc a4038 cp (iy+1) 4039 jr nz,.EndCheckLoop4040 xor a4041 .EndCheckLoop:4042 ld (MonsterAnimationStep),a4043 xor a 4044 .EndCheckAnimate:4045 ld (MonsterAnimationSpeed),a4046 ret4048 .animate:4049 4050 ld a,(MoVeMonster?) 4051 or a4052 jr z,.EndCheckMonsterMoving4053 ld a,(MonsterMovingRight?)4054 or a4055 jr z,.MonsterIsFacingLeft4056 jr .MonsterIsFacingRight4057 .EndCheckMonsterMoving:4059 ld a,(CurrentActiveMonster) 4060 cp 74061 jr c,.MonsterIsFacingRight4063 .MonsterIsFacingLeft:4064 ld a,(iy+1) 4065 add a,a4066 ld d,04067 ld e,a4068 add iy,de 4070 .MonsterIsFacingRight:4071 ld a,(MonsterAnimationStep)4072 add a,a4073 add a,24074 ld d,04075 ld e,a4076 add iy,de4077 4078 ld l,(iy+0)4079 ld h,(iy+1) 4081 ld (ix+MonsterSYSX+0),l4082 ld (ix+MonsterSYSX+1),h4083 ret4085 .MonsterAttacksAnimateOnlyOnGeneralAttackPattern:4086 ld l,(iy+4)4087 ld h,(iy+5) 4088 ld de,GeneralMonsterAttackPatternRight4089 call CompareHLwithDE 4090 ret nz4092 ld l,(iy+0)4093 ld h,(iy+1) 4094 push hl4095 pop iy 4097 ld a,(MonsterAttackingRight?)4098 or a4099 jr z,.MonsterIsFacingLeft4100 jr .MonsterIsFacingRight4102TeleportMovement: equ 104103AnimateAttack: equ 204104DisplaceLeft: equ 214105DisplaceRight: equ 224106ShowBeingHitSprite: equ 234107ShootProjectile: equ 244108InitiateAttack: equ 2544109EndMovement: equ 2554110WaitImpactProjectile: equ 254111DisplaceLeft8: equ 264112DisplaceRight8: equ 274113MoveMonster:4114 ld a,(ix+MonsterY)4115 ld (ix+MonsterYPrevious),a4116 ld a,(ix+MonsterX)4117 ld (ix+MonsterXPrevious),a4118 ld a,(ix+MonsterNY)4119 ld (ix+MonsterNYPrevious),a4120 ld a,(ix+MonsterNX)4121 ld (ix+MonsterNXPrevious),a4123 push ix4124 pop hl4125 ld de,Monster04126 call CompareHLwithDE4127 jp z,MoveGridPointer4129 ld a,(MoVeMonster?) 4130 or a4131 ret z4133 ld hl,CursorHand4134 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl4135 ld hl,SpriteColCursorSprites4136 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl4138 .HandleMovement:4139 ld a,(MonsterMovementPathPointer)4140 ld e,a4141 ld d,04142 ld hl,MonsterMovementPath4143 add hl,de4144 ld a,(hl)4145 cp EndMovement 4146 jp z,.EndMovement4147 cp InitiateAttack 4148 jp z,.HandleAttackedMonster4149 cp 128 4150 jp nc,.ChangeNX4151 cp TeleportMovement4152 jp z,.TeleportMovement4153 cp 124154 jp z,.InitiateAttackRightUp4155 cp 134156 jp z,.InitiateAttackRight4157 cp 144158 jp z,.InitiateAttackRightDown4159 cp 164160 jp z,.InitiateAttackLeftDown4161 cp 174162 jp z,.InitiateAttackLeft4163 cp 184164 jp z,.InitiateAttackLeftUp4165 cp AnimateAttack4166 jp z,.AnimateAttack4167 cp DisplaceLeft 4168 jp z,.DisplaceLeft4169 cp DisplaceRight 4170 jp z,.DisplaceRight4171 cp ShowBeingHitSprite 4172 jp z,.ShowBeingHitSprite4173 cp ShootProjectile 4174 jp z,.ShootProjectile4175 cp WaitImpactProjectile 4176 jp z,.WaitImpactProjectile4177 cp DisplaceLeft8 4178 jp z,.DisplaceLeft84179 cp DisplaceRight8 4180 jp z,.DisplaceRight84182 call .Move4184 ld a,(MoveMonster?) 4185 cp 24186 ld c,1 4187 jr z,.SetMovementDuration4188 ld c,3 4189 .SetMovementDuration:4190 4191 ld a,(MonsterMovementAmountOfSteps)4192 dec a4193 and c4194 ld (MonsterMovementAmountOfSteps),a4195 ret nz4196 ld a,(MonsterMovementPathPointer)4197 inc a4198 ld (MonsterMovementPathPointer),a4199 ret4201 .DisplaceLeft:4202 ld a,(ix+MonsterX)4203 sub a,164204 ld (ix+MonsterX),a4206 ld a,(MonsterMovementPathPointer)4207 inc a4208 ld (MonsterMovementPathPointer),a4209 jp .HandleMovement4211 .DisplaceRight:4212 ld a,(ix+MonsterX)4213 add a,164214 ld (ix+MonsterX),a4216 ld a,(MonsterMovementPathPointer)4217 inc a4218 ld (MonsterMovementPathPointer),a4219 jp .HandleMovement4221 .DisplaceLeft8:4222 ld a,(ix+MonsterX)4223 sub a,84224 ld (ix+MonsterX),a4226 ld a,(MonsterMovementPathPointer)4227 inc a4228 ld (MonsterMovementPathPointer),a4229 jp .HandleMovement4231 .DisplaceRight8:4232 ld a,(ix+MonsterX)4233 add a,84234 ld (ix+MonsterX),a4236 ld a,(MonsterMovementPathPointer)4237 inc a4238 ld (MonsterMovementPathPointer),a4239 jp .HandleMovement4241 .ShowBeingHitSprite:4242 ld a,14243 ld (ShowExplosionSprite?),a 4244 xor a4245 ld (ExplosionSpriteStep),a4246 ld a,(MonsterMovementPathPointer)4247 inc a4248 ld (MonsterMovementPathPointer),a4249 jp .HandleMovement4251 .ShootProjectile:4252 push iy4253 push bc4254 ld bc,SFX_shoot24255 call RePlayerSFX_PlayCh14256 pop bc4257 pop iy4259 ld a,14260 ld (ShootProjectile?),a4261 ld a,(MonsterMovementPathPointer)4262 inc a4263 ld (MonsterMovementPathPointer),a4264 jp .HandleMovement4266 .WaitImpactProjectile:4267 ld a,(ShootProjectile?)4268 or a4269 ret nz4271 push iy4272 push bc4273 ld bc,SFX_enemyhit4274 call RePlayerSFX_PlayCh14275 pop bc4276 pop iy4278 ld a,14279 ld (ShowExplosionSprite?),a 4280 xor a4281 ld (ExplosionSpriteStep),a4282 jp .HandleAttackedMonster4283 4284 .AnimateAttack:4285 inc hl4286 ld e,(hl)4287 inc hl4288 ld d,(hl) 4289 ld (ix+MonsterSYSX+0),e4290 ld (ix+MonsterSYSX+1),d4292 ld a,(MonsterMovementPathPointer)4293 add a,34294 ld (MonsterMovementPathPointer),a4295 jp .HandleMovement4297 .InitiateAttackRight:4298 ld (ActiveMonsterAttackingDirection),a4299 call SetCurrentActiveMOnsterInIX4300 call SetMonsterTableInIY 4301 ld l,(iy+4)4302 ld h,(iy+5) 4303 ld a,1 4304 jp .InitiateAttack4306 .InitiateAttackLeft:4307 ld (ActiveMonsterAttackingDirection),a4308 call SetCurrentActiveMOnsterInIX4309 call SetMonsterTableInIY 4310 ld l,(iy+6)4311 ld h,(iy+7) 4312 Xor a 4313 jp .InitiateAttack4315 .InitiateAttackLeftUp:4316 ld (ActiveMonsterAttackingDirection),a4317 call SetCurrentActiveMOnsterInIX4318 call SetMonsterTableInIY 4319 ld l,(iy+08)4320 ld h,(iy+09) 4321 Xor a 4322 jp .InitiateAttack4324 .InitiateAttackLeftDown:4325 ld (ActiveMonsterAttackingDirection),a4326 call SetCurrentActiveMOnsterInIX4327 call SetMonsterTableInIY 4328 ld l,(iy+10)4329 ld h,(iy+11) 4330 Xor a 4331 jp .InitiateAttack4333 .InitiateAttackRightUp:4334 ld (ActiveMonsterAttackingDirection),a4335 call SetCurrentActiveMOnsterInIX4336 call SetMonsterTableInIY 4337 ld l,(iy+12)4338 ld h,(iy+13) 4339 ld a,1 4340 jp .InitiateAttack4342 .InitiateAttackRightDown:4343 ld (ActiveMonsterAttackingDirection),a4344 call SetCurrentActiveMOnsterInIX4345 call SetMonsterTableInIY 4346 ld l,(iy+14)4347 ld h,(iy+15) 4348 ld a,1 4349 jp .InitiateAttack4351 .InitiateAttack:43524353 ld a,24354 ld (MoveMonster?),a 4355 xor a4356 ld (MonsterMovementPathPointer),a4357 ld de,MonsterMovementPath43584362 ld bc,LenghtMonsterMovementPathTable4364 ldir4365 4366 xor a4367 ld (MonsterAttackingRight?),a 4368 ld a,(MonsterMovementPath+1)4369 cp 54370 jp nc,.HandleMovement4371 ld a,14372 ld (MonsterAttackingRight?),a 4373 4374 jp .HandleMovement4376 .HandleAttackedMonster:4377 4378 call SetCurrentActiveMOnsterInIX4379 call SetMonsterTableInIY 4382 call SetTotalMonsterDamageENTIRESTACKInHL4385 43884397 4400 call ApplyAttackDefenseFormula 44064407 ld a,(BrokenArrow?)4408 or a4409 jr z,.EndCheckBrokenArrow4410 push hl4411 pop bc4412 ld de,2 4413 call DivideBCbyDE 4414 push bc4415 pop hl4416 .EndCheckBrokenArrow:441744194420 ld a,(HandleRetaliation?) 4421 or a4422 jr z,.EndCheckRetaliation4424 push hl4425 call SetCurrentActiveMOnsterInIX4426 call SetMonsterTableInIY 4427 pop hl4428 ld a,(iy+MonsterTableSpecialAbility)4429 cp RangedMonster4430 jp nz,.EndCheckRetaliation4432 push hl4433 pop bc4434 ld de,2 4435 call DivideBCbyDE 4436 push bc4437 pop hl4439 .EndCheckRetaliation:444044424443 call ApplyAttackReductionFromArmorer4444 call ApplyAttackReductionFromGreenLeafShield4449 4450 push hl4451 ld a,3 4452 ld (BattleTextQ),a4453 ld a,24454 ld (SetBattleText?),a 4455 ld (BattleTextQ+1),hl 4456 call SetCurrentActiveMOnsterInIX4458 ld a,(ix+MonsterAmount) 4459 or (ix+MonsterAmount+1)4460 ld (BattleTextQ+3),a 4462 call SetMonsterNameInBattleTextQ44464 pop hl4465 4472 .DealDamageToMonster: 4474 ld de,04475 ex de,hl4476 or a4477 sbc hl,de 4478 push hl4480 ld ix,(MonsterThatIsBeingAttacked)4482 ld b,hypnosisSpellNumber 4483 call RemoveSpell 4485 4486 ld l,(ix+MonsterAmount)4487 ld h,(ix+MonsterAmount+1)4488 ld (AmountMonsterBeforeBeingAttacked),hl4490 call SetTotalMonsterHPInHL 4491 ld c,l 4492 pop hl 4494 ld ix,(MonsterThatIsBeingAttacked)4495 .loop:4496 ld d,04497 ld e,(ix+MonsterHP) 4499 add hl,de4500 jr c,.NoUnitsOrExactly1UnitLost4502 ld e,(ix+MonsterAmount)4503 ld d,(ix+MonsterAmount+1)4504 dec de 4505 ld (ix+MonsterAmount),e4506 ld (ix+MonsterAmount+1),d4507 ld a,d4508 or e4510 jr z,.MonsterDied4511 ld (ix+MonsterHP),c 4512 jp .loop4514 .NoUnitsOrExactly1UnitLost:4515 ld (ix+MonsterHP),l4516 ld a,l4517 or a4518 jr nz,.CheckRetaliate4520 ld e,(ix+MonsterAmount)4521 ld d,(ix+MonsterAmount+1)4522 dec de 4523 ld (ix+MonsterAmount),e4524 ld (ix+MonsterAmount+1),d4525 ld a,d4526 or e4528 jr z,.MonsterDied4529 ld (ix+MonsterHP),c 4531 4532 .CheckRetaliate: 4533 call SetAmountUnderMonsterIn3Pages4535 ld a,(SpellSelected?) 4536 or a4537 ret nz4539 ld a,(HandleRetaliation?) 4540 or a 4541 jr z,.go4542 xor a4543 ld (HandleRetaliation?),a4544 jr .EndSetStatusOnEndMovement4545 .go:4549 4550 call SetCurrentActiveMOnsterInIX4551 call SetMonsterTableInIY 4552 ld a,(iy+MonsterTableSpecialAbility)4553 cp RangedMonster4554 jp nz,.EndCheckRangedMonster4555 ld a,(MayRangedAttackBeRetaliated?)4556 or a4557 jp z,.EndMovement4558 .EndCheckRangedMonster:4559 4561 ld ix,(MonsterThatIsBeingAttacked)4562 bit 7,(ix+MonsterStatus) 4563 jr nz,.EndMovement4564 ld a,14565 ld (HandleRetaliation?),a4567 ld b,ClawBackSpellNumber 4568 call CheckPresenceStatusEffect 4569 jr z,.EndMovement4570 set 7,(ix+MonsterStatus) 4571 jr .EndMovement4572 4573 .MonsterDied:4574 ld (ix+MonsterHP),000 4575 ld a,34576 ld (ShowExplosionSprite?),a 4577 xor a4578 ld (ExplosionSpriteStep),a 4579 ld a,14580 ld (MonsterDied?),a4582 push iy4583 push bc4584 ld bc,SFX_MonsterDied4585 call RePlayerSFX_PlayCh14586 pop bc4587 pop iy4589 ld a,(SpellSelected?) 4590 or a4591 ret nz4593 ld a,(HandleRetaliation?) 4594 or a 4595 jr z,.EndMovement4596 xor a4597 ld (HandleRetaliation?),a4598 jr .EndSetStatusOnEndMovement4600 .EndMovement:4601 call SetCurrentActiveMOnsterInIX4602 4603 ld a,(ix+MonsterStatus) 4604 and %1000 0004605 or a,MonsterStatusTurnEnded4606 ld (ix+MonsterStatus),a4607 .EndSetStatusOnEndMovement:4609 xor a4610 ld (MoVeMonster?),a 4611 ld (MonsterMovementPathPointer),a4612 ld (MonsterAnimationSpeed),a4613 ld (MonsterAnimationStep),a4614 ld a,14615 ld (SwitchToNextMonster?),a4616 ret4618 .ChangeNX:4619 and %0111 11114620 ld (ix+MonsterNX),a4621 ld a,(MonsterMovementPathPointer)4622 inc a4623 ld (MonsterMovementPathPointer),a4624 jp .HandleMovement4626 .Move:4627 cp 24628 jr z,.MoveRightUp4629 cp 34630 jr z,.MoveRight4631 cp 44632 jr z,.MoveRightDown4633 cp 64634 jr z,.MoveLeftDown4635 cp 74636 jr z,.MoveLeft4637 cp 84638 jr z,.MoveLeftUp4639 ret4641 .TeleportMovement:4642 inc hl 4643 ld a,(hl)4644 ld (ix+MonsterY),a4645 inc hl 4646 ld a,(hl)4647 ld (ix+MonsterX),a4649 xor a4650 ld (MoVeMonster?),a 4651 ld (MonsterMovementPathPointer),a4652 ld (MonsterAnimationSpeed),a4653 ld (MonsterAnimationStep),a4654 ld a,14655 ld (SwitchToNextMonster?),a4656 ret4658 .MoveRightUp:4659 ld a,14660 ld (MonsterMovingRight?),a4662 ld a,(ix+MonsterX)4663 add a,24664 ld (ix+MonsterX),a4666 ld a,(ix+MonsterY)4667 sub a,44668 ld (ix+MonsterY),a4669 ret4671 .MoveRight:4672 ld a,14673 ld (MonsterMovingRight?),a4675 ld a,(ix+MonsterX)4676 add a,44677 ld (ix+MonsterX),a4678 ret4680 .MoveRightDown:4681 ld a,14682 ld (MonsterMovingRight?),a4684 ld a,(ix+MonsterX)4685 add a,24686 ld (ix+MonsterX),a4688 ld a,(ix+MonsterY)4689 add a,44690 ld (ix+MonsterY),a4691 ret4693 .MoveLeftDown:4694 xor a4695 ld (MonsterMovingRight?),a4697 ld a,(ix+MonsterX)4698 sub a,24699 ld (ix+MonsterX),a4701 ld a,(ix+MonsterY)4702 add a,44703 ld (ix+MonsterY),a4704 ret4706 .MoveLeft:4707 xor a4708 ld (MonsterMovingRight?),a4710 ld a,(ix+MonsterX)4711 sub a,44712 ld (ix+MonsterX),a4713 ret4715 .MoveLeftUp:4716 xor a4717 ld (MonsterMovingRight?),a4719 ld a,(ix+MonsterX)4720 sub a,24721 ld (ix+MonsterX),a4723 ld a,(ix+MonsterY)4724 sub a,44725 ld (ix+MonsterY),a4726 ret4728ApplyAttackReductionFromGreenLeafShield:4729 push hl 4730 4731 ld ix,(MonsterThatIsBeingAttacked)4733 4734 push ix4735 pop hl 4736 ld de,Monster74737 call CompareHLwithDE 4738 ld ix,(plxcurrentheroAddress) 4739 jr c,.HeroFound4740 ld ix,(HeroThatGetsAttacked) 4741 push ix4742 pop hl4743 ld a,l4744 or h4745 pop hl 4746 ret z 4747 push hl4748 .HeroFound:4749 4750 4751 pop hl 4753 ld a,(ix+HeroInventory+2) 4754 cp 010 4755 ret nz4757 4758 push hl4759 call SetCurrentActiveMOnsterInIX4760 call SetMonsterTableInIY 4761 ld a,(iy+MonsterTableSpecialAbility)4762 cp RangedMonster4763 pop hl4764 ret nz4765 4766 ld de,02 4767 call ApplyPercentBasedBoost4768 or a4769 sbc hl,bc4770 sbc hl,bc4771 ret4772 47744775ApplyAttackReductionFromArmorer:4776 push hl 4777 4778 ld ix,(MonsterThatIsBeingAttacked)4780 4781 push ix4782 pop hl 4783 ld de,Monster74784 call CompareHLwithDE 4785 ld ix,(plxcurrentheroAddress) 4786 jr c,.HeroFound4787 ld ix,(HeroThatGetsAttacked) 4788 push ix4789 pop hl4790 ld a,l4791 or h4792 pop hl 4793 ret z 4794 push hl4795 .HeroFound:4796 4798 pop hl 4799 ld a,(ix+HeroSkills+0)4800 call .CheckSkillArmorer4801 ld a,(ix+HeroSkills+1)4802 call .CheckSkillArmorer4803 ld a,(ix+HeroSkills+2)4804 call .CheckSkillArmorer4805 ld a,(ix+HeroSkills+3)4806 call .CheckSkillArmorer4807 ld a,(ix+HeroSkills+4)4808 call .CheckSkillArmorer4809 ld a,(ix+HeroSkills+5)4810 call .CheckSkillArmorer4811 ret4813 .CheckSkillArmorer:4814 cp 07 4815 jr z,.BasicArmorerFound4816 cp 08 4817 jr z,.AdvancedArmorerFound4818 cp 09 4819 jr z,.ExpertArmorerFound4820 ret4822 .BasicArmorerFound:4823 ld de,20 4824 call ApplyPercentBasedBoost4825 or a4826 sbc hl,bc4827 sbc hl,bc4828 ret4830 .AdvancedArmorerFound:4831 ld de,10 4832 call ApplyPercentBasedBoost4833 or a4834 sbc hl,bc4835 sbc hl,bc4836 ret4838 .ExpertArmorerFound:4839 ld de,07 4840 call ApplyPercentBasedBoost4841 or a4842 sbc hl,bc4843 sbc hl,bc4844 ret4849 4852ApplyAttackDefenseFormula: 4853 push hl4854 4855 ld ix,(MonsterThatIsBeingAttacked)4856 call SetMonsterTableInIY 4857 call SetTotalMonsterDefenseInHL 4858 push hl4860 call SetCurrentActiveMOnsterInIX4861 call SetMonsterTableInIY 4862 call SetTotalMonsterAttackInHL 4863 pop de4864 4865 or a4866 sbc hl,de 4867 jr z,.AttackAndDefenseAreTheSame4868 4869 jr c,.DefenseIsHigher4871 .AttackIsHigher: 4872 ld a,l4873 cp 614874 jr c,.Go24875 ld a,604876 .Go2:4877 ld e,a4879 pop hl4881 push de4882 ld de,20 4883 call ApplyPercentBasedBoost4884 pop de4886 .loop1:4887 dec e4888 ret z4889 add hl,bc 4890 jp .loop14891 4892 .DefenseIsHigher: 4893 ld a,l4894 neg4895 cp 134896 jr c,.Go4897 ld a,124898 .Go:4900 ld e,a4901 pop hl4903 push de4904 ld de,40 4905 call ApplyPercentBasedBoost4906 pop de4907 or a4908 sbc hl,bc4909 sbc hl,bc4911 .loop2:4912 dec e4913 ret z4914 sbc hl,bc 4915 jp .loop24917 .AttackAndDefenseAreTheSame:4918 pop hl4919 ret4922MoveGridPointer:4923 ld a,(spat)4924 add a,14 4925 4926 and %1111 00004927 bit 4,a4928 jr z,.EvenTiles4930 .OddTiles:4931 sub a,94932 ld (ix+MonsterY),a4934 ld a,(spat+1)4935 sub a,6 4936 4937 and %1111 00004938 add a,4+84939 ld (ix+MonsterX),a4940 ret4942 .EvenTiles:4943 sub a,94944 ld (ix+MonsterY),a4945 ld a,(spat+1)4946 sub a,-44948 and %1111 00004949 add a,44950 ld (ix+MonsterX),a4951 ret49534957SortMonstersOnTheirSpeed:4958 ld c,TotalAmountOfMonstersOnBattleField-1-1 4959 call .sortloop4960 ret4962 .sortloop:4963 ld iy, MonstersSortedOnSpeed 4964 ld b,c 4966 .innerloop:4967 ld l,(iy)4968 ld h,(iy+1) 4969 push hl4970 pop ix4974 push iy4975 push bc4976 call SetMonsterTableInIY4978 call SetTotalMonsterSpeedInHL 4979 ld e,l4980 4982 49834984 pop bc4985 pop iy4986 push de4987 4988 ld l,(iy+2)4989 ld h,(iy+3) 4990 push hl4991 pop ix4992 4993 push iy4994 push bc 4995 call SetMonsterTableInIY4997 call SetTotalMonsterSpeedInHL 4998 ld a,l50015002 pop bc5003 pop iy5004 pop de5008 5009 cp e 5010 jr nc,.noswap 5012 5014 ld l,(iy)5015 ld h,(iy+1) 5016 ld e,(iy+2)5017 ld d,(iy+3) 5019 ld (iy),e5020 ld (iy+1),d 5021 ld (iy+2),l5022 ld (iy+3),h 5023 .noswap:5025 inc iy 5026 inc iy 5027 djnz .innerloop 5029 5030 dec c5031 jr nz,.sortloop 5032 ret50335035CopyARowOf12PixelsFromBottomOfPage3ToPage2:5036 db 0,0,172+16,35037 db 0,0,188+16,25038 db 0,1,12,05039 db 0,0,$d0 5040 5041BuildUpBattleFieldAndPutMonsters: 5042 xor a5043 ld (activepage),a 5044 call SetBattleFieldGraphics 5045 ld a,r5046 push af 5047 call .SetRocks5048 call .SetHeroes5049 ld hl,.CopyPage1To25050 call DoCopy 5051 call SwapAndSetPage 5052 call SetBattleFieldGraphics 5053 pop af 5054 call .SetRocks5055 call .SetHeroes5056 ld hl,.CopyPage1To35057 call DoCopy 50595061 call SetAllMonstersInMonsterTable 5062 call .PutAllMonsters 5063 call .CopyAllMonstersToPage1and250665071 xor a50725073 ld (CurrentActiveMonster),a5074 call CheckSwitchToNextMonster.GoToNextActiveMonster50765078 ret5081 .SetHeroes:5082 5083 ld ix,(plxcurrentheroAddress) 5084 ld l,(ix+HeroSpecificInfo+0) 5085 ld h,(ix+HeroSpecificInfo+1)5086 push hl5087 pop ix5089 5090 ld a,(ix+HeroinfoSYSX+0) 5091 and %0100 1000 5092 or a,128 + (064 / 2) 5093 xor 8 5094 ld l,a5095 ld h,(ix+HeroInfoSYSX+1) 5097 .XLeftHero: equ 05098 .YLeftHero: equ 305100 exx5101 ld de,256*(.YLeftHero) + (.XLeftHero)5102 exx5103 ld bc,.NXAndNY16x32HeroIcon5105 ld a,(ix+HeroInfoSpriteBlock)5107 call .CopyTransparantImageHero 5109 5110 ld ix,(HeroThatGetsAttacked) 5112 push ix 5113 pop hl5114 ld a,l5115 or h5116 ret z5118 ld l,(ix+HeroSpecificInfo+0) 5119 ld h,(ix+HeroSpecificInfo+1)5120 push hl5121 pop ix5122 5123 5124 ld a,(ix+HeroinfoSYSX+0) 5125 and %0100 1000 5126 or a,128 + (064 / 2) 5127 xor 8 5128 ld l,a5129 ld h,(ix+HeroInfoSYSX+1) 5131 .XRightHero: equ 256-165132 .YRightHero: equ 305134 exx5135 ld de,256*(.YRightHero) + (.XRightHero)5137 exx5138 ld bc,.NXAndNY16x32HeroIcon5139 ld a,(ix+HeroInfoSpriteBlock)5140 jp .CopyTransparantImageHero 5142.NXAndNY16x32HeroIcon: equ 032*256 + (016/2) 5145.CopyTransparantImageHero: 51465148 ld (BlockToReadFrom),a5149 ld (AddressToWriteFrom),hl5150 ld de,$8000 + ((212+12)*128) + (000/2) - 128 5151 ld (AddressToWriteTo),de 5152 ld (NXAndNY),bc5154 ld a,b5155 ld (CopyCastleButton2+ny),a5156 ld a,c5157 add a,a5158 ld (CopyCastleButton2+nx),a5160 call CopyRamToVramPage3ForBattleEngine 5162 ld a,(activepage)5163 xor 15164 ld (CopyCastleButton2+dPage),a5166 exx5167 ld a,d5168 ld (CopyCastleButton2+dy),a5169 ld a,e5170 ld (CopyCastleButton2+dx),a5172 ld a,212+125173 ld (CopyCastleButton2+sy),a5175 ld a,35176 ld (CopyCastleButton2+sPage),a5177 ld hl,CopyCastleButton25178 call docopy5179 ld a,15180 ld (CopyCastleButton2+sPage),a5182 ld a,2125183 ld (CopyCastleButton2+sy),a5185 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5186 call docopy5187 ret5190.CopyTransparantImage: 51915192 push af5193 ld a,b5194 ld (CopyCastleButton2+ny),a5195 ld a,c5196 add a,a5197 ld (CopyCastleButton2+nx),a5198 pop af5200 ld de,$8000 + ((212+16)*128) + (000/2) - 128 5201 call CopyRamToVramCorrectedWithoutActivePageSetting 5203 ld a,(activepage)5204 xor 15205 ld (CopyCastleButton2+dPage),a5207 exx5208 ld a,d5209 ld (CopyCastleButton2+dy),a5210 ld a,e5211 ld (CopyCastleButton2+dx),a5213 ld a,212+165214 ld (CopyCastleButton2+sy),a5216 ld hl,CopyCastleButton25217 call docopy5219 ld a,2125220 ld (CopyCastleButton2+sy),a5222 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady5223 call docopy5224 ret5240 .CopyAllMonstersToPage1and2:5241 ld hl,.CopyMonstersFromPage0to15242 call DoCopy 5243 ld hl,.CopyMonstersFromPage0to2 5244 call DoCopy 5245 ret5246 5247 .PutAllMonsters:5248 call SortMonstersFromHighToLow 5249 ld a,1 5250 ld (CurrentActiveMonster),a5251 .loop:5252 call SetCurrentActiveMOnsterInIX5253 ld a,(ix+MonsterHP)5254 or a525552595260 jr nz,.GoPutMonster5261 5262 ld (ix+MonsterX),2555263 ld (ix+MonsterXPrevious),2555264 ld (ix+MonsterY),2125265 ld (ix+MonsterYPrevious),2125266 jr .NextMonster5267 .GoPutMonster:52685271 call Set255WhereMonsterStandsInBattleFieldGrid5272 call SetAmountUnderMonster5273 call StoreSYSXNYNXAndBlock 5274 call PutMonster 5275 .NextMonster:5276 ld a,(CurrentActiveMonster)5277 inc a 5278 cp TotalAmountOfMonstersOnBattleField5279 ret z5280 ld (CurrentActiveMonster),a5281 jr .loop5283.CopyMonstersFromPage0to1:5284 db 0,0,0,05285 db 0,0,0,15286 db 0,1,188+16,05287 db 0,0,$d0 5289.CopyMonstersFromPage0to2:5290 db 0,0,0,05291 db 0,0,0,25292 db 0,1,188+16,05293 db 0,0,$d0 5295.CopyPage1To2:5296 db 0,0,0,15297 db 0,0,0,25298 db 0,1,188+16,05299 db 0,0,$d0 5301.CopyPage1To3:5302 db 0,0,0,15303 db 0,0,0,35304 db 0,1,188+16,05305 db 0,0,$d0 5307 .SetRocks:5308 and 75309 ld hl,RocksVersion1+15310 jr z,.RocksFormationFound5311 dec a5312 ld hl,RocksVersion2+15313 jr z,.RocksFormationFound5314 dec a5315 ld hl,RocksVersion3+15316 jr z,.RocksFormationFound5317 dec a5318 ld hl,RocksVersion4+15319 jr z,.RocksFormationFound5320 dec a5321 ld hl,RocksVersion5+15322 jr z,.RocksFormationFound5323 dec a5324 ld hl,RocksVersion6+15325 jr z,.RocksFormationFound5326 dec a5327 ld hl,RocksVersion7+15328 jr z,.RocksFormationFound53295330 ld hl,RocksVersion8+153315332 .RocksFormationFound:5333 push hl5334 pop ix53355336 ld b,(ix-1) 5337 ld a,b5338 or a5339 ret z5341 .RockLoop:5342 push bc5343 ld e,(ix+0)5344 ld d,(ix+1)5345 call .GoSetRock 5347 ld l,(ix+2)5348 ld h,(ix+3)5349 ld (hl),2555351 inc ix5352 inc ix5353 inc ix5354 inc ix5355 pop bc5356 djnz .RockLoop5357 ret5359 .GoSetRock:5360 ld a,(BattleGraphicsBlock) 5361 cp BattleFieldWinterBlock5362 ld hl,$4000 + (000*128) + (016/2) - 128 5363 jr z,.BattleFieldTileFound5364 cp BattleFieldDesertBlock5365 ld hl,$4000 + (000*128) + (064/2) - 128 5366 jr z,.BattleFieldTileFound5367 cp BattleFieldCaveBlock5368 ld hl,$4000 + (000*128) + (112/2) - 128 5369 jr z,.BattleFieldTileFound5370 cp BattleFieldGentleBlock5371 ld hl,$4000 + (000*128) + (048/2) - 128 5372 jr z,.BattleFieldTileFound5373 cp BattleFieldAutumnBlock5374 ld hl,$4000 + (000*128) + (000/2) - 128 5375 jr z,.BattleFieldTileFound5376 ld hl,$4000 + (000*128) + (080/2) - 128 5378 .BattleFieldTileFound:5379 ld bc,$0000 + (016*256) + (016/2)5380 ld a,BattleFieldObjectsBlock 5382 push de5383 exx5384 pop de5385 exx5386 jp BuildUpBattleFieldAndPutMonsters.CopyTransparantImage 5388RocksVersion1:5389 db 05390 dw $0000 + ((00*16+056)*256) + ((07*08 + 12)), BattleFieldGrid+007 + 00*LenghtBattleField5392RocksVersion2:5393 db 15394 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5396RocksVersion3:5397 db 25398 dw $0000 + ((03*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 03*LenghtBattleField5399 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5401RocksVersion4:5402 db 35403 dw $0000 + ((01*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+012 + 01*LenghtBattleField5404 dw $0000 + ((01*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 01*LenghtBattleField5405 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5407RocksVersion5:5408 db 35409 dw $0000 + ((05*16+056)*256) + ((12*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5410 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5411 dw $0000 + ((04*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 04*LenghtBattleField5413RocksVersion6:5414 db 45415 dw $0000 + ((02*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 02*LenghtBattleField5416 dw $0000 + ((03*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 03*LenghtBattleField5417 dw $0000 + ((04*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 04*LenghtBattleField5418 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5420RocksVersion7:5421 db 55422 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5423 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5424 dw $0000 + ((04*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 04*LenghtBattleField5425 dw $0000 + ((05*16+056)*256) + ((14*08 + 12)), BattleFieldGrid+014 + 05*LenghtBattleField5426 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5428RocksVersion8:5429 db 65430 dw $0000 + ((02*16+056)*256) + ((11*08 + 12)), BattleFieldGrid+011 + 02*LenghtBattleField5431 dw $0000 + ((02*16+056)*256) + ((13*08 + 12)), BattleFieldGrid+013 + 02*LenghtBattleField5432 dw $0000 + ((01*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 01*LenghtBattleField5433 dw $0000 + ((03*16+056)*256) + ((10*08 + 12)), BattleFieldGrid+010 + 03*LenghtBattleField5434 dw $0000 + ((05*16+056)*256) + ((16*08 + 12)), BattleFieldGrid+016 + 05*LenghtBattleField5435 dw $0000 + ((06*16+056)*256) + ((15*08 + 12)), BattleFieldGrid+015 + 06*LenghtBattleField5437Set255WhereMonsterStandsInBattleFieldGrid:5438 call FindMonsterInBattleFieldGrid 5440 5441 ld a,(ix+MonsterNX)5442 ld (hl),255 5443 cp 175444 ret c5445 5446 inc hl5447 inc hl5448 ld (hl),255 5449 cp 335450 ret c5451 inc hl5452 inc hl5453 ld (hl),255 5454 cp 575455 ret c5456 inc hl5457 inc hl5458 ld (hl),255 5459 ret5461CheckMonsterDied:5462 ld a,(MonsterDied?)5463 or a5464 ret z5465 xor a5466 ld (MonsterDied?),a5468 ld ix,(MonsterThatIsBeingAttacked)5470 5474 ld a,(activepage)5475 xor 15476 ld (EraseMonster+dPage),a5477 ld a,35478 ld (EraseMonster+sPage),a5479 5480 ld a,(ix+MonsterYPrevious)5481 ld (EraseMonster+sy),a 5482 ld (EraseMonster+dy),a5484 ld a,(ix+MonsterXPrevious)5485 ld (EraseMonster+dx),a5486 ld (EraseMonster+sx),a5488 ld a,(ix+MonsterNXPrevious)5489 ld (EraseMonster+nx),a5490 ld a,(ix+MonsterNYPrevious)5491 ld (EraseMonster+ny),a54935496 ld hl,EraseMonster5497 call docopy5499 5500 call RecoverOverwrittenMonstersSkipMonster05502 call SwapAndSetPage 5504 5508 ld a,(activepage)5509 xor 15510 ld (EraseMonster+dPage),a5511 ld a,35512 ld (EraseMonster+sPage),a5513 5514 ld a,(ix+MonsterYPrevious)5515 ld (EraseMonster+sy),a 5516 ld (EraseMonster+dy),a5518 ld a,(ix+MonsterXPrevious)5519 ld (EraseMonster+dx),a5520 ld (EraseMonster+sx),a5522 ld a,(ix+MonsterNXPrevious)5523 ld (EraseMonster+nx),a5524 ld a,(ix+MonsterNYPrevious)5525 ld (EraseMonster+ny),a55275530 ld hl,EraseMonster5531 call docopy5533 5534 call RecoverOverwrittenMonstersSkipMonster05536 call SwapAndSetPage 5538 5539 ld a,(activepage)5540 xor 15541 ld (EraseMonster+sPage),a5542 ld a,25543 ld (EraseMonster+dPage),a5544 5545 ld hl,EraseMonster5546 call docopy5548 ld a,25549 ld (EraseMonster+sPage),a5550 5551 5552 call FindMonsterInBattleFieldGrid 5553 call Set001AtCurrentMonstersLocation5555 5556 ld (ix+MonsterX),2555557 ld (ix+MonsterXPrevious),2555558 ld (ix+MonsterY),2125559 ld (ix+MonsterYPrevious),2125560 ret 5562SetAmountUnderMonster:55635569 ld hl,$4000 + (038*128) + (000/2) - 1285570 ld de,$0000 + (249*128) + (240/2) - 128 5571 ld bc,$0000 + (007*256) + (016/2) 5572 ld a,BattleFieldObjectsBlock 5573 call CopyRamToVramCorrectedCastleOverview 5575 ld b,241 5576 ld c,250 5577 ld l,(ix+MonsterAmount)5578 ld h,(ix+MonsterAmount+1)5579 call SetNumber16BitCastleSetWithKWhenAbove999SkipIfAmountIs055805582 ld a,(PutLetter+dx) 5583sub 24055845585 ld (PutMonsterAmountOnBattleField+nx),a5587 5591 ld a,(ix+MonsterNX)5592 sub a,165593 srl a 5594 add a,(ix+MonsterX)5595 ld (PutMonsterAmountOnBattleField+dx),a5597 ld a,(ix+MonsterY)55985601 ld (PutMonsterAmountOnBattleField+dy),a5603 ld a,(activepage)5604 xor 15605 ld (PutMonsterAmountOnBattleField+spage),a5606 ld (PutMonsterAmountOnBattleField+dpage),a5607 ld (SmoothCornerPutMonsterAmount+spage),a5608 ld (SmoothCornerPutMonsterAmount+dpage),a5610 ld a,(PutLetter+dx) 5611 dec a5612 ld (SmoothCornerPutMonsterAmount+dx),a5613 5614 ld hl,SmoothCornerPutMonsterAmount5615 call docopy 5617 ld hl,PutMonsterAmountOnBattleField5618 jp docopy 5620ClearAmountUnderMonster:5621 5625 ld a,165626 ld (ClearMonsterAmountOnBattleField+nx),a5627 5628 ld a,(ix+MonsterNX)5629 sub a,165630 srl a 5631 add a,(ix+MonsterX)5632 ld (ClearMonsterAmountOnBattleField+sx),a5633 ld (ClearMonsterAmountOnBattleField+dx),a5635 ld a,(ix+MonsterY)5636 ld (ClearMonsterAmountOnBattleField+sy),a 5637 ld (ClearMonsterAmountOnBattleField+dy),a 56395640 ld a,(activepage)5641 xor 15642 ld (ClearMonsterAmountOnBattleField+dpage),a5643 5644 ld a,3 5645 ld (ClearMonsterAmountOnBattleField+spage),a5647 ld hl,ClearMonsterAmountOnBattleField5648 call docopy 56505651 xor a5652 ld (RepairAmountAboveMonster?),a 5653 call RecoverOverwrittenMonstersSkipMonster05654 ld a,15655 ld (RepairAmountAboveMonster?),a 56575658 ld a,(activepage)5659 ld (ClearMonsterAmountOnBattleField+dpage),a5660 xor 15661 ld (ClearMonsterAmountOnBattleField+spage),a5663 ld hl,ClearMonsterAmountOnBattleField5664 call docopy 5665 56665667 ld a,25668 ld (ClearMonsterAmountOnBattleField+dpage),a5670 ld hl,ClearMonsterAmountOnBattleField5671 call docopy56735674 ld a,25675 ld (ClearMonsterAmountOnBattleField+spage),a5676 ld a,(activepage)5677 xor 15678 ld (ClearMonsterAmountOnBattleField+dpage),a5679 ld a,(ix+MonsterY)5680 ld (ClearMonsterAmountOnBattleField+sy),a5681 ld (ClearMonsterAmountOnBattleField+dy),a5682 ld a,(ix+MonsterX)5683 ld (ClearMonsterAmountOnBattleField+sx),a5684 ld (ClearMonsterAmountOnBattleField+dx),a5685 ld a,(ix+MonsterNY)5686 ld (ClearMonsterAmountOnBattleField+ny),a5687 ld a,(ix+MonsterNX)5688 ld (ClearMonsterAmountOnBattleField+nx),a5689 ld hl,ClearMonsterAmountOnBattleField5690 call docopy5692 ld a,75693 ld (ClearMonsterAmountOnBattleField+ny),a5694 ld a,2405695 ld (ClearMonsterAmountOnBattleField+sx),a5696 ld a,2495697 ld (ClearMonsterAmountOnBattleField+sy),a 5698 ret5700SetAmountUnderMonsterIn3Pages:5701 ld hl,(AmountMonsterBeforeBeingAttacked)5702 ld e,(ix+MonsterAmount)5703 ld d,(ix+MonsterAmount+1)5704 call CompareHLwithDE5705 ret z 5706 5707 ld ix,(MonsterThatIsBeingAttacked)5708 call ClearAmountUnderMonster5710 ld ix,(MonsterThatIsBeingAttacked)5711 call SetAmountUnderMonster5713 ld a,(activepage)5714 ld (PutMonsterAmountOnBattleField+dpage),a5715 ld hl,PutMonsterAmountOnBattleField5716 call docopy 5717 5718 ld a,25719 ld (PutMonsterAmountOnBattleField+dpage),a5720 ld hl,PutMonsterAmountOnBattleField5721 jp docopy 5722 5723Recover:5724 5725 push ix5726 pop hl5727 ld de,Monster05728 call CompareHLwithDE5729 jp z,RecoverOverwrittenMonstersHard5730 jp RecoverOverwrittenMonsters 5731 5732SortMonstersFromHighToLow:5733 push ix5734 ld c,TotalAmountOfMonstersOnBattleField-1-1 5735 call sortloop5736 pop ix5737 ret5739sortloop:5740 ld iy, OrderOfMonstersFromHighToLow + 2 5741 ld b,c 5743 .innerloop:5744 ld l,(iy)5745 ld h,(iy+1) 5746 push hl5747 pop ix5748 ld a,(ix+MonsterY)5749 add a,(ix+MonsterNY)5750 ld e,a 5752 ld l,(iy+2)5753 ld h,(iy+3) 5754 push hl5755 pop ix5756 ld a,(ix+MonsterY)5757 add a,(ix+MonsterNY)5759 cp e 5760 jr nc,.noswap 5762 5764 ld l,(iy)5765 ld h,(iy+1) 5766 ld e,(iy+2)5767 ld d,(iy+3) 5769 ld (iy),e5770 ld (iy+1),d 5771 ld (iy+2),l5772 ld (iy+3),h 5773 .noswap:5775 inc iy 5776 inc iy 5777 djnz .innerloop 5779 5780 dec c5781 jr nz,sortloop 5782 ret57835785CheckSpaceToMoveMonster:57865790 ld a,(NewPrContr)5791 bit 4,a5792 ret z5794 xor a5795 ld (BrokenArrow?),a5797 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5798 ld de,CursorBootsOld5799 call CompareHLwithDE5800 ld c,EndMovement 5801 jp z,.BootsFoundSetMovementPath5803 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5804 ld de,CursorSwordRight5805 call CompareHLwithDE5806 jp z,.SwordRightFoundSetMovementPath5808 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5809 ld de,CursorSwordLeft5810 call CompareHLwithDE5811 jp z,.SwordLeftFoundSetMovementPath5813 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5814 ld de,CursorSwordLeftUp5815 call CompareHLwithDE5816 jp z,.SwordLeftUpFoundSetMovementPath 5818 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5819 ld de,CursorSwordLeftDown5820 call CompareHLwithDE5821 jp z,.SwordLeftDownFoundSetMovementPath5823 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5824 ld de,CursorSwordRightUp5825 call CompareHLwithDE5826 jp z,.SwordRightUpFoundSetMovementPath5828 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5829 ld de,CursorSwordRightDown5830 call CompareHLwithDE5831 jp z,.SwordRightDownFoundSetMovementPath 5833 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5834 ld de,CursorBowAndArrow5835 call CompareHLwithDE5836 jp z,.BowAndArrowFoundSetMovementPath5838 ld hl,(setspritecharacter.SelfModifyingCodeSpriteCharacterBattle)5839 ld de,CursorBrokenArrow5840 call CompareHLwithDE5841 ret nz5843 .BrokenArrowFoundSetMovementPath:5844 ld a,15845 ld (BrokenArrow?),a5846 .BowAndArrowFoundSetMovementPath: 5847 call SetCurrentActiveMOnsterInIX5848 ld a,(ix+MonsterX)5849 ld iy,(MonsterThatIsBeingAttacked)5850 cp (iy+MonsterX)5851 ld c,013 5852 jr c,.DirectionFound5853 ld c,017 5854 .DirectionFound:5855 ld a,15856 ld (MoVeMonster?),a 5857 xor a5858 ld (MonsterAnimationSpeed),a5859 ld (MonsterAnimationStep),a5860 ld iy,MonsterMovementPath5861 ld (iy),c 5863 push iy5864 push bc5865 ld bc,SFX_ButtonClicked5866 call RePlayerSFX_PlayCh15867 pop bc5868 pop iy 5869 ret5871 .SwordLeftUpFoundSetMovementPath:5872 call FindCursorInBattleFieldGrid 5873 inc hl5874 ld de,LenghtBattleField5875 add hl,de5876 ld c,018 5877 jr .CursorLocationSet5879 .SwordLeftDownFoundSetMovementPath:5880 call FindCursorInBattleFieldGrid 5881 inc hl5882 ld de,LenghtBattleField5883 or a5884 sbc hl,de5885 ld c,016 5886 jr .CursorLocationSet5888 .SwordRightUpFoundSetMovementPath:5889 call FindCursorInBattleFieldGrid 5890 dec hl5891 ld de,LenghtBattleField5892 add hl,de5893 ld c,012 5894 jr .CursorLocationSet5896 .SwordRightDownFoundSetMovementPath:5897 call FindCursorInBattleFieldGrid 5898 dec hl5899 ld de,LenghtBattleField5900 or a5901 sbc hl,de5902 ld c,014 5903 jr .CursorLocationSet5905 .SwordLeftFoundSetMovementPath:5906 call FindCursorInBattleFieldGrid 5907 inc hl5908 inc hl5909 ld c,017 5910 jr .CursorLocationSet5912 .SwordRightFoundSetMovementPath:5913 call FindCursorInBattleFieldGrid 5914 dec hl5915 dec hl5917 call SetCurrentActiveMOnsterInIX5918 ld a,(ix+MonsterNX)5919 cp 175920 jp c,.SwordRightFound5921 dec hl5922 dec hl5923 cp 335924 jp c,.SwordRightFound5925 dec hl5926 dec hl5927 cp 575928 jp c,.SwordRightFound5929 dec hl5930 dec hl5931 .SwordRightFound:5933 ld c,013 5934 jr .CursorLocationSet5936 .BootsFoundSetMovementPath:5937 call FindCursorInBattleFieldGrid 5938 .CursorLocationSet:5940 ld a,15941 ld (MoVeMonster?),a 5942 xor a5943 ld (MonsterAnimationSpeed),a5944 ld (MonsterAnimationStep),a5946 push iy5947 push bc5948 ld bc,SFX_ButtonClicked5949 call RePlayerSFX_PlayCh15950 pop bc5951 pop iy5953 5954 ld a,(hl) 5955 cp 15956 jr nz,.EndCheckActiveMonsterIsOnThisTile5957 ld iy,MonsterMovementPath5958 ld (iy),c 5959 ret5960 .EndCheckActiveMonsterIsOnThisTile:5963 ld a,(hl) 5964 dec a5966 ld iy,MonsterMovementPath5967 ld d,05968 ld e,a5969 add iy,de5970 ld (iy),c 5971 .loop:5972 call SearchForTileNumberA 5973 5974 dec iy5975 ld (iy),b5976 dec a5977 jr nz,.loop5978 5979 SearchForTileNumberA:5980 ld de,LenghtBattleField5981 5982 dec hl5983 dec hl5984 cp (hl)5985 jr z,.Right5987 5988 inc hl5989 inc hl5990 inc hl5991 inc hl5992 cp (hl)5993 jr z,.Left5995 5996 dec hl5997 dec hl5998 dec hl5999 or a6000 sbc hl,de6001 cp (hl)6002 jr z,.RightDown6004 6005 inc hl6006 inc hl6007 cp (hl)6008 jr z,.LeftDown6010 6011 add hl,de6012 add hl,de6013 cp (hl)6014 jr z,.LeftUp6016 6017 dec hl6018 dec hl6019 cp (hl)6020 jr z,.RightUp6022 .RightUp:6023 ld b,26024 ret6026 .LeftUp:6027 ld b,86028 ret6029 6030 .LeftDown:6031 ld b,66032 ret6034 .RightDown:6035 ld b,46036 ret6038 .Left:6039 ld b,76040 ret6042 .Right:6043 ld b,36044 ret6045 6046CheckSwitchToNextMonster:6047 ld a,(SwitchToNextMonster?)6048 or a6049 ret z6050 inc a6051 ld (SwitchToNextMonster?),a6052 cp 3 6053 ld a,06054 ld (MonsterAnimationSpeed),a6055 ld (MonsterAnimationStep),a6056 ret c6057 xor a6058 ld (SwitchToNextMonster?),a6060 call EndSpellSelected6061 call SetCurrentActiveMOnsterInIX6062 call Set255WhereMonsterStandsInBattleFieldGrid6064 6065 ld a,(activepage)6066 ld (TransparantImageBattleRecoverySprite+sPage),a6067 ld a,26068 ld (TransparantImageBattleRecoverySprite+dPage),a 6069 ld a,(ix+MonsterY)6070 ld (TransparantImageBattleRecoverySprite+sy),a 6071 ld (TransparantImageBattleRecoverySprite+dy),a 6072 ld a,(ix+MonsterX)6073 ld (TransparantImageBattleRecoverySprite+sx),a6074 ld (TransparantImageBattleRecoverySprite+dx),a6075 ld a,(ix+MonsterNY)6076 60776078 6079 ld (TransparantImageBattleRecoverySprite+ny),a6080 ld a,(ix+MonsterNX)6081 ld (TransparantImageBattleRecoverySprite+nx),a6083 ld hl,TransparantImageBattleRecoverySprite6084 call docopy60866089 .GoToNextActiveMonster:6090 ld a,(HandleRetaliation?)6091 or a6092 jr z,.EndHandleRetaliation6094 ld iy,(MonsterThatIsBeingAttacked)6095 ld (MonsterThatIsBeingAttacked),ix 6096 ld a,(ix+MonsterX)6097 ld (MonsterThatIsBeingAttackedX),a6098 ld a,(ix+MonsterNX)6099 ld (MonsterThatIsBeingAttackedNX),a6100 ld a,(ix+MonsterY)6101 ld (MonsterThatIsBeingAttackedY),a6102 ld a,(ix+MonsterNY)6103 ld (MonsterThatIsBeingAttackedNY),a6104 6105 call SetMonsterInIYAsActiveMonsterAndSetInIX6107 ld a,16108 ld (MoVeMonster?),a 6109 xor a6110 ld (MonsterAnimationSpeed),a6111 ld (MonsterAnimationStep),a6113 ld a,(ActiveMonsterAttackingDirection)6114 cp 12 6115 ld c,16 6116 jr z,.SetCounterAttackdirection6117 cp 13 6118 ld c,17 6119 jr z,.SetCounterAttackdirection6120 cp 14 6121 ld c,18 6122 jr z,.SetCounterAttackdirection6123 cp 16 6124 ld c,12 6125 jr z,.SetCounterAttackdirection6126 cp 17 6127 ld c,13 6128 jr z,.SetCounterAttackdirection6129 cp 18 6130 ld c,14 6131 jr z,.SetCounterAttackdirection6133 .SetCounterAttackdirection:6134 ld iy,MonsterMovementPath6135 ld (iy),c 6136 jr .EndFindNextActiveMonster6137 .EndHandleRetaliation:6138 call FindNextActiveMonster 6139 .EndFindNextActiveMonster:6141 6144 ld a,(activepage)6145 xor 16146 ld (EraseMonster+dPage),a6147 ld a,36148 ld (EraseMonster+sPage),a6149 6150 ld a,(ix+MonsterYPrevious)6151 ld (EraseMonster+sy),a 6152 ld (EraseMonster+dy),a6154 ld a,(ix+MonsterXPrevious)6155 ld (EraseMonster+dx),a6156 ld (EraseMonster+sx),a6158 ld a,(ix+MonsterNXPrevious)6159 ld (EraseMonster+nx),a6160 ld a,(ix+MonsterNYPrevious)6161 61626163 6164 ld (EraseMonster+ny),a6166 ld hl,EraseMonster6167 call docopy6169 6170 call RecoverOverwrittenMonstersSkipMonster06172 6173 ld a,(activepage)6174 xor 16175 ld (EraseMonster+sPage),a6176 ld a,26177 ld (EraseMonster+dPage),a6178 6179 ld hl,EraseMonster6180 call docopy6182 ld a,26183 ld (EraseMonster+sPage),a6185 ld a,(HandleRetaliation?)6186 or a6187 ret nz6191 6192 ld hl,(HeroThatGetsAttacked) 6193 ld a,l6194 or h6195 jp z,.EndDisableSurrenderAndRetreatButton 6197 ld hl,.RetreatButtonActive6198 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6199 ld bc,76200 ldir6202 ld hl,.SurrenderButtonActive6203 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6204 ld bc,76205 ldir6207 call SetCurrentActiveMOnsterInIX6208 6209 push ix6210 pop hl 6211 ld de,Monster76212 call CompareHLwithDE 6213 ld ix,(plxcurrentheroAddress) 6214 jr c,.HeroFound26215 ld ix,(HeroThatGetsAttacked) 6216 push ix6217 pop hl6218 ld a,l6219 or h6220 jp z,.EndDisableSurrenderAndRetreatButton 6221 .HeroFound2:6223 ld a,(ix+HeroStatus) 6224 cp 26225 jr z,.NotPossibleToRetreatOrSurrender6226 cp 2546227 jr z,.NotPossibleToRetreatOrSurrender6229 6230 ld a,(CurrentActiveMonster) 6231 cp 76232 ld a,(whichplayernowplaying?) 6233 jr c,.ActivePlayerFound6234 ld a,(PlayerThatGetsAttacked)6235 .ActivePlayerFound:6236 ld b,a6237 ld a,(Castle1+CastlePlayer)6238 cp b6239 jr z,.EndDisableSurrenderAndRetreatButton 6240 ld a,(Castle2+CastlePlayer)6241 cp b6242 jr z,.EndDisableSurrenderAndRetreatButton 6243 ld a,(Castle3+CastlePlayer)6244 cp b6245 jr z,.EndDisableSurrenderAndRetreatButton 6246 ld a,(Castle4+CastlePlayer)6247 cp b6248 jr z,.EndDisableSurrenderAndRetreatButton 6250 .NotPossibleToRetreatOrSurrender: 6251 ld hl,.RetreatButtonGrey6252 ld de,GenericButtonTable + (1*GenericButtonTableLenghtPerButton)6253 ld bc,76254 ldir6256 ld hl,.SurrenderButtonGrey6257 ld de,GenericButtonTable + (2*GenericButtonTableLenghtPerButton)6258 ld bc,76259 ldir6260 .EndDisableSurrenderAndRetreatButton:6264 6265 ld hl,.WaitButtonActive6266 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6267 ld bc,76268 ldir6270 call SetCurrentActiveMOnsterInIX6271 ld a,(ix+MonsterStatus) 6272 and %0111 11116273 cp 1 6274 jr nz,.EndCheckWaitButton6276 ld hl,.WaitButtonGrey6277 ld de,GenericButtonTable + (3*GenericButtonTableLenghtPerButton)6278 ld bc,76279 ldir6280 .EndCheckWaitButton:6281 6282 6283 ld hl,.SpellBookButtonActive6284 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6285 ld bc,76286 ldir6288 6289 push ix6290 pop hl 6291 ld de,Monster76292 call CompareHLwithDE 6293 ld a,(LeftPlayerAlreadyCastSpellThisRound?)6294 jr c,.HeroFound6295 ld a,(RightPlayerAlreadyCastSpellThisRound?)6296 .HeroFound:6297 or a6298 ret z6300 ld hl,.SpellBookButtonGrey6301 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)6302 ld bc,76303 ldir6304 ret6306.RetreatButtonGrey:6307 db %1100 0011 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 128 | dw $4000 + (110*128) + (160/2) - 1286308.RetreatButtonActive:6309 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 1286311.SurrenderButtonGrey:6312 db %1100 0011 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 128 | dw $4000 + (110*128) + (178/2) - 1286313.SurrenderButtonActive:6314 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 1286319.SpellBookButtonGrey:6320 db %1100 0011 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 128 | dw $4000 + (090*128) + (214/2) - 1286321.SpellBookButtonActive:6322 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 6324.WaitButtonGrey:6325 db %1100 0011 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 128 | dw $4000 + (072*128) + (178/2) - 1286326.WaitButtonActive:6327 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 1286328 6329 6330FindNextActiveMonster:6331 call SortMonstersOnTheirSpeed63336336 ld ix,MonstersSortedOnSpeed.LastMonster6337 ld b,TotalAmountOfMonstersOnBattleField - 1 6339 .LoopUp:6340 ld l,(ix)6341 ld h,(ix+1)6342 6343 push hl6344 pop iy 6345 ld a,(iy+MonsterHP)6346 or a6347 jr z,.FindNext6350 push ix6351 push iy6352 pop ix6353 push bc6354 ld b,hypnosisSpellNumber 6355 call CheckPresenceStatusEffect 6356 pop bc6357 pop ix6358 jr z,.FindNext6361 ld a,(iy+MonsterStatus) 6362 and %0111 1111 6363 jr z,.MonsterFound6365 .FindNext:6366 dec ix6367 dec ix6368 djnz .LoopUp6370 6371 inc ix6372 inc ix6373 ld b,TotalAmountOfMonstersOnBattleField - 1 6375 .LoopDown:6376 ld l,(ix)6377 ld h,(ix+1)6378 6379 push hl6380 pop iy 6381 ld a,(iy+MonsterHP)6382 or a6383 jr z,.FindNext26384 ld a,(iy+MonsterStatus) 6385 and %0111 11116386 cp 1 6387 jr z,.MonsterFound6389 .FindNext2:6390 inc ix6391 inc ix6392 djnz .LoopDown6394 6396 call ReduceDurationStatusEffectsMonsters6398 ld a,MonsterStatusEnabled6399 ld (Monster1+MonsterStatus),a6400 ld (Monster2+MonsterStatus),a6401 ld (Monster3+MonsterStatus),a6402 ld (Monster4+MonsterStatus),a6403 ld (Monster5+MonsterStatus),a6404 ld (Monster6+MonsterStatus),a6405 ld (Monster7+MonsterStatus),a6406 ld (Monster8+MonsterStatus),a6407 ld (Monster9+MonsterStatus),a6408 ld (Monster10+MonsterStatus),a6409 ld (Monster11+MonsterStatus),a6410 ld (Monster12+MonsterStatus),a6411 xor a6412 ld (LeftPlayerAlreadyCastSpellThisRound?),a6413 ld (RightPlayerAlreadyCastSpellThisRound?),a6414 ld a,5 6415 ld (BattleTextQ),a6416 ld a,26417 ld (SetBattleText?),a 6418 ld a,(BattleRound)6419 inc a6420 ld (BattleRound),a6421 ld (BattleTextQ+1),a6422 jp FindNextActiveMonster6424 .MonsterFound:6425 SetMonsterInIYAsActiveMonsterAndSetInIX:6426 6427 push iy6428 pop de 6429 6430 ld hl,Monster1 | call CompareHLwithDE | ld a,01 | jr z,.CurrentActiveMonsterFound6431 ld hl,Monster2 | call CompareHLwithDE | ld a,02 | jr z,.CurrentActiveMonsterFound6432 ld hl,Monster3 | call CompareHLwithDE | ld a,03 | jr z,.CurrentActiveMonsterFound6433 ld hl,Monster4 | call CompareHLwithDE | ld a,04 | jr z,.CurrentActiveMonsterFound6434 ld hl,Monster5 | call CompareHLwithDE | ld a,05 | jr z,.CurrentActiveMonsterFound6435 ld hl,Monster6 | call CompareHLwithDE | ld a,06 | jr z,.CurrentActiveMonsterFound6436 ld hl,Monster7 | call CompareHLwithDE | ld a,07 | jr z,.CurrentActiveMonsterFound6437 ld hl,Monster8 | call CompareHLwithDE | ld a,08 | jr z,.CurrentActiveMonsterFound6438 ld hl,Monster9 | call CompareHLwithDE | ld a,09 | jr z,.CurrentActiveMonsterFound6439 ld hl,Monster10 | call CompareHLwithDE | ld a,10 | jr z,.CurrentActiveMonsterFound6440 ld hl,Monster11 | call CompareHLwithDE | ld a,11 | jr z,.CurrentActiveMonsterFound6441 ld hl,Monster12 | call CompareHLwithDE | ld a,12 | jr z,.CurrentActiveMonsterFound6443 .CurrentActiveMonsterFound:6445 6452 ld (CurrentActiveMonster),a6454 ld a,16455 ld (SetMonsterInBattleFieldGrid?),a6456 call SetCurrentActiveMOnsterInIX64586461 ret6462 6463 6464RecoverOverwrittenMonstersHard:6465 exx6466 ld hl,OrderOfMonstersFromHighToLow6467 ld b,TotalAmountOfMonstersOnBattleField6469 .loop:6470 ld e,(hl)6471 inc hl6472 ld d,(hl)6473 inc hl6474 push de6475 pop iy 6476 6477 exx6478 call RecoverOverwrittenMonsters.GoRecoverHard6479 exx6480 djnz .loop6481 ret6483RecoverOverwrittenMonstersSkipMonster0:6484 exx6485 ld hl,OrderOfMonstersFromHighToLow + 26486 ld b,TotalAmountOfMonstersOnBattleField - 1 6488 .loop:6489 ld e,(hl)6490 inc hl6491 ld d,(hl)6492 inc hl6493 push de6494 pop iy 6495 6496 exx6497 call RecoverOverwrittenMonsters.GoRecoverHard6498 exx6499 djnz .loop6500 ret6502RecoverOverwrittenMonsters:6503 exx6504 ld hl,OrderOfMonstersFromHighToLow + 26505 ld b,TotalAmountOfMonstersOnBattleField - 1 6507 .loop:6508 ld e,(hl)6509 inc hl6510 ld d,(hl)6511 inc hl6512 push de6513 pop iy 6514 6515 exx6516 call .GoRecover6517 exx6518 djnz .loop6519 ret6521 .GoRecover:6522 6523 ld a,(iy+MonsterY) 6524 add a,(iy+MonsterNY)6525 ld b,a6526 ld a,(ix+MonsterY) 6527 add a,(ix+MonsterNY) 6528 cp b6529 ret nc6530 .GoRecoverHard:6532 6533 push ix6534 pop hl6535 push iy6536 pop de6537 call CompareHLwithDE6538 ret z6540 6542 ld a,(ix+MonsterX) 6543 add a,(ix+MonsterNX)6544 sub (iy+MonsterX) 6545 ret c6546 ret z6548 6549 ld a,(iy+MonsterX) 6550 add a,(iy+MonsterNX)6551 sub (ix+MonsterX) 6552 ret c6553 ret z6555 6556 ld a,(ix+MonsterY) 6557 add a,(ix+MonsterNY)6558 sub (iy+MonsterY) 6559 ret c6560 ret z6562 6563 ld a,(iy+MonsterY) 6564 add a,(iy+MonsterNY)6565 sub (ix+MonsterY) 6566 ret c6567 ret z65696571 6572 ld a,(ix+MonsterX) 6573 add a,(ix+MonsterNX)6574 sub (iy+MonsterX) 6575 cp (ix+MonsterNX)6576 jr c,.NXFoundLeft6578 6579 ld a,(iy+MonsterX) 6580 add a,(iy+MonsterNX)6581 sub (ix+MonsterX) 6582 cp (ix+MonsterNX)6583 jr c,.NXFoundRight6585 .NXFoundMiddle:6586 ld a,(ix+MonsterNX) 6587 cp (iy+MonsterNX)6588 jr c,.go46589 jr z,.go46590 ld a,(iy+MonsterNX)6591 .go4:6592 srl a 6593 ld c,a 6594 ld a,(ix+MonsterX) 6595 sub (iy+MonsterX) 6596 srl a 6597 ld e,a 6598 jr .NxSet6600 .NXFoundRight:6601 srl a 6602 ld c,a 6603 ld a,(iy+MonsterNX) 6604 srl a 6605 sub a,c 6606 ld e,a 6607 jr .NxSet6609 .NXFoundLeft:6610 cp (iy+MonsterNX)6611 jr c,.go6612 jr z,.go6613 ld a,(iy+MonsterNX)6614 .go: 6615 srl a 6616 ld c,a 6617 ld e,00/2 6618 .NxSet:6620 6621 ld a,(ix+MonsterY) 6622 add a,(ix+MonsterNY)6623 sub (iy+MonsterY) 6624 cp (ix+MonsterNY)6625 jr c,.NYFoundTop6627 6628 ld a,(iy+MonsterY) 6629 add a,(iy+MonsterNY)6630 sub (ix+MonsterY) 6631 cp (ix+MonsterNY)6632 jr c,.NYFoundBottom6634 .NYFoundMiddle:6635 ld a,(ix+MonsterNY) 6636 cp (iy+MonsterNY)6637 jr c,.go56638 jr z,.go56639 ld a,(iy+MonsterNY)66406641 .go5:6643 66446645 ld b,a 6647 ld a,(ix+MonsterY) 6648 sub (iy+MonsterY) 6649 srl a 6650 ld d,a 6651 jr .NYSet6653 .NYFoundBottom:6654 ld b,a 6655 ld a,(iy+MonsterNY) 6656 sub a,b 6657 srl a 6658 ld d,a 6659 jr .NYSet6661 .NYFoundTop:6662 cp (iy+MonsterNY)6663 jr c,.go26664 jr z,.go26665 ld a,(iy+MonsterNY)6666 .go2:6667 ld b,a 6668 ld d,00/2 6671 .NYSet:66756678 667966866688 ld l,(iy+MonsterSYSX+0) 6689 ld h,(iy+MonsterSYSX+1) 6693 6694 ld a,l 6695 add a,e 6696 ld l,a6698 6699 ld a,h 6700 add a,d 6701 ld h,a6703 ld a,(iy+MonsterBlock+0) 6705 ld (AddressToWriteFrom),hl6706 ld (NXAndNY),bc6707 ld (BlockToReadFrom),a6709 ld a,(activepage)6710 xor 16711 ld (TransparantImageBattle+dPage),a6713 ld a,(iy+MonsterY)6714 6715 add a,d 6716 add a,d6717 6718 ld (TransparantImageBattle+dy),a 6719 ld a,(iy+MonsterX)6721 add a,e 6722 add a,e6724 ld (TransparantImageBattle+dx),a6726 ld bc,(NXAndNY)6727 ld a,c6728 add a,a6729 ld (TransparantImageBattle+nx),a6730 ld a,b6731 ld (TransparantImageBattle+ny),a6732 ld a,1886733 ld (TransparantImageBattle+sy),a 6735 ld a,(TransparantImageBattle+sx)6736 add a,64 6737 ld (TransparantImageBattle+sx),a6738 ld de,$8000 + (188*128) + (000/2) - 128 6739 jr z,.DestinationAddressInPage3Set6740 sub a,646741 ld de,$8000 + (188*128) + (064/2) - 128 6742 jr z,.DestinationAddressInPage3Set6743 sub a,646744 ld de,$8000 + (188*128) + (128/2) - 128 6745 jr z,.DestinationAddressInPage3Set6746 sub a,646747 ld de,$8000 + (188*128) + (192/2) - 128 6748 .DestinationAddressInPage3Set:6749 ld (AddressToWriteTo),de 6751 call CopyRamToVramPage3ForBattleEngine 6753 ld a,(RepairAmountAboveMonster?)6754 or a6755 jr z,.EndRepairAmountAboveMonster6757 6758 push ix6759 pop hl6760 ld de,Monster06761 call CompareHLwithDE6762 push ix6763 push iy6764 pop ix6765 call nz,SetAmountUnderMonster6766 pop ix6767 6769 .EndRepairAmountAboveMonster:6771 ld hl,TransparantImageBattle6772 jp docopy6774 6780PutMonster:6781 ld a,(activepage)6782 xor 16783 ld (TransparantImageBattle+dPage),a6785 ld a,(ix+MonsterY)6786 ld (TransparantImageBattle+dy),a 6787 ld a,(ix+MonsterX)6788 ld (TransparantImageBattle+dx),a6790 ld bc,(NXAndNY)6791 ld a,c6792 add a,a6793 ld (TransparantImageBattle+nx),a6794 ld a,b6795 ld (TransparantImageBattle+ny),a6796 ld a,1886797 ld (TransparantImageBattle+sy),a 6799 ld a,(TransparantImageBattle+sx)6800 add a,64 6801 ld (TransparantImageBattle+sx),a6802 ld de,$8000 + (188*128) + (000/2) - 128 6803 jr z,.DestinationAddressInPage3Set6804 sub a,646805 ld de,$8000 + (188*128) + (064/2) - 128 6806 jr z,.DestinationAddressInPage3Set6807 sub a,646808 ld de,$8000 + (188*128) + (128/2) - 128 6809 jr z,.DestinationAddressInPage3Set6810 sub a,646811 ld de,$8000 + (188*128) + (192/2) - 128 6812 .DestinationAddressInPage3Set:6813 ld (AddressToWriteTo),de 6815 call CopyRamToVramPage3ForBattleEngine 6817 ld hl,TransparantImageBattle6818 jp docopy6820 6825StoreSYSXNYNXAndBlock:6826 ld l,(ix+MonsterSYSX+0) 6827 ld h,(ix+MonsterSYSX+1) 68296830 ld a,(ix+MonsterNX) 6831 srl a6832 ld c,a68346835 ld b,(ix+MonsterNY)6836 6837 ld a,(ix+MonsterBlock+0) 6838 ld (AddressToWriteFrom),hl6839 ld (NXAndNY),bc6840 ld (BlockToReadFrom),a6841 ret6855SetCurrentMonsterInBattleFieldGrid: 6856 ld a,(SetMonsterInBattleFieldGrid?)6857 dec a6858 ret m6859 ld (SetMonsterInBattleFieldGrid?),a6861 call ClearBattleFieldGrid 6862 call SetCurrentActiveMOnsterInIX6863 call FindMonsterInBattleFieldGrid 6864 call Set001AtCurrentMonstersLocation6865 call Set254TilesWHereMonsterCantMoveToDueToItsNX6866 call SetAllNumbersInGrid6867 jp FillRemaining000sWith254 6869FillRemaining000sWith254: 6870 ld a,0006871 ld hl,BattleFieldGrid-16872 ld b,LenghtBattleField*HeightBattleField6873 .loop:6874 inc hl6875 cp a,(hl)6876 jr z,.SetTo2546877 djnz .loop6878 ret6879 .SetTo254:6880 ld (hl),2546881 djnz .loop 6882 ret6884Set001AtCurrentMonstersLocation:6885 6886 ld a,(ix+MonsterNX)6887 ld (hl),001 6888 cp 1768896890 ret c6891 6892 inc hl6893 inc hl6894 ld (hl),000 6895 cp 336896 ret c68976898 inc hl6899 inc hl6900 ld (hl),000 6901 cp 5769026903 ret c6904 inc hl6905 inc hl6906 ld (hl),000 6908 ret6910ClearBattleFieldGrid:6911 ld a,2556912 ld hl,BattleFieldGrid-16913 ld b,LenghtBattleField*HeightBattleField6914 .loop:6915 inc hl6916 cp a,(hl)6917 jr nz,.SetTo0006918 djnz .loop6919 ret6920 .SetTo000:6921 ld (hl),0006922 djnz .loop 6923 ret6925Set254TilesWHereMonsterCantMoveToDueToItsNX:69266929 ld b,LenghtBattleField*HeightBattleField - 36930 ld hl,BattleFieldGrid+36931 .loop:6932 ld a,(hl)6933 cp 2556934 call z,.Found2556935 inc hl6936 djnz .loop6937 ret6938 6939 .Found255:6940 ld a,(ix+MonsterNX)6941 cp 17 6942 ret c6944 6945 dec hl6946 dec hl6947 ld a,(hl)6948 or a6949 jr nz,.EndCheck06950 ld (hl),2546951 .EndCheck0:6952 inc hl6953 inc hl6955 ld a,(ix+MonsterNX)6956 cp 33 6957 ret c6959 6960 dec hl6961 dec hl6962 dec hl6963 dec hl6964 ld a,(hl)6965 or a6966 jr nz,.EndCheck0b6967 ld (hl),2546968 .EndCheck0b:6969 inc hl6970 inc hl6971 inc hl6972 inc hl6974 ld a,(ix+MonsterNX)6975 cp 57 6976 ret c 6978 6979 dec hl6980 dec hl6981 dec hl6982 dec hl6983 dec hl6984 dec hl6985 ld a,(hl)6986 or a6987 jr nz,.EndCheck0c6988 ld (hl),2546989 .EndCheck0c:6990 inc hl6991 inc hl6992 inc hl6993 inc hl6994 inc hl6995 inc hl6996 ret6998SetAllNumbersInGrid:6999 ld e,000 7000 ld a,001 7001 ld b,17 7002 ex af,af'7004 .loop:7005 ex af,af'7006 inc e 7007 inc a 7008 ex af,af'7010 exx7011 call .GoNextNumber7012 exx7013 djnz .loop7014 ret7016.GoNextNumber:7017 ld b,-1 7018 ld c,0 7019 ld d,07021 .MainLoop:7022 call .GoCheckNextPosition70237025 ld hl,BattleFieldGrid7026 ld e,b7027 add hl,de7028 ld e,c7029 add hl,de 7031 ld a,(hl)7032 exx7033 cp e 7034 exx7035 jp nz,.MainLoop7037 call .SetNumberIn6Directions 7038 jp .MainLoop7040.GoCheckNextPosition:7041 ld a,b 7042 inc a7043 ld b,a 7044 cp LenghtBattleField7045 ret nz7046 7047 ld b,0 7049 ld a,c 7050 add a,LenghtBattleField7051 ld c,a 7052 cp HeightBattleField*LenghtBattleField7053 ret nz7055 pop af7056 ret7057 7058.SetNumberIn6Directions:7059 7061 push bc7062 call .Direction17063 pop bc7064 7065 push bc7066 call .Direction27067 pop bc7068 7069 push bc7070 call .Direction37071 pop bc7072 7073 push bc7074 call .Direction47075 pop bc7076 7077 push bc7078 call .Direction57079 pop bc7080 7081 push bc7082 call .Direction67083 pop bc 7084 ret7086.SetnumberInHL:7087 ld a,c7088.SetnumberInHLHeightAlreadyInA:7089 add a,b7090 ld e,a7092 ld hl,BattleFieldGrid7093 add hl,de 7094 7095 ld a,(hl)7096 or a7097 ret nz7098 ex af,af'7099 ld (hl),a7100 ex af,af'7101 ret7103.Direction6: 7104 inc b 7105 ld a,b7106 cp LenghtBattleField7107 ret z7109 ld a,c7110 add a,LenghtBattleField7111 cp HeightBattleField*LenghtBattleField7112 ret z7113 jp .SetnumberInHLHeightAlreadyInA7115.Direction5: 7116 dec b 7117 ret m7119 ld a,c7120 add a,LenghtBattleField7121 cp HeightBattleField*LenghtBattleField7122 ret z7123 jp .SetnumberInHLHeightAlreadyInA7125.Direction4: 7126 inc b 7127 ld a,b7128 cp LenghtBattleField7129 ret z7130 inc b 7131 ld a,b7132 cp LenghtBattleField7133 ret z7134 jp .SetnumberInHL7136.Direction3: 7137 dec b 7138 ret m7139 dec b 7140 ret m7141 jp .SetnumberInHL7143.Direction2: 7144 inc b 7145 ld a,b7146 cp LenghtBattleField7147 ret z7148 7149 ld a,c7150 sub a,LenghtBattleField7151 ret c7152 jp .SetnumberInHLHeightAlreadyInA7154.Direction1: 7155 dec b 7156 ret m7158 ld a,c7159 sub a,LenghtBattleField7160 ret c7161 jp .SetnumberInHLHeightAlreadyInA7163FindMonsterInBattleFieldGrid:7164 ld hl,BattleFieldGrid7166 ld a,(ix+MonsterY)7167 sub 056 + 167168 add (ix+MonsterNY)7169 srl a 7170 srl a 7171 srl a 7172 srl a 7173 jr z,.SetX7174 7175 ld b,a7176 ld de,LenghtBattleField7177 .loop:7178 add hl,de7179 djnz .loop7180 7181 .SetX:7182 ld a,(ix+MonsterX)7183 sub a,127184 srl a 7185 srl a 7186 srl a 7187 ret z7189 ld d,07190 ld e,a7191 add hl,de7192 ret7194FindCursorInBattleFieldGrid: 7195 ld hl,BattleFieldGrid7197 ld a,(Monster0+MonsterY)7198 sub a,39 + 167199 srl a 7200 srl a 7201 srl a 7202 srl a 7203 jr z,.SetX7204 7205 ld b,a7206 ld de,LenghtBattleField7207 .loop:7208 add hl,de7209 djnz .loop7210 7211 .SetX:7212 ld a,(Monster0+MonsterX)7213 sub a,127214 srl a 7215 srl a 7216 srl a 7217 ret z7219 ld d,07220 ld e,a7221 add hl,de7222 ret7224CheckIsCursorOnATileThisFrame:7225 xor a7226 ld (IsCursorOnATileThisFrame?),a7228 ld a,(Monster0+MonsterY) 7229 cp 24 + 16 7230 ret c7231 cp 183 7232 ret nc72347235 ld a,(Monster0+MonsterX)7236 cp $047237 ret z7238 cp $fc7239 ret z72407241 cp $ec7242 ret z7243 cp $f47244 ret z7246 ld a,(spat+1)7247 cp $05 7248 ret c7249 cp $ec 7250 ret nc7251 7252 ld a,(Monster0+MonsterY)7253 sub a,39 + 167254 srl a 7255 srl a 7256 srl a 7257 srl a 7258 bit 0,a7259 jr nz,.EndCheckLeftExceptions7260 ld a,(spat+1)7261 cp $0b 7262 ret c7263 .EndCheckLeftExceptions:7264 7265 ld a,(Monster0+MonsterY)7266 sub a,39 + 167267 srl a 7268 srl a 7269 srl a 7270 srl a 7271 bit 0,a7272 jr z,.EndCheckRightExceptions7273 ld a,(spat+1)7274 cp $e6 7275 ret nc7276 .EndCheckRightExceptions:7278 ld a,17279 ld (IsCursorOnATileThisFrame?),a7280 ret7281 7282CheckWasCursorOnATilePreviousFrame:7283 xor a7284 ld (WasCursorOnATilePreviousFrame?),a7286 ld a,(Monster0+MonsterYPrevious)7287 cp 24 + 16 7288 ret c7289 cp 183 + 16 7290 ret nc7292 ld a,17293 ld (WasCursorOnATilePreviousFrame?),a7294 ret7296SetcursorWhenGridTileIsActive:7297 call .goSetCursorSprite7299 ld hl,(BufferCursorSpriteChar)7300 ld (setspritecharacter.SelfModifyingCodeSpriteCharacterBattle),hl7301 ld hl,(BufferCursorSpriteCol)7302 ld (setspritecharacter.SelfModifyingCodeSpriteColors),hl7303 ret7305 .goSetCursorSprite:7306 ld a,(IsCursorOnATileThisFrame?)7307 or a7308 jp z,.SetHand7310 ld a,(SpellSelected?)7311 or a7312 jp nz,SpellSelectedHandleCursor7313 73147315 call SetMonsterTableInIY 7316 call SetTotalMonsterSpeedInHL 7317 ld c,l7318 inc c 7319 inc c732173247327 call FindCursorInBattleFieldGrid7328 ld a,(hl)7329 cp 1 7330 jr z,.ProhibitionSign7331 cp c 7332 jr nc,.ProhibitionSign7335 ld a,(ix+MonsterNX)7336 cp 177337 jr c,.SetBoots7338 cp 337339 jr c,.MonsterIs2TilesWide7340 cp 577341 jr c,.MonsterIs3TilesWide7343 .MonsterIs4TilesWide:7344 inc hl7345 inc hl7346 ld a,(hl)7347 cp 2557348 jr z,.ProhibitionSign7349 inc hl7350 inc hl7351 ld a,(hl)7352 cp 2557353 jr z,.ProhibitionSign7354 inc hl7355 inc hl7356 ld a,(hl)7357 cp 2557358 jr z,.ProhibitionSign7359 jr .SetBoots7361 .MonsterIs3TilesWide:7362 inc hl7363 inc hl7364 ld a,(hl)7365 cp 2557366 jr z,.ProhibitionSign7367 inc hl7368 inc hl7369 ld a,(hl)7370 cp 2557371 jr z,.ProhibitionSign7372 jr .SetBoots7374 .MonsterIs2TilesWide:7375 inc hl7376 inc hl7377 ld a,(hl)7378 cp 2557379 jr z,.ProhibitionSign7380 jr .SetBoots7382 .ProhibitionSign:7383 call .CheckPointerOnEnemy7384 7385 ld hl,CursorProhibitionSign7386 ld (BufferCursorSpriteChar),hl7387 ld hl,SpriteProhibitionSignColor7388 ld (BufferCursorSpriteCol),hl7389 ret7390 7391 .SetBoots:7392 ld hl,CursorBootsOld7393 ld (BufferCursorSpriteChar),hl7394 ld hl,SpriteColCursorSprites7395 ld (BufferCursorSpriteCol),hl7396 ret7398 .SetHand:7399 ld hl,CursorHand7400 ld (BufferCursorSpriteChar),hl7401 ld hl,SpriteColCursorSprites7402 ld (BufferCursorSpriteCol),hl7403 ret7405 .CheckPointerOnEnemy:7406 ld a,(CurrentActiveMonster)7407 cp 77408 jr nc,.RightPlayerIsActive7410 .LeftPlayerIsActive:7411 ld ix,Monster77412 call .CheckMonster7413 ld ix,Monster87414 call .CheckMonster7415 ld ix,Monster97416 call .CheckMonster7417 ld ix,Monster107418 call .CheckMonster7419 ld ix,Monster117420 call .CheckMonster7421 ld ix,Monster127422 call .CheckMonster7423 ret7425 .RightPlayerIsActive:7426 ld ix,Monster17427 call .CheckMonster7428 ld ix,Monster27429 call .CheckMonster7430 ld ix,Monster37431 call .CheckMonster7432 ld ix,Monster47433 call .CheckMonster7434 ld ix,Monster57435 call .CheckMonster7436 ld ix,Monster67437 call .CheckMonster7438 ret7440 .CheckMonster:7448 call .Check1TileMonsterStandsOn 7449 7450 ld a,(ix+MonsterNX)7451 cp 177452 ret c7453 ld a,(Monster0+MonsterX)7454 ld c,a7455 ld a,(ix+MonsterX)7456 add a,167457 call .Check7459 7460 ld a,(ix+MonsterNX)7461 cp 337462 ret c7463 ld a,(Monster0+MonsterX)7464 ld c,a7465 ld a,(ix+MonsterX)7466 add a,327467 call .Check7469 7470 ld a,(ix+MonsterNX)7471 cp 577472 ret c7473 ld a,(Monster0+MonsterX)7474 ld c,a7475 ld a,(ix+MonsterX)7476 add a,487477 call .Check7478 ret7479 .Check1TileMonsterStandsOn:7489 7490 ld a,(Monster0+MonsterX)7491 ld c,a7492 ld a,(ix+MonsterX)7494 .Check:7495 cp c7496 ret nz7498 ld a,(ix+MonsterY)7499 ld c,a7500 ld a,(ix+MonsterNY)7501 add a,c7502 ld c,a7504 ld a,(Monster0+MonsterY)7505 add a,0177506 cp c7507 ret nz7509 pop af7510 pop af7511 pop af7513 ld (MonsterThatIsBeingAttacked),ix7514 ld a,(ix+MonsterX)7515 ld (MonsterThatIsBeingAttackedX),a7516 ld a,(ix+MonsterNX)7517 ld (MonsterThatIsBeingAttackedNX),a7518 ld a,(ix+MonsterY)7519 ld (MonsterThatIsBeingAttackedY),a7520 ld a,(ix+MonsterNY)7521 ld (MonsterThatIsBeingAttackedNY),a7523 7524 call SetCurrentActiveMOnsterInIX7525 call SetMonsterTableInIY 7526 ld a,(iy+MonsterTableSpecialAbility)7527 cp RangedMonster7528 jp z,RangedMonsterCheck7530 call .PointerIsOnEnemyCheckIfPossibleToAttack7532 7534 ld hl,CursorSwordLeft7535 call .CheckSetSwordLeft7536 ld hl,CursorSwordLeftDown7537 call .CheckSetSwordLeftDown7538 ld hl,CursorSwordLeftUp7539 call .CheckSetSwordLeftUp7540 ld hl,CursorSwordRight7541 call .CheckSetSwordRight7542 ld hl,CursorSwordRightDown7543 call .CheckSetSwordRightDown7544 ld hl,CursorSwordRightUp7545 call .CheckSetSwordRightUp7547 .SetProhibitionSign:7548 ld hl,CursorProhibitionSign7549 ld (BufferCursorSpriteChar),hl7550 ld hl,SpriteProhibitionSignColor7551 ld (BufferCursorSpriteCol),hl7552 ret755475687585 .PointerIsOnEnemyCheckIfPossibleToAttack:7586 7588 ld a,(Monster0+MonsterY) 7589 sub a,39 + 167590 srl a 7591 srl a 7592 srl a 7593 srl a 7594 bit 0,a7595 jr z,.EvenRow7596 7597 .OddRow:75987607 ld a,(spat+1)7608 and %0000 11107609 cp %0000 01107610 jp z,.SetSwordRight7611 cp %0000 10007612 jp z,.SetSwordRight7613 cp %0000 10107614 jp z,.SetSwordRight7615 cp %0000 11007616 jp z,.SetSwordRight7617 jp .SetSwordLeft7618 7619 .EvenRow:76207629 ld a,(spat+1)7630 and %0000 11107631 cp %0000 11007632 jp z,.SetSwordRight7633 cp %0000 11107634 jp z,.SetSwordRight7635 cp %0000 00007636 jp z,.SetSwordRight7637 cp %0000 00107638 jp z,.SetSwordRight7639 jp .SetSwordLeft7641 .SetSwordLeft:76427651 ld a,(spat)7652 and %0000 11107653 ld hl,CursorSwordLeftDown 7654 cp %0000 00107655 jp z,.CheckSetSwordLeftDown7656 cp %0000 01007657 jp z,.CheckSetSwordLeftDown7658 cp %0000 01107659 jp z,.CheckSetSwordLeftDown7660 ld hl,CursorSwordLeft 7661 cp %0000 10007662 jp z,.CheckSetSwordLeft7663 cp %0000 10107664 jp z,.CheckSetSwordLeft7665 ld hl,CursorSwordLeftUp 7666 jp .CheckSetSwordLeftUp76677673 7674 7675 .SetSwordRight:76767685 ld a,(spat)7686 and %0000 11107687 ld hl,CursorSwordRightDown 7688 cp %0000 00107689 jp z,.CheckSetSwordRightDown7690 cp %0000 01007691 jp z,.CheckSetSwordRightDown7692 cp %0000 01107693 jp z,.CheckSetSwordRightDown7694 ld hl,CursorSwordRight 7695 cp %0000 10007696 jp z,.CheckSetSwordRight7697 cp %0000 10107698 jp z,.CheckSetSwordRight7699 ld hl,CursorSwordRightUp 7700 jp .CheckSetSwordRightUp77017708 .CheckSetSwordLeftDown:7709 ld (BufferCursorSpriteChar),hl7710 ld hl,SpriteColCursorSprites7711 ld (BufferCursorSpriteCol),hl7713 7714 call FindCursorInBattleFieldGrid7715 inc hl7716 ld de,LenghtBattleField7717 or a7718 sbc hl,de7719 jp .CheckTile7721 .CheckSetSwordLeftUp:7722 ld (BufferCursorSpriteChar),hl7723 ld hl,SpriteColCursorSprites7724 ld (BufferCursorSpriteCol),hl7726 7727 call FindCursorInBattleFieldGrid7728 inc hl7729 ld de,LenghtBattleField7730 add hl,de7731 jp .CheckTile7733 .CheckSetSwordRightDown:7734 ld (BufferCursorSpriteChar),hl7735 ld hl,SpriteColCursorSprites7736 ld (BufferCursorSpriteCol),hl7738 7739 call FindCursorInBattleFieldGrid7740 dec hl7741 ld de,LenghtBattleField7742 or a7743 sbc hl,de7744 ld a,(hl)7745 jp .CheckTile7747 .CheckSetSwordRightUp:7748 ld (BufferCursorSpriteChar),hl7749 ld hl,SpriteColCursorSprites7750 ld (BufferCursorSpriteCol),hl7752 7753 call FindCursorInBattleFieldGrid7754 dec hl7755 ld de,LenghtBattleField7756 add hl,de7757 jp .CheckTile7759 .CheckSetSwordLeft:7760 ld (BufferCursorSpriteChar),hl7761 ld hl,SpriteColCursorSprites7762 ld (BufferCursorSpriteCol),hl7764 7765 call FindCursorInBattleFieldGrid7766 inc hl7767 inc hl7768 jp .CheckTile7770 .CheckSetSwordRight:7771 ld (BufferCursorSpriteChar),hl7772 ld hl,SpriteColCursorSprites7773 ld (BufferCursorSpriteCol),hl7775 7776 call FindCursorInBattleFieldGrid7777 dec hl7778 dec hl7785 call SetCurrentActiveMOnsterInIX7786 ld a,(ix+MonsterNX)7787 cp 177788 jp c,.CheckTile7789 dec hl7790 dec hl7791 cp 337792 jp c,.CheckTile7793 dec hl7794 dec hl7795 cp 577796 jp c,.CheckTile7797 dec hl7798 dec hl78067808 .CheckTile:7811 push hl7812 call SetCurrentActiveMOnsterInIX7813 call SetMonsterTableInIY 7814 call SetTotalMonsterSpeedInHL 7815 ld c,l7816 inc c 7817 pop hl78197822 ld a,(hl)7823 cp c 7824 ret nc7825 7826 pop af7827 ret7828 7836RangedMonstersRange: equ 10 7837RangedMonsterCheck:7838 xor a7839 ld (IsThereAnyEnemyRightNextToActiveMonster?),a7841 7842 call SetCurrentActiveMOnsterInIX7843 ld a,(ix+MonsterY)7844 sub 0567845 add (ix+MonsterNY)7846 srl a 7847 srl a 7848 srl a 7849 srl a 7850 ld e,a 7852 ld a,(ix+MonsterX)7853 sub a,127854 srl a 7855 srl a 7856 srl a 7857 ld d,a 7859 ld a,(CurrentActiveMonster)7860 cp 77861 jr nc,.RightPlayerIsActive7863 .LeftPlayerIsActive:7864 7865 ld iy,Monster77866 call .Check 7867 ld iy,Monster87868 call .Check7869 ld iy,Monster97870 call .Check7871 ld iy,Monster107872 call .Check7873 ld iy,Monster117874 call .Check7875 ld iy,Monster127876 call .Check7877 7878 ld iy,(MonsterThatIsBeingAttacked)7879 xor a7880 ld (MayRangedAttackBeRetaliated?),a 7881 jr .Check7883 .RightPlayerIsActive:7884 7885 ld iy,Monster17886 call .Check7887 ld iy,Monster27888 call .Check7889 ld iy,Monster37890 call .Check7891 ld iy,Monster47892 call .Check7893 ld iy,Monster57894 call .Check7895 ld iy,Monster67896 call .Check7897 7898 ld iy,(MonsterThatIsBeingAttacked)7899 xor a7900 ld (MayRangedAttackBeRetaliated?),a 7902 .Check:7903 ld a,(iy+MonsterHP)7904 or a7905 ret z 7906 7907 ld a,(iy+MonsterY)7908 sub 0567909 add (iy+MonsterNY)7910 srl a 7911 srl a 7912 srl a 7913 srl a 7914 ld l,a 7916 ld a,(iy+MonsterX)7917 sub a,127918 srl a 7919 srl a 7920 srl a 7921 ld h,a 7923 7927 7928 7930 7934 7935 push de7936 push hl7938 ld a,(ix+MonsterNX)7939 cp 177940 jr c,.RightSideActiveMonsterFound7941 inc d7942 inc d 7943 cp 337944 jr c,.RightSideActiveMonsterFound7945 inc d7946 inc d 7947 cp 577948 jr c,.RightSideActiveMonsterFound7949 inc d7950 inc d 7951 .RightSideActiveMonsterFound:7953 ld b,0 7954 ld c,0 7956 .loop:7957 inc b7958 7959 ld a,e 7960 cp l 7961 jr z,.SameY_MoveOnlyX7962 inc e 7963 jr c,.ymovedNowMoveX7964 dec e7965 dec e 7966 .ymovedNowMoveX:7967 ld a,d 7968 cp h 7969 inc d 7970 jr c,.loop 7971 dec d7972 dec d 7973 jr .loop7975 .SameY_MoveOnlyX: 7976 ld a,d 7977 cp h 7978 jr z,.End 7979 inc d7980 inc d 7981 jr c,.loop 7982 dec d7983 dec d7984 dec d7985 dec d 7986 jr .loop7987 .End:7989 pop hl7990 pop de7992 ld a,b7993 cp 27994 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow7995 7996 cp RangedMonstersRange7997 jr nc,.OutOfrange7998 ld c,1 7999 .OutOfrange:8001 8002 push de8004 ld a,(iy+MonsterNX)8005 cp 178006 jr c,.RightSideCheckingMonsterFound8007 inc h8008 inc h 8009 cp 338010 jr c,.RightSideCheckingMonsterFound8011 inc h8012 inc h 8013 cp 578014 jr c,.RightSideCheckingMonsterFound8015 inc h8016 inc h 8017 .RightSideCheckingMonsterFound:8019 ld b,0 8021 .loop2:8022 inc b8023 8024 ld a,e 8025 cp l 8026 jr z,.SameY_MoveOnlyX28027 inc e 8028 jr c,.ymovedNowMoveX28029 dec e8030 dec e 8031 .ymovedNowMoveX2:8032 ld a,d 8033 cp h 8034 inc d 8035 jr c,.loop28036 dec d8037 dec d 8038 jr .loop28040 .SameY_MoveOnlyX2: 8041 ld a,d 8042 cp h 8043 jr z,.End2 8044 inc d8045 inc d 8046 jr c,.loop28047 dec d8048 dec d8049 dec d8050 dec d 8051 jr .loop28052 .End2:8054 pop de8056 ld a,b8057 cp 28058 jp z,.EnemyIsRightNextToActiveMonsterSoBrokenArrow8059 8060 8061 ld a,28062 ld (BrokenArrow?),a 8064 ld a,(IsThereAnyEnemyRightNextToActiveMonster?)8065 or a8066 jp nz,SetcursorWhenGridTileIsActive.SetProhibitionSign8067 8068 ld a,b8069 cp 68070 jr c,.BowAndArrow 8072 bit 0,c 8073 jr nz,.BowAndArrow 8075 .BrokenArrow: 8076 ld hl,CursorBrokenArrow8077 ld (BufferCursorSpriteChar),hl8078 ld hl,SpriteColCursorSprites8079 ld (BufferCursorSpriteCol),hl8081 ld a,18082 ld (BrokenArrow?),a8083 ret8085 .EnemyIsRightNextToActiveMonsterSoBrokenArrow:8086 ld a,18087 ld (IsThereAnyEnemyRightNextToActiveMonster?),a8088 ld (MayRangedAttackBeRetaliated?),a8089 jr .BrokenArrow8091 .BowAndArrow:8092 ld hl,CursorBowAndArrow8093 ld (BufferCursorSpriteChar),hl8094 ld hl,SpriteColCursorSprites8095 ld (BufferCursorSpriteCol),hl8097 xor a8098 ld (BrokenArrow?),a8099 ret8101EndSpellSelectedAndSpellGetsSpellBubbled:8102 ld iy,SpellBubbleActivatedAndPoppedAnimation8103 call AnimateSpell8105EndSpellSelectedAndReduceManaCost:8106 call GetSelectedSpellCost 8107 ld e,a8108 ld d,08109 push de8111 call SetCurrentActiveMOnsterInIX8112 8113 push ix8114 pop hl 8115 ld de,Monster78116 call CompareHLwithDE 8117 ld ix,(plxcurrentheroAddress) 8118 ld hl,LeftPlayerAlreadyCastSpellThisRound?8119 jr c,.HeroFound8120 ld ix,(HeroThatGetsAttacked) 8121 ld hl,RightPlayerAlreadyCastSpellThisRound?8122 .HeroFound:8124 ld (hl),1 8126 ld hl,CheckSwitchToNextMonster.SpellBookButtonGrey8127 ld de,GenericButtonTable + (5*GenericButtonTableLenghtPerButton)8128 ld bc,78129 ldir8131 8132 ld l,(ix+HeroMana)8133 ld h,(ix+HeroMana+1)8134 pop de8135 or a8136 sbc hl,de8137 ld (ix+HeroMana),l8138 ld (ix+HeroMana+1),h8140 ld a,1 8141 ld (SwitchToNextMonster?),a8143EndSpellSelected:8144 xor a8145 ld (SpellSelected?),a8146 ret8148SpellSelectedHandleCursor:8149 ld a,(Controls)8150 bit 5,a 8151 call nz,EndSpellSelected8152 8153 ld b,1 8154 ld a,(CurrentActiveMonster)8155 cp 78156 jr c,.FriendlyMonsterFound8157 ld b,0 8158 .FriendlyMonsterFound:8160 ld ix,Monster18161 call .CheckPointerOnCreature8162 ld ix,Monster28163 call .CheckPointerOnCreature8164 ld ix,Monster38165 call .CheckPointerOnCreature8166 ld ix,Monster48167 call .CheckPointerOnCreature8168 ld ix,Monster58169 call .CheckPointerOnCreature8170 ld ix,Monster68171 call .CheckPointerOnCreature8173 ld a,b8174 xor 18175 ld b,a 8177 ld ix,Monster78178 call .CheckPointerOnCreature8179 ld ix,Monster88180 call .CheckPointerOnCreature8181 ld ix,Monster98182 call .CheckPointerOnCreature8183 ld ix,Monster108184 call .CheckPointerOnCreature8185 ld ix,Monster118186 call .CheckPointerOnCreature8187 ld ix,Monster128188 call .CheckPointerOnCreature8189 8190 8191 call GetSelectedSpellCastableOn 8192 cp 38193 jp z,.SetSpriteSpellbook8194 cp 58195 jp z,.CheckFreeHex8197 .SetSpriteProhibitionSign:8198 ld hl,CursorProhibitionSign8199 ld (BufferCursorSpriteChar),hl8200 ld hl,SpriteProhibitionSignColor8201 ld (BufferCursorSpriteCol),hl8202 ret8204 .CheckFreeHex:8205 call SetCurrentActiveMOnsterInIX8206 call FindCursorInBattleFieldGrid8207 ld a,(hl)8208 cp 255 8209 jr z,.SetSpriteProhibitionSign8210 ld a,(ix+MonsterNX)8211 cp 178212 jp c,.SetSpriteSpellbook8213 cp 338214 jp c,.MonsterIs2TilesWide8215 cp 578216 jp c,.MonsterIs3TilesWide8217 .MonsterIs4TilesWide:8218 inc hl8219 inc hl8220 ld a,(hl)8221 cp 2558222 jp z,.SetSpriteProhibitionSign8223 .MonsterIs3TilesWide:8224 inc hl8225 inc hl8226 ld a,(hl)8227 cp 2558228 jp z,.SetSpriteProhibitionSign8229 .MonsterIs2TilesWide:8230 inc hl8231 inc hl8232 ld a,(hl)8233 cp 2558234 jp z,.SetSpriteProhibitionSign8235 jp .SetSpriteSpellbook8237 .CheckPointerOnCreature:8238 call .Check1TileMonsterStandsOn 8239 8240 ld a,(ix+MonsterNX)8241 cp 178242 ret c8243 ld a,(Monster0+MonsterX)8244 ld c,a8245 ld a,(ix+MonsterX)8246 add a,168247 call .Check8249 8250 ld a,(ix+MonsterNX)8251 cp 338252 ret c8253 ld a,(Monster0+MonsterX)8254 ld c,a8255 ld a,(ix+MonsterX)8256 add a,328257 call .Check8259 8260 ld a,(ix+MonsterNX)8261 cp 578262 ret c8263 ld a,(Monster0+MonsterX)8264 ld c,a8265 ld a,(ix+MonsterX)8266 add a,488267 call .Check8268 ret8269 .Check1TileMonsterStandsOn:8270 ld a,(Monster0+MonsterX)8271 ld c,a8272 ld a,(ix+MonsterX)8274 .Check:8275 cp c8276 ret nz8278 ld a,(ix+MonsterY)8279 ld c,a8280 ld a,(ix+MonsterNY)8281 add a,c8282 ld c,a8284 ld a,(Monster0+MonsterY)8285 add a,0178286 cp c8287 ret nz8289 pop af 8290 pop af8292 ld (MonsterThatIsBeingAttacked),ix8293 ld a,(ix+MonsterX)8294 ld (MonsterThatIsBeingAttackedX),a8295 ld a,(ix+MonsterNX)8296 ld (MonsterThatIsBeingAttackedNX),a8297 ld a,(ix+MonsterY)8298 ld (MonsterThatIsBeingAttackedY),a8299 ld a,(ix+MonsterNY)8300 ld (MonsterThatIsBeingAttackedNY),a8302 8303 call GetSelectedSpellCastableOn 8304 cp 58305 jp z,.CheckFreeHex8306 cp 48307 jp z,.SpellCanBecastOnlyOnRangedEnemy8308 cp 38309 jp z,.SpellCanBecastAnyWhere8310 cp 28311 jp z,.SpellCanBecastOnlyOnEnemy8312 cp 18313 jp z,.SpellCanBecastOnlyOnAlly8315 .SpellCanBecastOnlyOnAlly:8316 bit 0,b 8317 jp nz,.SetSpriteSpellbook8318 jp .SetSpriteProhibitionSign8320 .SpellCanBecastOnlyOnRangedEnemy:8321 bit 0,b 8322 jp nz,.SetSpriteProhibitionSign8324 call SetMonsterTableInIY 8325 ld a,(iy+MonsterTableSpecialAbility)8326 cp RangedMonster8327 jp nz,.SetSpriteProhibitionSign8328 8329 jp .SetSpriteSpellbook8331 .SpellCanBecastOnlyOnEnemy:8332 bit 0,b 8333 jp z,.SetSpriteSpellbook8334 jp .SetSpriteProhibitionSign8336 .SpellCanBecastAnyWhere:8337 .SetSpriteSpellbook:8338 ld hl,CursorEnterCastle8339 ld (BufferCursorSpriteChar),hl8340 ld hl,SpriteColCursorSprites8341 ld (BufferCursorSpriteCol),hl8343 ld a,(NewPrContr)8344 bit 4,a 8345 ret z8346 8347 8348 ld a,18349 ld (CastSpell?),a8350 ret8351 8353SpellEarthBound: db 2 | dw SpellEarthBoundRoutine | db CostEarthSpell48354SpellPlateArmor: db 1 | dw SpellPlateArmorRoutine | db CostEarthSpell38355SpellResurrection: db 1 | dw SpellResurrectionRoutine | db CostEarthSpell28356SpellEarthShock: db 3 | dw SpellEarthShockRoutine | db CostEarthSpell183578358SpellCurse: db 2 | dw SpellCurseRoutine | db CostFireSpell48359SpellBlindingFog: db 4 | dw SpellBlindingFogRoutine | db CostFireSpell38360Spellimplosion: db 2 | dw SpellimplosionRoutine | db CostFireSpell28361Spellsunstrike: db 2 | dw SpellsunstrikeRoutine | db CostFireSpell183628363SpellHaste: db 1 | dw SpellHasteRoutine | db CostAirSpell48364SpellShieldBreaker: db 2 | dw SpellShieldBreakerRoutine | db CostAirSpell38365SpellClawBack: db 1 | dw SpellClawBackRoutine | db CostAirSpell28366SpellSpellBubble: db 1 | dw SpellSpellBubbleRoutine | db CostAirSpell183678368SpellCure: db 1 | dw SpellCureRoutine | db CostWaterSpell48369SpellIceBolt: db 2 | dw SpellIceBoltRoutine | db CostWaterSpell38370Spellhypnosis: db 2 | dw SpellhypnosisRoutine | db CostWaterSpell28371SpellFrostRing: db 3 | dw SpellFrostRingRoutine | db CostWaterSpell183728373SpellMagicArrows: db 2 | dw SpellMagicArrowsRoutine | db CostAllSpellSchools48374SpellFrenzy: db 1 | dw SpellFrenzyRoutine | db CostAllSpellSchools38375SpellTeleport: db 5 | dw SpellTeleportRoutine | db CostAllSpellSchools28376SpellInnerBeast: db 1 | dw SpellInnerBeastRoutine | db CostAllSpellSchools18378CostAllSpellSchools4: equ 5 8379CostAllSpellSchools3: equ 9 8380CostAllSpellSchools2: equ 13 8381CostAllSpellSchools1: equ 14 8383CostEarthSpell4: equ 4 8384CostEarthSpell3: equ 6 8385CostEarthSpell2: equ 12 8386CostEarthSpell1: equ 16 8388CostFireSpell4: equ 6 8389CostFireSpell3: equ 10 8390CostFireSpell2: equ 15 8391CostFireSpell1: equ 16 8393CostAirSpell4: equ 5 8394CostAirSpell3: equ 7 8395CostAirSpell2: equ 11 8396CostAirSpell1: equ 18 8398CostWaterSpell4: equ 6 8399CostWaterSpell3: equ 8 8400CostWaterSpell2: equ 12 8401CostWaterSpell1: equ 15 8403GetSelectedSpellCost: 8404 call GetSelectedSpellTable 8405 inc hl8406 inc hl8407 inc hl8408 ld a,(hl) 8409 ret8411GetSelectedSpellRoutine: 8412 call GetSelectedSpellTable 8413 inc hl8414 ld e,(hl)8415 inc hl8416 ld d,(hl)8417 ex de,hl8418 ret8420GetSelectedSpellCastableOn:8421 call GetSelectedSpellTable 8422 ld a,(hl) 8423 ret8425GetSelectedSpellTable: 8426 ld a,(SpellSelected?)8427 cp 18428 ld hl,SpellInnerBeast8429 ret z8430 cp 28431 ld hl,SpellTeleport8432 ret z8433 cp 38434 ld hl,SpellFrenzy8435 ret z8436 cp 48437 ld hl,SpellMagicArrows8438 ret z8439 ld a,(SelectedElementInSpellBook) 8440 or a8441 jr z,.EarthSpellSelected8442 dec a8443 jr z,.FireSpellSelected8444 dec a8445 jr z,.AirSpellSelected8447 .WaterSpellSelected:8448 ld a,(SpellSelected?)8449 cp 58450 ld hl,SpellFrostRing8451 ret z8452 cp 68453 ld hl,Spellhypnosis8454 ret z8455 cp 78456 ld hl,SpellIceBolt8457 ret z8458 cp 88459 ld hl,SpellCure8460 ret8462 .AirSpellSelected:8463 ld a,(SpellSelected?)8464 cp 58465 ld hl,SpellSpellBubble8466 ret z8467 cp 68468 ld hl,SpellClawBack8469 ret z8470 cp 78471 ld hl,SpellShieldBreaker8472 ret z8473 cp 88474 ld hl,SpellHaste8475 ret8477 .FireSpellSelected:8478 ld a,(SpellSelected?)8479 cp 58480 ld hl,Spellsunstrike8481 ret z8482 cp 68483 ld hl,Spellimplosion8484 ret z8485 cp 78486 ld hl,SpellBlindingFog8487 ret z8488 cp 88489 ld hl,SpellCurse8490 ret8492 .EarthSpellSelected:8493 ld a,(SpellSelected?)8494 cp 58495 ld hl,SpellEarthShock8496 ret z8497 cp 68498 ld hl,SpellResurrection8499 ret z8500 cp 78501 ld hl,SpellPlateArmor8502 ret z8503 cp 88504 ld hl,SpellEarthBound8505 ret8507ReduceDurationStatusEffectsMonsters: 8508 ld ix,Monster18509 ld c,12 8510 .totalMonstersLoop:8511 ld b,5 8512 .loop:8513 ld a,(ix+MonsterStatusEffect1) 8514 and %0000 11118515 jr z,.NextStatusEffect8516 dec (ix+MonsterStatusEffect1) 8517 ld a,(ix+MonsterStatusEffect1) 8518 and %0000 11118519 jr nz,.NextStatusEffect8520 ld (ix+MonsterStatusEffect1),0 8521 .NextStatusEffect:8522 inc ix8523 djnz .loop8524 8525 ld de,LenghtMonsterTable-58526 add ix,de 8527 dec c8528 jr nz,.totalMonstersLoop8529 ret8531GetSpellPowerForCurrentActiveHero:8532 call SetCurrentActiveMOnsterInIX8533 8534 8535 push ix8536 pop hl 8537 ld de,Monster78538 call CompareHLwithDE 8539 ld ix,(plxcurrentheroAddress) 8540 jr c,.HeroFound8541 ld ix,(HeroThatGetsAttacked) 8549 .HeroFound:8551 8552 ld de,ItemSpellDamagePointsTable8553 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet 8554 push ix8555 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters8556 pop ix8557 ld e,(ix+HeroStatSpelldamage)8558 ld d,08559 add hl,de8560 ret8562GetSpellDuration: 8563 call GetSpellPowerForCurrentActiveHero 8565 8566 push hl8567 pop bc8568 ld de,38569 call DivideBCbyDE 8570 ld a,c8571 add a,28572 ret8574CheckIfSpellGetsSpellBubbleed:8575 call CheckResistanceSkill 8576 ret z8578 ld a,r8579 and 38580 jr z,.DontSpellBubble8582 ld ix,(MonsterThatIsBeingAttacked)8583 ld c,SpellBubbleSpellNumber 8584 ld b,AmountOfStatusEffects8585 call CheckPresenceSpellBubble 8586 ret nz8587 8588 ld (ix+MonsterStatusEffect1),0 8589 xor a 8590 ret8591 .DontSpellBubble:8592 inc a 8593 ret8595EarthBoundSpellNumber: equ 1*168596SpellEarthBoundRoutine:8597 call CheckIfSpellGetsSpellBubbleed 8598 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8600 ld iy,EarthBoundAnimation8601 call AnimateSpell8603 call GetSpellDuration 8604 ld ix,(MonsterThatIsBeingAttacked)8605 or EarthBoundSpellNumber 8606 call SetSpellInEmptyStatusSlot8607 ld a,6 8608 call PrepBattleTextForSpells8610 jp EndSpellSelectedAndReduceManaCost8612PlateArmorSpellNumber: equ 2*168613SpellPlateArmorRoutine:8614 ld iy,PlateArmorAnimation8615 call AnimateSpell8617 call GetSpellDuration 8618 ld ix,(MonsterThatIsBeingAttacked)8619 or PlateArmorSpellNumber 8620 call SetSpellInEmptyStatusSlot8621 ld a,7 8622 call PrepBattleTextForSpells8623 jp EndSpellSelectedAndReduceManaCost8625CurseSpellNumber: equ 3*168626SpellCurseRoutine:8627 call CheckIfSpellGetsSpellBubbleed 8628 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8629 ld iy,CurseAnimation8630 call AnimateSpell8632 call GetSpellDuration 8633 ld ix,(MonsterThatIsBeingAttacked)8634 or CurseSpellNumber 8635 call SetSpellInEmptyStatusSlot8636 ld a,10 8637 call PrepBattleTextForSpells8638 jp EndSpellSelectedAndReduceManaCost8640BlindingFogSpellNumber: equ 4*168641SpellBlindingFogRoutine:8642 call CheckIfSpellGetsSpellBubbleed 8643 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8645 ld iy,BlindingFogAnimation8646 call AnimateSpell8648 call GetSpellDuration 8649 ld ix,(MonsterThatIsBeingAttacked)8650 or BlindingFogSpellNumber 8651 call SetSpellInEmptyStatusSlot8652 ld a,11 8653 call PrepBattleTextForSpells8654 jp EndSpellSelectedAndReduceManaCost8656HasteSpellNumber: equ 5*168657SpellHasteRoutine:8658 ld iy,HasteAnimation8659 call AnimateSpell8661 call GetSpellDuration 8662 ld ix,(MonsterThatIsBeingAttacked)8663 or HasteSpellNumber 8664 call SetSpellInEmptyStatusSlot8665 ld a,14 8666 call PrepBattleTextForSpells8667 jp EndSpellSelectedAndReduceManaCost8669ShieldBreakerSpellNumber: equ 6*168670SpellShieldBreakerRoutine:8671 call CheckIfSpellGetsSpellBubbleed 8672 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8674 ld iy,ShieldBreakerAnimation8675 call AnimateSpell8677 call GetSpellDuration 8678 ld ix,(MonsterThatIsBeingAttacked)8679 or ShieldBreakerSpellNumber 8680 call SetSpellInEmptyStatusSlot8681 ld a,15 8682 call PrepBattleTextForSpells8683 jp EndSpellSelectedAndReduceManaCost8685ClawBackSpellNumber: equ 7*168686SpellClawBackRoutine:8687 ld iy,ClawBackAnimation8688 call AnimateSpell8690 call GetSpellDuration 8691 ld ix,(MonsterThatIsBeingAttacked)8692 or ClawBackSpellNumber 8693 call SetSpellInEmptyStatusSlot8694 ld a,16 8695 call PrepBattleTextForSpells8696 jp EndSpellSelectedAndReduceManaCost8698hypnosisSpellNumber: equ 8*168699SpellhypnosisRoutine:8700 call CheckIfSpellGetsSpellBubbleed 8701 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8703 ld iy,hypnosisAnimation8704 call AnimateSpell8706 call GetSpellDuration 8707 ld ix,(MonsterThatIsBeingAttacked)8708 or hypnosisSpellNumber 8709 call SetSpellInEmptyStatusSlot8710 ld a,20 8711 call PrepBattleTextForSpells8712 jp EndSpellSelectedAndReduceManaCost8714FrenzySpellNumber: equ 9*168715SpellFrenzyRoutine:8716 ld iy,FrenzyAnimation8717 call AnimateSpell8719 call GetSpellDuration 8720 ld ix,(MonsterThatIsBeingAttacked)8721 or FrenzySpellNumber 8722 call SetSpellInEmptyStatusSlot8723 ld a,23 8724 call PrepBattleTextForSpells8725 jp EndSpellSelectedAndReduceManaCost8727InnerBeastSpellNumber: equ 10*168728SpellInnerBeastRoutine:8729 ld iy,InnerBeastAnimation8730 call AnimateSpell8732 call GetSpellDuration 8733 ld ix,(MonsterThatIsBeingAttacked)8734 or InnerBeastSpellNumber 8735 call SetSpellInEmptyStatusSlot8736 ld a,25 8737 call PrepBattleTextForSpells8738 jp EndSpellSelectedAndReduceManaCost8740SpellBubbleSpellNumber: equ 11*168741SpellSpellBubbleRoutine:8742 ld iy,SpellBubbleAnimation8743 call AnimateSpell8744 8745 call GetSpellDuration 8746 ld ix,(MonsterThatIsBeingAttacked)8747 or SpellBubbleSpellNumber 8748 call SetSpellInEmptyStatusSlot8749 ld a,17 8750 call PrepBattleTextForSpells8751 jp EndSpellSelectedAndReduceManaCost8753GetIceBoltDMGAmount: 8754 call GetSpellPowerForCurrentActiveHero 8755 ld de,108756 call MultiplyHlWithDE 8757 ld de,308758 add hl,de8759 jp AddPositiveSpellDamageFromItemsForActiveHero8761SpellIceBoltRoutine:8762 call CheckIfSpellGetsSpellBubbleed 8763 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8765 ld iy,IceBoltAnimation8766 call AnimateSpell8768 call GetIceBoltDMGAmount 8769 call ReduceSpellDamageFromItems 8770 ld (AEOSpellDamage),hl 8771 ld ix,(MonsterThatIsBeingAttacked)8772 call MoveMonster.DealDamageToMonster8773 ld a,19 8774 call PrepBattleTextForSpells8775 jp EndSpellSelectedAndReduceManaCost8777GetEarthShockDMGAmount: 8778 call GetSpellPowerForCurrentActiveHero 8779 ld de,108780 call MultiplyHlWithDE 8781 ld de,508782 add hl,de8783 jp AddPositiveSpellDamageFromItemsForActiveHero8785SpellEarthShockRoutine:8786 ld ix,Monster0 8787 ld (MonsterThatIsBeingAttacked),ix8788 ld iy,EarthShockAnimation8789 call AnimateSpell8791 call GetEarthShockDMGAmount 8792 ld (AEOSpellDamage),hl8793 ld a,9 8794 call PrepBattleTextForSpells8795 jp GoCastAOESpell8797GetimplosionDMGAmount: 8798 call GetSpellPowerForCurrentActiveHero 8799 ld de,108800 call MultiplyHlWithDE 8801 ld de,158802 add hl,de8803 jp AddPositiveSpellDamageFromItemsForActiveHero8805SpellimplosionRoutine:8806 call CheckIfSpellGetsSpellBubbleed 8807 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8809 ld iy,implosionAnimation8810 call AnimateSpell8812 call GetimplosionDMGAmount 8813 ld (AEOSpellDamage),hl8814 ld a,12 8815 call PrepBattleTextForSpells8816 jp GoCastAOESpell8818GetFrostRingDMGAmount: 8819 call GetSpellPowerForCurrentActiveHero 8820 ld de,108821 call MultiplyHlWithDE 8822 ld de,308823 add hl,de8824 jp AddPositiveSpellDamageFromItemsForActiveHero8826SpellFrostRingRoutine:8827 ld ix,Monster0 8828 ld (MonsterThatIsBeingAttacked),ix8829 ld iy,FrostRingAnimation8830 call AnimateSpell8832 call GetFrostRingDMGAmount 8833 ld (AEOSpellDamage),hl8835 ld hl,08836 ld (MonsterThatWasDamagedPreviousCheck),hl8837 ld a,(Monster0+MonsterX)8838 ld (CursorXWhereSpellWasCast),a8839 ld a,(Monster0+MonsterY)8840 ld (CursorYWhereSpellWasCast),a8842 ld a,(CursorXWhereSpellWasCast) 8843 sub a,168844 ld (CursorXWhereSpellWasCast),a8845 call GoCastAOESpell.DamageMonsterOnThisTile8847 ld a,(CursorXWhereSpellWasCast) 8848 add a,168849 ld (CursorXWhereSpellWasCast),a8851 ld a,21 8852 call PrepBattleTextForSpells8854 jp GoCastAOESpell.EntryPointFrostRing8856GetMagicArrowsDMGAmount: 8857 call GetSpellPowerForCurrentActiveHero 8858 ld de,108859 call MultiplyHlWithDE 8860 ld de,108861 add hl,de8862 jp AddPositiveSpellDamageFromItemsForActiveHero8864SpellMagicArrowsRoutine:8865 call CheckIfSpellGetsSpellBubbleed 8866 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8868 ld iy,MagicArrowsAnimation8869 call AnimateSpell8871 call GetMagicArrowsDMGAmount 8872 call ReduceSpellDamageFromItems 8873 ld (AEOSpellDamage),hl 8875 ld ix,(MonsterThatIsBeingAttacked)8876 call MoveMonster.DealDamageToMonster8878 ld a,22 8879 call PrepBattleTextForSpells8880 jp EndSpellSelectedAndReduceManaCost8882GetsunstrikeDMGAmount: 8883 call GetSpellPowerForCurrentActiveHero 8884 ld de,108885 call MultiplyHlWithDE 8886 ld de,808887 add hl,de8888 jp AddPositiveSpellDamageFromItemsForActiveHero8890SpellsunstrikeRoutine:8891 call CheckIfSpellGetsSpellBubbleed 8892 jp z,EndSpellSelectedAndSpellGetsSpellBubbled8894 ld iy,sunstrikeAnimation8895 call AnimateSpell8897 call GetsunstrikeDMGAmount 8898 call ReduceSpellDamageFromItems 8899 ld (AEOSpellDamage),hl 8901 ld ix,(MonsterThatIsBeingAttacked)8902 call MoveMonster.DealDamageToMonster8904 ld a,13 8905 call PrepBattleTextForSpells8906 jp EndSpellSelectedAndReduceManaCost8908GetCureAmount: 8909 call GetSpellPowerForCurrentActiveHero 8910 ld de,58911 call MultiplyHlWithDE 8912 ld de,208913 add hl,de8914 ret8916SpellCureRoutine:8917 ld iy,CureAnimation8918 call AnimateSpell8920 call GetCureAmount 8921 ld a,l8922 push af 8923 ld ix,(MonsterThatIsBeingAttacked)8924 call SetMonsterTableInIY 8925 pop af 8926 add a,(ix+MonsterHP)8927 jr nc,.NotCarry8928 ld a,2558929 .NotCarry:8930 ld (ix+MonsterHP),a8931 cp (iy+MonsterTableHp) 8932 jp c,EndSpellSelected8933 ld a,(iy+MonsterTableHp) 8934 ld (ix+MonsterHP),a8936 ld b,EarthBoundSpellNumber 8937 call RemoveSpell 8938 ld b,CurseSpellNumber 8939 call RemoveSpell 8940 ld b,BlindingFogSpellNumber 8941 call RemoveSpell 8942 ld b,ShieldBreakerSpellNumber 8943 call RemoveSpell 8944 ld b,hypnosisSpellNumber 8945 call RemoveSpell 8947 ld a,18 8948 call PrepBattleTextForSpells8949 jp EndSpellSelectedAndReduceManaCost8951GetResurrectionAmount: 8952 call GetSpellPowerForCurrentActiveHero 8953 ld de,58954 call MultiplyHlWithDE 8955 ld de,608956 add hl,de8957 ld a,l8958 ret8960SpellResurrectionRoutine:8961 ld iy,ResurrectionAnimation8962 call AnimateSpell8964 call GetResurrectionAmount 8965 push af8966 ld ix,(MonsterThatIsBeingAttacked)8967 8968 ld l,(ix+MonsterAmount)8969 ld h,(ix+MonsterAmount+1)8970 ld (AmountMonsterBeforeBeingAttacked),hl8972 call SetMonsterTableInIY 8974 pop af8976 add a,(ix+MonsterHP)8977 jr nc,.NotCarry8978 ld a,2558979 .NotCarry:8981 .CheckOverFlow:8982 ld (ix+MonsterHP),a8983 cp (iy+MonsterTableHp) 8984 jp c,.EndRessurectionRoutine8986 sub (iy+MonsterTableHp) 8988 call .SetTotalAmountMonsterAtStartBattleInHL8990 ld e,(ix+MonsterAmount)8991 ld d,(ix+MonsterAmount+1)8992 call CompareHLwithDE 8993 jr z,.MaxHpAndMaxAmountReached 8994 inc de8995 ld (ix+MonsterAmount),e8996 ld (ix+MonsterAmount+1),d8998 jr .CheckOverFlow8999 .MaxHpAndMaxAmountReached:9000 ld a,(iy+MonsterTableHp) 9001 ld (ix+MonsterHP),a9002 jp .EndRessurectionRoutine9004 .SetTotalAmountMonsterAtStartBattleInHL:9005 ld de,(MonsterThatIsBeingAttacked)9006 ld hl,Monster19007 call CompareHLwithDE 9008 ld hl,(ListOfMonstersToPutMonster1+1) 9009 ret z9010 ld hl,Monster29011 call CompareHLwithDE 9012 ld hl,(ListOfMonstersToPutMonster2+1) 9013 ret z9014 ld hl,Monster39015 call CompareHLwithDE 9016 ld hl,(ListOfMonstersToPutMonster3+1) 9017 ret z9018 ld hl,Monster49019 call CompareHLwithDE 9020 ld hl,(ListOfMonstersToPutMonster4+1) 9021 ret z9022 ld hl,Monster59023 call CompareHLwithDE 9024 ld hl,(ListOfMonstersToPutMonster5+1) 9025 ret z9026 ld hl,Monster69027 call CompareHLwithDE 9028 ld hl,(ListOfMonstersToPutMonster6+1) 9029 ret z9030 ld hl,Monster79031 call CompareHLwithDE 9032 ld hl,(ListOfMonstersToPutMonster7+1) 9033 ret z9034 ld hl,Monster89035 call CompareHLwithDE 9036 ld hl,(ListOfMonstersToPutMonster8+1) 9037 ret z9038 ld hl,Monster99039 call CompareHLwithDE 9040 ld hl,(ListOfMonstersToPutMonster9+1) 9041 ret z9042 ld hl,Monster109043 call CompareHLwithDE 9044 ld hl,(ListOfMonstersToPutMonster10+1) 9045 ret z9046 ld hl,Monster119047 call CompareHLwithDE 9048 ld hl,(ListOfMonstersToPutMonster11+1) 9049 ret z90509052 ld hl,(ListOfMonstersToPutMonster12+1) 9054 ret9056 .EndRessurectionRoutine:9057 call SetAmountUnderMonsterIn3Pages9059 ld a,8 9060 call PrepBattleTextForSpells9061 jp EndSpellSelectedAndReduceManaCost9063GoCastAOESpell:9064 ld hl,09065 ld (MonsterThatWasDamagedPreviousCheck),hl9066 ld a,(Monster0+MonsterX)9067 ld (CursorXWhereSpellWasCast),a9068 ld a,(Monster0+MonsterY)9069 ld (CursorYWhereSpellWasCast),a9071 ld a,(CursorXWhereSpellWasCast) 9072 sub a,169073 ld (CursorXWhereSpellWasCast),a9074 call .DamageMonsterOnThisTile9076 ld a,(CursorXWhereSpellWasCast) 9077 add a,169078 ld (CursorXWhereSpellWasCast),a9079 call .DamageMonsterOnThisTile9080 9081 .EntryPointFrostRing:9082 ld a,(CursorXWhereSpellWasCast) 9083 add a,169084 ld (CursorXWhereSpellWasCast),a9085 call .DamageMonsterOnThisTile9087 ld a,(CursorXWhereSpellWasCast) 9088 sub a,89089 ld (CursorXWhereSpellWasCast),a9090 ld a,(CursorYWhereSpellWasCast) 9091 sub a,169092 ld (CursorYWhereSpellWasCast),a9093 call .DamageMonsterOnThisTile9095 ld a,(CursorXWhereSpellWasCast) 9096 sub a,169097 ld (CursorXWhereSpellWasCast),a9098 call .DamageMonsterOnThisTile9100 ld a,(CursorYWhereSpellWasCast) 9101 add a,329102 ld (CursorYWhereSpellWasCast),a9103 call .DamageMonsterOnThisTile9105 ld a,(CursorXWhereSpellWasCast) 9106 add a,169107 ld (CursorXWhereSpellWasCast),a9108 call .DamageMonsterOnThisTile9109 jp EndSpellSelectedAndReduceManaCost9111 .DamageMonsterOnThisTile:9112 call CheckCollateralSpellDamage 9113 ret nc9114 9115 ld ix,(MonsterThatIsBeingAttacked) 9116 push ix9117 pop de9118 ld hl,(MonsterThatWasDamagedPreviousCheck)9119 call CompareHLwithDE 9120 ret z 9121 ld (MonsterThatWasDamagedPreviousCheck),de9123 ld hl,(AEOSpellDamage)9125 ld a,BattleCodePage2Block 9126 call block34 9127 call ReduceSpellDamageFromItems 9129 call MoveMonster.DealDamageToMonster9130 call CheckMonsterDied 9131 .WaitExplosionMonster:9132 ld a,(ShowExplosionSprite?) 9133 or a9134 jr nz,.WaitExplosionMonster9135 ret9137CheckCollateralSpellDamage: 9138 ld ix,Monster19139 call .CheckPointerOnCreature9140 ld ix,Monster29141 call .CheckPointerOnCreature9142 ld ix,Monster39143 call .CheckPointerOnCreature9144 ld ix,Monster49145 call .CheckPointerOnCreature9146 ld ix,Monster59147 call .CheckPointerOnCreature9148 ld ix,Monster69149 call .CheckPointerOnCreature9150 ld ix,Monster79151 call .CheckPointerOnCreature9152 ld ix,Monster89153 call .CheckPointerOnCreature9154 ld ix,Monster99155 call .CheckPointerOnCreature9156 ld ix,Monster109157 call .CheckPointerOnCreature9158 ld ix,Monster119159 call .CheckPointerOnCreature9160 ld ix,Monster129161 call .CheckPointerOnCreature9162 xor a 9163 ret9164 9165 .CheckPointerOnCreature:9166 call .Check1TileMonsterStandsOn 9167 9168 ld a,(ix+MonsterNX)9169 cp 179170 ret c9171 ld a,(CursorXWhereSpellWasCast)9172 ld c,a9173 ld a,(ix+MonsterX)9174 add a,169175 call .Check9177 9178 ld a,(ix+MonsterNX)9179 cp 339180 ret c9181 ld a,(CursorXWhereSpellWasCast)9182 ld c,a9183 ld a,(ix+MonsterX)9184 add a,329185 call .Check9187 9188 ld a,(ix+MonsterNX)9189 cp 579190 ret c9191 ld a,(CursorXWhereSpellWasCast)9192 ld c,a9193 ld a,(ix+MonsterX)9194 add a,489195 call .Check9196 ret9197 .Check1TileMonsterStandsOn:9198 ld a,(CursorXWhereSpellWasCast)9199 ld c,a9200 ld a,(ix+MonsterX)9202 .Check:9203 cp c9204 ret nz9206 ld a,(ix+MonsterY)9207 ld c,a9208 ld a,(ix+MonsterNY)9209 add a,c9210 ld c,a9212 ld a,(CursorYWhereSpellWasCast)9213 add a,0179214 cp c9215 ret nz9217 pop af 9218 pop af9220 ld (MonsterThatIsBeingAttacked),ix9221 ld a,(ix+MonsterX)9222 ld (MonsterThatIsBeingAttackedX),a9223 ld a,(ix+MonsterNX)9224 ld (MonsterThatIsBeingAttackedNX),a9225 ld a,(ix+MonsterY)9226 ld (MonsterThatIsBeingAttackedY),a9227 ld a,(ix+MonsterNY)9228 ld (MonsterThatIsBeingAttackedNY),a9229 scf 9230 ret9232SpellTeleportRoutine:9233 ld a,19234 ld (MoVeMonster?),a 9235 xor a9236 ld (MonsterAnimationSpeed),a9237 ld (MonsterAnimationStep),a9238 ld iy,MonsterMovementPath9239 ld (iy+0),TeleportMovement 9241 call SetCurrentActiveMOnsterInIX9243 ld a,(Monster0+MonsterY)9244 sub a,(ix+MonsterNY)9245 add a,179246 ld (iy+1),a 9247 ld a,(Monster0+MonsterX)9248 ld (iy+2),a 9250 ld (MonsterThatIsBeingAttacked),ix9251 ld iy,TeleportAnimation9252 call AnimateSpell9254 ld ix,(MonsterThatIsBeingAttacked)9255 ld a,24 9256 call PrepBattleTextForSpells9257 jp EndSpellSelectedAndReduceManaCost9259PrepBattleTextForSpells: 9260 ld (BattleTextQ),a9261 ld a,29262 ld (SetBattleText?),a 9263 jp SetMonsterNameInBattleTextQ492659266SetSpellInEmptyStatusSlot: 9268push ix9270 ld c,a 9271 and %1111 0000 9272 ld d,a 9274 ld b,5 9276 .loop:9277 ld a,(ix+MonsterStatusEffect1)9278 or a9279 jr z,.EmptySlotFound9280 9281 and %1111 0000 9282 cp d 9283 jr z,.EmptySlotFound 9284 9285 inc ix 9286 djnz .loop9288pop ix9289 ret9290 9293 .EmptySlotFound:9294 ld (ix+MonsterStatusEffect1),c9297pop ix9298 ret9309EraseMonsterPreviousFrame:9310 ld a,(activepage)9311 xor 19312 ld (EraseMonster+dPage),a9314 ld a,(ix+MonsterYPrevious)9315 ld (EraseMonster+sy),a 9316 ld (EraseMonster+dy),a9318 ld a,(ix+MonsterXPrevious)9319 ld (EraseMonster+dx),a9320 ld (EraseMonster+sx),a9322 ld bc,(NXAndNY)9323 ld a,c9324 inc a 9325 add a,a9328 ld a,(ix+MonsterNXPrevious)9331 ld (EraseMonster+nx),a9332 ld a,b9334 ld a,(ix+MonsterNYPrevious)9335 93369337 9338 ld (EraseMonster+ny),a9340 ld hl,EraseMonster9341 call docopy9342 ret9344SetBattleFieldGraphics:9345 ld hl,$4000 + (000*128) + (000/2) - 1289346 ld de,$0000 + (016*128) + (000/2) - 1289347 ld bc,$0000 + (212*256) + (256/2)93489353 ld a,(BattleGraphicsBlock) 9354 jp CopyRamToVramCorrectedCastleOverview 9356HeroFledRetreating: 9357 xor a9358 ld (ix+HeroUnits+00),UnitWhenRetreated | UnitWhenRetreated: equ 2559359 ld (ix+HeroUnits+01),a9360 ld (ix+HeroUnits+02),a9362 ld (ix+HeroUnits+03),a9363 ld (ix+HeroUnits+04),a9364 ld (ix+HeroUnits+05),a9366 ld (ix+HeroUnits+06),a9367 ld (ix+HeroUnits+07),a9368 ld (ix+HeroUnits+08),a9370 ld (ix+HeroUnits+09),a9371 ld (ix+HeroUnits+10),a9372 ld (ix+HeroUnits+11),a9374 ld (ix+HeroUnits+12),a9375 ld (ix+HeroUnits+13),a9376 ld (ix+HeroUnits+14),a9378 ld (ix+HeroUnits+15),a9379 ld (ix+HeroUnits+16),a9380 ld (ix+HeroUnits+17),a9381 9382HeroFledSurrendering: 9384 ld (ix+HeroStatus),254 9385 ld (ix+Heroy),2559386 ld (ix+Herox),2559388 ld l,(ix+HeroSpecificInfo+0) 9389 ld h,(ix+HeroSpecificInfo+1)9390 ld de,HeroInfoNumber9391 add hl,de9392 ld b,(hl) 9394 ld a,(CurrentActiveMonster) 9395 cp 79396 ld a,(whichplayernowplaying?) 9397 jr c,.FleeingPlayerFound9398 ld a,(PlayerThatGetsAttacked)9399 .FleeingPlayerFound:9401 9402 cp 19403 ld hl,TavernHeroesPlayer1+TavernHeroTableLenght-29404 jr z,.loop9405 cp 29406 ld hl,TavernHeroesPlayer2+TavernHeroTableLenght-29407 jr z,.loop9408 cp 39409 ld hl,TavernHeroesPlayer3+TavernHeroTableLenght-29410 jr z,.loop9411 ld hl,TavernHeroesPlayer4+TavernHeroTableLenght-29412 .loop:9413 ld a,(hl)9414 or a9415 jr nz,.HeroFound9416 dec hl9417 jr .loop9419 .HeroFound:9420 inc hl9421 ld (hl),b9422 ret9423 9424DeactivateHeroThatAttacks:9425 ld a,(whichplayernowplaying?)9426 ld (PlayerWhoLostAHeroInBattle?),a9427 ld a,39428 ld (PlayerLostHeroInBattle?),a9430 9431 ld de,lenghtherotable9432 ld hl,lenghtherotable*(amountofheroesperplayer-1)9434 call SetHero1ForCurrentPlayerInIX9435 push ix9436 pop iy 9437 ld ix,(plxcurrentheroAddress) 9438 9439 ld b,amountofheroesperplayer9440 .loop:9441 ld a,(iy+HeroStatus) 9442 inc a 9443 jp z,.endcheck1 9445 ld a,(ix+HeroY)9446 cp (iy+HeroY)9447 jp nz,.endcheck19449 ld a,(ix+HeroX)9450 cp (iy+HeroX)9451 jp z,.HeroTouchesEnemyHero9452 .endcheck1:9453 add iy,de9454 or a9455 sbc hl,de 9456 djnz .loop9457 ret9459 .HeroTouchesEnemyHero:9460 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl9462 ld ix,(plxcurrentheroAddress) 9463 ld (ix+HeroStatus),255 9465 push ix9466 pop hl9467 ld de,lenghtherotable9468 add hl,de 9470 push ix9471 pop de 9472 9473 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9475 ld a,b9476 or c9477 ret z 9479 ldir9481 9482 ld a,(whichplayernowplaying?)9483 dec a9484 ld hl,pl1hero8y9485 jr z,.LastHeroFound9486 dec a9487 ld hl,pl2hero8y9488 jr z,.LastHeroFound9489 dec a9490 ld hl,pl3hero8y9491 jr z,.LastHeroFound9492 ld hl,pl4hero8y9493 .LastHeroFound:9494 ld (hl),255 9495 ret9496 9497SetHero1ForPlayerThatGotAttackedInIX: 9498 ld a,(PlayerThatGetsAttacked) 9499 dec a9500 ld ix,pl1hero1y9501 ret z9502 dec a9503 ld ix,pl2hero1y9504 ret z9505 dec a9506 ld ix,pl3hero1y9507 ret z9508 ld ix,pl4hero1y9509 ret9510 9511DeactivateHeroThatGetsAttacked: 9512 ld ix,(HeroThatGetsAttacked) 9514 push ix9515 pop hl9516 ld a,l9517 or h9518 jr z,.NeutralEnemyDied9520 ld a,(PlayerThatGetsAttacked)9521 ld (PlayerWhoLostAHeroInBattle?),a9522 ld a,39523 ld (PlayerLostHeroInBattle?),a9525 9526 ld de,lenghtherotable9527 ld hl,lenghtherotable*(amountofheroesperplayer-1)9529 call SetHero1ForPlayerThatGotAttackedInIX9530 push ix9531 pop iy 9532 ld ix,(HeroThatGetsAttacked) 9533 9534 ld b,amountofheroesperplayer9535 .loop:9536 ld a,(iy+HeroStatus) 9537 inc a 9538 jp z,.endcheck1 9540 ld a,(ix+HeroY)9541 cp (iy+HeroY)9542 jp nz,.endcheck19544 ld a,(ix+HeroX)9545 cp (iy+HeroX)9546 jp z,.HeroTouchesEnemyHero9547 .endcheck1:9548 add iy,de9549 or a9550 sbc hl,de 9551 djnz .loop9552 ret9554 .HeroTouchesEnemyHero:9555 ld (AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked),hl95579559 ld ix,(HeroThatGetsAttacked) 95619567 ld (ix+HeroStatus),255 9569 push ix9570 pop hl9571 ld de,lenghtherotable9572 add hl,de 9574 push ix9575 pop de 9576 9577 ld bc,(AmountHeroesTimesLenghtHerotableBelowHeroThatGetsAttacked) 9579 ld a,b9580 or c9581 ret z 9583 ldir9585 ld iy,(LastHeroForPlayerThatGetsAttacked)9586 ld (iy+HeroStatus),255 9587 ret9589 .NeutralEnemyDied:9590 ld a,19591 ld (NeutralEnemyDied?),a9592 ret9594AnimateSpell:9595 jp GoAnimateSpell9634CopyActivePageToInactivePage:9635 ld a,(activepage)9636 or a9637 ld hl,CopyPage1To09638 jp nz,DoCopy9639 ld hl,CopyPage0To1PlayingField9640 jp DoCopy9650DisplayGuardTowerRewardCOde:9651call screenon9653 ld bc,SFX_GuardTowerReward9654 call RePlayerSFX_PlayCh1 9656 call SetResourcesCurrentPlayerinIX 9658 ld l,(ix+0)9659 ld h,(ix+1) 9660 ld de,(GuardTowerReward)9661 add hl,de9662 jr c,.EndCheckOverFlow9663 ld (ix+0),l9664 ld (ix+1),h 9665 .EndCheckOverFlow:9666 96679669 call SetGuardTowerRewardVButton9671 call SetGuardTowerRewardGraphics 9672 call SetGuardTowerRewardText9673 call SwapAndSetPage 9674 call CopyActivePageToInactivePage9675 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9676 call DoCopy9678 .engine: 9679 call SwapAndSetPage 9680 call PopulateControls 96829687 ld a,(NewPrContr)9688 bit 5,a 9689 ret nz9691 ld ix,GenericButtonTable9692 call CheckButtonInteractionControlsNotOnInt9693 ret c9695 ld ix,GenericButtonTable9696 call InitiateBattle.SetGenericButtons 9698 call .CheckEndWindow 9700 halt9701 jp .engine9704 .CheckEndWindow:9705 ld a,(NewPrContr)9706 bit 4,a 9707 ret z9709 ld a,(spat+0) 9710 cp 044 9711 jr c,.Exit9712 cp 044+095 9713 jr nc,.Exit9714 9715 ld a,(spat+1) 9717 add a,069719 cp 030 9720 jr c,.Exit9721 cp 030+144 9722 ret c9724 .Exit:9725 pop af9726 ret9728SetGuardTowerRewardVButton:9729 ld hl,SetGuardTowerRewardVButtonTable-29730 ld de,GenericButtonTable-29731 ld bc,2+(GenericButtonTableLenghtPerButton*01)9732 ldir9733 ret9735SetGuardTowerRewardVButtonTableGfxBlock: db PlayerStartTurnBlock9736SetGuardTowerRewardVButtonTableAmountOfButtons: db 019737SetGuardTowerRewardVButtonTable: 9738 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9740.Button1Ytop: equ 1139741.Button1YBottom: equ .Button1Ytop + 0199742.Button1XLeft: equ 1469743.Button1XRight: equ .Button1XLeft + 0209745SetGuardTowerRewardText:9746 call SetFontPage0Y212BattleCode 9748 ld b,060+00 9749 ld c,051+00 9750 ld hl,TextGuardTowerReward19751 call SetText 9753 ld b,040+00 9754 ld c,064+00 9755 ld hl,TextGuardTowerReward29756 call SetText 9758 ld hl,(GuardTowerReward)9759 ld b,080+00 9760 ld c,100+00 9761 call SetNumber16BitCastle9763 ld b,106+00 9764 ld c,100+00 9765 ld hl,TextGuardTowerReward39766 call SetText 9767 ret9769TextGuardTowerReward1:9770 db "Guard Tower Reward",2559771TextGuardTowerReward2:9772 db "The dust of battle settles,",2549773 db "revealing a reward within the",2549774 db "conquered tower:",2559775TextGuardTowerReward3:9776 db "Gold",2559785SetGuardTowerRewardGraphics:9786 ld hl,$4000 + (000*128) + (000/2) - 1289787 ld de,$0000 + (44*128) + (030/2) - 1289788 ld bc,$0000 + (095*256) + (144/2)9789 ld a,PlayerStartTurnBlock 9790 jp CopyRamToVramCorrectedCastleOverview 9792DisplayGuardTowerCOde:9793 call SetGuardTowerButtons9794 call SetGuardTowerGraphics 9795 call SetGuardTowerText9796 call SwapAndSetPage 9797 call CopyActivePageToInactivePage9798 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady9799 call DoCopy9801 ld bc,SFX_GuardTowerEncountered9802 call RePlayerSFX_PlayCh1 98049806 9807 .engine: 9808 call SwapAndSetPage 9809 call PopulateControls 98119816 ld a,(NewPrContr)9817 bit 5,a 9818 ret nz9820 ld ix,GenericButtonTable9821 call CheckButtonInteractionControlsNotOnInt9823 call .CheckButtonClicked 9825 ld ix,GenericButtonTable9826 call InitiateBattle.SetGenericButtons 9828 halt9829 jp .engine9831 .CheckButtonClicked:9832 ret nc9833 pop af 9835 ld a,b9836 cp 19837 ret nz 9838 ld a,1 9839 ld (FightGuardTowerMonster?),a 9840 ret9842SetGuardTowerButtons:9843 ld hl,SetGuardTowerButtonTable-29844 ld de,GenericButtonTable-29845 ld bc,2+(GenericButtonTableLenghtPerButton*02)9846 ldir9847 ret9849SetGuardTowerButtonTableGfxBlock: db RetreatBlock9850SetGuardTowerButtonTableAmountOfButtons: db 029851SetGuardTowerButtonTable: 9853 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 9854 9855 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 9857.Button1Ytop: equ 1489858.Button1YBottom: equ .Button1Ytop + 0189859.Button1XLeft: equ 0729860.Button1XRight: equ .Button1XLeft + 0209862.Button2Ytop: equ 1479863.Button2YBottom: equ .Button2Ytop + 0199864.Button2XLeft: equ 1129865.Button2XRight: equ .Button2XLeft + 0209867SetFontPage0Y212BattleCode: 9868 ld hl,$4000 + (000*128) + (000/2) - 1289869 ld de,$0000 + (212*128) + (000/2) - 1289870 ld bc,$0000 + (006*256) + (256/2)9871 ld a,CastleOverviewFontBlock 9872 jp CopyRamToVramCorrectedWithoutActivePageSetting 9875SetGuardTowerText:9876 call SetFontPage0Y212BattleCode 9878 ld b,078+00 9879 ld c,031+00 9880 ld hl,TextGuardTower19881 call SetText 9883 ld b,027+00 9884 ld c,041+00 9885 ld hl,TextGuardTower29886 call SetText 9888 ld b,040+00 9889 ld c,140+00 9890 ld hl,TextGuardTower39891 call SetText 9893 call SetAmountInHL9894 ld b,121+00 9895 ld c,055+00 9896 call SetText 9897 9898 ld a,(GuardTowerMonsterLevel)9899 ld l,a9900 ld h,09901 ld b,047+00 9902 ld c,062+00 9903 call SetNumber16BitCastle9904 9905 xor a 9906 ld (MonsterHerocollidedWithOnMap),a9908 call SetMonsterTableInIYNeutralMonster9909 push iy9910 pop hl9911 ld de,MonsterTableName9912 add hl,de9913 ld b,057+00 9914 ld c,062+00 9917 push bc9918 call SetText 9919 pop bc9921 dec hl9922 ld a,(hl)9923 cp "s"9924 ret z9926 ld hl,.TextS9927 ld a,(PutLetter+dx) 9928 ld b,a 9929 jp SetText 9931.TextS: db "s.",2559933TextGuardTower1:9934 db "Guard Tower",2559935TextGuardTower2:9936 db "A majestic ancient guard tower rises  ",2549937 db "before you, concealing treasures ",2549938 db "untold. But defended by",2549939 db "level  ",2559940TextGuardTower3:9941 db "Dare you face them in combat?",2559943SetGuardTowerGraphics:9944 ld hl,$4000 + (000*128) + (000/2) - 1289945 ld de,$0000 + (024*128) + (020/2) - 1289946 ld bc,$0000 + (148*256) + (162/2)9947 ld a,ScrollBlock 9948 call CopyRamToVramCorrectedCastleOverview 9950 ld hl,$4000 + (139*128) + (044/2) - 1289951 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 1289952 ld bc,$0000 + (060*256) + (104/2)9953 ld a,DefeatBlock 9954 call CopyRamToVramCorrectedCastleOverview 9956 ld hl,$4000 + (000*128) + (150/2) - 1289957 ld de,$0000 + ((024+44)*128) + ((020+56)/2) - 1289958 ld bc,$0000 + (070*256) + (064/2)9959 ld a,HeroOverviewStatusGraphicsBlock 9960 jp CopyRamToVramCorrectedCastleOverview 9961 9962MSXHeroes.asm1018 ds $8000-$,$ff1019dephase10211022BattleCodePage2Block: equ $511023phase $80001024 BattleCodePage2.asm1AnimateAutoCombatButton:2 ld a,(AutoCombatButtonPressed?)3 or a4 jr z,.AutoCombatNotOn6 ld a,(framecounter)7 and 159 cp 410 ld hl,$4000 + (072*128) + (196/2) - 12811 jr c,.SetAutoCombatButton13 cp 814 ld hl,$4000 + (072*128) + (214/2) - 12815 jr c,.SetAutoCombatButton17 cp 1218 ld hl,$4000 + (072*128) + (232/2) - 12819 jr c,.SetAutoCombatButton21 ld hl,$4000 + (090*128) + (196/2) - 12823 .SetAutoCombatButton:24 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 25 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 26 ld a,(GenericButtonTable+(GenericButtonTableLenghtPerButton*6))27 or %0000 001128 ld (GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),a29 ret31 .AutoCombatNotOn:32 ld hl,$4000 + (054*128) + (214/2) - 12833 ld (1+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 34 ld hl,$4000 + (054*128) + (232/2) - 12835 ld (3+GenericButtonTable+(GenericButtonTableLenghtPerButton*6)),hl 36 ret38HandleEnemyAI: 39 inc c 40 ld a,d41 cp 12842 jp z,HandleEnemyAIRangeMonster44HandleEnemyAIMeleeMonster:45 ld a,c46 exx47 ld c,a 48 ld b,18 50 ld a,(CurrentActiveMonster) 51 cp 752 jr nc,.RightPlayerIsCurrentlyActive53 54 .LeftPlayerIsCurrentlyActive:55 exx56 ld ix,Monster7 | call .Checkpass1CheckAttackFromTheLeftFirst 57 ld ix,Monster8 | call .Checkpass1CheckAttackFromTheLeftFirst 58 ld ix,Monster9 | call .Checkpass1CheckAttackFromTheLeftFirst 59 ld ix,Monster10 | call .Checkpass1CheckAttackFromTheLeftFirst 60 ld ix,Monster11 | call .Checkpass1CheckAttackFromTheLeftFirst 61 ld ix,Monster12 | call .Checkpass1CheckAttackFromTheLeftFirst 63 ld ix,Monster7 | call .Checkpass2CheckAttackFromTheLeftFirst 64 ld ix,Monster8 | call .Checkpass2CheckAttackFromTheLeftFirst 65 ld ix,Monster9 | call .Checkpass2CheckAttackFromTheLeftFirst 66 ld ix,Monster10 | call .Checkpass2CheckAttackFromTheLeftFirst 67 ld ix,Monster11 | call .Checkpass2CheckAttackFromTheLeftFirst 68 ld ix,Monster12 | call .Checkpass2CheckAttackFromTheLeftFirst 70 71 inc c72 exx73 djnz .LeftPlayerIsCurrentlyActive74 75 ld a,176 ld (DefendButtonPressed?),a 77 ret79 .RightPlayerIsCurrentlyActive:80 exx81 ld ix,Monster1 | call .Checkpass1 82 ld ix,Monster2 | call .Checkpass1 83 ld ix,Monster3 | call .Checkpass1 84 ld ix,Monster4 | call .Checkpass1 85 ld ix,Monster5 | call .Checkpass1 86 ld ix,Monster6 | call .Checkpass1 88 ld ix,Monster1 | call .Checkpass2 89 ld ix,Monster2 | call .Checkpass2 90 ld ix,Monster3 | call .Checkpass2 91 ld ix,Monster4 | call .Checkpass2 92 ld ix,Monster5 | call .Checkpass2 93 ld ix,Monster6 | call .Checkpass2 95 96 inc c97 exx98 djnz .RightPlayerIsCurrentlyActive99 100 ld a,1101 ld (DefendButtonPressed?),a 102 ret103 104 .Checkpass2: 105 ld (MonsterThatIsBeingAttacked),ix106 jr .endCheckAmount108 .Checkpass1: 109 ld (MonsterThatIsBeingAttacked),ix110 ld l,(ix+MonsterAmount)111 ld h,(ix+MonsterAmount+1)112 ld de,10 113 call CompareHLwithDE114 ret c 115 .endCheckAmount:116 ld a,(ix+MonsterHP)117 or a118 ret z 119 ld a,(ix+MonsterX)120 ld (MonsterThatIsBeingAttackedX),a121 ld a,(ix+MonsterNX)122 ld (MonsterThatIsBeingAttackedNX),a123 ld a,(ix+MonsterY)124 ld (MonsterThatIsBeingAttackedY),a125 ld a,(ix+MonsterNY)126 ld (MonsterThatIsBeingAttackedNY),a128 call .CanMonsterBeAttackedFromTheRIght?129 call .CanMonsterBeAttackedFromTheRIghtBottom?130 call .CanMonsterBeAttackedFromTheRIghtTop?131 call .CanMonsterBeAttackedFromTheLeft?132 call .CanMonsterBeAttackedFromTheLeftBottom?133 call .CanMonsterBeAttackedFromTheLeftTop?134 ret137 .Checkpass2CheckAttackFromTheLeftFirst: 138 ld (MonsterThatIsBeingAttacked),ix139 jr .endCheckAmountCheckAttackFromTheLeftFirst141 .Checkpass1CheckAttackFromTheLeftFirst: 142 ld (MonsterThatIsBeingAttacked),ix143 ld l,(ix+MonsterAmount)144 ld h,(ix+MonsterAmount+1)145 ld de,10 146 call CompareHLwithDE147 ret c 148 .endCheckAmountCheckAttackFromTheLeftFirst:149 ld a,(ix+MonsterHP)150 or a151 ret z 152 ld a,(ix+MonsterX)153 ld (MonsterThatIsBeingAttackedX),a154 ld a,(ix+MonsterNX)155 ld (MonsterThatIsBeingAttackedNX),a156 ld a,(ix+MonsterY)157 ld (MonsterThatIsBeingAttackedY),a158 ld a,(ix+MonsterNY)159 ld (MonsterThatIsBeingAttackedNY),a161 call .CanMonsterBeAttackedFromTheLeft?162 call .CanMonsterBeAttackedFromTheLeftBottom?163 call .CanMonsterBeAttackedFromTheLeftTop?164 call .CanMonsterBeAttackedFromTheRIght?165 call .CanMonsterBeAttackedFromTheRIghtBottom?166 call .CanMonsterBeAttackedFromTheRIghtTop?167 ret169 .CanMonsterBeAttackedFromTheLeftBottom?:170 call FindMonsterInBattleFieldGrid 171 dec hl172 ld de,LenghtBattleField173 add hl,de174 call .CheckLeftBottomWidth1Tile175 ld a,(ix+MonsterNX)176 cp 17177 ret c178 inc hl179 inc hl180 call .CheckLeftBottomWidth1Tile181 ld a,(ix+MonsterNX)182 cp 33183 ret c184 inc hl185 inc hl186 call .CheckLeftBottomWidth1Tile187 ld a,(ix+MonsterNX)188 cp 57189 ret c190 inc hl191 inc hl192 call .CheckLeftBottomWidth1Tile193 ret194 .CheckLeftBottomWidth1Tile:195 ld a,(hl)196 cp 255 197 ret z 198 cp c 199 ret nc200 pop af201 pop af202 pop af203 push bc 204 ld c,012 205 call CheckSpaceToMoveMonster.CursorLocationSet206 pop bc 207 exx208 ld hl,MonsterMovementPath209 ld d,0210 ld e,c211 dec e212 add hl,de213 ld (hl),255 214 ret216 .CanMonsterBeAttackedFromTheLeftTop?:217 call FindMonsterInBattleFieldGrid 218 dec hl219 ld de,LenghtBattleField220 or a221 sbc hl,de222 call .CheckLeftTopWidth1Tile223 ld a,(ix+MonsterNX)224 cp 17225 ret c226 inc hl227 inc hl228 call .CheckLeftTopWidth1Tile229 ld a,(ix+MonsterNX)230 cp 33231 ret c232 inc hl233 inc hl234 call .CheckLeftTopWidth1Tile235 ld a,(ix+MonsterNX)236 cp 57237 ret c238 inc hl239 inc hl240 call .CheckLeftTopWidth1Tile241 ret242 .CheckLeftTopWidth1Tile:243 ld a,(hl)244 cp 255 245 ret z 246 cp c 247 ret nc248 pop af249 pop af250 pop af251 push bc 252 ld c,014 253 call CheckSpaceToMoveMonster.CursorLocationSet254 pop bc 255 exx256 ld hl,MonsterMovementPath257 ld d,0258 ld e,c259 dec e260 add hl,de261 ld (hl),255 262 ret264 .CanMonsterBeAttackedFromTheRIghtBottom?:265 call FindMonsterInBattleFieldGrid 266 inc hl267 ld de,LenghtBattleField268 add hl,de269 call .CheckRightBottomWidth1Tile270 ld a,(ix+MonsterNX)271 cp 17272 ret c273 inc hl274 inc hl275 call .CheckRightBottomWidth1Tile276 ld a,(ix+MonsterNX)277 cp 33278 ret c279 inc hl280 inc hl281 call .CheckRightBottomWidth1Tile282 ld a,(ix+MonsterNX)283 cp 57284 ret c285 inc hl286 inc hl287 call .CheckRightBottomWidth1Tile288 ret289 .CheckRightBottomWidth1Tile:290 ld a,(hl)291 cp 255 292 ret z 293 cp c 294 ret nc295 pop af296 pop af297 pop af298 push bc 299 ld c,018 300 call CheckSpaceToMoveMonster.CursorLocationSet301 pop bc 302 exx303 ld hl,MonsterMovementPath304 ld d,0305 ld e,c306 dec e307 add hl,de308 ld (hl),255 309 ret311 .CanMonsterBeAttackedFromTheRIghtTop?:312 call FindMonsterInBattleFieldGrid 313 inc hl314 ld de,LenghtBattleField315 or a316 sbc hl,de317 call .CheckRightTopWidth1Tile318 ld a,(ix+MonsterNX)319 cp 17320 ret c321 inc hl322 inc hl323 call .CheckRightTopWidth1Tile324 ld a,(ix+MonsterNX)325 cp 33326 ret c327 inc hl328 inc hl329 call .CheckRightTopWidth1Tile330 ld a,(ix+MonsterNX)331 cp 57332 ret c333 inc hl334 inc hl335 call .CheckRightTopWidth1Tile336 ret337 .CheckRightTopWidth1Tile:338 ld a,(hl)339 cp 255 340 ret z 341 cp c 342 ret nc343 pop af344 pop af345 pop af346 push bc 347 ld c,016 348 call CheckSpaceToMoveMonster.CursorLocationSet349 pop bc 350 exx351 ld hl,MonsterMovementPath352 ld d,0353 ld e,c354 dec e355 add hl,de356 ld (hl),255 357 ret359 .CanMonsterBeAttackedFromTheLeft?:360 call FindMonsterInBattleFieldGrid 361 dec hl362 dec hl364 push ix365 push hl366 call SetCurrentActiveMOnsterInIX367 ld a,(ix+MonsterNX)368 pop hl369 pop ix371 cp 17372 jr c,.MonsterWidthFound_Left 373 dec hl374 dec hl375 cp 33376 jr c,.MonsterWidthFound_Left 377 dec hl378 dec hl379 cp 57380 jr c,.MonsterWidthFound_Left 381 dec hl382 dec hl 383 .MonsterWidthFound_Left:384 385 ld a,(hl)386 cp 255 387 ret z 388 cp c 389 ret nc390 pop af391 pop af392 push bc 393 ld c,013 394 call CheckSpaceToMoveMonster.CursorLocationSet395 pop bc 396 397 exx398 ld hl,MonsterMovementPath399 ld d,0400 ld e,c401 dec e402 add hl,de403 ld (hl),255 404 ret405 406 .CanMonsterBeAttackedFromTheRIght?:407 call FindMonsterInBattleFieldGrid 408 inc hl409 inc hl411 ld a,(ix+MonsterNX)412 cp 17413 jr c,.MonsterWidthFound_Right 414 inc hl415 inc hl416 cp 33417 jr c,.MonsterWidthFound_Right 418 inc hl419 inc hl420 cp 57421 jr c,.MonsterWidthFound_Right 422 inc hl423 inc hl 424 .MonsterWidthFound_Right:426 ld a,(hl)427 cp 255 428 ret z 429 cp c 430 ret nc431 pop af432 pop af433 push bc 434 ld c,017 435 call CheckSpaceToMoveMonster.CursorLocationSet436 pop bc 437 438 exx439 ld hl,MonsterMovementPath440 ld d,0441 ld e,c442 dec e443 add hl,de444 ld (hl),255 445 ret447HandleEnemyAIRangeMonster:448 ld a,(CurrentActiveMonster) 449 cp 7450 jp nc,.RightPlayerIsCurrentlyActive452 .LeftPlayerIsCurrentlyActive:453454 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 455 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 456 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 457 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 458 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 459 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 461462 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 463 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 464 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 465 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 466 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 467 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 469470 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 471 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 472 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 473 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 474 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 475 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 477478 ld ix,Monster7 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 479 ld ix,Monster8 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 480 ld ix,Monster9 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 481 ld ix,Monster10 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 482 ld ix,Monster11 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 483 ld ix,Monster12 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 484 ret486 .RightPlayerIsCurrentlyActive:487488 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 489 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 490 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 491 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 492 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 493 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass1 495496 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 497 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 498 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 499 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 500 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 501 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass2 503504 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 505 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 506 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 507 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 508 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 509 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass3 511512 ld ix,Monster1 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 513 ld ix,Monster2 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 514 ld ix,Monster3 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 515 ld ix,Monster4 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 516 ld ix,Monster5 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 517 ld ix,Monster6 | call .CheckIfMonsterCanBeAttacked | call .CheckPass4 518 ret520 .CheckPass4: 521 ld a,(MoVeMonster?) 522 or a523 ret z 524 pop af 525 ret527 .CheckPass3: 528 ld a,(MoVeMonster?) 529 or a530 ret z 531 ld a,(BrokenArrow?) 532 or a533 ret nz 534 pop af 535 ret537 .CheckPass2: 538 ld a,(MoVeMonster?) 539 or a540 ret z 541 ld ix,(MonsterThatIsBeingAttacked)542 ld l,(ix+MonsterAmount)543 ld h,(ix+MonsterAmount+1)544 ld de,10 545 call CompareHLwithDE 546 ret c547 pop af 548 ret550 .CheckPass1: 551 ld a,(MoVeMonster?) 552 or a553 ret z 554 ld a,(BrokenArrow?) 555 or a556 ret nz557 ld ix,(MonsterThatIsBeingAttacked)558 ld l,(ix+MonsterAmount)559 ld h,(ix+MonsterAmount+1)560 ld de,10 561 call CompareHLwithDE 562 ret c563 pop af 564 ret566 .CheckIfMonsterCanBeAttacked:567 xor a568 ld (MoVeMonster?),a 570 ld (MonsterThatIsBeingAttacked),ix571 ld a,(ix+MonsterHP)572 or a573 ret z 574 ld a,(ix+MonsterX)575 ld (MonsterThatIsBeingAttackedX),a576 ld a,(ix+MonsterNX)577 ld (MonsterThatIsBeingAttackedNX),a578 ld a,(ix+MonsterY)579 ld (MonsterThatIsBeingAttackedY),a580 ld a,(ix+MonsterNY)581 ld (MonsterThatIsBeingAttackedNY),a582 583 584 call RangedMonsterCheck586 ld a,(BrokenArrow?) 587 cp 2 588 ret z590 call SetCurrentActiveMOnsterInIX591 ld a,(ix+MonsterX)592 ld iy,(MonsterThatIsBeingAttacked)593 cp (iy+MonsterX)594 ld c,013 595 jr c,.DirectionFound596 ld c,017 597 .DirectionFound:598 ld a,1599 ld (MoVeMonster?),a 600 xor a601 ld (MonsterAnimationSpeed),a602 ld (MonsterAnimationStep),a603 ld iy,MonsterMovementPath604 ld (iy),c 605 ret607SetBattlefieldCasualtiesDefender:608 ld ix,(HeroThatGetsAttacked) 609 push ix610 pop hl611 ld a,l612 or h613 jp z,.SetBattlefieldCasualtiesDefenderNeutralMonster615 ld a,173+16616 ld (CasualtiesOverviewCopy+dy),a618 ld hl,$4000 + (142*128) + (044/2) - 128619 ld de,$0000 + ((212+16)*128) + (020/2) - 128620 ld bc,$0000 + (022*256) + (138/2)621 ld a,VictoryBlock 622 call CopyRamToVramCorrectedCastleOverview 624 ld b,004 625 ld c,0 626 ld de,$0000 + ((214+16)*128) + (024/2) - 128 628 ld iy,(HeroThatGetsAttacked) 629 ld a,(iy+HeroUnits+0) 630 ld l,(iy+HeroUnits+1)631 ld h,(iy+HeroUnits+2) 632 ld ix,Monster7633 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied635 ld iy,(HeroThatGetsAttacked) 636 ld a,(iy+HeroUnits+3) 637 ld l,(iy+HeroUnits+4)638 ld h,(iy+HeroUnits+5) 639 ld ix,Monster8640 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied642 ld iy,(HeroThatGetsAttacked) 643 ld a,(iy+HeroUnits+6) 644 ld l,(iy+HeroUnits+7)645 ld h,(iy+HeroUnits+8) 646 ld ix,Monster9647 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied649 ld iy,(HeroThatGetsAttacked) 650 ld a,(iy+HeroUnits+9) 651 ld l,(iy+HeroUnits+10)652 ld h,(iy+HeroUnits+11) 653 ld ix,Monster10654 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied656 ld iy,(HeroThatGetsAttacked) 657 ld a,(iy+HeroUnits+12) 658 ld l,(iy+HeroUnits+13)659 ld h,(iy+HeroUnits+14) 660 ld ix,Monster11661 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied663 ld iy,(HeroThatGetsAttacked) 664 ld a,(iy+HeroUnits+15) 665 ld l,(iy+HeroUnits+16)666 ld h,(iy+HeroUnits+17) 667 ld ix,Monster12668 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied669 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked671.SetBattlefieldCasualtiesDefenderNeutralMonster:672 ld a,173+16673 ld (CasualtiesOverviewCopy+dy),a675 ld hl,$4000 + (142*128) + (044/2) - 128676 ld de,$0000 + ((212+16)*128) + (020/2) - 128677 ld bc,$0000 + (022*256) + (138/2)678 ld a,VictoryBlock 679 call CopyRamToVramCorrectedCastleOverview 681 ld b,004 682 ld c,0 683 ld de,$0000 + ((214+16)*128) + (024/2) - 128 685 ld iy,ListOfMonstersToPutMonster7686 ld a,(iy+0) 687 ld l,(iy+1)688 ld h,(iy+2) 689 ld ix,Monster7690 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied692 ld iy,ListOfMonstersToPutMonster8693 ld a,(iy+0) 694 ld l,(iy+1)695 ld h,(iy+2) 696 ld ix,Monster8697 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied699 ld iy,ListOfMonstersToPutMonster9700 ld a,(iy+0) 701 ld l,(iy+1)702 ld h,(iy+2) 703 ld ix,Monster9704 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied706 ld iy,ListOfMonstersToPutMonster10707 ld a,(iy+0) 708 ld l,(iy+1)709 ld h,(iy+2) 710 ld ix,Monster10711 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied713 ld iy,ListOfMonstersToPutMonster11714 ld a,(iy+0) 715 ld l,(iy+1)716 ld h,(iy+2) 717 ld ix,Monster11718 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied720 ld iy,ListOfMonstersToPutMonster12721 ld a,(iy+0) 722 ld l,(iy+1)723 ld h,(iy+2) 724 ld ix,Monster12725 call SetBattlefieldCasualtiesAttacker.CheckAmountOfMonstersSlotDied726 jp SetBattlefieldCasualtiesAttacker.AllSlotsChecked728SetBattlefieldCasualtiesAttacker:729 ld a,144+16730 ld (CasualtiesOverviewCopy+dy),a732 ld hl,$4000 + (142*128) + (044/2) - 128733 ld de,$0000 + ((212+16)*128) + (020/2) - 128734 ld bc,$0000 + (022*256) + (138/2)735 ld a,VictoryBlock 736 call CopyRamToVramCorrectedCastleOverview 738 ld b,004 739 ld c,0 740 ld de,$0000 + ((214+16)*128) + (024/2) - 128 742 ld iy,(plxcurrentheroAddress) 743 ld a,(iy+HeroUnits+0) 744 ld l,(iy+HeroUnits+1)745 ld h,(iy+HeroUnits+2) 746 ld ix,Monster1747 call .CheckAmountOfMonstersSlotDied749 ld iy,(plxcurrentheroAddress) 750 ld a,(iy+HeroUnits+3) 751 ld l,(iy+HeroUnits+4)752 ld h,(iy+HeroUnits+5) 753 ld ix,Monster2754 call .CheckAmountOfMonstersSlotDied756 ld iy,(plxcurrentheroAddress) 757 ld a,(iy+HeroUnits+6) 758 ld l,(iy+HeroUnits+7)759 ld h,(iy+HeroUnits+8) 760 ld ix,Monster3761 call .CheckAmountOfMonstersSlotDied763 ld iy,(plxcurrentheroAddress) 764 ld a,(iy+HeroUnits+9) 765 ld l,(iy+HeroUnits+10)766 ld h,(iy+HeroUnits+11) 767 ld ix,Monster4768 call .CheckAmountOfMonstersSlotDied770 ld iy,(plxcurrentheroAddress) 771 ld a,(iy+HeroUnits+12) 772 ld l,(iy+HeroUnits+13)773 ld h,(iy+HeroUnits+14) 774 ld ix,Monster5775 call .CheckAmountOfMonstersSlotDied777 ld iy,(plxcurrentheroAddress) 778 ld a,(iy+HeroUnits+15) 779 ld l,(iy+HeroUnits+16)780 ld h,(iy+HeroUnits+17) 781 ld ix,Monster6782 call .CheckAmountOfMonstersSlotDied783 .AllSlotsChecked:785 ld a,c 786 or a787 ret z788 dec a789 ld b,1*22 790 ld c,068+ 5*11 791 jr z,.AmountOfSlotsWithCasualtiesFound792 dec a793 ld b,2*22 794 ld c,068+ 4*11 795 jr z,.AmountOfSlotsWithCasualtiesFound796 dec a797 ld b,3*22 798 ld c,068+ 3*11 799 jr z,.AmountOfSlotsWithCasualtiesFound800 dec a801 ld b,4*22 802 ld c,068+ 2*11 803 jr z,.AmountOfSlotsWithCasualtiesFound804 dec a805 ld b,5*22 806 ld c,068+ 1*11 807 jr z,.AmountOfSlotsWithCasualtiesFound808 ld b,6*22 809 ld c,068+ 0*11 811 .AmountOfSlotsWithCasualtiesFound:812 ld a,(activepage) 813 or a814 ld a,1815 jr z,.ActivePageFound816 xor a817 .ActivePageFound:818 ld (CasualtiesOverviewCopy+sPage),a819 ld (CasualtiesOverviewCopy+dPage),a820 821 ld a,b822 ld (CasualtiesOverviewCopy+nx),a823 ld a,c824 ld (CasualtiesOverviewCopy+dx),a825 826 ld hl,CasualtiesOverviewCopy827 call docopy828 ret830 .CheckAmountOfMonstersSlotDied:831 ex af,af'832 833 call .CalculateAmountOfUnitsLost834 ret z836 837 push bc838 ld c,212+17+16 839 push de840 ld a,b841 add a,20842 ld b,a843 call SetNumber16BitCastle844 845 ex af,af'846 call SetSYSX14x14847 pop de848 push de849851 push hl852 ld hl,128853 add hl,de854 add hl,hl855 ex de,hl856 pop hl857 858 call CopyTransparantImageBattleCode 860 pop de861 pop bc863 inc c 865 ld a,b866 add a,22867 ld b,a869 ld hl,22/2870 add hl,de871 ex de,hl872 ret874 .CalculateAmountOfUnitsLost:875 push de876 ld e,(ix+MonsterAmount)877 ld d,(ix+MonsterAmount+1)879 or a880 sbc hl,de 881 pop de882 ret884SetSYSX14x14: 885 ld h,0886 ld l,a887 add hl,hl 888 ld de,UnitSYSXTable14x14Portraits2889 add hl,de890 ld c,(hl)891 inc hl892 ld b,(hl) 893 push bc894 pop hl896 ld a,Enemy14x14PortraitsBlock 897 ld bc,NXAndNY14x14CharaterPortraits898 ret900 901UnitSYSXTable14x14Portraits2: 902 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128903 dw $4000+(14*128)+(00/2)-128, $4000+(14*128)+(14/2)-128, $4000+(14*128)+(28/2)-128, $4000+(14*128)+(42/2)-128, $4000+(14*128)+(56/2)-128, $4000+(14*128)+(70/2)-128, $4000+(14*128)+(84/2)-128, $4000+(14*128)+(98/2)-128, $4000+(14*128)+(112/2)-128, $4000+(14*128)+(126/2)-128, $4000+(14*128)+(140/2)-128, $4000+(14*128)+(154/2)-128, $4000+(14*128)+(168/2)-128, $4000+(14*128)+(182/2)-128, $4000+(14*128)+(196/2)-128, $4000+(14*128)+(210/2)-128, $4000+(14*128)+(224/2)-128, $4000+(14*128)+(238/2)-128904 dw $4000+(28*128)+(00/2)-128, $4000+(28*128)+(14/2)-128, $4000+(28*128)+(28/2)-128, $4000+(28*128)+(42/2)-128, $4000+(28*128)+(56/2)-128, $4000+(28*128)+(70/2)-128, $4000+(28*128)+(84/2)-128, $4000+(28*128)+(98/2)-128, $4000+(28*128)+(112/2)-128, $4000+(28*128)+(126/2)-128, $4000+(28*128)+(140/2)-128, $4000+(28*128)+(154/2)-128, $4000+(28*128)+(168/2)-128, $4000+(28*128)+(182/2)-128, $4000+(28*128)+(196/2)-128, $4000+(28*128)+(210/2)-128, $4000+(28*128)+(224/2)-128, $4000+(28*128)+(238/2)-128905 dw $4000+(42*128)+(00/2)-128, $4000+(42*128)+(14/2)-128, $4000+(42*128)+(28/2)-128, $4000+(42*128)+(42/2)-128, $4000+(42*128)+(56/2)-128, $4000+(42*128)+(70/2)-128, $4000+(42*128)+(84/2)-128, $4000+(42*128)+(98/2)-128, $4000+(42*128)+(112/2)-128, $4000+(42*128)+(126/2)-128, $4000+(42*128)+(140/2)-128, $4000+(42*128)+(154/2)-128, $4000+(42*128)+(168/2)-128, $4000+(42*128)+(182/2)-128, $4000+(42*128)+(196/2)-128, $4000+(42*128)+(210/2)-128, $4000+(42*128)+(224/2)-128, $4000+(42*128)+(238/2)-128906 dw $4000+(56*128)+(00/2)-128, $4000+(56*128)+(14/2)-128, $4000+(56*128)+(28/2)-128, $4000+(56*128)+(42/2)-128, $4000+(56*128)+(56/2)-128, $4000+(56*128)+(70/2)-128, $4000+(56*128)+(84/2)-128, $4000+(56*128)+(98/2)-128, $4000+(56*128)+(112/2)-128, $4000+(56*128)+(126/2)-128, $4000+(56*128)+(140/2)-128, $4000+(56*128)+(154/2)-128, $4000+(56*128)+(168/2)-128, $4000+(56*128)+(182/2)-128, $4000+(56*128)+(196/2)-128, $4000+(56*128)+(210/2)-128, $4000+(56*128)+(224/2)-128, $4000+(56*128)+(238/2)-128907 dw $4000+(70*128)+(00/2)-128, $4000+(70*128)+(14/2)-128, $4000+(70*128)+(28/2)-128, $4000+(70*128)+(42/2)-128, $4000+(70*128)+(56/2)-128, $4000+(70*128)+(70/2)-128, $4000+(70*128)+(84/2)-128, $4000+(70*128)+(98/2)-128, $4000+(70*128)+(112/2)-128, $4000+(70*128)+(126/2)-128, $4000+(70*128)+(140/2)-128, $4000+(70*128)+(154/2)-128, $4000+(70*128)+(168/2)-128, $4000+(70*128)+(182/2)-128, $4000+(70*128)+(196/2)-128, $4000+(70*128)+(210/2)-128, $4000+(70*128)+(224/2)-128, $4000+(70*128)+(238/2)-128908 dw $4000+(84*128)+(00/2)-128, $4000+(84*128)+(14/2)-128, $4000+(84*128)+(28/2)-128, $4000+(84*128)+(42/2)-128, $4000+(84*128)+(56/2)-128, $4000+(84*128)+(70/2)-128, $4000+(84*128)+(84/2)-128, $4000+(84*128)+(98/2)-128, $4000+(84*128)+(112/2)-128, $4000+(84*128)+(126/2)-128, $4000+(84*128)+(140/2)-128, $4000+(84*128)+(154/2)-128, $4000+(84*128)+(168/2)-128, $4000+(84*128)+(182/2)-128, $4000+(84*128)+(196/2)-128, $4000+(84*128)+(210/2)-128, $4000+(84*128)+(224/2)-128, $4000+(84*128)+(238/2)-128910 dw $4000+(98*128)+(00/2)-128, $4000+(98*128)+(14/2)-128, $4000+(98*128)+(28/2)-128, $4000+(98*128)+(42/2)-128, $4000+(98*128)+(56/2)-128, $4000+(98*128)+(70/2)-128, $4000+(98*128)+(84/2)-128, $4000+(98*128)+(98/2)-128, $4000+(98*128)+(112/2)-128, $4000+(98*128)+(126/2)-128, $4000+(98*128)+(140/2)-128, $4000+(98*128)+(154/2)-128, $4000+(98*128)+(168/2)-128, $4000+(98*128)+(182/2)-128, $4000+(98*128)+(196/2)-128, $4000+(98*128)+(210/2)-128, $4000+(98*128)+(224/2)-128, $4000+(98*128)+(238/2)-128911 dw $4000+(112*128)+(00/2)-128, $4000+(112*128)+(14/2)-128, $4000+(112*128)+(28/2)-128, $4000+(112*128)+(42/2)-128, $4000+(112*128)+(56/2)-128, $4000+(112*128)+(70/2)-128, $4000+(112*128)+(84/2)-128, $4000+(112*128)+(98/2)-128, $4000+(112*128)+(112/2)-128, $4000+(112*128)+(126/2)-128, $4000+(112*128)+(140/2)-128, $4000+(112*128)+(154/2)-128, $4000+(112*128)+(168/2)-128, $4000+(112*128)+(182/2)-128, $4000+(112*128)+(196/2)-128, $4000+(112*128)+(210/2)-128, $4000+(112*128)+(224/2)-128, $4000+(112*128)+(238/2)-128912 dw $4000+(126*128)+(00/2)-128, $4000+(126*128)+(14/2)-128, $4000+(126*128)+(28/2)-128, $4000+(126*128)+(42/2)-128, $4000+(126*128)+(56/2)-128, $4000+(126*128)+(70/2)-128, $4000+(126*128)+(84/2)-128, $4000+(126*128)+(98/2)-128, $4000+(126*128)+(112/2)-128, $4000+(126*128)+(126/2)-128, $4000+(126*128)+(140/2)-128, $4000+(126*128)+(154/2)-128, $4000+(126*128)+(168/2)-128, $4000+(126*128)+(182/2)-128, $4000+(126*128)+(196/2)-128, $4000+(126*128)+(210/2)-128, $4000+(126*128)+(224/2)-128, $4000+(126*128)+(238/2)-128913 dw $4000+(140*128)+(00/2)-128, $4000+(140*128)+(14/2)-128, $4000+(140*128)+(28/2)-128, $4000+(140*128)+(42/2)-128, $4000+(140*128)+(56/2)-128, $4000+(140*128)+(70/2)-128, $4000+(140*128)+(84/2)-128, $4000+(140*128)+(98/2)-128, $4000+(140*128)+(112/2)-128, $4000+(140*128)+(126/2)-128, $4000+(140*128)+(140/2)-128, $4000+(140*128)+(154/2)-128, $4000+(140*128)+(168/2)-128, $4000+(140*128)+(182/2)-128, $4000+(140*128)+(196/2)-128, $4000+(140*128)+(210/2)-128, $4000+(140*128)+(224/2)-128, $4000+(140*128)+(238/2)-128915UnitSYSXTable14x24Portraits2: 916 dw $4000+(00*128)+(00/2)-128, $4000+(00*128)+(14/2)-128, $4000+(00*128)+(28/2)-128, $4000+(00*128)+(42/2)-128, $4000+(00*128)+(56/2)-128, $4000+(00*128)+(70/2)-128, $4000+(00*128)+(84/2)-128, $4000+(00*128)+(98/2)-128, $4000+(00*128)+(112/2)-128, $4000+(00*128)+(126/2)-128, $4000+(00*128)+(140/2)-128, $4000+(00*128)+(154/2)-128, $4000+(00*128)+(168/2)-128, $4000+(00*128)+(182/2)-128, $4000+(00*128)+(196/2)-128, $4000+(00*128)+(210/2)-128, $4000+(00*128)+(224/2)-128, $4000+(00*128)+(238/2)-128917 dw $4000+(24*128)+(00/2)-128, $4000+(24*128)+(14/2)-128, $4000+(24*128)+(28/2)-128, $4000+(24*128)+(42/2)-128, $4000+(24*128)+(56/2)-128, $4000+(24*128)+(70/2)-128, $4000+(24*128)+(84/2)-128, $4000+(24*128)+(98/2)-128, $4000+(24*128)+(112/2)-128, $4000+(24*128)+(126/2)-128, $4000+(24*128)+(140/2)-128, $4000+(24*128)+(154/2)-128, $4000+(24*128)+(168/2)-128, $4000+(24*128)+(182/2)-128, $4000+(24*128)+(196/2)-128, $4000+(24*128)+(210/2)-128, $4000+(24*128)+(224/2)-128, $4000+(24*128)+(238/2)-128918 dw $4000+(48*128)+(00/2)-128, $4000+(48*128)+(14/2)-128, $4000+(48*128)+(28/2)-128, $4000+(48*128)+(42/2)-128, $4000+(48*128)+(56/2)-128, $4000+(48*128)+(70/2)-128, $4000+(48*128)+(84/2)-128, $4000+(48*128)+(98/2)-128, $4000+(48*128)+(112/2)-128, $4000+(48*128)+(126/2)-128, $4000+(48*128)+(140/2)-128, $4000+(48*128)+(154/2)-128, $4000+(48*128)+(168/2)-128, $4000+(48*128)+(182/2)-128, $4000+(48*128)+(196/2)-128, $4000+(48*128)+(210/2)-128, $4000+(48*128)+(224/2)-128, $4000+(48*128)+(238/2)-128919 dw $4000+(72*128)+(00/2)-128, $4000+(72*128)+(14/2)-128, $4000+(72*128)+(28/2)-128, $4000+(72*128)+(42/2)-128, $4000+(72*128)+(56/2)-128, $4000+(72*128)+(70/2)-128, $4000+(72*128)+(84/2)-128, $4000+(72*128)+(98/2)-128, $4000+(72*128)+(112/2)-128, $4000+(72*128)+(126/2)-128, $4000+(72*128)+(140/2)-128, $4000+(72*128)+(154/2)-128, $4000+(72*128)+(168/2)-128, $4000+(72*128)+(182/2)-128, $4000+(72*128)+(196/2)-128, $4000+(72*128)+(210/2)-128, $4000+(72*128)+(224/2)-128, $4000+(72*128)+(238/2)-128920 dw $4000+(96*128)+(00/2)-128, $4000+(96*128)+(14/2)-128, $4000+(96*128)+(28/2)-128, $4000+(96*128)+(42/2)-128, $4000+(96*128)+(56/2)-128, $4000+(96*128)+(70/2)-128, $4000+(96*128)+(84/2)-128, $4000+(96*128)+(98/2)-128, $4000+(96*128)+(112/2)-128, $4000+(96*128)+(126/2)-128, $4000+(96*128)+(140/2)-128, $4000+(96*128)+(154/2)-128, $4000+(96*128)+(168/2)-128, $4000+(96*128)+(182/2)-128, $4000+(96*128)+(196/2)-128, $4000+(96*128)+(210/2)-128, $4000+(96*128)+(224/2)-128, $4000+(96*128)+(238/2)-128921 dw $4000+(120*128)+(00/2)-128, $4000+(120*128)+(14/2)-128, $4000+(120*128)+(28/2)-128, $4000+(120*128)+(42/2)-128, $4000+(120*128)+(56/2)-128, $4000+(120*128)+(70/2)-128, $4000+(120*128)+(84/2)-128, $4000+(120*128)+(98/2)-128, $4000+(120*128)+(112/2)-128, $4000+(120*128)+(126/2)-128, $4000+(120*128)+(140/2)-128, $4000+(120*128)+(154/2)-128, $4000+(120*128)+(168/2)-128, $4000+(120*128)+(182/2)-128, $4000+(120*128)+(196/2)-128, $4000+(120*128)+(210/2)-128, $4000+(120*128)+(224/2)-128, $4000+(120*128)+(238/2)-128922 dw $4000+(144*128)+(00/2)-128, $4000+(144*128)+(14/2)-128, $4000+(144*128)+(28/2)-128, $4000+(144*128)+(42/2)-128, $4000+(144*128)+(56/2)-128, $4000+(144*128)+(70/2)-128, $4000+(144*128)+(84/2)-128, $4000+(144*128)+(98/2)-128, $4000+(144*128)+(112/2)-128, $4000+(144*128)+(126/2)-128, $4000+(144*128)+(140/2)-128, $4000+(144*128)+(154/2)-128, $4000+(144*128)+(168/2)-128, $4000+(144*128)+(182/2)-128, $4000+(144*128)+(196/2)-128, $4000+(144*128)+(210/2)-128, $4000+(144*128)+(224/2)-128, $4000+(144*128)+(238/2)-128924 dw $4000+(168*128)+(00/2)-128, $4000+(168*128)+(14/2)-128, $4000+(168*128)+(28/2)-128, $4000+(168*128)+(42/2)-128, $4000+(168*128)+(56/2)-128, $4000+(168*128)+(70/2)-128, $4000+(168*128)+(84/2)-128, $4000+(168*128)+(98/2)-128, $4000+(168*128)+(112/2)-128, $4000+(168*128)+(126/2)-128, $4000+(168*128)+(140/2)-128, $4000+(168*128)+(154/2)-128, $4000+(168*128)+(168/2)-128, $4000+(168*128)+(182/2)-128, $4000+(168*128)+(196/2)-128, $4000+(168*128)+(210/2)-128, $4000+(168*128)+(224/2)-128, $4000+(168*128)+(238/2)-128925 dw $4000+(192*128)+(00/2)-128, $4000+(192*128)+(14/2)-128, $4000+(192*128)+(28/2)-128, $4000+(192*128)+(42/2)-128, $4000+(192*128)+(56/2)-128, $4000+(192*128)+(70/2)-128, $4000+(192*128)+(84/2)-128, $4000+(192*128)+(98/2)-128, $4000+(192*128)+(112/2)-128, $4000+(192*128)+(126/2)-128, $4000+(192*128)+(140/2)-128, $4000+(192*128)+(154/2)-128, $4000+(192*128)+(168/2)-128, $4000+(192*128)+(182/2)-128, $4000+(192*128)+(196/2)-128, $4000+(192*128)+(210/2)-128, $4000+(192*128)+(224/2)-128, $4000+(192*128)+(238/2)-128926 dw $4000+(216*128)+(00/2)-128, $4000+(216*128)+(14/2)-128, $4000+(216*128)+(28/2)-128, $4000+(216*128)+(42/2)-128, $4000+(216*128)+(56/2)-128, $4000+(216*128)+(70/2)-128, $4000+(216*128)+(84/2)-128, $4000+(216*128)+(98/2)-128, $4000+(216*128)+(112/2)-128, $4000+(216*128)+(126/2)-128, $4000+(216*128)+(140/2)-128, $4000+(216*128)+(154/2)-128, $4000+(216*128)+(168/2)-128, $4000+(216*128)+(182/2)-128, $4000+(216*128)+(196/2)-128, $4000+(216*128)+(210/2)-128, $4000+(216*128)+(224/2)-128, $4000+(216*128)+(238/2)-128927 dw $4000+(230*128)+(00/2)-128, $4000+(230*128)+(14/2)-128, $4000+(230*128)+(28/2)-128, $4000+(230*128)+(42/2)-128, $4000+(230*128)+(56/2)-128, $4000+(230*128)+(70/2)-128, $4000+(230*128)+(84/2)-128, $4000+(230*128)+(98/2)-128, $4000+(230*128)+(112/2)-128, $4000+(230*128)+(126/2)-128, $4000+(230*128)+(140/2)-128, $4000+(230*128)+(154/2)-128, $4000+(230*128)+(168/2)-128, $4000+(230*128)+(182/2)-128, $4000+(230*128)+(196/2)-128, $4000+(230*128)+(210/2)-128, $4000+(230*128)+(224/2)-128, $4000+(230*128)+(238/2)-128930ClearBattleFieldGridStartOfBattle:931 ld hl,.BattleFieldGrid932 ld de,BattleFieldGrid933 ld bc,EndBattleFieldGrid-BattleFieldGrid934 ldir935 ret937.BattleFieldGrid: 938 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000939 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255940 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000941 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255942 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000943 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255944 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000 945 db 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255946 db 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000,255,000, 255,000,255,000,255, 000,255,000948955SetFontPage0Y250: 956 ld hl,$4000 + (000*128) + (000/2) - 128957 ld de,$0000 + (250*128) + (000/2) - 128958 ld bc,$0000 + (006*256) + (256/2)959 ld a,CastleOverviewFontBlock 960 jp CopyRamToVramCorrectedWithoutActivePageSetting 962SetBattleButtons:963 ld hl,BattleButtonTable-2964 ld de,GenericButtonTable-2965 ld bc,2+(GenericButtonTableLenghtPerButton*9)966 ldir968 call .CheckSurrenderButton970 .CheckAutoCombatButton:971 972 ld hl,(HeroThatGetsAttacked) 973 ld a,l974 or h975 ret z977 ld a,(PlayerThatGetsAttacked) 978 ld hl,player1human?-1979 ld d,0980 ld e,a981 add hl,de982 ld a,(hl)983 or a984 ret z 986 xor a987 ld (GenericButtonTable+6*GenericButtonTableLenghtPerButton),a988 ret990 .CheckSurrenderButton:991 992 ld hl,(HeroThatGetsAttacked) 993 ld a,l994 or h995 ret nz997 xor a998 ld (GenericButtonTable+2*GenericButtonTableLenghtPerButton),a999 ret1001BattleButton1Ytop: equ 193 + 161002BattleButton1YBottom: equ BattleButton1Ytop + 0181003BattleButton1XLeft: equ 0021004BattleButton1XRight: equ BattleButton1XLeft + 0181006BattleButton2Ytop: equ 193 + 161007BattleButton2YBottom: equ BattleButton2Ytop + 0181008BattleButton2XLeft: equ 0201009BattleButton2XRight: equ BattleButton2XLeft + 0181011BattleButton3Ytop: equ 193 + 161012BattleButton3YBottom: equ BattleButton3Ytop + 0181013BattleButton3XLeft: equ 0381014BattleButton3XRight: equ BattleButton3XLeft + 0181016BattleButton4Ytop: equ 193 + 161017BattleButton4YBottom: equ BattleButton4Ytop + 0181018BattleButton4XLeft: equ 1801019BattleButton4XRight: equ BattleButton4XLeft + 0181021BattleButton5Ytop: equ 193 + 161022BattleButton5YBottom: equ BattleButton5Ytop + 0181023BattleButton5XLeft: equ 1981024BattleButton5XRight: equ BattleButton5XLeft + 0181026BattleButton6Ytop: equ 193 + 161027BattleButton6YBottom: equ BattleButton6Ytop + 0181028BattleButton6XLeft: equ 2181029BattleButton6XRight: equ BattleButton6XLeft + 0181031BattleButton7Ytop: equ 193 + 161032BattleButton7YBottom: equ BattleButton7Ytop + 0181033BattleButton7XLeft: equ 2361034BattleButton7XRight: equ BattleButton7XLeft + 0181036BattleButton8Ytop: equ 192 + 161037BattleButton8YBottom: equ BattleButton8Ytop + 0101038BattleButton8XLeft: equ 1701039BattleButton8XRight: equ BattleButton8XLeft + 0101041BattleButton9Ytop: equ 192+10 + 161042BattleButton9YBottom: equ BattleButton9Ytop + 0101043BattleButton9XLeft: equ 1701044BattleButton9XRight: equ BattleButton9XLeft + 0101047BattleButtonTableGfxBlock: db LevelUpBlock1048BattleButtonTableAmountOfButtons: db 91049BattleButtonTable: 1050 db %1100 0011 | dw $4000 + (000*128) + (160/2) - 128 | dw $4000 + (000*128) + (178/2) - 128 | dw $4000 + (000*128) + (196/2) - 128 | db BattleButton1Ytop,BattleButton1YBottom,BattleButton1XLeft,BattleButton1XRight | dw $0000 + (BattleButton1Ytop*128) + (BattleButton1XLeft/2) - 128 1051 db %1100 0011 | dw $4000 + (000*128) + (214/2) - 128 | dw $4000 + (000*128) + (232/2) - 128 | dw $4000 + (018*128) + (160/2) - 128 | db BattleButton2Ytop,BattleButton2YBottom,BattleButton2XLeft,BattleButton2XRight | dw $0000 + (BattleButton2Ytop*128) + (BattleButton2XLeft/2) - 128 1052 db %1100 0011 | dw $4000 + (018*128) + (178/2) - 128 | dw $4000 + (018*128) + (196/2) - 128 | dw $4000 + (018*128) + (214/2) - 128 | db BattleButton3Ytop,BattleButton3YBottom,BattleButton3XLeft,BattleButton3XRight | dw $0000 + (BattleButton3Ytop*128) + (BattleButton3XLeft/2) - 1281054 db %1100 0011 | dw $4000 + (054*128) + (160/2) - 128 | dw $4000 + (054*128) + (178/2) - 128 | dw $4000 + (054*128) + (196/2) - 128 | db BattleButton4Ytop,BattleButton4YBottom,BattleButton4XLeft,BattleButton4XRight | dw $0000 + (BattleButton4Ytop*128) + (BattleButton4XLeft/2) - 1281055 db %1100 0011 | dw $4000 + (018*128) + (232/2) - 128 | dw $4000 + (036*128) + (160/2) - 128 | dw $4000 + (036*128) + (178/2) - 128 | db BattleButton5Ytop,BattleButton5YBottom,BattleButton5XLeft,BattleButton5XRight | dw $0000 + (BattleButton5Ytop*128) + (BattleButton5XLeft/2) - 1281056 db %1100 0011 | dw $4000 + (036*128) + (196/2) - 128 | dw $4000 + (036*128) + (214/2) - 128 | dw $4000 + (036*128) + (232/2) - 128 | db BattleButton6Ytop,BattleButton6YBottom,BattleButton6XLeft,BattleButton6XRight | dw $0000 + (BattleButton6Ytop*128) + (BattleButton6XLeft/2) - 1281057 db %1100 0011 | dw $4000 + (054*128) + (214/2) - 128 | dw $4000 + (054*128) + (232/2) - 128 | dw $4000 + (072*128) + (160/2) - 128 | db BattleButton7Ytop,BattleButton7YBottom,BattleButton7XLeft,BattleButton7XRight | dw $0000 + (BattleButton7Ytop*128) + (BattleButton7XLeft/2) - 12810581059 db %1100 0011 | dw $4000 + (090*128) + (160/2) - 128 | dw $4000 + (090*128) + (170/2) - 128 | dw $4000 + (090*128) + (180/2) - 128 | db BattleButton8Ytop,BattleButton8YBottom,BattleButton8XLeft,BattleButton8XRight | dw $0000 + (BattleButton8Ytop*128) + (BattleButton8XLeft/2) - 1281060 db %1100 0011 | dw $4000 + (100*128) + (160/2) - 128 | dw $4000 + (100*128) + (170/2) - 128 | dw $4000 + (100*128) + (180/2) - 128 | db BattleButton9Ytop,BattleButton9YBottom,BattleButton9XLeft,BattleButton9XRight | dw $0000 + (BattleButton9Ytop*128) + (BattleButton9XLeft/2) - 1281063HandleNecromancy: 1064 ld ix,(plxcurrentheroAddress) 1065 ld a,(ix+HeroSkills+0)1066 call .CheckSkillNecromancy1067 ld a,(ix+HeroSkills+1)1068 call .CheckSkillNecromancy1069 ld a,(ix+HeroSkills+2)1070 call .CheckSkillNecromancy1071 ld a,(ix+HeroSkills+3)1072 call .CheckSkillNecromancy1073 ld a,(ix+HeroSkills+4)1074 call .CheckSkillNecromancy1075 ld a,(ix+HeroSkills+5)1076 call .CheckSkillNecromancy1077 ret1079 .CheckSkillNecromancy:1080 cp 31 1081 jp z,.BasicNecromancyFound1082 cp 32 1083 jp z,.AdvancedNecromancyFound1084 cp 33 1085 jp z,.ExpertNecromancyFound1086 ret1088 .BasicNecromancyFound:1089 call CalculateTotalNumberOfUnitsLostDefender 1090 ld de,10 1091 call DivideBCbyDE 1092 call SetMinimumOf1Unit1093 call SetSkeletonsInHeroUnitSlot 1094 jp HandleSkullOfTheUnborn 1096 .AdvancedNecromancyFound:1097 call CalculateTotalNumberOfUnitsLostDefender 1098 ld de,05 1099 call DivideBCbyDE 1100 call SetMinimumOf1Unit1101 call SetSkeletonsInHeroUnitSlot 1102 jp HandleSkullOfTheUnborn 1104 .ExpertNecromancyFound:1105 call CalculateTotalNumberOfUnitsLostDefender 1106 ld de,03 1107 call DivideBCbyDE 1108 call SetMinimumOf1Unit1109 call SetSkeletonsInHeroUnitSlot 1110 jp HandleSkullOfTheUnborn 1112HandleSkullOfTheUnborn:1113 ld ix,(plxcurrentheroAddress)1114 ld a,(ix+HeroInventory+7) 1115 cp 038 1116 ret nz1118 call CalculateTotalNumberOfUnitsLostDefender 1119 ld de,10 1120 call DivideBCbyDE 1121 call SetMinimumOf1Unit1122 call SetSkeletonsInHeroUnitSlot 1123 ret1125SetMinimumOf1Unit:1126 ld a,b 1127 or c 1128 ret nz1129 inc bc1130 ret1132CalculateTotalNumberOfUnitsLostDefender:1133 ld bc,0 1135 ld iy,ListOfMonstersToPutMonster71136 ld l,(iy+1)1137 ld h,(iy+2) 1138 ld ix,Monster71139 call .CalculateAmountOfUnitsLost1141 ld iy,ListOfMonstersToPutMonster81142 ld l,(iy+1)1143 ld h,(iy+2) 1144 ld ix,Monster81145 call .CalculateAmountOfUnitsLost1147 ld iy,ListOfMonstersToPutMonster91148 ld l,(iy+1)1149 ld h,(iy+2) 1150 ld ix,Monster91151 call .CalculateAmountOfUnitsLost1153 ld iy,ListOfMonstersToPutMonster101154 ld l,(iy+1)1155 ld h,(iy+2) 1156 ld ix,Monster101157 call .CalculateAmountOfUnitsLost1159 ld iy,ListOfMonstersToPutMonster111160 ld l,(iy+1)1161 ld h,(iy+2) 1162 ld ix,Monster111163 call .CalculateAmountOfUnitsLost1165 ld iy,ListOfMonstersToPutMonster121166 ld l,(iy+1)1167 ld h,(iy+2) 1168 ld ix,Monster121169 call .CalculateAmountOfUnitsLost1170 ret1172 .CalculateAmountOfUnitsLost:1173 ld e,(ix+MonsterAmount)1174 ld d,(ix+MonsterAmount+1)1176 or a1177 sbc hl,de 1179 add hl,bc1180 push hl1181 pop bc1182 ret1184SetSkeletonsInHeroUnitSlot:1185 ld d,6 1187 ld ix,(plxcurrentheroAddress) 1188 .loop:1189 ld a,(ix+HeroUnits+0)1190 or a1191 jr z,.EmptyUnitSlotFound1192 cp 25 1193 jr z,.SlotWithSkeletonsFound1194 1195 inc ix1196 inc ix1197 inc ix1198 dec d1199 jr nz,.loop1200 ret1202 .SlotWithSkeletonsFound:1203 ld l,(ix+HeroUnits+1) 1204 ld h,(ix+HeroUnits+2) 1205 add hl,bc1206 ld (ix+HeroUnits+1),l 1207 ld (ix+HeroUnits+2),h 1208 ret1210 .EmptyUnitSlotFound:1211 ld (ix+HeroUnits+0),25 1212 ld (ix+HeroUnits+1),c 1213 ld (ix+HeroUnits+2),b 1214 ret1222HandleProjectileSprite:12231224 dec a1225 jr nz,.HandleProjectile1226 1227 1228 ld a,21229 ld (ShootProjectile?),a 1230 1231 1232 call SetCurrentActiveMOnsterInIX1233 call .SetCharacterAndColor 1235 ld a,(ix+MonsterY)1236 add a,b1237 ld (spat+4*16),a1238 ld (spat+4*17),a1239 ld (spat+4*18),a1241 ld a,(ix+MonsterNX)1242 sub a,161243 srl a1244 add a,(ix+MonsterX)1245 ld (spat+4*16+1),a1246 ld (spat+4*17+1),a1247 ld (spat+4*18+1),a 12481250 .HandleProjectile:1251 call SetCurrentActiveMOnsterInIX1252 ld a,(spat+4*16+1)1253 ld e,a 1254 ld a,(spat+4*16)1255 ld d,a 1257 ld a,(MonsterThatIsBeingAttackedX)1258 ld b,a1259 ld a,(MonsterThatIsBeingAttackedNX)1260 sub a,161261 srl a 1262 add a,b 1263 ld l,a 1265 ld a,(MonsterThatIsBeingAttackedY)1266 ld b,a1267 ld a,(MonsterThatIsBeingAttackedNY)1268 add a,b1269 sub a,161270 ld h,a 1272 1273 ld a,d 1274 cp h 1275 jr nz,.EndCheckEndPointReached1276 ld a,e 1277 cp l 1278 jp z,.EndProjectile1279 .EndCheckEndPointReached:1282 1283 ld a,h1284 sub a,d 1285 jr nc,.notcarry11286 neg1287 .notcarry1:1288 ld c,a 1289 1290 ld a,l1291 sub a,e 1292 jr nc,.notcarry21293 neg1294 .notcarry2:1295 ld b,a 1297 1298 cp c1299 jr c,.MoreVertical1301 .MoreHorizontal:1302 1308 push bc1309 push de1310 ld e,b1311 call Div8 1312 pop de1313 pop bc1314 cp 21315 jr c,.Move2x2y1316 cp 31317 jr c,.Move3x2y1318 cp 41319 jr c,.Move3x1y1320 cp 51321 jr c,.Move4x1y1323 .Move4x1y: 1324 call .MoveX1325 call .MoveX1326 call .MoveX1327 call .MoveX1328 call .MoveY1329 jp .SetCoordinates1331 .Move3x1y: 1332 call .MoveX1333 call .MoveX1334 call .MoveX1335 call .MoveY1336 jp .SetCoordinates1338 .Move3x2y: 1339 call .MoveX1340 call .MoveX1341 call .MoveX1342 call .MoveY1343 call .MoveY1344 jp .SetCoordinates1346 .Move2x2y: 1347 call .MoveX1348 call .MoveX1349 call .MoveY1350 call .MoveY1351 jp .SetCoordinates1353 .MoreVertical:1354 1360 push bc1361 push de1362 ld e,c1363 ld c,b1364 call Div8 1365 pop de1366 pop bc1367 cp 21368 jr c,.Move2y2x1369 cp 31370 jr c,.Move3y2x1371 cp 41372 jr c,.Move3y1x1373 cp 51374 jr c,.Move4y1x1376 .Move4y1x: 1377 call .MoveY1378 call .MoveY1379 call .MoveY1380 call .MoveY1381 call .MoveX1382 jr .SetCoordinates1384 .Move3y1x: 1385 call .MoveY1386 call .MoveY1387 call .MoveY1388 call .MoveX1389 jr .SetCoordinates1391 .Move3y2x: 1392 call .MoveY1393 call .MoveY1394 call .MoveY1395 call .MoveX1396 call .MoveX1397 jr .SetCoordinates1399 .Move2y2x: 1400 call .MoveY1401 call .MoveY1402 call .MoveX1403 call .MoveX1404 jr .SetCoordinates1406 .SetCoordinates:1407 ld a,e 1408 ld (spat+4*16+1),a1409 ld (spat+4*17+1),a1410 ld (spat+4*18+1),a1411 ld a,d 1412 ld (spat+4*16),a1413 ld (spat+4*17),a1414 ld (spat+4*18),a1416 xor a 1417 ld hl,sprcharaddr+(16*32) 1418 call SetVdp_Write1420 ld a,SpritesWeaponsBlock1421 ld ($6000),a 1423 call .SetCharacterAndColor1424 push de 1426 ld c,$981427 call outix96 1429 xor a 1430 ld hl,sprcoladdr+(16*16) 1431 call SetVdp_Write1433 pop hl 1434 ld c,$981435 call outix48 1437 ld a,BattleCodeBlock1438 ld ($6000),a 1439 ret1441 .SetCharacterAndColor:1442 ld a,(ix+MonsterNumber)1443 cp 0071444 ld b,08 1445 jp z,.Bobblun1446 cp 0081447 jp z,.Bubblun1448 cp 0261449 jp z,.AxeMan1450 cp 0351451 jp z,.GeneralBullet1 1452 cp 0361453 ld b,12 1454 jp z,.ContraBullet 1455 cp 0371456 ld b,06 1457 jp z,.ContraBullet 1458 cp 0391459 ld b,04 1460 jp z,.HandGrenade 1461 cp 0401462 ld b,10 1463 jp z,.ContraBullet 1464 cp 0431465 ld b,22 1466 jp z,.ContraBullet 1467 cp 0471468 ld b,12 1469 jp z,.Grenadier 1470 cp 0491471 jp z,.Vanguard 1472 cp 0691473 jp z,.GeneralBullet1 1474 cp 0921475 ld b,08 1476 jp z,.ContraBullet 1477 cp 0931478 jp z,.ContraBullet 1479 cp 0941480 jp z,.ContraBullet 1481 cp 1041482 ld b,16 1483 jp z,.LanFang 1484 cp 1091485 ld b,10 1486 jp z,.HanChen 1487 cp 1101488 jp z,.LiYen 1489 cp 1121490 ld b,06 1491 jp z,.KingMori1492 cp 1131493 jp z,.KnightYama1494 cp 1151495 jp z,.BisshopHeichi1496 cp 1191497 jp z,.PornHeichi1498 cp 1201499 jp z,.YamaKnight1500 cp 1251501 jp z,.GooGoo1502 cp 1291503 jp z,.Screech1504 cp 1441505 ld b,22 1506 jp z,.PastryChef1507 cp 1491508 ld b,06 1509 jp z,.VicViper1510 cp 1531511 jp z,.Andorogynus1512 cp 1581513 jp z,.BisshopHeichi 1514 cp 1591515 jp z,.GeneralBullet1 1516 cp 1681517 jp z,.NinjaKun1518 cp 1831519 ld b,14 1520 jp z,.GeneralBullet1 1521 ret1523 .NinjaKun:1524 call .InvertFrameCounterWhenOnTheRightSide15251529 ld de,6 1530 ld b,01531 ld c,a1532 call DivideBCbyDE 1533 ld a,l1534 srl a 1536 ld hl,SpriteCharNinjaKun + 0*961537 ld de,SpriteColNinjaKun + 0*481538 ret z1539 ld hl,SpriteCharNinjaKun + 1*961540 ld de,SpriteColNinjaKun + 1*481541 dec a1542 ret z1543 ld hl,SpriteCharNinjaKun + 2*961544 ld de,SpriteColNinjaKun + 2*481545 ret1547 .Andorogynus:1548 ld hl,SpriteCharAndorogynus + 0*961549 ld de,SpriteColAndorogynus + 0*481550 ret1552 .VicViper:1553 call .InvertFrameCounterWhenOnTheRightSide15541558 ld de,12 1559 ld b,01560 ld c,a1561 call DivideBCbyDE 1562 ld a,l1563 srl a 1565 ld hl,SpriteCharVicViper + 5*961566 ld de,SpriteColVicViper + 5*481567 ret z1568 ld hl,SpriteCharVicViper + 4*961569 ld de,SpriteColVicViper + 4*481570 dec a1571 ret z1572 ld hl,SpriteCharVicViper + 3*961573 ld de,SpriteColVicViper + 3*481574 dec a1575 ret z1576 ld hl,SpriteCharVicViper + 2*961577 ld de,SpriteColVicViper + 2*481578 dec a1579 ret z1580 ld hl,SpriteCharVicViper + 1*961581 ld de,SpriteColVicViper + 1*481582 dec a1583 ret z1584 ld hl,SpriteCharVicViper + 0*961585 ld de,SpriteColVicViper + 0*481586 dec a1587 ret z1588 ld hl,SpriteCharVicViper + 5*961589 ld de,SpriteColVicViper + 5*481590 dec a1591 ret z1592 ld hl,SpriteCharVicViper + 5*961593 ld de,SpriteColVicViper + 5*481594 ret1596 .PastryChef:1597 ld hl,SpriteCharPastryChef + 0*961598 ld de,SpriteColPastryChef + 0*481599 ld a,(CurrentActiveMonster)1600 cp 71601 ret c1602 ld hl,SpriteCharPastryChef + 1*961603 ld de,SpriteColPastryChef + 1*481604 ret1606 .Screech:1607 ld hl,SpriteCharScreech + 0*961608 ld de,SpriteColScreech + 0*481609 ld a,(CurrentActiveMonster)1610 cp 71611 ret c1612 ld hl,SpriteCharScreech + 1*961613 ld de,SpriteColScreech + 1*481614 ret1616 .GooGoo:1617 ld hl,SpriteCharGooGoo + 0*961618 ld de,SpriteColGooGoo + 0*481619 ld a,(CurrentActiveMonster)1620 cp 71621 ret c1622 ld hl,SpriteCharGooGoo + 1*961623 ld de,SpriteColGooGoo + 1*481624 ret1626 .YamaKnight:1627 call .InvertFrameCounterWhenOnTheRightSide16281629 srl a 1630 and 31631 ld hl,SpriteCharYamaKnight + 0*961632 ld de,SpriteColYamaKnight + 0*481633 ret z1634 ld hl,SpriteCharYamaKnight + 1*961635 ld de,SpriteColYamaKnight + 1*481636 dec a1637 ret z1638 ld hl,SpriteCharYamaKnight + 2*961639 ld de,SpriteColYamaKnight + 2*481640 dec a1641 ret z1642 ld hl,SpriteCharYamaKnight + 3*961643 ld de,SpriteColYamaKnight + 3*481644 ret1646 .PornHeichi:1647 ld hl,SpriteCharPornHeichi + 0*961648 ld de,SpriteColPornHeichi + 0*481649 ld a,(CurrentActiveMonster)1650 cp 71651 ret c1652 ld hl,SpriteCharPornHeichi + 1*961653 ld de,SpriteColPornHeichi + 1*481654 ret1656 .BisshopHeichi:1657 ld hl,SpriteCharBisshopHeichi + 0*961658 ld de,SpriteColBisshopHeichi + 0*481659 ld a,(CurrentActiveMonster)1660 cp 71661 ret c1662 ld hl,SpriteCharBisshopHeichi + 1*961663 ld de,SpriteColBisshopHeichi + 1*481664 ret1666 .KnightYama:1667 ld hl,SpriteCharKnightYama + 0*961668 ld de,SpriteColKnightYama + 0*481669 ret1671 .KingMori:1672 ld a,(framecounter)1673 srl a 1674 and 11675 ld hl,SpriteCharKingMori + 0*961676 ld de,SpriteColKingMori + 0*481677 ret z1678 ld hl,SpriteCharKingMori + 1*961679 ld de,SpriteColKingMori + 1*481680 ret1681 1682 .LiYen:1683 ld a,(framecounter)1684 srl a 1685 and 11686 ld hl,SpriteCharLiYen + 0*961687 ld de,SpriteColLiYen + 0*481688 ret z1689 ld hl,SpriteCharLiYen + 1*961690 ld de,SpriteColLiYen + 1*481691 ret1693 .HanChen:1694 ld hl,SpriteCharHanChen + 0*961695 ld de,SpriteColHanChen + 0*481696 ret1698 .LanFang:1699 call .InvertFrameCounterWhenOnTheRightSide17001702 and 71703 ld hl,SpriteCharLanFang + 0*961704 ld de,SpriteColLanFang + 0*481705 ret z1706 ld hl,SpriteCharLanFang + 1*961707 ld de,SpriteColLanFang + 1*481708 dec a1709 ret z1710 ld hl,SpriteCharLanFang + 2*961711 ld de,SpriteColLanFang + 2*481712 dec a1713 ret z1714 ld hl,SpriteCharLanFang + 3*961715 ld de,SpriteColLanFang + 3*481716 dec a1717 ret z1718 ld hl,SpriteCharLanFang + 4*961719 ld de,SpriteColLanFang + 4*481720 dec a1721 ret z1722 ld hl,SpriteCharLanFang + 5*961723 ld de,SpriteColLanFang + 5*481724 dec a1725 ret z1726 ld hl,SpriteCharLanFang + 6*961727 ld de,SpriteColLanFang + 6*481728 dec a1729 ret z1730 ld hl,SpriteCharLanFang + 7*961731 ld de,SpriteColLanFang + 7*481732 ret1734 .HandGrenade:1735 call .InvertFrameCounterWhenOnTheRightSide17361737 srl a 1738 and 31739 ld hl,SpriteCharHandGrenade + 0*961740 ld de,SpriteColHandGrenade + 0*481741 ret z1742 ld hl,SpriteCharHandGrenade + 1*961743 ld de,SpriteColHandGrenade + 1*481744 dec a1745 ret z1746 ld hl,SpriteCharHandGrenade + 2*961747 ld de,SpriteColHandGrenade + 2*481748 dec a1749 ret z1750 ld hl,SpriteCharHandGrenade + 3*961751 ld de,SpriteColHandGrenade + 3*481752 ret1754 .Vanguard:1755 ld hl,SpriteCharVanguard + 0*961756 ld de,SpriteColVanguard + 0*481757 ld a,(CurrentActiveMonster)1758 cp 71759 ret c1760 ld hl,SpriteCharVanguard + 1*961761 ld de,SpriteColVanguard + 1*481762 ret1764 .Grenadier:1765 ld hl,SpriteCharGrenadier + 0*961766 ld de,SpriteColGrenadier + 0*481767 ld a,(CurrentActiveMonster)1768 cp 71769 ret c1770 ld hl,SpriteCharGrenadier + 1*961771 ld de,SpriteColGrenadier + 1*481772 ret1774 .ContraBullet:1775 ld hl,SpriteCharContraBullet + 0*961776 ld de,SpriteColContraBullet + 0*481777 ld a,(CurrentActiveMonster)1778 cp 71779 ret c1780 ld hl,SpriteCharContraBullet + 1*961781 ld de,SpriteColContraBullet + 1*481782 ret1784 .GeneralBullet1:1785 ld hl,SpriteCharGeneralBullet1 + 0*961786 ld de,SpriteColGeneralBullet1 + 0*481787 ret1789 .AxeMan:1790 call .InvertFrameCounterWhenOnTheRightSide17911792 srl a 1793 and 31794 ld hl,SpriteCharAxeMan + 0*961795 ld de,SpriteColAxeMan + 0*481796 ret z1797 ld hl,SpriteCharAxeMan + 1*961798 ld de,SpriteColAxeMan + 1*481799 dec a1800 ret z1801 ld hl,SpriteCharAxeMan + 2*961802 ld de,SpriteColAxeMan + 2*481803 dec a1804 ret z1805 ld hl,SpriteCharAxeMan + 3*961806 ld de,SpriteColAxeMan + 3*481807 ret1809 .Bubblun:1810 ld hl,SpriteCharBubbleBobble + 0*961811 ld de,SpriteColBubbleBobble + 0*481812 ret1814 .Bobblun:1815 ld hl,SpriteCharBubbleBobble + 1*961816 ld de,SpriteColBubbleBobble + 1*481817 ret1819 .InvertFrameCounterWhenOnTheRightSide:1820 ld a,(CurrentActiveMonster)1821 cp 71822 ld a,(framecounter)1823 ret c1824 neg1825 ret1827 .MoveY:1828 ld a,d 1829 cp h 1830 ret z1831 inc d1832 ret c1833 dec d1834 dec d1835 ret1837 .MoveX:1838 ld a,e 1839 cp l 1840 ret z1841 inc e1842 ret c1843 dec e1844 dec e1845 ret1847.EndProjectile:1848 ld a,213+16 1849 ld (spat+4*16),a1850 ld (spat+4*17),a1851 ld (spat+4*18),a1853 xor a1854 ld (ShootProjectile?),a 1855 ret 1858SpriteCharExplosion:1859 ../sprites/explosions.tgs.gen12 db 03 db 04 db 05 db 06 db 07 db 08 db 09 db 010 db 011 db 012 db 013 db 014 db 015 db 016 db 017 db 018 db 019 db 020 db 021 db 022 db 023 db 024 db 025 db 026 db 027 db 028 db 029 db 030 db 031 db 032 db 033 db 034 db 035 db 036 db 037 db 038 db 039 db 040 db 041 db 042 db 043 db 044 db 045 db 046 db 047 db 048 db 049 db 050 db 051 db 052 db 053 db 054 db 055 db 056 db 057 db 058 db 059 db 060 db 061 db 062 db 063 db 064 db 065 db 06667 db 068 db 069 db 070 db 071 db 072 db 073 db 074 db 075 db 076 db 077 db 078 db 079 db 080 db 081 db 082 db 9683 db 084 db 085 db 086 db 087 db 088 db 089 db 090 db 091 db 092 db 093 db 094 db 095 db 096 db 097 db 098 db 099 db 0100 db 0101 db 0102 db 0103 db 0104 db 0105 db 0106 db 0107 db 0108 db 0109 db 0110 db 0111 db 0112 db 0113 db 0114 db 0115 db 0116 db 0117 db 0118 db 0119 db 0120 db 0121 db 0122 db 0123 db 0124 db 0125 db 0126 db 0127 db 0128 db 0129 db 0130 db 0131132 db 0133 db 0134 db 0135 db 0136 db 0137 db 0138 db 0139 db 0140 db 0141 db 0142 db 0143 db 0144 db 0145 db 0146 db 0147 db 0148 db 14149 db 19150 db 51151 db 55152 db 60153 db 108154 db 103155 db 43156 db 28157 db 4158 db 3159 db 0160 db 0161 db 0162 db 0163 db 0164 db 0165 db 0166 db 0167 db 0168 db 0169 db 0170 db 0171 db 0172 db 0173 db 0174 db 0175 db 0176 db 0177 db 0178 db 0179 db 0180 db 0181 db 12182 db 28183 db 27184 db 7185 db 55186 db 59187 db 20188 db 7189 db 3190 db 0191 db 0192 db 0193 db 0194 db 0195 db 0196197 db 144198 db 152199 db 152200 db 148201 db 230202 db 246203 db 156204 db 152205 db 144206 db 224207 db 0208 db 0209 db 0210 db 0211 db 0212 db 0213 db 0214 db 0215 db 0216 db 0217 db 0218 db 0219 db 0220 db 0221 db 0222 db 0223 db 0224 db 0225 db 0226 db 0227 db 0228 db 0229 db 96230 db 240231 db 240232 db 104233 db 156234 db 172235 db 112236 db 240237 db 96238 db 0239 db 0240 db 0241 db 0242 db 0243 db 0244 db 0245 db 0246 db 0247 db 0248 db 0249 db 0250 db 0251 db 0252 db 0253 db 0254 db 0255 db 0256 db 0257 db 0258 db 0259 db 0260 db 0261262 db 0263 db 0264 db 0265 db 6266 db 13267 db 15268 db 6269 db 0270 db 0271 db 1272 db 3273 db 3274 db 3275 db 7276 db 15277 db 13278 db 0279 db 0280 db 0281 db 0282 db 29283 db 51284 db 103285 db 110286 db 254287 db 252288 db 143289 db 15290 db 28291 db 152292 db 248293 db 248294 db 0295 db 0296 db 0297 db 0298 db 6299 db 6300 db 0301 db 0302 db 0303 db 0304 db 1305 db 1306 db 1307 db 1308 db 6309 db 7310 db 0311 db 0312 db 0313 db 0314 db 0315 db 29316 db 59317 db 55318 db 7319 db 239320 db 244321 db 243322 db 239323 db 239324 db 223325 db 31326327 db 0328 db 0329 db 17330 db 1331 db 192332 db 48333 db 62334 db 31335 db 25336 db 49337 db 241338 db 225339 db 115340 db 63341 db 62342 db 63343 db 0344 db 192345 db 160346 db 32347 db 192348 db 0349 db 0350 db 0351 db 128352 db 128353 db 128354 db 128355 db 192356 db 96357 db 32358 db 96359 db 0360 db 0361 db 0362 db 0363 db 0364 db 192365 db 224366 db 246367 db 247368 db 239369 db 223370 db 63371 db 222372 db 205373 db 227374 db 237375 db 0376 db 0377 db 192378 db 192379 db 0380 db 0381 db 0382 db 0383 db 0384 db 0385 db 0386 db 0387 db 128388 db 192389 db 192390 db 192391392 db 13393 db 15394 db 7395 db 7396 db 7397 db 3398 db 1399 db 0400 db 0401 db 0402 db 0403 db 0404 db 0405 db 0406 db 0407 db 0408 db 156409 db 63410 db 31411 db 254412 db 248413 db 220414 db 200415 db 127416 db 8417 db 6418 db 13419 db 9420 db 6421 db 0422 db 0423 db 0424 db 6425 db 5426 db 1427 db 2428 db 3429 db 1430 db 0431 db 0432 db 0433 db 0434 db 0435 db 0436 db 0437 db 0438 db 0439 db 0440 db 239441 db 223442 db 230443 db 217444 db 31445 db 111446 db 55447 db 0448 db 7449 db 0450 db 6451 db 6452 db 0453 db 0454 db 0455 db 0456457 db 115458 db 231459 db 207460 db 253461 db 127462 db 207463 db 156464 db 24465 db 224466 db 112467 db 0468 db 0469 db 0470 db 0471 db 0472 db 0473 db 192474 db 0475 db 144476 db 128477 db 128478 db 0479 db 0480 db 64481 db 0482 db 0483 db 0484 db 0485 db 0486 db 0487 db 0488 db 0489 db 222490 db 188491 db 125492 db 187493 db 198494 db 184495 db 120496 db 224497 db 0498 db 0499 db 0500 db 0501 db 0502 db 0503 db 0504 db 0505 db 128506 db 0507 db 0508 db 0509 db 0510 db 0511 db 0512 db 0513 db 0514 db 0515 db 0516 db 0517 db 0518 db 0519 db 0520 db 0521522 db 0523 db 0524 db 0525 db 0526 db 0527 db 0528 db 0529 db 1530 db 3531 db 7532 db 15533 db 11534 db 11535 db 8536 db 6537 db 1538 db 0539 db 0540 db 0541 db 128542 db 3543 db 12544 db 124545 db 200546 db 141547 db 71548 db 62549 db 156550 db 251551 db 234552 db 79553 db 246554 db 0555 db 0556 db 0557 db 1558 db 2559 db 0560 db 0561 db 0562 db 0563 db 2564 db 6565 db 6566 db 6567 db 7568 db 1569 db 0570 db 0571 db 0572 db 0573 db 0574 db 0575 db 3576 db 15577 db 63578 db 255579 db 252580 db 251581 db 247582 db 110583 db 21584 db 176585 db 8586587 db 0588 db 0589 db 0590 db 1591 db 192592 db 48593 db 62594 db 19595 db 177596 db 226597 db 124598 db 57599 db 223600 db 87601 db 242602 db 111603 db 0604 db 0605 db 0606 db 0607 db 0608 db 0609 db 0610 db 128611 db 192612 db 224613 db 240614 db 208615 db 208616 db 16617 db 96618 db 128619 db 0620 db 0621 db 0622 db 0623 db 0624 db 192625 db 240626 db 252627 db 255628 db 63629 db 223630 db 239631 db 118632 db 168633 db 13634 db 16635 db 0636 db 0637 db 0638 db 128639 db 64640 db 0641 db 0642 db 0643 db 0644 db 64645 db 96646 db 96647 db 96648 db 224649 db 128650 db 0651652 db 8653 db 0654 db 0655 db 0656 db 0657 db 8658 db 0659 db 0660 db 0661 db 0662 db 0663 db 0664 db 0665 db 0666 db 0667 db 0668 db 40669 db 97670 db 4671 db 129672 db 42673 db 6674 db 2675 db 1676 db 0677 db 0678 db 0679 db 0680 db 0681 db 0682 db 0683 db 0684 db 0685 db 8686 db 4687 db 0688 db 0689 db 0690 db 0691 db 0692 db 0693 db 0694 db 0695 db 0696 db 0697 db 0698 db 0699 db 0700 db 16701 db 0702 db 0703 db 8704 db 65705 db 3706 db 1707 db 0708 db 0709 db 0710 db 0711 db 0712 db 0713 db 0714 db 0715 db 0716717 db 20718 db 134719 db 32720 db 129721 db 84722 db 96723 db 64724 db 128725 db 0726 db 0727 db 0728 db 0729 db 0730 db 0731 db 0732 db 0733 db 16734 db 0735 db 0736 db 0737 db 0738 db 16739 db 0740 db 0741 db 0742 db 0743 db 0744 db 0745 db 0746 db 0747 db 0748 db 0749 db 8750 db 0751 db 0752 db 16753 db 130754 db 192755 db 128756 db 0757 db 0758 db 0759 db 0760 db 0761 db 0762 db 0763 db 0764 db 0765 db 0766 db 16767 db 32768 db 0769 db 0770 db 0771 db 0772 db 0773 db 0774 db 0775 db 0776 db 0777 db 0778 db 0779 db 0780 db 0781782 db 0783 db 0784 db 0785 db 1786 db 51787 db 66788 db 2789 db 0790 db 13791 db 18792 db 54793 db 18794 db 12795 db 0796 db 2797 db 3798 db 0799 db 15800 db 113801 db 249802 db 208803 db 201804 db 127805 db 44806 db 99807 db 0808 db 0809 db 0810 db 0811 db 0812 db 0813 db 64814 db 0815 db 0816 db 0817 db 0818 db 32819 db 65820 db 1821 db 1822 db 0823 db 12824 db 28825 db 12826 db 0827 db 0828 db 1829 db 0830 db 0831 db 0832 db 14833 db 127834 db 255835 db 255836 db 255837 db 211838 db 128839 db 0840 db 0841 db 0842 db 0843 db 0844 db 0845 db 0846847 db 0848 db 240849 db 142850 db 159851 db 11852 db 147853 db 254854 db 52855 db 198856 db 0857 db 0858 db 0859 db 0860 db 0861 db 0862 db 2863 db 0864 db 0865 db 0866 db 128867 db 204868 db 66869 db 64870 db 0871 db 176872 db 72873 db 108874 db 72875 db 48876 db 0877 db 64878 db 192879 db 0880 db 0881 db 112882 db 254883 db 255884 db 255885 db 255886 db 203887 db 1888 db 0889 db 0890 db 0891 db 0892 db 0893 db 0894 db 0895 db 0896 db 0897 db 0898 db 0899 db 4900 db 130901 db 128902 db 128903 db 0904 db 48905 db 56906 db 48907 db 0908 db 0909 db 128910 db 0911912 db 0913 db 0914 db 0915 db 0916 db 0917 db 0918 db 0919 db 0920 db 0921 db 0922 db 0923 db 0924 db 0925 db 0926 db 0927 db 0928 db 0929 db 0930 db 0931 db 0932 db 0933 db 0934 db 0935 db 0936 db 0937 db 0938 db 0939 db 0940 db 0941 db 0942 db 0943 db 0944 db 0945 db 0946 db 0947 db 0948 db 0949 db 0950 db 0951 db 0952 db 0953 db 0954 db 0955 db 0956 db 0957 db 0958 db 0959 db 0960 db 0961 db 0962 db 0963 db 0964 db 0965 db 0966 db 0967 db 0968 db 0969 db 0970 db 0971 db 0972 db 0973 db 0974 db 0975 db 0976977 db 0978 db 0979 db 0980 db 0981 db 0982 db 0983 db 0984 db 0985 db 0986 db 0987 db 0988 db 0989 db 0990 db 0991 db 0992 db 0993 db 0994 db 0995 db 0996 db 0997 db 0998 db 0999 db 01000 db 01001 db 01002 db 01003 db 01004 db 01005 db 01006 db 01007 db 01008 db 01009 db 01010 db 01011 db 01012 db 01013 db 01014 db 01015 db 01016 db 01017 db 01018 db 01019 db 01020 db 01021 db 01022 db 01023 db 01024 db 01025 db 01026 db 01027 db 01028 db 01029 db 01030 db 01031 db 01032 db 01033 db 01034 db 01035 db 01036 db 01037 db 01038 db 01039 db 01040 db 010411042 db 01043 db 01044 db 01045 db 01046 db 21047 db 11048 db 01049 db 81050 db 161051 db 01052 db 01053 db 01054 db 01055 db 01056 db 01057 db 01058 db 01059 db 01060 db 121061 db 821062 db 331063 db 21064 db 321065 db 1281066 db 01067 db 01068 db 01069 db 01070 db 01071 db 01072 db 01073 db 01074 db 01075 db 01076 db 01077 db 321078 db 01079 db 21080 db 01081 db 161082 db 01083 db 01084 db 01085 db 01086 db 01087 db 01088 db 01089 db 01090 db 01091 db 01092 db 01093 db 121094 db 641095 db 11096 db 641097 db 01098 db 01099 db 01100 db 01101 db 01102 db 01103 db 01104 db 01105 db 011061107 db 01108 db 01109 db 481110 db 741111 db 1321112 db 641113 db 41114 db 11115 db 01116 db 01117 db 01118 db 01119 db 01120 db 01121 db 01122 db 01123 db 01124 db 01125 db 01126 db 01127 db 641128 db 1281129 db 01130 db 161131 db 81132 db 01133 db 01134 db 01135 db 01136 db 01137 db 01138 db 01139 db 01140 db 01141 db 01142 db 481143 db 21144 db 1281145 db 21146 db 01147 db 01148 db 01149 db 01150 db 01151 db 01152 db 01153 db 01154 db 01155 db 01156 db 01157 db 01158 db 41159 db 01160 db 641161 db 01162 db 81163 db 01164 db 01165 db 01166 db 01167 db 01168 db 01169 db 01170 db 011711172 db 01173 db 01174 db 01175 db 01176 db 01177 db 01178 db 01179 db 01180 db 01181 db 01182 db 01183 db 01184 db 01185 db 01186 db 01187 db 01188 db 01189 db 01190 db 01191 db 01192 db 01193 db 01194 db 01195 db 01196 db 01197 db 01198 db 01199 db 01200 db 01201 db 01202 db 01203 db 01204 db 01205 db 01206 db 01207 db 01208 db 01209 db 01210 db 01211 db 01212 db 01213 db 01214 db 01215 db 01216 db 01217 db 01218 db 01219 db 01220 db 01221 db 01222 db 01223 db 01224 db 01225 db 01226 db 01227 db 01228 db 01229 db 01230 db 01231 db 01232 db 01233 db 01234 db 01235 db 012361237 db 01238 db 01239 db 01240 db 01241 db 01242 db 01243 db 01244 db 01245 db 01246 db 01247 db 01248 db 01249 db 01250 db 01251 db 01252 db 01253 db 01254 db 01255 db 01256 db 01257 db 01258 db 01259 db 01260 db 01261 db 01262 db 01263 db 01264 db 01265 db 01266 db 01267 db 01268 db 01269 db 01270 db 01271 db 01272 db 01273 db 01274 db 01275 db 01276 db 01277 db 01278 db 01279 db 01280 db 01281 db 01282 db 01283 db 01284 db 01285 db 01286 db 01287 db 01288 db 01289 db 01290 db 01291 db 01292 db 01293 db 01294 db 01295 db 01296 db 01297 db 01298 db 01299 db 01300 db 013011302 db 01303 db 01304 db 01305 db 01306 db 141307 db 311308 db 511309 db 551310 db 601311 db 1081312 db 1031313 db 631314 db 281315 db 41316 db 31317 db 01318 db 01319 db 01320 db 01321 db 961322 db 1441323 db 1521324 db 1521325 db 2521326 db 2301327 db 2461328 db 1561329 db 1521330 db 2401331 db 2241332 db 01333 db 01334 db 01335 db 01336 db 01337 db 01338 db 01339 db 121340 db 281341 db 271342 db 71343 db 551344 db 591345 db 201346 db 71347 db 31348 db 01349 db 01350 db 01351 db 01352 db 01353 db 01354 db 961355 db 2401356 db 2401357 db 1041358 db 1561359 db 1721360 db 1121361 db 2401362 db 961363 db 01364 db 01365 db 013661367 db 01368 db 71369 db 251370 db 1211371 db 1211372 db 2071373 db 2061374 db 771375 db 501376 db 11377 db 01378 db 01379 db 21380 db 31381 db 01382 db 01383 db 01384 db 2241385 db 1521386 db 1581387 db 1581388 db 2431389 db 1151390 db 1781391 db 761392 db 1281393 db 321394 db 961395 db 01396 db 01397 db 01398 db 1281399 db 01400 db 01401 db 61402 db 151403 db 471404 db 1181405 db 1201406 db 481407 db 11408 db 01409 db 01410 db 01411 db 11412 db 01413 db 01414 db 01415 db 01416 db 01417 db 961418 db 2401419 db 2441420 db 1101421 db 301422 db 121423 db 1281424 db 01425 db 641426 db 01427 db 01428 db 01429 db 01430 db 014311432 db 41433 db 101434 db 41435 db 641436 db 1601437 db 651438 db 01439 db 41440 db 21441 db 01442 db 01443 db 01444 db 11445 db 01446 db 01447 db 01448 db 321449 db 801450 db 321451 db 21452 db 51453 db 1301454 db 01455 db 01456 db 01457 db 641458 db 1281459 db 01460 db 01461 db 01462 db 01463 db 01464 db 01465 db 41466 db 01467 db 01468 db 641469 db 01470 db 01471 db 21472 db 01473 db 01474 db 01475 db 01476 db 01477 db 01478 db 01479 db 01480 db 01481 db 321482 db 01483 db 01484 db 21485 db 01486 db 01487 db 01488 db 01489 db 1281490 db 01491 db 01492 db 01493 db 01494 db 01495 db 014961497 db 41498 db 321499 db 01500 db 01501 db 1281502 db 11503 db 01504 db 01505 db 21506 db 01507 db 01508 db 01509 db 01510 db 01511 db 01512 db 01513 db 321514 db 41515 db 01516 db 01517 db 11518 db 01519 db 641520 db 01521 db 01522 db 01523 db 01524 db 1281525 db 01526 db 01527 db 01528 db 01529 db 01530 db 01531 db 01532 db 01533 db 01534 db 01535 db 01536 db 01537 db 01538 db 01539 db 01540 db 01541 db 01542 db 01543 db 01544 db 01545 db 01546 db 01547 db 01548 db 01549 db 01550 db 01551 db 01552 db 01553 db 01554 db 01555 db 01556 db 01557 db 01558 db 01559 db 01560 db 01561BattleCodePage2.asm1860SpriteColorExplosion:1861 ../sprites/explosions.tcs.gen12 db 2553 db 2554 db 2555 db 2556 db 2557 db 2558 db 2559 db 25510 db 25511 db 25512 db 25513 db 25514 db 25515 db 25516 db 25517 db 25518 db 25519 db 25520 db 25521 db 25522 db 25523 db 25524 db 25525 db 25526 db 25527 db 25528 db 25529 db 25530 db 25531 db 25532 db 25533 db 2553435 db 25536 db 25537 db 25538 db 25539 db 25540 db 25541 db 25542 db 25543 db 25544 db 25545 db 25546 db 25547 db 25548 db 25549 db 25550 db 951 db 25552 db 25553 db 25554 db 25555 db 25556 db 25557 db 25558 db 25559 db 25560 db 25561 db 25562 db 25563 db 25564 db 25565 db 25566 db 2556768 db 969 db 970 db 971 db 972 db 973 db 974 db 975 db 976 db 977 db 978 db 979 db 25580 db 25581 db 25582 db 25583 db 25584 db 25585 db 7586 db 7487 db 7488 db 7489 db 7490 db 7491 db 7592 db 7493 db 7594 db 25595 db 25596 db 25597 db 25598 db 25599 db 255100101 db 9102 db 9103 db 9104 db 9105 db 9106 db 9107 db 9108 db 9109 db 9110 db 9111 db 255112 db 255113 db 255114 db 255115 db 255116 db 255117 db 75118 db 74119 db 74120 db 75121 db 74122 db 74123 db 74124 db 74125 db 75126 db 255127 db 255128 db 255129 db 255130 db 255131 db 255132 db 255133134 db 255135 db 255136 db 255137 db 9138 db 9139 db 9140 db 9141 db 9142 db 9143 db 9144 db 9145 db 9146 db 9147 db 9148 db 9149 db 9150 db 255151 db 255152 db 255153 db 255154 db 74155 db 74156 db 74157 db 74158 db 74159 db 74160 db 74161 db 74162 db 74163 db 74164 db 74165 db 74166167 db 255168 db 9169 db 9170 db 9171 db 9172 db 9173 db 9174 db 9175 db 9176 db 9177 db 9178 db 9179 db 9180 db 9181 db 9182 db 9183 db 255184 db 255185 db 74186 db 75187 db 255188 db 75189 db 74190 db 74191 db 74192 db 74193 db 74194 db 74195 db 74196 db 74197 db 74198 db 74199200 db 9201 db 9202 db 9203 db 9204 db 9205 db 9206 db 9207 db 9208 db 9209 db 9210 db 9211 db 9212 db 9213 db 255214 db 255215 db 255216 db 74217 db 74218 db 74219 db 74220 db 74221 db 74222 db 75223 db 255224 db 75225 db 255226 db 74227 db 75228 db 255229 db 255230 db 255231 db 255232233 db 9234 db 9235 db 9236 db 9237 db 9238 db 9239 db 9240 db 9241 db 9242 db 9243 db 255244 db 255245 db 255246 db 255247 db 255248 db 255249 db 74250 db 74251 db 74252 db 74253 db 74254 db 74255 db 74256 db 75257 db 255258 db 255259 db 255260 db 255261 db 255262 db 255263 db 255264 db 255265266 db 255267 db 255268 db 255269 db 9270 db 9271 db 9272 db 9273 db 9274 db 9275 db 9276 db 9277 db 9278 db 9279 db 9280 db 9281 db 9282 db 255283 db 255284 db 255285 db 75286 db 75287 db 75288 db 74289 db 74290 db 74291 db 74292 db 74293 db 74294 db 74295 db 75296 db 75297 db 75298299 db 255300 db 255301 db 255302 db 9303 db 9304 db 9305 db 9306 db 9307 db 9308 db 9309 db 9310 db 9311 db 9312 db 9313 db 9314 db 9315 db 255316 db 255317 db 255318 db 75319 db 75320 db 75321 db 74322 db 74323 db 74324 db 74325 db 74326 db 74327 db 74328 db 75329 db 75330 db 75331332 db 9333 db 9334 db 9335 db 9336 db 9337 db 9338 db 9339 db 9340 db 255341 db 255342 db 255343 db 255344 db 255345 db 255346 db 255347 db 255348 db 75349 db 75350 db 75351 db 75352 db 75353 db 74354 db 75355 db 255356 db 255357 db 255358 db 255359 db 255360 db 255361 db 255362 db 255363 db 255364365 db 9366 db 9367 db 9368 db 9369 db 9370 db 9371 db 9372 db 9373 db 255374 db 255375 db 255376 db 255377 db 255378 db 255379 db 255380 db 255381 db 75382 db 75383 db 75384 db 75385 db 75386 db 74387 db 75388 db 255389 db 255390 db 255391 db 255392 db 255393 db 255394 db 255395 db 255396 db 255397398 db 255399 db 9400 db 9401 db 9402 db 9403 db 9404 db 9405 db 9406 db 9407 db 9408 db 9409 db 9410 db 9411 db 255412 db 9413 db 9414 db 255415 db 255416 db 75417 db 74418 db 74419 db 74420 db 74421 db 75422 db 75423 db 74424 db 74425 db 75426 db 255427 db 255428 db 75429 db 255430431 db 255432 db 9433 db 9434 db 9435 db 9436 db 9437 db 9438 db 9439 db 9440 db 9441 db 9442 db 9443 db 9444 db 255445 db 9446 db 9447 db 255448 db 255449 db 75450 db 74451 db 74452 db 74453 db 74454 db 75455 db 75456 db 74457 db 74458 db 75459 db 255460 db 255461 db 75462 db 255463464 db 255465 db 255466 db 255467 db 255468 db 255469 db 255470 db 255471 db 255472 db 255473 db 255474 db 255475 db 255476 db 255477 db 255478 db 255479 db 255480 db 255481 db 255482 db 255483 db 255484 db 255485 db 255486 db 255487 db 255488 db 255489 db 255490 db 255491 db 255492 db 255493 db 255494 db 255495 db 255496497 db 255498 db 255499 db 255500 db 255501 db 255502 db 255503 db 255504 db 255505 db 255506 db 255507 db 255508 db 255509 db 255510 db 255511 db 255512 db 255513 db 255514 db 255515 db 255516 db 255517 db 255518 db 255519 db 255520 db 255521 db 255522 db 255523 db 255524 db 255525 db 255526 db 255527 db 255528 db 255529530 db 255531 db 255532 db 9533 db 9534 db 9535 db 9536 db 9537 db 9538 db 9539 db 255540 db 255541 db 255542 db 255543 db 255544 db 255545 db 255546 db 255547 db 255548 db 255549 db 75550 db 75551 db 75552 db 75553 db 75554 db 255555 db 255556 db 255557 db 255558 db 255559 db 255560 db 255561 db 255562563 db 255564 db 255565 db 9566 db 9567 db 9568 db 9569 db 9570 db 9571 db 9572 db 255573 db 255574 db 255575 db 255576 db 255577 db 255578 db 255579 db 255580 db 255581 db 255582 db 75583 db 75584 db 75585 db 75586 db 75587 db 255588 db 255589 db 255590 db 255591 db 255592 db 255593 db 255594 db 255595596 db 255597 db 255598 db 255599 db 255600 db 255601 db 255602 db 255603 db 255604 db 255605 db 255606 db 255607 db 255608 db 255609 db 255610 db 255611 db 255612 db 255613 db 255614 db 255615 db 255616 db 255617 db 255618 db 255619 db 255620 db 255621 db 255622 db 255623 db 255624 db 255625 db 255626 db 255627 db 255628629 db 255630 db 255631 db 255632 db 255633 db 255634 db 255635 db 255636 db 255637 db 255638 db 255639 db 255640 db 255641 db 255642 db 255643 db 255644 db 255645 db 255646 db 255647 db 255648 db 255649 db 255650 db 255651 db 255652 db 255653 db 255654 db 255655 db 255656 db 255657 db 255658 db 255659 db 255660 db 255661662 db 255663 db 255664 db 255665 db 9666 db 9667 db 9668 db 9669 db 9670 db 9671 db 9672 db 9673 db 9674 db 9675 db 9676 db 9677 db 255678 db 255679 db 255680 db 255681 db 255682 db 75683 db 74684 db 74685 db 74686 db 74687 db 74688 db 74689 db 74690 db 74691 db 75692 db 255693 db 255694695 db 255696 db 9697 db 9698 db 9699 db 9700 db 9701 db 9702 db 9703 db 9704 db 9705 db 9706 db 9707 db 9708 db 9709 db 255710 db 9711 db 255712 db 255713 db 75714 db 74715 db 74716 db 74717 db 74718 db 75719 db 75720 db 255721 db 75722 db 255723 db 75724 db 255725 db 255726 db 255727728 db 9729 db 9730 db 9731 db 9732 db 9733 db 9734 db 255735 db 9736 db 9737 db 9738 db 9739 db 255740 db 9741 db 255742 db 255743 db 255744 db 255745 db 75746 db 255747 db 255748 db 75749 db 255750 db 255751 db 75752 db 255753 db 75754 db 255755 db 255756 db 255757 db 255758 db 255759 db 255760761 db 9762 db 9763 db 255764 db 255765 db 9766 db 9767 db 9768 db 255769 db 9770 db 255771 db 255772 db 9773 db 255774 db 255775 db 255776 db 255777 db 255778 db 255779 db 255780 db 255781 db 255782 db 255783 db 255784 db 255785 db 255786 db 255787 db 255788 db 255789 db 255790 db 255791 db 255792 db 255793BattleCodePage2.asm1863SpriteCharBeingHit:1864 incbin "../sprites/sprconv FOR SINGLE SPRITES/BeingHitSprite.spr"1865SpriteColorBeingHit:1866 ds 16,colorred| ds 16,colorsnowishwhite+64 | ds 16,colorwhite+641868HandleExplosionSprite:18691872 dec a1873 jp z,BeingHitSprite1875 ld a,(MonsterThatIsBeingAttackedNX)1876 cp 171877 jp c,SmallExplosionSprite1878 jp BigExplosionSprite1880 BeingHitSprite:1881 ld a,(MonsterThatIsBeingAttackedY)1882 ld b,a1883 ld a,(MonsterThatIsBeingAttackedNY)1884 add a,b 1885 sub a,161886 ld (spat+4*16),a1887 ld (spat+4*17),a1888 ld (spat+4*18),a1890 1895 ld a,(MonsterThatIsBeingAttackedX)1896 ld b,a1897 ld a,(MonsterThatIsBeingAttackedNX)1898 sub a,161899 srl a 1900 add a,b 1901 ld (spat+4*16+1),a1902 ld (spat+4*17+1),a1903 ld (spat+4*18+1),a1905 xor a 1906 ld hl,sprcharaddr+(16*32) 1907 call SetVdp_Write1909 ld a,(ExplosionSpriteStep)1910 cp 21911 ld hl,SpriteCharBeingHit + 0*961912 jr c,.CharFound1913 cp 41914 ld hl,SpriteCharBeingHit + 1*961915 jr c,.CharFound1916 ld hl,SpriteCharBeingHit + 2*961917 .CharFound:1918 ld c,$981919 call outix96 1921 xor a 1922 ld hl,sprcoladdr+(16*16) 1923 call SetVdp_Write1925 ld hl,SpriteColorBeingHit1926 ld c,$981927 call outix48 1929 ld a,(ExplosionSpriteStep)1930 inc a1931 ld (ExplosionSpriteStep),a1932 cp 61933 ret c1934 1935 ld a,213+16 1936 ld (spat+4*16),a1937 ld (spat+4*17),a1938 ld (spat+4*18),a1940 xor a1941 ld (ShowExplosionSprite?),a 1942 ret 1944 SmallExplosionSprite:1945 ld a,(MonsterThatIsBeingAttackedY)1946 ld b,a1947 ld a,(MonsterThatIsBeingAttackedNY)1948 add a,b 1949 sub a,161950 ld (spat+4*16),a1951 ld (spat+4*17),a1953 1958 ld a,(MonsterThatIsBeingAttackedX)1959 ld b,a1960 ld a,(MonsterThatIsBeingAttackedNX)1961 sub a,161962 srl a 1963 add a,b 1964 ld (spat+4*16+1),a1965 ld (spat+4*17+1),a1967 xor a 1968 ld hl,sprcharaddr+(16*32) 1969 call SetVdp_Write1971 ld a,(ExplosionSpriteStep)1972 cp 41973 ld hl,SpriteCharExplosion + 0*64 + 5*2561974 jr c,.CharFound1975 cp 81976 ld hl,SpriteCharExplosion + 1*64 + 5*2561977 jr c,.CharFound1978 cp 121979 ld hl,SpriteCharExplosion + 2*64 + 5*2561980 jr c,.CharFound1981 ld hl,SpriteCharExplosion + 3*64 + 5*2561982 .CharFound:1983 ld c,$981984 call outix64 1986 xor a 1987 ld hl,sprcoladdr+(16*16) 1988 call SetVdp_Write1990 ld a,(ExplosionSpriteStep)1991 cp 41992 ld hl,SpriteColorExplosion + 0*32 + 5*1281993 jr c,.ColorFound1994 cp 81995 ld hl,SpriteColorExplosion + 1*32 + 5*1281996 jr c,.ColorFound1997 cp 121998 ld hl,SpriteColorExplosion + 2*32 + 5*1281999 jr c,.ColorFound2000 ld hl,SpriteColorExplosion + 3*32 + 5*1282001 .ColorFound:2002 ld c,$982003 call outix32 2005 ld a,(ExplosionSpriteStep)2006 inc a2007 ld (ExplosionSpriteStep),a2008 cp 162009 ret c2010 2011 ld a,213+16 2012 ld (spat+4*16),a2013 ld (spat+4*17),a2014 ld (spat+4*18),a2016 xor a2017 ld (ShowExplosionSprite?),a 2018 ret2020 BigExplosionSprite:2021 ld a,(MonsterThatIsBeingAttackedY)2022 ld b,a2023 ld a,(MonsterThatIsBeingAttackedNY)2024 add a,b 2025 sub a,322026 ld (spat+4*16),a2027 ld (spat+4*17),a2028 ld (spat+4*18),a2029 ld (spat+4*19),a2030 add a,162031 ld (spat+4*20),a2032 ld (spat+4*21),a2033 ld (spat+4*22),a2034 ld (spat+4*23),a2036 2040 ld a,(MonsterThatIsBeingAttackedX)2041 ld b,a2042 ld a,(MonsterThatIsBeingAttackedNX)2043 sub a,322044 srl a 2045 add a,b 2046 ld (spat+4*16+1),a2047 ld (spat+4*17+1),a2048 ld (spat+4*20+1),a2049 ld (spat+4*21+1),a 2050 add a,162051 ld (spat+4*18+1),a2052 ld (spat+4*19+1),a2053 ld (spat+4*22+1),a2054 ld (spat+4*23+1),a2056 xor a 2057 ld hl,sprcharaddr+(16*32) 2058 call SetVdp_Write2060 ld a,(ExplosionSpriteStep)2061 cp 42062 ld hl,SpriteCharExplosion + 0*2562063 jr c,.CharFound2064 cp 82065 ld hl,SpriteCharExplosion + 1*2562066 jr c,.CharFound2067 cp 122068 ld hl,SpriteCharExplosion + 2*2562069 jr c,.CharFound2070 cp 162071 ld hl,SpriteCharExplosion + 3*2562072 jr c,.CharFound2073 ld hl,SpriteCharExplosion + 4*2562074 .CharFound:2075 ld c,$982076 call outix256 2078 xor a 2079 ld hl,sprcoladdr+(16*16) 2080 call SetVdp_Write2082 ld a,(ExplosionSpriteStep)2083 cp 42084 ld hl,SpriteColorExplosion + 0*1282085 jr c,.ColorFound2086 cp 82087 ld hl,SpriteColorExplosion + 1*1282088 jr c,.ColorFound2089 cp 122090 ld hl,SpriteColorExplosion + 2*1282091 jr c,.ColorFound2092 cp 162093 ld hl,SpriteColorExplosion + 3*1282094 jr c,.ColorFound2095 ld hl,SpriteColorExplosion + 4*1282096 .ColorFound:2097 ld c,$982098 call outix128 2100 ld a,(ExplosionSpriteStep)2101 inc a2102 ld (ExplosionSpriteStep),a2103 cp 202104 ret c2105 2106 ld a,213+16 2107 ld (spat+4*16),a2108 ld (spat+4*17),a2109 ld (spat+4*18),a2110 ld (spat+4*19),a2111 ld (spat+4*20),a2112 ld (spat+4*21),a2113 ld (spat+4*22),a2114 ld (spat+4*23),a2116 xor a2117 ld (ShowExplosionSprite?),a 2118 ret2120ClearBattleText:2121 ld hl,.BattleTextPointer2122 ld de,BattleTextPointer2123 ld bc,.EndBattleText-.BattleTextPointer2124 ldir2125 ret2127.BattleTextPointer: dw BattleText22128.BattleRound: db 12129.SetBattleText?: db 2 2130.BattleText8: db 0 | dw 0000 | db 0 ,"           ",255 2131.BattleText7: db 0 | dw 0000 | db 0 ,"           ",255 2132.BattleText6: db 0 | dw 0000 | db 0 ,"           ",255 2133.BattleText5: db 0 | dw 0000 | db 0 ,"           ",255 2134.BattleText4: db 0 | dw 0000 | db 0 ,"           ",255 2135.BattleText3: db 0 | dw 0000 | db 0 ,"           ",255 2136.BattleText2: db 0 | dw 0000 | db 0 ,"           ",255 2137.BattleText1: db 5 | dw 0001 | db 0 ,"           ",255 2138.BattleTextQ: db 0 | dw 0000 | db 0 ,"           ",255 2139.EndBattleText:2141SetBattleText:2142 ld a,(LeftOrRightPlayerLostEntireArmy?)2143 or a2144 ret nz2146 ld a,(SetBattleText?)2147 dec a2148 ret m2149 ld (SetBattleText?),a2150 dec a2151 call z,.MoveEveryTextEntry1PositionUp2154 cp 72155 jp z,.EndSetBattleText2157 .SetBattleTextWithoutMovingEntries:2158 call .CleanTextField2160 ld ix,(BattleTextPointer)2161 ld c,195+16 2162 call .SetText2163 ld de,BattleTextQ-BattleText12164 add ix,de2165 ld c,203+16 2166 call .SetText2167 ret2169 .SetText:2170 ld b,060 2172 ld a,(ix) 2173 dec a2174 jp z,.wait2175 dec a2176 jp z,.defend2177 dec a2178 jp z,.DealDamage2179 dec a21802181 dec a2182 jp z,.NextRound 2183 dec a2184 jp z,.EarthBound2185 dec a2186 jp z,.PlateArmor2187 dec a2188 jp z,.Resurrection2189 dec a2190 jp z,.EarthShock2191 dec a2192 jp z,.Curse 2193 dec a2194 jp z,.BlindingFog 2195 dec a2196 jp z,.Implosion2197 dec a2198 jp z,.Sunstrike2199 dec a2200 jp z,.Haste2201 dec a2202 jp z,.ShieldBreaker 2203 dec a2204 jp z,.ClawBack2205 dec a2206 jp z,.SpellBubble2207 dec a2208 jp z,.Cure2209 dec a2210 jp z,.IcePeak2211 dec a2212 jp z,.Hypnosis 2213 dec a2214 jp z,.FrostRing2215 dec a2216 jp z,.MagicArrows2217 dec a2218 jp z,.Frenzy2219 dec a2220 jp z,.Teleport2221 dec a2222 jp z,.PrimalInstinct 2223 ret2225 .PrimalInstinct:2226 call .PutMonsterNameAndLetterS2227 ld hl,.TextPlus3dmgdefspd2228 jp SetText 2229 .TextPlus3dmgdefspd: db "+3 all stats",2552231 .Teleport:2232 call .PutMonsterNameAndLetterS2233 ld hl,.TextTeleported2234 jp SetText 2235 .TextTeleported: db "Teleported",2552237 .Frenzy:2238 call .PutMonsterNameAndLetterS2239 ld hl,.TextFrenzy2240 jp SetText 2241 .TextFrenzy: db "Frenzy",2552243 .MagicArrows:2244 ld hl,.TextMagicArrowsdmg2245 jp .EntryAOESpells2246 .TextMagicArrowsdmg: db "Magic Arrows dmg: ",2552248 .FrostRing:2249 ld hl,.TextFrostRingAOEdmg2250 jp .EntryAOESpells2251 .TextFrostRingAOEdmg: db "Frost Ring AOE dmg: ",2552253 .Hypnosis:2254 call .PutMonsterNameAndLetterS2255 ld hl,.TextHypnotized2256 jp SetText 2257 .TextHypnotized: db "Hypnotized",2552259 .IcePeak:2260 ld hl,.TextIcePeakdmg2261 jp .EntryAOESpells2262 .TextIcePeakdmg: db "Ice Peak dmg: ",2552264 .Cure:2265 call .PutMonsterNameAndLetterS2266 ld hl,.TextCured2267 jp SetText 2268 .TextCured: db "Cured",2552270 .SpellBubble:2271 call .PutMonsterNameAndLetterS2272 ld hl,.TextSpellBubble2273 jp SetText 2274 .TextSpellBubble: db "Spell Bubble",2552276 .ClawBack:2277 call .PutMonsterNameAndLetterS2278 ld hl,.TextClawBack2279 jp SetText 2280 .TextClawBack: db "Claw Back",2552282 .ShieldBreaker:2283 call .PutMonsterNameAndLetterS2284 ld hl,.TextMinus4Defense2285 jp SetText 2286 .TextMinus4Defense: db "-4 def",2552288 .Haste:2289 call .PutMonsterNameAndLetterS2290 ld hl,.TextPlus3Speed2291 jp SetText 2292 .TextPlus3Speed: db "+3 spd",2552294 .Sunstrike:2295 ld hl,.TextSunstrikedmg2296 jp .EntryAOESpells2297 .TextSunstrikedmg: db "Sunstrike dmg: ",2552299 .Implosion:2300 ld hl,.TextImplosionAOEdmg2301 jp .EntryAOESpells2302 .TextImplosionAOEdmg: db "Implosion AOE dmg: ",2552304 .BlindingFog:2305 call .PutMonsterNameAndLetterS2306 ld hl,.TextMinus50PercentDamage2307 jp SetText 2308 .TextMinus50PercentDamage: db "-50% dmg",2552310 .Curse:2311 call .PutMonsterNameAndLetterS2312 ld hl,.TextMinus3Damage2313 jp SetText 2314 .TextMinus3Damage: db "-3 dmg",2552316 .EarthShock:2317 ld hl,.TextEarthShockAOEdmg2318 .EntryAOESpells:2319 push bc2320 call SetText 2321 pop bc2322 ld hl,(AEOSpellDamage)2323 ld a,(PutLetter+dx) 2324 ld b,a 2325 push bc2326 call SetNumber16BitCastle2327 pop bc2328 ret2329 .TextEarthShockAOEdmg: db "Earthshock AOE dmg: ",2552331 .Resurrection:2332 call .PutMonsterNameAndLetterS2333 ld hl,.TextResurrected2334 jp SetText 2335 .TextResurrected: db "Resurrected",2552337 .PlateArmor:2338 call .PutMonsterNameAndLetterS2339 ld hl,.TextPlus5Defense2340 jp SetText 2341 .TextPlus5Defense: db "+5 def",2552343 .EarthBound:2344 call .PutMonsterNameAndLetterS2345 ld hl,.Textminus50PercentSpeed2346 jp SetText 2347 .Textminus50PercentSpeed: db "-50% spd",2552350 .PutMonsterNameAndLetterS:2351 push ix2352 pop hl2353 ld de,42354 add hl,de 2355 push bc2356 call SetText 2357 pop bc23592360 dec hl2361 ld a,(hl)2362 cp "s"2363 ret z 2365 ld a,(ix+3) 2366 dec a2367 ret z 2369 ld hl,.TextLetterS2371 ld a,(PutLetter+dx) 2372 ld b,a 2373 push bc2374 call SetText 2375 pop bc2377 ld a,(PutLetter+dx) 2378 ld b,a 2379 ret2380.TextLetterS: db "s: ",2552397 .NextRound:2398 ld a,(ix+1) 2399 dec a2400 jr z,.CombatStart2402 ld hl,.TextRound2403 push bc2404 call SetText 2405 pop bc2407 ld a,(ix+1) 2408 ld h,02409 ld l,a2410 ld a,(PutLetter+dx) 2411 ld b,a 2412 push bc2413 call SetNumber16BitCastle2414 pop bc2416 ld hl,.TextBegins2417 ld a,(PutLetter+dx) 2418 ld b,a 2420 call SetText 2422 ret2424 .CombatStart:2425 ld hl,.TextCombatStart2426 call SetText 2427 ret2428 2429.TextCombatStart: db "      Combat Start",2552430.TextRound: db "Round ",2552431.TextBegins: db " begins.",2552433 .defend:2434 push ix2435 pop hl2436 ld de,42437 add hl,de 2438 push bc2439 call SetText 2440 pop bc2442 dec hl2443 ld a,(hl)2444 cp "s"2445 ld hl,.TextdefendMultipleUnits2446 jr nz,.EndCheckNameEndsWithS_defend2447 ld hl,.TextdefendMultipleUnits+12448 .EndCheckNameEndsWithS_defend:2450 ld a,(ix+3) 2451 dec a2452 jr nz,.AmountFound22453 ld hl,.TextdefendSingleUnit2454 .AmountFound2:2455 ld a,(PutLetter+dx) 2456 ld b,a 2457 push bc2458 call SetText 2459 pop bc2461 ld hl,.TextdefendOpenPlus2462 ld a,(PutLetter+dx) 2463 add a,22464 ld b,a 2465 push bc2466 call SetText 2467 pop bc2469 ld a,(ix+1) 2470 ld h,02471 ld l,a2472 ld a,(PutLetter+dx) 2473 ld b,a 2474 push bc2475 call SetNumber16BitCastle2476 pop bc2478 ld hl,.Textdef2479 ld a,(PutLetter+dx) 2480 add a,12481 ld b,a 2483 call SetText 2485 ret2487.TextdefendOpenPlus: db "(+",2552488.TextdefendSingleUnit: db " defends.",2552489.TextdefendMultipleUnits: db "s defend.",2552490.Textdef: db "def)",2552492 .wait:2493 ld hl,.TextThe2494 push bc2495 call SetText 2496 pop bc2498 push ix2499 pop hl2500 ld de,42501 add hl,de 2502 ld a,(PutLetter+dx) 2503 ld b,a 2504 push bc2505 call SetText 2506 pop bc2509 dec hl2510 ld a,(hl)2511 cp "s"2512 ld hl,.TextwaitsMultipleUnits2513 jr nz,.EndCheckNameEndsWithS_wait2514 ld hl,.TextwaitsMultipleUnits+12515 .EndCheckNameEndsWithS_wait:2517 ld a,(ix+3) 2518 dec a2519 jr nz,.AmountFound12520 ld hl,.TextwaitsSingleUnit2521 .AmountFound1:2523 ld a,(PutLetter+dx) 2524 ld b,a 2526 call SetText 2528 ret2529.TextThe: db "The ",2552530.TextwaitsSingleUnit: db " waits.",2552531.TextwaitsMultipleUnits: db "s wait.",2552534.DealDamage:2535 push ix2536 pop hl2537 ld de,42538 add hl,de 2539 push bc2540 call SetText 2541 pop bc2544 dec hl2545 ld a,(hl)2546 cp "s"2547 ld hl,.TextdealdamageMultipleUnits2548 jr nz,.EndCheckNameEndsWithS_dealdamage2549 ld hl,.TextdealdamageMultipleUnits+12550 .EndCheckNameEndsWithS_dealdamage:2554 ld a,(ix+3) 2555 dec a2556 jr nz,.AmountFound32557 ld hl,.TextdealdamageSingleUnit2558 .AmountFound3:2560 ld a,(PutLetter+dx) 2561 ld b,a 2562 push bc2563 call SetText 2564 pop bc2566 ld l,(ix+1) 2567 ld h,(ix+2) 2568 ld a,(PutLetter+dx) 2569 ld b,a 2570 push bc2571 call SetNumber16BitCastle2572 pop bc2574 ld hl,.TextsDMG2575 ld a,(PutLetter+dx) 2576 ld b,a 2578 call SetText 2580 ret2581.TextdealdamageSingleUnit: db " deals ",2552582.TextdealdamageMultipleUnits: db "s deal ",2552583.TextsDMG: db " dmg.",2552585.EndSetBattleText:2586 xor a2587 ld (SetBattleText?),a2588 ret2590.MoveEveryTextEntry1PositionUp:2591 ld hl,BattleText72592 ld de,BattleText82593 ld bc,BattleTextQ-BattleText82594 ldir25952597.ResetBattleTextPointer:2598 ld hl,BattleText22599 ld (BattleTextPointer),hl2600 ret2602.CleanTextField:2603 ld hl,$4000 + (195*128) + (060/2) - 1282604 ld de,$0000 + ((195+16)*128) + (060/2) - 1282605 ld bc,$0000 + (014*256) + (118/2)2606 ld a,BattleFieldWinterBlock 2607 jp CopyRamToVramCorrectedCastleOverview 26092610AttackingHeroTakesItemsDefendingHero:2611 ld ix,(plxcurrentheroAddress) 2612 ld iy,(HeroThatGetsAttacked) 2613 push iy2614 pop hl2615 ld a,l2616 or h2617 ret z 2619 ld d,9 + 6 2620 .PassItemLoop:2621 call .PassItem2622 inc ix2623 inc iy2624 dec d2625 jr nz,.PassItemLoop2626 ret2627 2628 .PassItem:2629 ld a,(iy+HeroInventory)2630 cp 045 2631 ret z2632 ld c,a2633 ld a,(ix+HeroInventory)2634 cp 045 2635 jr z,.EmptyBodySlotFound2636 2637 push ix2638 ld ix,(plxcurrentheroAddress) 2639 ld b,6 2640 .loop:2641 ld a,(ix+HeroInventory+9)2642 cp 0452643 jr z,.EmptyOpenSlotFound2644 inc ix2645 djnz .loop2646 pop ix2647 ret2649 .EmptyBodySlotFound:2650 ld (ix+HeroInventory),c2651 ret2652 .EmptyOpenSlotFound:2653 ld (ix+HeroInventory+9),c2654 pop ix2655 ret2657SetSpellExplanation:2658 ld a,b 2659 ld (MenuOptionSelected?Backup),a2661 ld a,12662 ld (SpellExplanationDisplayed?),a2664 xor a 2665 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2667 call .SetDescriptionTexticonCostAndDamage26682673 ld a,1 2674 ld (SetText.SelfModifyingCodeSetTextInCurrentPage),a2675 ret2686 .SetDescriptionTexticonCostAndDamage:2687 2688 exx2689 ld hl,0 2690 exx2691 ld a,(MenuOptionSelected?Backup)2692 dec a2693 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools12694 ld de,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1282695 ld b,CostAllSpellSchools12696 jp z,.GoSetDescriptionTexticonCostAndDamage2698 2702 dec a2703 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools22704 ld de,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1282705 ld b,CostAllSpellSchools22706 jp z,.GoSetDescriptionTexticonCostAndDamage2708 2712 dec a2713 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools32714 ld de,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1282715 ld b,CostAllSpellSchools32716 jp z,.GoSetDescriptionTexticonCostAndDamage2718 2719 push af2720 exx2721 call GetMagicArrowsDMGAmount 2722 exx2723 pop af2725 dec a2726 ld hl,SpellDescriptionsBattle.DescriptionAllSpellSchools42727 ld de,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1282728 ld b,CostAllSpellSchools42729 jp z,.GoSetDescriptionTexticonCostAndDamage2731 ld a,(SelectedElementInSpellBook) 2732 or a2733 jp z,.SetSpellExplanationEarth2734 dec a2735 jp z,.SetSpellExplanationFire2736 dec a2737 jp z,.SetSpellExplanationAir2738 2739 .SetSpellExplanationWater:2740 2741 exx2742 call GetFrostRingDMGAmount 2743 exx2744 ld a,(MenuOptionSelected?Backup)2745 cp 5 2746 ld hl,SpellDescriptionsBattle.Descriptionwater12747 ld de,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1282748 ld b,CostWaterSpell12749 jp z,.GoSetDescriptionTexticonCostAndDamage2751 2752 exx2753 ld hl,0 2754 exx27552756 cp 6 2757 ld hl,SpellDescriptionsBattle.Descriptionwater22758 ld de,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1282759 ld b,CostWaterSpell22760 jp z,.GoSetDescriptionTexticonCostAndDamage2762 2763 exx2764 call GetIceBoltDMGAmount 2765 exx2766 ld a,(MenuOptionSelected?Backup)2767 cp 7 2768 ld hl,SpellDescriptionsBattle.Descriptionwater32769 ld de,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1282770 ld b,CostWaterSpell32771 jp z,.GoSetDescriptionTexticonCostAndDamage2773 2774 exx2775 call GetCureAmount 2776 exx2777 ld hl,SpellDescriptionsBattle.Descriptionwater42778 ld de,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1282779 ld b,CostWaterSpell42780 jp .GoSetDescriptionTexticonCostAndDamage_Cure2782 .SetSpellExplanationAir:2783 2784 exx2785 ld hl,0 2786 exx2787 ld a,(MenuOptionSelected?Backup)2788 cp 5 2789 ld hl,SpellDescriptionsBattle.DescriptionAir12790 ld de,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1282791 ld b,CostAirSpell12792 jp z,.GoSetDescriptionTexticonCostAndDamage2794 2795 cp 6 2796 ld hl,SpellDescriptionsBattle.DescriptionAir22797 ld de,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1282798 ld b,CostAirSpell22799 jp z,.GoSetDescriptionTexticonCostAndDamage2801 2802 cp 7 2803 ld hl,SpellDescriptionsBattle.DescriptionAir32804 ld de,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1282805 ld b,CostAirSpell32806 jp z,.GoSetDescriptionTexticonCostAndDamage2808 2809 ld hl,SpellDescriptionsBattle.DescriptionAir42810 ld de,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1282811 ld b,CostAirSpell42812 jp .GoSetDescriptionTexticonCostAndDamage2814 .SetSpellExplanationFire:2815 2816 exx2817 call GetsunstrikeDMGAmount 2818 exx2819 ld a,(MenuOptionSelected?Backup)2820 cp 5 2821 ld hl,SpellDescriptionsBattle.DescriptionFire12822 ld de,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1282823 ld b,CostFireSpell12824 jp z,.GoSetDescriptionTexticonCostAndDamage2826 2827 exx2828 call GetimplosionDMGAmount 2829 exx2830 ld a,(MenuOptionSelected?Backup)2831 cp 6 2832 ld hl,SpellDescriptionsBattle.DescriptionFire22833 ld de,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1282834 ld b,CostFireSpell22835 jp z,.GoSetDescriptionTexticonCostAndDamage2837 2838 exx2839 ld hl,0 2840 exx2841 ld a,(MenuOptionSelected?Backup)2842 cp 7 2843 ld hl,SpellDescriptionsBattle.DescriptionFire32844 ld de,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1282845 ld b,CostFireSpell32846 jp z,.GoSetDescriptionTexticonCostAndDamage2848 2852 ld hl,SpellDescriptionsBattle.DescriptionFire42853 ld de,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1282854 ld b,CostFireSpell42855 jp .GoSetDescriptionTexticonCostAndDamage2857 .SetSpellExplanationEarth:2858 2859 exx2860 call GetEarthShockDMGAmount 2861 exx2862 ld a,(MenuOptionSelected?Backup)2863 cp 5 2864 ld hl,SpellDescriptionsBattle.DescriptionEarth12865 ld de,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1282866 ld b,CostEarthSpell12867 jp z,.GoSetDescriptionTexticonCostAndDamage2869 2870 exx2871 call GetResurrectionAmount 2872 exx2873 ld a,(MenuOptionSelected?Backup)2874 cp 6 2875 ld hl,SpellDescriptionsBattle.DescriptionEarth22876 ld de,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1282877 ld b,CostEarthSpell22878 jp z,.GoSetDescriptionTexticonCostAndDamage_Resurrection2880 2881 exx2882 ld hl,0 2883 exx2884 ld a,(MenuOptionSelected?Backup)2885 cp 7 2886 ld hl,SpellDescriptionsBattle.DescriptionEarth32887 ld de,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1282888 ld b,CostEarthSpell32889 jp z,.GoSetDescriptionTexticonCostAndDamage2891 2895 ld hl,SpellDescriptionsBattle.DescriptionEarth42896 ld de,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1282897 ld b,CostEarthSpell42898 jp .GoSetDescriptionTexticonCostAndDamage2900 .GoSetDescriptionTexticonCostAndDamage_Resurrection:2901 exx2902 push hl 2903 ld hl,02904 exx2905 call .GoSetDescriptionTexticonCostAndDamage2906 pop hl 2907 push iy2908 ld b,SpellBookX + 0772909 ld c,SpellBookY + 1662910 call SetNumber16BitCastle2911 pop iy2912 ret2914 .GoSetDescriptionTexticonCostAndDamage_Cure:2915 exx2916 push hl 2917 ld hl,02918 exx2919 call .GoSetDescriptionTexticonCostAndDamage2920 pop hl 2921 push iy2922 ld b,SpellBookX + 892923 ld c,SpellBookY + 1732924 call SetNumber16BitCastle2925 pop iy2926 ret2928 .GoSetDescriptionTexticonCostAndDamage:2929 push bc 2930 push de 2931 2932 2933 ld b,SpellBookX + 0302934 ld c,SpellBookY + 1592935 call SetText2936 2937 pop hl 2938 ld de,$0000 + ((SpellBookY + 160) *128) + ((SpellBookX+10)/2)2939 ld bc,$0000 + (HeroOverViewSpellIconWindowButtonNY*256) + (HeroOverViewSpellIconWindowButtonNX/2)2940 ld a,SpellBookGraphicsBlock 2941 call CopyRamToVramCorrectedWithoutActivePageSetting 2942 2943 pop bc 2944 push bc2945 .CostAmountFound:2946 ld l,b2947 ld h,02948 ld b,SpellBookX + 1742949 ld c,SpellBookY + 1592950 push iy2951 call SetNumber16BitCastle2952 pop iy2954 ld b,SpellBookX + 1482955 ld c,SpellBookY + 1592956 ld hl,.TextCost2957 call SetText2959 pop bc 2960 .DamageAmountFound:2961 exx 2962 ld a,l2963 or h2964 ret z2965 push iy2966 ld b,SpellBookX + 1682967 ld c,SpellBookY + 17329682970 call SetNumber16BitCastle29712972 pop iy2974 ld b,SpellBookX + 1322975 ld c,SpellBookY + 1732976 ld hl,.TextDamage2977 jp SetText2978 .TextDamage: db "Damage:",2552979 .TextCost: db "Cost:",255 2980 2992SpellDescriptionsBattle:2993.DescriptionEarth4: db "Earthbound",2542994 db "Reduces the speed of the selected",2542995 db "enemy unit by 50%",2552997.DescriptionEarth3: db "Plate Armor",2542998 db "Increases the defense of the selected",2542999 db "friendly unit by 5.",2553001.DescriptionEarth2: db "Resurrection",2543002 db "Reanimates     HP of killed living",2543003 db "friendly creatures.",2553005.DescriptionEarth1: db "Earthshock",2543006 db "Deals damage to all creatures in target",2543007 db "and adjacent hexes.",2553010.DescriptionFire4: db "Curse",2543011 db "Causes the selected enemy unit to deal",2543012 db "-3 damage when attacking.",2553014.DescriptionFire3: db "Blinding Fog",2543015 db "Target ranged unit deals 50% less",2543016 db "damage.",2553018.DescriptionFire2: db "Implosion",2543019 db "Deals damage to enemy unit and",2543020 db "adjecent units.",2553022.DescriptionFire1: db "Sunstrike",2543023 db "Calls down a solar beam to incinerate",2543024 db "a single enemy unit.",2553026.Descriptionair4: db "Haste",2543027 db "Increases the speed of the selected",2543028 db "friendly unit by 3.",2553030.Descriptionair3: db "Shieldbreaker",2543031 db "Reduces the defense of the selected ",2543032 db "enemy unit by 4.",2553034.Descriptionair2: db "Claw Back",2543035 db "Target allied unit has unlimited",2543036 db "retaliations each round.",2553038.Descriptionair1: db "Spell Bubble",2543039 db "Target friendly unit has a 75% chance",2543040 db "to deflect a single enemy spell.",2553043.Descriptionwater4: db "Cure",2543044 db "Removes all negative spell effects",2543045 db "and heals for     HP.",2553047.Descriptionwater3: db "Ice Peak",2543048 db "Conjures an ice shard from the ground,",2543049 db "impaling a single enemy.",2553051.Descriptionwater2: db "Hypnosis",2543052 db "Enemy unit cant attack until attacked,",2543053 db "dispelled or effect wears off.",2553056.Descriptionwater1: db "Frost Ring",2543057 db "Causes damage to all units adjacent to",2543058 db "the central hex.",2553061.DescriptionAllSpellSchools4: db "magic arrows",2543062 db "Unleashes a relentless volley of arrows",2543063 db "at a single enemy unit.",2553065.DescriptionAllSpellSchools3: db "Frenzy",2543066 db "Friendly unit's damage increases by 5",2543067 db "while its defense decreases by 5.",2553069.DescriptionAllSpellSchools2: db "Teleport",2543070 db "Instantaneously displaces an allied",2543071 db "troop to an an unoccupied space.",2553073.DescriptionAllSpellSchools1: db "Primal Instinct",2543074 db "Friendly unit receives +3 damage,",2543075 db "+3 defense and +3 speed.",2553083SetAmountSpellPoints:3084 ld b,100 3085 ld c,168 3086 ld hl,.TextSpellPoints3087 call SetText 3089 call SetCurrentActiveMOnsterInIX3090 3091 push ix3092 pop hl 3093 ld de,Monster73094 call CompareHLwithDE 3095 ld ix,(plxcurrentheroAddress) 3096 jr c,.HeroFound3097 ld ix,(HeroThatGetsAttacked) 3098 .HeroFound:3100 3101 ld l,(ix+HeroMana)3102 ld h,(ix+HeroMana+1)3103 ld b,148 3104 ld c,168 3105 call SetNumber16BitCastle3106 ret3107.TextSpellPoints: db "Spell Points:",2553109SpellBookX: equ 0323110SpellBookY: equ 002+BattleScreenVerticalOffset3111HandleSpellBook:3112 ld a,(SpellBookButtonPressed?)3113 or a3114 ret z3115 ld a,(activepage)3116 or a3117 ret z 3118 xor a3119 ld (SpellBookButtonPressed?),a3120 3121 call SetGraphicsSpellBook3122 call SetAmountSpellPoints3124 3125 call SetCurrentActiveMOnsterInIX 3126 3127 push ix3128 pop hl 3129 ld de,Monster73130 call CompareHLwithDE 3131 ld ix,(plxcurrentheroAddress) 3132 jr c,.HeroFound23133 ld ix,(HeroThatGetsAttacked) 3134 .HeroFound2:3136 call SetGraphicsElementalSpells3137 call SetGraphicsElementalSpells.SetUniversalSpells3138 call LightUpCurrentActiveElementalButton3139 halt 3140 call SwapAndSetPage 3143 .engine:3144 call PopulateControls 3146 3147 ld ix,BattleSpellBookButtonTable3148 ld iy,ButtonTableSpellBookSYSX_Water3149 call CheckButtonMouseInteraction4ElementalButtons3150 ld a,b3151 or a3152 call nz,.ElementalButtonPressed31533154 ld ix,BattleSpellBookButtonTable3155 call .CopyButtons 3159 3160 ld ix,BattleSpellIconButtons3161 ld a,(SelectedElementInSpellBook) 3162 or a3163 ld iy,ButtonTableSpellIconsEarthSYSX3164 jp z,.ElementFound3165 dec a3166 ld iy,ButtonTableSpellIconsFireSYSX3167 jp z,.ElementFound3168 dec a3169 ld iy,ButtonTableSpellIconsAirSYSX3170 jp z,.ElementFound3171 ld iy,ButtonTableSpellIconsWaterSYSX3172 .ElementFound:3173 call .CheckButtonMouseInteraction31743177 ld ix,BattleSpellIconButtons3178 call .CopyButtons 3181 ld a,(NewPrContr)3182 bit 5,a 3183 jp nz,ExitSpellBook3184 call CheckMouseClickOutsideSpellBook 3185 jp .engine3188 .ElementalButtonPressed:3189 ld a,%1000 00113190 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3191 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3192 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3193 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3195 call .HandleSelectedElementButton3197 3198 call SetCurrentActiveMOnsterInIX 3199 3200 push ix3201 pop hl 3202 ld de,Monster73203 call CompareHLwithDE 3204 ld ix,(plxcurrentheroAddress) 3205 jr c,.HeroFound33206 ld ix,(HeroThatGetsAttacked) 3207 .HeroFound3:3209 jp SetGraphicsElementalSpells3211 .HandleSelectedElementButton:3212 ld a,b3213 cp 1 3214 jp z,.Water3215 cp 2 3216 jp z,.AirSelected3217 cp 3 3218 jp z,.FireSelected32193222 .EarthSelected:3223 xor a3224 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3225 ld (SelectedElementInSpellBook),a 3226 ret3228 .FireSelected:3229 xor a3230 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3231 ld a,13232 ld (SelectedElementInSpellBook),a 3233 ret3235 .AirSelected:3236 xor a3237 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3238 ld a,23239 ld (SelectedElementInSpellBook),a 3240 ret3242 .Water:3243 xor a3244 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3245 ld a,33246 ld (SelectedElementInSpellBook),a 3247 ret3251.CopyButtons: 3256 ld b,(ix+HeroOverviewWindowAmountOfButtons)3257 .loop:3258 push bc3259 call .Setbutton3260 pop bc3261 ld de,ButtonTableLenght3262 add ix,de3263 ld de,6 3264 add iy,de3265 djnz .loop3266 ret3268 .Setbutton:3269 bit 0,(ix+HeroOverviewWindowButtonStatus)3270 jr nz,.bit0isSet3271 bit 1,(ix+HeroOverviewWindowButtonStatus)3272 ret z3273 3274 .bit1isSet:3275 res 1,(ix+HeroOverviewWindowButtonStatus)3276 jr .goCopyButton3277 .bit0isSet:3278 res 0,(ix+HeroOverviewWindowButtonStatus) 3279 .goCopyButton:3281 bit 7,(ix+HeroOverviewWindowButtonStatus)3282 ld l,(iy+ButtonOff)3283 ld h,(iy+ButtonOff+1)3284 jr nz,.go 3285 bit 6,(ix+HeroOverviewWindowButtonStatus)3286 ld l,(iy+ButtonMouseOver)3287 ld h,(iy+ButtonMouseOver+1)3288 jr nz,.go 3290 ld l,(iy+ButtonOMouseClicked)3291 ld h,(iy+ButtonOMouseClicked+1)3292 .go:3293 3294 ld e,(ix+HeroOverviewWindowButton_de)3295 ld d,(ix+HeroOverviewWindowButton_de+1)3297 ld c,(ix+Buttonnynx)3298 ld b,(ix+Buttonnynx+1)3300 ld a,SpellBookGraphicsBlock 3301 jp CopyRamToVramCorrectedWithoutActivePageSetting 3318.CheckButtonMouseInteraction:3319 ld b,(ix+HeroOverviewWindowAmountOfButtons)3320 ld de,ButtonTableLenght3322 .loop2:3323 call .check3324 add ix,de3325 djnz .loop23327 ld a,(SpellExplanationDisplayed?) 3328 or a3329 ret z3330 xor a3331 ld (SpellExplanationDisplayed?),a 3333 3338 ld hl,$4000 + (158*128) + (010/2) -1283339 ld de,$0000 + ((SpellBookY+158)*128) + ((SpellBookX+10)/2)3340 ld bc,$0000 + (20*256) + (176/2)3341 ld a,SpellBookGraphicsBlock3342 jp CopyRamToVramCorrectedWithoutActivePageSetting 3343 3344 .check:3345 ld a,(ix+HeroOverviewWindowButtonStatus)3346 or a3347 ret z3348 3349 ld a,(spat+0) 3350 cp (ix+HeroOverviewWindowButtonYtop)3351 jr c,.NotOverButton3352 cp (ix+HeroOverviewWindowButtonYbottom)3353 jr nc,.NotOverButton3354 ld a,(spat+1) 3356 add a,063358 cp (ix+HeroOverviewWindowButtonXleft)3359 jr c,.NotOverButton3360 cp (ix+HeroOverviewWindowButtonXright)3361 jr nc,.NotOverButton3362 3369 ld a,(Controls)3370 bit 4,a 3371 jr nz,.MouseOverButtonAndSpacePressed3372 bit 5,(ix+HeroOverviewWindowButtonStatus) 3373 jr nz,.MenuOptionSelected 3374 .MouseHoverOverButton:3375 pop af 3376 bit 6,(ix+HeroOverviewWindowButtonStatus) 3377 ret nz3378 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113379 push iy3380 push bc3381 ld bc,SFX_ButtonHoverOver3382 call RePlayerSFX_PlayCh13383 pop bc3384 pop iy3385 jp SetSpellExplanation 3387 .MouseOverButtonAndSpacePressed:3388 bit 5,(ix+HeroOverviewWindowButtonStatus) 3389 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3390 ld a,(NewPrContr)3391 bit 4,a 3392 jr z,.MouseHoverOverButton3394 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3395 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113397 push iy3398 push bc3399 ld bc,SFX_ButtonClicked3400 call RePlayerSFX_PlayCh13401 pop bc3402 pop iy3404 pop af 3405 ret3407 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3408 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113409 pop af 3410 ret3412 .NotOverButton:3413 bit 5,(ix+HeroOverviewWindowButtonStatus) 3414 jr nz,.buttonIsStillLit3415 bit 6,(ix+HeroOverviewWindowButtonStatus) 3416 ret z3417 .buttonIsStillLit:3418 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113419 pop af 3420 ret3422.MenuOptionSelected:3423 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113425 pop af 3427 ld a,b 3428 ld (SpellSelected?),a 3430 call GetSelectedSpellCost 3431 ld e,a3432 ld d,03433 push de3435 call SetCurrentActiveMOnsterInIX3436 3437 push ix3438 pop hl 3439 ld de,Monster73440 call CompareHLwithDE 3441 ld ix,(plxcurrentheroAddress) 3442 jr c,.HeroFound3443 ld ix,(HeroThatGetsAttacked) 3444 .HeroFound:3446 3447 ld l,(ix+HeroMana)3448 ld h,(ix+HeroMana+1)3449 pop de3450 or a3451 sbc hl,de3452 jr c,.NotEnoughMana3453 pop af 3454 jp ExitSpellBook 3456 .NotEnoughMana:3457 xor a3458 ld (SpellSelected?),a 3459 ret3461CheckButtonMouseInteraction4ElementalButtons:3462 ld b,(ix+HeroOverviewWindowAmountOfButtons)3463 ld de,ButtonTableLenght3465 .loop2:3466 call .check3467 add ix,de3468 djnz .loop23469 ret3470 3471 .check:3472 ld a,(ix+HeroOverviewWindowButtonStatus)3473 or a3474 ret z3475 3476 ld a,(spat+0) 3477 cp (ix+HeroOverviewWindowButtonYtop)3478 jr c,.NotOverButton3479 cp (ix+HeroOverviewWindowButtonYbottom)3480 jr nc,.NotOverButton3481 ld a,(spat+1) 3483 add a,063485 cp (ix+HeroOverviewWindowButtonXleft)3486 jr c,.NotOverButton3487 cp (ix+HeroOverviewWindowButtonXright)3488 jr nc,.NotOverButton3489 3496 ld a,(Controls)3497 bit 4,a 3498 jr nz,.MouseOverButtonAndSpacePressed3499 bit 5,(ix+HeroOverviewWindowButtonStatus) 3500 jr nz,.MenuOptionSelected 3501 .MouseHoverOverButton:3502 bit 6,(ix+HeroOverviewWindowButtonStatus) 3503 ret nz3504 ld (ix+HeroOverviewWindowButtonStatus),%0100 00113506 push iy3507 push bc3508 ld bc,SFX_ButtonHoverOver3509 call RePlayerSFX_PlayCh13510 pop bc3511 pop iy3512 ret3514 .MouseOverButtonAndSpacePressed:3515 bit 5,(ix+HeroOverviewWindowButtonStatus) 3516 jr nz,.MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit3517 ld a,(NewPrContr)3518 bit 4,a 3519 jr z,.MouseHoverOverButton3521 .MouseOverButtonAndSpacePressedOverButtonNotYetLit:3522 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113523 push iy3524 push bc3525 ld bc,SFX_ButtonClicked3526 call RePlayerSFX_PlayCh13527 pop bc3528 pop iy3529 ret3530 3531 .MouseOverButtonAndSpacePressedOverButtonThatWasAlreadyFullyLit:3532 ld (ix+HeroOverviewWindowButtonStatus),%0010 00113533 ret3535 .NotOverButton:3536 bit 5,(ix+HeroOverviewWindowButtonStatus) 3537 jr nz,.buttonIsStillLit3538 bit 6,(ix+HeroOverviewWindowButtonStatus) 3539 ret z3540 .buttonIsStillLit:3541 ld (ix+HeroOverviewWindowButtonStatus),%1000 00113542 ret3544.MenuOptionSelected:3545 ld (ix+HeroOverviewWindowButtonStatus),%1010 00113547 ld a,b 3549 pop af 3550 ret3559LightUpCurrentActiveElementalButton:3560 ld a,(SelectedElementInSpellBook) 3561 or a3562 jr z,.Earth3563 dec a3564 jr z,.Fire3565 dec a3566 jr z,.Air3568 .Water:3569 ld a,%0010 00113570 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3571 call .LightUpButton3572 xor a3573 ld (BattleSpellBookButtonTable + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3574 ret3576 .Air:3577 ld a,%0010 00113578 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3579 call .LightUpButton3580 xor a3581 ld (BattleSpellBookButtonTable + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3582 ret3584 .Fire:3585 ld a,%0010 00113586 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3587 call .LightUpButton3588 xor a3589 ld (BattleSpellBookButtonTable + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3590 ret3591 3592 .Earth:3593 ld a,%0010 00113594 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3595 call .LightUpButton3596 xor a3597 ld (BattleSpellBookButtonTable + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 3598 ret3600 .LightUpButton:3601 ld ix,BattleSpellBookButtonTable3602 ld iy,ButtonTableSpellBookSYSX_Water3603 jp HandleSpellBook.CopyButtons 3608CheckMouseClickOutsideSpellBook:3609 ld a,(NewPrContr)3610 bit 4,a 3611 ret z3613 ld a,(spat+0) 3614 cp SpellBookY3615 jr c,.NotOverHeroOverViewSpellBookWindow3616 cp SpellBookY+HeroOverViewSpellBookWindowNY3617 jr nc,.NotOverHeroOverViewSpellBookWindow3618 3619 ld a,(spat+1) 3621 add a,063623 cp SpellBookX3624 jr c,.NotOverHeroOverViewSpellBookWindow3625 cp SpellBookX+HeroOverViewSpellBookWindowNX3626 ret c3628 .NotOverHeroOverViewSpellBookWindow:3629 pop af3631 xor a3632 ld (NewPrContr),a 3634 jp ExitSpellBook3636ExitSpellBook:3637 ld hl,CheckVictoryOrDefeat.CopyPage1toPage03638 call docopy3639 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady3640 call docopy3641 halt 3642 ret3644SetGraphicsElementalSpells:3645 xor a3646 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3647 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3648 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3649 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3651 ld a,(SelectedElementInSpellBook) 3652 or a3653 jp z,.SetEarthSpells3654 dec a3655 jp z,.SetFireSpells3656 dec a3657 jp z,.SetAirSpells3658 jp .SetWaterSpells3660 .EraseElementalSpellLevel1:3661 ld hl,$4000 + ((.HeroOverViewSpell1backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell1backdropDX-SpellBookX)/2) -1283662 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3663 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3664 ld a,SpellBookGraphicsBlock 3665 jp CopyRamToVramCorrectedWithoutActivePageSetting 3667 .EraseElementalSpellLevel2:3668 ld hl,$4000 + ((.HeroOverViewSpell2backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell2backdropDX-SpellBookX)/2) -1283669 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3670 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3671 ld a,SpellBookGraphicsBlock 3672 jp CopyRamToVramCorrectedWithoutActivePageSetting 3674 .EraseElementalSpellLevel3:3675 ld hl,$4000 + ((.HeroOverViewSpell3backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell3backdropDX-SpellBookX)/2) -1283676 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3677 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3678 ld a,SpellBookGraphicsBlock 3679 jp CopyRamToVramCorrectedWithoutActivePageSetting 3681 .EraseElementalSpellLevel4:3682 ld hl,$4000 + ((.HeroOverViewSpell4backdropDY-SpellBookY)*128) + ((.HeroOverViewSpell4backdropDX-SpellBookX)/2) -1283683 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3684 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3685 ld a,SpellBookGraphicsBlock 3686 jp CopyRamToVramCorrectedWithoutActivePageSetting 3688 .CheckSpellScrollAvailable:3689 cp (ix+HeroInventory+9)3690 ret z3691 cp (ix+HeroInventory+10)3692 ret z3693 cp (ix+HeroInventory+11)3694 ret z3695 cp (ix+HeroInventory+12)3696 ret z3697 cp (ix+HeroInventory+13)3698 ret z3699 cp (ix+HeroInventory+14)3700 ret3702.SetEarthSpells:3703 3704 ld a,46 3705 call .CheckSpellScrollAvailable 3706 jr z,.PlaceEarthSpell13707 bit 0,(ix+HeroEarthSpells)3708 jr nz,.PlaceEarthSpell13709 call .EraseElementalSpellLevel13710 jr .EndPlaceEarthSpell13711 .PlaceEarthSpell1:3712 ld a,%1000 00113713 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3714 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283715 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3716 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3717 ld a,SpellBookGraphicsBlock 3718 call CopyRamToVramCorrectedWithoutActivePageSetting 3719 ld hl,$4000 + (Spell01IconSY*128) + (Spell01IconSX/2) -1283720 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3721 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3722 ld a,SpellBookGraphicsBlock 3723 call CopyRamToVramCorrectedWithoutActivePageSetting 3724 .EndPlaceEarthSpell1:3726 ld a,47 3727 call .CheckSpellScrollAvailable 3728 jr z,.PlaceEarthSpell23729 bit 1,(ix+HeroEarthSpells)3730 jr nz,.PlaceEarthSpell23731 call .EraseElementalSpellLevel23732 jr .EndPlaceEarthSpell23733 .PlaceEarthSpell2:3734 ld a,%1000 00113735 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3736 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283737 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3738 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3739 ld a,SpellBookGraphicsBlock 3740 call CopyRamToVramCorrectedWithoutActivePageSetting 3741 ld hl,$4000 + (Spell02IconSY*128) + (Spell02IconSX/2) -1283742 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3743 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3744 ld a,SpellBookGraphicsBlock 3745 call CopyRamToVramCorrectedWithoutActivePageSetting 3746 .EndPlaceEarthSpell2:3748 ld a,48 3749 call .CheckSpellScrollAvailable 3750 jr z,.PlaceEarthSpell33751 bit 2,(ix+HeroEarthSpells)3752 jr nz,.PlaceEarthSpell33753 call .EraseElementalSpellLevel33754 jr .EndPlaceEarthSpell33755 .PlaceEarthSpell3:3756 ld a,%1000 00113757 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3758 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283759 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3760 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3761 ld a,SpellBookGraphicsBlock 3762 call CopyRamToVramCorrectedWithoutActivePageSetting 3763 ld hl,$4000 + (Spell03IconSY*128) + (Spell03IconSX/2) -1283764 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3765 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3766 ld a,SpellBookGraphicsBlock 3767 call CopyRamToVramCorrectedWithoutActivePageSetting 3768 .EndPlaceEarthSpell3:3770 ld a,49 3771 call .CheckSpellScrollAvailable 3772 jr z,.PlaceEarthSpell43773 bit 3,(ix+HeroEarthSpells)3774 jr nz,.PlaceEarthSpell43775 jp .EraseElementalSpellLevel43776 .PlaceEarthSpell4:3777 ld a,%1000 00113778 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3779 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283780 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3781 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3782 ld a,SpellBookGraphicsBlock 3783 call CopyRamToVramCorrectedWithoutActivePageSetting 3784 ld hl,$4000 + (Spell04IconSY*128) + (Spell04IconSX/2) -1283785 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3786 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3787 ld a,SpellBookGraphicsBlock 3788 jp CopyRamToVramCorrectedWithoutActivePageSetting 3790.SetFireSpells:3791 3792 ld a,50 3793 call .CheckSpellScrollAvailable 3794 jr z,.PlaceFireSpell13795 bit 0,(ix+HeroFireSpells)3796 jr nz,.PlaceFireSpell13797 call .EraseElementalSpellLevel13798 jr .EndPlaceFireSpell13799 .PlaceFireSpell1:3800 ld a,%1000 00113801 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3802 3803 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283804 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3805 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3806 ld a,SpellBookGraphicsBlock 3807 call CopyRamToVramCorrectedWithoutActivePageSetting 3808 ld hl,$4000 + (Spell05IconSY*128) + (Spell05IconSX/2) -1283809 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3810 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3811 ld a,SpellBookGraphicsBlock 3812 call CopyRamToVramCorrectedWithoutActivePageSetting 3813 .EndPlaceFireSpell1:3815 ld a,51 3816 call .CheckSpellScrollAvailable 3817 jr z,.PlaceFireSpell23818 bit 1,(ix+HeroFireSpells)3819 jr nz,.PlaceFireSpell23820 call .EraseElementalSpellLevel23821 jr .EndPlaceFireSpell23822 .PlaceFireSpell2:3823 ld a,%1000 00113824 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3825 3826 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283827 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3828 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3829 ld a,SpellBookGraphicsBlock 3830 call CopyRamToVramCorrectedWithoutActivePageSetting 3831 ld hl,$4000 + (Spell06IconSY*128) + (Spell06IconSX/2) -1283832 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3833 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3834 ld a,SpellBookGraphicsBlock 3835 call CopyRamToVramCorrectedWithoutActivePageSetting 3836 .EndPlaceFireSpell2:3838 ld a,52 3839 call .CheckSpellScrollAvailable 3840 jr z,.PlaceFireSpell33841 bit 2,(ix+HeroFireSpells)3842 jr nz,.PlaceFireSpell33843 call .EraseElementalSpellLevel33844 jr .EndPlaceFireSpell33845 .PlaceFireSpell3:3846 ld a,%1000 00113847 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3848 3849 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283850 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3851 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3852 ld a,SpellBookGraphicsBlock 3853 call CopyRamToVramCorrectedWithoutActivePageSetting 3854 ld hl,$4000 + (Spell07IconSY*128) + (Spell07IconSX/2) -1283855 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3856 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3857 ld a,SpellBookGraphicsBlock 3858 call CopyRamToVramCorrectedWithoutActivePageSetting 3859 .EndPlaceFireSpell3:3861 ld a,53 3862 call .CheckSpellScrollAvailable 3863 jr z,.PlaceFireSpell43864 bit 3,(ix+HeroFireSpells)3865 jr nz,.PlaceFireSpell43866 jp .EraseElementalSpellLevel43867 .PlaceFireSpell4:3869 ld a,%1000 00113870 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3872 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283873 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3874 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3875 ld a,SpellBookGraphicsBlock 3876 call CopyRamToVramCorrectedWithoutActivePageSetting 3877 ld hl,$4000 + (Spell08IconSY*128) + (Spell08IconSX/2) -1283878 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3879 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3880 ld a,SpellBookGraphicsBlock 3881 jp CopyRamToVramCorrectedWithoutActivePageSetting 3883.SetAirSpells:3884 3885 ld a,54 3886 call .CheckSpellScrollAvailable 3887 jr z,.PlaceAirSpell13888 bit 0,(ix+HeroAirSpells)3889 jr nz,.PlaceAirSpell13890 call .EraseElementalSpellLevel13891 jr .EndPlaceAirSpell13892 .PlaceAirSpell1:3893 ld a,%1000 00113894 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3895 3896 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283897 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3898 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3899 ld a,SpellBookGraphicsBlock 3900 call CopyRamToVramCorrectedWithoutActivePageSetting 3901 ld hl,$4000 + (Spell09IconSY*128) + (Spell09IconSX/2) -1283902 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3903 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3904 ld a,SpellBookGraphicsBlock 3905 call CopyRamToVramCorrectedWithoutActivePageSetting 3906 .EndPlaceAirSpell1:3908 ld a,55 3909 call .CheckSpellScrollAvailable 3910 jr z,.PlaceAirSpell23911 bit 1,(ix+HeroAirSpells)3912 jr nz,.PlaceAirSpell23913 call .EraseElementalSpellLevel23914 jr .EndPlaceAirSpell23915 .PlaceAirSpell2:3916 ld a,%1000 00113917 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3919 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283920 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)3921 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3922 ld a,SpellBookGraphicsBlock 3923 call CopyRamToVramCorrectedWithoutActivePageSetting 3924 ld hl,$4000 + (Spell10IconSY*128) + (Spell10IconSX/2) -1283925 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)3926 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3927 ld a,SpellBookGraphicsBlock 3928 call CopyRamToVramCorrectedWithoutActivePageSetting 3929 .EndPlaceAirSpell2:3931 ld a,56 3932 call .CheckSpellScrollAvailable 3933 jr z,.PlaceAirSpell33934 bit 2,(ix+HeroAirSpells)3935 jr nz,.PlaceAirSpell33936 call .EraseElementalSpellLevel33937 jr .EndPlaceAirSpell33938 .PlaceAirSpell3:3939 ld a,%1000 00113940 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3942 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283943 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)3944 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3945 ld a,SpellBookGraphicsBlock 3946 call CopyRamToVramCorrectedWithoutActivePageSetting 3947 ld hl,$4000 + (Spell11IconSY*128) + (Spell11IconSX/2) -1283948 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)3949 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3950 ld a,SpellBookGraphicsBlock 3951 call CopyRamToVramCorrectedWithoutActivePageSetting 3952 .EndPlaceAirSpell3:3954 ld a,57 3955 call .CheckSpellScrollAvailable 3956 jr z,.PlaceAirSpell43957 bit 3,(ix+HeroAirSpells)3958 jr nz,.PlaceAirSpell43959 jp .EraseElementalSpellLevel4 3960 .PlaceAirSpell4:3961 ld a,%1000 00113962 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3964 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283965 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)3966 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3967 ld a,SpellBookGraphicsBlock 3968 call CopyRamToVramCorrectedWithoutActivePageSetting 3969 ld hl,$4000 + (Spell12IconSY*128) + (Spell12IconSX/2) -1283970 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)3971 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3972 ld a,SpellBookGraphicsBlock 3973 jp CopyRamToVramCorrectedWithoutActivePageSetting 3975.SetWaterSpells:3976 3977 ld a,58 3978 call .CheckSpellScrollAvailable 3979 jr z,.PlaceWaterSpell13980 bit 0,(ix+HeroWaterSpells)3981 jr nz,.PlaceWaterSpell13982 call .EraseElementalSpellLevel13983 jr .EndPlaceWaterSpell13984 .PlaceWaterSpell1:3985 ld a,%1000 00113986 ld (BattleSpellIconButtons + (0 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a3987 3988 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1283989 ld de,$0000 + (.HeroOverViewSpell1backdropDY*128) + (.HeroOverViewSpell1backdropDX/2)3990 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)3991 ld a,SpellBookGraphicsBlock 3992 call CopyRamToVramCorrectedWithoutActivePageSetting 3993 ld hl,$4000 + (Spell13IconSY*128) + (Spell13IconSX/2) -1283994 ld de,$0000 + (.Spell1DY*128) + (.Spell1DX/2)3995 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)3996 ld a,SpellBookGraphicsBlock 3997 call CopyRamToVramCorrectedWithoutActivePageSetting 3998 .EndPlaceWaterSpell1:4000 ld a,59 4001 call .CheckSpellScrollAvailable 4002 jr z,.PlaceWaterSpell24003 bit 1,(ix+HeroWaterSpells)4004 jr nz,.PlaceWaterSpell24005 call .EraseElementalSpellLevel24006 jr .EndPlaceWaterSpell24007 .PlaceWaterSpell2:4008 ld a,%1000 00114009 ld (BattleSpellIconButtons + (1 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4010 4011 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284012 ld de,$0000 + (.HeroOverViewSpell2backdropDY*128) + (.HeroOverViewSpell2backdropDX/2)4013 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4014 ld a,SpellBookGraphicsBlock 4015 call CopyRamToVramCorrectedWithoutActivePageSetting 4016 ld hl,$4000 + (Spell14IconSY*128) + (Spell14IconSX/2) -1284017 ld de,$0000 + (.Spell2DY*128) + (.Spell2DX/2)4018 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4019 ld a,SpellBookGraphicsBlock 4020 call CopyRamToVramCorrectedWithoutActivePageSetting 4021 .EndPlaceWaterSpell2:4023 ld a,60 4024 call .CheckSpellScrollAvailable 4025 jr z,.PlaceWaterSpell34026 bit 2,(ix+HeroWaterSpells)4027 jr nz,.PlaceWaterSpell34028 call .EraseElementalSpellLevel34029 jr .EndPlaceWaterSpell34030 .PlaceWaterSpell3:4031 ld a,%1000 00114032 ld (BattleSpellIconButtons + (2 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4033 4034 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284035 ld de,$0000 + (.HeroOverViewSpell3backdropDY*128) + (.HeroOverViewSpell3backdropDX/2)4036 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4037 ld a,SpellBookGraphicsBlock 4038 call CopyRamToVramCorrectedWithoutActivePageSetting 4039 ld hl,$4000 + (Spell15IconSY*128) + (Spell15IconSX/2) -1284040 ld de,$0000 + (.Spell3DY*128) + (.Spell3DX/2)4041 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4042 ld a,SpellBookGraphicsBlock 4043 call CopyRamToVramCorrectedWithoutActivePageSetting 4044 .EndPlaceWaterSpell3:4046 ld a,61 4047 call .CheckSpellScrollAvailable 4048 jr z,.PlaceWaterSpell44049 bit 3,(ix+HeroWaterSpells)4050 jr nz,.PlaceWaterSpell44051 jp .EraseElementalSpellLevel44052 .PlaceWaterSpell4:4053 ld a,%1000 00114054 ld (BattleSpellIconButtons + (3 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4055 4056 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284057 ld de,$0000 + (.HeroOverViewSpell4backdropDY*128) + (.HeroOverViewSpell4backdropDX/2)4058 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4059 ld a,SpellBookGraphicsBlock 4060 call CopyRamToVramCorrectedWithoutActivePageSetting 4061 ld hl,$4000 + (Spell16IconSY*128) + (Spell16IconSX/2) -1284062 ld de,$0000 + (.Spell4DY*128) + (.Spell4DX/2)4063 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4064 ld a,SpellBookGraphicsBlock 4065 jp CopyRamToVramCorrectedWithoutActivePageSetting 4067.SetUniversalSpells:4068 xor a4069 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4070 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4071 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4072 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4074 4075 ld a,62 4076 call .CheckSpellScrollAvailable 4077 jr z,.PlaceUniversalSpell14078 bit 0,(ix+HeroAllSchoolsSpells)4079 jr z,.EndPlaceAllSchoolsSpell1 4080 .PlaceUniversalSpell1:4081 ld a,%1000 00114082 ld (BattleSpellIconButtons + (4 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a4083 4084 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284085 ld de,$0000 + (.HeroOverViewSpell5backdropDY*128) + (.HeroOverViewSpell5backdropDX/2)4086 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4087 ld a,SpellBookGraphicsBlock 4088 call CopyRamToVramCorrectedWithoutActivePageSetting 4089 ld hl,$4000 + (Spell17IconSY*128) + (Spell17IconSX/2) -1284090 ld de,$0000 + (.Spell5DY*128) + (.Spell5DX/2)4091 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4092 ld a,SpellBookGraphicsBlock 4093 call CopyRamToVramCorrectedWithoutActivePageSetting 4094 .EndPlaceAllSchoolsSpell1:4096 ld a,63 4097 call .CheckSpellScrollAvailable 4098 jr z,.PlaceUniversalSpell24099 bit 1,(ix+HeroAllSchoolsSpells)4100 jr z,.EndPlaceAllSchoolsSpell2 4101 .PlaceUniversalSpell2:4102 ld a,%1000 00114103 ld (BattleSpellIconButtons + (5 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4105 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284106 ld de,$0000 + (.HeroOverViewSpell6backdropDY*128) + (.HeroOverViewSpell6backdropDX/2)4107 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4108 ld a,SpellBookGraphicsBlock 4109 call CopyRamToVramCorrectedWithoutActivePageSetting 4110 ld hl,$4000 + (Spell18IconSY*128) + (Spell18IconSX/2) -1284111 ld de,$0000 + (.Spell6DY*128) + (.Spell6DX/2)4112 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4113 ld a,SpellBookGraphicsBlock 4114 call CopyRamToVramCorrectedWithoutActivePageSetting 4115 .EndPlaceAllSchoolsSpell2:4117 ld a,64 4118 call .CheckSpellScrollAvailable 4119 jr z,.PlaceUniversalSpell34120 bit 2,(ix+HeroAllSchoolsSpells)4121 jr z,.EndPlaceAllSchoolsSpell3 4122 .PlaceUniversalSpell3:4123 ld a,%1000 00114124 ld (BattleSpellIconButtons + (6 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4126 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284127 ld de,$0000 + (.HeroOverViewSpell7backdropDY*128) + (.HeroOverViewSpell7backdropDX/2)4128 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4129 ld a,SpellBookGraphicsBlock 4130 call CopyRamToVramCorrectedWithoutActivePageSetting 4131 ld hl,$4000 + (Spell19IconSY*128) + (Spell19IconSX/2) -1284132 ld de,$0000 + (.Spell7DY*128) + (.Spell7DX/2)4133 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4134 ld a,SpellBookGraphicsBlock 4135 call CopyRamToVramCorrectedWithoutActivePageSetting 4136 .EndPlaceAllSchoolsSpell3:4138 ld a,65 4139 call .CheckSpellScrollAvailable 4140 jr z,.PlaceUniversalSpell44141 bit 3,(ix+HeroAllSchoolsSpells)4142 ret z4143 .PlaceUniversalSpell4:4144 ld a,%1000 00114145 ld (BattleSpellIconButtons + (7 * ButtonTableLenght) + HeroOverviewWindowButtonStatus),a 4147 ld hl,$4000 + (HeroOverViewSpellBackdropSY*128) + (HeroOverViewSpellBackdropSX/2) -1284148 ld de,$0000 + (.HeroOverViewSpell8backdropDY*128) + (.HeroOverViewSpell8backdropDX/2)4149 ld bc,$0000 + (HeroOverViewSpellbackdropNY*256) + (HeroOverViewSpellbackdropNX/2)4150 ld a,SpellBookGraphicsBlock 4151 call CopyRamToVramCorrectedWithoutActivePageSetting 4152 ld hl,$4000 + (Spell20IconSY*128) + (Spell20IconSX/2) -1284153 ld de,$0000 + (.Spell8DY*128) + (.Spell8DX/2)4154 ld bc,$0000 + (SpellIconNY*256) + (SpellIconNX/2)4155 ld a,SpellBookGraphicsBlock 4156 jp CopyRamToVramCorrectedWithoutActivePageSetting 4159.HeroOverViewSpell1backdropDY: equ SpellBookY + 0444160.HeroOverViewSpell1backdropDX: equ SpellBookX + 0344161.HeroOverViewSpell2backdropDY: equ SpellBookY + 0484162.HeroOverViewSpell2backdropDX: equ SpellBookX + 0644163.HeroOverViewSpell3backdropDY: equ SpellBookY + 0894164.HeroOverViewSpell3backdropDX: equ SpellBookX + 0324165.HeroOverViewSpell4backdropDY: equ SpellBookY + 0934166.HeroOverViewSpell4backdropDX: equ SpellBookX + 0624167.HeroOverViewSpell5backdropDY: equ SpellBookY + 0484168.HeroOverViewSpell5backdropDX: equ SpellBookX + 1024169.HeroOverViewSpell6backdropDY: equ SpellBookY + 0444170.HeroOverViewSpell6backdropDX: equ SpellBookX + 1324171.HeroOverViewSpell7backdropDY: equ SpellBookY + 0934172.HeroOverViewSpell7backdropDX: equ SpellBookX + 1044173.HeroOverViewSpell8backdropDY: equ SpellBookY + 0894174.HeroOverViewSpell8backdropDX: equ SpellBookX + 1344176.Spell1DY: equ SpellBookY + 0504177.Spell1DX: equ SpellBookX + 0404178.Spell2DY: equ SpellBookY + 0544179.Spell2DX: equ SpellBookX + 0704180.Spell3DY: equ SpellBookY + 0954181.Spell3DX: equ SpellBookX + 0384182.Spell4DY: equ SpellBookY + 0994183.Spell4DX: equ SpellBookX + 0684184.Spell5DY: equ SpellBookY + 0544185.Spell5DX: equ SpellBookX + 1084186.Spell6DY: equ SpellBookY + 0504187.Spell6DX: equ SpellBookX + 1384188.Spell7DY: equ SpellBookY + 0994189.Spell7DX: equ SpellBookX + 1104190.Spell8DY: equ SpellBookY + 0954191.Spell8DX: equ SpellBookX + 14041944197SetGraphicsSpellBook:4198 ld hl,$4000 + (000*128) + (000/2) -1284199 ld de,$0000 + (SpellBookY*128) + (SpellBookX/2)4200 ld bc,$0000 + (HeroOverViewSpellBookWindowNY*256) + (HeroOverViewSpellBookWindowNX/2)4201 ld a,SpellBookGraphicsBlock4202 jp CopyRamToVramCorrectedCastleOverview 4204HandleSpellCast:4205 ld a,(CastSpell?)4206 or a4207 ret z4208 xor a4209 ld (CastSpell?),a42114214 call GetSelectedSpellRoutine 4215 jp (hl) 4217421942264232423842444253LenghtSpellAnimationStep: equ 44255 db SpellAnimationsBlock 4256 db 1 4257CureAnimation:4258 4259 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 032,022/24260 dw $4000 + ((032*0)*128) + ((022*1)/2) - 128 | db 032,022/24261 dw $4000 + ((032*0)*128) + ((022*2)/2) - 128 | db 032,022/24262 dw $4000 + ((032*0)*128) + ((022*3)/2) - 128 | db 032,022/24263 dw $4000 + ((032*0)*128) + ((022*4)/2) - 128 | db 032,022/24264 dw $4000 + ((032*0)*128) + ((022*5)/2) - 128 | db 032,022/24265 dw $4000 + ((032*0)*128) + ((022*6)/2) - 128 | db 032,022/24266 dw $4000 + ((032*0)*128) + ((022*7)/2) - 128 | db 032,022/24267 dw $4000 + ((032*0)*128) + ((022*8)/2) - 128 | db 032,022/24268 dw $4000 + ((032*0)*128) + ((022*9)/2) - 128 | db 032,022/24269 dw $4000 + ((032*0)*128) + ((022*10)/2) - 128 | db 032,022/24270 dw $4000 + ((032*1)*128) + ((022*0)/2) - 128 | db 032,022/24271 dw $4000 + ((032*1)*128) + ((022*1)/2) - 128 | db 032,022/24272 dw $4000 + ((032*1)*128) + ((022*2)/2) - 128 | db 032,022/24273 dw $4000 + ((032*1)*128) + ((022*3)/2) - 128 | db 032,022/24274 dw $4000 + ((032*1)*128) + ((022*4)/2) - 128 | db 032,022/24275 dw $4000 + ((032*0)*128) + ((022*0)/2) - 128 | db 002,002/2 4276 dw 04278 db SpellAnimations16Block 4279 db 0 4280HasteAnimation:4281 4282 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24283 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24284 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24285 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24286 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24287 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24288 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24289 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24290 dw $4000 + ((040*0)*128) + ((050*3)/2) - 128 | db 040,050/24291 dw $4000 + ((040*0)*128) + ((050*4)/2) - 128 | db 040,050/24292 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 040,050/24293 dw $4000 + ((040*0)*128) + ((050*1)/2) - 128 | db 040,050/24294 dw $4000 + ((040*0)*128) + ((050*2)/2) - 128 | db 040,050/24295 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4296 dw $4000 + ((040*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4297 dw 0 4299 db SpellAnimations2Block 4300 db 0 4301EarthShockAnimation:4302 4303 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24304 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24305 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24306 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24307 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24308 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24309 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24310 dw $4000 + ((064*1)*128) + ((064*3)/2) - 128 | db 064,064/24311 dw $4000 + ((064*2)*128) + ((064*0)/2) - 128 | db 064,064/24312 dw $4000 + ((064*2)*128) + ((064*1)/2) - 128 | db 064,064/24313 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4314 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4315 dw 0 4317 db SpellAnimations2Block 4318 db 1 4319MagicArrowsAnimation:4320 4321 dw $4000 + ((064*3)*128) + ((040*0)/2) - 128 | db 064,040/24322 dw $4000 + ((064*3)*128) + ((040*1)/2) - 128 | db 064,040/24323 dw $4000 + ((064*3)*128) + ((040*2)/2) - 128 | db 064,040/24324 dw $4000 + ((064*3)*128) + ((040*3)/2) - 128 | db 064,040/24325 dw $4000 + ((064*3)*128) + ((040*4)/2) - 128 | db 064,040/24326 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24327 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24328 dw $4000 + ((064*3)*128) + ((040*5)/2) - 128 | db 064,040/24329 dw $4000 + ((064*0)*128) + ((040*0)/2) - 128 | db 002,002/2 4330 dw 0 4332 db SpellAnimations3Block 4333 db 0 4334sunstrikeAnimation:4335 4336 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24337 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24338 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24339 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24340 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24341 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24342 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24343 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24344 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24345 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24346 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4347 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4348 dw 0 4350 db SpellAnimations4Block 4351 db 0 4352IceBoltAnimation:4353 4354 dw $4000 + ((064*0)*128) + ((032*0)/2) - 128 | db 064,032/24355 dw $4000 + ((064*0)*128) + ((032*1)/2) - 128 | db 064,032/24356 dw $4000 + ((064*0)*128) + ((032*2)/2) - 128 | db 064,032/24357 dw $4000 + ((064*0)*128) + ((032*3)/2) - 128 | db 064,032/24358 dw $4000 + ((064*0)*128) + ((032*4)/2) - 128 | db 064,032/24359 dw $4000 + ((064*0)*128) + ((032*5)/2) - 128 | db 064,032/24360 dw $4000 + ((064*0)*128) + ((032*6)/2) - 128 | db 064,032/24361 dw $4000 + ((064*0)*128) + ((032*7)/2) - 128 | db 064,032/24362 dw $4000 + ((064*1)*128) + ((032*0)/2) - 128 | db 064,032/24363 dw $4000 + ((064*1)*128) + ((032*1)/2) - 128 | db 064,032/24364 dw $4000 + ((064*1)*128) + ((032*2)/2) - 128 | db 064,032/24365 dw $4000 + ((064*1)*128) + ((032*3)/2) - 128 | db 064,032/24366 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4367 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4368 dw 0 4370 db SpellAnimations5Block 4371 db 0 4372implosionAnimation:4373 4374 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 064,050/24375 dw $4000 + ((064*0)*128) + ((050*1)/2) - 128 | db 064,050/24376 dw $4000 + ((064*0)*128) + ((050*2)/2) - 128 | db 064,050/24377 dw $4000 + ((064*0)*128) + ((050*3)/2) - 128 | db 064,050/24378 dw $4000 + ((064*0)*128) + ((050*4)/2) - 128 | db 064,050/24379 dw $4000 + ((064*1)*128) + ((050*0)/2) - 128 | db 064,050/24380 dw $4000 + ((064*1)*128) + ((050*1)/2) - 128 | db 064,050/24381 dw $4000 + ((064*1)*128) + ((050*2)/2) - 128 | db 064,050/24382 dw $4000 + ((064*1)*128) + ((050*3)/2) - 128 | db 064,050/24383 dw $4000 + ((064*1)*128) + ((050*4)/2) - 128 | db 064,050/24384 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4385 dw $4000 + ((064*0)*128) + ((050*0)/2) - 128 | db 002,002/2 4386 dw 0 4388 db SpellAnimations6Block 4389 db 1 4390EarthBoundAnimation:4391 4392 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 026,042/24393 dw $4000 + ((026*0)*128) + ((042*1)/2) - 128 | db 026,042/24394 dw $4000 + ((026*0)*128) + ((042*2)/2) - 128 | db 026,042/24395 dw $4000 + ((026*0)*128) + ((042*3)/2) - 128 | db 026,042/24396 dw $4000 + ((026*0)*128) + ((042*4)/2) - 128 | db 026,042/24397 dw $4000 + ((026*0)*128) + ((042*5)/2) - 128 | db 026,042/24398 dw $4000 + ((026*1)*128) + ((042*0)/2) - 128 | db 026,042/24399 dw $4000 + ((026*1)*128) + ((042*1)/2) - 128 | db 026,042/24400 dw $4000 + ((026*1)*128) + ((042*2)/2) - 128 | db 026,042/24401 dw $4000 + ((026*1)*128) + ((042*3)/2) - 128 | db 026,042/24402 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4403 dw 0 4405 db SpellAnimations6Block 4406 db 0 4407FrostRingAnimation:4408 4409 dw $4000 + ((030*0+52)*128) + ((054*0)/2) - 128 | db 030,054/24410 dw $4000 + ((030*0+52)*128) + ((054*1)/2) - 128 | db 030,054/24411 dw $4000 + ((030*0+52)*128) + ((054*2)/2) - 128 | db 030,054/24412 dw $4000 + ((030*0+52)*128) + ((054*3)/2) - 128 | db 030,054/24413 dw $4000 + ((030*1+52)*128) + ((054*0)/2) - 128 | db 030,054/24414 dw $4000 + ((030*1+52)*128) + ((054*1)/2) - 128 | db 030,054/24415 dw $4000 + ((030*1+52)*128) + ((054*2)/2) - 128 | db 030,054/24416 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24417 dw $4000 + ((030*1+52)*128) + ((054*3)/2) - 128 | db 030,054/24418 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4419 dw $4000 + ((026*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4420 dw 0 4422 db SpellAnimations8Block 4423 db 1 4424ShieldBreakerAnimation:4425 4426 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24427 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24428 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24429 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 032,042/24430 dw $4000 + ((032*0)*128) + ((042*1)/2) - 128 | db 032,042/24431 dw $4000 + ((032*0)*128) + ((042*2)/2) - 128 | db 032,042/24432 dw $4000 + ((032*0)*128) + ((042*3)/2) - 128 | db 032,042/24433 dw $4000 + ((032*0)*128) + ((042*4)/2) - 128 | db 032,042/24434 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24435 dw $4000 + ((032*0)*128) + ((042*5)/2) - 128 | db 032,042/24436 dw $4000 + ((032*0)*128) + ((042*0)/2) - 128 | db 002,002/2 4437 dw 0 4439 db SpellAnimations16Block 4440 db 1 4441CurseAnimation:4442 4443 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24444 dw $4000 + ((033*0+40)*128) + ((048*0)/2) - 128 | db 033,048/24445 dw $4000 + ((033*0+40)*128) + ((048*1)/2) - 128 | db 033,048/24446 dw $4000 + ((033*0+40)*128) + ((048*2)/2) - 128 | db 033,048/24447 dw $4000 + ((033*0+40)*128) + ((048*3)/2) - 128 | db 033,048/24448 dw $4000 + ((033*0+40)*128) + ((048*4)/2) - 128 | db 033,048/24449 dw $4000 + ((033*1+40)*128) + ((048*0)/2) - 128 | db 033,048/24450 dw $4000 + ((033*1+40)*128) + ((048*1)/2) - 128 | db 033,048/24451 dw $4000 + ((033*1+40)*128) + ((048*2)/2) - 128 | db 033,048/24452 dw $4000 + ((033*1+40)*128) + ((048*3)/2) - 128 | db 033,048/24453 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24454 dw $4000 + ((033*1+40)*128) + ((048*4)/2) - 128 | db 033,048/24455 4456 dw $4000 + ((033*0)*128) + ((048*0)/2) - 128 | db 002,002/2 4457 dw 0 4459 db SpellAnimations8Block 4460 db 1 4461PlateArmorAnimation:4462 4463 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24464 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24465 dw $4000 + ((032*1)*128) + ((028*1)/2) - 128 | db 032,028/24466 dw $4000 + ((032*1)*128) + ((028*2)/2) - 128 | db 032,028/24467 dw $4000 + ((032*1)*128) + ((028*3)/2) - 128 | db 032,028/24468 dw $4000 + ((032*1)*128) + ((028*4)/2) - 128 | db 032,028/24469 dw $4000 + ((032*1)*128) + ((028*5)/2) - 128 | db 032,028/24470 dw $4000 + ((032*1)*128) + ((028*6)/2) - 128 | db 032,028/24471 dw $4000 + ((032*1)*128) + ((028*7)/2) - 128 | db 032,028/24472 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24473 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24474 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24475 dw $4000 + ((032*1)*128) + ((028*0)/2) - 128 | db 032,028/24476 dw $4000 + ((032*1)*128) + ((042*0)/2) - 128 | db 002,002/2 4477 dw 0 4479 db SpellAnimations9Block 4480 db 0 4481InnerBeastAnimation:4482 4483 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 064,064/24484 dw $4000 + ((064*0)*128) + ((064*1)/2) - 128 | db 064,064/24485 dw $4000 + ((064*0)*128) + ((064*2)/2) - 128 | db 064,064/24486 dw $4000 + ((064*0)*128) + ((064*3)/2) - 128 | db 064,064/24487 dw $4000 + ((064*1)*128) + ((064*0)/2) - 128 | db 064,064/24488 dw $4000 + ((064*1)*128) + ((064*1)/2) - 128 | db 064,064/24489 dw $4000 + ((064*1)*128) + ((064*2)/2) - 128 | db 064,064/24490 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4491 dw $4000 + ((064*0)*128) + ((064*0)/2) - 128 | db 002,002/2 4492 dw 0 4494 db SpellAnimations10Block 4495 db 0 4496TeleportAnimation:4497 4498 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24499 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24500 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24501 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24502 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24503 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24504 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24505 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24506 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24507 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24508 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24509 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4510 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4511 dw 0 4513 db SpellAnimations10Block 4514 db 0 4515FrenzyAnimation:4516 4517 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24518 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24519 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24520 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24521 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24522 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24523 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24524 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24525 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24526 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24527 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24528 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24529 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24530 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24531 dw $4000 + ((032*3)*128) + ((032*0)/2) - 128 | db 032,032/24532 dw $4000 + ((032*3)*128) + ((032*1)/2) - 128 | db 032,032/24533 dw $4000 + ((032*3)*128) + ((032*2)/2) - 128 | db 032,032/24534 dw $4000 + ((032*3)*128) + ((032*3)/2) - 128 | db 032,032/24535 dw $4000 + ((032*3)*128) + ((032*4)/2) - 128 | db 032,032/24536 dw $4000 + ((032*3)*128) + ((032*5)/2) - 128 | db 032,032/24537 dw $4000 + ((032*3)*128) + ((032*6)/2) - 128 | db 032,032/24538 dw $4000 + ((032*3)*128) + ((032*7)/2) - 128 | db 032,032/24539 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4540 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 002,002/2 4541 dw 0 4543 db SpellAnimations11Block 4544 db 1 4545ResurrectionAnimation:4546 4547 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24548 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24549 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24550 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24551 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24552 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24553 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24554 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24555 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24556 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24557 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24558 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24559 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24560 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24561 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24562 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24563 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24564 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24565 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24566 dw $4000 + ((032*2)*128) + ((032*2)/2) - 128 | db 032,032/24567 dw $4000 + ((032*2)*128) + ((032*3)/2) - 128 | db 032,032/24568 dw $4000 + ((032*2)*128) + ((032*4)/2) - 128 | db 032,032/24569 dw $4000 + ((032*2)*128) + ((032*5)/2) - 128 | db 032,032/24570 dw $4000 + ((032*2)*128) + ((032*6)/2) - 128 | db 032,032/24571 dw $4000 + ((032*2)*128) + ((032*7)/2) - 128 | db 032,032/24572 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4573 dw 0 4575 db SpellAnimations12Block 4576 db 0 4577SpellBubbleAnimation:4578 4579 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24580 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24581 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24582 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24583 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24584 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/24585 4586 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24587 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24588 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24589 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24590 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24591 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24592 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24594 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24595 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24596 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24597 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24598 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24599 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24600 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24602 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24603 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24604 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24605 dw $4000 + ((042*1)*128) + ((036*2)/2) - 128 | db 042,036/24606 dw $4000 + ((042*1)*128) + ((036*3)/2) - 128 | db 042,036/24607 dw $4000 + ((042*1)*128) + ((036*4)/2) - 128 | db 042,036/24608 dw $4000 + ((042*1)*128) + ((036*5)/2) - 128 | db 042,036/24610 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4611 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4612 dw 0 4614 db SpellAnimations12Block 4615 db 0 4616SpellBubbleActivatedAndPoppedAnimation:4617 4618 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 042,036/24619 dw $4000 + ((042*0)*128) + ((036*1)/2) - 128 | db 042,036/24620 dw $4000 + ((042*0)*128) + ((036*2)/2) - 128 | db 042,036/24621 dw $4000 + ((042*0)*128) + ((036*3)/2) - 128 | db 042,036/24622 dw $4000 + ((042*0)*128) + ((036*4)/2) - 128 | db 042,036/24623 dw $4000 + ((042*0)*128) + ((036*5)/2) - 128 | db 042,036/2 4624 dw $4000 + ((042*0)*128) + ((036*6)/2) - 128 | db 042,036/24625 dw $4000 + ((042*1)*128) + ((036*0)/2) - 128 | db 042,036/24626 dw $4000 + ((042*1)*128) + ((036*1)/2) - 128 | db 042,036/24627 dw $4000 + ((042*2)*128) + ((036*0)/2) - 128 | db 042,036/24628 dw $4000 + ((042*2)*128) + ((036*1)/2) - 128 | db 042,036/24629 dw $4000 + ((042*2)*128) + ((036*2)/2) - 128 | db 042,036/24630 dw $4000 + ((042*2)*128) + ((036*3)/2) - 128 | db 042,036/24631 dw $4000 + ((042*2)*128) + ((036*4)/2) - 128 | db 042,036/24632 dw $4000 + ((042*2)*128) + ((036*5)/2) - 128 | db 042,036/24633 dw $4000 + ((042*2)*128) + ((036*6)/2) - 128 | db 042,036/24634 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4635 dw $4000 + ((042*0)*128) + ((036*0)/2) - 128 | db 002,002/2 4636 dw 0 4638 db SpellAnimations13Block 4639 db 0 4640hypnosisAnimation:4641 4642 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24643 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24644 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24645 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24646 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24647 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24648 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24649 dw $4000 + ((061*1)*128) + ((060*3)/2) - 128 | db 061,060/24650 dw $4000 + ((061*0)*128) + ((060*2)/2) - 128 | db 061,060/24651 dw $4000 + ((061*0)*128) + ((060*3)/2) - 128 | db 061,060/24652 dw $4000 + ((061*1)*128) + ((060*0)/2) - 128 | db 061,060/24653 dw $4000 + ((061*1)*128) + ((060*1)/2) - 128 | db 061,060/24654 dw $4000 + ((061*1)*128) + ((060*2)/2) - 128 | db 061,060/24655 dw $4000 + ((061*0)*128) + ((060*1)/2) - 128 | db 061,060/24656 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 061,060/24657 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4658 dw $4000 + ((061*0)*128) + ((060*0)/2) - 128 | db 002,002/2 4659 dw 0 4661 db SpellAnimations14Block 4662 db 1 4663ClawBackAnimation:4664 4665 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 026,030/24666 dw $4000 + ((026*0)*128) + ((030*1)/2) - 128 | db 026,030/24667 dw $4000 + ((026*0)*128) + ((030*2)/2) - 128 | db 026,030/24668 dw $4000 + ((026*0)*128) + ((030*3)/2) - 128 | db 026,030/24669 dw $4000 + ((026*0)*128) + ((030*4)/2) - 128 | db 026,030/24670 dw $4000 + ((026*0)*128) + ((030*5)/2) - 128 | db 026,030/24671 dw $4000 + ((026*0)*128) + ((030*6)/2) - 128 | db 026,030/24672 dw $4000 + ((026*0)*128) + ((030*7)/2) - 128 | db 026,030/24673 dw $4000 + ((026*1)*128) + ((030*0)/2) - 128 | db 026,030/24674 dw $4000 + ((026*1)*128) + ((030*1)/2) - 128 | db 026,030/24675 dw $4000 + ((026*0)*128) + ((030*0)/2) - 128 | db 002,002/2 4676 dw 0 4678 db SpellAnimations15Block 4679 db 1 4680BlindingFogAnimation:4681 4682 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 032,032/24683 dw $4000 + ((032*0)*128) + ((032*1)/2) - 128 | db 032,032/24684 dw $4000 + ((032*0)*128) + ((032*2)/2) - 128 | db 032,032/24685 dw $4000 + ((032*0)*128) + ((032*3)/2) - 128 | db 032,032/24686 dw $4000 + ((032*0)*128) + ((032*4)/2) - 128 | db 032,032/24687 dw $4000 + ((032*0)*128) + ((032*5)/2) - 128 | db 032,032/24688 dw $4000 + ((032*0)*128) + ((032*6)/2) - 128 | db 032,032/24689 dw $4000 + ((032*0)*128) + ((032*7)/2) - 128 | db 032,032/24690 dw $4000 + ((032*1)*128) + ((032*0)/2) - 128 | db 032,032/24691 dw $4000 + ((032*1)*128) + ((032*1)/2) - 128 | db 032,032/24692 dw $4000 + ((032*1)*128) + ((032*2)/2) - 128 | db 032,032/24693 dw $4000 + ((032*1)*128) + ((032*3)/2) - 128 | db 032,032/24694 dw $4000 + ((032*1)*128) + ((032*4)/2) - 128 | db 032,032/24695 dw $4000 + ((032*1)*128) + ((032*5)/2) - 128 | db 032,032/24696 dw $4000 + ((032*1)*128) + ((032*6)/2) - 128 | db 032,032/24697 dw $4000 + ((032*1)*128) + ((032*7)/2) - 128 | db 032,032/24698 dw $4000 + ((032*2)*128) + ((032*0)/2) - 128 | db 032,032/24699 dw $4000 + ((032*2)*128) + ((032*1)/2) - 128 | db 032,032/24700 dw $4000 + ((032*0)*128) + ((032*0)/2) - 128 | db 002,002/2 4701 dw 0 4704GoAnimateSpell:4705 xor a4706 ld (activepage),a 4707 call SwapAndSetPage 4708 ld hl,CheckVictoryOrDefeat.CopyPage1toPage04709 call docopy4711 xor a4712 ld (SpellAnimationStep),a4713 ld (SpellAnimationSpeed),a4714 ld (BackupImagePage0Ready?),a4715 ld (BackupImagePage1Ready?),a4716 ld a,(iy-1) 4717 ld (SpellAnimationSpeed+1),a4718 ld a,(iy-2) 4719 ld (SpellAnimationGfxBlock),a4721 .AnimationLoop:4722 4723 ld l,(iy)4724 ld h,(iy+1) 4725 ld a,l4726 or h4727 ret z 4728 ld de,$8000 + (188*128) + (000/2) - 128 4729 ld b,(iy+2) 4730 ld c,(iy+3) 4731 ld a,(SpellAnimationGfxBlock)4732 ld (AddressToWriteFrom),hl4733 ld (AddressToWriteTo),de 4734 ld (NXAndNY),bc4735 ld (BlockToReadFrom),a4736 call CopyRamToVramPage3ForBattleEngine 4738 4739 ld a,1884740 ld (TransparantImageBattle+sy),a 4741 xor a4742 ld (TransparantImageBattle+sx),a 4744 ld a,(iy+2) 4745 ld (TransparantImageBattle+ny),a4746 ld a,(iy+3) 4747 add a,a4748 ld (TransparantImageBattle+nx),a4749 4750 ld ix,(MonsterThatIsBeingAttacked)4751 ld a,(ix+MonsterY)4752 add a,(ix+MonsterNY)4753 sub (iy+2) 4754 ld (TransparantImageBattle+dy),a 4756 ld a,(ix+MonsterNX) 4757 srl a 4758 add a,(ix+MonsterX) 4759 sub a,(iy+3) 4760 res 0,a4761 jp nc,.EndCheckOverFlowLeft4763 neg4764 ld b,a4765 ld (TransparantImageBattle+sx),a 4766 ld a,(TransparantImageBattle+nx)4767 sub a,b4768 ld (TransparantImageBattle+nx),a4771 xor a4772 .EndCheckOverFlowLeft:4773 ld (TransparantImageBattle+dx),a 4776 4777 ld a,(activepage)4778 xor 14779 ld (TransparantImageBattle+dPage),a 4781 4782 call .Recoverbackground 4784 call .BackupImage 4786 ld hl,TransparantImageBattle4787 call docopy4788 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady4789 call DoCopy4790 halt4791 call SwapAndSetPage 4793 ld a,(SpellAnimationSpeed+1)4794 ld b,a4795 ld a,(SpellAnimationSpeed)4796 inc a4797 and b4798 ld (SpellAnimationSpeed),a4799 jp nz,.AnimationLoop4800 ld de,LenghtSpellAnimationStep4801 add iy,de 4802 jp .AnimationLoop4804.Recoverbackground:4805 ld a,(activepage) 4806 or a4807 ld b,1284808 ld ix,FreeToUseFastCopy1 4809 jr z,.RecoveryPageFound4810 ld b,0644811 ld ix,FreeToUseFastCopy0 4812 .RecoveryPageFound:4813 bit 0,(ix-1) 4814 ret z4816 ld a,(ix+sy)4817 ld (ix+dy),a4818 ld a,(ix+sx)4819 ld (ix+dx),a4821 ld a,b4822 ld (ix+sx),a 4823 ld a,1884824 ld (ix+sy),a 4826 ld a,(activepage) 4827 xor 14828 ld (ix+dpage),a4830 ld a,3 4831 ld (ix+spage),a4833 push ix4834 pop hl4835 jp docopy4837.BackupImage:4838 ld a,(activepage) 4839 or a4840 ld a,1284841 ld ix,FreeToUseFastCopy1 4842 jr z,.SetDx4843 ld a,0644844 ld ix,FreeToUseFastCopy0 4845 .SetDx:4846 ld (ix+dx),a 4847 set 0,(ix-1) 4849 ld a,34850 ld (ix+dpage),a4851 ld a,(TransparantImageBattle+ny)4852 ld (ix+ny),a4853 ld a,(TransparantImageBattle+nx)4854 ld (ix+nx),a4856 ld a,(TransparantImageBattle+dy)4857 ld (ix+sy),a4858 ld a,(TransparantImageBattle+dx)4859 ld (ix+sx),a4861 ld a,1884862 ld (ix+dy),a4864 ld a,(activepage) 4865 xor 14866 ld (ix+spage),a4868 push ix4869 pop hl4870 jp docopy4872CheckResistanceSkill: 4873 ld a,(CurrentActiveMonster) 4874 cp 74875 ld ix,(HeroThatGetsAttacked) 4876 jr c,.HeroThatGetsSpellCastOnFound4877 ld ix,(plxcurrentheroAddress)4878 .HeroThatGetsSpellCastOnFound:4880 push ix4881 pop hl4882 ld a,l4883 or h4884 jr z,.NeutralEnemy 4885 4886 ld a,(ix+HeroSkills+0)4887 call .CheckSkillResistance4888 ld a,(ix+HeroSkills+1)4889 call .CheckSkillResistance4890 ld a,(ix+HeroSkills+2)4891 call .CheckSkillResistance4892 ld a,(ix+HeroSkills+3)4893 call .CheckSkillResistance4894 ld a,(ix+HeroSkills+4)4895 call .CheckSkillResistance4896 ld a,(ix+HeroSkills+5)4897 call .CheckSkillResistance4898 ret4900 .NeutralEnemy: 4901 inc a 4902 ret4903 4904 .CheckSkillResistance:4905 cp 10 4906 jr z,.BasicResistanceFound4907 cp 11 4908 jr z,.AdvancedResistanceFound4909 cp 12 4910 jr z,.ExpertResistanceFound4911 ret4913 .BasicResistanceFound:4914 pop af 4916 4917 ld a,r4918 ld b,04919 ld c,a4920 ld de,104921 call DivideBCbyDE 4922 ld a,l4923 or a 4924 ret4926 .AdvancedResistanceFound:4927 pop af 4929 4930 ld a,r4931 ld b,04932 ld c,a4933 ld de,64934 call DivideBCbyDE 4935 ld a,l4936 or a 4937 ret4939 .ExpertResistanceFound:4940 pop af 4942 4943 ld a,r4944 ld b,04945 ld c,a4946 ld de,54947 call DivideBCbyDE 4948 ld a,l4949 or a 4950 ret4952AddPositiveSpellDamageFromSorcery:4953 push hl 4955 call SetCurrentActiveMOnsterInIX4956 4957 4958 push ix4959 pop hl 4960 ld de,Monster74961 call CompareHLwithDE 4962 ld ix,(plxcurrentheroAddress) 4963 jr c,.HeroFound4964 ld ix,(HeroThatGetsAttacked) 4965 jr .HeroFound4966 .HeroFound:4968 pop hl 4969 4970 ld a,(ix+HeroSkills+0)4971 call .CheckSkillSorcery4972 ld a,(ix+HeroSkills+1)4973 call .CheckSkillSorcery4974 ld a,(ix+HeroSkills+2)4975 call .CheckSkillSorcery4976 ld a,(ix+HeroSkills+3)4977 call .CheckSkillSorcery4978 ld a,(ix+HeroSkills+4)4979 call .CheckSkillSorcery4980 ld a,(ix+HeroSkills+5)4981 call .CheckSkillSorcery4982 ret4983 4984 .CheckSkillSorcery:4985 cp 25 4986 jr z,.BasicSorceryFound4987 cp 26 4988 jr z,.AdvancedSorceryFound4989 cp 27 4990 jr z,.ExpertSorceryFound4991 ret4993 .BasicSorceryFound:4994 pop af 4995 ld de,20 4996 jp ApplyPercentBasedBoost 4998 .AdvancedSorceryFound:4999 pop af 5000 ld de,10 5001 jp ApplyPercentBasedBoost 5003 .ExpertSorceryFound:5004 pop af 5005 ld de,06 5006 jp ApplyPercentBasedBoost 5012AddPositiveSpellDamageFromItemsForActiveHero:5013 call AddPositiveSpellDamageFromSorcery5015 push hl 5017 call SetCurrentActiveMOnsterInIX5018 5019 5020 push ix5021 pop hl 5022 ld de,Monster75023 call CompareHLwithDE 5024 ld ix,(plxcurrentheroAddress) 5025 jr c,.HeroFound5026 ld ix,(HeroThatGetsAttacked) 5027 jr .HeroFound5028 .HeroFound:5030 pop hl 5032 call .CheckItem16 5033 call .CheckItem28 5034 call .CheckItem36 5035 ret5037 .CheckItem16: 5038 ld a,(ix+HeroInventory+3) 5039 cp 0165040 ret nz5041 ld de,40 5042 jp ApplyPercentBasedBoost5044 .CheckItem28: 5045 ld a,(ix+HeroInventory+5) 5046 cp 0285047 ret nz5048 ld de,13 5049 jp ApplyPercentBasedBoost5051 .CheckItem36: 5052 ld a,(ix+HeroInventory+7) 5053 cp 0365054 ret nz5055 ld de,20 5056 jp ApplyPercentBasedBoost 5057 5058ReduceSpellDamageFromItems:5059 push hl 5061 ld ix,(MonsterThatIsBeingAttacked) 5063 push ix5064 pop hl 5065 ld de,Monster75066 call CompareHLwithDE 5067 ld ix,(plxcurrentheroAddress) 5068 jr c,.HeroFound5069 ld ix,(HeroThatGetsAttacked) 5070 .HeroFound:5072 pop hl 5074 call .CheckItem08 5075 call .CheckItem12 5076 call .CheckItem21 5077 call .CheckItem23 5078 call .CheckItem26 5079 call .CheckItem33 5080 call .CheckItem34 5081 call .CheckItem35 5082 call .CheckItem41 5083 ret5085 .CheckItem08: 5086 ld a,(ix+HeroInventory+1) 5087 cp 0085088 ret nz5089 ld de,40 5090 jp .ReducePercentage5092 .CheckItem12: 5093 ld a,(ix+HeroInventory+2) 5094 cp 0125095 ret nz5096 ld de,20 5097 jp .ReducePercentage5099 .CheckItem21: 5100 ld a,(ix+HeroInventory+4) 5101 cp 0215102 ret nz5103 ld de,40 5104 jp .ReducePercentage5106 .CheckItem23: 5107 ld a,(ix+HeroInventory+4) 5108 cp 0235109 ret nz5110 ld de,13 5111 jp .ReducePercentage5113 .CheckItem26: 5114 ld a,(ix+HeroInventory+5) 5115 cp 0265116 ret nz5117 ld de,20 5118 jp .ReducePercentage5120 .CheckItem33: 5121 ld a,(ix+HeroInventory+6) 5122 cp 0335123 ret nz5124 ld de,13 5125 jp .ReducePercentage5127 .CheckItem34: 5128 ld a,(ix+HeroInventory+6) 5129 cp 0345130 ret nz5131 ld de,10 5132 jp .ReducePercentage5134 .CheckItem35: 5135 ld a,(ix+HeroInventory+7) 5136 cp 0355137 ret nz5138 ld de,40 5139 jp .ReducePercentage5141 .CheckItem41: 5142 ld a,(ix+HeroInventory+8) 5143 cp 0415144 ret nz5145 ld de,40 5146 jp .ReducePercentage5148 .ReducePercentage:5149 push hl5151 push hl5152 pop bc5153 call DivideBCbyDE 5154 ld a,b5155 or c5156 jr nz,.NotZero5157 inc c 5158 .NotZero:5160 pop hl5161 or a5162 sbc hl,bc5163 ret5176MSXHeroes.asm1025 ds $c000-$,$ff1026dephase10281031BattleFieldObjectsBlock: equ $521032phase $40001033 incbin "..\grapx\Battlefield\BattleFieldObjects.SC5",7,45 * 128 1034 ds $8000-$,$ff1035dephase10371040ExtraRoutinesCodeBlock: equ $531041phase $40001042 ExtraRoutines.asm116ShowItemStats:17call screenon18 call SetItemStatsWindow 19 call SwapAndSetPage 20 21 .engine:22 call PopulateControls 2429 ld a,(NewPrContr)30 and %0011 000031 jr nz,.end32 jr .engine 34 .end:35 ld a,%0011 000036 ld (ControlsOnInterrupt),a 37 ret40SetItemStatsWindow:41 ld de,$0000 + (007*128) + (008/2) - 12843 ld a,(spat+1) 44 sub 3245 jr nc,.NotCarryX46 xor a47 .NotCarryX:48 cp 10049 jr c,.NoOverFlowRight50 ld a,10051 .NoOverFlowRight:53 ld b,a 55 srl a 56 ld h,057 ld l,a58 add hl,de59 ex de,hl60 61 ld a,(spat+0) 62 ld c,-5063 cp 7064 jr nc,.CursorTopOfScreen65 ld c,3266 .CursorTopOfScreen:67 add a,c69 sub a,2470 jr nc,.NotCarryY71 xor a72 .NotCarryY:73 cp 11974 jr c,.NoOverFlowBottom75 ld a,11976 .NoOverFlowBottom:78 ld c,a 79 push bc81 ld h,082 ld l,a83 add hl,hl 84 add hl,hl 85 add hl,hl 86 add hl,hl 87 add hl,hl 88 add hl,hl 89 add hl,hl 90 add hl,de91 ex de,hl93 ld hl,$4000 + (070*128) + (150/2) - 12894 ld bc,$0000 + (040*256) + (088/2)95 ld a,HeroOverviewStatusGraphicsBlock 96 call CopyRamToVramCorrectedCastleOverview 98 pop bc 100101 ld a,b 102 add a,15103 ld b,a 105 ld a,c 106 add a,14107 ld c,a 109 ld a,(MonsterHerocollidedWithOnMap)110 cp 73111 jp z,CheckLearningStoneAlreadyVisited112 cp 74113 jp z,CheckSpireOfWisdomAlreadyVisited114 cp 76115 jp z,CheckGuardTowerAlreadyVisited116 cp 83 117 ld hl,TextArtifact118 jp nc,SetText119 sub 65 120 ld h,0121 ld l,a 122 ld de,LenghtTextItem123 push bc124 call MultiplyHlWithDE 125 pop bc126 ld de,TextChestRuby127 add hl,de128 jp SetText 130CheckLearningStoneAlreadyVisited:131 call .CheckLearningStoneAlreadyVisited132 ld hl,TextLearningStone133 jp z,SetText 134 ld hl,TextLearningStoneX135 jp SetText 137.CheckLearningStoneAlreadyVisited:138 ld ix,(plxcurrentheroAddress)139 ld a,(MonsterHerocollidedWithOnMapAmount) 140 sub 192141 jr z,.LearningStone1142 dec a143 jr z,.LearningStone2144 dec a145 jr z,.LearningStone3146 dec a147 jr z,.LearningStone4148 dec a149 jr z,.LearningStone5150152 .LearningStone6:153 bit 6,(ix+HeroFireSpells)154 ret155 .LearningStone5:156 bit 7,(ix+HeroFireSpells)157 ret158 .LearningStone4:159 bit 4,(ix+HeroEarthSpells)160 ret161 .LearningStone3:162 bit 5,(ix+HeroEarthSpells)163 ret164 .LearningStone2:165 bit 6,(ix+HeroEarthSpells)166 ret167 .LearningStone1:168 bit 7,(ix+HeroEarthSpells)169 ret171CheckSpireOfWisdomAlreadyVisited:172 call .CheckSpireOfWisdomAlreadyVisited173 ld hl,TextSpireOfWisdom174 jp z,SetText 175 ld hl,TextSpireOfWisdomX176 jp SetText 178.CheckSpireOfWisdomAlreadyVisited:179 ld ix,(plxcurrentheroAddress)180 ld a,(MonsterHerocollidedWithOnMapAmount) 181 sub 192182 jr z,.SpireOfWisdom1183 dec a184 jr z,.SpireOfWisdom2185 dec a186 jr z,.SpireOfWisdom3187 dec a188 jr z,.SpireOfWisdom4189 dec a190 jr z,.SpireOfWisdom5191193 194 .SpireOfWisdom6:195 bit 4,(ix+HeroAirSpells)196 ret197 .SpireOfWisdom5:198 bit 5,(ix+HeroAirSpells)199 ret200 .SpireOfWisdom4:201 bit 6,(ix+HeroAirSpells)202 ret203 .SpireOfWisdom3:204 bit 7,(ix+HeroAirSpells)205 ret206 .SpireOfWisdom2:207 bit 4,(ix+HeroFireSpells)208 ret209 .SpireOfWisdom1:210 bit 5,(ix+HeroFireSpells)211 ret220CheckGuardTowerAlreadyVisited:221 ld a,(MonsterHerocollidedWithOnMapAmount)222 or a223 ld hl,TextGuardTowerX224 jp z,SetText 225 ld hl,TextGuardTower226 jp SetText 228LenghtTextItem: equ TextChestGems-TextChestRuby229TextChestRuby: db "     Chest      ",254,254 230 db " Chest with Riches",255232TextChestGems: db "     Chest      ",254,254 233 db " Chest with Gold  ",255235TextWood: db "     Wood       ",254,254 236 db " 5 Pieces of Wood ",255238TextOre: db "      Ore       ",254,254 239 db " 5 Pieces of Ore  ",255241TextGems: db "     Gems       ",254,254 242 db " 5 Pieces of Gems ",255244TextRubies: db "     Rubies     ",254,254 245 db "5 Pieces of Rubies",255247TextBagOfGold: db "   Bag of Gold  ",254,254 248 db " Contains 500 Gold",255250TextWaterWell: db "   Water Well   ",254,254 251 db " Restores Mobility",255253TextLearningStone: db "  Learning Stone",254,254 254 db "+1000 XP once only",255256TextSpireOfWisdom: db " Spire of Wisdom",254,254 257 db "+1 Stat once only ",255259TextScroll: db "  Ancient Scroll",254,254 260 db " Holds Enchantment",255262TextGuardTower: db "   Guard Tower  ",254,254 263 db " Rich in treasures",255265TextArtifact: db "  Ancient Relic ",254,254 266 db " A Mighty Artifact",255270TextLearningStoneX: db "  Learning Stone",254,254 271 db " Already Learned  ",255273TextSpireOfWisdomX: db " Spire of Wisdom",254,254 274 db " Already Learned  ",255276TextGuardTowerX: db "   Guard Tower  ",254,254 277 db "  Already Visited ",255280CheckIfAPlayerGotEliminated:281 282 ld a,(PlayerLostHeroInBattle?)283 dec a284 ret m285 ld (PlayerLostHeroInBattle?),a286 jp nz,DisableScrollScreen 288 289 call .CheckWhichPlayerLostAHero 290 push hl291 pop ix292 ld a,(ix+HeroStatus) 293 cp 255294 jr z,.NoMoreHeroesLeft295 cp 254296 ret nz 297 ld a,(ix+HeroX) 298 cp 255299 ret nz 300 .NoMoreHeroesLeft:302 303 ld a,(PlayerWhoLostAHeroInBattle?)304 ld b,a305 ld a,(Castle1+CastlePlayer)306 cp b307 ret z 308 ld a,(Castle2+CastlePlayer)309 cp b310 ret z 311 ld a,(Castle3+CastlePlayer)312 cp b313 ret z 314 ld a,(Castle4+CastlePlayer)315 cp b316 ret z 318 call ClearMapPage0AndMapPage1 320 ld a,1321 ld (GameStatus),a 323 call SetPlayerEliminatedWindowAndText324 call SwapAndSetPage 325 326 .engine:327 call PopulateControls 329334 ld a,(NewPrContr)335 and %0011 0000336 jr nz,.end337 jr .engine 339 .end:340 ld a,%0011 0000341 ld (ControlsOnInterrupt),a 342 jp CheckIfThereIsAPlayerWhoWonTheGame344.CheckWhichPlayerLostAHero:345 ld a,(PlayerWhoLostAHeroInBattle?)346 dec a347 ld hl,pl1hero1y 348 ret z349 dec a350 ld hl,pl2hero1y 351 ret z352 dec a353 ld hl,pl3hero1y 354 ret z355 ld hl,pl4hero1y 356 ret358CheckIfThereIsAPlayerWhoWonTheGame:359 ld c,0 361 ld b,1 362 ld a,(pl1hero1y+HeroStatus) 363 call .CheckPlayer364 ld b,2 365 ld a,(pl2hero1y+HeroStatus) 366 call .CheckPlayer367 ld b,3 368 ld a,(pl3hero1y+HeroStatus) 369 call .CheckPlayer370 ld b,4 371 ld a,(pl4hero1y+HeroStatus) 372 call .CheckPlayer374 dec c 375 ret nz377 call SwapAndSetPage 378 ld b,60379 .loop:380 halt381 djnz .loop382 call SetPlayerWonGameWindowAndText 383 call SwapAndSetPage 384 385 .engine:386 call PopulateControls 388393 ld a,(NewPrContr)394 and %0011 0000395 jr nz,.end396 jr .engine 398 .end:399 ld a,%0011 0000400 ld (ControlsOnInterrupt),a 401 ret402 403 .CheckPlayer:404 cp 255405 jr nz,.PlayerStillHasAHeroOrCastleLeft406 407 ld a,(Castle1+CastlePlayer)408 cp b409 jr z,.PlayerStillHasAHeroOrCastleLeft410 ld a,(Castle2+CastlePlayer)411 cp b412 jr z,.PlayerStillHasAHeroOrCastleLeft413 ld a,(Castle3+CastlePlayer)414 cp b415 jr z,.PlayerStillHasAHeroOrCastleLeft416 ld a,(Castle4+CastlePlayer)417 cp b418 ret nz420 .PlayerStillHasAHeroOrCastleLeft:421 inc c 422 ret428SetPlayerWonGameWindowAndText:429 ld hl,$4000 + (070*128) + (150/2) - 128430 ld de,$0000 + (060*128) + (058/2) - 128431 ld bc,$0000 + (040*256) + (088/2)432 ld a,HeroOverviewStatusGraphicsBlock 433 call CopyRamToVramCorrectedCastleOverview 435 ld a,(CampaignMode?)436 or a437 jr nz,.CampaignMode439 ld b,075 440 ld c,067 441 ld hl,TextPlayerWonGame1442 call SetText444 ld hl,1445 ld a,(pl1hero1y+HeroStatus) 446 cp 255447 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame448 ld hl,2449 ld a,(pl2hero1y+HeroStatus) 450 cp 255451 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame452 ld hl,3453 ld a,(pl2hero1y+HeroStatus) 454 cp 255455 jr nz,.PlayerStillHasAHeroLeftAndWonTheGame456 ld hl,4457 .PlayerStillHasAHeroLeftAndWonTheGame:458 ld b,115 459 ld c,078 460 call SetNumber16BitCastle462 ld b,078 463 ld c,078 464 ld hl,TextPlayerWonGame2465 jp SetText467 .CampaignMode:468 ld a,(DaysToCompleteCampaign)469 ld l,a470 ld h,0471 ld de,(Date)472 xor a473 dec hl474 sbc hl,de475 jr nc,.CampaignFinishedInTime477 .CampaignFinishedOutOfTime:478 ld b,075 479 ld c,067 480 ld hl,TextOutOfTime481 call SetText483 ld b,078 484 ld c,078 485 ld hl,TextCampaignFailed486 jp SetText488 .CampaignFinishedInTime:489 ld b,075 490 ld c,067 491 ld hl,TextPlayerWonGame1492 call SetText494 ld a,1495 ld (CampaignFinished?),a496 ld b,078 497 ld c,078 498 ld hl,TextCampaignFinished499 call SetText501 502 ld a,(ScenarioSelected)503 ld b,a504 ld a,(AmountOfCampaignsFinished)505 cp b506 ret nz507 inc a508 ld (AmountOfCampaignsFinished),a510 511 di 512 ld a,SaveDataBlock11-$100513 ld ($7100),a 515 516 ld hl,$8000517 call SectorErase 519 call CheckEraseDone521 522 ld hl,AmountOfCampaignsFinished523 ld de,$8000524 ld bc,1525 call FlashWrite526 ret528TextOutOfTime:529 db "Out Of Time",255530TextCampaignFailed: 531 db " You failed",254532 db "the Campaign",255534TextPlayerWonGame1: 535 db "Congratulations",255536TextPlayerWonGame2: 537 db "  Player",254538 db "Is Victorious",255540TextCampaignFinished: 541 db " You finished",254542 db "this Campaign",255544SetPlayerEliminatedWindowAndText:545 ld hl,$4000 + (070*128) + (150/2) - 128546 ld de,$0000 + (060*128) + (058/2) - 128547 ld bc,$0000 + (040*256) + (088/2)548 ld a,HeroOverviewStatusGraphicsBlock 549 call CopyRamToVramCorrectedCastleOverview 551 ld b,066 552 ld c,067 553 ld hl,TextPlayerEliminated1554 call SetText556 ld a,(PlayerWhoLostAHeroInBattle?)557 ld l,a558 ld h,0559 ld b,115 560 ld c,078 561 call SetNumber16BitCastle563 ld b,078 564 ld c,078 565 ld hl,TextPlayerEliminated2566 jp SetText569TextPlayerEliminated1: 570 db " Player Eliminated",255571TextPlayerEliminated2: 572 db "  Player",254573 db "Is Eliminated",255590DisplaySpireOfWisdomCOde:591 ld bc,SFX_SpireOfWisdom592 call RePlayerSFX_PlayCh1 594 ld a,255 595 ld (PreviousButtonClicked),a 596 ld ix,GenericButtonTable597 ld (PreviousButtonClickedIX),ix599 call SetSpireOfWisdomButtons600 call SetSpireOfWisdomGraphics 601 call SetSpireOfWisdomText602 call SwapAndSetPage 603 call SetSpireOfWisdomGraphics 604 call SetSpireOfWisdomText605 .engine: 606 call SwapAndSetPage 607 call PopulateControls 609618 619 ld ix,GenericButtonTable620 call CheckButtonInteractionControlsNotOnInt622 call .CheckButtonClicked 624 625 ld ix,(PreviousButtonClickedIX) 626 ld a,(ix+GenericButtonStatus)627 push af628 ld a,(PreviousButtonClicked)629 cp 255630 jr z,.EndMarkButton 631 ld (ix+GenericButtonStatus),%1010 0011632 .EndMarkButton:633 635 ld ix,GenericButtonTable636 call .SetGenericButtons 638 639 pop af640 ld ix,(PreviousButtonClickedIX) 641 ld (ix+GenericButtonStatus),a642 644 halt645 jp .engine647 .CheckButtonClicked:648 ret nc649 ld a,%1100 0011650 ld (GenericButtonTable+(4*GenericButtonTableLenghtPerButton)),a 652 ld a,b653 cp 1 654 jp z,.VButton655 ld (PreviousButtonClicked),a656 ld (PreviousButtonClickedIX),ix657 ret667 .SetGenericButtons: 668 ld a,(ix+GenericButtonGfxBlock)669 ld (ButtonGfxBlockCopy),a671 ld b,(ix+GenericButtonAmountOfButtons)672 .loop:673 push bc674 call .Setbutton675 pop bc676 ld de,GenericButtonTableLenghtPerButton677 add ix,de679 djnz .loop680 ret682 .Setbutton:683 bit 7,(ix+GenericButtonStatus)684 ret z 686 bit 0,(ix+GenericButtonStatus) 687 res 0,(ix+GenericButtonStatus) 688 jr nz,.goCopyButton689 bit 1,(ix+GenericButtonStatus)690 res 1,(ix+GenericButtonStatus)691 ret z 692 .goCopyButton:694 ld l,(ix+GenericButton_SYSX_Ontouched)695 ld h,(ix+GenericButton_SYSX_Ontouched+1)696 bit 6,(ix+GenericButtonStatus)697 jr nz,.go 699 ld l,(ix+GenericButton_SYSX_MovedOver)700 ld h,(ix+GenericButton_SYSX_MovedOver+1)701 bit 5,(ix+GenericButtonStatus)702 jr nz,.go 704 ld l,(ix+GenericButton_SYSX_Clicked)705 ld h,(ix+GenericButton_SYSX_Clicked+1)706 .go:708 709 ld e,(ix+GenericButton_DYDX)710 ld d,(ix+GenericButton_DYDX+1)712 ld a,(ix+GenericButtonYbottom)713 sub a,(ix+GenericButtonYtop)714 ld b,a 715 ld a,(ix+GenericButtonXright)716 sub a,(ix+GenericButtonXleft)717 srl a 718 ld c,a 721 ld a,(ButtonGfxBlockCopy)723725 ld de,$8000 + ((212+16)*128) + (000/2) - 128 726 call CopyRamToVramCorrectedWithoutActivePageSetting 728 ld a,(activepage)729 xor 1730 ld (CopyCastleButton2+dPage),a732 ld a,(ix+GenericButtonXleft)733 ld (CopyCastleButton2+dx),a734 ld a,(ix+GenericButtonYtop)735 ld (CopyCastleButton2+dy),a737 ld a,(ix+GenericButtonYbottom)738 sub a,(ix+GenericButtonYtop)739 ld (CopyCastleButton2+ny),a741 ld a,(ix+GenericButtonXright)742 sub a,(ix+GenericButtonXleft)743 ld (CopyCastleButton2+nx),a745 ld a,212+16746 ld (CopyCastleButton2+sy),a748 ld hl,CopyCastleButton2749 call docopy751 ld a,212752 ld (CopyCastleButton2+sy),a754 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady755 call docopy756 ret758 .VButton:759 pop af 760 ld ix,(plxcurrentheroAddress)761 ld a,(PreviousButtonClicked)762 cp 2763 jr z,.SpellPowerSelected764 cp 3765 jr z,.IntelligenceSelected766 cp 4767 jr z,.DefenseSelected768771 .AttackSelected:772 inc (ix+HeroStatAttack)773 ret775 .DefenseSelected:776 inc (ix+HeroStatDefense)777 ret779 .IntelligenceSelected:780 inc (ix+HeroStatKnowledge)781 ret783 .SpellPowerSelected:784 inc (ix+HeroStatSpellDamage)785 ret787SetSpireOfWisdomButtons:788 ld hl,SetSpireOfWisdomButtonTable-2789 ld de,GenericButtonTable-2790 ld bc,2+(GenericButtonTableLenghtPerButton*05)791 ldir792 ret794SetSpireOfWisdomButtonTableGfxBlock: db SecondarySkillsButtonsBlock795SetSpireOfWisdomButtonTableAmountOfButtons: db 05796SetSpireOfWisdomButtonTable: 798 db %1100 0011 | dw $4000 + (132*128) + (090/2) - 128 | dw $4000 + (132*128) + (154/2) - 128 | dw $4000 + (000*128) + (240/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 799 800 db %1100 0011 | dw $4000 + (132*128) + (106/2) - 128 | dw $4000 + (132*128) + (170/2) - 128 | dw $4000 + (016*128) + (240/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 801 802 db %1100 0011 | dw $4000 + (132*128) + (122/2) - 128 | dw $4000 + (132*128) + (186/2) - 128 | dw $4000 + (032*128) + (240/2) - 128 | db .Button3Ytop,.Button3YBottom,.Button3XLeft,.Button3XRight | dw $0000 + (.Button3Ytop*128) + (.Button3XLeft/2) - 128 803 804 db %1100 0011 | dw $4000 + (132*128) + (138/2) - 128 | dw $4000 + (132*128) + (202/2) - 128 | dw $4000 + (048*128) + (240/2) - 128 | db .Button4Ytop,.Button4YBottom,.Button4XLeft,.Button4XRight | dw $0000 + (.Button4Ytop*128) + (.Button4XLeft/2) - 128 805 806 db %0000 0000 | dw $4000 + (132*128) + (030/2) - 128 | dw $4000 + (132*128) + (050/2) - 128 | dw $4000 + (132*128) + (070/2) - 128 | db .Button5Ytop,.Button5YBottom,.Button5XLeft,.Button5XRight | dw $0000 + (.Button5Ytop*128) + (.Button5XLeft/2) - 128 808.Button1Ytop: equ 026 + 24809.Button1YBottom: equ .Button1Ytop + 016810.Button1XLeft: equ 028 + 20811.Button1XRight: equ .Button1XLeft + 016813.Button2Ytop: equ 060 + 24814.Button2YBottom: equ .Button2Ytop + 016815.Button2XLeft: equ 028 + 20816.Button2XRight: equ .Button2XLeft + 016818.Button3Ytop: equ 026 + 24819.Button3YBottom: equ .Button3Ytop + 016820.Button3XLeft: equ 118 + 20821.Button3XRight: equ .Button3XLeft + 016823.Button4Ytop: equ 060 + 24824.Button4YBottom: equ .Button4Ytop + 016825.Button4XLeft: equ 118 + 20826.Button4XRight: equ .Button4XLeft + 016828.Button5Ytop: equ 146829.Button5YBottom: equ .Button5Ytop + 019830.Button5XLeft: equ 154831.Button5XRight: equ .Button5XLeft + 020833SetSpireOfWisdomText:834 call .SetFontPage0Y212 836 ld b,072+00 837 ld c,031+00 838 ld hl,TextSpireOfWisdom1839 call SetText 841 ld b,035+00 842 ld c,069+00 843 ld hl,TextPlus1Attack844 call SetText 846 ld b,034+00 847 ld c,103+00 848 ld hl,TextPlus1Defense849 call SetText 851 ld b,120+00 852 ld c,069+00 853 ld hl,TextPlus1Intelligence854 call SetText 856 ld b,119+00 857 ld c,103+00 858 ld hl,TextPlus1SpellPower859 call SetText 861 ld b,029+00 862 ld c,116+00 863 ld hl,TextSpireOfWisdom2864 jp SetText 866.SetFontPage0Y212: 867 ld hl,$4000 + (000*128) + (000/2) - 128868 ld de,$0000 + (212*128) + (000/2) - 128869 ld bc,$0000 + (006*256) + (256/2)870 ld a,CastleOverviewFontBlock 871 jp CopyRamToVramCorrectedWithoutActivePageSetting 874TextSpireOfWisdom1:875 db "Spire Of Wisdom",255876TextSpireOfWisdom2:877 db "Within the hallowed walls of the",254878 db "Spire of Wisdom, you stand poised",254879 db "to refine your essence.",254880 db "Choose your path: forge your",254881 db "attack, bolster your defense, ",254882 db "sharpen your intellect, or unlock",254883 db "the arcane depths of spellcraft.",255884TextPlus1Attack:885 db "+1 attack",255886TextPlus1Defense:887 db "+1 defense",255888TextPlus1Intelligence:889 db "+1 intelligence",255890TextPlus1SpellPower:891 db "+1 spell power",255893SetSpireOfWisdomGraphics:894 ld hl,$4000 + (000*128) + (000/2) - 128895 ld de,$0000 + (024*128) + (020/2) - 128896 ld bc,$0000 + (148*256) + (162/2)897 ld a,ScrollBlock 898 call CopyRamToVramCorrectedCastleOverview 900 ld hl,$4000 + (139*128) + (044/2) - 128901 ld de,$0000 + ((024+53)*128) + ((020+30)/2) - 128902 ld bc,$0000 + (060*256) + (104/2)903 ld a,DefeatBlock 904 call CopyRamToVramCorrectedCastleOverview 906 ld hl,$4000 + (068*128) + (210/2) - 128907 ld de,$0000 + ((024+19)*128) + ((020+70)/2) - 128908 ld bc,$0000 + (068*256) + (026/2)909 ld a,DefeatBlock 910 call CopyRamToVramCorrectedCastleOverview 912 ld hl,$4000 + (132*128) + (218/2) - 128913 ld de,$0000 + (146*128) + (154/2) - 128914 ld bc,$0000 + (019*256) + (020/2)915 ld a,SecondarySkillsButtonsBlock 916 jp CopyRamToVramCorrectedCastleOverview 935936SetNamesInSaveGameButtons:937 ld b,10 938 ld a,000 939 ld c,045+(0*13) 940 .loop:941 push af942 push bc943 call .SetName944 pop bc945 ld a,c946 add a,13947 ld c,a 948 pop af949 inc a 950 djnz .loop951 ei952 ret954 .SetName:955 add a,a956 add a,a 957 di958 ld ($7100),a 960 ld a,(amountofplayers-StartSaveGameData+$8000)961 ld d,a 962 ld hl,(WorldPointer-StartSaveGameData+$8000)964 ld a,($8000+HeroMove)965 cp 255966 ret z968 ld a,(slot.page12rom) 969 out ($a8),a 970 ld a,Loaderblock 971 call block34 973 push de975 ld de,ScenarioNameAddress+2+$4000 976 add hl,de977 push bc978 ld b,184 979 call SetText 980 pop bc982 inc hl 983 push bc984 ld b,017 985 call SetText 986 pop bc988 pop de990 ld h,000 991 ld l,d 992 push bc993 ld b,165 994 call SetNumber16BitCastle996 ld a,(DayOfMonthTientallen)997 ld hl,10998 ld d,0999 ld e,a1000 call MultiplyHlWithDE 1001 ld a,(DayOfMonthEenheden)1002 ld e,a1003 ld d,01004 add hl,de1006 pop bc1007 push bc1008 ld b,112 1009 call SetNumber16BitCastle1011 ld hl,.TextSlash1012 pop bc1013 push bc1014 ld a,(PutLetter+dx)1015 ld b,a 1016 call SetText 1018 ld a,(MonthTientallen)1019 ld hl,101020 ld d,01021 ld e,a1022 call MultiplyHlWithDE 1023 ld a,(MonthEenheden)1024 ld e,a1025 ld d,01026 add hl,de1027 pop bc1028 push bc1029 ld a,(PutLetter+dx)1030 ld b,a 1031 call SetNumber16BitCastle1033 ld hl,.TextSlash1034 pop bc1035 push bc1036 ld a,(PutLetter+dx)1037 ld b,a 1038 call SetText 1040 ld a,(YearTientallen)1041 ld hl,101042 ld d,01043 ld e,a1044 call MultiplyHlWithDE 1045 ld a,(YearEenheden)1046 ld e,a1047 ld d,01048 add hl,de1049 ld de,1980 1050 add hl,de1052 pop bc1053 push bc1054 ld a,(PutLetter+dx)1055 ld b,a 1056 call SetNumber16BitCastle1057 pop bc 1058 ret1060.TextSlash: db "/",2551069SaveGameCode:1070 call SetSaveGameGraphics 1071 call SetNamesInSaveGameButtons1072 call SwapAndSetPage 1073 call SetSaveGameGraphics 1074 call SetNamesInSaveGameButtons1075 call CopyActivePageToInactivePageExtraRoutines1076 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1077 call docopy1079 call SetSaveGameButtons1080 ld a,2551081 ld (SaveGameSelected),a 1083 .engine: 1084 call SwapAndSetPage 1085 call PopulateControls 10871092 ld a,(NewPrContr)1093 bit 5,a 1094 ret nz1096 ld ix,GenericButtonTable1097 call CheckButtonInteractionControlsNotOnInt1098 call .CheckButtonClicked 1100 ld ix,GenericButtonTable1101 call DisplaySpireOfWisdomCOde.SetGenericButtons 1104 call SetNamesInSaveGameButtons11071108 jp .engine1110 .CheckClickOutOfWindow:1111 ld a,(NewPrContr)1112 bit 4,a 1113 ret z1115 ld a,(spat+0) 1116 cp DiskMenuWindowDY1117 jr c,.NotOutOfWindow1118 cp DiskMenuWindowDY+DiskMenuWindowNY1119 jr nc,.NotOutOfWindow1120 1121 ld a,(spat+1) 1122 add a,061123 cp DiskMenuWindowDX1124 jr c,.NotOutOfWindow1125 cp DiskMenuWindowDX+DiskMenuWindowNX1126 ret c1127 .NotOutOfWindow:1128 pop af1129 ret1135 .CheckButtonClicked:1136 ret nc1138 ld a,b1139 cp 21140 jp z,.SaveButtonPressed1141 cp 11142 jp z,.BackButtonPressed1144 .SaveGameSlotPressed:1145 ld a,12 1146 sub b1147 ld (SaveGameSelected),a 1149 call SetSaveGameButtons 1151 1152 ld a,(SaveGameSelected) 1153 ld d,01154 ld e,a1155 ld hl,GenericButtonTableLenghtPerButton1156 call MultiplyHlWithDE 1157 ld de,GenericButtonTable+11158 add hl,de1159 ex de,hl1160 ld hl,.ScenarioButtonConstantlyLit1161 ld bc,41162 ldir1163 ret1165 .SaveButtonPressed:1166 ld a,(SaveGameSelected) 1167 cp 2551168 ret z 1170 call SaveGameToFlash1172 pop af1173 ret1175 .BackButtonPressed:1176 pop af1177 ret1179 .ScenarioButtonConstantlyLit:1180 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1281181 .ScenarioButtonNormallyLit:1182 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1281198SetSaveGameGraphics:1199 ld hl,$4000 + (000*128) + (000/2) - 1281200 ld de,$0000 + (005*128) + (006/2) - 1281201 ld bc,$0000 + (192*256) + (192/2)1202 ld a,SaveGameBlock 1203 jp CopyRamToVramCorrectedCastleOverview 1206SetSaveGameButtons:1207 ld hl,SaveGameButtonTable-21208 ld de,GenericButtonTable-21209 ld bc,2+(GenericButtonTableLenghtPerButton*12)1210 ldir1211 ret1213 1214SaveGameButton1Ytop: equ 047 + (0*13) - 51215SaveGameButton1YBottom: equ SaveGameButton1Ytop + 0111216SaveGameButton1XLeft: equ 022 - 81217SaveGameButton1XRight: equ SaveGameButton1XLeft + 0961219SaveGameButton2Ytop: equ 047 + (1*13) - 51220SaveGameButton2YBottom: equ SaveGameButton2Ytop + 0111221SaveGameButton2XLeft: equ 022 - 81222SaveGameButton2XRight: equ SaveGameButton2XLeft + 0961224SaveGameButton3Ytop: equ 047 + (2*13) - 51225SaveGameButton3YBottom: equ SaveGameButton3Ytop + 0111226SaveGameButton3XLeft: equ 022 - 81227SaveGameButton3XRight: equ SaveGameButton3XLeft + 0961229SaveGameButton4Ytop: equ 047 + (3*13) - 51230SaveGameButton4YBottom: equ SaveGameButton4Ytop + 0111231SaveGameButton4XLeft: equ 022 - 81232SaveGameButton4XRight: equ SaveGameButton4XLeft + 0961234SaveGameButton5Ytop: equ 047 + (4*13) - 51235SaveGameButton5YBottom: equ SaveGameButton5Ytop + 0111236SaveGameButton5XLeft: equ 022 - 81237SaveGameButton5XRight: equ SaveGameButton5XLeft + 0961239SaveGameButton6Ytop: equ 047 + (5*13) - 51240SaveGameButton6YBottom: equ SaveGameButton6Ytop + 0111241SaveGameButton6XLeft: equ 022 - 81242SaveGameButton6XRight: equ SaveGameButton6XLeft + 0961244SaveGameButton7Ytop: equ 047 + (6*13) - 51245SaveGameButton7YBottom: equ SaveGameButton7Ytop + 0111246SaveGameButton7XLeft: equ 022 - 81247SaveGameButton7XRight: equ SaveGameButton7XLeft + 0961249SaveGameButton8Ytop: equ 047 + (7*13) - 51250SaveGameButton8YBottom: equ SaveGameButton8Ytop + 0111251SaveGameButton8XLeft: equ 022 - 81252SaveGameButton8XRight: equ SaveGameButton8XLeft + 0961254SaveGameButton9Ytop: equ 047 + (8*13) - 51255SaveGameButton9YBottom: equ SaveGameButton9Ytop + 0111256SaveGameButton9XLeft: equ 022 - 81257SaveGameButton9XRight: equ SaveGameButton9XLeft + 0961259SaveGameButton10Ytop: equ 047 + (9*13) - 51260SaveGameButton10YBottom: equ SaveGameButton10Ytop + 0111261SaveGameButton10XLeft: equ 022 - 81262SaveGameButton10XRight: equ SaveGameButton10XLeft + 0961264 1265SaveGameButton11Ytop: equ 1721266SaveGameButton11YBottom: equ SaveGameButton11Ytop + 0151267SaveGameButton11XLeft: equ 0781268SaveGameButton11XRight: equ SaveGameButton11XLeft + 0181270SaveGameButton12Ytop: equ 1721271SaveGameButton12YBottom: equ SaveGameButton12Ytop + 0151272SaveGameButton12XLeft: equ 1041273SaveGameButton12XRight: equ SaveGameButton12XLeft + 0181275SaveGameButtonTableGfxBlock: db ScenarioSelectButtonsBlock 1276SaveGameButtonTableAmountOfButtons: db 121277SaveGameButtonTable: 1279 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton1Ytop,SaveGameButton1YBottom,SaveGameButton1XLeft,SaveGameButton1XRight | dw $0000 + (SaveGameButton1Ytop*128) + (SaveGameButton1XLeft/2) - 128 1280 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton2Ytop,SaveGameButton2YBottom,SaveGameButton2XLeft,SaveGameButton2XRight | dw $0000 + (SaveGameButton2Ytop*128) + (SaveGameButton2XLeft/2) - 128 1281 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton3Ytop,SaveGameButton3YBottom,SaveGameButton3XLeft,SaveGameButton3XRight | dw $0000 + (SaveGameButton3Ytop*128) + (SaveGameButton3XLeft/2) - 1281282 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton4Ytop,SaveGameButton4YBottom,SaveGameButton4XLeft,SaveGameButton4XRight | dw $0000 + (SaveGameButton4Ytop*128) + (SaveGameButton4XLeft/2) - 1281283 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton5Ytop,SaveGameButton5YBottom,SaveGameButton5XLeft,SaveGameButton5XRight | dw $0000 + (SaveGameButton5Ytop*128) + (SaveGameButton5XLeft/2) - 1281284 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton6Ytop,SaveGameButton6YBottom,SaveGameButton6XLeft,SaveGameButton6XRight | dw $0000 + (SaveGameButton6Ytop*128) + (SaveGameButton6XLeft/2) - 1281285 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton7Ytop,SaveGameButton7YBottom,SaveGameButton7XLeft,SaveGameButton7XRight | dw $0000 + (SaveGameButton7Ytop*128) + (SaveGameButton7XLeft/2) - 1281286 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton8Ytop,SaveGameButton8YBottom,SaveGameButton8XLeft,SaveGameButton8XRight | dw $0000 + (SaveGameButton8Ytop*128) + (SaveGameButton8XLeft/2) - 1281287 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton9Ytop,SaveGameButton9YBottom,SaveGameButton9XLeft,SaveGameButton9XRight | dw $0000 + (SaveGameButton9Ytop*128) + (SaveGameButton9XLeft/2) - 1281288 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db SaveGameButton10Ytop,SaveGameButton10YBottom,SaveGameButton10XLeft,SaveGameButton10XRight | dw $0000 + (SaveGameButton10Ytop*128) + (SaveGameButton10XLeft/2) - 1281290 1291 db %1100 0011 | dw $4000 + (152*128) + (000/2) - 128 | dw $4000 + (152*128) + (018/2) - 128 | dw $4000 + (152*128) + (036/2) - 128 | db SaveGameButton11Ytop,SaveGameButton11YBottom,SaveGameButton11XLeft,SaveGameButton11XRight | dw $0000 + (SaveGameButton11Ytop*128) + (SaveGameButton11XLeft/2) - 1281292 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db SaveGameButton12Ytop,SaveGameButton12YBottom,SaveGameButton12XLeft,SaveGameButton12XRight | dw $0000 + (SaveGameButton12Ytop*128) + (SaveGameButton12XLeft/2) - 1281306DiskMenuWindowDX: equ 0301307DiskMenuWindowDY: equ 0631308DiskMenuWindowNX: equ 1441309DiskMenuWindowNY: equ 0511310DisplayDiskMenuCOde:1311 call SetDiskMenuButtons1312 call SetDiskMenuGraphics 1313 call SetDayWeekMonthDiskMenu1314 call SwapAndSetPage 1315 call SetDiskMenuGraphics 1316 call SetDayWeekMonthDiskMenu1317 call CopyActivePageToInactivePageExtraRoutines1318 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1319 call docopy1321 .engine: 1322 call SwapAndSetPage 1323 call PopulateControls 13251330 ld a,(NewPrContr)1331 bit 5,a 1332 ret nz1334 ld ix,GenericButtonTable1335 call CheckButtonInteractionControlsNotOnInt1337 call .CheckButtonClicked 1339 ld ix,GenericButtonTable1340 call DisplaySpireOfWisdomCOde.SetGenericButtons 1341 call .CheckClickOutOfWindow 1343 halt1344 jp .engine1346 .CheckClickOutOfWindow:1347 ld a,(NewPrContr)1348 bit 4,a 1349 ret z1351 ld a,(spat+0) 1352 cp DiskMenuWindowDY1353 jr c,.NotOutOfWindow1354 cp DiskMenuWindowDY+DiskMenuWindowNY1355 jr nc,.NotOutOfWindow1356 1357 ld a,(spat+1) 1358 add a,061359 cp DiskMenuWindowDX1360 jr c,.NotOutOfWindow1361 cp DiskMenuWindowDX+DiskMenuWindowNX1362 ret c1363 .NotOutOfWindow:1364 pop af1365 ret1367 .CheckButtonClicked:1368 ret nc1369 pop af 1370 ld a,b1371 cp 1 1372 jp nz,ConfirmMainMenuCOde1373 jp SaveGameCode1375SetDayWeekMonthDiskMenu:1376 1377 ld bc,(Date)1378 ld de,7 1379 call DivideBCbyDE 1380 inc hl 1381 ld b,069+05 1382 ld c,053+17 1383 call SetNumber16BitCastle1385 1386 ld bc,(Date)1387 ld de,7 1388 call DivideBCbyDE 1390 1391 ld de,4 1392 call DivideBCbyDE 1393 push bc 1394 inc hl1395 ld b,104+05 1396 ld c,053+17 1397 call SetNumber16BitCastle1399 1400 pop hl1401 inc hl1402 ld b,142+05 1403 ld c,053+17 1404 call SetNumber16BitCastle1405 ret1407ConfirmMainMenuCOde:1408 call SetConfirmMainMenuButtons1409 call SetConfirmMainMenuGraphics 1410 call SwapAndSetPage 1411 call SetConfirmMainMenuGraphics 1412 call CopyActivePageToInactivePageExtraRoutines1413 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady1414 call docopy1416 .engine: 1417 call SwapAndSetPage 1418 call PopulateControls 14201425 ld a,(NewPrContr)1426 bit 5,a 1427 ret nz1429 ld ix,GenericButtonTable1430 call CheckButtonInteractionControlsNotOnInt1432 call .CheckButtonClicked 1434 ld ix,GenericButtonTable1435 call DisplaySpireOfWisdomCOde.SetGenericButtons 1437 call .CheckClickOutOfWindow 1439 halt1440 jp .engine1442 .CheckClickOutOfWindow:1443 ld a,(NewPrContr)1444 bit 4,a 1445 ret z1447 ld a,(spat+0) 1448 cp DiskMenuWindowDY1449 jr c,.NotOutOfWindow1450 cp DiskMenuWindowDY+DiskMenuWindowNY1451 jr nc,.NotOutOfWindow1452 1453 ld a,(spat+1) 1454 add a,061455 cp DiskMenuWindowDX1456 jr c,.NotOutOfWindow1457 cp DiskMenuWindowDX+DiskMenuWindowNX1458 ret c1459 .NotOutOfWindow:1460 pop af1461 jp DisplayDiskMenuCOde1464 .CheckButtonClicked:1465 ret nc1466 pop af 1467 ld a,b1468 cp 1 1469 jp z,DisplayDiskMenuCOde1470 ld a,11471 ld (BackToMainMenu?),a1472 ret1474SetConfirmMainMenuButtons:1475 ld hl,SetConfirmMainMenuuButtonTable-21476 ld de,GenericButtonTable-21477 ld bc,2+(GenericButtonTableLenghtPerButton*02)1478 ldir1479 ret1481SetConfirmMainMenuuButtonTableGfxBlock: db RetreatBlock1482SetConfirmMainMenuuButtonTableAmountOfButtons: db 021483SetConfirmMainMenuuButtonTable: 1485 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1486 1487 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1489.Button1Ytop: equ 0881490.Button1YBottom: equ .Button1Ytop + 0191491.Button1XLeft: equ 0481492.Button1XRight: equ .Button1XLeft + 0201494.Button2Ytop: equ 0891495.Button2YBottom: equ .Button2Ytop + 0181496.Button2XLeft: equ 048+0901497.Button2XRight: equ .Button2XLeft + 0201499SetDiskMenuButtons:1500 ld hl,SetDiskMenuButtonTable-21501 ld de,GenericButtonTable-21502 ld bc,2+(GenericButtonTableLenghtPerButton*02)1503 ldir1504 ret1506SetDiskMenuButtonTableGfxBlock: db DiskMenuBlock1507SetDiskMenuButtonTableAmountOfButtons: db 021508SetDiskMenuButtonTable: 1510 db %1100 0011 | dw $4000 + (101*128) + (000/2) - 128 | dw $4000 + (112*128) + (000/2) - 128 | dw $4000 + (123*128) + (000/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1511 1512 db %1100 0011 | dw $4000 + (101*128) + (128/2) - 128 | dw $4000 + (112*128) + (128/2) - 128 | dw $4000 + (123*128) + (128/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1514.Button1Ytop: equ 0811515.Button1YBottom: equ .Button1Ytop + 0111516.Button1XLeft: equ 0381517.Button1XRight: equ .Button1XLeft + 1281519.Button2Ytop: equ 0951520.Button2YBottom: equ .Button2Ytop + 0111521.Button2XLeft: equ 0381522.Button2XRight: equ .Button2XLeft + 1281524SetConfirmMainMenuGraphics:1525 ld hl,$4000 + (050*128) + (000/2) - 1281526 ld de,$0000 + (063*128) + (030/2) - 1281527 ld bc,$0000 + (051*256) + (144/2)1528 ld a,DiskMenuBlock 1529 jp CopyRamToVramCorrectedCastleOverview 1531SetDiskMenuGraphics:1532 ld hl,$4000 + (000*128) + (000/2) - 1281533 ld de,$0000 + (063*128) + (030/2) - 1281534 ld bc,$0000 + (051*256) + (144/2)1535 ld a,DiskMenuBlock 1536 jp CopyRamToVramCorrectedCastleOverview 1538CopyActivePageToInactivePageExtraRoutines:1539 ld a,(activepage) 1540 or a1541 ld hl,.CopyPage0toPage11542 jp z,docopy1543 ld hl,.CopyPage1toPage01544 jp docopy1546.CopyPage1toPage0:1547 db 000,000,016,0011548 db 000,000,016,0001549 db 000,001,212-16,0001550 db 000,000,$d0 1551.CopyPage0toPage1:1552 db 000,000,016,0001553 db 000,000,016,0011554 db 000,001,212-16,0001555 db 000,000,$d0 1563 MSXHeroes.asm 1043 ds $8000-$,$ff1044dephase10461049MonsterAddressesForBattle1Block: equ $541050phase $80001051 MonsterAddressesForBattle1.asm1MonsterTableSpriteSheetBlock: equ 162MonsterTableNX: equ MonsterTableSpriteSheetBlock+13MonsterTableNY: equ MonsterTableNX+14MonsterTableCostGold: equ MonsterTableNY+15MonsterTableCostGems: equ MonsterTableCostGold+16MonsterTableCostRubies: equ MonsterTableCostGems+17MonsterTableHp: equ MonsterTableCostRubies+18MonsterTableSpeed: equ MonsterTableHp+19MonsterTableAttack: equ MonsterTableSpeed+110MonsterTableDefense: equ MonsterTableAttack+111MonsterTableGrowth: equ MonsterTableDefense+112MonsterTableDamage: equ MonsterTableGrowth+113MonsterTableSpecialAbility: equ MonsterTableDamage+114MonsterTableName: equ MonsterTableSpecialAbility+115RangedMonster: equ 12817LengthMonsterAddressesTable: equ Monster002Table-Monster001Table19Level1Unit: equ %0000 000020Level2Unit: equ %0010 000021Level3Unit: equ %0100 000022Level4Unit: equ %0110 000023Level5Unit: equ %1000 000024Level6Unit: equ %1010 000029MonsterAddressesForBattle1Data.asm12DragonSlayerUnitLevel1Number: equ 303DragonSlayerUnitLevel1Damage: equ 24DragonSlayerUnitLevel1Attack: equ 45DragonSlayerUnitLevel1Defense: equ 56DragonSlayerUnitLevel1HP: equ 107DragonSlayerUnitLevel1Speed: equ 48DragonSlayerUnitLevel1Growth: equ 149DragonSlayerUnitLevel1CostGold: equ 80/1010DragonSlayerUnitLevel1CostGems: equ 00+Level1Unit11DragonSlayerUnitLevel1CostRubies: equ 013DragonSlayerUnitLevel2Number: equ 2714DragonSlayerUnitLevel2Damage: equ 315DragonSlayerUnitLevel2Attack: equ 616DragonSlayerUnitLevel2Defense: equ 617DragonSlayerUnitLevel2HP: equ 1118DragonSlayerUnitLevel2Speed: equ 419DragonSlayerUnitLevel2Growth: equ 920DragonSlayerUnitLevel2CostGold: equ 100/1021DragonSlayerUnitLevel2CostGems: equ 00+Level2Unit22DragonSlayerUnitLevel2CostRubies: equ 024DragonSlayerUnitLevel3Number: equ 2925DragonSlayerUnitLevel3Damage: equ 526DragonSlayerUnitLevel3Attack: equ 827DragonSlayerUnitLevel3Defense: equ 828DragonSlayerUnitLevel3HP: equ 2529DragonSlayerUnitLevel3Speed: equ 630DragonSlayerUnitLevel3Growth: equ 731DragonSlayerUnitLevel3CostGold: equ 200/1032DragonSlayerUnitLevel3CostGems: equ 00+Level3Unit33DragonSlayerUnitLevel3CostRubies: equ 035DragonSlayerUnitLevel4Number: equ 3136DragonSlayerUnitLevel4Damage: equ 837DragonSlayerUnitLevel4Attack: equ 1038DragonSlayerUnitLevel4Defense: equ 1239DragonSlayerUnitLevel4HP: equ 3540DragonSlayerUnitLevel4Speed: equ 541DragonSlayerUnitLevel4Growth: equ 442DragonSlayerUnitLevel4CostGold: equ 300/1043DragonSlayerUnitLevel4CostGems: equ 00+Level4Unit44DragonSlayerUnitLevel4CostRubies: equ 046DragonSlayerUnitLevel5Number: equ 3547DragonSlayerUnitLevel5Damage: equ 1148DragonSlayerUnitLevel5Attack: equ 1249DragonSlayerUnitLevel5Defense: equ 1350DragonSlayerUnitLevel5HP: equ 4051DragonSlayerUnitLevel5Speed: equ 552DragonSlayerUnitLevel5Growth: equ 253DragonSlayerUnitLevel5CostGold: equ 400/1054DragonSlayerUnitLevel5CostGems: equ 00+Level5Unit55DragonSlayerUnitLevel5CostRubies: equ 057DragonSlayerUnitLevel6Number: equ 3358DragonSlayerUnitLevel6Damage: equ 2059DragonSlayerUnitLevel6Attack: equ 1660DragonSlayerUnitLevel6Defense: equ 1561DragonSlayerUnitLevel6HP: equ 100+5062DragonSlayerUnitLevel6Speed: equ 763DragonSlayerUnitLevel6Growth: equ 164DragonSlayerUnitLevel6CostGold: equ 1000/1065DragonSlayerUnitLevel6CostGems: equ 00+Level6Unit66DragonSlayerUnitLevel6CostRubies: equ 272UsasUnitLevel1Number: equ 5173UsasUnitLevel1Damage: equ 274UsasUnitLevel1Attack: equ 575UsasUnitLevel1Defense: equ 376UsasUnitLevel1HP: equ 877UsasUnitLevel1Speed: equ 678UsasUnitLevel1Growth: equ 1479UsasUnitLevel1CostGold: equ 70/1080UsasUnitLevel1CostGems: equ 00+Level1Unit81UsasUnitLevel1CostRubies: equ 083UsasUnitLevel2Number: equ 5284UsasUnitLevel2Damage: equ 385UsasUnitLevel2Attack: equ 686UsasUnitLevel2Defense: equ 787UsasUnitLevel2HP: equ 2088UsasUnitLevel2Speed: equ 389UsasUnitLevel2Growth: equ 890UsasUnitLevel2CostGold: equ 120/1091UsasUnitLevel2CostGems: equ 00+Level2Unit92UsasUnitLevel2CostRubies: equ 094UsasUnitLevel3Number: equ 5495UsasUnitLevel3Damage: equ 496UsasUnitLevel3Attack: equ 997UsasUnitLevel3Defense: equ 798UsasUnitLevel3HP: equ 2599UsasUnitLevel3Speed: equ 6100UsasUnitLevel3Growth: equ 7101UsasUnitLevel3CostGold: equ 200/10102UsasUnitLevel3CostGems: equ 00+Level3Unit103UsasUnitLevel3CostRubies: equ 0105UsasUnitLevel4Number: equ 48106UsasUnitLevel4Damage: equ 7107UsasUnitLevel4Attack: equ 9108UsasUnitLevel4Defense: equ 8109UsasUnitLevel4HP: equ 30110UsasUnitLevel4Speed: equ 8111UsasUnitLevel4Growth: equ 5112UsasUnitLevel4CostGold: equ 250/10113UsasUnitLevel4CostGems: equ 00+Level4Unit114UsasUnitLevel4CostRubies: equ 0116UsasUnitLevel5Number: equ 49 117UsasUnitLevel5Damage: equ 10118UsasUnitLevel5Attack: equ 9119UsasUnitLevel5Defense: equ 12120UsasUnitLevel5HP: equ 65121UsasUnitLevel5Speed: equ 4122UsasUnitLevel5Growth: equ 2123UsasUnitLevel5CostGold: equ 425/10124UsasUnitLevel5CostGems: equ 00+Level5Unit125UsasUnitLevel5CostRubies: equ 1127UsasUnitLevel6Number: equ 50128UsasUnitLevel6Damage: equ 20129UsasUnitLevel6Attack: equ 15130UsasUnitLevel6Defense: equ 14131UsasUnitLevel6HP: equ 90+50132UsasUnitLevel6Speed: equ 7133UsasUnitLevel6Growth: equ 1134UsasUnitLevel6CostGold: equ 850/10135UsasUnitLevel6CostGems: equ 02+Level6Unit136UsasUnitLevel6CostRubies: equ 0140SDSnatcherUnitLevel1Number: equ 6141SDSnatcherUnitLevel1Damage: equ 2142SDSnatcherUnitLevel1Attack: equ 3143SDSnatcherUnitLevel1Defense: equ 3144SDSnatcherUnitLevel1HP: equ 4145SDSnatcherUnitLevel1Speed: equ 4146SDSnatcherUnitLevel1Growth: equ 16147SDSnatcherUnitLevel1CostGold: equ 30/10148SDSnatcherUnitLevel1CostGems: equ 00+Level1Unit149SDSnatcherUnitLevel1CostRubies: equ 0151SDSnatcherUnitLevel2Number: equ 5152SDSnatcherUnitLevel2Damage: equ 3153SDSnatcherUnitLevel2Attack: equ 6154SDSnatcherUnitLevel2Defense: equ 6155SDSnatcherUnitLevel2HP: equ 16156SDSnatcherUnitLevel2Speed: equ 6157SDSnatcherUnitLevel2Growth: equ 9158SDSnatcherUnitLevel2CostGold: equ 130/10159SDSnatcherUnitLevel2CostGems: equ 00+Level2Unit160SDSnatcherUnitLevel2CostRubies: equ 0162SDSnatcherUnitLevel3Number: equ 1163SDSnatcherUnitLevel3Damage: equ 5164SDSnatcherUnitLevel3Attack: equ 7165SDSnatcherUnitLevel3Defense: equ 10166SDSnatcherUnitLevel3HP: equ 30167SDSnatcherUnitLevel3Speed: equ 3168SDSnatcherUnitLevel3Growth: equ 6169SDSnatcherUnitLevel3CostGold: equ 250/10170SDSnatcherUnitLevel3CostGems: equ 00+Level3Unit171SDSnatcherUnitLevel3CostRubies: equ 0173SDSnatcherUnitLevel4Number: equ 2174SDSnatcherUnitLevel4Damage: equ 8175SDSnatcherUnitLevel4Attack: equ 11176SDSnatcherUnitLevel4Defense: equ 8177SDSnatcherUnitLevel4HP: equ 35178SDSnatcherUnitLevel4Speed: equ 6179SDSnatcherUnitLevel4Growth: equ 4180SDSnatcherUnitLevel4CostGold: equ 350/10181SDSnatcherUnitLevel4CostGems: equ 00+Level4Unit182SDSnatcherUnitLevel4CostRubies: equ 0184SDSnatcherUnitLevel5Number: equ 3185SDSnatcherUnitLevel5Damage: equ 15186SDSnatcherUnitLevel5Attack: equ 12187SDSnatcherUnitLevel5Defense: equ 12188SDSnatcherUnitLevel5HP: equ 40189SDSnatcherUnitLevel5Speed: equ 7190SDSnatcherUnitLevel5Growth: equ 3191SDSnatcherUnitLevel5CostGold: equ 550/10192SDSnatcherUnitLevel5CostGems: equ 00+Level5Unit193SDSnatcherUnitLevel5CostRubies: equ 0195SDSnatcherUnitLevel6Number: equ 4196SDSnatcherUnitLevel6Damage: equ 20197SDSnatcherUnitLevel6Attack: equ 16198SDSnatcherUnitLevel6Defense: equ 13199SDSnatcherUnitLevel6HP: equ 115+50200SDSnatcherUnitLevel6Speed: equ 5201SDSnatcherUnitLevel6Growth: equ 1202SDSnatcherUnitLevel6CostGold: equ 850/10203SDSnatcherUnitLevel6CostGems: equ 02+Level6Unit204SDSnatcherUnitLevel6CostRubies: equ 0207CastleVaniaUnitLevel1Number: equ 25208CastleVaniaUnitLevel1Damage: equ 2209CastleVaniaUnitLevel1Attack: equ 2210CastleVaniaUnitLevel1Defense: equ 3211CastleVaniaUnitLevel1HP: equ 4212CastleVaniaUnitLevel1Speed: equ 5213CastleVaniaUnitLevel1Growth: equ 15214CastleVaniaUnitLevel1CostGold: equ 50/10215CastleVaniaUnitLevel1CostGems: equ 00+Level1Unit216CastleVaniaUnitLevel1CostRubies: equ 0218CastleVaniaUnitLevel2Number: equ 23219CastleVaniaUnitLevel2Damage: equ 3220CastleVaniaUnitLevel2Attack: equ 6221CastleVaniaUnitLevel2Defense: equ 4222CastleVaniaUnitLevel2HP: equ 16223CastleVaniaUnitLevel2Speed: equ 4224CastleVaniaUnitLevel2Growth: equ 8225CastleVaniaUnitLevel2CostGold: equ 125/10226CastleVaniaUnitLevel2CostGems: equ 00+Level2Unit227CastleVaniaUnitLevel2CostRubies: equ 0229CastleVaniaUnitLevel3Number: equ 18230CastleVaniaUnitLevel3Damage: equ 5231CastleVaniaUnitLevel3Attack: equ 10232CastleVaniaUnitLevel3Defense: equ 6233CastleVaniaUnitLevel3HP: equ 25234CastleVaniaUnitLevel3Speed: equ 7235CastleVaniaUnitLevel3Growth: equ 5236CastleVaniaUnitLevel3CostGold: equ 200/10237CastleVaniaUnitLevel3CostGems: equ 00+Level3Unit238CastleVaniaUnitLevel3CostRubies: equ 0240CastleVaniaUnitLevel4Number: equ 26241CastleVaniaUnitLevel4Damage: equ 8242CastleVaniaUnitLevel4Attack: equ 10243CastleVaniaUnitLevel4Defense: equ 10244CastleVaniaUnitLevel4HP: equ 25245CastleVaniaUnitLevel4Speed: equ 3246CastleVaniaUnitLevel4Growth: equ 4247CastleVaniaUnitLevel4CostGold: equ 250/10248CastleVaniaUnitLevel4CostGems: equ 00+Level4Unit249CastleVaniaUnitLevel4CostRubies: equ 0251CastleVaniaUnitLevel5Number: equ 20252CastleVaniaUnitLevel5Damage: equ 14253CastleVaniaUnitLevel5Attack: equ 13254CastleVaniaUnitLevel5Defense: equ 13255CastleVaniaUnitLevel5HP: equ 45256CastleVaniaUnitLevel5Speed: equ 6257CastleVaniaUnitLevel5Growth: equ 3258CastleVaniaUnitLevel5CostGold: equ 500/10259CastleVaniaUnitLevel5CostGems: equ 00+Level5Unit260CastleVaniaUnitLevel5CostRubies: equ 0262CastleVaniaUnitLevel6Number: equ 24263CastleVaniaUnitLevel6Damage: equ 20264CastleVaniaUnitLevel6Attack: equ 16265CastleVaniaUnitLevel6Defense: equ 12266CastleVaniaUnitLevel6HP: equ 90+50267CastleVaniaUnitLevel6Speed: equ 9268CastleVaniaUnitLevel6Growth: equ 1269CastleVaniaUnitLevel6CostGold: equ 900/10270CastleVaniaUnitLevel6CostGems: equ 00+Level6Unit271CastleVaniaUnitLevel6CostRubies: equ 2276PsychoWorldUnitLevel1Number: equ 66277PsychoWorldUnitLevel1Damage: equ 2278PsychoWorldUnitLevel1Attack: equ 5279PsychoWorldUnitLevel1Defense: equ 4280PsychoWorldUnitLevel1HP: equ 6281PsychoWorldUnitLevel1Speed: equ 4282PsychoWorldUnitLevel1Growth: equ 12283PsychoWorldUnitLevel1CostGold: equ 60/10284PsychoWorldUnitLevel1CostGems: equ 00+Level1Unit285PsychoWorldUnitLevel1CostRubies: equ 0287PsychoWorldUnitLevel2Number: equ 63288PsychoWorldUnitLevel2Damage: equ 3289PsychoWorldUnitLevel2Attack: equ 5290PsychoWorldUnitLevel2Defense: equ 5291PsychoWorldUnitLevel2HP: equ 15292PsychoWorldUnitLevel2Speed: equ 3293PsychoWorldUnitLevel2Growth: equ 8294PsychoWorldUnitLevel2CostGold: equ 100/10295PsychoWorldUnitLevel2CostGems: equ 00+Level2Unit296PsychoWorldUnitLevel2CostRubies: equ 0298PsychoWorldUnitLevel3Number: equ 64299PsychoWorldUnitLevel3Damage: equ 5300PsychoWorldUnitLevel3Attack: equ 7301PsychoWorldUnitLevel3Defense: equ 7302PsychoWorldUnitLevel3HP: equ 18303PsychoWorldUnitLevel3Speed: equ 5304PsychoWorldUnitLevel3Growth: equ 7305PsychoWorldUnitLevel3CostGold: equ 200/10306PsychoWorldUnitLevel3CostGems: equ 00+Level3Unit307PsychoWorldUnitLevel3CostRubies: equ 0309PsychoWorldUnitLevel4Number: equ 65310PsychoWorldUnitLevel4Damage: equ 7311PsychoWorldUnitLevel4Attack: equ 10312PsychoWorldUnitLevel4Defense: equ 9313PsychoWorldUnitLevel4HP: equ 30314PsychoWorldUnitLevel4Speed: equ 6315PsychoWorldUnitLevel4Growth: equ 4316PsychoWorldUnitLevel4CostGold: equ 360/10317PsychoWorldUnitLevel4CostGems: equ 00+Level4Unit318PsychoWorldUnitLevel4CostRubies: equ 0320PsychoWorldUnitLevel5Number: equ 69321PsychoWorldUnitLevel5Damage: equ 12322PsychoWorldUnitLevel5Attack: equ 13323PsychoWorldUnitLevel5Defense: equ 10324PsychoWorldUnitLevel5HP: equ 30325PsychoWorldUnitLevel5Speed: equ 6326PsychoWorldUnitLevel5Growth: equ 3327PsychoWorldUnitLevel5CostGold: equ 400/10328PsychoWorldUnitLevel5CostGems: equ 01+Level5Unit329PsychoWorldUnitLevel5CostRubies: equ 0331PsychoWorldUnitLevel6Number: equ 68332PsychoWorldUnitLevel6Damage: equ 22333PsychoWorldUnitLevel6Attack: equ 16334PsychoWorldUnitLevel6Defense: equ 16335PsychoWorldUnitLevel6HP: equ 120+50336PsychoWorldUnitLevel6Speed: equ 7337PsychoWorldUnitLevel6Growth: equ 1338PsychoWorldUnitLevel6CostGold: equ 1200/10339PsychoWorldUnitLevel6CostGems: equ 00+Level6Unit340PsychoWorldUnitLevel6CostRubies: equ 1346KingKongUnitLevel1Number: equ 77347KingKongUnitLevel1Damage: equ 2348KingKongUnitLevel1Attack: equ 4349KingKongUnitLevel1Defense: equ 3350KingKongUnitLevel1HP: equ 5351KingKongUnitLevel1Speed: equ 4352KingKongUnitLevel1Growth: equ 14353KingKongUnitLevel1CostGold: equ 50/10354KingKongUnitLevel1CostGems: equ 00+Level1Unit355KingKongUnitLevel1CostRubies: equ 0357KingKongUnitLevel2Number: equ 75358KingKongUnitLevel2Damage: equ 3359KingKongUnitLevel2Attack: equ 6360KingKongUnitLevel2Defense: equ 5361KingKongUnitLevel2HP: equ 14362KingKongUnitLevel2Speed: equ 6363KingKongUnitLevel2Growth: equ 8364KingKongUnitLevel2CostGold: equ 130/10365KingKongUnitLevel2CostGems: equ 00+Level2Unit366KingKongUnitLevel2CostRubies: equ 0368KingKongUnitLevel3Number: equ 76369KingKongUnitLevel3Damage: equ 4370KingKongUnitLevel3Attack: equ 9371KingKongUnitLevel3Defense: equ 7372KingKongUnitLevel3HP: equ 22373KingKongUnitLevel3Speed: equ 5374KingKongUnitLevel3Growth: equ 7375KingKongUnitLevel3CostGold: equ 250/10376KingKongUnitLevel3CostGems: equ 00+Level3Unit377KingKongUnitLevel3CostRubies: equ 0379KingKongUnitLevel4Number: equ 74380KingKongUnitLevel4Damage: equ 7381KingKongUnitLevel4Attack: equ 10382KingKongUnitLevel4Defense: equ 7383KingKongUnitLevel4HP: equ 30384KingKongUnitLevel4Speed: equ 3385KingKongUnitLevel4Growth: equ 4386KingKongUnitLevel4CostGold: equ 300/10387KingKongUnitLevel4CostGems: equ 00+Level4Unit388KingKongUnitLevel4CostRubies: equ 0390KingKongUnitLevel5Number: equ 73391KingKongUnitLevel5Damage: equ 16392KingKongUnitLevel5Attack: equ 14393KingKongUnitLevel5Defense: equ 12394KingKongUnitLevel5HP: equ 60395KingKongUnitLevel5Speed: equ 6396KingKongUnitLevel5Growth: equ 3397KingKongUnitLevel5CostGold: equ 500/10398KingKongUnitLevel5CostGems: equ 00+Level5Unit399KingKongUnitLevel5CostRubies: equ 0401KingKongUnitLevel6Number: equ 72402KingKongUnitLevel6Damage: equ 17403KingKongUnitLevel6Attack: equ 15404KingKongUnitLevel6Defense: equ 13405KingKongUnitLevel6HP: equ 80+50406KingKongUnitLevel6Speed: equ 7407KingKongUnitLevel6Growth: equ 1408KingKongUnitLevel6CostGold: equ 850/10409KingKongUnitLevel6CostGems: equ 01+Level6Unit410KingKongUnitLevel6CostRubies: equ 0417ContraGroupAUnitLevel1Number: equ 38418ContraGroupAUnitLevel1Damage: equ 2419ContraGroupAUnitLevel1Attack: equ 4420ContraGroupAUnitLevel1Defense: equ 2421ContraGroupAUnitLevel1HP: equ 5422ContraGroupAUnitLevel1Speed: equ 5423ContraGroupAUnitLevel1Growth: equ 15424ContraGroupAUnitLevel1CostGold: equ 40/10425ContraGroupAUnitLevel1CostGems: equ 00+Level1Unit426ContraGroupAUnitLevel1CostRubies: equ 0428ContraGroupAUnitLevel2Number: equ 42429ContraGroupAUnitLevel2Damage: equ 4430ContraGroupAUnitLevel2Attack: equ 7431ContraGroupAUnitLevel2Defense: equ 5432ContraGroupAUnitLevel2HP: equ 10433ContraGroupAUnitLevel2Speed: equ 6434ContraGroupAUnitLevel2Growth: equ 9435ContraGroupAUnitLevel2CostGold: equ 100/10436ContraGroupAUnitLevel2CostGems: equ 00+Level2Unit437ContraGroupAUnitLevel2CostRubies: equ 0439ContraGroupAUnitLevel3Number: equ 41440ContraGroupAUnitLevel3Damage: equ 5441ContraGroupAUnitLevel3Attack: equ 8442ContraGroupAUnitLevel3Defense: equ 4443ContraGroupAUnitLevel3HP: equ 15444ContraGroupAUnitLevel3Speed: equ 6445ContraGroupAUnitLevel3Growth: equ 7446ContraGroupAUnitLevel3CostGold: equ 150/10447ContraGroupAUnitLevel3CostGems: equ 00+Level3Unit448ContraGroupAUnitLevel3CostRubies: equ 0450ContraGroupAUnitLevel4Number: equ 47451ContraGroupAUnitLevel4Damage: equ 8452ContraGroupAUnitLevel4Attack: equ 13453ContraGroupAUnitLevel4Defense: equ 7454ContraGroupAUnitLevel4HP: equ 40455ContraGroupAUnitLevel4Speed: equ 2456ContraGroupAUnitLevel4Growth: equ 4457ContraGroupAUnitLevel4CostGold: equ 300/10458ContraGroupAUnitLevel4CostGems: equ 00+Level4Unit459ContraGroupAUnitLevel4CostRubies: equ 0461ContraGroupAUnitLevel5Number: equ 45462ContraGroupAUnitLevel5Damage: equ 13463ContraGroupAUnitLevel5Attack: equ 13464ContraGroupAUnitLevel5Defense: equ 11465ContraGroupAUnitLevel5HP: equ 60466ContraGroupAUnitLevel5Speed: equ 7467ContraGroupAUnitLevel5Growth: equ 3468ContraGroupAUnitLevel5CostGold: equ 500/10469ContraGroupAUnitLevel5CostGems: equ 00+Level5Unit470ContraGroupAUnitLevel5CostRubies: equ 1472ContraGroupAUnitLevel6Number: equ 46473ContraGroupAUnitLevel6Damage: equ 18474ContraGroupAUnitLevel6Attack: equ 15475ContraGroupAUnitLevel6Defense: equ 12476ContraGroupAUnitLevel6HP: equ 70+50477ContraGroupAUnitLevel6Speed: equ 6478ContraGroupAUnitLevel6Growth: equ 1479ContraGroupAUnitLevel6CostGold: equ 750/10480ContraGroupAUnitLevel6CostGems: equ 02+Level6Unit481ContraGroupAUnitLevel6CostRubies: equ 0488ContraGroupBUnitLevel1Number: equ 44489ContraGroupBUnitLevel1Damage: equ 2490ContraGroupBUnitLevel1Attack: equ 3491ContraGroupBUnitLevel1Defense: equ 5492ContraGroupBUnitLevel1HP: equ 6493ContraGroupBUnitLevel1Speed: equ 4494ContraGroupBUnitLevel1Growth: equ 13495ContraGroupBUnitLevel1CostGold: equ 50/10496ContraGroupBUnitLevel1CostGems: equ 00+Level1Unit497ContraGroupBUnitLevel1CostRubies: equ 0499ContraGroupBUnitLevel2Number: equ 36 500ContraGroupBUnitLevel2Damage: equ 3 501ContraGroupBUnitLevel2Attack: equ 4 502ContraGroupBUnitLevel2Defense: equ 6503ContraGroupBUnitLevel2HP: equ 15504ContraGroupBUnitLevel2Speed: equ 4505ContraGroupBUnitLevel2Growth: equ 8506ContraGroupBUnitLevel2CostGold: equ 110/10507ContraGroupBUnitLevel2CostGems: equ 00+Level2Unit508ContraGroupBUnitLevel2CostRubies: equ 0510ContraGroupBUnitLevel3Number: equ 43 511ContraGroupBUnitLevel3Damage: equ 4512ContraGroupBUnitLevel3Attack: equ 7513ContraGroupBUnitLevel3Defense: equ 8514ContraGroupBUnitLevel3HP: equ 22515ContraGroupBUnitLevel3Speed: equ 9516ContraGroupBUnitLevel3Growth: equ 7517ContraGroupBUnitLevel3CostGold: equ 220/10518ContraGroupBUnitLevel3CostGems: equ 00+Level3Unit519ContraGroupBUnitLevel3CostRubies: equ 0521ContraGroupBUnitLevel4Number: equ 37 522ContraGroupBUnitLevel4Damage: equ 8523ContraGroupBUnitLevel4Attack: equ 11524ContraGroupBUnitLevel4Defense: equ 11525ContraGroupBUnitLevel4HP: equ 35526ContraGroupBUnitLevel4Speed: equ 6527ContraGroupBUnitLevel4Growth: equ 5528ContraGroupBUnitLevel4CostGold: equ 330/10529ContraGroupBUnitLevel4CostGems: equ 00+Level4Unit530ContraGroupBUnitLevel4CostRubies: equ 0532ContraGroupBUnitLevel5Number: equ 39 533ContraGroupBUnitLevel5Damage: equ 12 534ContraGroupBUnitLevel5Attack: equ 9 535ContraGroupBUnitLevel5Defense: equ 14536ContraGroupBUnitLevel5HP: equ 50537ContraGroupBUnitLevel5Speed: equ 5538ContraGroupBUnitLevel5Growth: equ 3539ContraGroupBUnitLevel5CostGold: equ 530/10540ContraGroupBUnitLevel5CostGems: equ 01+Level5Unit541ContraGroupBUnitLevel5CostRubies: equ 0543ContraGroupBUnitLevel6Number: equ 40 544ContraGroupBUnitLevel6Damage: equ 15 545ContraGroupBUnitLevel6Attack: equ 13 546ContraGroupBUnitLevel6Defense: equ 13547ContraGroupBUnitLevel6HP: equ 70+50548ContraGroupBUnitLevel6Speed: equ 7549ContraGroupBUnitLevel6Growth: equ 1550ContraGroupBUnitLevel6CostGold: equ 800/10551ContraGroupBUnitLevel6CostGems: equ 00+Level6Unit552ContraGroupBUnitLevel6CostRubies: equ 2559GoemonUnitLevel1Number: equ 62560GoemonUnitLevel1Damage: equ 2561GoemonUnitLevel1Attack: equ 2562GoemonUnitLevel1Defense: equ 3563GoemonUnitLevel1HP: equ 6564GoemonUnitLevel1Speed: equ 3565GoemonUnitLevel1Growth: equ 20566GoemonUnitLevel1CostGold: equ 30/10567GoemonUnitLevel1CostGems: equ 00+Level1Unit568GoemonUnitLevel1CostRubies: equ 0570GoemonUnitLevel2Number: equ 58571GoemonUnitLevel2Damage: equ 4572GoemonUnitLevel2Attack: equ 9573GoemonUnitLevel2Defense: equ 9574GoemonUnitLevel2HP: equ 25575GoemonUnitLevel2Speed: equ 7576GoemonUnitLevel2Growth: equ 6577GoemonUnitLevel2CostGold: equ 250/10578GoemonUnitLevel2CostGems: equ 00+Level2Unit579GoemonUnitLevel2CostRubies: equ 0581GoemonUnitLevel3Number: equ 60582GoemonUnitLevel3Damage: equ 5583GoemonUnitLevel3Attack: equ 8584GoemonUnitLevel3Defense: equ 10585GoemonUnitLevel3HP: equ 30586GoemonUnitLevel3Speed: equ 5587GoemonUnitLevel3Growth: equ 6588GoemonUnitLevel3CostGold: equ 300/10589GoemonUnitLevel3CostGems: equ 00+Level3Unit590GoemonUnitLevel3CostRubies: equ 0592GoemonUnitLevel4Number: equ 56593GoemonUnitLevel4Damage: equ 6594GoemonUnitLevel4Attack: equ 10595GoemonUnitLevel4Defense: equ 8596GoemonUnitLevel4HP: equ 35597GoemonUnitLevel4Speed: equ 6598GoemonUnitLevel4Growth: equ 5599GoemonUnitLevel4CostGold: equ 350/10600GoemonUnitLevel4CostGems: equ 00+Level4Unit601GoemonUnitLevel4CostRubies: equ 0603GoemonUnitLevel5Number: equ 61604GoemonUnitLevel5Damage: equ 9605GoemonUnitLevel5Attack: equ 12606GoemonUnitLevel5Defense: equ 10607GoemonUnitLevel5HP: equ 40608GoemonUnitLevel5Speed: equ 4609GoemonUnitLevel5Growth: equ 4610GoemonUnitLevel5CostGold: equ 400/10611GoemonUnitLevel5CostGems: equ 00+Level5Unit612GoemonUnitLevel5CostRubies: equ 0614GoemonUnitLevel6Number: equ 59615GoemonUnitLevel6Damage: equ 15616GoemonUnitLevel6Attack: equ 15617GoemonUnitLevel6Defense: equ 13618GoemonUnitLevel6HP: equ 75+50619GoemonUnitLevel6Speed: equ 7620GoemonUnitLevel6Growth: equ 1621GoemonUnitLevel6CostGold: equ 750/10622GoemonUnitLevel6CostGems: equ 02+Level6Unit623GoemonUnitLevel6CostRubies: equ 0629GolvelliusUnitLevel1Number: equ 80630GolvelliusUnitLevel1Damage: equ 2631GolvelliusUnitLevel1Attack: equ 4632GolvelliusUnitLevel1Defense: equ 2633GolvelliusUnitLevel1HP: equ 4634GolvelliusUnitLevel1Speed: equ 5635GolvelliusUnitLevel1Growth: equ 15636GolvelliusUnitLevel1CostGold: equ 50/10637GolvelliusUnitLevel1CostGems: equ 00+Level1Unit638GolvelliusUnitLevel1CostRubies: equ 0640GolvelliusUnitLevel2Number: equ 81641GolvelliusUnitLevel2Damage: equ 3642GolvelliusUnitLevel2Attack: equ 6643GolvelliusUnitLevel2Defense: equ 5644GolvelliusUnitLevel2HP: equ 15645GolvelliusUnitLevel2Speed: equ 6646GolvelliusUnitLevel2Growth: equ 8647GolvelliusUnitLevel2CostGold: equ 150/10648GolvelliusUnitLevel2CostGems: equ 00+Level2Unit649GolvelliusUnitLevel2CostRubies: equ 0651GolvelliusUnitLevel3Number: equ 83652GolvelliusUnitLevel3Damage: equ 5653GolvelliusUnitLevel3Attack: equ 7654GolvelliusUnitLevel3Defense: equ 7655GolvelliusUnitLevel3HP: equ 30656GolvelliusUnitLevel3Speed: equ 5657GolvelliusUnitLevel3Growth: equ 7658GolvelliusUnitLevel3CostGold: equ 300/10659GolvelliusUnitLevel3CostGems: equ 00+Level3Unit660GolvelliusUnitLevel3CostRubies: equ 0662GolvelliusUnitLevel4Number: equ 84663GolvelliusUnitLevel4Damage: equ 7664GolvelliusUnitLevel4Attack: equ 12665GolvelliusUnitLevel4Defense: equ 10666GolvelliusUnitLevel4HP: equ 32667GolvelliusUnitLevel4Speed: equ 8668GolvelliusUnitLevel4Growth: equ 4669GolvelliusUnitLevel4CostGold: equ 400/10670GolvelliusUnitLevel4CostGems: equ 00+Level4Unit671GolvelliusUnitLevel4CostRubies: equ 0673GolvelliusUnitLevel5Number: equ 85674GolvelliusUnitLevel5Damage: equ 9675GolvelliusUnitLevel5Attack: equ 14676GolvelliusUnitLevel5Defense: equ 7677GolvelliusUnitLevel5HP: equ 40678GolvelliusUnitLevel5Speed: equ 7679GolvelliusUnitLevel5Growth: equ 3680GolvelliusUnitLevel5CostGold: equ 500/10681GolvelliusUnitLevel5CostGems: equ 00+Level5Unit682GolvelliusUnitLevel5CostRubies: equ 0684GolvelliusUnitLevel6Number: equ 86685GolvelliusUnitLevel6Damage: equ 13686GolvelliusUnitLevel6Attack: equ 15687GolvelliusUnitLevel6Defense: equ 12688GolvelliusUnitLevel6HP: equ 160+50689GolvelliusUnitLevel6Speed: equ 5690GolvelliusUnitLevel6Growth: equ 1691GolvelliusUnitLevel6CostGold: equ 850/10692GolvelliusUnitLevel6CostGems: equ 00+Level6Unit693GolvelliusUnitLevel6CostRubies: equ 2697Ys3UnitLevel1Number: equ 100698Ys3UnitLevel1Damage: equ 3699Ys3UnitLevel1Attack: equ 3700Ys3UnitLevel1Defense: equ 4701Ys3UnitLevel1HP: equ 11702Ys3UnitLevel1Speed: equ 4703Ys3UnitLevel1Growth: equ 14704Ys3UnitLevel1CostGold: equ 60/10705Ys3UnitLevel1CostGems: equ 00+Level1Unit706Ys3UnitLevel1CostRubies: equ 0708Ys3UnitLevel2Number: equ 99709Ys3UnitLevel2Damage: equ 3710Ys3UnitLevel2Attack: equ 6711Ys3UnitLevel2Defense: equ 5712Ys3UnitLevel2HP: equ 11713Ys3UnitLevel2Speed: equ 6714Ys3UnitLevel2Growth: equ 8715Ys3UnitLevel2CostGold: equ 90/10716Ys3UnitLevel2CostGems: equ 00+Level2Unit717Ys3UnitLevel2CostRubies: equ 0719Ys3UnitLevel3Number: equ 97720Ys3UnitLevel3Damage: equ 5721Ys3UnitLevel3Attack: equ 8722Ys3UnitLevel3Defense: equ 9723Ys3UnitLevel3HP: equ 28724Ys3UnitLevel3Speed: equ 6725Ys3UnitLevel3Growth: equ 7726Ys3UnitLevel3CostGold: equ 220/10727Ys3UnitLevel3CostGems: equ 00+Level3Unit728Ys3UnitLevel3CostRubies: equ 0730Ys3UnitLevel4Number: equ 96731Ys3UnitLevel4Damage: equ 8732Ys3UnitLevel4Attack: equ 10733Ys3UnitLevel4Defense: equ 11734Ys3UnitLevel4HP: equ 35735Ys3UnitLevel4Speed: equ 5736Ys3UnitLevel4Growth: equ 4737Ys3UnitLevel4CostGold: equ 300/10738Ys3UnitLevel4CostGems: equ 00+Level4Unit739Ys3UnitLevel4CostRubies: equ 0741Ys3UnitLevel5Number: equ 95742Ys3UnitLevel5Damage: equ 11743Ys3UnitLevel5Attack: equ 12744Ys3UnitLevel5Defense: equ 11745Ys3UnitLevel5HP: equ 32746Ys3UnitLevel5Speed: equ 5747Ys3UnitLevel5Growth: equ 3748Ys3UnitLevel5CostGold: equ 420/10749Ys3UnitLevel5CostGems: equ 00+Level5Unit750Ys3UnitLevel5CostRubies: equ 0752Ys3UnitLevel6Number: equ 101753Ys3UnitLevel6Damage: equ 19754Ys3UnitLevel6Attack: equ 15755Ys3UnitLevel6Defense: equ 12756Ys3UnitLevel6HP: equ 100+50757Ys3UnitLevel6Speed: equ 10758Ys3UnitLevel6Growth: equ 1759Ys3UnitLevel6CostGold: equ 1000/10760Ys3UnitLevel6CostGems: equ 01+Level6Unit761Ys3UnitLevel6CostRubies: equ 0769AkanbeDragonGroupAUnitLevel1Number: equ 117770AkanbeDragonGroupAUnitLevel1Damage: equ 3771AkanbeDragonGroupAUnitLevel1Attack: equ 5772AkanbeDragonGroupAUnitLevel1Defense: equ 2773AkanbeDragonGroupAUnitLevel1HP: equ 5774AkanbeDragonGroupAUnitLevel1Speed: equ 3775AkanbeDragonGroupAUnitLevel1Growth: equ 18776AkanbeDragonGroupAUnitLevel1CostGold: equ 50/10777AkanbeDragonGroupAUnitLevel1CostGems: equ 00+Level1Unit778AkanbeDragonGroupAUnitLevel1CostRubies: equ 0780AkanbeDragonGroupAUnitLevel2Number: equ 113781AkanbeDragonGroupAUnitLevel2Damage: equ 4782AkanbeDragonGroupAUnitLevel2Attack: equ 4783AkanbeDragonGroupAUnitLevel2Defense: equ 4784AkanbeDragonGroupAUnitLevel2HP: equ 12785AkanbeDragonGroupAUnitLevel2Speed: equ 6786AkanbeDragonGroupAUnitLevel2Growth: equ 9787AkanbeDragonGroupAUnitLevel2CostGold: equ 120/10788AkanbeDragonGroupAUnitLevel2CostGems: equ 00+Level2Unit789AkanbeDragonGroupAUnitLevel2CostRubies: equ 0791AkanbeDragonGroupAUnitLevel3Number: equ 115792AkanbeDragonGroupAUnitLevel3Damage: equ 5793AkanbeDragonGroupAUnitLevel3Attack: equ 10794AkanbeDragonGroupAUnitLevel3Defense: equ 4795AkanbeDragonGroupAUnitLevel3HP: equ 15796AkanbeDragonGroupAUnitLevel3Speed: equ 4797AkanbeDragonGroupAUnitLevel3Growth: equ 6798AkanbeDragonGroupAUnitLevel3CostGold: equ 170/10799AkanbeDragonGroupAUnitLevel3CostGems: equ 00+Level3Unit800AkanbeDragonGroupAUnitLevel3CostRubies: equ 0802AkanbeDragonGroupAUnitLevel4Number: equ 118803AkanbeDragonGroupAUnitLevel4Damage: equ 7804AkanbeDragonGroupAUnitLevel4Attack: equ 11805AkanbeDragonGroupAUnitLevel4Defense: equ 7806AkanbeDragonGroupAUnitLevel4HP: equ 40807AkanbeDragonGroupAUnitLevel4Speed: equ 8808AkanbeDragonGroupAUnitLevel4Growth: equ 4809AkanbeDragonGroupAUnitLevel4CostGold: equ 320/10810AkanbeDragonGroupAUnitLevel4CostGems: equ 00+Level4Unit811AkanbeDragonGroupAUnitLevel4CostRubies: equ 0813AkanbeDragonGroupAUnitLevel5Number: equ 111814AkanbeDragonGroupAUnitLevel5Damage: equ 11815AkanbeDragonGroupAUnitLevel5Attack: equ 13816AkanbeDragonGroupAUnitLevel5Defense: equ 11817AkanbeDragonGroupAUnitLevel5HP: equ 65818AkanbeDragonGroupAUnitLevel5Speed: equ 7819AkanbeDragonGroupAUnitLevel5Growth: equ 3820AkanbeDragonGroupAUnitLevel5CostGold: equ 500/10821AkanbeDragonGroupAUnitLevel5CostGems: equ 00+Level5Unit822AkanbeDragonGroupAUnitLevel5CostRubies: equ 1824AkanbeDragonGroupAUnitLevel6Number: equ 112825AkanbeDragonGroupAUnitLevel6Damage: equ 20826AkanbeDragonGroupAUnitLevel6Attack: equ 14827AkanbeDragonGroupAUnitLevel6Defense: equ 12828AkanbeDragonGroupAUnitLevel6HP: equ 70+50829AkanbeDragonGroupAUnitLevel6Speed: equ 6830AkanbeDragonGroupAUnitLevel6Growth: equ 1831AkanbeDragonGroupAUnitLevel6CostGold: equ 750/10832AkanbeDragonGroupAUnitLevel6CostGems: equ 00+Level6Unit833AkanbeDragonGroupAUnitLevel6CostRubies: equ 2840AkanbeDragonGroupBUnitLevel1Number: equ 119841AkanbeDragonGroupBUnitLevel1Damage: equ 2842AkanbeDragonGroupBUnitLevel1Attack: equ 2843AkanbeDragonGroupBUnitLevel1Defense: equ 5844AkanbeDragonGroupBUnitLevel1HP: equ 6845AkanbeDragonGroupBUnitLevel1Speed: equ 4846AkanbeDragonGroupBUnitLevel1Growth: equ 11847AkanbeDragonGroupBUnitLevel1CostGold: equ 50/10848AkanbeDragonGroupBUnitLevel1CostGems: equ 00+Level1Unit849AkanbeDragonGroupBUnitLevel1CostRubies: equ 0851AkanbeDragonGroupBUnitLevel2Number: equ 114852AkanbeDragonGroupBUnitLevel2Damage: equ 3853AkanbeDragonGroupBUnitLevel2Attack: equ 6854AkanbeDragonGroupBUnitLevel2Defense: equ 6855AkanbeDragonGroupBUnitLevel2HP: equ 13856AkanbeDragonGroupBUnitLevel2Speed: equ 5857AkanbeDragonGroupBUnitLevel2Growth: equ 9858AkanbeDragonGroupBUnitLevel2CostGold: equ 110/10859AkanbeDragonGroupBUnitLevel2CostGems: equ 00+Level2Unit860AkanbeDragonGroupBUnitLevel2CostRubies: equ 0862AkanbeDragonGroupBUnitLevel3Number: equ 116863AkanbeDragonGroupBUnitLevel3Damage: equ 5864AkanbeDragonGroupBUnitLevel3Attack: equ 7865AkanbeDragonGroupBUnitLevel3Defense: equ 7866AkanbeDragonGroupBUnitLevel3HP: equ 21867AkanbeDragonGroupBUnitLevel3Speed: equ 5868AkanbeDragonGroupBUnitLevel3Growth: equ 8869AkanbeDragonGroupBUnitLevel3CostGold: equ 230/10870AkanbeDragonGroupBUnitLevel3CostGems: equ 00+Level3Unit871AkanbeDragonGroupBUnitLevel3CostRubies: equ 0873AkanbeDragonGroupBUnitLevel4Number: equ 120874AkanbeDragonGroupBUnitLevel4Damage: equ 9875AkanbeDragonGroupBUnitLevel4Attack: equ 9876AkanbeDragonGroupBUnitLevel4Defense: equ 11877AkanbeDragonGroupBUnitLevel4HP: equ 40878AkanbeDragonGroupBUnitLevel4Speed: equ 5879AkanbeDragonGroupBUnitLevel4Growth: equ 4880AkanbeDragonGroupBUnitLevel4CostGold: equ 340/10881AkanbeDragonGroupBUnitLevel4CostGems: equ 00+Level4Unit882AkanbeDragonGroupBUnitLevel4CostRubies: equ 0884AkanbeDragonGroupBUnitLevel5Number: equ 158885AkanbeDragonGroupBUnitLevel5Damage: equ 14886AkanbeDragonGroupBUnitLevel5Attack: equ 11887AkanbeDragonGroupBUnitLevel5Defense: equ 12888AkanbeDragonGroupBUnitLevel5HP: equ 100889AkanbeDragonGroupBUnitLevel5Speed: equ 5890AkanbeDragonGroupBUnitLevel5Growth: equ 3891AkanbeDragonGroupBUnitLevel5CostGold: equ 530/10892AkanbeDragonGroupBUnitLevel5CostGems: equ 00+Level5Unit893AkanbeDragonGroupBUnitLevel5CostRubies: equ 1895AkanbeDragonGroupBUnitLevel6Number: equ 121896AkanbeDragonGroupBUnitLevel6Damage: equ 22897AkanbeDragonGroupBUnitLevel6Attack: equ 15898AkanbeDragonGroupBUnitLevel6Defense: equ 12899AkanbeDragonGroupBUnitLevel6HP: equ 170+50900AkanbeDragonGroupBUnitLevel6Speed: equ 6901AkanbeDragonGroupBUnitLevel6Growth: equ 1902AkanbeDragonGroupBUnitLevel6CostGold: equ 800/10903AkanbeDragonGroupBUnitLevel6CostGems: equ 02+Level6Unit904AkanbeDragonGroupBUnitLevel6CostRubies: equ 0911YieArKungFuUnitLevel1Number: equ 102912YieArKungFuUnitLevel1Damage: equ 3913YieArKungFuUnitLevel1Attack: equ 5914YieArKungFuUnitLevel1Defense: equ 5915YieArKungFuUnitLevel1HP: equ 12916YieArKungFuUnitLevel1Speed: equ 4917YieArKungFuUnitLevel1Growth: equ 14918YieArKungFuUnitLevel1CostGold: equ 80/10919YieArKungFuUnitLevel1CostGems: equ 00+Level1Unit920YieArKungFuUnitLevel1CostRubies: equ 0922YieArKungFuUnitLevel2Number: equ 103923YieArKungFuUnitLevel2Damage: equ 4924YieArKungFuUnitLevel2Attack: equ 6925YieArKungFuUnitLevel2Defense: equ 6926YieArKungFuUnitLevel2HP: equ 14927YieArKungFuUnitLevel2Speed: equ 6928YieArKungFuUnitLevel2Growth: equ 8929YieArKungFuUnitLevel2CostGold: equ 110/10930YieArKungFuUnitLevel2CostGems: equ 00+Level2Unit931YieArKungFuUnitLevel2CostRubies: equ 0933YieArKungFuUnitLevel3Number: equ 104934YieArKungFuUnitLevel3Damage: equ 5935YieArKungFuUnitLevel3Attack: equ 7936YieArKungFuUnitLevel3Defense: equ 6937YieArKungFuUnitLevel3HP: equ 20938YieArKungFuUnitLevel3Speed: equ 3939YieArKungFuUnitLevel3Growth: equ 7940YieArKungFuUnitLevel3CostGold: equ 250/10941YieArKungFuUnitLevel3CostGems: equ 00+Level3Unit942YieArKungFuUnitLevel3CostRubies: equ 0944YieArKungFuUnitLevel4Number: equ 105945YieArKungFuUnitLevel4Damage: equ 7946YieArKungFuUnitLevel4Attack: equ 8947YieArKungFuUnitLevel4Defense: equ 9948YieArKungFuUnitLevel4HP: equ 37949YieArKungFuUnitLevel4Speed: equ 5950YieArKungFuUnitLevel4Growth: equ 4951YieArKungFuUnitLevel4CostGold: equ 320/10952YieArKungFuUnitLevel4CostGems: equ 00+Level4Unit953YieArKungFuUnitLevel4CostRubies: equ 0955YieArKungFuUnitLevel5Number: equ 106956YieArKungFuUnitLevel5Damage: equ 15957YieArKungFuUnitLevel5Attack: equ 12958YieArKungFuUnitLevel5Defense: equ 10959YieArKungFuUnitLevel5HP: equ 40960YieArKungFuUnitLevel5Speed: equ 7961YieArKungFuUnitLevel5Growth: equ 3962YieArKungFuUnitLevel5CostGold: equ 420/10963YieArKungFuUnitLevel5CostGems: equ 00+Level5Unit964YieArKungFuUnitLevel5CostRubies: equ 0966YieArKungFuUnitLevel6Number: equ 110967YieArKungFuUnitLevel6Damage: equ 18968YieArKungFuUnitLevel6Attack: equ 15969YieArKungFuUnitLevel6Defense: equ 15970YieArKungFuUnitLevel6HP: equ 120+50971YieArKungFuUnitLevel6Speed: equ 8972YieArKungFuUnitLevel6Growth: equ 1973YieArKungFuUnitLevel6CostGold: equ 1200/10974YieArKungFuUnitLevel6CostGems: equ 02+Level6Unit975YieArKungFuUnitLevel6CostRubies: equ 0981BubbleBobbleGroupAUnitLevel1Number: equ 9982BubbleBobbleGroupAUnitLevel1Damage: equ 2983BubbleBobbleGroupAUnitLevel1Attack: equ 4984BubbleBobbleGroupAUnitLevel1Defense: equ 4985BubbleBobbleGroupAUnitLevel1HP: equ 10986BubbleBobbleGroupAUnitLevel1Speed: equ 4987BubbleBobbleGroupAUnitLevel1Growth: equ 14988BubbleBobbleGroupAUnitLevel1CostGold: equ 60/10989BubbleBobbleGroupAUnitLevel1CostGems: equ 00+Level1Unit990BubbleBobbleGroupAUnitLevel1CostRubies: equ 0992BubbleBobbleGroupAUnitLevel2Number: equ 15993BubbleBobbleGroupAUnitLevel2Damage: equ 3994BubbleBobbleGroupAUnitLevel2Attack: equ 5995BubbleBobbleGroupAUnitLevel2Defense: equ 4996BubbleBobbleGroupAUnitLevel2HP: equ 11997BubbleBobbleGroupAUnitLevel2Speed: equ 4998BubbleBobbleGroupAUnitLevel2Growth: equ 9999BubbleBobbleGroupAUnitLevel2CostGold: equ 100/101000BubbleBobbleGroupAUnitLevel2CostGems: equ 00+Level2Unit1001BubbleBobbleGroupAUnitLevel2CostRubies: equ 01003BubbleBobbleGroupAUnitLevel3Number: equ 111004BubbleBobbleGroupAUnitLevel3Damage: equ 51005BubbleBobbleGroupAUnitLevel3Attack: equ 81006BubbleBobbleGroupAUnitLevel3Defense: equ 81007BubbleBobbleGroupAUnitLevel3HP: equ 251008BubbleBobbleGroupAUnitLevel3Speed: equ 61009BubbleBobbleGroupAUnitLevel3Growth: equ 71010BubbleBobbleGroupAUnitLevel3CostGold: equ 160/101011BubbleBobbleGroupAUnitLevel3CostGems: equ 00+Level3Unit1012BubbleBobbleGroupAUnitLevel3CostRubies: equ 01014BubbleBobbleGroupAUnitLevel4Number: equ 121015BubbleBobbleGroupAUnitLevel4Damage: equ 61016BubbleBobbleGroupAUnitLevel4Attack: equ 101017BubbleBobbleGroupAUnitLevel4Defense: equ 121018BubbleBobbleGroupAUnitLevel4HP: equ 351019BubbleBobbleGroupAUnitLevel4Speed: equ 51020BubbleBobbleGroupAUnitLevel4Growth: equ 41021BubbleBobbleGroupAUnitLevel4CostGold: equ 300/101022BubbleBobbleGroupAUnitLevel4CostGems: equ 00+Level4Unit1023BubbleBobbleGroupAUnitLevel4CostRubies: equ 01025BubbleBobbleGroupAUnitLevel5Number: equ 81026BubbleBobbleGroupAUnitLevel5Damage: equ 121027BubbleBobbleGroupAUnitLevel5Attack: equ 111028BubbleBobbleGroupAUnitLevel5Defense: equ 131029BubbleBobbleGroupAUnitLevel5HP: equ 451030BubbleBobbleGroupAUnitLevel5Speed: equ 71031BubbleBobbleGroupAUnitLevel5Growth: equ 31032BubbleBobbleGroupAUnitLevel5CostGold: equ 500/101033BubbleBobbleGroupAUnitLevel5CostGems: equ 00+Level5Unit1034BubbleBobbleGroupAUnitLevel5CostRubies: equ 11036BubbleBobbleGroupAUnitLevel6Number: equ 711037BubbleBobbleGroupAUnitLevel6Damage: equ 241038BubbleBobbleGroupAUnitLevel6Attack: equ 131039BubbleBobbleGroupAUnitLevel6Defense: equ 131040BubbleBobbleGroupAUnitLevel6HP: equ 160+501041BubbleBobbleGroupAUnitLevel6Speed: equ 61042BubbleBobbleGroupAUnitLevel6Growth: equ 11043BubbleBobbleGroupAUnitLevel6CostGold: equ 700/101044BubbleBobbleGroupAUnitLevel6CostGems: equ 00+Level6Unit1045BubbleBobbleGroupAUnitLevel6CostRubies: equ 31052BubbleBobbleGroupBUnitLevel1Number: equ 131053BubbleBobbleGroupBUnitLevel1Damage: equ 31054BubbleBobbleGroupBUnitLevel1Attack: equ 31055BubbleBobbleGroupBUnitLevel1Defense: equ 51056BubbleBobbleGroupBUnitLevel1HP: equ 61057BubbleBobbleGroupBUnitLevel1Speed: equ 41058BubbleBobbleGroupBUnitLevel1Growth: equ 111059BubbleBobbleGroupBUnitLevel1CostGold: equ 60/101060BubbleBobbleGroupBUnitLevel1CostGems: equ 00+Level1Unit1061BubbleBobbleGroupBUnitLevel1CostRubies: equ 01063BubbleBobbleGroupBUnitLevel2Number: equ 141064BubbleBobbleGroupBUnitLevel2Damage: equ 41065BubbleBobbleGroupBUnitLevel2Attack: equ 51066BubbleBobbleGroupBUnitLevel2Defense: equ 61067BubbleBobbleGroupBUnitLevel2HP: equ 141068BubbleBobbleGroupBUnitLevel2Speed: equ 51069BubbleBobbleGroupBUnitLevel2Growth: equ 91070BubbleBobbleGroupBUnitLevel2CostGold: equ 110/101071BubbleBobbleGroupBUnitLevel2CostGems: equ 00+Level2Unit1072BubbleBobbleGroupBUnitLevel2CostRubies: equ 01074BubbleBobbleGroupBUnitLevel3Number: equ 101075BubbleBobbleGroupBUnitLevel3Damage: equ 51076BubbleBobbleGroupBUnitLevel3Attack: equ 81077BubbleBobbleGroupBUnitLevel3Defense: equ 71078BubbleBobbleGroupBUnitLevel3HP: equ 211079BubbleBobbleGroupBUnitLevel3Speed: equ 51080BubbleBobbleGroupBUnitLevel3Growth: equ 81081BubbleBobbleGroupBUnitLevel3CostGold: equ 250/101082BubbleBobbleGroupBUnitLevel3CostGems: equ 00+Level3Unit1083BubbleBobbleGroupBUnitLevel3CostRubies: equ 01085BubbleBobbleGroupBUnitLevel4Number: equ 71086BubbleBobbleGroupBUnitLevel4Damage: equ 71087BubbleBobbleGroupBUnitLevel4Attack: equ 91088BubbleBobbleGroupBUnitLevel4Defense: equ 101089BubbleBobbleGroupBUnitLevel4HP: equ 401090BubbleBobbleGroupBUnitLevel4Speed: equ 51091BubbleBobbleGroupBUnitLevel4Growth: equ 41092BubbleBobbleGroupBUnitLevel4CostGold: equ 340/101093BubbleBobbleGroupBUnitLevel4CostGems: equ 00+Level4Unit1094BubbleBobbleGroupBUnitLevel4CostRubies: equ 01096BubbleBobbleGroupBUnitLevel5Number: equ 171097BubbleBobbleGroupBUnitLevel5Damage: equ 151098BubbleBobbleGroupBUnitLevel5Attack: equ 101099BubbleBobbleGroupBUnitLevel5Defense: equ 121100BubbleBobbleGroupBUnitLevel5HP: equ 1201101BubbleBobbleGroupBUnitLevel5Speed: equ 51102BubbleBobbleGroupBUnitLevel5Growth: equ 31103BubbleBobbleGroupBUnitLevel5CostGold: equ 530/101104BubbleBobbleGroupBUnitLevel5CostGems: equ 01+Level5Unit1105BubbleBobbleGroupBUnitLevel5CostRubies: equ 01107BubbleBobbleGroupBUnitLevel6Number: equ 161108BubbleBobbleGroupBUnitLevel6Damage: equ 251109BubbleBobbleGroupBUnitLevel6Attack: equ 121110BubbleBobbleGroupBUnitLevel6Defense: equ 121111BubbleBobbleGroupBUnitLevel6HP: equ 200+501112BubbleBobbleGroupBUnitLevel6Speed: equ 61113BubbleBobbleGroupBUnitLevel6Growth: equ 11114BubbleBobbleGroupBUnitLevel6CostGold: equ 800/101115BubbleBobbleGroupBUnitLevel6CostGems: equ 03+Level6Unit1116BubbleBobbleGroupBUnitLevel6CostRubies: equ 011211122SolidSnakeUnitLevel1Number: equ 90 1123SolidSnakeUnitLevel1Damage: equ 21124SolidSnakeUnitLevel1Attack: equ 21125SolidSnakeUnitLevel1Defense: equ 51126SolidSnakeUnitLevel1HP: equ 61127SolidSnakeUnitLevel1Speed: equ 61128SolidSnakeUnitLevel1Growth: equ 111129SolidSnakeUnitLevel1CostGold: equ 60/101130SolidSnakeUnitLevel1CostGems: equ 00+Level1Unit1131SolidSnakeUnitLevel1CostRubies: equ 011321133SolidSnakeUnitLevel2Number: equ 911134SolidSnakeUnitLevel2Damage: equ 31135SolidSnakeUnitLevel2Attack: equ 51136SolidSnakeUnitLevel2Defense: equ 61137SolidSnakeUnitLevel2HP: equ 131138SolidSnakeUnitLevel2Speed: equ 81139SolidSnakeUnitLevel2Growth: equ 91140SolidSnakeUnitLevel2CostGold: equ 110/101141SolidSnakeUnitLevel2CostGems: equ 00+Level2Unit1142SolidSnakeUnitLevel2CostRubies: equ 011431144SolidSnakeUnitLevel3Number: equ 941145SolidSnakeUnitLevel3Damage: equ 51146SolidSnakeUnitLevel3Attack: equ 41147SolidSnakeUnitLevel3Defense: equ 71148SolidSnakeUnitLevel3HP: equ 211149SolidSnakeUnitLevel3Speed: equ 51150SolidSnakeUnitLevel3Growth: equ 81151SolidSnakeUnitLevel3CostGold: equ 250/101152SolidSnakeUnitLevel3CostGems: equ 00+Level3Unit1153SolidSnakeUnitLevel3CostRubies: equ 011541155SolidSnakeUnitLevel4Number: equ 921156SolidSnakeUnitLevel4Damage: equ 81157SolidSnakeUnitLevel4Attack: equ 61158SolidSnakeUnitLevel4Defense: equ 101159SolidSnakeUnitLevel4HP: equ 401160SolidSnakeUnitLevel4Speed: equ 51161SolidSnakeUnitLevel4Growth: equ 41162SolidSnakeUnitLevel4CostGold: equ 340/101163SolidSnakeUnitLevel4CostGems: equ 00+Level4Unit1164SolidSnakeUnitLevel4CostRubies: equ 011651166SolidSnakeUnitLevel5Number: equ 931167SolidSnakeUnitLevel5Damage: equ 131168SolidSnakeUnitLevel5Attack: equ 81169SolidSnakeUnitLevel5Defense: equ 121170SolidSnakeUnitLevel5HP: equ 1201171SolidSnakeUnitLevel5Speed: equ 51172SolidSnakeUnitLevel5Growth: equ 31173SolidSnakeUnitLevel5CostGold: equ 530/101174SolidSnakeUnitLevel5CostGems: equ 01+Level5Unit1175SolidSnakeUnitLevel5CostRubies: equ 011771178DevaUnitLevel2Number: equ 1361179DevaUnitLevel2Damage: equ 41180DevaUnitLevel2Attack: equ 51181DevaUnitLevel2Defense: equ 61182DevaUnitLevel2HP: equ 131183DevaUnitLevel2Speed: equ 41184DevaUnitLevel2Growth: equ 91185DevaUnitLevel2CostGold: equ 110/101186DevaUnitLevel2CostGems: equ 00+Level2Unit1187DevaUnitLevel2CostRubies: equ 011881189DevaUnitLevel4Number: equ 1371190DevaUnitLevel4Damage: equ 91191DevaUnitLevel4Attack: equ 81192DevaUnitLevel4Defense: equ 71193DevaUnitLevel4HP: equ 301194DevaUnitLevel4Speed: equ 61195DevaUnitLevel4Growth: equ 51196DevaUnitLevel4CostGold: equ 250/101197DevaUnitLevel4CostGems: equ 00+Level3Unit1198DevaUnitLevel4CostRubies: equ 011991200DevaUnitLevel5Number: equ 1351201DevaUnitLevel5Damage: equ 131202DevaUnitLevel5Attack: equ 111203DevaUnitLevel5Defense: equ 121204DevaUnitLevel5HP: equ 551205DevaUnitLevel5Speed: equ 61206DevaUnitLevel5Growth: equ 21207DevaUnitLevel5CostGold: equ 440/101208DevaUnitLevel5CostGems: equ 00+Level4Unit1209DevaUnitLevel5CostRubies: equ 012111212Usas2UnitLevel4Number: equ 1391213Usas2UnitLevel4Damage: equ 91214Usas2UnitLevel4Attack: equ 101215Usas2UnitLevel4Defense: equ 71216Usas2UnitLevel4HP: equ 301217Usas2UnitLevel4Speed: equ 31218Usas2UnitLevel4Growth: equ 41219Usas2UnitLevel4CostGold: equ 300/101220Usas2UnitLevel4CostGems: equ 00+Level4Unit1221Usas2UnitLevel4CostRubies: equ 012221223Usas2UnitLevel5Number: equ 1381224Usas2UnitLevel5Damage: equ 171225Usas2UnitLevel5Attack: equ 171226Usas2UnitLevel5Defense: equ 71227Usas2UnitLevel5HP: equ 351228Usas2UnitLevel5Speed: equ 61229Usas2UnitLevel5Growth: equ 31230Usas2UnitLevel5CostGold: equ 500/101231Usas2UnitLevel5CostGems: equ 00+Level5Unit1232Usas2UnitLevel5CostRubies: equ 012351236KingsValley2UnitLevel1Number: equ 1511237KingsValley2UnitLevel1Damage: equ 31238KingsValley2UnitLevel1Attack: equ 41239KingsValley2UnitLevel1Defense: equ 31240KingsValley2UnitLevel1HP: equ 51241KingsValley2UnitLevel1Speed: equ 41242KingsValley2UnitLevel1Growth: equ 141243KingsValley2UnitLevel1CostGold: equ 50/101244KingsValley2UnitLevel1CostGems: equ 00+Level1Unit1245KingsValley2UnitLevel1CostRubies: equ 012461247KingsValley2UnitLevel2Number: equ 1521248KingsValley2UnitLevel2Damage: equ 41249KingsValley2UnitLevel2Attack: equ 61250KingsValley2UnitLevel2Defense: equ 51251KingsValley2UnitLevel2HP: equ 141252KingsValley2UnitLevel2Speed: equ 61253KingsValley2UnitLevel2Growth: equ 81254KingsValley2UnitLevel2CostGold: equ 130/101255KingsValley2UnitLevel2CostGems: equ 00+Level2Unit1256KingsValley2UnitLevel2CostRubies: equ 012571258KingsValley2UnitLevel3Number: equ 1501259KingsValley2UnitLevel3Damage: equ 51260KingsValley2UnitLevel3Attack: equ 91261KingsValley2UnitLevel3Defense: equ 71262KingsValley2UnitLevel3HP: equ 221263KingsValley2UnitLevel3Speed: equ 51264KingsValley2UnitLevel3Growth: equ 71265KingsValley2UnitLevel3CostGold: equ 250/101266KingsValley2UnitLevel3CostGems: equ 00+Level3Unit1267KingsValley2UnitLevel3CostRubies: equ 012681269KingsValley2UnitLevel4Number: equ 1491270KingsValley2UnitLevel4Damage: equ 81271KingsValley2UnitLevel4Attack: equ 101272KingsValley2UnitLevel4Defense: equ 71273KingsValley2UnitLevel4HP: equ 301274KingsValley2UnitLevel4Speed: equ 31275KingsValley2UnitLevel4Growth: equ 41276KingsValley2UnitLevel4CostGold: equ 300/101277KingsValley2UnitLevel4CostGems: equ 00+Level4Unit1278KingsValley2UnitLevel4CostRubies: equ 012821283ChukaTaisenUnitLevel1Number: equ 1821284ChukaTaisenUnitLevel1Damage: equ 21285ChukaTaisenUnitLevel1Attack: equ 41286ChukaTaisenUnitLevel1Defense: equ 31287ChukaTaisenUnitLevel1HP: equ 51288ChukaTaisenUnitLevel1Speed: equ 41289ChukaTaisenUnitLevel1Growth: equ 131290ChukaTaisenUnitLevel1CostGold: equ 50/101291ChukaTaisenUnitLevel1CostGems: equ 00+Level1Unit1292ChukaTaisenUnitLevel1CostRubies: equ 012931294ChukaTaisenUnitLevel2Number: equ 1831295ChukaTaisenUnitLevel2Damage: equ 31296ChukaTaisenUnitLevel2Attack: equ 41297ChukaTaisenUnitLevel2Defense: equ 51298ChukaTaisenUnitLevel2HP: equ 121299ChukaTaisenUnitLevel2Speed: equ 51300ChukaTaisenUnitLevel2Growth: equ 81301ChukaTaisenUnitLevel2CostGold: equ 130/101302ChukaTaisenUnitLevel2CostGems: equ 00+Level2Unit1303ChukaTaisenUnitLevel2CostRubies: equ 013041305ChukaTaisenUnitLevel3Number: equ 1841306ChukaTaisenUnitLevel3Damage: equ 51307ChukaTaisenUnitLevel3Attack: equ 91308ChukaTaisenUnitLevel3Defense: equ 71309ChukaTaisenUnitLevel3HP: equ 221310ChukaTaisenUnitLevel3Speed: equ 51311ChukaTaisenUnitLevel3Growth: equ 71312ChukaTaisenUnitLevel3CostGold: equ 250/101313ChukaTaisenUnitLevel3CostGems: equ 00+Level3Unit1314ChukaTaisenUnitLevel3CostRubies: equ 013151316ChukaTaisenUnitLevel4Number: equ 1851317ChukaTaisenUnitLevel4Damage: equ 71318ChukaTaisenUnitLevel4Attack: equ 101319ChukaTaisenUnitLevel4Defense: equ 71320ChukaTaisenUnitLevel4HP: equ 301321ChukaTaisenUnitLevel4Speed: equ 31322ChukaTaisenUnitLevel4Growth: equ 41323ChukaTaisenUnitLevel4CostGold: equ 300/101324ChukaTaisenUnitLevel4CostGems: equ 00+Level4Unit1325ChukaTaisenUnitLevel4CostRubies: equ 013261327ChukaTaisenUnitLevel5Number: equ 1861328ChukaTaisenUnitLevel5Damage: equ 121329ChukaTaisenUnitLevel5Attack: equ 101330ChukaTaisenUnitLevel5Defense: equ 121331ChukaTaisenUnitLevel5HP: equ 1201332ChukaTaisenUnitLevel5Speed: equ 51333ChukaTaisenUnitLevel5Growth: equ 31334ChukaTaisenUnitLevel5CostGold: equ 530/101335ChukaTaisenUnitLevel5CostGems: equ 01+Level5Unit1336ChukaTaisenUnitLevel5CostRubies: equ 013371338ChukaTaisenUnitLevel6Number: equ 1871339ChukaTaisenUnitLevel6Damage: equ 181340ChukaTaisenUnitLevel6Attack: equ 131341ChukaTaisenUnitLevel6Defense: equ 131342ChukaTaisenUnitLevel6HP: equ 185+501343ChukaTaisenUnitLevel6Speed: equ 61344ChukaTaisenUnitLevel6Growth: equ 11345ChukaTaisenUnitLevel6CostGold: equ 800/101346ChukaTaisenUnitLevel6CostGems: equ 03+Level6Unit1347ChukaTaisenUnitLevel6CostRubies: equ 01355RandomAUnitLevel1Number: equ 301356RandomAUnitLevel1Damage: equ 21357RandomAUnitLevel1Attack: equ 41358RandomAUnitLevel1Defense: equ 51359RandomAUnitLevel1HP: equ 91360RandomAUnitLevel1Speed: equ 41361RandomAUnitLevel1Growth: equ 141362RandomAUnitLevel1CostGold: equ 80/101363RandomAUnitLevel1CostGems: equ 00+Level1Unit1364RandomAUnitLevel1CostRubies: equ 01366RandomAUnitLevel2Number: equ 271367RandomAUnitLevel2Damage: equ 31368RandomAUnitLevel2Attack: equ 71369RandomAUnitLevel2Defense: equ 61370RandomAUnitLevel2HP: equ 111371RandomAUnitLevel2Speed: equ 41372RandomAUnitLevel2Growth: equ 91373RandomAUnitLevel2CostGold: equ 100/101374RandomAUnitLevel2CostGems: equ 00+Level2Unit1375RandomAUnitLevel2CostRubies: equ 01377RandomAUnitLevel3Number: equ 291378RandomAUnitLevel3Damage: equ 51379RandomAUnitLevel3Attack: equ 81380RandomAUnitLevel3Defense: equ 81381RandomAUnitLevel3HP: equ 241382RandomAUnitLevel3Speed: equ 51383RandomAUnitLevel3Growth: equ 71384RandomAUnitLevel3CostGold: equ 200/101385RandomAUnitLevel3CostGems: equ 00+Level3Unit1386RandomAUnitLevel3CostRubies: equ 01388RandomAUnitLevel4Number: equ 311389RandomAUnitLevel4Damage: equ 71390RandomAUnitLevel4Attack: equ 101391RandomAUnitLevel4Defense: equ 131392RandomAUnitLevel4HP: equ 351393RandomAUnitLevel4Speed: equ 51394RandomAUnitLevel4Growth: equ 41395RandomAUnitLevel4CostGold: equ 300/101396RandomAUnitLevel4CostGems: equ 00+Level4Unit1397RandomAUnitLevel4CostRubies: equ 01399RandomAUnitLevel5Number: equ 351400RandomAUnitLevel5Damage: equ 101401RandomAUnitLevel5Attack: equ 111402RandomAUnitLevel5Defense: equ 131403RandomAUnitLevel5HP: equ 451404RandomAUnitLevel5Speed: equ 51405RandomAUnitLevel5Growth: equ 21406RandomAUnitLevel5CostGold: equ 400/101407RandomAUnitLevel5CostGems: equ 00+Level5Unit1408RandomAUnitLevel5CostRubies: equ 01410RandomAUnitLevel6Number: equ 331411RandomAUnitLevel6Damage: equ 181412RandomAUnitLevel6Attack: equ 151413RandomAUnitLevel6Defense: equ 161414RandomAUnitLevel6HP: equ 90+501415RandomAUnitLevel6Speed: equ 71416RandomAUnitLevel6Growth: equ 11417RandomAUnitLevel6CostGold: equ 1000/101418RandomAUnitLevel6CostGems: equ 00+Level6Unit1419RandomAUnitLevel6CostRubies: equ 21425RandomBUnitLevel1Number: equ 511426RandomBUnitLevel1Damage: equ 31427RandomBUnitLevel1Attack: equ 51428RandomBUnitLevel1Defense: equ 41429RandomBUnitLevel1HP: equ 71430RandomBUnitLevel1Speed: equ 61431RandomBUnitLevel1Growth: equ 141432RandomBUnitLevel1CostGold: equ 70/101433RandomBUnitLevel1CostGems: equ 00+Level1Unit1434RandomBUnitLevel1CostRubies: equ 01436RandomBUnitLevel2Number: equ 521437RandomBUnitLevel2Damage: equ 41438RandomBUnitLevel2Attack: equ 61439RandomBUnitLevel2Defense: equ 71440RandomBUnitLevel2HP: equ 161441RandomBUnitLevel2Speed: equ 31442RandomBUnitLevel2Growth: equ 81443RandomBUnitLevel2CostGold: equ 120/101444RandomBUnitLevel2CostGems: equ 00+Level2Unit1445RandomBUnitLevel2CostRubies: equ 01447RandomBUnitLevel3Number: equ 541448RandomBUnitLevel3Damage: equ 61449RandomBUnitLevel3Attack: equ 91450RandomBUnitLevel3Defense: equ 81451RandomBUnitLevel3HP: equ 251452RandomBUnitLevel3Speed: equ 61453RandomBUnitLevel3Growth: equ 71454RandomBUnitLevel3CostGold: equ 200/101455RandomBUnitLevel3CostGems: equ 00+Level3Unit1456RandomBUnitLevel3CostRubies: equ 01458RandomBUnitLevel4Number: equ 481459RandomBUnitLevel4Damage: equ 81460RandomBUnitLevel4Attack: equ 91461RandomBUnitLevel4Defense: equ 81462RandomBUnitLevel4HP: equ 321463RandomBUnitLevel4Speed: equ 81464RandomBUnitLevel4Growth: equ 51465RandomBUnitLevel4CostGold: equ 250/101466RandomBUnitLevel4CostGems: equ 00+Level4Unit1467RandomBUnitLevel4CostRubies: equ 01469RandomBUnitLevel5Number: equ 491470RandomBUnitLevel5Damage: equ 141471RandomBUnitLevel5Attack: equ 101472RandomBUnitLevel5Defense: equ 121473RandomBUnitLevel5HP: equ 601474RandomBUnitLevel5Speed: equ 41475RandomBUnitLevel5Growth: equ 21476RandomBUnitLevel5CostGold: equ 425/101477RandomBUnitLevel5CostGems: equ 00+Level5Unit1478RandomBUnitLevel5CostRubies: equ 11480RandomBUnitLevel6Number: equ 501481RandomBUnitLevel6Damage: equ 191482RandomBUnitLevel6Attack: equ 151483RandomBUnitLevel6Defense: equ 141484RandomBUnitLevel6HP: equ 95+501485RandomBUnitLevel6Speed: equ 71486RandomBUnitLevel6Growth: equ 11487RandomBUnitLevel6CostGold: equ 850/101488RandomBUnitLevel6CostGems: equ 02+Level6Unit1489RandomBUnitLevel6CostRubies: equ 01492MonsterAddressesForBattle1.asm34Monster001Table: 35 dw Monster001Idle36 dw Monster001Move37 dw GeneralMonsterAttackPatternRight38 dw GeneralMonsterAttackPatternLeft39 dw GeneralMonsterAttackPatternLeftUp40 dw GeneralMonsterAttackPatternLeftDown41 dw GeneralMonsterAttackPatternRightUp42 dw GeneralMonsterAttackPatternRightDown43 db BattleMonsterSpriteSheet1Block44 db 16 45 db 32+00 46 db UsasUnitLevel3CostGold 47 db UsasUnitLevel3CostGems 48 db UsasUnitLevel3CostRubies 49 db UsasUnitLevel3HP 50 db UsasUnitLevel3Speed 51 db UsasUnitLevel3Attack 52 db UsasUnitLevel3Defense 53 db UsasUnitLevel3Growth 54 db UsasUnitLevel3Damage 55 db 000 56 db "Brown Flyer",25558Monster002Table: 59 dw Monster002Idle60 dw Monster002Move61 dw GeneralMonsterAttackPatternRight62 dw GeneralMonsterAttackPatternLeft63 dw GeneralMonsterAttackPatternLeftUp64 dw GeneralMonsterAttackPatternLeftDown65 dw GeneralMonsterAttackPatternRightUp66 dw GeneralMonsterAttackPatternRightDown67 db BattleMonsterSpriteSheet1Block68 db 16 69 db 32+00 70 db UsasUnitLevel4CostGold 71 db UsasUnitLevel4CostGems 72 db UsasUnitLevel4CostRubies 73 db UsasUnitLevel4HP 74 db UsasUnitLevel4Speed 75 db UsasUnitLevel4Attack 76 db UsasUnitLevel4Defense 77 db UsasUnitLevel4Growth 78 db UsasUnitLevel4Damage 79 db 000 80 db "Green Flyer",25582Monster003Table: 83 dw Monster003Idle84 dw Monster003Move85 dw GeneralMonsterAttackPatternRight86 dw GeneralMonsterAttackPatternLeft87 dw GeneralMonsterAttackPatternLeftUp88 dw GeneralMonsterAttackPatternLeftDown89 dw GeneralMonsterAttackPatternRightUp90 dw GeneralMonsterAttackPatternRightDown91 db BattleMonsterSpriteSheet1Block92 db 16 93 db 32+00 94 db UsasUnitLevel5CostGold 95 db UsasUnitLevel5CostGems 96 db UsasUnitLevel5CostRubies 97 db UsasUnitLevel5HP 98 db UsasUnitLevel5Speed 99 db UsasUnitLevel5Attack 100 db UsasUnitLevel5Defense 101 db UsasUnitLevel5Growth 102 db UsasUnitLevel5Damage 103 db 000 104 db "DarkG Flyer",255106Monster004Table: 107 dw Monster004Idle108 dw Monster004Move109 dw GeneralMonsterAttackPatternRight110 dw GeneralMonsterAttackPatternLeft111 dw GeneralMonsterAttackPatternLeftUp112 dw GeneralMonsterAttackPatternLeftDown113 dw GeneralMonsterAttackPatternRightUp114 dw GeneralMonsterAttackPatternRightDown115 db BattleMonsterSpriteSheet1Block116 db 16 117 db 32+00 118 db UsasUnitLevel6CostGold 119 db UsasUnitLevel6CostGems 120 db UsasUnitLevel6CostRubies 121 db UsasUnitLevel6HP 122 db UsasUnitLevel6Speed 123 db UsasUnitLevel6Attack 124 db UsasUnitLevel6Defense 125 db UsasUnitLevel6Growth 126 db UsasUnitLevel6Damage 127 db 000 128 db "LightGFlyer",255130Monster005Table: 131 dw Monster005Idle132 dw Monster005Move133 dw GeneralMonsterAttackPatternRight134 dw GeneralMonsterAttackPatternLeft135 dw GeneralMonsterAttackPatternLeftUp136 dw GeneralMonsterAttackPatternLeftDown137 dw GeneralMonsterAttackPatternRightUp138 dw GeneralMonsterAttackPatternRightDown139 db BattleMonsterSpriteSheet1Block140 db 16 141 db 16+08 142 db UsasUnitLevel2CostGold 143 db UsasUnitLevel2CostGems 144 db UsasUnitLevel2CostRubies 145 db UsasUnitLevel2HP 146 db UsasUnitLevel2Speed 147 db UsasUnitLevel2Attack 148 db UsasUnitLevel2Defense 149 db UsasUnitLevel2Growth 150 db UsasUnitLevel2Damage 151 db 000 152 db "Big Spider",255," "154Monster006Table: 155 dw Monster006Idle156 dw Monster006Move157 dw GeneralMonsterAttackPatternRight158 dw GeneralMonsterAttackPatternLeft159 dw GeneralMonsterAttackPatternLeftUp160 dw GeneralMonsterAttackPatternLeftDown161 dw GeneralMonsterAttackPatternRightUp162 dw GeneralMonsterAttackPatternRightDown163 db BattleMonsterSpriteSheet1Block164 db 16 165 db 16+04 166 db UsasUnitLevel1CostGold 167 db UsasUnitLevel1CostGems 168 db UsasUnitLevel1CostRubies 169 db UsasUnitLevel1HP 170 db UsasUnitLevel1Speed 171 db UsasUnitLevel1Attack 172 db UsasUnitLevel1Defense 173 db UsasUnitLevel1Growth 174 db UsasUnitLevel1Damage 175 db 000 176 db "Tiny Spider",255178Monster007Table: 179 dw Monster007Idle180 dw Monster007Move181 dw Monster007AttackPatternRight182 dw Monster007AttackPatternLeft183 dw Monster007AttackPatternLeft184 dw Monster007AttackPatternLeft185 dw Monster007AttackPatternRight186 dw Monster007AttackPatternRight187 db BattleMonsterSpriteSheet1Block188 db 16 189 db 16+08 190 db BubbleBobbleGroupBUnitLevel4CostGold 191 db BubbleBobbleGroupBUnitLevel4CostGems 192 db BubbleBobbleGroupBUnitLevel4CostRubies 193 db BubbleBobbleGroupBUnitLevel4HP 194 db BubbleBobbleGroupBUnitLevel4Speed 195 db BubbleBobbleGroupBUnitLevel4Attack 196 db BubbleBobbleGroupBUnitLevel4Defense 197 db BubbleBobbleGroupBUnitLevel4Growth 198 db BubbleBobbleGroupBUnitLevel4Damage 199 db RangedMonster 200 db "Bobblun",255,"    "202Monster008Table: 203 dw Monster008Idle204 dw Monster008Move205 dw Monster008AttackPatternRight206 dw Monster008AttackPatternLeft207 dw Monster008AttackPatternLeft208 dw Monster008AttackPatternLeft209 dw Monster008AttackPatternRight210 dw Monster008AttackPatternRight211 db BattleMonsterSpriteSheet1Block212 db 16 213 db 16+08 214 db BubbleBobbleGroupAUnitLevel5CostGold 215 db BubbleBobbleGroupAUnitLevel5CostGems 216 db BubbleBobbleGroupAUnitLevel5CostRubies 217 db BubbleBobbleGroupAUnitLevel5HP 218 db BubbleBobbleGroupAUnitLevel5Speed 219 db BubbleBobbleGroupAUnitLevel5Attack 220 db BubbleBobbleGroupAUnitLevel5Defense 221 db BubbleBobbleGroupAUnitLevel5Growth 222 db BubbleBobbleGroupAUnitLevel5Damage 223 db RangedMonster 224 db "Bubblun",255,"    "226Monster009Table: 227 dw Monster009Idle228 dw Monster009Move229 dw GeneralMonsterAttackPatternRight230 dw GeneralMonsterAttackPatternLeft231 dw GeneralMonsterAttackPatternLeftUp232 dw GeneralMonsterAttackPatternLeftDown233 dw GeneralMonsterAttackPatternRightUp234 dw GeneralMonsterAttackPatternRightDown235 db BattleMonsterSpriteSheet1Block236 db 16 237 db 16+08 238 db BubbleBobbleGroupAUnitLevel1CostGold 239 db BubbleBobbleGroupAUnitLevel1CostGems 240 db BubbleBobbleGroupAUnitLevel1CostRubies 241 db BubbleBobbleGroupAUnitLevel1HP 242 db BubbleBobbleGroupAUnitLevel1Speed 243 db BubbleBobbleGroupAUnitLevel1Attack 244 db BubbleBobbleGroupAUnitLevel1Defense 245 db BubbleBobbleGroupAUnitLevel1Growth 246 db BubbleBobbleGroupAUnitLevel1Damage 247 db 000 248 db "Zen Chan",255,"   "250Monster010Table: 251 dw Monster010Idle252 dw Monster010Move253 dw GeneralMonsterAttackPatternRight254 dw GeneralMonsterAttackPatternLeft255 dw GeneralMonsterAttackPatternLeftUp256 dw GeneralMonsterAttackPatternLeftDown257 dw GeneralMonsterAttackPatternRightUp258 dw GeneralMonsterAttackPatternRightDown259 db BattleMonsterSpriteSheet1Block260 db 16 261 db 16+08 262 db BubbleBobbleGroupBUnitLevel3CostGold 263 db BubbleBobbleGroupBUnitLevel3CostGems 264 db BubbleBobbleGroupBUnitLevel3CostRubies 265 db BubbleBobbleGroupBUnitLevel3HP 266 db BubbleBobbleGroupBUnitLevel3Speed 267 db BubbleBobbleGroupBUnitLevel3Attack 268 db BubbleBobbleGroupBUnitLevel3Defense 269 db BubbleBobbleGroupBUnitLevel3Growth 270 db BubbleBobbleGroupBUnitLevel3Damage 271 db 000 272 db "Mad Zenchan",255274Monster011Table: 275 dw Monster011Idle276 dw Monster011Move277 dw GeneralMonsterAttackPatternRight278 dw GeneralMonsterAttackPatternLeft279 dw GeneralMonsterAttackPatternLeftUp280 dw GeneralMonsterAttackPatternLeftDown281 dw GeneralMonsterAttackPatternRightUp282 dw GeneralMonsterAttackPatternRightDown283 db BattleMonsterSpriteSheet1Block284 db 16 285 db 16+08 286 db BubbleBobbleGroupAUnitLevel3CostGold 287 db BubbleBobbleGroupAUnitLevel3CostGems 288 db BubbleBobbleGroupAUnitLevel3CostRubies 289 db BubbleBobbleGroupAUnitLevel3HP 290 db BubbleBobbleGroupAUnitLevel3Speed 291 db BubbleBobbleGroupAUnitLevel3Attack 292 db BubbleBobbleGroupAUnitLevel3Defense 293 db BubbleBobbleGroupAUnitLevel3Growth 294 db BubbleBobbleGroupAUnitLevel3Damage 295 db 000 296 db "Mighta",255,"     "298Monster012Table: 299 dw Monster012Idle300 dw Monster012Move301 dw GeneralMonsterAttackPatternRight302 dw GeneralMonsterAttackPatternLeft303 dw GeneralMonsterAttackPatternLeftUp304 dw GeneralMonsterAttackPatternLeftDown305 dw GeneralMonsterAttackPatternRightUp306 dw GeneralMonsterAttackPatternRightDown307 db BattleMonsterSpriteSheet1Block308 db 16 309 db 16+08 310 db BubbleBobbleGroupAUnitLevel4CostGold 311 db BubbleBobbleGroupAUnitLevel4CostGems 312 db BubbleBobbleGroupAUnitLevel4CostRubies 313 db BubbleBobbleGroupAUnitLevel4HP 314 db BubbleBobbleGroupAUnitLevel4Speed 315 db BubbleBobbleGroupAUnitLevel4Attack 316 db BubbleBobbleGroupAUnitLevel4Defense 317 db BubbleBobbleGroupAUnitLevel4Growth 318 db BubbleBobbleGroupAUnitLevel4Damage 319 db 000 320 db "SkellMonsta",255322Monster013Table: 323 dw Monster013Idle324 dw Monster013Move325 dw GeneralMonsterAttackPatternRight326 dw GeneralMonsterAttackPatternLeft327 dw GeneralMonsterAttackPatternLeftUp328 dw GeneralMonsterAttackPatternLeftDown329 dw GeneralMonsterAttackPatternRightUp330 dw GeneralMonsterAttackPatternRightDown331 db BattleMonsterSpriteSheet1Block332 db 16 333 db 16+08 334 db BubbleBobbleGroupBUnitLevel1CostGold 335 db BubbleBobbleGroupBUnitLevel1CostGems 336 db BubbleBobbleGroupBUnitLevel1CostRubies 337 db BubbleBobbleGroupBUnitLevel1HP 338 db BubbleBobbleGroupBUnitLevel1Speed 339 db BubbleBobbleGroupBUnitLevel1Attack 340 db BubbleBobbleGroupBUnitLevel1Defense 341 db BubbleBobbleGroupBUnitLevel1Growth 342 db BubbleBobbleGroupBUnitLevel1Damage 343 db 000 344 db "Banebou",255,"    "346Monster014Table: 347 dw Monster014Idle348 dw Monster014Move349 dw GeneralMonsterAttackPatternRight350 dw GeneralMonsterAttackPatternLeft351 dw GeneralMonsterAttackPatternLeftUp352 dw GeneralMonsterAttackPatternLeftDown353 dw GeneralMonsterAttackPatternRightUp354 dw GeneralMonsterAttackPatternRightDown355 db BattleMonsterSpriteSheet1Block356 db 16 357 db 16+08 358 db BubbleBobbleGroupBUnitLevel2CostGold 359 db BubbleBobbleGroupBUnitLevel2CostGems 360 db BubbleBobbleGroupBUnitLevel2CostRubies 361 db BubbleBobbleGroupBUnitLevel2HP 362 db BubbleBobbleGroupBUnitLevel2Speed 363 db BubbleBobbleGroupBUnitLevel2Attack 364 db BubbleBobbleGroupBUnitLevel2Defense 365 db BubbleBobbleGroupBUnitLevel2Growth 366 db BubbleBobbleGroupBUnitLevel2Damage 367 db 000 368 db "Hidegons",255,"   "370Monster015Table: 371 dw Monster015Idle372 dw Monster015Move373 dw GeneralMonsterAttackPatternRight374 dw GeneralMonsterAttackPatternLeft375 dw GeneralMonsterAttackPatternLeftUp376 dw GeneralMonsterAttackPatternLeftDown377 dw GeneralMonsterAttackPatternRightUp378 dw GeneralMonsterAttackPatternRightDown379 db BattleMonsterSpriteSheet1Block380 db 16 381 db 16+08 382 db BubbleBobbleGroupAUnitLevel2CostGold 383 db BubbleBobbleGroupAUnitLevel2CostGems 384 db BubbleBobbleGroupAUnitLevel2CostRubies 385 db BubbleBobbleGroupAUnitLevel2HP 386 db BubbleBobbleGroupAUnitLevel2Speed 387 db BubbleBobbleGroupAUnitLevel2Attack 388 db BubbleBobbleGroupAUnitLevel2Defense 389 db BubbleBobbleGroupAUnitLevel2Growth 390 db BubbleBobbleGroupAUnitLevel2Damage 391 db 000 392 db "Drunk",255,"      "394Monster016Table: 395 dw Monster016Idle396 dw Monster016Move397 dw GeneralMonsterAttackPatternRight398 dw GeneralMonsterAttackPatternLeft399 dw GeneralMonsterAttackPatternLeftUp400 dw GeneralMonsterAttackPatternLeftDown401 dw GeneralMonsterAttackPatternRightUp402 dw GeneralMonsterAttackPatternRightDown403 db BattleMonsterSpriteSheet2Block404 db 64 405 db 64+04 406 db BubbleBobbleGroupBUnitLevel6CostGold 407 db BubbleBobbleGroupBUnitLevel6CostGems 408 db BubbleBobbleGroupBUnitLevel6CostRubies 409 db BubbleBobbleGroupBUnitLevel6HP 410 db BubbleBobbleGroupBUnitLevel6Speed 411 db BubbleBobbleGroupBUnitLevel6Attack 412 db BubbleBobbleGroupBUnitLevel6Defense 413 db BubbleBobbleGroupBUnitLevel6Growth 414 db BubbleBobbleGroupBUnitLevel6Damage 415 db 000 416 db "Super Drunk",255418Monster017Table: 419 dw Monster017Idle420 dw Monster017Move421 dw GeneralMonsterAttackPatternRight422 dw GeneralMonsterAttackPatternLeft423 dw GeneralMonsterAttackPatternLeftUp424 dw GeneralMonsterAttackPatternLeftDown425 dw GeneralMonsterAttackPatternRightUp426 dw GeneralMonsterAttackPatternRightDown427 db BattleMonsterSpriteSheet1Block428 db 32 429 db 32+08 430 db BubbleBobbleGroupBUnitLevel5CostGold 431 db BubbleBobbleGroupBUnitLevel5CostGems 432 db BubbleBobbleGroupBUnitLevel5CostRubies 433 db BubbleBobbleGroupBUnitLevel5HP 434 db BubbleBobbleGroupBUnitLevel5Speed 435 db BubbleBobbleGroupBUnitLevel5Attack 436 db BubbleBobbleGroupBUnitLevel5Defense 437 db BubbleBobbleGroupBUnitLevel5Growth 438 db BubbleBobbleGroupBUnitLevel5Damage 439 db 000 440 db "Supermighta",255446Monster018Table: 447 dw Monster018Idle448 dw Monster018Move449 dw Monster018AttackPatternRight450 dw Monster018AttackPatternLeft451 dw Monster018AttackPatternLeftUp452 dw Monster018AttackPatternLeftDown453 dw Monster018AttackPatternRightUp454 dw Monster018AttackPatternRightDown455 db BattleMonsterSpriteSheet1Block456 db 32 457 db 32+08 458 db CastleVaniaUnitLevel3CostGold 459 db CastleVaniaUnitLevel3CostGems 460 db CastleVaniaUnitLevel3CostRubies 461 db CastleVaniaUnitLevel3HP 462 db CastleVaniaUnitLevel3Speed 463 db CastleVaniaUnitLevel3Attack 464 db CastleVaniaUnitLevel3Defense 465 db CastleVaniaUnitLevel3Growth 466 db CastleVaniaUnitLevel3Damage 467 db 000 468 db "Fish Man",255,"   "470Monster019Table: 471 dw Monster019Idle472 dw Monster019Move473 dw GeneralMonsterAttackPatternRight474 dw GeneralMonsterAttackPatternLeft475 dw GeneralMonsterAttackPatternLeftUp476 dw GeneralMonsterAttackPatternLeftDown477 dw GeneralMonsterAttackPatternRightUp478 dw GeneralMonsterAttackPatternRightDown479 db BattleMonsterSpriteSheet1Block480 db 16 481 db 32+08 482 db CastleVaniaUnitLevel1CostGold 483 db CastleVaniaUnitLevel1CostGems 484 db CastleVaniaUnitLevel1CostRubies 485 db CastleVaniaUnitLevel1HP 486 db CastleVaniaUnitLevel1Speed 487 db CastleVaniaUnitLevel1Attack 488 db CastleVaniaUnitLevel1Defense 489 db CastleVaniaUnitLevel1Growth 490 db CastleVaniaUnitLevel1Damage 491 db 000 492 db "Zombie",255,"     "494Monster020Table: 495 dw Monster020Idle496 dw Monster020Move497 dw GeneralMonsterAttackPatternRight498 dw GeneralMonsterAttackPatternLeft499 dw GeneralMonsterAttackPatternLeftUp500 dw GeneralMonsterAttackPatternLeftDown501 dw GeneralMonsterAttackPatternRightUp502 dw GeneralMonsterAttackPatternRightDown503 db BattleMonsterSpriteSheet2Block504 db 16 505 db 40+08 506 db CastleVaniaUnitLevel5CostGold 507 db CastleVaniaUnitLevel5CostGems 508 db CastleVaniaUnitLevel5CostRubies 509 db CastleVaniaUnitLevel5HP 510 db CastleVaniaUnitLevel5Speed 511 db CastleVaniaUnitLevel5Attack 512 db CastleVaniaUnitLevel5Defense 513 db CastleVaniaUnitLevel5Growth 514 db CastleVaniaUnitLevel5Damage 515 db 000 516 db "Mummy Man",255,"  "518Monster021Table: 519 dw Monster021Idle520 dw Monster021Move521 dw Monster021AttackPatternRight522 dw Monster021AttackPatternLeft523 dw Monster021AttackPatternLeftUp524 dw Monster021AttackPatternLeftDown525 dw Monster021AttackPatternRightUp526 dw Monster021AttackPatternRightDown527 db BattleMonsterSpriteSheet1Block528 db 16 529 db 32+08 530 db CastleVaniaUnitLevel3CostGold 531 db CastleVaniaUnitLevel3CostGems 532 db CastleVaniaUnitLevel3CostRubies 533 db CastleVaniaUnitLevel3HP 534 db CastleVaniaUnitLevel3Speed 535 db CastleVaniaUnitLevel3Attack 536 db CastleVaniaUnitLevel3Defense 537 db CastleVaniaUnitLevel3Growth 538 db CastleVaniaUnitLevel3Damage 539 db 000 540 db "Spear Guard",255542Monster022Table: 543 dw Monster022Idle544 dw Monster022Move545 dw GeneralMonsterAttackPatternRight546 dw GeneralMonsterAttackPatternLeft547 dw GeneralMonsterAttackPatternLeftUp548 dw GeneralMonsterAttackPatternLeftDown549 dw GeneralMonsterAttackPatternRightUp550 dw GeneralMonsterAttackPatternRightDown551 db BattleMonsterSpriteSheet3Block552 db 16 553 db 24+08 554 db CastleVaniaUnitLevel2CostGold 555 db CastleVaniaUnitLevel2CostGems 556 db CastleVaniaUnitLevel2CostRubies 557 db CastleVaniaUnitLevel2HP 558 db CastleVaniaUnitLevel2Speed 559 db CastleVaniaUnitLevel2Attack 560 db CastleVaniaUnitLevel2Defense 561 db CastleVaniaUnitLevel2Growth 562 db CastleVaniaUnitLevel2Damage 563 db 000 564 db "Medusa Head",255565 566Monster023Table: 567 dw Monster023Idle568 dw Monster023Move569 dw Monster023AttackPatternRight570 dw Monster023AttackPatternLeft571 dw Monster023AttackPatternLeftUp572 dw Monster023AttackPatternLeftDown573 dw Monster023AttackPatternRightUp574 dw Monster023AttackPatternRightDown575 db BattleMonsterSpriteSheet3Block576 db 16 577 db 16+08 578 db CastleVaniaUnitLevel2CostGold 579 db CastleVaniaUnitLevel2CostGems 580 db CastleVaniaUnitLevel2CostRubies 581 db CastleVaniaUnitLevel2HP 582 db CastleVaniaUnitLevel2Speed 583 db CastleVaniaUnitLevel2Attack 584 db CastleVaniaUnitLevel2Defense 585 db CastleVaniaUnitLevel2Growth 586 db CastleVaniaUnitLevel2Damage 587 db 000 588 db "Flea Man",255,"   "590Monster024Table: 591 dw Monster024Idle592 dw Monster024Move593 dw GeneralMonsterAttackPatternRight594 dw GeneralMonsterAttackPatternLeft595 dw GeneralMonsterAttackPatternLeftUp596 dw GeneralMonsterAttackPatternLeftDown597 dw GeneralMonsterAttackPatternRightUp598 dw GeneralMonsterAttackPatternRightDown599 db BattleMonsterSpriteSheet3Block600 db 48 601 db 48+08 602 db CastleVaniaUnitLevel6CostGold 603 db CastleVaniaUnitLevel6CostGems 604 db CastleVaniaUnitLevel6CostRubies 605 db CastleVaniaUnitLevel6HP 606 db CastleVaniaUnitLevel6Speed 607 db CastleVaniaUnitLevel6Attack 608 db CastleVaniaUnitLevel6Defense 609 db CastleVaniaUnitLevel6Growth 610 db CastleVaniaUnitLevel6Damage 611 db 000 612 db "Grim Reaper",255613 614Monster025Table: 615 dw Monster025Idle616 dw Monster025Move617 dw Monster025AttackPatternRight618 dw Monster025AttackPatternLeft619 dw Monster025AttackPatternLeftUp620 dw Monster025AttackPatternLeftDown621 dw Monster025AttackPatternRightUp622 dw Monster025AttackPatternRightDown623 db BattleMonsterSpriteSheet3Block624 db 16 625 db 32+08 626 db CastleVaniaUnitLevel1CostGold 627 db CastleVaniaUnitLevel1CostGems 628 db CastleVaniaUnitLevel1CostRubies 629 db CastleVaniaUnitLevel1HP 630 db CastleVaniaUnitLevel1Speed 631 db CastleVaniaUnitLevel1Attack 632 db CastleVaniaUnitLevel1Defense 633 db CastleVaniaUnitLevel1Growth 634 db CastleVaniaUnitLevel1Damage 635 db 000 636 db "Skeleton",255,"   "638Monster026Table: 639 dw Monster026Idle640 dw Monster026Move641 dw Monster026AttackPatternRight642 dw Monster026AttackPatternLeft643 dw Monster026AttackPatternLeft644 dw Monster026AttackPatternLeft645 dw Monster026AttackPatternRight646 dw Monster026AttackPatternRight647 db BattleMonsterSpriteSheet2Block648 db 16 649 db 32+08 650 db CastleVaniaUnitLevel4CostGold 651 db CastleVaniaUnitLevel4CostGems 652 db CastleVaniaUnitLevel4CostRubies 653 db CastleVaniaUnitLevel4HP 654 db CastleVaniaUnitLevel4Speed 655 db CastleVaniaUnitLevel4Attack 656 db CastleVaniaUnitLevel4Defense 657 db CastleVaniaUnitLevel4Growth 658 db CastleVaniaUnitLevel4Damage 659 db RangedMonster 660 db "Axe Man",255,"    "667Monster027Table: 668 dw Monster027Idle669 dw Monster027Move670 dw GeneralMonsterAttackPatternRight671 dw GeneralMonsterAttackPatternLeft672 dw GeneralMonsterAttackPatternLeftUp673 dw GeneralMonsterAttackPatternLeftDown674 dw GeneralMonsterAttackPatternRightUp675 dw GeneralMonsterAttackPatternRightDown676 db BattleMonsterSpriteSheet3Block677 db 16 678 db 16+08 679 db DragonSlayerUnitLevel2CostGold 680 db DragonSlayerUnitLevel2CostGems 681 db DragonSlayerUnitLevel2CostRubies 682 db DragonSlayerUnitLevel2HP 683 db DragonSlayerUnitLevel2Speed 684 db DragonSlayerUnitLevel2Attack 685 db DragonSlayerUnitLevel2Defense 686 db DragonSlayerUnitLevel2Growth 687 db DragonSlayerUnitLevel2Damage 688 db 000 689 db "Scorpii",255,"    "692Monster028Table: 693 dw Monster028Idle694 dw Monster028Move695 dw GeneralMonsterAttackPatternRight696 dw GeneralMonsterAttackPatternLeft697 dw GeneralMonsterAttackPatternLeftUp698 dw GeneralMonsterAttackPatternLeftDown699 dw GeneralMonsterAttackPatternRightUp700 dw GeneralMonsterAttackPatternRightDown701 db BattleMonsterSpriteSheet3Block702 db 16 703 db 16+08 704 db DragonSlayerUnitLevel1CostGold 705 db DragonSlayerUnitLevel1CostGems 706 db DragonSlayerUnitLevel1CostRubies 707 db DragonSlayerUnitLevel1HP 708 db DragonSlayerUnitLevel1Speed 709 db DragonSlayerUnitLevel1Attack 710 db DragonSlayerUnitLevel1Defense 711 db DragonSlayerUnitLevel1Growth 712 db DragonSlayerUnitLevel1Damage 713 db 000 714 db "Porgi",255,"      "716Monster029Table: 717 dw Monster029Idle718 dw Monster029Move719 dw GeneralMonsterAttackPatternRight720 dw GeneralMonsterAttackPatternLeft721 dw GeneralMonsterAttackPatternLeftUp722 dw GeneralMonsterAttackPatternLeftDown723 dw GeneralMonsterAttackPatternRightUp724 dw GeneralMonsterAttackPatternRightDown725 db BattleMonsterSpriteSheet3Block726 db 16 727 db 16+08 728 db DragonSlayerUnitLevel3CostGold 729 db DragonSlayerUnitLevel3CostGems 730 db DragonSlayerUnitLevel3CostRubies 731 db DragonSlayerUnitLevel3HP 732 db DragonSlayerUnitLevel3Speed 733 db DragonSlayerUnitLevel3Attack 734 db DragonSlayerUnitLevel3Defense 735 db DragonSlayerUnitLevel3Growth 736 db DragonSlayerUnitLevel3Damage 737 db 000 738 db "Rock Man",255,"   "740Monster030Table: 741 dw Monster030Idle742 dw Monster030Move743 dw GeneralMonsterAttackPatternRight744 dw GeneralMonsterAttackPatternLeft745 dw GeneralMonsterAttackPatternLeftUp746 dw GeneralMonsterAttackPatternLeftDown747 dw GeneralMonsterAttackPatternRightUp748 dw GeneralMonsterAttackPatternRightDown749 db BattleMonsterSpriteSheet3Block750 db 16 751 db 16+08 752 db DragonSlayerUnitLevel1CostGold 753 db DragonSlayerUnitLevel1CostGems 754 db DragonSlayerUnitLevel1CostRubies 755 db DragonSlayerUnitLevel1HP 756 db DragonSlayerUnitLevel1Speed 757 db DragonSlayerUnitLevel1Attack 758 db DragonSlayerUnitLevel1Defense 759 db DragonSlayerUnitLevel1Growth 760 db DragonSlayerUnitLevel1Damage 761 db 000 762 db "Dawg",255,"       "763765Monster031Table: 766 dw Monster031Idle767 dw Monster031Move768 dw GeneralMonsterAttackPatternRight769 dw GeneralMonsterAttackPatternLeft770 dw GeneralMonsterAttackPatternLeftUp771 dw GeneralMonsterAttackPatternLeftDown772 dw GeneralMonsterAttackPatternRightUp773 dw GeneralMonsterAttackPatternRightDown774 db BattleMonsterSpriteSheet3Block775 db 16 776 db 16+08 777 db DragonSlayerUnitLevel4CostGold 778 db DragonSlayerUnitLevel4CostGems 779 db DragonSlayerUnitLevel4CostRubies 780 db DragonSlayerUnitLevel4HP 781 db DragonSlayerUnitLevel4Speed 782 db DragonSlayerUnitLevel4Attack 783 db DragonSlayerUnitLevel4Defense 784 db DragonSlayerUnitLevel4Growth 785 db DragonSlayerUnitLevel4Damage 786 db 000 787 db "Gers",255,"       "789Monster032Table: 790 dw Monster032Idle791 dw Monster032Move792 dw GeneralMonsterAttackPatternRight793 dw GeneralMonsterAttackPatternLeft794 dw GeneralMonsterAttackPatternLeftUp795 dw GeneralMonsterAttackPatternLeftDown796 dw GeneralMonsterAttackPatternRightUp797 dw GeneralMonsterAttackPatternRightDown798 db BattleMonsterSpriteSheet3Block799 db 16 800 db 16+08 801 db DragonSlayerUnitLevel2CostGold 802 db DragonSlayerUnitLevel2CostGems 803 db DragonSlayerUnitLevel2CostRubies 804 db DragonSlayerUnitLevel2HP 805 db DragonSlayerUnitLevel2Speed 806 db DragonSlayerUnitLevel2Attack 807 db DragonSlayerUnitLevel2Defense 808 db DragonSlayerUnitLevel2Growth 809 db DragonSlayerUnitLevel2Damage 810 db 000 811 db "Yashinotkin",255813Monster033Table: 814 dw Monster033Idle815 dw Monster033Move816 dw GeneralMonsterAttackPatternRight817 dw GeneralMonsterAttackPatternLeft818 dw GeneralMonsterAttackPatternLeftUp819 dw GeneralMonsterAttackPatternLeftDown820 dw GeneralMonsterAttackPatternRightUp821 dw GeneralMonsterAttackPatternRightDown822 db BattleMonsterSpriteSheet3Block823 db 16 824 db 16+08 825 db DragonSlayerUnitLevel6CostGold 826 db DragonSlayerUnitLevel6CostGems 827 db DragonSlayerUnitLevel6CostRubies 828 db DragonSlayerUnitLevel6HP 829 db DragonSlayerUnitLevel6Speed 830 db DragonSlayerUnitLevel6Attack 831 db DragonSlayerUnitLevel6Defense 832 db DragonSlayerUnitLevel6Growth 833 db DragonSlayerUnitLevel6Damage 834 db 000 835 db "King Mu",255,"    "837Monster034Table: 838 dw Monster034Idle839 dw Monster034Move840 dw GeneralMonsterAttackPatternRight841 dw GeneralMonsterAttackPatternLeft842 dw GeneralMonsterAttackPatternLeftUp843 dw GeneralMonsterAttackPatternLeftDown844 dw GeneralMonsterAttackPatternRightUp845 dw GeneralMonsterAttackPatternRightDown846 db BattleMonsterSpriteSheet3Block847 db 16 848 db 16+08 849 db DragonSlayerUnitLevel3CostGold 850 db DragonSlayerUnitLevel3CostGems 851 db DragonSlayerUnitLevel3CostRubies 852 db DragonSlayerUnitLevel3HP 853 db DragonSlayerUnitLevel3Speed 854 db DragonSlayerUnitLevel3Attack 855 db DragonSlayerUnitLevel3Defense 856 db DragonSlayerUnitLevel3Growth 857 db DragonSlayerUnitLevel3Damage 858 db 000 859 db "Crawler",255,"    "861Monster035Table: 862 dw Monster035Idle863 dw Monster035Move864 dw Monster035AttackPatternRight865 dw Monster035AttackPatternLeft866 dw Monster035AttackPatternLeft867 dw Monster035AttackPatternLeft868 dw Monster035AttackPatternRight869 dw Monster035AttackPatternRight870 db BattleMonsterSpriteSheet3Block871 db 16 872 db 16+08 873 db DragonSlayerUnitLevel5CostGold 874 db DragonSlayerUnitLevel5CostGems 875 db DragonSlayerUnitLevel5CostRubies 876 db DragonSlayerUnitLevel5HP 877 db DragonSlayerUnitLevel5Speed 878 db DragonSlayerUnitLevel5Attack 879 db DragonSlayerUnitLevel5Defense 880 db DragonSlayerUnitLevel5Growth 881 db DragonSlayerUnitLevel5Damage 882 db RangedMonster 883 db "Octo",255,"       "885Monster036Table: 886 dw Monster036Idle887 dw Monster036Move888 dw Monster036AttackPatternRight889 dw Monster036AttackPatternLeft890 dw Monster036AttackPatternLeft891 dw Monster036AttackPatternLeft892 dw Monster036AttackPatternRight893 dw Monster036AttackPatternRight894 db BattleMonsterSpriteSheet3Block895 db 16 896 db 32+08 897 db ContraGroupBUnitLevel2CostGold 898 db ContraGroupBUnitLevel2CostGems 899 db ContraGroupBUnitLevel2CostRubies 900 db ContraGroupBUnitLevel2HP 901 db ContraGroupBUnitLevel2Speed 902 db ContraGroupBUnitLevel2Attack 903 db ContraGroupBUnitLevel2Defense 904 db ContraGroupBUnitLevel2Growth 905 db ContraGroupBUnitLevel2Damage 906 db RangedMonster 907 db "Sarge",255,"      "909Monster037Table: 910 dw Monster037Idle911 dw Monster037Move912 dw GeneralMonsterAttackPatternRight913 dw GeneralMonsterAttackPatternLeft914 dw GeneralMonsterAttackPatternLeftUp915 dw GeneralMonsterAttackPatternLeftDown916 dw GeneralMonsterAttackPatternRightUp917 dw GeneralMonsterAttackPatternRightDown918 db BattleMonsterSpriteSheet4Block919 db 16 920 db 32+08 921 db ContraGroupBUnitLevel4CostGold 922 db ContraGroupBUnitLevel4CostGems 923 db ContraGroupBUnitLevel4CostRubies 924 db ContraGroupBUnitLevel4HP 925 db ContraGroupBUnitLevel4Speed 926 db ContraGroupBUnitLevel4Attack 927 db ContraGroupBUnitLevel4Defense 928 db ContraGroupBUnitLevel4Growth 929 db ContraGroupBUnitLevel4Damage 930 db 000 931 db "Lieutenant",255," "933Monster038Table: 934 dw Monster038Idle935 dw Monster038Move936 dw GeneralMonsterAttackPatternRight937 dw GeneralMonsterAttackPatternLeft938 dw GeneralMonsterAttackPatternLeftUp939 dw GeneralMonsterAttackPatternLeftDown940 dw GeneralMonsterAttackPatternRightUp941 dw GeneralMonsterAttackPatternRightDown942 db BattleMonsterSpriteSheet1Block943 db 16 944 db 32+08 945 db ContraGroupAUnitLevel1CostGold 946 db ContraGroupAUnitLevel1CostGems 947 db ContraGroupAUnitLevel1CostRubies 948 db ContraGroupAUnitLevel1HP 949 db ContraGroupAUnitLevel1Speed 950 db ContraGroupAUnitLevel1Attack 951 db ContraGroupAUnitLevel1Defense 952 db ContraGroupAUnitLevel1Growth 953 db ContraGroupAUnitLevel1Damage 954 db 000 955 db "FootSoldier",255957Monster039Table: 958 dw Monster039Idle959 dw Monster039Move960 dw Monster039AttackPatternRight961 dw Monster039AttackPatternLeft962 dw Monster039AttackPatternLeft963 dw Monster039AttackPatternLeft964 dw Monster039AttackPatternRight965 dw Monster039AttackPatternRight966 db BattleMonsterSpriteSheet4Block967 db 32 968 db 32+08 969 db ContraGroupBUnitLevel5CostGold 970 db ContraGroupBUnitLevel5CostGems 971 db ContraGroupBUnitLevel5CostRubies 972 db ContraGroupBUnitLevel5HP 973 db ContraGroupBUnitLevel5Speed 974 db ContraGroupBUnitLevel5Attack 975 db ContraGroupBUnitLevel5Defense 976 db ContraGroupBUnitLevel5Growth 977 db ContraGroupBUnitLevel5Damage 978 db RangedMonster 979 db "Grenadier",255,"  "981Monster040Table: 982 dw Monster040Idle983 dw Monster040Move984 dw Monster040AttackPatternRight985 dw Monster040AttackPatternLeft986 dw Monster040AttackPatternLeft987 dw Monster040AttackPatternLeft988 dw Monster040AttackPatternRight989 dw Monster040AttackPatternRight990 db BattleMonsterSpriteSheet4Block991 db 32 992 db 32+08 993 db ContraGroupBUnitLevel6CostGold 994 db ContraGroupBUnitLevel6CostGems 995 db ContraGroupBUnitLevel6CostRubies 996 db ContraGroupBUnitLevel6HP 997 db ContraGroupBUnitLevel6Speed 998 db ContraGroupBUnitLevel6Attack 999 db ContraGroupBUnitLevel6Defense 1000 db ContraGroupBUnitLevel6Growth 1001 db ContraGroupBUnitLevel6Damage 1002 db RangedMonster 1003 db "Sniper",255,"     "1005Monster041Table: 1006 dw Monster041Idle1007 dw Monster041Move1008 dw GeneralMonsterAttackPatternRight1009 dw GeneralMonsterAttackPatternLeft1010 dw GeneralMonsterAttackPatternLeftUp1011 dw GeneralMonsterAttackPatternLeftDown1012 dw GeneralMonsterAttackPatternRightUp1013 dw GeneralMonsterAttackPatternRightDown1014 db BattleMonsterSpriteSheet2Block1015 db 32 1016 db 24+08 1017 db ContraGroupAUnitLevel3CostGold 1018 db ContraGroupAUnitLevel3CostGems 1019 db ContraGroupAUnitLevel3CostRubies 1020 db ContraGroupAUnitLevel3HP 1021 db ContraGroupAUnitLevel3Speed 1022 db ContraGroupAUnitLevel3Attack 1023 db ContraGroupAUnitLevel3Defense 1024 db ContraGroupAUnitLevel3Growth 1025 db ContraGroupAUnitLevel3Damage 1026 db 000 1027 db "Gigafly",255,"    "1029Monster042Table: 1030 dw Monster042Idle1031 dw Monster042Move1032 dw GeneralMonsterAttackPatternRight1033 dw GeneralMonsterAttackPatternLeft1034 dw GeneralMonsterAttackPatternLeftUp1035 dw GeneralMonsterAttackPatternLeftDown1036 dw GeneralMonsterAttackPatternRightUp1037 dw GeneralMonsterAttackPatternRightDown1038 db BattleMonsterSpriteSheet4Block1039 db 32 1040 db 32+08 1041 db ContraGroupAUnitLevel2CostGold 1042 db ContraGroupAUnitLevel2CostGems 1043 db ContraGroupAUnitLevel2CostRubies 1044 db ContraGroupAUnitLevel2HP 1045 db ContraGroupAUnitLevel2Speed 1046 db ContraGroupAUnitLevel2Attack 1047 db ContraGroupAUnitLevel2Defense 1048 db ContraGroupAUnitLevel2Growth 1049 db ContraGroupAUnitLevel2Damage 1050 db 000 1051 db "Alien Grunt",2551053Monster043Table: 1054 dw Monster043Idle1055 dw Monster043Move1056 dw GeneralMonsterAttackPatternRight1057 dw GeneralMonsterAttackPatternLeft1058 dw GeneralMonsterAttackPatternLeftUp1059 dw GeneralMonsterAttackPatternLeftDown1060 dw GeneralMonsterAttackPatternRightUp1061 dw GeneralMonsterAttackPatternRightDown1062 db BattleMonsterSpriteSheet3Block1063 db 16 1064 db 32+08 1065 db ContraGroupBUnitLevel3CostGold 1066 db ContraGroupBUnitLevel3CostGems 1067 db ContraGroupBUnitLevel3CostRubies 1068 db ContraGroupBUnitLevel3HP 1069 db ContraGroupBUnitLevel3Speed 1070 db ContraGroupBUnitLevel3Attack 1071 db ContraGroupBUnitLevel3Defense 1072 db ContraGroupBUnitLevel3Growth 1073 db ContraGroupBUnitLevel3Damage 1074 db 000 1075 db "Infiltrant",255," "1077Monster044Table: 1078 dw Monster044Idle1079 dw Monster044Move1080 dw GeneralMonsterAttackPatternRight1081 dw GeneralMonsterAttackPatternLeft1082 dw GeneralMonsterAttackPatternLeftUp1083 dw GeneralMonsterAttackPatternLeftDown1084 dw GeneralMonsterAttackPatternRightUp1085 dw GeneralMonsterAttackPatternRightDown1086 db BattleMonsterSpriteSheet4Block1087 db 32 1088 db 32+08 1089 db ContraGroupBUnitLevel1CostGold 1090 db ContraGroupBUnitLevel1CostGems 1091 db ContraGroupBUnitLevel1CostRubies 1092 db ContraGroupBUnitLevel1HP 1093 db ContraGroupBUnitLevel1Speed 1094 db ContraGroupBUnitLevel1Attack 1095 db ContraGroupBUnitLevel1Defense 1096 db ContraGroupBUnitLevel1Growth 1097 db ContraGroupBUnitLevel1Damage 1098 db 000 1099 db "Red Soldier",2551100 1101Monster045Table: 1102 dw Monster045Idle1103 dw Monster045Move1104 dw GeneralMonsterAttackPatternRight1105 dw GeneralMonsterAttackPatternLeft1106 dw GeneralMonsterAttackPatternLeftUp1107 dw GeneralMonsterAttackPatternLeftDown1108 dw GeneralMonsterAttackPatternRightUp1109 dw GeneralMonsterAttackPatternRightDown1110 db BattleMonsterSpriteSheet2Block1111 db 32 1112 db 24+08 1113 db ContraGroupAUnitLevel5CostGold 1114 db ContraGroupAUnitLevel5CostGems 1115 db ContraGroupAUnitLevel5CostRubies 1116 db ContraGroupAUnitLevel5HP 1117 db ContraGroupAUnitLevel5Speed 1118 db ContraGroupAUnitLevel5Attack 1119 db ContraGroupAUnitLevel5Defense 1120 db ContraGroupAUnitLevel5Growth 1121 db ContraGroupAUnitLevel5Damage 1122 db 000 1123 db "Face Hugger",2551125Monster046Table: 1126 dw Monster046Idle1127 dw Monster046Move1128 dw GeneralMonsterAttackPatternRight1129 dw GeneralMonsterAttackPatternLeft1130 dw GeneralMonsterAttackPatternLeftUp1131 dw GeneralMonsterAttackPatternLeftDown1132 dw GeneralMonsterAttackPatternRightUp1133 dw GeneralMonsterAttackPatternRightDown1134 db BattleMonsterSpriteSheet4Block1135 db 32 1136 db 56+08 1137 db ContraGroupAUnitLevel6CostGold 1138 db ContraGroupAUnitLevel6CostGems 1139 db ContraGroupAUnitLevel6CostRubies 1140 db ContraGroupAUnitLevel6HP 1141 db ContraGroupAUnitLevel6Speed 1142 db ContraGroupAUnitLevel6Attack 1143 db ContraGroupAUnitLevel6Defense 1144 db ContraGroupAUnitLevel6Growth 1145 db ContraGroupAUnitLevel6Damage 1146 db 000 1147 db "Gorudea",255,"    "1149Monster047Table: 1150 dw Monster047Idle1151 dw Monster047Move1152 dw Monster047AttackPatternRight1153 dw Monster047AttackPatternLeft1154 dw Monster047AttackPatternLeft1155 dw Monster047AttackPatternLeft1156 dw Monster047AttackPatternRight1157 dw Monster047AttackPatternRight1158 db BattleMonsterSpriteSheet3Block1159 db 32 1160 db 32+08 1161 db ContraGroupAUnitLevel4CostGold 1162 db ContraGroupAUnitLevel4CostGems 1163 db ContraGroupAUnitLevel4CostRubies 1164 db ContraGroupAUnitLevel4HP 1165 db ContraGroupAUnitLevel4Speed 1166 db ContraGroupAUnitLevel4Attack 1167 db ContraGroupAUnitLevel4Defense 1168 db ContraGroupAUnitLevel4Growth 1169 db ContraGroupAUnitLevel4Damage 1170 db RangedMonster 1171 db "Turret",255,"     "1180Monster048Table: 1181 dw Monster048Idle1182 dw Monster048Move1183 dw GeneralMonsterAttackPatternRight1184 dw GeneralMonsterAttackPatternLeft1185 dw GeneralMonsterAttackPatternLeftUp1186 dw GeneralMonsterAttackPatternLeftDown1187 dw GeneralMonsterAttackPatternRightUp1188 dw GeneralMonsterAttackPatternRightDown1189 db BattleMonsterSpriteSheet2Block1190 db 16 1191 db 40+08 1192 db UsasUnitLevel4CostGold 1193 db UsasUnitLevel4CostGems 1194 db UsasUnitLevel4CostRubies 1195 db UsasUnitLevel4HP 1196 db UsasUnitLevel4Speed 1197 db UsasUnitLevel4Attack 1198 db UsasUnitLevel4Defense 1199 db UsasUnitLevel4Growth 1200 db UsasUnitLevel4Damage 1201 db 000 1202 db "Gravewing",255,"  "1204Monster049Table: 1205 dw Monster049Idle1206 dw Monster049Move1207 dw Monster049AttackPatternRight1208 dw Monster049AttackPatternLeft1209 dw Monster049AttackPatternLeft1210 dw Monster049AttackPatternLeft1211 dw Monster049AttackPatternRight1212 dw Monster049AttackPatternRight1213 db BattleMonsterSpriteSheet4Block1214 db 16 1215 db 24+08 1216 db UsasUnitLevel5CostGold 1217 db UsasUnitLevel5CostGems 1218 db UsasUnitLevel5CostRubies 1219 db UsasUnitLevel5HP 1220 db UsasUnitLevel5Speed 1221 db UsasUnitLevel5Attack 1222 db UsasUnitLevel5Defense 1223 db UsasUnitLevel5Growth 1224 db UsasUnitLevel5Damage 1225 db RangedMonster 1226 db "Vanguard",255,"   "1228Monster050Table: 1229 dw Monster050Idle1230 dw Monster050Move1231 dw GeneralMonsterAttackPatternRight1232 dw GeneralMonsterAttackPatternLeft1233 dw GeneralMonsterAttackPatternLeftUp1234 dw GeneralMonsterAttackPatternLeftDown1235 dw GeneralMonsterAttackPatternRightUp1236 dw GeneralMonsterAttackPatternRightDown1237 db BattleMonsterSpriteSheet4Block1238 db 16 1239 db 32+08 1240 db UsasUnitLevel6CostGold 1241 db UsasUnitLevel6CostGems 1242 db UsasUnitLevel6CostRubies 1243 db UsasUnitLevel6HP 1244 db UsasUnitLevel6Speed 1245 db UsasUnitLevel6Attack 1246 db UsasUnitLevel6Defense 1247 db UsasUnitLevel6Growth 1248 db UsasUnitLevel6Damage 1249 db 000 1250 db "Aerial Luna",2551251 1252Monster051Table: 1253 dw Monster051Idle1254 dw Monster051Move1255 dw GeneralMonsterAttackPatternRight1256 dw GeneralMonsterAttackPatternLeft1257 dw GeneralMonsterAttackPatternLeftUp1258 dw GeneralMonsterAttackPatternLeftDown1259 dw GeneralMonsterAttackPatternRightUp1260 dw GeneralMonsterAttackPatternRightDown1261 db BattleMonsterSpriteSheet4Block1262 db 16 1263 db 16+08 1264 db UsasUnitLevel1CostGold 1265 db UsasUnitLevel1CostGems 1266 db UsasUnitLevel1CostRubies 1267 db UsasUnitLevel1HP 1268 db UsasUnitLevel1Speed 1269 db UsasUnitLevel1Attack 1270 db UsasUnitLevel1Defense 1271 db UsasUnitLevel1Growth 1272 db UsasUnitLevel1Damage 1273 db 000 1274 db "Mini Phanto",2551275 1276Monster052Table: 1277 dw Monster052Idle1278 dw Monster052Move1279 dw GeneralMonsterAttackPatternRight1280 dw GeneralMonsterAttackPatternLeft1281 dw GeneralMonsterAttackPatternLeftUp1282 dw GeneralMonsterAttackPatternLeftDown1283 dw GeneralMonsterAttackPatternRightUp1284 dw GeneralMonsterAttackPatternRightDown1285 db BattleMonsterSpriteSheet4Block1286 db 16 1287 db 16+08 1288 db UsasUnitLevel2CostGold 1289 db UsasUnitLevel2CostGems 1290 db UsasUnitLevel2CostRubies 1291 db UsasUnitLevel2HP 1292 db UsasUnitLevel2Speed 1293 db UsasUnitLevel2Attack 1294 db UsasUnitLevel2Defense 1295 db UsasUnitLevel2Growth 1296 db UsasUnitLevel2Damage 1297 db 000 1298 db "Thicket Tot",2551299 1300Monster053Table: 1301 dw Monster053Idle1302 dw Monster053Move1303 dw GeneralMonsterAttackPatternRight1304 dw GeneralMonsterAttackPatternLeft1305 dw GeneralMonsterAttackPatternLeftUp1306 dw GeneralMonsterAttackPatternLeftDown1307 dw GeneralMonsterAttackPatternRightUp1308 dw GeneralMonsterAttackPatternRightDown1309 db BattleMonsterSpriteSheet3Block1310 db 16 1311 db 16+08 1312 db UsasUnitLevel1CostGold 1313 db UsasUnitLevel1CostGems 1314 db UsasUnitLevel1CostRubies 1315 db UsasUnitLevel1HP 1316 db UsasUnitLevel1Speed 1317 db UsasUnitLevel1Attack 1318 db UsasUnitLevel1Defense 1319 db UsasUnitLevel1Growth 1320 db UsasUnitLevel1Damage 1321 db 000 1322 db "Bonefin",255,"    "1324Monster054Table: 1325 dw Monster054Idle1326 dw Monster054Move1327 dw GeneralMonsterAttackPatternRight1328 dw GeneralMonsterAttackPatternLeft1329 dw GeneralMonsterAttackPatternLeftUp1330 dw GeneralMonsterAttackPatternLeftDown1331 dw GeneralMonsterAttackPatternRightUp1332 dw GeneralMonsterAttackPatternRightDown1333 db BattleMonsterSpriteSheet2Block1334 db 16 1335 db 32+08 1336 db UsasUnitLevel3CostGold 1337 db UsasUnitLevel3CostGems 1338 db UsasUnitLevel3CostRubies 1339 db UsasUnitLevel3HP 1340 db UsasUnitLevel3Speed 1341 db UsasUnitLevel3Attack 1342 db UsasUnitLevel3Defense 1343 db UsasUnitLevel3Growth 1344 db UsasUnitLevel3Damage 1345 db 000 1346 db "Zomblet",255,"    "1348Monster055Table: 1349 dw Monster055Idle1350 dw Monster055Move1351 dw Monster055AttackPatternRight1352 dw Monster055AttackPatternLeft1353 dw Monster055AttackPatternLeftUp1354 dw Monster055AttackPatternLeftDown1355 dw Monster055AttackPatternRightUp1356 dw Monster055AttackPatternRightDown1357 db BattleMonsterSpriteSheet5Block1358 db 32 1359 db 32+08 1360 db GoemonUnitLevel2CostGold 1361 db GoemonUnitLevel2CostGems 1362 db GoemonUnitLevel2CostRubies 1363 db GoemonUnitLevel2HP 1364 db GoemonUnitLevel2Speed 1365 db GoemonUnitLevel2Attack 1366 db GoemonUnitLevel2Defense 1367 db GoemonUnitLevel2Growth 1368 db GoemonUnitLevel2Damage 1369 db 000 1370 db "Cheek",255,"      "1372Monster056Table: 1373 dw Monster056Idle1374 dw Monster056Move1375 dw GeneralMonsterAttackPatternRight1376 dw GeneralMonsterAttackPatternLeft1377 dw GeneralMonsterAttackPatternLeftUp1378 dw GeneralMonsterAttackPatternLeftDown1379 dw GeneralMonsterAttackPatternRightUp1380 dw GeneralMonsterAttackPatternRightDown1381 db BattleMonsterSpriteSheet5Block1382 db 32 1383 db 32+08 1384 db GoemonUnitLevel4CostGold 1385 db GoemonUnitLevel4CostGems 1386 db GoemonUnitLevel4CostRubies 1387 db GoemonUnitLevel4HP 1388 db GoemonUnitLevel4Speed 1389 db GoemonUnitLevel4Attack 1390 db GoemonUnitLevel4Defense 1391 db GoemonUnitLevel4Growth 1392 db GoemonUnitLevel4Damage 1393 db 000 1394 db "Official",255,"   "1396Monster057Table: 1397 dw Monster057Idle1398 dw Monster057Move1399 dw GeneralMonsterAttackPatternRight1400 dw GeneralMonsterAttackPatternLeft1401 dw GeneralMonsterAttackPatternLeftUp1402 dw GeneralMonsterAttackPatternLeftDown1403 dw GeneralMonsterAttackPatternRightUp1404 dw GeneralMonsterAttackPatternRightDown1405 db BattleMonsterSpriteSheet5Block1406 db 32 1407 db 32+08 1408 db GoemonUnitLevel2CostGold 1409 db GoemonUnitLevel2CostGems 1410 db GoemonUnitLevel2CostRubies 1411 db GoemonUnitLevel2HP 1412 db GoemonUnitLevel2Speed 1413 db GoemonUnitLevel2Attack 1414 db GoemonUnitLevel2Defense 1415 db GoemonUnitLevel2Growth 1416 db GoemonUnitLevel2Damage 1417 db 000 1418 db "Kasa Obake",255," "1420Monster058Table: 1421 dw Monster058Idle1422 dw Monster058Move1423 dw Monster058AttackPatternRight1424 dw Monster058AttackPatternLeft1425 dw Monster058AttackPatternLeftUp1426 dw Monster058AttackPatternLeftDown1427 dw Monster058AttackPatternRightUp1428 dw Monster058AttackPatternRightDown1429 db BattleMonsterSpriteSheet5Block1430 db 32 1431 db 32+08 1432 db GoemonUnitLevel2CostGold 1433 db GoemonUnitLevel2CostGems 1434 db GoemonUnitLevel2CostRubies 1435 db GoemonUnitLevel2HP 1436 db GoemonUnitLevel2Speed 1437 db GoemonUnitLevel2Attack 1438 db GoemonUnitLevel2Defense 1439 db GoemonUnitLevel2Growth 1440 db GoemonUnitLevel2Damage 1441 db 000 1442 db "Fishmonger",255," "1444Monster059Table: 1445 dw Monster059Idle1446 dw Monster059Move1447 dw GeneralMonsterAttackPatternRight1448 dw GeneralMonsterAttackPatternLeft1449 dw GeneralMonsterAttackPatternLeftUp1450 dw GeneralMonsterAttackPatternLeftDown1451 dw GeneralMonsterAttackPatternRightUp1452 dw GeneralMonsterAttackPatternRightDown1453 db BattleMonsterSpriteSheet5Block1454 db 32 1455 db 32+08 1456 db GoemonUnitLevel6CostGold 1457 db GoemonUnitLevel6CostGems 1458 db GoemonUnitLevel6CostRubies 1459 db GoemonUnitLevel6HP 1460 db GoemonUnitLevel6Speed 1461 db GoemonUnitLevel6Attack 1462 db GoemonUnitLevel6Defense 1463 db GoemonUnitLevel6Growth 1464 db GoemonUnitLevel6Damage 1465 db 000 1466 db "Ronin",255,"      "1468Monster060Table: 1469 dw Monster060Idle1470 dw Monster060Move1471 dw GeneralMonsterAttackPatternRight1472 dw GeneralMonsterAttackPatternLeft1473 dw GeneralMonsterAttackPatternLeftUp1474 dw GeneralMonsterAttackPatternLeftDown1475 dw GeneralMonsterAttackPatternRightUp1476 dw GeneralMonsterAttackPatternRightDown1477 db BattleMonsterSpriteSheet5Block1478 db 32 1479 db 32+08 1480 db GoemonUnitLevel3CostGold 1481 db GoemonUnitLevel3CostGems 1482 db GoemonUnitLevel3CostRubies 1483 db GoemonUnitLevel3HP 1484 db GoemonUnitLevel3Speed 1485 db GoemonUnitLevel3Attack 1486 db GoemonUnitLevel3Defense 1487 db GoemonUnitLevel3Growth 1488 db GoemonUnitLevel3Damage 1489 db 000 1490 db "Bucket Head",2551492Monster061Table: 1493 dw Monster061Idle1494 dw Monster061Move1495 dw GeneralMonsterAttackPatternRight1496 dw GeneralMonsterAttackPatternLeft1497 dw GeneralMonsterAttackPatternLeftUp1498 dw GeneralMonsterAttackPatternLeftDown1499 dw GeneralMonsterAttackPatternRightUp1500 dw GeneralMonsterAttackPatternRightDown1501 db BattleMonsterSpriteSheet5Block1502 db 48 1503 db 32+08 1504 db GoemonUnitLevel5CostGold 1505 db GoemonUnitLevel5CostGems 1506 db GoemonUnitLevel5CostRubies 1507 db GoemonUnitLevel5HP 1508 db GoemonUnitLevel5Speed 1509 db GoemonUnitLevel5Attack 1510 db GoemonUnitLevel5Defense 1511 db GoemonUnitLevel5Growth 1512 db GoemonUnitLevel5Damage 1513 db 000 1514 db "Headmaster",255," "1516Monster062Table: 1517 dw Monster062Idle1518 dw Monster062Move1519 dw Monster062AttackPatternRight1520 dw Monster062AttackPatternLeft1521 dw Monster062AttackPatternLeftUp1522 dw Monster062AttackPatternLeftDown1523 dw Monster062AttackPatternRightUp1524 dw Monster062AttackPatternRightDown1525 db BattleMonsterSpriteSheet5Block1526 db 32 1527 db 32+08 1528 db GoemonUnitLevel1CostGold 1529 db GoemonUnitLevel1CostGems 1530 db GoemonUnitLevel1CostRubies 1531 db GoemonUnitLevel1HP 1532 db GoemonUnitLevel1Speed 1533 db GoemonUnitLevel1Attack 1534 db GoemonUnitLevel1Defense 1535 db GoemonUnitLevel1Growth 1536 db GoemonUnitLevel1Damage 1537 db 000 1538 db "Granola",255,"    "1540Monster063Table: 1541 dw Monster063Idle1542 dw Monster063Move1543 dw GeneralMonsterAttackPatternRight1544 dw GeneralMonsterAttackPatternLeft1545 dw GeneralMonsterAttackPatternLeftUp1546 dw GeneralMonsterAttackPatternLeftDown1547 dw GeneralMonsterAttackPatternRightUp1548 dw GeneralMonsterAttackPatternRightDown1549 db BattleMonsterSpriteSheet4Block1550 db 16 1551 db 16+08 1552 db PsychoWorldUnitLevel2CostGold 1553 db PsychoWorldUnitLevel2CostGems 1554 db PsychoWorldUnitLevel2CostRubies 1555 db PsychoWorldUnitLevel2HP 1556 db PsychoWorldUnitLevel2Speed 1557 db PsychoWorldUnitLevel2Attack 1558 db PsychoWorldUnitLevel2Defense 1559 db PsychoWorldUnitLevel2Growth 1560 db PsychoWorldUnitLevel2Damage 1561 db 000 1562 db "Rouge Gazer",2551564Monster064Table: 1565 dw Monster064Idle1566 dw Monster064Move1567 dw GeneralMonsterAttackPatternRight1568 dw GeneralMonsterAttackPatternLeft1569 dw GeneralMonsterAttackPatternLeftUp1570 dw GeneralMonsterAttackPatternLeftDown1571 dw GeneralMonsterAttackPatternRightUp1572 dw GeneralMonsterAttackPatternRightDown1573 db BattleMonsterSpriteSheet4Block1574 db 16 1575 db 16+08 1576 db PsychoWorldUnitLevel3CostGold 1577 db PsychoWorldUnitLevel3CostGems 1578 db PsychoWorldUnitLevel3CostRubies 1579 db PsychoWorldUnitLevel3HP 1580 db PsychoWorldUnitLevel3Speed 1581 db PsychoWorldUnitLevel3Attack 1582 db PsychoWorldUnitLevel3Defense 1583 db PsychoWorldUnitLevel3Growth 1584 db PsychoWorldUnitLevel3Damage 1585 db 000 1586 db "Glacierling",2551588Monster065Table: 1589 dw Monster065Idle1590 dw Monster065Move1591 dw GeneralMonsterAttackPatternRight1592 dw GeneralMonsterAttackPatternLeft1593 dw GeneralMonsterAttackPatternLeftUp1594 dw GeneralMonsterAttackPatternLeftDown1595 dw GeneralMonsterAttackPatternRightUp1596 dw GeneralMonsterAttackPatternRightDown1597 db BattleMonsterSpriteSheet6Block1598 db 16 1599 db 16+08 1600 db PsychoWorldUnitLevel4CostGold 1601 db PsychoWorldUnitLevel4CostGems 1602 db PsychoWorldUnitLevel4CostRubies 1603 db PsychoWorldUnitLevel4HP 1604 db PsychoWorldUnitLevel4Speed 1605 db PsychoWorldUnitLevel4Attack 1606 db PsychoWorldUnitLevel4Defense 1607 db PsychoWorldUnitLevel4Growth 1608 db PsychoWorldUnitLevel4Damage 1609 db 000 1610 db "Floatwing",255,"  "1612Monster066Table: 1613 dw Monster066Idle1614 dw Monster066Move1615 dw GeneralMonsterAttackPatternRight1616 dw GeneralMonsterAttackPatternLeft1617 dw GeneralMonsterAttackPatternLeftUp1618 dw GeneralMonsterAttackPatternLeftDown1619 dw GeneralMonsterAttackPatternRightUp1620 dw GeneralMonsterAttackPatternRightDown1621 db BattleMonsterSpriteSheet3Block1622 db 16 1623 db 16+08 1624 db PsychoWorldUnitLevel1CostGold 1625 db PsychoWorldUnitLevel1CostGems 1626 db PsychoWorldUnitLevel1CostRubies 1627 db PsychoWorldUnitLevel1HP 1628 db PsychoWorldUnitLevel1Speed 1629 db PsychoWorldUnitLevel1Attack 1630 db PsychoWorldUnitLevel1Defense 1631 db PsychoWorldUnitLevel1Growth 1632 db PsychoWorldUnitLevel1Damage 1633 db 000 1634 db "CrimsonPeek",2551636Monster067Table: 1637 dw Monster067Idle1638 dw Monster067Move1639 dw GeneralMonsterAttackPatternRight1640 dw GeneralMonsterAttackPatternLeft1641 dw GeneralMonsterAttackPatternLeftUp1642 dw GeneralMonsterAttackPatternLeftDown1643 dw GeneralMonsterAttackPatternRightUp1644 dw GeneralMonsterAttackPatternRightDown1645 db BattleMonsterSpriteSheet6Block1646 db 16 1647 db 16+08 1648 db PsychoWorldUnitLevel2CostGold 1649 db PsychoWorldUnitLevel2CostGems 1650 db PsychoWorldUnitLevel2CostRubies 1651 db PsychoWorldUnitLevel2HP 1652 db PsychoWorldUnitLevel2Speed 1653 db PsychoWorldUnitLevel2Attack 1654 db PsychoWorldUnitLevel2Defense 1655 db PsychoWorldUnitLevel2Growth 1656 db PsychoWorldUnitLevel2Damage 1657 db 000 1658 db "Fernling",255,"   "1660Monster068Table: 1661 dw Monster068Idle1662 dw Monster068Move1663 dw GeneralMonsterAttackPatternRight1664 dw GeneralMonsterAttackPatternLeft1665 dw GeneralMonsterAttackPatternLeftUp1666 dw GeneralMonsterAttackPatternLeftDown1667 dw GeneralMonsterAttackPatternRightUp1668 dw GeneralMonsterAttackPatternRightDown1669 db BattleMonsterSpriteSheet6Block1670 db 32 1671 db 32+08 1672 db PsychoWorldUnitLevel6CostGold 1673 db PsychoWorldUnitLevel6CostGems 1674 db PsychoWorldUnitLevel6CostRubies 1675 db PsychoWorldUnitLevel6HP 1676 db PsychoWorldUnitLevel6Speed 1677 db PsychoWorldUnitLevel6Attack 1678 db PsychoWorldUnitLevel6Defense 1679 db PsychoWorldUnitLevel6Growth 1680 db PsychoWorldUnitLevel6Damage 1681 db 000 1682 db "Bladezilla",255," "1684Monster069Table: 1685 dw Monster069Idle1686 dw Monster069Move1687 dw Monster069AttackPatternRight1688 dw Monster069AttackPatternLeft1689 dw Monster069AttackPatternLeft1690 dw Monster069AttackPatternLeft1691 dw Monster069AttackPatternRight1692 dw Monster069AttackPatternRight1693 db BattleMonsterSpriteSheet6Block1694 db 32 1695 db 32+08 1696 db PsychoWorldUnitLevel5CostGold 1697 db PsychoWorldUnitLevel5CostGems 1698 db PsychoWorldUnitLevel5CostRubies 1699 db PsychoWorldUnitLevel5HP 1700 db PsychoWorldUnitLevel5Speed 1701 db PsychoWorldUnitLevel5Attack 1702 db PsychoWorldUnitLevel5Defense 1703 db PsychoWorldUnitLevel5Growth 1704 db PsychoWorldUnitLevel5Damage 1705 db RangedMonster 1706 db "Spitvine",255,"   "1708Monster070Table: 1709 dw Monster070Idle1710 dw Monster070Move1711 dw GeneralMonsterAttackPatternRight1712 dw GeneralMonsterAttackPatternLeft1713 dw GeneralMonsterAttackPatternLeftUp1714 dw GeneralMonsterAttackPatternLeftDown1715 dw GeneralMonsterAttackPatternRightUp1716 dw GeneralMonsterAttackPatternRightDown1717 db BattleMonsterSpriteSheet4Block1718 db 16 1719 db 16+08 1720 db PsychoWorldUnitLevel1CostGold 1721 db PsychoWorldUnitLevel1CostGems 1722 db PsychoWorldUnitLevel1CostRubies 1723 db PsychoWorldUnitLevel1HP 1724 db PsychoWorldUnitLevel1Speed 1725 db PsychoWorldUnitLevel1Attack 1726 db PsychoWorldUnitLevel1Defense 1727 db PsychoWorldUnitLevel1Growth 1728 db PsychoWorldUnitLevel1Damage 1729 db 000 1730 db "OptiLeaper",255," "1732Monster071Table: 1733 dw Monster071Idle1734 dw Monster071Move1735 dw GeneralMonsterAttackPatternRight1736 dw GeneralMonsterAttackPatternLeft1737 dw GeneralMonsterAttackPatternLeftUp1738 dw GeneralMonsterAttackPatternLeftDown1739 dw GeneralMonsterAttackPatternRightUp1740 dw GeneralMonsterAttackPatternRightDown1741 db BattleMonsterSpriteSheet2Block1742 db 64 1743 db 64+04 1744 db BubbleBobbleGroupAUnitLevel6CostGold 1745 db BubbleBobbleGroupAUnitLevel6CostGems 1746 db BubbleBobbleGroupAUnitLevel6CostRubies 1747 db BubbleBobbleGroupAUnitLevel6HP 1748 db BubbleBobbleGroupAUnitLevel6Speed 1749 db BubbleBobbleGroupAUnitLevel6Attack 1750 db BubbleBobbleGroupAUnitLevel6Defense 1751 db BubbleBobbleGroupAUnitLevel6Growth 1752 db BubbleBobbleGroupAUnitLevel6Damage 1753 db 000 1754 db "Boo",255,"        "1756Monster072Table: 1757 dw Monster072Idle1758 dw Monster072Move1759 dw GeneralMonsterAttackPatternRight1760 dw GeneralMonsterAttackPatternLeft1761 dw GeneralMonsterAttackPatternLeftUp1762 dw GeneralMonsterAttackPatternLeftDown1763 dw GeneralMonsterAttackPatternRightUp1764 dw GeneralMonsterAttackPatternRightDown1765 db BattleMonsterSpriteSheet6Block1766 db 32 1767 db 32+08 1768 db KingKongUnitLevel6CostGold 1769 db KingKongUnitLevel6CostGems 1770 db KingKongUnitLevel6CostRubies 1771 db KingKongUnitLevel6HP 1772 db KingKongUnitLevel6Speed 1773 db KingKongUnitLevel6Attack 1774 db KingKongUnitLevel6Defense 1775 db KingKongUnitLevel6Growth 1776 db KingKongUnitLevel6Damage 1777 db 000 1778 db "King Kong",255,"  "1780Monster073Table: 1781 dw Monster073Idle1782 dw Monster073Move1783 dw GeneralMonsterAttackPatternRight1784 dw GeneralMonsterAttackPatternLeft1785 dw GeneralMonsterAttackPatternLeftUp1786 dw GeneralMonsterAttackPatternLeftDown1787 dw GeneralMonsterAttackPatternRightUp1788 dw GeneralMonsterAttackPatternRightDown1789 db BattleMonsterSpriteSheet6Block1790 db 32 1791 db 32+08 1792 db KingKongUnitLevel5CostGold 1793 db KingKongUnitLevel5CostGems 1794 db KingKongUnitLevel5CostRubies 1795 db KingKongUnitLevel5HP 1796 db KingKongUnitLevel5Speed 1797 db KingKongUnitLevel5Attack 1798 db KingKongUnitLevel5Defense 1799 db KingKongUnitLevel5Growth 1800 db KingKongUnitLevel5Damage 1801 db 000 1802 db "RockGoliath",2551804Monster074Table: 1805 dw Monster074Idle1806 dw Monster074Move1807 dw GeneralMonsterAttackPatternRight1808 dw GeneralMonsterAttackPatternLeft1809 dw GeneralMonsterAttackPatternLeftUp1810 dw GeneralMonsterAttackPatternLeftDown1811 dw GeneralMonsterAttackPatternRightUp1812 dw GeneralMonsterAttackPatternRightDown1813 db BattleMonsterSpriteSheet6Block1814 db 16 1815 db 16+08 1816 db KingKongUnitLevel4CostGold 1817 db KingKongUnitLevel4CostGems 1818 db KingKongUnitLevel4CostRubies 1819 db KingKongUnitLevel4HP 1820 db KingKongUnitLevel4Speed 1821 db KingKongUnitLevel4Attack 1822 db KingKongUnitLevel4Defense 1823 db KingKongUnitLevel4Growth 1824 db KingKongUnitLevel4Damage 1825 db 000 1826 db "Stone Guard",2551827 1828Monster075Table: 1829 dw Monster075Idle1830 dw Monster075Move1831 dw GeneralMonsterAttackPatternRight1832 dw GeneralMonsterAttackPatternLeft1833 dw GeneralMonsterAttackPatternLeftUp1834 dw GeneralMonsterAttackPatternLeftDown1835 dw GeneralMonsterAttackPatternRightUp1836 dw GeneralMonsterAttackPatternRightDown1837 db BattleMonsterSpriteSheet6Block1838 db 16 1839 db 16+08 1840 db KingKongUnitLevel2CostGold 1841 db KingKongUnitLevel2CostGems 1842 db KingKongUnitLevel2CostRubies 1843 db KingKongUnitLevel2HP 1844 db KingKongUnitLevel2Speed 1845 db KingKongUnitLevel2Attack 1846 db KingKongUnitLevel2Defense 1847 db KingKongUnitLevel2Growth 1848 db KingKongUnitLevel2Damage 1849 db 000 1850 db "LimeCritter",2551851 1852Monster076Table: 1853 dw Monster076Idle1854 dw Monster076Move1855 dw GeneralMonsterAttackPatternRight1856 dw GeneralMonsterAttackPatternLeft1857 dw GeneralMonsterAttackPatternLeftUp1858 dw GeneralMonsterAttackPatternLeftDown1859 dw GeneralMonsterAttackPatternRightUp1860 dw GeneralMonsterAttackPatternRightDown1861 db BattleMonsterSpriteSheet6Block1862 db 16 1863 db 16+08 1864 db KingKongUnitLevel3CostGold 1865 db KingKongUnitLevel3CostGems 1866 db KingKongUnitLevel3CostRubies 1867 db KingKongUnitLevel3HP 1868 db KingKongUnitLevel3Speed 1869 db KingKongUnitLevel3Attack 1870 db KingKongUnitLevel3Defense 1871 db KingKongUnitLevel3Growth 1872 db KingKongUnitLevel3Damage 1873 db 000 1874 db "Salmon Hog",255," "1876Monster077Table: 1877 dw Monster077Idle1878 dw Monster077Move1879 dw GeneralMonsterAttackPatternRight1880 dw GeneralMonsterAttackPatternLeft1881 dw GeneralMonsterAttackPatternLeftUp1882 dw GeneralMonsterAttackPatternLeftDown1883 dw GeneralMonsterAttackPatternRightUp1884 dw GeneralMonsterAttackPatternRightDown1885 db BattleMonsterSpriteSheet3Block1886 db 16 1887 db 16+08 1888 db KingKongUnitLevel1CostGold 1889 db KingKongUnitLevel1CostGems 1890 db KingKongUnitLevel1CostRubies 1891 db KingKongUnitLevel1HP 1892 db KingKongUnitLevel1Speed 1893 db KingKongUnitLevel1Attack 1894 db KingKongUnitLevel1Defense 1895 db KingKongUnitLevel1Growth 1896 db KingKongUnitLevel1Damage 1897 db 000 1898 db "Swamp Goop",255," "1908Monster078Table: 1909 dw Monster078Idle1910 dw Monster078Move1911 dw GeneralMonsterAttackPatternRight1912 dw GeneralMonsterAttackPatternLeft1913 dw GeneralMonsterAttackPatternLeftUp1914 dw GeneralMonsterAttackPatternLeftDown1915 dw GeneralMonsterAttackPatternRightUp1916 dw GeneralMonsterAttackPatternRightDown1917 db BattleMonsterSpriteSheet5Block1918 db 16 1919 db 16+08 1920 db GolvelliusUnitLevel3CostGold 1921 db GolvelliusUnitLevel3CostGems 1922 db GolvelliusUnitLevel3CostRubies 1923 db GolvelliusUnitLevel3HP 1924 db GolvelliusUnitLevel3Speed 1925 db GolvelliusUnitLevel3Attack 1926 db GolvelliusUnitLevel3Defense 1927 db GolvelliusUnitLevel3Growth 1928 db GolvelliusUnitLevel3Damage 1929 db 000 1930 db "Bat",255,"        "1932Monster079Table: 1933 dw Monster079Idle1934 dw Monster079Move1935 dw GeneralMonsterAttackPatternRight1936 dw GeneralMonsterAttackPatternLeft1937 dw GeneralMonsterAttackPatternLeftUp1938 dw GeneralMonsterAttackPatternLeftDown1939 dw GeneralMonsterAttackPatternRightUp1940 dw GeneralMonsterAttackPatternRightDown1941 db BattleMonsterSpriteSheet6Block1942 db 16 1943 db 16+08 1944 db GolvelliusUnitLevel2CostGold 1945 db GolvelliusUnitLevel2CostGems 1946 db GolvelliusUnitLevel2CostRubies 1947 db GolvelliusUnitLevel2HP 1948 db GolvelliusUnitLevel2Speed 1949 db GolvelliusUnitLevel2Attack 1950 db GolvelliusUnitLevel2Defense 1951 db GolvelliusUnitLevel2Growth 1952 db GolvelliusUnitLevel2Damage 1953 db 000 1954 db "Olive Boa",255,"  "1956Monster080Table: 1957 dw Monster080Idle1958 dw Monster080Move1959 dw GeneralMonsterAttackPatternRight1960 dw GeneralMonsterAttackPatternLeft1961 dw GeneralMonsterAttackPatternLeftUp1962 dw GeneralMonsterAttackPatternLeftDown1963 dw GeneralMonsterAttackPatternRightUp1964 dw GeneralMonsterAttackPatternRightDown1965 db BattleMonsterSpriteSheet5Block1966 db 16 1967 db 08+08 1968 db GolvelliusUnitLevel1CostGold 1969 db GolvelliusUnitLevel1CostGems 1970 db GolvelliusUnitLevel1CostRubies 1971 db GolvelliusUnitLevel1HP 1972 db GolvelliusUnitLevel1Speed 1973 db GolvelliusUnitLevel1Attack 1974 db GolvelliusUnitLevel1Defense 1975 db GolvelliusUnitLevel1Growth 1976 db GolvelliusUnitLevel1Damage 1977 db 000 1978 db "SilkenLarva",2551980Monster081Table: 1981 dw Monster081Idle1982 dw Monster081Move1983 dw GeneralMonsterAttackPatternRight1984 dw GeneralMonsterAttackPatternLeft1985 dw GeneralMonsterAttackPatternLeftUp1986 dw GeneralMonsterAttackPatternLeftDown1987 dw GeneralMonsterAttackPatternRightUp1988 dw GeneralMonsterAttackPatternRightDown1989 db BattleMonsterSpriteSheet6Block1990 db 16 1991 db 16+08 1992 db GolvelliusUnitLevel2CostGold 1993 db GolvelliusUnitLevel2CostGems 1994 db GolvelliusUnitLevel2CostRubies 1995 db GolvelliusUnitLevel2HP 1996 db GolvelliusUnitLevel2Speed 1997 db GolvelliusUnitLevel2Attack 1998 db GolvelliusUnitLevel2Defense 1999 db GolvelliusUnitLevel2Growth 2000 db GolvelliusUnitLevel2Damage 2001 db 000 2002 db "ChocoTusker",2552004Monster082Table: 2005 dw Monster082Idle2006 dw Monster082Move2007 dw GeneralMonsterAttackPatternRight2008 dw GeneralMonsterAttackPatternLeft2009 dw GeneralMonsterAttackPatternLeftUp2010 dw GeneralMonsterAttackPatternLeftDown2011 dw GeneralMonsterAttackPatternRightUp2012 dw GeneralMonsterAttackPatternRightDown2013 db BattleMonsterSpriteSheet5Block2014 db 16 2015 db 08+08 2016 db GolvelliusUnitLevel1CostGold 2017 db GolvelliusUnitLevel1CostGems 2018 db GolvelliusUnitLevel1CostRubies 2019 db GolvelliusUnitLevel1HP 2020 db GolvelliusUnitLevel1Speed 2021 db GolvelliusUnitLevel1Attack 2022 db GolvelliusUnitLevel1Defense 2023 db GolvelliusUnitLevel1Growth 2024 db GolvelliusUnitLevel1Damage 2025 db 000 2026 db "JadeWormlet",2552027 2028Monster083Table: 2029 dw Monster083Idle2030 dw Monster083Move2031 dw GeneralMonsterAttackPatternRight2032 dw GeneralMonsterAttackPatternLeft2033 dw GeneralMonsterAttackPatternLeftUp2034 dw GeneralMonsterAttackPatternLeftDown2035 dw GeneralMonsterAttackPatternRightUp2036 dw GeneralMonsterAttackPatternRightDown2037 db BattleMonsterSpriteSheet6Block2038 db 16 2039 db 16+08 2040 db GolvelliusUnitLevel3CostGold 2041 db GolvelliusUnitLevel3CostGems 2042 db GolvelliusUnitLevel3CostRubies 2043 db GolvelliusUnitLevel3HP 2044 db GolvelliusUnitLevel3Speed 2045 db GolvelliusUnitLevel3Attack 2046 db GolvelliusUnitLevel3Defense 2047 db GolvelliusUnitLevel3Growth 2048 db GolvelliusUnitLevel3Damage 2049 db 000 2050 db "Sable Raven",2552051 2052Monster084Table: 2053 dw Monster084Idle2054 dw Monster084Move2055 dw GeneralMonsterAttackPatternRight2056 dw GeneralMonsterAttackPatternLeft2057 dw GeneralMonsterAttackPatternLeftUp2058 dw GeneralMonsterAttackPatternLeftDown2059 dw GeneralMonsterAttackPatternRightUp2060 dw GeneralMonsterAttackPatternRightDown2061 db BattleMonsterSpriteSheet4Block2062 db 16 2063 db 24+08 2064 db GolvelliusUnitLevel4CostGold 2065 db GolvelliusUnitLevel4CostGems 2066 db GolvelliusUnitLevel4CostRubies 2067 db GolvelliusUnitLevel4HP 2068 db GolvelliusUnitLevel4Speed 2069 db GolvelliusUnitLevel4Attack 2070 db GolvelliusUnitLevel4Defense 2071 db GolvelliusUnitLevel4Growth 2072 db GolvelliusUnitLevel4Damage 2073 db 000 2074 db "Headless",255,"   "2076Monster085Table: 2077 dw Monster085Idle2078 dw Monster085Move2079 dw GeneralMonsterAttackPatternRight2080 dw GeneralMonsterAttackPatternLeft2081 dw GeneralMonsterAttackPatternLeftUp2082 dw GeneralMonsterAttackPatternLeftDown2083 dw GeneralMonsterAttackPatternRightUp2084 dw GeneralMonsterAttackPatternRightDown2085 db BattleMonsterSpriteSheet4Block2086 db 16 2087 db 32+08 2088 db GolvelliusUnitLevel5CostGold 2089 db GolvelliusUnitLevel5CostGems 2090 db GolvelliusUnitLevel5CostRubies 2091 db GolvelliusUnitLevel5HP 2092 db GolvelliusUnitLevel5Speed 2093 db GolvelliusUnitLevel5Attack 2094 db GolvelliusUnitLevel5Defense 2095 db GolvelliusUnitLevel5Growth 2096 db GolvelliusUnitLevel5Damage 2097 db 000 2098 db "Seraph",255,"     "2100Monster086Table: 2101 dw Monster086Idle2102 dw Monster086Move2103 dw GeneralMonsterAttackPatternRight2104 dw GeneralMonsterAttackPatternLeft2105 dw GeneralMonsterAttackPatternLeftUp2106 dw GeneralMonsterAttackPatternLeftDown2107 dw GeneralMonsterAttackPatternRightUp2108 dw GeneralMonsterAttackPatternRightDown2109 db BattleMonsterSpriteSheet7Block2110 db 56 2111 db 64+04 2112 db GolvelliusUnitLevel6CostGold 2113 db GolvelliusUnitLevel6CostGems 2114 db GolvelliusUnitLevel6CostRubies 2115 db GolvelliusUnitLevel6HP 2116 db GolvelliusUnitLevel6Speed 2117 db GolvelliusUnitLevel6Attack 2118 db GolvelliusUnitLevel6Defense 2119 db GolvelliusUnitLevel6Growth 2120 db GolvelliusUnitLevel6Damage 2121 db 000 2122 db "Flame Cobra",2552123 2127Monster087Table: 2128 dw Monster087Idle2129 dw Monster087Move2130 dw GeneralMonsterAttackPatternRight2131 dw GeneralMonsterAttackPatternLeft2132 dw GeneralMonsterAttackPatternLeftUp2133 dw GeneralMonsterAttackPatternLeftDown2134 dw GeneralMonsterAttackPatternRightUp2135 dw GeneralMonsterAttackPatternRightDown2136 db BattleMonsterSpriteSheet6Block2137 db 16 2138 db 32+08 2139 db RandomAUnitLevel4CostGold 2140 db RandomAUnitLevel4CostGems 2141 db RandomAUnitLevel4CostRubies 2142 db RandomAUnitLevel4HP 2143 db RandomAUnitLevel4Speed 2144 db RandomAUnitLevel4Attack 2145 db RandomAUnitLevel4Defense 2146 db RandomAUnitLevel4Growth 2147 db RandomAUnitLevel4Damage 2148 db 000 2149 db "Visage",255,"     "2150 2151Monster088Table: 2152 dw Monster088Idle2153 dw Monster088Move2154 dw GeneralMonsterAttackPatternRight2155 dw GeneralMonsterAttackPatternLeft2156 dw GeneralMonsterAttackPatternLeftUp2157 dw GeneralMonsterAttackPatternLeftDown2158 dw GeneralMonsterAttackPatternRightUp2159 dw GeneralMonsterAttackPatternRightDown2160 db BattleMonsterSpriteSheet6Block2161 db 16 2162 db 32+08 2163 db RandomAUnitLevel2CostGold 2164 db RandomAUnitLevel2CostGems 2165 db RandomAUnitLevel2CostRubies 2166 db RandomAUnitLevel2HP 2167 db RandomAUnitLevel2Speed 2168 db RandomAUnitLevel2Attack 2169 db RandomAUnitLevel2Defense 2170 db RandomAUnitLevel2Growth 2171 db RandomAUnitLevel2Damage 2172 db 000 2173 db "JungleBrute",2552174 2175Monster089Table: 2176 dw Monster089Idle2177 dw Monster089Move2178 dw GeneralMonsterAttackPatternRight2179 dw GeneralMonsterAttackPatternLeft2180 dw GeneralMonsterAttackPatternLeftUp2181 dw GeneralMonsterAttackPatternLeftDown2182 dw GeneralMonsterAttackPatternRightUp2183 dw GeneralMonsterAttackPatternRightDown2184 db BattleMonsterSpriteSheet6Block2185 db 16 2186 db 32+08 2187 db CastleVaniaUnitLevel1CostGold 2188 db CastleVaniaUnitLevel1CostGems 2189 db CastleVaniaUnitLevel1CostRubies 2190 db CastleVaniaUnitLevel1HP 2191 db CastleVaniaUnitLevel1Speed 2192 db CastleVaniaUnitLevel1Attack 2193 db CastleVaniaUnitLevel1Defense 2194 db CastleVaniaUnitLevel1Growth 2195 db CastleVaniaUnitLevel1Damage 2196 db 000 2197 db "Lurcher",255,"    "2201Monster090Table: 2202 dw Monster090Idle2203 dw Monster090Move2204 dw GeneralMonsterAttackPatternRight2205 dw GeneralMonsterAttackPatternLeft2206 dw GeneralMonsterAttackPatternLeftUp2207 dw GeneralMonsterAttackPatternLeftDown2208 dw GeneralMonsterAttackPatternRightUp2209 dw GeneralMonsterAttackPatternRightDown2210 db BattleMonsterSpriteSheet5Block2211 db 16 2212 db 08+08 2213 db SolidSnakeUnitLevel1CostGold 2214 db SolidSnakeUnitLevel1CostGems 2215 db SolidSnakeUnitLevel1CostRubies 2216 db SolidSnakeUnitLevel1HP 2217 db SolidSnakeUnitLevel1Speed 2218 db SolidSnakeUnitLevel1Attack 2219 db SolidSnakeUnitLevel1Defense 2220 db SolidSnakeUnitLevel1Growth 2221 db SolidSnakeUnitLevel1Damage 2222 db 000 2223 db "Scavenger",255,"  "2225Monster091Table: 2226 dw Monster091Idle2227 dw Monster091Move2228 dw GeneralMonsterAttackPatternRight2229 dw GeneralMonsterAttackPatternLeft2230 dw GeneralMonsterAttackPatternLeftUp2231 dw GeneralMonsterAttackPatternLeftDown2232 dw GeneralMonsterAttackPatternRightUp2233 dw GeneralMonsterAttackPatternRightDown2234 db BattleMonsterSpriteSheet6Block2235 db 16 2236 db 32+08 2237 db SolidSnakeUnitLevel2CostGold 2238 db SolidSnakeUnitLevel2CostGems 2239 db SolidSnakeUnitLevel2CostRubies 2240 db SolidSnakeUnitLevel2HP 2241 db SolidSnakeUnitLevel2Speed 2242 db SolidSnakeUnitLevel2Attack 2243 db SolidSnakeUnitLevel2Defense 2244 db SolidSnakeUnitLevel2Growth 2245 db SolidSnakeUnitLevel2Damage 2246 db 000 2247 db "Running Man",2552248 2249Monster092Table: 2250 dw Monster092Idle2251 dw Monster092Move2252 dw Monster092AttackPatternRight2253 dw Monster092AttackPatternLeft2254 dw Monster092AttackPatternLeft2255 dw Monster092AttackPatternLeft2256 dw Monster092AttackPatternRight2257 dw Monster092AttackPatternRight2258 db BattleMonsterSpriteSheet6Block2259 db 16 2260 db 32+08 2261 db SolidSnakeUnitLevel4CostGold 2262 db SolidSnakeUnitLevel4CostGems 2263 db SolidSnakeUnitLevel4CostRubies 2264 db SolidSnakeUnitLevel4HP 2265 db SolidSnakeUnitLevel4Speed 2266 db SolidSnakeUnitLevel4Attack 2267 db SolidSnakeUnitLevel4Defense 2268 db SolidSnakeUnitLevel4Growth 2269 db SolidSnakeUnitLevel4Damage 2270 db RangedMonster 2271 db "Trooper",255,"    "2273Monster093Table: 2274 dw Monster093Idle2275 dw Monster093Move2276 dw Monster093AttackPatternRight2277 dw Monster093AttackPatternLeft2278 dw Monster093AttackPatternLeft2279 dw Monster093AttackPatternLeft2280 dw Monster093AttackPatternRight2281 dw Monster093AttackPatternRight2282 db BattleMonsterSpriteSheet6Block2283 db 16 2284 db 32+08 2285 db SolidSnakeUnitLevel5CostGold 2286 db SolidSnakeUnitLevel5CostGems 2287 db SolidSnakeUnitLevel5CostRubies 2288 db SolidSnakeUnitLevel5HP 2289 db SolidSnakeUnitLevel5Speed 2290 db SolidSnakeUnitLevel5Attack 2291 db SolidSnakeUnitLevel5Defense 2292 db SolidSnakeUnitLevel5Growth 2293 db SolidSnakeUnitLevel5Damage 2294 db RangedMonster 2295 db "Antigas Man",2552296 2297Monster094Table: 2298 dw Monster094Idle2299 dw Monster094Move2300 dw Monster094AttackPatternRight2301 dw Monster094AttackPatternLeft2302 dw Monster094AttackPatternLeft2303 dw Monster094AttackPatternLeft2304 dw Monster094AttackPatternRight2305 dw Monster094AttackPatternRight2306 db BattleMonsterSpriteSheet6Block2307 db 16 2308 db 32+08 2309 db SolidSnakeUnitLevel3CostGold 2310 db SolidSnakeUnitLevel3CostGems 2311 db SolidSnakeUnitLevel3CostRubies 2312 db SolidSnakeUnitLevel3HP 2313 db SolidSnakeUnitLevel3Speed 2314 db SolidSnakeUnitLevel3Attack 2315 db SolidSnakeUnitLevel3Defense 2316 db SolidSnakeUnitLevel3Growth 2317 db SolidSnakeUnitLevel3Damage 2318 db RangedMonster 2319 db "Footman",255,"    "2327Monster095Table: 2328 dw Monster095Idle2329 dw Monster095Move2330 dw Monster095AttackPatternRight2331 dw Monster095AttackPatternLeft2332 dw Monster095AttackPatternLeftUp2333 dw Monster095AttackPatternLeftDown2334 dw Monster095AttackPatternRightUp2335 dw Monster095AttackPatternRightDown2336 db BattleMonsterSpriteSheet8Block2337 db 16 2338 db 24+08 2339 db Ys3UnitLevel5CostGold 2340 db Ys3UnitLevel5CostGems 2341 db Ys3UnitLevel5CostRubies 2342 db Ys3UnitLevel5HP 2343 db Ys3UnitLevel5Speed 2344 db Ys3UnitLevel5Attack 2345 db Ys3UnitLevel5Defense 2346 db Ys3UnitLevel5Growth 2347 db Ys3UnitLevel5Damage 2348 db 000 2349 db "Geld",255,"       "2351Monster096Table: 2352 dw Monster096Idle2353 dw Monster096Move2354 dw Monster096AttackPatternRight2355 dw Monster096AttackPatternLeft2356 dw Monster096AttackPatternLeftUp2357 dw Monster096AttackPatternLeftDown2358 dw Monster096AttackPatternRightUp2359 dw Monster096AttackPatternRightDown2360 db BattleMonsterSpriteSheet8Block2361 db 32 2362 db 24+08 2363 db Ys3UnitLevel4CostGold 2364 db Ys3UnitLevel4CostGems 2365 db Ys3UnitLevel4CostRubies 2366 db Ys3UnitLevel4HP 2367 db Ys3UnitLevel4Speed 2368 db Ys3UnitLevel4Attack 2369 db Ys3UnitLevel4Defense 2370 db Ys3UnitLevel4Growth 2371 db Ys3UnitLevel4Damage 2372 db 000 2373 db "Raddel",255,"     "2374 2375Monster097Table: 2376 dw Monster097Idle2377 dw Monster097Move2378 dw GeneralMonsterAttackPatternRight2379 dw GeneralMonsterAttackPatternLeft2380 dw GeneralMonsterAttackPatternLeftUp2381 dw GeneralMonsterAttackPatternLeftDown2382 dw GeneralMonsterAttackPatternRightUp2383 dw GeneralMonsterAttackPatternRightDown2384 db BattleMonsterSpriteSheet8Block2385 db 16 2386 db 24+08 2387 db Ys3UnitLevel3CostGold 2388 db Ys3UnitLevel3CostGems 2389 db Ys3UnitLevel3CostRubies 2390 db Ys3UnitLevel3HP 2391 db Ys3UnitLevel3Speed 2392 db Ys3UnitLevel3Attack 2393 db Ys3UnitLevel3Defense 2394 db Ys3UnitLevel3Growth 2395 db Ys3UnitLevel3Damage 2396 db 000 2397 db "Bikmorl",255,"    "2398 2399Monster098Table: 2400 dw Monster098Idle2401 dw Monster098Move2402 dw GeneralMonsterAttackPatternRight2403 dw GeneralMonsterAttackPatternLeft2404 dw GeneralMonsterAttackPatternLeftUp2405 dw GeneralMonsterAttackPatternLeftDown2406 dw GeneralMonsterAttackPatternRightUp2407 dw GeneralMonsterAttackPatternRightDown2408 db BattleMonsterSpriteSheet8Block2409 db 16 2410 db 08+08 2411 db Ys3UnitLevel1CostGold 2412 db Ys3UnitLevel1CostGems 2413 db Ys3UnitLevel1CostRubies 2414 db Ys3UnitLevel1HP 2415 db Ys3UnitLevel1Speed 2416 db Ys3UnitLevel1Attack 2417 db Ys3UnitLevel1Defense 2418 db Ys3UnitLevel1Growth 2419 db Ys3UnitLevel1Damage 2420 db 000 2421 db "Slime",255,"      "2422 2423Monster099Table: 2424 dw Monster099Idle2425 dw Monster099Move2426 dw GeneralMonsterAttackPatternRight2427 dw GeneralMonsterAttackPatternLeft2428 dw GeneralMonsterAttackPatternLeftUp2429 dw GeneralMonsterAttackPatternLeftDown2430 dw GeneralMonsterAttackPatternRightUp2431 dw GeneralMonsterAttackPatternRightDown2432 db BattleMonsterSpriteSheet8Block2433 db 16 2434 db 24+08 2435 db Ys3UnitLevel2CostGold 2436 db Ys3UnitLevel2CostGems 2437 db Ys3UnitLevel2CostRubies 2438 db Ys3UnitLevel2HP 2439 db Ys3UnitLevel2Speed 2440 db Ys3UnitLevel2Attack 2441 db Ys3UnitLevel2Defense 2442 db Ys3UnitLevel2Growth 2443 db Ys3UnitLevel2Damage 2444 db 000 2445 db "Keyron",255,"     "2446 2447Monster100Table: 2448 dw Monster100Idle2449 dw Monster100Move2450 dw GeneralMonsterAttackPatternRight2451 dw GeneralMonsterAttackPatternLeft2452 dw GeneralMonsterAttackPatternLeftUp2453 dw GeneralMonsterAttackPatternLeftDown2454 dw GeneralMonsterAttackPatternRightUp2455 dw GeneralMonsterAttackPatternRightDown2456 db BattleMonsterSpriteSheet5Block2457 db 16 2458 db 08+08 2459 db Ys3UnitLevel1CostGold 2460 db Ys3UnitLevel1CostGems 2461 db Ys3UnitLevel1CostRubies 2462 db Ys3UnitLevel1HP 2463 db Ys3UnitLevel1Speed 2464 db Ys3UnitLevel1Attack 2465 db Ys3UnitLevel1Defense 2466 db Ys3UnitLevel1Growth 2467 db Ys3UnitLevel1Damage 2468 db 000 2469 db "Gululmus",255,"   "2470 2471Monster101Table: 2472 dw Monster101Idle2473 dw Monster101Move2474 dw Monster101AttackPatternRight2475 dw Monster101AttackPatternLeft2476 dw Monster101AttackPatternLeftUp2477 dw Monster101AttackPatternLeftDown2478 dw Monster101AttackPatternRightUp2479 dw Monster101AttackPatternRightDown2480 db BattleMonsterSpriteSheet8Block2481 db 48 2482 db 24+08 2483 db Ys3UnitLevel6CostGold 2484 db Ys3UnitLevel6CostGems 2485 db Ys3UnitLevel6CostRubies 2486 db Ys3UnitLevel6HP 2487 db Ys3UnitLevel6Speed 2488 db Ys3UnitLevel6Attack 2489 db Ys3UnitLevel6Defense 2490 db Ys3UnitLevel6Growth 2491 db Ys3UnitLevel6Damage 2492 db 000 2493 db "Sabre Wolf",255," "2494 2500Monster102Table: 2501 dw Monster102Idle2502 dw Monster102Move2503 dw Monster102AttackPatternRight2504 dw Monster102AttackPatternLeft2505 dw Monster102AttackPatternLeftUp2506 dw Monster102AttackPatternLeftDown2507 dw Monster102AttackPatternRightUp2508 dw Monster102AttackPatternRightDown2509 db BattleMonsterSpriteSheet9Block2510 db 32 2511 db 32+08 2512 db YieArKungFuUnitLevel1CostGold 2513 db YieArKungFuUnitLevel1CostGems 2514 db YieArKungFuUnitLevel1CostRubies 2515 db YieArKungFuUnitLevel1HP 2516 db YieArKungFuUnitLevel1Speed 2517 db YieArKungFuUnitLevel1Attack 2518 db YieArKungFuUnitLevel1Defense 2519 db YieArKungFuUnitLevel1Growth 2520 db YieArKungFuUnitLevel1Damage 2521 db 000 2522 db "Lee Young",255,"  "2523 2524Monster103Table: 2525 dw Monster103Idle2526 dw Monster103Move2527 dw Monster103AttackPatternRight2528 dw Monster103AttackPatternLeft2529 dw Monster103AttackPatternLeftUp2530 dw Monster103AttackPatternLeftDown2531 dw Monster103AttackPatternRightUp2532 dw Monster103AttackPatternRightDown2533 db BattleMonsterSpriteSheet9Block2534 db 48 2535 db 40+08 2536 db YieArKungFuUnitLevel2CostGold 2537 db YieArKungFuUnitLevel2CostGems 2538 db YieArKungFuUnitLevel2CostRubies 2539 db YieArKungFuUnitLevel2HP 2540 db YieArKungFuUnitLevel2Speed 2541 db YieArKungFuUnitLevel2Attack 2542 db YieArKungFuUnitLevel2Defense 2543 db YieArKungFuUnitLevel2Growth 2544 db YieArKungFuUnitLevel2Damage 2545 db 000 2546 db "Yen Pei",255,"    "2547 2548Monster104Table: 2549 dw Monster104Idle2550 dw Monster104Move2551 dw Monster104AttackPatternRight2552 dw Monster104AttackPatternLeft2553 dw Monster104AttackPatternLeft2554 dw Monster104AttackPatternLeft2555 dw Monster104AttackPatternRight2556 dw Monster104AttackPatternRight2557 db BattleMonsterSpriteSheet9Block2558 db 32 2559 db 32+08 2560 db YieArKungFuUnitLevel3CostGold 2561 db YieArKungFuUnitLevel3CostGems 2562 db YieArKungFuUnitLevel3CostRubies 2563 db YieArKungFuUnitLevel3HP 2564 db YieArKungFuUnitLevel3Speed 2565 db YieArKungFuUnitLevel3Attack 2566 db YieArKungFuUnitLevel3Defense 2567 db YieArKungFuUnitLevel3Growth 2568 db YieArKungFuUnitLevel3Damage 2569 db RangedMonster 2570 db "Lan Fang",255,"   "2572Monster105Table: 2573 dw Monster105Idle2574 dw Monster105Move2575 dw Monster105AttackPatternRight2576 dw Monster105AttackPatternLeft2577 dw Monster105AttackPatternLeftUp2578 dw Monster105AttackPatternLeftDown2579 dw Monster105AttackPatternRightUp2580 dw Monster105AttackPatternRightDown2581 db BattleMonsterSpriteSheet9Block2582 db 48 2583 db 40+08 2584 db YieArKungFuUnitLevel4CostGold 2585 db YieArKungFuUnitLevel4CostGems 2586 db YieArKungFuUnitLevel4CostRubies 2587 db YieArKungFuUnitLevel4HP 2588 db YieArKungFuUnitLevel4Speed 2589 db YieArKungFuUnitLevel4Attack 2590 db YieArKungFuUnitLevel4Defense 2591 db YieArKungFuUnitLevel4Growth 2592 db YieArKungFuUnitLevel4Damage 2593 db 000 2594 db "Po Chin",255,"    "2596Monster106Table: 2597 dw Monster106Idle2598 dw Monster106Move2599 dw Monster106AttackPatternRight2600 dw Monster106AttackPatternLeft2601 dw Monster106AttackPatternLeftUp2602 dw Monster106AttackPatternLeftDown2603 dw Monster106AttackPatternRightUp2604 dw Monster106AttackPatternRightDown2605 db BattleMonsterSpriteSheet10Block2606 db 48 2607 db 32+08 2608 db YieArKungFuUnitLevel5CostGold 2609 db YieArKungFuUnitLevel5CostGems 2610 db YieArKungFuUnitLevel5CostRubies 2611 db YieArKungFuUnitLevel5HP 2612 db YieArKungFuUnitLevel5Speed 2613 db YieArKungFuUnitLevel5Attack 2614 db YieArKungFuUnitLevel5Defense 2615 db YieArKungFuUnitLevel5Growth 2616 db YieArKungFuUnitLevel5Damage 2617 db 000 2618 db "Wen Hu",255,"     "2620Monster107Table: 2621 dw Monster107Idle2622 dw Monster107Move2623 dw Monster107AttackPatternRight2624 dw Monster107AttackPatternLeft2625 dw Monster107AttackPatternLeftUp2626 dw Monster107AttackPatternLeftDown2627 dw Monster107AttackPatternRightUp2628 dw Monster107AttackPatternRightDown2629 db BattleMonsterSpriteSheet10Block2630 db 48 2631 db 32+08 2632 db YieArKungFuUnitLevel3CostGold 2633 db YieArKungFuUnitLevel3CostGems 2634 db YieArKungFuUnitLevel3CostRubies 2635 db YieArKungFuUnitLevel3HP 2636 db YieArKungFuUnitLevel3Speed 2637 db YieArKungFuUnitLevel3Attack 2638 db YieArKungFuUnitLevel3Defense 2639 db YieArKungFuUnitLevel3Growth 2640 db YieArKungFuUnitLevel3Damage 2641 db 000 2642 db "Wei Chin",255,"   "2644Monster108Table: 2645 dw Monster108Idle2646 dw Monster108Move2647 dw Monster108AttackPatternRight2648 dw Monster108AttackPatternLeft2649 dw Monster108AttackPatternLeftUp2650 dw Monster108AttackPatternLeftDown2651 dw Monster108AttackPatternRightUp2652 dw Monster108AttackPatternRightDown2653 db BattleMonsterSpriteSheet10Block2654 db 32 2655 db 32+08 2656 db YieArKungFuUnitLevel3CostGold 2657 db YieArKungFuUnitLevel3CostGems 2658 db YieArKungFuUnitLevel3CostRubies 2659 db YieArKungFuUnitLevel3HP 2660 db YieArKungFuUnitLevel3Speed 2661 db YieArKungFuUnitLevel3Attack 2662 db YieArKungFuUnitLevel3Defense 2663 db YieArKungFuUnitLevel3Growth 2664 db YieArKungFuUnitLevel3Damage 2665 db 000 2666 db "Mei Ling",255,"   "2668Monster109Table: 2669 dw Monster109Idle2670 dw Monster109Move2671 dw Monster109AttackPatternRight2672 dw Monster109AttackPatternLeft2673 dw Monster109AttackPatternLeft2674 dw Monster109AttackPatternLeft2675 dw Monster109AttackPatternRight2676 dw Monster109AttackPatternRight2677 db BattleMonsterSpriteSheet10Block2678 db 32 2679 db 32+08 2680 db YieArKungFuUnitLevel4CostGold 2681 db YieArKungFuUnitLevel4CostGems 2682 db YieArKungFuUnitLevel4CostRubies 2683 db YieArKungFuUnitLevel4HP 2684 db YieArKungFuUnitLevel4Speed 2685 db YieArKungFuUnitLevel4Attack 2686 db YieArKungFuUnitLevel4Defense 2687 db YieArKungFuUnitLevel4Growth 2688 db YieArKungFuUnitLevel4Damage 2689 db RangedMonster 2690 db "Han Chen",255,"   "2692Monster110Table: 2693 dw Monster110Idle2694 dw Monster110Move2695 dw Monster110AttackPatternRight2696 dw Monster110AttackPatternLeft2697 dw Monster110AttackPatternLeft2698 dw Monster110AttackPatternLeft2699 dw Monster110AttackPatternRight2700 dw Monster110AttackPatternRight2701 db BattleMonsterSpriteSheet10Block2702 db 32 2703 db 40+08 2704 db YieArKungFuUnitLevel6CostGold 2705 db YieArKungFuUnitLevel6CostGems 2706 db YieArKungFuUnitLevel6CostRubies 2707 db YieArKungFuUnitLevel6HP 2708 db YieArKungFuUnitLevel6Speed 2709 db YieArKungFuUnitLevel6Attack 2710 db YieArKungFuUnitLevel6Defense 2711 db YieArKungFuUnitLevel6Growth 2712 db YieArKungFuUnitLevel6Damage 2713 db RangedMonster 2714 db "Li Yen",255,"     "2728Monster111Table: 2729 dw Monster111Idle2730 dw Monster111Move2731 dw GeneralMonsterAttackPatternRight2732 dw GeneralMonsterAttackPatternLeft2733 dw GeneralMonsterAttackPatternLeftUp2734 dw GeneralMonsterAttackPatternLeftDown2735 dw GeneralMonsterAttackPatternRightUp2736 dw GeneralMonsterAttackPatternRightDown2737 db BattleMonsterSpriteSheet8Block2738 db 32 2739 db 24+08 2740 db AkanbeDragonGroupAUnitLevel5CostGold 2741 db AkanbeDragonGroupAUnitLevel5CostGems 2742 db AkanbeDragonGroupAUnitLevel5CostRubies 2743 db AkanbeDragonGroupAUnitLevel5HP 2744 db AkanbeDragonGroupAUnitLevel5Speed 2745 db AkanbeDragonGroupAUnitLevel5Attack 2746 db AkanbeDragonGroupAUnitLevel5Defense 2747 db AkanbeDragonGroupAUnitLevel5Growth 2748 db AkanbeDragonGroupAUnitLevel5Damage 2749 db 000 2750 db "Queen Sora",255," "2752Monster112Table: 2753 dw Monster112Idle2754 dw Monster112Move2755 dw Monster112AttackPatternRight2756 dw Monster112AttackPatternLeft2757 dw Monster112AttackPatternLeft2758 dw Monster112AttackPatternLeft2759 dw Monster112AttackPatternRight2760 dw Monster112AttackPatternRight2761 db BattleMonsterSpriteSheet8Block2762 db 32 2763 db 24+08 2764 db AkanbeDragonGroupAUnitLevel6CostGold 2765 db AkanbeDragonGroupAUnitLevel6CostGems 2766 db AkanbeDragonGroupAUnitLevel6CostRubies 2767 db AkanbeDragonGroupAUnitLevel6HP 2768 db AkanbeDragonGroupAUnitLevel6Speed 2769 db AkanbeDragonGroupAUnitLevel6Attack 2770 db AkanbeDragonGroupAUnitLevel6Defense 2771 db AkanbeDragonGroupAUnitLevel6Growth 2772 db AkanbeDragonGroupAUnitLevel6Damage 2773 db RangedMonster 2774 db "King Mori",255,"  "2776Monster113Table: 2777 dw Monster113Idle2778 dw Monster113Move2779 dw Monster113AttackPatternRight2780 dw Monster113AttackPatternLeft2781 dw Monster113AttackPatternLeft2782 dw Monster113AttackPatternLeft2783 dw Monster113AttackPatternRight2784 dw Monster113AttackPatternRight2785 db BattleMonsterSpriteSheet8Block2786 db 32 2787 db 24+08 2788 db AkanbeDragonGroupAUnitLevel2CostGold 2789 db AkanbeDragonGroupAUnitLevel2CostGems 2790 db AkanbeDragonGroupAUnitLevel2CostRubies 2791 db AkanbeDragonGroupAUnitLevel2HP 2792 db AkanbeDragonGroupAUnitLevel2Speed 2793 db AkanbeDragonGroupAUnitLevel2Attack 2794 db AkanbeDragonGroupAUnitLevel2Defense 2795 db AkanbeDragonGroupAUnitLevel2Growth 2796 db AkanbeDragonGroupAUnitLevel2Damage 2797 db RangedMonster 2798 db "Knight Yama",2552799 2800Monster114Table: 2801 dw Monster114Idle2802 dw Monster114Move2803 dw GeneralMonsterAttackPatternRight2804 dw GeneralMonsterAttackPatternLeft2805 dw GeneralMonsterAttackPatternLeftUp2806 dw GeneralMonsterAttackPatternLeftDown2807 dw GeneralMonsterAttackPatternRightUp2808 dw GeneralMonsterAttackPatternRightDown2809 db BattleMonsterSpriteSheet8Block2810 db 32 2811 db 32+08 2812 db AkanbeDragonGroupBUnitLevel2CostGold 2813 db AkanbeDragonGroupBUnitLevel2CostGems 2814 db AkanbeDragonGroupBUnitLevel2CostRubies 2815 db AkanbeDragonGroupBUnitLevel2HP 2816 db AkanbeDragonGroupBUnitLevel2Speed 2817 db AkanbeDragonGroupBUnitLevel2Attack 2818 db AkanbeDragonGroupBUnitLevel2Defense 2819 db AkanbeDragonGroupBUnitLevel2Growth 2820 db AkanbeDragonGroupBUnitLevel2Damage 2821 db 000 2822 db "Bishop Mori",2552824Monster115Table: 2825 dw Monster115Idle2826 dw Monster115Move2827 dw Monster115AttackPatternRight2828 dw Monster115AttackPatternLeft2829 dw Monster115AttackPatternLeft2830 dw Monster115AttackPatternLeft2831 dw Monster115AttackPatternRight2832 dw Monster115AttackPatternRight2833 db BattleMonsterSpriteSheet10Block2834 db 32 2835 db 24+08 2836 db AkanbeDragonGroupAUnitLevel3CostGold 2837 db AkanbeDragonGroupAUnitLevel3CostGems 2838 db AkanbeDragonGroupAUnitLevel3CostRubies 2839 db AkanbeDragonGroupAUnitLevel3HP 2840 db AkanbeDragonGroupAUnitLevel3Speed 2841 db AkanbeDragonGroupAUnitLevel3Attack 2842 db AkanbeDragonGroupAUnitLevel3Defense 2843 db AkanbeDragonGroupAUnitLevel3Growth 2844 db AkanbeDragonGroupAUnitLevel3Damage 2845 db RangedMonster 2846 db "B. Heichi",255,"  "2848Monster116Table: 2849 dw Monster116Idle2850 dw Monster116Move2851 dw Monster116AttackPatternRight2852 dw Monster116AttackPatternLeft2853 dw Monster116AttackPatternLeftUp2854 dw Monster116AttackPatternLeftDown2855 dw Monster116AttackPatternRightUp2856 dw Monster116AttackPatternRightDown2857 db BattleMonsterSpriteSheet10Block2858 db 32 2859 db 24+08 2860 db AkanbeDragonGroupBUnitLevel3CostGold 2861 db AkanbeDragonGroupBUnitLevel3CostGems 2862 db AkanbeDragonGroupBUnitLevel3CostRubies 2863 db AkanbeDragonGroupBUnitLevel3HP 2864 db AkanbeDragonGroupBUnitLevel3Speed 2865 db AkanbeDragonGroupBUnitLevel3Attack 2866 db AkanbeDragonGroupBUnitLevel3Defense 2867 db AkanbeDragonGroupBUnitLevel3Growth 2868 db AkanbeDragonGroupBUnitLevel3Damage 2869 db 000 2870 db "Roke Mizu",255,"  "2872Monster117Table: 2873 dw Monster117Idle2874 dw Monster117Move2875 dw Monster117AttackPatternRight2876 dw Monster117AttackPatternLeft2877 dw Monster117AttackPatternLeftUp2878 dw Monster117AttackPatternLeftDown2879 dw Monster117AttackPatternRightUp2880 dw Monster117AttackPatternRightDown2881 db BattleMonsterSpriteSheet11Block2882 db 32 2883 db 24+08 2884 db AkanbeDragonGroupAUnitLevel1CostGold 2885 db AkanbeDragonGroupAUnitLevel1CostGems 2886 db AkanbeDragonGroupAUnitLevel1CostRubies 2887 db AkanbeDragonGroupAUnitLevel1HP 2888 db AkanbeDragonGroupAUnitLevel1Speed 2889 db AkanbeDragonGroupAUnitLevel1Attack 2890 db AkanbeDragonGroupAUnitLevel1Defense 2891 db AkanbeDragonGroupAUnitLevel1Growth 2892 db AkanbeDragonGroupAUnitLevel1Damage 2893 db 000 2894 db "Porn Mizu",255,"  "2896Monster118Table: 2897 dw Monster118Idle2898 dw Monster118Move2899 dw Monster118AttackPatternRight2900 dw Monster118AttackPatternLeft2901 dw Monster118AttackPatternLeftUp2902 dw Monster118AttackPatternLeftDown2903 dw Monster118AttackPatternRightUp2904 dw Monster118AttackPatternRightDown2905 db BattleMonsterSpriteSheet11Block2906 db 32 2907 db 24+08 2908 db AkanbeDragonGroupAUnitLevel4CostGold 2909 db AkanbeDragonGroupAUnitLevel4CostGems 2910 db AkanbeDragonGroupAUnitLevel4CostRubies 2911 db AkanbeDragonGroupAUnitLevel4HP 2912 db AkanbeDragonGroupAUnitLevel4Speed 2913 db AkanbeDragonGroupAUnitLevel4Attack 2914 db AkanbeDragonGroupAUnitLevel4Defense 2915 db AkanbeDragonGroupAUnitLevel4Growth 2916 db AkanbeDragonGroupAUnitLevel4Damage 2917 db 000 2918 db "Roke Yama",255,"  "2920Monster119Table: 2921 dw Monster119Idle2922 dw Monster119Move2923 dw Monster119AttackPatternRight2924 dw Monster119AttackPatternLeft2925 dw Monster119AttackPatternLeft2926 dw Monster119AttackPatternLeft2927 dw Monster119AttackPatternRight2928 dw Monster119AttackPatternRight2929 db BattleMonsterSpriteSheet11Block2930 db 32 2931 db 24+08 2932 db AkanbeDragonGroupBUnitLevel1CostGold 2933 db AkanbeDragonGroupBUnitLevel1CostGems 2934 db AkanbeDragonGroupBUnitLevel1CostRubies 2935 db AkanbeDragonGroupBUnitLevel1HP 2936 db AkanbeDragonGroupBUnitLevel1Speed 2937 db AkanbeDragonGroupBUnitLevel1Attack 2938 db AkanbeDragonGroupBUnitLevel1Defense 2939 db AkanbeDragonGroupBUnitLevel1Growth 2940 db AkanbeDragonGroupBUnitLevel1Damage 2941 db RangedMonster 2942 db "Porn Heichi",2552943 2944Monster120Table: 2945 dw Monster120Idle2946 dw Monster120Move2947 dw Monster120AttackPatternRight2948 dw Monster120AttackPatternLeft2949 dw Monster120AttackPatternLeft2950 dw Monster120AttackPatternLeft2951 dw Monster120AttackPatternRight2952 dw Monster120AttackPatternRight2953 db BattleMonsterSpriteSheet11Block2954 db 32 2955 db 24+08 2956 db AkanbeDragonGroupBUnitLevel4CostGold 2957 db AkanbeDragonGroupBUnitLevel4CostGems 2958 db AkanbeDragonGroupBUnitLevel4CostRubies 2959 db AkanbeDragonGroupBUnitLevel4HP 2960 db AkanbeDragonGroupBUnitLevel4Speed 2961 db AkanbeDragonGroupBUnitLevel4Attack 2962 db AkanbeDragonGroupBUnitLevel4Defense 2963 db AkanbeDragonGroupBUnitLevel4Growth 2964 db AkanbeDragonGroupBUnitLevel4Damage 2965 db RangedMonster 2966 db "Yama Knight",2552968Monster121Table: 2969 dw Monster121Idle2970 dw Monster121Move2971 dw GeneralMonsterAttackPatternRight2972 dw GeneralMonsterAttackPatternLeft2973 dw GeneralMonsterAttackPatternLeftUp2974 dw GeneralMonsterAttackPatternLeftDown2975 dw GeneralMonsterAttackPatternRightUp2976 dw GeneralMonsterAttackPatternRightDown2977 db BattleMonsterSpriteSheet11Block2978 db 48 2979 db 56+08 2980 db AkanbeDragonGroupBUnitLevel6CostGold 2981 db AkanbeDragonGroupBUnitLevel6CostGems 2982 db AkanbeDragonGroupBUnitLevel6CostRubies 2983 db AkanbeDragonGroupBUnitLevel6HP 2984 db AkanbeDragonGroupBUnitLevel6Speed 2985 db AkanbeDragonGroupBUnitLevel6Attack 2986 db AkanbeDragonGroupBUnitLevel6Defense 2987 db AkanbeDragonGroupBUnitLevel6Growth 2988 db AkanbeDragonGroupBUnitLevel6Damage 2989 db 000 2990 db "King Heichi",2552992Monster122Table: 2993 dw Monster122Idle2994 dw Monster122Move2995 dw Monster122AttackPatternRight2996 dw Monster122AttackPatternLeft2997 dw Monster122AttackPatternLeftUp2998 dw Monster122AttackPatternLeftDown2999 dw Monster122AttackPatternRightUp3000 dw Monster122AttackPatternRightDown3001 db BattleMonsterSpriteSheet11Block3002 db 16 3003 db 24+08 3004 db RandomBUnitLevel3CostGold 3005 db RandomBUnitLevel3CostGems 3006 db RandomBUnitLevel3CostRubies 3007 db RandomBUnitLevel3HP 3008 db RandomBUnitLevel3Speed 3009 db RandomBUnitLevel3Attack 3010 db RandomBUnitLevel3Defense 3011 db RandomBUnitLevel3Growth 3012 db RandomBUnitLevel3Damage 3013 db 000 3014 db "Spooky",255,"     "3016Monster123Table: 3017 dw Monster123Idle3018 dw Monster123Move3019 dw GeneralMonsterAttackPatternRight3020 dw GeneralMonsterAttackPatternLeft3021 dw GeneralMonsterAttackPatternLeftUp3022 dw GeneralMonsterAttackPatternLeftDown3023 dw GeneralMonsterAttackPatternRightUp3024 dw GeneralMonsterAttackPatternRightDown3025 db BattleMonsterSpriteSheet11Block3026 db 16 3027 db 24+08 3028 db RandomBUnitLevel2CostGold 3029 db RandomBUnitLevel2CostGems 3030 db RandomBUnitLevel2CostRubies 3031 db RandomBUnitLevel2HP 3032 db RandomBUnitLevel2Speed 3033 db RandomBUnitLevel2Attack 3034 db RandomBUnitLevel2Defense 3035 db RandomBUnitLevel2Growth 3036 db RandomBUnitLevel2Damage 3037 db 000 3038 db "Ghosty",255,"     "3040Monster124Table: 3041 dw Monster124Idle3042 dw Monster124Move3043 dw GeneralMonsterAttackPatternRight3044 dw GeneralMonsterAttackPatternLeft3045 dw GeneralMonsterAttackPatternLeftUp3046 dw GeneralMonsterAttackPatternLeftDown3047 dw GeneralMonsterAttackPatternRightUp3048 dw GeneralMonsterAttackPatternRightDown3049 db BattleMonsterSpriteSheet7Block3050 db 16 3051 db 24+08 3052 db RandomAUnitLevel3CostGold 3053 db RandomAUnitLevel3CostGems 3054 db RandomAUnitLevel3CostRubies 3055 db RandomAUnitLevel3HP 3056 db RandomAUnitLevel3Speed 3057 db RandomAUnitLevel3Attack 3058 db RandomAUnitLevel3Defense 3059 db RandomAUnitLevel3Growth 3060 db RandomAUnitLevel3Damage 3061 db 000 3062 db "KuGyoku Den",2553063 3064Monster125Table: 3065 dw Monster125Idle3066 dw Monster125Move3067 dw Monster125AttackPatternRight3068 dw Monster125AttackPatternLeft3069 dw Monster125AttackPatternLeft3070 dw Monster125AttackPatternLeft3071 dw Monster125AttackPatternRight3072 dw Monster125AttackPatternRight3073 db BattleMonsterSpriteSheet7Block3074 db 16 3075 db 16+08 3076 db RandomBUnitLevel2CostGold 3077 db RandomBUnitLevel2CostGems 3078 db RandomBUnitLevel2CostRubies 3079 db RandomBUnitLevel2HP 3080 db RandomBUnitLevel2Speed 3081 db RandomBUnitLevel2Attack-2 3082 db RandomBUnitLevel2Defense-1 3083 db RandomBUnitLevel2Growth 3084 db RandomBUnitLevel2Damage 3085 db RangedMonster 3086 db "GooGoo",255,"     "3088Monster126Table: 3089 dw Monster126Idle3090 dw Monster126Move3091 dw GeneralMonsterAttackPatternRight3092 dw GeneralMonsterAttackPatternLeft3093 dw GeneralMonsterAttackPatternLeftUp3094 dw GeneralMonsterAttackPatternLeftDown3095 dw GeneralMonsterAttackPatternRightUp3096 dw GeneralMonsterAttackPatternRightDown3097 db BattleMonsterSpriteSheet11Block3098 db 16 3099 db 24+08 3100 db RandomBUnitLevel1CostGold 3101 db RandomBUnitLevel1CostGems 3102 db RandomBUnitLevel1CostRubies 3103 db RandomBUnitLevel1HP 3104 db RandomBUnitLevel1Speed 3105 db RandomBUnitLevel1Attack 3106 db RandomBUnitLevel1Defense 3107 db RandomBUnitLevel1Growth 3108 db RandomBUnitLevel1Damage 3109 db 000 3110 db "Sofia",255,"      "3112Monster127Table: 3113 dw Monster127Idle3114 dw Monster127Move3115 dw Monster127AttackPatternRight3116 dw Monster127AttackPatternLeft3117 dw Monster127AttackPatternLeftUp3118 dw Monster127AttackPatternLeftDown3119 dw Monster127AttackPatternRightUp3120 dw Monster127AttackPatternRightDown3121 db BattleMonsterSpriteSheet13Block3122 db 32 3123 db 40+08 3124 db RandomBUnitLevel4CostGold 3125 db RandomBUnitLevel4CostGems 3126 db RandomBUnitLevel4CostRubies 3127 db RandomBUnitLevel4HP 3128 db RandomBUnitLevel4Speed 3129 db RandomBUnitLevel4Attack 3130 db RandomBUnitLevel4Defense 3131 db RandomBUnitLevel4Growth 3132 db RandomBUnitLevel4Damage 3133 db 000 3134 db "Rastan",255,"     "3136Monster128Table: 3137 dw Monster128Idle3138 dw Monster128Move3139 dw Monster128AttackPatternRight3140 dw Monster128AttackPatternLeft3141 dw Monster128AttackPatternLeftUp3142 dw Monster128AttackPatternLeftDown3143 dw Monster128AttackPatternRightUp3144 dw Monster128AttackPatternRightDown3145 db BattleMonsterSpriteSheet13Block3146 db 16 3147 db 32+08 3148 db RandomAUnitLevel5CostGold 3149 db RandomAUnitLevel5CostGems 3150 db RandomAUnitLevel5CostRubies 3151 db RandomAUnitLevel5HP 3152 db RandomAUnitLevel5Speed 3153 db RandomAUnitLevel5Attack 3154 db RandomAUnitLevel5Defense 3155 db RandomAUnitLevel5Growth 3156 db RandomAUnitLevel5Damage 3157 db 000 3158 db "BlasterBot",255," "3160Monster129Table: 3161 dw Monster129Idle3162 dw Monster129Move3163 dw Monster129AttackPatternRight3164 dw Monster129AttackPatternLeft3165 dw Monster129AttackPatternLeft3166 dw Monster129AttackPatternLeft3167 dw Monster129AttackPatternRight3168 dw Monster129AttackPatternRight3169 db BattleMonsterSpriteSheet13Block3170 db 32 3171 db 32+08 3172 db RandomAUnitLevel2CostGold 3173 db RandomAUnitLevel2CostGems 3174 db RandomAUnitLevel2CostRubies 3175 db RandomAUnitLevel2HP 3176 db RandomAUnitLevel2Speed 3177 db RandomAUnitLevel2Attack-3 3178 db RandomAUnitLevel2Defense 3179 db RandomAUnitLevel2Growth 3180 db RandomAUnitLevel2Damage 3181 db RangedMonster 3182 db "Screech",255,"    "3184Monster130Table: 3185 dw Monster130Idle3186 dw Monster130Move3187 dw Monster130AttackPatternRight3188 dw Monster130AttackPatternLeft3189 dw Monster130AttackPatternLeftUp3190 dw Monster130AttackPatternLeftDown3191 dw Monster130AttackPatternRightUp3192 dw Monster130AttackPatternRightDown3193 db BattleMonsterSpriteSheet13Block3194 db 16 3195 db 32+08 3196 db RandomBUnitLevel2CostGold 3197 db RandomBUnitLevel2CostGems 3198 db RandomBUnitLevel2CostRubies 3199 db RandomBUnitLevel2HP 3200 db RandomBUnitLevel2Speed 3201 db RandomBUnitLevel2Attack 3202 db RandomBUnitLevel2Defense 3203 db RandomBUnitLevel2Growth 3204 db RandomBUnitLevel2Damage 3205 db 000 3206 db "Schaefer",255,"   "3208Monster131Table: 3209 dw Monster131Idle3210 dw Monster131Move3211 dw Monster131AttackPatternRight3212 dw Monster131AttackPatternLeft3213 dw Monster131AttackPatternLeftUp3214 dw Monster131AttackPatternLeftDown3215 dw Monster131AttackPatternRightUp3216 dw Monster131AttackPatternRightDown3217 db BattleMonsterSpriteSheet13Block3218 db 16 3219 db 32+08 3220 db RandomAUnitLevel3CostGold 3221 db RandomAUnitLevel3CostGems 3222 db RandomAUnitLevel3CostRubies 3223 db RandomAUnitLevel3HP 3224 db RandomAUnitLevel3Speed 3225 db RandomAUnitLevel3Attack 3226 db RandomAUnitLevel3Defense 3227 db RandomAUnitLevel3Growth 3228 db RandomAUnitLevel3Damage 3229 db 000 3230 db "Jon Sparkle",2553232Monster132Table: 3233 dw Monster132Idle3234 dw Monster132Move3235 dw Monster132AttackPatternRight3236 dw Monster132AttackPatternLeft3237 dw Monster132AttackPatternLeftUp3238 dw Monster132AttackPatternLeftDown3239 dw Monster132AttackPatternRightUp3240 dw Monster132AttackPatternRightDown3241 db BattleMonsterSpriteSheet13Block3242 db 16 3243 db 32+08 3244 db RandomBUnitLevel4CostGold 3245 db RandomBUnitLevel4CostGems 3246 db RandomBUnitLevel4CostRubies 3247 db RandomBUnitLevel4HP 3248 db RandomBUnitLevel4Speed 3249 db RandomBUnitLevel4Attack 3250 db RandomBUnitLevel4Defense 3251 db RandomBUnitLevel4Growth 3252 db RandomBUnitLevel4Damage 3253 db 000 3254 db "Monmon",255,"     "3255 3256Monster133Table: 3257 dw Monster133Idle3258 dw Monster133Move3259 dw Monster133AttackPatternRight3260 dw Monster133AttackPatternLeft3261 dw Monster133AttackPatternLeftUp3262 dw Monster133AttackPatternLeftDown3263 dw Monster133AttackPatternRightUp3264 dw Monster133AttackPatternRightDown3265 db BattleMonsterSpriteSheet13Block3266 db 16 3267 db 32+08 3268 db RandomBUnitLevel3CostGold 3269 db RandomBUnitLevel3CostGems 3270 db RandomBUnitLevel3CostRubies 3271 db RandomBUnitLevel3HP 3272 db RandomBUnitLevel3Speed 3273 db RandomBUnitLevel3Attack 3274 db RandomBUnitLevel3Defense 3275 db RandomBUnitLevel3Growth 3276 db RandomBUnitLevel3Damage 3277 db 000 3278 db "Cob Crusher",2553279 3280Monster134Table: 3281 dw Monster134Idle3282 dw Monster134Move3283 dw Monster134AttackPatternRight3284 dw Monster134AttackPatternLeft3285 dw Monster134AttackPatternLeftUp3286 dw Monster134AttackPatternLeftDown3287 dw Monster134AttackPatternRightUp3288 dw Monster134AttackPatternRightDown3289 db BattleMonsterSpriteSheet11Block3290 db 16 3291 db 24+08 3292 db RandomAUnitLevel2CostGold 3293 db RandomAUnitLevel2CostGems 3294 db RandomAUnitLevel2CostRubies 3295 db RandomAUnitLevel2HP 3296 db RandomAUnitLevel2Speed 3297 db RandomAUnitLevel2Attack 3298 db RandomAUnitLevel2Defense 3299 db RandomAUnitLevel2Growth 3300 db RandomAUnitLevel2Damage 3301 db 000 3302 db "Limb Linger",2553303 3304Monster135Table: 3305 dw Monster135Idle3306 dw Monster135Move3307 dw Monster135AttackPatternRight3308 dw Monster135AttackPatternLeft3309 dw Monster135AttackPatternLeftUp3310 dw Monster135AttackPatternLeftDown3311 dw Monster135AttackPatternRightUp3312 dw Monster135AttackPatternRightDown3313 db BattleMonsterSpriteSheet14Block3314 db 32 3315 db 40+08 3316 db DevaUnitLevel5CostGold 3317 db DevaUnitLevel5CostGems 3318 db DevaUnitLevel5CostRubies 3319 db DevaUnitLevel5HP 3320 db DevaUnitLevel5Speed 3321 db DevaUnitLevel5Attack 3322 db DevaUnitLevel5Defense 3323 db DevaUnitLevel5Growth 3324 db DevaUnitLevel5Damage 3325 db 000 3326 db "Deva",255,"       "3327 3328Monster136Table: 3329 dw Monster136Idle3330 dw Monster136Move3331 dw Monster136AttackPatternRight3332 dw Monster136AttackPatternLeft3333 dw Monster136AttackPatternLeftUp3334 dw Monster136AttackPatternLeftDown3335 dw Monster136AttackPatternRightUp3336 dw Monster136AttackPatternRightDown3337 db BattleMonsterSpriteSheet7Block3338 db 16 3339 db 40+08 3340 db DevaUnitLevel2CostGold 3341 db DevaUnitLevel2CostGems 3342 db DevaUnitLevel2CostRubies 3343 db DevaUnitLevel2HP 3344 db DevaUnitLevel2Speed 3345 db DevaUnitLevel2Attack 3346 db DevaUnitLevel2Defense 3347 db DevaUnitLevel2Growth 3348 db DevaUnitLevel2Damage 3349 db 000 3350 db "Spectroll",255,"  "3351 3352Monster137Table: 3353 dw Monster137Idle3354 dw Monster137Move3355 dw GeneralMonsterAttackPatternRight3356 dw GeneralMonsterAttackPatternLeft3357 dw GeneralMonsterAttackPatternLeftUp3358 dw GeneralMonsterAttackPatternLeftDown3359 dw GeneralMonsterAttackPatternRightUp3360 dw GeneralMonsterAttackPatternRightDown3361 db BattleMonsterSpriteSheet12Block3362 db 32 3363 db 48+08 3364 db DevaUnitLevel4CostGold 3365 db DevaUnitLevel4CostGems 3366 db DevaUnitLevel4CostRubies 3367 db DevaUnitLevel4HP 3368 db DevaUnitLevel4Speed 3369 db DevaUnitLevel4Attack 3370 db DevaUnitLevel4Defense 3371 db DevaUnitLevel4Growth 3372 db DevaUnitLevel4Damage 3373 db 000 3374 db "Yurei Kage",255," "3375 3376Monster138Table: 3377 dw Monster138Idle3378 dw Monster138Move3379 dw GeneralMonsterAttackPatternRight3380 dw GeneralMonsterAttackPatternLeft3381 dw GeneralMonsterAttackPatternLeftUp3382 dw GeneralMonsterAttackPatternLeftDown3383 dw GeneralMonsterAttackPatternRightUp3384 dw GeneralMonsterAttackPatternRightDown3385 db BattleMonsterSpriteSheet12Block3386 db 48 3387 db 40+08 3388 db Usas2UnitLevel5CostGold 3389 db Usas2UnitLevel5CostGems 3390 db Usas2UnitLevel5CostRubies 3391 db Usas2UnitLevel5HP 3392 db Usas2UnitLevel5Speed 3393 db Usas2UnitLevel5Attack 3394 db Usas2UnitLevel5Defense 3395 db Usas2UnitLevel5Growth 3396 db Usas2UnitLevel5Damage 3397 db 000 3398 db "Blob",255,"       "3400Monster139Table: 3401 dw Monster139Idle3402 dw Monster139Move3403 dw Monster139AttackPatternRight3404 dw Monster139AttackPatternLeft3405 dw Monster139AttackPatternLeftUp3406 dw Monster139AttackPatternLeftDown3407 dw Monster139AttackPatternRightUp3408 dw Monster139AttackPatternRightDown3409 db BattleMonsterSpriteSheet12Block3410 db 32 3411 db 32+08 3412 db Usas2UnitLevel4CostGold 3413 db Usas2UnitLevel4CostGems 3414 db Usas2UnitLevel4CostRubies 3415 db Usas2UnitLevel4HP 3416 db Usas2UnitLevel4Speed 3417 db Usas2UnitLevel4Attack 3418 db Usas2UnitLevel4Defense 3419 db Usas2UnitLevel4Growth 3420 db Usas2UnitLevel4Damage 3421 db 000 3422 db "Emir Mystic",2553423 3424Monster140Table: 3425 dw Monster140Idle3426 dw Monster140Move3427 dw Monster140AttackPatternRight3428 dw Monster140AttackPatternLeft3429 dw Monster140AttackPatternLeftUp3430 dw Monster140AttackPatternLeftDown3431 dw Monster140AttackPatternRightUp3432 dw Monster140AttackPatternRightDown3433 db BattleMonsterSpriteSheet14Block3434 db 32 3435 db 32+08 3436 db RandomAUnitLevel5CostGold 3437 db RandomAUnitLevel5CostGems 3438 db RandomAUnitLevel5CostRubies 3439 db RandomAUnitLevel5HP 3440 db RandomAUnitLevel5Speed 3441 db RandomAUnitLevel5Attack 3442 db RandomAUnitLevel5Defense 3443 db RandomAUnitLevel5Growth 3444 db RandomAUnitLevel5Damage 3445 db 000 3446 db "Duncan 7",255,"   "3448Monster141Table: 3449 dw Monster141Idle3450 dw Monster141Move3451 dw GeneralMonsterAttackPatternRight3452 dw GeneralMonsterAttackPatternLeft3453 dw GeneralMonsterAttackPatternLeftUp3454 dw GeneralMonsterAttackPatternLeftDown3455 dw GeneralMonsterAttackPatternRightUp3456 dw GeneralMonsterAttackPatternRightDown3457 db BattleMonsterSpriteSheet7Block3458 db 64 3459 db 64+04 3460 db RandomAUnitLevel6CostGold 3461 db RandomAUnitLevel6CostGems 3462 db RandomAUnitLevel6CostRubies 3463 db RandomAUnitLevel6HP 3464 db RandomAUnitLevel6Speed 3465 db RandomAUnitLevel6Attack 3466 db RandomAUnitLevel6Defense 3467 db RandomAUnitLevel6Growth 3468 db RandomAUnitLevel6Damage 3469 db 000 3470 db "Monstrilla",255," "3472Monster142Table: 3473 dw Monster142Idle3474 dw Monster142Move3475 dw GeneralMonsterAttackPatternRight3476 dw GeneralMonsterAttackPatternLeft3477 dw GeneralMonsterAttackPatternLeftUp3478 dw GeneralMonsterAttackPatternLeftDown3479 dw GeneralMonsterAttackPatternRightUp3480 dw GeneralMonsterAttackPatternRightDown3481 db BattleMonsterSpriteSheet7Block3482 db 32 3483 db 40+08 3484 db RandomAUnitLevel4CostGold 3485 db RandomAUnitLevel4CostGems 3486 db RandomAUnitLevel4CostRubies 3487 db RandomAUnitLevel4HP 3488 db RandomAUnitLevel4Speed 3489 db RandomAUnitLevel4Attack 3490 db RandomAUnitLevel4Defense 3491 db RandomAUnitLevel4Growth 3492 db RandomAUnitLevel4Damage 3493 db 000 3494 db "Biolumia",255,"   "3496Monster143Table: 3497 dw Monster143Idle3498 dw Monster143Move3499 dw Monster143AttackPatternRight3500 dw Monster143AttackPatternLeft3501 dw Monster143AttackPatternLeftUp3502 dw Monster143AttackPatternLeftDown3503 dw Monster143AttackPatternRightUp3504 dw Monster143AttackPatternRightDown3505 db BattleMonsterSpriteSheet14Block3506 db 16 3507 db 32+08 3508 db RandomAUnitLevel1CostGold 3509 db RandomAUnitLevel1CostGems 3510 db RandomAUnitLevel1CostRubies 3511 db RandomAUnitLevel1HP 3512 db RandomAUnitLevel1Speed 3513 db RandomAUnitLevel1Attack 3514 db RandomAUnitLevel1Defense 3515 db RandomAUnitLevel1Growth 3516 db RandomAUnitLevel1Damage 3517 db 000 3518 db "Anna Lee",255,"   "3520Monster144Table: 3521 dw Monster144Idle3522 dw Monster144Move3523 dw Monster144AttackPatternRight3524 dw Monster144AttackPatternLeft3525 dw Monster144AttackPatternLeft3526 dw Monster144AttackPatternLeft3527 dw Monster144AttackPatternRight3528 dw Monster144AttackPatternRight3529 db BattleMonsterSpriteSheet14Block3530 db 16 3531 db 32+08 3532 db RandomBUnitLevel2CostGold 3533 db RandomBUnitLevel2CostGems 3534 db RandomBUnitLevel2CostRubies 3535 db RandomBUnitLevel2HP-3 3536 db RandomBUnitLevel2Speed-1 3537 db RandomBUnitLevel2Attack-2 3538 db RandomBUnitLevel2Defense 3539 db RandomBUnitLevel2Growth 3540 db RandomBUnitLevel2Damage 3541 db RangedMonster 3542 db "Pastry Chef",2553544Monster145Table: 3545 dw Monster145Idle3546 dw Monster145Move3547 dw Monster145AttackPatternRight3548 dw Monster145AttackPatternLeft3549 dw Monster145AttackPatternLeftUp3550 dw Monster145AttackPatternLeftDown3551 dw Monster145AttackPatternRightUp3552 dw Monster145AttackPatternRightDown3553 db BattleMonsterSpriteSheet14Block3554 db 16 3555 db 32+08 3556 db RandomBUnitLevel2CostGold 3557 db RandomBUnitLevel2CostGems 3558 db RandomBUnitLevel2CostRubies 3559 db RandomBUnitLevel2HP 3560 db RandomBUnitLevel2Speed 3561 db RandomBUnitLevel2Attack 3562 db RandomBUnitLevel2Defense 3563 db RandomBUnitLevel2Growth 3564 db RandomBUnitLevel2Damage 3565 db 000 3566 db "Indy Brave",255," "3568Monster146Table: 3569 dw Monster146Idle3570 dw Monster146Move3571 dw GeneralMonsterAttackPatternRight3572 dw GeneralMonsterAttackPatternLeft3573 dw GeneralMonsterAttackPatternLeftUp3574 dw GeneralMonsterAttackPatternLeftDown3575 dw GeneralMonsterAttackPatternRightUp3576 dw GeneralMonsterAttackPatternRightDown3577 db BattleMonsterSpriteSheet14Block3578 db 16 3579 db 32+08 3580 db RandomAUnitLevel3CostGold 3581 db RandomAUnitLevel3CostGems 3582 db RandomAUnitLevel3CostRubies 3583 db RandomAUnitLevel3HP 3584 db RandomAUnitLevel3Speed 3585 db RandomAUnitLevel3Attack 3586 db RandomAUnitLevel3Defense 3587 db RandomAUnitLevel3Growth 3588 db RandomAUnitLevel3Damage 3589 db 000 3590 db "Red Lupin",255,"  "3592Monster147Table: 3593 dw Monster147Idle3594 dw Monster147Move3595 dw GeneralMonsterAttackPatternRight3596 dw GeneralMonsterAttackPatternLeft3597 dw GeneralMonsterAttackPatternLeftUp3598 dw GeneralMonsterAttackPatternLeftDown3599 dw GeneralMonsterAttackPatternRightUp3600 dw GeneralMonsterAttackPatternRightDown3601 db BattleMonsterSpriteSheet13Block3602 db 16 3603 db 32+08 3604 db RandomBUnitLevel3CostGold 3605 db RandomBUnitLevel3CostGems 3606 db RandomBUnitLevel3CostRubies 3607 db RandomBUnitLevel3HP 3608 db RandomBUnitLevel3Speed 3609 db RandomBUnitLevel3Attack 3610 db RandomBUnitLevel3Defense 3611 db RandomBUnitLevel3Growth 3612 db RandomBUnitLevel3Damage 3613 db 000 3614 db "Green Lupin",2553615 3616Monster148Table: 3617 dw Monster148Idle3618 dw Monster148Move3619 dw GeneralMonsterAttackPatternRight3620 dw GeneralMonsterAttackPatternLeft3621 dw GeneralMonsterAttackPatternLeftUp3622 dw GeneralMonsterAttackPatternLeftDown3623 dw GeneralMonsterAttackPatternRightUp3624 dw GeneralMonsterAttackPatternRightDown3625 db BattleMonsterSpriteSheet14Block3626 db 16 3627 db 32+08 3628 db RandomAUnitLevel2CostGold 3629 db RandomAUnitLevel2CostGems 3630 db RandomAUnitLevel2CostRubies 3631 db RandomAUnitLevel2HP 3632 db RandomAUnitLevel2Speed 3633 db RandomAUnitLevel2Attack 3634 db RandomAUnitLevel2Defense 3635 db RandomAUnitLevel2Growth 3636 db RandomAUnitLevel2Damage 3637 db 000 3638 db "Major Mirth",2553639 3640Monster149Table: 3641 dw Monster149Idle3642 dw Monster149Move3643 dw Monster149AttackPatternRight3644 dw Monster149AttackPatternLeft3645 dw Monster149AttackPatternLeft3646 dw Monster149AttackPatternLeft3647 dw Monster149AttackPatternRight3648 dw Monster149AttackPatternRight3649 db BattleMonsterSpriteSheet13Block3650 db 16 3651 db 16+08 3652 db KingsValley2UnitLevel4CostGold 3653 db KingsValley2UnitLevel4CostGems 3654 db KingsValley2UnitLevel4CostRubies 3655 db KingsValley2UnitLevel4HP 3656 db KingsValley2UnitLevel4Speed 3657 db KingsValley2UnitLevel4Attack 3658 db KingsValley2UnitLevel4Defense 3659 db KingsValley2UnitLevel4Growth 3660 db KingsValley2UnitLevel4Damage 3661 db RangedMonster 3662 db "Vic Viper",255,"  "3664Monster150Table: 3665 dw Monster150Idle3666 dw Monster150Move3667 dw Monster150AttackPatternRight3668 dw Monster150AttackPatternLeft3669 dw Monster150AttackPatternLeftUp3670 dw Monster150AttackPatternLeftDown3671 dw Monster150AttackPatternRightUp3672 dw Monster150AttackPatternRightDown3673 db BattleMonsterSpriteSheet6Block3674 db 16 3675 db 16+08 3676 db KingsValley2UnitLevel3CostGold 3677 db KingsValley2UnitLevel3CostGems 3678 db KingsValley2UnitLevel3CostRubies 3679 db KingsValley2UnitLevel3HP 3680 db KingsValley2UnitLevel3Speed 3681 db KingsValley2UnitLevel3Attack 3682 db KingsValley2UnitLevel3Defense 3683 db KingsValley2UnitLevel3Growth 3684 db KingsValley2UnitLevel3Damage 3685 db 000 3686 db "Rock Roll",255,"  "3688Monster151Table: 3689 dw Monster151Idle3690 dw Monster151Move3691 dw GeneralMonsterAttackPatternRight3692 dw GeneralMonsterAttackPatternLeft3693 dw GeneralMonsterAttackPatternLeftUp3694 dw GeneralMonsterAttackPatternLeftDown3695 dw GeneralMonsterAttackPatternRightUp3696 dw GeneralMonsterAttackPatternRightDown3697 db BattleMonsterSpriteSheet6Block3698 db 16 3699 db 16+08 3700 db KingsValley2UnitLevel1CostGold 3701 db KingsValley2UnitLevel1CostGems 3702 db KingsValley2UnitLevel1CostRubies 3703 db KingsValley2UnitLevel1HP 3704 db KingsValley2UnitLevel1Speed 3705 db KingsValley2UnitLevel1Attack 3706 db KingsValley2UnitLevel1Defense 3707 db KingsValley2UnitLevel1Growth 3708 db KingsValley2UnitLevel1Damage 3709 db 000 3710 db "Slouman",255,"    "3712Monster152Table: 3713 dw Monster152Idle3714 dw Monster152Move3715 dw Monster152AttackPatternRight3716 dw Monster152AttackPatternLeft3717 dw Monster152AttackPatternLeftUp3718 dw Monster152AttackPatternLeftDown3719 dw Monster152AttackPatternRightUp3720 dw Monster152AttackPatternRightDown3721 db BattleMonsterSpriteSheet6Block3722 db 16 3723 db 16+08 3724 db KingsValley2UnitLevel2CostGold 3725 db KingsValley2UnitLevel2CostGems 3726 db KingsValley2UnitLevel2CostRubies 3727 db KingsValley2UnitLevel2HP 3728 db KingsValley2UnitLevel2Speed 3729 db KingsValley2UnitLevel2Attack 3730 db KingsValley2UnitLevel2Defense 3731 db KingsValley2UnitLevel2Growth 3732 db KingsValley2UnitLevel2Damage 3733 db 000 3734 db "Pyoncy",255,"     "3742Monster153Table: 3743 dw Monster153Idle3744 dw Monster153Move3745 dw Monster153AttackPatternRight3746 dw Monster153AttackPatternLeft3747 dw Monster153AttackPatternLeft3748 dw Monster153AttackPatternLeft3749 dw Monster153AttackPatternRight3750 dw Monster153AttackPatternRight3751 db BattleMonsterSpriteSheet6Block3752 db 16 3753 db 40+08 3754 db RandomBUnitLevel4CostGold 3755 db RandomBUnitLevel4CostGems 3756 db RandomBUnitLevel4CostRubies 3757 db RandomBUnitLevel4HP-2 3758 db RandomBUnitLevel4Speed 3759 db RandomBUnitLevel4Attack-2 3760 db RandomBUnitLevel4Defense 3761 db RandomBUnitLevel4Growth 3762 db RandomBUnitLevel4Damage 3763 db RangedMonster 3764 db "Andorogynus",2553765 3766Monster154Table: 3767 dw Monster154Idle3768 dw Monster154Move3769 dw GeneralMonsterAttackPatternRight3770 dw GeneralMonsterAttackPatternLeft3771 dw GeneralMonsterAttackPatternLeftUp3772 dw GeneralMonsterAttackPatternLeftDown3773 dw GeneralMonsterAttackPatternRightUp3774 dw GeneralMonsterAttackPatternRightDown3775 db BattleMonsterSpriteSheet6Block3776 db 16 3777 db 32+08 3778 db RandomBUnitLevel5CostGold 3779 db RandomBUnitLevel5CostGems 3780 db RandomBUnitLevel5CostRubies 3781 db RandomBUnitLevel5HP 3782 db RandomBUnitLevel5Speed 3783 db RandomBUnitLevel5Attack 3784 db RandomBUnitLevel5Defense 3785 db RandomBUnitLevel5Growth 3786 db RandomBUnitLevel5Damage 3787 db 000 3788 db "Thexder",255,"    "3790Monster155Table: 3791 dw Monster155Idle3792 dw Monster155Move3793 dw GeneralMonsterAttackPatternRight3794 dw GeneralMonsterAttackPatternLeft3795 dw GeneralMonsterAttackPatternLeftUp3796 dw GeneralMonsterAttackPatternLeftDown3797 dw GeneralMonsterAttackPatternRightUp3798 dw GeneralMonsterAttackPatternRightDown3799 db BattleMonsterSpriteSheet6Block3800 db 16 3801 db 16+08 3802 db RandomAUnitLevel3CostGold 3803 db RandomAUnitLevel3CostGems 3804 db RandomAUnitLevel3CostRubies 3805 db RandomAUnitLevel3HP 3806 db RandomAUnitLevel3Speed 3807 db RandomAUnitLevel3Attack 3808 db RandomAUnitLevel3Defense 3809 db RandomAUnitLevel3Growth 3810 db RandomAUnitLevel3Damage 3811 db 000 3812 db "BounceBot",255,"  "3814Monster156Table: 3815 dw Monster156Idle3816 dw Monster156Move3817 dw GeneralMonsterAttackPatternRight3818 dw GeneralMonsterAttackPatternLeft3819 dw GeneralMonsterAttackPatternLeftUp3820 dw GeneralMonsterAttackPatternLeftDown3821 dw GeneralMonsterAttackPatternRightUp3822 dw GeneralMonsterAttackPatternRightDown3823 db BattleMonsterSpriteSheet11Block3824 db 32 3825 db 24+08 3826 db RandomBUnitLevel6CostGold 3827 db RandomBUnitLevel6CostGems 3828 db RandomBUnitLevel6CostRubies 3829 db RandomBUnitLevel6HP 3830 db RandomBUnitLevel6Speed 3831 db RandomBUnitLevel6Attack 3832 db RandomBUnitLevel6Defense 3833 db RandomBUnitLevel6Growth 3834 db RandomBUnitLevel6Damage 3835 db 000 3836 db "ColossalBot",2553838Monster157Table: 3839 dw Monster157Idle3840 dw Monster157Move3841 dw Monster157AttackPatternRight3842 dw Monster157AttackPatternLeft3843 dw Monster157AttackPatternLeftUp3844 dw Monster157AttackPatternLeftDown3845 dw Monster157AttackPatternRightUp3846 dw Monster157AttackPatternRightDown3847 db BattleMonsterSpriteSheet12Block3848 db 16 3849 db 32+08 3850 db RandomAUnitLevel3CostGold 3851 db RandomAUnitLevel3CostGems 3852 db RandomAUnitLevel3CostRubies 3853 db RandomAUnitLevel3HP 3854 db RandomAUnitLevel3Speed 3855 db RandomAUnitLevel3Attack 3856 db RandomAUnitLevel3Defense 3857 db RandomAUnitLevel3Growth 3858 db RandomAUnitLevel3Damage 3859 db 000 3860 db "SuperRunner",2553861 3862Monster158Table: 3863 dw Monster158Idle3864 dw Monster158Move3865 dw Monster158AttackPatternRight3866 dw Monster158AttackPatternLeft3867 dw Monster158AttackPatternLeft3868 dw Monster158AttackPatternLeft3869 dw Monster158AttackPatternRight3870 dw Monster158AttackPatternRight3871 db BattleMonsterSpriteSheet9Block3872 db 32 3873 db 24+08 3874 db AkanbeDragonGroupBUnitLevel5CostGold 3875 db AkanbeDragonGroupBUnitLevel5CostGems 3876 db AkanbeDragonGroupBUnitLevel5CostRubies 3877 db AkanbeDragonGroupBUnitLevel5HP 3878 db AkanbeDragonGroupBUnitLevel5Speed 3879 db AkanbeDragonGroupBUnitLevel5Attack 3880 db AkanbeDragonGroupBUnitLevel5Defense 3881 db AkanbeDragonGroupBUnitLevel5Growth 3882 db AkanbeDragonGroupBUnitLevel5Damage 3883 db RangedMonster 3884 db "Queen Sora",255," "3890SenkoKyuLevel2Number: equ 523891SenkoKyuLevel2Attack: equ 33892SenkoKyuLevel2Damage: equ 33893SenkoKyuLevel2Defense: equ 73894SenkoKyuLevel2HP: equ 183895SenkoKyuLevel2Speed: equ 33896SenkoKyuLevel2Growth: equ 83897SenkoKyuLevel2CostGold: equ 120/103898SenkoKyuLevel2CostGems: equ 00+Level2Unit3899SenkoKyuLevel2CostRubies: equ 03901Monster159Table: 3902 dw Monster159Idle3903 dw Monster159Move3904 dw Monster159AttackPatternRight3905 dw Monster159AttackPatternLeft3906 dw Monster159AttackPatternLeft3907 dw Monster159AttackPatternLeft3908 dw Monster159AttackPatternRight3909 dw Monster159AttackPatternRight3910 db BattleMonsterSpriteSheet9Block3911 db 16 3912 db 16+08 3913 db SenkoKyuLevel2CostGold 3914 db SenkoKyuLevel2CostGems 3915 db SenkoKyuLevel2CostRubies 3916 db SenkoKyuLevel2HP 3917 db SenkoKyuLevel2Speed 3918 db SenkoKyuLevel2Attack 3919 db SenkoKyuLevel2Defense 3920 db SenkoKyuLevel2Growth 3921 db SenkoKyuLevel2Damage 3922 db RangedMonster 3923 db "Senko Kyu",255,"  "3925Monster160Table: 3926 dw Monster160Idle3927 dw Monster160Move3928 dw GeneralMonsterAttackPatternRight3929 dw GeneralMonsterAttackPatternLeft3930 dw GeneralMonsterAttackPatternLeftUp3931 dw GeneralMonsterAttackPatternLeftDown3932 dw GeneralMonsterAttackPatternRightUp3933 dw GeneralMonsterAttackPatternRightDown3934 db BattleMonsterSpriteSheet9Block3935 db 16 3936 db 16+08 3937 db RandomBUnitLevel1CostGold 3938 db RandomBUnitLevel1CostGems 3939 db RandomBUnitLevel1CostRubies 3940 db RandomBUnitLevel1HP 3941 db RandomBUnitLevel1Speed 3942 db RandomBUnitLevel1Attack 3943 db RandomBUnitLevel1Defense 3944 db RandomBUnitLevel1Growth 3945 db RandomBUnitLevel1Damage 3946 db 000 3947 db "Chucklehook",2553948 3949Monster161Table: 3950 dw Monster161Idle3951 dw Monster161Move3952 dw GeneralMonsterAttackPatternRight3953 dw GeneralMonsterAttackPatternLeft3954 dw GeneralMonsterAttackPatternLeftUp3955 dw GeneralMonsterAttackPatternLeftDown3956 dw GeneralMonsterAttackPatternRightUp3957 dw GeneralMonsterAttackPatternRightDown3958 db BattleMonsterSpriteSheet7Block3959 db 16 3960 db 16+08 3961 db RandomBUnitLevel3CostGold 3962 db RandomBUnitLevel3CostGems 3963 db RandomBUnitLevel3CostRubies 3964 db RandomBUnitLevel3HP 3965 db RandomBUnitLevel3Speed 3966 db RandomBUnitLevel3Attack 3967 db RandomBUnitLevel3Defense 3968 db RandomBUnitLevel3Growth 3969 db RandomBUnitLevel3Damage 3970 db 000 3971 db "Sir Oji",255,"    "3973Monster162Table: 3974 dw Monster162Idle3975 dw Monster162Move3976 dw GeneralMonsterAttackPatternRight3977 dw GeneralMonsterAttackPatternLeft3978 dw GeneralMonsterAttackPatternLeftUp3979 dw GeneralMonsterAttackPatternLeftDown3980 dw GeneralMonsterAttackPatternRightUp3981 dw GeneralMonsterAttackPatternRightDown3982 db BattleMonsterSpriteSheet7Block3983 db 16 3984 db 16+08 3985 db RandomBUnitLevel3CostGold 3986 db RandomBUnitLevel3CostGems 3987 db RandomBUnitLevel3CostRubies 3988 db RandomBUnitLevel3HP 3989 db RandomBUnitLevel3Speed 3990 db RandomBUnitLevel3Attack 3991 db RandomBUnitLevel3Defense 3992 db RandomBUnitLevel3Growth 3993 db RandomBUnitLevel3Damage 3994 db 000 3995 db "Pentaro",255,"    "3997Monster163Table: 3998 dw Monster163Idle3999 dw Monster163Move4000 dw GeneralMonsterAttackPatternRight4001 dw GeneralMonsterAttackPatternLeft4002 dw GeneralMonsterAttackPatternLeftUp4003 dw GeneralMonsterAttackPatternLeftDown4004 dw GeneralMonsterAttackPatternRightUp4005 dw GeneralMonsterAttackPatternRightDown4006 db BattleMonsterSpriteSheet7Block4007 db 16 4008 db 16+08 4009 db RandomBUnitLevel2CostGold 4010 db RandomBUnitLevel2CostGems 4011 db RandomBUnitLevel2CostRubies 4012 db RandomBUnitLevel2HP 4013 db RandomBUnitLevel2Speed 4014 db RandomBUnitLevel2Attack 4015 db RandomBUnitLevel2Defense 4016 db RandomBUnitLevel2Growth 4017 db RandomBUnitLevel2Damage 4018 db 000 4019 db "Moai",255,"       "4021Monster164Table: 4022 dw Monster164Idle4023 dw Monster164Move4024 dw Monster164AttackPatternRight4025 dw Monster164AttackPatternLeft4026 dw Monster164AttackPatternLeftUp4027 dw Monster164AttackPatternLeftDown4028 dw Monster164AttackPatternRightUp4029 dw Monster164AttackPatternRightDown4030 db BattleMonsterSpriteSheet7Block4031 db 16 4032 db 40+08 4033 db RandomBUnitLevel4CostGold 4034 db RandomBUnitLevel4CostGems 4035 db RandomBUnitLevel4CostRubies 4036 db RandomBUnitLevel4HP 4037 db RandomBUnitLevel4Speed 4038 db RandomBUnitLevel4Attack 4039 db RandomBUnitLevel4Defense 4040 db RandomBUnitLevel4Growth 4041 db RandomBUnitLevel4Damage 4042 db 000 4043 db "Thomas",255,"     "4045Monster165Table: 4046 dw Monster165Idle4047 dw Monster165Move4048 dw GeneralMonsterAttackPatternRight4049 dw GeneralMonsterAttackPatternLeft4050 dw GeneralMonsterAttackPatternLeftUp4051 dw GeneralMonsterAttackPatternLeftDown4052 dw GeneralMonsterAttackPatternRightUp4053 dw GeneralMonsterAttackPatternRightDown4054 db BattleMonsterSpriteSheet15Block4055 db 32 4056 db 16+08 4057 db RandomBUnitLevel3CostGold 4058 db RandomBUnitLevel3CostGems 4059 db RandomBUnitLevel3CostRubies 4060 db RandomBUnitLevel3HP 4061 db RandomBUnitLevel3Speed 4062 db RandomBUnitLevel3Attack 4063 db RandomBUnitLevel3Defense 4064 db RandomBUnitLevel3Growth 4065 db RandomBUnitLevel3Damage 4066 db 000 4067 db "BlueSteel",255,"  "4069Monster166Table: 4070 dw Monster166Idle4071 dw Monster166Move4072 dw GeneralMonsterAttackPatternRight4073 dw GeneralMonsterAttackPatternLeft4074 dw GeneralMonsterAttackPatternLeftUp4075 dw GeneralMonsterAttackPatternLeftDown4076 dw GeneralMonsterAttackPatternRightUp4077 dw GeneralMonsterAttackPatternRightDown4078 db BattleMonsterSpriteSheet12Block4079 db 16 4080 db 40+08 4081 db RandomBUnitLevel4CostGold 4082 db RandomBUnitLevel4CostGems 4083 db RandomBUnitLevel4CostRubies 4084 db RandomBUnitLevel4HP 4085 db RandomBUnitLevel4Speed 4086 db RandomBUnitLevel4Attack 4087 db RandomBUnitLevel4Defense 4088 db RandomBUnitLevel4Growth 4089 db RandomBUnitLevel4Damage 4090 db 000 4091 db "Hikodrone",255,"  "4093Monster167Table: 4094 dw Monster167Idle4095 dw Monster167Move4096 dw GeneralMonsterAttackPatternRight4097 dw GeneralMonsterAttackPatternLeft4098 dw GeneralMonsterAttackPatternLeftUp4099 dw GeneralMonsterAttackPatternLeftDown4100 dw GeneralMonsterAttackPatternRightUp4101 dw GeneralMonsterAttackPatternRightDown4102 db BattleMonsterSpriteSheet15Block4103 db 16 4104 db 32+08 4105 db RandomBUnitLevel3CostGold 4106 db RandomBUnitLevel3CostGems 4107 db RandomBUnitLevel3CostRubies 4108 db RandomBUnitLevel3HP 4109 db RandomBUnitLevel3Speed 4110 db RandomBUnitLevel3Attack 4111 db RandomBUnitLevel3Defense 4112 db RandomBUnitLevel3Growth 4113 db RandomBUnitLevel3Damage 4114 db 000 4115 db "Wonder Boy",255," "4117NinjaKunLevel2Number: equ 524118NinjaKunLevel2Attack: equ 34119NinjaKunLevel2Damage: equ 34120NinjaKunLevel2Defense: equ 74121NinjaKunLevel2HP: equ 174122NinjaKunLevel2Speed: equ 34123NinjaKunLevel2Growth: equ 84124NinjaKunLevel2CostGold: equ 120/104125NinjaKunLevel2CostGems: equ 00+Level2Unit4126NinjaKunLevel2CostRubies: equ 04128Monster168Table: 4129 dw Monster168Idle4130 dw Monster168Move4131 dw Monster168AttackPatternRight4132 dw Monster168AttackPatternLeft4133 dw Monster168AttackPatternLeft4134 dw Monster168AttackPatternLeft4135 dw Monster168AttackPatternRight4136 dw Monster168AttackPatternRight4137 db BattleMonsterSpriteSheet15Block4138 db 16 4139 db 16+08 4140 db NinjaKunLevel2CostGold 4141 db NinjaKunLevel2CostGems 4142 db NinjaKunLevel2CostRubies 4143 db NinjaKunLevel2HP 4144 db NinjaKunLevel2Speed 4145 db NinjaKunLevel2Attack 4146 db NinjaKunLevel2Defense 4147 db NinjaKunLevel2Growth 4148 db NinjaKunLevel2Damage 4149 db RangedMonster 4150 db "Ninja Kun",255,"  "4152Monster169Table: 4153 dw Monster169Idle4154 dw Monster169Move4155 dw GeneralMonsterAttackPatternRight4156 dw GeneralMonsterAttackPatternLeft4157 dw GeneralMonsterAttackPatternLeftUp4158 dw GeneralMonsterAttackPatternLeftDown4159 dw GeneralMonsterAttackPatternRightUp4160 dw GeneralMonsterAttackPatternRightDown4161 db BattleMonsterSpriteSheet15Block4162 db 16 4163 db 24+08 4164 db RandomBUnitLevel3CostGold 4165 db RandomBUnitLevel3CostGems 4166 db RandomBUnitLevel3CostRubies 4167 db RandomBUnitLevel3HP 4168 db RandomBUnitLevel3Speed 4169 db RandomBUnitLevel3Attack 4170 db RandomBUnitLevel3Defense 4171 db RandomBUnitLevel3Growth 4172 db RandomBUnitLevel3Damage 4173 db 000 4174 db "Kubiwatari",255," "4176Monster170Table: 4177 dw Monster170Idle4178 dw Monster170Move4179 dw GeneralMonsterAttackPatternRight4180 dw GeneralMonsterAttackPatternLeft4181 dw GeneralMonsterAttackPatternLeftUp4182 dw GeneralMonsterAttackPatternLeftDown4183 dw GeneralMonsterAttackPatternRightUp4184 dw GeneralMonsterAttackPatternRightDown4185 db BattleMonsterSpriteSheet10Block4186 db 32 4187 db 24+08 4188 db RandomBUnitLevel5CostGold 4189 db RandomBUnitLevel5CostGems 4190 db RandomBUnitLevel5CostRubies 4191 db RandomBUnitLevel5HP 4192 db RandomBUnitLevel5Speed 4193 db RandomBUnitLevel5Attack 4194 db RandomBUnitLevel5Defense 4195 db RandomBUnitLevel5Growth 4196 db RandomBUnitLevel5Damage 4197 db 000 4199 db "Flutterbane",2554201Monster171Table: 4202 dw Monster171Idle4203 dw Monster171Move4204 dw GeneralMonsterAttackPatternRight4205 dw GeneralMonsterAttackPatternLeft4206 dw GeneralMonsterAttackPatternLeftUp4207 dw GeneralMonsterAttackPatternLeftDown4208 dw GeneralMonsterAttackPatternRightUp4209 dw GeneralMonsterAttackPatternRightDown4210 db BattleMonsterSpriteSheet8Block4211 db 16 4212 db 24+08 4213 db RandomBUnitLevel1CostGold 4214 db RandomBUnitLevel1CostGems 4215 db RandomBUnitLevel1CostRubies 4216 db RandomBUnitLevel1HP 4217 db RandomBUnitLevel1Speed 4218 db RandomBUnitLevel1Attack 4219 db RandomBUnitLevel1Defense 4220 db RandomBUnitLevel1Growth 4221 db RandomBUnitLevel1Damage 4222 db 000 4223 db "Topple Zip",255," "4225Monster172Table: 4226 dw Monster172Idle4227 dw Monster172Move4228 dw GeneralMonsterAttackPatternRight4229 dw GeneralMonsterAttackPatternLeft4230 dw GeneralMonsterAttackPatternLeftUp4231 dw GeneralMonsterAttackPatternLeftDown4232 dw GeneralMonsterAttackPatternRightUp4233 dw GeneralMonsterAttackPatternRightDown4234 db BattleMonsterSpriteSheet12Block4235 db 16 4236 db 24+08 4237 db RandomBUnitLevel1CostGold 4238 db RandomBUnitLevel1CostGems 4239 db RandomBUnitLevel1CostRubies 4240 db RandomBUnitLevel1HP 4241 db RandomBUnitLevel1Speed 4242 db RandomBUnitLevel1Attack 4243 db RandomBUnitLevel1Defense 4244 db RandomBUnitLevel1Growth 4245 db RandomBUnitLevel1Damage 4246 db 000 4247 db "Topplane",255,"   "4249Monster173Table: 4250 dw Monster173Idle4251 dw Monster173Move4252 dw GeneralMonsterAttackPatternRight4253 dw GeneralMonsterAttackPatternLeft4254 dw GeneralMonsterAttackPatternLeftUp4255 dw GeneralMonsterAttackPatternLeftDown4256 dw GeneralMonsterAttackPatternRightUp4257 dw GeneralMonsterAttackPatternRightDown4258 db BattleMonsterSpriteSheet15Block4259 db 16 4260 db 32+08 4261 db RandomBUnitLevel3CostGold 4262 db RandomBUnitLevel3CostGems 4263 db RandomBUnitLevel3CostRubies 4264 db RandomBUnitLevel3HP 4265 db RandomBUnitLevel3Speed 4266 db RandomBUnitLevel3Attack 4267 db RandomBUnitLevel3Defense 4268 db RandomBUnitLevel3Growth 4269 db RandomBUnitLevel3Damage 4270 db 000 4271 db "Nyancle",255,"    "4273Monster174Table: 4274 dw Monster174Idle4275 dw Monster174Move4276 dw Monster174AttackPatternRight4277 dw Monster174AttackPatternLeft4278 dw Monster174AttackPatternLeftUp4279 dw Monster174AttackPatternLeftDown4280 dw Monster174AttackPatternRightUp4281 dw Monster174AttackPatternRightDown4282 db BattleMonsterSpriteSheet15Block4283 db 32 4284 db 32+08 4285 db RandomBUnitLevel5CostGold 4286 db RandomBUnitLevel5CostGems 4287 db RandomBUnitLevel5CostRubies 4288 db RandomBUnitLevel5HP 4289 db RandomBUnitLevel5Speed 4290 db RandomBUnitLevel5Attack 4291 db RandomBUnitLevel5Defense 4292 db RandomBUnitLevel5Growth 4293 db RandomBUnitLevel5Damage 4294 db 000 4295 db "Ashguine",255,"   "4297Monster175Table: 4298 dw Monster175Idle4299 dw Monster175Move4300 dw GeneralMonsterAttackPatternRight4301 dw GeneralMonsterAttackPatternLeft4302 dw GeneralMonsterAttackPatternLeftUp4303 dw GeneralMonsterAttackPatternLeftDown4304 dw GeneralMonsterAttackPatternRightUp4305 dw GeneralMonsterAttackPatternRightDown4306 db BattleMonsterSpriteSheet15Block4307 db 32 4308 db 48+08 4309 db RandomBUnitLevel1CostGold 4310 db RandomBUnitLevel1CostGems 4311 db RandomBUnitLevel1CostRubies 4312 db RandomBUnitLevel1HP 4313 db RandomBUnitLevel1Speed 4314 db RandomBUnitLevel1Attack 4315 db RandomBUnitLevel1Defense 4316 db RandomBUnitLevel1Growth 4317 db RandomBUnitLevel1Damage 4318 db 000 4319 db "Hard Boiled",2554321Monster176Table: 4322 dw Monster176Idle4323 dw Monster176Move4324 dw Monster176AttackPatternRight4325 dw Monster176AttackPatternLeft4326 dw Monster176AttackPatternLeftUp4327 dw Monster176AttackPatternLeftDown4328 dw Monster176AttackPatternRightUp4329 dw Monster176AttackPatternRightDown4330 db BattleMonsterSpriteSheet15Block4331 db 16 4332 db 16+08 4333 db RandomBUnitLevel1CostGold 4334 db RandomBUnitLevel1CostGems 4335 db RandomBUnitLevel1CostRubies 4336 db RandomBUnitLevel1HP 4337 db RandomBUnitLevel1Speed 4338 db RandomBUnitLevel1Attack 4339 db RandomBUnitLevel1Defense 4340 db RandomBUnitLevel1Growth 4341 db RandomBUnitLevel1Damage 4342 db 000 4343 db "Pingo",255,"      "4345Monster177Table: 4346 dw Monster177Idle4347 dw Monster177Move4348 dw GeneralMonsterAttackPatternRight4349 dw GeneralMonsterAttackPatternLeft4350 dw GeneralMonsterAttackPatternLeftUp4351 dw GeneralMonsterAttackPatternLeftDown4352 dw GeneralMonsterAttackPatternRightUp4353 dw GeneralMonsterAttackPatternRightDown4354 db BattleMonsterSpriteSheet15Block4355 db 16 4356 db 16+08 4357 db RandomBUnitLevel1CostGold 4358 db RandomBUnitLevel1CostGems 4359 db RandomBUnitLevel1CostRubies 4360 db RandomBUnitLevel1HP 4361 db RandomBUnitLevel1Speed 4362 db RandomBUnitLevel1Attack 4363 db RandomBUnitLevel1Defense 4364 db RandomBUnitLevel1Growth 4365 db RandomBUnitLevel1Damage 4366 db 000 4367 db "Doki Bear",255,"  "4369Monster178Table: 4370 dw Monster178Idle4371 dw Monster178Move4372 dw Monster178AttackPatternRight4373 dw Monster178AttackPatternLeft4374 dw Monster178AttackPatternLeftUp4375 dw Monster178AttackPatternLeftDown4376 dw Monster178AttackPatternRightUp4377 dw Monster178AttackPatternRightDown4378 db BattleMonsterSpriteSheet15Block4379 db 16 4380 db 16+08 4381 db RandomBUnitLevel3CostGold 4382 db RandomBUnitLevel3CostGems 4383 db RandomBUnitLevel3CostRubies 4384 db RandomBUnitLevel3HP 4385 db RandomBUnitLevel3Speed 4386 db RandomBUnitLevel3Attack 4387 db RandomBUnitLevel3Defense 4388 db RandomBUnitLevel3Growth 4389 db RandomBUnitLevel3Damage 4390 db 000 4391 db "InspecteurZ",2554392 4393Monster179Table: 4394 dw Monster179Idle4395 dw Monster179Move4396 dw GeneralMonsterAttackPatternRight4397 dw GeneralMonsterAttackPatternLeft4398 dw GeneralMonsterAttackPatternLeftUp4399 dw GeneralMonsterAttackPatternLeftDown4400 dw GeneralMonsterAttackPatternRightUp4401 dw GeneralMonsterAttackPatternRightDown4402 db BattleMonsterSpriteSheet15Block4403 db 16 4404 db 16+08 4405 db RandomBUnitLevel2CostGold 4406 db RandomBUnitLevel2CostGems 4407 db RandomBUnitLevel2CostRubies 4408 db RandomBUnitLevel2HP 4409 db RandomBUnitLevel2Speed 4410 db RandomBUnitLevel2Attack 4411 db RandomBUnitLevel2Defense 4412 db RandomBUnitLevel2Growth 4413 db RandomBUnitLevel2Damage 4414 db 000 4415 db "Thug",255,"       "4417Monster180Table: 4418 dw Monster180Idle4419 dw Monster180Move4420 dw GeneralMonsterAttackPatternRight4421 dw GeneralMonsterAttackPatternLeft4422 dw GeneralMonsterAttackPatternLeftUp4423 dw GeneralMonsterAttackPatternLeftDown4424 dw GeneralMonsterAttackPatternRightUp4425 dw GeneralMonsterAttackPatternRightDown4426 db BattleMonsterSpriteSheet15Block4427 db 16 4428 db 16+08 4429 db RandomBUnitLevel1CostGold 4430 db RandomBUnitLevel1CostGems 4431 db RandomBUnitLevel1CostRubies 4432 db RandomBUnitLevel1HP 4433 db RandomBUnitLevel1Speed 4434 db RandomBUnitLevel1Attack 4435 db RandomBUnitLevel1Defense 4436 db RandomBUnitLevel1Growth 4437 db RandomBUnitLevel1Damage 4438 db 000 4439 db "Goblin",255,"     "4441Monster181Table: 4442 dw Monster181Idle4443 dw Monster181Move4444 dw GeneralMonsterAttackPatternRight4445 dw GeneralMonsterAttackPatternLeft4446 dw GeneralMonsterAttackPatternLeftUp4447 dw GeneralMonsterAttackPatternLeftDown4448 dw GeneralMonsterAttackPatternRightUp4449 dw GeneralMonsterAttackPatternRightDown4450 db BattleMonsterSpriteSheet15Block4451 db 16 4452 db 16+08 4453 db RandomBUnitLevel2CostGold 4454 db RandomBUnitLevel2CostGems 4455 db RandomBUnitLevel2CostRubies 4456 db RandomBUnitLevel2HP 4457 db RandomBUnitLevel2Speed 4458 db RandomBUnitLevel2Attack 4459 db RandomBUnitLevel2Defense 4460 db RandomBUnitLevel2Growth 4461 db RandomBUnitLevel2Damage 4462 db 000 4463 db "Emberhorn",255,"  "4465Monster182Table: 4466 dw Monster182Idle4467 dw Monster182Move4468 dw GeneralMonsterAttackPatternRight4469 dw GeneralMonsterAttackPatternLeft4470 dw GeneralMonsterAttackPatternLeftUp4471 dw GeneralMonsterAttackPatternLeftDown4472 dw GeneralMonsterAttackPatternRightUp4473 dw GeneralMonsterAttackPatternRightDown4474 db BattleMonsterSpriteSheet16Block4475 db 48 4476 db 32+08 4477 db ChukaTaisenUnitLevel1CostGold 4478 db ChukaTaisenUnitLevel1CostGems 4479 db ChukaTaisenUnitLevel1CostRubies 4480 db ChukaTaisenUnitLevel1HP 4481 db ChukaTaisenUnitLevel1Speed 4482 db ChukaTaisenUnitLevel1Attack 4483 db ChukaTaisenUnitLevel1Defense 4484 db ChukaTaisenUnitLevel1Growth 4485 db ChukaTaisenUnitLevel1Damage 4486 db 000 4487 db "Kanton Man",255," "4489Monster183Table: 4490 dw Monster183Idle4491 dw Monster183Move4492 dw Monster183AttackPatternRight4493 dw Monster183AttackPatternLeft4494 dw Monster183AttackPatternLeft4495 dw Monster183AttackPatternLeft4496 dw Monster183AttackPatternRight4497 dw Monster183AttackPatternRight4498 db BattleMonsterSpriteSheet16Block4499 db 32 4500 db 32+08 4501 db ChukaTaisenUnitLevel2CostGold 4502 db ChukaTaisenUnitLevel2CostGems 4503 db ChukaTaisenUnitLevel2CostRubies 4504 db ChukaTaisenUnitLevel2HP 4505 db ChukaTaisenUnitLevel2Speed 4506 db ChukaTaisenUnitLevel2Attack 4507 db ChukaTaisenUnitLevel2Defense 4508 db ChukaTaisenUnitLevel2Growth 4509 db ChukaTaisenUnitLevel2Damage 4510 db RangedMonster 4511 db "Sun Wukong",255," "4513Monster184Table: 4514 dw Monster184Idle4515 dw Monster184Move4516 dw GeneralMonsterAttackPatternRight4517 dw GeneralMonsterAttackPatternLeft4518 dw GeneralMonsterAttackPatternLeftUp4519 dw GeneralMonsterAttackPatternLeftDown4520 dw GeneralMonsterAttackPatternRightUp4521 dw GeneralMonsterAttackPatternRightDown4522 db BattleMonsterSpriteSheet16Block4523 db 32 4524 db 40+08 4525 db ChukaTaisenUnitLevel3CostGold 4526 db ChukaTaisenUnitLevel3CostGems 4527 db ChukaTaisenUnitLevel3CostRubies 4528 db ChukaTaisenUnitLevel3HP 4529 db ChukaTaisenUnitLevel3Speed 4530 db ChukaTaisenUnitLevel3Attack 4531 db ChukaTaisenUnitLevel3Defense 4532 db ChukaTaisenUnitLevel3Growth 4533 db ChukaTaisenUnitLevel3Damage 4534 db 000 4535 db "Shock Scout",2554536 4537Monster185Table: 4538 dw Monster185Idle4539 dw Monster185Move4540 dw GeneralMonsterAttackPatternRight4541 dw GeneralMonsterAttackPatternLeft4542 dw GeneralMonsterAttackPatternLeftUp4543 dw GeneralMonsterAttackPatternLeftDown4544 dw GeneralMonsterAttackPatternRightUp4545 dw GeneralMonsterAttackPatternRightDown4546 db BattleMonsterSpriteSheet16Block4547 db 32 4548 db 40+08 4549 db ChukaTaisenUnitLevel4CostGold 4550 db ChukaTaisenUnitLevel4CostGems 4551 db ChukaTaisenUnitLevel4CostRubies 4552 db ChukaTaisenUnitLevel4HP 4553 db ChukaTaisenUnitLevel4Speed 4554 db ChukaTaisenUnitLevel4Attack 4555 db ChukaTaisenUnitLevel4Defense 4556 db ChukaTaisenUnitLevel4Growth 4557 db ChukaTaisenUnitLevel4Damage 4558 db 000 4559 db "Evil Hermit",2554561Monster186Table: 4562 dw Monster186Idle4563 dw Monster186Move4564 dw GeneralMonsterAttackPatternRight4565 dw GeneralMonsterAttackPatternLeft4566 dw GeneralMonsterAttackPatternLeftUp4567 dw GeneralMonsterAttackPatternLeftDown4568 dw GeneralMonsterAttackPatternRightUp4569 dw GeneralMonsterAttackPatternRightDown4570 db BattleMonsterSpriteSheet16Block4571 db 32 4572 db 40+08 4573 db ChukaTaisenUnitLevel5CostGold 4574 db ChukaTaisenUnitLevel5CostGems 4575 db ChukaTaisenUnitLevel5CostRubies 4576 db ChukaTaisenUnitLevel5HP 4577 db ChukaTaisenUnitLevel5Speed 4578 db ChukaTaisenUnitLevel5Attack 4579 db ChukaTaisenUnitLevel5Defense 4580 db ChukaTaisenUnitLevel5Growth 4581 db ChukaTaisenUnitLevel5Damage 4582 db 000 4583 db "Bad Buddha",255," "4585Monster187Table: 4586 dw Monster187Idle4587 dw Monster187Move4588 dw GeneralMonsterAttackPatternRight4589 dw GeneralMonsterAttackPatternLeft4590 dw GeneralMonsterAttackPatternLeftUp4591 dw GeneralMonsterAttackPatternLeftDown4592 dw GeneralMonsterAttackPatternRightUp4593 dw GeneralMonsterAttackPatternRightDown4594 db BattleMonsterSpriteSheet15Block4595 db 32 4596 db 40+08 4597 db ChukaTaisenUnitLevel6CostGold 4598 db ChukaTaisenUnitLevel6CostGems 4599 db ChukaTaisenUnitLevel6CostRubies 4600 db ChukaTaisenUnitLevel6HP 4601 db ChukaTaisenUnitLevel6Speed 4602 db ChukaTaisenUnitLevel6Attack 4603 db ChukaTaisenUnitLevel6Defense 4604 db ChukaTaisenUnitLevel6Growth 4605 db ChukaTaisenUnitLevel6Damage 4606 db 000 4607 db "Dualhorn",255,"   "46094610GeneralMonsterAttackPatternRight:4611 db 000,003,ShowBeingHitSprite,007,000,InitiateAttack4612GeneralMonsterAttackPatternLeft:4613 db 000,007,ShowBeingHitSprite,003,000,InitiateAttack4614GeneralMonsterAttackPatternLeftUp:4615 db 000,008,ShowBeingHitSprite,004,000,InitiateAttack4616GeneralMonsterAttackPatternLeftDown:4617 db 000,006,ShowBeingHitSprite,002,000,InitiateAttack4618GeneralMonsterAttackPatternRightUp:4619 db 000,002,ShowBeingHitSprite,006,000,InitiateAttack4620GeneralMonsterAttackPatternRightDown:4621 db 000,004,ShowBeingHitSprite,008,000,InitiateAttack46224625RIdle1Monster001: equ $4000 + (000*128) + (000/2) - 1284626RIdle2Monster001: equ $4000 + (000*128) + (016/2) - 1284627RIdle3Monster001: equ $4000 + (000*128) + (032/2) - 1284628RIdle4Monster001: equ $4000 + (000*128) + (048/2) - 1284630LIdle1Monster001: equ $4000 + (000*128) + (112/2) - 1284631LIdle2Monster001: equ $4000 + (000*128) + (096/2) - 1284632LIdle3Monster001: equ $4000 + (000*128) + (080/2) - 1284633LIdle4Monster001: equ $4000 + (000*128) + (064/2) - 1284635Monster001Move: 4636Monster001Idle:4637 db 3 4638 db 6 4639 dw RIdle1Monster0014640 dw RIdle2Monster0014641 dw RIdle3Monster0014642 dw RIdle4Monster0014643 dw RIdle3Monster0014644 dw RIdle2Monster0014645 4646 dw LIdle1Monster0014647 dw LIdle2Monster0014648 dw LIdle3Monster0014649 dw LIdle4Monster0014650 dw LIdle3Monster0014651 dw LIdle2Monster00146524654RIdle1Monster002: equ $4000 + (000*128) + (128/2) - 1284655RIdle2Monster002: equ $4000 + (000*128) + (144/2) - 1284656RIdle3Monster002: equ $4000 + (000*128) + (160/2) - 1284657RIdle4Monster002: equ $4000 + (000*128) + (176/2) - 1284659LIdle1Monster002: equ $4000 + (000*128) + (240/2) - 1284660LIdle2Monster002: equ $4000 + (000*128) + (224/2) - 1284661LIdle3Monster002: equ $4000 + (000*128) + (208/2) - 1284662LIdle4Monster002: equ $4000 + (000*128) + (192/2) - 1284664Monster002Move: 4665Monster002Idle:4666 db 3 4667 db 6 4668 dw RIdle1Monster0024669 dw RIdle2Monster0024670 dw RIdle3Monster0024671 dw RIdle4Monster0024672 dw RIdle3Monster0024673 dw RIdle2Monster0024674 4675 dw LIdle1Monster0024676 dw LIdle2Monster0024677 dw LIdle3Monster0024678 dw LIdle4Monster0024679 dw LIdle3Monster0024680 dw LIdle2Monster00246814683RIdle1Monster003: equ $4000 + (032*128) + (000/2) - 1284684RIdle2Monster003: equ $4000 + (032*128) + (016/2) - 1284685RIdle3Monster003: equ $4000 + (032*128) + (032/2) - 1284686RIdle4Monster003: equ $4000 + (032*128) + (048/2) - 1284688LIdle1Monster003: equ $4000 + (032*128) + (112/2) - 1284689LIdle2Monster003: equ $4000 + (032*128) + (096/2) - 1284690LIdle3Monster003: equ $4000 + (032*128) + (080/2) - 1284691LIdle4Monster003: equ $4000 + (032*128) + (064/2) - 1284693Monster003Move: 4694Monster003Idle:4695 db 5 4696 db 6 4697 dw RIdle1Monster0034698 dw RIdle2Monster0034699 dw RIdle3Monster0034700 dw RIdle4Monster0034701 dw RIdle3Monster0034702 dw RIdle2Monster0034703 4704 dw LIdle1Monster0034705 dw LIdle2Monster0034706 dw LIdle3Monster0034707 dw LIdle4Monster0034708 dw LIdle3Monster0034709 dw LIdle2Monster00347104712RIdle1Monster004: equ $4000 + (032*128) + (128/2) - 1284713RIdle2Monster004: equ $4000 + (032*128) + (144/2) - 1284714RIdle3Monster004: equ $4000 + (032*128) + (160/2) - 1284715RIdle4Monster004: equ $4000 + (032*128) + (176/2) - 1284717LIdle1Monster004: equ $4000 + (032*128) + (240/2) - 1284718LIdle2Monster004: equ $4000 + (032*128) + (224/2) - 1284719LIdle3Monster004: equ $4000 + (032*128) + (208/2) - 1284720LIdle4Monster004: equ $4000 + (032*128) + (192/2) - 1284722Monster004Move: 4723Monster004Idle:4724 db 4 4725 db 6 4726 dw RIdle1Monster0044727 dw RIdle2Monster0044728 dw RIdle3Monster0044729 dw RIdle4Monster0044730 dw RIdle3Monster0044731 dw RIdle2Monster0044732 4733 dw LIdle1Monster0044734 dw LIdle2Monster0044735 dw LIdle3Monster0044736 dw LIdle4Monster0044737 dw LIdle3Monster0044738 dw LIdle2Monster00447394742RIdle1Monster005: equ $4000 + (064*128) + (000/2) - 1284743RIdle2Monster005: equ $4000 + (064*128) + (016/2) - 1284745LIdle1Monster005: equ $4000 + (064*128) + (032/2) - 1284746LIdle2Monster005: equ $4000 + (064*128) + (048/2) - 1284748Monster005Move: 4749Monster005Idle:4750 db 3 4751 db 2 4752 dw RIdle1Monster0054753 dw RIdle2Monster0054754 4755 dw LIdle1Monster0054756 dw LIdle2Monster00547574760RIdle1Monster006: equ $4000 + (068*128) + (064/2) - 1284761RIdle2Monster006: equ $4000 + (068*128) + (080/2) - 1284763LIdle1Monster006: equ $4000 + (068*128) + (096/2) - 1284764LIdle2Monster006: equ $4000 + (068*128) + (112/2) - 1284766Monster006Move: 4767Monster006Idle:4768 db 4 4769 db 2 4770 dw RIdle1Monster0064771 dw RIdle2Monster0064772 4773 dw LIdle1Monster0064774 dw LIdle2Monster00647754778RIdle1Monster007: equ $4000 + (064*128) + (128/2) - 128 4779RIdle2Monster007: equ $4000 + (064*128) + (144/2) - 128 4780Rattack1Monster007: equ $4000 + (064*128) + (160/2) - 128 4782LIdle1Monster007: equ $4000 + (064*128) + (208/2) - 128 4783LIdle2Monster007: equ $4000 + (064*128) + (192/2) - 128 4784Lattack1Monster007: equ $4000 + (064*128) + (176/2) - 128 4786Monster007Move: 4787Monster007Idle:4788 db 4 4789 db 2 4790 dw RIdle1Monster0074791 dw RIdle2Monster0074792 4793 dw LIdle1Monster0074794 dw LIdle2Monster0074796Monster007AttackPatternRight:4797 db AnimateAttack | dw Rattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile4798Monster007AttackPatternLeft:4799 db AnimateAttack | dw Lattack1Monster007 | db 000,ShootProjectile,000,WaitImpactProjectile48004803RIdle1Monster008: equ $4000 + (064*128) + (224/2) - 128 4804RIdle2Monster008: equ $4000 + (064*128) + (240/2) - 128 4805Rattack1Monster008: equ $4000 + (088*128) + (000/2) - 128 4807LIdle1Monster008: equ $4000 + (088*128) + (048/2) - 128 4808LIdle2Monster008: equ $4000 + (088*128) + (032/2) - 128 4809Lattack1Monster008: equ $4000 + (088*128) + (016/2) - 128 4811Monster008Move: 4812Monster008Idle:4813 db 4 4814 db 2 4815 dw RIdle1Monster0084816 dw RIdle2Monster0084817 4818 dw LIdle1Monster0084819 dw LIdle2Monster0084821Monster008AttackPatternRight:4822 db AnimateAttack | dw Rattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile4823Monster008AttackPatternLeft:4824 db AnimateAttack | dw Lattack1Monster008 | db 000,ShootProjectile,000,WaitImpactProjectile48254828RIdle1Monster009: equ $4000 + (088*128) + (064/2) - 128 4829RIdle2Monster009: equ $4000 + (088*128) + (080/2) - 128 4831LIdle1Monster009: equ $4000 + (088*128) + (096/2) - 128 4832LIdle2Monster009: equ $4000 + (088*128) + (112/2) - 128 4834Monster009Move: 4835Monster009Idle:4836 db 4 4837 db 2 4838 dw RIdle1Monster0094839 dw RIdle2Monster0094840 4841 dw LIdle1Monster0094842 dw LIdle2Monster00948434846RIdle1Monster010: equ $4000 + (088*128) + (128/2) - 128 4847RIdle2Monster010: equ $4000 + (088*128) + (144/2) - 128 4849LIdle1Monster010: equ $4000 + (088*128) + (176/2) - 128 4850LIdle2Monster010: equ $4000 + (088*128) + (160/2) - 128 4852Monster010Move: 4853Monster010Idle:4854 db 4 4855 db 2 4856 dw RIdle1Monster0104857 dw RIdle2Monster0104858 4859 dw LIdle1Monster0104860 dw LIdle2Monster01048614864RIdle1Monster011: equ $4000 + (088*128) + (192/2) - 128 4865RIdle2Monster011: equ $4000 + (088*128) + (208/2) - 128 4867LIdle1Monster011: equ $4000 + (088*128) + (224/2) - 128 4868LIdle2Monster011: equ $4000 + (088*128) + (240/2) - 128 4870Monster011Move: 4871Monster011Idle:4872 db 4 4873 db 2 4874 dw RIdle1Monster0114875 dw RIdle2Monster0114876 4877 dw LIdle1Monster0114878 dw LIdle2Monster01148794882RIdle1Monster012: equ $4000 + (112*128) + (000/2) - 128 4883RIdle2Monster012: equ $4000 + (112*128) + (016/2) - 128 4885LIdle1Monster012: equ $4000 + (112*128) + (048/2) - 128 4886LIdle2Monster012: equ $4000 + (112*128) + (032/2) - 128 4888Monster012Move: 4889Monster012Idle:4890 db 4 4891 db 2 4892 dw RIdle1Monster0124893 dw RIdle2Monster0124894 4895 dw LIdle1Monster0124896 dw LIdle2Monster01248974900RIdle1Monster013: equ $4000 + (112*128) + (064/2) - 128 4901RIdle2Monster013: equ $4000 + (112*128) + (080/2) - 128 4902RIdle3Monster013: equ $4000 + (112*128) + (096/2) - 128 4904LIdle1Monster013: equ $4000 + (112*128) + (144/2) - 128 4905LIdle2Monster013: equ $4000 + (112*128) + (128/2) - 128 4906LIdle3Monster013: equ $4000 + (112*128) + (112/2) - 128 4908Monster013Move: 4909Monster013Idle:4910 db 4 4911 db 4 4912 dw RIdle1Monster0134913 dw RIdle2Monster0134914 dw RIdle3Monster0134915 dw RIdle2Monster0134916 4917 dw LIdle1Monster0134918 dw LIdle2Monster0134919 dw LIdle3Monster0134920 dw LIdle2Monster01349214924RIdle1Monster014: equ $4000 + (112*128) + (160/2) - 128 4925RIdle2Monster014: equ $4000 + (112*128) + (176/2) - 128 4927LIdle1Monster014: equ $4000 + (112*128) + (208/2) - 128 4928LIdle2Monster014: equ $4000 + (112*128) + (192/2) - 128 4930Monster014Move: 4931Monster014Idle:4932 db 4 4933 db 2 4934 dw RIdle1Monster0144935 dw RIdle2Monster0144936 4937 dw LIdle1Monster0144938 dw LIdle2Monster01449394942RIdle1Monster015: equ $4000 + (112*128) + (224/2) - 128 4943RIdle2Monster015: equ $4000 + (112*128) + (240/2) - 128 4945LIdle1Monster015: equ $4000 + (136*128) + (000/2) - 128 4946LIdle2Monster015: equ $4000 + (136*128) + (016/2) - 128 4948Monster015Move: 4949Monster015Idle:4950 db 4 4951 db 2 4952 dw RIdle1Monster0154953 dw RIdle2Monster0154954 4955 dw LIdle1Monster0154956 dw LIdle2Monster01549574960RIdle1Monster016: equ $4000 + (068*128) + (000/2) - 128 4961RIdle2Monster016: equ $4000 + (068*128) + (064/2) - 128 4963LIdle1Monster016: equ $4000 + (068*128) + (128/2) - 128 4964LIdle2Monster016: equ $4000 + (068*128) + (192/2) - 128 4966Monster016Move: 4967Monster016Idle:4968 db 4 4969 db 2 4970 dw RIdle1Monster0164971 dw RIdle2Monster0164972 4973 dw LIdle1Monster0164974 dw LIdle2Monster01649754978RIdle1Monster017: equ $4000 + (136*128) + (032/2) - 128 4979RIdle2Monster017: equ $4000 + (136*128) + (064/2) - 128 4981LIdle1Monster017: equ $4000 + (136*128) + (128/2) - 128 4982LIdle2Monster017: equ $4000 + (136*128) + (096/2) - 128 4984Monster017Move: 4985Monster017Idle:4986 db 4 4987 db 2 4988 dw RIdle1Monster0174989 dw RIdle2Monster0174990 4991 dw LIdle1Monster0174992 dw LIdle2Monster01749934995RIdle1Monster018: equ $4000 + (136*128) + (160/2) - 128 4996RIdle2Monster018: equ $4000 + (136*128) + (192/2) - 128 4997RIdle3Monster018: equ $4000 + (136*128) + (224/2) - 128 4998RAttack1Monster018: equ $4000 + (176*128) + (000/2) - 128 5000LIdle1Monster018: equ $4000 + (176*128) + (128/2) - 128 5001LIdle2Monster018: equ $4000 + (176*128) + (096/2) - 128 5002LIdle3Monster018: equ $4000 + (176*128) + (064/2) - 128 5003LAttack1Monster018: equ $4000 + (176*128) + (032/2) - 128 5005Monster018Move: 5006Monster018Idle:5007 db 4 5008 db 3 5009 dw RIdle1Monster0185010 dw RIdle2Monster0185011 dw RIdle3Monster0185012 5013 dw LIdle1Monster0185014 dw LIdle2Monster0185015 dw LIdle3Monster0185017Monster018AttackPatternRight:5018 db 000,003,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,007,InitiateAttack5019Monster018AttackPatternRightUp:5020 db 000,008,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,004,InitiateAttack5021Monster018AttackPatternRightDown:5022 db 000,006,000,AnimateAttack | dw Rattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster018 | db 000,002,InitiateAttack5024Monster018AttackPatternLeft:5025 db 000,007,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,003,InitiateAttack5026Monster018AttackPatternLeftUp:5027 db 000,002,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,006,InitiateAttack5028Monster018AttackPatternLeftDown:5029 db 000,004,000,AnimateAttack | dw Lattack1Monster018 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster018 | db 000,008,InitiateAttack50305033RIdle1Monster019: equ $4000 + (176*128) + (160/2) - 128 5034RIdle2Monster019: equ $4000 + (176*128) + (176/2) - 128 5036LIdle1Monster019: equ $4000 + (176*128) + (208/2) - 128 5037LIdle2Monster019: equ $4000 + (176*128) + (192/2) - 128 5039Monster019Move: 5040Monster019Idle:5041 db 4 5042 db 2 5043 dw RIdle1Monster0195044 dw RIdle2Monster0195045 5046 dw LIdle1Monster0195047 dw LIdle2Monster01950485051RIdle1Monster020: equ $4000 + (136*128) + (000/2) - 128 5052RIdle2Monster020: equ $4000 + (136*128) + (016/2) - 128 5053RIdle3Monster020: equ $4000 + (136*128) + (032/2) - 128 5055LIdle1Monster020: equ $4000 + (136*128) + (080/2) - 128 5056LIdle2Monster020: equ $4000 + (136*128) + (064/2) - 128 5057LIdle3Monster020: equ $4000 + (136*128) + (048/2) - 128 5059Monster020Move: 5060Monster020Idle:5061 db 4 5062 db 4 5063 dw RIdle1Monster0205064 dw RIdle2Monster0205065 dw RIdle3Monster0205066 dw RIdle2Monster0205067 5068 dw LIdle1Monster0205069 dw LIdle2Monster0205070 dw LIdle3Monster0205071 dw LIdle2Monster02050725075RIdle1Monster021: equ $4000 + (176*128) + (224/2) - 128 5076RIdle2Monster021: equ $4000 + (176*128) + (240/2) - 128 5077RIdle3Monster021: equ $4000 + (216*128) + (000/2) - 128 5078RAttack1Monster021: equ $4000 + (216*128) + (016/2) - 128 5079RAttack2Monster021: equ $4000 + (216*128) + (048/2) - 128 5081LIdle1Monster021: equ $4000 + (216*128) + (176/2) - 128 5082LIdle2Monster021: equ $4000 + (216*128) + (160/2) - 128 5083LIdle3Monster021: equ $4000 + (216*128) + (144/2) - 128 5084LAttack1Monster021: equ $4000 + (216*128) + (112/2) - 128 5085LAttack2Monster021: equ $4000 + (216*128) + (080/2) - 128 5087Monster021Move: 5088Monster021Idle:5089 db 4 5090 db 4 5091 dw RIdle1Monster0215092 dw RIdle2Monster0215093 dw RIdle3Monster0215094 dw RIdle2Monster0215095 5096 dw LIdle1Monster0215097 dw LIdle2Monster0215098 dw LIdle3Monster0215099 dw LIdle2Monster0215101Monster021AttackPatternRight:5102 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 003,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 007,128+16,AnimateAttack | dw RIdle1Monster021 | db 000,InitiateAttack5103Monster021AttackPatternRightUp:5104 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 008,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 004,InitiateAttack5105Monster021AttackPatternRightDown:5106 db 000,128+32,AnimateAttack | dw Rattack1Monster021 | db 006,AnimateAttack | dw Rattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack1Monster021 | db 000,AnimateAttack | dw Rattack2Monster021 | db 000,128+16,AnimateAttack | dw RIdle1Monster021 | db 002,InitiateAttack5108Monster021AttackPatternLeft:5109 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,000,AnimateAttack | dw Lattack2Monster021 | db 007,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 003,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,000,InitiateAttack5110Monster021AttackPatternLeftUp:5111 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,002,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,006,InitiateAttack5112Monster021AttackPatternLeftDown:5113 db 000,128+32,AnimateAttack | dw Lattack1Monster021 | db DisplaceLeft,004,AnimateAttack | dw Lattack2Monster021 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack1Monster021 | db 000,AnimateAttack | dw Lattack2Monster021 | db 000,128+16,AnimateAttack | dw LIdle1Monster021 | db DisplaceRight,008,InitiateAttack51145117RIdle1Monster022: equ $4000 + (024*128) + (240/2) - 128 5118RIdle2Monster022: equ $4000 + (080*128) + (048/2) - 128 5120LIdle1Monster022: equ $4000 + (080*128) + (080/2) - 128 5121LIdle2Monster022: equ $4000 + (080*128) + (064/2) - 128 5123Monster022Move: 5124Monster022Idle:5125 db 6 5126 db 2 5127 dw RIdle1Monster0225128 dw RIdle2Monster0225129 5130 dw LIdle1Monster0225131 dw LIdle2Monster02251325135RIdle1Monster023: equ $4000 + (000*128) + (240/2) - 128 5136RIdle2Monster023: equ $4000 + (056*128) + (048/2) - 128 5137RAttack1Monster023: equ $4000 + (056*128) + (064/2) - 128 5138RAttack2Monster023: equ $4000 + (056*128) + (080/2) - 128 5139RAttack3Monster023: equ $4000 + (056*128) + (096/2) - 128 5141LIdle1Monster023: equ $4000 + (056*128) + (176/2) - 128 5142LIdle2Monster023: equ $4000 + (056*128) + (160/2) - 128 5143LAttack1Monster023: equ $4000 + (056*128) + (144/2) - 128 5144LAttack2Monster023: equ $4000 + (056*128) + (128/2) - 128 5145LAttack3Monster023: equ $4000 + (056*128) + (112/2) - 128 5147Monster023Move: 5148Monster023Idle:5149 db 6 5150 db 2 5151 dw RIdle1Monster0235152 dw RIdle2Monster0235153 5154 dw LIdle1Monster0235155 dw LIdle2Monster0235157Monster023AttackPatternRight:5158 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,003,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,007,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5159Monster023AttackPatternRightUp:5160 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,002,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,006,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5161Monster023AttackPatternRightDown:5162 db 000,AnimateAttack | dw Rattack1Monster023 | db 000,000,AnimateAttack | dw Rattack2Monster023 | db 000,004,ShowBeingHitSprite,AnimateAttack | dw Rattack3Monster023 | db 000,008,AnimateAttack | dw Rattack1Monster023 | db 000,000,InitiateAttack5163Monster023AttackPatternLeft:5164 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,007,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,003,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5165Monster023AttackPatternLeftUp:5166 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,008,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,004,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack5167Monster023AttackPatternLeftDown:5168 db 000,AnimateAttack | dw Lattack1Monster023 | db 000,000,AnimateAttack | dw Lattack2Monster023 | db 000,006,ShowBeingHitSprite,AnimateAttack | dw Lattack3Monster023 | db 000,002,AnimateAttack | dw Lattack1Monster023 | db 000,000,InitiateAttack51695172RIdle1Monster024: equ $4000 + (000*128) + (000/2) - 128 5173RIdle2Monster024: equ $4000 + (000*128) + (048/2) - 128 5174RIdle3Monster024: equ $4000 + (000*128) + (096/2) - 128 5176LIdle1Monster024: equ $4000 + (056*128) + (000/2) - 128 5177LIdle2Monster024: equ $4000 + (000*128) + (192/2) - 128 5178LIdle3Monster024: equ $4000 + (000*128) + (144/2) - 128 5180Monster024Move: 5181Monster024Idle:5182 db 4 5183 db 4 5184 dw RIdle1Monster0245185 dw RIdle2Monster0245186 dw RIdle3Monster0245187 dw RIdle2Monster0245188 5189 dw LIdle1Monster0245190 dw LIdle2Monster0245191 dw LIdle3Monster0245192 dw LIdle2Monster02451935196RIdle1Monster025: equ $4000 + (112*128) + (000/2) - 128 5197RIdle2Monster025: equ $4000 + (112*128) + (016/2) - 128 5198RAttack1Monster025: equ $4000 + (112*128) + (032/2) - 128 5200LIdle1Monster025: equ $4000 + (112*128) + (080/2) - 128 5201LIdle2Monster025: equ $4000 + (112*128) + (064/2) - 128 5202LAttack1Monster025: equ $4000 + (112*128) + (048/2) - 128 5204Monster025Move: 5205Monster025Idle:5206 db 8 5207 db 2 5208 dw RIdle1Monster0255209 dw RIdle2Monster0255210 5211 dw LIdle1Monster0255212 dw LIdle2Monster0255216Monster025AttackPatternRight:5217 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,003,ShowBeingHitSprite,000,007,000,000,InitiateAttack5218Monster025AttackPatternRightUp:5219 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,002,ShowBeingHitSprite,000,006,000,000,InitiateAttack5220Monster025AttackPatternRightDown:5221 db 000,AnimateAttack | dw Rattack1Monster025 | db 000,000,000,004,ShowBeingHitSprite,000,008,000,000,InitiateAttack5222Monster025AttackPatternLeft:5223 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,007,ShowBeingHitSprite,000,003,000,000,InitiateAttack5224Monster025AttackPatternLeftUp:5225 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,008,ShowBeingHitSprite,000,004,000,000,InitiateAttack5226Monster025AttackPatternLeftDown:5227 db 000,AnimateAttack | dw Lattack1Monster025 | db 000,000,000,006,ShowBeingHitSprite,000,002,000,000,InitiateAttack52325235RIdle1Monster026: equ $4000 + (184*128) + (000/2) - 128 5236RIdle2Monster026: equ $4000 + (184*128) + (016/2) - 128 5237RAttack1Monster026: equ $4000 + (184*128) + (032/2) - 128 5238RAttack2Monster026: equ $4000 + (184*128) + (064/2) - 128 5240LIdle1Monster026: equ $4000 + (184*128) + (176/2) - 128 5241LIdle2Monster026: equ $4000 + (184*128) + (160/2) - 128 5242LAttack1Monster026: equ $4000 + (184*128) + (128/2) - 128 5243LAttack2Monster026: equ $4000 + (184*128) + (096/2) - 128 5245Monster026Move: 5246Monster026Idle:5247 db 7 5248 db 2 5249 dw RIdle1Monster0265250 dw RIdle2Monster0265251 5252 dw LIdle1Monster0265253 dw LIdle2Monster0265254Monster026AttackPatternRight:5255 db AnimateAttack | dw Rattack1Monster026 | db 128+32,000,000,AnimateAttack | dw Rattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster026 | db 128+16,WaitImpactProjectile5256Monster026AttackPatternLeft:5257 db AnimateAttack | dw Lattack1Monster026 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw Lattack2Monster026 | db ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster026 | db 128+16,DisplaceRight,WaitImpactProjectile 52585261RIdle1Monster027: equ $4000 + (056*128) + (192/2) - 128 5262RIdle2Monster027: equ $4000 + (056*128) + (208/2) - 128 5264LIdle1Monster027: equ $4000 + (056*128) + (240/2) - 128 5265LIdle2Monster027: equ $4000 + (056*128) + (224/2) - 128 5267Monster027Move: 5268Monster027Idle:5269 db 7 5270 db 2 5271 dw RIdle1Monster0275272 dw RIdle2Monster0275273 5274 dw LIdle1Monster0275275 dw LIdle2Monster02752765279RIdle1Monster028: equ $4000 + (080*128) + (096/2) - 128 5280RIdle2Monster028: equ $4000 + (080*128) + (112/2) - 128 5282LIdle1Monster028: equ $4000 + (080*128) + (144/2) - 128 5283LIdle2Monster028: equ $4000 + (080*128) + (128/2) - 128 5285Monster028Move: 5286Monster028Idle:5287 db 7 5288 db 2 5289 dw RIdle1Monster0285290 dw RIdle2Monster0285291 5292 dw LIdle1Monster0285293 dw LIdle2Monster02852945297RIdle1Monster029: equ $4000 + (080*128) + (160/2) - 128 5298RIdle2Monster029: equ $4000 + (080*128) + (176/2) - 128 5300LIdle1Monster029: equ $4000 + (080*128) + (208/2) - 128 5301LIdle2Monster029: equ $4000 + (080*128) + (192/2) - 128 5303Monster029Move: 5304Monster029Idle:5305 db 7 5306 db 2 5307 dw RIdle1Monster0295308 dw RIdle2Monster0295309 5310 dw LIdle1Monster0295311 dw LIdle2Monster02953125315RIdle1Monster030: equ $4000 + (080*128) + (224/2) - 128 5316RIdle2Monster030: equ $4000 + (080*128) + (240/2) - 128 5318LIdle1Monster030: equ $4000 + (104*128) + (112/2) - 128 5319LIdle2Monster030: equ $4000 + (104*128) + (096/2) - 128 5321Monster030Move: 5322Monster030Idle:5323 db 7 5324 db 2 5325 dw RIdle1Monster0305326 dw RIdle2Monster0305327 5328 dw LIdle1Monster0305329 dw LIdle2Monster03053305333RIdle1Monster031: equ $4000 + (104*128) + (128/2) - 128 5334RIdle2Monster031: equ $4000 + (104*128) + (144/2) - 128 5336LIdle1Monster031: equ $4000 + (104*128) + (176/2) - 128 5337LIdle2Monster031: equ $4000 + (104*128) + (160/2) - 128 5339Monster031Move: 5340Monster031Idle:5341 db 7 5342 db 2 5343 dw RIdle1Monster0315344 dw RIdle2Monster0315345 5346 dw LIdle1Monster0315347 dw LIdle2Monster03153485351RIdle1Monster032: equ $4000 + (104*128) + (192/2) - 128 5352RIdle2Monster032: equ $4000 + (104*128) + (208/2) - 128 5354LIdle1Monster032: equ $4000 + (104*128) + (240/2) - 128 5355LIdle2Monster032: equ $4000 + (104*128) + (224/2) - 128 5357Monster032Move: 5358Monster032Idle:5359 db 7 5360 db 2 5361 dw RIdle1Monster0325362 dw RIdle2Monster0325363 5364 dw LIdle1Monster0325365 dw LIdle2Monster03253665369RIdle1Monster033: equ $4000 + (128*128) + (096/2) - 128 5370RIdle2Monster033: equ $4000 + (128*128) + (112/2) - 128 5372LIdle1Monster033: equ $4000 + (128*128) + (144/2) - 128 5373LIdle2Monster033: equ $4000 + (128*128) + (128/2) - 128 5375Monster033Move: 5376Monster033Idle:5377 db 7 5378 db 2 5379 dw RIdle1Monster0335380 dw RIdle2Monster0335381 5382 dw LIdle1Monster0335383 dw LIdle2Monster03353845387RIdle1Monster034: equ $4000 + (128*128) + (160/2) - 128 5388RIdle2Monster034: equ $4000 + (128*128) + (176/2) - 128 5390LIdle1Monster034: equ $4000 + (128*128) + (208/2) - 128 5391LIdle2Monster034: equ $4000 + (128*128) + (192/2) - 128 5393Monster034Move: 5394Monster034Idle:5395 db 7 5396 db 2 5397 dw RIdle1Monster0345398 dw RIdle2Monster0345399 5400 dw LIdle1Monster0345401 dw LIdle2Monster03454025405RIdle1Monster035: equ $4000 + (128*128) + (224/2) - 128 5406RIdle2Monster035: equ $4000 + (128*128) + (240/2) - 128 5408LIdle1Monster035: equ $4000 + (152*128) + (000/2) - 128 5409LIdle2Monster035: equ $4000 + (152*128) + (016/2) - 128 5411Monster035Move: 5412Monster035Idle:5413 db 7 5414 db 2 5415 dw RIdle1Monster0355416 dw RIdle2Monster0355417 5418 dw LIdle1Monster0355419 dw LIdle2Monster0355420Monster035AttackPatternLeft:5421Monster035AttackPatternRight:5422 db ShootProjectile,WaitImpactProjectile54235426RIdle1Monster036: equ $4000 + (216*128) + (000/2) - 128 5427RIdle2Monster036: equ $4000 + (216*128) + (016/2) - 128 5428RIdle3Monster036: equ $4000 + (216*128) + (032/2) - 128 5429RAttack1Monster036: equ $4000 + (216*128) + (048/2) - 128 5431LIdle1Monster036: equ $4000 + (216*128) + (144/2) - 128 5432LIdle2Monster036: equ $4000 + (216*128) + (128/2) - 128 5433LIdle3Monster036: equ $4000 + (216*128) + (112/2) - 128 5434LAttack1Monster036: equ $4000 + (216*128) + (080/2) - 128 5436Monster036Move: 5437Monster036Idle:5438 db 5 5439 db 4 5440 dw RIdle1Monster0365441 dw RIdle2Monster0365442 dw RIdle3Monster0365443 dw RIdle2Monster0365444 5445 dw LIdle1Monster0365446 dw LIdle2Monster0365447 dw LIdle3Monster0365448 dw LIdle2Monster0365449Monster036AttackPatternRight:5450 db 000,AnimateAttack | dw Rattack1Monster036 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster036 | db 128+16,WaitImpactProjectile5451Monster036AttackPatternLeft:5452 db 000,AnimateAttack | dw Lattack1Monster036 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster036 | db DisplaceRight,128+16,WaitImpactProjectile54535456RIdle1Monster037: equ $4000 + (000*128) + (000/2) - 128 5457RIdle2Monster037: equ $4000 + (000*128) + (016/2) - 128 5458RIdle3Monster037: equ $4000 + (000*128) + (032/2) - 128 5459RIdle4Monster037: equ $4000 + (000*128) + (048/2) - 128 5460RAttack1Monster037: equ $4000 + (000*128) + (064/2) - 128 5461RAttack2Monster037: equ $4000 + (000*128) + (096/2) - 128 5463LIdle1Monster037: equ $4000 + (000*128) + (240/2) - 128 5464LIdle2Monster037: equ $4000 + (000*128) + (224/2) - 128 5465LIdle3Monster037: equ $4000 + (000*128) + (208/2) - 128 5466LIdle4Monster037: equ $4000 + (000*128) + (192/2) - 128 5467LAttack1Monster037: equ $4000 + (000*128) + (160/2) - 128 5468LAttack2Monster037: equ $4000 + (000*128) + (128/2) - 128 5470Monster037Move: 5471Monster037Idle:5472 db 4 5473 db 4 5474 dw RIdle1Monster0375475 dw RIdle2Monster0375476 dw RIdle3Monster0375477 dw RIdle4Monster0375478 5479 dw LIdle1Monster0375480 dw LIdle2Monster0375481 dw LIdle3Monster0375482 dw LIdle4Monster0375483Monster037AttackPatternRight:5484 db AnimateAttack | dw Rattack1Monster037 | db 128+32,000,000,000,AnimateAttack | dw Rattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle1Monster037 | db 128+16,WaitImpactProjectile5485Monster037AttackPatternLeft:5486 db AnimateAttack | dw Lattack1Monster037 | db 128+32,DisplaceLeft,000,000,000,AnimateAttack | dw Lattack2Monster037 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle1Monster037 | db DisplaceRight,128+16,WaitImpactProjectile54875490RIdle1Monster038: equ $4000 + (216*128) + (192/2) - 128 5491RIdle2Monster038: equ $4000 + (216*128) + (208/2) - 128 5493LIdle1Monster038: equ $4000 + (216*128) + (240/2) - 128 5494LIdle2Monster038: equ $4000 + (216*128) + (224/2) - 128 5496Monster038Move: 5497Monster038Idle:5498 db 5 5499 db 2 5500 dw RIdle1Monster0385501 dw RIdle2Monster0385502 5503 dw LIdle1Monster0385504 dw LIdle2Monster03855055508RIdle1Monster039: equ $4000 + (040*128) + (000/2) - 128 5509RIdle2Monster039: equ $4000 + (040*128) + (032/2) - 128 5510RIdle3Monster039: equ $4000 + (040*128) + (064/2) - 128 5512LIdle1Monster039: equ $4000 + (040*128) + (160/2) - 128 5513LIdle2Monster039: equ $4000 + (040*128) + (128/2) - 128 5514LIdle3Monster039: equ $4000 + (040*128) + (096/2) - 128 5516Monster039Move: 5517Monster039Idle:5518 db 3 5519 db 5 5520 dw RIdle1Monster0395521 dw RIdle2Monster0395522 dw RIdle2Monster0395523 dw RIdle3Monster0395524 dw RIdle3Monster0395525 5526 dw LIdle1Monster0395527 dw LIdle2Monster0395528 dw LIdle2Monster0395529 dw LIdle3Monster0395530 dw LIdle3Monster0395531Monster039AttackPatternRight:5532 db 000,AnimateAttack | dw RIdle1Monster039 | db ShootProjectile,WaitImpactProjectile5533Monster039AttackPatternLeft:5534 db 000,AnimateAttack | dw LIdle1Monster039 | db ShootProjectile,WaitImpactProjectile55355538RIdle1Monster040: equ $4000 + (080*128) + (000/2) - 128 5539RIdle2Monster040: equ $4000 + (080*128) + (032/2) - 128 5540RIdle3Monster040: equ $4000 + (080*128) + (064/2) - 128 5541RAttack1Monster040: equ $4000 + (080*128) + (096/2) - 128 5543LIdle1Monster040: equ $4000 + (080*128) + (224/2) - 128 5544LIdle2Monster040: equ $4000 + (080*128) + (192/2) - 128 5545LIdle3Monster040: equ $4000 + (080*128) + (160/2) - 128 5546LAttack1Monster040: equ $4000 + (080*128) + (128/2) - 128 5548Monster040Move: 5549Monster040Idle:5550 db 6 5551 db 3 5552 dw RIdle1Monster0405553 dw RIdle2Monster0405554 dw RIdle3Monster0405555 5556 dw LIdle1Monster0405557 dw LIdle2Monster0405558 dw LIdle3Monster0405559Monster040AttackPatternRight:5560 db 000,AnimateAttack | dw Rattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster040 | db WaitImpactProjectile5561Monster040AttackPatternLeft:5562 db 000,AnimateAttack | dw Lattack1Monster040 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster040 | db WaitImpactProjectile55635566RIdle1Monster041: equ $4000 + (224*128) + (128/2) - 128 5567RIdle2Monster041: equ $4000 + (224*128) + (160/2) - 128 5569LIdle1Monster041: equ $4000 + (224*128) + (192/2) - 128 5570LIdle2Monster041: equ $4000 + (224*128) + (224/2) - 128 5572Monster041Move: 5573Monster041Idle:5574 db 1 5575 db 2 5576 dw RIdle1Monster0415577 dw RIdle2Monster0415578 5579 dw LIdle1Monster0415580 dw LIdle2Monster04155815584RIdle1Monster042: equ $4000 + (120*128) + (000/2) - 128 5585RIdle2Monster042: equ $4000 + (120*128) + (032/2) - 128 5587LIdle1Monster042: equ $4000 + (120*128) + (064/2) - 128 5588LIdle2Monster042: equ $4000 + (120*128) + (096/2) - 128 5590Monster042Move: 5591Monster042Idle:5592 db 5 5593 db 2 5594 dw RIdle1Monster0425595 dw RIdle2Monster0425596 5597 dw LIdle1Monster0425598 dw LIdle2Monster04255995602RIdle1Monster043: equ $4000 + (216*128) + (160/2) - 128 5603RIdle2Monster043: equ $4000 + (216*128) + (176/2) - 128 5604RIdle3Monster043: equ $4000 + (216*128) + (192/2) - 128 5605RAttack1Monster043: equ $4000 + (176*128) + (192/2) - 128 5607LIdle1Monster043: equ $4000 + (216*128) + (240/2) - 128 5608LIdle2Monster043: equ $4000 + (216*128) + (224/2) - 128 5609LIdle3Monster043: equ $4000 + (216*128) + (208/2) - 128 5610LAttack1Monster043: equ $4000 + (176*128) + (224/2) - 128 5612Monster043Move: 5613Monster043Idle:5614 db 4 5615 db 3 5616 dw RIdle1Monster0435617 dw RIdle2Monster0435618 dw RIdle3Monster0435619 5620 dw LIdle1Monster0435621 dw LIdle2Monster0435622 dw LIdle3Monster0435623Monster043AttackPatternRight:5624 db 000,AnimateAttack | dw Rattack1Monster043 | db 128+32,000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster043 | db 128+16,WaitImpactProjectile5625Monster043AttackPatternLeft:5626 db 000,AnimateAttack | dw Lattack1Monster043 | db 128+32,DisplaceLeft,000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster043 | db DisplaceRight,128+16,WaitImpactProjectile56275630RIdle1Monster044: equ $4000 + (120*128) + (128/2) - 128 5631RIdle2Monster044: equ $4000 + (120*128) + (160/2) - 128 5633LIdle1Monster044: equ $4000 + (120*128) + (224/2) - 128 5634LIdle2Monster044: equ $4000 + (120*128) + (192/2) - 128 5636Monster044Move: 5637Monster044Idle:5638 db 6 5639 db 2 5640 dw RIdle1Monster0445641 dw RIdle2Monster0445642 5643 dw LIdle1Monster0445644 dw LIdle2Monster04456455648RIdle1Monster045: equ $4000 + (224*128) + (000/2) - 128 5649RIdle2Monster045: equ $4000 + (224*128) + (032/2) - 128 5651LIdle1Monster045: equ $4000 + (224*128) + (096/2) - 128 5652LIdle2Monster045: equ $4000 + (224*128) + (064/2) - 128 5654Monster045Move: 5655Monster045Idle:5656 db 9 5657 db 2 5658 dw RIdle1Monster0455659 dw RIdle2Monster0455660 5661 dw LIdle1Monster0455662 dw LIdle2Monster04556635666RIdle1Monster046: equ $4000 + (160*128) + (000/2) - 128 5667RIdle2Monster046: equ $4000 + (160*128) + (032/2) - 128 5669LIdle1Monster046: equ $4000 + (160*128) + (096/2) - 128 5670LIdle2Monster046: equ $4000 + (160*128) + (064/2) - 128 5672Monster046Move: 5673Monster046Idle:5674 db 9 5675 db 2 5676 dw RIdle1Monster0465677 dw RIdle2Monster0465678 5679 dw LIdle1Monster0465680 dw LIdle2Monster04656815684RIdle1Monster047: equ $4000 + (176*128) + (000/2) - 128 5685RIdle2Monster047: equ $4000 + (176*128) + (032/2) - 128 5686RIdle3Monster047: equ $4000 + (176*128) + (064/2) - 128 5688LIdle1Monster047: equ $4000 + (176*128) + (160/2) - 128 5689LIdle2Monster047: equ $4000 + (176*128) + (128/2) - 128 5690LIdle3Monster047: equ $4000 + (176*128) + (096/2) - 128 5692Monster047Move: 5693Monster047Idle:5694 db 13 5695 db 4 5696 dw RIdle1Monster0475697 dw RIdle2Monster0475698 dw RIdle1Monster0475699 dw RIdle3Monster0475700 5701 dw LIdle1Monster0475702 dw LIdle2Monster0475703 dw LIdle1Monster0475704 dw LIdle3Monster0475705Monster047AttackPatternRight:5706 db 000,AnimateAttack | dw RIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile5707Monster047AttackPatternLeft:5708 db 000,AnimateAttack | dw LIdle1Monster047 | db 000,ShootProjectile,WaitImpactProjectile57095712RIdle1Monster048: equ $4000 + (136*128) + (096/2) - 128 5713RIdle2Monster048: equ $4000 + (136*128) + (112/2) - 128 5714RIdle3Monster048: equ $4000 + (136*128) + (128/2) - 128 5715RIdle4Monster048: equ $4000 + (136*128) + (144/2) - 128 5716RIdle5Monster048: equ $4000 + (136*128) + (160/2) - 128 5718LIdle1Monster048: equ $4000 + (136*128) + (240/2) - 128 5719LIdle2Monster048: equ $4000 + (136*128) + (224/2) - 128 5720LIdle3Monster048: equ $4000 + (136*128) + (208/2) - 128 5721LIdle4Monster048: equ $4000 + (136*128) + (192/2) - 128 5722LIdle5Monster048: equ $4000 + (136*128) + (176/2) - 128 5724Monster048Move: 5725Monster048Idle:5726 db 05 5727 db 8 5728 dw RIdle1Monster0485729 dw RIdle2Monster0485730 dw RIdle3Monster0485731 dw RIdle4Monster0485732 dw RIdle5Monster0485733 dw RIdle4Monster0485734 dw RIdle3Monster0485735 dw RIdle2Monster0485736 5737 dw LIdle1Monster0485738 dw LIdle2Monster0485739 dw LIdle3Monster0485740 dw LIdle4Monster0485741 dw LIdle5Monster0485742 dw LIdle4Monster0485743 dw LIdle3Monster0485744 dw LIdle2Monster04857455748RIdle1Monster049: equ $4000 + (224*128) + (000/2) - 128 5749RIdle2Monster049: equ $4000 + (224*128) + (016/2) - 128 5750RAttack1Monster049: equ $4000 + (224*128) + (032/2) - 128 5752LIdle1Monster049: equ $4000 + (224*128) + (080/2) - 128 5753LIdle2Monster049: equ $4000 + (224*128) + (064/2) - 128 5754LAttack1Monster049: equ $4000 + (224*128) + (048/2) - 128 5756Monster049Move: 5757Monster049Idle:5758 db 06 5759 db 2 5760 dw RIdle1Monster0495761 dw RIdle2Monster0495762 5763 dw LIdle1Monster0495764 dw LIdle2Monster0495765Monster049AttackPatternRight:5766 db AnimateAttack | dw Rattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile5767Monster049AttackPatternLeft:5768 db AnimateAttack | dw Lattack1Monster049 | db 000,ShootProjectile,WaitImpactProjectile57705773RIdle1Monster050: equ $4000 + (184*128) + (128/2) - 128 5774RIdle2Monster050: equ $4000 + (184*128) + (144/2) - 128 5776LIdle1Monster050: equ $4000 + (184*128) + (176/2) - 128 5777LIdle2Monster050: equ $4000 + (184*128) + (160/2) - 128 5779Monster050Move: 5780Monster050Idle:5781 db 06 5782 db 2 5783 dw RIdle1Monster0505784 dw RIdle2Monster0505785 5786 dw LIdle1Monster0505787 dw LIdle2Monster05057885791RIdle1Monster051: equ $4000 + (160*128) + (128/2) - 128 5792RIdle2Monster051: equ $4000 + (160*128) + (144/2) - 128 5794LIdle1Monster051: equ $4000 + (160*128) + (176/2) - 128 5795LIdle2Monster051: equ $4000 + (160*128) + (160/2) - 128 5797Monster051Move: 5798Monster051Idle:5799 db 06 5800 db 2 5801 dw RIdle1Monster0515802 dw RIdle2Monster0515803 5804 dw LIdle1Monster0515805 dw LIdle2Monster05158065809RIdle1Monster052: equ $4000 + (160*128) + (192/2) - 128 5810RIdle2Monster052: equ $4000 + (160*128) + (208/2) - 128 5812LIdle1Monster052: equ $4000 + (160*128) + (240/2) - 128 5813LIdle2Monster052: equ $4000 + (160*128) + (224/2) - 128 5815Monster052Move: 5816Monster052Idle:5817 db 06 5818 db 2 5819 dw RIdle1Monster0525820 dw RIdle2Monster0525821 5822 dw LIdle1Monster0525823 dw LIdle2Monster05258245827RIdle1Monster053: equ $4000 + (152*128) + (032/2) - 128 5828RIdle2Monster053: equ $4000 + (152*128) + (048/2) - 128 5830LIdle1Monster053: equ $4000 + (152*128) + (080/2) - 128 5831LIdle2Monster053: equ $4000 + (152*128) + (064/2) - 128 5833Monster053Move: 5834Monster053Idle:5835 db 06 5836 db 2 5837 dw RIdle1Monster0535838 dw RIdle2Monster0535839 5840 dw LIdle1Monster0535841 dw LIdle2Monster05358425845RIdle1Monster054: equ $4000 + (184*128) + (192/2) - 128 5846RIdle2Monster054: equ $4000 + (184*128) + (208/2) - 128 5848LIdle1Monster054: equ $4000 + (184*128) + (240/2) - 128 5849LIdle2Monster054: equ $4000 + (184*128) + (224/2) - 128 5851Monster054Move: 5852Monster054Idle:5853 db 08 5854 db 2 5855 dw RIdle1Monster0545856 dw RIdle2Monster0545857 5858 dw LIdle1Monster0545859 dw LIdle2Monster05458605863RIdle1Monster055: equ $4000 + (000*128) + (000/2) - 128 5864RIdle2Monster055: equ $4000 + (000*128) + (032/2) - 128 5865RAttack1Monster055: equ $4000 + (000*128) + (064/2) - 128 5867LIdle1Monster055: equ $4000 + (000*128) + (160/2) - 128 5868LIdle2Monster055: equ $4000 + (000*128) + (128/2) - 128 5869LAttack1Monster055: equ $4000 + (000*128) + (096/2) - 128 5871Monster055Move: 5872Monster055Idle:5873 db 06 5874 db 2 5875 dw RIdle1Monster0555876 dw RIdle2Monster0555877 5878 dw LIdle1Monster0555879 dw LIdle2Monster0555880Monster055AttackPatternRight:5881 db 000,AnimateAttack | dw RAttack1Monster055 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5882Monster055AttackPatternLeft:5883 db 000,AnimateAttack | dw LAttack1Monster055 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5884Monster055AttackPatternLeftUp:5885 db 000,AnimateAttack | dw LAttack1Monster055 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5886Monster055AttackPatternLeftDown:5887 db 000,AnimateAttack | dw LAttack1Monster055 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5888Monster055AttackPatternRightUp:5889 db 000,AnimateAttack | dw RAttack1Monster055 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5890Monster055AttackPatternRightDown:5891 db 000,AnimateAttack | dw RAttack1Monster055 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack58925895RIdle1Monster056: equ $4000 + (000*128) + (192/2) - 128 5896RIdle2Monster056: equ $4000 + (000*128) + (224/2) - 128 5898LIdle1Monster056: equ $4000 + (040*128) + (224/2) - 128 5899LIdle2Monster056: equ $4000 + (040*128) + (192/2) - 128 5901Monster056Move: 5902Monster056Idle:5903 db 06 5904 db 2 5905 dw RIdle1Monster0565906 dw RIdle2Monster0565907 5908 dw LIdle1Monster0565909 dw LIdle2Monster05659105913RIdle1Monster057: equ $4000 + (040*128) + (000/2) - 128 5914RIdle2Monster057: equ $4000 + (040*128) + (032/2) - 128 5915RIdle3Monster057: equ $4000 + (040*128) + (064/2) - 128 5917LIdle1Monster057: equ $4000 + (040*128) + (160/2) - 128 5918LIdle2Monster057: equ $4000 + (040*128) + (128/2) - 128 5919LIdle3Monster057: equ $4000 + (040*128) + (096/2) - 128 5921Monster057Move: 5922Monster057Idle:5923 db 06 5924 db 4 5925 dw RIdle1Monster0575926 dw RIdle2Monster0575927 dw RIdle3Monster0575928 dw RIdle2Monster0575929 5930 dw LIdle1Monster0575931 dw LIdle2Monster0575932 dw LIdle3Monster0575933 dw LIdle2Monster05759345937RIdle1Monster058: equ $4000 + (080*128) + (000/2) - 128 5938RIdle2Monster058: equ $4000 + (080*128) + (032/2) - 128 5939RAttack1Monster058: equ $4000 + (080*128) + (064/2) - 128 5941LIdle1Monster058: equ $4000 + (080*128) + (160/2) - 128 5942LIdle2Monster058: equ $4000 + (080*128) + (128/2) - 128 5943LAttack1Monster058: equ $4000 + (080*128) + (096/2) - 128 5945Monster058Move: 5946Monster058Idle:5947 db 06 5948 db 2 5949 dw RIdle1Monster0585950 dw RIdle2Monster0585951 5952 dw LIdle1Monster0585953 dw LIdle2Monster0585954Monster058AttackPatternRight:5955 db 000,AnimateAttack | dw RAttack1Monster058 | db 003,000,ShowBeingHitSprite,007,000,InitiateAttack5956Monster058AttackPatternLeft:5957 db 000,AnimateAttack | dw LAttack1Monster058 | db 007,000,ShowBeingHitSprite,003,000,InitiateAttack5958Monster058AttackPatternLeftUp:5959 db 000,AnimateAttack | dw LAttack1Monster058 | db 008,000,ShowBeingHitSprite,004,000,InitiateAttack5960Monster058AttackPatternLeftDown:5961 db 000,AnimateAttack | dw LAttack1Monster058 | db 006,000,ShowBeingHitSprite,002,000,InitiateAttack5962Monster058AttackPatternRightUp:5963 db 000,AnimateAttack | dw RAttack1Monster058 | db 002,000,ShowBeingHitSprite,006,000,InitiateAttack5964Monster058AttackPatternRightDown:5965 db 000,AnimateAttack | dw RAttack1Monster058 | db 004,000,ShowBeingHitSprite,008,000,InitiateAttack59665969RIdle1Monster059: equ $4000 + (120*128) + (000/2) - 128 5970RIdle2Monster059: equ $4000 + (120*128) + (032/2) - 128 5972LIdle1Monster059: equ $4000 + (120*128) + (096/2) - 128 5973LIdle2Monster059: equ $4000 + (120*128) + (064/2) - 128 5975Monster059Move: 5976Monster059Idle:5977 db 06 5978 db 2 5979 dw RIdle1Monster0595980 dw RIdle2Monster0595981 5982 dw LIdle1Monster0595983 dw LIdle2Monster05959845987RIdle1Monster060: equ $4000 + (120*128) + (128/2) - 128 5988RIdle2Monster060: equ $4000 + (120*128) + (160/2) - 128 5990LIdle1Monster060: equ $4000 + (120*128) + (224/2) - 128 5991LIdle2Monster060: equ $4000 + (120*128) + (192/2) - 128 5993Monster060Move: 5994Monster060Idle:5995 db 06 5996 db 2 5997 dw RIdle1Monster0605998 dw RIdle2Monster0605999 6000 dw LIdle1Monster0606001 dw LIdle2Monster06060026005RIdle1Monster061: equ $4000 + (160*128) + (000/2) - 128 6006RIdle2Monster061: equ $4000 + (160*128) + (048/2) - 128 6008LIdle1Monster061: equ $4000 + (160*128) + (144/2) - 128 6009LIdle2Monster061: equ $4000 + (160*128) + (096/2) - 128 6011Monster061Move: 6012Monster061Idle:6013 db 06 6014 db 2 6015 dw RIdle1Monster0616016 dw RIdle2Monster0616017 6018 dw LIdle1Monster0616019 dw LIdle2Monster06160206023RIdle1Monster062: equ $4000 + (200*128) + (000/2) - 128 6024RIdle2Monster062: equ $4000 + (200*128) + (032/2) - 128 6025RMove1Monster062: equ $4000 + (200*128) + (064/2) - 128 6026RMove2Monster062: equ $4000 + (200*128) + (096/2) - 128 6027RAttack1Monster062: equ $4000 + (080*128) + (192/2) - 128 6029LIdle1Monster062: equ $4000 + (200*128) + (224/2) - 128 6030LIdle2Monster062: equ $4000 + (200*128) + (192/2) - 128 6031LMove1Monster062: equ $4000 + (200*128) + (160/2) - 128 6032LMove2Monster062: equ $4000 + (200*128) + (128/2) - 128 6033LAttack1Monster062: equ $4000 + (160*128) + (192/2) - 128 6035Monster062Move: 6036 db 06 6037 db 2 6038 dw RMove1Monster0626039 dw RMove2Monster0626040 6041 dw LMove1Monster0626042 dw LMove2Monster0626043Monster062Idle:6044 db 06 6045 db 2 6046 dw RIdle1Monster0626047 dw RIdle2Monster0626048 6049 dw LIdle1Monster0626050 dw LIdle2Monster0626051Monster062AttackPatternRight:6052 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6053Monster062AttackPatternLeft:6054 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6055Monster062AttackPatternLeftUp:6056 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6057Monster062AttackPatternLeftDown:6058 db 000,AnimateAttack | dw LAttack1Monster062 | db 128+48,DisplaceLeft,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw LIdle1Monster062 | db 128+32,DisplaceRight,InitiateAttack6059Monster062AttackPatternRightUp:6060 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack6061Monster062AttackPatternRightDown:6062 db 000,AnimateAttack | dw RAttack1Monster062 | db 128+48,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw RIdle1Monster062 | db 128+32,InitiateAttack 60636066RIdle1Monster063: equ $4000 + (208*128) + (192/2) - 128 6067RIdle2Monster063: equ $4000 + (208*128) + (208/2) - 128 6069LIdle1Monster063: equ $4000 + (208*128) + (240/2) - 128 6070LIdle2Monster063: equ $4000 + (208*128) + (224/2) - 128 6072Monster063Move: 6073Monster063Idle:6074 db 06 6075 db 2 6076 dw RIdle1Monster0636077 dw RIdle2Monster0636078 6079 dw LIdle1Monster0636080 dw LIdle2Monster06360816084RIdle1Monster064: equ $4000 + (232*128) + (192/2) - 128 6085RIdle2Monster064: equ $4000 + (232*128) + (208/2) - 128 6087LIdle1Monster064: equ $4000 + (232*128) + (240/2) - 128 6088LIdle2Monster064: equ $4000 + (232*128) + (224/2) - 128 6090Monster064Move: 6091Monster064Idle:6092 db 06 6093 db 2 6094 dw RIdle1Monster0646095 dw RIdle2Monster0646096 6097 dw LIdle1Monster0646098 dw LIdle2Monster06460996102RIdle1Monster065: equ $4000 + (000*128) + (064/2) - 128 6103RIdle2Monster065: equ $4000 + (000*128) + (080/2) - 128 6105LIdle1Monster065: equ $4000 + (000*128) + (112/2) - 128 6106LIdle2Monster065: equ $4000 + (000*128) + (096/2) - 128 6108Monster065Move: 6109Monster065Idle:6110 db 06 6111 db 2 6112 dw RIdle1Monster0656113 dw RIdle2Monster0656114 6115 dw LIdle1Monster0656116 dw LIdle2Monster06561176120RIdle1Monster066: equ $4000 + (152*128) + (096/2) - 128 6121RIdle2Monster066: equ $4000 + (152*128) + (112/2) - 128 6123LIdle1Monster066: equ $4000 + (152*128) + (144/2) - 128 6124LIdle2Monster066: equ $4000 + (152*128) + (128/2) - 128 6126Monster066Move: 6127Monster066Idle:6128 db 06 6129 db 2 6130 dw RIdle1Monster0666131 dw RIdle2Monster0666132 6133 dw LIdle1Monster0666134 dw LIdle2Monster06661356138RIdle1Monster067: equ $4000 + (000*128) + (000/2) - 128 6139RIdle2Monster067: equ $4000 + (000*128) + (016/2) - 128 6141LIdle1Monster067: equ $4000 + (000*128) + (048/2) - 128 6142LIdle2Monster067: equ $4000 + (000*128) + (032/2) - 128 6144Monster067Move: 6145Monster067Idle:6146 db 06 6147 db 2 6148 dw RIdle1Monster0676149 dw RIdle2Monster0676150 6151 dw LIdle1Monster0676152 dw LIdle2Monster06761536156RIdle1Monster068: equ $4000 + (024*128) + (000/2) - 128 6157RIdle2Monster068: equ $4000 + (024*128) + (032/2) - 128 6159LIdle1Monster068: equ $4000 + (024*128) + (096/2) - 128 6160LIdle2Monster068: equ $4000 + (024*128) + (064/2) - 128 6162Monster068Move: 6163Monster068Idle:6164 db 06 6165 db 2 6166 dw RIdle1Monster0686167 dw RIdle2Monster0686168 6169 dw LIdle1Monster0686170 dw LIdle2Monster06861716174RIdle1Monster069: equ $4000 + (024*128) + (128/2) - 128 6175RIdle2Monster069: equ $4000 + (024*128) + (160/2) - 128 6177LIdle1Monster069: equ $4000 + (024*128) + (224/2) - 128 6178LIdle2Monster069: equ $4000 + (024*128) + (192/2) - 128 6180Monster069Move: 6181Monster069Idle:6182 db 06 6183 db 2 6184 dw RIdle1Monster0696185 dw RIdle2Monster0696186 6187 dw LIdle1Monster0696188 dw LIdle2Monster0696189Monster069AttackPatternRight:6190 db 000,AnimateAttack | dw RIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile6191Monster069AttackPatternLeft:6192 db 000,AnimateAttack | dw LIdle2Monster069 | db 000,ShootProjectile,WaitImpactProjectile61936196RIdle1Monster070: equ $4000 + (184*128) + (192/2) - 128 6197RIdle2Monster070: equ $4000 + (184*128) + (208/2) - 128 6199LIdle1Monster070: equ $4000 + (184*128) + (240/2) - 128 6200LIdle2Monster070: equ $4000 + (184*128) + (224/2) - 128 6202Monster070Move: 6203Monster070Idle:6204 db 06 6205 db 2 6206 dw RIdle1Monster0706207 dw RIdle2Monster0706208 6209 dw LIdle1Monster0706210 dw LIdle2Monster07062116214RIdle1Monster071: equ $4000 + (000*128) + (000/2) - 1286215RIdle2Monster071: equ $4000 + (000*128) + (064/2) - 1286217LIdle1Monster071: equ $4000 + (000*128) + (192/2) - 1286218LIdle2Monster071: equ $4000 + (000*128) + (128/2) - 1286220Monster071Move: 6221Monster071Idle:6222 db 3 6223 db 2 6224 dw RIdle1Monster0716225 dw RIdle2Monster0716226 6227 dw LIdle1Monster0716228 dw LIdle2Monster071622962356237RIdle1Monster072: equ $4000 + (064*128) + (000/2) - 1286238RIdle2Monster072: equ $4000 + (064*128) + (032/2) - 1286240LIdle1Monster072: equ $4000 + (064*128) + (096/2) - 1286241LIdle2Monster072: equ $4000 + (064*128) + (064/2) - 1286243Monster072Move: 6244Monster072Idle:6245 db 8 6246 db 2 6247 dw RIdle1Monster0726248 dw RIdle2Monster0726249 6250 dw LIdle1Monster0726251 dw LIdle2Monster07262526255RIdle1Monster073: equ $4000 + (064*128) + (128/2) - 1286256RIdle2Monster073: equ $4000 + (064*128) + (160/2) - 1286258LIdle1Monster073: equ $4000 + (064*128) + (224/2) - 1286259LIdle2Monster073: equ $4000 + (064*128) + (192/2) - 1286261Monster073Move: 6262Monster073Idle:6263 db 8 6264 db 2 6265 dw RIdle1Monster0736266 dw RIdle2Monster0736267 6268 dw LIdle1Monster0736269 dw LIdle2Monster07362706273RIdle1Monster074: equ $4000 + (000*128) + (128/2) - 1286274RIdle2Monster074: equ $4000 + (000*128) + (144/2) - 1286276LIdle1Monster074: equ $4000 + (000*128) + (176/2) - 1286277LIdle2Monster074: equ $4000 + (000*128) + (160/2) - 1286279Monster074Move: 6280Monster074Idle:6281 db 7 6282 db 2 6283 dw RIdle1Monster0746284 dw RIdle2Monster0746285 6286 dw LIdle1Monster0746287 dw LIdle2Monster07462886291RIdle1Monster075: equ $4000 + (000*128) + (192/2) - 1286292RIdle2Monster075: equ $4000 + (000*128) + (208/2) - 1286294LIdle1Monster075: equ $4000 + (000*128) + (240/2) - 1286295LIdle2Monster075: equ $4000 + (000*128) + (224/2) - 1286297Monster075Move: 6298Monster075Idle:6299 db 7 6300 db 2 6301 dw RIdle1Monster0756302 dw RIdle2Monster0756303 6304 dw LIdle1Monster0756305 dw LIdle2Monster07563066309RIdle1Monster076: equ $4000 + (104*128) + (000/2) - 1286310RIdle2Monster076: equ $4000 + (104*128) + (016/2) - 1286312LIdle1Monster076: equ $4000 + (104*128) + (048/2) - 1286313LIdle2Monster076: equ $4000 + (104*128) + (032/2) - 1286315Monster076Move: 6316Monster076Idle:6317 db 6 6318 db 2 6319 dw RIdle1Monster0766320 dw RIdle2Monster0766321 6322 dw LIdle1Monster0766323 dw LIdle2Monster07663246327RIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286328RIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286329RIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286331LIdle1Monster077: equ $4000 + (152*128) + (160/2) - 1286332LIdle2Monster077: equ $4000 + (152*128) + (176/2) - 1286333LIdle3Monster077: equ $4000 + (152*128) + (192/2) - 1286335Monster077Move: 6336Monster077Idle:6337 db 5 6338 db 4 6339 dw RIdle1Monster0776340 dw RIdle2Monster0776341 dw RIdle3Monster0776342 dw RIdle2Monster0776343 6344 dw LIdle1Monster0776345 dw LIdle2Monster0776346 dw LIdle3Monster0776347 dw LIdle2Monster07763486351RIdle1Monster078: equ $4000 + (096*128) + (240/2) - 1286352RIdle2Monster078: equ $4000 + (176*128) + (240/2) - 1286354LIdle1Monster078: equ $4000 + (176*128) + (240/2) - 1286355LIdle2Monster078: equ $4000 + (096*128) + (240/2) - 1286357Monster078Move: 6358Monster078Idle:6359 db 6 6360 db 2 6361 dw RIdle1Monster0786362 dw RIdle2Monster0786363 6364 dw LIdle1Monster0786365 dw LIdle2Monster07863666369RIdle1Monster079: equ $4000 + (104*128) + (064/2) - 1286370RIdle2Monster079: equ $4000 + (104*128) + (080/2) - 1286372LIdle1Monster079: equ $4000 + (104*128) + (112/2) - 1286373LIdle2Monster079: equ $4000 + (104*128) + (096/2) - 1286375Monster079Move: 6376Monster079Idle:6377 db 6 6378 db 2 6379 dw RIdle1Monster0796380 dw RIdle2Monster0796381 6382 dw LIdle1Monster0796383 dw LIdle2Monster07963846387RIdle1Monster080: equ $4000 + (240*128) + (032/2) - 1286388RIdle2Monster080: equ $4000 + (240*128) + (048/2) - 1286390LIdle1Monster080: equ $4000 + (240*128) + (080/2) - 1286391LIdle2Monster080: equ $4000 + (240*128) + (064/2) - 1286393Monster080Move: 6394Monster080Idle:6395 db 9 6396 db 2 6397 dw RIdle1Monster0806398 dw RIdle2Monster0806399 6400 dw LIdle1Monster0806401 dw LIdle2Monster08064026405RIdle1Monster081: equ $4000 + (104*128) + (128/2) - 1286406RIdle2Monster081: equ $4000 + (104*128) + (144/2) - 1286408LIdle1Monster081: equ $4000 + (104*128) + (176/2) - 1286409LIdle2Monster081: equ $4000 + (104*128) + (160/2) - 1286411Monster081Move: 6412Monster081Idle:6413 db 8 6414 db 2 6415 dw RIdle1Monster0816416 dw RIdle2Monster0816417 6418 dw LIdle1Monster0816419 dw LIdle2Monster08164206423RIdle1Monster082: equ $4000 + (080*128) + (240/2) - 1286424RIdle2Monster082: equ $4000 + (160*128) + (240/2) - 1286426LIdle1Monster082: equ $4000 + (240*128) + (016/2) - 1286427LIdle2Monster082: equ $4000 + (240*128) + (000/2) - 1286429Monster082Move: 6430Monster082Idle:6431 db 6 6432 db 2 6433 dw RIdle1Monster0826434 dw RIdle2Monster0826435 6436 dw LIdle1Monster0826437 dw LIdle2Monster08264386441RIdle1Monster083: equ $4000 + (104*128) + (192/2) - 1286442RIdle2Monster083: equ $4000 + (104*128) + (208/2) - 1286444LIdle1Monster083: equ $4000 + (104*128) + (240/2) - 1286445LIdle2Monster083: equ $4000 + (104*128) + (224/2) - 1286447Monster083Move: 6448Monster083Idle:6449 db 6 6450 db 2 6451 dw RIdle1Monster0836452 dw RIdle2Monster0836453 6454 dw LIdle1Monster0836455 dw LIdle2Monster08364566459RIdle1Monster084: equ $4000 + (224*128) + (128/2) - 1286460RIdle2Monster084: equ $4000 + (224*128) + (144/2) - 1286462LIdle1Monster084: equ $4000 + (224*128) + (176/2) - 1286463LIdle2Monster084: equ $4000 + (224*128) + (160/2) - 1286465Monster084Move: 6466Monster084Idle:6467 db 8 6468 db 2 6469 dw RIdle1Monster0846470 dw RIdle2Monster0846471 6472 dw LIdle1Monster0846473 dw LIdle2Monster08464746477RIdle1Monster085: equ $4000 + (040*128) + (192/2) - 1286478RIdle2Monster085: equ $4000 + (040*128) + (208/2) - 1286480LIdle1Monster085: equ $4000 + (040*128) + (240/2) - 1286481LIdle2Monster085: equ $4000 + (040*128) + (224/2) - 1286483Monster085Move: 6484Monster085Idle:6485 db 9 6486 db 2 6487 dw RIdle1Monster0856488 dw RIdle2Monster0856489 6490 dw LIdle1Monster0856491 dw LIdle2Monster08564926495RIdle1Monster086: equ $4000 + (000*128) + (000/2) - 1286496RIdle2Monster086: equ $4000 + (000*128) + (056/2) - 1286498LIdle1Monster086: equ $4000 + (000*128) + (112/2) - 1286499LIdle2Monster086: equ $4000 + (000*128) + (168/2) - 1286501Monster086Move: 6502Monster086Idle:6503 db 2 6504 db 2 6505 dw RIdle1Monster0866506 dw RIdle2Monster0866507 6508 dw LIdle1Monster0866509 dw LIdle2Monster08665106513RIdle1Monster087: equ $4000 + (128*128) + (128/2) - 1286514RIdle2Monster087: equ $4000 + (128*128) + (144/2) - 1286516LIdle1Monster087: equ $4000 + (128*128) + (176/2) - 1286517LIdle2Monster087: equ $4000 + (128*128) + (160/2) - 1286519Monster087Move: 6520Monster087Idle:6521 db 8 6522 db 2 6523 dw RIdle1Monster0876524 dw RIdle2Monster0876525 6526 dw LIdle1Monster0876527 dw LIdle2Monster08765286531RIdle1Monster088: equ $4000 + (128*128) + (000/2) - 1286532RIdle2Monster088: equ $4000 + (128*128) + (016/2) - 1286534LIdle1Monster088: equ $4000 + (128*128) + (048/2) - 1286535LIdle2Monster088: equ $4000 + (128*128) + (032/2) - 1286537Monster088Move: 6538Monster088Idle:6539 db 8 6540 db 2 6541 dw RIdle1Monster0886542 dw RIdle2Monster0886543 6544 dw LIdle1Monster0886545 dw LIdle2Monster08865466549RIdle1Monster089: equ $4000 + (128*128) + (064/2) - 1286550RIdle2Monster089: equ $4000 + (128*128) + (080/2) - 1286552LIdle1Monster089: equ $4000 + (128*128) + (112/2) - 1286553LIdle2Monster089: equ $4000 + (128*128) + (096/2) - 1286555Monster089Move: 6556Monster089Idle:6557 db 9 6558 db 2 6559 dw RIdle1Monster0896560 dw RIdle2Monster0896561 6562 dw LIdle1Monster0896563 dw LIdle2Monster08965646567RIdle1Monster090: equ $4000 + (240*128) + (096/2) - 1286568RIdle2Monster090: equ $4000 + (240*128) + (112/2) - 1286570LIdle1Monster090: equ $4000 + (240*128) + (144/2) - 1286571LIdle2Monster090: equ $4000 + (240*128) + (128/2) - 1286573Monster090Move: 6574Monster090Idle:6575 db 8 6576 db 2 6577 dw RIdle1Monster0906578 dw RIdle2Monster0906579 6580 dw LIdle1Monster0906581 dw LIdle2Monster09065826585RIdle1Monster091: equ $4000 + (128*128) + (192/2) - 1286586RIdle2Monster091: equ $4000 + (128*128) + (208/2) - 1286588LIdle1Monster091: equ $4000 + (128*128) + (240/2) - 1286589LIdle2Monster091: equ $4000 + (128*128) + (224/2) - 1286591Monster091Move: 6592Monster091Idle:6593 db 7 6594 db 2 6595 dw RIdle1Monster0916596 dw RIdle2Monster0916597 6598 dw LIdle1Monster0916599 dw LIdle2Monster09166006603RIdle1Monster092: equ $4000 + (168*128) + (000/2) - 1286604RIdle2Monster092: equ $4000 + (168*128) + (016/2) - 1286606LIdle1Monster092: equ $4000 + (168*128) + (048/2) - 1286607LIdle2Monster092: equ $4000 + (168*128) + (032/2) - 1286609Monster092Move: 6610Monster092Idle:6611 db 7 6612 db 2 6613 dw RIdle1Monster0926614 dw RIdle2Monster0926615 6616 dw LIdle1Monster0926617 dw LIdle2Monster0926618Monster092AttackPatternLeft:6619Monster092AttackPatternRight:6620 db ShootProjectile,WaitImpactProjectile66216624RIdle1Monster093: equ $4000 + (168*128) + (064/2) - 1286625RIdle2Monster093: equ $4000 + (168*128) + (080/2) - 1286627LIdle1Monster093: equ $4000 + (168*128) + (112/2) - 1286628LIdle2Monster093: equ $4000 + (168*128) + (096/2) - 1286630Monster093Move: 6631Monster093Idle:6632 db 7 6633 db 2 6634 dw RIdle1Monster0936635 dw RIdle2Monster0936636 6637 dw LIdle1Monster0936638 dw LIdle2Monster0936639Monster093AttackPatternLeft:6640Monster093AttackPatternRight:6641 db ShootProjectile,WaitImpactProjectile66426645RIdle1Monster094: equ $4000 + (168*128) + (128/2) - 1286646RIdle2Monster094: equ $4000 + (168*128) + (144/2) - 1286648LIdle1Monster094: equ $4000 + (168*128) + (176/2) - 1286649LIdle2Monster094: equ $4000 + (168*128) + (160/2) - 1286651Monster094Move: 6652Monster094Idle:6653 db 7 6654 db 2 6655 dw RIdle1Monster0946656 dw RIdle2Monster0946657 6658 dw LIdle1Monster0946659 dw LIdle2Monster0946660Monster094AttackPatternLeft:6661Monster094AttackPatternRight:6662 db ShootProjectile,WaitImpactProjectile66636666RIdle1Monster095: equ $4000 + (096*128) + (048/2) - 128 6667RIdle2Monster095: equ $4000 + (096*128) + (064/2) - 128 6668RIdle3Monster095: equ $4000 + (096*128) + (080/2) - 128 6669RAttack1Monster095: equ $4000 + (096*128) + (096/2) - 128 6670RAttack2Monster095: equ $4000 + (096*128) + (112/2) - 128 6671RAttack3Monster095: equ $4000 + (096*128) + (144/2) - 128 6673LIdle1Monster095: equ $4000 + (128*128) + (048/2) - 128 6674LIdle2Monster095: equ $4000 + (128*128) + (032/2) - 128 6675LIdle3Monster095: equ $4000 + (128*128) + (016/2) - 128 6676LAttack1Monster095: equ $4000 + (128*128) + (000/2) - 128 6677LAttack2Monster095: equ $4000 + (032*128) + (224/2) - 128 6678LAttack3Monster095: equ $4000 + (096*128) + (192/2) - 128 6680Monster095Move: 6681Monster095Idle:6682 db 5 6683 db 4 6684 dw RIdle1Monster0956685 dw RIdle2Monster0956686 dw RIdle3Monster0956687 dw RIdle2Monster0956688 6689 dw LIdle1Monster0956690 dw LIdle2Monster0956691 dw LIdle3Monster0956692 dw LIdle2Monster0956693Monster095AttackPatternRight:6694 db 000,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,000,InitiateAttack6695Monster095AttackPatternLeft:6696 db 000,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,000,InitiateAttack6697Monster095AttackPatternLeftUp:6698 db 002,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,006,InitiateAttack6699Monster095AttackPatternLeftDown:6700 db 004,000,AnimateAttack | dw LAttack1Monster095 | db 000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceLeft,000,000,AnimateAttack | dw LAttack3Monster095 | db 128+48,DisplaceLeft,ShowBeingHitSprite,000,000,AnimateAttack | dw LAttack2Monster095 | db 128+32,DisplaceRight,000,000,AnimateAttack | dw LAttack1Monster095 | db 128+16,DisplaceRight,000,008,InitiateAttack6701Monster095AttackPatternRightUp:6702 db 008,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,004,InitiateAttack6703Monster095AttackPatternRightDown:6704 db 006,000,AnimateAttack | dw RAttack1Monster095 | db 000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack3Monster095 | db 128+48,ShowBeingHitSprite,000,000,AnimateAttack | dw RAttack2Monster095 | db 128+32,000,000,AnimateAttack | dw RAttack1Monster095 | db 128+16,000,002,InitiateAttack67056708RIdle1Monster096: equ $4000 + (000*128) + (000/2) - 128 6709RIdle2Monster096: equ $4000 + (000*128) + (032/2) - 128 6710RIdle3Monster096: equ $4000 + (000*128) + (064/2) - 128 6711RAttack1Monster096: equ $4000 + (000*128) + (096/2) - 128 6712RAttack2Monster096: equ $4000 + (000*128) + (128/2) - 128 6714LIdle1Monster096: equ $4000 + (032*128) + (032/2) - 128 6715LIdle2Monster096: equ $4000 + (032*128) + (000/2) - 128 6716LIdle3Monster096: equ $4000 + (000*128) + (224/2) - 128 6717LAttack1Monster096: equ $4000 + (000*128) + (192/2) - 128 6718LAttack2Monster096: equ $4000 + (000*128) + (160/2) - 128 6720Monster096Move: 6721Monster096Idle:6722 db 7 6723 db 4 6724 dw RIdle1Monster0966725 dw RIdle2Monster0966726 dw RIdle3Monster0966727 dw RIdle2Monster0966728 6729 dw LIdle1Monster0966730 dw LIdle2Monster0966731 dw LIdle3Monster0966732 dw LIdle2Monster0966733Monster096AttackPatternRight:6734 db 000,AnimateAttack | dw RAttack1Monster096 | db 003,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 007,InitiateAttack6735Monster096AttackPatternLeft:6736 db 000,AnimateAttack | dw LAttack1Monster096 | db 007,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 003,InitiateAttack6737Monster096AttackPatternLeftUp:6738 db 000,AnimateAttack | dw LAttack1Monster096 | db 002,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 006,InitiateAttack6739Monster096AttackPatternLeftDown:6740 db 000,AnimateAttack | dw LAttack1Monster096 | db 004,000,AnimateAttack | dw LAttack2Monster096 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster096 | db 008,InitiateAttack6741Monster096AttackPatternRightUp:6742 db 000,AnimateAttack | dw RAttack1Monster096 | db 008,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 004,InitiateAttack6743Monster096AttackPatternRightDown:6744 db 000,AnimateAttack | dw RAttack1Monster096 | db 006,000,AnimateAttack | dw RAttack2Monster096 | db ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster096 | db 002,InitiateAttack67456748RIdle1Monster097: equ $4000 + (128*128) + (160/2) - 128 6749RIdle2Monster097: equ $4000 + (128*128) + (176/2) - 128 6750RIdle3Monster097: equ $4000 + (128*128) + (192/2) - 128 6752LIdle1Monster097: equ $4000 + (128*128) + (240/2) - 128 6753LIdle2Monster097: equ $4000 + (128*128) + (224/2) - 128 6754LIdle3Monster097: equ $4000 + (128*128) + (208/2) - 128 6756Monster097Move: 6757Monster097Idle:6758 db 3 6759 db 3 6760 dw RIdle1Monster0976761 dw RIdle2Monster0976762 dw RIdle3Monster0976763 6764 dw LIdle1Monster0976765 dw LIdle2Monster0976766 dw LIdle3Monster09767676770RIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6771RIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6772RIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6773RIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6775LIdle1Monster098: equ $4000 + (160*128) + (000/2) - 128 6776LIdle2Monster098: equ $4000 + (160*128) + (016/2) - 128 6777LIdle3Monster098: equ $4000 + (160*128) + (032/2) - 128 6778LIdle4Monster098: equ $4000 + (160*128) + (048/2) - 128 6780Monster098Move: 6781Monster098Idle:6782 db 3 6783 db 5 6784 dw RIdle1Monster0986785 dw RIdle2Monster0986786 dw RIdle3Monster0986787 dw RIdle4Monster0986788 dw RIdle2Monster0986789 6790 dw LIdle1Monster0986791 dw LIdle2Monster0986792 dw LIdle3Monster0986793 dw LIdle4Monster0986794 dw LIdle2Monster09867956798RIdle1Monster099: equ $4000 + (128*128) + (064/2) - 128 6799RIdle2Monster099: equ $4000 + (128*128) + (080/2) - 128 6800RIdle3Monster099: equ $4000 + (128*128) + (096/2) - 128 6802LIdle1Monster099: equ $4000 + (128*128) + (144/2) - 128 6803LIdle2Monster099: equ $4000 + (128*128) + (128/2) - 128 6804LIdle3Monster099: equ $4000 + (128*128) + (112/2) - 128 6806Monster099Move: 6807Monster099Idle:6808 db 3 6809 db 4 6810 dw RIdle1Monster0996811 dw RIdle2Monster0996812 dw RIdle3Monster0996813 dw RIdle2Monster0996814 6815 dw LIdle1Monster0996816 dw LIdle2Monster0996817 dw LIdle3Monster0996818 dw LIdle2Monster09968196822RIdle1Monster100: equ $4000 + (240*128) + (160/2) - 128 6823RIdle2Monster100: equ $4000 + (240*128) + (176/2) - 128 6825LIdle1Monster100: equ $4000 + (240*128) + (208/2) - 128 6826LIdle2Monster100: equ $4000 + (240*128) + (192/2) - 128 6828Monster100Move: 6829Monster100Idle:6830 db 7 6831 db 2 6832 dw RIdle1Monster1006833 dw RIdle2Monster1006834 6835 dw LIdle1Monster1006836 dw LIdle2Monster10068376840RIdle1Monster101: equ $4000 + (032*128) + (064/2) - 128 6841RIdle2Monster101: equ $4000 + (032*128) + (112/2) - 128 6842RIdle3Monster101: equ $4000 + (032*128) + (160/2) - 128 6843RAttack1Monster101: equ $4000 + (064*128) + (000/2) - 128 6845LIdle1Monster101: equ $4000 + (064*128) + (192/2) - 128 6846LIdle2Monster101: equ $4000 + (064*128) + (144/2) - 128 6847LIdle3Monster101: equ $4000 + (064*128) + (096/2) - 128 6848LAttack1Monster101: equ $4000 + (064*128) + (048/2) - 128 6850Monster101Move: 6851Monster101Idle:6852 db 4 6853 db 3 6854 dw RIdle1Monster1016855 dw RIdle2Monster1016856 dw RIdle3Monster1016857 6858 dw LIdle1Monster1016859 dw LIdle2Monster1016860 dw LIdle3Monster1016861Monster101AttackPatternRight:6862 db AnimateAttack | dw RIdle2Monster101 | db 003,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,007,InitiateAttack6863Monster101AttackPatternLeft:6864 db AnimateAttack | dw LIdle2Monster101 | db 007,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,003,InitiateAttack6865Monster101AttackPatternLeftUp:6866 db AnimateAttack | dw LIdle2Monster101 | db 008,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,004,InitiateAttack6867Monster101AttackPatternLeftDown:6868 db AnimateAttack | dw LIdle2Monster101 | db 006,AnimateAttack | dw LAttack1Monster101 | db 000,ShowBeingHitSprite,000,002,InitiateAttack6869Monster101AttackPatternRightUp:6870 db AnimateAttack | dw RIdle2Monster101 | db 002,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,006,InitiateAttack6871Monster101AttackPatternRightDown:6872 db AnimateAttack | dw RIdle2Monster101 | db 004,AnimateAttack | dw RAttack1Monster101 | db 000,ShowBeingHitSprite,000,008,InitiateAttack68806883RIdle1Monster102: equ $4000 + (000*128) + (000/2) - 128 6884RIdle2Monster102: equ $4000 + (000*128) + (032/2) - 128 6885Rattack1Monster102: equ $4000 + (000*128) + (064/2) - 128 6886Rattack2Monster102: equ $4000 + (000*128) + (112/2) - 128 6888LIdle1Monster102: equ $4000 + (040*128) + (032/2) - 128 6889LIdle2Monster102: equ $4000 + (040*128) + (000/2) - 128 6890Lattack1Monster102: equ $4000 + (000*128) + (208/2) - 128 6891Lattack2Monster102: equ $4000 + (000*128) + (160/2) - 128 6893Monster102Move:6894Monster102Idle:6895 db 5 6896 db 2 6897 dw RIdle1Monster1026898 dw RIdle2Monster1026899 6900 dw LIdle1Monster1026901 dw LIdle2Monster1026902Monster102AttackPatternRight:6903 db AnimateAttack | dw RIdle1Monster102 | db 003,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 007,InitiateAttack6904Monster102AttackPatternRightUp:6905 db AnimateAttack | dw RIdle1Monster102 | db 008,128+48,AnimateAttack | dw Rattack1Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 004,InitiateAttack6906Monster102AttackPatternRightDown:6907 db AnimateAttack | dw RIdle1Monster102 | db 006,128+48,AnimateAttack | dw Rattack2Monster102 | db 000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw RIdle2Monster102 | db 002,InitiateAttack6908Monster102AttackPatternLeft:6909 db AnimateAttack | dw LIdle1Monster102 | db 000,007,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,003,000,InitiateAttack6910Monster102AttackPatternLeftUp:6911 db AnimateAttack | dw LIdle1Monster102 | db 000,002,128+48,AnimateAttack | dw Lattack1Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,006,000,InitiateAttack6912Monster102AttackPatternLeftDown:6913 db AnimateAttack | dw LIdle1Monster102 | db 000,004,128+48,AnimateAttack | dw Lattack2Monster102 | db DisplaceLeft,000,ShowBeingHitSprite,000,128+32,AnimateAttack | dw LIdle2Monster102 | db DisplaceRight,008,000,InitiateAttack69146917RIdle1Monster103: equ $4000 + (080*128) + (000/2) - 128 6918RIdle2Monster103: equ $4000 + (080*128) + (048/2) - 128 6919Rattack1Monster103: equ $4000 + (080*128) + (096/2) - 128 6920Rattack2Monster103: equ $4000 + (080*128) + (144/2) - 128 6922LIdle1Monster103: equ $4000 + (128*128) + (160/2) - 128 6923LIdle2Monster103: equ $4000 + (128*128) + (112/2) - 128 6924Lattack1Monster103: equ $4000 + (128*128) + (064/2) - 128 6925Lattack2Monster103: equ $4000 + (128*128) + (000/2) - 128 6927Monster103Move:6928Monster103Idle:6929 db 5 6930 db 2 6931 dw RIdle1Monster1036932 dw RIdle2Monster1036933 6934 dw LIdle1Monster1036935 dw LIdle2Monster1036936Monster103AttackPatternRight:6937 db AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,InitiateAttack6938Monster103AttackPatternRightUp:6939 db AnimateAttack | dw RIdle2Monster103 | db 008,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 004,InitiateAttack6940Monster103AttackPatternRightDown:6941 db AnimateAttack | dw RIdle2Monster103 | db 006,AnimateAttack | dw Rattack1Monster103 | db 000,000,AnimateAttack | dw Rattack2Monster103 | db 128+64,DisplaceRight,000,ShowBeingHitSprite,000,AnimateAttack | dw Rattack1Monster103 | db 128+48,DisplaceLeft,000,000,AnimateAttack | dw RIdle2Monster103 | db 002,InitiateAttack6942Monster103AttackPatternLeft:6943 db AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,InitiateAttack6944Monster103AttackPatternLeftUp:6945 db AnimateAttack | dw LIdle2Monster103 | db 002,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 006,InitiateAttack6946Monster103AttackPatternLeftDown:6947 db AnimateAttack | dw LIdle2Monster103 | db 004,AnimateAttack | dw Lattack1Monster103 | db 000,000,AnimateAttack | dw Lattack2Monster103 | db 128+64,DisplaceLeft,DisplaceLeft,000,ShowBeingHitSprite,000,AnimateAttack | dw Lattack1Monster103 | db 128+48,DisplaceRight,DisplaceRight,000,000,AnimateAttack | dw LIdle2Monster103 | db 008,InitiateAttack69486951RIdle1Monster104: equ $4000 + (040*128) + (064/2) - 128 6952RIdle2Monster104: equ $4000 + (040*128) + (096/2) - 128 6953Rattack1Monster104: equ $4000 + (040*128) + (128/2) - 128 6955LIdle1Monster104: equ $4000 + (040*128) + (224/2) - 128 6956LIdle2Monster104: equ $4000 + (040*128) + (192/2) - 128 6957Lattack1Monster104: equ $4000 + (040*128) + (160/2) - 128 6959Monster104Move:6960Monster104Idle:6961 db 5 6962 db 2 6963 dw RIdle1Monster1046964 dw RIdle2Monster1046965 6966 dw LIdle1Monster1046967 dw LIdle2Monster1046968Monster104AttackPatternRight:6969 db 000,AnimateAttack | dw Rattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw RIdle1Monster104 | db WaitImpactProjectile6970Monster104AttackPatternLeft:6971 db 000,AnimateAttack | dw Lattack1Monster104 | db 000,ShootProjectile,000,000,000,000,AnimateAttack | dw LIdle1Monster104 | db WaitImpactProjectile69736976RIdle1Monster105: equ $4000 + (176*128) + (000/2) - 128 6977RIdle2Monster105: equ $4000 + (176*128) + (048/2) - 128 6978Rattack1Monster105: equ $4000 + (080*128) + (208/2) - 128 6980LIdle1Monster105: equ $4000 + (176*128) + (144/2) - 128 6981LIdle2Monster105: equ $4000 + (176*128) + (096/2) - 128 6982Lattack1Monster105: equ $4000 + (128*128) + (208/2) - 128 6984Monster105Move:6985Monster105Idle:6986 db 5 6987 db 2 6988 dw RIdle1Monster1056989 dw RIdle2Monster1056990 6991 dw LIdle1Monster1056992 dw LIdle2Monster1056993Monster105AttackPatternRight:6994 db AnimateAttack | dw RIdle2Monster105 | db 003,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 007,InitiateAttack6995Monster105AttackPatternRightUp:6996 db AnimateAttack | dw RIdle2Monster105 | db 008,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 004,InitiateAttack6997Monster105AttackPatternRightDown:6998 db AnimateAttack | dw RIdle2Monster105 | db 006,AnimateAttack | dw Rattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster105 | db 002,InitiateAttack6999Monster105AttackPatternLeft:7000 db AnimateAttack | dw LIdle2Monster105 | db 007,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 003,InitiateAttack7001Monster105AttackPatternLeftUp:7002 db AnimateAttack | dw LIdle2Monster105 | db 002,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 006,InitiateAttack7003Monster105AttackPatternLeftDown:7004 db AnimateAttack | dw LIdle2Monster105 | db 004,AnimateAttack | dw Lattack1Monster105 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster105 | db 008,InitiateAttack70057008RIdle1Monster106: equ $4000 + (040*128) + (000/2) - 128 7009RIdle2Monster106: equ $4000 + (040*128) + (048/2) - 128 7010Rattack1Monster106: equ $4000 + (120*128) + (160/2) - 128 7012LIdle1Monster106: equ $4000 + (040*128) + (208/2) - 128 7013LIdle2Monster106: equ $4000 + (040*128) + (160/2) - 128 7014Lattack1Monster106: equ $4000 + (120*128) + (208/2) - 128 7016Monster106Move:7017Monster106Idle:7018 db 5 7019 db 2 7020 dw RIdle1Monster1067021 dw RIdle2Monster1067022 7023 dw LIdle1Monster1067024 dw LIdle2Monster1067025Monster106AttackPatternRight:7026 db AnimateAttack | dw RIdle2Monster106 | db 003,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 007,InitiateAttack7027Monster106AttackPatternRightUp:7028 db AnimateAttack | dw RIdle2Monster106 | db 008,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 004,InitiateAttack7029Monster106AttackPatternRightDown:7030 db AnimateAttack | dw RIdle2Monster106 | db 006,AnimateAttack | dw Rattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster106 | db 002,InitiateAttack7031Monster106AttackPatternLeft:7032 db AnimateAttack | dw LIdle2Monster106 | db 007,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 003,InitiateAttack7033Monster106AttackPatternLeftUp:7034 db AnimateAttack | dw LIdle2Monster106 | db 002,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 006,InitiateAttack7035Monster106AttackPatternLeftDown:7036 db AnimateAttack | dw LIdle2Monster106 | db 004,AnimateAttack | dw Lattack1Monster106 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster106 | db 008,InitiateAttack70377041RIdle1Monster107: equ $4000 + (080*128) + (000/2) - 128 7042RIdle2Monster107: equ $4000 + (080*128) + (048/2) - 128 7043Rattack1Monster107: equ $4000 + (120*128) + (000/2) - 128 7045LIdle1Monster107: equ $4000 + (080*128) + (208/2) - 128 7046LIdle2Monster107: equ $4000 + (080*128) + (160/2) - 128 7047Lattack1Monster107: equ $4000 + (120*128) + (048/2) - 128 7049Monster107Move:7050Monster107Idle:7051 db 5 7052 db 2 7053 dw RIdle1Monster1077054 dw RIdle2Monster1077055 7056 dw LIdle1Monster1077057 dw LIdle2Monster1077058Monster107AttackPatternRight:7059 db AnimateAttack | dw RIdle2Monster107 | db 003,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 007,InitiateAttack7060Monster107AttackPatternRightUp:7061 db AnimateAttack | dw RIdle2Monster107 | db 008,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 004,InitiateAttack7062Monster107AttackPatternRightDown:7063 db AnimateAttack | dw RIdle2Monster107 | db 006,AnimateAttack | dw Rattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster107 | db 002,InitiateAttack7064Monster107AttackPatternLeft:7065 db AnimateAttack | dw LIdle2Monster107 | db 007,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 003,InitiateAttack7066Monster107AttackPatternLeftUp:7067 db AnimateAttack | dw LIdle2Monster107 | db 002,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 006,InitiateAttack7068Monster107AttackPatternLeftDown:7069 db AnimateAttack | dw LIdle2Monster107 | db 004,AnimateAttack | dw Lattack1Monster107 | db 000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster107 | db 008,InitiateAttack70707073RIdle1Monster108: equ $4000 + (040*128) + (096/2) - 128 7074RIdle2Monster108: equ $4000 + (080*128) + (096/2) - 128 7075Rattack1Monster108: equ $4000 + (160*128) + (000/2) - 128 7077LIdle1Monster108: equ $4000 + (040*128) + (128/2) - 128 7078LIdle2Monster108: equ $4000 + (080*128) + (128/2) - 128 7079Lattack1Monster108: equ $4000 + (160*128) + (048/2) - 128 7081Monster108Move:7082Monster108Idle:7083 db 5 7084 db 2 7085 dw RIdle1Monster1087086 dw RIdle2Monster1087087 7088 dw LIdle1Monster1087089 dw LIdle2Monster1087090Monster108AttackPatternRight:7091 db AnimateAttack | dw RIdle2Monster108 | db 003,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,007,InitiateAttack7092Monster108AttackPatternRightUp:7093 db AnimateAttack | dw RIdle2Monster108 | db 008,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,004,InitiateAttack7094Monster108AttackPatternRightDown:7095 db AnimateAttack | dw RIdle2Monster108 | db 006,AnimateAttack | dw Rattack1Monster108 | db 128+48,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle2Monster108 | db 128+32,002,InitiateAttack7096Monster108AttackPatternLeft:7097 db AnimateAttack | dw LIdle2Monster108 | db 007,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,003,InitiateAttack7098Monster108AttackPatternLeftUp:7099 db AnimateAttack | dw LIdle2Monster108 | db 002,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,006,InitiateAttack7100Monster108AttackPatternLeftDown:7101 db AnimateAttack | dw LIdle2Monster108 | db 004,AnimateAttack | dw Lattack1Monster108 | db 128+48,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle2Monster108 | db 128+32,DisplaceRight,008,InitiateAttack71027105RIdle1Monster109: equ $4000 + (000*128) + (000/2) - 128 7106RIdle2Monster109: equ $4000 + (000*128) + (032/2) - 128 7107Rattack1Monster109: equ $4000 + (000*128) + (064/2) - 128 7108Rattack2Monster109: equ $4000 + (000*128) + (096/2) - 128 7110LIdle1Monster109: equ $4000 + (000*128) + (224/2) - 128 7111LIdle2Monster109: equ $4000 + (000*128) + (192/2) - 128 7112Lattack1Monster109: equ $4000 + (000*128) + (160/2) - 128 7113Lattack2Monster109: equ $4000 + (000*128) + (128/2) - 128 7115Monster109Move:7116Monster109Idle:7117 db 5 7118 db 2 7119 dw RIdle1Monster1097120 dw RIdle2Monster1097121 7122 dw LIdle1Monster1097123 dw LIdle2Monster1097124Monster109AttackPatternRight:7125 db 000,AnimateAttack | dw Rattack1Monster109 | db 000,000,AnimateAttack | dw Rattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw RIdle1Monster109 | db WaitImpactProjectile7126Monster109AttackPatternLeft:7127 db 000,AnimateAttack | dw Lattack1Monster109 | db 000,000,AnimateAttack | dw Lattack2Monster109 | db 000,ShootProjectile,000,000,AnimateAttack | dw LIdle1Monster109 | db WaitImpactProjectile71297132RIdle1Monster110: equ $4000 + (200*128) + (032/2) - 128 7133RIdle2Monster110: equ $4000 + (200*128) + (000/2) - 128 7135LIdle1Monster110: equ $4000 + (200*128) + (064/2) - 128 7136LIdle2Monster110: equ $4000 + (200*128) + (096/2) - 128 7138Monster110Move:7139 db 4 7140 db 1 7141 dw RIdle2Monster1107142 7143 dw LIdle2Monster1107144Monster110Idle:7145 db 12 7146 db 2 7147 dw RIdle1Monster1107148 dw RIdle2Monster1107149 7150 dw LIdle1Monster1107151 dw LIdle2Monster1107152Monster110AttackPatternRight:7153 db AnimateAttack | dw RIdle2Monster110 | db 000,AnimateAttack | dw RIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile7154Monster110AttackPatternLeft:7155 db AnimateAttack | dw LIdle2Monster110 | db 000,AnimateAttack | dw LIdle2Monster110 | db 000,ShootProjectile,WaitImpactProjectile715771617163RIdle1Monster111: equ $4000 + (160*128) + (064/2) - 128 7164RIdle2Monster111: equ $4000 + (160*128) + (096/2) - 128 7165RIdle3Monster111: equ $4000 + (160*128) + (128/2) - 128 7167LIdle1Monster111: equ $4000 + (160*128) + (224/2) - 128 7168LIdle2Monster111: equ $4000 + (160*128) + (192/2) - 128 7169LIdle3Monster111: equ $4000 + (160*128) + (160/2) - 128 7171Monster111Move:7172Monster111Idle:7173 db 05 7174 db 3 7175 dw RIdle1Monster1117176 dw RIdle2Monster1117177 dw RIdle3Monster1117178 7179 dw LIdle1Monster1117180 dw LIdle2Monster1117181 dw LIdle3Monster11171837186RIdle1Monster112: equ $4000 + (192*128) + (064/2) - 128 7187RIdle2Monster112: equ $4000 + (192*128) + (096/2) - 128 7188RAttack1Monster112: equ $4000 + (192*128) + (128/2) - 128 7190LIdle1Monster112: equ $4000 + (192*128) + (224/2) - 128 7191LIdle2Monster112: equ $4000 + (192*128) + (192/2) - 128 7192LAttack1Monster112: equ $4000 + (192*128) + (160/2) - 128 7194Monster112Move:7195Monster112Idle:7196 db 06 7197 db 2 7198 dw RIdle1Monster1127199 dw RIdle2Monster1127200 7201 dw LIdle1Monster1127202 dw LIdle2Monster1127203Monster112AttackPatternRight:7204 db AnimateAttack | dw RAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile7205Monster112AttackPatternLeft:7206 db AnimateAttack | dw LAttack1Monster112 | db 000,ShootProjectile,WaitImpactProjectile72087211RIdle1Monster113: equ $4000 + (224*128) + (064/2) - 128 7212RIdle2Monster113: equ $4000 + (224*128) + (096/2) - 128 7213RAttack1Monster113: equ $4000 + (224*128) + (128/2) - 128 7215LIdle1Monster113: equ $4000 + (224*128) + (224/2) - 128 7216LIdle2Monster113: equ $4000 + (224*128) + (192/2) - 128 7217LAttack1Monster113: equ $4000 + (224*128) + (160/2) - 128 7219Monster113Move:7220Monster113Idle:7221 db 09 7222 db 2 7223 dw RIdle1Monster1137224 dw RIdle2Monster1137225 7226 dw LIdle1Monster1137227 dw LIdle2Monster1137228Monster113AttackPatternRight:7229 db AnimateAttack | dw RAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile7230Monster113AttackPatternLeft:7231 db AnimateAttack | dw LAttack1Monster113 | db 000,ShootProjectile,WaitImpactProjectile72337236RIdle1Monster114: equ $4000 + (176*128) + (000/2) - 128 7237RIdle2Monster114: equ $4000 + (176*128) + (032/2) - 128 7239LIdle1Monster114: equ $4000 + (216*128) + (032/2) - 128 7240LIdle2Monster114: equ $4000 + (216*128) + (000/2) - 128 7242Monster114Move:7243Monster114Idle:7244 db 08 7245 db 2 7246 dw RIdle1Monster1147247 dw RIdle2Monster1147248 7249 dw LIdle1Monster1147250 dw LIdle2Monster11472527255RIdle1Monster115: equ $4000 + (120*128) + (096/2) - 128 7256RIdle2Monster115: equ $4000 + (120*128) + (128/2) - 128 7257RAttack1Monster115: equ $4000 + (184*128) + (128/2) - 128 7259LIdle1Monster115: equ $4000 + (152*128) + (128/2) - 128 7260LIdle2Monster115: equ $4000 + (152*128) + (096/2) - 128 7261LAttack1Monster115: equ $4000 + (216*128) + (128/2) - 128 7263Monster115Move:7264Monster115Idle:7265 db 06 7266 db 2 7267 dw RIdle1Monster1157268 dw RIdle2Monster1157269 7270 dw LIdle1Monster1157271 dw LIdle2Monster1157272Monster115AttackPatternRight:7273 db AnimateAttack | dw RAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile7274Monster115AttackPatternLeft:7275 db AnimateAttack | dw LAttack1Monster115 | db 000,ShootProjectile,WaitImpactProjectile72777280RIdle1Monster116: equ $4000 + (160*128) + (160/2) - 128 7281RIdle2Monster116: equ $4000 + (160*128) + (192/2) - 128 7282RAttack1Monster116: equ $4000 + (160*128) + (224/2) - 128 7284LIdle1Monster116: equ $4000 + (192*128) + (224/2) - 128 7285LIdle2Monster116: equ $4000 + (192*128) + (192/2) - 128 7286LAttack1Monster116: equ $4000 + (192*128) + (160/2) - 128 7288Monster116Move:7289Monster116Idle:7290 db 06 7291 db 2 7292 dw RIdle1Monster1167293 dw RIdle2Monster1167294 7295 dw LIdle1Monster1167296 dw LIdle2Monster1167297Monster116AttackPatternRight:7298 db AnimateAttack | dw RAttack1Monster116 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7299Monster116AttackPatternRightUp:7300 db AnimateAttack | dw RAttack1Monster116 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7301Monster116AttackPatternRightDown:7302 db AnimateAttack | dw RAttack1Monster116 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7303Monster116AttackPatternLeft:7304 db AnimateAttack | dw LAttack1Monster116 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7305Monster116AttackPatternLeftUp:7306 db AnimateAttack | dw LAttack1Monster116 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7307Monster116AttackPatternLeftDown:7308 db AnimateAttack | dw LAttack1Monster116 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73107313RIdle1Monster117: equ $4000 + (000*128) + (000/2) - 128 7314RIdle2Monster117: equ $4000 + (000*128) + (032/2) - 128 7315RIdle3Monster117: equ $4000 + (000*128) + (064/2) - 128 7316RAttack1Monster117: equ $4000 + (000*128) + (096/2) - 128 7318LIdle1Monster117: equ $4000 + (000*128) + (224/2) - 128 7319LIdle2Monster117: equ $4000 + (000*128) + (192/2) - 128 7320LIdle3Monster117: equ $4000 + (000*128) + (160/2) - 128 7321LAttack1Monster117: equ $4000 + (000*128) + (128/2) - 128 7323Monster117Move:7324Monster117Idle:7325 db 04 7326 db 3 7327 dw RIdle1Monster1177328 dw RIdle2Monster1177329 dw RIdle3Monster1177330 7331 dw LIdle1Monster1177332 dw LIdle2Monster1177333 dw LIdle3Monster1177334Monster117AttackPatternRight:7335 db AnimateAttack | dw RAttack1Monster117 | db 003 | db ShowBeingHitSprite,000,000,000,000,007,InitiateAttack7336Monster117AttackPatternRightUp:7337 db AnimateAttack | dw RAttack1Monster117 | db 002 | db ShowBeingHitSprite,000,000,000,000,006,InitiateAttack7338Monster117AttackPatternRightDown:7339 db AnimateAttack | dw RAttack1Monster117 | db 004 | db ShowBeingHitSprite,000,000,000,000,008,InitiateAttack7340Monster117AttackPatternLeft:7341 db AnimateAttack | dw LAttack1Monster117 | db 007 | db ShowBeingHitSprite,000,000,000,000,003,InitiateAttack7342Monster117AttackPatternLeftUp:7343 db AnimateAttack | dw LAttack1Monster117 | db 008 | db ShowBeingHitSprite,000,000,000,000,004,InitiateAttack7344Monster117AttackPatternLeftDown:7345 db AnimateAttack | dw LAttack1Monster117 | db 006 | db ShowBeingHitSprite,000,000,000,000,002,InitiateAttack73477350RIdle1Monster118: equ $4000 + (064*128) + (000/2) - 128 7351RIdle2Monster118: equ $4000 + (064*128) + (032/2) - 128 7352RAttack1Monster118: equ $4000 + (064*128) + (064/2) - 128 7354LIdle1Monster118: equ $4000 + (064*128) + (160/2) - 128 7355LIdle2Monster118: equ $4000 + (064*128) + (128/2) - 128 7356LAttack1Monster118: equ $4000 + (064*128) + (096/2) - 128 7358Monster118Move:7359Monster118Idle:7360 db 06 7361 db 2 7362 dw RIdle1Monster1187363 dw RIdle2Monster1187364 7365 dw LIdle1Monster1187366 dw LIdle2Monster1187367Monster118AttackPatternRight:7368 db AnimateAttack | dw RAttack1Monster118 | db 003 | db ShowBeingHitSprite,000,000,000,007,InitiateAttack7369Monster118AttackPatternRightUp:7370 db AnimateAttack | dw RAttack1Monster118 | db 002 | db ShowBeingHitSprite,000,000,000,006,InitiateAttack7371Monster118AttackPatternRightDown:7372 db AnimateAttack | dw RAttack1Monster118 | db 004 | db ShowBeingHitSprite,000,000,000,008,InitiateAttack7373Monster118AttackPatternLeft:7374 db AnimateAttack | dw LAttack1Monster118 | db 007 | db ShowBeingHitSprite,000,000,000,003,InitiateAttack7375Monster118AttackPatternLeftUp:7376 db AnimateAttack | dw LAttack1Monster118 | db 008 | db ShowBeingHitSprite,000,000,000,004,InitiateAttack7377Monster118AttackPatternLeftDown:7378 db AnimateAttack | dw LAttack1Monster118 | db 006 | db ShowBeingHitSprite,000,000,000,002,InitiateAttack73807383RIdle1Monster119: equ $4000 + (032*128) + (000/2) - 128 7384RIdle2Monster119: equ $4000 + (032*128) + (032/2) - 128 7385RAttack1Monster119: equ $4000 + (032*128) + (064/2) - 128 7386RAttack2Monster119: equ $4000 + (032*128) + (096/2) - 128 7388LIdle1Monster119: equ $4000 + (032*128) + (224/2) - 128 7389LIdle2Monster119: equ $4000 + (032*128) + (192/2) - 128 7390LAttack1Monster119: equ $4000 + (032*128) + (160/2) - 128 7391LAttack2Monster119: equ $4000 + (032*128) + (128/2) - 128 7393Monster119Move:7394Monster119Idle:7395 db 06 7396 db 2 7397 dw RIdle1Monster1197398 dw RIdle2Monster1197399 7400 dw LIdle1Monster1197401 dw LIdle2Monster1197402Monster119AttackPatternRight:7403 db AnimateAttack | dw RAttack1Monster119 | db 000,000,000,AnimateAttack | dw RAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile7404Monster119AttackPatternLeft:7405 db AnimateAttack | dw LAttack1Monster119 | db 000,000,000,AnimateAttack | dw LAttack2Monster119 | db 000,ShootProjectile,WaitImpactProjectile74077410RIdle1Monster120: equ $4000 + (064*128) + (192/2) - 128 7411RIdle2Monster120: equ $4000 + (064*128) + (224/2) - 128 7412RAttack1Monster120: equ $4000 + (096*128) + (000/2) - 128 7414LIdle1Monster120: equ $4000 + (096*128) + (096/2) - 128 7415LIdle2Monster120: equ $4000 + (096*128) + (064/2) - 128 7416LAttack1Monster120: equ $4000 + (096*128) + (032/2) - 128 7418Monster120Move:7419Monster120Idle:7420 db 06 7421 db 2 7422 dw RIdle1Monster1207423 dw RIdle2Monster1207424 7425 dw LIdle1Monster1207426 dw LIdle2Monster1207427Monster120AttackPatternRight:7428 db AnimateAttack | dw RAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile7429Monster120AttackPatternLeft:7430 db AnimateAttack | dw LAttack1Monster120 | db 000,ShootProjectile,WaitImpactProjectile74327435RIdle1Monster121: equ $4000 + (128*128) + (000/2) - 128 7436RIdle2Monster121: equ $4000 + (128*128) + (048/2) - 128 7437RIdle3Monster121: equ $4000 + (128*128) + (096/2) - 128 7439LIdle1Monster121: equ $4000 + (192*128) + (096/2) - 128 7440LIdle2Monster121: equ $4000 + (192*128) + (048/2) - 128 7441LIdle3Monster121: equ $4000 + (192*128) + (000/2) - 128 7443Monster121Move:7444Monster121Idle:7445 db 04 7446 db 4 7447 dw RIdle1Monster1217448 dw RIdle2Monster1217449 dw RIdle1Monster1217450 dw RIdle3Monster1217451 7452 dw LIdle1Monster1217453 dw LIdle2Monster1217454 dw LIdle1Monster1217455 dw LIdle3Monster121745774607462RIdle1Monster122: equ $4000 + (096*128) + (128/2) - 128 7463RIdle2Monster122: equ $4000 + (096*128) + (144/2) - 128 7464RIdle3Monster122: equ $4000 + (096*128) + (160/2) - 128 7465RIdle4Monster122: equ $4000 + (096*128) + (176/2) - 128 7467LIdle1Monster122: equ $4000 + (096*128) + (240/2) - 128 7468LIdle2Monster122: equ $4000 + (096*128) + (224/2) - 128 7469LIdle3Monster122: equ $4000 + (096*128) + (208/2) - 128 7470LIdle4Monster122: equ $4000 + (096*128) + (192/2) - 128 7472Monster122Move:7473Monster122Idle:7474 db 5 7475 db 6 7476 dw RIdle1Monster1227477 dw RIdle2Monster1227478 dw RIdle3Monster1227479 dw RIdle4Monster1227480 dw RIdle3Monster1227481 dw RIdle2Monster1227482 7483 dw LIdle1Monster1227484 dw LIdle2Monster1227485 dw LIdle3Monster1227486 dw LIdle4Monster1227487 dw LIdle3Monster1227488 dw LIdle2Monster1227489Monster122AttackPatternRight:7490 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 003,000,ShowBeingHitSprite,007,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7491Monster122AttackPatternRightUp:7492 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 002,000,ShowBeingHitSprite,006,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7493Monster122AttackPatternRightDown:7494 db AnimateAttack | dw RIdle2Monster122 | db 000,AnimateAttack | dw LIdle2Monster122 | db 004,000,ShowBeingHitSprite,008,AnimateAttack | dw RIdle2Monster122 | db 000,InitiateAttack7495Monster122AttackPatternLeft:7496 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 007,000,ShowBeingHitSprite,003,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7497Monster122AttackPatternLeftUp:7498 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 008,000,ShowBeingHitSprite,004,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack7499Monster122AttackPatternLeftDown:7500 db AnimateAttack | dw LIdle2Monster122 | db 000,AnimateAttack | dw RIdle2Monster122 | db 006,000,ShowBeingHitSprite,002,AnimateAttack | dw LIdle2Monster122 | db 000,InitiateAttack75017504RIdle1Monster123: equ $4000 + (128*128) + (144/2) - 128 7505RIdle2Monster123: equ $4000 + (128*128) + (160/2) - 128 7506RIdle3Monster123: equ $4000 + (128*128) + (176/2) - 128 7507RIdle4Monster123: equ $4000 + (128*128) + (192/2) - 128 7509LIdle1Monster123: equ $4000 + (160*128) + (144/2) - 128 7510LIdle2Monster123: equ $4000 + (128*128) + (240/2) - 128 7511LIdle3Monster123: equ $4000 + (128*128) + (224/2) - 128 7512LIdle4Monster123: equ $4000 + (128*128) + (208/2) - 128 7514Monster123Move:7515Monster123Idle:7516 db 04 7517 db 6 7518 dw RIdle1Monster1237519 dw RIdle2Monster1237520 dw RIdle3Monster1237521 dw RIdle4Monster1237522 dw RIdle3Monster1237523 dw RIdle2Monster1237524 7525 dw LIdle1Monster1237526 dw LIdle2Monster1237527 dw LIdle3Monster1237528 dw LIdle4Monster1237529 dw LIdle3Monster1237530 dw LIdle2Monster12375327535RIdle1Monster124: equ $4000 + (000*128) + (224/2) - 128 7536RIdle2Monster124: equ $4000 + (000*128) + (240/2) - 128 7538LIdle1Monster124: equ $4000 + (032*128) + (240/2) - 128 7539LIdle2Monster124: equ $4000 + (032*128) + (224/2) - 128 7541Monster124Move:7542Monster124Idle:7543 db 08 7544 db 2 7545 dw RIdle1Monster1247546 dw RIdle2Monster1247547 7548 dw LIdle1Monster1247549 dw LIdle2Monster12475517554RIdle1Monster125: equ $4000 + (184*128) + (128/2) - 128 7555RIdle2Monster125: equ $4000 + (184*128) + (144/2) - 128 7556Rattack1Monster125: equ $4000 + (184*128) + (160/2) - 128 7558LIdle1Monster125: equ $4000 + (184*128) + (208/2) - 128 7559LIdle2Monster125: equ $4000 + (184*128) + (192/2) - 128 7560Lattack1Monster125: equ $4000 + (184*128) + (176/2) - 128 7562Monster125Move:7563Monster125Idle:7564 db 07 7565 db 2 7566 dw RIdle1Monster1257567 dw RIdle2Monster1257568 7569 dw LIdle1Monster1257570 dw LIdle2Monster1257571Monster125AttackPatternRight:7572 db AnimateAttack | dw RAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile7573Monster125AttackPatternLeft:7574 db AnimateAttack | dw LAttack1Monster125 | db 000,ShootProjectile,WaitImpactProjectile757575857587RIdle1Monster126: equ $4000 + (192*128) + (176/2) - 128 7588RIdle2Monster126: equ $4000 + (192*128) + (192/2) - 128 7590LIdle1Monster126: equ $4000 + (192*128) + (224/2) - 128 7591LIdle2Monster126: equ $4000 + (192*128) + (208/2) - 128 7593Monster126Move:7594Monster126Idle:7595 db 08 7596 db 2 7597 dw RIdle1Monster1267598 dw RIdle2Monster1267599 7600 dw LIdle1Monster1267601 dw LIdle2Monster12676027605RIdle1Monster127: equ $4000 + (000*128) + (000/2) - 128 7606RIdle2Monster127: equ $4000 + (000*128) + (032/2) - 128 7607RIdle3Monster127: equ $4000 + (000*128) + (064/2) - 128 7608RAttack1Monster127: equ $4000 + (000*128) + (096/2) - 128 7609RAttack2Monster127: equ $4000 + (000*128) + (128/2) - 128 7610RAttack3Monster127: equ $4000 + (000*128) + (160/2) - 128 7612LIdle1Monster127: equ $4000 + (048*128) + (128/2) - 128 7613LIdle2Monster127: equ $4000 + (048*128) + (096/2) - 128 7614LIdle3Monster127: equ $4000 + (048*128) + (064/2) - 128 7615LAttack1Monster127: equ $4000 + (048*128) + (032/2) - 128 7616LAttack2Monster127: equ $4000 + (048*128) + (000/2) - 128 7617LAttack3Monster127: equ $4000 + (000*128) + (208/2) - 128 7619Monster127Move:7620Monster127Idle:7621 db 06 7622 db 4 7623 dw RIdle1Monster1277624 dw RIdle2Monster1277625 dw RIdle3Monster1277626 dw RIdle2Monster1277627 7628 dw LIdle1Monster1277629 dw LIdle2Monster1277630 dw LIdle3Monster1277631 dw LIdle2Monster1277633Monster127AttackPatternRight:7634 db 000,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 000,InitiateAttack7635Monster127AttackPatternRightUp:7636 db 008,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 004,InitiateAttack7637Monster127AttackPatternRightDown:7638 db 006,AnimateAttack | dw RAttack1Monster127 | db 0030,AnimateAttack | dw RAttack2Monster127 | db 000,AnimateAttack | dw RAttack3Monster127 | db 128+48,DisplaceRight8,ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster127 | db 128+32,DisplaceLeft8,000,AnimateAttack | dw RAttack1Monster127 | db 002,InitiateAttack7639Monster127AttackPatternLeft:7640 db 000,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 000,InitiateAttack7641Monster127AttackPatternLeftUp:7642 db 002,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 006,InitiateAttack7643Monster127AttackPatternLeftDown:7644 db 004,AnimateAttack | dw LAttack1Monster127 | db 0030,AnimateAttack | dw LAttack2Monster127 | db 000,AnimateAttack | dw LAttack3Monster127 | db 128+48,DisplaceLeft,DisplaceLeft8,ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster127 | db 128+32,DisplaceRight,DisplaceRight8,000,AnimateAttack | dw LAttack1Monster127 | db 008,InitiateAttack76477650RIdle1Monster128: equ $4000 + (096*128) + (000/2) - 128 7651RIdle2Monster128: equ $4000 + (096*128) + (016/2) - 128 7652RIdle3Monster128: equ $4000 + (096*128) + (032/2) - 128 7654LIdle1Monster128: equ $4000 + (096*128) + (080/2) - 128 7655LIdle2Monster128: equ $4000 + (096*128) + (064/2) - 128 7656LIdle3Monster128: equ $4000 + (096*128) + (048/2) - 128 7658Monster128Move:7659 db 08 7660 db 1 7661 dw RIdle2Monster1287662 7663 dw LIdle2Monster1287664Monster128Idle:7665 db 08 7666 db 4 7667 dw RIdle1Monster1287668 dw RIdle2Monster1287669 dw RIdle3Monster1287670 dw RIdle2Monster1287671 7672 dw LIdle1Monster1287673 dw LIdle2Monster1287674 dw LIdle3Monster1287675 dw LIdle2Monster1287676Monster128AttackPatternRight:7677 db AnimateAttack | dw RIdle2Monster128 | db 003 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 007,InitiateAttack7678Monster128AttackPatternRightUp:7679 db AnimateAttack | dw RIdle2Monster128 | db 002 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 006,InitiateAttack7680Monster128AttackPatternRightDown:7681 db AnimateAttack | dw RIdle2Monster128 | db 004 | db ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle3Monster128 | db 008,InitiateAttack7682Monster128AttackPatternLeft:7683 db AnimateAttack | dw LIdle2Monster128 | db 007 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 003,InitiateAttack7684Monster128AttackPatternLeftUp:7685 db AnimateAttack | dw LIdle2Monster128 | db 008 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 004,InitiateAttack7686Monster128AttackPatternLeftDown:7687 db AnimateAttack | dw LIdle2Monster128 | db 006 | db ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle3Monster128 | db 002,InitiateAttack76897692RIdle1Monster129: equ $4000 + (096*128) + (224/2) - 128 7693RIdle2Monster129: equ $4000 + (136*128) + (192/2) - 128 7694RAttack1Monster129: equ $4000 + (136*128) + (224/2) - 128 7696LIdle1Monster129: equ $4000 + (176*128) + (224/2) - 128 7697LIdle2Monster129: equ $4000 + (176*128) + (192/2) - 128 7698LAttack1Monster129: equ $4000 + (176*128) + (160/2) - 128 7700Monster129Move:7701 db 04 7702 db 2 7703 dw RIdle1Monster1297704 dw RIdle2Monster1297705 7706 dw LIdle1Monster1297707 dw LIdle2Monster1297708Monster129Idle:7709 db 08 7710 db 2 7711 dw RIdle1Monster1297712 dw RIdle2Monster1297713 7714 dw LIdle1Monster1297715 dw LIdle2Monster1297716Monster129AttackPatternRight:7717 db AnimateAttack | dw RAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile7718Monster129AttackPatternLeft:7719 db AnimateAttack | dw LAttack1Monster129 | db 000,ShootProjectile,WaitImpactProjectile 77207723RIdle1Monster130: equ $4000 + (176*128) + (000/2) - 128 7724RIdle2Monster130: equ $4000 + (176*128) + (016/2) - 128 7725RIdle3Monster130: equ $4000 + (176*128) + (032/2) - 128 7726RAttack1Monster130: equ $4000 + (176*128) + (048/2) - 128 7728LIdle1Monster130: equ $4000 + (176*128) + (144/2) - 128 7729LIdle2Monster130: equ $4000 + (176*128) + (128/2) - 128 7730LIdle3Monster130: equ $4000 + (176*128) + (112/2) - 128 7731LAttack1Monster130: equ $4000 + (176*128) + (080/2) - 128 7733Monster130Move:7734Monster130Idle:7735 db 05 7736 db 4 7737 dw RIdle1Monster1307738 dw RIdle2Monster1307739 dw RIdle3Monster1307740 dw RIdle2Monster1307741 7742 dw LIdle1Monster1307743 dw LIdle2Monster1307744 dw LIdle3Monster1307745 dw LIdle2Monster1307746Monster130AttackPatternRight:7747 db AnimateAttack | dw RIdle1Monster130 | db 003,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,007,InitiateAttack7748Monster130AttackPatternRightUp:7749 db AnimateAttack | dw RIdle1Monster130 | db 002,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,006,InitiateAttack7750Monster130AttackPatternRightDown:7751 db AnimateAttack | dw RIdle1Monster130 | db 004,AnimateAttack | dw RAttack1Monster130 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle1Monster130 | db 128+16,000,008,InitiateAttack7752Monster130AttackPatternLeft:7753 db AnimateAttack | dw LIdle1Monster130 | db 007,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,003,InitiateAttack7754Monster130AttackPatternLeftUp:7755 db AnimateAttack | dw LIdle1Monster130 | db 008,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,004,InitiateAttack7756Monster130AttackPatternLeftDown:7757 db AnimateAttack | dw LIdle1Monster130 | db 006,AnimateAttack | dw LAttack1Monster130 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle1Monster130 | db 128+16,DisplaceRight,000,002,InitiateAttack77597762RIdle1Monster131: equ $4000 + (216*128) + (000/2) - 128 7763RIdle2Monster131: equ $4000 + (216*128) + (016/2) - 128 7764RIdle3Monster131: equ $4000 + (216*128) + (032/2) - 128 7765RAttack1Monster131: equ $4000 + (216*128) + (048/2) - 128 7766RAttack2Monster131: equ $4000 + (216*128) + (064/2) - 128 7768LIdle1Monster131: equ $4000 + (216*128) + (144/2) - 128 7769LIdle2Monster131: equ $4000 + (216*128) + (128/2) - 128 7770LIdle3Monster131: equ $4000 + (216*128) + (112/2) - 128 7771LAttack1Monster131: equ $4000 + (216*128) + (096/2) - 128 7772LAttack2Monster131: equ $4000 + (216*128) + (080/2) - 128 7774Monster131Move:7775Monster131Idle:7776 db 05 7777 db 4 7778 dw RIdle1Monster1317779 dw RIdle2Monster1317780 dw RIdle3Monster1317781 dw RIdle2Monster1317782 7783 dw LIdle1Monster1317784 dw LIdle2Monster1317785 dw LIdle3Monster1317786 dw LIdle2Monster1317787Monster131AttackPatternRight:7788 db AnimateAttack | dw RIdle1Monster131 | db 003,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 007,InitiateAttack7789Monster131AttackPatternRightUp:7790 db AnimateAttack | dw RIdle1Monster131 | db 002,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 006,InitiateAttack7791Monster131AttackPatternRightDown:7792 db AnimateAttack | dw RIdle1Monster131 | db 004,AnimateAttack | dw RAttack1Monster131 | db 000,AnimateAttack | dw RAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster131 | db 008,InitiateAttack7793Monster131AttackPatternLeft:7794 db AnimateAttack | dw LIdle1Monster131 | db 007,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 003,InitiateAttack7795Monster131AttackPatternLeftUp:7796 db AnimateAttack | dw LIdle1Monster131 | db 008,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 004,InitiateAttack7797Monster131AttackPatternLeftDown:7798 db AnimateAttack | dw LIdle1Monster131 | db 006,AnimateAttack | dw LAttack1Monster131 | db 000,AnimateAttack | dw LAttack2Monster131 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster131 | db 002,InitiateAttack78067809RIdle1Monster132: equ $4000 + (136*128) + (000/2) - 128 7810RIdle2Monster132: equ $4000 + (136*128) + (016/2) - 128 7811RAttack1Monster132: equ $4000 + (136*128) + (032/2) - 128 7812RAttack2Monster132: equ $4000 + (136*128) + (064/2) - 128 7814LIdle1Monster132: equ $4000 + (136*128) + (176/2) - 128 7815LIdle2Monster132: equ $4000 + (136*128) + (160/2) - 128 7816LAttack1Monster132: equ $4000 + (136*128) + (128/2) - 128 7817LAttack2Monster132: equ $4000 + (136*128) + (096/2) - 128 7819Monster132Move:7820Monster132Idle:7821 db 08 7822 db 2 7823 dw RIdle1Monster1327824 dw RIdle2Monster1327825 7826 dw LIdle1Monster1327827 dw LIdle2Monster1327828Monster132AttackPatternRight:7829 db AnimateAttack | dw RIdle1Monster132 | db 000,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,000,InitiateAttack7830Monster132AttackPatternRightUp:7831 db AnimateAttack | dw RIdle1Monster132 | db 008,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,004,InitiateAttack7832Monster132AttackPatternRightDown:7833 db AnimateAttack | dw RIdle1Monster132 | db 006,AnimateAttack | dw RAttack1Monster132 | db 128+32,000,AnimateAttack | dw RAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster132 | db 128+16,002,InitiateAttack7834Monster132AttackPatternLeft:7835 db AnimateAttack | dw LIdle1Monster132 | db 000,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,000,InitiateAttack7836Monster132AttackPatternLeftUp:7837 db AnimateAttack | dw LIdle1Monster132 | db 002,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,006,InitiateAttack7838Monster132AttackPatternLeftDown:7839 db AnimateAttack | dw LIdle1Monster132 | db 004,AnimateAttack | dw LAttack1Monster132 | db 128+32,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster132 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster132 | db 128+16,DisplaceRight,008,InitiateAttack78417844RIdle1Monster133: equ $4000 + (096*128) + (096/2) - 128 7845RIdle2Monster133: equ $4000 + (096*128) + (112/2) - 128 7846RAttack1Monster133: equ $4000 + (096*128) + (128/2) - 128 7848LIdle1Monster133: equ $4000 + (096*128) + (208/2) - 128 7849LIdle2Monster133: equ $4000 + (096*128) + (192/2) - 128 7850LAttack1Monster133: equ $4000 + (096*128) + (160/2) - 128 7852Monster133Move:7853Monster133Idle:7854 db 08 7855 db 2 7856 dw RIdle1Monster1337857 dw RIdle2Monster1337858 7859 dw LIdle1Monster1337860 dw LIdle2Monster1337861Monster133AttackPatternRight:7862 db AnimateAttack | dw RIdle1Monster133 | db 000,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,000,InitiateAttack7863Monster133AttackPatternRightUp:7864 db AnimateAttack | dw RIdle1Monster133 | db 008,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,004,InitiateAttack7865Monster133AttackPatternRightDown:7866 db AnimateAttack | dw RIdle1Monster133 | db 006,AnimateAttack | dw RAttack1Monster133 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster133 | db 128+16,002,InitiateAttack7867Monster133AttackPatternLeft:7868 db AnimateAttack | dw LIdle1Monster133 | db 000,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,000,InitiateAttack7869Monster133AttackPatternLeftUp:7870 db AnimateAttack | dw LIdle1Monster133 | db 002,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,006,InitiateAttack7871Monster133AttackPatternLeftDown:7872 db AnimateAttack | dw LIdle1Monster133 | db 004,AnimateAttack | dw LAttack1Monster133 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster133 | db 128+16,DisplaceRight,008,InitiateAttack78747877RIdle1Monster134: equ $4000 + (192*128) + (240/2) - 128 7878RIdle2Monster134: equ $4000 + (224*128) + (144/2) - 128 7879RAttack1Monster134: equ $4000 + (224*128) + (160/2) - 128 7881LIdle1Monster134: equ $4000 + (224*128) + (240/2) - 128 7882LIdle2Monster134: equ $4000 + (224*128) + (224/2) - 128 7883LAttack1Monster134: equ $4000 + (224*128) + (192/2) - 128 7885Monster134Move:7886Monster134Idle:7887 db 08 7888 db 2 7889 dw RIdle1Monster1347890 dw RIdle2Monster1347891 7892 dw LIdle1Monster1347893 dw LIdle2Monster1347894Monster134AttackPatternRight:7895 db AnimateAttack | dw RIdle1Monster134 | db 000,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,000,InitiateAttack7896Monster134AttackPatternRightUp:7897 db AnimateAttack | dw RIdle1Monster134 | db 008,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,004,InitiateAttack7898Monster134AttackPatternRightDown:7899 db AnimateAttack | dw RIdle1Monster134 | db 006,AnimateAttack | dw RAttack1Monster134 | db 128+32,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster134 | db 128+16,002,InitiateAttack7900Monster134AttackPatternLeft:7901 db AnimateAttack | dw LIdle1Monster134 | db 000,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,000,InitiateAttack7902Monster134AttackPatternLeftUp:7903 db AnimateAttack | dw LIdle1Monster134 | db 002,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,006,InitiateAttack7904Monster134AttackPatternLeftDown:7905 db AnimateAttack | dw LIdle1Monster134 | db 004,AnimateAttack | dw LAttack1Monster134 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster134 | db 128+16,DisplaceRight,008,InitiateAttack79077910RIdle1Monster135: equ $4000 + (080*128) + (000/2) - 128 7911RIdle2Monster135: equ $4000 + (080*128) + (032/2) - 128 7912RIdle3Monster135: equ $4000 + (080*128) + (064/2) - 128 7913RIdle4Monster135: equ $4000 + (080*128) + (096/2) - 128 7914RIdle5Monster135: equ $4000 + (080*128) + (128/2) - 128 7915RIdle6Monster135: equ $4000 + (080*128) + (160/2) - 128 7916RAttack1Monster135: equ $4000 + (080*128) + (192/2) - 128 7918LIdle1Monster135: equ $4000 + (128*128) + (192/2) - 128 7919LIdle2Monster135: equ $4000 + (128*128) + (160/2) - 128 7920LIdle3Monster135: equ $4000 + (128*128) + (128/2) - 128 7921LIdle4Monster135: equ $4000 + (128*128) + (096/2) - 128 7922LIdle5Monster135: equ $4000 + (128*128) + (064/2) - 128 7923LIdle6Monster135: equ $4000 + (128*128) + (032/2) - 128 7924LAttack1Monster135: equ $4000 + (128*128) + (000/2) - 128 7926Monster135Move:7927Monster135Idle:7928 db 02 7929 db 6 7930 dw RIdle1Monster1357931 dw RIdle2Monster1357932 dw RIdle3Monster1357933 dw RIdle4Monster1357934 dw RIdle5Monster1357935 dw RIdle6Monster1357936 7937 dw LIdle1Monster1357938 dw LIdle2Monster1357939 dw LIdle3Monster1357940 dw LIdle4Monster1357941 dw LIdle5Monster1357942 dw LIdle6Monster1357943Monster135AttackPatternRight:7944 db AnimateAttack | dw RIdle1Monster135 | db 003,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 007,InitiateAttack7945Monster135AttackPatternRightUp:7946 db AnimateAttack | dw RIdle1Monster135 | db 008,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 004,InitiateAttack7947Monster135AttackPatternRightDown:7948 db AnimateAttack | dw RIdle1Monster135 | db 006,AnimateAttack | dw RAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw RIdle2Monster135 | db 002,InitiateAttack7949Monster135AttackPatternLeft:7950 db AnimateAttack | dw LIdle1Monster135 | db 007,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 003,InitiateAttack7951Monster135AttackPatternLeftUp:7952 db AnimateAttack | dw LIdle1Monster135 | db 008,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 004,InitiateAttack7953Monster135AttackPatternLeftDown:7954 db AnimateAttack | dw LIdle1Monster135 | db 006,AnimateAttack | dw LAttack1Monster135 | db 000,ShowBeingHitSprite,000,000,000,AnimateAttack | dw LIdle2Monster135 | db 002,InitiateAttack79567959RIdle1Monster136: equ $4000 + (136*128) + (000/2) - 128 7960RIdle2Monster136: equ $4000 + (184*128) + (000/2) - 128 7961RIdle3Monster136: equ $4000 + (184*128) + (016/2) - 128 7962RAttack1Monster136: equ $4000 + (136*128) + (016/2) - 128 7963RAttack2Monster136: equ $4000 + (136*128) + (032/2) - 128 7964RAttack3Monster136: equ $4000 + (136*128) + (048/2) - 128 7965RAttack4Monster136: equ $4000 + (136*128) + (064/2) - 128 7967LIdle1Monster136: equ $4000 + (136*128) + (144/2) - 128 7968LIdle2Monster136: equ $4000 + (184*128) + (048/2) - 128 7969LIdle3Monster136: equ $4000 + (184*128) + (032/2) - 128 7970LAttack1Monster136: equ $4000 + (136*128) + (128/2) - 128 7971LAttack2Monster136: equ $4000 + (136*128) + (112/2) - 128 7972LAttack3Monster136: equ $4000 + (136*128) + (096/2) - 128 7973LAttack4Monster136: equ $4000 + (136*128) + (080/2) - 128 7975Monster136Move:7976Monster136Idle:7977 db 06 7978 db 4 7979 dw RIdle1Monster1367980 dw RIdle2Monster1367981 dw RIdle1Monster1367982 dw RIdle3Monster1367983 7984 dw LIdle1Monster1367985 dw LIdle2Monster1367986 dw LIdle1Monster1367987 dw LIdle3Monster1367988Monster136AttackPatternRight:7989 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 003,003,ShowBeingHitSprite,000,007,007,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7990Monster136AttackPatternRightUp:7991 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 002,002,ShowBeingHitSprite,000,006,006,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7992Monster136AttackPatternRightDown:7993 db AnimateAttack | dw RIdle1Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack4Monster136 | db 004,004,ShowBeingHitSprite,000,008,008,000,AnimateAttack | dw RAttack3Monster136 | db 000,AnimateAttack | dw RAttack2Monster136 | db 000,AnimateAttack | dw RAttack1Monster136 | db 000,InitiateAttack7994Monster136AttackPatternLeft:7995 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 007,007,ShowBeingHitSprite,000,003,003,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7996Monster136AttackPatternLeftUp:7997 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 008,008,ShowBeingHitSprite,000,004,004,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack7998Monster136AttackPatternLeftDown:7999 db AnimateAttack | dw LIdle1Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack4Monster136 | db 006,006,ShowBeingHitSprite,000,002,002,000,AnimateAttack | dw LAttack3Monster136 | db 000,AnimateAttack | dw LAttack2Monster136 | db 000,AnimateAttack | dw LAttack1Monster136 | db 000,InitiateAttack80018004RIdle1Monster137: equ $4000 + (088*128) + (192/2) - 128 8005RIdle2Monster137: equ $4000 + (144*128) + (192/2) - 128 8006RIdle3Monster137: equ $4000 + (200*128) + (192/2) - 128 8008LIdle1Monster137: equ $4000 + (088*128) + (224/2) - 128 8009LIdle2Monster137: equ $4000 + (144*128) + (224/2) - 128 8010LIdle3Monster137: equ $4000 + (200*128) + (224/2) - 128 8012Monster137Move:8013Monster137Idle:8014 db 05 8015 db 3 8016 dw RIdle1Monster1378017 dw RIdle2Monster1378018 dw RIdle3Monster1378019 8020 dw LIdle1Monster1378021 dw LIdle2Monster1378022 dw LIdle3Monster13780248027RIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8028RIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8029RIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8030RIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8031RIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8032RIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8034LIdle1Monster138: equ $4000 + (000*128) + (000/2) - 128 8035LIdle2Monster138: equ $4000 + (000*128) + (048/2) - 128 8036LIdle3Monster138: equ $4000 + (000*128) + (096/2) - 128 8037LIdle4Monster138: equ $4000 + (000*128) + (144/2) - 128 8038LIdle5Monster138: equ $4000 + (000*128) + (192/2) - 128 8039LIdle6Monster138: equ $4000 + (048*128) + (000/2) - 128 8041Monster138Move:8042Monster138Idle:8043 db 02 8044 db 6 8045 dw RIdle6Monster1388046 dw RIdle1Monster1388047 dw RIdle2Monster1388048 dw RIdle3Monster1388049 dw RIdle4Monster1388050 dw RIdle5Monster1388051 8052 dw LIdle6Monster1388053 dw LIdle1Monster1388054 dw LIdle2Monster1388055 dw LIdle3Monster1388056 dw LIdle4Monster1388057 dw LIdle5Monster13880598062RIdle1Monster139: equ $4000 + (096*128) + (000/2) - 128 8063RIdle2Monster139: equ $4000 + (096*128) + (032/2) - 128 8064RIdle3Monster139: equ $4000 + (096*128) + (064/2) - 128 8065RIdle4Monster139: equ $4000 + (096*128) + (096/2) - 128 8066RIdle5Monster139: equ $4000 + (096*128) + (128/2) - 128 8067RIdle6Monster139: equ $4000 + (096*128) + (160/2) - 128 8068RIdle7Monster139: equ $4000 + (136*128) + (000/2) - 128 8069RIdle8Monster139: equ $4000 + (136*128) + (032/2) - 128 8070Rattack1Monster139: equ $4000 + (136*128) + (064/2) - 128 8072LIdle1Monster139: equ $4000 + (176*128) + (160/2) - 128 8073LIdle2Monster139: equ $4000 + (176*128) + (128/2) - 128 8074LIdle3Monster139: equ $4000 + (176*128) + (096/2) - 128 8075LIdle4Monster139: equ $4000 + (176*128) + (064/2) - 128 8076LIdle5Monster139: equ $4000 + (176*128) + (032/2) - 128 8077LIdle6Monster139: equ $4000 + (176*128) + (000/2) - 128 8078LIdle7Monster139: equ $4000 + (216*128) + (160/2) - 128 8079LIdle8Monster139: equ $4000 + (216*128) + (128/2) - 128 8080Lattack1Monster139: equ $4000 + (216*128) + (080/2) - 128 8082Monster139Move:8083Monster139Idle:8084 db 02 8085 db 8 8086 dw RIdle1Monster1398087 dw RIdle2Monster1398088 dw RIdle3Monster1398089 dw RIdle4Monster1398090 dw RIdle5Monster1398091 dw RIdle6Monster1398092 dw RIdle7Monster1398093 dw RIdle8Monster1398094 8095 dw LIdle1Monster1398096 dw LIdle2Monster1398097 dw LIdle3Monster1398098 dw LIdle4Monster1398099 dw LIdle5Monster1398100 dw LIdle6Monster1398101 dw LIdle7Monster1398102 dw LIdle8Monster1398103Monster139AttackPatternRight:8104 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,003,000,ShowBeingHitSprite,007,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8105Monster139AttackPatternRightUp:8106 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,002,000,ShowBeingHitSprite,006,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8107Monster139AttackPatternRightDown:8108 db 000,AnimateAttack | dw Rattack1Monster139 | db 128+48,000,004,000,ShowBeingHitSprite,008,000,AnimateAttack | dw RIdle1Monster139 | db 128+32,InitiateAttack8109Monster139AttackPatternLeft:8110 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,007,000,ShowBeingHitSprite,003,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8111Monster139AttackPatternLeftUp:8112 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,008,000,ShowBeingHitSprite,004,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack8113Monster139AttackPatternLeftDown:8114 db 000,AnimateAttack | dw Lattack1Monster139 | db 128+48,DisplaceLeft,000,006,000,ShowBeingHitSprite,002,000,AnimateAttack | dw LIdle1Monster139 | db 128+32,DisplaceRight,InitiateAttack81158118RIdle1Monster140: equ $4000 + (000*128) + (000/2) - 128 8119RIdle2Monster140: equ $4000 + (000*128) + (032/2) - 128 8120RIdle3Monster140: equ $4000 + (000*128) + (064/2) - 128 8121RAttack1Monster140: equ $4000 + (000*128) + (096/2) - 128 8122RAttack2Monster140: equ $4000 + (000*128) + (160/2) - 128 8124LIdle1Monster140: equ $4000 + (040*128) + (192/2) - 128 8125LIdle2Monster140: equ $4000 + (040*128) + (160/2) - 128 8126LIdle3Monster140: equ $4000 + (040*128) + (128/2) - 128 8127LAttack1Monster140: equ $4000 + (040*128) + (064/2) - 128 8128LAttack2Monster140: equ $4000 + (040*128) + (000/2) - 128 8130Monster140Move:8131Monster140Idle:8132 db 04 8133 db 4 8134 dw RIdle1Monster1408135 dw RIdle3Monster1408136 dw RIdle2Monster1408137 dw RIdle3Monster1408138 8139 dw LIdle1Monster1408140 dw LIdle3Monster1408141 dw LIdle2Monster1408142 dw LIdle3Monster1408143Monster140AttackPatternRight:8144 db AnimateAttack | dw RIdle1Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,000,InitiateAttack8145Monster140AttackPatternRightUp:8146 db AnimateAttack | dw RIdle1Monster140 | db 008,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,004,InitiateAttack8147Monster140AttackPatternRightDown:8148 db AnimateAttack | dw RIdle1Monster140 | db 006,AnimateAttack | dw RAttack1Monster140 | db 128+64,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw RAttack2Monster140 | db 000,AnimateAttack | dw RIdle1Monster140 | db 128+32,002,InitiateAttack8149Monster140AttackPatternLeft:8150 db AnimateAttack | dw LIdle1Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,000,InitiateAttack8151Monster140AttackPatternLeftUp:8152 db AnimateAttack | dw LIdle1Monster140 | db 002,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,006,InitiateAttack8153Monster140AttackPatternLeftDown:8154 db AnimateAttack | dw LIdle1Monster140 | db 004,AnimateAttack | dw LAttack1Monster140 | db 128+64,DisplaceLeft,DisplaceLeft,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LAttack1Monster140 | db ShowBeingHitSprite,000,AnimateAttack | dw LAttack2Monster140 | db 000,AnimateAttack | dw LIdle1Monster140 | db 128+32,DisplaceRight,DisplaceRight,008,InitiateAttack81568159RIdle1Monster141: equ $4000 + (068*128) + (000/2) - 128 8160RIdle2Monster141: equ $4000 + (068*128) + (064/2) - 128 8162LIdle1Monster141: equ $4000 + (068*128) + (192/2) - 128 8163LIdle2Monster141: equ $4000 + (068*128) + (128/2) - 128 8165Monster141Move:8166Monster141Idle:8167 db 04 8168 db 2 8169 dw RIdle1Monster1418170 dw RIdle2Monster1418171 8172 dw LIdle1Monster1418173 dw LIdle2Monster14181758178RIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8179RIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8180RIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8182LIdle1Monster142: equ $4000 + (136*128) + (160/2) - 128 8183LIdle2Monster142: equ $4000 + (136*128) + (192/2) - 128 8184LIdle3Monster142: equ $4000 + (136*128) + (224/2) - 128 8186Monster142Move:8187Monster142Idle:8188 db 06 8189 db 3 8190 dw RIdle1Monster1428191 dw RIdle2Monster1428192 dw RIdle3Monster1428193 8194 dw LIdle1Monster1428195 dw LIdle2Monster1428196 dw LIdle3Monster14281988201RIdle1Monster143: equ $4000 + (176*128) + (000/2) - 128 8202RIdle2Monster143: equ $4000 + (176*128) + (016/2) - 128 8203RIdle3Monster143: equ $4000 + (176*128) + (032/2) - 128 8204RAttack1Monster143: equ $4000 + (176*128) + (048/2) - 128 8206LIdle1Monster143: equ $4000 + (176*128) + (112/2) - 128 8207LIdle2Monster143: equ $4000 + (176*128) + (096/2) - 128 8208LIdle3Monster143: equ $4000 + (176*128) + (080/2) - 128 8209LAttack1Monster143: equ $4000 + (176*128) + (064/2) - 128 8211Monster143Move:8212Monster143Idle:8213 db 06 8214 db 4 8215 dw RIdle1Monster1438216 dw RIdle2Monster1438217 dw RIdle1Monster1438218 dw RIdle3Monster1438219 8220 dw LIdle1Monster1438221 dw LIdle2Monster1438222 dw LIdle1Monster1438223 dw LIdle3Monster1438224Monster143AttackPatternRight:8225 db AnimateAttack | dw RAttack1Monster143 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8226Monster143AttackPatternRightUp:8227 db AnimateAttack | dw RAttack1Monster143 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8228Monster143AttackPatternRightDown:8229 db AnimateAttack | dw RAttack1Monster143 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8230Monster143AttackPatternLeft:8231 db AnimateAttack | dw LAttack1Monster143 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8232Monster143AttackPatternLeftUp:8233 db AnimateAttack | dw LAttack1Monster143 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8234Monster143AttackPatternLeftDown:8235 db AnimateAttack | dw LAttack1Monster143 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack82378240RIdle1Monster144: equ $4000 + (216*128) + (032/2) - 128 8241RIdle2Monster144: equ $4000 + (216*128) + (048/2) - 128 8242RAttack1Monster144: equ $4000 + (216*128) + (064/2) - 128 8244LIdle1Monster144: equ $4000 + (216*128) + (112/2) - 128 8245LIdle2Monster144: equ $4000 + (216*128) + (096/2) - 128 8246LAttack1Monster144: equ $4000 + (216*128) + (080/2) - 128 8248Monster144Move:8249Monster144Idle:8250 db 08 8251 db 2 8252 dw RIdle1Monster1448253 dw RIdle2Monster1448254 8255 dw LIdle1Monster1448256 dw LIdle2Monster1448257Monster144AttackPatternRight:8258 db AnimateAttack | dw Rattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile8259Monster144AttackPatternLeft:8260 db AnimateAttack | dw Lattack1Monster144 | db 000,ShootProjectile,000,WaitImpactProjectile82628265RIdle1Monster145: equ $4000 + (216*128) + (128/2) - 128 8266RIdle2Monster145: equ $4000 + (216*128) + (144/2) - 128 8267RIdle3Monster145: equ $4000 + (216*128) + (160/2) - 128 8268RAttack1Monster145: equ $4000 + (216*128) + (176/2) - 128 8270LIdle1Monster145: equ $4000 + (216*128) + (240/2) - 128 8271LIdle2Monster145: equ $4000 + (216*128) + (224/2) - 128 8272LIdle3Monster145: equ $4000 + (216*128) + (208/2) - 128 8273LAttack1Monster145: equ $4000 + (216*128) + (192/2) - 128 8275Monster145Move:8276Monster145Idle:8277 db 06 8278 db 3 8279 dw RIdle1Monster1458280 dw RIdle2Monster1458281 dw RIdle3Monster1458282 8283 dw LIdle1Monster1458284 dw LIdle2Monster1458285 dw LIdle3Monster1458286Monster145AttackPatternRight:8287 db AnimateAttack | dw RAttack1Monster145 | db 003,000,ShowBeingHitSprite,000,007,InitiateAttack8288Monster145AttackPatternRightUp:8289 db AnimateAttack | dw RAttack1Monster145 | db 002,000,ShowBeingHitSprite,000,006,InitiateAttack8290Monster145AttackPatternRightDown:8291 db AnimateAttack | dw RAttack1Monster145 | db 004,000,ShowBeingHitSprite,000,008,InitiateAttack8292Monster145AttackPatternLeft:8293 db AnimateAttack | dw LAttack1Monster145 | db 007,000,ShowBeingHitSprite,000,003,InitiateAttack8294Monster145AttackPatternLeftUp:8295 db AnimateAttack | dw LAttack1Monster145 | db 008,000,ShowBeingHitSprite,000,004,InitiateAttack8296Monster145AttackPatternLeftDown:8297 db AnimateAttack | dw LAttack1Monster145 | db 006,000,ShowBeingHitSprite,000,002,InitiateAttack83018304RIdle1Monster146: equ $4000 + (176*128) + (128/2) - 128 8305RIdle2Monster146: equ $4000 + (176*128) + (144/2) - 128 8306RIdle3Monster146: equ $4000 + (176*128) + (160/2) - 128 8308LIdle1Monster146: equ $4000 + (176*128) + (208/2) - 128 8309LIdle2Monster146: equ $4000 + (176*128) + (192/2) - 128 8310LIdle3Monster146: equ $4000 + (176*128) + (176/2) - 128 8312Monster146Move:8313Monster146Idle:8314 db 06 8315 db 3 8316 dw RIdle1Monster1468317 dw RIdle2Monster1468318 dw RIdle3Monster1468319 8320 dw LIdle1Monster1468321 dw LIdle2Monster1468322 dw LIdle3Monster14683248327RIdle1Monster147: equ $4000 + (216*128) + (160/2) - 128 8328RIdle2Monster147: equ $4000 + (216*128) + (176/2) - 128 8329RIdle3Monster147: equ $4000 + (216*128) + (192/2) - 128 8331LIdle1Monster147: equ $4000 + (216*128) + (240/2) - 128 8332LIdle2Monster147: equ $4000 + (216*128) + (224/2) - 128 8333LIdle3Monster147: equ $4000 + (216*128) + (208/2) - 128 8335Monster147Move:8336Monster147Idle:8337 db 06 8338 db 3 8339 dw RIdle1Monster1478340 dw RIdle2Monster1478341 dw RIdle3Monster1478342 8343 dw LIdle1Monster1478344 dw LIdle2Monster1478345 dw LIdle3Monster14783478350RIdle1Monster148: equ $4000 + (176*128) + (224/2) - 128 8351RIdle2Monster148: equ $4000 + (176*128) + (240/2) - 128 8353LIdle1Monster148: equ $4000 + (216*128) + (000/2) - 128 8354LIdle2Monster148: equ $4000 + (216*128) + (016/2) - 128 8356Monster148Move:8357Monster148Idle:8358 db 06 8359 db 2 8360 dw RIdle1Monster1488361 dw RIdle2Monster1488362 8363 dw LIdle1Monster1488364 dw LIdle2Monster14883668369RIdle1Monster149: equ $4000 + (048*128) + (160/2) - 128 8370RIdle2Monster149: equ $4000 + (048*128) + (176/2) - 128 8371RIdle3Monster149: equ $4000 + (048*128) + (192/2) - 128 8372RAttack1Monster149: equ $4000 + (048*128) + (208/2) - 128 8373RAttack2Monster149: equ $4000 + (048*128) + (224/2) - 128 8374RAttack3Monster149: equ $4000 + (048*128) + (240/2) - 128 8376LIdle1Monster149: equ $4000 + (072*128) + (240/2) - 128 8377LIdle2Monster149: equ $4000 + (072*128) + (224/2) - 128 8378LIdle3Monster149: equ $4000 + (072*128) + (208/2) - 128 8379LAttack1Monster149: equ $4000 + (072*128) + (192/2) - 128 8380LAttack2Monster149: equ $4000 + (072*128) + (176/2) - 128 8381LAttack3Monster149: equ $4000 + (072*128) + (160/2) - 128 8383Monster149Move:8384Monster149Idle:8385 db 06 8386 db 3 8387 dw RIdle1Monster1498388 dw RIdle2Monster1498389 dw RIdle3Monster1498390 8391 dw LIdle1Monster1498392 dw LIdle2Monster1498393 dw LIdle3Monster1498395Monster149AttackPatternRight:8396 db AnimateAttack | dw Rattack1Monster149 | db 000,000,000,AnimateAttack | dw Rattack2Monster149 | db 000,000,000,AnimateAttack | dw Rattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile8397Monster149AttackPatternLeft:8398 db AnimateAttack | dw Lattack1Monster149 | db 000,000,000,AnimateAttack | dw Lattack2Monster149 | db 000,000,000,AnimateAttack | dw Lattack3Monster149 | db 000,ShootProjectile,WaitImpactProjectile84008403RIdle1Monster150: equ $4000 + (208*128) + (128/2) - 128 8404RAttack1Monster150: equ $4000 + (208*128) + (160/2) - 128 8406LIdle1Monster150: equ $4000 + (208*128) + (144/2) - 128 8407LAttack1Monster150: equ $4000 + (208*128) + (176/2) - 128 8409Monster150Move:8410 db 04 8411 db 2 8412 dw RAttack1Monster1508413 dw LAttack1Monster1508414 8415 dw LAttack1Monster1508416 dw RAttack1Monster1508418Monster150Idle:8419 db 10 8420 db 2 8421 dw RIdle1Monster1508422 dw LIdle1Monster1508423 8424 dw LIdle1Monster1508425 dw RIdle1Monster1508427Monster150AttackPatternRight:8428 db AnimateAttack | dw Rattack1Monster150 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8429Monster150AttackPatternLeft:8430 db AnimateAttack | dw LAttack1Monster150 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8431Monster150AttackPatternLeftUp:8432 db AnimateAttack | dw LAttack1Monster150 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8433Monster150AttackPatternLeftDown:8434 db AnimateAttack | dw LAttack1Monster150 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8435Monster150AttackPatternRightUp:8436 db AnimateAttack | dw Rattack1Monster150 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8437Monster150AttackPatternRightDown:8438 db AnimateAttack | dw Rattack1Monster150 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack84408443RIdle1Monster151: equ $4000 + (232*128) + (128/2) - 128 8444RIdle2Monster151: equ $4000 + (232*128) + (144/2) - 128 8446LIdle1Monster151: equ $4000 + (232*128) + (176/2) - 128 8447LIdle2Monster151: equ $4000 + (232*128) + (160/2) - 128 8449Monster151Move:8450Monster151Idle:8451 db 06 8452 db 2 8453 dw RIdle1Monster1518454 dw RIdle2Monster1518455 8456 dw LIdle1Monster1518457 dw LIdle2Monster15184598462RIdle1Monster152: equ $4000 + (208*128) + (192/2) - 128 8463RIdle2Monster152: equ $4000 + (208*128) + (208/2) - 128 8465LIdle1Monster152: equ $4000 + (208*128) + (240/2) - 128 8466LIdle2Monster152: equ $4000 + (208*128) + (224/2) - 128 8468Monster152Move:8469 db 04 8470 db 2 8471 dw RIdle1Monster1528472 dw RIdle2Monster1528473 8474 dw LIdle1Monster1528475 dw LIdle2Monster1528477Monster152Idle:8478 db 08 8479 db 3 8480 dw RIdle1Monster1528481 dw RIdle1Monster1528482 dw RIdle2Monster1528483 8484 dw LIdle1Monster1528485 dw LIdle1Monster1528486 dw LIdle2Monster1528488Monster152AttackPatternRight:8489 db AnimateAttack | dw RIdle2Monster152 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8490Monster152AttackPatternLeft:8491 db AnimateAttack | dw LIdle2Monster152 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8492Monster152AttackPatternLeftUp:8493 db AnimateAttack | dw LIdle2Monster152 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8494Monster152AttackPatternLeftDown:8495 db AnimateAttack | dw LIdle2Monster152 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8496Monster152AttackPatternRightUp:8497 db AnimateAttack | dw RIdle2Monster152 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8498Monster152AttackPatternRightDown:8499 db AnimateAttack | dw RIdle2Monster152 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack85018504RIdle1Monster153: equ $4000 + (208*128) + (000/2) - 128 8505RIdle2Monster153: equ $4000 + (208*128) + (016/2) - 128 8506RIdle3Monster153: equ $4000 + (208*128) + (032/2) - 128 8507RAttack1Monster153: equ $4000 + (208*128) + (048/2) - 128 8509LIdle1Monster153: equ $4000 + (208*128) + (112/2) - 128 8510LIdle2Monster153: equ $4000 + (208*128) + (096/2) - 128 8511LIdle3Monster153: equ $4000 + (208*128) + (080/2) - 128 8512LAttack1Monster153: equ $4000 + (208*128) + (064/2) - 128 8514Monster153Move:8515Monster153Idle:8516 db 06 8517 db 4 8518 dw RIdle1Monster1538519 dw RIdle2Monster1538520 dw RIdle3Monster1538521 dw RIdle2Monster1538522 8523 dw LIdle1Monster1538524 dw LIdle2Monster1538525 dw LIdle3Monster1538526 dw LIdle2Monster1538528Monster153AttackPatternRight:8529 db AnimateAttack | dw Rattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw RIdle2Monster153 | db WaitImpactProjectile8530Monster153AttackPatternLeft:8531 db AnimateAttack | dw Lattack1Monster153 | db 000,ShootProjectile,000,000,000,AnimateAttack | dw LIdle2Monster153 | db WaitImpactProjectile85328535RIdle1Monster154: equ $4000 + (168*128) + (192/2) - 128 8536RIdle2Monster154: equ $4000 + (168*128) + (208/2) - 128 8538LIdle1Monster154: equ $4000 + (168*128) + (240/2) - 128 8539LIdle2Monster154: equ $4000 + (168*128) + (224/2) - 128 8541Monster154Move:8542Monster154Idle:8543 db 09 8544 db 2 8545 dw RIdle1Monster1548546 dw RIdle2Monster1548547 8548 dw LIdle1Monster1548549 dw LIdle2Monster15485518554RIdle1Monster155: equ $4000 + (232*128) + (192/2) - 128 8555RIdle2Monster155: equ $4000 + (232*128) + (208/2) - 128 8557LIdle1Monster155: equ $4000 + (232*128) + (240/2) - 128 8558LIdle2Monster155: equ $4000 + (232*128) + (224/2) - 128 8560Monster155Move:8561Monster155Idle:8562 db 08 8563 db 2 8564 dw RIdle1Monster1558565 dw RIdle2Monster1558566 8567 dw LIdle1Monster1558568 dw LIdle2Monster15585708573RIdle1Monster156: equ $4000 + (160*128) + (160/2) - 128 8574RIdle2Monster156: equ $4000 + (160*128) + (192/2) - 128 8576LIdle1Monster156: equ $4000 + (192*128) + (144/2) - 128 8577LIdle2Monster156: equ $4000 + (160*128) + (224/2) - 128 8579Monster156Move:8580Monster156Idle:8581 db 08 8582 db 2 8583 dw RIdle1Monster1568584 dw RIdle2Monster1568585 8586 dw LIdle1Monster1568587 dw LIdle2Monster15685898592RIdle1Monster157: equ $4000 + (136*128) + (112/2) - 128 8593RIdle2Monster157: equ $4000 + (136*128) + (128/2) - 128 8594RIdle3Monster157: equ $4000 + (136*128) + (144/2) - 128 8595RIdle4Monster157: equ $4000 + (136*128) + (160/2) - 128 8596RAttack1Monster157: equ $4000 + (136*128) + (176/2) - 128 8598LIdle1Monster157: equ $4000 + (216*128) + (064/2) - 128 8599LIdle2Monster157: equ $4000 + (216*128) + (048/2) - 128 8600LIdle3Monster157: equ $4000 + (216*128) + (032/2) - 128 8601LIdle4Monster157: equ $4000 + (216*128) + (016/2) - 128 8602LAttack1Monster157: equ $4000 + (216*128) + (000/2) - 128 8604Monster157Move:8605Monster157Idle:8606 db 04 8607 db 4 8608 dw RIdle1Monster1578609 dw RIdle2Monster1578610 dw RIdle4Monster1578611 dw RIdle3Monster1578612 8613 dw LIdle1Monster1578614 dw LIdle2Monster1578615 dw LIdle4Monster1578616 dw LIdle3Monster1578617Monster157AttackPatternRight:8618 db AnimateAttack | dw RAttack1Monster157 | db 000,003,ShowBeingHitSprite,007,000,InitiateAttack8619Monster157AttackPatternLeft:8620 db AnimateAttack | dw LAttack1Monster157 | db 000,007,ShowBeingHitSprite,003,000,InitiateAttack8621Monster157AttackPatternLeftUp:8622 db AnimateAttack | dw LAttack1Monster157 | db 000,008,ShowBeingHitSprite,004,000,InitiateAttack8623Monster157AttackPatternLeftDown:8624 db AnimateAttack | dw LAttack1Monster157 | db 000,006,ShowBeingHitSprite,002,000,InitiateAttack8625Monster157AttackPatternRightUp:8626 db AnimateAttack | dw RAttack1Monster157 | db 000,002,ShowBeingHitSprite,006,000,InitiateAttack8627Monster157AttackPatternRightDown:8628 db AnimateAttack | dw RAttack1Monster157 | db 000,004,ShowBeingHitSprite,008,000,InitiateAttack8630 8631 8632 86338636RIdle1Monster158: equ $4000 + (224*128) + (000/2) - 128 8637RIdle2Monster158: equ $4000 + (224*128) + (032/2) - 128 8638RIdle3Monster158: equ $4000 + (224*128) + (064/2) - 128 8639RAttack1Monster158: equ $4000 + (224*128) + (096/2) - 128 8641LIdle1Monster158: equ $4000 + (224*128) + (224/2) - 128 8642LIdle2Monster158: equ $4000 + (224*128) + (192/2) - 128 8643LIdle3Monster158: equ $4000 + (224*128) + (160/2) - 128 8644LAttack1Monster158: equ $4000 + (224*128) + (128/2) - 128 8646Monster158Move:8647Monster158Idle:8648 db 04 8649 db 4 8650 dw RIdle1Monster1588651 dw RIdle2Monster1588652 dw RIdle1Monster1588653 dw RIdle3Monster1588654 8655 dw LIdle1Monster1588656 dw LIdle2Monster1588657 dw LIdle1Monster1588658 dw LIdle3Monster1588659Monster158AttackPatternRight:8660 db AnimateAttack | dw RAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8661Monster158AttackPatternLeft:8662 db AnimateAttack | dw LAttack1Monster158 | db 000,ShootProjectile,WaitImpactProjectile8663 86658668RIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8669RAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8671LIdle1Monster159: equ $4000 + (176*128) + (224/2) - 128 8672LAttack1Monster159: equ $4000 + (176*128) + (240/2) - 128 8674Monster159Move:8675Monster159Idle:8676 db 10 8677 db 2 8678 dw RIdle1Monster1598679 dw RAttack1Monster1598680 8681 dw LIdle1Monster1598682 dw LAttack1Monster1598683Monster159AttackPatternRight:8684 db AnimateAttack | dw RAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8685Monster159AttackPatternLeft:8686 db AnimateAttack | dw LAttack1Monster159 | db 000,ShootProjectile,WaitImpactProjectile8687 86888691RIdle1Monster160: equ $4000 + (200*128) + (192/2) - 128 8692RIdle2Monster160: equ $4000 + (200*128) + (208/2) - 128 8694LIdle1Monster160: equ $4000 + (200*128) + (240/2) - 128 8695LIdle2Monster160: equ $4000 + (200*128) + (224/2) - 128 8697Monster160Move:8698Monster160Idle:8699 db 08 8700 db 2 8701 dw RIdle1Monster1608702 dw RIdle2Monster1608703 8704 dw LIdle1Monster1608705 dw LIdle2Monster16087078710RIdle1Monster161: equ $4000 + (184*128) + (064/2) - 128 8711RIdle2Monster161: equ $4000 + (184*128) + (080/2) - 128 8713LIdle1Monster161: equ $4000 + (184*128) + (112/2) - 128 8714LIdle2Monster161: equ $4000 + (184*128) + (096/2) - 128 8716Monster161Move:8717Monster161Idle:8718 db 08 8719 db 2 8720 dw RIdle1Monster1618721 dw RIdle2Monster1618722 8723 dw LIdle1Monster1618724 dw LIdle2Monster16187268729RIdle1Monster162: equ $4000 + (232*128) + (000/2) - 128 8730RIdle2Monster162: equ $4000 + (232*128) + (016/2) - 128 8732LIdle1Monster162: equ $4000 + (232*128) + (048/2) - 128 8733LIdle2Monster162: equ $4000 + (232*128) + (032/2) - 128 8735Monster162Move:8736Monster162Idle:8737 db 08 8738 db 2 8739 dw RIdle1Monster1628740 dw RIdle2Monster1628741 8742 dw LIdle1Monster1628743 dw LIdle2Monster16287458748RIdle1Monster163: equ $4000 + (208*128) + (064/2) - 128 8749RIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8750RIdle3Monster163: equ $4000 + (232*128) + (064/2) - 128 8751RIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8753LIdle1Monster163: equ $4000 + (232*128) + (064/2) - 128 8754LIdle2Monster163: equ $4000 + (208*128) + (080/2) - 128 8755LIdle3Monster163: equ $4000 + (208*128) + (064/2) - 128 8756LIdle4Monster163: equ $4000 + (232*128) + (080/2) - 128 8758Monster163Move:8759Monster163Idle:8760 db 05 8761 db 4 8762 dw RIdle1Monster1638763 dw RIdle2Monster1638764 dw RIdle3Monster1638765 dw RIdle4Monster1638766 8767 dw LIdle1Monster1638768 dw LIdle2Monster1638769 dw LIdle3Monster1638770 dw LIdle4Monster16387728775RIdle1Monster164: equ $4000 + (208*128) + (096/2) - 128 8776RIdle2Monster164: equ $4000 + (208*128) + (112/2) - 128 8777RIdle3Monster164: equ $4000 + (208*128) + (128/2) - 128 8778RAttack1Monster164: equ $4000 + (208*128) + (144/2) - 128 8780LIdle1Monster164: equ $4000 + (208*128) + (240/2) - 128 8781LIdle2Monster164: equ $4000 + (208*128) + (224/2) - 128 8782LIdle3Monster164: equ $4000 + (208*128) + (208/2) - 128 8783LAttack1Monster164: equ $4000 + (208*128) + (176/2) - 128 8785Monster164Move:8786Monster164Idle:8787 db 04 8788 db 4 8789 dw RIdle1Monster1648790 dw RIdle2Monster1648791 dw RIdle3Monster1648792 dw RIdle2Monster1648793 8794 dw LIdle1Monster1648795 dw LIdle2Monster1648796 dw LIdle3Monster1648797 dw LIdle2Monster1648799Monster164AttackPatternRight:8800 db AnimateAttack | dw RIdle1Monster164 | db 000,003,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,007,000,InitiateAttack8801Monster164AttackPatternRightUp:8802 db AnimateAttack | dw RIdle1Monster164 | db 000,002,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,006,000,InitiateAttack8803Monster164AttackPatternRightDown:8804 db AnimateAttack | dw RIdle1Monster164 | db 000,004,AnimateAttack | dw RAttack1Monster164 | db 128+32,000,ShowBeingHitSprite,000,000,AnimateAttack | dw RIdle1Monster164 | db 128+16,008,000,InitiateAttack8805Monster164AttackPatternLeft:8806 db AnimateAttack | dw LIdle1Monster164 | db 000,007,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,003,000,InitiateAttack8807Monster164AttackPatternLeftUp:8808 db AnimateAttack | dw LIdle1Monster164 | db 000,008,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,004,000,InitiateAttack8809Monster164AttackPatternLeftDown:8810 db AnimateAttack | dw LIdle1Monster164 | db 000,006,AnimateAttack | dw LAttack1Monster164 | db 128+32,DisplaceLeft,000,ShowBeingHitSprite,000,000,AnimateAttack | dw LIdle1Monster164 | db 128+16,DisplaceRight,002,000,InitiateAttack88128815RIdle1Monster165: equ $4000 + (000*128) + (000/2) - 128 8816RIdle2Monster165: equ $4000 + (000*128) + (032/2) - 128 8818LIdle1Monster165: equ $4000 + (000*128) + (096/2) - 128 8819LIdle2Monster165: equ $4000 + (000*128) + (064/2) - 128 8821Monster165Move:8822Monster165Idle:8823 db 08 8824 db 2 8825 dw RIdle1Monster1658826 dw RIdle2Monster1658827 8828 dw LIdle1Monster1658829 dw LIdle2Monster16588318834RIdle1Monster166: equ $4000 + (048*128) + (048/2) - 128 8835RIdle2Monster166: equ $4000 + (048*128) + (064/2) - 128 8836RIdle3Monster166: equ $4000 + (048*128) + (080/2) - 128 8837RIdle4Monster166: equ $4000 + (048*128) + (096/2) - 128 8839LIdle1Monster166: equ $4000 + (048*128) + (160/2) - 128 8840LIdle2Monster166: equ $4000 + (048*128) + (144/2) - 128 8841LIdle3Monster166: equ $4000 + (048*128) + (128/2) - 128 8842LIdle4Monster166: equ $4000 + (048*128) + (112/2) - 128 8844Monster166Move:8845Monster166Idle:8846 db 04 8847 db 6 8848 dw RIdle1Monster1668849 dw RIdle2Monster1668850 dw RIdle3Monster1668851 dw RIdle4Monster1668852 dw RIdle3Monster1668853 dw RIdle2Monster1668854 8855 dw LIdle1Monster1668856 dw LIdle2Monster1668857 dw LIdle3Monster1668858 dw LIdle4Monster1668859 dw LIdle3Monster1668860 dw LIdle2Monster16688628865RIdle1Monster167: equ $4000 + (024*128) + (000/2) - 128 8866RIdle2Monster167: equ $4000 + (024*128) + (016/2) - 128 8867RIdle3Monster167: equ $4000 + (024*128) + (032/2) - 128 8869LIdle1Monster167: equ $4000 + (024*128) + (080/2) - 128 8870LIdle2Monster167: equ $4000 + (024*128) + (064/2) - 128 8871LIdle3Monster167: equ $4000 + (024*128) + (048/2) - 128 8873Monster167Move:8874Monster167Idle:8875 db 03 8876 db 4 8877 dw RIdle3Monster1678878 dw RIdle2Monster1678879 dw RIdle1Monster1678880 dw RIdle2Monster1678881 8882 dw LIdle3Monster1678883 dw LIdle2Monster1678884 dw LIdle1Monster1678885 dw LIdle2Monster16788878890RIdle1Monster168: equ $4000 + (064*128) + (000/2) - 128 8891RIdle2Monster168: equ $4000 + (064*128) + (016/2) - 128 8892RIdle3Monster168: equ $4000 + (064*128) + (032/2) - 128 8893RIdle4Monster168: equ $4000 + (064*128) + (048/2) - 128 8894RIdle5Monster168: equ $4000 + (064*128) + (064/2) - 128 8895RAttack1Monster168: equ $4000 + (064*128) + (080/2) - 128 8896RAttack2Monster168: equ $4000 + (064*128) + (096/2) - 128 8898LIdle1Monster168: equ $4000 + (064*128) + (208/2) - 128 8899LIdle2Monster168: equ $4000 + (064*128) + (192/2) - 128 8900LIdle3Monster168: equ $4000 + (064*128) + (176/2) - 128 8901LIdle4Monster168: equ $4000 + (064*128) + (160/2) - 128 8902LIdle5Monster168: equ $4000 + (064*128) + (144/2) - 128 8903LAttack1Monster168: equ $4000 + (064*128) + (128/2) - 128 8904LAttack2Monster168: equ $4000 + (064*128) + (112/2) - 128 8906Monster168Move:8907Monster168Idle:8908 db 03 8909 db 5 8910 dw RIdle1Monster1688911 dw RIdle2Monster1688912 dw RIdle3Monster1688913 dw RIdle4Monster1688914 dw RIdle5Monster1688915 8916 dw LIdle1Monster1688917 dw LIdle2Monster1688918 dw LIdle3Monster1688919 dw LIdle4Monster1688920 dw LIdle5Monster1688921Monster168AttackPatternRight:8922 db AnimateAttack | dw RAttack1Monster168 | db 000,000,000,AnimateAttack | dw RAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8923Monster168AttackPatternLeft:8924 db AnimateAttack | dw LAttack1Monster168 | db 000,000,000,AnimateAttack | dw LAttack2Monster168 | db 000,ShootProjectile,WaitImpactProjectile8925 89268929RIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8930RIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8931RIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8932RIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8933RIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8934RIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8935RIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8936RIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8938LIdle1Monster169: equ $4000 + (088*128) + (000/2) - 128 8939LIdle2Monster169: equ $4000 + (088*128) + (016/2) - 128 8940LIdle3Monster169: equ $4000 + (088*128) + (032/2) - 128 8941LIdle4Monster169: equ $4000 + (088*128) + (048/2) - 128 8942LIdle5Monster169: equ $4000 + (088*128) + (064/2) - 128 8943LIdle6Monster169: equ $4000 + (088*128) + (080/2) - 128 8944LIdle7Monster169: equ $4000 + (088*128) + (096/2) - 128 8945LIdle8Monster169: equ $4000 + (088*128) + (112/2) - 128 8947Monster169Move:8948Monster169Idle:8949 db 01 8950 db 20 8951 dw RIdle1Monster1698952 dw RIdle1Monster1698953 dw RIdle1Monster1698954 dw RIdle1Monster1698955 dw RIdle1Monster1698956 dw RIdle2Monster1698957 dw RIdle3Monster1698958 dw RIdle4Monster1698959 dw RIdle5Monster1698960 dw RIdle6Monster1698961 dw RIdle7Monster1698962 dw RIdle8Monster1698963 dw RIdle8Monster1698964 dw RIdle7Monster1698965 dw RIdle6Monster1698966 dw RIdle5Monster1698967 dw RIdle4Monster1698968 dw RIdle3Monster1698969 dw RIdle2Monster1698970 dw RIdle1Monster1698971 8972 dw RIdle1Monster1698973 dw RIdle1Monster1698974 dw RIdle1Monster1698975 dw RIdle1Monster1698976 dw RIdle1Monster1698977 dw RIdle2Monster1698978 dw RIdle3Monster1698979 dw RIdle4Monster1698980 dw RIdle5Monster1698981 dw RIdle6Monster1698982 dw RIdle7Monster1698983 dw RIdle8Monster1698984 dw RIdle8Monster1698985 dw RIdle7Monster1698986 dw RIdle6Monster1698987 dw RIdle5Monster1698988 dw RIdle4Monster1698989 dw RIdle3Monster1698990 dw RIdle2Monster1698991 dw RIdle1Monster16989938996RIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 8997RIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 8999LIdle1Monster170: equ $4000 + (224*128) + (160/2) - 128 9000LIdle2Monster170: equ $4000 + (224*128) + (192/2) - 128 9002Monster170Move:9003Monster170Idle:9004 db 04 9005 db 2 9006 dw RIdle1Monster1709007 dw RIdle2Monster1709008 9009 dw LIdle1Monster1709010 dw LIdle2Monster17090129015RIdle1Monster171: equ $4000 + (096*128) + (000/2) - 128 9016RIdle2Monster171: equ $4000 + (096*128) + (016/2) - 128 9018LIdle1Monster171: equ $4000 + (096*128) + (032/2) - 128 9019LIdle2Monster171: equ $4000 + (064*128) + (240/2) - 128 9021Monster171Move:9022Monster171Idle:9023 db 06 9024 db 2 9025 dw RIdle1Monster1719026 dw RIdle2Monster1719027 9028 dw LIdle1Monster1719029 dw LIdle2Monster17190319034RIdle1Monster172: equ $4000 + (048*128) + (176/2) - 128 9035RIdle2Monster172: equ $4000 + (048*128) + (192/2) - 128 9037LIdle1Monster172: equ $4000 + (048*128) + (208/2) - 128 9038LIdle2Monster172: equ $4000 + (048*128) + (224/2) - 128 9040Monster172Move:9041Monster172Idle:9042 db 06 9043 db 2 9044 dw RIdle1Monster1729045 dw RIdle2Monster1729046 9047 dw LIdle1Monster1729048 dw LIdle2Monster17290509053RIdle1Monster173: equ $4000 + (144*128) + (160/2) - 128 9054RIdle2Monster173: equ $4000 + (144*128) + (176/2) - 128 9056LIdle1Monster173: equ $4000 + (144*128) + (208/2) - 128 9057LIdle2Monster173: equ $4000 + (144*128) + (192/2) - 128 9059Monster173Move:9060Monster173Idle:9061 db 06 9062 db 2 9063 dw RIdle1Monster1739064 dw RIdle2Monster1739065 9066 dw LIdle1Monster1739067 dw LIdle2Monster17390699072RIdle1Monster174: equ $4000 + (024*128) + (096/2) - 128 9073RIdle2Monster174: equ $4000 + (024*128) + (128/2) - 128 9074RIdle3Monster174: equ $4000 + (024*128) + (160/2) - 128 9075RAttack1Monster174: equ $4000 + (024*128) + (192/2) - 128 9076RAttack2Monster174: equ $4000 + (024*128) + (224/2) - 128 9078LIdle1Monster174: equ $4000 + (144*128) + (128/2) - 128 9079LIdle2Monster174: equ $4000 + (144*128) + (096/2) - 128 9080LIdle3Monster174: equ $4000 + (144*128) + (064/2) - 128 9081LAttack1Monster174: equ $4000 + (144*128) + (032/2) - 128 9082LAttack2Monster174: equ $4000 + (144*128) + (000/2) - 128 9084Monster174Move:9085Monster174Idle:9086 db 04 9087 db 4 9088 dw RIdle1Monster1749089 dw RIdle2Monster1749090 dw RIdle3Monster1749091 dw RIdle2Monster1749092 9093 dw LIdle1Monster1749094 dw LIdle2Monster1749095 dw LIdle3Monster1749096 dw LIdle2Monster1749098Monster174AttackPatternRight:9099 db AnimateAttack | dw RIdle1Monster174 | db 000,003,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,007,InitiateAttack9100Monster174AttackPatternRightUp:9101 db AnimateAttack | dw RIdle1Monster174 | db 000,008,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,004,InitiateAttack9102Monster174AttackPatternRightDown:9103 db AnimateAttack | dw RIdle1Monster174 | db 000,006,000,AnimateAttack | dw Rattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Rattack2Monster174 | db 000,AnimateAttack | dw Rattack1Monster174 | db 000,AnimateAttack | dw RIdle2Monster174 | db 000,002,InitiateAttack9105Monster174AttackPatternLeft:9106 db AnimateAttack | dw LIdle1Monster174 | db 000,007,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,003,InitiateAttack9107Monster174AttackPatternLeftUp:9108 db AnimateAttack | dw LIdle1Monster174 | db 000,002,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,006,InitiateAttack9109Monster174AttackPatternLeftDown:9110 db AnimateAttack | dw LIdle1Monster174 | db 000,004,000,AnimateAttack | dw Lattack1Monster174 | db 000,ShowBeingHitSprite,AnimateAttack | dw Lattack2Monster174 | db 000,AnimateAttack | dw Lattack1Monster174 | db 000,AnimateAttack | dw LIdle2Monster174 | db 000,008,InitiateAttack91129115RIdle1Monster175: equ $4000 + (088*128) + (128/2) - 128 9116RIdle2Monster175: equ $4000 + (088*128) + (160/2) - 128 9118LIdle1Monster175: equ $4000 + (088*128) + (192/2) - 128 9119LIdle2Monster175: equ $4000 + (088*128) + (224/2) - 128 9121Monster175Move:9122Monster175Idle:9123 db 06 9124 db 2 9125 dw RIdle1Monster1759126 dw RIdle2Monster1759127 9128 dw LIdle1Monster1759129 dw LIdle2Monster17591319134RIdle1Monster176: equ $4000 + (000*128) + (128/2) - 128 9135RIdle2Monster176: equ $4000 + (000*128) + (144/2) - 128 9136RIdle3Monster176: equ $4000 + (000*128) + (160/2) - 128 9137RAttack1Monster176: equ $4000 + (000*128) + (176/2) - 128 9139LIdle1Monster176: equ $4000 + (000*128) + (240/2) - 128 9140LIdle2Monster176: equ $4000 + (000*128) + (224/2) - 128 9141LIdle3Monster176: equ $4000 + (000*128) + (208/2) - 128 9142LAttack1Monster176: equ $4000 + (000*128) + (192/2) - 128 9144Monster176Move:9145Monster176Idle:9146 db 04 9147 db 4 9148 dw RIdle1Monster1769149 dw RIdle2Monster1769150 dw RIdle1Monster1769151 dw RIdle3Monster1769152 9153 dw LIdle1Monster1769154 dw LIdle2Monster1769155 dw LIdle1Monster1769156 dw LIdle3Monster1769158Monster176AttackPatternRight:9159 db AnimateAttack | dw RIdle1Monster176 | db 003,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,007,InitiateAttack9160Monster176AttackPatternRightUp:9161 db AnimateAttack | dw RIdle1Monster176 | db 008,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,004,InitiateAttack9162Monster176AttackPatternRightDown:9163 db AnimateAttack | dw RIdle1Monster176 | db 006,000,AnimateAttack | dw RAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster176 | db 000,002,InitiateAttack9165Monster176AttackPatternLeft:9166 db AnimateAttack | dw LIdle1Monster176 | db 007,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,003,InitiateAttack9167Monster176AttackPatternLeftUp:9168 db AnimateAttack | dw LIdle1Monster176 | db 002,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,006,InitiateAttack9169Monster176AttackPatternLeftDown:9170 db AnimateAttack | dw LIdle1Monster176 | db 004,000,AnimateAttack | dw LAttack1Monster176 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster176 | db 000,008,InitiateAttack91729175RIdle1Monster177: equ $4000 + (120*128) + (000/2) - 128 9176RIdle2Monster177: equ $4000 + (120*128) + (016/2) - 128 9178LIdle1Monster177: equ $4000 + (120*128) + (048/2) - 128 9179LIdle2Monster177: equ $4000 + (120*128) + (032/2) - 128 9181Monster177Move:9182Monster177Idle:9183 db 06 9184 db 2 9185 dw RIdle1Monster1779186 dw RIdle2Monster1779187 9188 dw LIdle1Monster1779189 dw LIdle2Monster17791919194RIdle1Monster178: equ $4000 + (064*128) + (224/2) - 128 9195RIdle2Monster178: equ $4000 + (064*128) + (240/2) - 128 9196RAttack1Monster178: equ $4000 + (184*128) + (128/2) - 128 9198LIdle1Monster178: equ $4000 + (184*128) + (176/2) - 128 9199LIdle2Monster178: equ $4000 + (184*128) + (160/2) - 128 9200LAttack1Monster178: equ $4000 + (184*128) + (144/2) - 128 9202Monster178Move:9203Monster178Idle:9204 db 04 9205 db 2 9206 dw RIdle1Monster1789207 dw RIdle2Monster1789208 9209 dw LIdle1Monster1789210 dw LIdle2Monster1789212Monster178AttackPatternRight:9213 db AnimateAttack | dw RIdle1Monster178 | db 003,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,007,InitiateAttack9214Monster178AttackPatternRightUp:9215 db AnimateAttack | dw RIdle1Monster178 | db 008,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,004,InitiateAttack9216Monster178AttackPatternRightDown:9217 db AnimateAttack | dw RIdle1Monster178 | db 006,000,AnimateAttack | dw RAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw RIdle2Monster178 | db 000,002,InitiateAttack9219Monster178AttackPatternLeft:9220 db AnimateAttack | dw LIdle1Monster178 | db 007,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,003,InitiateAttack9221Monster178AttackPatternLeftUp:9222 db AnimateAttack | dw LIdle1Monster178 | db 002,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,006,InitiateAttack9223Monster178AttackPatternLeftDown:9224 db AnimateAttack | dw LIdle1Monster178 | db 004,000,AnimateAttack | dw LAttack1Monster178 | db 000,ShowBeingHitSprite,000,AnimateAttack | dw LIdle2Monster178 | db 000,008,InitiateAttack92279230RIdle1Monster179: equ $4000 + (120*128) + (064/2) - 128 9231RIdle2Monster179: equ $4000 + (120*128) + (080/2) - 128 9233LIdle1Monster179: equ $4000 + (120*128) + (112/2) - 128 9234LIdle2Monster179: equ $4000 + (120*128) + (096/2) - 128 9236Monster179Move:9237Monster179Idle:9238 db 06 9239 db 2 9240 dw RIdle1Monster1799241 dw RIdle2Monster1799242 9243 dw LIdle1Monster1799244 dw LIdle2Monster17992469249RIdle1Monster180: equ $4000 + (184*128) + (000/2) - 128 9250RIdle2Monster180: equ $4000 + (184*128) + (016/2) - 128 9252LIdle1Monster180: equ $4000 + (184*128) + (048/2) - 128 9253LIdle2Monster180: equ $4000 + (184*128) + (032/2) - 128 9255Monster180Move:9256Monster180Idle:9257 db 06 9258 db 2 9259 dw RIdle1Monster1809260 dw RIdle2Monster1809261 9262 dw LIdle1Monster1809263 dw LIdle2Monster18092659268RIdle1Monster181: equ $4000 + (184*128) + (064/2) - 128 9269RIdle2Monster181: equ $4000 + (184*128) + (080/2) - 128 9271LIdle1Monster181: equ $4000 + (184*128) + (112/2) - 128 9272LIdle2Monster181: equ $4000 + (184*128) + (096/2) - 128 9274Monster181Move:9275Monster181Idle:9276 db 06 9277 db 2 9278 dw RIdle1Monster1819279 dw RIdle2Monster1819280 9281 dw LIdle1Monster1819282 dw LIdle2Monster18192849287RIdle1Monster182: equ $4000 + (080*128) + (000/2) - 128 9288RIdle2Monster182: equ $4000 + (080*128) + (048/2) - 128 9289RIdle3Monster182: equ $4000 + (080*128) + (096/2) - 128 9290RIdle4Monster182: equ $4000 + (080*128) + (144/2) - 128 9292LIdle1Monster182: equ $4000 + (216*128) + (144/2) - 128 9293LIdle2Monster182: equ $4000 + (216*128) + (096/2) - 128 9294LIdle3Monster182: equ $4000 + (216*128) + (048/2) - 128 9295LIdle4Monster182: equ $4000 + (216*128) + (000/2) - 128 9297Monster182Move:9298Monster182Idle:9299 db 03 9300 db 4 9301 dw RIdle1Monster1829302 dw RIdle2Monster1829303 dw RIdle3Monster1829304 dw RIdle4Monster1829305 9306 dw LIdle1Monster1829307 dw LIdle2Monster1829308 dw LIdle3Monster1829309 dw LIdle4Monster18293119314RIdle1Monster183: equ $4000 + (000*128) + (000/2) - 128 9315RIdle2Monster183: equ $4000 + (000*128) + (032/2) - 128 9316RIdle3Monster183: equ $4000 + (000*128) + (064/2) - 128 9317RIdle4Monster183: equ $4000 + (000*128) + (096/2) - 128 9318RIdle5Monster183: equ $4000 + (000*128) + (128/2) - 128 9319RIdle6Monster183: equ $4000 + (000*128) + (160/2) - 128 9320RAttack1Monster183: equ $4000 + (000*128) + (192/2) - 128 9322LIdle1Monster183: equ $4000 + (040*128) + (192/2) - 128 9323LIdle2Monster183: equ $4000 + (040*128) + (160/2) - 128 9324LIdle3Monster183: equ $4000 + (040*128) + (128/2) - 128 9325LIdle4Monster183: equ $4000 + (040*128) + (096/2) - 128 9326LIdle5Monster183: equ $4000 + (040*128) + (064/2) - 128 9327LIdle6Monster183: equ $4000 + (040*128) + (032/2) - 128 9328LAttack1Monster183: equ $4000 + (040*128) + (000/2) - 128 9330Monster183Move:9331Monster183Idle:9332 db 03 9333 db 8 9334 dw RIdle1Monster1839335 dw RIdle2Monster1839336 dw RIdle3Monster1839337 dw RIdle4Monster1839338 dw RIdle5Monster1839339 dw RIdle6Monster1839340 dw RIdle3Monster1839341 dw RIdle4Monster1839342 9343 dw LIdle1Monster1839344 dw LIdle2Monster1839345 dw LIdle3Monster1839346 dw LIdle4Monster1839347 dw LIdle5Monster1839348 dw LIdle6Monster1839349 dw LIdle3Monster1839350 dw LIdle4Monster1839352Monster183AttackPatternRight:9353 db AnimateAttack | dw Rattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile9354Monster183AttackPatternLeft:9355 db AnimateAttack | dw Lattack1Monster183 | db 000,ShootProjectile,000,WaitImpactProjectile93579360RIdle1Monster184: equ $4000 + (120*128) + (000/2) - 128 9361RIdle2Monster184: equ $4000 + (120*128) + (032/2) - 128 9362RIdle3Monster184: equ $4000 + (120*128) + (064/2) - 128 9364LIdle1Monster184: equ $4000 + (120*128) + (160/2) - 128 9365LIdle2Monster184: equ $4000 + (120*128) + (128/2) - 128 9366LIdle3Monster184: equ $4000 + (120*128) + (096/2) - 128 9368Monster184Move:9369Monster184Idle:9370 db 04 9371 db 4 9372 dw RIdle1Monster1849373 dw RIdle2Monster1849374 dw RIdle3Monster1849375 dw RIdle2Monster1849376 9377 dw LIdle1Monster1849378 dw LIdle2Monster1849379 dw LIdle3Monster1849380 dw LIdle2Monster18493829385RIdle1Monster185: equ $4000 + (168*128) + (000/2) - 128 9386RIdle2Monster185: equ $4000 + (168*128) + (032/2) - 128 9387RIdle3Monster185: equ $4000 + (168*128) + (064/2) - 128 9389LIdle1Monster185: equ $4000 + (168*128) + (160/2) - 128 9390LIdle2Monster185: equ $4000 + (168*128) + (128/2) - 128 9391LIdle3Monster185: equ $4000 + (168*128) + (096/2) - 128 9393Monster185Move:9394Monster185Idle:9395 db 04 9396 db 4 9397 dw RIdle1Monster1859398 dw RIdle2Monster1859399 dw RIdle3Monster1859400 dw RIdle2Monster1859401 9402 dw LIdle1Monster1859403 dw LIdle2Monster1859404 dw LIdle3Monster1859405 dw LIdle2Monster18594079410RIdle1Monster186: equ $4000 + (120*128) + (192/2) - 128 9411RIdle2Monster186: equ $4000 + (120*128) + (224/2) - 128 9412RIdle3Monster186: equ $4000 + (000*128) + (224/2) - 128 9414LIdle1Monster186: equ $4000 + (168*128) + (224/2) - 128 9415LIdle2Monster186: equ $4000 + (168*128) + (192/2) - 128 9416LIdle3Monster186: equ $4000 + (048*128) + (224/2) - 128 9418Monster186Move:9419Monster186Idle:9420 db 04 9421 db 4 9422 dw RIdle1Monster1869423 dw RIdle2Monster1869424 dw RIdle3Monster1869425 dw RIdle2Monster1869426 9427 dw LIdle1Monster1869428 dw LIdle2Monster1869429 dw LIdle3Monster1869430 dw LIdle2Monster18694329435RIdle1Monster187: equ $4000 + (208*128) + (000/2) - 128 9436RIdle2Monster187: equ $4000 + (208*128) + (032/2) - 128 9437RIdle3Monster187: equ $4000 + (208*128) + (064/2) - 128 9439LIdle1Monster187: equ $4000 + (208*128) + (160/2) - 128 9440LIdle2Monster187: equ $4000 + (208*128) + (128/2) - 128 9441LIdle3Monster187: equ $4000 + (208*128) + (096/2) - 128 9443Monster187Move:9444Monster187Idle:9445 db 03 9446 db 4 9447 dw RIdle1Monster1879448 dw RIdle2Monster1879449 dw RIdle3Monster1879450 dw RIdle2Monster1879451 9452 dw LIdle1Monster1879453 dw LIdle2Monster1879454 dw LIdle3Monster1879455 dw LIdle2Monster1879463MSXHeroes.asm 1052 ds $c000-$,$ff1053dephase10551058BattleMonsterSpriteSheet1Block: equ $551059phase $40001060 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1.SC5",7,208 * 128 1061 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet1Bottom48Lines.SC5",7,048 * 128 1062 ds $c000-$,$ff1063dephase10651068BattleMonsterSpriteSheet2Block: equ $571069phase $40001070 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2.SC5",7,208 * 128 1071 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet2Bottom48Lines.SC5",7,048 * 128 1072 ds $c000-$,$ff1073dephase10751078BattleMonsterSpriteSheet3Block: equ $591079phase $40001080 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3.SC5",7,208 * 128 1081 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet3Bottom48Lines.SC5",7,048 * 128 1082 ds $c000-$,$ff1083dephase10851088BattleMonsterSpriteSheet4Block: equ $5b1089phase $40001090 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4.SC5",7,208 * 128 1091 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet4Bottom48Lines.SC5",7,048 * 128 1092 ds $c000-$,$ff1093dephase10951098BattleMonsterSpriteSheet5Block: equ $5d1099phase $40001100 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5.SC5",7,208 * 128 1101 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet5Bottom48Lines.SC5",7,048 * 128 1102 ds $c000-$,$ff1103dephase11051108BattleMonsterSpriteSheet6Block: equ $5f1109phase $40001110 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6.SC5",7,208 * 128 1111 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet6Bottom48Lines.SC5",7,048 * 128 1112 ds $c000-$,$ff1113dephase11151118BattleMonsterSpriteSheet7Block: equ $611119phase $40001120 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7.SC5",7,208 * 128 1121 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet7Bottom48Lines.SC5",7,048 * 128 1122 ds $c000-$,$ff1123dephase11251128BattleMonsterSpriteSheet8Block: equ $631129phase $40001130 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8.SC5",7,208 * 128 1131 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet8Bottom48Lines.SC5",7,048 * 128 1132 ds $c000-$,$ff1133dephase11351138CampaignSelectBlock: equ $651139phase $40001140 incbin "..\grapx\TitleScreen\CampaignSelect.SC5",7,212 * 128 1141 ds $c000-$,$ff1142dephase11441147VictoryBlock: equ $671148GentleWinterMiniMapsBlock: equ $671149phase $40001150 incbin "..\grapx\Battlefield\Victory.SC5",7,207 * 128 1151 incbin "..\grapx\hud\GentleWinterMiniMaps.SC5",7,048 * 128 1152 ds $c000-$,$ff1153dephase11551158DefeatBlock: equ $691159phase $40001160 incbin "..\grapx\Battlefield\Defeat.SC5",7,207 * 128 1161 ds $c000-$,$ff1162dephase11641167RetreatBlock: equ $6b1168phase $40001169 incbin "..\grapx\Battlefield\Retreat.SC5",7,117 * 128 1170 ds $8000-$,$ff1171dephase11731176TitleScreenCodeblock: equ $6c1177phase $80001178 TitleScreenCode.asm1HandleTitleScreenCode:2 jp InsertMouseCode389ResetBuildings: db 1, 0, 0, 0, 0, 0, 0, 011InsertMousePalette:12 incbin"..\grapx\TitleScreen\InsertMousePalette.pl"13InsertMouseCode:14 ld a,(MOUSIDBuffer)15 inc a16 jp z,TitleScreenCode17 18 call screenoff20 ld a,421 ld (GameStatus),a 22 ld a,123 ld (activepage),a25 ld hl,ClearPage1And226 call DoCopy27 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady28 call docopy29 30 call SetVButton 31 call SetInsertMouseGraphics 32 call SetInsertMouseText33 xor a34 ld (activepage),a 35 call SetInsertMouseGraphics 36 call SetInsertMouseText37 ld hl,InsertMousePalette38 call SetPalette39 call SetSpatInCastle40 call SetInterruptHandler 42 call screenon43 .engine:44 halt45 ld a,(framecounter)46 inc a47 ld (framecounter),a48 call CheckMouse50 call SwapAndSetPage 51 call PopulateControls 5358 ld a,(NewPrContr)59 bit 5,a 60 jp nz,TitleScreenCode6268 69 ld ix,GenericButtonTable70 call CheckButtonInteractionControlsNotOnInt71 call .CheckButtonClicked 73 ld ix,GenericButtonTable74 call ScenarioSelectCode.SetGenericButtons 76 jp .engine78.CheckButtonClicked:79 ret nc80 pop af81 jp TitleScreenCode83SetInsertMouseText:84 call SetInsertMouseFontPage0Y212 86 ld b,093+00 87 ld c,031+00 88 ld hl,TextInsertMouse189 call SetText 91 ld b,080+00 92 ld c,152+00 93 ld hl,TextInsertMouse294 call SetText 95 ret97TextInsertMouse1:98 db "Mouse not detected",25599TextInsertMouse2:100 db " For optimal experience,",254101 db "please connect a mouse...",255103SetInsertMouseFontPage0Y212: 104 ld hl,$4000 + (000*128) + (000/2) - 128105 ld de,$0000 + (212*128) + (000/2) - 128106 ld bc,$0000 + (006*256) + (256/2)107 ld a,CastleOverviewFontBlock 108 jp CopyRamToVramCorrectedWithoutActivePageSetting 110SetVButton:111 ld hl,SetVButtonTable-2112 ld de,GenericButtonTable-2113 ld bc,2+(GenericButtonTableLenghtPerButton*01)114 ldir115 ret117SetVButtonTableGfxBlock: db PlayerStartTurnBlock118SetVButtonTableAmountOfButtons: db 01119SetVButtonTable: 120 db %1100 0011 | dw $4000 + (000*128) + (144/2) - 128 | dw $4000 + (019*128) + (144/2) - 128 | dw $4000 + (038*128) + (144/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 122.Button1Ytop: equ 146123.Button1YBottom: equ .Button1Ytop + 019124.Button1XLeft: equ 184125.Button1XRight: equ .Button1XLeft + 020128ClearPage1And2:129 db 000,000,000,000 130 db 000,000,000,000 131 db 000,001,000,002 132 db 13+13*16,000,$C0 134SetInsertMouseGraphics:135 ld hl,$4000 + (000*128) + (000/2) - 128136 ld de,$0000 + (024*128) + (048/2) - 128137 ld bc,$0000 + (148*256) + (162/2)138 ld a,ScrollBlock 139 call CopyRamToVramCorrectedCastleOverview 141 ld hl,$4000 + (139*128) + (044/2) - 128142 ld de,$0000 + ((024+53)*128) + ((020+58)/2) - 128143 ld bc,$0000 + (060*256) + (104/2)144 ld a,DefeatBlock 145 call CopyRamToVramCorrectedCastleOverview 147 ld hl,$4000 + (000*128) + (000/2) - 128148 ld de,$0000 + ((024+18)*128) + ((020+60)/2) - 128149 ld bc,$0000 + (112*256) + (106/2)150 ld a,InsertMouseBlock 151 jp CopyRamToVramCorrectedCastleOverview 153CheckMouse:154156 ld a,(framecounter)157 and 63158 ret nz160 ld a,(slot.page12rom) 161 out ($a8),a 162 ld a,Loaderblock 163 call block12 164 ld hl,CHMOUS165 jp (hl)168TitleScreenPalette:169 incbin"..\grapx\TitleScreen\TitleScreenPalette.pl"170TitleScreenCode:171 ld a,TitleSong172 ld (ChangeSong?),a173 174 call screenoff176 ld a,4177 ld (GameStatus),a 178 ld a,1179 ld (activepage),a180 call SetTitleScreenGraphics181 xor a182 ld (activepage),a 183 call SetTitleScreenGraphics184 ld hl,TitleScreenPalette185 call SetPalette186 call SetSpatInCastle187 call SetInterruptHandler 188 call SetTitleScreenButtons189 xor a190 ld (framecounter),a193 .engine:196199 halt200 ld a,(framecounter)201 inc a202 ld (framecounter),a203 call screenonAfter3Frames204 call CheckMouse205 call SwapAndSetPage 206 call PopulateControls 208214 215 ld ix,GenericButtonTable216 call CheckButtonInteractionControlsNotOnInt217 call .CheckButtonClicked 219 ld ix,GenericButtonTable220 call ScenarioSelectCode.SetGenericButtons 222 jp .engine224.CheckButtonClicked:225 ret nc227 ld a,b228 cp 1229 jp z,.CollectionPressed230 cp 2231 jp z,.OptionsPressed232 cp 3233 jp z,.LoadGamePressed234 cp 4235 jp z,.CampaignPressed236239 .NewGamePressed:240 pop af241 jp ScenarioSelectCode243 .CampaignPressed:244 pop af245 jp CampaignSelectCode247 .LoadGamePressed:248 pop af249 jp LoadGameSelectCode251 .OptionsPressed:252 ret254 .CollectionPressed:255 ret260SetTitleScreenButtons:261 ld hl,TitleScreenButtonTable-2262 ld de,GenericButtonTable-2263 ld bc,2+(GenericButtonTableLenghtPerButton*5)264 ldir265 ret267TitleScreenButton1Ytop: equ 128268TitleScreenButton1YBottom: equ TitleScreenButton1Ytop + 014269TitleScreenButton1XLeft: equ 094270TitleScreenButton1XRight: equ TitleScreenButton1XLeft + 070272TitleScreenButton2Ytop: equ 143273TitleScreenButton2YBottom: equ TitleScreenButton2Ytop + 016274TitleScreenButton2XLeft: equ 098275TitleScreenButton2XRight: equ TitleScreenButton2XLeft + 062277TitleScreenButton3Ytop: equ 159278TitleScreenButton3YBottom: equ TitleScreenButton3Ytop + 015279TitleScreenButton3XLeft: equ 092280TitleScreenButton3XRight: equ TitleScreenButton3XLeft + 072282TitleScreenButton4Ytop: equ 175283TitleScreenButton4YBottom: equ TitleScreenButton4Ytop + 016284TitleScreenButton4XLeft: equ 104285TitleScreenButton4XRight: equ TitleScreenButton4XLeft + 050287TitleScreenButton5Ytop: equ 191288TitleScreenButton5YBottom: equ TitleScreenButton5Ytop + 015289TitleScreenButton5XLeft: equ 094290TitleScreenButton5XRight: equ TitleScreenButton5XLeft + 068292TitleScreenButtonTableGfxBlock: db TitleScreenButtonsBlock293TitleScreenButtonTableAmountOfButtons: db 5294TitleScreenButtonTable: 295if promo?296 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop+10,TitleScreenButton1YBottom+10,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + ((TitleScreenButton1Ytop+10)*128) + (TitleScreenButton1XLeft/2) - 128 297 db %0100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop+10,TitleScreenButton2YBottom+10,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + ((TitleScreenButton2Ytop+10)*128) + (TitleScreenButton2XLeft/2) - 128 298 db %1100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128299 db %0100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128300 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128301else302 db %1100 0011 | dw $4000 + ((172+000)*128) + (000/2) - 128 | dw $4000 + ((172+000)*128) + (070/2) - 128 | dw $4000 + ((172+000)*128) + (140/2) - 128 | db TitleScreenButton1Ytop,TitleScreenButton1YBottom,TitleScreenButton1XLeft,TitleScreenButton1XRight | dw $0000 + (TitleScreenButton1Ytop*128) + (TitleScreenButton1XLeft/2) - 128 303 db %1100 0011 | dw $4000 + ((172+014)*128) + (000/2) - 128 | dw $4000 + ((172+014)*128) + (062/2) - 128 | dw $4000 + ((172+014)*128) + (124/2) - 128 | db TitleScreenButton2Ytop,TitleScreenButton2YBottom,TitleScreenButton2XLeft,TitleScreenButton2XRight | dw $0000 + (TitleScreenButton2Ytop*128) + (TitleScreenButton2XLeft/2) - 128 304 db %1100 0011 | dw $4000 + ((172+030)*128) + (000/2) - 128 | dw $4000 + ((172+030)*128) + (072/2) - 128 | dw $4000 + ((172+030)*128) + (144/2) - 128 | db TitleScreenButton3Ytop,TitleScreenButton3YBottom,TitleScreenButton3XLeft,TitleScreenButton3XRight | dw $0000 + (TitleScreenButton3Ytop*128) + (TitleScreenButton3XLeft/2) - 128305 db %1100 0011 | dw $4000 + ((172+045)*128) + (000/2) - 128 | dw $4000 + ((172+045)*128) + (050/2) - 128 | dw $4000 + ((172+045)*128) + (100/2) - 128 | db TitleScreenButton4Ytop,TitleScreenButton4YBottom,TitleScreenButton4XLeft,TitleScreenButton4XRight | dw $0000 + (TitleScreenButton4Ytop*128) + (TitleScreenButton4XLeft/2) - 128306if CollectionOptionAvailable?307 db %1100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128308else309 db %0100 0011 | dw $4000 + ((172+061)*128) + (000/2) - 128 | dw $4000 + ((172+061)*128) + (068/2) - 128 | dw $4000 + ((172+061)*128) + (136/2) - 128 | db TitleScreenButton5Ytop,TitleScreenButton5YBottom,TitleScreenButton5XLeft,TitleScreenButton5XRight | dw $0000 + (TitleScreenButton5Ytop*128) + (TitleScreenButton5XLeft/2) - 128310endif311endif313DeactivateAllHeroesAndCastles:314 ld a,255315 ld (pl1hero1y+HeroStatus),a316 ld (pl1hero2y+HeroStatus),a317 ld (pl1hero3y+HeroStatus),a318 ld (pl1hero4y+HeroStatus),a319 ld (pl1hero5y+HeroStatus),a320 ld (pl1hero6y+HeroStatus),a321 ld (pl1hero7y+HeroStatus),a322 ld (pl1hero8y+HeroStatus),a324 ld (pl2hero1y+HeroStatus),a325 ld (pl2hero2y+HeroStatus),a326 ld (pl2hero3y+HeroStatus),a327 ld (pl2hero4y+HeroStatus),a328 ld (pl2hero5y+HeroStatus),a329 ld (pl2hero6y+HeroStatus),a330 ld (pl2hero7y+HeroStatus),a331 ld (pl2hero8y+HeroStatus),a333 ld (pl3hero1y+HeroStatus),a334 ld (pl3hero2y+HeroStatus),a335 ld (pl3hero3y+HeroStatus),a336 ld (pl3hero4y+HeroStatus),a337 ld (pl3hero5y+HeroStatus),a338 ld (pl3hero6y+HeroStatus),a339 ld (pl3hero7y+HeroStatus),a340 ld (pl3hero8y+HeroStatus),a342 ld (pl4hero1y+HeroStatus),a343 ld (pl4hero2y+HeroStatus),a344 ld (pl4hero3y+HeroStatus),a345 ld (pl4hero4y+HeroStatus),a346 ld (pl4hero5y+HeroStatus),a347 ld (pl4hero6y+HeroStatus),a348 ld (pl4hero7y+HeroStatus),a349 ld (pl4hero8y+HeroStatus),a351 ld a,255352 ld (Castle1+CastlePlayer),a353 ld (Castle2+CastlePlayer),a354 ld (Castle3+CastlePlayer),a355 ld (Castle4+CastlePlayer),a356 ret358CampaignSelectCode:359 ld a,1360 ld (CampaignMode?),a362 call screenoff363 call DeactivateAllHeroesAndCastles 365 ld a,4366 ld (GameStatus),a 367 ld a,1368 ld (activepage),a369370 ld (ScenarioPage),a371 ld (ScenarioSelected),a372 373 xor a374 ld (LitScenarioButtonInWhichPage?),a375 ld (AmountOfMapsVisibleInCurrentPage),a376 ld hl,0377 ld (WorldPointer),hl378 379 ld a,2380 ld (Difficulty),a 381 ld a,255382 ld (player1StartingTown),a383 ld (player2StartingTown),a384 ld (player3StartingTown),a385 ld (player4StartingTown),a386 387 ld hl,TavernHeroesReset388 ld de,TavernHeroesTable389 ld bc,EndTavernHeroesReset-TavernHeroesReset390 ldir391 392 ld hl,ListOfUnlockedHeroes-1393 .FreeNextHero:394 inc hl395 ld a,(hl)396 or a397 jr z,.EndFreeAllUnlockedHeroes398 cp 255399 jr z,.FreeNextHero400 res 7,(hl)401 jr .FreeNextHero402 .EndFreeAllUnlockedHeroes:403 404 call SetCampaignSelectGraphics405 xor a406 ld (activepage),a 407 call SetCampaignSelectGraphics408 ld hl,InGamePalette409 call SetPalette410 call SetSpatInCastle411 call SetInterruptHandler 412 call SetCampaignSelectButtons413 call SetFontPage0Y212 415 call SetAmountOfCampaignButtons416 call SetAmountOfCampaignPageButtons417 call SetPage1ButtonConstantlyLit418 ld b,28419421 xor a422 ld (framecounter),a423 .engine:424 ld a,(framecounter)425 inc a426 ld (framecounter),a427428 call screenonAfter3Frames429 call CheckMouse430 call SwapAndSetPage 431 call PopulateControls 433439 440 ld ix,GenericButtonTable441 call CheckButtonInteractionControlsNotOnInt442 call CheckCampaignSelectButtonClicked 444 ld ix,GenericButtonTable445 call ScenarioSelectCode.SetGenericButtons 448 call SetNamesInCampaignButtons449 call SetVButtonsNextToNames450 call SetTextPage123ButtonsCampaign451 jp .engine453SetTextPage123ButtonsCampaign:454 ld a,(AmountOfCampaignsFinished)455 cp 11-1456 ret c458 ld b,035-6 459 ld c,176 460 ld hl,TextPage1461 call SetText 463 ld b,069-6 464 ld c,176 465 ld hl,TextPage2466 call SetText 468 ld a,(AmountOfCampaignsFinished)469 cp 21-1470 ret c472 ld b,103-6 473 ld c,176 474 ld hl,TextPage3475 call SetText 476 ret478SetVButtonsNextToNames:479 ld a,(AmountOfMapsVisibleInCurrentPage)480 cp 11481 jr c,.EndCheckMaxMapsInCurrentPageCheck482 ld a,10483 .EndCheckMaxMapsInCurrentPageCheck:485 ld b,a486 ld de,$0000 + (028*128) + (120/2) - 128488 .loop:489 ld hl,13*128490 add hl,de491 ex de,hl493 push de494 push bc495 call .SetVbutton496 pop bc497 pop de498 djnz .loop500 501 ld a,(AmountOfMapsVisibleInCurrentPage)502 cp 11503 jp c,.SetNoVbutton505 506 ld a,(ScenarioPage)507 dec a508510 ld b,0511 jr z,.PageFound512 dec a513 ld b,10514 jr z,.PageFound515 ld b,20516 .PageFound:517 ld a,(ScenarioSelected)519 520 ret522 .PageButtonConstantlyLit:523 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128525.SetVbutton:526 ld hl,$4000 + (123*128) + (000/2) - 128527 ld bc,$0000 + (013*256) + (014/2)528 ld a,ScenarioSelectButtonsBlock 529 jp CopyRamToVramCorrectedCastleOverview 531.SetNoVbutton:532 ld hl,$4000 + (123*128) + (014/2) - 128533 ld bc,$0000 + (013*256) + (014/2)534 ld a,ScenarioSelectButtonsBlock 535 jp CopyRamToVramCorrectedCastleOverview 546EndCampaignScreenEngine:547554565576587 call SetTempisr 588 call SetSpatInGame589 xor a590 ld (GameStatus),a 591 ret595601 602605 606612DoSetCampaignHeroesCastlesResources:613 ld a,(ScenarioSelected)614 ld d,0615 ld e,a616 ld hl,CampaignInfoLenght617 call MultiplyHlWithDE 618 ld de,Campaign01619 add hl,de621 622 ld de,player1StartingTown623 ld bc,4624 ldir625 626 ld de,TavernHeroesPlayer1627 ld bc,10628 ldir629 630 ld de,amountofplayers631 ld bc,5632 ldir633 634 ld de,ResourcesPlayer1635 ld bc,10636 ldir637 638 ld de,Castle1+CastlePlayer639 ld bc,1640 ldir641 ld de,Castle2+CastlePlayer642 ld bc,1643 ldir644 ld de,Castle3+CastlePlayer645 ld bc,1646 ldir647 ld de,Castle4+CastlePlayer648 ld bc,1649 ldir650 ld de,DaysToCompleteCampaign651 ld bc,1652 ldir653 ld de,CampaignText 654 ld bc,CampaignTextLenght655 ldir656 657 ld de,pl1hero1y658 ld bc,lenghtherotable659 ldir660 ld de,pl2hero1y661 ld bc,lenghtherotable662 ldir663 ld de,pl3hero1y664 ld bc,lenghtherotable665 ldir666 ld de,pl4hero1y667 ld bc,lenghtherotable668 ldir670 call ScenarioSelectCode.SetStartingTown 672 673 ld ix,pl1hero1y674 ld iy,Castle1675 call .SetYX 676 ld ix,pl2hero1y677 ld iy,Castle2678 call .SetYX 679 ld ix,pl3hero1y680 ld iy,Castle3681 call .SetYX 682 ld ix,pl4hero1y683 ld iy,Castle4684 call .SetYX 685 ret687 .SetYX:688 ld a,(ix+HeroStatus) 689 cp 255690 ret z692 ld a,(iy+CastleY) 693 dec a694 ld (ix+HeroY),a 695 ld a,(iy+Castlex) 696 inc a697 inc a698 ld (ix+HeroX),a 699 ret716CheckCampaignSelectButtonClicked:717 ret nc719 ld a,b720 cp 6721 jp nc,.ScenarioPressed722 cp 3723 jp nc,.Page123Pressed724 cp 2725 jr z,.BeginPressed726729 .BackPressed:730 pop af731 jp TitleScreenCode733 .BeginPressed:734 ld hl,(WorldPointer)735 ld a,h736 or l737 ret z739 pop af740 jp EndCampaignScreenEngine742 .ScenarioPressed:743 ld a,(ScenarioPage)744 ld (LitScenarioButtonInWhichPage?),a745 ld a,15746 sub b747 ld (ScenarioSelected),a749 .LightCurrentActiveScenarioButton:750 751 ld a,(AmountOfMapsVisibleInCurrentPage)752 cp 11753 jr c,.EndCheckMaxMapsInCurrentPageCheck754 ld a,10755 .EndCheckMaxMapsInCurrentPageCheck:757 ld d,0758 ld e,a759 ld hl,GenericButtonTableLenghtPerButton760 call MultiplyHlWithDE 761 push hl762 pop bc764 ld hl,CampaignSelectButtonTable765 ld de,GenericButtonTable766767 ldir769 770 ld a,(ScenarioSelected)771 ld d,0772 ld e,a773 ld hl,GenericButtonTableLenghtPerButton774 call MultiplyHlWithDE 775 ld de,GenericButtonTable+1776 add hl,de777 ex de,hl778 ld hl,.ScenarioButtonConstantlyLit779 ld bc,4780 ldir782 783 ld a,(ScenarioPage)784 dec a785 ld b,0786 jr z,.PageFound787 dec a788 ld b,10789 jr z,.PageFound790 ld b,20791 .PageFound:792 ld a,(ScenarioSelected)793 add a,b 794 ld d,0795 ld e,a796 ld hl,LenghtMapData797 call MultiplyHlWithDE 798 ld de,GentleMaps799 add hl,de800 ld (WorldPointer),hl801 802 803 call .SetSelectedCampaignNameRightTopOfScreen804807 .SetSelectedCampaignNameRightTopOfScreen:808 call ClearCampaignNameAndDescriptionRightTopOfScreen809 ld b,152 810 ld c,021 812 ld hl,(WorldPointer)813 ld de,ScenarioNameAddress+4814 add hl,de816 call SetText 818 819 ld b,149 820 ld c,036 821 inc hl822 call SetText 823 jp SwapAndSetPage 825 .ScenarioButtonConstantlyLit:826 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 128827 .ScenarioButtonNormallyLit:828 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 128842 .Page123Pressed:843 ld b,3844 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+1845 jr z,.ScenarioPageFound846 cp 4847 ld b,2848 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+1849 jr z,.ScenarioPageFound850 ld b,1851 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+1852 .ScenarioPageFound:853 ld a,(ScenarioPage)854 cp b855 ret z856 ld a,b857 ld (ScenarioPage),a859 push de860 call SetAmountOfCampaignPageButtons861 pop de862 ld hl,.PageButtonConstantlyLit863 ld bc,4864 ldir866 867 ld hl,CampaignSelectButtonTable-2868 ld de,GenericButtonTable-2869 ld bc,2+(GenericButtonTableLenghtPerButton*10)870 ldir872 ld a,(ScenarioPage)873 ld b,a874 ld a,(LitScenarioButtonInWhichPage?)875 cp b876 call z,.LightCurrentActiveScenarioButton877 jp SetAmountOfCampaignButtons879 .PageButtonConstantlyLit:880 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 128882screenonAfter3Frames:883 ld a,(framecounter)884 and 3885 ret nz886 jp screenon888LoadGameSelectCode:889 call screenoff890LoadGameSelectCodeSkipScreenOff:891 ld a,4892 ld (GameStatus),a 893 ld a,1894 ld (activepage),a 895 call SetLoadGameGraphics896 call SetNamesInLoadGameButtons897 xor a898 ld (activepage),a899 ld a,255900 ld (SaveGameSelected),a 901 call SetLoadGameGraphics902 call SetNamesInLoadGameButtons904 ld hl,InGamePalette905 call SetPalette906 call SetSpatInCastle907 call SetInterruptHandler 909 call SetLoadGameSelectButtons911 call SetFontPage0Y212 913917 xor a918 ld (framecounter),a920 .engine:921 ld a,(framecounter)922 inc a923 ld (framecounter),a924925 call screenonAfter3Frames926927 call SwapAndSetPage 928 call PopulateControls 930 931 ld ix,GenericButtonTable932 call CheckButtonInteractionControlsNotOnInt933 call .CheckSaveGameButtonClicked 935 ld ix,GenericButtonTable936 call ScenarioSelectCode.SetGenericButtons 939 call SetNamesInLoadGameButtons940 jp .engine942 .EndTitleScreenEngine:943949 call SetTempisr 950 call SetSpatInGame951 xor a952 ld (GameStatus),a 953 ret955.CheckSaveGameButtonClicked: 956 ret nc958 ld a,b959 cp 3960 jp z,.LoadButtonPressed961 cp 2962 jp z,.BackButtonPressed963 cp 1964 jp z,.DeleteButtonPressed966 .SaveGamePressed:967 ld a,13 968 sub b969 add a,a970 add a,a 971 di972 ld ($6100),a 974 ld a,($4000+HeroMove)975 cp 255976 ret z978 ld a,13 979 sub b980 ld (SaveGameSelected),a 982 call SetLoadGameSelectButtons 984 985 ld a,(SaveGameSelected)986 ld d,0987 ld e,a988 ld hl,GenericButtonTableLenghtPerButton989 call MultiplyHlWithDE 990 ld de,GenericButtonTable+1991 add hl,de992 ex de,hl993 ld hl,.ScenarioButtonConstantlyLit994 ld bc,4995 ldir996 ret998 .LoadButtonPressed:999 ld a,(SaveGameSelected) 1000 cp 2551001 ret z1003 pop af1004 ld a,11005 ld (LoadSaveData?),a1007 ld a,(SaveGameSelected) 1008 add a,a1009 add a,a 1010 di1011 ld ($6100),a 1012 ld hl,(WorldPointer-StartSaveGameData+$4000)1013 ld (WorldPointer),hl1014 jp .EndTitleScreenEngine1016 .BackButtonPressed:1017 pop af1018 jp TitleScreenCode1019 ret1021 .DeleteButtonPressed:1022 ld a,(SaveGameSelected) 1023 cp 2551024 ret z1025 pop af1026 jp ConfirmDeleteFileCOde1028 .SetDifficulty:1029 ld a,b1030 ld (Difficulty),a1031 call SetDifficultyButtonConstantlyLit1032 ret1034 ld a,%1100 00111035 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 1036 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 1038 .ScenarioButtonConstantlyLit:1039 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1281040 .ScenarioButtonNormallyLit:1041 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1281052DeleteFileWindowDX: equ 030 + 261053DeleteFileWindowDY: equ 0631054DeleteFileWindowNX: equ 1441055DeleteFileWindowNY: equ 0511056ConfirmDeleteFileCOde:1057 call SetConfirmDeleteFileButtons1058 call SetConfirmDeleteFileGraphics 1059 call SetConfirmDeleteFileGraphics2 1060 call SwapAndSetPage 1061 call SetConfirmDeleteFileGraphics 1062 call SetConfirmDeleteFileGraphics2 1064 .engine: 1065 call SwapAndSetPage 1066 call PopulateControls 10681073 ld a,(NewPrContr)1074 bit 5,a 1075 jp nz,LoadGameSelectCodeSkipScreenOff1077 ld ix,GenericButtonTable1078 call CheckButtonInteractionControlsNotOnInt1080 call .CheckButtonClicked 1082 ld ix,GenericButtonTable1083 call ScenarioSelectCode.SetGenericButtons 1085 call .CheckClickOutOfWindow 1087 halt1088 jp .engine1090 .CheckClickOutOfWindow:1091 ld a,(NewPrContr)1092 bit 4,a 1093 ret z1095 ld a,(spat+0) 1096 cp DeleteFileWindowDY1097 jr c,.NotOutOfWindow1098 cp DeleteFileWindowDY+DeleteFileWindowNY1099 jr nc,.NotOutOfWindow1100 1101 ld a,(spat+1) 1102 add a,061103 cp DeleteFileWindowDX1104 jr c,.NotOutOfWindow1105 cp DeleteFileWindowDX+DeleteFileWindowNX1106 ret c1107 .NotOutOfWindow:1108 pop af1109 jp LoadGameSelectCodeSkipScreenOff1112 .CheckButtonClicked:1113 ret nc1114 pop af 1115 ld a,b1116 cp 1 1117 jp z,LoadGameSelectCodeSkipScreenOff1118 1121 ld a,(SaveGameSelected) 1122 add a,a1123 add a,a 1124 di1125 ld ($6100),a 1127 1128 ld hl,$40001129 call SectorErase 1130 call CheckEraseDonePage11131 jp LoadGameSelectCodeSkipScreenOff1133CheckEraseDonePage1:1134 ld hl,4000H 1135 ld a,0FFH 1136 .Erase_Wait:1137 cp (hl) 1138 ret z 1139 jr .Erase_Wait 1141SetConfirmDeleteFileButtons:1142 ld hl,SetConfirmDeleteFileuButtonTable-21143 ld de,GenericButtonTable-21144 ld bc,2+(GenericButtonTableLenghtPerButton*02)1145 ldir1146 ret1148SetConfirmDeleteFileuButtonTableGfxBlock: db RetreatBlock1149SetConfirmDeleteFileuButtonTableAmountOfButtons: db 021150SetConfirmDeleteFileuButtonTable: 1152 db %1100 0011 | dw $4000 + (000*128) + (228/2) - 128 | dw $4000 + (019*128) + (228/2) - 128 | dw $4000 + (038*128) + (228/2) - 128 | db .Button1Ytop,.Button1YBottom,.Button1XLeft,.Button1XRight | dw $0000 + (.Button1Ytop*128) + (.Button1XLeft/2) - 128 1153 1154 db %1100 0011 | dw $4000 + (057*128) + (228/2) - 128 | dw $4000 + (075*128) + (228/2) - 128 | dw $4000 + (093*128) + (228/2) - 128 | db .Button2Ytop,.Button2YBottom,.Button2XLeft,.Button2XRight | dw $0000 + (.Button2Ytop*128) + (.Button2XLeft/2) - 128 1156.Button1Ytop: equ 0881157.Button1YBottom: equ .Button1Ytop + 0191158.Button1XLeft: equ 048 + 261159.Button1XRight: equ .Button1XLeft + 0201161.Button2Ytop: equ 0891162.Button2YBottom: equ .Button2Ytop + 0181163.Button2XLeft: equ 048+090 + 261164.Button2XRight: equ .Button2XLeft + 0201166SetConfirmDeleteFileGraphics:1167 ld hl,$4000 + (050*128) + (000/2) - 1281168 ld de,$0000 + (063*128) + (056/2) - 1281169 ld bc,$0000 + (051*256) + (144/2)1170 ld a,DiskMenuBlock 1171 jp CopyRamToVramCorrectedCastleOverview 1173SetConfirmDeleteFileGraphics2:1174 ld hl,$4000 + (000*128) + (144/2) - 1281175 ld de,$0000 + (071*128) + (106/2) - 1281176 ld bc,$0000 + (005*256) + (040/2)1177 ld a,DiskMenuBlock 1178 jp CopyRamToVramCorrectedCastleOverview 11931194SetNamesInLoadGameButtons:1195 ld b,10 1196 ld a,000 1197 ld c,050+(0*13) 1198 .loop:1199 push af1200 push bc1201 call .SetName1202 pop bc1203 ld a,c1204 add a,131205 ld c,a 1206 pop af1207 inc a 1208 djnz .loop1209 ei1210 ret1212 .SetName:1213 add a,a1214 add a,a 1215 di1216 ld ($6100),a 1218 ld a,(amountofplayers-StartSaveGameData+$4000)1219 ld d,a 1220 ld hl,(WorldPointer-StartSaveGameData+$4000)1222 ld a,($4000+HeroMove)1223 cp 2551224 ret z1226 ld a,(slot.page12rom) 1227 out ($a8),a 1228 ld a,Loaderblock 1229 call block12 1231 push de1233 ld de,ScenarioNameAddress+2 1234 add hl,de1235 push bc1236 ld b,211 1237 call SetText 1238 pop bc1240 inc hl 1241 push bc1242 ld b,025 1243 call SetText 1244 pop bc1246 pop de1248 ld h,000 1249 ld l,d 1250 push bc1251 ld b,190 1252 call SetNumber16BitCastle1254 ld a,(DayOfMonthTientallen)1255 ld hl,101256 ld d,01257 ld e,a1258 call MultiplyHlWithDE 1259 ld a,(DayOfMonthEenheden)1260 ld e,a1261 ld d,01262 add hl,de1264 pop bc1265 push bc1266 ld b,124 1267 call SetNumber16BitCastle1269 ld hl,.TextSlash1270 pop bc1271 push bc1272 ld a,(PutLetter+dx)1273 ld b,a 1274 call SetText 1276 ld a,(MonthTientallen)1277 ld hl,101278 ld d,01279 ld e,a1280 call MultiplyHlWithDE 1281 ld a,(MonthEenheden)1282 ld e,a1283 ld d,01284 add hl,de1285 pop bc1286 push bc1287 ld a,(PutLetter+dx)1288 ld b,a 1289 call SetNumber16BitCastle1291 ld hl,.TextSlash1292 pop bc1293 push bc1294 ld a,(PutLetter+dx)1295 ld b,a 1296 call SetText 1298 ld a,(YearTientallen)1299 ld hl,101300 ld d,01301 ld e,a1302 call MultiplyHlWithDE 1303 ld a,(YearEenheden)1304 ld e,a1305 ld d,01306 add hl,de1307 ld de,1980 1308 add hl,de1310 pop bc1311 push bc1312 ld a,(PutLetter+dx)1313 ld b,a 1314 call SetNumber16BitCastle1315 pop bc 1316 ret1318.TextSlash: db "/",2551325SetLoadGameSelectButtons:1326 ld hl,LoadGameSelectButtonTable-21327 ld de,GenericButtonTable-21328 ld bc,2+(GenericButtonTableLenghtPerButton*13)1329 ldir1330 ret1332 1333LoadGameSelectButton1Ytop: equ 047 + (0*13)1334LoadGameSelectButton1YBottom: equ LoadGameSelectButton1Ytop + 0111335LoadGameSelectButton1XLeft: equ 0221336LoadGameSelectButton1XRight: equ LoadGameSelectButton1XLeft + 0961338LoadGameSelectButton2Ytop: equ 047 + (1*13)1339LoadGameSelectButton2YBottom: equ LoadGameSelectButton2Ytop + 0111340LoadGameSelectButton2XLeft: equ 0221341LoadGameSelectButton2XRight: equ LoadGameSelectButton2XLeft + 0961343LoadGameSelectButton3Ytop: equ 047 + (2*13)1344LoadGameSelectButton3YBottom: equ LoadGameSelectButton3Ytop + 0111345LoadGameSelectButton3XLeft: equ 0221346LoadGameSelectButton3XRight: equ LoadGameSelectButton3XLeft + 0961348LoadGameSelectButton4Ytop: equ 047 + (3*13)1349LoadGameSelectButton4YBottom: equ LoadGameSelectButton4Ytop + 0111350LoadGameSelectButton4XLeft: equ 0221351LoadGameSelectButton4XRight: equ LoadGameSelectButton4XLeft + 0961353LoadGameSelectButton5Ytop: equ 047 + (4*13)1354LoadGameSelectButton5YBottom: equ LoadGameSelectButton5Ytop + 0111355LoadGameSelectButton5XLeft: equ 0221356LoadGameSelectButton5XRight: equ LoadGameSelectButton5XLeft + 0961358LoadGameSelectButton6Ytop: equ 047 + (5*13)1359LoadGameSelectButton6YBottom: equ LoadGameSelectButton6Ytop + 0111360LoadGameSelectButton6XLeft: equ 0221361LoadGameSelectButton6XRight: equ LoadGameSelectButton6XLeft + 0961363LoadGameSelectButton7Ytop: equ 047 + (6*13)1364LoadGameSelectButton7YBottom: equ LoadGameSelectButton7Ytop + 0111365LoadGameSelectButton7XLeft: equ 0221366LoadGameSelectButton7XRight: equ LoadGameSelectButton7XLeft + 0961368LoadGameSelectButton8Ytop: equ 047 + (7*13)1369LoadGameSelectButton8YBottom: equ LoadGameSelectButton8Ytop + 0111370LoadGameSelectButton8XLeft: equ 0221371LoadGameSelectButton8XRight: equ LoadGameSelectButton8XLeft + 0961373LoadGameSelectButton9Ytop: equ 047 + (8*13)1374LoadGameSelectButton9YBottom: equ LoadGameSelectButton9Ytop + 0111375LoadGameSelectButton9XLeft: equ 0221376LoadGameSelectButton9XRight: equ LoadGameSelectButton9XLeft + 0961378LoadGameSelectButton10Ytop: equ 047 + (9*13)1379LoadGameSelectButton10YBottom: equ LoadGameSelectButton10Ytop + 0111380LoadGameSelectButton10XLeft: equ 0221381LoadGameSelectButton10XRight: equ LoadGameSelectButton10XLeft + 0961383 1384LoadGameSelectButton11Ytop: equ 1911385LoadGameSelectButton11YBottom: equ LoadGameSelectButton11Ytop + 0151386LoadGameSelectButton11XLeft: equ 1061387LoadGameSelectButton11XRight: equ LoadGameSelectButton11XLeft + 0181389LoadGameSelectButton12Ytop: equ 1911390LoadGameSelectButton12YBottom: equ LoadGameSelectButton12Ytop + 0151391LoadGameSelectButton12XLeft: equ 1321392LoadGameSelectButton12XRight: equ LoadGameSelectButton12XLeft + 0181394LoadGameSelectButton13Ytop: equ 1911395LoadGameSelectButton13YBottom: equ LoadGameSelectButton13Ytop + 0151396LoadGameSelectButton13XLeft: equ 2161397LoadGameSelectButton13XRight: equ LoadGameSelectButton13XLeft + 0221399LoadGameSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock 1400LoadGameSelectButtonTableAmountOfButtons: db 131401LoadGameSelectButtonTable: 1403 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton1Ytop,LoadGameSelectButton1YBottom,LoadGameSelectButton1XLeft,LoadGameSelectButton1XRight | dw $0000 + (LoadGameSelectButton1Ytop*128) + (LoadGameSelectButton1XLeft/2) - 128 1404 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton2Ytop,LoadGameSelectButton2YBottom,LoadGameSelectButton2XLeft,LoadGameSelectButton2XRight | dw $0000 + (LoadGameSelectButton2Ytop*128) + (LoadGameSelectButton2XLeft/2) - 128 1405 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton3Ytop,LoadGameSelectButton3YBottom,LoadGameSelectButton3XLeft,LoadGameSelectButton3XRight | dw $0000 + (LoadGameSelectButton3Ytop*128) + (LoadGameSelectButton3XLeft/2) - 1281406 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton4Ytop,LoadGameSelectButton4YBottom,LoadGameSelectButton4XLeft,LoadGameSelectButton4XRight | dw $0000 + (LoadGameSelectButton4Ytop*128) + (LoadGameSelectButton4XLeft/2) - 1281407 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton5Ytop,LoadGameSelectButton5YBottom,LoadGameSelectButton5XLeft,LoadGameSelectButton5XRight | dw $0000 + (LoadGameSelectButton5Ytop*128) + (LoadGameSelectButton5XLeft/2) - 1281408 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton6Ytop,LoadGameSelectButton6YBottom,LoadGameSelectButton6XLeft,LoadGameSelectButton6XRight | dw $0000 + (LoadGameSelectButton6Ytop*128) + (LoadGameSelectButton6XLeft/2) - 1281409 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton7Ytop,LoadGameSelectButton7YBottom,LoadGameSelectButton7XLeft,LoadGameSelectButton7XRight | dw $0000 + (LoadGameSelectButton7Ytop*128) + (LoadGameSelectButton7XLeft/2) - 1281410 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton8Ytop,LoadGameSelectButton8YBottom,LoadGameSelectButton8XLeft,LoadGameSelectButton8XRight | dw $0000 + (LoadGameSelectButton8Ytop*128) + (LoadGameSelectButton8XLeft/2) - 1281411 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton9Ytop,LoadGameSelectButton9YBottom,LoadGameSelectButton9XLeft,LoadGameSelectButton9XRight | dw $0000 + (LoadGameSelectButton9Ytop*128) + (LoadGameSelectButton9XLeft/2) - 1281412 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db LoadGameSelectButton10Ytop,LoadGameSelectButton10YBottom,LoadGameSelectButton10XLeft,LoadGameSelectButton10XRight | dw $0000 + (LoadGameSelectButton10Ytop*128) + (LoadGameSelectButton10XLeft/2) - 1281414 1415 db %1100 0011 | dw $4000 + (122*128) + (028/2) - 128 | dw $4000 + (122*128) + (046/2) - 128 | dw $4000 + (122*128) + (064/2) - 128 | db LoadGameSelectButton11Ytop,LoadGameSelectButton11YBottom,LoadGameSelectButton11XLeft,LoadGameSelectButton11XRight | dw $0000 + (LoadGameSelectButton11Ytop*128) + (LoadGameSelectButton11XLeft/2) - 1281416 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db LoadGameSelectButton12Ytop,LoadGameSelectButton12YBottom,LoadGameSelectButton12XLeft,LoadGameSelectButton12XRight | dw $0000 + (LoadGameSelectButton12Ytop*128) + (LoadGameSelectButton12XLeft/2) - 1281417 db %1100 0011 | dw $4000 + (137*128) + (000/2) - 128 | dw $4000 + (137*128) + (022/2) - 128 | dw $4000 + (137*128) + (044/2) - 128 | db LoadGameSelectButton13Ytop,LoadGameSelectButton13YBottom,LoadGameSelectButton13XLeft,LoadGameSelectButton13XRight | dw $0000 + (LoadGameSelectButton13Ytop*128) + (LoadGameSelectButton13XLeft/2) - 1281419ScenarioSelectCode:1420 xor a1421 ld (CampaignMode?),a1423 call screenoff1424 call DeactivateAllHeroesAndCastles 1426 ld a,41427 ld (GameStatus),a 1428 ld a,11429 ld (activepage),a14301431 ld (ScenarioPage),a1432 ld (ScenarioSelected),a1433 ld a,21434 ld (Difficulty),a 1435 ld a,2551436 ld (player1StartingTown),a1437 ld (player2StartingTown),a1438 ld (player3StartingTown),a1439 ld (player4StartingTown),a1440 1441 ld hl,TavernHeroesReset1442 ld de,TavernHeroesTable1443 ld bc,EndTavernHeroesReset-TavernHeroesReset1444 ldir1445 1446 ld hl,ListOfUnlockedHeroes-11447 .FreeNextHero:1448 inc hl1449 ld a,(hl)1450 or a1451 jr z,.EndFreeAllUnlockedHeroes1452 cp 2551453 jr z,.FreeNextHero1454 res 7,(hl)1455 jr .FreeNextHero1456 .EndFreeAllUnlockedHeroes:1457 1458 call SetScenarioSelectGraphics1459 xor a1460 ld (activepage),a 1461 call SetScenarioSelectGraphics1462 ld hl,InGamePalette1463 call SetPalette1464 call SetSpatInCastle1465 call SetInterruptHandler 1466 call SetScenarioSelectButtons1468 call SetFontPage0Y212 1470 call SetAmountOfScenarioButtons1471 call SetAmountOfScenarioPageButtons1472 call SetPage1ButtonConstantlyLit1473 call SetDifficultyButtonConstantlyLit1474 ld b,281475 call .ScenarioPressed1476 xor a1477 ld (framecounter),a1478 .engine:1479 ld a,(framecounter)1480 inc a1481 ld (framecounter),a14821483 call screenonAfter3Frames1484 call CheckMouse1485 call SwapAndSetPage 1486 call PopulateControls 14881497 1498 ld ix,GenericButtonTable1499 call CheckButtonInteractionControlsNotOnInt1500 call .CheckScenarioSelectButtonClicked 1502 ld ix,GenericButtonTable1503 call .SetGenericButtons 1506 call SetNamesInScenarioButtons1507 call SetTextPage123Buttons1508 call SetTextHumanOrCPUButtons1509 call SetTextStartingTownButtons1510 call CheckRightClickDifficulty1511 call CheckRightClickTownAllignment1512 jp .engine1514 .EndTitleScreenEngine:1515 call .SortHumanCPUOFFPlayersAndTown 1516 call .SetAmountOfPlayers1517 call .SetStartingTown1518 call .SetStartingResources1519 call .SetStartingHeroes1520 call .SetTavernHeroes1521 call SetTempisr 1522 call SetSpatInGame1523 xor a1524 ld (GameStatus),a 1525 ret1527.SetTavernHeroes:1528 call .SetMaxAmountOfTavernSlots 1529 ld hl,ListOfUnlockedHeroes 1530 ld a,r1531 call .IncreaseLoop 1533 ld iy,TavernHeroesPlayer11535 .FillSlotsLoop:1536 push iy1537 call .SetTavernHeroesSlot1538 pop iy1539 inc iy1540 djnz .FillSlotsLoop1541 ret1543 .SetTavernHeroesSlot:1544 call .SetTavernHeroLoop1545 ld de,TavernHeroTableLenght+11546 add iy,de1547 call .SetTavernHeroLoop1549 ld a,(amountofplayers)1550 cp 21551 ret z1553 ld de,TavernHeroTableLenght+11554 add iy,de1555 call .SetTavernHeroLoop1557 ld a,(amountofplayers)1558 cp 31559 ret z1561 ld de,TavernHeroTableLenght+11562 add iy,de1563 call .SetTavernHeroLoop1564 ret1566 .SetMaxAmountOfTavernSlots:1567 1568 call .CheckAmountOfUnlockedHeroes 1570 ld a,(amountofplayers)1571 ld b,a1572 ld a,c1573 sub a,b1574 ld b,01575 ld c,a 1577 ld a,(amountofplayers)1578 ld d,01579 ld e,a 1580 call DivideBCbyDE 1582 ld a,c1583 cp 81584 jr c,.EndCheckOverFlow1585 ld a,71586 .EndCheckOverFlow:1587 ld b,a 1588 ret1590 .CheckAmountOfUnlockedHeroes: 1591 ld hl,ListOfUnlockedHeroes1592 ld c,0 1593 .CheckAmountOfUnlockedHeroesLoop:1594 ld a,(hl)1595 or a1596 ret z1597 inc c1598 inc hl1599 jr .CheckAmountOfUnlockedHeroesLoop1601 .StartOfList:1602 ld hl,ListOfUnlockedHeroes1604 .SetTavernHeroLoop: 1605 ld a,(hl)1606 or a1607 jr z,.StartOfList1608 bit 7,(hl)1609 jr z,.TavernHeroFound1610 call .IncreaseListWithRandomAmount 1611 jr .SetTavernHeroLoop1612 .TavernHeroFound:1613 ld a,(hl)1614 set 7,(hl) 1615 ld (iy),a 1616 .IncreaseListWithRandomAmount: 1617 ld a,r1618 and 15 1620 .IncreaseLoop: 1621 push af1622 inc hl1623 ld a,(hl)1624 or a 1625 jr nz,.EndCheckEndOfList1626 ld hl,ListOfUnlockedHeroes1627 .EndCheckEndOfList:1628 pop af1629 dec a1630 jr nz,.IncreaseLoop1631 ret1633.SetStartingHeroes:1634 ld ix,pl1hero1y1635 ld iy,Castle11636 ld a,(player1StartingTown) 1637 call .SetStartingHeroForThisPlayer1638 ld ix,pl2hero1y1639 ld iy,Castle21640 ld a,(player2StartingTown) 1641 call .SetStartingHeroForThisPlayer1643 ld a,(amountofplayers)1644 cp 21645 ret z1647 ld ix,pl3hero1y1648 ld iy,Castle31649 ld a,(player3StartingTown) 1650 call .SetStartingHeroForThisPlayer1652 ld a,(amountofplayers)1653 cp 31654 ret z1656 ld ix,pl4hero1y1657 ld iy,Castle41658 ld a,(player4StartingTown) 1659 call .SetStartingHeroForThisPlayer1660 ret1662 .SetStartingHeroForThisPlayer:1663 push ix1664 ld b,a1665 add a,a1666 add a,b 1667 ld d,01668 ld e,a1669 ld ix,ListOfHeroAddressesAndAmounts-31670 add ix,de1672 1673 ld e,(ix+2) 1674 ld d,0 1675 ld a,r1676 ld b,01677 ld c,a 1678 call DivideBCbyDE 1680 ld e,(ix)1681 ld d,(ix+1) 1682 add hl,de1683 1684 bit 7,(hl) 1685 jr z,.EndCheckPickRandomHero1686 1688 .PickRandomHeroWithoutCastle:1689 ld a,r1690 and 31 1692 ld hl,HeroesWithoutCastle16941701 ld d,01702 ld e,a1703 add hl,de1704 bit 7,(hl) 1705 jr nz,.PickRandomHeroWithoutCastle1706 .EndCheckPickRandomHero:1707 ld b,(hl) 1708 set 7,(hl) 17101713 pop ix1714 call .SetHero1715 ret1717 .SetHero:1718 push bc 1719 call .ClearHeroSlot1720 call .SetYX 1721 pop bc 1722 call .SetHeroSpecificInfo1723 call .SetManaAndMovementToMax 1724 ret1726 .SetManaAndMovementToMax:1727 call SetHeroMaxMovementPoints.IxAlreadySet1728 ld (ix+HeroMove),a 1730 ld de,ItemIntelligencePointsTable1731 ld hl,SetAdditionalStatFromInventoryItemsInHL.IxAlreadySet1732 push ix1733 call EnterSpecificRoutineInCastleOverviewCodeWithoutAlteringRegisters1734 pop ix1735 call SetTotalManaHero.SetAdditionalStatFromInventoryItemsInHLDone1736 ld l,(ix+HeroTotalMana+0)1737 ld h,(ix+HeroTotalMana+1)1738 ld (ix+HeroMana+0),l1739 ld (ix+HeroMana+1),h1740 ret1742 .SetHeroSpecificInfo: 1744 ld hl,HeroAddressesAdol-heroAddressesLenght1745 ld de,heroAddressesLenght 1746 .loop3:1747 add hl,de1748 djnz .loop31749 ld (ix+HeroSpecificInfo+0),l1750 ld (ix+HeroSpecificInfo+1),h1752 1753 ld de,HeroInfoSkill1754 add hl,de1755 ld a,(hl)1756 ld (ix+HeroSkills),a1758 1759 inc hl 1760 ld a,(hl)1761 dec a1762 ld b,01763 ld c,a1764 ld de,111765 call DivideBCbyDE 1767 add hl,hl 1768 add hl,hl 1769 ld de,.HeroSkillPerClassTable1770 add hl,de1771 ld a,(hl)1772 ld (ix+HeroStatAttack),a1773 inc hl1774 ld a,(hl)1775 ld (ix+HeroStatDefense),a1776 inc hl1777 ld a,(hl)1778 ld (ix+HeroStatKnowledge),a1779 inc hl1780 ld a,(hl)1781 ld (ix+HeroStatSpellDamage),a1783 1784 ld a,(iy+CastleLevel1Units) 1785 ld (ix+HeroUnits),a1786 ld l,(iy+CastleLevel1UnitsAvail) 1787 ld h,(iy+CastleLevel1UnitsAvail+1)1788 ld (ix+HeroUnits+1),l1789 ld (ix+HeroUnits+2),h1791 ld a,(iy+CastleLevel2Units) 1792 ld (ix+HeroUnits+3),a1793 ld l,(iy+CastleLevel2UnitsAvail) 1794 ld h,(iy+CastleLevel2UnitsAvail+1)1795 ld (ix+HeroUnits+4),l1796 ld (ix+HeroUnits+5),h1797 ret1799 .HeroSkillPerClassTable:18001801 db 2,1,1,1 1802 db 3,1,1,0 1803 db 1,3,1,0 1804 db 1,2,1,1 1805 1806 db 1,2,1,1 1807 db 1,1,2,1 1808 db 2,1,1,1 1809 1810 db 0,0,3,2 1811 db 1,0,1,3 1812 db 0,1,2,2 1813 db 1,1,2,1 1815 .ClearHeroSlot:1816 ld hl,EmptyHeroRecruitedAtTavern1817 push ix1818 pop de1819 ld bc,lenghtherotable-2 1820 ldir1821 ret1823 .SetYX:1824 ld a,(iy+CastleY) 1825 dec a1826 ld (ix+HeroY),a 1827 ld a,(iy+Castlex) 1828 inc a1829 inc a1830 ld (ix+HeroX),a 1831 ret1834.SetStartingResources:1835 ld a,(Difficulty)1836 dec a1837 ld hl,.ResourcesEasy1838 jr z,.DifficultyFound1839 dec a1840 ld hl,.ResourcesNormal1841 jr z,.DifficultyFound1842 dec a1843 ld hl,.ResourcesHard1844 jr z,.DifficultyFound1845 dec a1846 ld hl,.ResourcesExpert1847 jr z,.DifficultyFound18481849 ld hl,.ResourcesImpossible18501851 1852 .DifficultyFound:1853 push hl1854 ld de,ResourcesPlayer11855 call .SetResources1856 pop hl1857 push hl1858 ld de,ResourcesPlayer21859 call .SetResources1860 pop hl1861 push hl1862 ld de,ResourcesPlayer31863 call .SetResources1864 pop hl1865 push hl1866 ld de,ResourcesPlayer41867 call .SetResources1868 pop hl1869 ret1871 .SetResources:1872 ld bc,101873 ldir1874 ret1875 1876 .ResourcesEasy: dw 30000, 30,30,15,151877 .ResourcesNormal: dw 20000, 20,20,10,101878 .ResourcesHard: dw 15000, 15,15,07,071879 .ResourcesExpert: dw 10000, 10,10,04,041880 .ResourcesImpossible: dw 00000, 00,00,00,001883.SetStartingTown:1884 1885 ld hl,player1StartingTown1886 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1887 ld de,Castle1+CastleName1888 ld bc,InfoTownLenght1889 ldir 1891 ld hl,player2StartingTown1892 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1893 ld de,Castle2+CastleName1894 ld bc,InfoTownLenght1895 ldir 1897 ld hl,player3StartingTown1898 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1899 ld de,Castle3+CastleName1900 ld bc,InfoTownLenght1901 ldir 1903 ld hl,player4StartingTown1904 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1905 ld de,Castle4+CastleName1906 ld bc,InfoTownLenght1907 ldir 1909 1910 ld hl,player1StartingTown1911 call .ChangeTownInCaseRandomIsSelected1912 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1913 ld de,Castle1+CastleName1914 ld bc,InfoTownLenght1915 ldir 1917 ld hl,player2StartingTown1918 call .ChangeTownInCaseRandomIsSelected1919 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1920 ld de,Castle2+CastleName1921 ld bc,InfoTownLenght1922 ldir 1924 ld hl,player3StartingTown1925 ld a,(amountofplayers)1926 cp 31927 call nc,.ChangeTownInCaseRandomIsSelected1928 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1929 ld de,Castle3+CastleName1930 ld bc,InfoTownLenght1931 ldir 1933 ld hl,player4StartingTown1934 ld a,(amountofplayers)1935 cp 41936 call nc,.ChangeTownInCaseRandomIsSelected1937 call SetTextStartingTownButtons.SetTownNameInHlAndLdEHL1938 ld de,Castle4+CastleName1939 ld bc,InfoTownLenght1940 ldir 1941 1942 ld de,Castle1+CastleLevel1943 call .ResetAllBuildings1944 ld de,Castle2+CastleLevel1945 call .ResetAllBuildings1946 ld de,Castle3+CastleLevel1947 call .ResetAllBuildings1948 ld de,Castle4+CastleLevel1949 call .ResetAllBuildings1950 ret1952 .ChangeTownInCaseRandomIsSelected:1953 ld a,(hl)1954 or a1955 ret nz1957 .SetRandomTown:1958 1959 ld a,(TotalAmountOfUnlockedTowns)1960 ld e,a1961 ld d,0 1962 ld a,r1963 ld b,01964 ld c,a 1965 push hl1966 call DivideBCbyDE 1968 ld a,l1969 inc a 1970 pop hl1971 ld b,a 1972 1973 ld a,(player1StartingTown)1974 cp b1975 jr z,.SetRandomTown1976 ld a,(player2StartingTown)1977 cp b1978 jr z,.SetRandomTown1979 ld a,(player3StartingTown)1980 cp b1981 jr z,.SetRandomTown1982 ld a,(player4StartingTown)1983 cp b1984 jr z,.SetRandomTown1986 ld (hl),b1987 ld a,b 1988 ret1990 .ResetAllBuildings:1991 ld hl,ResetBuildings1992 ld bc,81993 ldir1994 ret1996.SetAmountOfPlayers:1997 ld a,21998 ld (amountofplayers),a2000 ld ix,(WorldPointer)2001 ld a,(ix+ScenarioNameAddress)2002 cp "2"2003 ret z2004 2005 ld a,(player3human?) 2006 cp 22007 ret z2008 ld a,32009 ld (amountofplayers),a2011 ld ix,(WorldPointer)2012 ld a,(ix+ScenarioNameAddress)2013 cp "3"2014 ret z 2016 ld a,(player4human?) 2017 cp 22018 ret z2019 ld a,42020 ld (amountofplayers),a2021 ret2023.SortHumanCPUOFFPlayersAndTown:2024 2025 ld a,(player4human?) 2026 cp 22027 jr z,.EndCheckMovePlayer4Up2028 ld a,(player3human?) 2029 cp 22030 jr z,.MovePlayer4Up2031 .EndCheckMovePlayer4Up:2033 2034 ld a,(player3human?) 2035 cp 22036 jr z,.EndCheckMovePlayer3Up2037 ld a,(player2human?) 2038 cp 22039 jr z,.MovePlayer3Up2040 .EndCheckMovePlayer3Up:2042 2043 ld a,(player2human?) 2044 cp 22045 jr z,.EndCheckMovePlayer2Up2046 ld a,(player1human?) 2047 cp 22048 jr z,.MovePlayer2Up2049 .EndCheckMovePlayer2Up:2050 ret2052 .MovePlayer2Up: 2053 ld a,(player2human?) 2054 ld (player1human?),a 2055 ld a,22056 ld (player2human?),a 2058 ld a,(player2StartingTown) 2059 ld (player1StartingTown),a 2060 jp .SortHumanCPUOFFPlayersAndTown2062 .MovePlayer3Up: 2063 ld a,(player3human?) 2064 ld (player2human?),a 2065 ld a,22066 ld (player3human?),a 2068 ld a,(player3StartingTown) 2069 ld (player2StartingTown),a 2070 jp .SortHumanCPUOFFPlayersAndTown2072 .MovePlayer4Up: 2073 ld a,(player4human?) 2074 ld (player3human?),a 2075 ld a,22076 ld (player4human?),a 2078 ld a,(player4StartingTown) 2079 ld (player3StartingTown),a 2080 jp .SortHumanCPUOFFPlayersAndTown2085.CheckScenarioSelectButtonClicked: 2086 ret nc2088 ld a,b2089 cp 192090 jp nc,.ScenarioPressed2091 cp 162092 jp nc,.Page123Pressed2093 cp 142094 jp z,.BackPressed2095 cp 152096 jp z,.BeginPressed2097 cp 102098 jp nc,.HumanOrCPUPressed2099 cp 062100 jp nc,.StartingTownPressed2102 .DifficultyPressed:2103 ld b,12104 cp 52105 jr z,.SetDifficulty2106 ld b,22107 cp 42108 jr z,.SetDifficulty2109 ld b,32110 cp 32111 jr z,.SetDifficulty2112 ld b,42113 cp 22114 jr z,.SetDifficulty2115 ld b,52116 .SetDifficulty:2117 ld a,b2118 ld (Difficulty),a2119 call SetDifficultyButtonConstantlyLit2120 ret2122 .StartingTownPressed:21232124 cp 92125 ld hl,player1StartingTown2126 jr z,.StartingTownFound2127 cp 82128 ld hl,player2StartingTown2129 jr z,.StartingTownFound2130 cp 72131 ld hl,player3StartingTown2132 jr z,.StartingTownFound2133 ld hl,player4StartingTown2134 .StartingTownFound:2135 ld a,(hl)2136 inc a2137 ld (hl),a2138 2139 2140 ld b,0 2141 ld a,(player1StartingTown)2142 cp (hl)2143 jr nz,.EndCheckInUseByPlayer12144 inc b2145 .EndCheckInUseByPlayer1:2146 ld a,(player2StartingTown)2147 cp (hl)2148 jr nz,.EndCheckInUseByPlayer22149 inc b2150 .EndCheckInUseByPlayer2:2151 ld a,(player3StartingTown)2152 cp (hl)2153 jr nz,.EndCheckInUseByPlayer32154 inc b2155 .EndCheckInUseByPlayer3:2156 ld a,(player4StartingTown)2157 cp (hl)2158 jr nz,.EndCheckInUseByPlayer42159 inc b2160 .EndCheckInUseByPlayer4:2161 bit 0,b2162 jr z,.StartingTownFound 2165 ld a,(TotalAmountOfUnlockedTowns)2166 inc a2167 cp (hl)2169 ret nz2170 ld (hl),02171 ret2173 .HumanOrCPUPressed:21742175 cp 132176 ld hl,player1human?2177 jr z,.HumanOrCPUPPressed2178 cp 122179 ld hl,player2human?2180 jr z,.HumanOrCPUPPressed2181 cp 112182 ld hl,player3human?2183 jr z,.HumanOrCPUPPressed2184 ld hl,player4human?2186 .HumanOrCPUPPressed:2187 2188 ld a,(hl) 2189 dec a2190 jr nz,.EndCheckCurrentButtonPressedIsHuman2191 2192 ld c,1 2193 call .CheckAmountOfButtonsCPUorHuman2194 ld a,b 2195 cp 1 2196 ret z2197 .EndCheckCurrentButtonPressedIsHuman:2199 2200 ld a,(hl) 2201 or a2202 jr nz,.EndCheckCurrentButtonPressedIsCPU2203 2204 ld c,1 2205 call .CheckAmountOfButtonsCPUorHuman2206 ld a,b 2207 cp 2 2208 jr nc,.EndCheckCurrentButtonPressedIsCPU2209 2210 ld c,0 2211 call .CheckAmountOfButtonsCPUorHuman2212 ld a,b 2213 cp 2 2214 jr nc,.EndCheckCurrentButtonPressedIsCPU2215 ld (hl),1 2216 ret2217 .EndCheckCurrentButtonPressedIsCPU:2219 ld a,(hl)2220 dec a2221 ld (hl),a2222 cp 2552223 ret nz2224 ld (hl),2 2225 ld a,%1100 00112226 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 2227 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 2228 ld ix,(WorldPointer)2229 ld a,(ix+ScenarioNameAddress)2230 cp "2"2231 ret z2232 ld a,%1100 00112233 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2234 ld ix,(WorldPointer)2235 ld a,(ix+ScenarioNameAddress)2236 cp "3"2237 ret z2238 ld a,%1100 00112239 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2240 ret2242 .CheckAmountOfButtonsCPUorHuman:2243 ld b,0 2244 ld a,(player1human?)2245 cp c2246 jr nz,.EndCheckButtonPlayer12247 inc b2248 .EndCheckButtonPlayer1:2249 ld a,(player2human?)2250 cp c2251 jr nz,.EndCheckButtonPlayer22252 inc b2253 .EndCheckButtonPlayer2:2254 2255 ld ix,(WorldPointer)2256 ld a,(ix+ScenarioNameAddress)2257 cp "2"2258 ret z 2260 ld a,(player3human?)2261 cp c2262 jr nz,.EndCheckButtonPlayer32263 inc b2264 .EndCheckButtonPlayer3:2266 ld ix,(WorldPointer)2267 ld a,(ix+ScenarioNameAddress)2268 cp "3"2269 ret z2271 ld a,(player4human?)2272 cp c2273 ret nz2274 inc b2275 ret2277 .BackPressed:2278 pop af2279 jp TitleScreenCode2281 .BeginPressed:2282 pop af2283 jp .EndTitleScreenEngine2285 .Page123Pressed:2286 ld b,32287 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*12+12288 jr z,.ScenarioPageFound2289 cp 172290 ld b,22291 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*11+12292 jr z,.ScenarioPageFound2293 ld b,12294 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+12295 .ScenarioPageFound:2296 ld a,(ScenarioPage)2297 cp b2298 ret z2299 ld a,b2300 ld (ScenarioPage),a2302 push de2303 call SetAmountOfScenarioPageButtons2304 pop de2305 ld hl,.PageButtonConstantlyLit2306 ld bc,42307 ldir2309 2310 ld hl,ScenarioSelectButtonTable-22311 ld de,GenericButtonTable-22312 ld bc,2+(GenericButtonTableLenghtPerButton*10)2313 ldir2315 ld a,(ScenarioPage)2316 ld b,a2317 ld a,(LitScenarioButtonInWhichPage?)2318 cp b2319 jp nz,SetAmountOfScenarioButtons2320 call .LightCurrentActiveScenarioButton2321 jp SetAmountOfScenarioButtons2323 .PageButtonConstantlyLit:2324 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1282326 .ScenarioPressed:2327 ld a,(ScenarioPage)2328 ld (LitScenarioButtonInWhichPage?),a2329 ld a,282330 sub b2331 ld (ScenarioSelected),a2333 .LightCurrentActiveScenarioButton:2334 2335 ld a,(AmountOfMapsVisibleInCurrentPage)2336 cp 112337 jr c,.EndCheckMaxMapsInCurrentPageCheck2338 ld a,102339 .EndCheckMaxMapsInCurrentPageCheck:2341 ld d,02342 ld e,a2343 ld hl,GenericButtonTableLenghtPerButton2344 call MultiplyHlWithDE 2345 push hl2346 pop bc2348 ld hl,ScenarioSelectButtonTable2349 ld de,GenericButtonTable23502351 ldir2353 2354 ld a,(ScenarioSelected)2355 ld d,02356 ld e,a2357 ld hl,GenericButtonTableLenghtPerButton2358 call MultiplyHlWithDE 2359 ld de,GenericButtonTable+12360 add hl,de2361 ex de,hl2362 ld hl,.ScenarioButtonConstantlyLit2363 ld bc,42364 ldir2366 2367 ld a,(ScenarioPage)2368 dec a2369 ld b,02370 jr z,.PageFound2371 dec a2372 ld b,102373 jr z,.PageFound2374 ld b,202375 .PageFound:2376 ld a,(ScenarioSelected)2377 add a,b 2378 ld d,02379 ld e,a2380 ld hl,LenghtMapData2381 call MultiplyHlWithDE 2382 ld de,GentleMaps2383 add hl,de2384 ld (WorldPointer),hl2385 2386 2387 call PutMiniMapScenarioSelectScreen2388 call PutMiniMapScenarioSelectScreen2390 2391 call .SetSelectedScenarioNameRightTopOfScreen2392 call .SetSelectedScenarioNameRightTopOfScreen2394 2395 call .SetMaxAmountOfPlayerButtons2396 call .SetMaxAmountOfPlayerButtons2398 ld a,1 2399 ld (player1human?),a2400 xor a 2401 ld (player2human?),a2402 ld (player1StartingTown),a2403 ld (player2StartingTown),a2404 ld (player3StartingTown),a2405 ld (player4StartingTown),a2406 ret2408 .SetMaxAmountOfPlayerButtons:2409 ld a,%1100 00112410 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*15),a 2411 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*16),a 2412 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*19),a 2413 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*20),a 2415 call ClearPlayerButtons2416 call PutPlayer1and2Buttons2418 xor a 2419 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 2420 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 2421 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2422 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2423 2424 ld ix,(WorldPointer)2425 ld a,22426 ld (amountofplayers),a2427 ld a,2 2428 ld (player3human?),a2429 ld (player4human?),a2430 ld a,(ix+ScenarioNameAddress)2431 cp "2"2432 jp z,.SetTextInPlayerButtons2434 call PutPlayer3Buttons2435 ld a,%1100 00112436 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*17),a 2437 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*21),a 2439 ld a,32440 ld (amountofplayers),a2441 xor a 2442 ld (player3human?),a2443 ld a,(ix+ScenarioNameAddress)2444 cp "3"2445 jp z,.SetTextInPlayerButtons2447 call PutPlayer4Buttons2448 ld a,%1100 00112449 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*18),a 2450 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*22),a 2451 ld a,42452 ld (amountofplayers),a2453 xor a 2454 ld (player4human?),a2455 2456 .SetTextInPlayerButtons:2457 call SetTextHumanOrCPUButtons2458 call SetTextStartingTownButtons2459 jp SwapAndSetPage 2461 .SetSelectedScenarioNameRightTopOfScreen:2462 call ClearScenarioNameRightTopOfScreen2463 ld b,158 2464 ld c,021 2466 ld hl,(WorldPointer)2467 ld de,ScenarioNameAddress+42468 add hl,de2470 call SetText 2471 jp SwapAndSetPage 2473 .ScenarioButtonConstantlyLit:2474 dw $4000 + (011*128) + (000/2) - 128, $4000 + (011*128) + (000/2) - 1282475 .ScenarioButtonNormallyLit:2476 dw $4000 + (000*128) + (000/2) - 128, $4000 + (000*128) + (096/2) - 1282478 2479 2481.SetGenericButtons: 2482 ld a,(ix+GenericButtonGfxBlock)2483 ld (ButtonGfxBlockCopy),a2485 ld b,(ix+GenericButtonAmountOfButtons)2486 .loop:2487 push bc2488 call .Setbutton2489 pop bc2490 ld de,GenericButtonTableLenghtPerButton2491 add ix,de2493 djnz .loop2494 ret2496 .Setbutton:2497 bit 7,(ix+GenericButtonStatus)2498 ret z 2500 bit 0,(ix+GenericButtonStatus) 2501 res 0,(ix+GenericButtonStatus) 2502 jr nz,.goCopyButton2503 bit 1,(ix+GenericButtonStatus)2504 res 1,(ix+GenericButtonStatus)2505 ret z 2506 .goCopyButton:2508 ld l,(ix+GenericButton_SYSX_Ontouched)2509 ld h,(ix+GenericButton_SYSX_Ontouched+1)2510 bit 6,(ix+GenericButtonStatus)2511 jr nz,.go 2513 ld l,(ix+GenericButton_SYSX_MovedOver)2514 ld h,(ix+GenericButton_SYSX_MovedOver+1)2515 bit 5,(ix+GenericButtonStatus)2516 jr nz,.go 2518 ld l,(ix+GenericButton_SYSX_Clicked)2519 ld h,(ix+GenericButton_SYSX_Clicked+1)2520 .go:2522 2523 ld e,(ix+GenericButton_DYDX)2524 ld d,(ix+GenericButton_DYDX+1)2526 ld a,(ix+GenericButtonYbottom)2527 sub a,(ix+GenericButtonYtop)2528 ld b,a 2529 ld a,(ix+GenericButtonXright)2530 sub a,(ix+GenericButtonXleft)2531 srl a 2532 ld c,a 2535 ld a,(ButtonGfxBlockCopy)25372539 ld de,$8000 + ((212+16)*128) + (000/2) - 128 2540 call CopyRamToVramCorrectedWithoutActivePageSetting 2542 ld a,(activepage)2543 xor 12544 ld (CopyCastleButton2+dPage),a2546 ld a,(ix+GenericButtonXleft)2547 ld (CopyCastleButton2+dx),a2548 ld a,(ix+GenericButtonYtop)2549 ld (CopyCastleButton2+dy),a2551 ld a,(ix+GenericButtonYbottom)2552 sub a,(ix+GenericButtonYtop)2553 ld (CopyCastleButton2+ny),a2555 ld a,(ix+GenericButtonXright)2556 sub a,(ix+GenericButtonXleft)2557 ld (CopyCastleButton2+nx),a2559 ld a,212+162560 ld (CopyCastleButton2+sy),a2562 ld hl,CopyCastleButton22563 call docopy2565 ld a,2122566 ld (CopyCastleButton2+sy),a2568 ld hl,TinyCopyWhichFunctionsAsWaitVDPReady2569 call docopy2570 ret2572TavernHeroesReset:2573db 255 | .TavernHeroesPlayer1: db 001,000,000,000,000,000,000,000,000,0002574db 255 | .TavernHeroesPlayer2: db 002,000,000,000,000,000,000,000,000,0002575db 255 | .TavernHeroesPlayer3: db 003,000,000,000,000,000,000,000,000,0002576db 255 | .TavernHeroesPlayer4: db 004,000,000,000,000,000,000,000,000,0002577EndTavernHeroesReset:2578 2579CoordinatesEasyButton: db 157,157+17, 159,159+20, "  Difficulty: Easy" ,254,254,"Players start with:",254,"   30.000 Gold",254,"   30 Wood",254,"   30 Ore",254,"   15 Gems",254,"   15 Rubies",2552580CoordinatesNormalButton: db 174,174+17, 159,159+20, " Difficulty: Normal" ,254,254,"Players start with:",254,"   20.000 Gold",254,"   20 Wood",254,"   20 Ore",254,"   10 Gems",254,"   10 Rubies",2552581CoordinatesHardButton: db 191,191+17, 159,159+20, "  Difficulty: Hard" ,254,254,"Players start with:",254,"   15.000 Gold",254,"   15 Wood",254,"   15 Ore",254,"   7 Gems",254,"   7 Rubies",2552582CoordinatesExpertButton: db 208,208+17, 159,159+20, " Difficulty: Expert" ,254,254,"Players start with:",254,"   10.000 Gold",254,"   10 Wood",254,"   10 Ore",254,"   4 Gems",254,"   4 Rubies",2552583CoordinatesImpossibleButton: db 225,225+17, 159,159+20, "Difficulty: Impossible",254,254,"Players start with:",254,"   0 Gold",254,"   0 Wood",254,"   0 Ore",254,"   0 Gems",254,"   0 Rubies",2552585CoordinatesCastle1Button: db 186,186+56, 102,102+122586CoordinatesCastle2Button: db 186,186+56, 114,114+122587CoordinatesCastle3Button: db 186,186+56, 126,126+122588CoordinatesCastle4Button: db 186,186+56, 138,138+122590CheckRightClickTownAllignment:2591 ld a,(NewPrContr)2592 bit 5,a 2593 ret z2595 ld ix,CoordinatesCastle1Button2596 ld hl,player1StartingTown2597 ld de,player1human? 2598 call CheckMouseOverRegion2599 bit 0,b2600 jp nz,.SetTownAllignmentWindow2602 ld ix,CoordinatesCastle2Button2603 ld hl,player2StartingTown2604 ld de,player2human? 2605 call CheckMouseOverRegion2606 bit 0,b2607 jp nz,.SetTownAllignmentWindow2609 ld ix,CoordinatesCastle3Button2610 ld hl,player3StartingTown2611 ld de,player3human? 2612 call CheckMouseOverRegion2613 bit 0,b2614 jp nz,.SetTownAllignmentWindow2616 ld ix,CoordinatesCastle4Button2617 ld hl,player4StartingTown2618 ld de,player4human? 2619 call CheckMouseOverRegion2620 bit 0,b2621 ret z2623 .SetTownAllignmentWindow: 2624 ld a,(hl)2625 or a2626 ret z2628 ld a,(de) 2629 cp 22630 ret z2631 2632 push hl 2634 ld hl,$4000 + (055*128) + (092/2) - 1282635 ld de,$0000 + (026*128) + (028/2) - 1282636 ld bc,$0000 + (117*256) + (164/2)2637 ld a,ScenarioSelectButtonsBlock 2638 call CopyRamToVramCorrectedCastleOverview 2640 ld hl,.TextTownAllignment2641 ld b,051 2642 ld c,032 2643 call SetText 2645 ld hl,.TextAssociatedCreatures2646 ld b,071 2647 ld c,043 2648 call SetText 2650 pop hl 2651 ld a,(hl)2652 call SetTextStartingTownButtons.SetTownNameInHl2653 push hl2654 pop iy 2655 ld b,118 2656 ld c,032 2657 call SetText 2659 ld a,(iy+13) 2660 ld (StartingTownLevel1Unit),a2661 ld a,(iy+14) 2662 ld (StartingTownLevel2Unit),a2663 ld a,(iy+15) 2664 ld (StartingTownLevel3Unit),a2665 ld a,(iy+16) 2666 ld (StartingTownLevel4Unit),a2667 ld a,(iy+17) 2668 ld (StartingTownLevel5Unit),a2669 ld a,(iy+18) 2670 ld (StartingTownLevel6Unit),a2672 ld hl,DisplayTownAllignmentAssociatedCreatures2673 call EnterSpecificRoutineHeroOverviewCode2675 ld hl,DisplayMonsterNames2676 call EnterSpecificRoutineInCastleOverviewCode2678 ld a,42679 ld (GameStatus),a 2681 jp WaitKeyPressToGoBackToGame22688.TextTownAllignment: db "Town Allignment:",2552689.TextAssociatedCreatures: db "Associated Creatures:",2552691CheckRightClickDifficulty:2692 ld a,(NewPrContr)2693 bit 5,a 2694 ret z2696 ld ix,CoordinatesEasyButton2697 call CheckMouseOverRegion2698 bit 0,b2699 jp nz,.SetDifficultyWindow2700 ld ix,CoordinatesNormalButton2701 call CheckMouseOverRegion2702 bit 0,b2703 jp nz,.SetDifficultyWindow2704 ld ix,CoordinatesHardButton2705 call CheckMouseOverRegion2706 bit 0,b2707 jp nz,.SetDifficultyWindow2708 ld ix,CoordinatesExpertButton2709 call CheckMouseOverRegion2710 bit 0,b2711 jp nz,.SetDifficultyWindow2712 ld ix,CoordinatesImpossibleButton2713 call CheckMouseOverRegion2714 bit 0,b2715 ret z2717 .SetDifficultyWindow: 2718 ld hl,$4000 + (055*128) + (000/2) - 1282719 ld de,$0000 + (083*128) + (120/2) - 1282720 ld bc,$0000 + (068*256) + (092/2)2721 ld a,ScenarioSelectButtonsBlock 2722 call CopyRamToVramCorrectedCastleOverview 2724 ld de,42725 add ix,de2726 push ix2727 pop hl2728 ld b,129 2729 ld c,089 2730 call SetText 2733 jp WaitKeyPressToGoBackToGame22734 2735CheckMouseOverRegion:2736 res 0,b2738 ld a,(spat+1) 2740 add a,062742 cp (ix)2743 ret c2744 cp (ix+1)2745 ret nc2747 ld a,(spat+0) 2748 cp (ix+2)2749 ret c2750 cp (ix+3)2751 ret nc2753 set 0,b2754 ret2756WaitKeyPressToGoBackToGame2:2757 call SwapAndSetPage 2758 .loop:2759 call PopulateControls 2760 27612765 ld a,(NewPrContr)2766 bit 5,a 2767 jr nz,.End2768 ld a,(NewPrContr)2769 bit 4,a 2770 jr z,.loop2772 .End:2773 xor a2774 ld (NewPrContr),a2776 ld a,(activepage) 2777 or a2778 ld hl,.RestorePage02779 jp z,docopy2780 ld hl,.RestorePage12781 jp docopy2783.RestorePage0:2784 db 000,000,000,0012785 db 000,000,000,0002786 db 000,001,191,0002787 db 000,000,$d0 2788.RestorePage1:2789 db 000,000,000,0002790 db 000,000,000,0012791 db 000,001,191,0002792 db 000,000,$d0 2795SetTextStartingTownButtons:2796 ld a,(player1human?)2797 cp 2 2798 jr z,.EndSetTextStartingTownPlayer12799 ld a,(player1StartingTown)2800 call .SetTownNameInHl2801 ld b,189 2802 ld c,106 2803 call SetText 2804 .EndSetTextStartingTownPlayer1:2806 ld a,(player2human?)2807 cp 2 2808 jr z,.EndSetTextStartingTownPlayer22809 ld a,(player2StartingTown)2810 call .SetTownNameInHl2811 ld b,189 2812 ld c,118 2813 call SetText 2814 .EndSetTextStartingTownPlayer2:2816 ld ix,(WorldPointer)2817 ld a,(ix+ScenarioNameAddress)2818 cp "2"2819 ret z2821 ld a,(player3human?)2822 cp 2 2823 jr z,.EndSetTextStartingTownPlayer32824 ld a,(player3StartingTown)2825 call .SetTownNameInHl2826 ld b,189 2827 ld c,130 2828 call SetText 2829 .EndSetTextStartingTownPlayer3:2831 ld a,(ix+ScenarioNameAddress)2832 cp "3"2833 ret z2835 ld a,(player4human?)2836 cp 2 2837 ret z2838 ld a,(player4StartingTown)2839 call .SetTownNameInHl2840 ld b,189 2841 ld c,142 2842 call SetText 2843 ret2845 .SetTownNameInHlAndLdEHL:2846 ld e,(hl)2847 jr .go2849 .SetTownNameInHl:2850 ld e,a2852 .go:2853 ld d,02854 ld hl,InfoTownLenght2855 call MultiplyHlWithDE 2856 ld de,InfoTownRandom2857 add hl,de 2858 ret2860InfoTownLenght: equ InfoTown1-InfoTownRandom2861InfoTownRandom: db "Random      ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2862InfoTown1: db "Drasle's Den",255,DragonSlayerUnitLevel1Number, DragonSlayerUnitLevel2Number, DragonSlayerUnitLevel3Number, DragonSlayerUnitLevel4Number, DragonSlayerUnitLevel5Number, DragonSlayerUnitLevel6Number | dw DragonSlayerUnitLevel1Growth, DragonSlayerUnitLevel2Growth, DragonSlayerUnitLevel3Growth, DragonSlayerUnitLevel4Growth, DragonSlayerUnitLevel5Growth, DragonSlayerUnitLevel6Growth2863InfoTown2: db "Castlevania ",255,CastleVaniaUnitLevel1Number, CastleVaniaUnitLevel2Number, CastleVaniaUnitLevel3Number, CastleVaniaUnitLevel4Number, CastleVaniaUnitLevel5Number, CastleVaniaUnitLevel6Number | dw CastleVaniaUnitLevel1Growth, CastleVaniaUnitLevel2Growth, CastleVaniaUnitLevel3Growth, CastleVaniaUnitLevel4Growth, CastleVaniaUnitLevel5Growth, CastleVaniaUnitLevel6Growth2864InfoTown3: db "Junker HQ   ",255,SDSnatcherUnitLevel1Number, SDSnatcherUnitLevel2Number, SDSnatcherUnitLevel3Number, SDSnatcherUnitLevel4Number, SDSnatcherUnitLevel5Number, SDSnatcherUnitLevel6Number | dw SDSnatcherUnitLevel1Growth, SDSnatcherUnitLevel2Growth, SDSnatcherUnitLevel3Growth, SDSnatcherUnitLevel4Growth, SDSnatcherUnitLevel5Growth, SDSnatcherUnitLevel6Growth2865InfoTown4: db "Usas        ",255,UsasUnitLevel1Number, UsasUnitLevel2Number, UsasUnitLevel3Number, UsasUnitLevel4Number, UsasUnitLevel5Number, UsasUnitLevel6Number | dw UsasUnitLevel1Growth, UsasUnitLevel2Growth, UsasUnitLevel3Growth, UsasUnitLevel4Growth, UsasUnitLevel5Growth, UsasUnitLevel6Growth2866InfoTown5: db "Goemon      ",255,GoemonUnitLevel1Number, GoemonUnitLevel2Number, GoemonUnitLevel3Number, GoemonUnitLevel4Number, GoemonUnitLevel5Number, GoemonUnitLevel6Number | dw GoemonUnitLevel1Growth, GoemonUnitLevel2Growth, GoemonUnitLevel3Growth, GoemonUnitLevel4Growth, GoemonUnitLevel5Growth, GoemonUnitLevel6Growth28672868InfoTown6: db "Ys3         ",255,Ys3UnitLevel1Number, Ys3UnitLevel2Number, Ys3UnitLevel3Number, Ys3UnitLevel4Number, Ys3UnitLevel5Number, Ys3UnitLevel6Number | dw Ys3UnitLevel1Growth, Ys3UnitLevel2Growth, Ys3UnitLevel3Growth, Ys3UnitLevel4Growth, Ys3UnitLevel5Growth, Ys3UnitLevel6Growth2869InfoTown7: db "Psycho World",255,PsychoWorldUnitLevel1Number, PsychoWorldUnitLevel2Number, PsychoWorldUnitLevel3Number, PsychoWorldUnitLevel4Number, PsychoWorldUnitLevel5Number, PsychoWorldUnitLevel6Number | dw PsychoWorldUnitLevel1Growth, PsychoWorldUnitLevel2Growth, PsychoWorldUnitLevel3Growth, PsychoWorldUnitLevel4Growth, PsychoWorldUnitLevel5Growth, PsychoWorldUnitLevel6Growth2870InfoTown8: db "King Kong   ",255,KingKongUnitLevel1Number, KingKongUnitLevel2Number, KingKongUnitLevel3Number, KingKongUnitLevel4Number, KingKongUnitLevel5Number, KingKongUnitLevel6Number | dw KingKongUnitLevel1Growth, KingKongUnitLevel2Growth, KingKongUnitLevel3Growth, KingKongUnitLevel4Growth, KingKongUnitLevel5Growth, KingKongUnitLevel6Growth2871InfoTown9: db "Golvellius  ",255,GolvelliusUnitLevel1Number, GolvelliusUnitLevel2Number, GolvelliusUnitLevel3Number, GolvelliusUnitLevel4Number, GolvelliusUnitLevel5Number, GolvelliusUnitLevel6Number | dw GolvelliusUnitLevel1Growth, GolvelliusUnitLevel2Growth, GolvelliusUnitLevel3Growth, GolvelliusUnitLevel4Growth, GolvelliusUnitLevel5Growth, GolvelliusUnitLevel6Growth2872InfoTown10: db "Contra Den 1",255,ContraGroupAUnitLevel1Number, ContraGroupAUnitLevel2Number, ContraGroupAUnitLevel3Number, ContraGroupAUnitLevel4Number, ContraGroupAUnitLevel5Number, ContraGroupAUnitLevel6Number | dw ContraGroupAUnitLevel1Growth, ContraGroupAUnitLevel2Growth, ContraGroupAUnitLevel3Growth, ContraGroupAUnitLevel4Growth, ContraGroupAUnitLevel5Growth, ContraGroupAUnitLevel6Growth2873InfoTown11: db "Contra Den 2",255,ContraGroupBUnitLevel1Number, ContraGroupBUnitLevel2Number, ContraGroupBUnitLevel3Number, ContraGroupBUnitLevel4Number, ContraGroupBUnitLevel5Number, ContraGroupBUnitLevel6Number | dw ContraGroupBUnitLevel1Growth, ContraGroupBUnitLevel2Growth, ContraGroupBUnitLevel3Growth, ContraGroupBUnitLevel4Growth, ContraGroupBUnitLevel5Growth, ContraGroupBUnitLevel6Growth28742875InfoTown12: db "Akanbe Den 1",255,AkanbeDragonGroupAUnitLevel1Number, AkanbeDragonGroupAUnitLevel2Number, AkanbeDragonGroupAUnitLevel3Number, AkanbeDragonGroupAUnitLevel4Number, AkanbeDragonGroupAUnitLevel5Number, AkanbeDragonGroupAUnitLevel6Number | dw AkanbeDragonGroupAUnitLevel1Growth, AkanbeDragonGroupAUnitLevel2Growth, AkanbeDragonGroupAUnitLevel3Growth, AkanbeDragonGroupAUnitLevel4Growth, AkanbeDragonGroupAUnitLevel5Growth, AkanbeDragonGroupAUnitLevel6Growth2876InfoTown13: db "Akanbe Den 2",255,AkanbeDragonGroupBUnitLevel1Number, AkanbeDragonGroupBUnitLevel2Number, AkanbeDragonGroupBUnitLevel3Number, AkanbeDragonGroupBUnitLevel4Number, AkanbeDragonGroupBUnitLevel5Number, AkanbeDragonGroupBUnitLevel6Number | dw AkanbeDragonGroupBUnitLevel1Growth, AkanbeDragonGroupBUnitLevel2Growth, AkanbeDragonGroupBUnitLevel3Growth, AkanbeDragonGroupBUnitLevel4Growth, AkanbeDragonGroupBUnitLevel5Growth, AkanbeDragonGroupBUnitLevel6Growth2877InfoTown14: db "YieArKungFu ",255,YieArKungFuUnitLevel1Number, YieArKungFuUnitLevel2Number, YieArKungFuUnitLevel3Number, YieArKungFuUnitLevel4Number, YieArKungFuUnitLevel5Number, YieArKungFuUnitLevel6Number | dw YieArKungFuUnitLevel1Growth, YieArKungFuUnitLevel2Growth, YieArKungFuUnitLevel3Growth, YieArKungFuUnitLevel4Growth, YieArKungFuUnitLevel5Growth, YieArKungFuUnitLevel6Growth2878InfoTown15: db "Bubble Den 1",255,BubbleBobbleGroupAUnitLevel1Number, BubbleBobbleGroupAUnitLevel2Number, BubbleBobbleGroupAUnitLevel3Number, BubbleBobbleGroupAUnitLevel4Number, BubbleBobbleGroupAUnitLevel5Number, BubbleBobbleGroupAUnitLevel6Number | dw BubbleBobbleGroupAUnitLevel1Growth, BubbleBobbleGroupAUnitLevel2Growth, BubbleBobbleGroupAUnitLevel3Growth, BubbleBobbleGroupAUnitLevel4Growth, BubbleBobbleGroupAUnitLevel5Growth, BubbleBobbleGroupAUnitLevel6Growth2879InfoTown16: db "Bubble Den 2",255,BubbleBobbleGroupBUnitLevel1Number, BubbleBobbleGroupBUnitLevel2Number, BubbleBobbleGroupBUnitLevel3Number, BubbleBobbleGroupBUnitLevel4Number, BubbleBobbleGroupBUnitLevel5Number, BubbleBobbleGroupBUnitLevel6Number | dw BubbleBobbleGroupBUnitLevel1Growth, BubbleBobbleGroupBUnitLevel2Growth, BubbleBobbleGroupBUnitLevel3Growth, BubbleBobbleGroupBUnitLevel4Growth, BubbleBobbleGroupBUnitLevel5Growth, BubbleBobbleGroupBUnitLevel6Growth2880InfoTown17: db "Cloud Palace",255,ChukaTaisenUnitLevel1Number, ChukaTaisenUnitLevel2Number, ChukaTaisenUnitLevel3Number, ChukaTaisenUnitLevel4Number, ChukaTaisenUnitLevel5Number, ChukaTaisenUnitLevel6Number | dw ChukaTaisenUnitLevel1Growth, ChukaTaisenUnitLevel2Growth, ChukaTaisenUnitLevel3Growth, ChukaTaisenUnitLevel4Growth, ChukaTaisenUnitLevel5Growth, ChukaTaisenUnitLevel6Growth288128832890ListOfHeroAddressesAndAmounts:2891 dw DragonSlayer4Heroes | db DragonSlayer4HeroesAmount2892 dw CastlevaniaHeroes | db CastlevaniaHeroesAmount2893 dw SDSnatcherHeroes | db SDSnatcherHeroesAmount2894 dw UsasHeroes | db UsasHeroesAmount2895 dw GoemonHeroes | db GoemonHeroesAmount2896 dw Ys3Heroes | db Ys3HeroesAmount2897 dw PsychoWorldHeroes | db PsychoWorldHeroesAmount2898 dw KingKongHeroes | db KingKongHeroesAmount2899 dw GolvelliusHeroes | db GolvelliusHeroesAmount2900 dw ContraGroupAHeroes | db ContraGroupAHeroesAmount2901 dw ContraGroupBHeroes | db ContraGroupBHeroesAmount29022903 dw AkanbeDragonGroupAHeroes | db AkanbeDragonGroupAHeroesAmount2904 dw AkanbeDragonGroupBHeroes | db AkanbeDragonGroupBHeroesAmount2905 dw YieArKungFuHeroes | db YieArKungFuHeroesAmount2906 dw BubbleBobbleGroupAHeroes | db BubbleBobbleGroupAHeroesAmount2907 dw BubbleBobbleGroupBHeroes | db BubbleBobbleGroupBHeroesAmount2908 dw ChukaTaisenHeroes | db ChukaTaisenHeroesAmount2910SetTextHumanOrCPUButtons:2911 ld c,106 2912 ld hl,player1human?2913 call .SetTextHumanOrCPU2915 ld c,118 2916 ld hl,player2human?2917 call .SetTextHumanOrCPU2919 ld ix,(WorldPointer)2920 ld a,(ix+ScenarioNameAddress)2921 cp "2"2922 ret z2924 ld c,130 2925 ld hl,player3human?2926 call .SetTextHumanOrCPU2928 ld a,(ix+ScenarioNameAddress)2929 cp "3"2930 ret z2932 ld c,142 2933 ld hl,player4human?29342937 .SetTextHumanOrCPU:2938 ld a,(hl)2939 or a2940 jp z,.PlayerCPU2941 dec a2942 jp z,.PlayerHuman29432945 .PlayerOFF:2946 ld b,166 2947 ld hl,TextOFF2948 jp SetText 2950 .PlayerCPU:2951 ld b,166 2952 ld hl,TextCPU2953 jp SetText 2955 .PlayerHuman:2956 ld b,161 2957 ld hl,TextHuman2958 jp SetText 2961TextHuman: db "Human",2552962TextCPU: db "CPU",2552963TextOFF: db "OFF",2552965SetTextPage123Buttons:2966 ld a,(AmountOfMapsUnlocked)2967 cp 112968 ret c2970 ld b,035 2971 ld c,176 2972 ld hl,TextPage12973 call SetText 2975 ld b,069 2976 ld c,176 2977 ld hl,TextPage22978 call SetText 2980 ld a,(AmountOfMapsUnlocked)2981 cp 212982 ret c2984 ld b,103 2985 ld c,176 2986 ld hl,TextPage32987 call SetText 2988 ret2990TextPage1: db "Page 1",2552991TextPage2: db "Page 2",2552992TextPage3: db "Page 3",2552994ScenarioNameAddress: equ 152995SetNamesInScenarioButtons:2996 ld b,020 2997 ld c,046 2999 ld hl,GentleMaps+ScenarioNameAddress3000 ld de,LenghtMapData*103002 ld a,(ScenarioPage)3003 dec a3004 jr z,.PageFound3005 add hl,de3006 dec a3007 jr z,.PageFound3008 add hl,de3009 .PageFound:3011 ld a,(AmountOfMapsVisibleInCurrentPage)3012 cp 113013 jr c,.loop3014 ld a,103016 .loop:3017 push af3018 push hl3019 push bc3020 call SetText 3021 pop bc3022 push bc3023 ld b,383024 inc hl3025 call SetText 3026 pop bc3027 push bc3028 ld b,533029 inc hl3030 call SetText 3031 pop bc3032 pop hl3033 ld a,c3034 add a,133035 ld c,a3036 ld de,LenghtMapData3037 add hl,de3038 pop af3039 dec a3040 jr nz,.loop3041 ret3043SetNamesInCampaignButtons:3044 ld b,020 3045 ld c,046 3047 ld hl,GentleMaps+ScenarioNameAddress+43048 ld de,LenghtMapData*103050 ld a,(ScenarioPage)3051 dec a3052 jr z,.PageFound3053 add hl,de3054 dec a3055 jr z,.PageFound3056 add hl,de3057 .PageFound:3059 ld a,(AmountOfMapsVisibleInCurrentPage)3060 cp 113061 jr c,.loop3062 ld a,103064 .loop:3065 push af3066 push hl3067 push bc3068 call SetText 3069 pop bc3070 pop hl3071 ld a,c3072 add a,133073 ld c,a3074 ld de,LenghtMapData3075 add hl,de3076 pop af3077 dec a3078 jr nz,.loop3079 ret3081SetScenarioSelectButtons:3082 ld hl,ScenarioSelectButtonTable-23083 ld de,GenericButtonTable-23084 ld bc,2+(GenericButtonTableLenghtPerButton*28)3085 ldir3086 ret3088SetCampaignSelectButtons:3089 ld hl,CampaignSelectButtonTable-23090 ld de,GenericButtonTable-23091 ld bc,2+(GenericButtonTableLenghtPerButton*15)3092 ldir3093 ret3095SetPage1ButtonConstantlyLit:3096 ld hl,.PageButtonConstantlyLit3097 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*10+13098 ld bc,43099 ldir3100 ret3101 .PageButtonConstantlyLit:3102 dw $4000 + (011*128) + (160/2) - 128, $4000 + (011*128) + (160/2) - 1283104SetDifficultyButtonConstantlyLit:3105 ld hl,ScenarioSelectButtonTable.DifficultyButtons3106 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*233107 ld bc,GenericButtonTableLenghtPerButton*53108 ldir3110 ld a,(Difficulty)3111 dec a3112 ld hl,.DifficultyEasyConstantlyLit3113 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*23+13114 jr z,.SetDifficultyButtonConstantlyLit3115 dec a3116 ld hl,.DifficultyNormalConstantlyLit3117 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*24+13118 jr z,.SetDifficultyButtonConstantlyLit3119 dec a3120 ld hl,.DifficultyHardConstantlyLit3121 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*25+13122 jr z,.SetDifficultyButtonConstantlyLit3123 dec a3124 ld hl,.DifficultyExpertConstantlyLit3125 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*26+13126 jr z,.SetDifficultyButtonConstantlyLit3127 dec a3128 ld hl,.DifficultyImpossibleConstantlyLit3129 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*27+13130 jr z,.SetDifficultyButtonConstantlyLit3131 .SetDifficultyButtonConstantlyLit:3132 ld bc,43133 ldir3135 call .SetDifficultyText3136 call .SetDifficultyText3137 ret3138 .SetDifficultyText:3139 ld a,(Difficulty)3140 dec a3141 ld b,192 3142 ld hl,TextEasy3143 jr z,.DifficultyFound3144 dec a3145 ld b,188 3146 ld hl,TextNormal3147 jr z,.DifficultyFound3148 dec a3149 ld b,192 3150 ld hl,TextHard3151 jr z,.DifficultyFound3152 dec a3153 ld b,189 3154 ld hl,TextExpert3155 jr z,.DifficultyFound3156 dec a3157 ld b,181 3158 ld hl,TextImpossible3159 jr z,.DifficultyFound3162 .DifficultyFound:3163 push bc3164 push hl3165 call ClearDifficultyTextGraphics3166 pop hl3167 pop bc3168 ld c,179 3169 call SetText 3170 jp SwapAndSetPage 3172 .DifficultyEasyConstantlyLit:3173 dw $4000 + (022*128) + (016/2) - 128, $4000 + (022*128) + (016/2) - 1283174 .DifficultyNormalConstantlyLit:3175 dw $4000 + (022*128) + (066/2) - 128, $4000 + (022*128) + (066/2) - 1283176 .DifficultyHardConstantlyLit:3177 dw $4000 + (022*128) + (118/2) - 128, $4000 + (022*128) + (118/2) - 1283178 .DifficultyExpertConstantlyLit:3179 dw $4000 + (022*128) + (168/2) - 128, $4000 + (022*128) + (168/2) - 1283180 .DifficultyImpossibleConstantlyLit:3181 dw $4000 + (022*128) + (220/2) - 128, $4000 + (022*128) + (220/2) - 1283183TextEasy: db "Easy",2553184TextNormal: db "Normal",2553185TextHard: db "Hard",2553186TextExpert: db "Expert",2553187TextImpossible: db "Impossible",2553189SetAmountOfCampaignPageButtons:31903191 ld a,(AmountOfMapsUnlocked)3192 push af3194 ld a,(AmountOfCampaignsFinished)3195 inc a3196 ld (AmountOfMapsUnlocked),a3198 call SetAmountOfScenarioPageButtons3200 pop af3201 ld (AmountOfMapsUnlocked),a3202 ret3204SetAmountOfScenarioPageButtons:3205 ld hl,.PageButtonsNormal3206 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*103207 ld bc,53208 ldir3209 ld hl,.PageButtonsNormal3210 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*113211 ld bc,53212 ldir3213 ld hl,.PageButtonsNormal3214 ld de,GenericButtonTable+GenericButtonTableLenghtPerButton*123215 ld bc,53216 ldir3218 ld a,(AmountOfMapsUnlocked)3219 cp 213220 ret nc 3221 cp 113222 jr nc,.LockPage3 3223 3224 .LockPage12And3: 3225 xor a 3226 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*10),a3227 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*11),a3228 .LockPage3:3229 xor a 3230 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*12),a3231 ret3233 .PageButtonsNormal:3234 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 1283236SetAmountOfCampaignButtons:3237 call ClearCampaignButtonGraphics3238 call SwapAndSetPage 3239 call ClearCampaignButtonGraphics3240 3241 .go:3242 ld a,%1100 00113243 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*0),a3244 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3245 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3246 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3247 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3248 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3249 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3250 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3251 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3252 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3254 ld a,(ScenarioPage)3255 dec a3256 ld b,03257 jr z,.PageFound3258 dec a3259 ld b,103260 jr z,.PageFound3261 ld b,203262 .PageFound:326532683271327432783283 ld a,(AmountOfCampaignsFinished)3284 inc a 3285 sub b3286 ld (AmountOfMapsVisibleInCurrentPage),a3287 dec a3288 jr z,.UpToScenario1Unlocked3289 dec a3290 jr z,.UpToScenario2Unlocked3291 dec a3292 jr z,.UpToScenario3Unlocked3293 dec a3294 jr z,.UpToScenario4Unlocked3295 dec a3296 jr z,.UpToScenario5Unlocked3297 dec a3298 jr z,.UpToScenario6Unlocked3299 dec a3300 jr z,.UpToScenario7Unlocked3301 dec a3302 jr z,.UpToScenario8Unlocked3303 dec a3304 jr z,.UpToScenario9Unlocked3305 ret3307 .UpToScenario1Unlocked:3308 xor a3309 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3310 .UpToScenario2Unlocked:3311 xor a3312 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3313 .UpToScenario3Unlocked:3314 xor a3315 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3316 .UpToScenario4Unlocked:3317 xor a3318 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3319 .UpToScenario5Unlocked:3320 xor a3321 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3322 .UpToScenario6Unlocked:3323 xor a3324 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3325 .UpToScenario7Unlocked:3326 xor a3327 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3328 .UpToScenario8Unlocked:3329 xor a3330 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3331 .UpToScenario9Unlocked:3332 xor a3333 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3334 ret3336SetAmountOfScenarioButtons:3337 call ClearScenarioButtonGraphics3338 call SwapAndSetPage 3339 call ClearScenarioButtonGraphics3340 3341 .go:3342 ld a,%1100 00113343 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*0),a3344 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3345 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3346 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3347 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3348 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3349 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3350 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3351 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3352 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3354 ld a,(ScenarioPage)3355 dec a3356 ld b,03357 jr z,.PageFound3358 dec a3359 ld b,103360 jr z,.PageFound3361 ld b,203362 .PageFound:3363 ld a,(AmountOfMapsUnlocked)3364 sub b3365 ld (AmountOfMapsVisibleInCurrentPage),a3366 dec a3367 jr z,.UpToScenario1Unlocked3368 dec a3369 jr z,.UpToScenario2Unlocked3370 dec a3371 jr z,.UpToScenario3Unlocked3372 dec a3373 jr z,.UpToScenario4Unlocked3374 dec a3375 jr z,.UpToScenario5Unlocked3376 dec a3377 jr z,.UpToScenario6Unlocked3378 dec a3379 jr z,.UpToScenario7Unlocked3380 dec a3381 jr z,.UpToScenario8Unlocked3382 dec a3383 jr z,.UpToScenario9Unlocked3384 ret3386 .UpToScenario1Unlocked:3387 xor a3388 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*1),a3389 .UpToScenario2Unlocked:3390 xor a3391 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*2),a3392 .UpToScenario3Unlocked:3393 xor a3394 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*3),a3395 .UpToScenario4Unlocked:3396 xor a3397 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*4),a3398 .UpToScenario5Unlocked:3399 xor a3400 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*5),a3401 .UpToScenario6Unlocked:3402 xor a3403 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*6),a3404 .UpToScenario7Unlocked:3405 xor a3406 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*7),a3407 .UpToScenario8Unlocked:3408 xor a3409 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*8),a3410 .UpToScenario9Unlocked:3411 xor a3412 ld (GenericButtonTable+GenericButtonTableLenghtPerButton*9),a3413 ret3415 3416ScenarioSelectButton1Ytop: equ 043 + (0*13)3417ScenarioSelectButton1YBottom: equ ScenarioSelectButton1Ytop + 0113418ScenarioSelectButton1XLeft: equ 0503419ScenarioSelectButton1XRight: equ ScenarioSelectButton1XLeft + 0963421ScenarioSelectButton2Ytop: equ 043 + (1*13)3422ScenarioSelectButton2YBottom: equ ScenarioSelectButton2Ytop + 0113423ScenarioSelectButton2XLeft: equ 0503424ScenarioSelectButton2XRight: equ ScenarioSelectButton2XLeft + 0963426ScenarioSelectButton3Ytop: equ 043 + (2*13)3427ScenarioSelectButton3YBottom: equ ScenarioSelectButton3Ytop + 0113428ScenarioSelectButton3XLeft: equ 0503429ScenarioSelectButton3XRight: equ ScenarioSelectButton3XLeft + 0963431ScenarioSelectButton4Ytop: equ 043 + (3*13)3432ScenarioSelectButton4YBottom: equ ScenarioSelectButton4Ytop + 0113433ScenarioSelectButton4XLeft: equ 0503434ScenarioSelectButton4XRight: equ ScenarioSelectButton4XLeft + 0963436ScenarioSelectButton5Ytop: equ 043 + (4*13)3437ScenarioSelectButton5YBottom: equ ScenarioSelectButton5Ytop + 0113438ScenarioSelectButton5XLeft: equ 0503439ScenarioSelectButton5XRight: equ ScenarioSelectButton5XLeft + 0963441ScenarioSelectButton6Ytop: equ 043 + (5*13)3442ScenarioSelectButton6YBottom: equ ScenarioSelectButton6Ytop + 0113443ScenarioSelectButton6XLeft: equ 0503444ScenarioSelectButton6XRight: equ ScenarioSelectButton6XLeft + 0963446ScenarioSelectButton7Ytop: equ 043 + (6*13)3447ScenarioSelectButton7YBottom: equ ScenarioSelectButton7Ytop + 0113448ScenarioSelectButton7XLeft: equ 0503449ScenarioSelectButton7XRight: equ ScenarioSelectButton7XLeft + 0963451ScenarioSelectButton8Ytop: equ 043 + (7*13)3452ScenarioSelectButton8YBottom: equ ScenarioSelectButton8Ytop + 0113453ScenarioSelectButton8XLeft: equ 0503454ScenarioSelectButton8XRight: equ ScenarioSelectButton8XLeft + 0963456ScenarioSelectButton9Ytop: equ 043 + (8*13)3457ScenarioSelectButton9YBottom: equ ScenarioSelectButton9Ytop + 0113458ScenarioSelectButton9XLeft: equ 0503459ScenarioSelectButton9XRight: equ ScenarioSelectButton9XLeft + 0963461ScenarioSelectButton10Ytop: equ 043 + (9*13)3462ScenarioSelectButton10YBottom: equ ScenarioSelectButton10Ytop + 0113463ScenarioSelectButton10XLeft: equ 0503464ScenarioSelectButton10XRight: equ ScenarioSelectButton10XLeft + 0963465 3466ScenarioSelectButton11Ytop: equ 1733467ScenarioSelectButton11YBottom: equ ScenarioSelectButton11Ytop + 0113468ScenarioSelectButton11XLeft: equ 0323469ScenarioSelectButton11XRight: equ ScenarioSelectButton11XLeft + 0323471ScenarioSelectButton12Ytop: equ 1733472ScenarioSelectButton12YBottom: equ ScenarioSelectButton12Ytop + 0113473ScenarioSelectButton12XLeft: equ 0663474ScenarioSelectButton12XRight: equ ScenarioSelectButton12XLeft + 0323476ScenarioSelectButton13Ytop: equ 1733477ScenarioSelectButton13YBottom: equ ScenarioSelectButton13Ytop + 0113478ScenarioSelectButton13XLeft: equ 1003479ScenarioSelectButton13XRight: equ ScenarioSelectButton13XLeft + 0323480 3481ScenarioSelectButton14Ytop: equ 1913482ScenarioSelectButton14YBottom: equ ScenarioSelectButton14Ytop + 0153483ScenarioSelectButton14XLeft: equ 1063484ScenarioSelectButton14XRight: equ ScenarioSelectButton14XLeft + 0203486ScenarioSelectButton15Ytop: equ 1913487ScenarioSelectButton15YBottom: equ ScenarioSelectButton15Ytop + 0153488ScenarioSelectButton15XLeft: equ 1323489ScenarioSelectButton15XRight: equ ScenarioSelectButton15XLeft + 0183490 3491ScenarioSelectButton16Ytop: equ 103 + (0*12)3492ScenarioSelectButton16YBottom: equ ScenarioSelectButton16Ytop + 0113493ScenarioSelectButton16XLeft: equ 1583494ScenarioSelectButton16XRight: equ ScenarioSelectButton16XLeft + 0283496ScenarioSelectButton17Ytop: equ 103 + (1*12)3497ScenarioSelectButton17YBottom: equ ScenarioSelectButton17Ytop + 0113498ScenarioSelectButton17XLeft: equ 1583499ScenarioSelectButton17XRight: equ ScenarioSelectButton17XLeft + 0283501ScenarioSelectButton18Ytop: equ 103 + (2*12)3502ScenarioSelectButton18YBottom: equ ScenarioSelectButton18Ytop + 0113503ScenarioSelectButton18XLeft: equ 1583504ScenarioSelectButton18XRight: equ ScenarioSelectButton18XLeft + 0283506ScenarioSelectButton19Ytop: equ 103 + (3*12)3507ScenarioSelectButton19YBottom: equ ScenarioSelectButton19Ytop + 0113508ScenarioSelectButton19XLeft: equ 1583509ScenarioSelectButton19XRight: equ ScenarioSelectButton19XLeft + 0283510 3511ScenarioSelectButton20Ytop: equ 103 + (0*12)3512ScenarioSelectButton20YBottom: equ ScenarioSelectButton20Ytop + 0113513ScenarioSelectButton20XLeft: equ 1863514ScenarioSelectButton20XRight: equ ScenarioSelectButton20XLeft + 0563516ScenarioSelectButton21Ytop: equ 103 + (1*12)3517ScenarioSelectButton21YBottom: equ ScenarioSelectButton21Ytop + 0113518ScenarioSelectButton21XLeft: equ 1863519ScenarioSelectButton21XRight: equ ScenarioSelectButton21XLeft + 0563521ScenarioSelectButton22Ytop: equ 103 + (2*12)3522ScenarioSelectButton22YBottom: equ ScenarioSelectButton22Ytop + 0113523ScenarioSelectButton22XLeft: equ 1863524ScenarioSelectButton22XRight: equ ScenarioSelectButton22XLeft + 0563526ScenarioSelectButton23Ytop: equ 103 + (3*12)3527ScenarioSelectButton23YBottom: equ ScenarioSelectButton23Ytop + 0113528ScenarioSelectButton23XLeft: equ 1863529ScenarioSelectButton23XRight: equ ScenarioSelectButton23XLeft + 0563530 3531ScenarioSelectButton24Ytop: equ 1603532ScenarioSelectButton24YBottom: equ ScenarioSelectButton24Ytop + 0183533ScenarioSelectButton24XLeft: equ 1583534ScenarioSelectButton24XRight: equ ScenarioSelectButton24XLeft + 0163536ScenarioSelectButton25Ytop: equ 1603537ScenarioSelectButton25YBottom: equ ScenarioSelectButton25Ytop + 0183538ScenarioSelectButton25XLeft: equ 1743539ScenarioSelectButton25XRight: equ ScenarioSelectButton25XLeft + 0183541ScenarioSelectButton26Ytop: equ 1603542ScenarioSelectButton26YBottom: equ ScenarioSelectButton26Ytop + 0183543ScenarioSelectButton26XLeft: equ 1923544ScenarioSelectButton26XRight: equ ScenarioSelectButton26XLeft + 0163546ScenarioSelectButton27Ytop: equ 1603547ScenarioSelectButton27YBottom: equ ScenarioSelectButton27Ytop + 0183548ScenarioSelectButton27XLeft: equ 2083549ScenarioSelectButton27XRight: equ ScenarioSelectButton27XLeft + 0183551ScenarioSelectButton28Ytop: equ 1603552ScenarioSelectButton28YBottom: equ ScenarioSelectButton28Ytop + 0183553ScenarioSelectButton28XLeft: equ 2263554ScenarioSelectButton28XRight: equ ScenarioSelectButton28XLeft + 0163556ScenarioSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock3557ScenarioSelectButtonTableAmountOfButtons: db 283558ScenarioSelectButtonTable: 3560 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton1Ytop,ScenarioSelectButton1YBottom,ScenarioSelectButton1XLeft,ScenarioSelectButton1XRight | dw $0000 + (ScenarioSelectButton1Ytop*128) + (ScenarioSelectButton1XLeft/2) - 128 3561 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton2Ytop,ScenarioSelectButton2YBottom,ScenarioSelectButton2XLeft,ScenarioSelectButton2XRight | dw $0000 + (ScenarioSelectButton2Ytop*128) + (ScenarioSelectButton2XLeft/2) - 128 3562 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton3Ytop,ScenarioSelectButton3YBottom,ScenarioSelectButton3XLeft,ScenarioSelectButton3XRight | dw $0000 + (ScenarioSelectButton3Ytop*128) + (ScenarioSelectButton3XLeft/2) - 1283563 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton4Ytop,ScenarioSelectButton4YBottom,ScenarioSelectButton4XLeft,ScenarioSelectButton4XRight | dw $0000 + (ScenarioSelectButton4Ytop*128) + (ScenarioSelectButton4XLeft/2) - 1283564 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton5Ytop,ScenarioSelectButton5YBottom,ScenarioSelectButton5XLeft,ScenarioSelectButton5XRight | dw $0000 + (ScenarioSelectButton5Ytop*128) + (ScenarioSelectButton5XLeft/2) - 1283565 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton6Ytop,ScenarioSelectButton6YBottom,ScenarioSelectButton6XLeft,ScenarioSelectButton6XRight | dw $0000 + (ScenarioSelectButton6Ytop*128) + (ScenarioSelectButton6XLeft/2) - 1283566 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton7Ytop,ScenarioSelectButton7YBottom,ScenarioSelectButton7XLeft,ScenarioSelectButton7XRight | dw $0000 + (ScenarioSelectButton7Ytop*128) + (ScenarioSelectButton7XLeft/2) - 1283567 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton8Ytop,ScenarioSelectButton8YBottom,ScenarioSelectButton8XLeft,ScenarioSelectButton8XRight | dw $0000 + (ScenarioSelectButton8Ytop*128) + (ScenarioSelectButton8XLeft/2) - 1283568 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton9Ytop,ScenarioSelectButton9YBottom,ScenarioSelectButton9XLeft,ScenarioSelectButton9XRight | dw $0000 + (ScenarioSelectButton9Ytop*128) + (ScenarioSelectButton9XLeft/2) - 1283569 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db ScenarioSelectButton10Ytop,ScenarioSelectButton10YBottom,ScenarioSelectButton10XLeft,ScenarioSelectButton10XRight | dw $0000 + (ScenarioSelectButton10Ytop*128) + (ScenarioSelectButton10XLeft/2) - 1283570 3571 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton11Ytop,ScenarioSelectButton11YBottom,ScenarioSelectButton11XLeft,ScenarioSelectButton11XRight | dw $0000 + (ScenarioSelectButton11Ytop*128) + (ScenarioSelectButton11XLeft/2) - 1283572 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton12Ytop,ScenarioSelectButton12YBottom,ScenarioSelectButton12XLeft,ScenarioSelectButton12XRight | dw $0000 + (ScenarioSelectButton12Ytop*128) + (ScenarioSelectButton12XLeft/2) - 1283573 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db ScenarioSelectButton13Ytop,ScenarioSelectButton13YBottom,ScenarioSelectButton13XLeft,ScenarioSelectButton13XRight | dw $0000 + (ScenarioSelectButton13Ytop*128) + (ScenarioSelectButton13XLeft/2) - 1283574 3575 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db ScenarioSelectButton14Ytop,ScenarioSelectButton14YBottom,ScenarioSelectButton14XLeft,ScenarioSelectButton14XRight | dw $0000 + (ScenarioSelectButton14Ytop*128) + (ScenarioSelectButton14XLeft/2) - 1283576 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db ScenarioSelectButton15Ytop,ScenarioSelectButton15YBottom,ScenarioSelectButton15XLeft,ScenarioSelectButton15XRight | dw $0000 + (ScenarioSelectButton15Ytop*128) + (ScenarioSelectButton15XLeft/2) - 1283577 3578 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton16Ytop,ScenarioSelectButton16YBottom,ScenarioSelectButton16XLeft,ScenarioSelectButton16XRight | dw $0000 + (ScenarioSelectButton16Ytop*128) + (ScenarioSelectButton16XLeft/2) - 1283579 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton17Ytop,ScenarioSelectButton17YBottom,ScenarioSelectButton17XLeft,ScenarioSelectButton17XRight | dw $0000 + (ScenarioSelectButton17Ytop*128) + (ScenarioSelectButton17XLeft/2) - 1283580 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton18Ytop,ScenarioSelectButton18YBottom,ScenarioSelectButton18XLeft,ScenarioSelectButton18XRight | dw $0000 + (ScenarioSelectButton18Ytop*128) + (ScenarioSelectButton18XLeft/2) - 1283581 db %1100 0011 | dw $4000 + (040*128) + (170/2) - 128 | dw $4000 + (040*128) + (198/2) - 128 | dw $4000 + (040*128) + (226/2) - 128 | db ScenarioSelectButton19Ytop,ScenarioSelectButton19YBottom,ScenarioSelectButton19XLeft,ScenarioSelectButton19XRight | dw $0000 + (ScenarioSelectButton19Ytop*128) + (ScenarioSelectButton19XLeft/2) - 1283582 3583 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton20Ytop,ScenarioSelectButton20YBottom,ScenarioSelectButton20XLeft,ScenarioSelectButton20XRight | dw $0000 + (ScenarioSelectButton20Ytop*128) + (ScenarioSelectButton20XLeft/2) - 1283584 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton21Ytop,ScenarioSelectButton21YBottom,ScenarioSelectButton21XLeft,ScenarioSelectButton21XRight | dw $0000 + (ScenarioSelectButton21Ytop*128) + (ScenarioSelectButton21XLeft/2) - 1283585 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton22Ytop,ScenarioSelectButton22YBottom,ScenarioSelectButton22XLeft,ScenarioSelectButton22XRight | dw $0000 + (ScenarioSelectButton22Ytop*128) + (ScenarioSelectButton22XLeft/2) - 1283586 db %1100 0011 | dw $4000 + (000*128) + (192/2) - 128 | dw $4000 + (011*128) + (192/2) - 128 | dw $4000 + (040*128) + (114/2) - 128 | db ScenarioSelectButton23Ytop,ScenarioSelectButton23YBottom,ScenarioSelectButton23XLeft,ScenarioSelectButton23XRight | dw $0000 + (ScenarioSelectButton23Ytop*128) + (ScenarioSelectButton23XLeft/2) - 1283587 3588 .DifficultyButtons:3589 db %1100 0011 | dw $4000 + (022*128) + (000/2) - 128 | dw $4000 + (022*128) + (016/2) - 128 | dw $4000 + (022*128) + (032/2) - 128 | db ScenarioSelectButton24Ytop,ScenarioSelectButton24YBottom,ScenarioSelectButton24XLeft,ScenarioSelectButton24XRight | dw $0000 + (ScenarioSelectButton24Ytop*128) + (ScenarioSelectButton24XLeft/2) - 1283590 db %1100 0011 | dw $4000 + (022*128) + (048/2) - 128 | dw $4000 + (022*128) + (066/2) - 128 | dw $4000 + (022*128) + (084/2) - 128 | db ScenarioSelectButton25Ytop,ScenarioSelectButton25YBottom,ScenarioSelectButton25XLeft,ScenarioSelectButton25XRight | dw $0000 + (ScenarioSelectButton25Ytop*128) + (ScenarioSelectButton25XLeft/2) - 1283591 db %1100 0011 | dw $4000 + (022*128) + (102/2) - 128 | dw $4000 + (022*128) + (118/2) - 128 | dw $4000 + (022*128) + (134/2) - 128 | db ScenarioSelectButton26Ytop,ScenarioSelectButton26YBottom,ScenarioSelectButton26XLeft,ScenarioSelectButton26XRight | dw $0000 + (ScenarioSelectButton26Ytop*128) + (ScenarioSelectButton26XLeft/2) - 1283592 db %1100 0011 | dw $4000 + (022*128) + (150/2) - 128 | dw $4000 + (022*128) + (168/2) - 128 | dw $4000 + (022*128) + (186/2) - 128 | db ScenarioSelectButton27Ytop,ScenarioSelectButton27YBottom,ScenarioSelectButton27XLeft,ScenarioSelectButton27XRight | dw $0000 + (ScenarioSelectButton27Ytop*128) + (ScenarioSelectButton27XLeft/2) - 1283593 db %1100 0011 | dw $4000 + (022*128) + (204/2) - 128 | dw $4000 + (022*128) + (220/2) - 128 | dw $4000 + (022*128) + (236/2) - 128 | db ScenarioSelectButton28Ytop,ScenarioSelectButton28YBottom,ScenarioSelectButton28XLeft,ScenarioSelectButton28XRight | dw $0000 + (ScenarioSelectButton28Ytop*128) + (ScenarioSelectButton28XLeft/2) - 1283599 3600CampaignSelectButton1Ytop: equ 043 + (0*13)3601CampaignSelectButton1YBottom: equ CampaignSelectButton1Ytop + 0113602CampaignSelectButton1XLeft: equ 0183603CampaignSelectButton1XRight: equ CampaignSelectButton1XLeft + 0963605CampaignSelectButton2Ytop: equ 043 + (1*13)3606CampaignSelectButton2YBottom: equ CampaignSelectButton2Ytop + 0113607CampaignSelectButton2XLeft: equ 0183608CampaignSelectButton2XRight: equ CampaignSelectButton2XLeft + 0963610CampaignSelectButton3Ytop: equ 043 + (2*13)3611CampaignSelectButton3YBottom: equ CampaignSelectButton3Ytop + 0113612CampaignSelectButton3XLeft: equ 0183613CampaignSelectButton3XRight: equ CampaignSelectButton3XLeft + 0963615CampaignSelectButton4Ytop: equ 043 + (3*13)3616CampaignSelectButton4YBottom: equ CampaignSelectButton4Ytop + 0113617CampaignSelectButton4XLeft: equ 0183618CampaignSelectButton4XRight: equ CampaignSelectButton4XLeft + 0963620CampaignSelectButton5Ytop: equ 043 + (4*13)3621CampaignSelectButton5YBottom: equ CampaignSelectButton5Ytop + 0113622CampaignSelectButton5XLeft: equ 0183623CampaignSelectButton5XRight: equ CampaignSelectButton5XLeft + 0963625CampaignSelectButton6Ytop: equ 043 + (5*13)3626CampaignSelectButton6YBottom: equ CampaignSelectButton6Ytop + 0113627CampaignSelectButton6XLeft: equ 0183628CampaignSelectButton6XRight: equ CampaignSelectButton6XLeft + 0963630CampaignSelectButton7Ytop: equ 043 + (6*13)3631CampaignSelectButton7YBottom: equ CampaignSelectButton7Ytop + 0113632CampaignSelectButton7XLeft: equ 0183633CampaignSelectButton7XRight: equ CampaignSelectButton7XLeft + 0963635CampaignSelectButton8Ytop: equ 043 + (7*13)3636CampaignSelectButton8YBottom: equ CampaignSelectButton8Ytop + 0113637CampaignSelectButton8XLeft: equ 0183638CampaignSelectButton8XRight: equ CampaignSelectButton8XLeft + 0963640CampaignSelectButton9Ytop: equ 043 + (8*13)3641CampaignSelectButton9YBottom: equ CampaignSelectButton9Ytop + 0113642CampaignSelectButton9XLeft: equ 0183643CampaignSelectButton9XRight: equ CampaignSelectButton9XLeft + 0963645CampaignSelectButton10Ytop: equ 043 + (9*13)3646CampaignSelectButton10YBottom: equ CampaignSelectButton10Ytop + 0113647CampaignSelectButton10XLeft: equ 0183648CampaignSelectButton10XRight: equ CampaignSelectButton10XLeft + 0963649 3650CampaignSelectButton11Ytop: equ 1733651CampaignSelectButton11YBottom: equ CampaignSelectButton11Ytop + 0113652CampaignSelectButton11XLeft: equ 032-63653CampaignSelectButton11XRight: equ CampaignSelectButton11XLeft + 0323655CampaignSelectButton12Ytop: equ 1733656CampaignSelectButton12YBottom: equ CampaignSelectButton12Ytop + 0113657CampaignSelectButton12XLeft: equ 066-63658CampaignSelectButton12XRight: equ CampaignSelectButton12XLeft + 0323660CampaignSelectButton13Ytop: equ 1733661CampaignSelectButton13YBottom: equ CampaignSelectButton13Ytop + 0113662CampaignSelectButton13XLeft: equ 100-63663CampaignSelectButton13XRight: equ CampaignSelectButton13XLeft + 0323664 3665CampaignSelectButton14Ytop: equ 1913666CampaignSelectButton14YBottom: equ CampaignSelectButton14Ytop + 0153667CampaignSelectButton14XLeft: equ 1063668CampaignSelectButton14XRight: equ CampaignSelectButton14XLeft + 0203670CampaignSelectButton15Ytop: equ 1913671CampaignSelectButton15YBottom: equ CampaignSelectButton15Ytop + 0153672CampaignSelectButton15XLeft: equ 1323673CampaignSelectButton15XRight: equ CampaignSelectButton15XLeft + 0183675CampaignSelectButtonTableGfxBlock: db ScenarioSelectButtonsBlock3676CampaignSelectButtonTableAmountOfButtons: db 153677CampaignSelectButtonTable: 3679 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton1Ytop,CampaignSelectButton1YBottom,CampaignSelectButton1XLeft,CampaignSelectButton1XRight | dw $0000 + (CampaignSelectButton1Ytop*128) + (CampaignSelectButton1XLeft/2) - 128 3680 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton2Ytop,CampaignSelectButton2YBottom,CampaignSelectButton2XLeft,CampaignSelectButton2XRight | dw $0000 + (CampaignSelectButton2Ytop*128) + (CampaignSelectButton2XLeft/2) - 128 3681 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton3Ytop,CampaignSelectButton3YBottom,CampaignSelectButton3XLeft,CampaignSelectButton3XRight | dw $0000 + (CampaignSelectButton3Ytop*128) + (CampaignSelectButton3XLeft/2) - 1283682 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton4Ytop,CampaignSelectButton4YBottom,CampaignSelectButton4XLeft,CampaignSelectButton4XRight | dw $0000 + (CampaignSelectButton4Ytop*128) + (CampaignSelectButton4XLeft/2) - 1283683 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton5Ytop,CampaignSelectButton5YBottom,CampaignSelectButton5XLeft,CampaignSelectButton5XRight | dw $0000 + (CampaignSelectButton5Ytop*128) + (CampaignSelectButton5XLeft/2) - 1283684 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton6Ytop,CampaignSelectButton6YBottom,CampaignSelectButton6XLeft,CampaignSelectButton6XRight | dw $0000 + (CampaignSelectButton6Ytop*128) + (CampaignSelectButton6XLeft/2) - 1283685 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton7Ytop,CampaignSelectButton7YBottom,CampaignSelectButton7XLeft,CampaignSelectButton7XRight | dw $0000 + (CampaignSelectButton7Ytop*128) + (CampaignSelectButton7XLeft/2) - 1283686 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton8Ytop,CampaignSelectButton8YBottom,CampaignSelectButton8XLeft,CampaignSelectButton8XRight | dw $0000 + (CampaignSelectButton8Ytop*128) + (CampaignSelectButton8XLeft/2) - 1283687 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton9Ytop,CampaignSelectButton9YBottom,CampaignSelectButton9XLeft,CampaignSelectButton9XRight | dw $0000 + (CampaignSelectButton9Ytop*128) + (CampaignSelectButton9XLeft/2) - 1283688 db %1100 0011 | dw $4000 + (000*128) + (000/2) - 128 | dw $4000 + (000*128) + (096/2) - 128 | dw $4000 + (011*128) + (000/2) - 128 | db CampaignSelectButton10Ytop,CampaignSelectButton10YBottom,CampaignSelectButton10XLeft,CampaignSelectButton10XRight | dw $0000 + (CampaignSelectButton10Ytop*128) + (CampaignSelectButton10XLeft/2) - 1283689 3690 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton11Ytop,CampaignSelectButton11YBottom,CampaignSelectButton11XLeft,CampaignSelectButton11XRight | dw $0000 + (CampaignSelectButton11Ytop*128) + (CampaignSelectButton11XLeft/2) - 1283691 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton12Ytop,CampaignSelectButton12YBottom,CampaignSelectButton12XLeft,CampaignSelectButton12XRight | dw $0000 + (CampaignSelectButton12Ytop*128) + (CampaignSelectButton12XLeft/2) - 1283692 db %1100 0011 | dw $4000 + (011*128) + (096/2) - 128 | dw $4000 + (011*128) + (128/2) - 128 | dw $4000 + (011*128) + (160/2) - 128 | db CampaignSelectButton13Ytop,CampaignSelectButton13YBottom,CampaignSelectButton13XLeft,CampaignSelectButton13XRight | dw $0000 + (CampaignSelectButton13Ytop*128) + (CampaignSelectButton13XLeft/2) - 1283693 3694 db %1100 0011 | dw $4000 + (040*128) + (000/2) - 128 | dw $4000 + (040*128) + (020/2) - 128 | dw $4000 + (040*128) + (040/2) - 128 | db CampaignSelectButton14Ytop,CampaignSelectButton14YBottom,CampaignSelectButton14XLeft,CampaignSelectButton14XRight | dw $0000 + (CampaignSelectButton14Ytop*128) + (CampaignSelectButton14XLeft/2) - 1283695 db %1100 0011 | dw $4000 + (040*128) + (060/2) - 128 | dw $4000 + (040*128) + (078/2) - 128 | dw $4000 + (040*128) + (096/2) - 128 | db CampaignSelectButton15Ytop,CampaignSelectButton15YBottom,CampaignSelectButton15XLeft,CampaignSelectButton15XRight | dw $0000 + (CampaignSelectButton15Ytop*128) + (CampaignSelectButton15XLeft/2) - 1283698PutPlayer4Buttons:3699 ld hl,$4000 + (139*128) + (158/2) - 1283700 ld de,$0000 + (139*128) + (158/2) - 1283701 ld bc,$0000 + (011*256) + (084/2)3702 ld a,ScenarioSelectBlock 3703 jp CopyRamToVramCorrectedCastleOverview 3705PutPlayer1and2Buttons:3706 ld hl,$4000 + (103*128) + (158/2) - 1283707 ld de,$0000 + (103*128) + (158/2) - 1283708 ld bc,$0000 + (023*256) + (084/2)3709 ld a,ScenarioSelectBlock 3710 jp CopyRamToVramCorrectedCastleOverview 3712PutPlayer3Buttons:3713 ld hl,$4000 + (127*128) + (158/2) - 1283714 ld de,$0000 + (127*128) + (158/2) - 1283715 ld bc,$0000 + (011*256) + (084/2)3716 ld a,ScenarioSelectBlock 3717 jp CopyRamToVramCorrectedCastleOverview 3719ClearPlayerButtons:3720 ld hl,$4000 + (075*128) + (024/2) - 1283721 ld de,$0000 + (103*128) + (158/2) - 1283722 ld bc,$0000 + (047*256) + (084/2)3723 ld a,ScenarioSelectBlock 3724 jp CopyRamToVramCorrectedCastleOverview 3726ClearScenarioNameRightTopOfScreen:3727 ld hl,$4000 + (019*128) + (158/2) - 1283728 ld de,$0000 + (019*128) + (158/2) - 1283729 ld bc,$0000 + (009*256) + (088/2)3730 ld a,ScenarioSelectBlock 3731 jp CopyRamToVramCorrectedCastleOverview 3733ClearCampaignNameAndDescriptionRightTopOfScreen:3734 ld hl,$4000 + (019*128) + (148/2) - 1283735 ld de,$0000 + (019*128) + (148/2) - 1283736 ld bc,$0000 + (166*256) + (098/2)3737 ld a,CampaignSelectBlock 3738 jp CopyRamToVramCorrectedCastleOverview 3740ClearDifficultyTextGraphics:3741 ld hl,$4000 + (179*128) + (168/2) - 1283742 ld de,$0000 + (179*128) + (168/2) - 1283743 ld bc,$0000 + (006*256) + (068/2)3744 ld a,ScenarioSelectBlock 3745 jp CopyRamToVramCorrectedCastleOverview 3747ClearScenarioButtonGraphics:3748 ld hl,$4000 + (043*128) + (020/2) - 1283749 ld de,$0000 + (043*128) + (020/2) - 1283750 ld bc,$0000 + (128*256) + (126/2)3751 ld a,ScenarioSelectBlock 3752 jp CopyRamToVramCorrectedCastleOverview 3754ClearCampaignButtonGraphics:3755 ld hl,$4000 + (040*128) + (018/2) - 1283756 ld de,$0000 + (040*128) + (018/2) - 1283757 ld bc,$0000 + (131*256) + (116/2)3758 ld a,CampaignSelectBlock 3759 jp CopyRamToVramCorrectedCastleOverview 3761SetLoadGameGraphics:3762 ld hl,$4000 + (000*128) + (000/2) - 1283763 ld de,$0000 + (000*128) + (000/2) - 1283764 ld bc,$0000 + (212*256) + (256/2)3765 ld a,LoadGameBlock 3766 jp CopyRamToVramCorrectedCastleOverview 3768SetScenarioSelectGraphics:3769 ld hl,$4000 + (000*128) + (000/2) - 1283770 ld de,$0000 + (000*128) + (000/2) - 1283771 ld bc,$0000 + (212*256) + (256/2)3772 ld a,ScenarioSelectBlock 3773 jp CopyRamToVramCorrectedCastleOverview 3775SetFontPage0Y212: 3776 ld hl,$4000 + (000*128) + (000/2) - 1283777 ld de,$0000 + (212*128) + (000/2) - 1283778 ld bc,$0000 + (006*256) + (256/2)3779 ld a,CastleOverviewFontBlock 3780 jp CopyRamToVramCorrectedWithoutActivePageSetting 3782SetCampaignSelectGraphics:3783 ld hl,$4000 + (000*128) + (000/2) - 1283784 ld de,$0000 + (000*128) + (000/2) - 1283785 ld bc,$0000 + (212*256) + (256/2)3786 ld a,CampaignSelectBlock 3787 jp CopyRamToVramCorrectedCastleOverview 3789SetTitleScreenGraphics:3790 ld hl,$4000 + (000*128) + (000/2) - 1283791 ld de,$0000 + (000*128) + (000/2) - 1283792 ld bc,$0000 + (212*256) + (256/2)3793 ld a,TitleScreenGraphicsBlock 3794 jp CopyRamToVramCorrectedCastleOverview 3797MSXHeroes.asm 1179 ds $c000-$,$ff1180dephase11821185BattleMonsterSpriteSheet9Block: equ $6d1186phase $40001187 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9.SC5",7,208 * 128 1188 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet9Bottom48Lines.SC5",7,048 * 128 1189 ds $c000-$,$ff1190dephase11921195BattleMonsterSpriteSheet10Block: equ $6f1196phase $40001197 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10.SC5",7,208 * 128 1198 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet10Bottom48Lines.SC5",7,048 * 128 1199 ds $c000-$,$ff1200dephase12021205BattleMonsterSpriteSheet11Block: equ $711206phase $40001207 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11.SC5",7,208 * 128 1208 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet11Bottom48Lines.SC5",7,048 * 128 1209 ds $c000-$,$ff1210dephase12121215BattleMonsterSpriteSheet12Block: equ $731216phase $40001217 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12.SC5",7,208 * 128 1218 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet12Bottom48Lines.SC5",7,048 * 128 1219 ds $c000-$,$ff1220dephase12221225BattleMonsterSpriteSheet13Block: equ $751226phase $40001227 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13.SC5",7,208 * 128 1228 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet13Bottom48Lines.SC5",7,048 * 128 1229 ds $c000-$,$ff1230dephase12321235BattleMonsterSpriteSheet14Block: equ $771236phase $40001237 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14.SC5",7,208 * 128 1238 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet14Bottom48Lines.SC5",7,048 * 128 1239 ds $c000-$,$ff1240dephase12421245BattleMonsterSpriteSheet15Block: equ $791246phase $40001247 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15.SC5",7,208 * 128 1248 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet15Bottom48Lines.SC5",7,048 * 128 1249 ds $c000-$,$ff1250dephase12521255BattleMonsterSpriteSheet16Block: equ $7b1256phase $40001257 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16.SC5",7,208 * 128 1258 incbin "..\grapx\MonsterSprites\BattleMonstersSpriteSheet16Bottom48Lines.SC5",7,048 * 128 1259 ds $c000-$,$ff1260dephase12621265BattleMonsterSpriteSheet17Block: equ $7d1266phase $400012671269 ds $c000-$,$ff1270dephase12721275BattleMonsterSpriteSheet18Block: equ $7f1276phase $400012771279 ds $c000-$,$ff1280dephase12821285CastleOverviewBlock: equ $811286phase $40001287 incbin "..\grapx\CastleOverview\CastleOverview.SC5",7,212 * 128 1288 ds $c000-$,$ff1289dephase12911294RecruitCreatures4MonstersBlock: equ $831295phase $40001296 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster1.SC5",7,30 * 128 1297 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster2.SC5",7,30 * 128 1298 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster3.SC5",7,30 * 128 1299 incbin "..\grapx\CastleOverview\RecruitCreaturesMonster4.SC5",7,30 * 128 1300 ds $8000-$,$ff1301dephase13031306SpellAnimations16Block: equ $841307phase $40001308 incbin "..\grapx\BattleField\SpellAnimations16.SC5",7,128 * 128 1309 ds $8000-$,$ff1310dephase13121315ScenarioSelectButtonsBlock: equ $851316TitleScreenButtonsBlock: equ $851317phase $40001318 incbin "..\grapx\TitleScreen\ScenarioSelectButtons.SC5",7,172 * 128 1319 incbin "..\grapx\TitleScreen\TitleScreenButtons.SC5",7,76 * 128 1320 ds $c000-$,$ff1321dephase13231326ScenarioSelectBlock: equ $871327phase $40001328 incbin "..\grapx\TitleScreen\ScenarioSelect.SC5",7,212 * 128 1329 ds $c000-$,$ff1330dephase13321335SpellAnimations15Block: equ $891336phase $40001337 incbin "..\grapx\BattleField\SpellAnimations15.SC5",7,128 * 128 1338 ds $8000-$,$ff1339dephase13411344TilesGentleBlock: equ $8a1345phase $40001346 incbin "..\grapx\tilesheets\TilesGentle.SC5",7,208 * 128 1347 incbin "..\grapx\tilesheets\TilesGentleBottom48Lines.SC5",7,48 * 128 1348 ds $c000-$,$ff1349dephase13511354TilesGentleDesertBlock: equ $8c1355phase $40001356 incbin "..\grapx\tilesheets\TilesGentleDesert.SC5",7,208 * 128 1357 incbin "..\grapx\tilesheets\TilesGentleDesertBottom48Lines.SC5",7,48 * 128 1358 ds $c000-$,$ff1359dephase13611364TilesGentleAutumnBlock: equ $8e1365phase $40001366 incbin "..\grapx\tilesheets\TilesGentleAutumn.SC5",7,208 * 128 1367 incbin "..\grapx\tilesheets\TilesGentleAutumnBottom48Lines.SC5",7,48 * 128 1368 ds $c000-$,$ff1369dephase13711374TilesGentleWinterBlock: equ $901375phase $40001376 incbin "..\grapx\tilesheets\TilesGentleWinter.SC5",7,208 * 128 1377 incbin "..\grapx\tilesheets\TilesGentleWinterBottom48Lines.SC5",7,48 * 128 1378 ds $c000-$,$ff1379dephase13811384TilesGentleJungleBlock: equ $921385phase $40001386 incbin "..\grapx\tilesheets\TilesGentleJungle.SC5",7,208 * 128 1387 incbin "..\grapx\tilesheets\TilesGentleJungleBottom48Lines.SC5",7,48 * 128 1388 ds $c000-$,$ff1389dephase13911394TilesGentleCaveBlock: equ $941395phase $40001396 incbin "..\grapx\tilesheets\TilesGentleCave.SC5",7,208 * 128 1397 incbin "..\grapx\tilesheets\TilesGentleCaveBottom48Lines.SC5",7,48 * 128 1398 ds $c000-$,$ff1399dephase14011404GentleDesertMap01MapBlock: equ $961405GentleDesertMap01ObjectLayerMapBlock: equ $961406GentleDesertMap02MapBlock: equ $961407GentleDesertMap02ObjectLayerMapBlock: equ $961408GentleDesertMap03MapBlock: equ $961409GentleDesertMap03ObjectLayerMapBlock: equ $961410GentleDesertMap04MapBlock: equ $961411GentleDesertMap04ObjectLayerMapBlock: equ $961413phase $40001414GentleDesertMap01Map:1415 incbin "..\maps\GentleDesertMap01.map.pck"1416GentleDesertMap01ObjectLayerMap:1417 incbin "..\maps\GentleDesertMap01objects.map.pck"1418GentleDesertMap02Map:1419 incbin "..\maps\GentleDesertMap02.map.pck"1420GentleDesertMap02ObjectLayerMap:1421 incbin "..\maps\GentleDesertMap02objects.map.pck"1422GentleDesertMap03Map:1423 incbin "..\maps\GentleDesertMap03.map.pck"1424GentleDesertMap03ObjectLayerMap:1425 incbin "..\maps\GentleDesertMap03objects.map.pck"1426GentleDesertMap04Map:1427 incbin "..\maps\GentleDesertMap04.map.pck"1428GentleDesertMap04ObjectLayerMap:1429 incbin "..\maps\GentleDesertMap04objects.map.pck"1430 ds $8000-$,$ff1431dephase14331436GentleWinterMap01MapBlock: equ $971437GentleWinterMap01ObjectLayerMapBlock: equ $971438GentleWinterMap02MapBlock: equ $971439GentleWinterMap02ObjectLayerMapBlock: equ $971440GentleWinterMap03MapBlock: equ $971441GentleWinterMap03ObjectLayerMapBlock: equ $971442GentleDesertMap05MapBlock: equ $971443GentleDesertMap05ObjectLayerMapBlock: equ $971445phase $40001446GentleDesertMap05Map:1447 incbin "..\maps\GentleDesertMap05.map.pck"1448GentleDesertMap05ObjectLayerMap:1449 incbin "..\maps\GentleDesertMap05objects.map.pck"1450GentleWinterMap01Map:1451 incbin "..\maps\GentleWinterMap01.map.pck"1452GentleWinterMap01ObjectLayerMap:1453 incbin "..\maps\GentleWinterMap01objects.map.pck"1454GentleWinterMap02Map:1455 incbin "..\maps\GentleWinterMap02.map.pck"1456GentleWinterMap02ObjectLayerMap:1457 incbin "..\maps\GentleWinterMap02objects.map.pck"1458GentleWinterMap03Map:1459 incbin "..\maps\GentleWinterMap03.map.pck"1460GentleWinterMap03ObjectLayerMap:1461 incbin "..\maps\GentleWinterMap03objects.map.pck"1462 ds $8000-$,$ff1463dephase14651468GentleWinterMap04MapBlock: equ $981469GentleWinterMap04ObjectLayerMapBlock: equ $981470GentleWinterMap05MapBlock: equ $981471GentleWinterMap05ObjectLayerMapBlock: equ $981472GentleMap01MapBlock: equ $981473GentleMap01ObjectLayerMapBlock: equ $981474phase $40001475GentleWinterMap04Map:1476 incbin "..\maps\GentleWinterMap04.map.pck"1477GentleWinterMap04ObjectLayerMap:1478 incbin "..\maps\GentleWinterMap04objects.map.pck"1479GentleWinterMap05Map:1480 incbin "..\maps\GentleWinterMap05.map.pck"1481GentleWinterMap05ObjectLayerMap:1482 incbin "..\maps\GentleWinterMap05objects.map.pck"1483GentleMap01Map:1484 incbin "..\maps\GentleMap01.map.pck"1485GentleMap01ObjectLayerMap:1486 incbin "..\maps\GentleMap01objects.map.pck"1487 ds $8000-$,$ff1488dephase14901493GentleJungleMap01MapBlock: equ $991494GentleJungleMap01ObjectLayerMapBlock: equ $991495GentleJungleMap02MapBlock: equ $991496GentleJungleMap02ObjectLayerMapBlock: equ $991497GentleJungleMap03MapBlock: equ $991498GentleJungleMap03ObjectLayerMapBlock: equ $991500phase $40001501GentleJungleMap01Map:1502 incbin "..\maps\GentleJungleMap01.map.pck"1503GentleJungleMap01ObjectLayerMap:1504 incbin "..\maps\GentleJungleMap01objects.map.pck"1505GentleJungleMap02Map:1506 incbin "..\maps\GentleJungleMap02.map.pck"1507GentleJungleMap02ObjectLayerMap:1508 incbin "..\maps\GentleJungleMap02objects.map.pck"1509GentleJungleMap03Map:1510 incbin "..\maps\GentleJungleMap03.map.pck"1511GentleJungleMap03ObjectLayerMap:1512 incbin "..\maps\GentleJungleMap03objects.map.pck"1513 ds $8000-$,$ff1514dephase15161519GentleJungleMap04MapBlock: equ $9a1520GentleJungleMap04ObjectLayerMapBlock: equ $9a1521GentleJungleMap05MapBlock: equ $9a1522GentleJungleMap05ObjectLayerMapBlock: equ $9a1524phase $40001525GentleJungleMap04Map:1526 incbin "..\maps\GentleJungleMap04.map.pck"1527GentleJungleMap04ObjectLayerMap:1528 incbin "..\maps\GentleJungleMap04objects.map.pck"1529GentleJungleMap05Map:1530 incbin "..\maps\GentleJungleMap05.map.pck"1531GentleJungleMap05ObjectLayerMap:1532 incbin "..\maps\GentleJungleMap05objects.map.pck"1533 ds $8000-$,$ff1534dephase15361539GentleAutumnMap01MapBlock: equ $9b1540GentleAutumnMap01ObjectLayerMapBlock: equ $9b1541GentleAutumnMap02MapBlock: equ $9b1542GentleAutumnMap02ObjectLayerMapBlock: equ $9b1543GentleAutumnMap03MapBlock: equ $9b1544GentleAutumnMap03ObjectLayerMapBlock: equ $9b1546phase $40001547GentleAutumnMap01Map:1548 incbin "..\maps\GentleAutumnMap01.map.pck"1549GentleAutumnMap01ObjectLayerMap:1550 incbin "..\maps\GentleAutumnMap01objects.map.pck"1551GentleAutumnMap02Map:1552 incbin "..\maps\GentleAutumnMap02.map.pck"1553GentleAutumnMap02ObjectLayerMap:1554 incbin "..\maps\GentleAutumnMap02objects.map.pck"1555GentleAutumnMap03Map:1556 incbin "..\maps\GentleAutumnMap03.map.pck"1557GentleAutumnMap03ObjectLayerMap:1558 incbin "..\maps\GentleAutumnMap03objects.map.pck"1559 ds $8000-$,$ff1560dephase15621565GentleAutumnMap04MapBlock: equ $9c1566GentleAutumnMap04ObjectLayerMapBlock: equ $9c1567GentleAutumnMap05MapBlock: equ $9c1568GentleAutumnMap05ObjectLayerMapBlock: equ $9c1569GentleCaveMap01MapBlock: equ $9c1570GentleCaveMap01ObjectLayerMapBlock: equ $9c1572phase $40001573GentleAutumnMap04Map:1574 incbin "..\maps\GentleAutumnMap04.map.pck"1575GentleAutumnMap04ObjectLayerMap:1576 incbin "..\maps\GentleAutumnMap04objects.map.pck"1577GentleAutumnMap05Map:1578 incbin "..\maps\GentleAutumnMap05.map.pck"1579GentleAutumnMap05ObjectLayerMap:1580 incbin "..\maps\GentleAutumnMap05objects.map.pck"1581GentleCaveMap01Map:1582 incbin "..\maps\GentleCaveMap01.map.pck"1583GentleCaveMap01ObjectLayerMap:1584 incbin "..\maps\GentleCaveMap01objects.map.pck"1585 ds $8000-$,$ff1586dephase15881591GentleCaveMap02MapBlock: equ $9d1592GentleCaveMap02ObjectLayerMapBlock: equ $9d1593GentleCaveMap03MapBlock: equ $9d1594GentleCaveMap03ObjectLayerMapBlock: equ $9d1595GentleCaveMap04MapBlock: equ $9d1596GentleCaveMap04ObjectLayerMapBlock: equ $9d1597GentleCaveMap05MapBlock: equ $9d1598GentleCaveMap05ObjectLayerMapBlock: equ $9d1600phase $40001602GentleCaveMap02Map:1603 incbin "..\maps\GentleCaveMap02.map.pck"1604GentleCaveMap02ObjectLayerMap:1605 incbin "..\maps\GentleCaveMap02objects.map.pck"1606GentleCaveMap03Map:1607 incbin "..\maps\GentleCaveMap03.map.pck"1608GentleCaveMap03ObjectLayerMap:1609 incbin "..\maps\GentleCaveMap03objects.map.pck"1610GentleCaveMap04Map:1611 incbin "..\maps\GentleCaveMap04.map.pck"1612GentleCaveMap04ObjectLayerMap:1613 incbin "..\maps\GentleCaveMap04objects.map.pck"1614GentleCaveMap05Map:1615 incbin "..\maps\GentleCaveMap05.map.pck"1616GentleCaveMap05ObjectLayerMap:1617 incbin "..\maps\GentleCaveMap05objects.map.pck"1618 ds $8000-$,$ff1619dephase16211624GentleMap02MapBlock: equ $9e1625GentleMap02ObjectLayerMapBlock: equ $9e1626GentleMap03MapBlock: equ $9e1627GentleMap03ObjectLayerMapBlock: equ $9e1628GentleMap04MapBlock: equ $9e1629GentleMap04ObjectLayerMapBlock: equ $9e1630GentleMap05MapBlock: equ $9e1631GentleMap05ObjectLayerMapBlock: equ $9e1633phase $40001634GentleMap02Map:1635 incbin "..\maps\GentleMap02.map.pck"1636GentleMap02ObjectLayerMap:1637 incbin "..\maps\GentleMap02objects.map.pck"1638GentleMap03Map:1639 incbin "..\maps\GentleMap03.map.pck"1640GentleMap03ObjectLayerMap:1641 incbin "..\maps\GentleMap03objects.map.pck"1642GentleMap04Map:1643 incbin "..\maps\GentleMap04.map.pck"1644GentleMap04ObjectLayerMap:1645 incbin "..\maps\GentleMap04objects.map.pck"1646GentleMap05Map:1647 incbin "..\maps\GentleMap05.map.pck"1648GentleMap05ObjectLayerMap:1649 incbin "..\maps\GentleMap05objects.map.pck"1650 ds $8000-$,$ff1651dephase16531657phase $40001658 ds $c000-$,$ff1659dephase16611664BattleFieldDesertBlock: equ $a11665phase $40001666 incbin "..\grapx\BattleField\BattleFieldDesert.SC5",7,212 * 128 1667 ds $c000-$,$ff1668dephase16701673BattleFieldCaveBlock: equ $a31674phase $40001675 incbin "..\grapx\BattleField\BattleFieldCave.SC5",7,212 * 128 1676 ds $c000-$,$ff1677dephase16791682BattleFieldGentleBlock: equ $a51683phase $40001684 incbin "..\grapx\BattleField\BattleFieldGentle.SC5",7,212 * 128 1685 ds $c000-$,$ff1686dephase16881691BattleFieldAutumnBlock: equ $a71692phase $40001693 incbin "..\grapx\BattleField\BattleFieldAutumn.SC5",7,212 * 128 1694 ds $c000-$,$ff1695dephase16971700BattleFieldJungleBlock: equ $a91701phase $40001702 incbin "..\grapx\BattleField\BattleFieldJungle.SC5",7,212 * 128 1703 ds $c000-$,$ff1704dephase17061709SpellAnimationsBlock: equ $ab1710phase $40001711 incbin "..\grapx\BattleField\SpellAnimations1.SC5",7,212 * 128 1712 ds $c000-$,$ff1713dephase17151718SpellAnimations2Block: equ $ad1719phase $40001720 incbin "..\grapx\BattleField\SpellAnimations2.SC5",7,192 * 128 1721 incbin "..\grapx\BattleField\SpellAnimations2bottom64lines.SC5",7,064 * 128 1722 ds $c000-$,$ff1723dephase17251728SpellAnimations3Block: equ $af1729phase $40001730 incbin "..\grapx\BattleField\SpellAnimations3.SC5",7,128 * 128 1731 ds $8000-$,$ff1732dephase17341737SpellAnimations4Block: equ $b01738phase $40001739 incbin "..\grapx\BattleField\SpellAnimations4.SC5",7,128 * 128 1740 ds $8000-$,$ff1741dephase17431746SpellAnimations5Block: equ $b11747phase $40001748 incbin "..\grapx\BattleField\SpellAnimations5.SC5",7,128 * 128 1749 ds $8000-$,$ff1750dephase17521755SpellAnimations6Block: equ $b21756phase $40001757 incbin "..\grapx\BattleField\SpellAnimations6.SC5",7,128 * 128 1758 ds $8000-$,$ff1759dephase17611764SpellAnimations7Block: equ $b31765phase $40001766 incbin "..\grapx\BattleField\SpellAnimations7.SC5",7,128 * 128 1767 ds $8000-$,$ff1768dephase17701773SpellAnimations8Block: equ $b41774phase $40001775 incbin "..\grapx\BattleField\SpellAnimations8.SC5",7,128 * 128 1776 ds $8000-$,$ff1777dephase17791782SpellAnimations9Block: equ $b51783phase $40001784 incbin "..\grapx\BattleField\SpellAnimations9.SC5",7,128 * 128 1785 ds $8000-$,$ff1786dephase17881791SpellAnimations10Block: equ $b61792phase $40001793 incbin "..\grapx\BattleField\SpellAnimations10.SC5",7,128 * 128 1794 ds $8000-$,$ff1795dephase17971800SpellAnimations11Block: equ $b71801phase $40001802 incbin "..\grapx\BattleField\SpellAnimations11.SC5",7,128 * 128 1803 ds $8000-$,$ff1804dephase18061809SpellAnimations12Block: equ $b81810phase $40001811 incbin "..\grapx\BattleField\SpellAnimations12.SC5",7,128 * 128 1812 ds $8000-$,$ff1813dephase18151818SpellAnimations13Block: equ $b91819phase $40001820 incbin "..\grapx\BattleField\SpellAnimations13.SC5",7,128 * 128 1821 ds $8000-$,$ff1822dephase18241827SpellAnimations14Block: equ $ba1828phase $40001829 incbin "..\grapx\BattleField\SpellAnimations14.SC5",7,128 * 128 1830 ds $8000-$,$ff1831dephase18331836GentleAutumnMiniMapsBlock: equ $bb1837GentleCaveMiniMapsBlock: equ $bb1838GentleDesertMiniMapsBlock: equ $bb1839GentleJungleMiniMapsBlock: equ $bb1840GentleMiniMapsBlock: equ $bb1841phase $40001842 incbin "..\grapx\hud\GentleAutumnMiniMaps.SC5",7,48 * 128 1843 incbin "..\grapx\hud\GentleCaveMiniMaps.SC5",7,048 * 128 1844 incbin "..\grapx\hud\GentleDesertMiniMaps.SC5",7,048 * 128 1845 incbin "..\grapx\hud\GentleJungleMiniMaps.SC5",7,048 * 128 1846 incbin "..\grapx\hud\GentleMiniMaps.SC5",7,048 * 128 1847 ds $c000-$,$ff1848dephase18501853DiskMenuBlock: equ $bd1854phase $40001855 incbin "..\grapx\DiskMenu\DiskMenu.SC5",7,134 * 128 1856 ds $c000-$,$ff1857dephase18591862BattleFieldWinterBlock: equ $bf1863phase $40001864 incbin "..\grapx\BattleField\BattleFieldWinter.SC5",7,212 * 128 1865 ds $c000-$,$ff1866dephase18681869RomSize: equ 8*1024*1024 1870RomBlockSize: equ 16*1024 1871RomStartAddress: equ $40001873usas2sfx1repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1874 phase $00001875 incbin "usas2sfx1.rep"1876 dephase1877 DS RomBlockSize- $ and (RomBlockSize-1),-1 1879usas2sfx2repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1880 phase $00001881 incbin "usas2sfx2.rep"1882 dephase1883 DS RomBlockSize- $ and (RomBlockSize-1),-1 1885usas2repBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1886 phase $00001887 incbin "msxlegends.rep"1888 dephase1889 DS RomBlockSize- $ and (RomBlockSize-1),-1 1891LoadGameBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1892 phase $40001893 incbin "..\grapx\TitleScreen\LoadGame.SC5",7,212 * 128 1894 dephase1895 DS RomBlockSize- $ and (RomBlockSize-1),-1 1897SaveGameBlock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1898 phase $40001899 incbin "..\grapx\DiskMenu\SaveGame.SC5",7,192 * 128 1900 dephase1901 DS RomBlockSize- $ and (RomBlockSize-1),-1 1903CampaignInfoblock: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize1904 phase $40001905 CampaignInfo.asm1CampaignInfoLenght: equ Campaign02-Campaign012CampaignTextLenght: equ 3445Campaign01:6.StartingTowns: db 001,002,000,000 7.TavernHeroes: db 006,008,010,039,041,000,000,000,000,0008.Players: db 2,1,0,2,2 9.StartingResources:10.Gold: dw 2000011.Wood: dw 2012.Ore: dw 2013.Gems: dw 1014.Rubies: dw 1015.Castle1Player: db 116.Castle2Player: db 217.Castle3Player: db 25518.Castle4Player: db 25519.DaysToCompleteCampaign: db 4*3020.CampaignText: db "Find Pochi in the nothern castle ",2552122.P1hero1y: db 123.P1hero1x: db 124.P1hero1xp: dw 0 25.P1hero1move: db 20,2026.P1hero1mana: dw 10,1027.P1hero1manarec:db 5 28.P1hero1status: db 2 29.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 30.P1Hero1StatAttack: db 131.P1Hero1StatDefense: db 232.P1Hero1StatKnowledge: db 1 33.P1Hero1StatSpellDamage: db 1 34.P1HeroSkills: db 10,0,0,0,0,035.P1HeroLevel: db 136.P1EarthSpells: db %0000 0000 37.P1FireSpells: db %0000 000038.P1AirSpells: db %0000 000039.P1WaterSpells: db %0000 000040.P1AllSchoolsSpells: db %0000 000041.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 42.P1HeroSpecificInfo: dw HeroAddressesDrasle143.P1HeroDYDX: dw $ffff 45.P2hero1y: db 146.P2hero1x: db 147.P2hero1xp: dw 0 48.P2hero1move: db 20,2049.P2hero1mana: dw 10,1050.P2hero1manarec:db 5 51.P2hero1status: db 255 52.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw SDSnatcherUnitLevel1Growth | db SDSnatcherUnitLevel2Number | dw SDSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 53.P2Hero1StatAttack: db 154.P2Hero1StatDefense: db 255.P2Hero1StatKnowledge: db 1 56.P2Hero1StatSpellDamage: db 1 57.P2HeroSkills: db 01,0,0,0,0,058.P2HeroLevel: db 159.P2EarthSpells: db %0000 0000 60.P2FireSpells: db %0000 000061.P2AirSpells: db %0000 000062.P2WaterSpells: db %0000 000063.P2AllSchoolsSpells: db %0000 000064.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 65.P2HeroSpecificInfo: dw HeroAddressesSnatcher66.P2HeroDYDX: dw $ffff 68.P3hero1y: db 169.P3hero1x: db 170.P3hero1xp: dw 0 71.P3hero1move: db 20,2072.P3hero1mana: dw 10,1073.P3hero1manarec:db 5 74.P3hero1status: db 255 75.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 76.P3Hero1StatAttack: db 177.P3Hero1StatDefense: db 278.P3Hero1StatKnowledge: db 1 79.P3Hero1StatSpellDamage: db 1 80.P3HeroSkills: db 16,0,0,0,0,081.P3HeroLevel: db 182.P3EarthSpells: db %0000 0000 83.P3FireSpells: db %0000 000084.P3AirSpells: db %0000 000085.P3WaterSpells: db %0000 000086.P3AllSchoolsSpells: db %0000 000087.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 88.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont89.P3HeroDYDX: dw $ffff 91.P4hero1y: db 192.P4hero1x: db 193.P4hero1xp: dw 0 94.P4hero1move: db 20,2095.P4hero1mana: dw 10,1096.P4hero1manarec:db 5 97.P4hero1status: db 255 98.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 99.P4Hero1StatAttack: db 1100.P4Hero1StatDefense: db 2101.P4Hero1StatKnowledge: db 1 102.P4Hero1StatSpellDamage: db 1 103.P4HeroSkills: db 10,0,0,0,0,0104.P4HeroLevel: db 1105.P4EarthSpells: db %0000 0000 106.P4FireSpells: db %0000 0000107.P4AirSpells: db %0000 0000108.P4WaterSpells: db %0000 0000109.P4AllSchoolsSpells: db %0000 0000110.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 111.P4HeroSpecificInfo: dw HeroAddressesSnake2112.P4HeroDYDX: dw $ffff 116117Campaign02:118.StartingTowns: db 001,003,002,000 119.TavernHeroes: db 039,041,004,026,006,008,010,000,000,000120.Players: db 3,1,0,0,2 121.StartingResources:122.Gold: dw 20000123.Wood: dw 20124.Ore: dw 20125.Gems: dw 10126.Rubies: dw 10127.Castle1Player: db 1128.Castle2Player: db 2129.Castle3Player: db 3130.Castle4Player: db 255131.DaysToCompleteCampaign: db 4*30132.CampaignText: db "Reclaim the captured fortresses  ",255133134.P1hero1y: db 1135.P1hero1x: db 1136.P1hero1xp: dw 0 137.P1hero1move: db 20,20138.P1hero1mana: dw 10,10139.P1hero1manarec:db 5 140.P1hero1status: db 255 141.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 142.P1Hero1StatAttack: db 1143.P1Hero1StatDefense: db 2144.P1Hero1StatKnowledge: db 1 145.P1Hero1StatSpellDamage: db 1 146.P1HeroSkills: db 10,0,0,0,0,0147.P1HeroLevel: db 1148.P1EarthSpells: db %0000 0000 149.P1FireSpells: db %0000 0000150.P1AirSpells: db %0000 0000151.P1WaterSpells: db %0000 0000152.P1AllSchoolsSpells: db %0000 0000153.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 154.P1HeroSpecificInfo: dw HeroAddressesSnake2155.P1HeroDYDX: dw $ffff 157.P2hero1y: db 1158.P2hero1x: db 1159.P2hero1xp: dw 0 160.P2hero1move: db 20,20161.P2hero1mana: dw 10,10162.P2hero1manarec:db 5 163.P2hero1status: db 2 164.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw SDSnatcherUnitLevel1Growth | db SDSnatcherUnitLevel2Number | dw SDSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 165.P2Hero1StatAttack: db 1166.P2Hero1StatDefense: db 2167.P2Hero1StatKnowledge: db 1 168.P2Hero1StatSpellDamage: db 1 169.P2HeroSkills: db 01,0,0,0,0,0170.P2HeroLevel: db 1171.P2EarthSpells: db %0000 0000 172.P2FireSpells: db %0000 0000173.P2AirSpells: db %0000 0000174.P2WaterSpells: db %0000 0000175.P2AllSchoolsSpells: db %0000 0000176.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 177.P2HeroSpecificInfo: dw HeroAddressesSnatcher178.P2HeroDYDX: dw $ffff 180.P3hero1y: db 1181.P3hero1x: db 1182.P3hero1xp: dw 0 183.P3hero1move: db 20,20184.P3hero1mana: dw 10,10185.P3hero1manarec:db 5 186.P3hero1status: db 2 187.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 188.P3Hero1StatAttack: db 1189.P3Hero1StatDefense: db 2190.P3Hero1StatKnowledge: db 1 191.P3Hero1StatSpellDamage: db 1 192.P3HeroSkills: db 16,0,0,0,0,0193.P3HeroLevel: db 1194.P3EarthSpells: db %0000 0000 195.P3FireSpells: db %0000 0000196.P3AirSpells: db %0000 0000197.P3WaterSpells: db %0000 0000198.P3AllSchoolsSpells: db %0000 0000199.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 200.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont201.P3HeroDYDX: dw $ffff 203.P4hero1y: db 1204.P4hero1x: db 1205.P4hero1xp: dw 0 206.P4hero1move: db 20,20207.P4hero1mana: dw 10,10208.P4hero1manarec:db 5 209.P4hero1status: db 255 210.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 211.P4Hero1StatAttack: db 1212.P4Hero1StatDefense: db 2213.P4Hero1StatKnowledge: db 1 214.P4Hero1StatSpellDamage: db 1 215.P4HeroSkills: db 10,0,0,0,0,0216.P4HeroLevel: db 1217.P4EarthSpells: db %0000 0000 218.P4FireSpells: db %0000 0000219.P4AirSpells: db %0000 0000220.P4WaterSpells: db %0000 0000221.P4AllSchoolsSpells: db %0000 0000222.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 223.P4HeroSpecificInfo: dw HeroAddressesSnake2224.P4HeroDYDX: dw $ffff 228229Campaign03: 230.StartingTowns: db 004,002,000,000 231.TavernHeroes: db 047,019,000,000,000,000,000,000,000,000232.Players: db 2,1,0,2,2 233.StartingResources:234.Gold: dw 20000235.Wood: dw 20236.Ore: dw 20237.Gems: dw 10238.Rubies: dw 10239.Castle1Player: db 1240.Castle2Player: db 2241.Castle3Player: db 255242.Castle4Player: db 255243.DaysToCompleteCampaign: db 4*30244.CampaignText: db "  Break Trevor Belmont's curse   ",255245246.P1hero1y: db 1247.P1hero1x: db 1248.P1hero1xp: dw 0 249.P1hero1move: db 20,20250.P1hero1mana: dw 10,10251.P1hero1manarec:db 5 252.P1hero1status: db 255 253.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 254.P1Hero1StatAttack: db 1255.P1Hero1StatDefense: db 2256.P1Hero1StatKnowledge: db 1 257.P1Hero1StatSpellDamage: db 1 258.P1HeroSkills: db 10,0,0,0,0,0259.P1HeroLevel: db 1260.P1EarthSpells: db %0000 0000 261.P1FireSpells: db %0000 0000262.P1AirSpells: db %0000 0000263.P1WaterSpells: db %0000 0000264.P1AllSchoolsSpells: db %0000 0000265.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 266.P1HeroSpecificInfo: dw HeroAddressesSnake2267.P1HeroDYDX: dw $ffff 269.P2hero1y: db 1270.P2hero1x: db 1271.P2hero1xp: dw 0 272.P2hero1move: db 20,20273.P2hero1mana: dw 10,10274.P2hero1manarec:db 5 275.P2hero1status: db 2 276.P2Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 277.P2Hero1StatAttack: db 1278.P2Hero1StatDefense: db 2279.P2Hero1StatKnowledge: db 1 280.P2Hero1StatSpellDamage: db 1 281.P2HeroSkills: db 01,0,0,0,0,0282.P2HeroLevel: db 1283.P2EarthSpells: db %0000 0000 284.P2FireSpells: db %0000 0000285.P2AirSpells: db %0000 0000286.P2WaterSpells: db %0000 0000287.P2AllSchoolsSpells: db %0000 0000288.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 289.P2HeroSpecificInfo: dw HeroAddressesTrevorBelmont290.P2HeroDYDX: dw $ffff 292.P3hero1y: db 1293.P3hero1x: db 1294.P3hero1xp: dw 0 295.P3hero1move: db 20,20296.P3hero1mana: dw 10,10297.P3hero1manarec:db 5 298.P3hero1status: db 255 299.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 300.P3Hero1StatAttack: db 1301.P3Hero1StatDefense: db 2302.P3Hero1StatKnowledge: db 1 303.P3Hero1StatSpellDamage: db 1 304.P3HeroSkills: db 16,0,0,0,0,0305.P3HeroLevel: db 1306.P3EarthSpells: db %0000 0000 307.P3FireSpells: db %0000 0000308.P3AirSpells: db %0000 0000309.P3WaterSpells: db %0000 0000310.P3AllSchoolsSpells: db %0000 0000311.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 312.P3HeroSpecificInfo: dw HeroAddressesTrevorBelmont313.P3HeroDYDX: dw $ffff 315.P4hero1y: db 1316.P4hero1x: db 1317.P4hero1xp: dw 0 318.P4hero1move: db 20,20319.P4hero1mana: dw 10,10320.P4hero1manarec:db 5 321.P4hero1status: db 255 322.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 323.P4Hero1StatAttack: db 1324.P4Hero1StatDefense: db 2325.P4Hero1StatKnowledge: db 1 326.P4Hero1StatSpellDamage: db 1 327.P4HeroSkills: db 10,0,0,0,0,0328.P4HeroLevel: db 1329.P4EarthSpells: db %0000 0000 330.P4FireSpells: db %0000 0000331.P4AirSpells: db %0000 0000332.P4WaterSpells: db %0000 0000333.P4AllSchoolsSpells: db %0000 0000334.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 335.P4HeroSpecificInfo: dw HeroAddressesSnake2336.P4HeroDYDX: dw $ffff 340341Campaign04: 342.StartingTowns: db 005,001,003,002 343.TavernHeroes: db 002,028,015,030,032,000,000,000,000,000344.Players: db 3,1,0,0,2 345.StartingResources:346.Gold: dw 20000347.Wood: dw 20348.Ore: dw 20349.Gems: dw 10350.Rubies: dw 10351.Castle1Player: db 1352.Castle2Player: db 2353.Castle3Player: db 3354.Castle4Player: db 1355.DaysToCompleteCampaign: db 4*30356.CampaignText: db "  Overthrow the dark alliance    ",255357358.P1hero1y: db 1359.P1hero1x: db 1360.P1hero1xp: dw 0 361.P1hero1move: db 20,20362.P1hero1mana: dw 10,10363.P1hero1manarec:db 5 364.P1hero1status: db 255 365.P1Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 366.P1Hero1StatAttack: db 1367.P1Hero1StatDefense: db 2368.P1Hero1StatKnowledge: db 1 369.P1Hero1StatSpellDamage: db 1 370.P1HeroSkills: db 10,0,0,0,0,0371.P1HeroLevel: db 1372.P1EarthSpells: db %0000 0000 373.P1FireSpells: db %0000 0000374.P1AirSpells: db %0000 0000375.P1WaterSpells: db %0000 0000376.P1AllSchoolsSpells: db %0000 0000377.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 378.P1HeroSpecificInfo: dw HeroAddressesSnake2379.P1HeroDYDX: dw $ffff 381.P2hero1y: db 1382.P2hero1x: db 1383.P2hero1xp: dw 0 384.P2hero1move: db 20,20385.P2hero1mana: dw 10,10386.P2hero1manarec:db 5 387.P2hero1status: db 2 388.P2Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db DragonSlayerUnitLevel3Number | dw DragonSlayerUnitLevel3Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 389.P2Hero1StatAttack: db 1390.P2Hero1StatDefense: db 2391.P2Hero1StatKnowledge: db 1 392.P2Hero1StatSpellDamage: db 1 393.P2HeroSkills: db 01,0,0,0,0,0394.P2HeroLevel: db 1395.P2EarthSpells: db %0000 0000 396.P2FireSpells: db %0000 0000397.P2AirSpells: db %0000 0000398.P2WaterSpells: db %0000 0000399.P2AllSchoolsSpells: db %0000 0000400.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 401.P2HeroSpecificInfo: dw HeroAddressesPochi402.P2HeroDYDX: dw $ffff 404.P3hero1y: db 1405.P3hero1x: db 1406.P3hero1xp: dw 0 407.P3hero1move: db 20,20408.P3hero1mana: dw 10,10409.P3hero1manarec:db 5 410.P3hero1status: db 2 411.P3Hero1Units: db SdSnatcherUnitLevel1Number | dw SdSnatcherUnitLevel1Growth*2 | db SdSnatcherUnitLevel2Number | dw SdSnatcherUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 412.P3Hero1StatAttack: db 1413.P3Hero1StatDefense: db 2414.P3Hero1StatKnowledge: db 1 415.P3Hero1StatSpellDamage: db 1 416.P3HeroSkills: db 16,0,0,0,0,0417.P3HeroLevel: db 1418.P3EarthSpells: db %0000 0000 419.P3FireSpells: db %0000 0000420.P3AirSpells: db %0000 0000421.P3WaterSpells: db %0000 0000422.P3AllSchoolsSpells: db %0000 0000423.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 424.P3HeroSpecificInfo: dw HeroAddressesGillianSeed425.P3HeroDYDX: dw $ffff 427.P4hero1y: db 1428.P4hero1x: db 1429.P4hero1xp: dw 0 430.P4hero1move: db 20,20431.P4hero1mana: dw 10,10432.P4hero1manarec:db 5 433.P4hero1status: db 255 434.P4Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 435.P4Hero1StatAttack: db 1436.P4Hero1StatDefense: db 2437.P4Hero1StatKnowledge: db 1 438.P4Hero1StatSpellDamage: db 1 439.P4HeroSkills: db 10,0,0,0,0,0440.P4HeroLevel: db 1441.P4EarthSpells: db %0000 0000 442.P4FireSpells: db %0000 0000443.P4AirSpells: db %0000 0000444.P4WaterSpells: db %0000 0000445.P4AllSchoolsSpells: db %0000 0000446.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 447.P4HeroSpecificInfo: dw HeroAddressesSnake2448.P4HeroDYDX: dw $ffff 452453Campaign05: 454.StartingTowns: db 006,003,002,005 455.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000456.Players: db 4,1,0,0,0 457.StartingResources:458.Gold: dw 20000459.Wood: dw 20460.Ore: dw 20461.Gems: dw 10462.Rubies: dw 10463.Castle1Player: db 1464.Castle2Player: db 2465.Castle3Player: db 3466.Castle4Player: db 4467.DaysToCompleteCampaign: db 4*30468.CampaignText: db "   Restore peace to Felghana     ",255469470.P1hero1y: db 1471.P1hero1x: db 1472.P1hero1xp: dw 4600473.P1hero1move: db 20,20474.P1hero1mana: dw 20,20475.P1hero1manarec:db 5 476.P1hero1status: db 2 477.P1Hero1Units: db Ys3UnitLevel1Number | dw Ys3UnitLevel1Growth | db Ys3UnitLevel2Number | dw Ys3UnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 478.P1Hero1StatAttack: db 3479.P1Hero1StatDefense: db 2480.P1Hero1StatKnowledge: db 2 481.P1Hero1StatSpellDamage: db 2 482.P1HeroSkills: db 1,5,8,0,0,0483.P1HeroLevel: db 5484.P1EarthSpells: db %0000 0000 485.P1FireSpells: db %0000 0000486.P1AirSpells: db %0000 0000487.P1WaterSpells: db %0000 0000488.P1AllSchoolsSpells: db %0000 0000489.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 490.P1HeroSpecificInfo: dw HeroAddressesAdol491.P1HeroDYDX: dw $ffff 493.P2hero1y: db 1494.P2hero1x: db 1495.P2hero1xp: dw 0 496.P2hero1move: db 20,20497.P2hero1mana: dw 10,10498.P2hero1manarec:db 5 499.P2hero1status: db 2 500.P2Hero1Units: db SDSnatcherUnitLevel1Number | dw 005 | db SDSnatcherUnitLevel1Number | dw 006 | db SDSnatcherUnitLevel1Number | dw 004 | db SDSnatcherUnitLevel1Number | dw 002 | db SDSnatcherUnitLevel1Number | dw 005 | db SDSnatcherUnitLevel1Number | dw 008 501.P2Hero1StatAttack: db 1502.P2Hero1StatDefense: db 2503.P2Hero1StatKnowledge: db 1 504.P2Hero1StatSpellDamage: db 1 505.P2HeroSkills: db 01,0,0,0,0,0506.P2HeroLevel: db 1507.P2EarthSpells: db %0000 0000 508.P2FireSpells: db %0000 0000509.P2AirSpells: db %0000 0000510.P2WaterSpells: db %0000 0000511.P2AllSchoolsSpells: db %0000 0000512.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 513.P2HeroSpecificInfo: dw HeroAddressesRandomHajile514.P2HeroDYDX: dw $ffff 516.P3hero1y: db 1517.P3hero1x: db 1518.P3hero1xp: dw 0 519.P3hero1move: db 20,20520.P3hero1mana: dw 10,10521.P3hero1manarec:db 5 522.P3hero1status: db 2 523.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 524.P3Hero1StatAttack: db 1525.P3Hero1StatDefense: db 2526.P3Hero1StatKnowledge: db 1 527.P3Hero1StatSpellDamage: db 1 528.P3HeroSkills: db 16,0,0,0,0,0529.P3HeroLevel: db 1530.P3EarthSpells: db %0000 0000 531.P3FireSpells: db %0000 0000532.P3AirSpells: db %0000 0000533.P3WaterSpells: db %0000 0000534.P3AllSchoolsSpells: db %0000 0000535.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 536.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont537.P3HeroDYDX: dw $ffff 539.P4hero1y: db 1540.P4hero1x: db 1541.P4hero1xp: dw 0 542.P4hero1move: db 20,20543.P4hero1mana: dw 10,10544.P4hero1manarec:db 5 545.P4hero1status: db 2 546.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 547.P4Hero1StatAttack: db 1548.P4Hero1StatDefense: db 2549.P4Hero1StatKnowledge: db 1 550.P4Hero1StatSpellDamage: db 1 551.P4HeroSkills: db 10,0,0,0,0,0552.P4HeroLevel: db 1553.P4EarthSpells: db %0000 0000 554.P4FireSpells: db %0000 0000555.P4AirSpells: db %0000 0000556.P4WaterSpells: db %0000 0000557.P4AllSchoolsSpells: db %0000 0000558.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 559.P4HeroSpecificInfo: dw HeroAddressesGoemon2560.P4HeroDYDX: dw $ffff 568569Campaign06: 570.StartingTowns: db 007,006,000,000 571.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000572.Players: db 2,1,0,2,2 573.StartingResources:574.Gold: dw 20000575.Wood: dw 20576.Ore: dw 20577.Gems: dw 10578.Rubies: dw 10579.Castle1Player: db 1580.Castle2Player: db 2581.Castle3Player: db 255582.Castle4Player: db 255583.DaysToCompleteCampaign: db 100584.CampaignText: db "Find the castle guarded by Adol  ",255585586.P1hero1y: db 1587.P1hero1x: db 1588.P1hero1xp: dw 4600589.P1hero1move: db 20,20590.P1hero1mana: dw 10,10591.P1hero1manarec:db 5 592.P1hero1status: db 2 593.P1Hero1Units: db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+1 | db PsychoWorldUnitLevel1Number | dw PsychoWorldUnitLevel1Growth+2 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 594.P1Hero1StatAttack: db 4595.P1Hero1StatDefense: db 2596.P1Hero1StatKnowledge: db 1 597.P1Hero1StatSpellDamage: db 2 598.P1HeroSkills: db 1,5,8,0,0,0599.P1HeroLevel: db 5600.P1EarthSpells: db %0000 0000 601.P1FireSpells: db %0000 0000602.P1AirSpells: db %0000 0000603.P1WaterSpells: db %0000 0000604.P1AllSchoolsSpells: db %0000 0001605.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 606.P1HeroSpecificInfo: dw HeroAddressesPsychoWorld607.P1HeroDYDX: dw $ffff 609.P2hero1y: db 1610.P2hero1x: db 1611.P2hero1xp: dw 0 612.P2hero1move: db 20,20613.P2hero1mana: dw 10,10614.P2hero1manarec:db 5 615.P2hero1status: db 2 616.P2Hero1Units: db Ys3UnitLevel1Number | dw Ys3UnitLevel1Growth | db Ys3UnitLevel2Number | dw Ys3UnitLevel2Growth | db Ys3UnitLevel3Number | dw Ys3UnitLevel3Growth | db Ys3UnitLevel4Number | dw 1 | db Ys3UnitLevel4Number | dw 001 | db Ys3UnitLevel4Number | dw 002 617.P2Hero1StatAttack: db 1618.P2Hero1StatDefense: db 2619.P2Hero1StatKnowledge: db 1 620.P2Hero1StatSpellDamage: db 1 621.P2HeroSkills: db 01,0,0,0,0,0622.P2HeroLevel: db 1623.P2EarthSpells: db %0000 0000 624.P2FireSpells: db %0000 0000625.P2AirSpells: db %0000 0000626.P2WaterSpells: db %0000 0000627.P2AllSchoolsSpells: db %0000 0000628.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 629.P2HeroSpecificInfo: dw HeroAddressesAdol630.P2HeroDYDX: dw $ffff 632.P3hero1y: db 1633.P3hero1x: db 1634.P3hero1xp: dw 0 635.P3hero1move: db 20,20636.P3hero1mana: dw 10,10637.P3hero1manarec:db 5 638.P3hero1status: db 255 639.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 640.P3Hero1StatAttack: db 1641.P3Hero1StatDefense: db 2642.P3Hero1StatKnowledge: db 1 643.P3Hero1StatSpellDamage: db 1 644.P3HeroSkills: db 16,0,0,0,0,0645.P3HeroLevel: db 1646.P3EarthSpells: db %0000 0000 647.P3FireSpells: db %0000 0000648.P3AirSpells: db %0000 0000649.P3WaterSpells: db %0000 0000650.P3AllSchoolsSpells: db %0000 0000651.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 652.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont653.P3HeroDYDX: dw $ffff 655.P4hero1y: db 1656.P4hero1x: db 1657.P4hero1xp: dw 0 658.P4hero1move: db 20,20659.P4hero1mana: dw 10,10660.P4hero1manarec:db 5 661.P4hero1status: db 255 662.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 663.P4Hero1StatAttack: db 1664.P4Hero1StatDefense: db 2665.P4Hero1StatKnowledge: db 1 666.P4Hero1StatSpellDamage: db 1 667.P4HeroSkills: db 10,0,0,0,0,0668.P4HeroLevel: db 1669.P4EarthSpells: db %0000 0000 670.P4FireSpells: db %0000 0000671.P4AirSpells: db %0000 0000672.P4WaterSpells: db %0000 0000673.P4AllSchoolsSpells: db %0000 0000674.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 675.P4HeroSpecificInfo: dw HeroAddressesGoemon2676.P4HeroDYDX: dw $ffff 679680Campaign07: 681.StartingTowns: db 008,007,004,000 682.TavernHeroes: db 000,000,000,000,000,000,000,000,019,047683.Players: db 2,1,0,2,2 684.StartingResources:685.Gold: dw 20000686.Wood: dw 20687.Ore: dw 20688.Gems: dw 10689.Rubies: dw 10690.Castle1Player: db 1691.Castle2Player: db 2692.Castle3Player: db 255693.Castle4Player: db 255694.DaysToCompleteCampaign: db 80695.CampaignText: db "  Confront Lucia at her castle   ",255696697.P1hero1y: db 1698.P1hero1x: db 1699.P1hero1xp: dw 0 700.P1hero1move: db 20,20701.P1hero1mana: dw 10,10702.P1hero1manarec:db 5 703.P1hero1status: db 2 704.P1Hero1Units: db KingKongUnitLevel6Number | dw 1 | db 0 | dw 0 | db 0 | dw 0 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 705.P1Hero1StatAttack: db 1706.P1Hero1StatDefense: db 2707.P1Hero1StatKnowledge: db 1 708.P1Hero1StatSpellDamage: db 1 709.P1HeroSkills: db 10,0,0,0,0,0710.P1HeroLevel: db 1711.P1EarthSpells: db %0000 0000 712.P1FireSpells: db %0000 0000713.P1AirSpells: db %0000 0000714.P1WaterSpells: db %0000 0000715.P1AllSchoolsSpells: db %0000 0000716.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 717.P1HeroSpecificInfo: dw HeroAddressesMitchell718.P1HeroDYDX: dw $ffff 720.P2hero1y: db 1721.P2hero1x: db 1722.P2hero1xp: dw 0 723.P2hero1move: db 20,20724.P2hero1mana: dw 10,10725.P2hero1manarec:db 5 726.P2hero1status: db 2 727.P2Hero1Units: db PsychoWorldUnitLevel6Number | dw 1 | db PsychoWorldUnitLevel5Number | dw 1 | db 000 | dw 000 | db 000 | dw 000 | db PsychoWorldUnitLevel1Number | dw 0040 | db PsychoWorldUnitLevel1Number | dw 003 728.P2Hero1StatAttack: db 1729.P2Hero1StatDefense: db 2730.P2Hero1StatKnowledge: db 1 731.P2Hero1StatSpellDamage: db 1 732.P2HeroSkills: db 01,0,0,0,0,0733.P2HeroLevel: db 1734.P2EarthSpells: db %0000 0000 735.P2FireSpells: db %0000 0000736.P2AirSpells: db %0000 0000737.P2WaterSpells: db %0000 0000738.P2AllSchoolsSpells: db %0000 0000739.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 740.P2HeroSpecificInfo: dw HeroAddressesPsychoWorld741.P2HeroDYDX: dw $ffff 743.P3hero1y: db 1744.P3hero1x: db 1745.P3hero1xp: dw 0 746.P3hero1move: db 20,20747.P3hero1mana: dw 10,10748.P3hero1manarec:db 5 749.P3hero1status: db 255 750.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 751.P3Hero1StatAttack: db 1752.P3Hero1StatDefense: db 2753.P3Hero1StatKnowledge: db 1 754.P3Hero1StatSpellDamage: db 1 755.P3HeroSkills: db 16,0,0,0,0,0756.P3HeroLevel: db 1757.P3EarthSpells: db %0000 0000 758.P3FireSpells: db %0000 0000759.P3AirSpells: db %0000 0000760.P3WaterSpells: db %0000 0000761.P3AllSchoolsSpells: db %0000 0000762.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 763.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont764.P3HeroDYDX: dw $ffff 766.P4hero1y: db 1767.P4hero1x: db 1768.P4hero1xp: dw 0 769.P4hero1move: db 20,20770.P4hero1mana: dw 10,10771.P4hero1manarec:db 5 772.P4hero1status: db 255 773.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 774.P4Hero1StatAttack: db 1775.P4Hero1StatDefense: db 2776.P4Hero1StatKnowledge: db 1 777.P4Hero1StatSpellDamage: db 1 778.P4HeroSkills: db 10,0,0,0,0,0779.P4HeroLevel: db 1780.P4EarthSpells: db %0000 0000 781.P4FireSpells: db %0000 0000782.P4AirSpells: db %0000 0000783.P4WaterSpells: db %0000 0000784.P4AllSchoolsSpells: db %0000 0000785.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 786.P4HeroSpecificInfo: dw HeroAddressesGoemon2787.P4HeroDYDX: dw $ffff 797798Campaign08: 799.StartingTowns: db 009,008,000,000 800.TavernHeroes: db 043,000,000,000,000,000,000,000,000,000801.Players: db 2,1,0,2,2 802.StartingResources:803.Gold: dw 20000804.Wood: dw 20805.Ore: dw 20806.Gems: dw 10807.Rubies: dw 10808.Castle1Player: db 1809.Castle2Player: db 2810.Castle3Player: db 255811.Castle4Player: db 255812.DaysToCompleteCampaign: db 60813.CampaignText: db "Prevent the artifact activation  ",255814815.P1hero1y: db 1816.P1hero1x: db 1817.P1hero1xp: dw 0 818.P1hero1move: db 20,20819.P1hero1mana: dw 10,10820.P1hero1manarec:db 5 821.P1hero1status: db 2 822.P1Hero1Units: db GolvelliusUnitLevel1Number | dw 10 | db GolvelliusUnitLevel2Number | dw 6 | db GolvelliusUnitLevel5Number | dw 2 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 823.P1Hero1StatAttack: db 1824.P1Hero1StatDefense: db 2825.P1Hero1StatKnowledge: db 1 826.P1Hero1StatSpellDamage: db 1 827.P1HeroSkills: db 10,0,0,0,0,0828.P1HeroLevel: db 1829.P1EarthSpells: db %0000 0000 830.P1FireSpells: db %0000 0000831.P1AirSpells: db %0000 0000832.P1WaterSpells: db %0000 0000833.P1AllSchoolsSpells: db %0000 0000834.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 835.P1HeroSpecificInfo: dw HeroAddressesGolvellius836.P1HeroDYDX: dw $ffff 838.P2hero1y: db 1839.P2hero1x: db 1840.P2hero1xp: dw 0 841.P2hero1move: db 20,20842.P2hero1mana: dw 10,10843.P2hero1manarec:db 5 844.P2hero1status: db 2 845.P2Hero1Units: db KingKongUnitLevel6Number | dw 1 | db 0 | dw 0 | db KingKongUnitLevel3Number | dw 010 | db KingKongUnitLevel3Number | dw 010 | db 000 | dw 000 | db KingKongUnitLevel5Number | dw 003 846.P2Hero1StatAttack: db 1847.P2Hero1StatDefense: db 2848.P2Hero1StatKnowledge: db 1 849.P2Hero1StatSpellDamage: db 1 850.P2HeroSkills: db 10,0,0,0,0,0851.P2HeroLevel: db 1852.P2EarthSpells: db %0000 0000 853.P2FireSpells: db %0000 0000854.P2AirSpells: db %0000 0000855.P2WaterSpells: db %0000 0000856.P2AllSchoolsSpells: db %0000 0000857.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 858.P2HeroSpecificInfo: dw HeroAddressesMitchell859.P2HeroDYDX: dw $ffff 861.P3hero1y: db 1862.P3hero1x: db 1863.P3hero1xp: dw 0 864.P3hero1move: db 20,20865.P3hero1mana: dw 10,10866.P3hero1manarec:db 5 867.P3hero1status: db 255 868.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 869.P3Hero1StatAttack: db 1870.P3Hero1StatDefense: db 2871.P3Hero1StatKnowledge: db 1 872.P3Hero1StatSpellDamage: db 1 873.P3HeroSkills: db 16,0,0,0,0,0874.P3HeroLevel: db 1875.P3EarthSpells: db %0000 0000 876.P3FireSpells: db %0000 0000877.P3AirSpells: db %0000 0000878.P3WaterSpells: db %0000 0000879.P3AllSchoolsSpells: db %0000 0000880.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 881.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont882.P3HeroDYDX: dw $ffff 884.P4hero1y: db 1885.P4hero1x: db 1886.P4hero1xp: dw 0 887.P4hero1move: db 20,20888.P4hero1mana: dw 10,10889.P4hero1manarec:db 5 890.P4hero1status: db 255 891.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 892.P4Hero1StatAttack: db 1893.P4Hero1StatDefense: db 2894.P4Hero1StatKnowledge: db 1 895.P4Hero1StatSpellDamage: db 1 896.P4HeroSkills: db 10,0,0,0,0,0897.P4HeroLevel: db 1898.P4EarthSpells: db %0000 0000 899.P4FireSpells: db %0000 0000900.P4AirSpells: db %0000 0000901.P4WaterSpells: db %0000 0000902.P4AllSchoolsSpells: db %0000 0000903.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 904.P4HeroSpecificInfo: dw HeroAddressesGoemon2905.P4HeroDYDX: dw $ffff 912913Campaign09: 914.StartingTowns: db 010,001,000,000 915.TavernHeroes: db 000,000,000,000,000,000,000,000,000,000916.Players: db 2,1,0,2,2 917.StartingResources:918.Gold: dw 20000919.Wood: dw 20920.Ore: dw 20921.Gems: dw 10922.Rubies: dw 10923.Castle1Player: db 1924.Castle2Player: db 2925.Castle3Player: db 255926.Castle4Player: db 255927.DaysToCompleteCampaign: db 75928.CampaignText: db "Find a safe trail to Drasle's Den",255929930.P1hero1y: db 1931.P1hero1x: db 1932.P1hero1xp: dw 0 933.P1hero1move: db 20,20934.P1hero1mana: dw 10,10935.P1hero1manarec:db 5 936.P1hero1status: db 2 937.P1Hero1Units: db ContraGroupAUnitLevel1Number | dw ContraGroupAUnitLevel1Growth | db ContraGroupAUnitLevel2Number | dw ContraGroupAUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 938.P1Hero1StatAttack: db 1939.P1Hero1StatDefense: db 2940.P1Hero1StatKnowledge: db 1 941.P1Hero1StatSpellDamage: db 1 942.P1HeroSkills: db 10,0,0,0,0,0943.P1HeroLevel: db 1944.P1EarthSpells: db %0000 0000 945.P1FireSpells: db %0000 0000946.P1AirSpells: db %0000 0000947.P1WaterSpells: db %0000 0000948.P1AllSchoolsSpells: db %0000 0000949.P1Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 950.P1HeroSpecificInfo: dw HeroAddressesBillRizer951.P1HeroDYDX: dw $ffff 953.P2hero1y: db 1954.P2hero1x: db 1955.P2hero1xp: dw 0 956.P2hero1move: db 20,20957.P2hero1mana: dw 10,10958.P2hero1manarec:db 5 959.P2hero1status: db 2 960.P2Hero1Units: db DragonSlayerUnitLevel1Number | dw DragonSlayerUnitLevel1Growth | db DragonSlayerUnitLevel2Number | dw DragonSlayerUnitLevel2Growth | db DragonSlayerUnitLevel3Number | dw DragonSlayerUnitLevel3Growth | db DragonSlayerUnitLevel4Number | dw DragonSlayerUnitLevel4Growth | db DragonSlayerUnitLevel5Number | dw DragonSlayerUnitLevel5Growth | db 000 | dw 000 961.P2Hero1StatAttack: db 1962.P2Hero1StatDefense: db 2963.P2Hero1StatKnowledge: db 1 964.P2Hero1StatSpellDamage: db 1 965.P2HeroSkills: db 10,0,0,0,0,0966.P2HeroLevel: db 1967.P2EarthSpells: db %0000 0000 968.P2FireSpells: db %0000 0000969.P2AirSpells: db %0000 0000970.P2WaterSpells: db %0000 0000971.P2AllSchoolsSpells: db %0000 0000972.P2Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 973.P2HeroSpecificInfo: dw HeroAddressesPochi974.P2HeroDYDX: dw $ffff 976.P3hero1y: db 1977.P3hero1x: db 1978.P3hero1xp: dw 0 979.P3hero1move: db 20,20980.P3hero1mana: dw 10,10981.P3hero1manarec:db 5 982.P3hero1status: db 255 983.P3Hero1Units: db CastleVaniaUnitLevel1Number | dw CastleVaniaUnitLevel1Growth | db CastleVaniaUnitLevel2Number | dw CastleVaniaUnitLevel2Growth | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 984.P3Hero1StatAttack: db 1985.P3Hero1StatDefense: db 2986.P3Hero1StatKnowledge: db 1 987.P3Hero1StatSpellDamage: db 1 988.P3HeroSkills: db 16,0,0,0,0,0989.P3HeroLevel: db 1990.P3EarthSpells: db %0000 0000 991.P3FireSpells: db %0000 0000992.P3AirSpells: db %0000 0000993.P3WaterSpells: db %0000 0000994.P3AllSchoolsSpells: db %0000 0000995.P3Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 996.P3HeroSpecificInfo: dw HeroAddressesSimonBelmont997.P3HeroDYDX: dw $ffff 999.P4hero1y: db 11000.P4hero1x: db 11001.P4hero1xp: dw 0 1002.P4hero1move: db 20,201003.P4hero1mana: dw 10,101004.P4hero1manarec:db 5 1005.P4hero1status: db 255 1006.P4Hero1Units: db GoemonUnitLevel1Number | dw GoemonUnitLevel1Growth | db GoemonUnitLevel2Number | dw GoemonUnitLevel2Growth | db GoemonUnitLevel1Number | dw 004 | db 000 | dw 000 | db 000 | dw 000 | db 000 | dw 000 1007.P4Hero1StatAttack: db 11008.P4Hero1StatDefense: db 21009.P4Hero1StatKnowledge: db 1 1010.P4Hero1StatSpellDamage: db 1 1011.P4HeroSkills: db 10,0,0,0,0,01012.P4HeroLevel: db 11013.P4EarthSpells: db %0000 0000 1014.P4FireSpells: db %0000 00001015.P4AirSpells: db %0000 00001016.P4WaterSpells: db %0000 00001017.P4AllSchoolsSpells: db %0000 00001018.P4Inventory: db 045,045,045,045,045,045,045,045,045, 045,045,045,045,045,045 1019.P4HeroSpecificInfo: dw HeroAddressesGoemon21020.P4HeroDYDX: dw $ffff 1024102610371052endCampaignInfo:MSXHeroes.asm 1906 dephase1907 DS RomBlockSize- $ and (RomBlockSize-1),-1 19091910ds $4000,-11911ds $4000,-119151919Upper4MB:1921SaveDataBlock1: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1922 ds $10000,$ff1923SaveDataBlock2: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1924 ds $10000,$ff1925SaveDataBlock3: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1926 ds $10000,$ff1927SaveDataBlock4: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1928 ds $10000,$ff1929SaveDataBlock5: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1930 ds $10000,$ff1931SaveDataBlock6: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1932 ds $10000,$ff1933SaveDataBlock7: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1934 ds $10000,$ff1935SaveDataBlock8: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1936 ds $10000,$ff1937SaveDataBlock9: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1938 ds $10000,$ff1939SaveDataBlock10: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1940 ds $10000,$ff1941SaveDataBlock11: equ ($-RomStartAddress) and (romsize-1) /RomBlockSize 1942 db 8 1943 DS RomBlockSize- $ and (RomBlockSize-1),-1 1952 ds (16*$80000)-Upper4MB,$ff1954